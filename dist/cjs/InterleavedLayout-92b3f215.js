'use strict';

const BufferView = require('./BufferView-9dddf564.js');
const types = require('./types-a82528bf.js');

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class N{constructor(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(const i of e.fieldNames){const t=e.fields.get(i);this[i]=new t.constructor(this.buffer,t.offset,this.stride);}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const i=this[e];return i&&i.elementCount===t.ElementCount&&i.elementType===t.ElementType?i:null}slice(e,t){return new N(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t,i,s){const r=this.stride;if(r%4==0){const n=new Uint32Array(e.buffer,t*r,s*r/4);new Uint32Array(this.buffer,i*r,s*r/4).set(n);}else {const n=new Uint8Array(e.buffer,t*r,s*r);new Uint8Array(this.buffer,i*r,s*r).set(n);}}}class T{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[];}vec2f(t,i){return this.appendField(t,BufferView.u,i),this}vec2f64(e,i){return this.appendField(e,BufferView.m,i),this}vec3f(e,t){return this.appendField(e,BufferView.i,t),this}vec3f64(e,t){return this.appendField(e,BufferView.T,t),this}vec4f(e,t){return this.appendField(e,BufferView.c,t),this}vec4f64(e,t){return this.appendField(e,BufferView.h,t),this}mat3f(e,t){return this.appendField(e,BufferView.l,t),this}mat3f64(e,t){return this.appendField(e,BufferView.a,t),this}mat4f(e,t){return this.appendField(e,BufferView.p,t),this}mat4f64(e,t){return this.appendField(e,BufferView.b,t),this}vec4u8(e,t){return this.appendField(e,BufferView.x,t),this}f32(e,t){return this.appendField(e,BufferView.y,t),this}f64(e,t){return this.appendField(e,BufferView.o,t),this}u8(e,t){return this.appendField(e,BufferView.d,t),this}u16(e,t){return this.appendField(e,BufferView.g,t),this}i8(e,t){return this.appendField(e,BufferView.j,t),this}vec2i8(e,t){return this.appendField(e,BufferView.V,t),this}vec2i16(e,t){return this.appendField(e,BufferView.q,t),this}vec2u8(e,t){return this.appendField(e,BufferView.A,t),this}vec4u16(e,t){return this.appendField(e,BufferView.L,t),this}u32(e,t){return this.appendField(e,BufferView.B,t),this}appendField(e,t,i){const s=t.ElementCount*types.e(t.ElementType),r=this.stride;this.fields.set(e,{size:s,constructor:t,offset:r,optional:i}),this.stride+=s,this.fieldNames.push(e);}alignTo(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}hasField(e){return this.fieldNames.indexOf(e)>=0}createBuffer(e){return new N(this,e)}createView(e){return new N(this,e)}clone(){const e=new T;return e.stride=this.stride,e.fields=new Map,this.fields.forEach(((t,i)=>e.fields.set(i,t))),e.fieldNames=this.fieldNames.slice(),e.BufferType=this.BufferType,e}}function A(){return new T}

exports.A = A;
