'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

const index = require('./index-fde8502c.js');
const request = require('./messageBundle-8be88d04.js');
const Graphic = require('./Graphic-0aff6059.js');
const projection = require('./projection-b19710fa.js');
const geometryServiceUtils = require('./geometryServiceUtils-8e2c66dc.js');
const SimpleLineSymbol = require('./symbols-29b793e5.js');
require('./geometry-ef17530a.js');
const toGeoCoordinateString = require('./toGeoCoordinateString-9c336468.js');
const project = require('./project-dab29fc8.js');
const number = require('./number-5cee27f2.js');
const GoTo = require('./GoTo-be01affb.js');
const Heading = require('./Heading-d7c5e432.js');
const accessibleHandler = require('./accessibleHandler-652e5d90.js');
require('./PopupTemplate-a0b855f8.js');
require('./opacityUtils-f2e4b347.js');
require('./enumeration-f235fe07.js');
require('./Identifiable-a4f50f85.js');
require('./jsonUtils-b6068079.js');
require('./mathUtils-af6066f0.js');
require('./common-41a349f2.js');
require('./unitUtils-083cb8d0.js');
require('./mat4-f68486bc.js');
require('./aaBoundingRect-56648c00.js');
require('./geodesicConstants-047d586a.js');
require('./Portal-8d16604d.js');
require('./Symbol-f0556e23.js');
require('./Color-7d915caa.js');
require('./colorUtils-e70dbab5.js');
require('./screenUtils-d911ae62.js');
require('./aaBoundingBox-c372701a.js');
require('./persistableUrlUtils-c611d652.js');
require('./utils-8a0a0870.js');
require('./units-77498be1.js');

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e=class extends request.p{constructor(o){super(o),this.format=null,this.position={coordinate:null,location:null};}get displayCoordinate(){const o=this.get("format");return o&&o.getDisplayCoordinate(this.get("position.coordinate"))}};request.e([request.d({readOnly:!0})],e.prototype,"displayCoordinate",null),request.e([request.d()],e.prototype,"format",void 0),request.e([request.d()],e.prototype,"position",void 0),e=request.e([request.i("esri.widgets.CoordinateConversion.support.Conversion")],e);const i=e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$1={utm:{conversionMode:"utmDefault",addSpaces:!0},usng:{numOfDigits:5,rounding:!1,addSpaces:!1},mgrs:{rounding:!1}},f$1=new Array(3);function u$1(e,o){const t=d$1(o);return [e[0].toFixed(t),e[1].toFixed(t)]}function d$1(e){return e>=500?6:e<500&&e>=50?7:e<50&&e>=5?8:9}function p$2(o){const{geometryServiceURLPromise:t,coordinate:n,spatialReference:i,formatName:c}=o;return t.then((o=>toGeoCoordinateString.t(o,{strings:[n],sr:i,conversionType:c}).then((e=>{const o=new request.b$2({x:e[0][0],y:e[0][1],spatialReference:i});if(!y$1(o))throw e;return o})).catch((o=>{throw new request.s("coordinate-conversion:from-geo-coordinate-string-failed","Failed to convert coordinate notation",{notationResult:o})}))))}function l$1(e,o){const t=e.indexOf(",")>=0?",":" ",[r,n,i]=e.split(t).map((e=>{const o=e.trim();return o?Number(o):null}));if(!g$2(r)||!g$2(n))return null;const c=new request.b$2({x:r,y:n,spatialReference:o||request.k.WGS84});return i&&(c.z=i,c.hasZ=!0),c}function g$2(e){return "number"==typeof e&&isFinite(e)}function y$1(e){return e&&g$2(e.x)&&g$2(e.y)}function w$2(e,o){if(e.spatialReference.isGeographic&&o){const[t,r]=u$1([e.x,e.y],o);return `${t}, ${r}`}return `${e.x.toFixed(3)}, ${e.y.toFixed(3)}`}async function j(r,i){const{spatialReference:a,geometryServiceURLPromise:s,location:m,scale:u}=r;if(!a||m.spatialReference.wkid===a.wkid)return {location:m,coordinate:w$2(m,u)};const d=request.M$2(m,a);if(request.r(d))return {location:d,coordinate:w$2(d,u)};if(f$1[0]===m&&f$1[1]===a.wkid)return f$1[2];f$1[0]=m,f$1[1]=a.wkid;const p=s.then((e=>project.n(e,new project.a({geometries:[m],outSpatialReference:a}),{signal:i}))).then((e=>{if(!y$1(e[0]))throw e[0];return {location:e[0],coordinate:w$2(e[0],u)}})).catch((o=>{throw new request.s("coordinate-conversion:projection-failed","Failed to project point",{projectionResult:o})}));return f$1[2]=p,p}async function h(o){const{formatName:t,location:r,geometryServiceURLPromise:n}=o,c=m$1[t]||{},a={coordinates:[[r.x,r.y]],sr:r.spatialReference,conversionType:t,...c},s=await n;try{const e=await toGeoCoordinateString.t$1(s,a),o=e[0];if(!o)throw e;return o}catch(f){throw new request.s("coordinate-conversion:to-geo-coordinate-string-failed","Failed to convert coordinate notation",{notationResult:f})}}function R$1(e){return "dd"===e||"dms"===e||"ddm"===e||"mgrs"===e||"usng"===e||"utm"===e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function g$1(n,e){const t=[];n=(n=(n=n.replace(/[\u00B0\u00BA]/g,"^")).replace(/\u2032/g,"'")).replace(/\u2033/g,'"');const o=M$1(e);return projection.g.dms_to_geog(o,1,[n],t)?new request.b$2(t[0][0],t[0][1],e||request.k.WGS84):null}function w$1(n,e,t){const o=[],r=v(t);if(-1===r)return console.warn(`invalid conversionMode: ${t}`),null;const a=M$1(e);return projection.T.mgrs_to_geog_extended(a,1,[n],r,o)?new request.b$2(o[0][0],o[0][1],e||request.k.WGS84):null}function E$1(n,e){const t=[];!e&&/\(.+27/.test(n)&&(e=request.k.GCS_NAD_1927);const o=M$1(e);return projection.f.usng_to_geog(o,1,[n],t)?new request.b$2(t[0][0],t[0][1],e||request.k.WGS84):null}function m(n,e,t){const o=[],r=R(t);if(-1===r)return console.warn(`invalid conversionMode: ${t}`),null;const i=M$1(e);return projection.O$1.utm_to_geog(i,1,[n],r,o)?new request.b$2(o[0][0],o[0][1],e||request.k.WGS84):null}function P(n,e,t=0){const o=[[n.x,n.y]],i=[],a=M$1(n.spatialReference);let s=0;switch(e){case"dd":s=projection.g.geog_to_dd(a,1,o,t,i);break;case"ddm":s=projection.g.geog_to_ddm(a,1,o,t,i);break;case"dms":s=projection.g.geog_to_dms(a,1,o,t,i);break;default:return console.warn(`invalid format: ${e}`),null}return s?i[0]:null}function k(n,e,t=0,o=!1){const r=[[n.x,n.y]],a=[],s=M$1(n.spatialReference);let c=v(e);if(-1===c)return console.warn(`invalid conversionMode: ${e}`),null;o&&(c|=projection.T.PE_MGRS_ADD_SPACES);return projection.T.geog_to_mgrs_extended(s,1,r,t,!1,c,a)?a[0]:null}function p$1(n,e=0,t=!1){const o=[[n.x,n.y]],r=[],i=M$1(n.spatialReference);return projection.f.geog_to_usng(i,1,o,e,!1,t,r)?r[0]:null}function G$1(n,e,t=!1){const o=[[n.x,n.y]],r=[],i=M$1(n.spatialReference);let a=R(e);if(-1===a)return console.warn(`invalid conversionMode: ${e}`),null;t&&(a|=projection.O$1.PE_UTM_OPTS_ADD_SPACES);return projection.O$1.geog_to_utm(i,1,o,a,r)?r[0]:null}function M$1(e){let t=null;if(e||(e=request.k.WGS84),e.wkid){if(t=projection.i.geogcs(e.wkid),!t)throw new request.s("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else {if(!e.wkt)throw new request.s("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(t=projection.i.fromString(projection.E.PE_TYPE_GEOGCS,e.wkt),!t)throw new request.s("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return t}function v(n){let e=-1;switch(n){case"automatic":e=projection.T.PE_MGRS_STYLE_AUTO;break;case"new-180-in-zone-01":e=projection.T.PE_MGRS_STYLE_NEW|projection.T.PE_MGRS_180_ZONE_1_PLUS;break;case"new-180-in-zone-60":e=projection.T.PE_MGRS_STYLE_NEW;break;case"old-180-in-zone-01":e=projection.T.PE_MGRS_STYLE_OLD|projection.T.PE_MGRS_180_ZONE_1_PLUS;break;case"old-180-in-zone-60":e=projection.T.PE_MGRS_STYLE_OLD;}return e}function R(n){let e=-1;switch(n){case"latitude-band-indicators":e=projection.O$1.PE_UTM_OPTS_NONE;break;case"north-south-indicators":e=projection.O$1.PE_UTM_OPTS_NS;}return e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let C$1=class extends request.p{constructor(e){super(e),this.conversionInfo=null,this.coordinateSegments=null,this.defaultPattern=null,this.name=null,this.viewModel=null;}get currentPattern(){return this._get("currentPattern")||this._get("defaultPattern")}set currentPattern(e){this._set("currentPattern",e);}get hasDisplayProperties(){return !(!this.defaultPattern||!this.coordinateSegments)}get spatialReference(){const e=this.get("conversionInfo.spatialReference")||request.k.WGS84;return "basemap"===this.name?this._viewSpatialReference:e}set spatialReference(e){void 0===e&&this._clearOverride("spatialReference"),this._override("spatialReference",e);}get _viewSpatialReference(){return this.get("viewModel.view.spatialReference")||request.k.WGS84}get _additionalCharactersPattern(){const e=this.get("coordinateSegments");if(!e)return null;const t=e.map((e=>e.alias)),r=this.currentPattern.replace(new RegExp(`["nsew${t.join()}]`,"gi"),"").replace(/\ /g,"");return new RegExp(`[${r}]`,"g")}convert(e,t){if(!y$1(e))return Promise.reject(new request.s("format:invalid-point","Could not convert invalid point.",{point:e}));const o=this.get("conversionInfo.convert");return o?Promise.resolve().then((()=>o(e))):this._project(e,this.spatialReference,t).then((e=>this._getCoordinate(e).then((t=>({location:e,coordinate:t})))))}getConversionStrategy(){const e=this._viewSpatialReference;return this.get("conversionInfo.convert")||this.get("viewModel.formatterAvailable")||"xy"===this.name&&(e.isWebMercator||e.isWGS84)||"basemap"===this.name?"client":"server"}getDisplayCoordinate(e){if(!e)return null;if(!this.coordinateSegments||!this.currentPattern)return e;let t=this.currentPattern;const r=this._getSegmentMatches(e,!1);for(let o=this.coordinateSegments.length-1;o>=0;o--){const e=this.coordinateSegments[o];t=t.replace(e.alias,r[o]);}return t}parseUserInput(e){let t=this.defaultPattern.replace(this._additionalCharactersPattern,"");e=e.replace(this._additionalCharactersPattern,"");const r=this._getSegmentMatches(e,!0);for(let o=this.coordinateSegments.length-1;o>=0;o--){const e=this.coordinateSegments[o];t=t.replace(e.alias,r[o]);}return t}_getSegmentMatches(e,t){const r=[];for(let o=0;o<this.coordinateSegments.length;o++){const i=this.coordinateSegments[o],s=e.match(i.searchPattern);if(!s){r.push("");continue}let n=s[0];if(e=e.replace(n,"").trim(),i.substitution){const e=t?i.substitution.input(n):i.substitution.output(n);e&&(n=e);}r.push(n);}return r}reverseConvert(e){const t=this.parseUserInput(e),o=this.get("conversionInfo.reverseConvert"),i=R$1(this.name);let s;if(o)s=o(t);else if("xy"===this.name||"basemap"===this.name)s=l$1(t,this.spatialReference);else if(this.viewModel.formatterAvailable)switch(this.name){case"dd":case"ddm":case"dms":s=g$1(t,this.spatialReference);break;case"mgrs":{const e="automatic";s=w$1(t,this.spatialReference,e);break}case"utm":{const e="latitude-band-indicators";s=m(t,this.spatialReference,e);break}case"usng":s=E$1(t,this.spatialReference);break;default:s=null;}else if(i){var m$1;return p$2({coordinate:t,spatialReference:this.spatialReference,formatName:this.name,geometryServiceURLPromise:null==(m$1=this.viewModel)?void 0:m$1.geometryServiceURLPromise})}return s?this._project(s,this._viewSpatialReference):Promise.reject(new request.s("format:invalid-input","Could not parse input into point.",{userInput:e}))}_getCoordinate(e){const t=this.get("viewModel.view.scale");if(!y$1(e))return Promise.reject(new request.s("format:invalid-point","Could not transform invalid point into coordinate.",{point:e}));if(this.get("viewModel.formatterAvailable")||"basemap"===this.name||"xy"===this.name)switch(this.name){case"dd":case"ddm":case"dms":{const r=d$1(t);return Promise.resolve(P(e,this.name,r))}case"mgrs":{const t=!1,r=5,o="automatic";return Promise.resolve(k(e,o,r,t))}case"usng":{const t=!1,r=5;return Promise.resolve(p$1(e,r,t))}case"utm":{const t=!0,r="latitude-band-indicators";return Promise.resolve(G$1(e,r,t))}default:return Promise.resolve(w$2(e,t))}var o;return R$1(this.name)?h({formatName:this.name,location:e,geometryServiceURLPromise:null==(o=this.viewModel)?void 0:o.geometryServiceURLPromise}):Promise.resolve(w$2(e,t))}_project(e,t,r){var i,s;if(request.E$2(e.spatialReference,t)||!t)return Promise.resolve(e);if(null!=(i=this.viewModel)&&i.formatterAvailable&&projection.H())return Promise.resolve(projection.O(e,t));if(null==(s=this.viewModel)||!s.formatterAvailable){var n,a,l;const i=request.M$2(e,t);return request.r(i)?Promise.resolve(i):j({location:e,spatialReference:t,geometryServiceURLPromise:null==(n=this.viewModel)?void 0:n.geometryServiceURLPromise,scale:null==(a=this.viewModel)||null==(l=a.view)?void 0:l.scale},r).then((e=>e.location))}return null}};request.e([request.d()],C$1.prototype,"conversionInfo",void 0),request.e([request.d()],C$1.prototype,"coordinateSegments",void 0),request.e([request.d()],C$1.prototype,"currentPattern",null),request.e([request.d()],C$1.prototype,"defaultPattern",void 0),request.e([request.d({readOnly:!0})],C$1.prototype,"hasDisplayProperties",null),request.e([request.d()],C$1.prototype,"name",void 0),request.e([request.d({type:request.k})],C$1.prototype,"spatialReference",null),request.e([request.d()],C$1.prototype,"viewModel",void 0),request.e([request.d({readOnly:!0})],C$1.prototype,"_viewSpatialReference",null),request.e([request.d({readOnly:!0})],C$1.prototype,"_additionalCharactersPattern",null),C$1=request.e([request.i("esri.widgets.CoordinateConversion.support.Format")],C$1);const U$1=C$1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s=number.r().decimal,r={N:"north",S:"south",E:"east",W:"west"},o=`°${"‎"}`,d=new RegExp(`-?\\d+[\\.|\\${s}]?\\d*`),u=/^[\\0]+(?=\d)/;function c(t,e){const i="ar"===request.i$6(),n={ddm:`Y${o} A'${t.abbreviatedDirections.north}, X${o} B'${t.abbreviatedDirections.east}`,dms:`Y${o} A' B"${t.abbreviatedDirections.north}, X${o} C' D"${t.abbreviatedDirections.east}`,dd:`Y${o}${t.abbreviatedDirections.north}, X${o}${t.abbreviatedDirections.east}`},s={ddm:`${t.abbreviatedDirections.north}${o}Y 'A, ${t.abbreviatedDirections.east}${o}X 'B`,dms:`${t.abbreviatedDirections.north}${o}Y 'A "B, ${t.abbreviatedDirections.east}${o}X 'C "D`,dd:`${t.abbreviatedDirections.north}${o}Y, ${t.abbreviatedDirections.east}${o}X`};e.forEach((t=>{const{name:e}=t;if("dms"===e||"dd"===e||"ddm"===e){const a=t.defaultPattern===t.currentPattern,r=i?s[e]:n[e];t.defaultPattern=r,a&&(t.currentPattern=r);}}));}function p(t){const e=t.abbreviatedDirections.north,i=t.abbreviatedDirections.south,a=t.abbreviatedDirections.east,u=t.abbreviatedDirections.west,p={};p[e]="N",p[i]="S",p[a]="E",p[u]="W";const $=new RegExp(`N|S|${e}|${i}`,"i"),h=new RegExp(`E|W|${a}|${u}`,"i"),g=[new U$1({name:"basemap",coordinateSegments:[{alias:"X",description:"easting",searchPattern:d,substitution:{input:t=>l(t),output:t=>b$1(t)}},{alias:"Y",description:"northing",searchPattern:d,substitution:{input:t=>l(t),output:t=>b$1(t)}}],defaultPattern:"X, Y",viewModel:null}),new U$1({name:"dd",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${s}]?\\d*(?=\\D*?[N|S|${e}|${i}])`,"i"),substitution:{input:t=>l(t),output:t=>b$1(t)}},{alias:t.abbreviatedDirections.north,description:"north/south indicator",searchPattern:$,substitution:{input:t=>p[t],output:e=>t.abbreviatedDirections[r[e]]}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp(`\\d{1,3}[\\.|\\${s}]?\\d*(?=\\D*?[E|W|${a}|${u}])`,"i"),substitution:{input:t=>l(t),output:t=>b$1(t)}},{alias:t.abbreviatedDirections.east,description:"east/west indicator",searchPattern:h,substitution:{input:t=>p[t],output:e=>t.abbreviatedDirections[r[e]]}}],defaultPattern:`Y${o}${t.abbreviatedDirections.north}, X${o}${t.abbreviatedDirections.east}`,viewModel:null}),new U$1({name:"ddm",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?\\s+.*?[N|S|${e}|${i}])`,"i"),substitution:{input:t=>l(t),output:t=>b$1(t)}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp(`\\d{1,2}[\\.\\${s}]?\\d*(?=.*?[N|S|${e}||${i}])`,"i"),substitution:{input:t=>l(t),output:t=>b$1(t)}},{alias:t.abbreviatedDirections.north,description:"north/south indicator",searchPattern:$,substitution:{input:t=>p[t],output:e=>t.abbreviatedDirections[r[e]]}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp(`\\d{1,3}(?=\\D*?\\s+.*?[E|W|${a}|${u}])`,"i"),substitution:{input:t=>l(t),output:t=>b$1(t)}},{alias:"B",description:"minutes longitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\|${s}]?\\d*(?=.*?[E|W|${a}|${u}])`,"i"),substitution:{input:t=>l(t),output:t=>b$1(t)}},{alias:t.abbreviatedDirections.east,description:"east/west indicator",searchPattern:h,substitution:{input:t=>p[t],output:e=>t.abbreviatedDirections[r[e]]}}],defaultPattern:`Y${o} A'${t.abbreviatedDirections.north}, X${o} B'${t.abbreviatedDirections.east}`,viewModel:null}),new U$1({name:"dms",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?\\s+.*?[N|S|${e}|${i}])`,"i"),substitution:{input:t=>l(t),output:t=>b$1(t)}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?[N|S|${e}|${i}])`,"i"),substitution:{input:t=>l(t),output:t=>b$1(t)}},{alias:"B",description:"seconds latitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${s}]?\\d*(?=.*?[N|S|${e}|${i}])`,"i"),substitution:{input:t=>l(t),output:t=>b$1(t)}},{alias:t.abbreviatedDirections.north,description:"north/south indicator",searchPattern:$,substitution:{input:t=>p[t],output:e=>t.abbreviatedDirections[r[e]]}},{alias:"X",description:"degrees longitude",searchPattern:new RegExp(`\\d{1,3}(?=.*?\\s+.*?[E|W|${a}|${u}])`,"i"),substitution:{input:t=>l(t),output:t=>b$1(t)}},{alias:"C",description:"minutes longitude",searchPattern:new RegExp(`\\d{1,2}(?=.*?[E|W|${a}|${u}])`,"i"),substitution:{input:t=>l(t),output:t=>b$1(t)}},{alias:"D",description:"seconds longitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${s}]?\\d*(?=.*?[E|W|${a}|${u}])`,"i"),substitution:{input:t=>l(t),output:t=>b$1(t)}},{alias:t.abbreviatedDirections.east,description:"east/west indicator",searchPattern:h,substitution:{input:t=>p[t],output:e=>t.abbreviatedDirections[r[e]]}}],defaultPattern:`Y${o} A' B"${t.abbreviatedDirections.north}, X${o} C' D"${t.abbreviatedDirections.east}`,viewModel:null}),new U$1({name:"xy",coordinateSegments:[{alias:"X",description:"longitude",searchPattern:d,substitution:{input:t=>l(t),output:t=>b$1(t)}},{alias:"Y",description:"latitude",searchPattern:d,substitution:{input:t=>l(t),output:t=>b$1(t)}}],defaultPattern:`X${o}, Y${o}`,viewModel:null}),new U$1({name:"mgrs",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new U$1({name:"usng",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new U$1({name:"utm",coordinateSegments:[{alias:"Z",description:"zone number",searchPattern:/\d{1,2}|[abyz]/i},{alias:"B",description:"latitude band",searchPattern:/^\D/},{alias:"X",description:"easting",searchPattern:/\d{1,7}(?=\s*\d{7}$)/},{alias:"Y",description:"northing",searchPattern:/\d{1,7}/}],defaultPattern:"ZB X Y",viewModel:null})];return c(t,g),g}function b$1(t){const e=t.match(u),a=e?e[0]:"",n=t.indexOf(".")>=0?t.split(".")[1].length:0;return a+number.o(Number(t),{pattern:"###0.###",places:n,round:-1})}function l(t){return number.p(t)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const L={default:"default",crosshair:"crosshair"},M=300,U=new request.b$2([0,0,500]),E="xy",G="esri__coordinateConversionWidgetState",x$1=request.s$1.getLogger("esri.widgets.CoordinateConversion.CoordinateConversionViewModel"),A={conversions:"conversions",formats:"formats",view:"view",viewChange:"view-change"},F="esri/images/search/search-symbol-32.png";let W=class extends(GoTo.e(request.n$2.EventedAccessor)){constructor(t){super(t),this._conversionPromise=null,this._handles=new request.u,this._locationGraphic=null,this._pointerCount=0,this.conversions=new request.S,this.formats=new request.S,this.formatterAvailable=!1,this.geometryServiceURLPromise=null,this.messages=null,this.requestDelay=M,this.locationSymbol=new SimpleLineSymbol.n({url:request.a$1(F),width:24,height:24}),this.storageEnabled=!0,this.view=null,this._saveWidgetState=this._saveWidgetState.bind(this),this._handleFormatChange=this._handleFormatChange.bind(this),this._handleConversionChange=this._handleConversionChange.bind(this),this._handleViewChange=this._handleViewChange.bind(this),this._onClick=this._onClick.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerUp=this._onPointerUp.bind(this);}initialize(){const t=async()=>this.messages=await request.u$2("esri/widgets/CoordinateConversion/t9n/CoordinateConversion");t().then((()=>{if(!this.destroyed&&(this.formats.addMany(p(this.messages)),this.storageEnabled&&this._loadWidgetState(),this.formats.forEach((t=>{t.viewModel=this,this._handles.add(t.watch("currentPattern",this._saveWidgetState),t.name);})),this._handles.add(this.conversions.on("change",this._handleConversionChange),A.conversions),this._handles.add(this.formats.on("change",this._handleFormatChange),A.formats),this._handles.add(request.g((()=>{t().then((()=>{c(this.messages,this.formats);}));}))),this._handles.add(request.i$1(this,"view.map",(()=>{var t,e;this.geometryServiceURLPromise=geometryServiceUtils.getGeometryServiceURL(null==(t=this.view)||null==(e=t.map)?void 0:e.portalItem);})),A.viewChange),projection.J().then((()=>{this.formatterAvailable=!0;})).catch((t=>{x$1.error(new request.s("coordinate-conversion:projection-load-failed","Failed to load the projection module.",{error:t})),this.formatterAvailable=!1;})).then((()=>this._handles.add(request.i$1(this,"view",this._handleViewChange),A.viewChange))),0===this.conversions.length)){const t=this.formats.find((t=>t.name===E))||this.formats.getItemAt(0);this.conversions.add(new i({format:t}));}}));}destroy(){this._handles.removeAll(),this._cleanUpView(this.view),this.view=null;}set currentLocation(t){this._set("currentLocation",t),this._updateConversions();}get currentLocation(){return this._get("currentLocation")||null}set mode(t){switch(t){case"capture":this.currentLocation=null,this._startCaptureMode(),this._set("mode",t);break;case"live":this._startLiveMode(),this._set("mode",t);}}get mode(){return this._get("mode")||"live"}get state(){const{messages:t,view:e}=this,o=null==e?void 0:e.ready;return t?o?"ready":e?"loading":"disabled":"disabled"}get waitingForConversions(){return null!=this._conversionPromise}get _debouncedConvert(){return request.z$1(((t,e,o)=>request.T(t.map((t=>t.convert(e,o))))),this.requestDelay)}setLocation(t){if(this.view.graphics.remove(this._locationGraphic),t){const e=t.clone();e.hasZ&&(e.z=void 0),this._locationGraphic=new Graphic.h({geometry:e,symbol:this.get("locationSymbol")}),this.view.graphics.add(this._locationGraphic);}}convert(t,e){return y$1(e)?Promise.resolve().then((()=>t.convert(e))):Promise.reject(new request.s("coordinate-conversion:invalid-point","Invalid point cannot be converted.",{point:e}))}goToLocation(t){if(this.get("view.clippingArea")||this.get("view.map.basemap.baseLayers.length")>0){const e=this.get("view.clippingArea")||this.view.map.basemap.baseLayers.getItemAt(0).fullExtent;return e?e.contains(t)?this.callGoTo({target:t}):Promise.reject(new request.s("coordinate-conversion:go-to-failed","Point outside basemap extent.",{point:t})):this.callGoTo({target:t})}return this.callGoTo({target:t})}pause(){this.currentLocation=null,this._handles.remove(A.view),this.view&&(this.view.cursor=L.default,this.view.graphics.remove(this._locationGraphic));}previewConversion(t,e=this.currentLocation||U){return this._convertMany([t],e).then((()=>t.displayCoordinate))}resume(){"capture"===this.mode?this._startCaptureMode():this._startLiveMode();}reverseConvert(t,e){return e.reverseConvert(t)}async updateConversions(t,e){return e&&e.type&&"point"===e.type?this._convertMany(t,e).then((t=>t.client.concat(t.server))):(this._clearConversions(this.conversions),Promise.reject(new request.s("coordinate-conversion:invalid-input-point","Point is invalid, conversions cannot be updated.",{point:e})))}_cleanUpView(t){t&&(t.graphics.remove(this._locationGraphic),this._handles.remove(A.view),t.cursor=L.default);}_clearConversions(t){t.forEach((t=>{t.position={location:null,coordinate:null};}));}_convertMany(t,e){const{client:o,server:i}=t.reduce(((t,e)=>(t[e.format.getConversionStrategy()].push(e),t)),{client:[],server:[]}),r=Promise.all(o.map((t=>t.format.convert(e).then((e=>(t.position=e,t))).catch((()=>{t.position=null;}))))),s=t=>t?(this._conversionPromise=null,this.notifyChange("waitingForConversions"),t.map(((t,e)=>{const o=i[e];return t.error?(o.position=null,o):(o.position=t.value,o)}))):[];return this._conversionPromise=i.length>0?this._debouncedConvert(i.map((t=>t.format)),e).then(s,s):Promise.resolve([]),this.notifyChange("waitingForConversions"),Promise.all([r,this._conversionPromise]).then((t=>({client:t[0],server:t[1]})))}_handleConversionChange(t){t.added.forEach((t=>{const e=t.format;e.viewModel=this,this.currentLocation&&(this._set("waitingForConversions",!0),this.convert(e,this.currentLocation).then((e=>{t.position=e,this._set("waitingForConversions",!1);})));})),this._saveWidgetState();}_handleFormatChange(t){t.added.forEach((t=>{this._handles.add(t.watch("currentPattern",this._saveWidgetState),t.name),t.viewModel=this;})),t.removed.forEach((t=>{t.viewModel=null,this._handles.remove(t.name);}));}_loadWidgetState(){try{const t=JSON.parse(sessionStorage.getItem(G));t&&this._setWidgetState(t);}catch(t){x$1.error(new request.s("coordinate-conversion:invalid-session-storage-json","Could not read from sessionStorge.",{error:t}));}}_startCaptureMode(){this._handles.remove(A.view),this.view&&(this.view.cursor=L.crosshair,this.currentLocation&&this.setLocation(this.currentLocation),this._handles.add(this.view.on("click",this._onClick),A.view));}_startLiveMode(){this._pointerCount=0,this._handles.remove(A.view),this.view&&(this.view.cursor=L.default,this.view.graphics.remove(this._locationGraphic),this._handles.add([this.view.on("pointer-down",this._onPointerDown),this.view.on("pointer-up",this._onPointerUp),this.view.on("pointer-move",this._onPointerMove)],A.view));}_handleViewChange(t,e){e&&e!==t&&this._cleanUpView(e),t&&("capture"===this.mode&&this._startCaptureMode(),this._startLiveMode());}_onClick(t){if(0===t.button){const e=this.view.toMap(t),o=e&&e.normalize();this.setLocation(o),this.currentLocation=o;}}_onPointerDown(t){const{pointerType:e}=t;if(this._pointerCount++,("touch"===e||"pen"===e)&&1===this._pointerCount){const e=this.view.toMap(t);this.currentLocation=e&&e.normalize();}}_onPointerMove(t){const{pointerType:e}=t;if("mouse"===e||1===this._pointerCount){const e=this.view.toMap(t);this.currentLocation=e&&e.normalize();}}_onPointerUp(){this._pointerCount--;}_setWidgetState(t){try{t.formats.forEach((e=>{const o=this.formats.find((t=>t.name===e.name));o&&t.locale===request.i$6()&&e.currentPattern&&(o.currentPattern=e.currentPattern),o&&e.index>=0&&this.conversions.add(new i({format:o}));}));}catch(e){x$1.warn(new request.s("coordinate-conversion:session-storage-read-error","Could not get widget state from stored JSON.",{error:e}));}}_saveWidgetState(){if(!this.storageEnabled)return;const t=this._toJSON();try{sessionStorage.setItem(G,JSON.stringify({formats:t,locale:request.i$6()}));}catch(e){x$1.error(new request.s("coordinate-conversion:local-storage-write-error","Could not write to localStorage.",{error:e}));}}async _updateConversions(){try{await this.updateConversions(this.conversions.toArray(),this.currentLocation);}catch{}}_toJSON(){return this.formats.filter((t=>{const e=t.name;return "xy"===e||"basemap"===e||R$1(e)})).map((t=>({name:t.name,currentPattern:t.currentPattern,defaultPattern:t.defaultPattern,index:this.conversions.findIndex((e=>e.format===t))}))).sort(((t,e)=>t.index-e.index)).toArray()}};request.e([request.d()],W.prototype,"conversions",void 0),request.e([request.d({type:request.b$2})],W.prototype,"currentLocation",null),request.e([request.d()],W.prototype,"formats",void 0),request.e([request.d()],W.prototype,"messages",void 0),request.e([request.d()],W.prototype,"mode",null),request.e([request.d()],W.prototype,"requestDelay",void 0),request.e([request.d({readOnly:!0})],W.prototype,"state",null),request.e([request.d()],W.prototype,"locationSymbol",void 0),request.e([request.d()],W.prototype,"storageEnabled",void 0),request.e([request.d({readOnly:!0})],W.prototype,"waitingForConversions",null),request.e([request.d()],W.prototype,"view",void 0),request.e([request.d({readOnly:!0})],W.prototype,"_debouncedConvert",null),W=request.e([request.i("esri.widgets.CoordinateConversion.CoordinateConversionViewModel")],W);const V=W;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const g={base:"esri-coordinate-conversion esri-widget",captureMode:"esri-coordinate-conversion--capture-mode",noBasemap:"esri-coordinate-conversion--no-basemap",popup:"esri-coordinate-conversion__popup",clipboardPopup:"esri-coordinate-conversion__clipboard-popup",conversionList:"esri-coordinate-conversion__conversion-list",conversionRow:"esri-coordinate-conversion__row",coordDisplay:"esri-coordinate-conversion__display",expanded:"esri-coordinate-conversion__conversions-view--expanded",expandDown:"esri-coordinate-conversion__conversions-view--expand-down",expandUp:"esri-coordinate-conversion__conversions-view--expand-up",conversionsView:"esri-coordinate-conversion__conversions-view",primarySelect:"esri-coordinate-conversion__select-primary",rowSelect:"esri-coordinate-conversion__select-row",toolDisplay:"esri-coordinate-conversion__tools",modeToggle:"esri-coordinate-conversion__mode-toggle",rowButton:"esri-coordinate-conversion__row-button",backButton:"esri-coordinate-conversion__back-button",convertButton:"esri-coordinate-conversion__button",coordinateInput:"esri-coordinate-conversion__input-coordinate",inputForm:"esri-coordinate-conversion__input-form",inputFormGroup:"esri-coordinate-conversion__input-group",rejectInput:"esri-coordinate-conversion__input-coordinate--rejected",sectionHeading:"esri-coordinate-conversion__heading",patternInput:"esri-coordinate-conversion__pattern-input",settings:"esri-coordinate__settings",settingsFormGroup:"esri-coordinate-conversion__settings-group",settingsFormGroupHorizontal:"esri-coordinate-conversion__settings-group-horizontal",previewCoordinate:"esri-coordinate-conversion__preview-coordinate",disabled:"esri-disabled",input:"esri-input",button:"esri-button",header:"esri-widget__heading",widgetButton:"esri-widget--button",leftArrow:"esri-icon-left-arrow",rightArrow:"esri-icon-right-arrow",captureButton:"esri-icon-map-pin",collapseButton:"esri-icon-up",copyButton:"esri-icon-duplicate",editButton:"esri-icon-edit",esriSelect:"esri-select",expandButton:"esri-icon-down",goToButton:"esri-icon-locate",refresh:"esri-icon-refresh",removeConversion:"esri-icon-close",settingsButton:"esri-icon-settings2"},b={settingsButton:!0,inputButton:!0,captureButton:!0,expandButton:!0},y=750,w=2500,C=request.s$1.getLogger("esri.widgets.CoordinateConversion");let f=class extends request.z{constructor(e,t){super(e,t),this._popupMessage=null,this._popupTimeoutId=null,this._clipboardPopupTimeoutId=null,this._coordinateInput=null,this._badInput=!1,this._goToEnabled=!1,this._conversionFormat=null,this._settingsFormat=null,this._previewConversion=null,this._expanded=!1,this._clipboardPopupVisible=!1,this._popupVisible=!1,this._settingsVisible=!1,this._inputVisible=!1,this.conversions=null,this.currentLocation=null,this.formats=null,this.goToOverride=null,this.headingLevel=4,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode=null,this.orientation="auto",this.requestDelay=null,this.locationSymbol=null,this.storageEnabled=null,this.view=null,this.viewModel=new V,this.visibleElements={...b};}set multipleConversions(e){!1===e&&(this._expanded=!1,this.conversions.splice(1,this.conversions.length-1)),this._set("multipleConversions",e);}get multipleConversions(){const e=this._get("multipleConversions");return "boolean"!=typeof e||e}castVisibleElements(e){return {...b,...e}}reverseConvert(e,t){return this.viewModel.reverseConvert(e,t)}render(){const e=this.get("viewModel.state"),t="disabled"===e?request.n$1("div",{key:"esri-coordinate__no-basemap"},this.messages.noBasemap):null,o=!t&&this._inputVisible?this._renderInputForm():null,i=!t&&this._settingsVisible?this._renderSettings():null,s=t||o||i?null:this._renderConversionsView(),n=this._popupVisible?this._renderPopup():null,r={[g.captureMode]:"capture"===this.mode,[g.disabled]:"loading"===e,[g.noBasemap]:"disabled"===e};return request.n$1("div",{class:this.classes(g.base,r)},n,t,s,i,o)}_addConversion(e){const t=e.target,o=t.options[t.options.selectedIndex]["data-format"],i$1=t["data-index"],s=new i({format:o});t.options.selectedIndex=0,i$1>=0&&this.conversions.removeAt(i$1),this.conversions.add(s,i$1);}_findSettingsFormat(){return this._settingsFormat||this.conversions.reduceRight(((e,t)=>{const o=t.format;return o.get("hasDisplayProperties")?o:e}),null)||this.formats.find((e=>e.hasDisplayProperties))}_hidePopup(){this._popupTimeoutId&&(clearTimeout(this._popupTimeoutId),this._popupTimeoutId=null),this._popupVisible=!1,this._popupMessage=null,this.scheduleRender();}_hideClipboardPopup(){this._clipboardPopupTimeoutId&&(clearTimeout(this._clipboardPopupTimeoutId),this._clipboardPopupTimeoutId=null),this._clipboardPopupVisible=!1,this.scheduleRender();}_onConvertComplete(){this._inputVisible=!1,this._coordinateInput.value="";}_onCopy(e){const t=e.currentTarget["data-conversion"].displayCoordinate;"clipboardData"in request.e$7?request.e$7.clipboardData.setData("text",t):e.clipboardData.setData("text/plain",t),this._showClipboardPopup(),e.preventDefault();}_processUserInput(e){const o=request.i$2(e),i=this.viewModel;if("Enter"!==o&&o)this._badInput&&(this._badInput=!1);else {const e=this._coordinateInput["data-format"],t=this._coordinateInput.value;this._reverseConvert(t,e).then((e=>{"capture"===this.mode?i.resume():this.mode="capture",this.currentLocation=e,i.setLocation(e),this._onConvertComplete();})).catch((e=>{C.error(e),this._showPopup(this.messages.invalidCoordinate),this._badInput=!0;}));}}_reverseConvert(e,t){const o=this.viewModel;return t.reverseConvert(e).then((e=>(this._goToEnabled&&o.goToLocation(e).catch((e=>{C.warn(e),this._showPopup(this.messages.locationOffBasemap);})),e)))}_setInputFormat(e){const t=e.target,o=t[t.options.selectedIndex]["data-format"];this._conversionFormat=o;}_setPreviewConversion(){const e=this._findSettingsFormat(),t=this.viewModel;if(e){const o=this.conversions.find((t=>t.format===e));this._previewConversion=new i({format:e,position:{location:this.currentLocation,coordinate:o&&o.position.coordinate}}),this._previewConversion.position.coordinate||t.previewConversion(this._previewConversion);}}_setSettingsFormat(e){const t=e.target,o=t[t.options.selectedIndex]["data-format"];this._settingsFormat=o,this._setPreviewConversion();}_showClipboardPopup(){this._clipboardPopupVisible?clearTimeout(this._clipboardPopupTimeoutId):this._clipboardPopupVisible=!0,this.scheduleRender(),this._popupTimeoutId=setTimeout((()=>{this._popupTimeoutId=null,this._hideClipboardPopup();}),y);}_showPopup(e,t=w){this._popupMessage=e,this._popupVisible?clearTimeout(this._popupTimeoutId):this._popupVisible=!0,this.scheduleRender(),this._popupTimeoutId=setTimeout((()=>{this._popupTimeoutId=null,this._hidePopup();}),t);}_toggleGoTo(){this._goToEnabled=!this._goToEnabled;}_updateCurrentPattern(e){e.stopPropagation();const t=e.target,o=this._findSettingsFormat();o&&(o.currentPattern=t.value);}_renderConversion(e,t){const{messages:o}=this,i=`${this.id}__list-item-${t}`,s=`${e.format.name} ${o.conversionOutputSuffix}`,n=0===t,r=n||this._expanded,a=n?this._renderFirstConversion(e):this._renderTools(t,e,i),l=n&&!e.displayCoordinate?o.noLocation:e.displayCoordinate,d=request.n$1("div",{"aria-label":l,class:g.coordDisplay,"data-conversion":e,role:"listitem",tabindex:"0",title:l},l),p=this._renderOptions(this.formats.filter((t=>t!==e.format)));return r?request.n$1("li",{"aria-label":s,class:g.conversionRow,id:i,key:e,role:"group",title:s,tabindex:"0"},request.n$1("select",{"aria-controls":i,"aria-label":o.selectFormat,class:this.classes(g.esriSelect,g.rowSelect),bind:this,"data-index":t,onchange:this._addConversion,title:o.selectFormat},request.n$1("option",{"aria-label":e.format.name,selected:!0,title:e.format.name},e.format.name.toUpperCase()),p),d,a):null}_renderCopyButton(e){const t=this._clipboardPopupVisible&&this._renderClipboardPopup();return request.n$1("li",{"aria-label":this.messagesCommon.copy,bind:this,class:this.classes(g.widgetButton,g.rowButton),"data-conversion":e,onclick:this._copyCoordinateOutput,onkeydown:this._copyCoordinateOutput,oncopy:this._onCopy,role:"button",tabindex:"0",title:this.messagesCommon.copy},t,request.n$1("span",{"aria-hidden":"true",class:g.copyButton}))}_renderFirstConversion(e){const t=this.id,o={[g.expandButton]:!this._expanded,[g.collapseButton]:this._expanded},{messages:i,messagesCommon:s,multipleConversions:n,visibleElements:r}=this,a="live"===this.mode?i.captureMode:i.liveMode,l=this._expanded?s.collapse:s.expand,d=e.displayCoordinate&&"capture"===this.mode?this._renderCopyButton(e):null,p=n&&r.expandButton&&request.n$1("li",{"aria-controls":`${t}__${g.conversionList}`,"aria-label":l,bind:this,class:g.widgetButton,key:"esri-coordinate-conversion__expand-button",onclick:this._toggleExpand,onkeydown:this._toggleExpand,role:"button",tabindex:"0",title:l},request.n$1("span",{"aria-hidden":"true",class:this.classes(o)})),c=!n&&r.captureButton&&request.n$1("li",{"aria-label":a,bind:this,class:this.classes(g.widgetButton,g.modeToggle),key:"esri-coordinate-conversion__mode-toggle",onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabindex:"0",title:a},request.n$1("span",{"aria-hidden":"true",class:g.captureButton}));return request.n$1("ul",{class:g.toolDisplay},d,p,c)}_renderInputForm(){const e=this._conversionFormat||this.conversions.getItemAt(0).format,t=this.formats.findIndex((t=>t.name===e.name)),o=this.id,i=`${o}__${g.coordinateInput}`,s=`${o}__${g.coordinateInput}__header`,n=this._renderOptions(this.formats,!0,t),r={[g.rejectInput]:this._badInput},{messages:a,messagesCommon:l,headingLevel:d}=this;return request.n$1("div",{"aria-labelledby":s,class:g.inputForm,key:"esri-coordinate-conversion__input-form",role:"search"},request.n$1("div",{class:g.sectionHeading},request.n$1("div",{"aria-label":l.back,bind:this,class:this.classes(g.widgetButton,g.backButton),onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabindex:"0",title:l.back},this._renderBackIcon()),request.n$1(Heading.s,{level:d,class:g.header,id:s},a.inputCoordTitle)),request.n$1("div",{class:g.inputFormGroup},request.n$1("select",{"aria-controls":i,"aria-label":a.selectFormat,bind:this,class:this.classes(g.esriSelect,g.rowSelect),onchange:this._setInputFormat,title:a.selectFormat},n),request.n$1("input",{afterCreate:request.g$2,"aria-labelledby":s,"aria-required":"true",bind:this,class:this.classes(g.coordinateInput,g.input,r),"data-format":e,"data-node-ref":"_coordinateInput",id:i,onkeydown:this._processUserInput,placeholder:a.inputCoordTitle,role:"textbox",spellcheck:!1,title:a.inputCoordTitle,type:"text"})),request.n$1("div",{class:g.inputFormGroup},request.n$1("label",{"aria-label":a.goTo},request.n$1("input",{bind:this,checked:this._goToEnabled,onclick:this._toggleGoTo,title:a.goTo,type:"checkbox"}),a.goTo),request.n$1("button",{"aria-label":a.convert,bind:this,class:this.classes(g.convertButton,g.button),onclick:this._processUserInput,title:a.convert,type:"button"},a.convert)))}_renderConversionsView(){const e=`${this.id}__${g.conversionList}`,t=this._renderPrimaryTools(),o=this._renderOptions(this.formats),i=this.conversions.map(((e,t)=>this._renderConversion(e,t))).toArray(),{messages:s}=this,n=this._expanded?request.n$1("div",{class:g.conversionRow},request.n$1("select",{"aria-controls":e,"aria-label":s.addConversion,bind:this,class:this.classes(g.esriSelect,g.primarySelect),onchange:this._addConversion,title:s.addConversion},request.n$1("option",{disabled:!0,selected:!0,value:""},s.addConversion),o),t):null,r={[g.expanded]:this._expanded,[g.expandUp]:"expand-up"===this.orientation,[g.expandDown]:"expand-down"===this.orientation};return request.n$1("div",{class:this.classes(g.conversionsView,r),key:"esri-coordinate-conversion__main-view"},request.n$1("ul",{"aria-expanded":this._expanded?"true":"false",class:g.conversionList,id:e},i),n)}_renderOptions(e,t,o){const i=this.conversions.getItemAt(0);return e.map(((e,s)=>{const n=!(t||!i)&&(i.format.name===e.name||this.conversions.map((e=>e.format.name)).includes(e.name));return request.n$1("option",{"aria-label":e.name,"data-format":e,disabled:n,key:e.name,selected:s===o,value:e.name},e.name.toUpperCase())})).toArray()}_renderPopup(){return request.n$1("div",{class:g.popup,role:"alert"},this._popupMessage)}_renderClipboardPopup(){return request.n$1("div",{class:this.classes(g.popup,g.clipboardPopup),role:"alert"},this.messages.copySuccessMessage)}_renderPrimaryTools(){const{messages:e,visibleElements:t}=this,o="live"===this.mode?e.captureMode:e.liveMode,i=t.inputButton&&request.n$1("li",{bind:this,class:g.widgetButton,onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabindex:"0",title:e.inputCoordTitle},request.n$1("span",{"aria-hidden":"true",class:g.editButton})),s=t.captureButton&&request.n$1("li",{bind:this,class:this.classes(g.widgetButton,g.modeToggle),onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabindex:"0",title:o},request.n$1("span",{"aria-hidden":"true",class:g.captureButton})),n=t.settingsButton&&request.n$1("li",{bind:this,class:g.widgetButton,onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabindex:"0",title:e.settingsTitle},request.n$1("span",{"aria-hidden":"true",class:g.settingsButton}));return request.n$1("ul",{class:g.toolDisplay},i,s,n)}_renderSettings(){const e=this.id,t=`${e}__${g.patternInput}`,o=`${e}__${g.patternInput}__header`,i=`${e}__${g.previewCoordinate}`,s=this.formats.filter((e=>e.hasDisplayProperties)),n=this._findSettingsFormat(),r=s.indexOf(n),a=this._renderOptions(s,!0,r),l=n.get("currentPattern"),{messages:d,messagesCommon:p,headingLevel:u}=this;return request.n$1("div",{"aria-labelledby":o,class:g.settings,key:"esri-coordinate-conversion__settings"},request.n$1("div",{class:g.sectionHeading},request.n$1("div",{bind:this,class:this.classes(g.widgetButton,g.backButton),onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabindex:"0",title:p.back},this._renderBackIcon()),request.n$1(Heading.s,{level:u,class:g.header,id:o},d.settingsTitle)),request.n$1("div",{class:g.settingsFormGroup},request.n$1("label",{for:t},d.changeCoordinateDisplay),request.n$1("select",{"aria-label":d.selectFormat,class:g.esriSelect,bind:this,onchange:this._setSettingsFormat,title:d.selectFormat},a),request.n$1("div",{class:g.settingsFormGroupHorizontal},request.n$1("input",{"aria-controls":i,bind:this,class:this.classes(g.patternInput,g.input),id:t,oninput:this._updateCurrentPattern,spellcheck:!1,title:d.changeCoordinateDisplay,type:"text",value:l}),request.n$1("div",{"aria-controls":t,bind:this,class:g.widgetButton,onclick:this._setDefaultPattern,onkeydown:this._setDefaultPattern,role:"button",tabindex:"0",title:d.defaultPattern},request.n$1("span",{"aria-hidden":"true",class:g.refresh})))),request.n$1("div",{class:g.settingsFormGroup},request.n$1("label",null,p.preview,request.n$1("div",{class:g.previewCoordinate,id:i,tabindex:"0"},this._previewConversion.displayCoordinate))))}_renderBackIcon(){return request.n$1("span",{"aria-hidden":"true",class:request.d$3(this.container)?g.rightArrow:g.leftArrow})}_renderTools(e,t,o){const i=t.displayCoordinate&&"capture"===this.mode?this._renderCopyButton(t):null,{messages:s}=this;return request.n$1("ul",{class:g.toolDisplay,role:"listitem"},i,request.n$1("li",{"aria-controls":o,"aria-label":s.removeConversion,bind:this,class:this.classes(g.widgetButton,g.rowButton),"data-index":e,key:`${o}__${g.widgetButton}`,onclick:this._removeConversion,onkeydown:this._removeConversion,tabindex:"0",role:"button",title:s.removeConversion},request.n$1("span",{"aria-hidden":"true",class:g.removeConversion})))}_copyCoordinateOutput(e){const t=e.target;if(!("createTextRange"in document.body)){const e=window.getSelection(),o=document.createRange();o.selectNodeContents(t),e.removeAllRanges(),e.addRange(o);}document.execCommand("copy");}_removeConversion(e){const t=e.currentTarget["data-index"];this.conversions.removeAt(t);}_setDefaultPattern(e){e.stopPropagation();const t=this._findSettingsFormat();t&&(t.currentPattern=t.get("defaultPattern"));}_toggleExpand(){this._expanded=!this._expanded;}_toggleInputVisibility(){this._inputVisible=!this._inputVisible,this._popupVisible&&this._hidePopup(),this._inputVisible?this.viewModel.pause():this.viewModel.resume();}_toggleMode(){this.mode="live"===this.mode?"capture":"live";}_toggleSettingsVisibility(){this._settingsVisible=!this._settingsVisible,this._popupVisible&&this._hidePopup(),this._settingsVisible?(this._setPreviewConversion(),this.viewModel.pause()):this.viewModel.resume();}};request.e([request.o("viewModel.conversions")],f.prototype,"conversions",void 0),request.e([request.o("viewModel.currentLocation")],f.prototype,"currentLocation",void 0),request.e([request.o("viewModel.formats")],f.prototype,"formats",void 0),request.e([request.o("viewModel.goToOverride")],f.prototype,"goToOverride",void 0),request.e([request.d()],f.prototype,"headingLevel",void 0),request.e([request.d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],f.prototype,"label",void 0),request.e([request.d(),request.e$1("esri/widgets/CoordinateConversion/t9n/CoordinateConversion")],f.prototype,"messages",void 0),request.e([request.d(),request.e$1("esri/t9n/common")],f.prototype,"messagesCommon",void 0),request.e([request.o("viewModel.mode")],f.prototype,"mode",void 0),request.e([request.d()],f.prototype,"orientation",void 0),request.e([request.o("viewModel.requestDelay")],f.prototype,"requestDelay",void 0),request.e([request.d()],f.prototype,"multipleConversions",null),request.e([request.o("viewModel.locationSymbol")],f.prototype,"locationSymbol",void 0),request.e([request.o("viewModel.storageEnabled")],f.prototype,"storageEnabled",void 0),request.e([request.o("viewModel.view")],f.prototype,"view",void 0),request.e([request.d({type:V})],f.prototype,"viewModel",void 0),request.e([request.d()],f.prototype,"visibleElements",void 0),request.e([request.c("visibleElements")],f.prototype,"castVisibleElements",null),request.e([accessibleHandler.t()],f.prototype,"_copyCoordinateOutput",null),request.e([accessibleHandler.t()],f.prototype,"_removeConversion",null),request.e([accessibleHandler.t()],f.prototype,"_setDefaultPattern",null),request.e([accessibleHandler.t()],f.prototype,"_toggleExpand",null),request.e([accessibleHandler.t()],f.prototype,"_toggleInputVisibility",null),request.e([accessibleHandler.t()],f.prototype,"_toggleMode",null),request.e([accessibleHandler.t()],f.prototype,"_toggleSettingsVisibility",null),f=request.e([request.i("esri.widgets.CoordinateConversion")],f);const x=f;

const arcgisCoordinateConversionCss = "@import url('https://js.arcgis.com/next/esri/themes/light/main.css');";

let ArcGISCoordinateConversion = class {
  constructor(hostRef) {
    index.registerInstance(this, hostRef);
    this.loaded = index.createEvent(this, "loaded", 7);
    this.position = 'bottom-left';
  }
  validateView(value) {
    if (value) {
      this.widget.view = value;
      if (this.el.parentElement.tagName.toLowerCase() !== 'arcgis-expand') {
        this.widget.view.ui.add(this.widget, this.position);
      }
    }
  }
  componentWillLoad() {
    const params = {
      container: this.el,
    };
    if (this.view) {
      params.view = this.view;
    }
    const widget = new x(params);
    this.widget = widget;
    this.loaded.emit(true);
  }
  get el() { return index.getElement(this); }
  static get watchers() { return {
    "view": ["validateView"]
  }; }
};
ArcGISCoordinateConversion.style = arcgisCoordinateConversionCss;

exports.arcgis_coordinate_conversion = ArcGISCoordinateConversion;
