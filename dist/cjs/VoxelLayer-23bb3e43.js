'use strict';

const request = require('./MapView-922b9f1e.js');
const mat4f64 = require('./mat4f64-f8b0b0f1.js');
const lineSegment = require('./lineSegment-01513961.js');
const sphere = require('./sphere-10583815.js');
const SceneService = require('./SceneService-9f35479a.js');
require('./index-57f2cfbb.js');
require('./quatf64-755c8047.js');
require('./originUtils-be03c485.js');
require('./resourceUtils-e10e47ed.js');

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$8(e){return new Promise((t=>Promise.resolve().then(function () { return require('./vxlLayer-4ab01ba3.js'); }).then((e=>e.v)).then((({default:n})=>{const r=n({locateFile:i$4,preinitializedWebGLContext:e,onRuntimeInitialized:()=>t(r)});})))).catch((e=>Promise.reject(e)))}function i$4(t){return request.a$2(`esri/libs/vxl/${t}`)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function p$e(n=X$1){return [n[0],n[1],n[2],n[3]]}function M$1(n,t,r,c){return j$1(n,t,r,c,lineSegment.r.get())}function b(n,t=p$e()){return j$1(n[0],n[1],n[2],n[3],t)}function j$1(n,t,r,c,o=p$e()){return o[0]=n,o[1]=t,o[2]=r,o[3]=c,o}function v(n,t,r){const c=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],o=Math.abs(c-1)>1e-5&&c>1e-12?1/Math.sqrt(c):1;return r[0]=t[0]*o,r[1]=t[1]*o,r[2]=t[2]*o,r[3]=-(r[0]*n[0]+r[1]*n[1]+r[2]*n[2]),r}const S=request.n$13();function z$1(n,t,r){return n!==r&&b(n,r),r[3]=-request.z$4(W$1(r),t),r}function B(n,t,r,c){return request._$1(S,t,n),v(r,S,c)}function D$2(n,r,c){return !!request.r(r)&&T$1(n,r.origin,r.direction,Z$1,c)}function E(n,t,r){return T$1(n,t.origin,t.vector,0,r)}function F(n,t,r){return T$1(n,t.origin,t.vector,1,r)}function I$1(n,t){return R$1(n,t)>=0}function O$1(n,t,r){const c=request.d$11(lineSegment.c.get(),W$1(n),-n[3]),e=P(n,request.c$14(lineSegment.c.get(),t,c),lineSegment.c.get());return request.u$9(r,e,c),r}function P(n,t,r){const c=request.d$11(lineSegment.c.get(),W$1(n),request.z$4(W$1(n),t));return request.c$14(r,t,c),r}function R$1(n,t){return request.z$4(W$1(n),t)+n[3]}function T$1(t,r,c,o,e){const i=request.z$4(W$1(t),c);if(0===i)return !1;let a=-(request.z$4(W$1(t),r)+t[3])/i;return 1&o&&(a=request.e$13(a,0,1)),!(!(4&o)&&a<0||!(8&o)&&a>1)&&(request.u$9(e,r,request.d$11(e,c,a)),!0)}function W$1(n){return n}const X$1=[0,0,1,0],Z$1=8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const L$1=request.s.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");class z{constructor(){this.plane=p$e(),this.origin=request.n$13(),this.basis1=request.n$13(),this.basis2=request.n$13();}}function G(s=Ns){return {plane:p$e(s.plane),origin:request.t$13(s.origin),basis1:request.t$13(s.basis1),basis2:request.t$13(s.basis2)}}function W(s,i,n){const t=Ss.get();return t.origin=s,t.basis1=i,t.basis2=n,t.plane=M$1(0,0,0,0),K(t),t}function D$1(s,i=G()){return J(s.origin,s.basis1,s.basis2,i)}function H(s,i){request.r$14(i.origin,s.origin),request.r$14(i.basis1,s.basis1),request.r$14(i.basis2,s.basis2),b(s.plane,i.plane);}function J(s,i,n,t=G()){return request.r$14(t.origin,s),request.r$14(t.basis1,i),request.r$14(t.basis2,n),K(t),ys(t,"fromValues()"),t}function K(s){B(s.basis2,s.basis1,s.origin,s.plane);}function Q(s,i,n){s!==n&&D$1(s,n);const t=request.d$11(lineSegment.c.get(),ms(s),i);return request.u$9(n.origin,n.origin,t),n.plane[3]-=i,n}function X(s,i,n){return Z(i,n),Q(n,gs(s,s.origin),n),n}function Z(s,i=G()){const n=(s[2]-s[0])/2,t=(s[3]-s[1])/2;return request.o$7(i.origin,s[0]+n,s[1]+t,0),request.o$7(i.basis1,n,0,0),request.o$7(i.basis2,0,t,0),j$1(0,0,1,0,i.plane),i}function $(s,i,n){return !!D$2(s.plane,i,n)&&hs(s,n)}function ss(s,i,n){if($(s,i,n))return n;const t=is(s,i,lineSegment.c.get());return request.u$9(n,i.origin,request.d$11(lineSegment.c.get(),i.direction,request.q$2(i.origin,t)/request.s$7(i.direction))),n}function is(s,n,t){const a=vs.get();Ps(s,n,a,vs.get());let o=Number.POSITIVE_INFINITY;for(const r of Ts){const e=Is(s,r,ws.get()),u=lineSegment.c.get();if(E(a,e,u)){const s=request.H$3(lineSegment.c.get(),n.origin,u),a=Math.abs(request.l$15(request.z$4(n.direction,s)));a<o&&(o=a,request.r$14(t,u));}}return o===Number.POSITIVE_INFINITY?ns(s,n,t):t}function ns(s,i,n){if($(s,i,n))return n;const t=vs.get(),a=vs.get();Ps(s,i,t,a);let o=Number.POSITIVE_INFINITY;for(const r of Ts){const e=Is(s,r,ws.get()),u=lineSegment.c.get();if(F(t,e,u)){const s=sphere.h(i,u);if(!I$1(a,u))continue;s<o&&(o=s,request.r$14(n,u));}}return os(s,i.origin)<o&&ts(s,i.origin,n),n}function ts(s,i,n){const t=O$1(s.plane,i,lineSegment.c.get()),a=lineSegment.A(js(s,s.basis1),t,-1,1,lineSegment.c.get()),o=lineSegment.A(js(s,s.basis2),t,-1,1,lineSegment.c.get());return request.c$14(n,request.u$9(lineSegment.c.get(),a,o),s.origin),n}function as(s,i,n){const{origin:t,basis1:a,basis2:o}=s,r=request.c$14(lineSegment.c.get(),i,t),e=sphere.e(a,r),c=sphere.e(o,r),u=sphere.e(ms(s),r);return request.o$7(n,e,c,u)}function os(s,i){const n=as(s,i,lineSegment.c.get()),{basis1:t,basis2:a}=s,o=request.s$7(t),r=request.s$7(a),e=Math.max(Math.abs(n[0])-o,0),c=Math.max(Math.abs(n[1])-r,0),u=n[2];return e*e+c*c+u*u}function rs(s,i){return Math.sqrt(os(s,i))}function es(s,i){let n=Number.NEGATIVE_INFINITY;for(const t of Ts){const a=Is(s,t,ws.get()),o=lineSegment.b(a,i);o>n&&(n=o);}return Math.sqrt(n)}function cs(s,i){return I$1(s.plane,i)&&hs(s,i)}function us(s,i,n,t){return ds(s,n,t)}function gs(s,i){const n=-s.plane[3];return sphere.e(ms(s),i)-n}function bs(s,i,n,t){const a=gs(s,i),o=request.d$11(Ms,ms(s),n-a);return request.u$9(t,i,o),t}function fs(s,i){return request.F$1(s.basis1,i.basis1)&&request.F$1(s.basis2,i.basis2)&&request.F$1(s.origin,i.origin)}function ls(s,i,n){return s!==n&&D$1(s,n),request.h$8(As,i),request.o$21(As,As),request.I$3(n.basis1,s.basis1,As),request.I$3(n.basis2,s.basis2,As),request.I$3(W$1(n.plane),W$1(s.plane),As),request.I$3(n.origin,s.origin,i),z$1(n.plane,n.origin,n.plane),n}function ps(s,i,n,t){return s!==t&&D$1(s,t),request.f$8(Vs,request.r$19(Vs),i,n),request.I$3(t.basis1,s.basis1,Vs),request.I$3(t.basis2,s.basis2,Vs),K(t),t}function ms(s){return W$1(s.plane)}function ds(s,i,n){switch(i){case 0:request.r$14(n,s.basis1),request.j$8(n,n);break;case 1:request.r$14(n,s.basis2),request.j$8(n,n);break;case 2:request.r$14(n,ms(s));}return n}function hs(s,i){const n=request.c$14(lineSegment.c.get(),i,s.origin),t=request.p$24(s.basis1),a=request.p$24(s.basis2),o=request.z$4(s.basis1,n),r=request.z$4(s.basis2,n);return -o-t<0&&o-t<0&&-r-a<0&&r-a<0}function js(s,i){const n=ws.get();return request.r$14(n.origin,s.origin),request.r$14(n.vector,i),n}function Is(s,i,n){const{basis1:t,basis2:a,origin:o}=s,r=request.d$11(lineSegment.c.get(),t,i.origin[0]),e=request.d$11(lineSegment.c.get(),a,i.origin[1]);request.u$9(n.origin,r,e),request.u$9(n.origin,n.origin,o);const c=request.d$11(lineSegment.c.get(),t,i.direction[0]),b=request.d$11(lineSegment.c.get(),a,i.direction[1]);return request.d$11(n.vector,request.u$9(c,c,b),2),n}function ys(s,i){Math.abs(request.z$4(s.basis1,s.basis2)/(request.s$7(s.basis1)*request.s$7(s.basis2)))>1e-6&&L$1.warn(i,"Provided basis vectors are not perpendicular"),Math.abs(request.z$4(s.basis1,ms(s)))>1e-6&&L$1.warn(i,"Basis vectors and plane normal are not perpendicular"),Math.abs(-request.z$4(ms(s),s.origin)-s.plane[3])>1e-6&&L$1.warn(i,"Plane offset is not consistent with plane origin");}function Ps(s,i,n,t){const a=ms(s);B(a,i.direction,i.origin,n),B(W$1(n),a,i.origin,t);}const Ns={plane:p$e(),origin:request.r$7(0,0,0),basis1:request.r$7(1,0,0),basis2:request.r$7(0,1,0)},vs=new lineSegment.s(p$e),ws=new lineSegment.s(lineSegment.v),Ms=request.n$13(),Ss=new lineSegment.s((()=>({origin:null,basis1:null,basis2:null,plane:null}))),Ts=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],As=mat4f64.e(),Vs=mat4f64.e();Object.freeze({__proto__:null,BoundedPlaneClass:z,create:G,wrap:W,copy:D$1,copyWithoutVerify:H,fromValues:J,updateUnboundedPlane:K,elevate:Q,setExtent:X,fromAABoundingRect:Z,intersectRay:$,intersectRayClosestSilhouette:ss,closestPointOnSilhouette:is,closestPoint:ns,projectPoint:ts,projectPointLocal:as,distance2:os,distance:rs,distanceToSilhouette:es,extrusionContainsPoint:cs,axisAt:us,altitudeAt:gs,setAltitudeAt:bs,equals:fs,transform:ls,rotate:ps,normal:ms,UP:Ns});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class o{constructor(){this._disposed=!1;}get disposed(){return this._disposed}get shaderTransformation(){return this._shaderTransformation}acquire(t,r,i,o,e,a){this.id=request.e$26(),this.geometry=t,this.material=r,this.transformation=i,this.instanceParameters=o,this.origin=e,this._shaderTransformation=a,this._disposed=!1;}release(){this._disposed=!1;}dispose(){this._disposed=!0;}getStaticTransformation(){return this.transformation}getShaderTransformation(){return request.r(this._shaderTransformation)?this._shaderTransformation(this.transformation):this.transformation}computeAttachmentOrigin(t){return !!(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,t):this.geometry.computeAttachmentOrigin(t))&&(request.I$3(t,t,this.getStaticTransformation()),!0)}}o.pool=new request.e$18(o);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class r{constructor(r){this.channel=r,this.id=request.e$26();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class T extends sphere.r{constructor(t={}){super(),this.type=1,this._geometryRecords=new Array,this._geometries=new Array,this._objectTransformation=mat4f64.e(),this._bvObjectSpace=new L,this._bvWorldSpace=new L,this._bvDirty=!0,this._hasVolatileTransformation=!1,this._visible=!0,this.castShadow=null==t.castShadow||t.castShadow,this.metadata=t.metadata,this.metadata&&this.metadata.isElevationSource&&(this.metadata.lastValidElevationBB=new x),this.transformation=mat4f64.e();const{geometries:e,materials:s,transformations:i,origins:r}=t;if(Array.isArray(e)){sphere.i(s.length===e.length,"Object3D: materials don't match geometries"),sphere.i(i.length===e.length,"Object3D: transformations don't match geometries"),this._geometryRecords.length=e.length,this._geometries.length=e.length;for(let t=0;t<e.length;t++)this._geometries[t]=e[t],this._geometryRecords[t]=o.pool.acquire(e[t],s[t],mat4f64.n(i[t]),{highlights:null,occludees:null,visible:this._visible},r&&r[t]);}}get geometryRecords(){return this._geometryRecords}get geometries(){return this._geometries}get transformation(){return this._objectTransformation}set transformation(t){request.n$26(this._objectTransformation,t),this._invalidateBoundingVolume(),this._emit("objectTransformation",this);}dispose(){this._geometryRecords.length=0,this._geometries.length=0;}get parentLayer(){return this._parentLayer}set parentLayer(t){sphere.i(null==this._parentLayer||null==t,"Object3D can only be added to a single Layer"),this._parentLayer=t;}addGeometry(e,s,i,r,o$1){i=i||mat4f64.a,this._geometries.push(e);const a=o.pool.acquire(e,s,i,{highlights:null,occludees:null,visible:this._visible},r,o$1);return this._geometryRecords.push(a),this._hasVolatileTransformation=this._hasVolatileTransformation||request.r(a.shaderTransformation),this._emit("objectGeometryAdded",{object:this,record:a}),this._invalidateBoundingVolume(),a}removeGeometry(e){const s=this._geometryRecords.splice(e,1)[0];return this._hasVolatileTransformation=request.r(s.shaderTransformation)?this._geometryRecords.some((e=>request.r(e.shaderTransformation))):this._hasVolatileTransformation,s.dispose(),this._geometries.splice(e,1),this._emit("objectGeometryRemoved",{object:this,record:s}),this._invalidateBoundingVolume(),s}removeAllGeometries(){for(;this.geometryRecords.length>0;)this.removeGeometry(0);}geometryVertexAttrsUpdated(t){this._emit("vertexAttrsUpdated",{object:this,record:t}),this._invalidateBoundingVolume();}get isVisible(){return this._visible}setVisible(t){if(this._visible!==t){this._visible=t;for(const t of this._geometryRecords)t.instanceParameters.visible=this._visible;this._emit("visibilityChanged",this);}}maskOccludee(){const t=new r(1);for(const e of this._geometryRecords)e.instanceParameters.occludees=sphere.f(e.instanceParameters.occludees,t);return this._emit("occlusionChanged",this),t}removeOcclude(t){for(const e of this._geometryRecords)e.instanceParameters.occludees=sphere.u(e.instanceParameters.occludees,t);this._emit("occlusionChanged",this);}highlight(){const t=new r(0);for(const e of this._geometryRecords)e.instanceParameters.highlights=sphere.f(e.instanceParameters.highlights,t);return this._emit("highlightChanged",this),t}removeHighlight(t){for(const e of this._geometryRecords)e.instanceParameters.highlights=sphere.u(e.instanceParameters.highlights,t);this._emit("highlightChanged",this);}getCombinedStaticTransformation(t,s){return request.e$25(request.c$10(s,mat4f64.e()),this.transformation,t.getStaticTransformation())}getCombinedShaderTransformation(t,e){return e=e||mat4f64.e(),request.e$25(e,this.transformation,t.getShaderTransformation()),e}hasVolativeTransformation(){return this._hasVolatileTransformation}get boundingVolumeWorldSpace(){return this._validateBoundingVolume(),this._bvWorldSpace}get boundingVolumeObjectSpace(){return this._validateBoundingVolume(),this._bvObjectSpace}_validateBoundingVolume(){if(!this._bvDirty&&!this._hasVolatileTransformation)return;this._bvObjectSpace.init(),this._bvWorldSpace.init();for(let s=0;s<this._geometryRecords.length;++s){const e=this._geometries[s],i=this._geometryRecords[s],r=e.boundingInfo;request.r(r)&&(this._calculateTransformedBoundingVolume(r,this._bvObjectSpace,i.getShaderTransformation()),this._calculateTransformedBoundingVolume(r,this._bvWorldSpace,this.getCombinedShaderTransformation(i)));}request.y$21(this._bvObjectSpace.bounds,this._bvObjectSpace.min,this._bvObjectSpace.max,.5),request.y$21(this._bvWorldSpace.bounds,this._bvWorldSpace.min,this._bvWorldSpace.max,.5);const e=request.n$13(),i=request.n$13(),r=request.d$20(this.transformation);for(let t=0;t<this._geometryRecords.length;++t){const o=this._geometries[t].boundingInfo;if(request.t$2(o))continue;const a=this._geometryRecords[t].getShaderTransformation(),n=request.d$20(a);request.I$3(e,o.getCenter(),a);const h=request.q$2(e,this._bvObjectSpace.bounds),l=o.getBSRadius()*n;this._bvObjectSpace.bounds[3]=Math.max(this._bvObjectSpace.bounds[3],h+l),request.I$3(i,e,this.transformation);const d=request.q$2(i,this._bvWorldSpace.bounds),g=l*r;this._bvWorldSpace.bounds[3]=Math.max(this._bvWorldSpace.bounds[3],d+g);}this._bvDirty=!1;}_calculateTransformedBoundingVolume(t,e,s){const i=t.getBBMin(),r=t.getBBMax(),o=request.t$13(i),a=request.t$13(r);request.I$3(o,o,s),request.I$3(a,a,s);for(let n=0;n<3;++n)e.min[n]=Math.min(e.min[n],o[n],a[n]),e.max[n]=Math.max(e.max[n],o[n],a[n]);for(let n=0;n<3;++n){request.r$14(o,i),request.r$14(a,r),o[n]=r[n],a[n]=i[n],request.I$3(o,o,s),request.I$3(a,a,s);for(let t=0;t<3;++t)e.min[t]=Math.min(e.min[t],o[t],a[t]),e.max[t]=Math.max(e.max[t],o[t],a[t]);}}_invalidateBoundingVolume(){this._bvDirty=!0,request.r(this._parentLayer)&&this._parentLayer.notifyObjectBBChanged(this,this._bvWorldSpace.bounds);}_emit(e,s){request.r(this._parentLayer)&&this._parentLayer.events.emit(e,s);}get test(){const t=this;return {hasGeometry:e=>t._geometries.indexOf(e)>-1,getGeometryIndex:e=>t._geometries.indexOf(e)}}}class x{constructor(){this.min=request.r$7(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.max=request.r$7(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);}isEmpty(){return this.max[0]<this.min[0]&&this.max[1]<this.min[1]&&this.max[2]<this.min[2]}}class L extends x{constructor(){super(...arguments),this.bounds=sphere.P();}init(){request.o$7(this.min,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),request.o$7(this.max,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),sphere.C(this.bounds);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class j{constructor(t){this.normal=request.n$13(),this.transformation=mat4f64.e(),this._ray=sphere.d(),this.init(t);}get ray(){return this._ray}get hasIntersectionPoint(){return null!=this.dist}get distanceInRenderSpace(){if(null!=this.dist)return request.d$11(O,this.ray.direction,this.dist),request.s$7(O)}getIntersectionPoint(t){return !!this.hasIntersectionPoint&&(request.d$11(O,this.ray.direction,this.dist),request.u$9(t,this.ray.origin,O),!0)}getTransformedNormal(t){return request.r$14(I,this.normal),I[3]=0,request.y$22(I,I,this.transformation),request.r$14(t,I),request.j$8(t,t),t}init(t){this.dist=void 0,this.target=void 0,this.name=void 0,this.drapedLayerOrder=void 0,this.drapedLayerGraphicOrder=void 0,this.center=null,this.geometryId=null,this.triangleNr=null,this.intersector="Stage",t?sphere.l(t,this._ray):this._ray=sphere.d();}set(r,i,s,e,a,o,h,c,m,l){r instanceof T&&(r={type:"stage",obj:r}),this.dist=s,request.r$14(this.normal,e),request.n$26(this.transformation,a),this.target=r,this.name=i,this.drapedLayerOrder=o,this.center=h?request.t$13(h):null,this.geometryId=c,this.triangleNr=m,this.drapedLayerGraphicOrder=l;}copyFrom(r){sphere.l(r.ray,this._ray),this.dist=r.dist,this.target=r.target,this.name=r.name,this.drapedLayerOrder=r.drapedLayerOrder,this.center=r.center?request.t$13(r.center):null,this.geometryId=r.geometryId,this.triangleNr=r.triangleNr,this.intersector=r.intersector,this.drapedLayerGraphicOrder=r.drapedLayerGraphicOrder,request.r$14(this.normal,r.normal),request.n$26(this.transformation,r.transformation);}}const O=request.n$13(),I=lineSegment.n();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m=request.s.getLogger("esri.layers.VoxelWasmPerScene");class p$d{constructor(e){this._halfIntTexturesAvailable=!1,this._useDepthPass=!1,this._havePreparedWithAllLayers=!1,this._renderPluginContext=null,this._vxl=null,this._pluginIsActive=!1,this._moreToLoad=!1,this._viewportWidth=-1,this._viewportHeight=-1,this._newLayers=[],this._layers=new Map,this._renderPass=0,this._renderSlot=3,this._rctx=null,this._renderTargetToRestore=null,this._wasmMemBlockSizes=[512,1024,2048,4096,8192,16384,32768,65536],this._wasmMemBlocks=new Map,this._dbgFlags=new Set,this._dbgFlags.add(4),this._view=e,this.initialize();}get canRender(){return !!this._vxl&&"local"===this._view.viewingMode}dbg(e,t){this._dbgFlags.has(e)&&(4===e?m.error(t):m.warn(t));}removeRenderPlugin(){this._pluginIsActive&&this._view._stage&&(this.dbg(1,"--removeRenderPlugin--"),this._view._stage.removeRenderPlugin(this)),this._pluginIsActive=!1;}initialize(){this.dbg(1,"--initialize--");for(const e of this._wasmMemBlockSizes)this._wasmMemBlocks.set(e,0);this._readyWatchHandle=request.i$29((()=>this._view.ready),(e=>{e&&"local"===this._view.viewingMode?(this.dbg(1,"view ready status changed to ready on a local view, calling addRenderPlugin"),this._view._stage.addRenderPlugin([this._renderSlot],this),this._pluginIsActive=!0):(this.dbg(1,"view ready status changed, not ready or not a local view!"),this.removeRenderPlugin());}),{initial:!0}),this._qualityWatchHandle=request.i$29((()=>{var e;return null==(e=this._view)?void 0:e.qualityProfile}),(e=>{this.dbg(3,"qualityProfile changed to "+e),this._vxl&&this._vxl.set_quality(this.toWasmQuality(e));}),{initial:!0}),this._timeExtentWatchHandle=request.i$29((()=>{var e;return null==(e=this._view)?void 0:e.timeExtent}),(()=>{if(this._vxl){var e;const t=this._getTimeArgs(null==(e=this._view)?void 0:e.timeExtent);this.dbg(3,"sceneView timeExtent changed to useTime="+t.useTime+" st="+t.startTime+" et="+t.endTime),this._vxl.set_scene_time_extent(t.startTime,t.endTime,t.useTime),this._renderPluginContext.requestRender();}}),{initial:!0});}initializeRenderContext(e){this.dbg(1,"--initializeRenderContext--");const t=e.renderContext.rctx;"webgl2"===t.webglVersion?(this._renderPluginContext=e,this._rctx=e.renderContext.rctx,this._halfIntTexturesAvailable=!!this._rctx.capabilities.textureNorm16,this.initializeWasm(t.gl)):this.dbg(4,"WebGL 1 context only!");}uninitializeRenderContext(){this._renderPluginContext=null,this._rctx=null,this.dbg(1,"--uninitializeRenderContext--");}restoreFramebuffer(){if(!this._renderTargetToRestore)return;const e=this._renderTargetToRestore.fbo;if(!!!this._rctx)return void this.dbg(4,"no context in restoreFramebuffer!");this._rctx.bindFramebuffer(e,!0);const t=this._renderTargetToRestore.viewport;this._rctx.setViewport(t.x,t.y,t.width,t.height);}bindPreviousDepthToSlot(e,t){const s=!!this._rctx,i=!!this._renderTargetToRestore;if(!s||!i)return 0;const r=this._renderTargetToRestore.fbo.depthStencilTexture;return r?(0===t?this._rctx.bindTexture(null,e,!0):this._rctx.bindTexture(r,e,!0),1):(this.dbg(4,"no depth/stencil texture exists!"),0)}setBlendState(e,t,s,i){this._rctx?(this._rctx.setBlendingEnabled(1===e),this._rctx.setBlendFunction(t,s),this._rctx.setBlendEquation(i)):this.dbg(4,"setBlendState callback has no rendering context!");}setFrontFace(e){this._rctx?this._rctx.setFrontFace(e):this.dbg(4,"setFrontFace callback has no rendering context!");}setDepthStencilStateFunction(e,t,s){this._rctx?(this._rctx.setDepthFunction(s),this._rctx.setDepthTestEnabled(1===e),this._rctx.setDepthWriteEnabled(1===t),this._rctx.setStencilTestEnabled(!1),this._rctx.setStencilFunction(519,0,255),this._rctx.setStencilOpSeparate(1028,7680,7682,7680),this._rctx.setStencilOpSeparate(1029,7680,7683,7680)):this.dbg(4,"setDepthStencilStateFunction callback has no rendering context!");}setRasterizerState(e){if(this._rctx)switch(e){case 1:this._rctx.setFaceCullingEnabled(!1);break;case 3:this._rctx.setCullFace(1029),this._rctx.setFaceCullingEnabled(!0);break;case 2:this._rctx.setCullFace(1028),this._rctx.setFaceCullingEnabled(!0);}else this.dbg(4,"setRasterizerState callback has no rendering context!");}setViewport(e,t,s,i){this._rctx?this._rctx.setViewport(e,t,s,i):this.dbg(4,"setViewport callback has no rendering context!");}_syncRequestsResponses(){this._layers.forEach(((t,s)=>{const i=[];t.responses.forEach(((e,t)=>{i.push(t),this.dbg(2,"responding for requestID:"+t+" size:"+e.size),this._vxl.respond(s,t,e);}));const r=t.responses;for(const e of i)r.delete(e);const a=this._vxl.get_new_requests(s),l=t.abortController.signal;for(const o in a){t.outstandingRequestCount+=1,1===t.outstandingRequestCount&&t.layerView.updatingFlagChanged();const s=a[o],i={responseType:"array-buffer",signal:l};this.dbg(2,"making requestID:"+o+" url:"+s.url),request.E(s.url,i).then((e=>{t.outstandingRequestCount-=1,0===t.outstandingRequestCount&&t.layerView.updatingFlagChanged(),this.dbg(2,"have response for requestID:"+o);let i=0;if(e.data.byteLength>0){i=this._vxl._malloc(e.data.byteLength);const t=new Uint8Array(this._vxl.HEAPU8.buffer,i,e.data.byteLength),s=new Uint8Array(e.data);for(let i=0;i<e.data.byteLength;++i)t[i]=s[i];}r.set(+o,{type:s.type,ptr:i,size:e.data.byteLength,success:!0});})).catch((e=>{t.outstandingRequestCount-=1,0===t.outstandingRequestCount&&t.layerView.updatingFlagChanged(),request.d$2(e)||(this.dbg(4,`requestID:${o} failed, error=${e.toString()}`),r.set(+o,{type:s.type,ptr:0,size:0,success:!1}));}));}}));}updateWasmCamera(e){this._vxl.set_projection_matrix.apply(this._vxl,e.projectionMatrix),this._vxl.set_view_matrix.apply(this._vxl,e.viewMatrix),this._vxl.set_near_far(e.near,e.far);}isUpdating(e){return !(this._vxl||!this._vxlPromise)||!!this._layers.has(e)&&this._layers.get(e).outstandingRequestCount>0}setEnabled(e,t){this._layers.forEach(((s,i)=>{s.layerView===e&&(this._vxl.set_enabled(i,t),this._renderPluginContext.requestRender());}));}setSlices(e,t){const s={mask:2,slices:{planes:t,currentEditPlane:-1}};return this._doMaskedUIUpdate(e,s,!0)}setDynamicSections(e,t){const s={mask:4,dynamicSections:{planes:t,currentEditPlane:-1}};return this._doMaskedUIUpdate(e,s,!0)}setStaticSections(e,t){const s={mask:1,staticSections:t};return this._doMaskedUIUpdate(e,s,!0)}setCurrentVariable(e,t){const s={mask:1024,currentVariable:t};return this._doMaskedUIUpdate(e,s,!0)}setRenderMode(e,t){const s={mask:8192,renderMode:t};return this._doMaskedUIUpdate(e,s,!0)}_doMaskedUIUpdate(e,t,s){if(!this._vxl)return !1;let i=!1;return this._layers.forEach(((s,r)=>{if(s.layerView===e){const e={str:JSON.stringify(t),byteCount:0,ptr:0,isReusable:!1};this._AllocateBlock(e)&&(i=1===this._vxl.handle_masked_ui_update(r,e.ptr,e.byteCount),e.isReusable||this._vxl._free(e.ptr));}})),i&&s&&this._renderPluginContext.requestRender(),i}addVoxelLayer(e){if(!this._vxl){const t={layerView:e,resolveCallback:null,rejectCallback:null},s=new Promise(((e,s)=>{t.resolveCallback=e,t.rejectCallback=s;}));return this._newLayers.push(t),s}const t=this._addVoxelLayer(e);return t<0?Promise.reject(-1):Promise.resolve(t)}removeVoxelLayer(e){if(!this._vxl){const t=this._newLayers.findIndex((t=>e===t.layerView));t>=0&&(this._newLayers[t].resolveCallback(-1),this._newLayers.splice(t,1));const s=this._newLayers.length;return 0===s&&(this.dbg(1," no voxel layers left after removing a layer, removing RenderPlugin and destroying"),this.destroy()),s}let t=-1;this._layers.forEach(((s,i)=>{s.layerView===e&&(t=i,s.abortController.abort(),this._vxl.remove_layer(t));})),t>=0&&this._layers.delete(t);const s=this._layers.size;return 0===s&&(this.dbg(1," no voxel layers left after removing a layer, removing RenderPlugin and destroying"),this.destroy()),s}_getBlockSize(e){for(const t of this._wasmMemBlockSizes)if(e<t)return t;return -1}_AllocateBlock(e){e.byteCount=this._vxl.lengthBytesUTF8(e.str)+1;const t=this._getBlockSize(e.byteCount);return t<0?(e.isReusable=!1,e.ptr=this._vxl._malloc(e.byteCount)):(e.isReusable=!0,e.ptr=this._wasmMemBlocks.get(t),0===e.ptr&&(e.ptr=this._vxl._malloc(t),this._wasmMemBlocks.set(t,e.ptr))),0!==e.ptr&&(this._vxl.stringToUTF8(e.str,e.ptr,e.byteCount),!0)}_getTimeArgs(e){let t=-Number.MAX_VALUE,s=Number.MAX_VALUE,r=!1;return request.r(e)&&(e.isAllTime?r=!0:(request.r(e.start)&&(r=!0,t=e.start.getTime()/1e3),request.r(e.end)&&(r=!0,s=e.end.getTime()/1e3))),{startTime:t,endTime:s,useTime:r}}_addVoxelLayer(e){var t;const s=e.layer;let i=-1;const r=s.getConfiguration();if(r.length<1)return -1;const n={str:r,byteCount:0,ptr:0,isReusable:!1};if(!this._AllocateBlock(n))return -1;const a=this._getTimeArgs(null==(t=this._view)?void 0:t.timeExtent),l=this._view.spatialReference.isWGS84&&s.spatialReference.isWGS84?111319.49079327357:1;if(i=this._vxl.add_layer(s.serviceRoot,n.ptr,n.byteCount,l,l,a.startTime,a.endTime,a.useTime),n.isReusable||this._vxl._free(n.ptr),i>=0){const t=new AbortController;if(this._layers.set(i,{layerView:e,responses:new Map,outstandingRequestCount:0,abortController:t}),!this._halfIntTexturesAvailable){const t=[];let s="";for(const i of e.layer.variables)"Int16"!==i.renderingFormat.type&&"UInt16"!==i.renderingFormat.type||(t.push(i.name),i.id===e.layer.style.currentVariableId&&(s=i.name));""!==s&&m.error("#addVoxelLayer_error()",e.layer,`The voxel layer '${e.layer.title}' cannot render the current variable '${s}' in the this browser`),t.length>0&&m.warn("#addVoxelLayer_warning()",e.layer,`The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in the this browser`);}return i}return -1}prepareRender(e){if(!this._vxl)return;const t=e.viewForward,s=e.eye;this._vxl.update_camera_pos_and_direction(s[0],s[1],s[2],t[0],t[1],t[2]);const i=this._vxl.cull();this.dbg(2,"missingResourceCount="+i),this._moreToLoad=i>0,this._havePreparedWithAllLayers=0===this._newLayers.length;}render(e){if(!this._vxl||e.pass!==this._renderPass||e.slot!==this._renderSlot)return !1;for(const s of this._newLayers){const e=this._addVoxelLayer(s.layerView);-1===e?s.rejectCallback(-1):s.resolveCallback(e);}if(this._newLayers=[],0===this._layers.size)return this.dbg(4,"No voxel layers but RenderPlugin instance is being asked to render!"),!1;this._renderTargetToRestore={fbo:this._rctx.getBoundFramebufferObject(),viewport:this._rctx.getViewport()},this._syncRequestsResponses(),this._vxl.begin_frame();const t=this._renderTargetToRestore.viewport;return t.width===this._viewportWidth&&t.height===this._viewportHeight||(this._viewportWidth=t.width,this._viewportHeight=t.height,this._vxl.set_viewport(t.width,t.height)),0===t.x&&0===t.y||this.dbg(4,"Unsupported viewport parameters detected!"),this.updateWasmCamera(e.camera),this._vxl.draw(),this._renderTargetToRestore.fbo=null,e.rctx.externalTextureUnitUpdate(this._vxl.get_texture_units_bound_in_frame(),this._vxl.get_active_texture_unit()),e.rctx.externalVertexArrayObjectUpdate(),e.rctx.externalVertexBufferUpdate(),(this._moreToLoad||!this._havePreparedWithAllLayers&&this._layers.size>0)&&this._renderPluginContext.requestRender(),!0}queryDepthRange(e){this.dbg(1,"--queryDepthRange--");const t=e.viewForward,s=e.eye;this._vxl.update_camera_pos_and_direction(s[0],s[1],s[2],t[0],t[1],t[2]),this._vxl.cull();const i={near:5,far:1e4};return i.near=this._vxl.get_near(),i.far=this._vxl.get_far(),i}destroy(){this.dbg(1,"--destroy--"),this.removeRenderPlugin(),this._readyWatchHandle=request.s$16(this._readyWatchHandle),this._qualityWatchHandle=request.s$16(this._qualityWatchHandle),this._timeExtentWatchHandle=request.s$16(this._timeExtentWatchHandle),this._vxl&&(this._layers.forEach((e=>{e.abortController.abort();})),this._wasmMemBlocks.forEach((e=>{0!==e&&this._vxl._free(e);})),this._vxl.uninitialize_voxel_wasm(),this._vxl=null);}initializeWasm(e){return this._vxl?Promise.resolve():(this._vxlPromise||(this._vxlPromise=t$8(e).then((e=>{var t;if(this._vxl=e,this._vxlPromise=null,this._newLayers.length<=0)return this.dbg(1," no voxel layers left after WASM downloaded, removing RenderPlugin and destroying"),void this.destroy();const s=this._getTimeArgs(null==(t=this._view)?void 0:t.timeExtent),i=this._vxl.addFunction(this.restoreFramebuffer.bind(this),"v"),r=this._vxl.addFunction(this.setBlendState.bind(this),"viiii"),n=this._vxl.addFunction(this.setFrontFace.bind(this),"vi"),a=this._vxl.addFunction(this.setRasterizerState.bind(this),"vi"),l=this._vxl.addFunction(this.setDepthStencilStateFunction.bind(this),"viii"),o=this._vxl.addFunction(this.setViewport.bind(this),"viiii"),h=this._vxl.addFunction(this.bindPreviousDepthToSlot.bind(this),"iii");this._vxl.initialize_voxel_wasm(i,r,n,a,l,o,h,s.startTime,s.endTime,s.useTime),this._vxl.set_quality(this.toWasmQuality(this._view.qualityProfile)),this._renderPluginContext&&this._renderPluginContext.requestRender();})).catch((()=>{for(const e of this._newLayers)e.rejectCallback(-2);this.dbg(4," WASM failed to download, removing RenderPlugin and destroying"),this.destroy();}))),this._vxlPromise)}get type(){return "external"}get isGround(){return !1}get slicePlane(){return !1}get intersectionHandlerId(){return "unj"}intersect(e,t,s,i,r){if(!this._vxl)return;if(!this._rctx)return;if(0===this._layers.size)return;if(r[0]<0||r[0]>e.camera.viewport[2]||r[1]<0||r[1]>e.camera.viewport[3])return;this._renderTargetToRestore={fbo:this._rctx.getBoundFramebufferObject(),viewport:this._rctx.getViewport()};const n=e.camera.viewForward,a=e.camera.eye;this._vxl.update_camera_pos_and_direction(a[0],a[1],a[2],n[0],n[1],n[2]),this.updateWasmCamera(e.camera),this._vxl.begin_frame(),this._useDepthPass?this.intersectDepth(e,t,s,i,r):this.intersectObject(e,t,s,i,r),this._renderTargetToRestore.fbo=null,this._rctx.externalTextureUnitUpdate(this._vxl.get_texture_units_bound_in_frame(),this._vxl.get_active_texture_unit()),this._rctx.externalVertexArrayObjectUpdate(),this._rctx.externalVertexBufferUpdate();}intersectObject(e,t,i,r,n){const a=this._vxl.pick_object(n[0],n[1]);if(a.success){const n=request.n$13();request.J$1(n,r,i),request.j$8(n,n);const g=request.q$2(i,r),m=request.n$13();request.o$7(m,a.worldX,a.worldY,a.worldZ);const p=request.n$13();request.J$1(p,m,i);const b=request.n$13();request.d$11(b,n,request.z$4(p,n));const y=request.n$13();request.u$9(y,i,b);const f=request.q$2(i,y),w=request.e$13(f/g,0,1),T=e=>{e.intersector="Voxel",e.dist=w,e.target={type:"external",metadata:{layerUid:this.intersectionHandlerId}};},R=e.results.min;(null==R.dist||w<R.dist)&&(null==t||t(i,r,w))&&T(R);const C=e.results.max;if(0!==e.options.store&&(null==C.dist||w>C.dist)&&(null==t||t(i,r,w))&&T(C),2===e.options.store){const t=new j(e.ray);T(t),e.results.all.push(t);}}}intersectDepth(e,t,i,r,n){const a=this._vxl.pick_depth(n[0],n[1]);if(a.success){const n=request.n$13();request.J$1(n,r,i),request.j$8(n,n);const g=request.q$2(i,r),m=request.n$13();request.o$7(m,a.worldX,a.worldY,a.worldZ);const p=request.n$13();request.J$1(p,m,i);const b=request.n$13();request.d$11(b,n,request.z$4(p,n));const y=request.n$13();request.u$9(y,i,b);const f=request.q$2(i,y),w=request.e$13(f/g,0,1),T=e=>{e.intersector="Voxel",e.dist=w,e.target={type:"external",metadata:{layerUid:this.intersectionHandlerId}};},R=e.results.min;(null==R.dist||w<R.dist)&&(null==t||t(i,r,w))&&T(R);const C=e.results.max;if(0!==e.options.store&&(null==C.dist||w>C.dist)&&(null==t||t(i,r,w))&&T(C),2===e.options.store){const t=new j(e.ray);T(t),e.results.all.push(t);}}}toWasmQuality(e){switch(e){case"low":return 0;case"medium":return 1;case"high":return 2}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$7{constructor(){this.view2WASM=new Map;}static getInstance(){return t$7.instance||(t$7.instance=new t$7),t$7.instance}isUpdating(e,t){return !!this.view2WASM.has(e)&&this.view2WASM.get(e).isUpdating(t)}addLayer(t,r){return this.view2WASM.has(t)||this.view2WASM.set(t,new p$d(t)),this.view2WASM.get(t).addVoxelLayer(r)}removeLayer(e,t){if(this.view2WASM.has(e)){this.view2WASM.get(e).removeVoxelLayer(t)<1&&this.view2WASM.delete(e);}}setLayerEnabled(e,t,r){if(this.view2WASM.has(e)){this.view2WASM.get(e).setEnabled(t,r);}}setLayerSlices(e,t){let r=!1;return this.view2WASM.forEach(((i,a)=>{a.allLayerViews.filter((e=>"voxel-3d"===e.type)).forEach((a=>{a.layer===e&&(r=i.setSlices(a,t));}));})),r}setLayerDynamicSections(e,t){let r=!1;return this.view2WASM.forEach(((i,a)=>{a.allLayerViews.filter((e=>"voxel-3d"===e.type)).forEach((a=>{a.layer===e&&(r=i.setDynamicSections(a,t));}));})),r}setLayerCurrentVariable(e,t){let r=!1;return this.view2WASM.forEach(((i,a)=>{a.allLayerViews.filter((e=>"voxel-3d"===e.type)).forEach((a=>{a.layer===e&&(r=i.setCurrentVariable(a,t));}));})),r}setLayerRenderMode(e,t){let r=!1;return this.view2WASM.forEach(((i,a)=>{a.allLayerViews.filter((e=>"voxel-3d"===e.type)).forEach((a=>{a.layer===e&&(r=i.setRenderMode(a,t));}));})),r}setLayerStaticSections(e,t){let r=!1;return this.view2WASM.forEach(((i,a)=>{a.allLayerViews.filter((e=>"voxel-3d"===e.type)).forEach((a=>{a.layer===e&&(r=i.setStaticSections(a,t));}));})),r}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$3=class extends request.a$1{constructor(){super(...arguments),this.enabled=!0,this.label="",this.normal=null,this.point=null;}};request.e([request.d({type:Boolean,json:{default:!0,write:!0}})],s$3.prototype,"enabled",void 0),request.e([request.d({type:String,json:{write:!0}})],s$3.prototype,"label",void 0),request.e([request.d({type:[Number],json:{write:!0}})],s$3.prototype,"normal",void 0),request.e([request.d({type:[Number],json:{write:!0}})],s$3.prototype,"point",void 0),s$3=request.e([request.i("esri.layers.support.VoxelDynamicSection")],s$3);const p$c=s$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$2=class extends request.a$1{constructor(){super(...arguments),this.enabled=!0,this.label="",this.normal=null,this.point=null;}};request.e([request.d({type:Boolean,json:{write:!0}})],s$2.prototype,"enabled",void 0),request.e([request.d({type:String,json:{write:!0}})],s$2.prototype,"label",void 0),request.e([request.d({type:[Number],json:{write:!0}})],s$2.prototype,"normal",void 0),request.e([request.d({type:[Number],json:{write:!0}})],s$2.prototype,"point",void 0),s$2=request.e([request.i("esri.layers.support.VoxelSlice")],s$2);const p$b=s$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$a=class extends request.a$1{constructor(){super(...arguments),this.enabled=!0,this.href=null,this.id=null,this.label="",this.normal=null,this.point=null,this.sizeInPixel=null,this.slices=null,this.timeId=0,this.variableId=null;}};request.e([request.d({type:Boolean,json:{default:!0,write:!0}})],p$a.prototype,"enabled",void 0),request.e([request.d({type:String,json:{write:{enabled:!0,isRequired:!0}}})],p$a.prototype,"href",void 0),request.e([request.d({type:request.S$3,json:{write:{enabled:!0,isRequired:!0}}})],p$a.prototype,"id",void 0),request.e([request.d({type:String,json:{write:!0}})],p$a.prototype,"label",void 0),request.e([request.d({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],p$a.prototype,"normal",void 0),request.e([request.d({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],p$a.prototype,"point",void 0),request.e([request.d({type:[request.S$3],json:{write:{enabled:!0,isRequired:!0}}})],p$a.prototype,"sizeInPixel",void 0),request.e([request.d({type:[p$b],json:{write:!0}})],p$a.prototype,"slices",void 0),request.e([request.d({type:request.S$3,json:{default:0,write:!0}})],p$a.prototype,"timeId",void 0),request.e([request.d({type:request.S$3,json:{write:{enabled:!0,isRequired:!0}}})],p$a.prototype,"variableId",void 0),p$a=request.e([request.i("esri.layers.support.VoxelSection")],p$a);const l$2=p$a;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$6=class extends request.a$1{constructor(){super(...arguments),this.diffuseFactor=.5,this.specularFactor=.5;}};request.e([request.d({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],t$6.prototype,"diffuseFactor",void 0),request.e([request.d({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],t$6.prototype,"specularFactor",void 0),t$6=request.e([request.i("esri.layers.support.VoxelSimpleShading")],t$6);const p$9=t$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$1=class extends request.a$1{constructor(){super(...arguments),this.color=null,this.value=null,this.enabled=!0,this.label=null;}};request.e([request.d({type:request.h,json:{type:[request.S$3],write:{enabled:!0,isRequired:!0}}})],l$1.prototype,"color",void 0),request.e([request.d({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],l$1.prototype,"value",void 0),request.e([request.d({type:Boolean,json:{default:!0,write:!0}})],l$1.prototype,"enabled",void 0),request.e([request.d({type:String,json:{write:!0}})],l$1.prototype,"label",void 0),l$1=request.e([request.i("esri.layers.support.VoxelIsosurface")],l$1);const i$3=l$1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$5=class extends request.a$1{constructor(){super(...arguments),this.alpha=0,this.position=0;}};request.e([request.d({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],t$5.prototype,"alpha",void 0),request.e([request.d({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],t$5.prototype,"position",void 0),t$5=request.e([request.i("esri.layers.support.VoxelAlphaStop")],t$5);const p$8=t$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$2=class extends request.a$1{constructor(){super(...arguments),this.color=null,this.position=0;}};request.e([request.d({type:request.h,json:{type:[request.S$3],write:{enabled:!0,isRequired:!0}}})],i$2.prototype,"color",void 0),request.e([request.d({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],i$2.prototype,"position",void 0),i$2=request.e([request.i("esri.layers.support.VoxelColorStop")],i$2);const c$3=i$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$4=class extends request.a$1{constructor(){super(...arguments),this.enabled=!1,this.range=null;}};request.e([request.d({type:Boolean,json:{default:!1,write:!0}})],t$4.prototype,"enabled",void 0),request.e([request.d({type:[Number],json:{write:!0}})],t$4.prototype,"range",void 0),t$4=request.e([request.i("esri.layers.support.VoxelRangeFilter")],t$4);const p$7=t$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let n$3=class extends request.a$1{constructor(o){super(o),this.interpolation=null,this.stretchRange=null,this.rangeFilter=null,this.colorStops=new request.S$2,this.alphaStops=new request.S$2;}set colorStops(o){this._set("colorStops",request.n$19(o,this._get("colorStops"),request.S$2.ofType(c$3)));}set alphaStops(o){this._set("alphaStops",request.n$19(o,this._get("alphaStops"),request.S$2.ofType(p$8)));}};request.e([request.d({type:["linear","nearest"],json:{write:!0}})],n$3.prototype,"interpolation",void 0),request.e([request.d({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],n$3.prototype,"stretchRange",void 0),request.e([request.d({type:request.S$2.ofType(c$3),json:{write:{enabled:!0,overridePolicy(){return {enabled:!!this.colorStops&&this.colorStops.length>0}}}}})],n$3.prototype,"colorStops",null),request.e([request.d({type:request.S$2.ofType(p$8),json:{write:{enabled:!0,overridePolicy(){return {enabled:!!this.alphaStops&&this.alphaStops.length>0}}}}})],n$3.prototype,"alphaStops",null),request.e([request.d({type:p$7,json:{write:!0}})],n$3.prototype,"rangeFilter",void 0),n$3=request.e([request.i("esri.layers.support.VoxelTransferFunctionStyle")],n$3);const c$2=n$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$1=class extends request.a$1{constructor(){super(...arguments),this.color=null,this.value=0,this.enabled=!0,this.label=null;}};request.e([request.d({type:request.h,json:{type:[request.S$3],write:{enabled:!0,isRequired:!0}}})],i$1.prototype,"color",void 0),request.e([request.d({type:request.S$3,json:{write:{enabled:!0,isRequired:!0}}})],i$1.prototype,"value",void 0),request.e([request.d({type:Boolean,json:{default:!0,write:!0}})],i$1.prototype,"enabled",void 0),request.e([request.d({type:String,json:{write:!0}})],i$1.prototype,"label",void 0),i$1=request.e([request.i("esri.layers.support.VoxelUniqueValue")],i$1);const l=i$1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$6=class extends request.a$1{constructor(e){super(e),this.variableId=0,this.label=null,this.transferFunction=null,this.uniqueValues=new request.S$2,this.isosurfaces=new request.S$2;}set uniqueValues(e){this._set("uniqueValues",request.n$19(e,this._get("uniqueValues"),request.S$2.ofType(l)));}set isosurfaces(e){this._set("isosurfaces",request.n$19(e,this._get("isosurfaces"),request.S$2.ofType(i$3)));}};request.e([request.d({type:request.S$3,json:{write:{enabled:!0,isRequired:!0}}})],p$6.prototype,"variableId",void 0),request.e([request.d({type:String,json:{write:!0}})],p$6.prototype,"label",void 0),request.e([request.d({type:c$2,json:{write:{enabled:!0,overridePolicy(){return {enabled:!this.uniqueValues||this.uniqueValues.length<1}}}}})],p$6.prototype,"transferFunction",void 0),request.e([request.d({type:request.S$2.ofType(l),json:{write:{enabled:!0,overridePolicy(){return {enabled:!!this.uniqueValues&&this.uniqueValues.length>0}}}}})],p$6.prototype,"uniqueValues",null),request.e([request.d({type:request.S$2.ofType(i$3),json:{write:{enabled:!0,overridePolicy(){const e=!this.uniqueValues||this.uniqueValues.length<1,s=!!this.isosurfaces&&this.isosurfaces.length>0;return {enabled:e&&s}}}}})],p$6.prototype,"isosurfaces",null),p$6=request.e([request.i("esri.layers.support.VoxelVariableStyle")],p$6);const c$1=p$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let n$2=class extends request.a$1{constructor(e){super(e),this.volumeId=0,this.verticalExaggeration=1,this.exaggerationMode="scale-height",this.verticalOffset=0,this.slices=new request.S$2,this.dynamicSections=new request.S$2;}set slices(e){this._set("slices",request.n$19(e,this._get("slices"),request.S$2.ofType(p$b)));}set dynamicSections(e){this._set("dynamicSections",request.n$19(e,this._get("dynamicSections"),request.S$2.ofType(p$c)));}};request.e([request.d({type:request.S$3,json:{write:{enabled:!0,isRequired:!0}}})],n$2.prototype,"volumeId",void 0),request.e([request.d({type:Number,json:{default:1,write:!0}})],n$2.prototype,"verticalExaggeration",void 0),request.e([request.d({type:["scale-position","scale-height"],json:{default:"scale-height",write:!0}})],n$2.prototype,"exaggerationMode",void 0),request.e([request.d({type:Number,json:{default:0,write:!0}})],n$2.prototype,"verticalOffset",void 0),request.e([request.d({type:request.S$2.ofType(p$b),json:{write:{enabled:!0,overridePolicy(){return {enabled:!!this.slices&&this.slices.length>0}}}}})],n$2.prototype,"slices",null),request.e([request.d({type:request.S$2.ofType(p$c),json:{write:{enabled:!0,overridePolicy(){return {enabled:!!this.dynamicSections&&this.dynamicSections.length>0}}}}})],n$2.prototype,"dynamicSections",null),n$2=request.e([request.i("esri.layers.support.VoxelVolumeStyle")],n$2);const a=n$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let y=class extends request.a$1{constructor(e){super(e),this.currentVariableId=0,this.renderMode="volume",this.enableSlices=!0,this.enableSections=!0,this.enableDynamicSections=!0,this.enableIsosurfaces=!0,this.shading=new p$9,this.volumeStyles=new request.S$2,this.variableStyles=new request.S$2;}set volumeStyles(e){this._set("volumeStyles",request.n$19(e,this._get("volumeStyles"),request.S$2.ofType(a)));}set variableStyles(e){this._set("variableStyles",request.n$19(e,this._get("variableStyles"),request.S$2.ofType(c$1)));}};request.e([request.d({type:request.S$2.ofType(a),json:{write:!0}})],y.prototype,"volumeStyles",null),request.e([request.d({type:request.S$3,json:{write:{enabled:!0,isRequired:!0}}})],y.prototype,"currentVariableId",void 0),request.e([request.d({type:["volume","surfaces"],json:{write:!0}})],y.prototype,"renderMode",void 0),request.e([request.d({type:request.S$2.ofType(c$1),json:{write:!0}})],y.prototype,"variableStyles",null),request.e([request.d({type:Boolean,json:{write:!0}})],y.prototype,"enableSlices",void 0),request.e([request.d({type:Boolean,json:{write:!0}})],y.prototype,"enableSections",void 0),request.e([request.d({type:Boolean,json:{write:!0}})],y.prototype,"enableDynamicSections",void 0),request.e([request.d({type:Boolean,json:{write:!0}})],y.prototype,"enableIsosurfaces",void 0),request.e([request.d({type:p$9,json:{write:!0}})],y.prototype,"shading",void 0),y=request.e([request.i("esri.layers.support.VoxelStyle")],y);const c=y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$1=class extends request.a$1{constructor(){super(...arguments),this.continuity=null,this.hasNoData=!1,this.noData=0,this.offset=0,this.scale=1,this.type=null;}};request.e([request.d({type:["discrete","continuous"],json:{write:!0}})],s$1.prototype,"continuity",void 0),request.e([request.d({type:Boolean,json:{write:!0}})],s$1.prototype,"hasNoData",void 0),request.e([request.d({type:Number,json:{write:!0}})],s$1.prototype,"noData",void 0),request.e([request.d({type:Number,json:{write:!0}})],s$1.prototype,"offset",void 0),request.e([request.d({type:Number,json:{write:!0}})],s$1.prototype,"scale",void 0),request.e([request.d({type:String,json:{write:{enabled:!0,isRequired:!0}}})],s$1.prototype,"type",void 0),s$1=request.e([request.i("esri.layers.support.VoxelFormat")],s$1);const p$5=s$1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i=class extends request.a$1{constructor(){super(...arguments),this.id=null,this.description="",this.name=null,this.originalFormat=null,this.renderingFormat=null,this.unit="",this.volumeId=0,this.type=null;}};request.e([request.d({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],i.prototype,"id",void 0),request.e([request.d({type:String,json:{write:!0}})],i.prototype,"description",void 0),request.e([request.d({type:String,json:{write:{enabled:!0,isRequired:!0}}})],i.prototype,"name",void 0),request.e([request.d({type:p$5,json:{write:!0}})],i.prototype,"originalFormat",void 0),request.e([request.d({type:p$5,json:{write:{enabled:!0,isRequired:!0}}})],i.prototype,"renderingFormat",void 0),request.e([request.d({type:String,json:{write:!0}})],i.prototype,"unit",void 0),request.e([request.d({type:Number,json:{write:!0}})],i.prototype,"volumeId",void 0),request.e([request.d({type:["stc-hot-spot-results","stc-cluster-outlier-results","stc-estimated-bin","generic-nearest-interpolated"],json:{write:!0}})],i.prototype,"type",void 0),i=request.e([request.i("esri.layers.support.VoxelVariable")],i);const p$4=i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$3=class extends request.a$1{constructor(){super(...arguments),this.values=null;}};request.e([request.d({type:[Number],json:{write:!0}})],t$3.prototype,"values",void 0),t$3=request.e([request.i("esri.layers.support.VoxelIrregularSpacing")],t$3);const p$3=t$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$2=class extends request.a$1{constructor(){super(...arguments),this.scale=1,this.offset=0;}};request.e([request.d({type:Number,json:{write:!0}})],t$2.prototype,"scale",void 0),request.e([request.d({type:Number,json:{write:!0}})],t$2.prototype,"offset",void 0),t$2=request.e([request.i("esri.layers.support.VoxelRegularSpacing")],t$2);const p$2=t$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$1=class extends request.a$1{constructor(){super(...arguments),this.irregularSpacing=null,this.isPositiveUp=null,this.isWrappedDateLine=null,this.label=null,this.name=null,this.quantity=null,this.regularSpacing=null,this.size=0,this.unit=null;}};request.e([request.d({type:p$3,json:{write:!0}})],p$1.prototype,"irregularSpacing",void 0),request.e([request.d({type:Boolean,json:{write:!0}})],p$1.prototype,"isPositiveUp",void 0),request.e([request.d({type:Boolean,json:{write:!0}})],p$1.prototype,"isWrappedDateLine",void 0),request.e([request.d({type:String,json:{write:!0}})],p$1.prototype,"label",void 0),request.e([request.d({type:String,json:{write:!0}})],p$1.prototype,"name",void 0),request.e([request.d({type:String,json:{write:!0}})],p$1.prototype,"quantity",void 0),request.e([request.d({type:p$2,json:{write:!0}})],p$1.prototype,"regularSpacing",void 0),request.e([request.d({type:Number,json:{write:!0}})],p$1.prototype,"size",void 0),request.e([request.d({type:String,json:{write:!0}})],p$1.prototype,"unit",void 0),p$1=request.e([request.i("esri.layers.support.VoxelDimension")],p$1);const n$1=p$1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$1=class extends request.a$1{constructor(){super(...arguments),this.id=0,this.dimensions=null;}getZDimension(){if(!this.dimensions)return -1;if(!Array.isArray(this.dimensions))return -1;if(4!==this.dimensions.length)return -1;for(let s=2;s<4;++s)if(this.dimensions[s].size>0)return s;return -1}isVolumeValid(){return !!this.dimensions&&(!!Array.isArray(this.dimensions)&&(4===this.dimensions.length&&(!(this.dimensions[0].size<1||this.dimensions[1].size<1)&&-1!==this.getZDimension())))}};request.e([request.d({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],t$1.prototype,"id",void 0),request.e([request.d({type:[n$1],json:{write:{enabled:!0,isRequired:!0}}})],t$1.prototype,"dimensions",void 0),t$1=request.e([request.i("esri.layers.support.VoxelVolume")],t$1);const n=t$1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t;let s=t=class extends request.a$1{constructor(){super(...arguments),this.apronWidth=1,this.brickSize=[32,32,32],this.maxLodLevel=0,this.nodeSize=[4,4,4];}isValid(){const e=new t;return e.apronWidth===this.apronWidth&&e.maxLodLevel===this.maxLodLevel&&(!!this.brickSize&&(!!this.nodeSize&&(!(!Array.isArray(this.brickSize)||!Array.isArray(this.nodeSize))&&(3===this.brickSize.length&&3===this.nodeSize.length&&(32===this.brickSize[0]&&32===this.brickSize[1]&&32===this.brickSize[2]&&(4===this.nodeSize[0]&&4===this.nodeSize[1]&&4===this.nodeSize[2]))))))}};request.e([request.d({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],s.prototype,"apronWidth",void 0),request.e([request.d({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],s.prototype,"brickSize",void 0),request.e([request.d({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],s.prototype,"maxLodLevel",void 0),request.e([request.d({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],s.prototype,"nodeSize",void 0),s=t=request.e([request.i("esri.layers.support.VoxelVolumeIndex")],s);const p=s;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const M=request.s.getLogger(" esri.layers.VoxelLayer");let D=class extends(SceneService.N(request.p$5(request.y$9(request.w$5(request.s$21(request.l$3(request.i$25(request.b$9)))))))){constructor(e){super(e),this.serviceRoot="",this.popupEnabled=!0,this.operationalLayerType="Voxel",this.legendEnabled=!0,this.title=null,this.url=null,this.sections=new request.S$2,this.style=null,this.opacity=1,this.variables=new request.S$2,this.volumes=new request.S$2,this.index=null,this.minScale=0,this.maxScale=0,this.type="voxel",this._dbgFlags=new Set,this._handles=new request.u,this.version={major:Number.NaN,minor:Number.NaN,versionString:""},this._dbgFlags.add(3);}destroy(){this._handles=request.l$12(this._handles);}dbg(e,t){this._dbgFlags.has(e)&&(3===e?M.error(t):M.warn(t));}load(e){const t=request.r(e)?e.signal:null,i=this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(request.b$7).then((()=>this._fetchService(t))).then((()=>this.serviceRoot=this.url));return this.addResolvingPromise(i),Promise.resolve(this)}getConfiguration(){this._handles.add([request.i$29((()=>this._getRenderMode()),(e=>this._pushRenderModeToWasm(e))),request.i$29((()=>this._getCurrentVariableId()),(e=>this._pushCurrentVariableIdToWasm(e))),request.i$29((()=>this._getDynamicSections()),(e=>this._pushDynamicSectionsToWasm(e))),request.i$29((()=>this._getSlices()),(e=>this._pushSlicesToWasm(e))),request.i$29((()=>this._getSections()),(e=>this._pushSectionsToWasm(e)))]);const e={layerType:this.operationalLayerType,version:this.version.versionString,name:this.title,spatialReference:this.spatialReference,fullExtent:this.fullExtent,volumes:this.volumes.toJSON(),variables:this.variables.toJSON(),index:this.index.toJSON(),sections:this.sections.toJSON(),style:this.style};return e.index&&this.index.isValid()?JSON.stringify(e):""}readVersion(e,t){return super.parseVersionString(e)}_getSections(){const e=[];for(const t of this.sections)e.push(new l$2({enabled:t.enabled,href:t.href,id:t.id,label:t.label,normal:t.normal,point:t.point,sizeInPixel:t.sizeInPixel,slices:t.slices,timeId:t.timeId,variableId:t.variableId}));return e}_pushSectionsToWasm(e){this.dbg(2,"VoxelLayer._pushSectionsToWasm() called");t$7.getInstance().setLayerStaticSections(this,e)||this.dbg(3,"VoxelLayer._pushSectionsToWasm() failed!");}_isPlaneValid(e,t,i){if(!e.point)return !1;if(!Array.isArray(e.point)||3!==e.point.length)return !1;if(!e.normal)return !1;if(!Array.isArray(e.normal)||3!==e.normal.length)return !1;for(let o=0;o<3;++o){const r=e.point[o];if(r<0||r>=i[t[o]].size)return !1}const r=request.r$7(e.normal[0],e.normal[1],e.normal[2]);request.j$8(r,r);const s=1e-6;return !(Math.abs(r[0])+Math.abs(r[1])+Math.abs(r[2])<s)&&(e.normal[0]=r[0],e.normal[1]=r[1],e.normal[2]=r[2],!0)}getVariableStyle(e){let t=-1;t=request.r(e)?e:this._getCurrentVariableId();if(!(null==this?void 0:this.style.variableStyles)||-1===t)return null;const i=this.style.variableStyles.findIndex((e=>e.variableId===t));return i<0?null:this.style.variableStyles.getItemAt(i)}getVariable(e){let t=-1;if(t=request.r(e)?e:this._getCurrentVariableId(),!this.variables||-1===t)return null;const i=this.variables.findIndex((e=>e.id===t));return i<0?null:this.variables.getItemAt(i)}_getVolume(e){const t=this.getVariable(e);return request.r(t)?this.volumes.find((({id:e})=>e===t.volumeId)):null}_getVolumeStyle(e){const t=this.getVariable(e);return request.r(t)?this.style.volumeStyles.find((({volumeId:e})=>e===t.volumeId)):null}_getSlices(){const e=[],t=this._getVolume(null);if(!request.r(t)||!t.isVolumeValid())return e;const i=this._getVolumeStyle(null);if(!request.r(i))return e;for(const r of i.slices)this._isPlaneValid(r,[0,1,t.getZDimension()],t.dimensions)?e.push(new p$b({enabled:r.enabled,label:r.label,point:r.point,normal:r.normal})):e.push(new p$b({enabled:!1,label:"invalid",point:r.point,normal:r.normal}));return e}_pushSlicesToWasm(e){this.dbg(2,"VoxelLayer._pushSlicesToWasm() called!");t$7.getInstance().setLayerSlices(this,e)||this.dbg(3,"VoxelLayer._pushSlicesToWasm() failed!");}_getDynamicSections(){const e=[],t=this._getVolume(null);if(!request.r(t)||!t.isVolumeValid())return e;const i=this._getVolumeStyle(null);if(!request.r(i))return e;for(const r of i.dynamicSections)this._isPlaneValid(r,[0,1,t.getZDimension()],t.dimensions)?e.push(new p$c({enabled:r.enabled,label:r.label,point:r.point,normal:r.normal})):e.push(new p$c({enabled:!1,label:"invalid",point:r.point,normal:r.normal}));return e}_pushDynamicSectionsToWasm(e){this.dbg(2,"VoxelLayer._pushDynamicSectionsToWasm() called!");t$7.getInstance().setLayerDynamicSections(this,e)||this.dbg(3,"VoxelLayer._updateDynamicSections() failed!");}_getCurrentVariableId(){return this.style?this.style.currentVariableId:-1}_pushCurrentVariableIdToWasm(e){this.dbg(2,"VoxelLayer._pushCurrentVariableIdToWasm() called!");t$7.getInstance().setLayerCurrentVariable(this,e)||this.dbg(3,"VoxelLayer._pushCurrentVariableIdToWasm() failed!");}_getRenderMode(){return this.style?this.style.renderMode:"volume"}_pushRenderModeToWasm(e){this.dbg(2,"VoxelLayer._pushRenderModeToWasm() called!");t$7.getInstance().setLayerRenderMode(this,e)||this.dbg(3,"VoxelLayer.setLayerRenderMode() failed!");}};request.e([request.d(request.p$14)],D.prototype,"popupEnabled",void 0),request.e([request.d({type:["Voxel"]})],D.prototype,"operationalLayerType",void 0),request.e([request.d(request.c$24)],D.prototype,"legendEnabled",void 0),request.e([request.d({json:{write:!0}})],D.prototype,"title",void 0),request.e([request.d({type:String,json:{write:!0}})],D.prototype,"url",void 0),request.e([request.d({type:request.S$2.ofType(l$2),json:{write:!0,origins:{"web-scene":{name:"layerDefinition.sections",write:!0},service:{write:!1}}}})],D.prototype,"sections",void 0),request.e([request.d({type:c,json:{write:!0,origins:{"web-scene":{name:"layerDefinition.style",write:!0},service:{write:!1}}}})],D.prototype,"style",void 0),request.e([request.d({type:["show","hide"]})],D.prototype,"listMode",void 0),request.e([request.d({type:Number,range:{min:0,max:1},nonNullable:!0,json:{read:!1,write:!1,origins:{"web-scene":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],D.prototype,"opacity",void 0),request.e([request.d({type:request.S$2.ofType(p$4)})],D.prototype,"variables",void 0),request.e([request.d({type:request.S$2.ofType(n)})],D.prototype,"volumes",void 0),request.e([request.d({type:p})],D.prototype,"index",void 0),request.e([request.d({type:Number,json:{name:"layerDefinition.minScale",read:!1,write:!1,origins:{service:{read:!1,write:!1}}}})],D.prototype,"minScale",void 0),request.e([request.d({type:Number,json:{name:"layerDefinition.maxScale",read:!1,write:!1,origins:{service:{read:!1,write:!1}}}})],D.prototype,"maxScale",void 0),request.e([request.d({json:{read:!1},readOnly:!0})],D.prototype,"type",void 0),request.e([request.d({readOnly:!0,json:{name:"serviceVersion"}})],D.prototype,"version",void 0),request.e([request.o$3("service","version")],D.prototype,"readVersion",null),D=request.e([request.i("esri.layers.VoxelLayer")],D);const R=D;

exports.default = R;
