'use strict';

const request = require('./messageBundle-8be88d04.js');
const Graphic = require('./Graphic-0aff6059.js');
const HandleOwner = require('./HandleOwner-9c4c158c.js');
const GraphicsLayer = require('./GraphicsLayer-5076fd9b.js');
const geometry = require('./geometry-ef17530a.js');
const unitUtils = require('./unitUtils-083cb8d0.js');
const arcgisEditor_entry = require('./arcgis-editor-90a28e34.js');
const geometryEngine = require('./geometryEngine-f0bb4840.js');
const mat2d = require('./mat2d-2d5fae3e.js');
const mat2df64 = require('./mat2df64-e9760778.js');
const quat = require('./quat-17613ceb.js');
const quatf64 = require('./quatf64-e7a7f39e.js');
const mathUtils = require('./mathUtils-af6066f0.js');
const common = require('./common-41a349f2.js');
const screenUtils = require('./screenUtils-e9e44bb6.js');
const screenUtils$1 = require('./screenUtils-d911ae62.js');
const dehydratedFeatureComparison = require('./dehydratedFeatureComparison-0d209000.js');
const EditGeometryOperations = require('./EditGeometryOperations-10283cb0.js');
const projection = require('./projection-b19710fa.js');
const drawUtils = require('./drawUtils-75b2078c.js');
const SnappingContext = require('./SnappingContext-250d1404.js');
const Scheduler = require('./Scheduler-72cbcf2a.js');
const dehydratedFeatures = require('./dehydratedFeatures-a58f1b86.js');

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function w$1(r,e,s=null){return request.r(s)?[r,e,s]:[r,e]}function g(r,e,s=null){return request.r(s)?{x:r,y:e,z:s}:{x:r,y:e}}class R$2{constructor(t){this.spatialReference=t;}mapToLocalMultiple(t){return request.g$9(t.map((t=>this.mapToLocal(t))))}get doUnnormalization(){return !1}}class W extends R$2{constructor(t,r,o=null){super(r),this.defaultZ=o,this.transform=mat2df64.e(),this.transformInv=mat2df64.e(),this.transform=mat2df64.n(t),mat2d.r(this.transformInv,this.transform);}makeMapPoint(t,r){return w$1(t,r,this.defaultZ)}mapToLocal(t){return g(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])}localToMap(t){return w$1(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this.defaultZ)}}class v$1 extends R$2{constructor(t,r){super(t.spatialReference),this.view=t,this.defaultZ=null,this.pWS=common.n(),this.tangentFrameUpWS=common.n(),this.tangentFrameRightWS=common.n(),this.tangentFrameForwardWS=common.n(),this.localFrameRightWS=common.n(),this.localFrameUpWS=common.n(),this.worldToLocalTransform=quatf64.e$1(),this.localToWorldTransform=quatf64.e$1(),this.scale=1,this.scale=t.resolution,this.referenceMapPoint=r,this.defaultZ=r.hasZ?r.z:null;const e=t.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,0,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,1,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,2,this.tangentFrameForwardWS);const s=common.n();mathUtils.d(s,this.tangentFrameForwardWS,mathUtils.z(e,this.tangentFrameForwardWS)),mathUtils.c(this.localFrameRightWS,e,s),mathUtils.j$1(this.localFrameRightWS,this.localFrameRightWS),mathUtils._(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),quat.S(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),quat.k(this.localToWorldTransform,this.worldToLocalTransform);}get doUnnormalization(){return "global"===this.view.viewingMode}makeMapPoint(t,r){return w$1(t,r,this.defaultZ)}mapToLocal(r){const e=common.n();this.view.renderCoordsHelper.toRenderCoords(new request.b$2({x:r[0],y:r[1],spatialReference:this.spatialReference}),e),mathUtils.P(e,e,this.worldToLocalTransform);const s=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return request.r(s)?g(s.x/this.scale,s.y/this.scale):null}localToMap(r){const e=common.n();this.view.renderCoordsHelper.toRenderCoords(new request.b$2({x:r.x*this.scale,y:r.y*this.scale,spatialReference:this.spatialReference}),e),mathUtils.P(e,e,this.localToWorldTransform);const s=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return request.r(s)?w$1(s.x,s.y,this.defaultZ):null}}function F(t,r){if("2d"===t.type)return new W(t.state.transform,t.spatialReference,r.length>2?r[2]:null);if("3d"===t.type){const e=r.length>2?new request.b$2({x:r[0],y:r[1],z:r[2],spatialReference:t.spatialReference}):new request.b$2({x:r[0],y:r[1],spatialReference:t.spatialReference});return new v$1(t,e)}return null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function R$1(e,t){const o=new request.b$2({x:e[0],y:e[1],spatialReference:t});return e.length>2&&(o.z=e[2]),o}function j$1(e,t){return new geometry.m$1({points:e,spatialReference:t})}function b$2(e,t,o){const n=new geometry.m({paths:e,spatialReference:t});return o&&geometry.a(n),n}function T(o,n,r,a=!0){const s=request.l$1(o);s.forEach((t=>{const o=t[0],n=t[t.length-1];request.l(o,n)&&1!==t.length||t.push(t[0]);}));let l=new geometry.v({rings:s,spatialReference:n});return l.rings.forEach((e=>{geometry.f(e,!1,!1)||e.reverse();})),r&&geometry.a(l),a&&l.isSelfIntersecting&&request.I(n)&&(l=geometryEngine.simplify(l)),l}function U(e,t,n){const r=t.mapToLocalMultiple(e),a=[],s={x:r[0].x,y:r[0].y},i={x:r[1].x,y:r[1].y},l=Math.round(i.x-s.x),y=Math.round(i.y-s.y),c=Math.max(Math.abs(l),Math.abs(y));if(n){const e={x:s.x+c,y:s.y+c},t={x:s.x-c,y:s.y-c};a.push(g(e.x,t.y),g(t.x,t.y),g(t.x,e.y),g(e.x,e.y));}else {const e={x:l>0?s.x+c:s.x-c,y:y>0?s.y+c:s.y-c};a.push(g(s.x,s.y),g(e.x,s.y),g(e.x,e.y),g(s.x,e.y));}return T([request.g$9(a.map((e=>t.localToMap(e))))],t.spatialReference,t.doUnnormalization,!0)}function w(e,t,n){let r=t.mapToLocalMultiple(e);if(1===r.length){const e=48,t=r[0];r=[g(t.x-e,t.y+e),g(t.x+e,t.y-e),g(t.x+e,t.y-e),g(t.x-e,t.y+e)];}const a=[],s={x:r[0].x,y:r[0].y},i={x:r[1].x,y:r[1].y};if(n){const e=Math.round(i.x-s.x),t=Math.round(i.y-s.y);a.push(g(s.x-e,s.y-t),g(i.x,s.y-t),g(i.x,i.y),g(s.x-e,i.y));}else a.push(g(s.x,s.y),g(i.x,s.y),g(i.x,i.y),g(s.x,i.y));return T([request.g$9(a.map((e=>t.localToMap(e))))],t.spatialReference,t.doUnnormalization,!0)}function z$1(e,t,o,n){const i=t.mapToLocalMultiple(e);let y=null,c=null;if(o)y=i[0],c=i[1];else {const e=i[0],t=i[1],o=Math.round(t.x-e.x),n=Math.round(t.y-e.y),r=Math.max(Math.abs(o),Math.abs(n));y=g(o>0?e.x+r/2:e.x-r/2,n>0?e.y+r/2:e.y-r/2),c=g(Math.abs(o)>Math.abs(n)?y.x-r/2:y.x,Math.abs(o)>Math.abs(n)?y.y:y.y-r/2);}const u=t.localToMap(y),f=t.localToMap(c);if(request.t$1(u)||request.t$1(f))return null;t.doUnnormalization&&geometry.g([[u,f]],t.spatialReference);const h=R$1(u,t.spatialReference),M=R$1(f,t.spatialReference),g$1=unitUtils.H(t.spatialReference);let d=0;if(request.I(t.spatialReference))d=g$1*geometryEngine.distance(h,M,null);else {const e=y.x-c.x,t=y.y-c.y;d=g$1*Math.sqrt(e*e+t*t)*(n||1);}const j=new arcgisEditor_entry.m({center:h,radius:d,radiusUnit:"meters",spatialReference:t.spatialReference});return T(j.rings,j.spatialReference,!1)}function L(e,t,n){const r=t.mapToLocalMultiple(e),a=r[0],s=r[1],i=Math.round(s.x-a.x),l=Math.round(s.y-a.y),y=g(n?a.x:a.x+i/2,n?a.y:a.y+l/2),c=n?i:i/2,p=n?l:l/2,x=60,u=[],f=2*Math.PI/x;for(let o=0;o<x;o++){const e=Math.cos(o*f),t=Math.sin(o*f),n=g(c*e+y.x,p*t+y.y);u.push(n);}return u.push(u[0]),T([request.g$9(u.map((e=>t.localToMap(e))))],t.spatialReference,t.doUnnormalization,!1)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class r$1{constructor(){this._isToolEditable=!0,this._manipulators=new request.S,this._nextManipulatorId=0,this._resourceContexts={manipulator3D:{}},this._attached=!1;}set isToolEditable(t){this._isToolEditable=t;}get length(){return this._manipulators.length}add(t,a=0){return this.addMany([t],a)[0]}addMany(t,a=0){return t.map((t=>{const i=this._nextManipulatorId++,r={id:i,manipulator:t,visibilityPredicate:a,attached:!1};return this._manipulators.add(r),this._attached&&this._updateManipulatorAttachment(r),i}))}remove(t){if("number"==typeof t){const a=t;for(let t=0;t<this._manipulators.length;t++)if(this._manipulators.getItemAt(t).id===a){const a=this._manipulators.splice(t,1)[0];return this._detachManipulator(a),a.id}return null}const a=t;for(let i=0;i<this._manipulators.length;i++)if(this._manipulators.getItemAt(i).manipulator===a){const t=this._manipulators.splice(i,1)[0];return this._detachManipulator(t),t.id}return null}removeAll(){this._manipulators.forEach((t=>{this._detachManipulator(t);})),this._manipulators.removeAll();}attach(){this._manipulators.forEach((t=>{this._updateManipulatorAttachment(t);})),this._attached=!0;}detach(){this._manipulators.forEach((t=>{this._detachManipulator(t);})),this._attached=!1;}destroy(){this._manipulators.forEach((({manipulator:t})=>{t.destroy&&t.destroy();})),this._manipulators.destroy(),this._resourceContexts=null;}on(t,a){return this._manipulators.on(t,(t=>{a(t);}))}forEach(t){for(const a of this._manipulators.items)t(a);}some(t){return this._manipulators.items.some(t)}toArray(){const t=[];return this.forEach((a=>t.push(a.manipulator))),t}intersect(t,a){let r=null,e=Number.MAX_VALUE;return this._manipulators.forEach((({id:s,manipulator:o,attached:n})=>{if(!n||!o.interactive)return;const l=o.intersectionDistance(t,a);request.r(l)&&l<e&&(e=l,r={id:s,manipulator:o});})),r}findById(t){if(request.t$1(t))return null;for(const a of this._manipulators.items)if(t===a.id)return a.manipulator;return null}_updateManipulatorAttachment(t){this._isManipulatorItemVisible(t)?this._attachManipulator(t):this._detachManipulator(t);}_attachManipulator(t){t.attached||(t.manipulator.attach&&t.manipulator.attach(this._resourceContexts),t.attached=!0);}_detachManipulator(t){if(!t.attached)return;const a=t.manipulator;a.grabbing=!1,a.dragging=!1,a.hovering=!1,a.selected=!1,a.detach&&a.detach(this._resourceContexts),t.attached=!1;}_isManipulatorItemVisible(t){return 2===t.visibilityPredicate||(this._isToolEditable?0===t.visibilityPredicate:1===t.visibilityPredicate)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h$1=request.s$1.getLogger("esri.views.interactive.InteractiveToolBase");exports.c$1=class extends request.p{constructor(t){super(t),this.toolState="pending",this.completed=!1,this.manipulators=new r$1,this.updating=!1,this.automaticManipulatorSelection=!0,this._editableFlags=new Map([[1,!0],[0,!0]]),this._creationStartedResolver=request.B(),this._creationFinishedResolver=request.B();}get active(){return null!=this.view&&this.view.activeTool===this}set visible(t){this._set("visible",t),t||this.active&&(this.view.activeTool=null),this.attached&&(t?this._show():this._hide());}get editable(){return this.getEditableFlag(0)}set editable(t){this.setEditableFlag(0,t);}get attached(){return this._get("attached")}get created(){return "created"===this.toolState}get cursor(){return null}attach(){this.attached?h$1.warn("Tool is already attached. Ignoring attach request."):(this.manipulators.attach(),this.onAttach(),this.visible&&this.onShow(),this._set("attached",!0));}detach(){this.attached?(this.visible&&this.onHide(),this.onDetach(),this.manipulators.detach(),this._set("attached",!1)):h$1.error("Tool isn't currently attached. Ignoring detach request.");}activate(){request.t$1(this.view)?h$1.error("Can't activate tool if view is not defined."):this.active?h$1.warn("Tool is already active, ignoring activation request."):(screenUtils.g(this.view)&&this.view.focus(),this.onActivate());}deactivate(){this.active?this.onDeactivate():h$1.warn("Tool is not active, ignoring deactivation request.");}handleInputEvent(t){this.attached?this.onInputEvent(t):h$1.warn("handleInputEvent() called on detached tool");}handleInputEventAfter(t){this.attached?this.onInputEventAfter(t):h$1.warn("handleInputEventAfter() called on detached tool");}destroy(){this.manipulators.destroy(),this._set("view",null),this._set("completed",!1);}setEditableFlag(t,e){this._editableFlags.set(t,e),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),0===t&&this.notifyChange("editable"),this.onEditableChange();}getEditableFlag(t){return this._editableFlags.get(t)}whenCreationStarted(){return this._creationStartedResolver.promise}when(){return this._creationFinishedResolver.promise}rejectCreation(t){"pending"!==this.toolState&&"creating"!==this.toolState||this._creationStartedResolver.resolve(this),this._creationFinishedResolver.reject(t);}onActivate(){}onDeactivate(){}onAttach(){}onDetach(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(t){}onInputEventAfter(t){}get internallyEditable(){return this.getEditableFlag(0)&&this.getEditableFlag(1)}startToolCreation(){if("pending"===this.toolState)return this._creationStartedResolver.resolve(this),void(this.toolState="creating");throw new Error(`Unexpected tool state ${this.toolState}`)}finishToolCreation(){switch(this.toolState){case"pending":this.startToolCreation();case"creating":this.created||this._creationFinishedResolver.resolve(this),this.toolState="created";break;case"created":break;default:throw new Error(`Unexpected tool state ${this.toolState}`)}}complete(){this.finishToolCreation(),this._set("completed",!0);}_show(){this._updateManipulatorAttachment(),this.onShow();}_hide(){this._updateManipulatorAttachment(),this.onHide();}_updateManipulatorAttachment(){this.attached&&this.visible?this.manipulators.attach():this.manipulators.detach();}};request.e([request.d()],exports.c$1.prototype,"toolState",void 0),request.e([request.d({constructOnly:!0})],exports.c$1.prototype,"view",void 0),request.e([request.d({readOnly:!0})],exports.c$1.prototype,"active",null),request.e([request.d({value:!0})],exports.c$1.prototype,"visible",null),request.e([request.d({value:!0})],exports.c$1.prototype,"editable",null),request.e([request.d({value:!1,readOnly:!0})],exports.c$1.prototype,"attached",null),request.e([request.d({readOnly:!0})],exports.c$1.prototype,"created",null),request.e([request.d({readOnly:!0})],exports.c$1.prototype,"completed",void 0),request.e([request.d({readOnly:!0})],exports.c$1.prototype,"manipulators",void 0),request.e([request.d({readOnly:!0})],exports.c$1.prototype,"updating",void 0),request.e([request.d()],exports.c$1.prototype,"cursor",null),request.e([request.d()],exports.c$1.prototype,"automaticManipulatorSelection",void 0),exports.c$1=request.e([request.i("esri.views.interactive.InteractiveToolBase")],exports.c$1);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
exports.O=class extends(HandleOwner.a(request.n$2.EventedMixin(exports.c$1))){constructor(e){super(e),this._graphic=null,this.defaultZ=0,this.geometryType=null,this.hasZ=!0,this.mode=null,this.snappingManager=null,this.snapToScene=!1;}initialize(){this.internalGraphicsLayer=new GraphicsLayer.h({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer),this.drawOperation=this.makeDrawOperation(),this.handles.add([this.drawOperation.on("vertex-add",(e=>this.onVertexAdd(e))),this.drawOperation.on("vertex-remove",(e=>this.onVertexRemove(e))),this.drawOperation.on("vertex-update",(e=>this.onVertexUpdate(e))),this.drawOperation.on("cursor-update",(e=>this.onCursorUpdate(e))),this.drawOperation.on("complete",(e=>this.onComplete(e)))]),this.complete();}destroy(){this.drawOperation=request.l$3(this.drawOperation),this._destroyAllVisualisations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=request.l$3(this.internalGraphicsLayer),this._set("view",null);}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(e){this._set("centered",e),this._updateGraphic();}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e);}set forceUniformSize(e){this._set("forceUniformSize",e),this._updateGraphic();}get graphic(){return this._graphic}set graphicSymbol(e){this._set("graphicSymbol",e),request.r(this._graphic)&&(this._graphic.symbol=e);}get updating(){var e,t;return null!=(e=null==(t=this.drawOperation)?void 0:t.updating)&&e}completeCreateOperation(){this.drawOperation.complete();}onInputEvent(e){this.drawOperation.onInputEvent(e);}redo(){this.drawOperation.redo();}reset(){}undo(){this.drawOperation.undo();}_createGraphic(e){this._graphic=new Graphic.h({geometry:e,symbol:this.graphicSymbol}),this.internalGraphicsLayer.add(this._graphic),this.handles.add(this.initializeGraphic(this._graphic)),this.notifyChange("graphic"),this.handles.add(request.n$11((()=>{request.r(this._graphic)&&(this.internalGraphicsLayer.remove(this._graphic),this._graphic=request.l$3(this._graphic));})),V);}_destroyAllVisualisations(){this.handles.remove(_.outline),this.handles.remove(_.regularVertices),this.handles.remove(_.activeVertex),this.handles.remove(V);}_getCreateOperationGeometry(e={operationComplete:!1}){if(null==this.drawOperation||0===this.drawOperation.numVertices)return null;const t=this.drawOperation.stagedVertex,r=this.drawOperation.committedVertices,i=r.slice();request.r(t)&&i.push(this.drawOperation.coordinateHelper.pointToArray(t));const a=request.r(t)?this.drawOperation.coordinateHelper.pointToArray(t):r.splice(-1)[0],o={regularVertices:null,activeVertex:null,full:null,outline:null},n=i.length,l=this.drawOperation.spatialReference,p="3d"===this.view.type&&"global"===this.view.viewingMode;switch(this.geometryType){case"point":o.regularVertices=r,o.activeVertex=a,o.full=this.drawOperation.coordinateHelper.arrayToPoint(i[0]);break;case"multipoint":o.regularVertices=r,o.activeVertex=a,n>0&&(o.full=j$1(i,l));break;case"polyline":o.regularVertices=r,o.activeVertex=a,n>0&&(o.full=b$2([i],l,p));break;case"polygon":o.regularVertices=r,o.activeVertex=a,n>0&&(o.full=T([i],l,p,!0));break;case"circle":if(n>0){const t=F(this.view,i[0]);if(1===n&&e.operationComplete){const e=i[0],r=t.makeMapPoint(e[0]+G*this.view.resolution,e[1]);o.full=z$1([e,r],t,!0);}else 2===n&&(o.full=this.forceUniformSize?z$1(i,t,this.centered):L(i,t,this.centered));}break;case"rectangle":if(n>0){const t=F(this.view,i[0]);if(1===n&&e.operationComplete){const e=i[0],r=t.makeMapPoint(e[0]+G*this.view.resolution,e[1]);o.full=U([e,r],t,!0);}else 2===n&&(o.full=this.forceUniformSize?U(i,t,this.centered):w(i,t,this.centered));}break;default:return null}switch(this.geometryType){case"point":case"multipoint":break;case"polyline":case"polygon":n>1&&(o.outline=b$2([i],l,p));break;case"circle":case"rectangle":request.r(o.full)&&"polygon"===o.full.type&&(o.outline=T(o.full.rings,l,p));}return o}initializeGraphic(e){return null}onComplete(e){this._updateGraphic();let r=null;if(this.drawOperation.isCompleted){const e=this._getCreateOperationGeometry({operationComplete:!0});request.r(e)&&(r=new Graphic.h({geometry:e.full,symbol:this.graphicSymbol,sourceLayer:this.internalGraphicsLayer,...this.graphicProperties}));}this.emit("complete",{graphic:r,...e});}onCursorUpdate(e){this._updateGraphic(),this.emit("cursor-update",e);}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel();}onVertexAdd(e){this._updateGraphic(),this.emit("vertex-add",e);}onVertexRemove(e){this._updateGraphic(),this.emit("vertex-remove",e);}onVertexUpdate(e){this._updateGraphic(),this.emit("vertex-update",e);}_updateGraphic(){const e=this._getCreateOperationGeometry();request.t$1(e)?this._destroyAllVisualisations():(request.r(e.outline)?this.handles.add(this.onOutlineChanged(e.outline),_.outline):this.handles.remove(_.outline),request.r(e.regularVertices)?this.handles.add(this.onRegularVerticesChanged(e.regularVertices),_.regularVertices):this.handles.remove(_.regularVertices),request.r(e.activeVertex)?this.handles.add(this.onActiveVertexChanged(e.activeVertex),_.activeVertex):this.handles.remove(_.activeVertex),request.r(e.full)?request.t$1(this._graphic)?this._createGraphic(e.full):this._graphic.geometry=e.full:this.handles.remove(V));}};request.e([request.d({value:!0})],exports.O.prototype,"centered",null),request.e([request.d({nonNullable:!0})],exports.O.prototype,"defaultZ",void 0),request.e([request.d()],exports.O.prototype,"drawOperation",void 0),request.e([request.d({value:!0})],exports.O.prototype,"enabled",null),request.e([request.d({value:!0})],exports.O.prototype,"forceUniformSize",null),request.e([request.d({constructOnly:!0})],exports.O.prototype,"geometryType",void 0),request.e([request.d()],exports.O.prototype,"graphic",null),request.e([request.d({constructOnly:!0})],exports.O.prototype,"graphicProperties",void 0),request.e([request.d()],exports.O.prototype,"graphicSymbol",null),request.e([request.d({constructOnly:!0})],exports.O.prototype,"hasZ",void 0),request.e([request.d({constructOnly:!0})],exports.O.prototype,"mode",void 0),request.e([request.d()],exports.O.prototype,"snappingManager",void 0),request.e([request.d()],exports.O.prototype,"snapToScene",void 0),request.e([request.d({readOnly:!0})],exports.O.prototype,"type",void 0),request.e([request.d({readOnly:!0})],exports.O.prototype,"updating",null),request.e([request.d({constructOnly:!0,nonNullable:!0})],exports.O.prototype,"view",void 0),exports.O=request.e([request.i("esri.views.draw.DrawGraphicTool")],exports.O);const V="create-operation-graphic",_={outline:"outline-visual",regularVertices:"regular-vertices-visual",activeVertex:"active-vertex-visual"};function x$1(e){switch(e){case"point":case"polyline":case"polygon":case"multipoint":return e;case"circle":case"rectangle":return "segment";default:return null}}const G=48;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$1{constructor({grabbableForEvent:e}){this.events=new request.n$2,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=e;}intersectionDistance(t,e){return 0}attach(){}detach(){}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e="click";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function u(t,n){let e=null,o=null;return c=>{if("cancel"===c.action)return void(request.r(o)&&(o.execute({action:"cancel"}),e=null,o=null));const s={action:c.action,screenStart:c.start,screenEnd:c.screenPoint};"start"===c.action&&request.t$1(e)&&(e=new b$1,o=new b$1,n(t,e,o,c.pointerType,s)),request.r(e)&&e.execute(s),"end"===c.action&&request.r(e)&&(e=null,o=null);}}function m(t,n){return t.events.on("drag",u(t,n))}function p(t,n){const e=[t.x,t.y,t.z],r=n,a=[Math.cos(r),Math.sin(r)],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]);if(0===o)return null;a[0]/=o,a[1]/=o;const c=t=>{const n=(t.x-e[0])*a[0]+(t.y-e[1])*a[1];t.x=e[0]+n*a[0],t.y=e[1]+n*a[1];};return t=>(c(t.mapStart),c(t.mapEnd),t)}function y(t,n){let e=null;return r=>{if("start"===r.action&&(e=x(t,r.mapStart.spatialReference,n)),request.t$1(e))return null;const o=r.mapEnd.x-r.mapStart.x,c=r.mapEnd.y-r.mapStart.y,s=r.mapEnd.z-r.mapStart.z;return e.move(o,c,s),{...r,translationX:o,translationY:c,translationZ:s}}}function d(t,n){return request.t$1(t)?null:t.spatialReference.equals(n)?t.clone():projection.O(t,n)}function x(t,n,e){const r=t.geometry;if(request.t$1(r))return null;if("mesh"===r.type)return E(t,r,n,e);const o=d(r,n),c=r.spatialReference;return request.t$1(o)?null:{move:(n,e,r)=>{const a=drawUtils.r(o.clone(),n,e,r);a.spatialReference.equals(c)?t.geometry=a:t.geometry=projection.O(a,c);}}}function E(t,n,e,a){if(request.r(n.transform))return h(t,n,n.transform,e);if(!n.spatialReference.equals(e))return null;let o=0,c=0,s=0;return {move:(e,r,l)=>{const i=e-o,u=r-c,m=l-s;if(i||u||m){const f=n.origin.clone().offset(i,u,m);n.centerAt(f,{geographic:1===a}),t.notifyGeometryChanged(),o=e,c=r,s=l;}}}}function h(t,n,e,o){const c=d(e.getOriginPoint(n.spatialReference),o),u=n.spatialReference;return request.t$1(c)?null:{move:(n,a,o)=>{const m=drawUtils.r(c.clone(),n,a,o);if(m.spatialReference.equals(u))e.origin=common.r(m.x,m.y,m.z);else {const t=projection.O(m,u);request.r(t)&&(e.origin=common.r(t.x,t.y,t.z));}t.notifyGeometryChanged();}}}function S(t,n){const e=t.map((t=>request.e$2(y(t,n)))).filter((t=>request.r(t)));return t=>{const n=t.mapEnd.x-t.mapStart.x,r=t.mapEnd.y-t.mapStart.y,a=t.mapEnd.z-t.mapStart.z;return e.forEach((n=>n(t))),{...t,translationX:n,translationY:r,translationZ:a}}}function R(t,e){const r=new Map;for(const a of e)r.set(a,request.l$1(t[a]));return n=>(r.forEach(((n,e)=>{t[e]=n;})),n)}function z(t){return request.r(t.geometry)&&"mesh"===t.geometry.type?j(t,t.geometry):R(t,["geometry"])}function j(t,n){const e=request.r(n.transform)?n.transform.clone():null,a=n.vertexAttributes.clonePositional();return r=>(n.transform=e,n.vertexAttributes=a,t.notifyGeometryChanged(),r)}function v(t){const n=t.map((t=>request.e$2(z(t)))).filter((t=>request.r(t)));return t=>(n.forEach((n=>n(t))),t)}function q(){let t=0,n=0,e=0;return r=>{"start"===r.action&&(t=r.mapStart.x,n=r.mapStart.y,e=r.mapStart.z);const a=r.mapEnd.x-t,o=r.mapEnd.y-n,c=r.mapEnd.z-e;return t=r.mapEnd.x,n=r.mapEnd.y,e=r.mapEnd.z,{...r,mapDeltaX:a,mapDeltaY:o,mapDeltaZ:c,mapDeltaSpatialReference:r.mapStart.spatialReference}}}function D(){let t=0,n=0;return e=>{"start"===e.action&&(t=e.screenStart.x,n=e.screenStart.y);const r=e.screenEnd.x-t,a=e.screenEnd.y-n;return t=e.screenEnd.x,n=e.screenEnd.y,{...e,screenDeltaX:r,screenDeltaY:a}}}function M(t,n){let r=null,a=0,o=0;return s=>{if("start"===s.action&&(r=t.toScreen(n),r.x<0||r.x>t.width||r.y<0||r.y>t.height?r=null:(a=s.screenStart.x-r.x,o=s.screenStart.y-r.y)),null==r)return null;const l=mathUtils.e(s.screenEnd.x-a,0,t.width),i=mathUtils.e(s.screenEnd.y-o,0,t.height),u=screenUtils$1.c(l,i);return s.screenStart=r,s.screenEnd=u,s}}class b$1{constructor(){this.execute=()=>{};}next(t,n=new b$1){return request.r(t)&&(this.execute=e=>{const a=t(e);request.r(a)&&n.execute(a);}),n}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class c$1{constructor(){this.next=new b$1;}createSnapDragEventPipelineStep({predicate:c=(()=>!0),cancel:l,snappingManager:d,snappingContext:m,updatingHandles:u}){if(request.t$1(d))return e=>e;let x=null,y=null;const f=()=>{x=request.a$5(x),d.doneSnapping(),request.r(y)&&y.frameTask.remove(),y=null;};return l.next((e=>(f(),e))),this.next=new b$1,e=>{if(!c(e))return e;if(x=request.a$5(x),"start"===e.action){const t="3d"===d.view.type?d.view.resourceController.scheduler.registerTask(Scheduler.f.SNAPPING):Scheduler.D;y={context:new SnappingContext.e({editGeometryOperations:m.editGeometryOperations,elevationInfo:m.elevationInfo,pointer:m.pointer,vertexHandle:request.r(e.info)?e.info.handle:null,excludeFeature:m.excludeFeature,visualizer:m.visualizer}),originalPos:request.r(e.snapOrigin)?m.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,frameTask:t};}if(request.r(y)){const t=y.context.coordinateHelper.vectorToDehydratedPoint(y.context.coordinateHelper.arrayToVector([y.originalPos.x,y.originalPos.y,y.originalPos.z]));t.x+=e.mapEnd.x-e.mapStart.x,t.y+=e.mapEnd.y-e.mapStart.y;const n=e.mapStart.x-y.originalPos.x,o=e.mapStart.y-y.originalPos.y,i={...e,action:"udpate"},s=y.context,p=d.update(t,y.context);if(e.mapEnd.x=p.x+n,e.mapEnd.y=p.y+o,"end"!==e.action){const e=y.frameTask;x=request.F$1((async r=>{const c=await e.schedule((()=>d.snap(t,s,r)),r);if(c.valid){const t=await e.schedule((()=>c.apply()),r);dehydratedFeatureComparison.r(t,p)||(i.mapEnd.x=t.x+n,i.mapEnd.y=t.y+o,this.next.execute(i));}})),u.addPromise(x.promise);}}return "end"===e.action&&f(),e}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
exports.M=class extends(request.n$2.EventedMixin(HandleOwner.d)){constructor(e){super(e),this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._snappingPipeline=new c$1,this._snappingTask=null,this._stagedVertex=null,this.snapToSceneEnabled=null,request.t$1(e.elevationInfo)&&(this.elevationInfo={mode:e.hasZ?"absolute-height":"on-the-ground",offset:0});}initialize(){var e,t;this.coordinateHelper=EditGeometryOperations.x(this.hasZ,this.hasM,this.view.spatialReference);const i="3d"===this.view.type?null==(e=this.view)||null==(t=e.resourceController)?void 0:t.scheduler:null;this._frameTask=i?i.registerTask(Scheduler.f.SNAPPING):Scheduler.D;const r="viewingMode"in this.view.state?this.view.state.viewingMode:2,s="segment"===this.geometryType||"multipoint"===this.geometryType?"polyline":this.geometryType;this._editGeometryOperations=new EditGeometryOperations.l(new EditGeometryOperations.g(s,this.coordinateHelper,r)),this._activeComponent=new EditGeometryOperations.p(this.spatialReference,r),this._editGeometryOperations.data.components.push(this._activeComponent),this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],(e=>{const t=e.vertices.map((e=>({componentIndex:0,vertexIndex:e.index,coordinates:this.coordinateHelper.vectorToArray(e.pos)}))),i=t.map((e=>e.coordinates));switch(e.type){case"vertex-add":this.emit(e.type,{...e,added:i,vertices:t});break;case"vertex-update":this.emit(e.type,{...e,updated:i,vertices:t});break;case"vertex-remove":this.emit(e.type,{...e,removed:i,vertices:t});}}))),this._manipulator=new e$1({grabbableForEvent:e=>"click"!==this.drawingMode||"touch"===e.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size}),this.manipulators.add(this._manipulator),this._manipulator.grabbable="point"!==this.geometryType,this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",(e=>this._onImmediateClick(e))),this._manipulator.events.on("immediate-double-click",(e=>this._onImmediateDoubleClick(e)))]);}destroy(){this._editGeometryOperations=request.l$3(this._editGeometryOperations),this._frameTask=request.s$7(this._frameTask);}get _snappingEnabled(){return request.r(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map((e=>this.coordinateHelper.vectorToArray(e.pos)))}set drawingMode(e$1){this._set("drawingMode",null!=e$1?e$1:e);}get hasStagedVertex(){return request.r(this._stagedVertex)}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e;}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get numVertices(){return request.r(this._stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get spatialReference(){return this.view.spatialReference}get stagedVertex(){return this._stagedVertex}set stagedVertex(e){if(request.t$1(e))this.discardStagedVertex();else if(!request.r(this._stagedVertex)||!dehydratedFeatureComparison.r(this._stagedVertex,e)){if(request.t$1(this._stagedVertex))this._stagedVertex=request.l$1(e);else {if(dehydratedFeatureComparison.r(this._stagedVertex,e))return;this._stagedVertex.x=e.x,this._stagedVertex.y=e.y,this._stagedVertex.z=e.z,this._stagedVertex.m=e.m,this._stagedVertex.hasZ=e.hasZ,this._stagedVertex.hasM=e.hasM,this._stagedVertex.spatialReference=e.spatialReference;}this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(e)}],operation:"apply",type:"vertex-update"});}}get updating(){return this.updatingHandles.updating}get vertices(){const e=this.committedVertices;return request.r(this._stagedVertex)&&e.push(this.coordinateHelper.pointToArray(this._stagedVertex)),e}cancel(){this.complete({aborted:!0});}commitStagedVertex(){if(this._snappingTask=request.a$5(this._snappingTask),request.r(this._stagedVertex)){const e=this._stagedVertex;this._stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e));}}complete(e){const t=e&&e.aborted||!1;request.a$5(this._snappingTask),request.r(this.snappingManager)&&this.snappingManager.doneSnapping(),"segment"===this.geometryType||"point"===this.geometryType?this.commitStagedVertex():this.discardStagedVertex();const i="multipoint"===this.geometryType&&0===this.numVertices||"polyline"===this.geometryType&&this.numVertices<2||"polygon"===this.geometryType&&this.numVertices<3;this._createOperationCompleted=!i,(this.isCompleted||t)&&this.emit("complete",{vertices:this.vertices.map(((e,t)=>({componentIndex:0,vertexIndex:t,coordinates:e}))),aborted:t,type:"complete"});}discardStagedVertex(){this._stagedVertex=null;}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId);}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo();}undo(){request.r(this.snappingManager)&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo();}_closeOnClickVertexIndex(e){const t=this._activeComponent;if("polygon"===this.geometryType&&t.vertices.length>2){if(this._vertexWithinPointerDistance(t.vertices[0].pos,e))return 0;if(this._vertexWithinPointerDistance(t.vertices[t.vertices.length-1].pos,e))return t.vertices.length-1}return null}_createManipulatorDragPipeline(e){switch(this.drawingMode){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return m(e,((e,t,i,r)=>{const s="touch"===r&&this._snappingEnabled;!this.isCompleted&&s&&(t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(this.stagedVertex=e.mapStart,("segment"===this.geometryType||s&&0===this.numVertices)&&this.commitStagedVertex()),e))).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>s,cancel:i,snappingManager:this.snappingManager,snappingContext:new SnappingContext.e({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:r,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles}),this._snappingPipeline.next).next((e=>(s&&(this.stagedVertex=e.mapEnd,"end"===e.action&&this.commitStagedVertex()),e))).next((e=>("end"===e.action&&("segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()),e))),i.next((()=>{s&&request.r(this.snappingManager)&&this.snappingManager.doneSnapping();})));}))}_createManipulatorDragPipelineFreehand(e){return m(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(request.t$1(this.stagedVertex)&&(this.stagedVertex=e.mapStart),"segment"===this.geometryType&&this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":this.complete();}return e}));}))}_createManipulatorDragPipelineHybrid(e){return m(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(request.t$1(this.stagedVertex)&&(this.stagedVertex=e.mapStart),this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete();}return e}));}))}_getDrawSurface(){if(request.t$1(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ)return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let e=this.defaultZ,t=!1;request.r(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(t=!0),request.r(this.snapToSceneEnabled)&&(t=this.snapToSceneEnabled),request.r(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(t=!1);const i=this._activeComponent.vertices.length;return ("segment"===this.geometryType||"polygon"===this.geometryType)&&i>0&&(e=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),t=!1),t?this.drawSurface:(this.elevationDrawSurface.defaultZ=e,this.elevationDrawSurface)}_mapToScreen(e){return this._getDrawSurface().mapToScreen(e)}_onHold(e){request.a$5(this._snappingTask),"click"===this.drawingMode&&"touch"===e.pointerType&&this._snappingEnabled&&(this.stagedVertex=e.mapPoint),e.stopPropagation();}_onImmediateClick(e){if(this._manipulator.dragging)return;const t=this._activeComponent,i=this._closeOnClickVertexIndex(e.screenPoint);if(request.r(i))return e.stopPropagation(),this.discardStagedVertex(),void this.complete();const r=this._screenToMap(e.screenPoint);if(request.r(r))switch(this.drawingMode){case"freehand":"point"===this.geometryType&&(this.hasStagedVertex?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(r)),this.complete());break;case"click":case"hybrid":this._snappingTask=request.a$5(this._snappingTask),this.hasStagedVertex?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(r)),("point"===this.geometryType||"segment"===this.geometryType&&2===t.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===t.vertices.length)&&this.complete();}e.stopPropagation();}_onImmediateDoubleClick(e){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),e.stopPropagation());}_onPointerMove(e){if(request.a$5(this._snappingTask),this._manipulator.dragging||this._pointerDownStates.has(e.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)return;const t=screenUtils$1.c(e.x,e.y),i=this._closeOnClickVertexIndex(t);if(request.r(i)){this.discardStagedVertex();const e={componentIndex:0,vertexIndex:i,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[i].pos)};this.emit("cursor-update",{updated:null,vertices:[e],operation:"apply",type:"vertex-update"});}else {const i=this._screenToMap(t);if(this._manipulator.cursor=request.r(i)?"crosshair":null,request.r(i))if(request.r(this.snappingManager)){const t=this.snappingManager,r=new SnappingContext.e({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e.pointerType,visualizer:this.snappingVisualizer});this.stagedVertex=t.update(i,r),this._snappingTask=request.F$1((async e=>{const s=await this._frameTask.schedule((()=>t.snap(i,r,e)),e);s.valid&&await this._frameTask.schedule((()=>{this.stagedVertex=s.apply();}),e);})),this.updatingHandles.addPromise(this._snappingTask.promise);}else this.stagedVertex=i;}e.stopPropagation();}_screenToMap(e){return this._getDrawSurface().screenToMap(e)}_screenToMapDragEventStep(){let e=null;return t=>{if("start"===t.action&&(e=this._screenToMap(t.screenStart)),request.t$1(e))return null;const i=this._screenToMap(t.screenEnd);return request.r(i)?{...t,mapStart:e,mapEnd:i}:null}}_vertexWithinPointerDistance(e,t){const i=25,r=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return !!request.r(r)&&b(r,t,i)}};function b(e,t,i){const r=e.x-t.x,s=e.y-t.y;return r*r+s*s<=i}request.e([request.d()],exports.M.prototype,"defaultZ",void 0),request.e([request.d({value:e})],exports.M.prototype,"drawingMode",null),request.e([request.d({constructOnly:!0})],exports.M.prototype,"elevationDrawSurface",void 0),request.e([request.d({constructOnly:!0})],exports.M.prototype,"elevationInfo",void 0),request.e([request.d({constructOnly:!0})],exports.M.prototype,"geometryType",void 0),request.e([request.d({constructOnly:!0})],exports.M.prototype,"hasM",void 0),request.e([request.d({constructOnly:!0})],exports.M.prototype,"hasZ",void 0),request.e([request.d({constructOnly:!0})],exports.M.prototype,"manipulators",void 0),request.e([request.d({constructOnly:!0})],exports.M.prototype,"drawSurface",void 0),request.e([request.d({constructOnly:!0})],exports.M.prototype,"snappingManager",void 0),request.e([request.d({constructOnly:!0})],exports.M.prototype,"snappingVisualizer",void 0),request.e([request.d()],exports.M.prototype,"snapToSceneEnabled",void 0),request.e([request.d({readOnly:!0})],exports.M.prototype,"updating",null),request.e([request.d({constructOnly:!0})],exports.M.prototype,"view",void 0),exports.M=request.e([request.i("esri.views.draw.DrawOperation")],exports.M);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class r{constructor(e,t,i,s=null){this.elevationInfo=e,this.defaultZ=t,this.view=i,this.excludeGraphics=s;}screenToMap(i){if(request.r(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen(screenUtils$1.i(i.x,i.y),this.elevationInfo,this.defaultZ,this.excludeGraphics);const s=this.view.sceneIntersectionHelper.intersectElevationFromScreen(screenUtils$1.i(i.x,i.y),this.elevationInfo,0,this.excludeGraphics);return request.r(s)&&(s.z=void 0),s}mapToScreen(e){const t=dehydratedFeatures.v(e.x,e.y,arcgisEditor_entry.f(this.view,e,this.elevationInfo),e.spatialReference);return this.view.toScreen(t)}}class n{constructor(e,t,i=[]){this.view=e,this.elevationInfo=t,this.exclude=i;}screenToMap(t){const i=this.view.toMap(t,{exclude:this.exclude});return request.r(i)&&(i.z=arcgisEditor_entry.c(i,this.view,this.elevationInfo)),i}mapToScreen(t){let o=t;return request.r(this.elevationInfo)&&(o=dehydratedFeatures.v(t.x,t.y,arcgisEditor_entry.f(this.view,t,this.elevationInfo),t.spatialReference)),this.view.toScreen(o)}}class c{constructor(e){this.view=e,this.screenToMap=t=>e.toMap(t),this.mapToScreen=t=>e.toScreen(t);}}

exports.D = D;
exports.M$1 = M;
exports.S = S;
exports.b = b$1;
exports.c = c;
exports.c$2 = c$1;
exports.m = m;
exports.n = n;
exports.p = p;
exports.q = q;
exports.r = r;
exports.v = v;
exports.x = x$1;
exports.y = y;
exports.z = z;
