'use strict';

const request = require('./messageBundle-8be88d04.js');
const LayerView3D = require('./LayerView3D-d92910a3.js');
const LayerView = require('./LayerView-2bc30c9f.js');
require('./index-fde8502c.js');
require('./symbols-29b793e5.js');
require('./enumeration-f235fe07.js');
require('./opacityUtils-f2e4b347.js');
require('./geometry-ef17530a.js');
require('./Symbol-f0556e23.js');
require('./Color-7d915caa.js');
require('./colorUtils-e70dbab5.js');
require('./mathUtils-af6066f0.js');
require('./common-41a349f2.js');
require('./screenUtils-d911ae62.js');
require('./aaBoundingBox-c372701a.js');
require('./aaBoundingRect-56648c00.js');
require('./persistableUrlUtils-c611d652.js');
require('./Portal-8d16604d.js');
require('./ColorMaterial-61b9182b.js');
require('./mat4f64-fc3339e5.js');
require('./sphere-ef7f801f.js');
require('./mat4-f68486bc.js');
require('./vec4f64-d3fa6cd2.js');
require('./vectorStacks-f48a010a.js');
require('./quatf64-e7a7f39e.js');
require('./vec2f64-60b3c97e.js');
require('./intersectorUtils-0e8a6b4b.js');
require('./boundedPlane-f1094694.js');
require('./lineSegment-a86bf7bd.js');
require('./plane-0816c6c9.js');
require('./mathUtils-87b1f941.js');
require('./utils-2d48ea24.js');
require('./Util-5c6af8a4.js');
require('./vec2-d000a8cb.js');
require('./doublePrecisionUtils-26ddcbaf.js');
require('./Texture-16b1a373.js');
require('./mat3-1d3e0d51.js');
require('./quat-17613ceb.js');
require('./vec3f32-5485293e.js');
require('./Texture-95d9d662.js');
require('./FramebufferObject-435e1736.js');
require('./BlendLayer-6a2ab430.js');
require('./geometryDataUtils-0be35629.js');
require('./BufferView-b78db189.js');
require('./OrderIndependentTransparency-866eb67c.js');
require('./InterleavedLayout-4132788d.js');
require('./types-bcd9caf5.js');
require('./ElevationInfo-d3e3d64f.js');
require('./lengthUtils-179eaf12.js');
require('./unitUtils-083cb8d0.js');
require('./projection-b19710fa.js');
require('./geodesicConstants-047d586a.js');
require('./dehydratedFeatures-a58f1b86.js');
require('./byteSizeEstimations-d2f2ce40.js');
require('./quantizationUtils-d1d9c03e.js');
require('./jsonUtils-b6068079.js');
require('./Field-b92c6f4a.js');
require('./fieldType-32f95259.js');
require('./floatRGBA-aa45f7cb.js');
require('./triangulationUtils-15ab4328.js');
require('./earcut-d5562923.js');
require('./deduplicate-91c52f8d.js');
require('./Graphic-0aff6059.js');
require('./PopupTemplate-a0b855f8.js');
require('./Identifiable-a4f50f85.js');
require('./vec2f32-29a5eecf.js');
require('./glUtil-9df223c0.js');
require('./MemCache-7f5503ec.js');
require('./Scheduler-72cbcf2a.js');
require('./reactiveUtils-ef5dccea.js');
require('./debugFlags-5e6b0151.js');
require('./asyncUtils-cd78b718.js');
require('./featureConversionUtils-df21e951.js');
require('./OptimizedFeature-cd4fe3c6.js');
require('./OptimizedFeatureSet-b5737d2b.js');
require('./vec33-1fc512be.js');
require('./visualVariableUtils-1740874b.js');
require('./sizeVariableUtils-9012516e.js');
require('./objectResourceUtils-58283911.js');
require('./devEnvironmentUtils-aafb5541.js');
require('./DefaultMaterial_COLOR_GAMMA-1f86519d.js');
require('./compilerUtils-56e51ed2.js');
require('./Version-55b8a4e7.js');
require('./utils-71e85012.js');
require('./ItemCache-149fdb6e.js');
require('./utils-fb318f28.js');
require('./callExpressionWithFeature-7cea2968.js');
require('./MeshComponent-0dd8a7d1.js');
require('./screenshotUtils-176d2414.js');
require('./projection-ea955486.js');
require('./heightModelInfoUtils-9cedab45.js');
require('./HeightModelInfo-06fd3d80.js');
require('./arcgisLayerUrl-5174d661.js');
require('./HandleOwner-9c4c158c.js');

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m="analysis-view-handles";let w=class extends(LayerView3D.p(LayerView.u)){constructor(e){super(e),this.type="analysis-3d",this.allAnalysisViews=new request.S,this._creatingViewCount=0,this._analysisViewCreationTasks=new Map,this._analysisModules={"area-measurement":{module:null},"direct-line-measurement":{module:null},"line-of-sight":{module:null},slice:{module:null}};}initialize(){for(const e of this.layer.analyses)this._createAnalysisView(e);this.handles.add([this.layer.analyses.on("after-add",(e=>{this._createAnalysisView(e.item);})),this.layer.analyses.on("after-remove",(e=>{const s=this.allAnalysisViews.removeAt(this.allAnalysisViews.findIndex((s=>s.analysis===e.item)));request.r(s)&&s.destroy();const i=this._analysisViewCreationTasks.get(e.item);request.r(i)&&(i.abort(),this._analysisViewCreationTasks.delete(e.item));}))],m);}destroy(){this.handles.remove(m),this.allAnalysisViews.drain((e=>e.destroy())),this._analysisViewCreationTasks.clear(),this._creatingViewCount=0;}whenAnalysisView(e){const s=this._analysisViewCreationTasks.get(e);if(request.r(s))return s.promise;const t=new request.s("layerview:no-analysisview-for-analysis","The analysis has not been added to the AnalysisLayer of this layer view",{analysis:e});return Promise.reject(t)}isUpdating(){return 0!==this._creatingViewCount||this.allAnalysisViews.some((e=>e.updating))}_createAnalysisView(e){this._analysisViewCreationTasks.set(e,request.F$1((s=>this._createAnalysisViewPromise(e,s))));}async _createAnalysisViewPromise(e,s){this._creatingViewCount+=1;const a=e.type,r=this._analysisModules[a];if(request.t$1(r.module)){const e=await this._loadAnalysisModule(a);r.module=e;}const o=new r.module.default({analysis:e,view:this.view,parent:this});if(await o.when(),this._creatingViewCount-=1,request.p$1(s))throw o.destroy(),new request.s("layerview:no-analysisview-for-analysis","The analysis has not been added to the AnalysisLayer of this layer view",{analysis:e});return this.allAnalysisViews.add(o),o}_loadAnalysisModule(e){switch(e){case"area-measurement":return Promise.resolve().then(function () { return require('./AreaMeasurementView3D-1b2dfb3f.js'); }).then(function (n) { return n.AreaMeasurementView3D; });case"direct-line-measurement":return Promise.resolve().then(function () { return require('./DirectLineMeasurementView3D-036ce5a4.js'); }).then(function (n) { return n.DirectLineMeasurementView3D; });case"line-of-sight":return Promise.resolve().then(function () { return require('./LineOfSightView-6453b4c0.js'); });case"slice":return Promise.resolve().then(function () { return require('./SliceView-04e4faa4.js'); });default:return null}}};request.e([request.d()],w.prototype,"type",void 0),request.e([request.d()],w.prototype,"layer",void 0),request.e([request.d()],w.prototype,"allAnalysisViews",void 0),request.e([request.d()],w.prototype,"_creatingViewCount",void 0),w=request.e([request.i("esri.views.3d.layers.AnalysisLayerView3D")],w);const d=w;

exports.default = d;
