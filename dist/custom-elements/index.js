import { setAssetPath, h as h$1F, createEvent, proxyCustomElement } from '@stencil/core/internal/client';
export { setAssetPath, setPlatformOptions } from '@stencil/core/internal/client';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1_(e,t,r,o){var c,f=arguments.length,n=f<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(c=e[l])&&(n=(f<3?c(n):f>3?c(t,r,n):c(t,r))||n);return f>3&&n&&Object.defineProperty(t,r,n),n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$1Z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$34,d$1X;let r$1H;var o$1Z,i$2H;null!=(a$34=e$1Z.dojoConfig)&&a$34.has||null!=(d$1X=e$1Z.esriConfig)&&d$1X.has?r$1H={...null==(o$1Z=e$1Z.dojoConfig)?void 0:o$1Z.has,...null==(i$2H=e$1Z.esriConfig)?void 0:i$2H.has}:r$1H={};function s$2l(a){return "function"==typeof r$1H[a]?r$1H[a]=r$1H[a](e$1Z):r$1H[a]}s$2l.add=(e,a,d,o)=>((o||void 0===r$1H[e])&&(r$1H[e]=a),d&&s$2l(e)),s$2l.cache=r$1H,s$2l.add("esri-deprecation-warnings",!0),(()=>{s$2l.add("host-webworker",void 0!==e$1Z.WorkerGlobalScope&&self instanceof e$1Z.WorkerGlobalScope);const a="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(s$2l.add("host-browser",a),s$2l.add("host-node","object"==typeof e$1Z.process&&e$1Z.process.versions&&e$1Z.process.versions.node&&e$1Z.process.versions.v8),s$2l.add("dom",a),s$2l("host-browser")){const e=navigator,a=e.userAgent,d=e.appVersion,r=parseFloat(d);if(s$2l.add("wp",parseFloat(a.split("Windows Phone")[1])||void 0),s$2l.add("msapp",parseFloat(a.split("MSAppHost/")[1])||void 0),s$2l.add("khtml",d.includes("Konqueror")?r:void 0),s$2l.add("edge",parseFloat(a.split("Edge/")[1])||void 0),s$2l.add("opr",parseFloat(a.split("OPR/")[1])||void 0),s$2l.add("webkit",!s$2l("wp")&&!s$2l("edge")&&parseFloat(a.split("WebKit/")[1])||void 0),s$2l.add("chrome",!s$2l("edge")&&!s$2l("opr")&&parseFloat(a.split("Chrome/")[1])||void 0),s$2l.add("android",!s$2l("wp")&&parseFloat(a.split("Android ")[1])||void 0),s$2l.add("safari",!d.includes("Safari")||s$2l("wp")||s$2l("chrome")||s$2l("android")||s$2l("edge")||s$2l("opr")?void 0:parseFloat(d.split("Version/")[1])),s$2l.add("mac",d.includes("Macintosh")),!s$2l("wp")&&a.match(/(iPhone|iPod|iPad)/)){const e=RegExp.$1.replace(/P/,"p"),d=a.match(/OS ([\d_]+)/)?RegExp.$1:"1",r=parseFloat(d.replace(/_/,".").replace(/_/g,""));s$2l.add(e,r),s$2l.add("ios",r);}s$2l.add("trident",parseFloat(d.split("Trident/")[1])||void 0),s$2l("webkit")||(!a.includes("Gecko")||s$2l("wp")||s$2l("khtml")||s$2l("trident")||s$2l("edge")||s$2l.add("mozilla",r),s$2l("mozilla")&&s$2l.add("ff",parseFloat(a.split("Firefox/")[1]||a.split("Minefield/")[1])||void 0));}})(),(()=>{if(e$1Z.navigator){const e=navigator.userAgent,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),d=/iPhone/i.test(e);a&&s$2l.add("esri-mobile",a),d&&s$2l.add("esri-iPhone",d),s$2l.add("esri-geolocation",!!navigator.geolocation);}s$2l.add("esri-canvas-svg-support",!s$2l("trident")),s$2l.add("esri-wasm","WebAssembly"in e$1Z),s$2l.add("esri-shared-array-buffer",(()=>{const a="SharedArrayBuffer"in e$1Z,d=!1===e$1Z.crossOriginIsolated;return a&&!d})),s$2l.add("esri-atomics","Atomics"in e$1Z),s$2l.add("esri-workers","Worker"in e$1Z),s$2l.add("esri-text-decoder","TextDecoder"in e$1Z),s$2l.add("esri-text-encoder","TextEncoder"in e$1Z),s$2l.add("web-feat:cache","caches"in e$1Z),s$2l.add("esri-workers-arraybuffer-transfer",!s$2l("safari")||Number(s$2l("safari"))>=12),s$2l.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),s$2l.add("featurelayer-simplify-payload-size-factors",[1,1,4]),s$2l.add("featurelayer-snapshot-enabled",!0),s$2l.add("featurelayer-snapshot-point-min-threshold",8e4),s$2l.add("featurelayer-snapshot-point-max-threshold",4e5),s$2l.add("featurelayer-snapshot-point-coverage",.1),s$2l.add("featurelayer-advanced-symbols",!1),s$2l.add("featurelayer-pbf",!0),s$2l.add("featurelayer-pbf-statistics",!1),s$2l.add("feature-layers-workers",!0),s$2l.add("mapview-transitions-duration",200),s$2l.add("mapserver-pbf-enabled",!1),s$2l("host-webworker")||s$2l("host-browser")&&(s$2l.add("esri-csp-restrictions",(()=>{try{new Function;}catch{return !0}return !1})),s$2l.add("esri-image-decode",(()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{s$2l.add("esri-image-decode",!0,!0,!0);})).catch((()=>{s$2l.add("esri-image-decode",!1,!0,!0);}))}return !1})),s$2l.add("esri-url-encodes-apostrophe",(()=>{const a=e$1Z.document.createElement("a");return a.href="?'",a.href.includes("?%27")})),s$2l.add("vectortilelayer-max-buffers",s$2l("ff")?160:Number.POSITIVE_INFINITY));})();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$2Q=null;function r$1G(n){return null!=n}function t$1O(n){return null==n}function u$2g(n){return void 0===n}function o$1Y(t,u){return r$1G(t)?u(t):n$2Q}function e$1Y(n){return n}function f$1E(n,r){if(t$1O(n))throw new Error(r);return n}function c$3f(n,t){return r$1G(n)?n:"function"==typeof t?t():t}function l$2t(n){return r$1G(n)&&n.destroy(),null}function i$2G(n){return r$1G(n)&&n.dispose(),null}function s$2k(n){return r$1G(n)&&n.remove(),null}function h$1E(n){return r$1G(n)&&n.release(),null}function w$Z(n){return null}function d$1W(n,r){const t=new Array;for(const u of n)t.push(A$A(u,null,r));return t}function v$Y(n,r){for(const t of n)A$A(t,null,r);}function A$A(n,t,u){return r$1G(n)?u(n):t}function E$w(n,t){return r$1G(n)?t(n):null}function g$1b(n){return n.filter((n=>r$1G(n)))}function m$2b(n,...r){let t=n;for(let u=0;u<r.length&&t;++u)t=t[r[u]];return t}function q$q(n){return n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$1N{constructor(t=1){this._seed=t;}set seed(e){this._seed=null==e?Math.random()*t$1N._m:e;}getInt(){return this._seed=(t$1N._a*this._seed+t$1N._c)%t$1N._m,this._seed}getFloat(){return this.getInt()/(t$1N._m-1)}getIntRange(t,e){return Math.round(this.getFloatRange(t,e))}getFloatRange(e,s){const n=s-e;return e+this.getInt()/t$1N._m*n}}t$1N._m=2147483647,t$1N._a=48271,t$1N._c=0;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function l$2s(t,r,e){if(t$1O(t)&&t$1O(r))return !0;if(t$1O(t)||t$1O(r)||t.length!==r.length)return !1;if(e){for(let n=0;n<t.length;n++)if(!e(t[n],r[n]))return !1}else for(let n=0;n<t.length;n++)if(t[n]!==r[n])return !1;return !0}function s$2j(n,t,r){return n&&t?r?n.filter((function(n){return t.findIndex((function(t){return r(n,t)}))>-1})):n.filter((function(n){return t.indexOf(n)>-1})):[]}function a$33(n){return n&&"number"==typeof n.length}const d$1V=!!Array.prototype.fill;function g$1a(n,t){if(d$1V)return new Array(n).fill(t);const r=new Array(n);for(let e=0;e<n;e++)r[e]=t;return r}function m$2a(n,t){void 0===t&&(t=n,n=0);const r=new Array(t-n);for(let e=n;e<t;e++)r[e-n]=e;return r}function M$B(n){return n.reduce(((n,t)=>n.concat(t||[])),[])}class w$Y{constructor(){this.last=0;}}const y$1w=new w$Y;function b$_(n,t,r,e){e=e||y$1w;const o=Math.max(0,e.last-10);for(let u=o;u<r;++u)if(n[u]===t)return e.last=u,u;const f=Math.min(o,r);for(let u=0;u<f;++u)if(n[u]===t)return e.last=u,u;return -1}function v$X(n,t,r,e){const o=null==r?n.length:r,f=b$_(n,t,o,e);if(-1!==f)return n[f]=n[o-1],null==r&&n.pop(),t}const A$z=new Set;function O$s(n,t,r=n.length,e=t.length,o,f){if(0===e||0===r)return r;A$z.clear();for(let i=0;i<e;++i)A$z.add(t[i]);o=o||y$1w;const u=Math.max(0,o.last-10);for(let i=u;i<r;++i)if(A$z.has(n[i])&&(f&&f.push(n[i]),A$z.delete(n[i]),n[i]=n[r-1],--r,--i,0===A$z.size||0===r))return A$z.clear(),r;for(let i=0;i<u;++i)if(A$z.has(n[i])&&(f&&f.push(n[i]),A$z.delete(n[i]),n[i]=n[r-1],--r,--i,0===A$z.size||0===r))return A$z.clear(),r;return A$z.clear(),r}function C$z(n,t){const r=n.indexOf(t);return -1!==r?(n.splice(r,1),t):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2P(r,n){if(r.forEach)r.forEach(n);else for(let t=0;t<r.length;t++)n(r[t],t,r);}function t$1M(r,n,t){if(r.slice)return r.slice(n,t);void 0===n?n=0:(n<0&&(n+=r.length),n=Math.min(r.length,Math.max(0,n))),void 0===t?t=r.length:(t<0&&(t+=r.length),t=Math.min(r.length,Math.max(0,t)));const o=Math.max(0,t-n),c=new(r.constructor)(o);for(let e=0;e<o;e++)c[e]=r[n+e];return c}function o$1X(r){return r instanceof ArrayBuffer||r&&r.constructor&&"ArrayBuffer"===r.constructor.name}function c$3e(r){return r instanceof Int8Array||r&&r.constructor&&"Int8Array"===r.constructor.name}function e$1X(r){return r instanceof Uint8Array||r&&r.constructor&&"Uint8Array"===r.constructor.name}function a$32(r){return r instanceof Uint8ClampedArray||r&&r.constructor&&"Uint8ClampedArray"===r.constructor.name}function u$2f(r){return r instanceof Int16Array||r&&r.constructor&&"Int16Array"===r.constructor.name}function i$2F(r){return r instanceof Uint16Array||r&&r.constructor&&"Uint16Array"===r.constructor.name}function f$1D(r){return r instanceof Int32Array||r&&r.constructor&&"Int32Array"===r.constructor.name}function s$2i(r){return r instanceof Uint32Array||r&&r.constructor&&"Uint32Array"===r.constructor.name}function y$1v(r){return r instanceof Float32Array||r&&r.constructor&&"Float32Array"===r.constructor.name}function A$y(r){return r instanceof Float64Array||r&&r.constructor&&"Float64Array"===r.constructor.name}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function y$1u(e,t){let n;if(t)for(n in e)e.hasOwnProperty(n)&&(void 0===e[n]?delete e[n]:e[n]instanceof Object&&y$1u(e[n],!0));else for(n in e)e.hasOwnProperty(n)&&void 0===e[n]&&delete e[n];return e}function l$2r(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(c$3e(e)||e$1X(e)||a$32(e)||u$2f(e)||i$2F(e)||f$1D(e)||s$2i(e)||y$1v(e)||A$y(e))return t$1M(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer){return e.slice(0,e.byteLength)}if(e instanceof Map){const t=new Map;return e.forEach(((e,n)=>{t.set(n,l$2r(e));})),t}if(e instanceof Set){const t=new Set;return e.forEach((e=>{t.add(l$2r(e));})),t}let t;const y=e;if("function"==typeof y.clone)t=y.clone();else if("function"==typeof y.map&&"function"==typeof y.forEach)t=y.map(l$2r);else if("function"==typeof y.notifyChange&&"function"==typeof y.watch)t=y.clone();else {t={};for(const n of Object.getOwnPropertyNames(e))t[n]=l$2r(e[n]);}return t}function m$29(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof(e||{}).getTime&&"function"==typeof(t||{}).getTime&&e.getTime()===t.getTime()||!1}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2O(r,n,t=!1){return e$1W(r,n,t)}function t$1L(r,n){if(null!=n)return n[r]||i$2E(r.split("."),!1,n)}function o$1W(r,n,t){const o=r.split("."),e=o.pop(),u=i$2E(o,!0,t);u&&e&&(u[e]=n);}function i$2E(r,n,t){let o=t;for(const i of r){if(null==o)return;if(!(i in o)){if(!n)return;o[i]={};}o=o[i];}return o}function e$1W(n,t,o){return t?Object.keys(t).reduce((function(n,i){let u=n[i],c=t[i];return u===c?n:void 0===u?(n[i]=l$2r(c),n):(Array.isArray(c)||Array.isArray(n)?(u=u?Array.isArray(u)?n[i]=u.concat():n[i]=[u]:n[i]=[],c&&(Array.isArray(c)||(c=[c]),o?c.forEach((r=>{-1===u.indexOf(r)&&u.push(r);})):n[i]=c.concat())):c&&"object"==typeof c?n[i]=e$1W(u,c,o):n.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(n[i]=c),n)}),n||{}):n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const d$1U="20211104",e$1V="f56ab3008fdaea1ce910515531b6ddb258d83e4f";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$1K={apiKey:void 0,applicationUrl:e$1Z.location&&e$1Z.location.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(e$1Z.esriConfig&&(n$2O(t$1K,e$1Z.esriConfig,!0),delete t$1K.has),!t$1K.assetsPath){const e="4.22.0";t$1K.assetsPath=`https://cdn.jsdelivr.net/npm/@arcgis/core@${e}-next.${d$1U}/assets`;}t$1K.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(t$1K,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath");}}),t$1K.request.corsEnabledServers=[],t$1K.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$1U=/\{([^\}]+)\}/g;function n$2N(t){return null==t?"":t}function r$1F(r,o){return r.replace(e$1U,"object"==typeof o?(e,r)=>n$2N(t$1L(r,o)):(t,e)=>n$2N(o(e)))}function o$1V(t,e){return t.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,(t=>e&&-1!==e.indexOf(t)?t:`\\${t}`))}function c$3d(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}function u$2e(t){return (new DOMParser).parseFromString(t||"","text/html").body.innerText||""}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$1U={info:0,warn:1,error:2,none:3};class s$2h{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=e.level&&(this.level=e.level),null!=e.writer&&(this.writer=e.writer),this._module=e.module,s$2h._loggers[this.module]=this;const t=this.module.lastIndexOf(".");-1!==t&&(this._parent=s$2h.getLogger(this.module.slice(0,t)));}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e);}warn(...e){this._log("warn","always",...e);}info(...e){this._log("info","always",...e);}errorOnce(...e){this._log("error","once",...e);}warnOnce(...e){this._log("warn","once",...e);}infoOnce(...e){this._log("info","once",...e);}errorOncePerTick(...e){this._log("error","oncePerTick",...e);}warnOncePerTick(...e){this._log("warn","oncePerTick",...e);}infoOncePerTick(...e){this._log("info","oncePerTick",...e);}get test(){const e=this;return {loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get testSingleton(){return {resetLoggers(e={}){const t=s$2h._loggers;return s$2h._loggers=e,t},set throttlingDisabled(e){s$2h._throttlingDisabled=e;}}}static getLogger(e){let t=s$2h._loggers[e];return t||(t=new s$2h({module:e})),t}_log(t,r,...o){if(!this._matchLevel(t))return;if("always"!==r&&!s$2h._throttlingDisabled){const e=this._argsToKey(o),n=this._loggedMessages[t].get(e);if("once"===r&&null!=n||"oncePerTick"===r&&n&&n>=s$2h._tickCounter)return;this._loggedMessages[t].set(e,s$2h._tickCounter),s$2h._scheduleTickCounterIncrement();}for(const s of t$1K.log.interceptors)if(s(t,this.module,...o))return;this._inheritedWriter()(t,this.module,...o);}_parentWithMember(e,r){let o=this;for(;r$1G(o);){const r=o[e];if(r$1G(r))return r;o=o.parent;}return r}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,t,...r){console[e](`[${t}]`,...r);}_matchLevel(t){const r=t$1K.log.level?t$1K.log.level:"warn";return o$1U[this._parentWithMember("level",r)]<=o$1U[t]}_argsToKey(...e){const t=(e,t)=>"object"!=typeof t||Array.isArray(t)?t:"[Object]";return c$3d(JSON.stringify(e,t))}static _scheduleTickCounterIncrement(){s$2h._tickCounterScheduled||(s$2h._tickCounterScheduled=!0,Promise.resolve().then((()=>{s$2h._tickCounter++,s$2h._tickCounterScheduled=!1;})));}}s$2h._loggers={},s$2h._tickCounter=0,s$2h._tickCounterScheduled=!1,s$2h._throttlingDisabled=!1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2M(n,t){for(const[r,o]of n)if(t(o,r))return !0;return !1}function r$1E(n,t,r){const o=n.get(t);if(void 0!==o)return o;const f=r();return n.set(t,f),f}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$1D=s$2h.getLogger("esri.core.Accessor");function t$1J(e){return null==e?e:new Date(e)}function o$1T(e){return null==e?e:!!e}function u$2d(e){return null==e?e:e.toString()}function a$31(e){return null==e?e:(e=parseFloat(e),isNaN(e)?0:e)}function s$2g(e){return null==e?e:Math.round(parseFloat(e))}function l$2q(e){return e&&e.constructor&&void 0!==e.constructor.__accessorMetadata__}function i$2D(e,n){return null!=n&&e&&!(n instanceof e)}function c$3c(e){return e&&"isCollection"in e}function f$1C(e){return e&&e.Type?"function"==typeof e.Type?e.Type:e.Type.base:null}function p$3e(e,n){if(!n||!n.constructor||!c$3c(n.constructor))return y$1t(e,n)?n:new e(n);const r=f$1C(e.prototype.itemType),t=f$1C(n.constructor.prototype.itemType);return r?t?r===t?n:r.prototype.isPrototypeOf(t.prototype)?new e(n):(y$1t(e,n),n):new e(n):n}function y$1t(e,n){return !!l$2q(n)&&(r$1D.error("Accessor#set","Assigning an instance of '"+(n.declaredClass||"unknown")+"' which is not a subclass of '"+g$19(e)+"'"),!0)}function v$W(e,n){return null==n?n:c$3c(e)?p$3e(e,n):i$2D(e,n)?y$1t(e,n)?n:new e(n):n}function g$19(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const d$1T=new WeakMap;function h$1D(e){switch(e){case Number:return a$31;case S$J:return s$2g;case Boolean:return o$1T;case String:return u$2d;case Date:return t$1J;default:return r$1E(d$1T,e,(()=>v$W.bind(null,e)))}}function b$Z(e,n){const r=h$1D(e);return 1===arguments.length?r:r(n)}function m$28(e,n,r){return 1===arguments.length?m$28.bind(null,e):n?Array.isArray(n)?n.map((n=>e(n,r))):[e(n,r)]:n}function w$X(e,n){return 1===arguments.length?m$28(b$Z.bind(null,e)):m$28(b$Z.bind(null,e),n)}function A$x(e,n,r){return 0!==n&&Array.isArray(r)?r.map((r=>A$x(e,n-1,r))):e(r)}function $$i(e,n,r){if(2===arguments.length)return $$i.bind(null,e,n);if(!r)return r;let t=n,o=r=A$x(e,n,r);for(;t>0&&Array.isArray(o);)t--,o=o[0];if(void 0!==o)for(let u=0;u<t;u++)r=[r];return r}function j$P(e,n,r){return 2===arguments.length?$$i(b$Z.bind(null,e),n):$$i(b$Z.bind(null,e),n,r)}function k$E(e){return !!Array.isArray(e)&&!e.some((n=>{const r=typeof n;return !("string"===r||"number"===r||"function"===r&&e.length>1)}))}function M$A(e,n){if(2===arguments.length)return M$A(e).call(null,n);const t=new Set,o=e.filter((e=>"function"!=typeof e)),u=e.filter((e=>"function"==typeof e));for(const r of e)"string"!=typeof r&&"number"!=typeof r||t.add(r);let a=null,s=null;return (e,n)=>{if(null==e)return e;const l=typeof e,c="string"===l||"number"===l;return c&&(t.has(e)||u.some((e=>"string"===l&&e===String||"number"===l&&e===Number)))||"object"===l&&u.some((n=>!i$2D(e,n)))?e:(c&&o.length?(a||(a=o.map((e=>"string"==typeof e?`'${e}'`:`${e}`)).join(", ")),r$1D.error("Accessor#set",`'${e}' is not a valid value for this property, only the following values are valid: ${a}`)):"object"==typeof e&&u.length?(s||(s=u.map((e=>g$19(e))).join(", ")),r$1D.error("Accessor#set",`'${e}' is not a valid value for this property, value must be one of ${s}`)):r$1D.error("Accessor#set",`'${e}' is not a valid value for this property`),n&&(n.valid=!1),null)}}function N$t(e,n){if(2===arguments.length)return N$t(e).call(null,n);const t={},o=[],u=[];for(const r in e.typeMap){const n=e.typeMap[r];t[r]=b$Z(n),o.push(g$19(n)),u.push(r);}const a=()=>`'${o.join("', '")}'`,s=()=>`'${u.join("', '")}'`,c="string"==typeof e.key?n=>n[e.key]:e.key;return n=>{if(e.base&&!i$2D(e.base,n))return n;if(null==n)return n;const o=c(n)||e.defaultKeyValue,u=t[o];if(!u)return r$1D.error("Accessor#set",`Invalid property value, value needs to be one of ${a()}, or a plain object that can autocast (having .type = ${s()})`),null;if(!i$2D(e.typeMap[o],n))return n;if("string"==typeof e.key&&!l$2q(n)){const r={};for(const t in n)t!==e.key&&(r[t]=n[t]);return u(r)}return u(n)}}class S$J{}const T$q={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function _$B(e){if(!e||!("type"in e))return !1;switch(e.type){case"native":case"array":case"one-of":return !0}return !1}function B$m(e){switch(e.type){case"native":return b$Z(e.value);case"array":return m$28(B$m(e.value));case"one-of":return C$y(e);default:return null}}function C$y(e){let n=null;return (t,o)=>F$o(t,e)?t:(null==n&&(n=D$u(e)),r$1D.error("Accessor#set",`Invalid property value, value needs to be of type ${n}`),o&&(o.valid=!1),null)}function D$u(e){switch(e.type){case"native":switch(e.value){case Number:return "number";case String:return "string";case Boolean:return "boolean";case S$J:return "integer";case Date:return "date";default:return g$19(e.value)}case"array":return `array of ${D$u(e.value)}`;case"one-of":{const n=e.values.map((e=>D$u(e)));return `one of ${n.slice(0,n.length-1)} or ${n[n.length-1]}`}}return "unknown"}function F$o(e,n){if(null==e)return !0;switch(n.type){case"native":switch(n.value){case Number:case S$J:return "number"==typeof e;case Boolean:return "boolean"==typeof e;case String:return "string"==typeof e}return e instanceof n.value;case"array":return !!Array.isArray(e)&&!e.some((e=>!F$o(e,n.value)));case"one-of":return n.values.some((n=>F$o(e,n)))}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$1C(r){return n$2L((()=>r.forEach((r=>r$1G(r)&&r.remove()))))}function n$2L(e){return {remove:()=>{e&&(e(),e=void 0);}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1T(r){return r?r.__accessor__?r.__accessor__:r.propertyInvalidated?r:null:null}function i$2C(r,n){return null!=r&&r.metadatas&&null!=r.metadatas[n]}function u$2c(r,n,t){if(t){return a$30(r,n,{policy:t,path:""})}return a$30(r,n,null)}function a$30(r,e,i){return e?Object.keys(e).reduce((function(r,o){let u=null,l="merge";if(i&&(u=i.path?`${i.path}.${o}`:o,l=i.policy(u)),"replace"===l)return r[o]=e[o],r;if(void 0===r[o])return r[o]=l$2r(e[o]),r;let f=r[o],s=e[o];if(f===s)return r;if(Array.isArray(s)||Array.isArray(r))f=f?Array.isArray(f)?r[o]=f.concat():r[o]=[f]:r[o]=[],s&&(Array.isArray(s)||(s=[s]),s.forEach((r=>{-1===f.indexOf(r)&&f.push(r);})));else if(s&&"object"==typeof s)if(i){const n=i.path;i.path=q$q(u),r[o]=a$30(f,s,i),i.path=n;}else r[o]=a$30(f,s,null);else r.hasOwnProperty(o)&&!e.hasOwnProperty(o)||(r[o]=s);return r}),r||{}):r}function f$1B(r){return Array.isArray(r)?r:r.split(".")}function s$2f(r){return r.indexOf(",")>-1?r.split(",").map((r=>r.trim())):[r.trim()]}function c$3b(r){if(Array.isArray(r)){const n=[];for(const t of r)n.push(...s$2f(t));return n}return s$2f(r)}function y$1s(n,t,e,i){const o=c$3b(t);if(1!==o.length){const t=o.map((r=>i(n,r,e)));return r$1C(t)}return i(n,o[0],e)}function h$1C(r){let n=!1;return ()=>{n||(n=!0,r());}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1S(t,e){const i="?"===t[t.length-1]?t.slice(0,-1):t;if(null!=e.getItemAt||Array.isArray(e)){const t=parseInt(i,10);if(!isNaN(t))return Array.isArray(e)?e[t]:e.getItemAt(t)}const u=e$1T(e);return i$2C(u,i)?u.get(i):e[i]}function i$2B(t,n,r){if(null==t)return t;const u=e$1S(n[r],t);return !u&&r<n.length-1?void 0:r===n.length-1?u:i$2B(u,n,r+1)}function u$2b(n,r,u=0){return "string"==typeof r&&-1===r.indexOf(".")?e$1S(r,n):i$2B(n,f$1B(r),u)}function o$1S(t,n){return u$2b(t,n)}function s$2e(t,n){return void 0!==u$2b(n,t)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class o$1R{constructor(t){this.autoDestroy=!1,this.properties=t;}}function n$2K(r){let n=r.constructor.__accessorMetadata__;const c=Object.prototype.hasOwnProperty.call(r.constructor,"__accessorMetadata__");if(n){if(!c){const e=Object.create(n.properties),c=n.autoDestroy;for(const r in e)e[r]=l$2r(e[r]);n=new o$1R(e),n.autoDestroy=c,Object.defineProperty(r.constructor,"__accessorMetadata__",{value:n,enumerable:!1,configurable:!0,writable:!0});}}else n=new o$1R({}),Object.defineProperty(r.constructor,"__accessorMetadata__",{value:n,enumerable:!1,configurable:!0,writable:!0});return q$q(r.constructor.__accessorMetadata__)}function c$3a(t){return n$2K(t).properties}function s$2d(t,e){const r=c$3a(t);let o=r[e];return o||(o=r[e]={}),o}function i$2A(t,e){return u$2c(t,e,_$A)}const p$3d=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function _$A(t){return p$3d.test(t)?"replace":"merge"}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$1I(e,r,s){if(e&&r)if("object"==typeof r)for(const o of Object.getOwnPropertyNames(r))t$1I(e,o,r[o]);else {if(-1!==r.indexOf(".")){const i=r.split("."),f=i.splice(i.length-1,1)[0];return void t$1I(o$1S(e,i),f,s)}e[r]=s;}}s$2h.getLogger("esri.core.accessorSupport.set");

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function d$1S(n={}){return (o,i)=>{if(o===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${o.name}.${i}. Accessor does not support static properties.`);const s=Object.getOwnPropertyDescriptor(o,i),a=s$2d(o,i);s&&(s.get||s.set?(a.get=s.get||a.get,a.set=s.set||a.set):"value"in s&&("value"in n&&s$2h.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${o.constructor.name}" already defined in the metadata`,n),a.value=n.value=s.value)),null!=n.readOnly&&(a.readOnly=n.readOnly);const c=n.aliasOf;if(c){const t="string"==typeof c?c:c.source,e="string"==typeof c?null:!0===c.overridable;let r;a.dependsOn=[t],a.get=function(){let e=o$1S(this,t);if("function"==typeof e){r||(r=t.split(".").slice(0,-1).join("."));const n=o$1S(this,r);n&&(e=e.bind(n));}return e},a.readOnly||(a.set=e?function(t){void 0!==t?this._override(i,t):this._clearOverride(i);}:function(e){t$1I(this,t,e);});}const p=n.type,u=n.types;a.cast||(p?a.cast=h$1B(p):u&&(Array.isArray(u)?a.cast=m$28(N$t(u[0])):a.cast=N$t(u))),n.range&&(a.cast=v$V(a.cast,n.range)),i$2A(a,n);}}function y$1r(t,e,r){const n=s$2d(t,r);n.json||(n.json={});let o=n.json;return void 0!==e&&(o.origins||(o.origins={}),o.origins[e]||(o.origins[e]={}),o=o.origins[e]),o}function h$1B(t){let e=0,r=t;if(_$B(t))return B$m(t);for(;Array.isArray(r)&&1===r.length&&"string"!=typeof r[0]&&"number"!=typeof r[0];)r=r[0],e++;const l=r;if(k$E(l))return 0===e?M$A(l):$$i(M$A(l),e);if(1===e)return w$X(l);if(e>1)return j$P(l,e);const f=t;return f.from?f.from:b$Z(f)}function v$V(t,e){return r=>{let n=+t(r);return null!=e.step&&(n=Math.round(n/e.step)*e.step),null!=e.min&&(n=Math.max(e.min,n)),null!=e.max&&(n=Math.min(e.max,n)),n}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function o$1Q(o,t){const e=t?{...t,source:o}:o;return d$1S({aliasOf:e})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let o$1P,r$1B=[];const s$2c=s$2h.getLogger("esri.core.Accessor");function i$2z(t){void 0!==o$1P&&o$1P.onObservableAccessed(t);}let l$2p=!1,f$1A=!1;function a$2$(t,n,e){if(l$2p)return g$18(t,n,e);u$2a(t);const o=n.call(e);return p$3c(),o}function g$18(t,n,e){const o=l$2p;l$2p=!0,u$2a(t);let r=null;try{r=n.call(e);}catch(c){f$1A&&s$2c.error(c);}return p$3c(),l$2p=o,r}function u$2a(t){o$1P=t,r$1B.push(t);}function p$3c(){const t=r$1B.pop();o$1P=r$1B.length>0?r$1B[r$1B.length-1]:void 0,void 0!==t&&t.onTrackingEnd();}function d$1R(t,n){if(32&n.flags)return;const e=f$1A;f$1A=!1,64&n.flags?g$18(n,n.metadata.get,t):h$1A(t,n),f$1A=e;}const m$27=[];function h$1A(t,e){128&e.flags||(e.flags|=128,g$18(e,(()=>{const o=e.metadata.dependsOn||m$27;for(const e of o)if("string"==typeof e&&-1===e.indexOf("."))A$w(t,e,!1);else {const o=f$1B(e);for(let n=0,e=t;n<o.length&&null!=e&&"object"==typeof e;++n)e=A$w(e,o[n],n!==o.length-1);}})),e.flags&=-129);}function A$w(t,n,o){const r="?"===n[n.length-1]?n.slice(0,-1):n;if(null!=t.getItemAt||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.getItemAt(n)}const s=e$1T(t),c=null==s?void 0:s.properties.get(r);return c&&(i$2z(c),d$1R(t,c)),o?t[r]:void 0}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2J(n){if(n.json&&n.json.origins){const o=n.json.origins,e={"web-document":["web-scene","web-map"]};for(const n in e)if(o[n]){const s=o[n];e[n].forEach((n=>{o[n]=s;})),delete o[n];}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1R(e,s){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(function(e,n){if(""===n)return "$";const i=t$1L(n,s),r=null==i?"":i;if(void 0===r)throw new Error(`could not find key "${n}" in template`);return r.toString()}))}class s$2b{constructor(t,n,i){this.name=t,this.details=i,this.message=void 0,this instanceof s$2b&&(this.message=n&&e$1R(n,i)||"");}toString(){return "["+this.name+"]: "+this.message}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$1H extends s$2b{constructor(e,s,r){if(super(e,s,r),!(this instanceof t$1H))return new t$1H(e,s,r)}}t$1H.prototype.type="warning";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1Q(e){return !!e&&e.prototype&&e.prototype.declaredClass&&0===e.prototype.declaredClass.indexOf("esri.core.Collection")}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$2y=s$2h.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function p$3b(t,r,n){var o,i;t&&(!n&&!r.read||null!=(o=r.read)&&o.reader||!1===(null==(i=r.read)?void 0:i.enabled)||d$1Q(t)&&o$1W("read.reader",u$29(t),r));}function u$29(t){var e;const r=null!=(e=t.ndimArray)?e:0;if(r>1)return c$39(t);if(1===r)return a$2_(t);if("type"in t&&l$2o(t.type)){var n,o;const e=null==(n=t.type.prototype)||null==(o=n.itemType)?void 0:o.Type,r=a$2_("function"==typeof e?{type:e}:{types:e});return (e,n,o)=>{const i=r(e,n,o);return i?new t.type(i):i}}return s$2a(t)}function s$2a(t){return "type"in t?y$1q(t.type):j$O(t.types)}function y$1q(t){return t.prototype.read?(e,r,n)=>{if(null==e)return e;const o=typeof e;if("object"!==o)return void i$2y.error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${o}'`);const p=new t;return p.read(e,n),p}:t.fromJSON}function f$1z(t,e,r,n){return 0!==n&&Array.isArray(e)?e.map((e=>f$1z(t,e,r,n-1))):t(e,void 0,r)}function c$39(t){var e;const r=s$2a(t),n=f$1z.bind(null,r),o=null!=(e=t.ndimArray)?e:0;return (t,e,r)=>{if(null==t)return t;t=n(t,r,o);let i=o,p=t;for(;i>0&&Array.isArray(p);)i--,p=p[0];if(void 0!==p)for(let n=0;n<i;n++)t=[t];return t}}function a$2_(t){const e=s$2a(t);return (t,r,n)=>{if(null==t)return t;if(Array.isArray(t)){const r=[];for(const o of t){const t=e(o,void 0,n);void 0!==t&&r.push(t);}return r}const o=e(t,void 0,n);return void 0!==o?[o]:void 0}}function l$2o(t){if(!e$1Q(t))return !1;const e=t.prototype.itemType;return !(!e||!e.Type)&&("function"==typeof e.Type?v$U(e.Type):m$26(e.Type))}function d$1Q(t){return "types"in t?m$26(t.types):v$U(t.type)}function v$U(t){return !Array.isArray(t)&&(!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||l$2o(t)))}function m$26(t){for(const e in t.typeMap){if(!v$U(t.typeMap[e]))return !1}return !0}function j$O(t){var e;let n=null;const o=null!=(e=t.errorContext)?e:"type";return (e,p,u)=>{if(null==e)return e;const s=typeof e;if("object"!==s)return void i$2y.error(`Expected JSON value of type 'object' to deserialize, but got '${s}'`);n||(n=g$17(t));const y=t.key;if("string"!=typeof y)return;const f=e[y],c=f?n[f]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!c){const t=`Type '${f||"unknown"}' is not supported`;return u&&u.messages&&e&&u.messages.push(new t$1H(`${o}:unsupported`,t,{definition:e,context:u})),void i$2y.error(t)}const a=new c;return a.read(e,u),a}}function g$17(t){const e={};for(const i in t.typeMap){var r,o;const p=t.typeMap[i],u=n$2K(p.prototype);if("function"==typeof t.key)continue;const s=u.properties[t.key];if(!s)continue;null!=(r=s.json)&&r.type&&Array.isArray(s.json.type)&&1===s.json.type.length&&"string"==typeof s.json.type[0]&&(e[s.json.type[0]]=p);const y=null==(o=s.json)?void 0:o.write;if(!y||!y.writer){e[i]=p;continue}const f=y.target,c="string"==typeof f?f:t.key,a={};y.writer(i,a,c),a[c]&&(e[a[c]]=p);}return e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1P(e){if(e.json||(e.json={}),o$1O(e.json),n$2I(e.json),r$1A(e.json),e.json.origins)for(const t in e.json.origins)o$1O(e.json.origins[t]),n$2I(e.json.origins[t]),r$1A(e.json.origins[t]);return !0}function r$1A(e){e.name&&(e.read&&"object"==typeof e.read?void 0===e.read.source&&(e.read.source=e.name):e.read={source:e.name},e.write&&"object"==typeof e.write?void 0===e.write.target&&(e.write.target=e.name):e.write={target:e.name});}function o$1O(e){"boolean"==typeof e.read?e.read={enabled:e.read}:"function"==typeof e.read?e.read={enabled:!0,reader:e.read}:e.read&&"object"==typeof e.read&&void 0===e.read.enabled&&(e.read.enabled=!0);}function n$2I(e){"boolean"==typeof e.write?e.write={enabled:e.write}:"function"==typeof e.write?e.write={enabled:!0,writer:e.write}:e.write&&"object"==typeof e.write&&void 0===e.write.enabled&&(e.write.enabled=!0);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$29 extends s$2b{constructor(e,t,r){if(super(e,t,r),!(this instanceof s$29))return new s$29(e,t,r)}toJSON(){if(null!=this.details)try{return {name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((t,r)=>{if(r&&"object"==typeof r&&"function"==typeof r.toJSON)return r;try{return l$2r(r)}catch(s){return "[object]"}})))}}catch(r){throw s$2h.getLogger("esri.core.Error").error(r),r}return {name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new s$29(e.name,e.message,e.details)}}s$29.prototype.type="error";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$2x=s$2h.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function o$1N(r,t){var e;if(!t.write||t.write.writer||!1===t.write.enabled&&!t.write.overridePolicy)return;const i=null!=(e=null==r?void 0:r.ndimArray)?e:0;r&&(1===i||"type"in r&&e$1Q(r.type))?t.write.writer=a$2Z:i>1?t.write.writer=w$W(i):t.types?Array.isArray(t.types)?t.write.writer=s$28(t.types[0]):t.write.writer=u$28(t.types):t.write.writer=l$2n;}function u$28(r){return (t,e,n,i)=>t?f$1y(t,r,i)?l$2n(t,e,n,i):void 0:l$2n(t,e,n,i)}function f$1y(t,e,n){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return !0;if(null!=n&&n.messages){var o,u;const f=null!=(o=e.errorContext)?o:"type",s=`Values of type '${null!=(u="function"!=typeof e.key?t[e.key]:t.declaredClass)?u:"Unknown"}' cannot be written`;n&&n.messages&&t&&n.messages.push(new s$29(`${f}:unsupported`,s,{definition:t,context:n})),i$2x.error(s);}return !1}function s$28(r){return (t,e,n,i)=>{if(!t||!Array.isArray(t))return l$2n(t,e,n,i);return l$2n(t.filter((t=>f$1y(t,r,i))),e,n,i)}}function l$2n(r,t,n,i){o$1W(n,p$3a(r,i),t);}function p$3a(r,t){return r&&"function"==typeof r.write?r.write({},t):r&&"function"==typeof r.toJSON?r.toJSON():"number"==typeof r?y$1p(r):r}function y$1p(r){return r===-1/0?-Number.MAX_VALUE:r===1/0?Number.MAX_VALUE:isNaN(r)?null:r}function a$2Z(r,t,n,i){let o;null===r?o=null:r&&"function"==typeof r.map?(o=r.map((r=>p$3a(r,i))),"function"==typeof o.toArray&&(o=o.toArray())):o=[p$3a(r,i)],o$1W(n,o,t);}function c$38(r,t,e){return 0!==e&&Array.isArray(r)?r.map((r=>c$38(r,t,e-1))):p$3a(r,t)}function w$W(r){return function(t,n,i,o){let u;if(null===t)u=null;else {u=c$38(t,o,r);let e=r,n=u;for(;e>0&&Array.isArray(n);)e--,n=n[0];if(void 0!==n)for(let r=0;r<e;r++)u=[u];}o$1W(i,u,n);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function o$1M(r,n){return a$2Y(r,"read",n)}function s$27(r,n){return a$2Y(r,"write",n)}function a$2Y(r,n,e){let t=r&&r.json;if(r&&r.json&&r.json.origins&&e){const i=r.json.origins[e.origin];i&&("any"===n||n in i)&&(t=i);}return t}function p$39(r){const n=y$1o(r);if(r.json.origins)for(const t in r.json.origins){const o=r.json.origins[t],s=o.types?f$1x(o):n;p$3b(s,o,!1),o.types&&!o.write&&r.json.write&&r.json.write.enabled&&(o.write={...r.json.write}),o$1N(s,o);}p$3b(n,r.json,!0),o$1N(n,r.json);}function y$1o(r){return r.json.types?u$27(r.json):r.type?j$N(r):u$27(r)}function f$1x(r){return r.type?j$N(r):u$27(r)}function j$N(n){if(!n.type)return;let e=0,t=n.type;for(;Array.isArray(t)&&!k$E(t);)t=t[0],e++;return {type:t,ndimArray:e}}function u$27(r){if(!r.types)return;let n=0,e=r.types;for(;Array.isArray(e);)e=e[0],n++;return {types:e,ndimArray:n}}function c$37(r){e$1P(r)&&(n$2J(r),p$39(r));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$1L=new Set,s$26=new Set;function i$2w(t){return r=>{r.prototype.declaredClass=t,a$2X(r);const i=[],n=[];let c=r.prototype;for(;c;)c.hasOwnProperty("initialize")&&!o$1L.has(c.initialize)&&(o$1L.add(c.initialize),i.push(c.initialize)),c.hasOwnProperty("destroy")&&!s$26.has(c.destroy)&&(s$26.add(c.destroy),n.push(c.destroy)),c=Object.getPrototypeOf(c);o$1L.clear(),s$26.clear();class l extends r{constructor(...e){if(super(...e),this.constructor===l&&"function"==typeof this.postscript){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let e=i.length-1;e>=0;e--)i[e].call(this);}}),n.length){let e=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!e){e=!0;for(let e=0;e<n.length;e++)n[e].call(this);}}});}this.postscript(...e);}}}return l.__accessorMetadata__=n$2K(r.prototype),l.prototype.declaredClass=t,l}}function n$2H(e,r){return null==r.get?function(){const r=this.__accessor__.properties.get(e);if(void 0===r)return;i$2z(r);const o=this.__accessor__.store;return o.has(e)?o.get(e):r.metadata.value}:function(){const t=this.__accessor__.properties.get(e);if(void 0!==t)return t.getComputed()}}function a$2X(t){const o=t.prototype,s=n$2K(o).properties,i={};for(const e of Object.getOwnPropertyNames(s)){const t=s[e];c$37(t),i[e]={enumerable:!0,configurable:!0,get:n$2H(e,t),set(r){const o=this.__accessor__;if(void 0!==o){if(!Object.isFrozen(this)){if(o.initialized&&t.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${e}' of ${this.declaredClass}`);if(2===o.lifecycle&&t.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${e}' of ${this.declaredClass}`);o.set(e,r);}}else Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:r});}};}Object.defineProperties(t.prototype,i);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class o$1K{constructor(o,s={ignoreUnknown:!1}){this.jsonToAPI=o,this.options=s,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this.invertMap(o),this.apiValues=this.getKeysSorted(this.apiToJSON),this.jsonValues=this.getKeysSorted(this.jsonToAPI),this.read=t=>this.fromJSON(t),this.write=(o,s,i)=>{const n=this.toJSON(o);void 0!==n&&o$1W(i,n,s);},this.write.isJSONMapWriter=!0;}toJSON(t){return this.apiToJSON.hasOwnProperty(t)?this.apiToJSON[t]:this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}invertMap(t){const o={};for(const s in t)o[t[s]]=s;return o}getKeysSorted(t){const o=[];for(const s in t)o.push(s);return o.sort(),o}}function s$25(){return function(t){return new o$1K(t,{ignoreUnknown:!0})}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var o$1J,l$2m,e$1O;let t$1G,r$1z;const u$26=null!=(o$1J=null==(l$2m=e$1Z.esriConfig)?void 0:l$2m.locale)?o$1J:null==(e$1O=e$1Z.dojoConfig)?void 0:e$1O.locale;function c$36(){var o,l;return null!=(o=null!=u$26?u$26:null==(l=e$1Z.navigator)?void 0:l.language)?o:"en"}function i$2v(){return void 0===r$1z&&(r$1z=c$36()),r$1z}const d$1P=[];function g$16(n){return d$1P.push(n),{remove(){d$1P.splice(d$1P.indexOf(n),1);}}}const h$1z=[];function p$38(n){return h$1z.push(n),{remove(){d$1P.splice(h$1z.indexOf(n),1);}}}function m$25(){var n;const o=null!=(n=t$1G)?n:c$36();r$1z!==o&&(r$1z=o,[...h$1z].forEach((n=>{n.call(null,o);})),[...d$1P].forEach((n=>{n.call(null,o);})));}null==e$1Z.addEventListener||e$1Z.addEventListener("languagechange",m$25);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$1y={year:"numeric",month:"numeric",day:"numeric"},n$2G={year:"numeric",month:"long",day:"numeric"},a$2W={year:"numeric",month:"short",day:"numeric"},h$1y={year:"numeric",month:"long",weekday:"long",day:"numeric"},m$24={hour:"numeric",minute:"numeric"},i$2u={...m$24,second:"numeric"},s$24={"short-date":r$1y,"short-date-short-time":{...r$1y,...m$24},"short-date-short-time-24":{...r$1y,...m$24,hour12:!1},"short-date-long-time":{...r$1y,...i$2u},"short-date-long-time-24":{...r$1y,...i$2u,hour12:!1},"short-date-le":r$1y,"short-date-le-short-time":{...r$1y,...m$24},"short-date-le-short-time-24":{...r$1y,...m$24,hour12:!1},"short-date-le-long-time":{...r$1y,...i$2u},"short-date-le-long-time-24":{...r$1y,...i$2u,hour12:!1},"long-month-day-year":n$2G,"long-month-day-year-short-time":{...n$2G,...m$24},"long-month-day-year-short-time-24":{...n$2G,...m$24,hour12:!1},"long-month-day-year-long-time":{...n$2G,...i$2u},"long-month-day-year-long-time-24":{...n$2G,...i$2u,hour12:!1},"day-short-month-year":a$2W,"day-short-month-year-short-time":{...a$2W,...m$24},"day-short-month-year-short-time-24":{...a$2W,...m$24,hour12:!1},"day-short-month-year-long-time":{...a$2W,...i$2u},"day-short-month-year-long-time-24":{...a$2W,...i$2u,hour12:!1},"long-date":h$1y,"long-date-short-time":{...h$1y,...m$24},"long-date-short-time-24":{...h$1y,...m$24,hour12:!1},"long-date-long-time":{...h$1y,...i$2u},"long-date-long-time-24":{...h$1y,...i$2u,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":m$24,"long-time":i$2u},l$2l=s$25()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});l$2l.toJSON.bind(l$2l);l$2l.fromJSON.bind(l$2l);const u$25={ar:"ar-u-nu-latn-ca-gregory"};let c$35=new WeakMap,D$t=s$24["short-date-short-time"];function T$p(t){const o=t||D$t;if(!c$35.has(o)){const t=i$2v(),r=u$25[i$2v()]||t;c$35.set(o,new Intl.DateTimeFormat(r,o));}return c$35.get(o)}function S$I(t){return s$24[t]||null}function L$x(t,o){return T$p(o).format(t)}p$38((()=>{c$35=new WeakMap,D$t=s$24["short-date-short-time"];}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$2V={ar:"ar-u-nu-latn"};let e$1N=new WeakMap,o$1I={};function i$2t(n){const i=n||o$1I;if(!e$1N.has(i)){const t=i$2v(),o=a$2V[i$2v()]||t;e$1N.set(i,new Intl.NumberFormat(o,n));}return q$q(e$1N.get(i))}function u$24(t={}){const n={};return null!=t.digitSeparator&&(n.useGrouping=t.digitSeparator),null!=t.places&&(n.minimumFractionDigits=n.maximumFractionDigits=t.places),n}function m$23(t,n){return i$2t(n).format(t)}p$38((()=>{e$1N=new WeakMap,o$1I={};}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$2s=s$2h.getLogger("esri.intl");function s$23(t,r,n={}){const{format:o={}}=n;return r$1F(t,(t=>u$23(t,r,o)))}function u$23(t,e,n){let o,i;const s=t.indexOf(":");if(-1===s?o=t.trim():(o=t.slice(0,s).trim(),i=t.slice(s+1).trim()),!o)return "";const u=t$1L(o,e);if(null==u)return "";const m=n[i]||n[o];return m?c$34(u,m):i?a$2U(u,i):f$1w(u)}function c$34(t,r){switch(r.type){case"date":return L$x(t,r.intlOptions);case"number":return m$23(t,r.intlOptions);default:return i$2s.warn("missing format descriptor for key {key}"),f$1w(t)}}function a$2U(t,r){switch(r.toLowerCase()){case"dateformat":return L$x(t);case"numberformat":return m$23(t);default:return i$2s.warn(`inline format is unsupported since 4.12: ${r}`),/^(dateformat|datestring)/i.test(r)?L$x(t):/^numberformat/i.test(r)?m$23(t):f$1w(t)}}function f$1w(t){switch(typeof t){case"string":return t;case"number":return m$23(t);case"boolean":return ""+t;default:return t instanceof Date?L$x(t):""}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1M(t){return {setTimeout:(e,o)=>{const r=t.setTimeout(e,o);return {remove:()=>t.clearTimeout(r)}}}}const o$1H=e$1M(e$1Z);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1L(e){return e&&("function"==typeof e.on||"function"==typeof e.addEventListener)}function r$1x(r,t,n){if(!e$1L(r))throw new TypeError("target is not a Evented or EventTarget object");if("on"in r)return r.on(t,n);if(Array.isArray(t)){const e=t.slice();for(const t of e)r.addEventListener(t,n);return {remove(){for(const t of e)r.removeEventListener(t,n);}}}return r.addEventListener(t,n),{remove(){r.removeEventListener(t,n);}}}function t$1F(t,n,o){if(!e$1L(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(n,o);const i=r$1x(t,n,(e=>{i.remove(),o.call(t,e);}));return {remove(){i.remove();}}}const o$1G={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function i$2r({key:e}){return o$1G[e]||e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function s$22(t){return Promise.all(t)}function f$1v(t){return new Promise(((n,e)=>{try{t(n,e);}catch(r){Promise.resolve().then((()=>e(r)));}}))}function m$22(t="Aborted"){return new s$29("AbortError",t)}function h$1x(t,n="Aborted"){if(p$37(t))throw m$22(n)}function a$2T(t){return r$1G(t)?"aborted"in t?t:t.signal:t}function p$37(t){const n=a$2T(t);return r$1G(n)&&n.aborted}function b$Y(t){if(d$1O(t))throw t}function w$V(t){if(!d$1O(t))throw t}function j$M(t,n){const r=a$2T(t);if(!t$1O(r)){if(!r.aborted)return t$1F(r,"abort",(()=>n()));n();}}function v$T(t,n){const r=a$2T(t);if(!t$1O(r))return h$1x(r),t$1F(r,"abort",(()=>n(m$22())))}function P$s(t,n){const e=a$2T(n);return t$1O(e)?t:new Promise(((e,r)=>{let o=j$M(n,(()=>r(m$22())));const i=()=>o=s$2k(o);t.then(i,i),t.then(e,r);}))}function d$1O(t){return t&&"AbortError"===t.name}function g$15(t){return t.catch((t=>{if(!d$1O(t))throw t}))}function A$v(){let t=null;const n=new Promise(((n,e)=>{t={promise:void 0,resolve:n,reject:e};}));return t.promise=n,t}function T$o(t){if(!t)return;if("function"!=typeof t.forEach){const n=Object.keys(t);return T$o(n.map((n=>t[n]))).then((t=>{const e={};return n.forEach(((n,r)=>e[n]=t[r])),e}))}const n=t;return f$1v((t=>{const e=[];let r=n.length;0===r&&t(e),n.forEach((n=>{const o={promise:n||Promise.resolve(n)};e.push(o),o.promise.then((t=>{o.value=t;})).catch((t=>{o.error=t;})).then((()=>{--r,0===r&&t(e);}));}));}))}function E$v(t){return T$o(t).then((t=>t.filter((t=>!!t.value)).map((t=>t.value))))}function C$x(t){return Promise.reject(t)}function k$D(t){return Promise.resolve(t)}function L$w(t,n,e){const r=new AbortController;return j$M(e,(()=>r.abort())),new Promise(((e,o)=>{let i=setTimeout((()=>{i=0,e(n);}),t);j$M(r,(()=>{i&&(clearTimeout(i),o(m$22()));}));}))}function O$r(t){return t&&"function"==typeof t.then}function U$p(t){return q$p(t)?t:Promise.resolve(t)}function q$p(t){return t&&"object"==typeof t&&"then"in t&&"function"==typeof t.then}function z$r(t,n=-1){let e,r,o,i,c=null;const s=(...l)=>{if(e){r=l,i&&i.reject(m$22()),i=A$v();const t=q$q(i.promise);if(c){const t=c;c=null,t.abort();}return t}if(o=i||A$v(),i=null,n>0){const r=new AbortController;e=U$p(t(...l,r.signal));const o=e;L$w(n).then((()=>{e===o&&(i?r.abort():c=r);}));}else e=1,e=U$p(t(...l));const f=()=>{const t=r;r=o=e=c=null,null!=t&&s(...t);},h=e,a=o;return h.then(f,f),h.then(a.resolve,a.reject),q$q(a.promise)};return s}function B$l(){let n,e;const r=new Promise(((t,r)=>{n=t,e=r;})),o=t=>{n(t);};return o.resolve=t=>n(t),o.reject=t=>e(t),o.timeout=(n,e)=>o$1H.setTimeout((()=>o.reject(e)),n),o.promise=r,o}function F$n(t){let n=new AbortController;const e=t(n.signal);let r={promise:e,finished:!1,abort:()=>{n&&(n.abort(),n=null);}};const o=()=>{r&&(r.finished=!0,r=null),n=null;};return e.then(o,o),r}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$21=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,o$1F={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function i$2q(t){var e;return null!=(e=o$1F[t])&&e}const a$2S=[],c$33=new Map;function d$1N(t){for(const e of c$33.keys())m$21(t.pattern,e)&&c$33.delete(e);}function l$2k(t){return a$2S.includes(t)||(d$1N(t),a$2S.unshift(t)),{remove(){const e=a$2S.indexOf(t);e>-1&&(a$2S.splice(e,1),d$1N(t));}}}async function u$22(t){const e=i$2v();c$33.has(t)||c$33.set(t,f$1u(t,e));const n=c$33.get(t);return await _$z.add(n),n}function h$1w(t){if(!s$21.test(t))return null;const[,e,n]=s$21.exec(t),r=e+(n?"-"+n.toUpperCase():"");return i$2q(r)?r:i$2q(e)?e:null}async function f$1u(e,n){const r=[];for(const t of a$2S)if(m$21(t.pattern,e))try{return await t.fetchMessageBundle(e,n)}catch(s){r.push(s);}if(r.length)throw new s$29("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r});throw new s$29("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function m$21(t,e){return "string"==typeof t?e.startsWith(t):t.test(e)}p$38((()=>{c$33.clear();}));const _$z=new class{constructor(){this._numLoading=0;}async waitForAll(){this._dfd&&await this._dfd.promise;}add(t){return this._increase(),t.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=A$v());}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null);}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u$21=s$2h.getLogger("esri.core.urlUtils"),l$2j=t$1K.request,c$32="esri/config: esriConfig.request.proxyUrl is not set.",f$1t=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,a$2R=/^\s*http:/i,h$1v=/^\s*https:/i,p$36=/^\s*file:/i,d$1M=/:\d+$/,g$14=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,m$20=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),y$1n=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class $$h{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let e=q$q(this.uri.match(m$20));this.scheme=e[2]||(e[1]?"":null),this.authority=e[4]||(e[3]?"":null),this.path=e[5],this.query=e[7]||(e[6]?"":null),this.fragment=e[9]||(e[8]?"":null),null!=this.authority&&(e=q$q(this.authority.match(y$1n)),this.user=e[3]||null,this.password=e[4]||null,this.host=e[6]||e[7],this.port=e[9]||null);}toString(){return this.uri}}const x$F=new $$h(t$1K.applicationUrl),O$q={},w$U=(()=>{const t=q$q(x$F.path),e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return `${`${x$F.scheme}://${x$F.host}${null!=x$F.port?`:${x$F.port}`:""}`}${e}`})();function U$o(t){const e={path:null,query:null},n=new $$h(t),r=t.indexOf("?");return null===n.query?e.path=t:(e.path=t.substring(0,r),e.query=b$X(n.query)),n.fragment&&(e.hash=n.fragment,null===n.query&&(e.path=e.path.substring(0,e.path.length-(n.fragment.length+1)))),e}function b$X(t){const e=t.split("&"),n={};for(const r of e){if(!r)continue;const t=r.indexOf("=");let e,o;t<0?(e=decodeURIComponent(r),o=""):(e=decodeURIComponent(r.slice(0,t)),o=decodeURIComponent(r.slice(t+1)));let i=n[e];"string"==typeof i&&(i=n[e]=[i]),Array.isArray(i)?i.push(o):n[e]=o;}return n}function R$s(t){return t&&"object"==typeof t&&"toJSON"in t&&"function"==typeof t.toJSON}function C$w(t,e){return t?e&&"function"==typeof e?Object.keys(t).map((n=>encodeURIComponent(n)+"="+encodeURIComponent(e(n,t[n])))).join("&"):Object.keys(t).map((n=>{const r=t[n];if(null==r)return "";const o=encodeURIComponent(n)+"=",i=e&&e[n];return i?o+encodeURIComponent(i(r)):Array.isArray(r)?r.map((t=>R$s(t)?o+encodeURIComponent(JSON.stringify(t)):o+encodeURIComponent(t))).join("&"):R$s(r)?o+encodeURIComponent(JSON.stringify(r)):o+encodeURIComponent(r)})).filter((t=>t)).join("&"):""}function q$o(t=!1){let n,r=l$2j.proxyUrl;if("string"==typeof t){n=rt$2(t);const e=A$u(t);e&&(r=e.proxyUrl);}else n=!!t;if(!r)throw u$21.warn(c$32),new s$29("urlutils:proxy-not-set",c$32);n&&ct$2()&&(r=ut$2(r));return U$o(r)}function j$L(t){const e=A$u(t);let n,r;if(e){const t=v$S(e.proxyUrl);n=t.path,r=t.query?b$X(t.query):null;}if(n){const e=U$o(t);t=n+"?"+e.path;const o=C$w({...r,...e.query});o&&(t=`${t}?${o}`);}return t}const L$v={path:"",query:""};function v$S(t){const e=t.indexOf("?");return -1!==e?(L$v.path=t.slice(0,e),L$v.query=t.slice(e+1)):(L$v.path=t,L$v.query=null),L$v}function I$y(t){return t=(t=ft$2(t=dt(t=v$S(t).path),!0)).toLowerCase()}function S$H(t){const e={proxyUrl:t.proxyUrl,urlPrefix:I$y(t.urlPrefix)},n=l$2j.proxyRules,r=e.urlPrefix;let o=n.length;for(let i=0;i<n.length;i++){const t=n[i].urlPrefix;if(0===r.indexOf(t)){if(r.length===t.length)return -1;o=i;break}0===t.indexOf(r)&&(o=i+1);}return n.splice(o,0,e),o}function A$u(t){const e=l$2j.proxyRules,n=I$y(t);for(let r=0;r<e.length;r++)if(0===n.indexOf(e[r].urlPrefix))return e[r]}function P$r(t,e){return t=k$C(t),e=k$C(e),ft$2(t)===ft$2(e)}function k$C(t){const e=(t=z$q(t)).indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function B$k(t){const e=e=>null==e||e instanceof RegExp&&e.test(t)||"string"==typeof e&&t.startsWith(e),n=l$2j.interceptors;if(n)for(const r of n)if(Array.isArray(r.urls)){if(r.urls.some(e))return r}else if(e(r.urls))return r;return null}function E$u(t,e,n=!1){const r=Ot(t),o=Ot(e);return !(!n&&r.scheme!==o.scheme)&&(null!=r.host&&null!=o.host&&(r.host.toLowerCase()===o.host.toLowerCase()&&r.port===o.port))}function J$d(t){if("string"==typeof t){if(!Q$d(t))return !0;t=Ot(t);}if(E$u(t,x$F))return !0;const e=l$2j.trustedServers||[];for(let n=0;n<e.length;n++){const r=N$s(e[n]);for(let e=0;e<r.length;e++)if(E$u(t,r[e]))return !0}return !1}function N$s(t){return O$q[t]||(nt$1(t)||et$2(t)?O$q[t]=[new $$h(T$n(t))]:O$q[t]=[new $$h(`http://${t}`),new $$h(`https://${t}`)]),O$q[t]}function T$n(t,e=w$U,n){return et$2(t)?n&&n.preserveProtocolRelative?t:"http"===x$F.scheme&&x$F.authority===M$z(t).slice(2)?`http:${t}`:`https:${t}`:nt$1(t)?t:q$q(D$s("/"===t[0]?at$2(e):e,t))}function W$a(t,e=w$U,n){if(!Q$d(t))return t;const r=z$q(t),o=r.toLowerCase(),i=z$q(e).toLowerCase().replace(/\/+$/,""),s=n?z$q(n).toLowerCase().replace(/\/+$/,""):null;if(s&&0!==i.indexOf(s))return t;const u=(t,e,n)=>-1===(n=t.indexOf(e,n))?t.length:n;let l=u(o,"/",o.indexOf("//")+2),c=-1;for(;o.slice(0,l+1)===i.slice(0,l)+"/"&&(c=l+1,l!==o.length);)l=u(o,"/",l+1);if(-1===c)return t;if(s&&c<s.length)return t;t=r.slice(c);const f=i.slice(c-1).replace(/[^/]+/g,"").length;if(f>0)for(let a=0;a<f;a++)t=`../${t}`;else t=`./${t}`;return t}function z$q(t){return t=$t(t=yt$2(t=mt$2(t=T$n(t=t.trim()))))}function D$s(...t){const e=t.filter(r$1G);if(!e||!e.length)return;const n=[];if(Q$d(e[0])){const t=e[0],r=t.indexOf("//");-1!==r&&(n.push(t.slice(0,r+1)),it$2(e[0])&&(n[0]+="/"),e[0]=t.slice(r+2));}else "/"===e[0][0]&&n.push("");const r=e.reduce(((t,e)=>e?t.concat(e.split("/")):t),[]);for(let o=0;o<r.length;o++){const t=r[o];".."===t&&n.length>0&&".."!==n[n.length-1]?n.pop():(!t&&o===r.length-1||t&&("."!==t||0===n.length))&&n.push(t);}return n.join("/")}function M$z(t,e=!1){if(F$m(t)||G$k(t))return null;let n=t.indexOf("://");if(-1===n&&et$2(t))n=2;else {if(-1===n)return null;n+=3;}const r=t.indexOf("/",n);return -1!==r&&(t=t.slice(0,r)),e&&(t=ft$2(t,!0)),t}function Q$d(t){return et$2(t)||nt$1(t)}function F$m(t){return null!=t&&"blob:"===t.slice(0,5)}function G$k(t){return "data:"===t.slice(0,5)}function H$h(t){const e=V$e(t);if(!e||!e.isBase64)return null;const n=atob(e.data),r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r.buffer}const K$c=/^data:(.*?)(;base64)?,(.*)$/;function V$e(t){const e=t.match(K$c);if(!e)return null;const[,n,r,o]=e;return {mediaType:n,isBase64:!!r,data:o}}function X$d(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}function et$2(t){return null!=t&&void 0!==t&&"/"===t[0]&&"/"===t[1]}function nt$1(t){return f$1t.test(t)}function rt$2(t){return h$1v.test(t)||"https"===x$F.scheme&&et$2(t)}function ot$2(t){return a$2R.test(t)||"http"===x$F.scheme&&et$2(t)}function it$2(t){return p$36.test(t)}function ut$2(t){return et$2(t)?`https:${t}`:t.replace(a$2R,"https:")}function lt$2(){return "http"===x$F.scheme}function ct$2(){return "https"===x$F.scheme}function ft$2(t,e=!1){return et$2(t)?t.slice(2):(t=t.replace(f$1t,""),e&&t.length>1&&"/"===t[0]&&"/"===t[1]&&(t=t.slice(2)),t)}function at$2(t){const e=t.indexOf("//"),n=t.indexOf("/",e+2);return -1===n?t:t.slice(0,n)}function ht$2(t){let e=0;if(Q$d(t)){const n=t.indexOf("//");-1!==n&&(e=n+2);}const n=t.lastIndexOf("/");return n<e?t:t.slice(0,n+1)}function pt$1(t,e){if(!t)return "";const n=U$o(t).path.replace(/\/+$/,""),r=n.substring(n.lastIndexOf("/")+1);if(null==e||!e.length)return r;const o=new RegExp(`.(${e.join("|")})$`,"ig");return r.replace(o,"")}function dt(t){return t&&"/"===t[t.length-1]?t:`${t}/`}function gt$2(t){return t.replace(/\/+$/,"")}function mt$2(t){if(/^https?:\/\//i.test(t)){const e=v$S(t);t=(t=e.path.replace(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`);}return t}function yt$2(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function $t(t){const e=l$2j.httpsDomains;if(!ot$2(t))return t;const n=t.indexOf("/",7);let r;if(r=-1===n?t:t.slice(0,n),r=r.toLowerCase().slice(7),d$1M.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","");}return lt$2()&&r===x$F.authority&&!g$14.test(t)||(ct$2()&&r===x$F.authority||e&&e.some((t=>r===t||r.endsWith(`.${t}`)))||ct$2()&&!A$u(t))&&(t=ut$2(t)),t}function xt$1(t,e,n){if(!(e&&n&&t&&Q$d(t)))return t;const r=t.indexOf("//"),o=t.indexOf("/",r+2),i=t.indexOf(":",r+2),s=Math.min(o<0?t.length:o,i<0?t.length:i);if(t.slice(r+2,s).toLowerCase()!==e.toLowerCase())return t;return `${t.slice(0,r+2)}${n}${t.slice(s)}`}function Ot(t){return "string"==typeof t?new $$h(T$n(t)):(t.scheme||(t.scheme=x$F.scheme),t)}function wt$2(t){return Lt.test(t)}function Ut(t,e){const n=U$o(t),r=Object.keys(n.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),n.path}function bt$2(t,e,n){const r=U$o(t),o=r.query||{};return o[e]=String(n),`${r.path}?${C$w(o)}`}function Rt$1(t,e){const n=U$o(t),r=n.query||{};for(const i in e)r[i]=e[i];const o=C$w(r);return o?`${n.path}?${o}`:n.path}function qt$1(t){if(t$1O(t))return null;const e=t.match(jt);return e?e[1]:null}const jt=/.*?\.([^\/]*)$/,Lt=/(^data:image\/svg|\.svg$)/i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$2Q="4.22",s$20={async request(e,r){var a;const{default:s}=await Promise.resolve().then(function () { return request; }),n=e.options,o=n.responseType;n.signal=null==r?void 0:r.signal,n.responseType="native"===o||"native-request-init"===o?"native-request-init":["blob","json","text"].includes(o)&&null!=(a=B$k(e.url))&&a.after?o:"array-buffer";const i=await s(e.url,n),u={data:i.data,ssl:i.ssl};switch(i.requestOptions.responseType){case"native-request-init":return delete u.data.signal,u;case"blob":u.data=await u.data.arrayBuffer();break;case"json":u.data=(new TextEncoder).encode(JSON.stringify(u.data)).buffer;break;case"text":u.data=(new TextEncoder).encode(u.data).buffer;}return {result:u,transferList:[u.data]}}};let n$2F;function o$1E(e){n$2F=e;}function i$2p(e){const t=n$2F&&n$2F.findCredential(e);return t&&t.token?bt$2(e,"token",t.token):e}s$2l("host-webworker")||(s$2l("edge")||s$2l("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$1E=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function r$1w(c){const r=M$z(c,!0);return r&&r.endsWith(".arcgis.com")&&!t$1E.includes(r)&&!c.endsWith("/sharing/rest/generateToken")}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$1D(t,i,s=!1,c){return new Promise(((d,a)=>{if(p$37(c))return void a(n$2E());let m=()=>{v(),a(new Error(`Unable to load ${i}`));},l=()=>{const e=t;v(),d(e);},u=()=>{if(!t)return;const e=t;v(),e.src="",a(n$2E());};const v=()=>{s$2l("esri-image-decode")||(t.removeEventListener("error",m),t.removeEventListener("load",l)),m=null,l=null,t=null,r$1G(c)&&c.removeEventListener("abort",u),u=null,s&&URL.revokeObjectURL(i);};r$1G(c)&&c.addEventListener("abort",u),s$2l("esri-image-decode")?t.decode().then(l,m):(t.addEventListener("error",m),t.addEventListener("load",l));}))}function n$2E(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function E$t(e,t){var r;const s=G$k(e),n=F$m(e);n||s||(e=z$q(e));const l={url:e,requestOptions:{...e$1Y(t)}};let u=B$k(e);if(u){const e=await W$9(u,l);if(null!=e)return {data:e,getHeader:F$l,requestOptions:l.requestOptions,url:l.url};u.after||u.error||(u=null);}if(e=l.url,"image"===(t=l.requestOptions).responseType){if(s$2l("host-webworker")||s$2l("host-node"))throw H$g("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),l)}else if(s)throw H$g("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),l);if("head"===t.method){if(t.body)throw H$g("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),l);if(s||n)throw H$g("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),l)}if(await A$t(),L$u)return L$u.execute(e,t);const c=new AbortController;j$M(t,(()=>c.abort()));const h={controller:c,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:u,params:l,redoRequest:!1,useIdentity:j$K.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},y=await J$c(h);return null==(r=u)||null==r.after||r.after(y),y}let L$u;const j$K=t$1K.request,U$n="FormData"in e$1Z,P$q=[499,498,403,401],D$r=["COM_0056","COM_0057","SB_0008"],_$y=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],F$l=()=>null,I$x=Symbol();function M$y(e){const t=M$z(e);t&&!E$t._corsServers.includes(t)&&E$t._corsServers.push(t);}function R$r(e){const t=M$z(e);return !t||t.endsWith(".arcgis.com")||E$t._corsServers.includes(t)||J$d(t)}function H$g(e,t,s,o){let a="Error";const i={url:s.url,requestOptions:s.requestOptions,getHeader:F$l,ssl:!1};if(t instanceof s$29)return t.details?(t.details=l$2r(t.details),t.details.url=s.url,t.details.requestOptions=s.requestOptions):t.details=i,t;if(t){const e=o&&(e=>o.headers.get(e)),r=o&&o.status,s=t.message;s&&(a=s),e&&(i.getHeader=e),i.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||r||0,i.subCode=t.subcode,i.messageCode=t.messageCode,"string"==typeof t.details?i.messages=[t.details]:i.messages=t.details,i.raw=I$x in t?t[I$x]:t;}return d$1O(t)?m$22():new s$29(e,a,i)}async function A$t(){s$2l("host-webworker")?L$u||(L$u=await import('./request.js')):E$t._abortableFetch||(E$t._abortableFetch=e$1Z.fetch.bind(e$1Z));}async function B$j(){n$2F||await import('./IdentityManager.js');}async function N$r(r){const o=r.params.url,n=r.params.requestOptions,a=r.controller.signal,i=n.body;let l=null,u=null,d=null;if(U$n&&"HTMLFormElement"in e$1Z&&(i instanceof FormData?l=i:i instanceof HTMLFormElement&&(u=i,l=new FormData(u))),"string"==typeof i&&(d=i),r.fetchOptions={cache:n.cacheBust&&!E$t._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:n.headers||{},method:"head"===n.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:a},(l||d)&&(r.fetchOptions.body=l||d),"anonymous"===n.authMode&&(r.useIdentity=!1),r.hasToken=!!(/token=/i.test(o)||n.query&&n.query.token||l&&l.get&&l.get("token")||u&&u.elements.token),!r.hasToken&&t$1K.apiKey&&r$1w(o)&&(n.query||(n.query={}),n.query.token=t$1K.apiKey,r.hasToken=!0),r.useIdentity&&!r.hasToken&&!r.credentialToken&&!$$g(o)&&!p$37(a)){let e;"immediate"===n.authMode?(await B$j(),e=await n$2F.getCredential(o,{signal:a}),r.credential=e):"no-prompt"===n.authMode?(await B$j(),e=await n$2F.getCredential(o,{prompt:!1,signal:a}).catch((()=>{})),r.credential=e):n$2F&&(e=n$2F.findCredential(o)),e&&(r.credentialToken=e.token,r.useSSL=!!e.ssl);}}function $$g(e){return _$y.some((t=>t.test(e)))}async function K$b(e){let r=e.params.url;const s=e.params.requestOptions,n=e.fetchOptions,a=F$m(r)||G$k(r),i=s.responseType||"json",l=a?0:null!=s.timeout?s.timeout:j$K.timeout;let c=!1;if(!a){e.useSSL&&(r=ut$2(r)),s.cacheBust&&"default"===n.cache&&(r=bt$2(r,"request.preventCache",Date.now()));let a={...s.query};e.credentialToken&&(a.token=e.credentialToken);let i=C$w(a);s$2l("esri-url-encodes-apostrophe")&&(i=i.replace(/'/g,"%27"));const l=r.length+1+i.length;let u;c="delete"===s.method||"post"===s.method||"put"===s.method||!!s.body||l>j$K.maxUrlLength;const d=s.useProxy||!!A$u(r);if(d){const e=q$o(r);u=e.path,!c&&u.length+1+l>j$K.maxUrlLength&&(c=!0),e.query&&(a={...e.query,...a});}if("HEAD"===n.method&&(c||d)){if(c){if(l>j$K.maxUrlLength)throw H$g("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params);throw H$g("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params)}if(d)throw H$g("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(c?(n.method="delete"===s.method?"DELETE":"put"===s.method?"PUT":"POST",s.body?r=Rt$1(r,a):(n.body=C$w(a),n.headers["Content-Type"]="application/x-www-form-urlencoded")):r=Rt$1(r,a),d&&(e.useProxy=!0,r=`${u}?${r}`),a.token&&U$n&&n.body instanceof FormData){const e=n.body;e.set?e.set("token",a.token):e.append("token",a.token);}if(s.hasOwnProperty("withCredentials"))e.withCredentials=s.withCredentials;else if(!E$u(r,x$F))if(J$d(r))e.withCredentials=!0;else if(n$2F){const s=n$2F.findServerInfo(r);s&&s.webTierAuth&&(e.withCredentials=!0);}e.withCredentials&&(n.credentials="include");}let m,f,v=0,C=!1;l>0&&(v=setTimeout((()=>{C=!0,e.controller.abort();}),l));try{if("native-request-init"===s.responseType)f=n,f.url=r;else if("image"!==s.responseType||"default"!==n.cache||"GET"!==n.method||c||G$j(s.headers)||!a&&!e.useProxy&&j$K.proxyUrl&&!R$r(r)){if(m=await E$t._abortableFetch(r,n),e.useProxy||M$y(r),"native"===s.responseType)f=m;else if("HEAD"!==n.method)if(m.ok){switch(i){case"array-buffer":f=await m.arrayBuffer();break;case"blob":case"image":f=await m.blob();break;default:f=await m.text();}if(v&&(clearTimeout(v),v=0),"json"===i||"xml"===i||"document"===i)if(f)switch(i){case"json":f=JSON.parse(f);break;case"xml":f=z$p(f,"application/xml");break;case"document":f=z$p(f,"text/html");}else f=null;if(f){if("array-buffer"===i||"blob"===i){const e=m.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(e)&&f["blob"===i?"size":"byteLength"]<=750)try{const e=await new Response(f).json();e.error&&(f=e);}catch{}}"image"===i&&f instanceof Blob&&(f=await Q$c(URL.createObjectURL(f),e,!0));}}else f=await m.text();}else f=await Q$c(r,e);}catch(L){if("AbortError"===L.name){if(C)throw new Error("Timeout exceeded");throw m$22("Request canceled")}if(!(!m&&L instanceof TypeError&&j$K.proxyUrl)||s.body||"delete"===s.method||"head"===s.method||"post"===s.method||"put"===s.method||e.useProxy||R$r(r))throw L;e.redoRequest=!0,S$H({proxyUrl:j$K.proxyUrl,urlPrefix:M$z(r)});}finally{v&&clearTimeout(v);}return [m,f]}async function W$9(e,t){if(null!=e.responseData)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let o,n;try{n=await e.before(t);}catch(s){o=H$g("request:interceptor",s,t);}if((n instanceof Error||n instanceof s$29)&&(o=H$g("request:interceptor",n,t)),o)throw e.error&&e.error(o),o;return n}}function G$j(e){if(e)for(const t of Object.getOwnPropertyNames(e))if(e[t])return !0;return !1}function z$p(e,t){let r;try{r=(new DOMParser).parseFromString(e,t);}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function J$c(e){var r,s;let o,n;await N$r(e);try{do{[o,n]=await K$b(e);}while(!await X$c(e,o,n))}catch(l){const t=H$g("request:server",l,e.params,o);throw t.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(t),t}const a=e.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(a)&&!e.hasToken&&!e.credentialToken&&null!=(r=n)&&null!=(s=r.user)&&s.username&&!J$d(a)){const e=M$z(a,!0);e&&j$K.trustedServers.push(e);}const i=e.credential;if(i&&n$2F){const e=n$2F.findServerInfo(i.server);let r=e&&e.owningSystemUrl;if(r){r=r.replace(/\/?$/,"/sharing");const e=n$2F.findCredential(r,i.userId);e&&-1===n$2F._getIdenticalSvcIdx(r,e)&&e.resources.unshift(r);}}return {data:n,getHeader:o?e=>o.headers.get(e):F$l,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function X$c(e,r,s){if(e.redoRequest)return e.redoRequest=!1,!1;const o=e.params.requestOptions;if(!r||"native"===o.responseType||"native-request-init"===o.responseType)return !0;let n,a,i,l;if(!r.ok)throw n=new Error(`Unable to load ${r.url} status: ${r.status}`),n[I$x]=s,n;null!=s&&s.error&&(n=s.error),n&&(a=Number(n.code),i=n.hasOwnProperty("subcode")?Number(n.subcode):null,l=n.messageCode,l=l&&l.toUpperCase());const u=o.authMode;if(403===a&&(4===i||n.message&&n.message.toLowerCase().indexOf("ssl")>-1&&-1===n.message.toLowerCase().indexOf("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&("no-prompt"!==u||498===a)&&-1!==P$q.indexOf(a)&&!$$g(e.params.url)&&(403!==a||-1===D$r.indexOf(l)&&(null==i||2===i&&e.credentialToken))){await B$j();try{const r=await n$2F.getCredential(e.params.url,{error:H$g("request:server",n,e.params),prompt:"no-prompt"!==u,signal:e.controller.signal,token:e.credentialToken});return e.credential=r,e.credentialToken=r.token,e.useSSL=e.useSSL||r.ssl,!1}catch(c){if("no-prompt"===u)return e.credential=null,e.credentialToken=null,!1;n=c;}}if(n)throw n;return !0}function Q$c(e,t,r=!1){const s=t.controller.signal,o=new Image;return t.withCredentials?o.crossOrigin="use-credentials":o.crossOrigin="anonymous",o.alt="",o.src=e,t$1D(o,e,r,s)}E$t._abortableFetch=null,E$t._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];

const request = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': E$t
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function s$1$(e,n,r,s){const a=n.exec(r);if(!a)throw new s$29("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${n}"`);const c=a[1]?`${a[1]}/`:"",l=a[2],h=h$1w(s),u=`${c}${l}.json`,w=h?`${c}${l}_${h}.json`:u;let f;try{f=await i$2o(e(w));}catch(d){if(w===u)throw new s$29("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:d});try{f=await i$2o(e(u));}catch(d){throw new s$29("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:d})}}return f}async function i$2o(t){if(r$1G(l$2i.fetchBundleAsset))return l$2i.fetchBundleAsset(t);const n=await E$t(t,{responseType:"text"});return JSON.parse(n.data)}class a$2P{constructor({base:e="",pattern:t,location:r=new URL(window.location.href)}){let o;o="string"==typeof r?e=>new URL(e,new URL(r,e$1Z.location)).href:r instanceof URL?e=>new URL(e,r).href:r,this.pattern="string"==typeof t?new RegExp(`^${t}`):t,this.getAssetUrl=o,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`);}fetchMessageBundle(e,t){return s$1$(this.getAssetUrl,this.matcher,e,t)}}function c$31(e){return new a$2P(e)}const l$2i={};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$2n=s$2h.getLogger("esri.assets");function a$2O(t){if(!t$1K.assetsPath)throw i$2n.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new s$29("assets:path-not-set","config.assetsPath is not set");return D$s(t$1K.assetsPath,t)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
l$2k(c$31({pattern:"esri/",location:a$2O}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$1K=new Set;function i$2m(n,i,o=!1){o&&e$1K.has(i)||(o&&e$1K.add(i),n.warn(`🛑 DEPRECATED - ${i}`));}function t$1C(e,i,o={}){if(s$2l("esri-deprecation-warnings")){const{moduleName:n}=o;s$1_(e,`Function: ${(n?n+"::":"")+i+"()"}`,o);}}function r$1v(e,i,o={}){if(s$2l("esri-deprecation-warnings")){const{moduleName:n}=o;s$1_(e,`Property: ${(n?n+"::":"")+i}`,o);}}function s$1_(e,o,t={}){if(s$2l("esri-deprecation-warnings")){const{replacement:n,version:r,see:s,warnOnce:a}=t;let c=o;n&&(c+=`\n\t🛠️ Replacement: ${n}`),r&&(c+=`\n\t⚙️ Version: ${r}`),s&&(c+=`\n\t🔗 See ${s} for more details.`),i$2m(e,c,a);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1J(e){return "string"==typeof e?document.getElementById(e):e}function t$1B(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild);}function o$1D(e,t){const n=t.parentNode;n&&n.insertBefore(e,t);}function r$1u(e,t){for(;;){const n=e.firstChild;if(!n)break;t.appendChild(n);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$1A(t){return t&&t.release&&"function"==typeof t.release}function i$2l(t){return t&&t.acquire&&"function"==typeof t.acquire}class e$1I{constructor(t,i,e,o=1,s=0){if(this.ctor=t,this.acquireFunction=i,this.releaseFunction=e,this.allocationSize=o,this._pool=new Array(s),this._initialSize=s,this.ctor)for(let n=0;n<s;n++)this._pool[n]=new this.ctor;this.allocationSize=Math.max(o,1);}destroy(){this.prune(0);}acquire(...t){let o;if(e$1I.test.disabled)o=new this.ctor;else {if(0===this._pool.length){const t=this.allocationSize;for(let i=0;i<t;i++)this._pool[i]=new this.ctor;}o=this._pool.pop();}return this.acquireFunction?this.acquireFunction(o,...t):i$2l(o)&&o.acquire(...t),o}release(i){i&&!e$1I.test.disabled&&(this.releaseFunction?this.releaseFunction(i):t$1A(i)&&i.release(),this._pool.push(i));}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const t=this._pool[i];this._dispose(t);}this._pool.length=t;}}_dispose(t){t.dispose&&"function"==typeof t.dispose&&t.dispose();}}e$1I.test={disabled:!1};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$1Z{constructor(r,s){this._observers=r,this._observer=s;}remove(){C$z(this._observers,this._observer);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class n$2D{constructor(s,t,e){this.properties=s,this.propertyName=t,this.metadata=e,this._observers=null,this._accessed=null,this._handles=null,this.flags=1|(e.nonNullable?8:0)|(e.hasOwnProperty("value")?16:0)|(void 0===e.get?32:0)|(void 0===e.dependsOn?64:0);}destroy(){this._accessed=null,this._observers=null,this._clearObservationHandles();}getComputed(){i$2z(this);const i=this.properties.store,n=this.propertyName,l=this.flags,r=i.get(n);if(4&l)return r;if(1&~l&&i.has(n))return r;this.flags|=4;const h=this.properties.host;let o;64&l?o=a$2$(this,this.metadata.get,h):(h$1A(h,this),o=this.metadata.get.call(h)),i.set(n,o,1);const a=i.get(n);return a===r?this.flags&=-2:this.commit(),this.flags&=-5,a}onObservableAccessed(s){s!==this&&(null===this._accessed&&(this._accessed=[]),this._accessed.includes(s)||this._accessed.push(s));}onTrackingEnd(){this._clearObservationHandles(),this.flags|=32;const s=this._accessed;if(null===s)return;let t=this._handles;null===t&&(t=this._handles=[]);for(let e=0;e<s.length;++e)t.push(s[e].observe(this));s.length=0;}observe(s){return null===this._observers&&(this._observers=[]),this._observers.includes(s)||this._observers.push(s),new s$1Z(this._observers,s)}notifyChange(){this.onInvalidated(),this.onCommitted();}invalidate(){this.onInvalidated();}onInvalidated(){2&~this.flags&&(this.flags|=1);const s=this._observers;if(null!==s)for(let t=0;t<s.length;++t)s[t].onInvalidated();}commit(){this.flags&=-2,this.onCommitted();}onCommitted(){if(null===this._observers)return;const s=this._observers.slice();for(let t=0;t<s.length;++t)s[t].onCommitted();}_clearObservationHandles(){const s=this._handles;if(null!==s){for(let t=0;t<s.length;++t)s[t].remove();s.length=0;}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$1t=7;function t$1z(e){switch(e){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"user":return 6}}function n$2C(r){switch(r){case 0:return "defaults";case 2:return "service";case 3:return "portal-item";case 4:return "web-scene";case 5:return "web-map";case 6:return "user"}return q$q(void 0)}function c$30(e){return n$2C(e)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$1Y{constructor(){this._values=new Map;}clone(t){const r=new s$1Y;return this._values.forEach(((s,a)=>{t&&t.has(a)||r.set(a,l$2r(s));})),r}get(e){return this._values.get(e)}originOf(){return 6}keys(){return [...this._values.keys()]}set(e,s){this._values.set(e,s);}delete(e){this._values.delete(e);}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function p$35(t,e,s){return void 0!==t}function f$1s(t,e,s,i){return void 0!==t&&(!(null==s&&8&t.flags)||(!1))}function u$20(t){return t&&"function"==typeof t.destroy}s$2h.getLogger("esri.core.accessorSupport.Properties");class g$13{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=0,this.store=new s$1Y,this._origin=6;const e=this.host.constructor.__accessorMetadata__,s=e.properties;for(const r in s){const t=new n$2D(this,r,s[r]);this.properties.set(r,t);}this.metadatas=s,this._autoDestroy=e.autoDestroy;}initialize(){this.lifecycle=1;}constructed(){this.lifecycle=2;}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,e]of this.properties){const s=this.internalGet(t);s&&u$20(s)&&(s.destroy(),8&~e.flags&&this._internalSet(e,null)),e.destroy();}else for(const[t,e]of this.properties)e.destroy();}get initialized(){return 0!==this.lifecycle}get(t){const e=this.properties.get(t);if(e.metadata.get)return e.getComputed();i$2z(e);const s=this.store;return s.has(t)?s.get(t):e.metadata.value}originOf(t){const e=this.store.originOf(t);if(void 0===e){const e=this.properties.get(t);if(void 0!==e&&16&e.flags)return "defaults"}return n$2C(e)}has(t){return !!this.properties.has(t)&&this.store.has(t)}keys(){return [...this.properties.keys()]}internalGet(t){const e=this.properties.get(t);if(p$35(e))return this.store.has(t)?this.store.get(t):e.metadata.value}internalSet(t,e){const s=this.properties.get(t);p$35(s)&&this._internalSet(s,e);}getDependsInfo(t,e,s){const r=this.properties.get(e);if(!p$35(r))return "";const o=new Set,n=a$2$({onObservableAccessed:t=>o.add(t),onTrackingEnd:()=>{}},(()=>{var e;return null==(e=r.metadata.get)?void 0:e.call(t)}));let a=`${s}${t.declaredClass.split(".").pop()}.${e}: ${n}\n`;if(0===o.size)return a;s+="  ";for(const c of o){if(!(c instanceof n$2D))continue;const t=c.properties.host,e=c.propertyName,r=e$1T(t);a+=r?r.getDependsInfo(t,e,s):`${s}${e}: undefined\n`;}return a}setAtOrigin(t,e,s){const i=this.properties.get(t);if(p$35(i))return this._setAtOrigin(i,e,s)}isOverridden(t){const e=this.properties.get(t);return void 0!==e&&!!(2&e.flags)}clearOverride(t){const e=this.properties.get(t);void 0!==e&&2&e.flags&&(e.flags&=-3,e.notifyChange());}override(t,e){const s=this.properties.get(t);if(!f$1s(s,t,e))return;const i=s.metadata.cast;if(i){const t=this._cast(i,e),{valid:s,value:r}=t;if(m$1$.release(t),!s)return;e=r;}s.flags|=2,this._internalSet(s,e);}set(t,e){const s=this.properties.get(t);if(!f$1s(s,t,e))return;const i=s.metadata.cast;if(i){const t=this._cast(i,e),{valid:s,value:r}=t;if(m$1$.release(t),!s)return;e=r;}const r=s.metadata.set;r?r.call(this.host,e):this._internalSet(s,e);}setDefaultOrigin(t){this._origin=t$1z(t);}getDefaultOrigin(){return n$2C(this._origin)}notifyChange(t){const e=this.properties.get(t);void 0!==e&&e.notifyChange();}invalidate(t){const e=this.properties.get(t);void 0!==e&&e.invalidate();}commit(t){const e=this.properties.get(t);void 0!==e&&e.commit();}_internalSet(t,e){const s=0!==this.lifecycle?this._origin:0;this._setAtOrigin(t,e,s);}_setAtOrigin(e,s,i){const r=this.store,o=e.propertyName;r.has(o,i)&&m$29(s,r.get(o))&&2&~e.flags&&i===r.originOf(o)||(e.invalidate(),r.set(o,s,i),e.commit(),d$1R(this.host,e));}_cast(t,e){const s=m$1$.acquire();return s.valid=!0,s.value=e,t&&(s.value=t.call(this.host,e,s)),s}}class d$1L{constructor(){this.value=null,this.valid=!0;}acquire(){this.valid=!0;}release(){this.value=null;}}const m$1$=new e$1I(d$1L);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$1s(e){e.length=0;}class t$1y{constructor(t=50,o=50){this._pool=new e$1I(Array,void 0,r$1s,o,t);}acquire(){return this._pool.acquire()}release(e){this._pool.release(e);}prune(){this._pool.prune(0);}static acquire(){return o$1C.acquire()}static release(e){return o$1C.release(e)}static prune(){o$1C.prune();}}const o$1C=new t$1y(100);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$1x extends e$1I{constructor(){super(...arguments),this._set=new Set;}destroy(){super.destroy(),this._set=w$Z();}acquire(...e){const s=super.acquire(...e);return this._set.delete(s),s}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e));}_dispose(e){this._set.delete(e),super._dispose(e);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1H(){return e$1Z.queueMicrotask?e$1Z.queueMicrotask:e=>{e$1Z.Promise.resolve().then(e);}}const t$1w=e$1H(),n$2B=[];function r$1r(o){n$2B.push(o),1===n$2B.length&&t$1w((()=>{const o=n$2B.slice();n$2B.length=0;for(const e of o)e();}));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$1v=29;class e$1G{constructor(e,s=t$1v){this.name=e,this._counter=0,this._items=new Array(s);}record(t){this._items[++this._counter%this._items.length]=t;}get median(){return this._items.slice().sort(((t,e)=>t-e))[Math.floor(this._items.length/2)]}get average(){return this._items.reduce(((t,e)=>t+e),0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var o$1B;!function(o){const t=(o,t,n,e)=>{let i=t,c=t;const l=n>>>1,r=o[i-1];for(;c<=l;){c=i<<1,c<n&&e(o[c-1],o[c])<0&&++c;const t=o[c-1];if(e(t,r)<=0)break;o[i-1]=t,i=c;}o[i-1]=r;},n=(o,t)=>o<t?-1:o>t?1:0;function e(o,e,i,c){void 0===e&&(e=0),void 0===i&&(i=o.length),void 0===c&&(c=n);for(let n=i>>>1;n>e;n--)t(o,n,i,c);const l=e+1;for(let n=i-1;n>e;n--){const i=o[e];o[e]=o[n],o[n]=i,t(o,l,n,c);}}function*i(o,e,i,c){void 0===e&&(e=0),void 0===i&&(i=o.length),void 0===c&&(c=n);for(let n=i>>>1;n>e;n--)t(o,n,i,c),yield;const l=e+1;for(let n=i-1;n>e;n--){const i=o[e];o[e]=o[n],o[n]=i,t(o,l,n,c),yield;}}o.sort=e,o.iterableSort=i;}(o$1B||(o$1B={}));const t$1u=o$1B;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$1F=1.5,l$2h=1.1;class n$2A{constructor(h){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new w$Y,h&&(h.initialSize&&(this.data=new Array(h.initialSize)),h.allocator&&(this._allocator=h.allocator),void 0!==h.deallocator&&(this._deallocator=h.deallocator),h.shrink&&(this._shrink=()=>r$1q(this)));}toArray(){return this.data.slice(0,this.length)}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t;}else {if(this._deallocator)for(let h=t;h<this._length;++h)this.data[h]=this._deallocator(this.data[h]);this._length=t,this._shrink();}}clear(){this.length=0;}prune(){this.clear(),this.data=[];}push(t){this.data[this._length++]=t;}pushArray(t,h=t.length){for(let i=0;i<h;i++)this.data[this._length++]=t[i];}fill(t,h){for(let i=0;i<h;i++)this.data[this._length++]=t;}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return ++this._length,t}unshift(t){this.data.unshift(t),this._length++,r$1q(this);}pop(){if(0===this.length)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=b$_(this.data,t,this.length,this._hint);if(-1!==i)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){const h=v$X(this.data,t,this.length,this._hint);return void 0!==h&&(this.length=this.length-1),this._shrink(),h}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,h=t.length,i){this.length=O$s(this.data,t,this.length,h,this._hint,i),this._shrink();}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(t,h){t>=this.length||h>=this.length||t===h||([this.data[t],this.data[h]]=[this.data[h],this.data[t]]);}sort(t){t$1u.sort(this.data,0,this.length,t);}iterableSort(t){return t$1u.iterableSort(this.data,0,this.length,t)}some(t,h){for(let i=0;i<this.length;++i)if(t.call(h,this.data[i],i,this.data))return !0;return !1}filterInPlace(t,h){let i=0;for(let s=0;s<this._length;++s){const a=this.data[s];t.call(h,a,s,this.data)&&(this.data[s]=this.data[i],this.data[i]=a,i++);}if(this._deallocator)for(let s=i;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=i,this._shrink(),this}forAll(t,h){const i=this.length,s=this.data;for(let a=0;a<i;++a)t.call(h,s[a],a,s);}forEach(t,h){for(let i=0;i<this.length;++i)t.call(h,this.data[i],i,this.data);}map(t,h){const i=new Array(this.length);for(let s=0;s<this.length;++s)i[s]=t.call(h,this.data[s],s,this.data);return i}reduce(t,h){let i=h;for(let s=0;s<this.length;++s)i=t(i,this.data[s],s,this.data);return i}has(t){const h=this.length,i=this.data;for(let s=0;s<h;++s)if(i[s]===t)return !0;return !1}}function r$1q(t){t.data.length>e$1F*t.length&&(t.data.length=Math.floor(t.length*l$2h));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2z(n){return n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class c$2${constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1;}}class m$1_{constructor(e){this.callback=e,this.isActive=!0;}remove(){this.isActive=!1;}}let l$2g=0;const u$1$={time:n$2z(0),deltaTime:n$2z(0),elapsedFrameTime:n$2z(0),frameDuration:n$2z(0)},f$1r=["prepare","preRender","render","postRender","update"],h$1u=[],d$1K=new n$2A;class w$T{constructor(e){this._task=e;}remove(){this._task.removed=!0;}pause(){this._task.paused=!0;}resume(){this._task.paused=!1;}}const k$B={frameTasks:d$1K,willDispatch:!1,clearFrameTasks:j$J,dispatch:b$W,executeFrameTasks:D$q};function v$R(e){const r=new m$1_(e);return h$1u.push(r),k$B.willDispatch||(k$B.willDispatch=!0,r$1r(b$W)),r}function A$s(e){const t=new c$2$(e);return d$1K.push(t),null==T$m&&(l$2g=performance.now(),T$m=requestAnimationFrame(x$E)),new w$T(t)}let T$m=null;function j$J(e=!1){d$1K.forAll((e=>{e.removed=!0;})),e&&_$x();}function x$E(){const e=performance.now();T$m=null,T$m=d$1K.length>0?requestAnimationFrame(x$E):null,k$B.executeFrameTasks(e);}function D$q(e){const t=n$2z(e-l$2g);l$2g=e;const r=1e3/60,s=Math.max(0,t-r);for(let o=0;o<f$1r.length;o++){const n=performance.now(),a=f$1r[o];d$1K.forAll((n=>{var c;if(n.paused||n.removed)return;0===o&&n.ticks++;n.phases[a]&&(u$1$.time=e,u$1$.deltaTime=0===n.ticks?n$2z(0):t,u$1$.elapsedFrameTime=n$2z(performance.now()-e),u$1$.frameDuration=n$2z(r-s),null==(c=n.phases[a])||c.call(n,u$1$));})),M$x[o].record(performance.now()-n);}_$x(),q$n.record(performance.now()-e);}const g$12=new n$2A;function _$x(){d$1K.forAll((e=>{e.removed&&g$12.push(e);})),d$1K.removeUnorderedMany(g$12.data,g$12.length),g$12.clear();}function b$W(){for(;h$1u.length;){const t=q$q(h$1u.shift());t.isActive&&t.callback();}k$B.willDispatch=!1;}function y$1m(e=1,r){const s=B$l(),i=()=>{p$37(r)?s.reject(m$22()):0===e?s():(--e,r$1r((()=>i())));};return i(),s.promise}const M$x=f$1r.map((e=>new e$1G(e))),q$n=new e$1G("total");

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$1t=0;function e$1E(){return ++t$1t}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$1X{constructor(s){this._notify=s,this._accessed=[],this._handles=[],this._invalidCount=0;}destroy(){this._accessed.length=0,this.clear();}onInvalidated(){this._invalidCount++;}onCommitted(){const s=this._invalidCount;if(1===s)return this._invalidCount=0,void this._notify();this._invalidCount=s>0?s-1:0;}onObservableAccessed(s){this._accessed.includes(s)||this._accessed.push(s);}onTrackingEnd(){const s=this._handles,t=this._accessed;for(let e=0;e<t.length;++e)s.push(t[e].observe(this));t.length=0;}clear(){const s=this._handles;for(let t=0;t<s.length;++t)s[t].remove();s.length=0;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let r$1p=!1;const e$1D=[];function o$1A(e,o){let u=new s$1X(s),l=null,f=!1;function s(){if(!u||f)return;if(r$1p)return void i$2k(s);const t=l;u.clear(),r$1p=!0,f=!0,l=a$2$(u,e),f=!1,r$1p=!1,o(l,t),c$2_();}function m(){u&&(u.destroy(),u=null,l=null);}return f=!0,l=a$2$(u,e),f=!1,{remove:m}}function u$1_(r,e){let o=new s$1X(l),u=null;function l(){e(u,c);}function i(){o&&(o.destroy(),o=null),u=null;}function c(){return o?(o.clear(),u=a$2$(o,r),u):null}return c(),{remove:i}}function l$2f(e){let o=new s$1X(l),u=!1;function l(){o&&!u&&(r$1p?i$2k(l):(o.clear(),r$1p=!0,u=!0,a$2$(o,e),u=!1,r$1p=!1,c$2_()));}function f(){o&&(o.destroy(),o=null);}return u=!0,a$2$(o,e),u=!1,{remove:f}}function i$2k(n){e$1D.includes(n)||e$1D.unshift(n);}function c$2_(){for(;e$1D.length;)e$1D.pop()();}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class d$1J{constructor(){this.uid=e$1E(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null;}static acquireUntracked(e,r,o,l,i){return this.pool.acquire(0,e,r,o,l,i,m$29)}static acquireTracked(e,t,r,o){return this.pool.acquire(1,e,t,r,null,null,o)}notify(e,t){0===this.type?this.callback.call(this.target,e,t,this.path,this.target):this.callback.call(null,e,t);}acquire(e,t,r,o,l,n,s){this.uid=e$1E(),this.removed=!1,this.type=e,this.oldValue=t,this.callback=r,this.getValue=o,this.target=l,this.path=n,this.equals=s;}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=e$1E(),this.removed=!0;}}d$1J.pool=new t$1x(d$1J);const h$1t=new t$1y,f$1q=new Set;let m$1Z;function p$34(e){f$1q.delete(e),f$1q.add(e),m$1Z||(m$1Z=v$R(q$m));}function v$Q(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t));}function _$w(e){for(const t of f$1q.values())t.target===e&&(t.removed=!0);}function q$m(){let e=10;for(;m$1Z&&e--;){m$1Z=null;const e=j$I(),t=h$1t.acquire();for(const r of e){const e=r.uid;v$Q(r),e===r.uid&&r.removed&&t.push(r);}for(const r of f$1q)r.removed&&(t.push(r),f$1q.delete(r));for(const r of t)d$1J.pool.release(r);h$1t.release(t),h$1t.release(e),k$A.forEach((e=>e()));}}function j$I(){const e=h$1t.acquire();e.length=f$1q.size;let t=0;for(const r of f$1q)e[t]=r,++t;return f$1q.clear(),e}const k$A=new Set;function V$d(e,t,r){let o=y$1s(e,t,r,((e,t,r)=>{let l,i,s=u$1_((()=>u$2b(e,t)),((n,s)=>{e.__accessor__.destroyed||l&&l.uid!==i?o.remove():(l||(l=d$1J.acquireUntracked(n,r,s,e,t),i=l.uid),p$34(l));}));return {remove:h$1C((()=>{s.remove(),l&&(l.uid!==i||l.removed||(l.removed=!0,p$34(l)),l=null),o=s=null;}))}}));return o}function b$V(e,r,o){const l=y$1s(e,r,o,((e,r,o)=>{let i=!1;return o$1A((()=>u$2b(e,r)),((n,s)=>{e.__accessor__.destroyed?l.remove():i||(i=!0,m$29(s,n)||o.call(e,n,s,r,e),i=!1);}))}));return l}function w$S(e,t,r,o=!1){return !e.__accessor__||e.__accessor__.destroyed?{remove(){}}:o?b$V(e,t,r):V$d(e,t,r)}function U$m(e,t,r){let o,l,i=u$1_(e,((e,n)=>{o&&o.uid!==l?i.remove():(o||(o=d$1J.acquireTracked(e,t,n,r),l=o.uid),p$34(o));}));return {remove:h$1C((()=>{i.remove(),o&&(o.uid!==l||o.removed||(o.removed=!0,p$34(o)),o=null),i=null;}))}}function S$G(e,t,r){let o=!1;return o$1A(e,((e,l)=>{o||(o=!0,r(l,e)||t(e,l),o=!1);}))}function A$r(e,r,o=!1,l=m$29){return o?S$G(e,r,l):U$m(e,r,l)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function u$1Z(t){if(null==t)return {value:t};if(Array.isArray(t))return {type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor&&t.constructor.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return {type:Boolean,value:t};case"string":return {type:String,value:t};case"number":return {type:Number,value:t};case"function":return {type:t,value:null};default:return}}class p$33{constructor(...t){if(this.constructor===p$33)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new g$13(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t));}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:e,constructor:o}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const c=this;class i extends c{constructor(...t){super(...t),this.inherited=null,o&&o.apply(this,t);}}n$2K(i.prototype);for(const s in t){const r=t[s];i.prototype[s]="function"==typeof r?function(...t){const e=this.inherited;let o;this.inherited=function(...t){if(c.prototype[s])return c.prototype[s].apply(this,t)};try{o=r.apply(this,t);}catch(i){throw this.inherited=e,i}return this.inherited=e,o}:t[s];}for(const s in r){const t=u$1Z(r[s]);d$1S(t)(i.prototype,s);}return i$2w(e)(i)}postscript(t){const r=this.__accessor__,e=r.ctorArgs||t;r.initialize(),e&&(this.set(e),r.ctorArgs=null),r.constructed(),this.initialize();}initialize(){}destroy(){this.destroyed||(_$w(this),this.__accessor__.destroy());}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t);}get(t){return o$1S(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}isInstanceOf(e){return t$1C(s$2h.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof e}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return t$1I(this,t,r),this}watch(t,r,e){return w$S(this,t,r,e)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,r){return this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t);}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class i$2j{constructor(){this._emitter=new i$2j.EventEmitter(this);}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}}!function(n){class o{constructor(t=null){this.target=t,this._listenersMap=null;}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null;}emit(t,e){const s=this._listenersMap&&this._listenersMap.get(t);if(!s)return !1;const r=this.target||this;return [...s].forEach((t=>{t.call(r,e);})),s.length>0}on(t,e){if(Array.isArray(t)){const r=t.map((t=>this.on(t,e)));return r$1C(r)}if(t.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const r=this._listenersMap.get(t)||[];return r.push(e),this._listenersMap.set(t,r),{remove:()=>{const s=this._listenersMap&&this._listenersMap.get(t)||[],r=s.indexOf(e);r>=0&&s.splice(r,1);}}}once(t,e){const s=this.on(t,(t=>{s.remove(),e.call(null,t);}));return s}hasEventListener(t){const e=this._listenersMap&&this._listenersMap.get(t);return null!=e&&e.length>0}}n.EventEmitter=o,n.EventedMixin=e=>{let s=class extends e{constructor(){super(...arguments),this._emitter=new o;}destroy(){this._emitter.clear();}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}};return s=e$1_([i$2w("esri.core.Evented")],s),s};let h=class extends p$33{constructor(){super(...arguments),this._emitter=new i$2j.EventEmitter(this);}destroy(){this._emitter.clear();}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}};h=e$1_([i$2w("esri.core.Evented")],h),n.EventedAccessor=h;}(i$2j||(i$2j={}));const n$2y=i$2j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2x(n){return (r,t)=>{r[t]=n;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$1C{constructor(){this._observers=[];}observe(e){return this._observers.includes(e)||this._observers.push(e),new s$1Z(this._observers,e)}notify(){const s=this._observers.slice();for(let e=0;e<s.length;++e){const r=s[e];r.onInvalidated(),r.onCommitted();}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$1Y;class g$11{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0;}preventDefault(){this.cancellable&&(this.defaultPrevented=!0);}reset(e){this.defaultPrevented=!1,this.item=e;}}const p$32=new e$1I(g$11,void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1;})),d$1I=()=>{};function b$U(e){return e?e instanceof L$t?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function v$P(e){if(e&&e.length)return e[0]}function y$1l(e,t,s,i){const r=Math.min(e.length-s,t.length-i);let n=0;for(;n<r&&e[s+n]===t[i+n];)n++;return n}function C$v(e,t,s,i){t&&t.forEach(((t,r,n)=>{e.push(t),C$v(e,s.call(i,t,r,n),s,i);}));}const A$q=new Set,x$D=new Set,E$s=new Set,j$H=new Map;let B$i=0,L$t=u$1Y=class extends n$2y.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new e$1C,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:B$i++});}static isCollection(e){return null!=e&&e instanceof u$1Y}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof u$1Y?{items:e}:e:{}}destroy(){this.removeAll();}*[Symbol.iterator](){yield*this.items;}get items(){return i$2z(this._observable),this._items}set items(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,...b$U(e)),this._emitAfterChanges(1));}hasEventListener(e){return "change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if("change"===e){const e=this._chgListeners,s={removed:!1,callback:t};return e.push(s),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=d$1I,s.removed=!0,e.splice(e.indexOf(s),1);}}}return this._emitter.on(e,t)}once(e,t){const s=this.on(e,t);return {remove(){s.remove();}}}add(e,t){if(i$2z(this._observable),this._emitBeforeChanges(1))return this;const s=this.getNextIndex(null!=t?t:null);return this._splice(s,0,e),this._emitAfterChanges(1),this}addMany(e,t=this._items.length){if(i$2z(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(1))return this;const s=this.getNextIndex(t);return this._splice(s,0,...b$U(e)),this._emitAfterChanges(1),this}removeAll(){if(i$2z(this._observable),!this.length||this._emitBeforeChanges(2))return [];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(2),e}clone(){return i$2z(this._observable),this._createNewInstance({items:this._items.map(l$2r)})}concat(...e){i$2z(this._observable);const t=e.map(b$U);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(i$2z(this._observable),!this.length||this._emitBeforeChanges(2))return;const s=q$q(this._splice(0,this.length)),i=s.length;for(let r=0;r<i;r++)e.call(t,s[r],r,s);this._emitAfterChanges(2);}every(e,t){return i$2z(this._observable),this._items.every(e,t)}filter(e,t){let s;return i$2z(this._observable),s=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:s})}find(e,t){return i$2z(this._observable),this._items.find(e,t)}findIndex(e,t){return i$2z(this._observable),this._items.findIndex(e,t)}flatten(e,t){i$2z(this._observable);const s=[];return C$v(s,this,e,t),new u$1Y(s)}forEach(e,t){return i$2z(this._observable),this._items.forEach(e,t)}getItemAt(e){return i$2z(this._observable),this._items[e]}getNextIndex(e){i$2z(this._observable);const t=this.length;return (e=null==e?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return i$2z(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return i$2z(this._observable),this._items.indexOf(e,t)}join(e=","){return i$2z(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return i$2z(this._observable),this._items.lastIndexOf(e,t)}map(e,t){i$2z(this._observable);const s=this._items.map(e,t);return new u$1Y({items:s})}reorder(e,t=this.length-1){i$2z(this._observable);const s=this.indexOf(e);if(-1!==s){if(t<0?t=0:t>=this.length&&(t=this.length-1),s!==t){if(this._emitBeforeChanges(4))return e;this._splice(s,1),this._splice(t,0,e),this._emitAfterChanges(4);}return e}}pop(){if(i$2z(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=v$P(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}push(...e){return i$2z(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,...e),this._emitAfterChanges(1)),this.length}reduce(e,t){i$2z(this._observable);const s=this._items;return 2===arguments.length?s.reduce(e,t):s.reduce(e)}reduceRight(e,t){i$2z(this._observable);const s=this._items;return 2===arguments.length?s.reduceRight(e,t):s.reduceRight(e)}remove(e){return i$2z(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(i$2z(this._observable),e<0||e>=this.length||this._emitBeforeChanges(2))return;const t=v$P(this._splice(e,1));return this._emitAfterChanges(2),t}removeMany(e){if(i$2z(this._observable),!e||!e.length||this._emitBeforeChanges(2))return [];const t=e instanceof u$1Y?e.toArray():e,s=this._items,i=[],r=t.length;for(let n=0;n<r;n++){const e=t[n],r=s.indexOf(e);if(r>-1){const e=1+y$1l(t,s,n+1,r+1),h=this._splice(r,e);h&&h.length>0&&i.push.apply(i,h),n+=e-1;}}return this._emitAfterChanges(2),i}reverse(){if(i$2z(this._observable),this._emitBeforeChanges(4))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,...e)),this._emitAfterChanges(4),this}shift(){if(i$2z(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=v$P(this._splice(0,1));return this._emitAfterChanges(2),e}slice(e=0,t=this.length){return i$2z(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return i$2z(this._observable),this._items.some(e,t)}sort(e){if(i$2z(this._observable),!this.length||this._emitBeforeChanges(4))return this;const t=q$q(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice(0,0,...t),this._emitAfterChanges(4),this}splice(e,t,...s){i$2z(this._observable);const i=(t?2:0)|(s.length?1:0);if(this._emitBeforeChanges(i))return [];const r=this._splice(e,t,...s)||[];return this._emitAfterChanges(i),r}toArray(){return i$2z(this._observable),this._items.slice()}toJSON(){return i$2z(this._observable),this.toArray()}toLocaleString(){return i$2z(this._observable),this._items.toLocaleString()}toString(){return i$2z(this._observable),this._items.toString()}unshift(...e){return i$2z(this._observable),!e.length||this._emitBeforeChanges(1)||(this._splice(0,0,...e),this._emitAfterChanges(1)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,...s){const i=this._items,r=this.itemType;let n,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=v$R((()=>this._dispatchChange()))),t){if(o=i.splice(e,t),this.hasEventListener("before-remove")){const t=p$32.acquire();t.target=this,t.cancellable=!0;for(let s=0,r=o.length;s<r;s++)n=o[s],t.reset(n),this.emit("before-remove",t),t.defaultPrevented&&(o.splice(s,1),i.splice(e,0,n),e+=1,s-=1,r-=1);p$32.release(t);}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=p$32.acquire();e.target=this,e.cancellable=!1;const t=o.length;for(let s=0;s<t;s++)e.reset(o[s]),this.emit("after-remove",e);p$32.release(e);}}if(s&&s.length){if(r){const e=[];for(const t of s){const s=r.ensureType(t);null==s&&null!=t||e.push(s);}s=e;}const t=this.hasEventListener("before-add"),n=this.hasEventListener("after-add"),h=e===this.length;if(t||n){const r=p$32.acquire();r.target=this,r.cancellable=!0;const o=p$32.acquire();o.target=this,o.cancellable=!1;for(const l of s)t?(r.reset(l),this.emit("before-add",r),r.defaultPrevented||(h?i.push(l):i.splice(e++,0,l),this._set("length",i.length),n&&(o.reset(l),this.emit("after-add",o)))):(h?i.push(l):i.splice(e++,0,l),this._set("length",i.length),o.reset(l),this.emit("after-add",o));p$32.release(o),p$32.release(r);}else {if(h)for(const e of s)i.push(e);else i.splice(e,0,...s);this._set("length",i.length);}}return (s&&s.length||o&&o.length)&&this._notifyChangeEvent(s,o),o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const s=p$32.acquire();s.target=this,s.cancellable=!0,s.type=e,this.emit("before-changes",s),t=s.defaultPrevented,p$32.release(s);}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=p$32.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),p$32.release(t);}this._observable.notify();}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t});}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const s of e){const e=s.changes;A$q.clear(),x$D.clear(),E$s.clear();for(const{added:t,removed:s}of e){if(t)if(0===E$s.size&&0===x$D.size)for(const e of t)A$q.add(e);else for(const e of t)x$D.has(e)?(E$s.add(e),x$D.delete(e)):E$s.has(e)||A$q.add(e);if(s)if(0===E$s.size&&0===A$q.size)for(const e of s)x$D.add(e);else for(const e of s)A$q.has(e)?A$q.delete(e):(E$s.delete(e),x$D.add(e));}const i=t$1y.acquire();A$q.forEach((e=>{i.push(e);}));const r=t$1y.acquire();x$D.forEach((e=>{r.push(e);}));const n=this._items,h=s.items,o=t$1y.acquire();if(E$s.forEach((e=>{h.indexOf(e)!==n.indexOf(e)&&o.push(e);})),s.listeners&&(i.length||r.length||o.length)){const e={target:this,added:i,removed:r,moved:o},t=s.listeners.length;for(let i=0;i<t;i++){const t=s.listeners[i];t.removed||t.callback.call(this,e);}}t$1y.release(i),t$1y.release(r),t$1y.release(o);}A$q.clear(),x$D.clear(),E$s.clear();}};L$t.ofType=t=>{if(!t)return u$1Y;if(j$H.has(t))return j$H.get(t);let s=null;if("function"==typeof t)s=t.prototype.declaredClass;else if(t.base)s=t.base.prototype.declaredClass;else for(const e in t.typeMap){const i=t.typeMap[e].prototype.declaredClass;s?s+=` | ${i}`:s=i;}let i=class extends u$1Y{};return e$1_([n$2x({Type:t,ensureType:"function"==typeof t?b$Z(t):N$t(t)})],i.prototype,"itemType",void 0),i=e$1_([i$2w(`esri.core.Collection<${s}>`)],i),j$H.set(t,i),i},e$1_([d$1S()],L$t.prototype,"length",void 0),e$1_([d$1S()],L$t.prototype,"items",null),L$t=u$1Y=e$1_([i$2w("esri.core.Collection")],L$t);const S$F=L$t;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let h$1s=class extends p$33{constructor(r){super(r),this._groups=new Map;}destroy(){this.removeAll();}get size(){let r=0;return this._groups.forEach((e=>{r+=e.length;})),r}add(r,e){if(!this._isHandle(r)&&!Array.isArray(r)&&!S$F.isCollection(r))return this;const t=this._getOrCreateGroup(e);return Array.isArray(r)||S$F.isCollection(r)?r.forEach((r=>this._isHandle(r)&&t.push(r))):t.push(r),this.notifyChange("size"),this}forEach(r,e){if("function"==typeof r)this._groups.forEach((e=>e.forEach(r)));else {const s=this._getGroup(r);s&&e&&s.forEach(e);}}has(r){return this._groups.has(this._ensureGroupKey(r))}remove(r){if(Array.isArray(r)||S$F.isCollection(r))return r.forEach(this.remove,this),this;if(!this.has(r))return this;const e=this._getGroup(r);for(let s=0;s<e.length;s++)e[s].remove();return this._deleteGroup(r),this.notifyChange("size"),this}removeAll(){return this._groups.forEach((r=>{for(let e=0;e<r.length;e++)r[e].remove();})),this._groups.clear(),this.notifyChange("size"),this}_isHandle(r){return r&&!!r.remove}_getOrCreateGroup(r){if(this.has(r))return this._getGroup(r);const e=[];return this._groups.set(this._ensureGroupKey(r),e),e}_getGroup(r){return q$q(this._groups.get(this._ensureGroupKey(r)))}_deleteGroup(r){return this._groups.delete(this._ensureGroupKey(r))}_ensureGroupKey(r){return r||"_default_"}};e$1_([d$1S({readOnly:!0})],h$1s.prototype,"size",null),h$1s=e$1_([i$2w("esri.core.Handles")],h$1s);const u$1X=h$1s;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class h$1r{constructor(s){this.instance=s,this._resolver=A$v(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=1,this._cleanUp();}),(()=>{this._status=2,this._cleanUp();}));}addResolvingPromise(s){this._resolvingPromises.push(s),this._tryResolve();}isResolved(){return 1===this._status}isRejected(){return 2===this._status}isFulfilled(){return 0!==this._status}abort(){this._resolver.reject(m$22());}when(s,e){return this._resolver.promise.then(s,e)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null;}_tryResolve(){if(this.isFulfilled())return;const s=A$v(),e=[...this._resolvingPromises,q$q(s.promise)],t=this._allPromise=Promise.all(e);t.then((()=>{this.isFulfilled()||this._allPromise!==t||this._resolver.resolve(this.instance);}),(s=>{this.isFulfilled()||this._allPromise!==t||d$1O(s)||this._resolver.reject(s);})),s.resolve();}}const n$2w=e=>{let i=class extends e{constructor(...s){super(...s),this._promiseProps=new h$1r(this),this.addResolvingPromise(Promise.resolve());}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(s,e){return new Promise(((s,e)=>{this._promiseProps.when(s,e);})).then(s,e)}catch(s){return this.when(null,s)}addResolvingPromise(s){s&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in s?s.when():s);}};return i=e$1_([i$2w("esri.core.Promise")],i),i};let m$1Y=class extends(n$2w(p$33)){};m$1Y=e$1_([i$2w("esri.core.Promise")],m$1Y);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function o$1z(){const t=n$2v.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const o=o=>t[o].toString(16);return o(0)+o(1)+"-"+o(2)+"-"+o(3)+"-"+o(4)+"-"+o(5)+o(6)+o(7)}const n$2v=e$1Z.crypto||e$1Z.msCrypto;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$2Z=/\?(\.|$)/g;function i$2i(n,t,r,e){const o=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],u=f$1p(n,t,r,e);for(const i of o){const t=i.trim().replace(c$2Z,"$1"),e=n.get(t);r.call(n,e,e,t,n);}return u}function f$1p(n,t,r,e){return n.watch(t,r,e)}function s$1W(n,t,r,e){return z$o(n,t,U$l,r,e)}function a$2N(n,t,r,e){return N$q(n,t,U$l,r,e)}function m$1X(n,t,r,e){return z$o(n,t,V$c,r,e)}function p$31(n,t,r,e){return N$q(n,t,V$c,r,e)}function v$O(n,t,r,e){return z$o(n,t,k$z,r,e)}function d$1H(n,t,r,e){return N$q(n,t,k$z,r,e)}function h$1q(n,t,r,e){return z$o(n,t,q$l,r,e)}function g$10(n,t,r,e){return N$q(n,t,q$l,r,e)}function O$p(n,t,r,e){let o=!1;const u=n.watch(t,((t,e,u,c)=>{o||r.call(n,t,e,u,c);}),e);return {remove(){u.remove();},pause(){o=!0;},resume(){o=!1;}}}function $$f(r,e,o,u,c,f,l){const s={};function a(n){const t=s[n];t&&(f&&f(t.target,n,r,o),t.handle.remove(),delete s[n]);}const m=i$2i(r,e,((e,i,f)=>{a(f),e$1L(e)&&(s[f]={handle:r$1x(e,o,u),target:e},c&&c(e,f,r,o));}),l);return {remove(){m.remove();for(const n in s)a(n);}}}function z$o(n,t,r,e,o){const u=n.watch(t,((t,o,u,c)=>{r&&!r(t)||null==e||e.call(n,t,o,u,c);}),o);if(Array.isArray(t))for(const c of t){const o=n.get(c);r&&r(o)&&(null==e||e.call(n,o,o,t,n));}else {const o=n.get(t);r&&r(o)&&(null==e||e.call(n,o,o,t,n));}return u}function N$q(n,t,r,c,i){const f="function"==typeof c?c:null,l="object"==typeof c?c:null;"boolean"==typeof c&&(i=c);let s,a=!1;function m(){s&&(s.remove(),s=null);}const p=A$v();j$M(l,(()=>{m(),p.reject(m$22());}));const v={then:p.promise.then.bind(p.promise),catch:p.promise.catch.bind(p.promise),remove:m};return Object.freeze(v),s=z$o(n,t,r,((t,r,e,o)=>{a=!0,m(),f&&f.call(n,t,r,e,o),p.resolve({value:t,oldValue:r,propertyName:e,target:o});}),i),a&&m(),v}function U$l(n){return !!n}function V$c(n){return !n}function k$z(n){return !0===n}function q$l(n){return !1===n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$1y=Object.prototype.toString;function r$1o(n){const o="__accessorMetadata__"in n?b$Z(n):n;return function(...t){if(t.push(o),"number"==typeof t[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return e$1B.apply(this,t)}}function e$1B(t,o,r,e){s$2d(t,o).cast=e;}function i$2h(t){return function(o,r){s$2d(o,t).cast=o[r];}}function c$2Y(...t){if(3!==t.length||"string"!=typeof t[1])return 1===t.length&&"[object Function]"===o$1y.call(t[0])?r$1o(t[0]):1===t.length&&"string"==typeof t[0]?i$2h(t[0]):void 0}

/*!
 * @esri/arcgis-html-sanitizer - v2.9.0-next.1 - Tue Oct 19 2021 10:19:42 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2021 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */
/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/** `Object#toString` result references. */
var objectTag = '[object Object]';

/**
 * Checks if `value` is a host object in IE < 9.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a host object, else `false`.
 */
function isHostObject(value) {
  // Many host objects are `Object` objects that can coerce to strings
  // despite having improperly defined `toString` methods.
  var result = false;
  if (value != null && typeof value.toString != 'function') {
    try {
      result = !!(value + '');
    } catch (e) {}
  }
  return result;
}

/**
 * Creates a unary function that invokes `func` with its argument transformed.
 *
 * @private
 * @param {Function} func The function to wrap.
 * @param {Function} transform The argument transform.
 * @returns {Function} Returns the new function.
 */
function overArg(func, transform) {
  return function(arg) {
    return func(transform(arg));
  };
}

/** Used for built-in method references. */
var funcProto = Function.prototype,
    objectProto = Object.prototype;

/** Used to resolve the decompiled source of functions. */
var funcToString = funcProto.toString;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/** Used to infer the `Object` constructor. */
var objectCtorString = funcToString.call(Object);

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var objectToString = objectProto.toString;

/** Built-in value references. */
var getPrototype = overArg(Object.getPrototypeOf, Object);

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

/**
 * Checks if `value` is a plain object, that is, an object created by the
 * `Object` constructor or one with a `[[Prototype]]` of `null`.
 *
 * @static
 * @memberOf _
 * @since 0.8.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 * }
 *
 * _.isPlainObject(new Foo);
 * // => false
 *
 * _.isPlainObject([1, 2, 3]);
 * // => false
 *
 * _.isPlainObject({ 'x': 0, 'y': 0 });
 * // => true
 *
 * _.isPlainObject(Object.create(null));
 * // => true
 */
function isPlainObject(value) {
  if (!isObjectLike(value) ||
      objectToString.call(value) != objectTag || isHostObject(value)) {
    return false;
  }
  var proto = getPrototype(value);
  if (proto === null) {
    return true;
  }
  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;
  return (typeof Ctor == 'function' &&
    Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString);
}

var lodash_isplainobject = isPlainObject;

var lib$1 = {exports: {}};

var _default$1 = {};

var lib = {exports: {}};

var _default = {};

/**
 * cssfilter
 *
 * @author 老雷<leizongmin@gmail.com>
 */

function getDefaultWhiteList$1 () {
  // 白名单值说明：
  // true: 允许该属性
  // Function: function (val) { } 返回true表示允许该属性，其他值均表示不允许
  // RegExp: regexp.test(val) 返回true表示允许该属性，其他值均表示不允许
  // 除上面列出的值外均表示不允许
  var whiteList = {};

  whiteList['align-content'] = false; // default: auto
  whiteList['align-items'] = false; // default: auto
  whiteList['align-self'] = false; // default: auto
  whiteList['alignment-adjust'] = false; // default: auto
  whiteList['alignment-baseline'] = false; // default: baseline
  whiteList['all'] = false; // default: depending on individual properties
  whiteList['anchor-point'] = false; // default: none
  whiteList['animation'] = false; // default: depending on individual properties
  whiteList['animation-delay'] = false; // default: 0
  whiteList['animation-direction'] = false; // default: normal
  whiteList['animation-duration'] = false; // default: 0
  whiteList['animation-fill-mode'] = false; // default: none
  whiteList['animation-iteration-count'] = false; // default: 1
  whiteList['animation-name'] = false; // default: none
  whiteList['animation-play-state'] = false; // default: running
  whiteList['animation-timing-function'] = false; // default: ease
  whiteList['azimuth'] = false; // default: center
  whiteList['backface-visibility'] = false; // default: visible
  whiteList['background'] = true; // default: depending on individual properties
  whiteList['background-attachment'] = true; // default: scroll
  whiteList['background-clip'] = true; // default: border-box
  whiteList['background-color'] = true; // default: transparent
  whiteList['background-image'] = true; // default: none
  whiteList['background-origin'] = true; // default: padding-box
  whiteList['background-position'] = true; // default: 0% 0%
  whiteList['background-repeat'] = true; // default: repeat
  whiteList['background-size'] = true; // default: auto
  whiteList['baseline-shift'] = false; // default: baseline
  whiteList['binding'] = false; // default: none
  whiteList['bleed'] = false; // default: 6pt
  whiteList['bookmark-label'] = false; // default: content()
  whiteList['bookmark-level'] = false; // default: none
  whiteList['bookmark-state'] = false; // default: open
  whiteList['border'] = true; // default: depending on individual properties
  whiteList['border-bottom'] = true; // default: depending on individual properties
  whiteList['border-bottom-color'] = true; // default: current color
  whiteList['border-bottom-left-radius'] = true; // default: 0
  whiteList['border-bottom-right-radius'] = true; // default: 0
  whiteList['border-bottom-style'] = true; // default: none
  whiteList['border-bottom-width'] = true; // default: medium
  whiteList['border-collapse'] = true; // default: separate
  whiteList['border-color'] = true; // default: depending on individual properties
  whiteList['border-image'] = true; // default: none
  whiteList['border-image-outset'] = true; // default: 0
  whiteList['border-image-repeat'] = true; // default: stretch
  whiteList['border-image-slice'] = true; // default: 100%
  whiteList['border-image-source'] = true; // default: none
  whiteList['border-image-width'] = true; // default: 1
  whiteList['border-left'] = true; // default: depending on individual properties
  whiteList['border-left-color'] = true; // default: current color
  whiteList['border-left-style'] = true; // default: none
  whiteList['border-left-width'] = true; // default: medium
  whiteList['border-radius'] = true; // default: 0
  whiteList['border-right'] = true; // default: depending on individual properties
  whiteList['border-right-color'] = true; // default: current color
  whiteList['border-right-style'] = true; // default: none
  whiteList['border-right-width'] = true; // default: medium
  whiteList['border-spacing'] = true; // default: 0
  whiteList['border-style'] = true; // default: depending on individual properties
  whiteList['border-top'] = true; // default: depending on individual properties
  whiteList['border-top-color'] = true; // default: current color
  whiteList['border-top-left-radius'] = true; // default: 0
  whiteList['border-top-right-radius'] = true; // default: 0
  whiteList['border-top-style'] = true; // default: none
  whiteList['border-top-width'] = true; // default: medium
  whiteList['border-width'] = true; // default: depending on individual properties
  whiteList['bottom'] = false; // default: auto
  whiteList['box-decoration-break'] = true; // default: slice
  whiteList['box-shadow'] = true; // default: none
  whiteList['box-sizing'] = true; // default: content-box
  whiteList['box-snap'] = true; // default: none
  whiteList['box-suppress'] = true; // default: show
  whiteList['break-after'] = true; // default: auto
  whiteList['break-before'] = true; // default: auto
  whiteList['break-inside'] = true; // default: auto
  whiteList['caption-side'] = false; // default: top
  whiteList['chains'] = false; // default: none
  whiteList['clear'] = true; // default: none
  whiteList['clip'] = false; // default: auto
  whiteList['clip-path'] = false; // default: none
  whiteList['clip-rule'] = false; // default: nonzero
  whiteList['color'] = true; // default: implementation dependent
  whiteList['color-interpolation-filters'] = true; // default: auto
  whiteList['column-count'] = false; // default: auto
  whiteList['column-fill'] = false; // default: balance
  whiteList['column-gap'] = false; // default: normal
  whiteList['column-rule'] = false; // default: depending on individual properties
  whiteList['column-rule-color'] = false; // default: current color
  whiteList['column-rule-style'] = false; // default: medium
  whiteList['column-rule-width'] = false; // default: medium
  whiteList['column-span'] = false; // default: none
  whiteList['column-width'] = false; // default: auto
  whiteList['columns'] = false; // default: depending on individual properties
  whiteList['contain'] = false; // default: none
  whiteList['content'] = false; // default: normal
  whiteList['counter-increment'] = false; // default: none
  whiteList['counter-reset'] = false; // default: none
  whiteList['counter-set'] = false; // default: none
  whiteList['crop'] = false; // default: auto
  whiteList['cue'] = false; // default: depending on individual properties
  whiteList['cue-after'] = false; // default: none
  whiteList['cue-before'] = false; // default: none
  whiteList['cursor'] = false; // default: auto
  whiteList['direction'] = false; // default: ltr
  whiteList['display'] = true; // default: depending on individual properties
  whiteList['display-inside'] = true; // default: auto
  whiteList['display-list'] = true; // default: none
  whiteList['display-outside'] = true; // default: inline-level
  whiteList['dominant-baseline'] = false; // default: auto
  whiteList['elevation'] = false; // default: level
  whiteList['empty-cells'] = false; // default: show
  whiteList['filter'] = false; // default: none
  whiteList['flex'] = false; // default: depending on individual properties
  whiteList['flex-basis'] = false; // default: auto
  whiteList['flex-direction'] = false; // default: row
  whiteList['flex-flow'] = false; // default: depending on individual properties
  whiteList['flex-grow'] = false; // default: 0
  whiteList['flex-shrink'] = false; // default: 1
  whiteList['flex-wrap'] = false; // default: nowrap
  whiteList['float'] = false; // default: none
  whiteList['float-offset'] = false; // default: 0 0
  whiteList['flood-color'] = false; // default: black
  whiteList['flood-opacity'] = false; // default: 1
  whiteList['flow-from'] = false; // default: none
  whiteList['flow-into'] = false; // default: none
  whiteList['font'] = true; // default: depending on individual properties
  whiteList['font-family'] = true; // default: implementation dependent
  whiteList['font-feature-settings'] = true; // default: normal
  whiteList['font-kerning'] = true; // default: auto
  whiteList['font-language-override'] = true; // default: normal
  whiteList['font-size'] = true; // default: medium
  whiteList['font-size-adjust'] = true; // default: none
  whiteList['font-stretch'] = true; // default: normal
  whiteList['font-style'] = true; // default: normal
  whiteList['font-synthesis'] = true; // default: weight style
  whiteList['font-variant'] = true; // default: normal
  whiteList['font-variant-alternates'] = true; // default: normal
  whiteList['font-variant-caps'] = true; // default: normal
  whiteList['font-variant-east-asian'] = true; // default: normal
  whiteList['font-variant-ligatures'] = true; // default: normal
  whiteList['font-variant-numeric'] = true; // default: normal
  whiteList['font-variant-position'] = true; // default: normal
  whiteList['font-weight'] = true; // default: normal
  whiteList['grid'] = false; // default: depending on individual properties
  whiteList['grid-area'] = false; // default: depending on individual properties
  whiteList['grid-auto-columns'] = false; // default: auto
  whiteList['grid-auto-flow'] = false; // default: none
  whiteList['grid-auto-rows'] = false; // default: auto
  whiteList['grid-column'] = false; // default: depending on individual properties
  whiteList['grid-column-end'] = false; // default: auto
  whiteList['grid-column-start'] = false; // default: auto
  whiteList['grid-row'] = false; // default: depending on individual properties
  whiteList['grid-row-end'] = false; // default: auto
  whiteList['grid-row-start'] = false; // default: auto
  whiteList['grid-template'] = false; // default: depending on individual properties
  whiteList['grid-template-areas'] = false; // default: none
  whiteList['grid-template-columns'] = false; // default: none
  whiteList['grid-template-rows'] = false; // default: none
  whiteList['hanging-punctuation'] = false; // default: none
  whiteList['height'] = true; // default: auto
  whiteList['hyphens'] = false; // default: manual
  whiteList['icon'] = false; // default: auto
  whiteList['image-orientation'] = false; // default: auto
  whiteList['image-resolution'] = false; // default: normal
  whiteList['ime-mode'] = false; // default: auto
  whiteList['initial-letters'] = false; // default: normal
  whiteList['inline-box-align'] = false; // default: last
  whiteList['justify-content'] = false; // default: auto
  whiteList['justify-items'] = false; // default: auto
  whiteList['justify-self'] = false; // default: auto
  whiteList['left'] = false; // default: auto
  whiteList['letter-spacing'] = true; // default: normal
  whiteList['lighting-color'] = true; // default: white
  whiteList['line-box-contain'] = false; // default: block inline replaced
  whiteList['line-break'] = false; // default: auto
  whiteList['line-grid'] = false; // default: match-parent
  whiteList['line-height'] = false; // default: normal
  whiteList['line-snap'] = false; // default: none
  whiteList['line-stacking'] = false; // default: depending on individual properties
  whiteList['line-stacking-ruby'] = false; // default: exclude-ruby
  whiteList['line-stacking-shift'] = false; // default: consider-shifts
  whiteList['line-stacking-strategy'] = false; // default: inline-line-height
  whiteList['list-style'] = true; // default: depending on individual properties
  whiteList['list-style-image'] = true; // default: none
  whiteList['list-style-position'] = true; // default: outside
  whiteList['list-style-type'] = true; // default: disc
  whiteList['margin'] = true; // default: depending on individual properties
  whiteList['margin-bottom'] = true; // default: 0
  whiteList['margin-left'] = true; // default: 0
  whiteList['margin-right'] = true; // default: 0
  whiteList['margin-top'] = true; // default: 0
  whiteList['marker-offset'] = false; // default: auto
  whiteList['marker-side'] = false; // default: list-item
  whiteList['marks'] = false; // default: none
  whiteList['mask'] = false; // default: border-box
  whiteList['mask-box'] = false; // default: see individual properties
  whiteList['mask-box-outset'] = false; // default: 0
  whiteList['mask-box-repeat'] = false; // default: stretch
  whiteList['mask-box-slice'] = false; // default: 0 fill
  whiteList['mask-box-source'] = false; // default: none
  whiteList['mask-box-width'] = false; // default: auto
  whiteList['mask-clip'] = false; // default: border-box
  whiteList['mask-image'] = false; // default: none
  whiteList['mask-origin'] = false; // default: border-box
  whiteList['mask-position'] = false; // default: center
  whiteList['mask-repeat'] = false; // default: no-repeat
  whiteList['mask-size'] = false; // default: border-box
  whiteList['mask-source-type'] = false; // default: auto
  whiteList['mask-type'] = false; // default: luminance
  whiteList['max-height'] = true; // default: none
  whiteList['max-lines'] = false; // default: none
  whiteList['max-width'] = true; // default: none
  whiteList['min-height'] = true; // default: 0
  whiteList['min-width'] = true; // default: 0
  whiteList['move-to'] = false; // default: normal
  whiteList['nav-down'] = false; // default: auto
  whiteList['nav-index'] = false; // default: auto
  whiteList['nav-left'] = false; // default: auto
  whiteList['nav-right'] = false; // default: auto
  whiteList['nav-up'] = false; // default: auto
  whiteList['object-fit'] = false; // default: fill
  whiteList['object-position'] = false; // default: 50% 50%
  whiteList['opacity'] = false; // default: 1
  whiteList['order'] = false; // default: 0
  whiteList['orphans'] = false; // default: 2
  whiteList['outline'] = false; // default: depending on individual properties
  whiteList['outline-color'] = false; // default: invert
  whiteList['outline-offset'] = false; // default: 0
  whiteList['outline-style'] = false; // default: none
  whiteList['outline-width'] = false; // default: medium
  whiteList['overflow'] = false; // default: depending on individual properties
  whiteList['overflow-wrap'] = false; // default: normal
  whiteList['overflow-x'] = false; // default: visible
  whiteList['overflow-y'] = false; // default: visible
  whiteList['padding'] = true; // default: depending on individual properties
  whiteList['padding-bottom'] = true; // default: 0
  whiteList['padding-left'] = true; // default: 0
  whiteList['padding-right'] = true; // default: 0
  whiteList['padding-top'] = true; // default: 0
  whiteList['page'] = false; // default: auto
  whiteList['page-break-after'] = false; // default: auto
  whiteList['page-break-before'] = false; // default: auto
  whiteList['page-break-inside'] = false; // default: auto
  whiteList['page-policy'] = false; // default: start
  whiteList['pause'] = false; // default: implementation dependent
  whiteList['pause-after'] = false; // default: implementation dependent
  whiteList['pause-before'] = false; // default: implementation dependent
  whiteList['perspective'] = false; // default: none
  whiteList['perspective-origin'] = false; // default: 50% 50%
  whiteList['pitch'] = false; // default: medium
  whiteList['pitch-range'] = false; // default: 50
  whiteList['play-during'] = false; // default: auto
  whiteList['position'] = false; // default: static
  whiteList['presentation-level'] = false; // default: 0
  whiteList['quotes'] = false; // default: text
  whiteList['region-fragment'] = false; // default: auto
  whiteList['resize'] = false; // default: none
  whiteList['rest'] = false; // default: depending on individual properties
  whiteList['rest-after'] = false; // default: none
  whiteList['rest-before'] = false; // default: none
  whiteList['richness'] = false; // default: 50
  whiteList['right'] = false; // default: auto
  whiteList['rotation'] = false; // default: 0
  whiteList['rotation-point'] = false; // default: 50% 50%
  whiteList['ruby-align'] = false; // default: auto
  whiteList['ruby-merge'] = false; // default: separate
  whiteList['ruby-position'] = false; // default: before
  whiteList['shape-image-threshold'] = false; // default: 0.0
  whiteList['shape-outside'] = false; // default: none
  whiteList['shape-margin'] = false; // default: 0
  whiteList['size'] = false; // default: auto
  whiteList['speak'] = false; // default: auto
  whiteList['speak-as'] = false; // default: normal
  whiteList['speak-header'] = false; // default: once
  whiteList['speak-numeral'] = false; // default: continuous
  whiteList['speak-punctuation'] = false; // default: none
  whiteList['speech-rate'] = false; // default: medium
  whiteList['stress'] = false; // default: 50
  whiteList['string-set'] = false; // default: none
  whiteList['tab-size'] = false; // default: 8
  whiteList['table-layout'] = false; // default: auto
  whiteList['text-align'] = true; // default: start
  whiteList['text-align-last'] = true; // default: auto
  whiteList['text-combine-upright'] = true; // default: none
  whiteList['text-decoration'] = true; // default: none
  whiteList['text-decoration-color'] = true; // default: currentColor
  whiteList['text-decoration-line'] = true; // default: none
  whiteList['text-decoration-skip'] = true; // default: objects
  whiteList['text-decoration-style'] = true; // default: solid
  whiteList['text-emphasis'] = true; // default: depending on individual properties
  whiteList['text-emphasis-color'] = true; // default: currentColor
  whiteList['text-emphasis-position'] = true; // default: over right
  whiteList['text-emphasis-style'] = true; // default: none
  whiteList['text-height'] = true; // default: auto
  whiteList['text-indent'] = true; // default: 0
  whiteList['text-justify'] = true; // default: auto
  whiteList['text-orientation'] = true; // default: mixed
  whiteList['text-overflow'] = true; // default: clip
  whiteList['text-shadow'] = true; // default: none
  whiteList['text-space-collapse'] = true; // default: collapse
  whiteList['text-transform'] = true; // default: none
  whiteList['text-underline-position'] = true; // default: auto
  whiteList['text-wrap'] = true; // default: normal
  whiteList['top'] = false; // default: auto
  whiteList['transform'] = false; // default: none
  whiteList['transform-origin'] = false; // default: 50% 50% 0
  whiteList['transform-style'] = false; // default: flat
  whiteList['transition'] = false; // default: depending on individual properties
  whiteList['transition-delay'] = false; // default: 0s
  whiteList['transition-duration'] = false; // default: 0s
  whiteList['transition-property'] = false; // default: all
  whiteList['transition-timing-function'] = false; // default: ease
  whiteList['unicode-bidi'] = false; // default: normal
  whiteList['vertical-align'] = false; // default: baseline
  whiteList['visibility'] = false; // default: visible
  whiteList['voice-balance'] = false; // default: center
  whiteList['voice-duration'] = false; // default: auto
  whiteList['voice-family'] = false; // default: implementation dependent
  whiteList['voice-pitch'] = false; // default: medium
  whiteList['voice-range'] = false; // default: medium
  whiteList['voice-rate'] = false; // default: normal
  whiteList['voice-stress'] = false; // default: normal
  whiteList['voice-volume'] = false; // default: medium
  whiteList['volume'] = false; // default: medium
  whiteList['white-space'] = false; // default: normal
  whiteList['widows'] = false; // default: 2
  whiteList['width'] = true; // default: auto
  whiteList['will-change'] = false; // default: auto
  whiteList['word-break'] = true; // default: normal
  whiteList['word-spacing'] = true; // default: normal
  whiteList['word-wrap'] = true; // default: normal
  whiteList['wrap-flow'] = false; // default: auto
  whiteList['wrap-through'] = false; // default: wrap
  whiteList['writing-mode'] = false; // default: horizontal-tb
  whiteList['z-index'] = false; // default: auto

  return whiteList;
}


/**
 * 匹配到白名单上的一个属性时
 *
 * @param {String} name
 * @param {String} value
 * @param {Object} options
 * @return {String}
 */
function onAttr (name, value, options) {
  // do nothing
}

/**
 * 匹配到不在白名单上的一个属性时
 *
 * @param {String} name
 * @param {String} value
 * @param {Object} options
 * @return {String}
 */
function onIgnoreAttr (name, value, options) {
  // do nothing
}

var REGEXP_URL_JAVASCRIPT = /javascript\s*\:/img;

/**
 * 过滤属性值
 *
 * @param {String} name
 * @param {String} value
 * @return {String}
 */
function safeAttrValue$1(name, value) {
  if (REGEXP_URL_JAVASCRIPT.test(value)) return '';
  return value;
}


_default.whiteList = getDefaultWhiteList$1();
_default.getDefaultWhiteList = getDefaultWhiteList$1;
_default.onAttr = onAttr;
_default.onIgnoreAttr = onIgnoreAttr;
_default.safeAttrValue = safeAttrValue$1;

var util$1 = {
  indexOf: function (arr, item) {
    var i, j;
    if (Array.prototype.indexOf) {
      return arr.indexOf(item);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      if (arr[i] === item) {
        return i;
      }
    }
    return -1;
  },
  forEach: function (arr, fn, scope) {
    var i, j;
    if (Array.prototype.forEach) {
      return arr.forEach(fn, scope);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      fn.call(scope, arr[i], i, arr);
    }
  },
  trim: function (str) {
    if (String.prototype.trim) {
      return str.trim();
    }
    return str.replace(/(^\s*)|(\s*$)/g, '');
  },
  trimRight: function (str) {
    if (String.prototype.trimRight) {
      return str.trimRight();
    }
    return str.replace(/(\s*$)/g, '');
  }
};

/**
 * cssfilter
 *
 * @author 老雷<leizongmin@gmail.com>
 */

var _$3$1 = util$1;


/**
 * 解析style
 *
 * @param {String} css
 * @param {Function} onAttr 处理属性的函数
 *   参数格式： function (sourcePosition, position, name, value, source)
 * @return {String}
 */
function parseStyle$1 (css, onAttr) {
  css = _$3$1.trimRight(css);
  if (css[css.length - 1] !== ';') css += ';';
  var cssLength = css.length;
  var isParenthesisOpen = false;
  var lastPos = 0;
  var i = 0;
  var retCSS = '';

  function addNewAttr () {
    // 如果没有正常的闭合圆括号，则直接忽略当前属性
    if (!isParenthesisOpen) {
      var source = _$3$1.trim(css.slice(lastPos, i));
      var j = source.indexOf(':');
      if (j !== -1) {
        var name = _$3$1.trim(source.slice(0, j));
        var value = _$3$1.trim(source.slice(j + 1));
        // 必须有属性名称
        if (name) {
          var ret = onAttr(lastPos, retCSS.length, name, value, source);
          if (ret) retCSS += ret + '; ';
        }
      }
    }
    lastPos = i + 1;
  }

  for (; i < cssLength; i++) {
    var c = css[i];
    if (c === '/' && css[i + 1] === '*') {
      // 备注开始
      var j = css.indexOf('*/', i + 2);
      // 如果没有正常的备注结束，则后面的部分全部跳过
      if (j === -1) break;
      // 直接将当前位置调到备注结尾，并且初始化状态
      i = j + 1;
      lastPos = i + 1;
      isParenthesisOpen = false;
    } else if (c === '(') {
      isParenthesisOpen = true;
    } else if (c === ')') {
      isParenthesisOpen = false;
    } else if (c === ';') {
      if (isParenthesisOpen) ; else {
        addNewAttr();
      }
    } else if (c === '\n') {
      addNewAttr();
    }
  }

  return _$3$1.trim(retCSS);
}

var parser$2 = parseStyle$1;

/**
 * cssfilter
 *
 * @author 老雷<leizongmin@gmail.com>
 */

var DEFAULT$1 = _default;
var parseStyle = parser$2;


/**
 * 返回值是否为空
 *
 * @param {Object} obj
 * @return {Boolean}
 */
function isNull$1 (obj) {
  return (obj === undefined || obj === null);
}

/**
 * 浅拷贝对象
 *
 * @param {Object} obj
 * @return {Object}
 */
function shallowCopyObject$1 (obj) {
  var ret = {};
  for (var i in obj) {
    ret[i] = obj[i];
  }
  return ret;
}

/**
 * 创建CSS过滤器
 *
 * @param {Object} options
 *   - {Object} whiteList
 *   - {Function} onAttr
 *   - {Function} onIgnoreAttr
 *   - {Function} safeAttrValue
 */
function FilterCSS$2 (options) {
  options = shallowCopyObject$1(options || {});
  options.whiteList = options.whiteList || DEFAULT$1.whiteList;
  options.onAttr = options.onAttr || DEFAULT$1.onAttr;
  options.onIgnoreAttr = options.onIgnoreAttr || DEFAULT$1.onIgnoreAttr;
  options.safeAttrValue = options.safeAttrValue || DEFAULT$1.safeAttrValue;
  this.options = options;
}

FilterCSS$2.prototype.process = function (css) {
  // 兼容各种奇葩输入
  css = css || '';
  css = css.toString();
  if (!css) return '';

  var me = this;
  var options = me.options;
  var whiteList = options.whiteList;
  var onAttr = options.onAttr;
  var onIgnoreAttr = options.onIgnoreAttr;
  var safeAttrValue = options.safeAttrValue;

  var retCSS = parseStyle(css, function (sourcePosition, position, name, value, source) {

    var check = whiteList[name];
    var isWhite = false;
    if (check === true) isWhite = check;
    else if (typeof check === 'function') isWhite = check(value);
    else if (check instanceof RegExp) isWhite = check.test(value);
    if (isWhite !== true) isWhite = false;

    // 如果过滤后 value 为空则直接忽略
    value = safeAttrValue(name, value);
    if (!value) return;

    var opts = {
      position: position,
      sourcePosition: sourcePosition,
      source: source,
      isWhite: isWhite
    };

    if (isWhite) {

      var ret = onAttr(name, value, opts);
      if (isNull$1(ret)) {
        return name + ':' + value;
      } else {
        return ret;
      }

    } else {

      var ret = onIgnoreAttr(name, value, opts);
      if (!isNull$1(ret)) {
        return ret;
      }

    }
  });

  return retCSS;
};


var css = FilterCSS$2;

/**
 * cssfilter
 *
 * @author 老雷<leizongmin@gmail.com>
 */

(function (module, exports) {
var DEFAULT = _default;
var FilterCSS = css;


/**
 * XSS过滤
 *
 * @param {String} css 要过滤的CSS代码
 * @param {Object} options 选项：whiteList, onAttr, onIgnoreAttr
 * @return {String}
 */
function filterCSS (html, options) {
  var xss = new FilterCSS(options);
  return xss.process(html);
}


// 输出
exports = module.exports = filterCSS;
exports.FilterCSS = FilterCSS;
for (var i in DEFAULT) exports[i] = DEFAULT[i];
}(lib, lib.exports));

var util = {
  indexOf: function (arr, item) {
    var i, j;
    if (Array.prototype.indexOf) {
      return arr.indexOf(item);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      if (arr[i] === item) {
        return i;
      }
    }
    return -1;
  },
  forEach: function (arr, fn, scope) {
    var i, j;
    if (Array.prototype.forEach) {
      return arr.forEach(fn, scope);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      fn.call(scope, arr[i], i, arr);
    }
  },
  trim: function (str) {
    if (String.prototype.trim) {
      return str.trim();
    }
    return str.replace(/(^\s*)|(\s*$)/g, "");
  },
  spaceIndex: function (str) {
    var reg = /\s|\n|\t/;
    var match = reg.exec(str);
    return match ? match.index : -1;
  },
};

/**
 * default settings
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */

var FilterCSS$1 = lib.exports.FilterCSS;
var getDefaultCSSWhiteList = lib.exports.getDefaultWhiteList;
var _$2$1 = util;

function getDefaultWhiteList() {
  return {
    a: ["target", "href", "title"],
    abbr: ["title"],
    address: [],
    area: ["shape", "coords", "href", "alt"],
    article: [],
    aside: [],
    audio: [
      "autoplay",
      "controls",
      "crossorigin",
      "loop",
      "muted",
      "preload",
      "src",
    ],
    b: [],
    bdi: ["dir"],
    bdo: ["dir"],
    big: [],
    blockquote: ["cite"],
    br: [],
    caption: [],
    center: [],
    cite: [],
    code: [],
    col: ["align", "valign", "span", "width"],
    colgroup: ["align", "valign", "span", "width"],
    dd: [],
    del: ["datetime"],
    details: ["open"],
    div: [],
    dl: [],
    dt: [],
    em: [],
    figcaption: [],
    figure: [],
    font: ["color", "size", "face"],
    footer: [],
    h1: [],
    h2: [],
    h3: [],
    h4: [],
    h5: [],
    h6: [],
    header: [],
    hr: [],
    i: [],
    img: ["src", "alt", "title", "width", "height"],
    ins: ["datetime"],
    li: [],
    mark: [],
    nav: [],
    ol: [],
    p: [],
    pre: [],
    s: [],
    section: [],
    small: [],
    span: [],
    sub: [],
    summary: [],
    sup: [],
    strong: [],
    strike: [],
    table: ["width", "border", "align", "valign"],
    tbody: ["align", "valign"],
    td: ["width", "rowspan", "colspan", "align", "valign"],
    tfoot: ["align", "valign"],
    th: ["width", "rowspan", "colspan", "align", "valign"],
    thead: ["align", "valign"],
    tr: ["rowspan", "align", "valign"],
    tt: [],
    u: [],
    ul: [],
    video: [
      "autoplay",
      "controls",
      "crossorigin",
      "loop",
      "muted",
      "playsinline",
      "poster",
      "preload",
      "src",
      "height",
      "width",
    ],
  };
}

var defaultCSSFilter = new FilterCSS$1();

/**
 * default onTag function
 *
 * @param {String} tag
 * @param {String} html
 * @param {Object} options
 * @return {String}
 */
function onTag(tag, html, options) {
  // do nothing
}

/**
 * default onIgnoreTag function
 *
 * @param {String} tag
 * @param {String} html
 * @param {Object} options
 * @return {String}
 */
function onIgnoreTag(tag, html, options) {
  // do nothing
}

/**
 * default onTagAttr function
 *
 * @param {String} tag
 * @param {String} name
 * @param {String} value
 * @return {String}
 */
function onTagAttr(tag, name, value) {
  // do nothing
}

/**
 * default onIgnoreTagAttr function
 *
 * @param {String} tag
 * @param {String} name
 * @param {String} value
 * @return {String}
 */
function onIgnoreTagAttr(tag, name, value) {
  // do nothing
}

/**
 * default escapeHtml function
 *
 * @param {String} html
 */
function escapeHtml(html) {
  return html.replace(REGEXP_LT, "&lt;").replace(REGEXP_GT, "&gt;");
}

/**
 * default safeAttrValue function
 *
 * @param {String} tag
 * @param {String} name
 * @param {String} value
 * @param {Object} cssFilter
 * @return {String}
 */
function safeAttrValue(tag, name, value, cssFilter) {
  // unescape attribute value firstly
  value = friendlyAttrValue(value);

  if (name === "href" || name === "src") {
    // filter `href` and `src` attribute
    // only allow the value that starts with `http://` | `https://` | `mailto:` | `/` | `#`
    value = _$2$1.trim(value);
    if (value === "#") return "#";
    if (
      !(
        value.substr(0, 7) === "http://" ||
        value.substr(0, 8) === "https://" ||
        value.substr(0, 7) === "mailto:" ||
        value.substr(0, 4) === "tel:" ||
        value.substr(0, 11) === "data:image/" ||
        value.substr(0, 6) === "ftp://" ||
        value.substr(0, 2) === "./" ||
        value.substr(0, 3) === "../" ||
        value[0] === "#" ||
        value[0] === "/"
      )
    ) {
      return "";
    }
  } else if (name === "background") {
    // filter `background` attribute (maybe no use)
    // `javascript:`
    REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {
      return "";
    }
  } else if (name === "style") {
    // `expression()`
    REGEXP_DEFAULT_ON_TAG_ATTR_7.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_7.test(value)) {
      return "";
    }
    // `url()`
    REGEXP_DEFAULT_ON_TAG_ATTR_8.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_8.test(value)) {
      REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;
      if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {
        return "";
      }
    }
    if (cssFilter !== false) {
      cssFilter = cssFilter || defaultCSSFilter;
      value = cssFilter.process(value);
    }
  }

  // escape `<>"` before returns
  value = escapeAttrValue(value);
  return value;
}

// RegExp list
var REGEXP_LT = /</g;
var REGEXP_GT = />/g;
var REGEXP_QUOTE = /"/g;
var REGEXP_QUOTE_2 = /&quot;/g;
var REGEXP_ATTR_VALUE_1 = /&#([a-zA-Z0-9]*);?/gim;
var REGEXP_ATTR_VALUE_COLON = /&colon;?/gim;
var REGEXP_ATTR_VALUE_NEWLINE = /&newline;?/gim;
var REGEXP_DEFAULT_ON_TAG_ATTR_4 =
  /((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi;
var REGEXP_DEFAULT_ON_TAG_ATTR_7 =
  /e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi;
var REGEXP_DEFAULT_ON_TAG_ATTR_8 = /u\s*r\s*l\s*\(.*/gi;

/**
 * escape double quote
 *
 * @param {String} str
 * @return {String} str
 */
function escapeQuote(str) {
  return str.replace(REGEXP_QUOTE, "&quot;");
}

/**
 * unescape double quote
 *
 * @param {String} str
 * @return {String} str
 */
function unescapeQuote(str) {
  return str.replace(REGEXP_QUOTE_2, '"');
}

/**
 * escape html entities
 *
 * @param {String} str
 * @return {String}
 */
function escapeHtmlEntities(str) {
  return str.replace(REGEXP_ATTR_VALUE_1, function replaceUnicode(str, code) {
    return code[0] === "x" || code[0] === "X"
      ? String.fromCharCode(parseInt(code.substr(1), 16))
      : String.fromCharCode(parseInt(code, 10));
  });
}

/**
 * escape html5 new danger entities
 *
 * @param {String} str
 * @return {String}
 */
function escapeDangerHtml5Entities(str) {
  return str
    .replace(REGEXP_ATTR_VALUE_COLON, ":")
    .replace(REGEXP_ATTR_VALUE_NEWLINE, " ");
}

/**
 * clear nonprintable characters
 *
 * @param {String} str
 * @return {String}
 */
function clearNonPrintableCharacter(str) {
  var str2 = "";
  for (var i = 0, len = str.length; i < len; i++) {
    str2 += str.charCodeAt(i) < 32 ? " " : str.charAt(i);
  }
  return _$2$1.trim(str2);
}

/**
 * get friendly attribute value
 *
 * @param {String} str
 * @return {String}
 */
function friendlyAttrValue(str) {
  str = unescapeQuote(str);
  str = escapeHtmlEntities(str);
  str = escapeDangerHtml5Entities(str);
  str = clearNonPrintableCharacter(str);
  return str;
}

/**
 * unescape attribute value
 *
 * @param {String} str
 * @return {String}
 */
function escapeAttrValue(str) {
  str = escapeQuote(str);
  str = escapeHtml(str);
  return str;
}

/**
 * `onIgnoreTag` function for removing all the tags that are not in whitelist
 */
function onIgnoreTagStripAll() {
  return "";
}

/**
 * remove tag body
 * specify a `tags` list, if the tag is not in the `tags` list then process by the specify function (optional)
 *
 * @param {array} tags
 * @param {function} next
 */
function StripTagBody(tags, next) {
  if (typeof next !== "function") {
    next = function () {};
  }

  var isRemoveAllTag = !Array.isArray(tags);
  function isRemoveTag(tag) {
    if (isRemoveAllTag) return true;
    return _$2$1.indexOf(tags, tag) !== -1;
  }

  var removeList = [];
  var posStart = false;

  return {
    onIgnoreTag: function (tag, html, options) {
      if (isRemoveTag(tag)) {
        if (options.isClosing) {
          var ret = "[/removed]";
          var end = options.position + ret.length;
          removeList.push([
            posStart !== false ? posStart : options.position,
            end,
          ]);
          posStart = false;
          return ret;
        } else {
          if (!posStart) {
            posStart = options.position;
          }
          return "[removed]";
        }
      } else {
        return next(tag, html, options);
      }
    },
    remove: function (html) {
      var rethtml = "";
      var lastPos = 0;
      _$2$1.forEach(removeList, function (pos) {
        rethtml += html.slice(lastPos, pos[0]);
        lastPos = pos[1];
      });
      rethtml += html.slice(lastPos);
      return rethtml;
    },
  };
}

/**
 * remove html comments
 *
 * @param {String} html
 * @return {String}
 */
function stripCommentTag(html) {
  var retHtml = "";
  var lastPos = 0;
  while (lastPos < html.length) {
    var i = html.indexOf("<!--", lastPos);
    if (i === -1) {
      retHtml += html.slice(lastPos);
      break;
    }
    retHtml += html.slice(lastPos, i);
    var j = html.indexOf("-->", i);
    if (j === -1) {
      break;
    }
    lastPos = j + 3;
  }
  return retHtml;
}

/**
 * remove invisible characters
 *
 * @param {String} html
 * @return {String}
 */
function stripBlankChar(html) {
  var chars = html.split("");
  chars = chars.filter(function (char) {
    var c = char.charCodeAt(0);
    if (c === 127) return false;
    if (c <= 31) {
      if (c === 10 || c === 13) return true;
      return false;
    }
    return true;
  });
  return chars.join("");
}

_default$1.whiteList = getDefaultWhiteList();
_default$1.getDefaultWhiteList = getDefaultWhiteList;
_default$1.onTag = onTag;
_default$1.onIgnoreTag = onIgnoreTag;
_default$1.onTagAttr = onTagAttr;
_default$1.onIgnoreTagAttr = onIgnoreTagAttr;
_default$1.safeAttrValue = safeAttrValue;
_default$1.escapeHtml = escapeHtml;
_default$1.escapeQuote = escapeQuote;
_default$1.unescapeQuote = unescapeQuote;
_default$1.escapeHtmlEntities = escapeHtmlEntities;
_default$1.escapeDangerHtml5Entities = escapeDangerHtml5Entities;
_default$1.clearNonPrintableCharacter = clearNonPrintableCharacter;
_default$1.friendlyAttrValue = friendlyAttrValue;
_default$1.escapeAttrValue = escapeAttrValue;
_default$1.onIgnoreTagStripAll = onIgnoreTagStripAll;
_default$1.StripTagBody = StripTagBody;
_default$1.stripCommentTag = stripCommentTag;
_default$1.stripBlankChar = stripBlankChar;
_default$1.cssFilter = defaultCSSFilter;
_default$1.getDefaultCSSWhiteList = getDefaultCSSWhiteList;

var parser$1 = {};

/**
 * Simple HTML Parser
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */

var _$1$1 = util;

/**
 * get tag name
 *
 * @param {String} html e.g. '<a hef="#">'
 * @return {String}
 */
function getTagName(html) {
  var i = _$1$1.spaceIndex(html);
  if (i === -1) {
    var tagName = html.slice(1, -1);
  } else {
    var tagName = html.slice(1, i + 1);
  }
  tagName = _$1$1.trim(tagName).toLowerCase();
  if (tagName.slice(0, 1) === "/") tagName = tagName.slice(1);
  if (tagName.slice(-1) === "/") tagName = tagName.slice(0, -1);
  return tagName;
}

/**
 * is close tag?
 *
 * @param {String} html 如：'<a hef="#">'
 * @return {Boolean}
 */
function isClosing(html) {
  return html.slice(0, 2) === "</";
}

/**
 * parse input html and returns processed html
 *
 * @param {String} html
 * @param {Function} onTag e.g. function (sourcePosition, position, tag, html, isClosing)
 * @param {Function} escapeHtml
 * @return {String}
 */
function parseTag$1(html, onTag, escapeHtml) {

  var rethtml = "";
  var lastPos = 0;
  var tagStart = false;
  var quoteStart = false;
  var currentPos = 0;
  var len = html.length;
  var currentTagName = "";
  var currentHtml = "";

  chariterator: for (currentPos = 0; currentPos < len; currentPos++) {
    var c = html.charAt(currentPos);
    if (tagStart === false) {
      if (c === "<") {
        tagStart = currentPos;
        continue;
      }
    } else {
      if (quoteStart === false) {
        if (c === "<") {
          rethtml += escapeHtml(html.slice(lastPos, currentPos));
          tagStart = currentPos;
          lastPos = currentPos;
          continue;
        }
        if (c === ">") {
          rethtml += escapeHtml(html.slice(lastPos, tagStart));
          currentHtml = html.slice(tagStart, currentPos + 1);
          currentTagName = getTagName(currentHtml);
          rethtml += onTag(
            tagStart,
            rethtml.length,
            currentTagName,
            currentHtml,
            isClosing(currentHtml)
          );
          lastPos = currentPos + 1;
          tagStart = false;
          continue;
        }
        if (c === '"' || c === "'") {
          var i = 1;
          var ic = html.charAt(currentPos - i);

          while (ic.trim() === "" || ic === "=") {
            if (ic === "=") {
              quoteStart = c;
              continue chariterator;
            }
            ic = html.charAt(currentPos - ++i);
          }
        }
      } else {
        if (c === quoteStart) {
          quoteStart = false;
          continue;
        }
      }
    }
  }
  if (lastPos < html.length) {
    rethtml += escapeHtml(html.substr(lastPos));
  }

  return rethtml;
}

var REGEXP_ILLEGAL_ATTR_NAME = /[^a-zA-Z0-9_:\.\-]/gim;

/**
 * parse input attributes and returns processed attributes
 *
 * @param {String} html e.g. `href="#" target="_blank"`
 * @param {Function} onAttr e.g. `function (name, value)`
 * @return {String}
 */
function parseAttr$1(html, onAttr) {

  var lastPos = 0;
  var retAttrs = [];
  var tmpName = false;
  var len = html.length;

  function addAttr(name, value) {
    name = _$1$1.trim(name);
    name = name.replace(REGEXP_ILLEGAL_ATTR_NAME, "").toLowerCase();
    if (name.length < 1) return;
    var ret = onAttr(name, value || "");
    if (ret) retAttrs.push(ret);
  }

  // 逐个分析字符
  for (var i = 0; i < len; i++) {
    var c = html.charAt(i);
    var v, j;
    if (tmpName === false && c === "=") {
      tmpName = html.slice(lastPos, i);
      lastPos = i + 1;
      continue;
    }
    if (tmpName !== false) {
      if (
        i === lastPos &&
        (c === '"' || c === "'") &&
        html.charAt(i - 1) === "="
      ) {
        j = html.indexOf(c, i + 1);
        if (j === -1) {
          break;
        } else {
          v = _$1$1.trim(html.slice(lastPos + 1, j));
          addAttr(tmpName, v);
          tmpName = false;
          i = j;
          lastPos = i + 1;
          continue;
        }
      }
    }
    if (/\s|\n|\t/.test(c)) {
      html = html.replace(/\s|\n|\t/g, " ");
      if (tmpName === false) {
        j = findNextEqual(html, i);
        if (j === -1) {
          v = _$1$1.trim(html.slice(lastPos, i));
          addAttr(v);
          tmpName = false;
          lastPos = i + 1;
          continue;
        } else {
          i = j - 1;
          continue;
        }
      } else {
        j = findBeforeEqual(html, i - 1);
        if (j === -1) {
          v = _$1$1.trim(html.slice(lastPos, i));
          v = stripQuoteWrap(v);
          addAttr(tmpName, v);
          tmpName = false;
          lastPos = i + 1;
          continue;
        } else {
          continue;
        }
      }
    }
  }

  if (lastPos < html.length) {
    if (tmpName === false) {
      addAttr(html.slice(lastPos));
    } else {
      addAttr(tmpName, stripQuoteWrap(_$1$1.trim(html.slice(lastPos))));
    }
  }

  return _$1$1.trim(retAttrs.join(" "));
}

function findNextEqual(str, i) {
  for (; i < str.length; i++) {
    var c = str[i];
    if (c === " ") continue;
    if (c === "=") return i;
    return -1;
  }
}

function findBeforeEqual(str, i) {
  for (; i > 0; i--) {
    var c = str[i];
    if (c === " ") continue;
    if (c === "=") return i;
    return -1;
  }
}

function isQuoteWrapString(text) {
  if (
    (text[0] === '"' && text[text.length - 1] === '"') ||
    (text[0] === "'" && text[text.length - 1] === "'")
  ) {
    return true;
  } else {
    return false;
  }
}

function stripQuoteWrap(text) {
  if (isQuoteWrapString(text)) {
    return text.substr(1, text.length - 2);
  } else {
    return text;
  }
}

parser$1.parseTag = parseTag$1;
parser$1.parseAttr = parseAttr$1;

/**
 * filter xss
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */

var FilterCSS = lib.exports.FilterCSS;
var DEFAULT = _default$1;
var parser = parser$1;
var parseTag = parser.parseTag;
var parseAttr = parser.parseAttr;
var _$v = util;

/**
 * returns `true` if the input value is `undefined` or `null`
 *
 * @param {Object} obj
 * @return {Boolean}
 */
function isNull(obj) {
  return obj === undefined || obj === null;
}

/**
 * get attributes for a tag
 *
 * @param {String} html
 * @return {Object}
 *   - {String} html
 *   - {Boolean} closing
 */
function getAttrs(html) {
  var i = _$v.spaceIndex(html);
  if (i === -1) {
    return {
      html: "",
      closing: html[html.length - 2] === "/",
    };
  }
  html = _$v.trim(html.slice(i + 1, -1));
  var isClosing = html[html.length - 1] === "/";
  if (isClosing) html = _$v.trim(html.slice(0, -1));
  return {
    html: html,
    closing: isClosing,
  };
}

/**
 * shallow copy
 *
 * @param {Object} obj
 * @return {Object}
 */
function shallowCopyObject(obj) {
  var ret = {};
  for (var i in obj) {
    ret[i] = obj[i];
  }
  return ret;
}

/**
 * FilterXSS class
 *
 * @param {Object} options
 *        whiteList, onTag, onTagAttr, onIgnoreTag,
 *        onIgnoreTagAttr, safeAttrValue, escapeHtml
 *        stripIgnoreTagBody, allowCommentTag, stripBlankChar
 *        css{whiteList, onAttr, onIgnoreAttr} `css=false` means don't use `cssfilter`
 */
function FilterXSS(options) {
  options = shallowCopyObject(options || {});

  if (options.stripIgnoreTag) {
    if (options.onIgnoreTag) {
      console.error(
        'Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'
      );
    }
    options.onIgnoreTag = DEFAULT.onIgnoreTagStripAll;
  }

  options.whiteList = options.whiteList || DEFAULT.whiteList;
  options.onTag = options.onTag || DEFAULT.onTag;
  options.onTagAttr = options.onTagAttr || DEFAULT.onTagAttr;
  options.onIgnoreTag = options.onIgnoreTag || DEFAULT.onIgnoreTag;
  options.onIgnoreTagAttr = options.onIgnoreTagAttr || DEFAULT.onIgnoreTagAttr;
  options.safeAttrValue = options.safeAttrValue || DEFAULT.safeAttrValue;
  options.escapeHtml = options.escapeHtml || DEFAULT.escapeHtml;
  this.options = options;

  if (options.css === false) {
    this.cssFilter = false;
  } else {
    options.css = options.css || {};
    this.cssFilter = new FilterCSS(options.css);
  }
}

/**
 * start process and returns result
 *
 * @param {String} html
 * @return {String}
 */
FilterXSS.prototype.process = function (html) {
  // compatible with the input
  html = html || "";
  html = html.toString();
  if (!html) return "";

  var me = this;
  var options = me.options;
  var whiteList = options.whiteList;
  var onTag = options.onTag;
  var onIgnoreTag = options.onIgnoreTag;
  var onTagAttr = options.onTagAttr;
  var onIgnoreTagAttr = options.onIgnoreTagAttr;
  var safeAttrValue = options.safeAttrValue;
  var escapeHtml = options.escapeHtml;
  var cssFilter = me.cssFilter;

  // remove invisible characters
  if (options.stripBlankChar) {
    html = DEFAULT.stripBlankChar(html);
  }

  // remove html comments
  if (!options.allowCommentTag) {
    html = DEFAULT.stripCommentTag(html);
  }

  // if enable stripIgnoreTagBody
  var stripIgnoreTagBody = false;
  if (options.stripIgnoreTagBody) {
    var stripIgnoreTagBody = DEFAULT.StripTagBody(
      options.stripIgnoreTagBody,
      onIgnoreTag
    );
    onIgnoreTag = stripIgnoreTagBody.onIgnoreTag;
  }

  var retHtml = parseTag(
    html,
    function (sourcePosition, position, tag, html, isClosing) {
      var info = {
        sourcePosition: sourcePosition,
        position: position,
        isClosing: isClosing,
        isWhite: whiteList.hasOwnProperty(tag),
      };

      // call `onTag()`
      var ret = onTag(tag, html, info);
      if (!isNull(ret)) return ret;

      if (info.isWhite) {
        if (info.isClosing) {
          return "</" + tag + ">";
        }

        var attrs = getAttrs(html);
        var whiteAttrList = whiteList[tag];
        var attrsHtml = parseAttr(attrs.html, function (name, value) {
          // call `onTagAttr()`
          var isWhiteAttr = _$v.indexOf(whiteAttrList, name) !== -1;
          var ret = onTagAttr(tag, name, value, isWhiteAttr);
          if (!isNull(ret)) return ret;

          if (isWhiteAttr) {
            // call `safeAttrValue()`
            value = safeAttrValue(tag, name, value, cssFilter);
            if (value) {
              return name + '="' + value + '"';
            } else {
              return name;
            }
          } else {
            // call `onIgnoreTagAttr()`
            var ret = onIgnoreTagAttr(tag, name, value, isWhiteAttr);
            if (!isNull(ret)) return ret;
            return;
          }
        });

        // build new tag html
        var html = "<" + tag;
        if (attrsHtml) html += " " + attrsHtml;
        if (attrs.closing) html += " /";
        html += ">";
        return html;
      } else {
        // call `onIgnoreTag()`
        var ret = onIgnoreTag(tag, html, info);
        if (!isNull(ret)) return ret;
        return escapeHtml(html);
      }
    },
    escapeHtml
  );

  // if enable stripIgnoreTagBody
  if (stripIgnoreTagBody) {
    retHtml = stripIgnoreTagBody.remove(retHtml);
  }

  return retHtml;
};

var xss = FilterXSS;

/**
 * xss
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */

(function (module, exports) {
var DEFAULT = _default$1;
var parser = parser$1;
var FilterXSS = xss;

/**
 * filter xss function
 *
 * @param {String} html
 * @param {Object} options { whiteList, onTag, onTagAttr, onIgnoreTag, onIgnoreTagAttr, safeAttrValue, escapeHtml }
 * @return {String}
 */
function filterXSS(html, options) {
  var xss = new FilterXSS(options);
  return xss.process(html);
}

exports = module.exports = filterXSS;
exports.filterXSS = filterXSS;
exports.FilterXSS = FilterXSS;
for (var i in DEFAULT) exports[i] = DEFAULT[i];
for (var i in parser) exports[i] = parser[i];

// using `xss` on the WebWorker, output `filterXSS` to the globals
function isWorkerEnv() {
  return (
    typeof self !== "undefined" &&
    typeof DedicatedWorkerGlobalScope !== "undefined" &&
    self instanceof DedicatedWorkerGlobalScope
  );
}
if (isWorkerEnv()) {
  self.filterXSS = module.exports;
}
}(lib$1, lib$1.exports));

/* Copyright (c) 2020 Environmental Systems Research Institute, Inc.
 * Apache-2.0
 *
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * The MIT License, see
 * https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 * */
/**
 * The Sanitizer Class
 *
 * @export
 * @class Sanitizer
 */
var Sanitizer = /** @class */ (function () {
    function Sanitizer(filterOptions, extendDefaults) {
        var _this = this;
        // Supported HTML Spec: https://doc.arcgis.com/en/arcgis-online/reference/supported-html.htm
        this.arcgisWhiteList = {
            a: ["href", "style", "target"],
            abbr: ["title"],
            audio: ["autoplay", "controls", "loop", "muted", "preload"],
            b: [],
            br: [],
            dd: ["style"],
            div: ["align", "style"],
            dl: ["style"],
            dt: ["style"],
            em: [],
            figcaption: ["style"],
            figure: ["style"],
            font: ["color", "face", "size", "style"],
            h1: ["style"],
            h2: ["style"],
            h3: ["style"],
            h4: ["style"],
            h5: ["style"],
            h6: ["style"],
            hr: [],
            i: [],
            img: ["alt", "border", "height", "src", "style", "width"],
            li: [],
            ol: [],
            p: ["style"],
            source: ["media", "src", "type"],
            span: ["style"],
            strong: [],
            sub: ["style"],
            sup: ["style"],
            table: ["border", "cellpadding", "cellspacing", "height", "style", "width"],
            tbody: [],
            tr: ["align", "height", "style", "valign"],
            td: [
                "align",
                "colspan",
                "height",
                "nowrap",
                "rowspan",
                "style",
                "valign",
                "width"
            ],
            th: [
                "align",
                "colspan",
                "height",
                "nowrap",
                "rowspan",
                "style",
                "valign",
                "width"
            ],
            u: [],
            ul: [],
            video: [
                "autoplay",
                "controls",
                "height",
                "loop",
                "muted",
                "poster",
                "preload",
                "width"
            ]
        };
        this.allowedProtocols = [
            "http",
            "https",
            "mailto",
            "iform",
            "tel",
            "flow",
            "lfmobile",
            "arcgis-navigator",
            "arcgis-appstudio-player",
            "arcgis-survey123",
            "arcgis-collector",
            "arcgis-workforce",
            "arcgis-explorer",
            "arcgis-trek2there",
            "arcgis-quickcapture",
            "mspbi",
            "comgooglemaps",
            "pdfefile",
            "pdfehttp",
            "pdfehttps",
            "boxapp",
            "boxemm",
            "awb",
            "awbs",
            "gropen",
            "radarscope"
        ];
        this.arcgisFilterOptions = {
            allowCommentTag: true,
            safeAttrValue: function (tag, name, value, cssFilter) {
                // Take over safe attribute filtering for `a` `href`, `img` `src`,
                // and `source` `src` attributes, otherwise pass onto the
                // default `XSS.safeAttrValue` method.
                if ((tag === "a" && name === "href") ||
                    ((tag === "img" || tag === "source") && name === "src")) {
                    return _this.sanitizeUrl(value);
                }
                return lib$1.exports.safeAttrValue(tag, name, value, cssFilter);
            }
        };
        var xssFilterOptions;
        if (filterOptions && !extendDefaults) {
            // Override the defaults
            xssFilterOptions = filterOptions;
        }
        else if (filterOptions && extendDefaults) {
            // Extend the defaults
            xssFilterOptions = Object.create(this.arcgisFilterOptions);
            Object.keys(filterOptions).forEach(function (key) {
                if (key === "whiteList") {
                    // Extend the whitelist by concatenating arrays
                    xssFilterOptions.whiteList = _this._extendObjectOfArrays([
                        _this.arcgisWhiteList,
                        filterOptions.whiteList || {}
                    ]);
                }
                else {
                    xssFilterOptions[key] = filterOptions[key];
                }
            });
        }
        else {
            // Only use the defaults
            xssFilterOptions = Object.create(this.arcgisFilterOptions);
            xssFilterOptions.whiteList = this.arcgisWhiteList;
        }
        this.xssFilterOptions = xssFilterOptions;
        // Make this readable to tests
        this._xssFilter = new lib$1.exports.FilterXSS(xssFilterOptions);
    }
    /**
     * Sanitizes value to remove invalid HTML tags.
     *
     * Note: If the value passed does not contain a valid JSON data type (String,
     * Number, JSON Object, Array, Boolean, or null), the value will be nullified.
     *
     * @param {any} value The value to sanitize.
     * @returns {any} The sanitized value.
     * @memberof Sanitizer
     */
    Sanitizer.prototype.sanitize = function (value, options) {
        if (options === void 0) { options = {}; }
        switch (typeof value) {
            case "number":
                if (isNaN(value) || !isFinite(value)) {
                    return null;
                }
                return value;
            case "boolean":
                return value;
            case "string":
                return this._xssFilter.process(value);
            case "object":
                return this._iterateOverObject(value, options);
            default:
                if (options.allowUndefined && typeof value === "undefined") {
                    return;
                }
                return null;
        }
    };
    /**
     * Sanitizes a URL string following the allowed protocols and sanitization rules.
     *
     * @param {string} value The URL to sanitize.
     * @returns {string} The sanitized URL.
     */
    Sanitizer.prototype.sanitizeUrl = function (value) {
        var protocol = this._trim(value.substring(0, value.indexOf(":")));
        if (!(value === "/" ||
            value === "#" ||
            value[0] === "#" ||
            this.allowedProtocols.indexOf(protocol.toLowerCase()) > -1)) {
            return "";
        }
        else {
            return lib$1.exports.escapeAttrValue(value);
        }
    };
    /**
     * Sanitizes an HTML attribute value.
     *
     * @param {string} tag The tagname of the HTML element.
     * @param {string} attribute The attribute name of the HTML element.
     * @param {string} value The raw value to be used for the HTML attribute value.
     * @param {XSS.ICSSFilter} [cssFilter] The CSS filter to be used.
     * @returns {string} The sanitized attribute value.
     * @memberof Sanitizer
     */
    Sanitizer.prototype.sanitizeHTMLAttribute = function (tag, attribute, value, cssFilter) {
        // use the custom safeAttrValue function if provided
        if (typeof this.xssFilterOptions.safeAttrValue === 'function') {
            // @ts-ignore safeAttrValue does handle undefined cssFilter
            return this.xssFilterOptions.safeAttrValue(tag, attribute, value, cssFilter);
        }
        // otherwise use the default
        // @ts-ignore safeAttrValue does handle undefined cssFilter
        return lib$1.exports.safeAttrValue(tag, attribute, value, cssFilter);
    };
    /**
     * Checks if a value only contains valid HTML.
     *
     * @param {any} value The value to validate.
     * @returns {boolean}
     * @memberof Sanitizer
     */
    Sanitizer.prototype.validate = function (value, options) {
        if (options === void 0) { options = {}; }
        var sanitized = this.sanitize(value, options);
        return {
            isValid: value === sanitized,
            sanitized: sanitized
        };
    };
    /**
     * Extends an object of arrays by by concatenating arrays of the same object
     * keys. If the if the previous key's value is not an array, the next key's
     * value will replace the previous key. This method is used for extending the
     * whiteList in the XSS filter options.
     *
     * @private
     * @param {Array<{}>} objects An array of objects.
     * @returns {{}} The extended object.
     * @memberof Sanitizer
     */
    Sanitizer.prototype._extendObjectOfArrays = function (objects) {
        var finalObj = {};
        objects.forEach(function (obj) {
            Object.keys(obj).forEach(function (key) {
                if (Array.isArray(obj[key]) && Array.isArray(finalObj[key])) {
                    finalObj[key] = finalObj[key].concat(obj[key]);
                }
                else {
                    finalObj[key] = obj[key];
                }
            });
        });
        return finalObj;
    };
    /**
     * Iterate over a plain object or array to deeply sanitize each value.
     *
     * @private
     * @param {object} obj The object to iterate over.
     * @returns {(object | null)} The sanitized object.
     * @memberof Sanitizer
     */
    Sanitizer.prototype._iterateOverObject = function (obj, options) {
        var _this = this;
        if (options === void 0) { options = {}; }
        try {
            var hasChanged_1 = false;
            var changedObj = void 0;
            if (Array.isArray(obj)) {
                changedObj = obj.reduce(function (prev, value) {
                    var validation = _this.validate(value, options);
                    if (validation.isValid) {
                        return prev.concat([value]);
                    }
                    else {
                        hasChanged_1 = true;
                        return prev.concat([validation.sanitized]);
                    }
                }, []);
            }
            else if (!lodash_isplainobject(obj)) {
                if (options.allowUndefined && typeof obj === "undefined") {
                    return;
                }
                return null;
            }
            else {
                var keys = Object.keys(obj);
                changedObj = keys.reduce(function (prev, key) {
                    var value = obj[key];
                    var validation = _this.validate(value, options);
                    if (validation.isValid) {
                        prev[key] = value;
                    }
                    else {
                        hasChanged_1 = true;
                        prev[key] = validation.sanitized;
                    }
                    return prev;
                }, {});
            }
            if (hasChanged_1) {
                return changedObj;
            }
            return obj;
        }
        catch (err) {
            return null;
        }
    };
    /**
     * Trim whitespace from the start and ends of a string.
     * @param {string} val The string to trim.
     * @returns {string} The trimmed string.
     */
    Sanitizer.prototype._trim = function (val) {
        // @ts-ignore This is used by Jest,
        // but TypeScript errors since it assumes `trim` is always available.
        return String.prototype.trim
            ? val.trim()
            : val.replace(/(^\s*)|(\s*$)/g, "");
    };
    return Sanitizer;
}());

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$2g,r$1n,o$1x=function(t){if("WebkitTransition"in t.style)i$2g="webkitTransitionEnd",r$1n="webkitAnimationEnd";else {if(!("transition"in t.style))throw new Error("Your browser is not supported!");i$2g="transitionend",r$1n="animationend";}},s$1V=function(t){i$2g||o$1x(t);},a$2M=function(t,e){return void 0===e&&(e=t+"-active"),function(n){s$1V(n);var o=!1,a=function(s){o||(o=!0,n.removeEventListener(i$2g,a),n.removeEventListener(r$1n,a),n.classList.remove(t),n.classList.remove(e));};n.classList.add(t),n.addEventListener(i$2g,a),n.addEventListener(r$1n,a),requestAnimationFrame((function(){n.classList.add(e);}));}},c$2X=function(t,e){return void 0===e&&(e=t+"-active"),function(n,o){s$1V(n);var a=!1,c=function(t){a||(a=!0,n.removeEventListener(i$2g,c),n.removeEventListener(r$1n,c),o());};n.classList.add(t),n.addEventListener(i$2g,c),n.addEventListener(r$1n,c),requestAnimationFrame((function(){n.classList.add(e);}));}};function l$2e(t){const n=t$1y.acquire();for(let e=0;e<arguments.length;e++){const t=arguments[e],i=typeof t;if("string"===i)n.push(t);else if(Array.isArray(t))n.push.apply(n,t);else if("object"===i)for(const e in t)t[e]&&n.push(e);}const i=n.join(" ");return t$1y.release(n),i}function d$1G(t){const e=null==t?void 0:t.closest("[dir]");return null!==e&&e instanceof HTMLElement&&"rtl"===e.dir||"rtl"===document.dir}function p$30(t){const e="data-node-ref";this[t.getAttribute(e)]=null;}function g$$(t){const e="data-node-ref";this[t.getAttribute(e)]=t;}function f$1o(t,e){return ("enter"===t?a$2M:c$2X)(e)}s$2h.getLogger("esri.widgets.support.widgetUtils");const m$1W=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup",...["animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"]],h$1p=m$1W.reduce(((t,e)=>(t[e]=[],t)),{}),v$N=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],L$s=new Sanitizer({whiteList:h$1p,onTagAttr:(t,e,n)=>{const i=`${e}="${n}"`;if(v$N.includes(e))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function w$R(t,e){const n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.top+n.height,o=i.top+i.height,s=n.top,a=i.top;(r>o||s<a)&&t.scrollIntoView({block:"end"});}function y$1k(t){return "Enter"===t||" "===t}function b$T(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function E$r(){return b$T().startsWith("dark")}function k$y(){return "calcite-theme-"+(E$r()?"dark":"light")}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$1s="http://www.w3.org/",r$1m=`${t$1s}2000/svg`,o$1w=`${t$1s}1999/xlink`;let i$2f,l$2d=[],n$2u=(e,t)=>{let r={};return Object.keys(e).forEach((t=>{r[t]=e[t];})),t&&Object.keys(t).forEach((e=>{r[e]=t[e];})),r},s$1U=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),p$2$=e=>{if("string"!=typeof e)throw new Error("Style values must be strings")},d$1F=(e,t,r)=>{if(""!==t.vnodeSelector)for(let o=r;o<e.length;o++)if(s$1U(e[o],t))return o;return -1},a$2L=(e,t,r,o)=>{let i=e[t];if(""===i.vnodeSelector)return;let l=i.properties;if(!(l?void 0===l.key?l.bind:l.key:void 0))for(let n=0;n<e.length;n++)if(n!==t){let t=e[n];if(s$1U(t,i))throw new Error(`${r.vnodeSelector} had a ${i.vnodeSelector} child ${"added"===o?o:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}},f$1n=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties);}},c$2W=[],u$1W=!1,h$1o=e=>{(e.children||[]).forEach(h$1o),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode]);},m$1V=()=>{u$1W=!1,c$2W.forEach(h$1o),c$2W.length=0;},v$M=e=>{c$2W.push(e),u$1W||(u$1W=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(m$1V,{timeout:16}):setTimeout(m$1V,16));},y$1j=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r){t.style.pointerEvents="none";let o=()=>{t.parentNode&&(t.parentNode.removeChild(t),v$M(e));};return void r(t,o,e.properties)}}t.parentNode&&(t.parentNode.removeChild(t),v$M(e));},g$_=(t,i,l)=>{if(!i)return;let n=l.eventHandlerInterceptor,s=Object.keys(i),d=s.length;for(let a=0;a<d;a++){let d=s[a],f=i[d];if("className"===d)throw new Error('Property "className" is not supported, use "class".');if("class"===d)x$C(t,f,!0);else if("classes"===d){let e=Object.keys(f),r=e.length;for(let o=0;o<r;o++){let r=e[o];f[r]&&t.classList.add(r);}}else if("styles"===d){let e=Object.keys(f),r=e.length;for(let o=0;o<r;o++){let r=e[o],i=f[r];i&&(p$2$(i),l.styleApplyer(t,r,i));}}else if("key"!==d&&null!=f){let s=typeof f;"function"===s?(0===d.lastIndexOf("on",0)&&(n&&(f=n(d,f,t,i)),"oninput"===d&&function(){let e=f;f=function(t){e.apply(this,[t]),t.target["oninput-value"]=t.target.value;};}()),t[d]=f):l.namespace===r$1m?"href"===d?t.setAttributeNS(o$1w,d,f):t.setAttribute(d,f):"string"===s&&"value"!==d?"innerHTML"===d?t[d]=L$s.sanitize(f):t.setAttribute(d,f):t[d]=f;}}},b$S=(e,t,r)=>{if(t)for(let o of t)w$Q(o,e,void 0,r);},N$p=(e,t,r)=>{b$S(e,t.children,r),t.text&&(e.textContent=t.text),g$_(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children]);},w$Q=(e,t,o,i)=>{let l,s=0,p=e.vnodeSelector,d=t.ownerDocument;if(""===p)l=e.domNode=d.createTextNode(e.text),void 0!==o?t.insertBefore(l,o):t.appendChild(l);else {for(let a=0;a<=p.length;++a){let f=p.charAt(a);if(a===p.length||"."===f||"#"===f){let f=p.charAt(s-1),c=p.slice(s,a);"."===f?l.classList.add(c):"#"===f?l.id=c:("svg"===c&&(i=n$2u(i,{namespace:r$1m})),void 0!==i.namespace?l=e.domNode=d.createElementNS(i.namespace,c):(l=e.domNode=e.domNode||d.createElement(c),"input"===c&&e.properties&&void 0!==e.properties.type&&l.setAttribute("type",e.properties.type)),void 0!==o?t.insertBefore(l,o):l.parentNode!==t&&t.appendChild(l)),s=a+1;}}N$p(l,e,i);}},x$C=(e,t,r)=>{t&&t.split(" ").forEach((t=>{t&&e.classList.toggle(t,r);}));},k$x=(t,i,l,n)=>{if(!l)return;let s=!1,d=Object.keys(l),a=d.length;for(let f=0;f<a;f++){let a=d[f],c=l[a],u=i[a];if("class"===a)u!==c&&(x$C(t,u,!1),x$C(t,c,!0));else if("classes"===a){let e=t.classList,r=Object.keys(c),o=r.length;for(let t=0;t<o;t++){let o=r[t],i=!!c[o];i!==!!u[o]&&(s=!0,i?e.add(o):e.remove(o));}}else if("styles"===a){let e=Object.keys(c),r=e.length;for(let o=0;o<r;o++){let r=e[o],i=c[r];i!==u[r]&&(s=!0,i?(p$2$(i),n.styleApplyer(t,r,i)):n.styleApplyer(t,r,""));}}else if(c||"string"!=typeof u||(c=""),"value"===a){let e=t[a];e!==c&&(t["oninput-value"]?e===t["oninput-value"]:c!==u)&&(t[a]=c,t["oninput-value"]=void 0),c!==u&&(s=!0);}else if(c!==u){let i=typeof c;"function"===i&&n.eventHandlerInterceptor||(n.namespace===r$1m?"href"===a?t.setAttributeNS(o$1w,a,c):t.setAttribute(a,c):"string"===i?"innerHTML"===a?t[a]=L$s.sanitize(c):"role"===a&&""===c?t.removeAttribute(a):t.setAttribute(a,c):t[a]!==c&&(t[a]=c),s=!0);}}return s},A$p=(e,t,r,o,n)=>{if(r===o)return !1;o=o||l$2d;let p,c=(r=r||l$2d).length,u=o.length,h=0,m=0,v=!1;for(;m<u;){let l=h<c?r[h]:void 0,u=o[m];if(void 0!==l&&s$1U(l,u))v=i$2f(l,u,n)||v,h++;else {let l=d$1F(r,u,h+1);if(l>=0){for(p=h;p<l;p++)y$1j(r[p]),a$2L(r,p,e,"removed");v=i$2f(r[l],u,n)||v,h=l+1;}else w$Q(u,t,h<c?r[h].domNode:void 0,n),f$1n(u),a$2L(o,m,e,"added");}m++;}if(c>h)for(p=h;p<c;p++)y$1j(r[p]),a$2L(r,p,e,"removed");return v};i$2f=(e,t,o)=>{let i=e.domNode,l=!1;if(e===t)return !1;let s=!1;if(""===t.vnodeSelector){if(t.text!==e.text){let e=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(e,i),t.domNode=e,l=!0,l}t.domNode=i;}else 0===t.vnodeSelector.lastIndexOf("svg",0)&&(o=n$2u(o,{namespace:r$1m})),e.text!==t.text&&(s=!0,void 0===t.text?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,s=A$p(t,i,e.children,t.children,o)||s,s=k$x(i,e.properties,t.properties,o)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,o,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),l};let S$E=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let o=e;e=r,i$2f(o,r,t);},domNode:e.domNode});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$2_={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,r,o)=>{"-"===r.charAt(0)?e.style.setProperty(r,o):e.style[r]=o;}};let d$1E=r=>n$2u(p$2_,r),n$2t={create:(e,t)=>(t=d$1E(t),w$Q(e,document.createElement("div"),void 0,t),S$E(e,t)),append:(e,t,p)=>(p=d$1E(p),w$Q(t,e,void 0,p),S$E(t,p)),insertBefore:(e,t,p)=>(p=d$1E(p),w$Q(t,e.parentNode,e,p),S$E(t,p)),merge:(e,r,p)=>(p=d$1E(p),r.domNode=e,N$p(e,r,p),S$E(r,p)),replace:(e,t,p)=>(p=d$1E(p),w$Q(t,e.parentNode,e,p),e.parentNode.removeChild(e),S$E(t,p))};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$1r,n$2s=(e,r)=>{let t=[];for(;e&&e!==r;)t.push(e),e=e.parentNode;return t};t$1r=Array.prototype.find?(e,r)=>e.find(r):(e,r)=>e.filter(r)[0];let o$1v=(e,r)=>{let n=e;return r.forEach((e=>{n=n&&n.children?t$1r(n.children,(r=>r.domNode===e)):void 0;})),n},d$1D=(e,r,t)=>{let d=function(d){t("domEvent",d);let i=r(),p=n$2s(d.currentTarget,i.domNode);p.reverse();let l,a=o$1v(i.getLastRender(),p);return e.scheduleRender(),a&&(l=a.properties[`on${d.type}`].apply(a.properties.bind||this,arguments)),t("domEventProcessed",d),l};return (e,r,t,n)=>d},i$2e=t=>{let n,o,i=d$1E(t),p=i.performanceLogger,l=!0,a=!1,s=[],c=[],u=(e,r,t)=>{let o,l=()=>o;i.eventHandlerInterceptor=d$1D(n,l,p),o=e(r,t(),i),s.push(o),c.push(t);},f=()=>{if(o=void 0,l){l=!1,p("renderStart",void 0);for(let e=0;e<s.length;e++){let r=c[e]();p("rendered",void 0),s[e].update(r),p("patched",void 0);}p("renderDone",void 0),l=!0;}};return n={renderNow:f,scheduleRender:()=>{o||a||(o=requestAnimationFrame(f));},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),a=!0;},resume:()=>{a=!1,l=!0,n.scheduleRender();},append:(e,t)=>{u(n$2t.append,e,t);},insertBefore:(e,t)=>{u(n$2t.insertBefore,e,t);},merge:(e,t)=>{u(n$2t.merge,e,t);},replace:(e,t)=>{u(n$2t.replace,e,t);},detach:e=>{for(let r=0;r<c.length;r++)if(c[r]===e)return c.splice(r,1),s.splice(r,1)[0];throw new Error("renderFunction was not found")}},n};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$1A={handleInterceptedEvent:(e,p,t,n)=>(e.scheduleRender(),p.properties[`on${n.type}`].apply(p.properties.bind||t,[n]))};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$1z={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,r,o)=>{e.style[r]=o;}},r$1l=r=>({...e$1z,...r});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$1u=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},n$2r=(e,t)=>e.find(t),d$1C=(e,t,r=!1)=>{let o=e;return t.forEach(((e,d)=>{var s;const i=null!=(s=o)&&s.children?n$2r(o.children,(t=>t.domNode===e)):void 0;r&&!i&&d!==t.length-1||(o=i);})),o},s$1T=n=>{let s;const i={...e$1A,...n},c=r$1l(i),a=c.performanceLogger;let l,m=!0,p=!1;const u=[],f=[],v=(e,t,r)=>{let n;c.eventHandlerInterceptor=(e,t,r,c)=>function(e){let t;a("domEvent",e);const r=o$1u(e.currentTarget,n.domNode),c=r.some((e=>{var t;return customElements.get(null==e||null==(t=e.tagName)?void 0:t.toLowerCase())}));if(e.eventPhase===Event.CAPTURING_PHASE||!c)r.reverse(),t=d$1C(n.getLastRender(),r);else {const r=e.composedPath(),o=r.slice(r.indexOf(e.currentTarget),r.indexOf(n.domNode)).filter((e=>e.getRootNode()===e.ownerDocument)).reverse();t=d$1C(n.getLastRender(),o,!0);}let l;return t&&(l=i.handleInterceptedEvent(s,t,this,e)),a("domEventProcessed",e),l},null==i.postProcessProjectionOptions||i.postProcessProjectionOptions(c);const l=r();n=e(t,l,c),u.push(n),f.push(r),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(n,l);};let h=()=>{if(l=void 0,m){m=!1,a("renderStart",void 0);for(let e=0;e<u.length;e++){const t=f[e]();a("rendered",void 0),u[e].update(t),a("patched",void 0);}a("renderDone",void 0),m=!0;}};return i.modifyDoRenderImplementation&&(h=i.modifyDoRenderImplementation(h,u,f)),s={renderNow:h,scheduleRender:()=>{l||p||(l=requestAnimationFrame(h));},stop:()=>{l&&(cancelAnimationFrame(l),l=void 0),p=!0;},resume:()=>{p=!1,m=!0,s.scheduleRender();},append:(t,r)=>{v(n$2t.append,t,r);},insertBefore:(t,r)=>{v(n$2t.insertBefore,t,r);},merge:(t,r)=>{v(n$2t.merge,t,r);},replace:(t,r)=>{v(n$2t.replace,t,r);},detach:e=>{for(let t=0;t<f.length;t++)if(f[t]===e)return f.splice(t,1),u.splice(t,1)[0];throw new Error("renderFunction was not found")}},s};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$1y;function r$1k(){setAssetPath(T$n(a$2O(e$1y)));}e$1y="components/assets";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$1q=Symbol("widget"),r$1j=[],n$2q={},o$1t=new WeakMap;function i$2d(e,t){let o=t.children;if(o&&o.length)for(let r=0;r<o.length;++r)o[r]=i$2d(e,o[r]);else o=r$1j;const s=t.vnodeSelector;if(c$2V(s)){const r=t.properties||n$2q,i=r.key||s;return {vnodeSelector:"div",properties:{key:i,afterCreate:d$1B,afterUpdate:a$2K,afterRemoved:l$2c,parentWidget:e,widgetConstructor:s,widgetProperties:{...r,key:i,children:o}},children:void 0,text:void 0,domNode:null}}return t}function d$1B(t,r,n,{parentWidget:i,widgetConstructor:d,widgetProperties:a}){const c=new d(a);c.container=t,o$1t.set(t,c),null==c.afterCreate||c.afterCreate(c,t),i._internalHandles.add(n$2L((()=>l$2c(t))));}function a$2K(e,t,r,{widgetProperties:n}){const i=o$1t.get(e);i&&(i.set(n),null==i.afterUpdate||i.afterUpdate(i,e));}function l$2c(e){const t=o$1t.get(e);t&&(t.destroy(),o$1t.delete(e));}function c$2V(e){return "function"==typeof e&&e[t$1q]}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const P$p="esri.widgets.Widget",E$q=s$2h.getLogger(P$p);let L$r=0;const N$o=new Map,I$w={widgetIcon:"esri-icon-checkbox-unchecked"};function F$k(e,t){for(const r in t)null!=e[r]&&("object"==typeof e[r]&&"object"==typeof t[r]?F$k(e[r],t[r]):e[r]=t[r]);return e}const U$k=s$1T({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(e,s,o,i)=>{const n=t(e,s,o,i),a=r.test(e);if(!((e=e.replace(r,"")).toLowerCase()in o)||a){const t=e[2].toLowerCase()+e.slice(3),r=e=>n.call(o,e);o.addEventListener(t,r,a);const s=()=>o.removeEventListener(t,r,a),d=i.afterRemoved;i.afterRemoved=e=>{null==d||d(e),s();};}return n};},handleInterceptedEvent(e,t,r,s){const{eventPhase:o,type:i}=s,n=o===Event.CAPTURING_PHASE;let a=`on${i}${n?"capture":""}`;const d=t.properties;(a in d||(a=`on${i[0].toUpperCase()}${i.slice(1)}${n?"Capture":""}`,a in d))&&(N$o.clear(),e.scheduleRender(),d[a].call(d.bind||r,s));}});let $$e=!1,x$B=class extends(n$2w(n$2y.EventedAccessor)){constructor(e,r){super(e,r),this._attached=!1,this._internalHandles=new u$1X,this._projector=U$k,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=I$w.widgetIcon,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=z$r((async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const e=await T$o(this._messageBundleProps.map((async({bundlePath:e,propertyName:t})=>{let r=await u$22(e);this.uiStrings&&Object.keys(this.uiStrings)&&(r=F$k(l$2r(r),this.uiStrings)),this[t]=r;})));for(const t of e)t.error&&E$q.error("widget-intl:locale-error",this.declaredClass,t.error);}await this.loadLocale();})),r$1k();const s=["light","dark"],n=b$T()||"light";s.includes(n)||s$1_(E$q,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});const a="esri-widget-uid-"+o$1z(),d=this.render.bind(this);this._trackingTarget=new s$1X((()=>this.scheduleRender()));const c=()=>{var e;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return {vnodeSelector:"div",properties:{key:a,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const t=d();let{properties:r}=t;r||(t.properties=r={});let{key:s,styles:o}=r;s||(r.key=a),o||(r.styles=o={}),o.display||(o.display="");let i=0;return null==(e=t.children)||e.forEach((e=>{if(c$2V(e.vnodeSelector))return;let{properties:t}=e;t||(e.properties=t={}),t.key||(t.key=`${this.id}--${i++}`);})),i$2d(this,t)};this.render=()=>{if($$e)return c();let e=N$o.get(this);if(e)return e;this._trackingTarget.clear(),$$e=!0;try{e=a$2$(this._trackingTarget,c);}finally{$$e=!1;}return N$o.set(this,e),e},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then((()=>{this._readyForTrueRender=!0,this._postInitialize();})));}normalizeCtorArgs(e,t){const r={...e};return t&&(r.container=t),r}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then((()=>{})).catch(w$V)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(this._trackingTarget=l$2t(this._trackingTarget),this.viewModel=l$2t(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,N$o.delete(this));}set container(e){this._get("container")||this._set("container",e);}castContainer(e){return e$1J(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+L$r++}set id(e){e&&this._set("id",e);}get renderable(){return this._resourcesFetch}get test(){return {projector:this._projector,handles:this._internalHandles}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(N$o.delete(this),this._projector.scheduleRender());}classes(...e){return l$2e.apply(this,e)}own(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this._internalHandles.add(e);}renderNow(){N$o.delete(this),this._projector.renderNow();}_postInitialize(){var e;if(this.destroyed)return;this.scheduleRender(),null!=(e=this._delegatedEventNames)&&e.length&&this._internalHandles.add(i$2i(this,"viewModel",((e,t)=>{t&&this._internalHandles.remove("delegated-events"),e&&this._internalHandles.add(this._delegatedEventNames.map((t=>e.on(t,(e=>{this.emit(t,e);})))),"delegated-events");}))),this.postInitialize();const t=async()=>{await this._loadLocale().catch(w$V),this.scheduleRender();};this._internalHandles.add([g$16(t),this.watch("uiStrings",t),a$2N(this,"container",(async e=>{this.destroyed||this._attach(e);}))]);}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0);}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1);}};x$B[t$1q]=!0,e$1_([d$1S()],x$B.prototype,"_readyForTrueRender",void 0),e$1_([d$1S({value:null})],x$B.prototype,"container",null),e$1_([c$2Y("container")],x$B.prototype,"castContainer",null),e$1_([d$1S({aliasOf:"container"})],x$B.prototype,"domNode",void 0),e$1_([d$1S()],x$B.prototype,"iconClass",void 0),e$1_([d$1S()],x$B.prototype,"id",null),e$1_([d$1S()],x$B.prototype,"label",void 0),e$1_([d$1S()],x$B.prototype,"renderable",null),e$1_([d$1S()],x$B.prototype,"uiStrings",void 0),e$1_([d$1S()],x$B.prototype,"viewModel",void 0),e$1_([d$1S()],x$B.prototype,"visible",void 0),e$1_([d$1S()],x$B.prototype,"key",void 0),e$1_([d$1S()],x$B.prototype,"children",void 0),e$1_([d$1S()],x$B.prototype,"afterCreate",void 0),e$1_([d$1S()],x$B.prototype,"afterUpdate",void 0),e$1_([d$1S()],x$B.prototype,"afterRemoved",void 0),x$B=e$1_([i$2w(P$p)],x$B);const z$n=x$B;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$2Z=class extends p$33{constructor(e){super(e),this._viewpointHandle=null,this._handles=new u$1X,this.group=null;}initialize(){this._handles.add($$f(this,"view.ui","expand",(e=>{const{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse();})));}destroy(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null;}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint();}set expanded(e){const t=!!e;this._set("expanded",t);const s=this.get("view.ui");s&&s.emit("expand",{target:this}),this._viewpointHandleChange(t);}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&d$1H(e,"ready",(()=>{this.view===e&&this._watchViewpoint();})));}_viewpointHandleChange(e){this._viewpointHandle&&(e?d$1H(this.view,"stationary",(()=>this._viewpointHandle.resume())):this._viewpointHandle.pause());}_watchViewpoint(){const e="viewpoint";this._handles.remove(e),this._viewpointHandle=null;const{autoCollapse:t,view:s}=this;if(s&&t){const t="3d"===s.type?"camera":"viewpoint",i=O$p(s,t,(()=>this._collapse()));this._handles.add(i,e),this._viewpointHandle=i;}}_collapse(){this.expanded=!1;}};e$1_([d$1S({value:!1})],p$2Z.prototype,"autoCollapse",null),e$1_([d$1S({value:!1})],p$2Z.prototype,"expanded",null),e$1_([d$1S()],p$2Z.prototype,"group",void 0),e$1_([d$1S({readOnly:!0})],p$2Z.prototype,"state",null),e$1_([d$1S({value:null})],p$2Z.prototype,"view",null),p$2Z=e$1_([i$2w("esri.widgets.Expand.ExpandViewModel")],p$2Z);const l$2b=p$2Z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$1p(){return function(n,t){if(!n[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return {value:o$1s(n[t])}}}function e$1x(n){const{type:t}=n;return n instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}function o$1s(t){return function(o,...r){e$1x(o)?y$1k(o.key)&&(o.preventDefault(),o.stopPropagation(),o.target.click()):t.call(this,o,...r);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1w(e){return function(s,n){s.hasOwnProperty("_messageBundleProps")||(s._messageBundleProps=s._messageBundleProps?s._messageBundleProps.slice():[]);s._messageBundleProps.push({bundlePath:e,propertyName:n});}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2p(n){return n.split(",").map((n=>n.trim()))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$1o(t){return a=>{a.hasOwnProperty("_delegatedEventNames")||(a._delegatedEventNames=a._delegatedEventNames?a._delegatedEventNames.slice():[]);const r=a._delegatedEventNames,s=Array.isArray(t)?t:n$2p(t);r.push(...s);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$1v=function(r){return {vnodeSelector:"",properties:void 0,children:void 0,text:r.toString(),domNode:null}},o$1r=function(r,t){for(var n=0,i=r.length;n<i;n++){var d=r[n];Array.isArray(d)?o$1r(d,t):null!=d&&!1!==d&&(d.hasOwnProperty("vnodeSelector")||(d=e$1v(d)),t.push(d));}},t$1n=function(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];if(1===t.length&&"string"==typeof t[0])return {vnodeSelector:r,properties:e||void 0,children:void 0,text:t[0],domNode:null};var i=[];return o$1r(t,i),{vnodeSelector:r,properties:e||void 0,children:i,text:void 0,domNode:null}};function n$2o(e,o,...n){return "function"!=typeof e||c$2V(e)?t$1n(e,o,...n):e(o,...n)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1u(e){return e&&"function"==typeof e.render}function t$1m(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$2U={base:"esri-expand esri-widget",modeAuto:"esri-expand--auto",modeDrawer:"esri-expand--drawer",modeFloating:"esri-expand--floating",container:"esri-expand__container",containerExpanded:"esri-expand__container--expanded",panel:"esri-expand__panel",button:"esri-widget--button",text:"esri-icon-font-fallback-text",icon:"esri-collapse__icon",iconExpanded:"esri-expand__icon--expanded",iconNumber:"esri-expand__icon-number",iconNumberExpanded:"esri-expand__icon-number--expanded",expandIcon:"esri-icon-expand",collapseIcon:"esri-icon-collapse",content:"esri-expand__content",contentExpanded:"esri-expand__content--expanded",expandMask:"esri-expand__mask",expandMaskExpanded:"esri-expand__mask--expanded"};let u$1V=class extends z$n{constructor(e,o){super(e,o),this.autoCollapse=null,this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expanded=null,this.expandTooltip="",this.group=null,this.iconNumber=0,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.view=null,this.viewModel=new l$2b,this._handleKeyDown=e=>{const{closeOnEsc:o,_toggleButtonEl:t,expanded:n}=this;if(!n||!o||e.target===t||"Escape"!==e.key)return;("function"==typeof o?o(e):o)&&(this.expanded=!1,null==t||t.focus());};}get contentId(){return `${this.id}_controls_content`}get expandTitle(){const{expanded:e,messagesCommon:o,collapseTooltip:t,expandTooltip:n}=this;return e?t||o.collapse:n||o.expand}get collapseIconClass(){return c$2U.collapseIcon}set collapseIconClass(e){e?this._override("collapseIconClass",e):this._clearOverride("collapseIconClass");}get expandIconClass(){return e$1u(this.content)?this.content.iconClass:c$2U.expandIcon}set expandIconClass(e){e?this._override("expandIconClass",e):this._clearOverride("expandIconClass");}expand(){this.viewModel.expanded=!0;}collapse(){this.viewModel.expanded=!1;}toggle(){this.viewModel.expanded=!this.viewModel.expanded;}render(){const{mode:e}=this,o={[c$2U.modeAuto]:"auto"===e,[c$2U.modeDrawer]:"drawer"===e,[c$2U.modeFloating]:"floating"===e};return n$2o("div",{class:this.classes(c$2U.base,o),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())}renderContainer(){const{expanded:e}=this,o={[c$2U.containerExpanded]:e};return n$2o("div",{class:this.classes(c$2U.container,o)},this.renderPanel(),this.renderContent())}renderMask(){const{expanded:e}=this,o={[c$2U.expandMaskExpanded]:e};return n$2o("div",{bind:this,onclick:this._toggle,class:this.classes(c$2U.expandMask,o)})}renderBadgeNumber(){const{expanded:e,iconNumber:o}=this;return o&&!e?n$2o("span",{key:"expand__icon-number",class:c$2U.iconNumber},o):null}renderPanelNumber(){const{iconNumber:e,expanded:o}=this;return e&&o?n$2o("span",{key:"expand__expand-icon-number",class:this.classes(c$2U.iconNumber,c$2U.iconNumberExpanded)},e):null}renderIcon(){const{collapseIconClass:e,expandIconClass:o,expanded:t}=this,n={[c$2U.iconExpanded]:t,[e]:t,[o]:!t};return e===o&&(n[e]=!0),n$2o("span",{"aria-hidden":"true",class:this.classes(c$2U.icon,n)})}renderTitle(){return n$2o("span",{class:c$2U.text},this.expandTitle)}renderExpandButton(){const{expanded:e,expandTitle:o,contentId:t}=this;return n$2o("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":t,"aria-expanded":e?"true":"false",bind:this,class:c$2U.button,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:o},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}renderPanel(){return n$2o("div",{class:c$2U.panel},this.renderExpandButton(),this.renderPanelNumber())}renderContent(){const{expanded:e,contentId:o}=this,t={[c$2U.contentExpanded]:e};return n$2o("div",{id:o,role:"region",class:this.classes(c$2U.content,t)},this.renderContentContainer())}renderContentContainer(){const e=this.content;return "string"==typeof e?n$2o("div",{innerHTML:e}):e$1u(e)?e.render():e instanceof HTMLElement?n$2o("div",{bind:e,afterCreate:this._attachToNode}):t$1m(e)?n$2o("div",{bind:e.domNode,afterCreate:this._attachToNode}):null}_toggle(){this.toggle();}_attachToNode(e){const o=this;e.appendChild(o);}_storeToggleButtonEl(e){this._toggleButtonEl=e;}};e$1_([d$1S({readOnly:!0})],u$1V.prototype,"contentId",null),e$1_([d$1S({readOnly:!0})],u$1V.prototype,"expandTitle",null),e$1_([o$1Q("viewModel.autoCollapse")],u$1V.prototype,"autoCollapse",void 0),e$1_([d$1S()],u$1V.prototype,"closeOnEsc",void 0),e$1_([d$1S()],u$1V.prototype,"collapseIconClass",null),e$1_([d$1S()],u$1V.prototype,"collapseTooltip",void 0),e$1_([d$1S()],u$1V.prototype,"content",void 0),e$1_([o$1Q("viewModel.expanded")],u$1V.prototype,"expanded",void 0),e$1_([d$1S()],u$1V.prototype,"expandIconClass",null),e$1_([d$1S()],u$1V.prototype,"expandTooltip",void 0),e$1_([o$1Q("viewModel.group")],u$1V.prototype,"group",void 0),e$1_([d$1S()],u$1V.prototype,"iconNumber",void 0),e$1_([d$1S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],u$1V.prototype,"label",void 0),e$1_([d$1S(),e$1w("esri/widgets/Expand/t9n/Expand")],u$1V.prototype,"messages",void 0),e$1_([d$1S(),e$1w("esri/t9n/common")],u$1V.prototype,"messagesCommon",void 0),e$1_([d$1S()],u$1V.prototype,"mode",void 0),e$1_([o$1Q("viewModel.view")],u$1V.prototype,"view",void 0),e$1_([d$1S({type:l$2b})],u$1V.prototype,"viewModel",void 0),e$1_([t$1p()],u$1V.prototype,"_toggle",null),u$1V=e$1_([i$2w("esri.widgets.Expand")],u$1V);const x$A=u$1V;

const arcgisExpandCss = "@import url('https://js.arcgis.com/next/esri/themes/light/main.css');";

let ArcGISSearch$1 = class extends HTMLElement {
  constructor() {
    super();
    this.__registerHost();
  }
  validateView(value) {
    if (value) {
      this.widget.view = value;
      this.widget.view.ui.add(this.widget, this.position);
    }
  }
  componentWillLoad() {
    const expand = new x$A({
      container: this.el
    });
    this.widget = expand;
  }
  componentDidRender() {
    const elems = Array.from(this.el.children);
    for (let e of elems) {
      if (e.tagName.toLowerCase().includes('arcgis-')) {
        e.view = this.view;
        this.widget.content = e;
        this.widget.expandIconClass = e.widget.iconClass;
      }
    }
  }
  render() {
    return (h$1F("div", { class: "expand-container" }));
  }
  get el() { return this; }
  static get watchers() { return {
    "view": ["validateView"]
  }; }
  static get style() { return arcgisExpandCss; }
};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$1t={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function r$1i(r){return e$1t[r]||e$1t[r.toLowerCase()]}function l$2a(r){var l;return null!=(l=e$1t[r])?l:e$1t[r.toLowerCase()]}function a$2J(e){return [...l$2a(e)]}function n$2n(e,r,l){l<0&&++l,l>1&&--l;const a=6*l;return a<1?e+(r-e)*a:2*l<1?r:3*l<2?e+(r-e)*(2/3-l)*6:e}function o$1q(e,r,l,a=1){const o=(e%360+360)%360/360,i=l<=.5?l*(r+1):l+r-l*r,t=2*l-i;return [Math.round(255*n$2n(t,i,o+1/3)),Math.round(255*n$2n(t,i,o)),Math.round(255*n$2n(t,i,o-1/3)),a]}function i$2c(e){const r=e.length>5,l=r?8:4,a=(1<<l)-1,n=r?1:17,o=r?9===e.length:5===e.length;let i=Number("0x"+e.substr(1));if(isNaN(i))return null;const t=[0,0,0,1];let u;return o&&(u=i&a,i>>=l,t[3]=n*u/255),u=i&a,i>>=l,t[2]=n*u,u=i&a,i>>=l,t[1]=n*u,u=i&a,i>>=l,t[0]=n*u,t}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2m(){return [0,0,0]}function t$1l(n){return [n[0],n[1],n[2]]}function r$1h(n,t,r){return [n,t,r]}function e$1s(t){const r=n$2m(),e=Math.min(3,t.length);for(let n=0;n<e;++n)r[n]=t[n];return r}function u$1U(n,t){return new Float64Array(n,t,3)}function a$2I(){return n$2m()}function o$1p(){return r$1h(1,1,1)}function s$1S(){return r$1h(1,0,0)}function c$2T(){return r$1h(0,1,0)}function i$2b(){return r$1h(0,0,1)}const f$1m=a$2I(),l$29=o$1p(),_$u=s$1S(),N$n=c$2T(),O$o=i$2b();Object.freeze({__proto__:null,create:n$2m,clone:t$1l,fromValues:r$1h,fromArray:e$1s,createView:u$1U,zeros:a$2I,ones:o$1p,unitX:s$1S,unitY:c$2T,unitZ:i$2b,ZEROS:f$1m,ONES:l$29,UNIT_X:_$u,UNIT_Y:N$n,UNIT_Z:O$o});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$2H=1e-6,t$1k=Math.random,e$1r=Math.PI/180,n$2l=180/Math.PI;function s$1R(a){return a*e$1r}function o$1o(a){return a*n$2l}function r$1g(t,e){return Math.abs(t-e)<=a$2H*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze({__proto__:null,EPSILON:a$2H,RANDOM:t$1k,toRadian:s$1R,toDegree:o$1o,equals:r$1g});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function s$1Q(t){const n=t[0],a=t[1],s=t[2];return Math.sqrt(n*n+a*a+s*s)}function r$1f(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function o$1n(t,n,a,s){return t[0]=n,t[1]=a,t[2]=s,t}function u$1T(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t[2]=n[2]+a[2],t}function c$2S(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t[2]=n[2]-a[2],t}function e$1q(t,n,a){return t[0]=n[0]*a[0],t[1]=n[1]*a[1],t[2]=n[2]*a[2],t}function i$2a(t,n,a){return t[0]=n[0]/a[0],t[1]=n[1]/a[1],t[2]=n[2]/a[2],t}function h$1n(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t}function M$w(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t}function f$1l(t,n,a){return t[0]=Math.min(n[0],a[0]),t[1]=Math.min(n[1],a[1]),t[2]=Math.min(n[2],a[2]),t}function l$28(t,n,a){return t[0]=Math.max(n[0],a[0]),t[1]=Math.max(n[1],a[1]),t[2]=Math.max(n[2],a[2]),t}function m$1U(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t}function d$1A(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t}function b$R(t,n,a,s){return t[0]=n[0]+a[0]*s,t[1]=n[1]+a[1]*s,t[2]=n[2]+a[2]*s,t}function q$k(t,n){const a=n[0]-t[0],s=n[1]-t[1],r=n[2]-t[2];return Math.sqrt(a*a+s*s+r*r)}function x$z(t,n){const a=n[0]-t[0],s=n[1]-t[1],r=n[2]-t[2];return a*a+s*s+r*r}function p$2Y(t){const n=t[0],a=t[1],s=t[2];return n*n+a*a+s*s}function v$L(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function g$Z(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function j$G(t,n){const a=n[0],s=n[1],r=n[2];let o=a*a+s*s+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o),t}function z$m(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function _$t(t,n,a){const s=n[0],r=n[1],o=n[2],u=a[0],c=a[1],e=a[2];return t[0]=r*e-o*c,t[1]=o*u-s*e,t[2]=s*c-r*u,t}function y$1i(t,n,a,s){const r=n[0],o=n[1],u=n[2];return t[0]=r+s*(a[0]-r),t[1]=o+s*(a[1]-o),t[2]=u+s*(a[2]-u),t}function A$o(t,n,a,s,r,o){const u=o*o,c=u*(2*o-3)+1,e=u*(o-2)+o,i=u*(o-1),h=u*(3-2*o);return t[0]=n[0]*c+a[0]*e+s[0]*i+r[0]*h,t[1]=n[1]*c+a[1]*e+s[1]*i+r[1]*h,t[2]=n[2]*c+a[2]*e+s[2]*i+r[2]*h,t}function D$p(t,n,a,s,r,o){const u=1-o,c=u*u,e=o*o,i=c*u,h=3*o*c,M=3*e*u,f=e*o;return t[0]=n[0]*i+a[0]*h+s[0]*M+r[0]*f,t[1]=n[1]*i+a[1]*h+s[1]*M+r[1]*f,t[2]=n[2]*i+a[2]*h+s[2]*M+r[2]*f,t}function E$p(t,n){n=n||1;const s=2*t$1k()*Math.PI,r=2*t$1k()-1,o=Math.sqrt(1-r*r)*n;return t[0]=Math.cos(s)*o,t[1]=Math.sin(s)*o,t[2]=r*n,t}function I$v(t,n,a){const s=n[0],r=n[1],o=n[2];return t[0]=a[0]*s+a[4]*r+a[8]*o+a[12],t[1]=a[1]*s+a[5]*r+a[9]*o+a[13],t[2]=a[2]*s+a[6]*r+a[10]*o+a[14],t}function L$q(t,n,a){const s=n[0],r=n[1],o=n[2];return t[0]=s*a[0]+r*a[3]+o*a[6],t[1]=s*a[1]+r*a[4]+o*a[7],t[2]=s*a[2]+r*a[5]+o*a[8],t}function P$o(t,n,a){const s=a[0],r=a[1],o=a[2],u=a[3],c=n[0],e=n[1],i=n[2];let h=r*i-o*e,M=o*c-s*i,f=s*e-r*c,l=r*f-o*M,m=o*h-s*f,d=s*M-r*h;const b=2*u;return h*=b,M*=b,f*=b,l*=2,m*=2,d*=2,t[0]=c+h+l,t[1]=e+M+m,t[2]=i+f+d,t}function O$n(t,n,a,s){const r=[],o=[];return r[0]=n[0]-a[0],r[1]=n[1]-a[1],r[2]=n[2]-a[2],o[0]=r[0],o[1]=r[1]*Math.cos(s)-r[2]*Math.sin(s),o[2]=r[1]*Math.sin(s)+r[2]*Math.cos(s),t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t}function Q$b(t,n,a,s){const r=[],o=[];return r[0]=n[0]-a[0],r[1]=n[1]-a[1],r[2]=n[2]-a[2],o[0]=r[2]*Math.sin(s)+r[0]*Math.cos(s),o[1]=r[1],o[2]=r[2]*Math.cos(s)-r[0]*Math.sin(s),t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t}function R$q(t,n,a,s){const r=[],o=[];return r[0]=n[0]-a[0],r[1]=n[1]-a[1],r[2]=n[2]-a[2],o[0]=r[0]*Math.cos(s)-r[1]*Math.sin(s),o[1]=r[0]*Math.sin(s)+r[1]*Math.cos(s),o[2]=r[2],t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t}function k$w(t,n){r$1f(w$P,t),r$1f(B$h,n),j$G(w$P,w$P),j$G(B$h,B$h);const a=z$m(w$P,B$h);return a>1?0:a<-1?Math.PI:Math.acos(a)}const w$P=n$2m(),B$h=n$2m();function C$u(t){return "vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function F$j(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function G$i(t,a){if(t===a)return !0;const s=t[0],r=t[1],o=t[2],u=a[0],c=a[1],e=a[2];return Math.abs(s-u)<=a$2H*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(r-c)<=a$2H*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-e)<=a$2H*Math.max(1,Math.abs(o),Math.abs(e))}function H$f(t,n,a){const s=a[0]-n[0],r=a[1]-n[1],o=a[2]-n[2];let u=s*s+r*r+o*o;return u>0?(u=1/Math.sqrt(u),t[0]=s*u,t[1]=r*u,t[2]=o*u,t):(t[0]=0,t[1]=0,t[2]=0,t)}const J$b=c$2S,K$a=e$1q,N$m=i$2a,S$D=q$k,X$b=x$z,Y$b=s$1Q,Z$a=p$2Y;Object.freeze({__proto__:null,length:s$1Q,copy:r$1f,set:o$1n,add:u$1T,subtract:c$2S,multiply:e$1q,divide:i$2a,ceil:h$1n,floor:M$w,min:f$1l,max:l$28,round:m$1U,scale:d$1A,scaleAndAdd:b$R,distance:q$k,squaredDistance:x$z,squaredLength:p$2Y,negate:v$L,inverse:g$Z,normalize:j$G,dot:z$m,cross:_$t,lerp:y$1i,hermite:A$o,bezier:D$p,random:E$p,transformMat4:I$v,transformMat3:L$q,transformQuat:P$o,rotateX:O$n,rotateY:Q$b,rotateZ:R$q,angle:k$w,str:C$u,exactEquals:F$j,equals:G$i,direction:H$f,sub:J$b,mul:K$a,div:N$m,dist:S$D,sqrDist:X$b,len:Y$b,sqrLen:Z$a});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function a$2G(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function r$1e(t,n,a,r,s){return t[0]=n,t[1]=a,t[2]=r,t[3]=s,t}function s$1P(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t[2]=n[2]+a[2],t[3]=n[3]+a[3],t}function u$1S(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t[2]=n[2]-a[2],t[3]=n[3]-a[3],t}function o$1m(t,n,a){return t[0]=n[0]*a[0],t[1]=n[1]*a[1],t[2]=n[2]*a[2],t[3]=n[3]*a[3],t}function e$1p(t,n,a){return t[0]=n[0]/a[0],t[1]=n[1]/a[1],t[2]=n[2]/a[2],t[3]=n[3]/a[3],t}function c$2R(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t}function i$29(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t}function h$1m(t,n,a){return t[0]=Math.min(n[0],a[0]),t[1]=Math.min(n[1],a[1]),t[2]=Math.min(n[2],a[2]),t[3]=Math.min(n[3],a[3]),t}function M$v(t,n,a){return t[0]=Math.max(n[0],a[0]),t[1]=Math.max(n[1],a[1]),t[2]=Math.max(n[2],a[2]),t[3]=Math.max(n[3],a[3]),t}function f$1k(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t}function l$27(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a,t}function m$1T(t,n,a,r){return t[0]=n[0]+a[0]*r,t[1]=n[1]+a[1]*r,t[2]=n[2]+a[2]*r,t[3]=n[3]+a[3]*r,t}function d$1z(t,n){const a=n[0]-t[0],r=n[1]-t[1],s=n[2]-t[2],u=n[3]-t[3];return Math.sqrt(a*a+r*r+s*s+u*u)}function b$Q(t,n){const a=n[0]-t[0],r=n[1]-t[1],s=n[2]-t[2],u=n[3]-t[3];return a*a+r*r+s*s+u*u}function x$y(t){const n=t[0],a=t[1],r=t[2],s=t[3];return Math.sqrt(n*n+a*a+r*r+s*s)}function q$j(t){const n=t[0],a=t[1],r=t[2],s=t[3];return n*n+a*a+r*r+s*s}function p$2X(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t}function v$K(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t}function g$Y(t,n){const a=n[0],r=n[1],s=n[2],u=n[3];let o=a*a+r*r+s*s+u*u;return o>0&&(o=1/Math.sqrt(o),t[0]=a*o,t[1]=r*o,t[2]=s*o,t[3]=u*o),t}function _$s(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function j$F(t,n,a,r){const s=n[0],u=n[1],o=n[2],e=n[3];return t[0]=s+r*(a[0]-s),t[1]=u+r*(a[1]-u),t[2]=o+r*(a[2]-o),t[3]=e+r*(a[3]-e),t}function w$O(t,a){let r,s,u,o,e,c;a=a||1;do{r=2*t$1k()-1,s=2*t$1k()-1,e=r*r+s*s;}while(e>=1);do{u=2*t$1k()-1,o=2*t$1k()-1,c=u*u+o*o;}while(c>=1);const i=Math.sqrt((1-e)/c);return t[0]=a*r,t[1]=a*s,t[2]=a*u*i,t[3]=a*o*i,t}function y$1h(t,n,a){const r=n[0],s=n[1],u=n[2],o=n[3];return t[0]=a[0]*r+a[4]*s+a[8]*u+a[12]*o,t[1]=a[1]*r+a[5]*s+a[9]*u+a[13]*o,t[2]=a[2]*r+a[6]*s+a[10]*u+a[14]*o,t[3]=a[3]*r+a[7]*s+a[11]*u+a[15]*o,t}function z$l(t,n,a){const r=n[0],s=n[1],u=n[2],o=a[0],e=a[1],c=a[2],i=a[3],h=i*r+e*u-c*s,M=i*s+c*r-o*u,f=i*u+o*s-e*r,l=-o*r-e*s-c*u;return t[0]=h*i+l*-o+M*-c-f*-e,t[1]=M*i+l*-e+f*-o-h*-c,t[2]=f*i+l*-c+h*-e-M*-o,t[3]=n[3],t}function A$n(t){return "vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function D$o(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function E$o(n,a){const r=n[0],s=n[1],u=n[2],o=n[3],e=a[0],c=a[1],i=a[2],h=a[3];return Math.abs(r-e)<=a$2H*Math.max(1,Math.abs(r),Math.abs(e))&&Math.abs(s-c)<=a$2H*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(u-i)<=a$2H*Math.max(1,Math.abs(u),Math.abs(i))&&Math.abs(o-h)<=a$2H*Math.max(1,Math.abs(o),Math.abs(h))}const L$p=u$1S,k$v=o$1m,B$g=e$1p,C$t=d$1z,F$i=b$Q,G$h=x$y,H$e=q$j;Object.freeze({__proto__:null,copy:a$2G,set:r$1e,add:s$1P,subtract:u$1S,multiply:o$1m,divide:e$1p,ceil:c$2R,floor:i$29,min:h$1m,max:M$v,round:f$1k,scale:l$27,scaleAndAdd:m$1T,distance:d$1z,squaredDistance:b$Q,length:x$y,squaredLength:q$j,negate:p$2X,inverse:v$K,normalize:g$Y,dot:_$s,lerp:j$F,random:w$O,transformMat4:y$1h,transformQuat:z$l,str:A$n,exactEquals:D$o,equals:E$o,sub:L$p,mul:k$v,div:B$g,dist:C$t,sqrDist:F$i,len:G$h,sqrLen:H$e});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u$1R=new Float32Array(1);function a$2F(n){--n;for(let t=1;t<32;t<<=1)n|=n>>t;return n+1}function e$1o(n,t,r){return Math.min(Math.max(n,t),r)}function o$1l(n){return 0==(n&n-1)}function c$2Q(n){return n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,++n}function s$1O(n,t,r){return n+(t-n)*r}function M$u(n){return n*Math.PI/180}function m$1S(n){return 180*n/Math.PI}function l$26(n){return Math.acos(e$1o(n,-1,1))}function b$P(n){return Math.asin(e$1o(n,-1,1))}function j$E(n){return k$u(Math.max(-w$N,Math.min(n,w$N)))}function k$u(n){return u$1R[0]=n,u$1R[0]}function P$n(r,u){const a=s$1Q(r),e=b$P(r[2]/a),i=Math.atan2(r[1]/a,r[0]/a);return o$1n(u,a,e,i),u}const w$N=k$u(34028234663852886e22);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function a$2E(t){return e$1o(s$2g(t),0,255)}function o$1k(t,r,s){return t=Number(t),isNaN(t)?s:t<r?r:t>s?s:t}class h$1l{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t);}static blendColors(t,r,s,i=new h$1l){return i.r=Math.round(t.r+(r.r-t.r)*s),i.g=Math.round(t.g+(r.g-t.g)*s),i.b=Math.round(t.b+(r.b-t.b)*s),i.a=t.a+(r.a-t.a)*s,i._sanitize()}static fromRgb(r,s){const i=r.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(i){const r=i[2].split(/\s*,\s*/),e=i[1];if("rgb"===e&&3===r.length||"rgba"===e&&4===r.length){const t=r[0];if("%"===t.charAt(t.length-1)){const t=r.map((t=>2.56*parseFloat(t)));return 4===r.length&&(t[3]=parseFloat(r[3])),h$1l.fromArray(t,s)}return h$1l.fromArray(r.map((t=>parseFloat(t))),s)}if("hsl"===e&&3===r.length||"hsla"===e&&4===r.length)return h$1l.fromArray(o$1q(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100,parseFloat(r[3])),s)}return null}static fromHex(t,r=new h$1l){if(4!==t.length&&7!==t.length||"#"!==t[0])return null;const s=4===t.length?4:8,i=(1<<s)-1;let e=Number("0x"+t.substr(1));return isNaN(e)?null:(["b","g","r"].forEach((t=>{const n=e&i;e>>=s,r[t]=4===s?17*n:n;})),r.a=1,r)}static fromArray(t,r=new h$1l){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,i){const e=r$1i(t)?l$2a(t):null;return e&&h$1l.fromArray(e,i)||h$1l.fromRgb(t,i)||h$1l.fromHex(t,i)}static fromJSON(t){return t&&new h$1l([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return r$1G(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return r$1G(t)?[t.r/255,t.g/255,t.b/255,null!=t.a?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){if("string"==typeof t)h$1l.fromString(t,this);else if(Array.isArray(t))h$1l.fromArray(t,this);else {var r,s,i,e;this._set(null!=(r=t.r)?r:0,null!=(s=t.g)?s:0,null!=(i=t.b)?i:0,null!=(e=t.a)?e:1),t instanceof h$1l||this._sanitize();}return this}toRgb(){return [this.r,this.g,this.b]}toRgba(){return [this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),r=this.g.toString(16),s=this.b.toString(16);return `#${t.length<2?"0"+t:t}${r.length<2?"0"+r:r}${s.length<2?"0"+s:s}`}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=0){const r=a$2E(this.r),s=a$2E(this.g),i=a$2E(this.b);return 0===t||1!==this.a?[r,s,i,a$2E(255*this.a)]:[r,s,i]}clone(){return new h$1l(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}_sanitize(){return this.r=Math.round(o$1k(this.r,0,255)),this.g=Math.round(o$1k(this.g,0,255)),this.b=Math.round(o$1k(this.b,0,255)),this.a=o$1k(this.a,0,1),this}_set(t,r,s,i){this.r=t,this.g=r,this.b=s,this.a=i;}}h$1l.prototype.declaredClass="esri.Color";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$1d(r,o={}){var l;const a=r instanceof o$1K?r:new o$1K(r,o),t={type:null==(l=null==o?void 0:o.ignoreUnknown)||l?a.apiValues:String,readOnly:null==o?void 0:o.readOnly,json:{type:a.jsonValues,read:(null==o||!o.readOnly)&&{reader:a.read},write:{writer:a.write}}};return void 0!==(null==o?void 0:o.default)&&(t.json.default=o.default),void 0!==(null==o?void 0:o.name)&&(t.json.name=o.name),d$1S(t)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function o$1j(o,e,t){let a,c;return void 0===e||Array.isArray(e)?(c=o,t=e,a=[void 0]):(c=e,a=Array.isArray(o)?o:[o]),(o,e)=>{const d=o.constructor.prototype;a.forEach((a=>{const s=y$1r(o,a,c);s.read&&"object"==typeof s.read||(s.read={}),s.read.reader=d[e],t&&(s.read.source=(s.read.source||[]).concat(t));}));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$1c(r,o,e){let i,n;return void 0===o?(n=r,i=[void 0]):"string"!=typeof o?(n=r,i=[void 0],e=o):(n=o,i=Array.isArray(r)?r:[r]),(r,o)=>{const p=r.constructor.prototype;for(const c of i){const i=y$1r(r,c,n);i.write&&"object"==typeof i.write||(i.write={}),e&&(i.write.target=e),i.write.writer=p[o];}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$1n;function a$2D(n,a){switch(n.type){case"range":{const r="range"in n?n.range[0]:n.minValue,u="range"in n?n.range[1]:n.maxValue;if(+a<r||+a>u)return e$1n.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==n.codedValues||n.codedValues.every((e=>null==e||e.code!==a)))return e$1n.INVALID_CODED_VALUE}return null}!function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";}(e$1n||(e$1n={}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function s$1N(e,r,n){if(!e||!e.read||!1===e.read.enabled||!e.read.source)return !1;const o=e.read.source;if("string"==typeof o){if(o===r)return !0;if(o.indexOf(".")>-1&&0===o.indexOf(r)&&s$2e(o,n))return !0}else for(const s of o){if(s===r)return !0;if(s.indexOf(".")>-1&&0===s.indexOf(r)&&s$2e(s,n))return !0}return !1}function i$28(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)}function a$2C(e,t,r,o,a){let f=o$1M(t[r],a);i$28(f)&&(e[r]=!0);for(const i of Object.getOwnPropertyNames(t))f=o$1M(t[i],a),s$1N(f,r,o)&&(e[i]=!0);}function f$1j(e,t,r,n){const s=r.metadatas,i=a$2Y(s[t],"any",n),a=i&&i.default;if(void 0===a)return;const f="function"==typeof a?a.call(e,t,n):a;void 0!==f&&r.set(t,f);}const c$2P={origin:"service"};function u$1Q(t,o,s=c$2P){if(!o||"object"!=typeof o)return;const i=e$1T(t),u=i.metadatas,d={};for(const e of Object.getOwnPropertyNames(o))a$2C(d,u,e,o,s);i.setDefaultOrigin(s.origin);for(const r of Object.getOwnPropertyNames(d)){const a=o$1M(u[r],s).read,f=a&&a.source;let c;c=f&&"string"==typeof f?u$2b(o,f):o[r],a&&a.reader&&(c=a.reader.call(t,c,o,s)),void 0!==c&&i.set(r,c);}if(!s||!s.ignoreDefaults)for(const e of Object.getOwnPropertyNames(u))d[e]||f$1j(t,e,i,s);i.setDefaultOrigin("user");}function d$1y(e,t,r,n=c$2P){var o;const s={...n,messages:[]};r(s),null==(o=s.messages)||o.forEach((t=>{"warning"!==t.type||e.loaded?n&&n.messages&&n.messages.push(t):e.loadWarnings.push(t);}));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$25=s$2h.getLogger("esri.core.accessorSupport.write");function a$2B(r,e,t,i,n){var o,s;const u={};return null==(o=e.write)||null==(s=o.writer)||s.call(r,i,u,t,n),u}function f$1i(r,t,i,o,s,u){if(!o||!o.write)return !1;const a=r.get(i);if(!s&&o.write.overridePolicy){const e=o.write.overridePolicy.call(r,a,i,u);void 0!==e&&(s=e);}if(s||(s=o.write),!s||!1===s.enabled)return !1;if((null===a&&!s.allowNull&&!s.writerEnsuresNonNull||void 0===a)&&s.isRequired){const t=new s$29("web-document-write:property-required",`Missing value for required property '${i}' on '${r.declaredClass}'`,{propertyName:i,target:r});return t&&u&&u.messages?u.messages.push(t):t&&!u&&l$25.error(t.name,t.message),!1}if(void 0===a)return !1;if(null===a&&!s.allowNull&&!s.writerEnsuresNonNull)return !1;if(c$2O(r,i,u,o,a))return !1;if(void 0!==o.default)return !0;if(!s.ignoreOrigin&&u&&u.origin){if(t.store.originOf(i)<t$1z(u.origin))return !1}return !0}function c$2O(e,t,i,n,o){const s=n.default;if(void 0===s)return !1;if(null!=n.defaultEquals)return n.defaultEquals(o);if("function"==typeof s){if(Array.isArray(o)){const n=s.call(e,t,i);return l$2s(n,o)}return !1}return s===o}function g$X(r,e,t,i){const n=e$1T(r),s=n.metadatas,l=s$27(s[e],i);return !!l&&f$1i(r,n,e,l,t,i)}function p$2W(r,e,t){if(r&&"function"==typeof r.toJSON&&(!r.toJSON.isDefaultToJSON||!r.write))return u$2c(e,r.toJSON());const n=e$1T(r),l=n.metadatas;for(const o in l){const p=s$27(l[o],t);if(!f$1i(r,n,o,p,void 0,t))continue;const d=r.get(o),m=a$2B(r,p,p.write&&"string"==typeof p.write.target?p.write.target:o,d,t);var c,g;if(Object.keys(m).length>0)e=u$2c(e,m),null!=t&&null!=(c=t.resources)&&null!=(g=c.pendingOperations)&&g.length&&Promise.all(t.resources.pendingOperations).then((()=>u$2c(e,m))),t&&t.writtenProperties&&t.writtenProperties.push({target:r,propName:o,oldOrigin:c$30(n.store.originOf(o)),newOrigin:t.origin});}return e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$27=t=>{let i=class extends t{constructor(...r){super(...r);}read(r,t){u$1Q(this,r,t);}write(r={},t){return p$2W(this,r,t)}toJSON(r){return this.write({},r)}static fromJSON(r,t){return c$2N.call(this,r,t)}};return i=e$1_([i$2w("esri.core.JSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function c$2N(r,t){if(!r)return null;if(r.declaredClass)throw new Error("JSON object is already hydrated");const s=new this;return s.read(r,t),s}let a$2A=class extends(i$27(p$33)){};a$2A=e$1_([i$2w("esri.core.JSONSupport")],a$2A);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let o$1i;const r$1b={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(o$1i=2e3;o$1i<=2045;o$1i++)r$1b[o$1i]=0;for(o$1i=2056;o$1i<=2065;o$1i++)r$1b[o$1i]=0;for(o$1i=2067;o$1i<=2135;o$1i++)r$1b[o$1i]=0;for(o$1i=2137;o$1i<=2154;o$1i++)r$1b[o$1i]=0;for(o$1i=2161;o$1i<=2170;o$1i++)r$1b[o$1i]=0;for(o$1i=2172;o$1i<=2193;o$1i++)r$1b[o$1i]=0;for(o$1i=2195;o$1i<=2198;o$1i++)r$1b[o$1i]=0;for(o$1i=2200;o$1i<=2203;o$1i++)r$1b[o$1i]=0;for(o$1i=2205;o$1i<=2217;o$1i++)r$1b[o$1i]=0;for(o$1i=2222;o$1i<=2224;o$1i++)r$1b[o$1i]=1;for(o$1i=2225;o$1i<=2250;o$1i++)r$1b[o$1i]=2;for(o$1i=2251;o$1i<=2253;o$1i++)r$1b[o$1i]=1;for(o$1i=2257;o$1i<=2264;o$1i++)r$1b[o$1i]=2;for(o$1i=2274;o$1i<=2279;o$1i++)r$1b[o$1i]=2;for(o$1i=2280;o$1i<=2282;o$1i++)r$1b[o$1i]=1;for(o$1i=2283;o$1i<=2289;o$1i++)r$1b[o$1i]=2;for(o$1i=2290;o$1i<=2292;o$1i++)r$1b[o$1i]=0;for(o$1i=2308;o$1i<=2313;o$1i++)r$1b[o$1i]=0;for(o$1i=2315;o$1i<=2491;o$1i++)r$1b[o$1i]=0;for(o$1i=2494;o$1i<=2866;o$1i++)r$1b[o$1i]=0;for(o$1i=2867;o$1i<=2869;o$1i++)r$1b[o$1i]=1;for(o$1i=2870;o$1i<=2888;o$1i++)r$1b[o$1i]=2;for(o$1i=2891;o$1i<=2895;o$1i++)r$1b[o$1i]=2;for(o$1i=2896;o$1i<=2898;o$1i++)r$1b[o$1i]=1;for(o$1i=2902;o$1i<=2908;o$1i++)r$1b[o$1i]=2;for(o$1i=2915;o$1i<=2920;o$1i++)r$1b[o$1i]=2;for(o$1i=2921;o$1i<=2923;o$1i++)r$1b[o$1i]=1;for(o$1i=2924;o$1i<=2930;o$1i++)r$1b[o$1i]=2;for(o$1i=2931;o$1i<=2962;o$1i++)r$1b[o$1i]=0;for(o$1i=2964;o$1i<=2968;o$1i++)r$1b[o$1i]=2;for(o$1i=2969;o$1i<=2973;o$1i++)r$1b[o$1i]=0;for(o$1i=2975;o$1i<=2991;o$1i++)r$1b[o$1i]=0;for(o$1i=2995;o$1i<=3051;o$1i++)r$1b[o$1i]=0;for(o$1i=3054;o$1i<=3079;o$1i++)r$1b[o$1i]=0;for(o$1i=3081;o$1i<=3088;o$1i++)r$1b[o$1i]=0;for(o$1i=3092;o$1i<=3101;o$1i++)r$1b[o$1i]=0;for(o$1i=3106;o$1i<=3138;o$1i++)r$1b[o$1i]=0;for(o$1i=3146;o$1i<=3151;o$1i++)r$1b[o$1i]=0;for(o$1i=3153;o$1i<=3166;o$1i++)r$1b[o$1i]=0;for(o$1i=3168;o$1i<=3172;o$1i++)r$1b[o$1i]=0;for(o$1i=3174;o$1i<=3203;o$1i++)r$1b[o$1i]=0;for(o$1i=3294;o$1i<=3358;o$1i++)r$1b[o$1i]=0;for(o$1i=3367;o$1i<=3403;o$1i++)r$1b[o$1i]=0;for(o$1i=3408;o$1i<=3416;o$1i++)r$1b[o$1i]=0;for(o$1i=3417;o$1i<=3438;o$1i++)r$1b[o$1i]=2;for(o$1i=3441;o$1i<=3446;o$1i++)r$1b[o$1i]=2;for(o$1i=3447;o$1i<=3450;o$1i++)r$1b[o$1i]=0;for(o$1i=3451;o$1i<=3459;o$1i++)r$1b[o$1i]=2;for(o$1i=3460;o$1i<=3478;o$1i++)r$1b[o$1i]=0;for(o$1i=3554;o$1i<=3559;o$1i++)r$1b[o$1i]=0;for(o$1i=3560;o$1i<=3570;o$1i++)r$1b[o$1i]=2;for(o$1i=3571;o$1i<=3581;o$1i++)r$1b[o$1i]=0;for(o$1i=3594;o$1i<=3597;o$1i++)r$1b[o$1i]=0;for(o$1i=3601;o$1i<=3604;o$1i++)r$1b[o$1i]=0;for(o$1i=3637;o$1i<=3639;o$1i++)r$1b[o$1i]=0;for(o$1i=3665;o$1i<=3667;o$1i++)r$1b[o$1i]=0;for(o$1i=3693;o$1i<=3695;o$1i++)r$1b[o$1i]=0;for(o$1i=3701;o$1i<=3727;o$1i++)r$1b[o$1i]=0;for(o$1i=3728;o$1i<=3739;o$1i++)r$1b[o$1i]=2;for(o$1i=3740;o$1i<=3751;o$1i++)r$1b[o$1i]=0;for(o$1i=3753;o$1i<=3760;o$1i++)r$1b[o$1i]=2;for(o$1i=3761;o$1i<=3773;o$1i++)r$1b[o$1i]=0;for(o$1i=3775;o$1i<=3777;o$1i++)r$1b[o$1i]=0;for(o$1i=3779;o$1i<=3781;o$1i++)r$1b[o$1i]=0;for(o$1i=3783;o$1i<=3785;o$1i++)r$1b[o$1i]=0;for(o$1i=3788;o$1i<=3791;o$1i++)r$1b[o$1i]=0;for(o$1i=3797;o$1i<=3802;o$1i++)r$1b[o$1i]=0;for(o$1i=3814;o$1i<=3816;o$1i++)r$1b[o$1i]=0;for(o$1i=3825;o$1i<=3829;o$1i++)r$1b[o$1i]=0;for(o$1i=3832;o$1i<=3841;o$1i++)r$1b[o$1i]=0;for(o$1i=3844;o$1i<=3852;o$1i++)r$1b[o$1i]=0;for(o$1i=3873;o$1i<=3885;o$1i++)r$1b[o$1i]=0;for(o$1i=3890;o$1i<=3893;o$1i++)r$1b[o$1i]=0;for(o$1i=3907;o$1i<=3912;o$1i++)r$1b[o$1i]=0;for(o$1i=3942;o$1i<=3950;o$1i++)r$1b[o$1i]=0;for(o$1i=3968;o$1i<=3970;o$1i++)r$1b[o$1i]=0;for(o$1i=3973;o$1i<=3976;o$1i++)r$1b[o$1i]=0;for(o$1i=3986;o$1i<=3989;o$1i++)r$1b[o$1i]=0;for(o$1i=3994;o$1i<=3997;o$1i++)r$1b[o$1i]=0;for(o$1i=4048;o$1i<=4051;o$1i++)r$1b[o$1i]=0;for(o$1i=4056;o$1i<=4063;o$1i++)r$1b[o$1i]=0;for(o$1i=4093;o$1i<=4096;o$1i++)r$1b[o$1i]=0;for(o$1i=4390;o$1i<=4398;o$1i++)r$1b[o$1i]=0;for(o$1i=4399;o$1i<=4413;o$1i++)r$1b[o$1i]=2;for(o$1i=4418;o$1i<=4433;o$1i++)r$1b[o$1i]=2;for(o$1i=4455;o$1i<=4457;o$1i++)r$1b[o$1i]=2;for(o$1i=4484;o$1i<=4489;o$1i++)r$1b[o$1i]=0;for(o$1i=4491;o$1i<=4554;o$1i++)r$1b[o$1i]=0;for(o$1i=4568;o$1i<=4589;o$1i++)r$1b[o$1i]=0;for(o$1i=4652;o$1i<=4656;o$1i++)r$1b[o$1i]=0;for(o$1i=4766;o$1i<=4800;o$1i++)r$1b[o$1i]=0;for(o$1i=5014;o$1i<=5016;o$1i++)r$1b[o$1i]=0;for(o$1i=5069;o$1i<=5072;o$1i++)r$1b[o$1i]=0;for(o$1i=5105;o$1i<=5130;o$1i++)r$1b[o$1i]=0;for(o$1i=5173;o$1i<=5188;o$1i++)r$1b[o$1i]=0;for(o$1i=5253;o$1i<=5259;o$1i++)r$1b[o$1i]=0;for(o$1i=5269;o$1i<=5275;o$1i++)r$1b[o$1i]=0;for(o$1i=5292;o$1i<=5311;o$1i++)r$1b[o$1i]=0;for(o$1i=5329;o$1i<=5331;o$1i++)r$1b[o$1i]=0;for(o$1i=5343;o$1i<=5349;o$1i++)r$1b[o$1i]=0;for(o$1i=5355;o$1i<=5357;o$1i++)r$1b[o$1i]=0;for(o$1i=5387;o$1i<=5389;o$1i++)r$1b[o$1i]=0;for(o$1i=5459;o$1i<=5463;o$1i++)r$1b[o$1i]=0;for(o$1i=5479;o$1i<=5482;o$1i++)r$1b[o$1i]=0;for(o$1i=5518;o$1i<=5520;o$1i++)r$1b[o$1i]=0;for(o$1i=5530;o$1i<=5539;o$1i++)r$1b[o$1i]=0;for(o$1i=5550;o$1i<=5552;o$1i++)r$1b[o$1i]=0;for(o$1i=5562;o$1i<=5583;o$1i++)r$1b[o$1i]=0;for(o$1i=5623;o$1i<=5625;o$1i++)r$1b[o$1i]=2;for(o$1i=5631;o$1i<=5639;o$1i++)r$1b[o$1i]=0;for(o$1i=5649;o$1i<=5653;o$1i++)r$1b[o$1i]=0;for(o$1i=5663;o$1i<=5680;o$1i++)r$1b[o$1i]=0;for(o$1i=5682;o$1i<=5685;o$1i++)r$1b[o$1i]=0;for(o$1i=5875;o$1i<=5877;o$1i++)r$1b[o$1i]=0;for(o$1i=5896;o$1i<=5899;o$1i++)r$1b[o$1i]=0;for(o$1i=5921;o$1i<=5940;o$1i++)r$1b[o$1i]=0;for(o$1i=6050;o$1i<=6125;o$1i++)r$1b[o$1i]=0;for(o$1i=6244;o$1i<=6275;o$1i++)r$1b[o$1i]=0;for(o$1i=6328;o$1i<=6348;o$1i++)r$1b[o$1i]=0;for(o$1i=6350;o$1i<=6356;o$1i++)r$1b[o$1i]=0;for(o$1i=6366;o$1i<=6372;o$1i++)r$1b[o$1i]=0;for(o$1i=6381;o$1i<=6387;o$1i++)r$1b[o$1i]=0;for(o$1i=6393;o$1i<=6404;o$1i++)r$1b[o$1i]=0;for(o$1i=6480;o$1i<=6483;o$1i++)r$1b[o$1i]=0;for(o$1i=6511;o$1i<=6514;o$1i++)r$1b[o$1i]=0;for(o$1i=6579;o$1i<=6581;o$1i++)r$1b[o$1i]=0;for(o$1i=6619;o$1i<=6624;o$1i++)r$1b[o$1i]=0;for(o$1i=6625;o$1i<=6627;o$1i++)r$1b[o$1i]=2;for(o$1i=6628;o$1i<=6632;o$1i++)r$1b[o$1i]=0;for(o$1i=6634;o$1i<=6637;o$1i++)r$1b[o$1i]=0;for(o$1i=6669;o$1i<=6692;o$1i++)r$1b[o$1i]=0;for(o$1i=6707;o$1i<=6709;o$1i++)r$1b[o$1i]=0;for(o$1i=6720;o$1i<=6723;o$1i++)r$1b[o$1i]=0;for(o$1i=6732;o$1i<=6738;o$1i++)r$1b[o$1i]=0;for(o$1i=6931;o$1i<=6933;o$1i++)r$1b[o$1i]=0;for(o$1i=6956;o$1i<=6959;o$1i++)r$1b[o$1i]=0;for(o$1i=7005;o$1i<=7007;o$1i++)r$1b[o$1i]=0;for(o$1i=7057;o$1i<=7070;o$1i++)r$1b[o$1i]=2;for(o$1i=7074;o$1i<=7082;o$1i++)r$1b[o$1i]=0;for(o$1i=7109;o$1i<=7118;o$1i++)r$1b[o$1i]=0;for(o$1i=7119;o$1i<=7127;o$1i++)r$1b[o$1i]=1;for(o$1i=7374;o$1i<=7376;o$1i++)r$1b[o$1i]=0;for(o$1i=7528;o$1i<=7586;o$1i++)r$1b[o$1i]=0;for(o$1i=7587;o$1i<=7645;o$1i++)r$1b[o$1i]=2;for(o$1i=7692;o$1i<=7696;o$1i++)r$1b[o$1i]=0;for(o$1i=7755;o$1i<=7787;o$1i++)r$1b[o$1i]=0;for(o$1i=7791;o$1i<=7795;o$1i++)r$1b[o$1i]=0;for(o$1i=7799;o$1i<=7801;o$1i++)r$1b[o$1i]=0;for(o$1i=7803;o$1i<=7805;o$1i++)r$1b[o$1i]=0;for(o$1i=7825;o$1i<=7831;o$1i++)r$1b[o$1i]=0;for(o$1i=7845;o$1i<=7859;o$1i++)r$1b[o$1i]=0;for(o$1i=8013;o$1i<=8032;o$1i++)r$1b[o$1i]=0;for(o$1i=8065;o$1i<=8068;o$1i++)r$1b[o$1i]=1;for(o$1i=8518;o$1i<=8529;o$1i++)r$1b[o$1i]=2;for(o$1i=8533;o$1i<=8536;o$1i++)r$1b[o$1i]=2;for(o$1i=8538;o$1i<=8540;o$1i++)r$1b[o$1i]=2;for(o$1i=8677;o$1i<=8679;o$1i++)r$1b[o$1i]=0;for(o$1i=8836;o$1i<=8840;o$1i++)r$1b[o$1i]=0;for(o$1i=8857;o$1i<=8859;o$1i++)r$1b[o$1i]=0;for(o$1i=8908;o$1i<=8910;o$1i++)r$1b[o$1i]=0;for(o$1i=9154;o$1i<=9159;o$1i++)r$1b[o$1i]=0;for(o$1i=9205;o$1i<=9218;o$1i++)r$1b[o$1i]=0;for(o$1i=9271;o$1i<=9273;o$1i++)r$1b[o$1i]=0;for(o$1i=9295;o$1i<=9297;o$1i++)r$1b[o$1i]=0;for(o$1i=9356;o$1i<=9360;o$1i++)r$1b[o$1i]=0;for(o$1i=9404;o$1i<=9407;o$1i++)r$1b[o$1i]=0;for(o$1i=9476;o$1i<=9482;o$1i++)r$1b[o$1i]=0;for(o$1i=9487;o$1i<=9494;o$1i++)r$1b[o$1i]=0;for(o$1i=9697;o$1i<=9699;o$1i++)r$1b[o$1i]=0;for(o$1i=20002;o$1i<=20032;o$1i++)r$1b[o$1i]=0;for(o$1i=20062;o$1i<=20092;o$1i++)r$1b[o$1i]=0;for(o$1i=20135;o$1i<=20138;o$1i++)r$1b[o$1i]=0;for(o$1i=20248;o$1i<=20258;o$1i++)r$1b[o$1i]=0;for(o$1i=20348;o$1i<=20358;o$1i++)r$1b[o$1i]=0;for(o$1i=20436;o$1i<=20440;o$1i++)r$1b[o$1i]=0;for(o$1i=20822;o$1i<=20824;o$1i++)r$1b[o$1i]=0;for(o$1i=20934;o$1i<=20936;o$1i++)r$1b[o$1i]=0;for(o$1i=21035;o$1i<=21037;o$1i++)r$1b[o$1i]=0;for(o$1i=21095;o$1i<=21097;o$1i++)r$1b[o$1i]=0;for(o$1i=21148;o$1i<=21150;o$1i++)r$1b[o$1i]=0;for(o$1i=21413;o$1i<=21423;o$1i++)r$1b[o$1i]=0;for(o$1i=21453;o$1i<=21463;o$1i++)r$1b[o$1i]=0;for(o$1i=21473;o$1i<=21483;o$1i++)r$1b[o$1i]=0;for(o$1i=21780;o$1i<=21782;o$1i++)r$1b[o$1i]=0;for(o$1i=21891;o$1i<=21894;o$1i++)r$1b[o$1i]=0;for(o$1i=21896;o$1i<=21899;o$1i++)r$1b[o$1i]=0;for(o$1i=22171;o$1i<=22177;o$1i++)r$1b[o$1i]=0;for(o$1i=22181;o$1i<=22187;o$1i++)r$1b[o$1i]=0;for(o$1i=22191;o$1i<=22197;o$1i++)r$1b[o$1i]=0;for(o$1i=22234;o$1i<=22236;o$1i++)r$1b[o$1i]=0;for(o$1i=22521;o$1i<=22525;o$1i++)r$1b[o$1i]=0;for(o$1i=22991;o$1i<=22994;o$1i++)r$1b[o$1i]=0;for(o$1i=23028;o$1i<=23038;o$1i++)r$1b[o$1i]=0;for(o$1i=23830;o$1i<=23853;o$1i++)r$1b[o$1i]=0;for(o$1i=23866;o$1i<=23872;o$1i++)r$1b[o$1i]=0;for(o$1i=23877;o$1i<=23884;o$1i++)r$1b[o$1i]=0;for(o$1i=23886;o$1i<=23894;o$1i++)r$1b[o$1i]=0;for(o$1i=23946;o$1i<=23948;o$1i++)r$1b[o$1i]=0;for(o$1i=24311;o$1i<=24313;o$1i++)r$1b[o$1i]=0;for(o$1i=24342;o$1i<=24347;o$1i++)r$1b[o$1i]=0;for(o$1i=24370;o$1i<=24374;o$1i++)r$1b[o$1i]=10;for(o$1i=24375;o$1i<=24381;o$1i++)r$1b[o$1i]=0;for(o$1i=24718;o$1i<=24721;o$1i++)r$1b[o$1i]=0;for(o$1i=24817;o$1i<=24821;o$1i++)r$1b[o$1i]=0;for(o$1i=24877;o$1i<=24882;o$1i++)r$1b[o$1i]=0;for(o$1i=24891;o$1i<=24893;o$1i++)r$1b[o$1i]=0;for(o$1i=25391;o$1i<=25395;o$1i++)r$1b[o$1i]=0;for(o$1i=25828;o$1i<=25838;o$1i++)r$1b[o$1i]=0;for(o$1i=26191;o$1i<=26195;o$1i++)r$1b[o$1i]=0;for(o$1i=26391;o$1i<=26393;o$1i++)r$1b[o$1i]=0;for(o$1i=26701;o$1i<=26722;o$1i++)r$1b[o$1i]=0;for(o$1i=26729;o$1i<=26799;o$1i++)r$1b[o$1i]=2;for(o$1i=26801;o$1i<=26803;o$1i++)r$1b[o$1i]=2;for(o$1i=26811;o$1i<=26813;o$1i++)r$1b[o$1i]=2;for(o$1i=26847;o$1i<=26870;o$1i++)r$1b[o$1i]=2;for(o$1i=26891;o$1i<=26899;o$1i++)r$1b[o$1i]=0;for(o$1i=26901;o$1i<=26923;o$1i++)r$1b[o$1i]=0;for(o$1i=26929;o$1i<=26946;o$1i++)r$1b[o$1i]=0;for(o$1i=26948;o$1i<=26998;o$1i++)r$1b[o$1i]=0;for(o$1i=27037;o$1i<=27040;o$1i++)r$1b[o$1i]=0;for(o$1i=27205;o$1i<=27232;o$1i++)r$1b[o$1i]=0;for(o$1i=27258;o$1i<=27260;o$1i++)r$1b[o$1i]=0;for(o$1i=27391;o$1i<=27398;o$1i++)r$1b[o$1i]=0;for(o$1i=27561;o$1i<=27564;o$1i++)r$1b[o$1i]=0;for(o$1i=27571;o$1i<=27574;o$1i++)r$1b[o$1i]=0;for(o$1i=27581;o$1i<=27584;o$1i++)r$1b[o$1i]=0;for(o$1i=27591;o$1i<=27594;o$1i++)r$1b[o$1i]=0;for(o$1i=28191;o$1i<=28193;o$1i++)r$1b[o$1i]=0;for(o$1i=28348;o$1i<=28358;o$1i++)r$1b[o$1i]=0;for(o$1i=28402;o$1i<=28432;o$1i++)r$1b[o$1i]=0;for(o$1i=28462;o$1i<=28492;o$1i++)r$1b[o$1i]=0;for(o$1i=29118;o$1i<=29122;o$1i++)r$1b[o$1i]=0;for(o$1i=29168;o$1i<=29172;o$1i++)r$1b[o$1i]=0;for(o$1i=29177;o$1i<=29185;o$1i++)r$1b[o$1i]=0;for(o$1i=29187;o$1i<=29195;o$1i++)r$1b[o$1i]=0;for(o$1i=29900;o$1i<=29903;o$1i++)r$1b[o$1i]=0;for(o$1i=30161;o$1i<=30179;o$1i++)r$1b[o$1i]=0;for(o$1i=30491;o$1i<=30494;o$1i++)r$1b[o$1i]=0;for(o$1i=30729;o$1i<=30732;o$1i++)r$1b[o$1i]=0;for(o$1i=31251;o$1i<=31259;o$1i++)r$1b[o$1i]=0;for(o$1i=31265;o$1i<=31268;o$1i++)r$1b[o$1i]=0;for(o$1i=31275;o$1i<=31279;o$1i++)r$1b[o$1i]=0;for(o$1i=31281;o$1i<=31297;o$1i++)r$1b[o$1i]=0;for(o$1i=31461;o$1i<=31469;o$1i++)r$1b[o$1i]=0;for(o$1i=31491;o$1i<=31495;o$1i++)r$1b[o$1i]=0;for(o$1i=31917;o$1i<=31922;o$1i++)r$1b[o$1i]=0;for(o$1i=31965;o$1i<=32e3;o$1i++)r$1b[o$1i]=0;for(o$1i=32001;o$1i<=32003;o$1i++)r$1b[o$1i]=2;for(o$1i=32005;o$1i<=32031;o$1i++)r$1b[o$1i]=2;for(o$1i=32033;o$1i<=32060;o$1i++)r$1b[o$1i]=2;for(o$1i=32064;o$1i<=32067;o$1i++)r$1b[o$1i]=2;for(o$1i=32074;o$1i<=32077;o$1i++)r$1b[o$1i]=2;for(o$1i=32081;o$1i<=32086;o$1i++)r$1b[o$1i]=0;for(o$1i=32107;o$1i<=32130;o$1i++)r$1b[o$1i]=0;for(o$1i=32133;o$1i<=32158;o$1i++)r$1b[o$1i]=0;for(o$1i=32164;o$1i<=32167;o$1i++)r$1b[o$1i]=2;for(o$1i=32180;o$1i<=32199;o$1i++)r$1b[o$1i]=0;for(o$1i=32201;o$1i<=32260;o$1i++)r$1b[o$1i]=0;for(o$1i=32301;o$1i<=32360;o$1i++)r$1b[o$1i]=0;for(o$1i=32601;o$1i<=32662;o$1i++)r$1b[o$1i]=0;for(o$1i=32664;o$1i<=32667;o$1i++)r$1b[o$1i]=2;for(o$1i=32701;o$1i<=32761;o$1i++)r$1b[o$1i]=0;for(o$1i=53001;o$1i<=53004;o$1i++)r$1b[o$1i]=0;for(o$1i=53008;o$1i<=53019;o$1i++)r$1b[o$1i]=0;for(o$1i=53021;o$1i<=53032;o$1i++)r$1b[o$1i]=0;for(o$1i=53034;o$1i<=53037;o$1i++)r$1b[o$1i]=0;for(o$1i=53042;o$1i<=53046;o$1i++)r$1b[o$1i]=0;for(o$1i=53074;o$1i<=53080;o$1i++)r$1b[o$1i]=0;for(o$1i=54001;o$1i<=54004;o$1i++)r$1b[o$1i]=0;for(o$1i=54008;o$1i<=54019;o$1i++)r$1b[o$1i]=0;for(o$1i=54021;o$1i<=54032;o$1i++)r$1b[o$1i]=0;for(o$1i=54034;o$1i<=54037;o$1i++)r$1b[o$1i]=0;for(o$1i=54042;o$1i<=54046;o$1i++)r$1b[o$1i]=0;for(o$1i=54048;o$1i<=54053;o$1i++)r$1b[o$1i]=0;for(o$1i=54074;o$1i<=54080;o$1i++)r$1b[o$1i]=0;for(o$1i=54098;o$1i<=54101;o$1i++)r$1b[o$1i]=0;for(o$1i=102001;o$1i<=102040;o$1i++)r$1b[o$1i]=0;for(o$1i=102042;o$1i<=102063;o$1i++)r$1b[o$1i]=0;for(o$1i=102065;o$1i<=102067;o$1i++)r$1b[o$1i]=0;for(o$1i=102070;o$1i<=102117;o$1i++)r$1b[o$1i]=0;for(o$1i=102122;o$1i<=102216;o$1i++)r$1b[o$1i]=0;for(o$1i=102221;o$1i<=102377;o$1i++)r$1b[o$1i]=0;for(o$1i=102382;o$1i<=102388;o$1i++)r$1b[o$1i]=0;for(o$1i=102389;o$1i<=102398;o$1i++)r$1b[o$1i]=2;for(o$1i=102399;o$1i<=102444;o$1i++)r$1b[o$1i]=0;for(o$1i=102445;o$1i<=102447;o$1i++)r$1b[o$1i]=2;for(o$1i=102448;o$1i<=102458;o$1i++)r$1b[o$1i]=0;for(o$1i=102459;o$1i<=102468;o$1i++)r$1b[o$1i]=2;for(o$1i=102469;o$1i<=102499;o$1i++)r$1b[o$1i]=0;for(o$1i=102500;o$1i<=102519;o$1i++)r$1b[o$1i]=1;for(o$1i=102520;o$1i<=102524;o$1i++)r$1b[o$1i]=0;for(o$1i=102525;o$1i<=102529;o$1i++)r$1b[o$1i]=2;for(o$1i=102530;o$1i<=102588;o$1i++)r$1b[o$1i]=0;for(o$1i=102590;o$1i<=102598;o$1i++)r$1b[o$1i]=0;for(o$1i=102601;o$1i<=102603;o$1i++)r$1b[o$1i]=0;for(o$1i=102605;o$1i<=102628;o$1i++)r$1b[o$1i]=0;for(o$1i=102629;o$1i<=102646;o$1i++)r$1b[o$1i]=2;for(o$1i=102648;o$1i<=102700;o$1i++)r$1b[o$1i]=2;for(o$1i=102701;o$1i<=102703;o$1i++)r$1b[o$1i]=0;for(o$1i=102707;o$1i<=102730;o$1i++)r$1b[o$1i]=2;for(o$1i=102733;o$1i<=102758;o$1i++)r$1b[o$1i]=2;for(o$1i=102767;o$1i<=102900;o$1i++)r$1b[o$1i]=0;for(o$1i=102965;o$1i<=102969;o$1i++)r$1b[o$1i]=0;for(o$1i=102971;o$1i<=102973;o$1i++)r$1b[o$1i]=0;for(o$1i=102975;o$1i<=102989;o$1i++)r$1b[o$1i]=0;for(o$1i=102990;o$1i<=102992;o$1i++)r$1b[o$1i]=1;for(o$1i=102997;o$1i<=103002;o$1i++)r$1b[o$1i]=0;for(o$1i=103003;o$1i<=103008;o$1i++)r$1b[o$1i]=2;for(o$1i=103009;o$1i<=103011;o$1i++)r$1b[o$1i]=0;for(o$1i=103012;o$1i<=103014;o$1i++)r$1b[o$1i]=2;for(o$1i=103019;o$1i<=103021;o$1i++)r$1b[o$1i]=0;for(o$1i=103022;o$1i<=103024;o$1i++)r$1b[o$1i]=2;for(o$1i=103029;o$1i<=103031;o$1i++)r$1b[o$1i]=0;for(o$1i=103032;o$1i<=103034;o$1i++)r$1b[o$1i]=2;for(o$1i=103065;o$1i<=103068;o$1i++)r$1b[o$1i]=0;for(o$1i=103074;o$1i<=103076;o$1i++)r$1b[o$1i]=0;for(o$1i=103077;o$1i<=103079;o$1i++)r$1b[o$1i]=1;for(o$1i=103080;o$1i<=103082;o$1i++)r$1b[o$1i]=0;for(o$1i=103083;o$1i<=103085;o$1i++)r$1b[o$1i]=2;for(o$1i=103090;o$1i<=103093;o$1i++)r$1b[o$1i]=0;for(o$1i=103097;o$1i<=103099;o$1i++)r$1b[o$1i]=0;for(o$1i=103100;o$1i<=103102;o$1i++)r$1b[o$1i]=2;for(o$1i=103107;o$1i<=103109;o$1i++)r$1b[o$1i]=0;for(o$1i=103110;o$1i<=103112;o$1i++)r$1b[o$1i]=2;for(o$1i=103113;o$1i<=103116;o$1i++)r$1b[o$1i]=0;for(o$1i=103117;o$1i<=103120;o$1i++)r$1b[o$1i]=2;for(o$1i=103153;o$1i<=103157;o$1i++)r$1b[o$1i]=0;for(o$1i=103158;o$1i<=103162;o$1i++)r$1b[o$1i]=2;for(o$1i=103163;o$1i<=103165;o$1i++)r$1b[o$1i]=0;for(o$1i=103166;o$1i<=103168;o$1i++)r$1b[o$1i]=1;for(o$1i=103169;o$1i<=103171;o$1i++)r$1b[o$1i]=2;for(o$1i=103186;o$1i<=103188;o$1i++)r$1b[o$1i]=0;for(o$1i=103189;o$1i<=103191;o$1i++)r$1b[o$1i]=2;for(o$1i=103192;o$1i<=103195;o$1i++)r$1b[o$1i]=0;for(o$1i=103196;o$1i<=103199;o$1i++)r$1b[o$1i]=2;for(o$1i=103200;o$1i<=103224;o$1i++)r$1b[o$1i]=0;for(o$1i=103225;o$1i<=103227;o$1i++)r$1b[o$1i]=1;for(o$1i=103232;o$1i<=103237;o$1i++)r$1b[o$1i]=0;for(o$1i=103238;o$1i<=103243;o$1i++)r$1b[o$1i]=2;for(o$1i=103244;o$1i<=103246;o$1i++)r$1b[o$1i]=0;for(o$1i=103247;o$1i<=103249;o$1i++)r$1b[o$1i]=2;for(o$1i=103254;o$1i<=103256;o$1i++)r$1b[o$1i]=0;for(o$1i=103257;o$1i<=103259;o$1i++)r$1b[o$1i]=2;for(o$1i=103264;o$1i<=103266;o$1i++)r$1b[o$1i]=0;for(o$1i=103267;o$1i<=103269;o$1i++)r$1b[o$1i]=2;for(o$1i=103300;o$1i<=103375;o$1i++)r$1b[o$1i]=0;for(o$1i=103381;o$1i<=103383;o$1i++)r$1b[o$1i]=0;for(o$1i=103384;o$1i<=103386;o$1i++)r$1b[o$1i]=1;for(o$1i=103387;o$1i<=103389;o$1i++)r$1b[o$1i]=0;for(o$1i=103390;o$1i<=103392;o$1i++)r$1b[o$1i]=2;for(o$1i=103397;o$1i<=103399;o$1i++)r$1b[o$1i]=0;for(o$1i=103400;o$1i<=103471;o$1i++)r$1b[o$1i]=2;for(o$1i=103476;o$1i<=103478;o$1i++)r$1b[o$1i]=0;for(o$1i=103479;o$1i<=103481;o$1i++)r$1b[o$1i]=2;for(o$1i=103486;o$1i<=103488;o$1i++)r$1b[o$1i]=0;for(o$1i=103489;o$1i<=103491;o$1i++)r$1b[o$1i]=2;for(o$1i=103492;o$1i<=103495;o$1i++)r$1b[o$1i]=0;for(o$1i=103496;o$1i<=103499;o$1i++)r$1b[o$1i]=2;for(o$1i=103528;o$1i<=103543;o$1i++)r$1b[o$1i]=0;for(o$1i=103544;o$1i<=103548;o$1i++)r$1b[o$1i]=2;for(o$1i=103549;o$1i<=103551;o$1i++)r$1b[o$1i]=0;for(o$1i=103552;o$1i<=103554;o$1i++)r$1b[o$1i]=1;for(o$1i=103555;o$1i<=103557;o$1i++)r$1b[o$1i]=2;for(o$1i=103558;o$1i<=103560;o$1i++)r$1b[o$1i]=0;for(o$1i=103571;o$1i<=103573;o$1i++)r$1b[o$1i]=0;for(o$1i=103574;o$1i<=103576;o$1i++)r$1b[o$1i]=2;for(o$1i=103577;o$1i<=103580;o$1i++)r$1b[o$1i]=0;for(o$1i=103581;o$1i<=103583;o$1i++)r$1b[o$1i]=2;for(o$1i=103595;o$1i<=103694;o$1i++)r$1b[o$1i]=0;for(o$1i=103696;o$1i<=103699;o$1i++)r$1b[o$1i]=0;for(o$1i=103700;o$1i<=103793;o$1i++)r$1b[o$1i]=2;for(o$1i=103794;o$1i<=103872;o$1i++)r$1b[o$1i]=0;for(o$1i=103900;o$1i<=103971;o$1i++)r$1b[o$1i]=2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$2z={102113:!0,102100:!0,3857:!0,3785:!0},_$r={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0},t$1j='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',l$24=[-20037508.342788905,20037508.342788905],M$t=[-20037508.342787,20037508.342787],d$1x={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:l$24,origin:M$t,dx:1e-5},102100:{wkTemplate:t$1j,valid:l$24,origin:M$t,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:l$24,origin:M$t,dx:1e-5},3857:{wkTemplate:t$1j,valid:l$24,origin:M$t,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function E$n(e,i){return !t$1O(e)&&!t$1O(i)&&(e===i||(null!=e.wkid||null!=i.wkid?e.wkid===i.wkid||T$l(e)&&T$l(i)||null!=i.latestWkid&&e.wkid===i.latestWkid||null!=e.latestWkid&&i.wkid===e.latestWkid:!(!e.wkt||!i.wkt)&&e.wkt.toUpperCase()===i.wkt.toUpperCase()))}function S$C(e){return I$u(e)&&e.wkid?d$1x[e.wkid]:null}function R$p(e){return !!I$u(e)&&(e.wkid?null==r$1b[e.wkid]:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function o$1h(e){return !(G$g(e)||C$s(e))}function A$m(e){return I$u(e)&&4326===e.wkid}function u$1P(e){return I$u(e)&&4490===e.wkid}function T$l(e){return I$u(e)&&null!=e.wkid&&!0===a$2z[e.wkid]}function k$t(e){return I$u(e)&&32662===e.wkid}function w$M(e){return 104971===e||104905===e}function G$g(e){return I$u(e)&&null!=e.wkid&&w$M(e.wkid)}function P$m(e){return 104903===e}function C$s(e){return I$u(e)&&null!=e.wkid&&P$m(e.wkid)}function s$1M(e){return I$u(e)&&null!=e.wkid&&!0===_$r[e.wkid]}function I$u(r){return r$1G(r)&&(null!=r.wkid&&r.wkid>=2e3||null!=r.wkt)}const c$2M={wkid:4326,wkt:r$1F(d$1x[4326].wkTemplate,{Central_Meridian:"0.0"})},p$2V={wkid:102100,latestWkid:3857},D$n={wkid:32662};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var y$1g;let S$B=y$1g=class extends a$2A{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null;}static fromJSON(e){if(!e)return null;if(e.wkid){if(102100===e.wkid)return y$1g.WebMercator;if(4326===e.wkid)return y$1g.WGS84}const t=new y$1g;return t.read(e),t}normalizeCtorArgs(e){if(e&&"object"==typeof e)return e;return {["string"==typeof e?"wkt":"wkid"]:e}}get isWGS84(){return A$m(this)}get isWebMercator(){return T$l(this)}get isGeographic(){return R$p(this)}get isWrappable(){return s$1M(this)}writeWkt(e,t){this.wkid||(t.wkt=e);}clone(){if(this===y$1g.WGS84)return y$1g.WGS84;if(this===y$1g.WebMercator)return y$1g.WebMercator;const e=new y$1g;return null!=this.wkid?(e.wkid=this.wkid,null!=this.latestWkid&&(e.latestWkid=this.latestWkid),null!=this.vcsWkid&&(e.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(e.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=l$2r(this.imageCoordinateSystem)),e}equals(e){if(null==e)return !1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==e.imageCoordinateSystem)return !1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,o=this.imageCoordinateSystem;return null==t||i?JSON.stringify(o)===JSON.stringify(e.imageCoordinateSystem):r?o.id===t&&o.referenceServiceName===r:o.id===t}return E$n(this,e)}toJSON(e){return this.write(void 0,e)}};S$B.GCS_NAD_1927=null,S$B.WGS84=null,S$B.WebMercator=null,S$B.PlateCarree=null,e$1_([d$1S({readOnly:!0})],S$B.prototype,"isWGS84",null),e$1_([d$1S({readOnly:!0})],S$B.prototype,"isWebMercator",null),e$1_([d$1S({readOnly:!0})],S$B.prototype,"isGeographic",null),e$1_([d$1S({readOnly:!0})],S$B.prototype,"isWrappable",null),e$1_([d$1S({type:S$J,json:{write:!0}})],S$B.prototype,"latestWkid",void 0),e$1_([d$1S({type:S$J,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return {isRequired:null===this.wkt}}}}}}})],S$B.prototype,"wkid",void 0),e$1_([d$1S({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return {isRequired:null===this.wkid}}}}}}})],S$B.prototype,"wkt",void 0),e$1_([r$1c("wkt"),r$1c("web-scene","wkt")],S$B.prototype,"writeWkt",null),e$1_([d$1S({type:S$J,json:{write:!0}})],S$B.prototype,"vcsWkid",void 0),e$1_([d$1S({type:S$J,json:{write:!0}})],S$B.prototype,"latestVcsWkid",void 0),e$1_([d$1S()],S$B.prototype,"imageCoordinateSystem",void 0),S$B=y$1g=e$1_([i$2w("esri.geometry.SpatialReference")],S$B),S$B.prototype.toJSON.isDefaultToJSON=!0,S$B.GCS_NAD_1927=new S$B({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),S$B.WGS84=new S$B(c$2M),S$B.WebMercator=new S$B(p$2V),S$B.PlateCarree=new S$B(D$n),Object.freeze&&(Object.freeze(S$B.GCS_NAD_1927),Object.freeze(S$B.WGS84),Object.freeze(S$B.WebMercator));const k$s=S$B;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$2L=class extends a$2A{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=k$s.WGS84;}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,r){if(e instanceof k$s)return e;if(null!=e){const t=new k$s;return t.read(e,r),t}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache");}getCacheValue(e){return this.cache[e]}setCacheValue(e,r){this.cache[e]=r;}};e$1_([d$1S()],c$2L.prototype,"type",void 0),e$1_([d$1S({readOnly:!0})],c$2L.prototype,"cache",null),e$1_([d$1S({readOnly:!0})],c$2L.prototype,"extent",null),e$1_([d$1S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],c$2L.prototype,"hasM",void 0),e$1_([d$1S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],c$2L.prototype,"hasZ",void 0),e$1_([d$1S({type:k$s,json:{write:!0}})],c$2L.prototype,"spatialReference",void 0),e$1_([o$1j("spatialReference")],c$2L.prototype,"readSpatialReference",null),c$2L=e$1_([i$2w("esri.geometry.Geometry")],c$2L);const p$2U=c$2L;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2k(n,r,u,t){var l;(n.x=n.x+r,n.y=n.y+u,null!=t)&&(n.z=(null!=(l=n.z)?l:0)+t);return n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$1i(t,n){const s=t.x-n.x,r=t.y-n.y,a=t.hasZ&&n.hasZ?t.z-n.z:0;return Math.sqrt(s*s+r*r+a*a)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class i$26{constructor(i,s,t,e){this.semiMajorAxis=i,this.flattening=s,this.outerAtmosphereRimWidth=t;const h=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*h,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=e||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3;}get radius(){return this.semiMajorAxis}}const s$1L=new i$26(6378137,1/298.257223563,3e5,.006694379990137799),t$1h=new i$26(3396190,1/169.8944472236118,23e4),e$1m=new i$26(1737400,0,0);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$1g=57.29577951308232,u$1O=.017453292519943;function l$23(n){return n*o$1g}function p$2T(n){return n*u$1O}function c$2K(n){return Math.PI/2-2*Math.atan(Math.exp(-n/s$1L.radius))}function h$1k(n){return null!=n.wkid||null!=n.wkt}const m$1R=[0,0];function x$x(n,t,e,i,r){const s=n,a=r;if(a.spatialReference=e,"x"in s&&"x"in a)[a.x,a.y]=t(s.x,s.y,m$1R,i);else if("xmin"in s&&"xmin"in a)[a.xmin,a.ymin]=t(s.xmin,s.ymin,m$1R,i),[a.xmax,a.ymax]=t(s.xmax,s.ymax,m$1R,i);else if("paths"in s&&"paths"in a||"rings"in s&&"rings"in a){const n="paths"in s?s.paths:s.rings,e=[];let r;for(let s=0;s<n.length;s++){const a=n[s];r=[],e.push(r);for(let n=0;n<a.length;n++)r.push(t(a[n][0],a[n][1],[0,0],i)),a[n].length>2&&r[n].push(a[n][2]),a[n].length>3&&r[n].push(a[n][3]);}"paths"in a?a.paths=e:a.rings=e;}else if("points"in s&&"points"in a){const n=s.points,e=[];for(let r=0;r<n.length;r++)e[r]=t(n[r][0],n[r][1],[0,0],i),n[r].length>2&&e[r].push(n[r][2]),n[r].length>3&&e[r].push(n[r][3]);a.points=e;}return r}function g$W(n,t){const e=n&&(h$1k(n)?n:n.spatialReference),i=t&&(h$1k(t)?t:t.spatialReference);return !(n&&"type"in n&&"mesh"===n.type||t&&"type"in t&&"mesh"===t.type||!e||!i)&&(!!E$n(i,e)||(T$l(i)&&A$m(e)||T$l(e)&&A$m(i)))}function M$s(i,o){if(t$1O(i))return null;const u=i.spatialReference,l=o&&(h$1k(o)?o:o.spatialReference);return g$W(u,l)?E$n(u,l)?l$2r(i):T$l(l)?x$x(i,y$1f,k$s.WebMercator,!1,l$2r(i)):A$m(l)?x$x(i,d$1w,k$s.WGS84,!1,l$2r(i)):null:null}function y$1f(n,t,e=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=p$2T(t);return e[0]=p$2T(n)*s$1L.radius,e[1]=s$1L.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),e}function d$1w(n,t,e=[0,0],r=!1){const s=l$23(n/s$1L.radius);return e[0]=r?s:s-360*Math.floor((s+180)/360),e[1]=l$23(Math.PI/2-2*Math.atan(Math.exp(-t/s$1L.radius))),e}function R$o(t,i=!1,r=l$2r(t)){return x$x(t,y$1f,k$s.WebMercator,i,r)}function j$D(t,i=!1,r=l$2r(t)){return x$x(t,d$1w,k$s.WGS84,i,r)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$1Q;const f$1h=[0,0];function g$V(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}const x$w=s$2h.getLogger("esri.geometry.Point");let w$L=m$1Q=class extends p$2U{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point";}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(r)?r:r.clone());}normalizeCtorArgs(e,t,r,s,i){let o;if(Array.isArray(e))o=e,i=t,e=o[0],t=o[1],r=o[2],s=o[3];else if(e&&"object"==typeof e){if(o=e,e=null!=o.x?o.x:o.longitude,t=null!=o.y?o.y:o.latitude,r=o.z,s=o.m,(i=o.spatialReference)&&"esri.geometry.SpatialReference"!==i.declaredClass&&(i=new k$s(i)),null!=o.longitude||null!=o.latitude)if(null==o.longitude)x$w.warn(".longitude=","Latitude was defined without longitude");else if(null==o.latitude)x$w.warn(".latitude=","Longitude was defined without latitude");else if(!o.declaredClass&&i&&i.isWebMercator){const r=y$1f(o.longitude,o.latitude,f$1h);e=r[0],t=r[1];}}else g$V(r)?(i=r,r=null):g$V(s)&&(i=s,s=null);const a={x:e,y:t};return null==a.x&&null!=a.y?x$w.warn(".y=","Y coordinate was defined without an X coordinate"):null==a.y&&null!=a.x&&x$w.warn(".x=","X coordinate was defined without a Y coordinate"),null!=i&&(a.spatialReference=i),null!=r&&(a.z=r),null!=s&&(a.m=s),a}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return void 0!==this.m}set hasM(e){e!==(void 0!==this._get("m"))&&(this._set("m",e?0:void 0),this._set("hasM",e));}get hasZ(){return void 0!==this.z}set hasZ(e){e!==(void 0!==this._get("z"))&&(this._set("z",e?0:void 0),this._set("hasZ",e));}get latitude(){const{spatialReference:e,x:t,y:r}=this;if(e){if(e.isWebMercator)return d$1w(t,r,f$1h)[1];if(e.isGeographic)return r}return null}set latitude(e){const{spatialReference:t,x:r}=this;t&&(t.isWebMercator?this._set("y",y$1f(r,e,f$1h)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e));}get longitude(){const{x:e,y:t,spatialReference:r}=this;if(r){if(r.isWebMercator)return d$1w(e,t,f$1h)[0];if(r.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:r}=this;r&&(r.isWebMercator?this._set("x",y$1f(e,t,f$1h)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e));}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e;}readX(e){return "string"==typeof e?NaN:e}clone(){const e=new m$1Q;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return m$1Q.copy(e,this),this}equals(e){if(!e)return !1;const{x:t,y:r,z:s,m:i,spatialReference:o}=this,{z:a,m:n}=e;let{x:l,y:c,spatialReference:p}=e;if(!o.equals(p))if(o.isWebMercator&&p.isWGS84)[l,c]=y$1f(l,c),p=o;else {if(!o.isWGS84||!p.isWebMercator)return !1;[l,c]=d$1w(l,c),p=o;}return t===l&&r===c&&s===a&&i===n&&o.wkid===p.wkid}offset(e,t,r){return n$2k(this,e,t,r)}normalize(){if(!this.spatialReference)return this;const e=S$C(this.spatialReference);if(!e)return this;let t=this.x;const[r,s]=e.valid,i=2*s;let o;return t>s?(o=Math.ceil(Math.abs(t-s)/i),t-=o*i):t<r&&(o=Math.ceil(Math.abs(t-r)/i),t+=o*i),this._set("x",t),this}distance(e){return t$1i(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};e$1_([d$1S({readOnly:!0})],w$L.prototype,"cache",null),e$1_([d$1S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],w$L.prototype,"hasM",null),e$1_([d$1S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],w$L.prototype,"hasZ",null),e$1_([d$1S({type:Number})],w$L.prototype,"latitude",null),e$1_([d$1S({type:Number})],w$L.prototype,"longitude",null),e$1_([d$1S({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),c$2Y((e=>isNaN(e)?e:a$31(e)))],w$L.prototype,"x",void 0),e$1_([r$1c("x")],w$L.prototype,"writeX",null),e$1_([o$1j("x")],w$L.prototype,"readX",null),e$1_([d$1S({type:Number,json:{write:!0}})],w$L.prototype,"y",void 0),e$1_([d$1S({type:Number,json:{write:{overridePolicy(){return {enabled:this.hasZ}}}}})],w$L.prototype,"z",void 0),e$1_([d$1S({type:Number,json:{write:{overridePolicy(){return {enabled:this.hasM}}}}})],w$L.prototype,"m",void 0),w$L=m$1Q=e$1_([i$2w("esri.geometry.Point")],w$L),w$L.prototype.toJSON.isDefaultToJSON=!0;const b$O=w$L;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$1g=[0,0];function r$1a(t,r){return !!r$1G(r)&&f$1g(t,r.x,r.y,r.z)}function i$25(n,t){if(!t.points||t.points.length)return !1;for(const r of t.points)if(!u$1N(n,r))return !1;return !0}function o$1f(n,t){const{xmin:r,ymin:i,zmin:o,xmax:u,ymax:e,zmax:c}=t;return n.hasZ&&t.hasZ?f$1g(n,r,i,o)&&f$1g(n,r,e,o)&&f$1g(n,u,e,o)&&f$1g(n,u,i,o)&&f$1g(n,r,i,c)&&f$1g(n,r,e,c)&&f$1g(n,u,e,c)&&f$1g(n,u,i,c):f$1g(n,r,i)&&f$1g(n,r,e)&&f$1g(n,u,e)&&f$1g(n,u,i)}function u$1N(n,t){return f$1g(n,t[0],t[1])}function e$1l(n,t){return f$1g(n,t[0],t[1],t[2])}function f$1g(n,t,r,i){return t>=n.xmin&&t<=n.xmax&&r>=n.ymin&&r<=n.ymax&&(null==i||!n.hasZ||i>=n.zmin&&i<=n.zmax)}function c$2J(n,r){return t$1g[1]=r.y,t$1g[0]=r.x,m$1P(n,t$1g)}function m$1P(n,t){return s$1K(n.rings,t)}function s$1K(n,t){if(!n)return !1;if(x$v(n))return a$2y(!1,n,t);let r=!1;for(let i=0,o=n.length;i<o;i++)r=a$2y(r,n[i],t);return r}function x$v(n){return !Array.isArray(n[0][0])}function a$2y(n,t,r){const[i,o]=r;let u=n,e=0;for(let f=0,c=t.length;f<c;f++){e++,e===c&&(e=0);const[n,r]=t[f],[m,s]=t[e];(r<o&&s>=o||s<o&&r>=o)&&n+(o-r)/(s-r)*(m-n)<i&&(u=!u);}return u}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$24(t,e){return r$1a(t,e)}function o$1e(n,t){const e=n.hasZ&&t.hasZ;let r,i,o;if(n.xmin<=t.xmin){if(r=t.xmin,n.xmax<r)return !1}else if(r=n.xmin,t.xmax<r)return !1;if(n.ymin<=t.ymin){if(i=t.ymin,n.ymax<i)return !1}else if(i=n.ymin,t.ymax<i)return !1;if(e&&t.hasZ)if(n.zmin<=t.zmin){if(o=t.zmin,n.zmax<o)return !1}else if(o=n.zmin,t.zmax<o)return !1;return !0}function f$1f(n,t){const{points:i,hasZ:o}=t,f=o?e$1l:u$1N;for(const e of i)if(f(n,e))return !0;return !1}const s$1J=[0,0],c$2I=[0,0],m$1O=[0,0],u$1M=[0,0],l$22=[s$1J,c$2I,m$1O,u$1M],a$2x=[[m$1O,s$1J],[s$1J,c$2I],[c$2I,u$1M],[u$1M,m$1O]];function x$u(n,r){s$1J[0]=n.xmin,s$1J[1]=n.ymax,c$2I[0]=n.xmax,c$2I[1]=n.ymax,m$1O[0]=n.xmin,m$1O[1]=n.ymin,u$1M[0]=n.xmax,u$1M[1]=n.ymin;for(const e of l$22)if(m$1P(r,e))return !0;for(const t of r.rings){if(!t.length)continue;let r=t[0];if(u$1N(n,r))return !0;for(let i=1;i<t.length;i++){const o=t[i];if(u$1N(n,o)||p$2S(r,o,a$2x))return !0;r=o;}}return !1}function y$1e(n,t){s$1J[0]=n.xmin,s$1J[1]=n.ymax,c$2I[0]=n.xmax,c$2I[1]=n.ymax,m$1O[0]=n.xmin,m$1O[1]=n.ymin,u$1M[0]=n.xmax,u$1M[1]=n.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let t=i[0];if(u$1N(n,t))return !0;for(let r=1;r<i.length;r++){const o=i[r];if(u$1N(n,o)||p$2S(t,o,a$2x))return !0;t=o;}}return !1}const h$1j=[0,0];function g$U(n){for(let t=0;t<n.length;t++){const e=n[t];for(let i=0;i<e.length-1;i++){const r=e[i],o=e[i+1];for(let e=t+1;e<n.length;e++)for(let t=0;t<n[e].length-1;t++){const i=n[e][t],f=n[e][t+1];if(z$k(r,o,i,f,h$1j)&&!(h$1j[0]===r[0]&&h$1j[1]===r[1]||h$1j[0]===i[0]&&h$1j[1]===i[1]||h$1j[0]===o[0]&&h$1j[1]===o[1]||h$1j[0]===f[0]&&h$1j[1]===f[1]))return !0}}const r=e.length;if(!(r<=4))for(let n=0;n<r-3;n++){let t=r-1;0===n&&(t=r-2);const i=e[n],o=e[n+1];for(let r=n+2;r<t;r++){const n=e[r],t=e[r+1];if(z$k(i,o,n,t,h$1j)&&!(h$1j[0]===i[0]&&h$1j[1]===i[1]||h$1j[0]===n[0]&&h$1j[1]===n[1]||h$1j[0]===o[0]&&h$1j[1]===o[1]||h$1j[0]===t[0]&&h$1j[1]===t[1]))return !0}}}return !1}function p$2S(n,t,e){for(let r=0;r<e.length;r++)if(z$k(n,t,e[r][0],e[r][1]))return !0;return !1}function z$k(n,t,e,r,i){const[o,f]=n,[s,c]=t,[m,u]=e,[l,a]=r,x=l-m,y=o-m,h=s-o,g=a-u,p=f-u,z=c-f,G=g*h-x*z;if(0===G)return !1;const Z=(x*p-g*y)/G,P=(h*p-z*y)/G;return Z>=0&&Z<=1&&P>=0&&P<=1&&(i&&(i[0]=o+Z*(s-o),i[1]=f+Z*(c-f)),!0)}function G$f(n){switch(n){case"esriGeometryEnvelope":case"extent":return o$1e;case"esriGeometryMultipoint":case"multipoint":return f$1f;case"esriGeometryPoint":case"point":return i$24;case"esriGeometryPolygon":case"polygon":return x$u;case"esriGeometryPolyline":case"polyline":return y$1e}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$1L;function f$1e(t){return t&&("esri.geometry.SpatialReference"===t.declaredClass||null!=t.wkid)}function d$1v(t,i,e){return null==i?e:null==e?i:t(i,e)}let z$j=u$1L=class extends p$2U{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0;}normalizeCtorArgs(t,i,e,s,n){return f$1e(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:"object"==typeof t?(t.spatialReference=null==t.spatialReference?k$s.WGS84:t.spatialReference,t):{xmin:t,ymin:i,xmax:e,ymax:s,spatialReference:null==n?k$s.WGS84:n}}static fromBounds(t,i){return new u$1L({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:i})}static fromPoint(t){return new u$1L({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new b$O({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return null!=this.mmin&&null!=this.mmax}get hasZ(){return null!=this.zmin&&null!=this.zmax}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const i=this.center;return null!=t.z&&this.hasZ?this.offset(t.x-i.x,t.y-i.y,t.z-i.z):this.offset(t.x-i.x,t.y-i.y)}clone(){const t=new u$1L;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,null!=this.zmin&&(t.zmin=this.zmin,t.zmax=this.zmax),null!=this.mmin&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return !1;const i=this.spatialReference,e=t.spatialReference;return i&&e&&!i.equals(e)&&g$W(i,e)&&(t=i.isWebMercator?R$o(t):j$D(t,!0)),"point"===t.type?r$1a(this,t):"extent"===t.type&&o$1f(this,t)}equals(t){if(this===t)return !0;if(t$1O(t))return !1;const e=this.spatialReference,s=t.spatialReference;return e&&s&&!e.equals(s)&&g$W(e,s)&&(t=e.isWebMercator?R$o(t):j$D(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const i=.5*(1-t),e=this.width*i,s=this.height*i;if(this.xmin+=e,this.ymin+=s,this.xmax-=e,this.ymax-=s,this.hasZ){const t=(this.zmax-this.zmin)*i;this.zmin+=t,this.zmax-=t;}if(this.hasM){const t=(this.mmax-this.mmin)*i;this.mmin+=t,this.mmax-=t;}return this}intersects(t){if(t$1O(t))return !1;"mesh"===t.type&&(t=t.extent);const e=this.spatialReference,s=t.spatialReference;e&&s&&!e.equals(s)&&g$W(e,s)&&(t=e.isWebMercator?R$o(t):j$D(t,!0));return G$f(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,i,e){return this.xmin+=t,this.ymin+=i,this.xmax+=t,this.ymax+=i,null!=e&&(this.zmin+=e,this.zmax+=e),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=d$1v(Math.min,this.zmin,t.zmin),this.zmax=d$1v(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=d$1v(Math.min,this.mmin,t.mmin),this.mmax=d$1v(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t$1O(t)||!this.intersects(t)?null:(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=d$1v(Math.max,this.zmin,t.zmin),this.zmax=d$1v(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=d$1v(Math.max,this.mmin,t.mmin),this.mmax=d$1v(Math.min,this.mmax,t.mmax)),this)}toJSON(t){return this.write({},t)}_shiftCM(t=S$C(this.spatialReference)){if(!t||!this.spatialReference)return this;const i=this.spatialReference,s=this._getCM(t);if(s){const n=i.isWebMercator?j$D(s):s;this.xmin-=s.x,this.xmax-=s.x,i.isWebMercator||(n.x=this._normalizeX(n.x,t).x),this.spatialReference=new k$s(r$1F(i.isWGS84?t.altTemplate:t.wkTemplate,{Central_Meridian:n.x}));}return this}_getCM(t){let i=null;const[e,s]=t.valid,n=this.xmin,m=this.xmax;return n>=e&&n<=s&&(m>=e&&m<=s)||(i=this.center),i}_normalize(t,i,e){const s=this.spatialReference;if(!s)return this;if(!(e=e||S$C(s)))return this;const n=this._getParts(e).map((t=>t.extent));if(n.length<2)return n[0]||this;if(n.length>2)return t?this._shiftCM(e):this.set({xmin:e.valid[0],xmax:e.valid[1]});if(t)return this._shiftCM(e);if(i)return n;let m=!0,r=!0;return n.forEach((t=>{t.hasZ||(m=!1),t.hasM||(r=!1);})),{rings:n.map((t=>{const i=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];if(m){const e=(t.zmax-t.zmin)/2;for(let t=0;t<i.length;t++)i[t].push(e);}if(r){const e=(t.mmax-t.mmin)/2;for(let t=0;t<i.length;t++)i[t].push(e);}return i})),hasZ:m,hasM:r,spatialReference:s}}_getParts(t){let i=this.cache._parts;if(!i){i=[];const{ymin:e,ymax:s,spatialReference:n}=this,m=this.width,r=this.xmin,a=this.xmax;let h;t=t||S$C(n);const[o,x]=t.valid;h=this._normalizeX(this.xmin,t);const p=h.x,c=h.frameId;h=this._normalizeX(this.xmax,t);const y=h.x,f=h.frameId,d=p===y&&m>0;if(m>2*x){const t=new u$1L(r<a?p:y,e,x,s,n),m=new u$1L(o,e,r<a?y:p,s,n),h=new u$1L(0,e,x,s,n),l=new u$1L(o,e,0,s,n),d=[],z=[];t.contains(h)&&d.push(c),t.contains(l)&&z.push(c),m.contains(h)&&d.push(f),m.contains(l)&&z.push(f);for(let i=c+1;i<f;i++)d.push(i),z.push(i);i.push({extent:t,frameIds:[c]},{extent:m,frameIds:[f]},{extent:h,frameIds:d},{extent:l,frameIds:z});}else p>y||d?i.push({extent:new u$1L(p,e,x,s,n),frameIds:[c]},{extent:new u$1L(o,e,y,s,n),frameIds:[f]}):i.push({extent:new u$1L(p,e,y,s,n),frameIds:[c]});this.cache._parts=i;}const e=this.hasZ,s=this.hasM;if(e||s){const t={};e&&(t.zmin=this.zmin,t.zmax=this.zmax),s&&(t.mmin=this.mmin,t.mmax=this.mmax);for(let e=0;e<i.length;e++)i[e].extent.set(t);}return i}_normalizeX(t,i){const[e,s]=i.valid,n=2*s;let m,r=0;return t>s?(m=Math.ceil(Math.abs(t-s)/n),t-=m*n,r=m):t<e&&(m=Math.ceil(Math.abs(t-e)/n),t+=m*n,r=-m),{x:t,frameId:r}}};e$1_([d$1S({readOnly:!0})],z$j.prototype,"cache",null),e$1_([d$1S({readOnly:!0})],z$j.prototype,"center",null),e$1_([d$1S({readOnly:!0})],z$j.prototype,"extent",null),e$1_([d$1S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],z$j.prototype,"hasM",null),e$1_([d$1S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],z$j.prototype,"hasZ",null),e$1_([d$1S({readOnly:!0})],z$j.prototype,"height",null),e$1_([d$1S({readOnly:!0})],z$j.prototype,"width",null),e$1_([d$1S({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],z$j.prototype,"xmin",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],z$j.prototype,"ymin",void 0),e$1_([d$1S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return {enabled:this.hasM}}}}})],z$j.prototype,"mmin",void 0),e$1_([d$1S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return {enabled:this.hasZ}}}}})],z$j.prototype,"zmin",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],z$j.prototype,"xmax",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],z$j.prototype,"ymax",void 0),e$1_([d$1S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return {enabled:this.hasM}}}}})],z$j.prototype,"mmax",void 0),e$1_([d$1S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return {enabled:this.hasZ}}}}})],z$j.prototype,"zmax",void 0),z$j=u$1L=e$1_([i$2w("esri.geometry.Extent")],z$j),z$j.prototype.toJSON.isDefaultToJSON=!0;const M$r=z$j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function h$1i(h,a,s=!1){let{hasM:t,hasZ:e}=h;Array.isArray(a)?4!==a.length||t||e?3===a.length&&s&&!t?(e=!0,t=!1):3===a.length&&t&&e&&(t=!1,e=!1):(t=!0,e=!0):(e=!e&&a.hasZ&&(!t||a.hasM),t=!t&&a.hasM&&(!e||a.hasZ)),h.hasZ=e,h.hasM=t;}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var h$1h;function l$21(t){return (s,e)=>null==s?e:null==e?s:t(s,e)}function c$2H(t){return t&&("esri.geometry.SpatialReference"===t.declaredClass||null!=t.wkid)}let u$1K=h$1h=class extends p$2U{constructor(...t){super(...t),this.points=[],this.type="multipoint";}normalizeCtorArgs(t,s){if(!t&&!s)return null;const e={};Array.isArray(t)?(e.points=t,e.spatialReference=s):c$2H(t)?e.spatialReference=t:(t.points&&(e.points=t.points),t.spatialReference&&(e.spatialReference=t.spatialReference),t.hasZ&&(e.hasZ=t.hasZ),t.hasM&&(e.hasM=t.hasM));const i=e.points&&e.points[0];return i&&(void 0===e.hasZ&&void 0===e.hasM?(e.hasZ=i.length>2,e.hasM=!1):void 0===e.hasZ?e.hasZ=i.length>3:void 0===e.hasM&&(e.hasM=i.length>3)),e}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const s=new M$r,e=this.hasZ,i=this.hasM,r=e?3:2,o=t[0],a=l$21(Math.min),p=l$21(Math.max);let h,c,u,m,[f,y]=o,[d,g]=o;for(let n=0,l=t.length;n<l;n++){const s=t[n],[o,l]=s;if(f=a(f,o),y=a(y,l),d=p(d,o),g=p(g,l),e&&s.length>2){const t=s[2];h=a(h,t),u=p(u,t);}if(i&&s.length>r){const t=s[r];c=a(c,t),m=p(m,t);}}return s.xmin=f,s.ymin=y,s.xmax=d,s.ymax=g,s.spatialReference=this.spatialReference,e?(s.zmin=h,s.zmax=u):(s.zmin=null,s.zmax=null),i?(s.mmin=c,s.mmax=m):(s.mmin=null,s.mmax=null),s}writePoints(t,e){e.points=l$2r(this.points);}addPoint(t){return h$1i(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:l$2r(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new h$1h(t)}getPoint(t){if(!this._validateInputs(t))return null;const s=this.points[t],e={x:s[0],y:s[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(e.z=s[2],i=3),this.hasM&&(e.m=s[i]),new b$O(e)}removePoint(t){if(!this._validateInputs(t))return null;const s=new b$O(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),s}setPoint(t,s){return this._validateInputs(t)?(h$1i(this,s),Array.isArray(s)||(s=s.toArray()),this.points[t]=s,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return null!=t&&t>=0&&t<this.points.length}};e$1_([d$1S({readOnly:!0})],u$1K.prototype,"cache",null),e$1_([d$1S()],u$1K.prototype,"extent",null),e$1_([d$1S({type:[[Number]],json:{write:{isRequired:!0}}})],u$1K.prototype,"points",void 0),e$1_([r$1c("points")],u$1K.prototype,"writePoints",null),u$1K=h$1h=e$1_([i$2w("esri.geometry.Multipoint")],u$1K),u$1K.prototype.toJSON.isDefaultToJSON=!0;const m$1N=u$1K;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1k(n,t){const e=t[0]-n[0],r=t[1]-n[1];if(n.length>2&&t.length>2){const o=n[2]-t[2];return Math.sqrt(e*e+r*r+o*o)}return Math.sqrt(e*e+r*r)}function r$19(n,t,e){const r=n[0]+e*(t[0]-n[0]),o=n[1]+e*(t[1]-n[1]);return n.length>2&&t.length>2?[r,o,n[2]+e*(t[2]-n[2])]:[r,o]}function o$1d(n,t,e,r){const[o,i]=t,[s,l]=e[r],[f,u]=e[r+1],h=f-s,c=u-l,a=h*h+c*c,g=(o-s)*h+(i-l)*c,m=Math.min(1,Math.max(0,g/a));return n[0]=s+h*m,n[1]=l+c*m,n}function i$23(n,t){return r$19(n,t,.5)}function f$1d(n,t,e){const r=n.length;let o=0,i=0,s=0;for(let l=0;l<r;l++){const f=n[l],u=n[(l+1)%r];let h=2;o+=f[0]*u[1]-u[0]*f[1],f.length>2&&u.length>2&&e&&(i+=f[0]*u[2]-u[0]*f[2],h=3),f.length>h&&u.length>h&&t&&(s+=f[0]*u[h]-u[0]*f[h]);}return o<=0&&i<=0&&s<=0}function u$1J(n){if("rings"in n){for(const t of n.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(n.rings.length>0){if(!f$1d(n.rings[0],n.hasM,n.hasZ))for(let t=0;t<n.rings.length;++t)n.rings[t]=n.rings[t].reverse();}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1j(n){return n?o$1c(n.rings,n.hasZ):null}function o$1c(n,t){if(!n||!n.length)return null;const l=[],e=[],o=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let h=0,i=n.length;h<i;h++){const l=r$18(n[h],t,o);l&&e.push(l);}if(e.sort(((n,l)=>{let e=n[2]-l[2];return 0===e&&t&&(e=n[4]-l[4]),e})),e.length&&(l[0]=e[0][0],l[1]=e[0][1],t&&(l[2]=e[0][3]),(l[0]<o[0]||l[0]>o[1]||l[1]<o[2]||l[1]>o[3]||t&&(l[2]<o[4]||l[2]>o[5]))&&(l.length=0)),!l.length){const e=n[0]&&n[0].length?h$1g(n[0],t):null;if(!e)return null;l[0]=e[0],l[1]=e[1],t&&e.length>2&&(l[2]=e[2]);}return l}function r$18(n,t,l){let e=0,o=0,r=0,h=0,i=0;const u=n.length?n[0][0]:0,g=n.length?n[0][1]:0,s=n.length&&t?n[0][2]:0;for(let f=0;f<n.length;f++){const c=n[f],m=n[(f+1)%n.length],[x,a,y]=c,d=x-u,p=a-g,v=t?y-s:void 0,[z,Z,j]=m,U=z-u,b=Z-g,k=t?j-s:void 0,q=d*b-U*p;if(h+=q,e+=(d+U)*q,o+=(p+b)*q,t&&c.length>2&&m.length>2){const n=d*k-U*v;r+=(v+k)*n,i+=n;}x<l[0]&&(l[0]=x),x>l[1]&&(l[1]=x),a<l[2]&&(l[2]=a),a>l[3]&&(l[3]=a),t&&(y<l[4]&&(l[4]=y),y>l[5]&&(l[5]=y));}if(h>0&&(h*=-1),i>0&&(i*=-1),!h)return null;h*=.5,i*=.5;const c=[e/(6*h)+u,o/(6*h)+g,h];return t&&(l[4]===l[5]||0===i?(c[3]=(l[4]+l[5])/2,c[4]=0):(c[3]=r/(6*i)+s,c[4]=i)),c}function h$1g(l,e){const o=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let h=0,i=0,u=0,g=0;for(let s=0,c=l.length;s<c-1;s++){const c=l[s],f=l[s+1];if(c&&f){o[0]=c[0],o[1]=c[1],r[0]=f[0],r[1]=f[1],e&&c.length>2&&f.length>2&&(o[2]=c[2],r[2]=f[2]);const l=e$1k(o,r);if(l){h+=l;const n=i$23(c,f);i+=l*n[0],u+=l*n[1],e&&n.length>2&&(g+=l*n[2]);}}}return h>0?e?[i/h,u/h,g/h]:[i/h,u/h]:l.length?l[0]:null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2j(n){return void 0!==n.xmin&&void 0!==n.ymin&&void 0!==n.xmax&&void 0!==n.ymax}function t$1f(n){return void 0!==n.points}function e$1i(n){return void 0!==n.x&&void 0!==n.y}function o$1b(n){return void 0!==n.paths}function i$22(n){return void 0!==n.rings}function l$20(n){return (t,e)=>null==t?e:null==e?t:n(t,e)}const r$17=l$20(Math.min),u$1I=l$20(Math.max);function c$2G(l,r){return o$1b(r)?h$1f(l,r.paths,!1,!1):i$22(r)?h$1f(l,r.rings,!1,!1):t$1f(r)?s$1I(l,r.points,!1,!1,!1,!1):n$2j(r)?g$T(l,r):(e$1i(r)&&(l[0]=r.x,l[1]=r.y,l[2]=r.x,l[3]=r.y),l)}function f$1c(l,r){return o$1b(r)?h$1f(l,r.paths,!0,!1):i$22(r)?h$1f(l,r.rings,!0,!1):t$1f(r)?s$1I(l,r.points,!0,!1,!0,!1):n$2j(r)?g$T(l,r,!0,!1,!0,!1):(e$1i(r)&&(l[0]=r.x,l[1]=r.y,l[2]=r.z,l[3]=r.x,l[4]=r.y,l[5]=r.z),l)}function h$1f(n,t,e,o){const i=e?3:2;if(!t.length||!t[0].length)return null;let l,c,f,h,[g,s]=t[0][0],[x,m]=t[0][0];for(let a=0;a<t.length;a++){const n=t[a];for(let t=0;t<n.length;t++){const a=n[t],[d,v]=a;if(g=r$17(g,d),s=r$17(s,v),x=u$1I(x,d),m=u$1I(m,v),e&&a.length>2){const n=a[2];l=r$17(l,n),c=u$1I(c,n);}if(o&&a.length>i){const n=a[i];f=r$17(l,n),h=u$1I(c,n);}}}return e?o?(n[0]=g,n[1]=s,n[2]=l,n[3]=f,n[4]=x,n[5]=m,n[6]=c,n[7]=h,n.length=8,n):(n[0]=g,n[1]=s,n[2]=l,n[3]=x,n[4]=m,n[5]=c,n.length=6,n):o?(n[0]=g,n[1]=s,n[2]=f,n[3]=x,n[4]=m,n[5]=h,n.length=6,n):(n[0]=g,n[1]=s,n[2]=x,n[3]=m,n.length=4,n)}function g$T(n,t,e,o,i,l){const r=t.xmin,u=t.xmax,c=t.ymin,f=t.ymax;let h=t.zmin,g=t.zmax,s=t.mmin,x=t.mmax;return i?(h=h||0,g=g||0,l?(s=s||0,x=x||0,n[0]=r,n[1]=c,n[2]=h,n[3]=s,n[4]=u,n[5]=f,n[6]=g,n[7]=x,n):(n[0]=r,n[1]=c,n[2]=h,n[3]=u,n[4]=f,n[5]=g,n)):l?(s=s||0,x=x||0,n[0]=r,n[1]=c,n[2]=s,n[3]=u,n[4]=f,n[5]=x,n):(n[0]=r,n[1]=c,n[2]=u,n[3]=f,n)}function s$1I(n,t,e,o,i,l){const c=e?3:2,f=o&&l,h=e&&i;if(!t.length||!t[0].length)return null;let g,s,x,m,[a,d]=t[0],[v,y]=t[0];for(let p=0;p<t.length;p++){const n=t[p],[e,o]=n;if(a=r$17(a,e),d=r$17(d,o),v=u$1I(v,e),y=u$1I(y,o),h&&n.length>2){const t=n[2];g=r$17(g,t),s=u$1I(s,t);}if(f&&n.length>c){const t=n[c];x=r$17(g,t),m=u$1I(s,t);}}return i?(g=g||0,s=s||0,l?(x=x||0,m=m||0,n[0]=a,n[1]=d,n[2]=g,n[3]=x,n[4]=v,n[5]=y,n[6]=s,n[7]=m,n):(n[0]=a,n[1]=d,n[2]=g,n[3]=v,n[4]=y,n[5]=s,n)):l?(x=x||0,m=m||0,n[0]=a,n[1]=d,n[2]=x,n[3]=v,n[4]=y,n[5]=m,n):(n[0]=a,n[1]=d,n[2]=v,n[3]=y,n)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$1e(n){return void 0!==n.xmin&&void 0!==n.ymin&&void 0!==n.xmax&&void 0!==n.ymax}function u$1H(n){return void 0!==n.points}function m$1M(n){return void 0!==n.x&&void 0!==n.y}function o$1a(n){return void 0!==n.paths}function r$16(n){return void 0!==n.rings}const x$t=[];function a$2w(n,i,t,u){return {xmin:n,ymin:i,xmax:t,ymax:u}}function c$2F(n,i,t,u,m,o){return {xmin:n,ymin:i,zmin:t,xmax:u,ymax:m,zmax:o}}function s$1H(n,i,t,u,m,o){return {xmin:n,ymin:i,mmin:t,xmax:u,ymax:m,mmax:o}}function e$1h(n,i,t,u,m,o,r,x){return {xmin:n,ymin:i,zmin:t,mmin:u,xmax:m,ymax:o,zmax:r,mmax:x}}function f$1b(n,i=!1,t=!1){return i?t?e$1h(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]):c$2F(n[0],n[1],n[2],n[3],n[4],n[5]):t?s$1H(n[0],n[1],n[2],n[3],n[4],n[5]):a$2w(n[0],n[1],n[2],n[3])}function l$1$(n){return n?t$1e(n)?n:m$1M(n)?d$1u(n):r$16(n)?v$J(n):o$1a(n)?h$1e(n):u$1H(n)?y$1d(n):null:null}function y$1d(i){const{hasZ:t,hasM:u,points:m}=i;return f$1b(s$1I(x$t,m,t,u),t,u)}function d$1u(n){const{x:i,y:t,z:u,m}=n,o=null!=m;return null!=u?o?e$1h(i,t,u,m,i,t,u,m):c$2F(i,t,u,i,t,u):o?s$1H(i,t,m,i,t,m):a$2w(i,t,i,t)}function v$J(n){const{hasZ:t,hasM:u,rings:m}=n,o=h$1f(x$t,m,t,u);return o?f$1b(o,t,u):null}function h$1e(n){const{hasZ:t,hasM:u,paths:m}=n,o=h$1f(x$t,m,t,u);return o?f$1b(o,t,u):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var x$s;function j$C(t){return !Array.isArray(t[0])}let w$K=x$s=class extends p$2U{constructor(...t){super(...t),this.rings=[],this.type="polygon";}static fromExtent(t){const r=t.clone().normalize(),e=t.spatialReference;let s=!1,i=!1;for(const o of r)o.hasZ&&(s=!0),o.hasM&&(i=!0);const n={rings:r.map((function(t){const r=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];if(s&&t.hasZ){const e=t.zmin+.5*(t.zmax-t.zmin);for(let t=0;t<r.length;t++)r[t].push(e);}if(i&&t.hasM){const e=t.mmin+.5*(t.mmax-t.mmin);for(let t=0;t<r.length;t++)r[t].push(e);}return r})),spatialReference:e};return s&&(n.hasZ=!0),i&&(n.hasM=!0),new x$s(n)}normalizeCtorArgs(t,r){let e,s,i=null,n=null;return t&&!Array.isArray(t)?(i=t.rings?t.rings:null,r||(t.spatialReference?r=t.spatialReference:t.rings||(r=t)),e=t.hasZ,s=t.hasM):i=t,i=i||[],r=r||k$s.WGS84,i.length&&i[0]&&null!=i[0][0]&&"number"==typeof i[0][0]&&(i=[i]),n=i[0]&&i[0][0],n&&(void 0===e&&void 0===s?(e=n.length>2,s=n.length>3):void 0===e?e=s?n.length>3:n.length>2:void 0===s&&(s=e?n.length>3:n.length>2)),{rings:i,spatialReference:r,hasZ:e,hasM:s}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=e$1j(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const r=new b$O;return r.x=t[0],r.y=t[1],r.spatialReference=this.spatialReference,this.hasZ&&(r.z=t[2]),r}get extent(){const{spatialReference:t}=this,r=v$J(this);if(!r)return null;const e=new M$r(r);return e.spatialReference=t,e}get isSelfIntersecting(){return g$U(this.rings)}writeRings(t,r){r.rings=l$2r(this.rings);}addRing(t){if(!t)return;const r=this.rings,e=r.length;if(j$C(t)){const s=[];for(let r=0,e=t.length;r<e;r++)s[r]=t[r].toArray();r[e]=s;}else r[e]=t.concat();return this.notifyChange("rings"),this}clone(){const t=new x$s;return t.spatialReference=this.spatialReference,t.rings=l$2r(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return !0;if(t$1O(t))return !1;const e=this.spatialReference,n=t.spatialReference;if(r$1G(e)!==r$1G(n))return !1;if(r$1G(e)&&r$1G(n)&&!e.equals(n))return !1;if(this.rings.length!==t.rings.length)return !1;const o=([t,r,e,s],[i,n,o,a])=>t===i&&r===n&&(null==e&&null==o||e===o)&&(null==s&&null==a||s===a);for(let s=0;s<this.rings.length;s++){const e=this.rings[s],i=t.rings[s];if(!l$2s(e,i,o))return !1}return !0}contains(t){if(!t)return !1;const r=M$s(t,this.spatialReference);return c$2J(this,r$1G(r)?r:t)}isClockwise(t){let r;return r=j$C(t)?t.map((t=>this.hasZ?this.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])):t,f$1d(r,this.hasM,this.hasZ)}getPoint(t,r){if(!this._validateInputs(t,r))return null;const e=this.rings[t][r],s=this.hasZ,i=this.hasM;return s&&!i?new b$O(e[0],e[1],e[2],void 0,this.spatialReference):i&&!s?new b$O(e[0],e[1],void 0,e[2],this.spatialReference):s&&i?new b$O(e[0],e[1],e[2],e[3],this.spatialReference):new b$O(e[0],e[1],this.spatialReference)}insertPoint(t,r,e){return this._validateInputs(t,r,!0)?(h$1i(this,e),Array.isArray(e)||(e=e.toArray()),this.rings[t].splice(r,0,e),this.notifyChange("rings"),this):this}removePoint(t,r){if(!this._validateInputs(t,r))return null;const e=new b$O(this.rings[t].splice(r,1)[0],this.spatialReference);return this.notifyChange("rings"),e}removeRing(t){if(!this._validateInputs(t,null))return null;const r=this.rings.splice(t,1)[0],e=this.spatialReference,s=r.map((t=>new b$O(t,e)));return this.notifyChange("rings"),s}setPoint(t,r,e){return this._validateInputs(t,r)?(h$1i(this,e),Array.isArray(e)||(e=e.toArray()),this.rings[t][r]=e,this.notifyChange("rings"),this):this}_validateInputs(t,r,e=!1){if(null==t||t<0||t>=this.rings.length)return !1;if(null!=r){const s=this.rings[t];if(e&&(r<0||r>s.length))return !1;if(!e&&(r<0||r>=s.length))return !1}return !0}toJSON(t){return this.write({},t)}};e$1_([d$1S({readOnly:!0})],w$K.prototype,"cache",null),e$1_([d$1S({readOnly:!0})],w$K.prototype,"centroid",null),e$1_([d$1S({readOnly:!0})],w$K.prototype,"extent",null),e$1_([d$1S({readOnly:!0})],w$K.prototype,"isSelfIntersecting",null),e$1_([d$1S({type:[[[Number]]],json:{write:{isRequired:!0}}})],w$K.prototype,"rings",void 0),e$1_([r$1c("rings")],w$K.prototype,"writeRings",null),w$K=x$s=e$1_([i$2w("esri.geometry.Polygon")],w$K),w$K.prototype.toJSON.isDefaultToJSON=!0;const v$I=w$K;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$2E;function u$1G(t){return !Array.isArray(t[0])}let f$1a=c$2E=class extends p$2U{constructor(...t){super(...t),this.paths=[],this.type="polyline";}normalizeCtorArgs(t,e){let s,r,i=null,a=null;return t&&!Array.isArray(t)?(i=t.paths?t.paths:null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),s=t.hasZ,r=t.hasM):i=t,i=i||[],e=e||k$s.WGS84,i.length&&i[0]&&null!=i[0][0]&&"number"==typeof i[0][0]&&(i=[i]),a=i[0]&&i[0][0],a&&(void 0===s&&void 0===r?(s=a.length>2,r=!1):void 0===s?s=!r&&a.length>3:void 0===r&&(r=!s&&a.length>3)),{paths:i,spatialReference:e,hasZ:s,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=h$1e(this);if(!e)return null;const s=new M$r(e);return s.spatialReference=t,s}writePaths(t,s){s.paths=l$2r(this.paths);}addPath(t){if(!t)return;const e=this.paths,s=e.length;if(u$1G(t)){const r=[];for(let e=0,s=t.length;e<s;e++)r[e]=t[e].toArray();e[s]=r;}else e[s]=t.concat();return this.notifyChange("paths"),this}clone(){const t=new c$2E;return t.spatialReference=this.spatialReference,t.paths=l$2r(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const s=this.paths[t][e],r=this.hasZ,i=this.hasM;return r&&!i?new b$O(s[0],s[1],s[2],void 0,this.spatialReference):i&&!r?new b$O(s[0],s[1],void 0,s[2],this.spatialReference):r&&i?new b$O(s[0],s[1],s[2],s[3],this.spatialReference):new b$O(s[0],s[1],this.spatialReference)}insertPoint(t,e,s){return this._validateInputs(t,e,!0)?(h$1i(this,s),Array.isArray(s)||(s=s.toArray()),this.paths[t].splice(e,0,s),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],s=this.spatialReference,r=e.map((t=>new b$O(t,s)));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const s=new b$O(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),s}setPoint(t,e,s){return this._validateInputs(t,e)?(h$1i(this,s),Array.isArray(s)||(s=s.toArray()),this.paths[t][e]=s,this.notifyChange("paths"),this):this}_validateInputs(t,e,s=!1){if(null==t||t<0||t>=this.paths.length)return !1;if(null!=e){const r=this.paths[t];if(s&&(e<0||e>r.length))return !1;if(!s&&(e<0||e>=r.length))return !1}return !0}toJSON(t){return this.write({},t)}};e$1_([d$1S({readOnly:!0})],f$1a.prototype,"cache",null),e$1_([d$1S({readOnly:!0})],f$1a.prototype,"extent",null),e$1_([d$1S({type:[[[Number]]],json:{write:{isRequired:!0}}})],f$1a.prototype,"paths",void 0),e$1_([r$1c("paths")],f$1a.prototype,"writePaths",null),f$1a=c$2E=e$1_([i$2w("esri.geometry.Polyline")],f$1a),f$1a.prototype.toJSON.isDefaultToJSON=!0;const m$1L=f$1a;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$21=s$25()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),t$1d=s$25()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function s$1G(o){return void 0!==o.xmin&&void 0!==o.ymin&&void 0!==o.xmax&&void 0!==o.ymax}function f$19(o){return void 0!==o.points}function l$1_(o){return void 0!==o.x&&void 0!==o.y}function y$1c(o){return void 0!==o.paths}function c$2D(o){return void 0!==o.rings}function d$1t(u){return t$1O(u)?null:u instanceof p$2U?u:l$1_(u)?b$O.fromJSON(u):y$1c(u)?m$1L.fromJSON(u):c$2D(u)?v$I.fromJSON(u):f$19(u)?m$1N.fromJSON(u):s$1G(u)?M$r.fromJSON(u):null}function v$H(o){return o?l$1_(o)?"esriGeometryPoint":y$1c(o)?"esriGeometryPolyline":c$2D(o)?"esriGeometryPolygon":s$1G(o)?"esriGeometryEnvelope":f$19(o)?"esriGeometryMultipoint":null:null}const G$e={esriGeometryPoint:b$O,esriGeometryPolyline:m$1L,esriGeometryPolygon:v$I,esriGeometryEnvelope:M$r,esriGeometryMultipoint:m$1N};function a$2v(o){return o&&G$e[o]||null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$20={base:p$2U,key:"type",typeMap:{extent:M$r,multipoint:m$1N,point:b$O,polyline:m$1L,polygon:v$I}};N$t(i$20);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$1c;function a$2u(){return t$1c||(t$1c=(async()=>{const e=await import('./arcadeUtils.js').then(function (n) { return n.as; });return {arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),t$1c}const s$1F=(e,r,t)=>o$19.create(e,r,t,null,["$feature"]),i$1$=(e,r,t)=>o$19.create(e,r,t,null,["$feature","$view"]),n$2i=(e,r,t,a)=>o$19.create(e,r,t,a,["$feature","$view"]);class o$19{constructor(e,r,t,a,s,i,c,n){this.script=e,this.evaluate=s;const o=Array.isArray(c)?c:c.fields;this.fields=o,this._syntaxTree=a,this._arcade=r,this._arcadeDictionary=t,this._arcadeFeature=i,this._spatialReference=n,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale");}static async create(t,s,i,c,n,l){const{arcade:u,Feature:p,Dictionary:f}=await a$2u(),d=k$s.fromJSON(s),y=u.parseScript(t,l),h=n.reduce(((e,r)=>({...e,[r]:null})),{});let m=null;r$1G(c)&&(m=new f(c),m.immutable=!0,h.$config=null);const _=u.scriptUsesGeometryEngine(y)&&u.enableGeometrySupport(),F=u.scriptUsesFeatureSet(y)&&u.enableFeatureSetSupport(),w=u.scriptIsAsync(y)&&u.enableAsyncSupport(),S={vars:h,spatialReference:d,useAsync:!!w},b=new f;b.immutable=!1,b.setField("scale",0);const $=u.compileScript(y,S),x=e=>("$view"in e&&e.$view&&(b.setField("scale",e.$view.scale),e.$view=b),m&&(e.$config=m),$({vars:e,spatialReference:d}));return await Promise.all([_,F,w]),new o$19(t,u,f,y,x,new p,i,d)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u$1F=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],f$18=["field","normalizationField"];function d$1s(e,n){if(null!=e&&null!=n)for(const i of Array.isArray(e)?e:[e])if(c$2C(u$1F,i,n),"visualVariables"in i&&i.visualVariables)for(const e of i.visualVariables)c$2C(f$18,e,n);}function c$2C(e,n,i){if(e)for(const l of e){const e=t$1L(l,n),o=e&&"function"!=typeof e&&i.get(e);o&&o$1W(l,o.name,n);}}function m$1K(e,n){if(null!=e&&null!=n&&n.fields.length)if("startField"in e){const i=n.get(e.startField),t=n.get(e.endField);e.startField=i&&i.name||null,e.endField=t&&t.name||null;}else {const i=n.get(e.startTimeField),t=n.get(e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=t&&t.name||null;}}const p$2R=new Set;function y$1b(e,n){return e&&n?(p$2R.clear(),g$S(p$2R,e,n),Array.from(p$2R).sort()):[]}function g$S(e,n,i){var t;if(i)if(null!=n&&null!=(t=n.fields)&&t.length)if(i.includes("*"))for(const{name:r}of n.fields)e.add(r);else for(const r of i)F$h(e,n,r);else {if(i.includes("*"))return e.clear(),void e.add("*");for(const n of i)e.add(n);}}function F$h(e,n,i){if("string"==typeof i)if(n){const t=n.get(i);t&&e.add(t.name);}else e.add(i);}function I$t(e,i){return t$1O(i)||t$1O(e)?[]:i.includes("*")?e.fields.map((e=>e.name)):i}async function b$N(e,n,i){var t;if(!i)return;const{arcadeUtils:r}=await a$2u(),l=r.extractFieldNames(i,null==n||null==(t=n.fields)?void 0:t.map((e=>e.name)));for(const o of l)F$h(e,n,o);}async function T$k(n,i,t){if(t&&"1=1"!==t){const r=(await import('./WhereClause.js')).WhereClause.create(t,i);if(!r.isStandardized)throw new s$29("fieldUtils:collectFilterFields","Where clause is not standardized");g$S(n,i,r.fieldNames);}}function h$1d({displayField:e,fields:n}){return e||(n&&n.length?w$J(n,"name-or-title")||w$J(n,"unique-identifier")||w$J(n,"type-or-category")||v$G(n):null)}function v$G(e){for(const n of e){if(!n||!n.name)continue;const e=n.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return n.name}return null}function w$J(e,n){for(const i of e)if(i&&i.valueType&&i.valueType===n)return i.name;return null}async function A$l(e,n){if(!n)return;const i=t$1L("elevationInfo.featureExpressionInfo",n);return i?i.collectRequiredFields(e,n.fieldsIndex):void 0}async function E$m(e,n,i){i.outStatistic.onStatisticValueExpression?b$N(e,n,i.outStatistic.onStatisticValueExpression):e.add(i.outStatistic.onStatisticField);}async function N$l(e,n,i){var t;if(!n||!i||"cluster"!==i.type)return;const r=[];null!=(t=i.popupTemplate)&&t.expressionInfos&&r.push(...i.popupTemplate.expressionInfos.map((i=>b$N(e,n.fieldsIndex,i.expression)))),i.fields&&r.push(...i.fields.map((i=>E$m(e,n.fieldsIndex,i)))),await Promise.all(r);}async function V$b(e,n,t){n&&(n.timeInfo&&r$1G(t)&&t.timeExtent&&g$S(e,n.fieldsIndex,[n.timeInfo.startField,n.timeInfo.endField]),n.floorInfo&&g$S(e,n.fieldsIndex,[n.floorInfo.floorField]),r$1G(t)&&r$1G(t.where)&&await T$k(e,n.fieldsIndex,t.where));}async function _$q(e,n,i){n&&i&&await Promise.all(i.map((i=>D$m(e,n,i))));}async function D$m(e,n,i){n&&i&&(i.valueExpression?await b$N(e,n.fieldsIndex,i.valueExpression):i.field&&F$h(e,n.fieldsIndex,i.field));}function O$m(e){if(!e)return [];const n="editFieldsInfo"in e&&e.editFieldsInfo;return n?y$1b(e.fieldsIndex,[n&&n.creatorField,n&&n.creationDateField,n&&n.editorField,n&&n.editDateField]):[]}async function j$B(e,n){const{labelingInfo:i,fieldsIndex:t}=n;i&&i.length&&await Promise.all(i.map((n=>z$i(e,t,n))));}async function z$i(e,n,i){if(!i)return;const t=i.getLabelExpression(),r=i.where;if("arcade"===t.type)await b$N(e,n,t.expression);else {const i=t.expression.match(/{[^}]*}/g);i&&i.forEach((i=>{F$h(e,n,i.slice(1,-1));}));}await T$k(e,n,r);}function P$l(e){const n=e.defaultValue;return void 0!==n&&Y$a(e,n)?n:e.nullable?null:void 0}function k$r(e){return "number"==typeof e&&!isNaN(e)&&isFinite(e)}function R$n(e){return null===e||k$r(e)}const C$r="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function G$d(e){return null===e||C$r(e)}function q$i(e){return null!=e&&"string"==typeof e}function M$q(e){return null===e||q$i(e)}function W$8(){return !0}function Y$a(e,n){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?G$d:C$r;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?R$n:k$r;break;case"string":case"esriFieldTypeString":i=e.nullable?M$q:q$i;break;default:i=W$8;}return 1===arguments.length?i:i(n)}const J$a=["integer","small-integer","single","double"],X$a=new Set([...J$a,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function B$f(e){return null!=e&&X$a.has(e.type)}function H$d(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function K$9(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}var Z$9,ee$5;function ne$3(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function ie$5(e,n){return e.nullable&&null===n?null:B$f(e)&&!te$6(e.type,Number(n))?Z$9.OUT_OF_RANGE:Y$a(e,n)?e.domain?a$2D(e.domain,n):null:ee$5.INVALID_TYPE}function te$6(e,n){const i="string"==typeof e?le$4(e):e;return !!i&&(i.isInteger?C$r(n)&&n>=i.min&&n<=i.max:n>=i.min&&n<=i.max)}function le$4(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return ae$4;case"esriFieldTypeInteger":case"integer":return se$6;case"esriFieldTypeSingle":case"single":return ue$4;case"esriFieldTypeDouble":case"double":return fe$4}}!function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range";}(Z$9||(Z$9={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type";}(ee$5||(ee$5={}));const ae$4={min:-32768,max:32767,isInteger:!0},se$6={min:-2147483648,max:2147483647,isInteger:!0},ue$4={min:-34e37,max:12e37,isInteger:!1},fe$4={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function de$4(e,n,i){switch(e){case e$1n.INVALID_CODED_VALUE:return `Value ${i} is not in the coded domain - field: ${n.name}, domain: ${JSON.stringify(n.domain)}`;case e$1n.VALUE_OUT_OF_RANGE:return `Value ${i} is out of the range of valid values - field: ${n.name}, domain: ${JSON.stringify(n.domain)}`;case ee$5.INVALID_TYPE:return `Value ${i} is not a valid value for the field type - field: ${n.name}, type: ${n.type}, nullable: ${n.nullable}`;case Z$9.OUT_OF_RANGE:{const{min:e,max:t}=le$4(n.type);return `Value ${i} is out of range for the number type - field: ${n.name}, type: ${n.type}, value range is ${e} to ${t}`}}}function ce$4(e,n){return !me$3(e,n,null)}function me$3(e,n,t){if(!n||!n.attributes||!e){if(r$1G(t))for(const n of e)t.add(n);return !0}const r=n.attributes;let l=!1;for(const o of e)if(!(o in r)){if(l=!0,!r$1G(t))break;t.add(o);}return l}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$2Q=new o$1K({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let c$2B=0,m$1J=class extends a$2A{constructor(r){super(r),this.id="sym"+c$2B++,this.type=null;}set color(r){this._set("color",r);}readColor(r){return r&&null!=r[0]?[r[0],r[1],r[2],r[3]/255]:r}async collectRequiredFields(r,o){}hash(){return JSON.stringify(this.toJSON())}clone(){}};e$1_([d$1S({type:p$2Q.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:p$2Q.write}}})],m$1J.prototype,"type",void 0),e$1_([d$1S({type:h$1l,value:new h$1l([0,0,0,1]),json:{write:{allowNull:!0}}})],m$1J.prototype,"color",null),e$1_([o$1j("color")],m$1J.prototype,"readColor",null),m$1J=e$1_([i$2w("esri.symbols.Symbol")],m$1J);const a$2t=m$1J;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$1I;let l$1Z=m$1I=class extends a$2t{constructor(r){super(r),this.data=null,this.type="cim";}readData(r,o){return o}writeData(r,o){if(r)for(const t in r)o[t]=r[t];}async collectRequiredFields(r,o){if("CIMSymbolReference"===this.data.type){const t=this.data.primitiveOverrides;if(t){const e=t.map((t=>{const e=t.valueExpressionInfo;return b$N(r,o,e.expression)}));await Promise.all(e);}}}clone(){return new m$1I({data:l$2r(this.data)})}hash(){return c$3d(JSON.stringify(this.data)).toString()}};e$1_([d$1S({json:{write:!1}})],l$1Z.prototype,"color",void 0),e$1_([d$1S({json:{write:!0}})],l$1Z.prototype,"data",void 0),e$1_([o$1j("data",["symbol"])],l$1Z.prototype,"readData",null),e$1_([r$1c("data",{})],l$1Z.prototype,"writeData",null),e$1_([r$1d({CIMSymbolReference:"cim"},{readOnly:!0})],l$1Z.prototype,"type",void 0),l$1Z=m$1I=e$1_([i$2w("esri.symbols.CIMSymbol")],l$1Z);const d$1r=l$1Z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$2P=class extends a$2A{constructor(e){super(e),this.enabled=!0,this.type=null;}writeEnabled(e,r,o){e||(r[o]=e);}};e$1_([d$1S({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],p$2P.prototype,"enabled",void 0),e$1_([r$1c("enabled")],p$2P.prototype,"writeEnabled",null),e$1_([d$1S({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],p$2P.prototype,"type",void 0),p$2P=e$1_([i$2w("esri.symbols.Symbol3DLayer")],p$2P);const a$2s=p$2P;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$2h=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,t$1b="screenUtils.toPt: input not recognized!",r$15=96;function u$1E(n){return n?n/72*r$15:0}function e$1g(n){return n?72*n/r$15:0}function o$18(r){if("string"==typeof r){const u=r.match(n$2h);if(u){const n=Number(u[1]),t=u[3]&&u[3].toLowerCase(),o="-"===r.charAt(0),c="px"===t?e$1g(n):n;return o?-c:c}return console.warn(t$1b),null}return r}function c$2A(n=0,t=0){return {x:n,y:t}}function i$1_(n=0,t=0){return [n,t]}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2g(n){const r=s$2g(100*(1-n));return Math.max(0,Math.min(r,100))}function r$14(t){const n=1-t/100;return Math.max(0,Math.min(n,1))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function s$1E(o,t){const n=null!=t.transparency?r$14(t.transparency):1,s=t.color;return s&&Array.isArray(s)?new h$1l([s[0]||0,s[1]||0,s[2]||0,n]):null}function c$2z(r,o){o.color=r.toJSON().slice(0,3);const t=n$2g(r.a);0!==t&&(o.transparency=t);}const p$2O={type:h$1l,json:{type:[S$J],default:null,read:{source:["color","transparency"],reader:s$1E},write:{target:{color:{type:[S$J]},transparency:{type:S$J}},writer:c$2z}}},a$2r={type:Number,cast:o$18,json:{write:!0}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$1Y=class extends a$2A{constructor(o){super(o),this.color=new h$1l([0,0,0,1]),this.extensionLength=0,this.size=e$1g(1);}clone(){}cloneProperties(){return {color:l$2r(this.color),size:this.size,extensionLength:this.extensionLength}}};e$1_([d$1S({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],l$1Y.prototype,"type",void 0),e$1_([d$1S(p$2O)],l$1Y.prototype,"color",void 0),e$1_([d$1S({...a$2r,json:{write:{overridePolicy:o=>({enabled:!!o})}}})],l$1Y.prototype,"extensionLength",void 0),e$1_([d$1S(a$2r)],l$1Y.prototype,"size",void 0),l$1Y=e$1_([i$2w("esri.symbols.edges.Edges3D")],l$1Y);const m$1H=l$1Y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$1a;let c$2y=t$1a=class extends m$1H{constructor(r){super(r),this.type="sketch";}clone(){return new t$1a(this.cloneProperties())}};e$1_([r$1d({sketch:"sketch"},{readOnly:!0})],c$2y.prototype,"type",void 0),c$2y=t$1a=e$1_([i$2w("esri.symbols.edges.SketchEdges3D")],c$2y);const p$2N=c$2y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$19;let p$2M=t$19=class extends m$1H{constructor(o){super(o),this.type="solid";}clone(){return new t$19(this.cloneProperties())}};e$1_([r$1d({solid:"solid"},{readOnly:!0})],p$2M.prototype,"type",void 0),p$2M=t$19=e$1_([i$2w("esri.symbols.support.SolidEdges3D")],p$2M);const c$2x=p$2M;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$18={types:{key:"type",base:m$1H,typeMap:{solid:c$2x,sketch:p$2N}},json:{write:!0}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$2L;let l$1X=p$2L=class extends a$2A{constructor(o){super(o),this.color=null;}clone(){const o={color:r$1G(this.color)?this.color.clone():null};return new p$2L(o)}};e$1_([d$1S(p$2O)],l$1X.prototype,"color",void 0),l$1X=p$2L=e$1_([i$2w("esri.symbols.support.Symbol3DMaterial")],l$1X);const a$2q=l$1X;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$1W;let c$2w=l$1W=class extends a$2s{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null;}clone(){return new l$1W({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:r$1G(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};e$1_([r$1d({Extrude:"extrude"},{readOnly:!0})],c$2w.prototype,"type",void 0),e$1_([d$1S({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],c$2w.prototype,"size",void 0),e$1_([d$1S({type:a$2q,json:{write:!0}})],c$2w.prototype,"material",void 0),e$1_([d$1S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],c$2w.prototype,"castShadows",void 0),e$1_([d$1S(t$18)],c$2w.prototype,"edges",void 0),c$2w=l$1W=e$1_([i$2w("esri.symbols.ExtrudeSymbol3DLayer")],c$2w);const m$1G=c$2w;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$1Z=class extends a$2t{constructor(r){super(r),this.type="simple-line",this.width=.75;}hash(){return `${this.type}.${this.width}`}};e$1_([r$1d({esriSLS:"simple-line"},{readOnly:!0})],i$1Z.prototype,"type",void 0),e$1_([d$1S({type:Number,cast:o$18,json:{write:!0}})],i$1Z.prototype,"width",void 0),i$1Z=e$1_([i$2w("esri.symbols.LineSymbol")],i$1Z);const c$2v=i$1Z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$2p;let n$2f=a$2p=class extends a$2A{constructor(r){super(r),this.placement="begin-end",this.type="line-marker",this.style="arrow";}writeStyle(r,o,e,t){"web-map"===(null==t?void 0:t.origin)?o[e]="arrow":o[e]=r;}set color(r){this._set("color",r);}readColor(r){return r&&null!=r[0]?[r[0],r[1],r[2],r[3]/255]:r}writeColor(r,o,e,t){"web-map"===(null==t?void 0:t.origin)||(o[e]=r);}clone(){return new a$2p({color:l$2r(this.color),placement:this.placement,style:this.style})}hash(){var r;return `${this.placement}.${null==(r=this.color)?void 0:r.hash()}.${this.style}`}};e$1_([d$1S({type:["begin","end","begin-end"],json:{write:!0}})],n$2f.prototype,"placement",void 0),e$1_([r$1d({"line-marker":"line-marker"},{readOnly:!0}),d$1S({json:{origins:{"web-map":{write:!1}}}})],n$2f.prototype,"type",void 0),e$1_([d$1S({type:["arrow","circle","square","diamond","cross","x"]})],n$2f.prototype,"style",void 0),e$1_([r$1c("style")],n$2f.prototype,"writeStyle",null),e$1_([d$1S({type:h$1l,value:null,json:{write:{allowNull:!0}}})],n$2f.prototype,"color",null),e$1_([o$1j("color")],n$2f.prototype,"readColor",null),e$1_([r$1c("color")],n$2f.prototype,"writeColor",null),n$2f=a$2p=e$1_([i$2w("esri.symbols.LineSymbolMarker")],n$2f);const m$1F=n$2f;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$2K;const h$1c=new o$1K({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let d$1q=p$2K=class extends c$2v{constructor(...r){super(...r),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2;}normalizeCtorArgs(r,o,e,s,i,l){if(r&&"string"!=typeof r)return r;const n={};return null!=r&&(n.style=r),null!=o&&(n.color=o),null!=e&&(n.width=o$18(e)),null!=s&&(n.cap=s),null!=i&&(n.join=i),null!=l&&(n.miterLimit=o$18(l)),n}clone(){var r;return new p$2K({color:l$2r(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:null==(r=this.marker)?void 0:r.clone()})}hash(){var r,o;return `${super.hash()}.${null==(r=this.color)?void 0:r.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${null==(o=this.marker)?void 0:o.hash()}`}};e$1_([r$1d({esriSLS:"simple-line"},{readOnly:!0})],d$1q.prototype,"type",void 0),e$1_([d$1S({type:h$1c.apiValues,json:{read:h$1c.read,write:h$1c.write}})],d$1q.prototype,"style",void 0),e$1_([d$1S({type:["butt","round","square"],json:{write:{overridePolicy:(r,o,e)=>({enabled:"round"!==r&&(null==e||null==e.origin)})}}})],d$1q.prototype,"cap",void 0),e$1_([d$1S({type:["miter","round","bevel"],json:{write:{overridePolicy:(r,o,e)=>({enabled:"round"!==r&&(null==e||null==e.origin)})}}})],d$1q.prototype,"join",void 0),e$1_([d$1S({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":m$1F}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],d$1q.prototype,"marker",void 0),e$1_([d$1S({type:Number,json:{read:!1,write:!1}})],d$1q.prototype,"miterLimit",void 0),d$1q=p$2K=e$1_([i$2w("esri.symbols.SimpleLineSymbol")],d$1q);const m$1E=d$1q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$1V=class extends a$2t{constructor(e){super(e),this.outline=null,this.type=null;}hash(){return `${this.type}.${this.outline&&this.outline.hash()}`}};e$1_([d$1S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":m$1E}},json:{default:null,write:!0}})],l$1V.prototype,"outline",void 0),e$1_([d$1S({type:["simple-fill","picture-fill"],readOnly:!0})],l$1V.prototype,"type",void 0),l$1V=e$1_([i$2w("esri.symbols.FillSymbol")],l$1V);const p$2J=l$1V;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$17=class extends a$2A{constructor(r){super(r);}clone(){}};e$1_([d$1S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],t$17.prototype,"type",void 0),t$17=e$1_([i$2w("esri.symbols.patterns.LinePattern3D")],t$17);const p$2I=t$17;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$17=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$2H;const h$1b=s$25()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let c$2u=p$2H=class extends p$2I{constructor(o){super(o),this.type="style",this.style="solid";}clone(){const o={style:this.style};return new p$2H(o)}};e$1_([d$1S({type:["style"]})],c$2u.prototype,"type",void 0),e$1_([r$1d(h$1b),d$1S({type:o$17})],c$2u.prototype,"style",void 0),c$2u=p$2H=e$1_([i$2w("esri.symbols.patterns.LineStylePattern3D")],c$2u);const l$1U=c$2u;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$16=class extends a$2A{constructor(r){super(r);}clone(){}};e$1_([d$1S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],t$16.prototype,"type",void 0),t$16=e$1_([i$2w("esri.symbols.patterns.Pattern3D")],t$16);const p$2G=t$16;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$2o=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$2F;let c$2t=p$2F=class extends p$2G{constructor(s){super(s),this.type="style",this.style="solid";}clone(){const s={style:this.style};return new p$2F(s)}};e$1_([d$1S({type:["style"]})],c$2t.prototype,"type",void 0),e$1_([d$1S({type:a$2o,json:{read:!0,write:!0}})],c$2t.prototype,"style",void 0),c$2t=p$2F=e$1_([i$2w("esri.symbols.patterns.StylePattern3D")],c$2t);const a$2n=c$2t;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$1D={types:{key:"type",base:p$2G,typeMap:{style:a$2n}},json:{write:!0}},o$16={types:{key:"type",base:p$2I,typeMap:{style:l$1U}},json:{write:!0}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$15=new h$1l("white");new h$1l("black");const e$1f=new h$1l([255,255,255,0]);function t$15(n){return 0===n.r&&0===n.g&&0===n.b}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$2s;let l$1T=c$2s=class extends l$1X{constructor(o){super(o),this.colorMixMode=null;}clone(){const o={color:r$1G(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new c$2s(o)}};e$1_([r$1d({multiply:"multiply",replace:"replace",tint:"tint"})],l$1T.prototype,"colorMixMode",void 0),l$1T=c$2s=e$1_([i$2w("esri.symbols.support.Symbol3DFillMaterial")],l$1T);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$1Y(n){return n}function u$1D(n=J$9){return i$1Y([n[0],n[1],n[2],n[3]])}function e$1e(n){return i$1Y([n[0],n[1],n[2],n[3]])}function o$14(n,t,r,i,e=u$1D()){return e[0]=n,e[1]=t,e[2]=r,e[3]=i,e}function c$2r(n,t=u$1D()){return t[0]=n.xmin,t[1]=n.ymin,t[2]=n.xmax,t[3]=n.ymax,t}function m$1D(n,t){return new M$r({xmin:n[0],ymin:n[1],xmax:n[2],ymax:n[3],spatialReference:t})}function f$17(n,t){t[0]<n[0]&&(n[0]=t[0]),t[0]>n[2]&&(n[2]=t[0]),t[1]<n[1]&&(n[1]=t[1]),t[1]>n[3]&&(n[3]=t[1]);}function s$1C(n){return t$1O(n)||n[0]>=n[2]?0:n[2]-n[0]}function l$1S(n){return n[1]>=n[3]?0:n[3]-n[1]}function y$1a(n){return s$1C(n)*l$1S(n)}function w$I(n,t,r){return t[0]>=n[0]-r&&t[1]>=n[1]-r&&t[0]<=n[2]+r&&t[1]<=n[3]+r}function k$q(n,t){return Math.max(t[0],n[0])<=Math.min(t[2],n[2])&&Math.max(t[1],n[1])<=Math.min(t[3],n[3])}function q$h(n,t){return t[0]>=n[0]&&t[2]<=n[2]&&t[1]>=n[1]&&t[3]<=n[3]}const I$s=i$1Y([1/0,1/0,-1/0,-1/0]),J$9=i$1Y([0,0,0,0]);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$1X(n){return n}function a$2m(n=H$c){return i$1X([n[0],n[1],n[2],n[3],n[4],n[5]])}function u$1C(n,t,r,i,u,e,m=a$2m()){return m[0]=n,m[1]=t,m[2]=r,m[3]=i,m[4]=u,m[5]=e,m}function f$16(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.min(n[2],t[2]),n[3]=Math.max(n[3],t[3]),n[4]=Math.max(n[4],t[4]),n[5]=Math.max(n[5],t[5]);}function h$1a(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.min(n[2],t[2]),n[3]=Math.max(n[3],t[0]),n[4]=Math.max(n[4],t[1]),n[5]=Math.max(n[5],t[2]);}function I$r(n){return n[0]>=n[3]?0:n[3]-n[0]}function y$19(n){return n[1]>=n[4]?0:n[4]-n[1]}function N$k(n){return n[2]>=n[5]?0:n[5]-n[2]}function F$g(n,t=[0,0,0]){return t[0]=I$r(n),t[1]=y$19(n),t[2]=N$k(n),t}function q$g(n,t,r=n){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==n&&(r[3]=n[3],r[4]=n[4],r[5]=n[5]),r}function w$H(n,t,r=n){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==n&&(r[0]=n[0],r[1]=n[1],r[2]=n[2]),n}function A$k(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function B$e(n){return n?A$k(n,D$l):a$2m(D$l)}function O$l(n,t){return n[0]=t[0],n[1]=t[1],n[2]=Number.NEGATIVE_INFINITY,n[3]=t[2],n[4]=t[3],n[5]=Number.POSITIVE_INFINITY,n}function P$k(n){return 6===n.length}function k$p(t,r,i){if(t$1O(t)||t$1O(r))return t===r;if(!P$k(t)||!P$k(r))return !1;if(i){for(let n=0;n<t.length;n++)if(!i(t[n],r[n]))return !1}else for(let n=0;n<t.length;n++)if(t[n]!==r[n])return !1;return !0}const D$l=i$1X([1/0,1/0,1/0,-1/0,-1/0,-1/0]),H$c=i$1X([0,0,0,0,0,0]);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$14(r,{isPrimitive:t,width:n,depth:o,height:s}){const c=t?10:1;if(null==n&&null==s&&null==o)return [c*r[0],c*r[1],c*r[2]];const u=r$1h(n,o,s);let i;for(let e=0;e<3;e++){const t=u[e];if(null!=t){i=t/r[e];break}}for(let e=0;e<3;e++)null==u[e]&&(u[e]=r[e]*i);return u}const n$2e=u$1C(-.5,-.5,-.5,.5,.5,.5),o$13=u$1C(-.5,-.5,0,.5,.5,1),s$1B=u$1C(-.5,-.5,0,.5,.5,.5);function c$2q(e){switch(e){case"sphere":case"cube":case"diamond":return n$2e;case"cylinder":case"cone":case"inverted-cone":return o$13;case"tetrahedron":return s$1B;default:return}}const u$1B=["butt","square","round"],i$1W=[...u$1B,"none"],a$2l=["miter","bevel","round"];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$1C;let u$1A=m$1C=class extends a$2A{constructor(t){super(t),this.color=new h$1l([0,0,0,1]),this.size=e$1g(1),this.pattern=null,this.patternCap="butt";}clone(){const t={color:r$1G(this.color)?this.color.clone():null,size:this.size,pattern:r$1G(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new m$1C(t)}};e$1_([d$1S(p$2O)],u$1A.prototype,"color",void 0),e$1_([d$1S(a$2r)],u$1A.prototype,"size",void 0),e$1_([d$1S(o$16)],u$1A.prototype,"pattern",void 0),e$1_([d$1S({type:u$1B,json:{default:"butt",write:{overridePolicy(){return {enabled:r$1G(this.pattern)}}}}})],u$1A.prototype,"patternCap",void 0),u$1A=m$1C=e$1_([i$2w("esri.symbols.support.Symbol3DOutline")],u$1A);const j$A=u$1A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$1p;let h$19=d$1p=class extends a$2s{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null;}clone(){const t={edges:r$1G(this.edges)?this.edges.clone():null,enabled:this.enabled,material:r$1G(this.material)?this.material.clone():null,pattern:r$1G(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:r$1G(this.outline)?this.outline.clone():null};return new d$1p(t)}static fromSimpleFillSymbol(t){var o,e,l,r,s,i;const p=t.outline&&t.outline.style&&"inside-frame"!==t.outline.style&&"solid"!==t.outline.style?new l$1U({style:t.outline.style}):null,y={size:null!=(o=null==(e=t.outline)?void 0:e.width)?o:0,color:(null!=(l=null==(r=t.outline)?void 0:r.color)?l:o$15).clone(),pattern:p};return p&&null!=(s=t.outline)&&s.cap&&(y.patternCap=t.outline.cap),new d$1p({material:new l$1T({color:(null!=(i=t.color)?i:e$1f).clone()}),pattern:t.style&&"solid"!==t.style?new a$2n({style:t.style}):null,outline:y})}};e$1_([r$1d({Fill:"fill"},{readOnly:!0})],h$19.prototype,"type",void 0),e$1_([d$1S({type:l$1T,json:{write:!0}})],h$19.prototype,"material",void 0),e$1_([d$1S(s$1D)],h$19.prototype,"pattern",void 0),e$1_([d$1S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],h$19.prototype,"castShadows",void 0),e$1_([d$1S({type:j$A,json:{write:!0}})],h$19.prototype,"outline",void 0),e$1_([d$1S(t$18)],h$19.prototype,"edges",void 0),h$19=d$1p=e$1_([i$2w("esri.symbols.FillSymbol3DLayer")],h$19);const f$15=h$19;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$2k;let l$1R=a$2k=class extends a$2A{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal";}castSize(t){return o$18(t)}clone(){return new a$2k({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return `${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};e$1_([d$1S({type:["underline","line-through","none"],json:{default:"none",write:!0}})],l$1R.prototype,"decoration",void 0),e$1_([d$1S({type:String,json:{write:!0}})],l$1R.prototype,"family",void 0),e$1_([d$1S({type:Number,json:{write:{overridePolicy:(t,o,e)=>({enabled:!e||!e.textSymbol3D})}}})],l$1R.prototype,"size",void 0),e$1_([c$2Y("size")],l$1R.prototype,"castSize",null),e$1_([d$1S({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],l$1R.prototype,"style",void 0),e$1_([d$1S({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],l$1R.prototype,"weight",void 0),l$1R=a$2k=e$1_([i$2w("esri.symbols.Font")],l$1R);const n$2d=l$1R;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function c$2p(r,o){const s=o&&o.url&&o.url.path;if(r&&s&&(r=T$n(r,s,{preserveProtocolRelative:!0}),o.portalItem&&o.readResourcePaths)){const e=W$a(r,o.portalItem.itemUrl);h$18.test(e)&&o.readResourcePaths.push(o.portalItem.resourceFromPath(e).path);}return I$q(r,o&&o.portal)}function i$1V(r,a,u=0){if(!r)return r;!Q$d(r)&&a&&a.blockedRelativeUrls&&a.blockedRelativeUrls.push(r);let n=T$n(r);if(a){const e=a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.rootPath||a.url&&a.url.path;if(e){const o=I$q(e,a.portal);n=W$a(I$q(n,a.portal),o,o),n!==r&&a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.writtenUrls.push(n);}}return n=v$F(n,a&&a.portal),Q$d(n)&&(n=z$q(n)),null!=a&&a.resources&&null!=a&&a.portalItem&&!Q$d(n)&&!G$k(n)&&0===u&&a.resources.toKeep.push({resource:a.portalItem.resourceFromPath(n)}),n}function m$1B(r,e,t){return c$2p(r,t)}function p$2E(r,e,t,o){const s=i$1V(r,o);void 0!==s&&(e[t]=s);}const f$14=/\/items\/([^\/]+)\/resources\//,h$18=/^\.\/resources\//;function U$j(e){const t=r$1G(e)?e.match(f$14):null;return r$1G(t)?t[1]:null}function v$F(r,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?xt$1(r,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):r}function I$q(r,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return r;const t=`${e.urlKey}.${e.customBaseUrl}`;return E$u(x$F,`${x$F.scheme}://${t}`)?xt$1(r,e.portalHostname,t):xt$1(r,t,e.portalHostname)}const R$m=Object.freeze({__proto__:null,fromJSON:c$2p,toJSON:i$1V,read:m$1B,write:p$2E,itemIdFromResourceUrl:U$j});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$2c;const d$1o=s$25()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let h$17=n$2c=class extends a$2A{constructor(r){super(r);}readHref(r,e,o){return r?c$2p(r,o):e.dataURI}writeHref(r,e,o,c){r&&(G$k(r)?e.dataURI=r:(e.href=i$1V(r,c),Q$d(e.href)&&(e.href=z$q(e.href))));}clone(){return new n$2c({href:this.href,primitive:this.primitive})}};e$1_([d$1S({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],h$17.prototype,"href",void 0),e$1_([o$1j("href")],h$17.prototype,"readHref",null),e$1_([r$1c("href",{href:{type:String},dataURI:{type:String}})],h$17.prototype,"writeHref",null),e$1_([r$1d(d$1o)],h$17.prototype,"primitive",void 0),h$17=n$2c=e$1_([i$2w("esri.symbols.support.IconSymbol3DLayerResource")],h$17);const j$z="circle",y$18=h$17;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$1d;let p$2D=e$1d=class extends p$33{constructor(){super(...arguments),this.x=0,this.y=0;}clone(){return new e$1d({x:this.x,y:this.y})}};e$1_([d$1S({type:Number})],p$2D.prototype,"x",void 0),e$1_([d$1S({type:Number})],p$2D.prototype,"y",void 0),p$2D=e$1d=e$1_([i$2w("esri.symbols.support.Symbol3DAnchorPosition2D")],p$2D);const c$2o=p$2D;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$1Q;let a$2j=l$1Q=class extends a$2A{constructor(o){super(o),this.color=new h$1l([0,0,0,1]),this.size=e$1g(1);}clone(){const o={color:r$1G(this.color)?this.color.clone():null,size:this.size};return new l$1Q(o)}};e$1_([d$1S(p$2O)],a$2j.prototype,"color",void 0),e$1_([d$1S(a$2r)],a$2j.prototype,"size",void 0),a$2j=l$1Q=e$1_([i$2w("esri.symbols.support.Symbol3DIconOutline")],a$2j);const n$2b=a$2j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$1n;const f$13=s$2h.getLogger("esri.symbols.IconSymbol3DLayer");let b$M=d$1n=class extends a$2s{constructor(o){super(o),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0;}clone(){return new d$1n({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:r$1G(this.material)?this.material.clone():null,outline:r$1G(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(o){const t=o.color||o$15,r=j$y(o),e=o.outline&&o.outline.width>0?{size:o.outline.width,color:(o.outline.color||o$15).clone()}:null;return new d$1n({size:o.size,resource:{primitive:w$G(o.style)},material:{color:t},outline:e,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(o){const t=!o.color||t$15(o.color)?o$15:o.color,r=j$y(o);return new d$1n({size:o.width<=o.height?o.height:o.width,resource:{href:o.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(o){return new d$1n({resource:{href:X$d({mediaType:"application/json",data:JSON.stringify(o.data)})}})}};function j$y(o){const t="width"in o?o.width:o.size,r="height"in o?o.height:o.size,e=v$E(o.xoffset),i=v$E(o.yoffset);return (e||i)&&t&&r?{x:-e/t,y:i/r}:null}function v$E(o){return isFinite(o)?o:0}e$1_([d$1S({type:a$2q,json:{write:!0}})],b$M.prototype,"material",void 0),e$1_([d$1S({type:y$18,json:{write:!0}})],b$M.prototype,"resource",void 0),e$1_([r$1d({Icon:"icon"},{readOnly:!0})],b$M.prototype,"type",void 0),e$1_([d$1S(a$2r)],b$M.prototype,"size",void 0),e$1_([r$1d({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),d$1S({json:{default:"center"}})],b$M.prototype,"anchor",void 0),e$1_([d$1S({type:p$2D,json:{type:[Number],read:{reader:o=>new p$2D({x:o[0],y:o[1]})},write:{writer:(o,t)=>{t.anchorPosition=[o.x,o.y];},overridePolicy(){return {enabled:"relative"===this.anchor}}}}})],b$M.prototype,"anchorPosition",void 0),e$1_([d$1S({type:n$2b,json:{write:!0}})],b$M.prototype,"outline",void 0),b$M=d$1n=e$1_([i$2w("esri.symbols.IconSymbol3DLayer")],b$M);const g$R={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function w$G(o){const t=g$R[o];return t||(f$13.warn(`${o} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const S$A=b$M;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2a(n,t,i=S$F){return t||(t=new i),t===n||(t.removeAll(),e$1c(n)?t.addMany(n):n&&t.add(n)),t}function t$13(r){return r}function e$1c(r){return r&&(Array.isArray(r)||"items"in r&&Array.isArray(r.items))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$1U="not-loaded",d$1m="loading",c$2n="failed",u$1z="loaded",h$16=s=>{let h=class extends s{constructor(...o){super(...o),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise((o=>{const s=this.load.bind(this);this.load=l=>{const a=new Promise(((o,s)=>{const e=v$T(l,s);this.destroyed&&s(new s$29("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(o,s).finally((()=>{e&&e.remove();}));}));if(this.loadStatus===i$1U){this._set("loadStatus",d$1m);const o=this._loadController=new AbortController;s({signal:o.signal}),j$M(o.signal,(()=>{this._promiseProps.abort();}));}return o(),a};}))),this.when((()=>{this._set("loadStatus",u$1z),this._loadController=null;}),(o=>{this._set("loadStatus",c$2n),this._set("loadError",o),this._loadController=null;}));}get loaded(){return this.loadStatus===u$1z}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var o;return this.isFulfilled()||(this._set("loadError",new s$29("load:cancelled","Cancelled")),null==(o=this._loadController)||o.abort()),this}};return e$1_([d$1S({readOnly:!0})],h.prototype,"loaded",null),e$1_([d$1S({readOnly:!0})],h.prototype,"loadError",void 0),e$1_([d$1S()],h.prototype,"loadStatus",void 0),e$1_([d$1S({type:[t$1H],readOnly:!0})],h.prototype,"loadWarnings",null),h=e$1_([i$2w("esri.core.Loadable")],h),h};let p$2C=class extends(h$16(m$1Y)){};p$2C=e$1_([i$2w("esri.core.Loadable")],p$2C),function(o){function t(o){return !(!o||!o.load)}o.LoadableMixin=h$16,o.isLoadable=t;}(p$2C||(p$2C={}));const m$1A=p$2C;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$1y;const m$1z=new o$1K({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let c$2m=u$1y=class extends p$33{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1;}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){"asc"!==t&&"desc"!==t||this._set("sortOrder",t);}clone(){return new u$1y({categories:this.categories?l$2r(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,r){let e,s;if(this.categories&&(e=this.categories.map((t=>Array.isArray(t)?JSON.stringify(t):t))),this.extent){const t=M$s(this.extent,k$s.WGS84);r$1G(t)&&(s=`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`);}let i=this.query;!this.disableExtraQuery&&t.extraQuery&&(i="("+i+")"+t.extraQuery);const a={categories:e,bbox:s,q:i,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(a.sortField=this.sortField.split(",").map((t=>m$1z.toJSON(t.trim()))).join(","),a.sortOrder=this.sortOrder),{query:{...r,...a}}}};e$1_([d$1S()],c$2m.prototype,"categories",void 0),e$1_([d$1S()],c$2m.prototype,"disableExtraQuery",void 0),e$1_([d$1S({type:M$r})],c$2m.prototype,"extent",void 0),e$1_([d$1S()],c$2m.prototype,"filter",void 0),e$1_([d$1S()],c$2m.prototype,"num",void 0),e$1_([d$1S()],c$2m.prototype,"query",void 0),e$1_([d$1S()],c$2m.prototype,"sortField",void 0),e$1_([d$1S()],c$2m.prototype,"sortOrder",null),e$1_([d$1S()],c$2m.prototype,"start",void 0),c$2m=u$1y=e$1_([i$2w("esri.portal.PortalQueryParams")],c$2m);const d$1l=c$2m;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$1b=class extends p$33{constructor(r){super(r),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null;}};e$1_([d$1S()],e$1b.prototype,"nextQueryParams",void 0),e$1_([d$1S()],e$1b.prototype,"queryParams",void 0),e$1_([d$1S()],e$1b.prototype,"results",void 0),e$1_([d$1S()],e$1b.prototype,"total",void 0),e$1b=e$1_([i$2w("esri.portal.PortalQueryResult")],e$1b);const p$2B=e$1b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$2A=class extends a$2A{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null;}get url(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new s$29("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};e$1_([d$1S({type:Date})],p$2A.prototype,"created",void 0),e$1_([d$1S()],p$2A.prototype,"id",void 0),e$1_([d$1S()],p$2A.prototype,"portal",void 0),e$1_([d$1S()],p$2A.prototype,"title",void 0),e$1_([d$1S({readOnly:!0})],p$2A.prototype,"url",null),e$1_([d$1S()],p$2A.prototype,"username",void 0),p$2A=e$1_([i$2w("esri.portal.PortalFolder")],p$2A);const l$1P=p$2A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$1O=class extends a$2A{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null;}get thumbnailUrl(){const t=this.url,r=this.thumbnail;return t&&r?this.portal._normalizeUrl(`${t}/info/${r}?f=json`):null}get url(){const t=this.get("portal.restUrl");return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal._request(this.url+"/categorySchema",t).then((r=>{const e=r.categorySchema||[];return e.some((t=>"contentCategorySetsGroupQuery.LivingAtlas"===t.source))?this._fetchCategorySchemaSet("LivingAtlas",t):e}))}fetchMembers(t){return this.portal._request(this.url+"/users",t)}getThumbnailUrl(t){let r=this.thumbnailUrl;return r&&t&&(r+=`&w=${t}`),r}toJSON(){throw new s$29("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(t,r){let e=b$Z(d$1l,t);return parseFloat(this.portal.currentVersion)>5?(e=e||new d$1l,this.portal._queryPortal(`/content/groups/${this.id}/search`,e,"PortalItem",r)):(e=e?e.clone():new d$1l,e.query="group:"+this.id+(e.query?" "+e.query:""),this.portal.queryItems(e,r))}_fetchCategorySchemaSet(t,e){return this.portal._fetchSelf(this.portal.authMode,!0,e).then((t=>{const o=t.contentCategorySetsGroupQuery;if(o){const t=new d$1l;return t.disableExtraQuery=!0,t.num=1,t.query=o,this.portal.queryGroups(t,e)}throw new s$29("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((o=>{if(o.total){const r=o.results[0],s=new d$1l;return s.num=1,s.query=`typekeywords:"${t}"`,r.queryItems(s,e)}throw new s$29("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((t=>{if(t.total){return t.results[0].fetchData("json",e).then((t=>{const r=t&&t.categorySchema;return r&&r.length?r:[]}))}return []}))}};e$1_([d$1S()],l$1O.prototype,"access",void 0),e$1_([d$1S({type:Date})],l$1O.prototype,"created",void 0),e$1_([d$1S()],l$1O.prototype,"description",void 0),e$1_([d$1S()],l$1O.prototype,"id",void 0),e$1_([d$1S()],l$1O.prototype,"isInvitationOnly",void 0),e$1_([d$1S({type:Date})],l$1O.prototype,"modified",void 0),e$1_([d$1S()],l$1O.prototype,"owner",void 0),e$1_([d$1S()],l$1O.prototype,"portal",void 0),e$1_([d$1S()],l$1O.prototype,"snippet",void 0),e$1_([d$1S()],l$1O.prototype,"sortField",void 0),e$1_([d$1S()],l$1O.prototype,"sortOrder",void 0),e$1_([d$1S()],l$1O.prototype,"tags",void 0),e$1_([d$1S()],l$1O.prototype,"thumbnail",void 0),e$1_([d$1S({readOnly:!0})],l$1O.prototype,"thumbnailUrl",null),e$1_([d$1S()],l$1O.prototype,"title",void 0),e$1_([d$1S({readOnly:!0})],l$1O.prototype,"url",null),l$1O=e$1_([i$2w("esri.portal.PortalGroup")],l$1O);const p$2z=l$1O;

const PortalGroup = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': p$2z
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1T;let u$1x=i$1T=class extends a$2A{constructor(...t){super(...t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null;}get thumbnailUrl(){const t=this.url,r=this.thumbnail;return t&&r?this.portal._normalizeUrl(`${t}/info/${r}?f=json`):null}get userContentUrl(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}`:null}get url(){const t=this.get("portal.restUrl");return t?`${t}/community/users/${this.username}`:null}addItem(t){const r=t&&t.item,e=t&&t.data,o=t&&t.folder,s={method:"post"};r&&(s.query=r.createPostQuery(),null!=e&&("string"==typeof e?s.query.text=e:"object"==typeof e&&(s.query.text=JSON.stringify(e))));let l=this.userContentUrl;return o&&(l+="/"+("string"==typeof o?o:o.id)),this.portal._request(l+"/addItem",s).then((t=>(r.id=t.id,r.portal=this.portal,r.loaded?r.reload():r.load())))}deleteItem(t){let r=this.userContentUrl;return t.ownerFolder&&(r+="/"+t.ownerFolder),this.portal._request(r+`/items/${t.id}/delete`,{method:"post"}).then((()=>{t.id=null,t.portal=null;}))}deleteItems(t){const r=this.userContentUrl+"/deleteItems",e=t.map((t=>t.id));if(e.length){const o={method:"post",query:{items:e.join(",")}};return this.portal._request(r,o).then((()=>{t.forEach((t=>{t.id=null,t.portal=null;}));}))}return Promise.resolve(void 0)}fetchFolders(){const t={query:{num:1}};return this.portal._request(this.userContentUrl,t).then((t=>{let r;return r=t&&t.folders?t.folders.map((t=>{const r=l$1P.fromJSON(t);return r.portal=this.portal,r})):[],r}))}fetchGroups(){return this.portal._request(this.url).then((t=>{let r;return r=t&&t.groups?t.groups.map((t=>{const r=p$2z.fromJSON(t);return r.portal=this.portal,r})):[],r}))}fetchItems(t){t||(t={});let r,e=this.userContentUrl;return t.folder&&(e+="/"+t.folder.id),Promise.resolve().then(function () { return PortalItem; }).then((({default:o})=>{r=o;const s={folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"};return this.portal._request(e,{query:s})})).then((t=>{let e;return t&&t.items?(e=t.items.map((t=>{const e=r.fromJSON(t);return e.portal=this.portal,e})),Promise.all(e.map((t=>t.load()))).catch((t=>t)).then((()=>({items:e,nextStart:t.nextStart,total:t.total})))):{items:[],nextStart:-1,total:0}}))}fetchTags(){return this.portal._request(this.url+"/tags").then((t=>t.tags))}getThumbnailUrl(t){let r=this.thumbnailUrl;return r&&t&&(r+=`&w=${t}`),r}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new p$2z({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new s$29("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new s$29("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const r=new i$1T;return r.sourceJSON=t,r.read(t),r}};e$1_([d$1S()],u$1x.prototype,"access",void 0),e$1_([d$1S({type:Date})],u$1x.prototype,"created",void 0),e$1_([d$1S()],u$1x.prototype,"culture",void 0),e$1_([d$1S()],u$1x.prototype,"description",void 0),e$1_([d$1S()],u$1x.prototype,"email",void 0),e$1_([d$1S()],u$1x.prototype,"favGroupId",void 0),e$1_([d$1S()],u$1x.prototype,"fullName",void 0),e$1_([d$1S({type:Date})],u$1x.prototype,"modified",void 0),e$1_([d$1S()],u$1x.prototype,"orgId",void 0),e$1_([d$1S()],u$1x.prototype,"portal",void 0),e$1_([d$1S()],u$1x.prototype,"preferredView",void 0),e$1_([d$1S()],u$1x.prototype,"privileges",void 0),e$1_([d$1S()],u$1x.prototype,"region",void 0),e$1_([d$1S()],u$1x.prototype,"role",void 0),e$1_([d$1S()],u$1x.prototype,"roleId",void 0),e$1_([d$1S()],u$1x.prototype,"sourceJSON",void 0),e$1_([d$1S()],u$1x.prototype,"thumbnail",void 0),e$1_([d$1S({readOnly:!0})],u$1x.prototype,"thumbnailUrl",null),e$1_([d$1S()],u$1x.prototype,"units",void 0),e$1_([d$1S({readOnly:!0})],u$1x.prototype,"userContentUrl",null),e$1_([d$1S({readOnly:!0})],u$1x.prototype,"url",null),e$1_([d$1S()],u$1x.prototype,"username",void 0),e$1_([d$1S()],u$1x.prototype,"userType",void 0),u$1x=i$1T=e$1_([i$2w("esri.portal.PortalUser")],u$1x);const p$2y=u$1x;

const PortalUser = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': p$2y
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var w$F;let j$x;const Q$a={PortalGroup:()=>Promise.resolve().then(function () { return PortalGroup; }),PortalItem:()=>Promise.resolve().then(function () { return PortalItem; }),PortalUser:()=>Promise.resolve().then(function () { return PortalUser; })};let C$q=w$F=class extends(i$27(m$1A)){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=t$1K.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null;}normalizeCtorArgs(e){return "string"==typeof e?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null);}readAuthorizedCrossOriginDomains(e){if(e)for(const r of e)-1===t$1K.request.trustedServers.indexOf(r)&&t$1K.request.trustedServers.push(r);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return !!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest";}return e}get stylesGroupQuery(){return r$1v(s$2h.getLogger(this.declaredClass),"stylesGroupQuery",{replacement:"stylesGroupQuery3d",version:"4.21"}),this.stylesGroupQuery3d}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e?e.toLowerCase():e}readUser(e){let t=null;return e&&(t=p$2y.fromJSON(e),t.portal=this),t}load(e){const t=Promise.resolve().then(function () { return Basemap; }).then((({default:t})=>{h$1x(e),j$x=t;})).then((()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e))).then((e=>{if(n$2F){const e=n$2F;this.credential=e.findCredential(this.restUrl),this.credential||this.authMode!==w$F.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=e.on("credential-create",(()=>{e.findCredential(this.restUrl)&&this._signIn();})));}this.sourceJSON=e,this.read(e);}));return this.addResolvingPromise(t),Promise.resolve(this)}async createClosestFacilityTask(){t$1C(s$2h.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/closestFacility",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("closestFacility");return new((await import('./ClosestFacilityTask.js')).default)(e)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await import('./ElevationLayer.js')).default;return e?e.map((e=>new t({id:e.id,url:e.url}))):[]}async createGeometryService(){t$1C(s$2h.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/geometryService",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("geometry");return new((await import('./GeometryService.js')).default)({url:e})}async createPrintTask(){t$1C(s$2h.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/print",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("printTask");return new((await import('./PrintTask.js')).default)(e)}async createRouteTask(){t$1C(s$2h.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/route",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("route");return new((await import('./RouteTask.js')).default)(e)}async createServiceAreaTask(){t$1C(s$2h.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/serviceArea",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("serviceArea");return new((await import('./ServiceAreaTask.js')).default)(e)}fetchBasemaps(e,r){const o=new d$1l;return o.query=e||(t$1K.apiKey&&r$1w(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),o.disableExtraQuery=!0,this.queryGroups(o,r).then((e=>{if(o.num=100,o.query='type:"Web Map" -type:"Web Application"',e.total){const t=e.results[0];return o.sortField=t.sortField||"name",o.sortOrder=t.sortOrder||"desc",t.queryItems(o,r)}return null})).then((e=>{let t;return t=e&&e.total?e.results.filter((e=>"Web Map"===e.type)).map((e=>new j$x({portalItem:e}))):[],t}))}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then((e=>e.categorySchema)):p$37(e)?Promise.reject(m$22()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new d$1l;if(r.num=100,r.sortField="title",t&&t.length){const o=[];for(const e of t)o.push(`(title:"${e.title}" AND owner:${e.owner})`);return r.query=o.join(" OR "),this.queryGroups(r,e).then((e=>e.results))}return p$37(e)?Promise.reject(m$22()):Promise.resolve([])}fetchRegions(e){const t=this.user&&this.user.culture||this.culture||i$2v();return this._request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}static getDefault(){return w$F._default&&!w$F._default.destroyed||(w$F._default=new w$F),w$F._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new s$29("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new w$F({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new s$29("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new s$29("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,r){const o=this.restUrl+"/portals/self",s={authMode:e,query:{culture:i$2v().toLowerCase()},...r};return "auto"===s.authMode&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this._request(o,s)}_queryPortal(e,t,r,o){const s=b$Z(d$1l,t),i=t=>this._request(this.restUrl+e,{...s.toRequestOptions(this),...o}).then((e=>{const r=s.clone();return r.start=e.nextStart,new p$2B({nextQueryParams:r,queryParams:s,total:e.total,results:w$F._resultsToTypedArray(t,{portal:this},e,o)})})).then((e=>Promise.all(e.results.map((t=>"function"==typeof t.when?t.when():e))).then((()=>e),(t=>(b$Y(t),e)))));return r&&Q$a[r]?Q$a[r]().then((({default:e})=>(h$1x(o),i(e)))):i()}_signIn(){if(this.authMode===w$F.AUTH_MODE_ANONYMOUS)return Promise.reject(new s$29("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const e=e=>Promise.resolve().then((()=>"not-loaded"===this.loadStatus?(e||(this.authMode="immediate"),this.load().then((()=>null))):"loading"===this.loadStatus?this.load().then((()=>this.credential?null:(this.credential=e,this._fetchSelf("immediate")))):this.user&&this.credential===e?null:(this.credential=e,this._fetchSelf("immediate")))).then((e=>{e&&(this.sourceJSON=e,this.read(e));}));return n$2F?n$2F.getCredential(this.restUrl).then((t=>e(t))):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.indexOf("?")>-1?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,r){return this._request(e,t).then((e=>{const t=w$F._resultsToTypedArray(r,{portal:this},e);return Promise.all(t.map((t=>"function"==typeof t.when?t.when():e))).then((()=>t),(()=>t))}))}_readBasemap(e){if(e){const t=j$x.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const r={f:"json",...t.query},{authMode:s=(this.authMode===w$F.AUTH_MODE_ANONYMOUS?"anonymous":"auto"),body:i=null,cacheBust:a=!1,method:l="auto",responseType:n="json",signal:u}=t,p={authMode:s,body:i,cacheBust:a,method:l,query:r,responseType:n,timeout:0,signal:u};return E$t(this._normalizeSSL(e),p).then((e=>e.data))}static _resultsToTypedArray(e,t,r,o){let s;if(r){const i=r$1G(o)?o.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(s=s.map((r=>{const o=Object.assign(e?e.fromJSON(r):r,t);return "function"==typeof o.load&&o.load(i),o})));}else s=[];return s}};C$q.AUTH_MODE_ANONYMOUS="anonymous",C$q.AUTH_MODE_AUTO="auto",C$q.AUTH_MODE_IMMEDIATE="immediate",e$1_([d$1S()],C$q.prototype,"access",void 0),e$1_([d$1S()],C$q.prototype,"allSSL",void 0),e$1_([d$1S()],C$q.prototype,"authMode",void 0),e$1_([d$1S()],C$q.prototype,"authorizedCrossOriginDomains",void 0),e$1_([o$1j("authorizedCrossOriginDomains")],C$q.prototype,"readAuthorizedCrossOriginDomains",null),e$1_([d$1S()],C$q.prototype,"basemapGalleryGroupQuery",void 0),e$1_([d$1S()],C$q.prototype,"bingKey",void 0),e$1_([d$1S()],C$q.prototype,"canListApps",void 0),e$1_([d$1S()],C$q.prototype,"canListData",void 0),e$1_([d$1S()],C$q.prototype,"canListPreProvisionedItems",void 0),e$1_([d$1S()],C$q.prototype,"canProvisionDirectPurchase",void 0),e$1_([d$1S()],C$q.prototype,"canSearchPublic",void 0),e$1_([d$1S()],C$q.prototype,"canShareBingPublic",void 0),e$1_([d$1S()],C$q.prototype,"canSharePublic",void 0),e$1_([d$1S()],C$q.prototype,"canSignInArcGIS",void 0),e$1_([d$1S()],C$q.prototype,"canSignInIDP",void 0),e$1_([d$1S()],C$q.prototype,"colorSetsGroupQuery",void 0),e$1_([d$1S()],C$q.prototype,"commentsEnabled",void 0),e$1_([d$1S({type:Date})],C$q.prototype,"created",void 0),e$1_([d$1S()],C$q.prototype,"credential",void 0),e$1_([d$1S()],C$q.prototype,"culture",void 0),e$1_([d$1S()],C$q.prototype,"currentVersion",void 0),e$1_([d$1S()],C$q.prototype,"customBaseUrl",void 0),e$1_([d$1S()],C$q.prototype,"defaultBasemap",void 0),e$1_([o$1j("defaultBasemap")],C$q.prototype,"readDefaultBasemap",null),e$1_([d$1S()],C$q.prototype,"defaultDevBasemap",void 0),e$1_([o$1j("defaultDevBasemap")],C$q.prototype,"readDefaultDevBasemap",null),e$1_([d$1S({type:M$r})],C$q.prototype,"defaultExtent",void 0),e$1_([d$1S()],C$q.prototype,"defaultVectorBasemap",void 0),e$1_([o$1j("defaultVectorBasemap")],C$q.prototype,"readDefaultVectorBasemap",null),e$1_([d$1S()],C$q.prototype,"description",void 0),e$1_([d$1S()],C$q.prototype,"devBasemapGalleryGroupQuery",void 0),e$1_([d$1S()],C$q.prototype,"eueiEnabled",void 0),e$1_([d$1S({readOnly:!0})],C$q.prototype,"extraQuery",null),e$1_([d$1S()],C$q.prototype,"featuredGroups",void 0),e$1_([d$1S()],C$q.prototype,"featuredItemsGroupQuery",void 0),e$1_([d$1S()],C$q.prototype,"galleryTemplatesGroupQuery",void 0),e$1_([d$1S()],C$q.prototype,"livingAtlasGroupQuery",void 0),e$1_([d$1S()],C$q.prototype,"hasCategorySchema",void 0),e$1_([d$1S()],C$q.prototype,"helpBase",void 0),e$1_([d$1S()],C$q.prototype,"helperServices",void 0),e$1_([d$1S()],C$q.prototype,"helpMap",void 0),e$1_([d$1S()],C$q.prototype,"homePageFeaturedContent",void 0),e$1_([d$1S()],C$q.prototype,"homePageFeaturedContentCount",void 0),e$1_([d$1S()],C$q.prototype,"httpPort",void 0),e$1_([d$1S()],C$q.prototype,"httpsPort",void 0),e$1_([d$1S()],C$q.prototype,"id",void 0),e$1_([d$1S()],C$q.prototype,"ipCntryCode",void 0),e$1_([d$1S({readOnly:!0})],C$q.prototype,"isOrganization",null),e$1_([d$1S()],C$q.prototype,"isPortal",void 0),e$1_([d$1S()],C$q.prototype,"isReadOnly",void 0),e$1_([d$1S()],C$q.prototype,"layerTemplatesGroupQuery",void 0),e$1_([d$1S()],C$q.prototype,"maxTokenExpirationMinutes",void 0),e$1_([d$1S({type:Date})],C$q.prototype,"modified",void 0),e$1_([d$1S()],C$q.prototype,"name",void 0),e$1_([d$1S()],C$q.prototype,"portalHostname",void 0),e$1_([d$1S()],C$q.prototype,"portalMode",void 0),e$1_([d$1S()],C$q.prototype,"portalProperties",void 0),e$1_([d$1S()],C$q.prototype,"region",void 0),e$1_([d$1S({readOnly:!0})],C$q.prototype,"restUrl",null),e$1_([d$1S()],C$q.prototype,"rotatorPanels",void 0),e$1_([d$1S()],C$q.prototype,"showHomePageDescription",void 0),e$1_([d$1S()],C$q.prototype,"sourceJSON",void 0),e$1_([d$1S()],C$q.prototype,"staticImagesUrl",void 0),e$1_([d$1S({readOnly:!0,json:{read:!1}})],C$q.prototype,"stylesGroupQuery",null),e$1_([d$1S({json:{name:"2DStylesGroupQuery"}})],C$q.prototype,"stylesGroupQuery2d",void 0),e$1_([d$1S({json:{name:"stylesGroupQuery"}})],C$q.prototype,"stylesGroupQuery3d",void 0),e$1_([d$1S()],C$q.prototype,"supportsHostedServices",void 0),e$1_([d$1S()],C$q.prototype,"symbolSetsGroupQuery",void 0),e$1_([d$1S()],C$q.prototype,"templatesGroupQuery",void 0),e$1_([d$1S()],C$q.prototype,"thumbnail",void 0),e$1_([d$1S({readOnly:!0})],C$q.prototype,"thumbnailUrl",null),e$1_([d$1S()],C$q.prototype,"units",void 0),e$1_([d$1S()],C$q.prototype,"url",void 0),e$1_([d$1S()],C$q.prototype,"urlKey",void 0),e$1_([o$1j("urlKey")],C$q.prototype,"readUrlKey",null),e$1_([d$1S()],C$q.prototype,"user",void 0),e$1_([o$1j("user")],C$q.prototype,"readUser",null),e$1_([d$1S()],C$q.prototype,"useStandardizedQuery",void 0),e$1_([d$1S()],C$q.prototype,"useVectorBasemaps",void 0),e$1_([d$1S()],C$q.prototype,"vectorBasemapGalleryGroupQuery",void 0),C$q=w$F=e$1_([i$2w("esri.portal.Portal")],C$q);const B$d=C$q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var j$w;let d$1k=j$w=class extends a$2s{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=e$1g(1),this.pattern=null;}clone(){const t={enabled:this.enabled,material:r$1G(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:r$1G(this.pattern)?this.pattern.clone():null};return new j$w(t)}static fromSimpleLineSymbol(t){const r={enabled:!0,size:t.width||1,cap:t.cap||"butt",join:t.join||"miter",pattern:t.style&&"inside-frame"!==t.style?new l$1U({style:t.style}):null,material:new l$1X({color:(t.color||o$15).clone()})};return new j$w(r)}};e$1_([d$1S({type:l$1X,json:{write:!0}})],d$1k.prototype,"material",void 0),e$1_([r$1d({Line:"line"},{readOnly:!0})],d$1k.prototype,"type",void 0),e$1_([d$1S({type:a$2l,json:{write:!0,default:"miter"}})],d$1k.prototype,"join",void 0),e$1_([d$1S({type:u$1B,json:{write:!0,default:"butt"}})],d$1k.prototype,"cap",void 0),e$1_([d$1S(a$2r)],d$1k.prototype,"size",void 0),e$1_([d$1S(o$16)],d$1k.prototype,"pattern",void 0),d$1k=j$w=e$1_([i$2w("esri.symbols.LineSymbol3DLayer")],d$1k);const f$12=d$1k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$2i;const n$29=s$25()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let m$1y=a$2i=class extends a$2A{clone(){return new a$2i({href:this.href,primitive:this.primitive})}};e$1_([d$1S({type:String,json:{read:m$1B,write:p$2E}})],m$1y.prototype,"href",void 0),e$1_([r$1d(n$29)],m$1y.prototype,"primitive",void 0),m$1y=a$2i=e$1_([i$2w("esri.symbols.support.ObjectSymbol3DLayerResource")],m$1y);const d$1j="sphere",u$1w=m$1y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$1a;let p$2x=e$1a=class extends p$33{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0;}clone(){return new e$1a({x:this.x,y:this.y,z:this.z})}};e$1_([d$1S({type:Number})],p$2x.prototype,"x",void 0),e$1_([d$1S({type:Number})],p$2x.prototype,"y",void 0),e$1_([d$1S({type:Number})],p$2x.prototype,"z",void 0),p$2x=e$1a=e$1_([i$2w("esri.symbols.support.Symbol3DAnchorPosition3D")],p$2x);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$28;let c$2l=n$28=class extends a$2s{constructor(o){super(o),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0;}clone(){return new n$28({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:r$1G(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return !this.resource||"string"!=typeof this.resource.href}};e$1_([d$1S({type:a$2q,json:{write:!0}})],c$2l.prototype,"material",void 0),e$1_([d$1S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],c$2l.prototype,"castShadows",void 0),e$1_([d$1S({type:u$1w,json:{write:!0}})],c$2l.prototype,"resource",void 0),e$1_([r$1d({Object:"object"},{readOnly:!0})],c$2l.prototype,"type",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],c$2l.prototype,"width",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],c$2l.prototype,"height",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],c$2l.prototype,"depth",void 0),e$1_([r$1d({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),d$1S({json:{default:"origin"}})],c$2l.prototype,"anchor",void 0),e$1_([d$1S({type:p$2x,json:{type:[Number],read:{reader:o=>new p$2x({x:o[0],y:o[1],z:o[2]})},write:{writer:(o,t)=>{t.anchorPosition=[o.x,o.y,o.z];},overridePolicy(){return {enabled:"relative"===this.anchor}}}}})],c$2l.prototype,"anchorPosition",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],c$2l.prototype,"heading",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],c$2l.prototype,"tilt",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],c$2l.prototype,"roll",void 0),e$1_([d$1S({readOnly:!0})],c$2l.prototype,"isPrimitive",null),c$2l=n$28=e$1_([i$2w("esri.symbols.ObjectSymbol3DLayer")],c$2l);const l$1N=c$2l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$27;let d$1i=n$27=class extends a$2s{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all";}readWidth(t,e){return null!=t?t:null==e.height&&null!=e.size?e.size:void 0}readHeight(t,e){return null!=t?t:null==e.width&&null!=e.size?e.size:void 0}clone(){return new n$27({enabled:this.enabled,material:r$1G(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};e$1_([d$1S({type:a$2q,json:{write:!0}})],d$1i.prototype,"material",void 0),e$1_([d$1S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],d$1i.prototype,"castShadows",void 0),e$1_([r$1d({Path:"path"},{readOnly:!0})],d$1i.prototype,"type",void 0),e$1_([d$1S({type:["circle","quad"],json:{write:!0,default:"circle"}})],d$1i.prototype,"profile",void 0),e$1_([d$1S({type:a$2l,json:{write:!0,default:"miter"}})],d$1i.prototype,"join",void 0),e$1_([d$1S({type:i$1W,json:{write:!0,default:"butt"}})],d$1i.prototype,"cap",void 0),e$1_([d$1S({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],d$1i.prototype,"width",void 0),e$1_([o$1j("width",["width","size","height"])],d$1i.prototype,"readWidth",null),e$1_([d$1S({type:Number,json:{write:!0}})],d$1i.prototype,"height",void 0),e$1_([o$1j("height",["height","size","width"])],d$1i.prototype,"readHeight",null),e$1_([d$1S({type:["center","bottom","top"],json:{write:!0,default:"center"}})],d$1i.prototype,"anchor",void 0),e$1_([d$1S({type:["heading","all"],json:{write:!0,default:"all"}})],d$1i.prototype,"profileRotation",void 0),d$1i=n$27=e$1_([i$2w("esri.symbols.PathSymbol3DLayer")],d$1i);const c$2k=d$1i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$1x;let l$1M=m$1x=class extends a$2A{constructor(){super(...arguments),this.color=new h$1l([0,0,0,1]),this.size=0;}clone(){return new m$1x({color:l$2r(this.color),size:this.size})}};e$1_([d$1S(p$2O)],l$1M.prototype,"color",void 0),e$1_([d$1S(a$2r)],l$1M.prototype,"size",void 0),l$1M=m$1x=e$1_([i$2w("esri.symbols.support.Symbol3DHalo")],l$1M);const a$2h=l$1M;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$1v;let h$15=u$1v=class extends a$2s{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.material=null,this.text=void 0,this.type="text";}get font(){return this._get("font")||null}set font(t){t&&this._userSize&&(t.size=this._userSize),this._set("font",t);}writeFont(t,o,e,r){const s={...r,textSymbol3D:!0};o.font=t.write({},s),delete o.font.size;}get size(){return null!=this._userSize?this._userSize:this.font&&null!=this.font.size?this.font.size:9}set size(t){this._userSize=t,this.font&&(this.font.size=this._userSize),this.notifyChange("size");}clone(){return new u$1v({enabled:this.enabled,font:this.font&&l$2r(this.font),halo:this.halo&&l$2r(this.halo),material:r$1G(this.material)?this.material.clone():null,size:this.size,text:this.text})}static fromTextSymbol(t){const o=f$11(t.haloColor,t.haloSize),e=t.font?t.font.clone():new n$2d;return new u$1v({size:e.size,font:e,halo:o,material:t.color?{color:t.color.clone()}:null,text:t.text})}};function f$11(t,e){return t&&e>0?{color:l$2r(t),size:e}:null}e$1_([d$1S({type:n$2d,json:{write:!0}})],h$15.prototype,"font",null),e$1_([r$1c("font")],h$15.prototype,"writeFont",null),e$1_([d$1S({type:a$2h,json:{write:!0}})],h$15.prototype,"halo",void 0),e$1_([d$1S({type:a$2q,json:{write:!0}})],h$15.prototype,"material",void 0),e$1_([d$1S(a$2r),d$1S()],h$15.prototype,"size",null),e$1_([d$1S({type:String,json:{write:!0}})],h$15.prototype,"text",void 0),e$1_([r$1d({Text:"text"},{readOnly:!0})],h$15.prototype,"type",void 0),h$15=u$1v=e$1_([i$2w("esri.symbols.TextSymbol3DLayer")],h$15);const y$17=h$15;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$1L;let c$2j=l$1L=class extends a$2s{constructor(e){super(e),this.color=m$1w.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate";}clone(){return new l$1L({color:l$2r(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};e$1_([d$1S({type:h$1l,nonNullable:!0,json:{type:[S$J],write:(e,o,r)=>o[r]=e.toArray(1),default:()=>m$1w.clone(),defaultEquals:e=>e.toCss(!0)===m$1w.toCss(!0)}})],c$2j.prototype,"color",void 0),e$1_([r$1d({Water:"water"},{readOnly:!0})],c$2j.prototype,"type",void 0),e$1_([d$1S({type:["small","medium","large"],json:{write:!0,default:"medium"}})],c$2j.prototype,"waterbodySize",void 0),e$1_([d$1S({type:Number,json:{write:!0,default:null}})],c$2j.prototype,"waveDirection",void 0),e$1_([d$1S({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],c$2j.prototype,"waveStrength",void 0),c$2j=l$1L=e$1_([i$2w("esri.symbols.WaterSymbol3DLayer")],c$2j);const m$1w=new h$1l([0,119,190]),n$26=c$2j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$2w;let a$2g=p$2w=class extends p$33{constructor(){super(...arguments),this.portal=null;}clone(){return new p$2w({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};e$1_([d$1S({type:String})],a$2g.prototype,"name",void 0),e$1_([d$1S({type:String})],a$2g.prototype,"styleUrl",void 0),e$1_([d$1S({type:String})],a$2g.prototype,"styleName",void 0),e$1_([d$1S({type:B$d})],a$2g.prototype,"portal",void 0),a$2g=p$2w=e$1_([i$2w("esri.symbols.support.StyleOrigin")],a$2g);const l$1K=a$2g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$12;let p$2v=t$12=class extends p$33{clone(){return new t$12({url:this.url})}};e$1_([d$1S({type:String})],p$2v.prototype,"url",void 0),p$2v=t$12=e$1_([i$2w("esri.symbols.support.Thumbnail")],p$2v);const c$2i=p$2v;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const v$D={icon:S$A,object:l$1N,line:f$12,path:c$2k,fill:f$15,extrude:m$1G,text:y$17,water:n$26},C$p=S$F.ofType({base:a$2s,key:"type",typeMap:v$D,errorContext:"symbol-layer"}),T$j=s$2h.getLogger("esri.symbols.Symbol3D");let k$o=class extends a$2t{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const o=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,t=o&&o.type||S$F;this._set("symbolLayers",new t);}get color(){return null}set color(e){T$j.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.");}set symbolLayers(e){n$2a(e,this._get("symbolLayers"));}readStyleOrigin(e,r,o){if(e.styleUrl&&e.name){const r=c$2p(e.styleUrl,o);return new l$1K({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new l$1K({portal:o&&o.portal||B$d.getDefault(),styleName:e.styleName,name:e.name});o&&o.messages&&o.messages.push(new t$1H("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:o,definition:e}));}writeStyleOrigin(e,r,o,t){if(e.styleUrl&&e.name){let o=i$1V(e.styleUrl,t);Q$d(o)&&(o=z$q(o)),r.styleOrigin={styleUrl:o,name:e.name};}else e.styleName&&e.name&&(e.portal&&t&&t.portal&&!P$r(e.portal.restUrl,t.portal.restUrl)?t&&t.messages&&t.messages.push(new t$1H("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:e.styleName,name:e.name});}normalizeCtorArgs(e){return e instanceof a$2s||e&&v$D[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};e$1_([d$1S({json:{read:!1,write:!1}})],k$o.prototype,"color",null),e$1_([d$1S({type:C$p,nonNullable:!0,json:{write:!0}}),c$2Y(t$13)],k$o.prototype,"symbolLayers",null),e$1_([d$1S({type:l$1K})],k$o.prototype,"styleOrigin",void 0),e$1_([o$1j("styleOrigin")],k$o.prototype,"readStyleOrigin",null),e$1_([r$1c("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],k$o.prototype,"writeStyleOrigin",null),e$1_([d$1S({type:c$2i,json:{read:!1}})],k$o.prototype,"thumbnail",void 0),e$1_([d$1S({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],k$o.prototype,"type",void 0),k$o=e$1_([i$2w("esri.symbols.Symbol3D")],k$o);const A$j=k$o;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$11=class extends a$2A{constructor(r){super(r),this.visible=!0;}clone(){}};e$1_([d$1S({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],t$11.prototype,"type",void 0),e$1_([d$1S({readOnly:!0})],t$11.prototype,"visible",void 0),t$11=e$1_([i$2w("esri.symbols.callouts.Callout3D")],t$11);const p$2u=t$11;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$1J;let a$2f=l$1J=class extends a$2A{constructor(){super(...arguments),this.color=new h$1l("white");}clone(){return new l$1J({color:l$2r(this.color)})}};e$1_([d$1S(p$2O)],a$2f.prototype,"color",void 0),a$2f=l$1J=e$1_([i$2w("esri.symbols.callouts.LineCallout3DBorder")],a$2f);const i$1S=a$2f;Object.freeze({__proto__:null,get LineCallout3DBorder(){return a$2f},default:i$1S});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$1u;let d$1h=u$1u=class extends p$2u{constructor(o){super(o),this.type="line",this.color=new h$1l([0,0,0,1]),this.size=e$1g(1),this.border=null;}get visible(){return this.size>0&&r$1G(this.color)&&this.color.a>0}clone(){return new u$1u({color:l$2r(this.color),size:this.size,border:l$2r(this.border)})}};e$1_([r$1d({line:"line"},{readOnly:!0})],d$1h.prototype,"type",void 0),e$1_([d$1S(p$2O)],d$1h.prototype,"color",void 0),e$1_([d$1S(a$2r)],d$1h.prototype,"size",void 0),e$1_([d$1S({type:i$1S,json:{write:!0}})],d$1h.prototype,"border",void 0),e$1_([d$1S({readOnly:!0})],d$1h.prototype,"visible",null),d$1h=u$1u=e$1_([i$2w("esri.symbols.callouts.LineCallout3D")],d$1h);const y$16=d$1h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$13(t){if(!t)return !1;const e=t.verticalOffset;return !!e&&!(e.screenLength<=0||e.maxWorldLength<=0)}function n$25(t){if(!t)return !1;if(!t.supportsCallout||!t.supportsCallout())return !1;const e=t.callout;return !!e&&(!!e.visible&&!!r$13(t))}const l$1I={types:{key:"type",base:p$2u,typeMap:{line:y$16}},json:{write:!0}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$2t;let n$24=p$2t=class extends a$2A{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0;}clone(){return new p$2t({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};e$1_([d$1S(a$2r)],n$24.prototype,"screenLength",void 0),e$1_([d$1S({type:Number,json:{write:!0,default:0}})],n$24.prototype,"minWorldLength",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],n$24.prototype,"maxWorldLength",void 0),n$24=p$2t=e$1_([i$2w("esri.symbols.support.Symbol3DVerticalOffset")],n$24);const i$1R=n$24;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$23;const u$1t=S$F.ofType({base:null,key:"type",typeMap:{text:y$17}});let f$10=n$23=class extends A$j{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new u$1t,this.type="label-3d";}supportsCallout(){return !0}hasVisibleCallout(){return n$25(this)}hasVisibleVerticalOffset(){return r$13(this)}clone(){return new n$23({styleOrigin:l$2r(this.styleOrigin),symbolLayers:l$2r(this.symbolLayers),thumbnail:l$2r(this.thumbnail),callout:l$2r(this.callout),verticalOffset:l$2r(this.verticalOffset)})}static fromTextSymbol(t){return new n$23({symbolLayers:[y$17.fromTextSymbol(t)]})}};e$1_([d$1S({type:i$1R,json:{write:!0}})],f$10.prototype,"verticalOffset",void 0),e$1_([d$1S(l$1I)],f$10.prototype,"callout",void 0),e$1_([d$1S({json:{read:!1,write:!1}})],f$10.prototype,"styleOrigin",void 0),e$1_([d$1S({type:u$1t})],f$10.prototype,"symbolLayers",void 0),e$1_([r$1d({LabelSymbol3D:"label-3d"},{readOnly:!0})],f$10.prototype,"type",void 0),f$10=n$23=e$1_([i$2w("esri.symbols.LabelSymbol3D")],f$10);const b$L=f$10;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$1H;const a$2e=S$F.ofType({base:null,key:"type",typeMap:{line:f$12,path:c$2k}}),n$22=S$F.ofType({base:null,key:"type",typeMap:{line:f$12,path:c$2k}});let c$2h=l$1H=class extends A$j{constructor(o){super(o),this.symbolLayers=new a$2e,this.type="line-3d";}clone(){return new l$1H({styleOrigin:l$2r(this.styleOrigin),symbolLayers:l$2r(this.symbolLayers),thumbnail:l$2r(this.thumbnail)})}static fromSimpleLineSymbol(o){return new l$1H({symbolLayers:[f$12.fromSimpleLineSymbol(o)]})}};e$1_([d$1S({type:a$2e,json:{type:n$22}})],c$2h.prototype,"symbolLayers",void 0),e$1_([r$1d({LineSymbol3D:"line-3d"},{readOnly:!0})],c$2h.prototype,"type",void 0),c$2h=l$1H=e$1_([i$2w("esri.symbols.LineSymbol3D")],c$2h);const b$K=c$2h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$2s=class extends a$2t{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9;}hash(){return `${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};e$1_([d$1S({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],p$2s.prototype,"angle",void 0),e$1_([d$1S({type:["simple-marker","picture-marker"],readOnly:!0})],p$2s.prototype,"type",void 0),e$1_([d$1S({type:Number,cast:o$18,json:{write:!0}})],p$2s.prototype,"xoffset",void 0),e$1_([d$1S({type:Number,cast:o$18,json:{write:!0}})],p$2s.prototype,"yoffset",void 0),e$1_([d$1S({type:Number,cast:t=>"auto"===t?t:o$18(t),json:{write:!0}})],p$2s.prototype,"size",void 0),p$2s=e$1_([i$2w("esri.symbols.MarkerSymbol")],p$2s);const i$1Q=p$2s;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1P;const y$15=S$F.ofType({base:null,key:"type",typeMap:{fill:f$15}});let c$2g=i$1P=class extends A$j{constructor(o){super(o),this.symbolLayers=new y$15,this.type="mesh-3d";}clone(){return new i$1P({styleOrigin:l$2r(this.styleOrigin),symbolLayers:l$2r(this.symbolLayers),thumbnail:l$2r(this.thumbnail)})}};e$1_([d$1S({type:y$15})],c$2g.prototype,"symbolLayers",void 0),e$1_([r$1d({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],c$2g.prototype,"type",void 0),c$2g=i$1P=e$1_([i$2w("esri.symbols.MeshSymbol3D")],c$2g);const a$2d=c$2g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function s$1A(a,r,t){return r.imageData?X$d({mediaType:r.contentType||"image/png",isBase64:!0,data:r.imageData}):l$1G(r.url,t)}function l$1G(e,t){return p$2r(t)&&!Q$d(e)&&t.layer.parsedUrl?D$s(t.layer.parsedUrl.path,"images",e):c$2p(e,t)}function u$1s(e,a,r,n){if(G$k(e)){const t=V$e(e);a.contentType=t.mediaType,a.imageData=t.data,r&&r.imageData===a.imageData&&r.url&&p$2E(r.url,a,"url",n);}else p$2E(e,a,"url",n);}const m$1v={json:{read:{source:["imageData","url"],reader:s$1A},write:{writer(e,a,r,t){u$1s(e,a,this.source,t);}}}},c$2f={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,a,r){const t={};return a.imageData&&(t.imageData=a.imageData),a.contentType&&(t.contentType=a.contentType),a.url&&(t.url=l$1G(a.url,r)),t}}}};function p$2r(e){return e&&("service"===e.origin||"portal-item"===e.origin)&&e.layer&&("feature"===e.layer.type||"stream"===e.layer.type)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$2e;let u$1r=c$2e=class extends p$2J{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null;}normalizeCtorArgs(t,s,e,r){if(t&&"string"!=typeof t&&null==t.imageData)return t;const i={};return t&&(i.url=t),s&&(i.outline=s),null!=e&&(i.width=o$18(e)),null!=r&&(i.height=o$18(r)),i}clone(){const t=new c$2e({color:l$2r(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",l$2r(this.source)),t}hash(){var t;return `${super.hash()}.${null==(t=this.color)?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};e$1_([r$1d({esriPFS:"picture-fill"},{readOnly:!0})],u$1r.prototype,"type",void 0),e$1_([d$1S(m$1v)],u$1r.prototype,"url",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],u$1r.prototype,"xscale",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],u$1r.prototype,"yscale",void 0),e$1_([d$1S({type:Number,cast:o$18,json:{write:!0}})],u$1r.prototype,"width",void 0),e$1_([d$1S({type:Number,cast:o$18,json:{write:!0}})],u$1r.prototype,"height",void 0),e$1_([d$1S({type:Number,cast:o$18,json:{write:!0}})],u$1r.prototype,"xoffset",void 0),e$1_([d$1S({type:Number,cast:o$18,json:{write:!0}})],u$1r.prototype,"yoffset",void 0),e$1_([d$1S(c$2f)],u$1r.prototype,"source",void 0),u$1r=c$2e=e$1_([i$2w("esri.symbols.PictureFillSymbol")],u$1r);const a$2c=u$1r;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$1F;let a$2b=l$1F=class extends i$1Q{constructor(...r){super(...r),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null;}normalizeCtorArgs(r,t,o){if(r&&"string"!=typeof r&&null==r.imageData)return r;const s={};return r&&(s.url=r),null!=t&&(s.width=o$18(t)),null!=o&&(s.height=o$18(o)),s}readHeight(r,t){return t.size||r}readWidth(r,t){return t.size||r}clone(){const r=new l$1F({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return r._set("source",l$2r(this.source)),r}hash(){return `${super.hash()}.${this.height}.${this.url}.${this.width}`}};e$1_([d$1S({json:{write:!1}})],a$2b.prototype,"color",void 0),e$1_([r$1d({esriPMS:"picture-marker"},{readOnly:!0})],a$2b.prototype,"type",void 0),e$1_([d$1S(m$1v)],a$2b.prototype,"url",void 0),e$1_([d$1S(c$2f)],a$2b.prototype,"source",void 0),e$1_([d$1S({type:Number,cast:o$18,json:{write:!0}})],a$2b.prototype,"height",void 0),e$1_([o$1j("height",["height","size"])],a$2b.prototype,"readHeight",null),e$1_([d$1S({type:Number,cast:o$18,json:{write:!0}})],a$2b.prototype,"width",void 0),e$1_([d$1S({json:{write:!1}})],a$2b.prototype,"size",void 0),a$2b=l$1F=e$1_([i$2w("esri.symbols.PictureMarkerSymbol")],a$2b);const n$21=a$2b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var S$z;const h$14=S$F.ofType({base:null,key:"type",typeMap:{icon:S$A,object:l$1N,text:y$17}}),j$v=S$F.ofType({base:null,key:"type",typeMap:{icon:S$A,object:l$1N}});let d$1g=S$z=class extends A$j{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new h$14,this.type="point-3d";}writeSymbolLayers(t,e,r,s){const l=t.filter((t=>"text"!==t.type));if(s&&s.messages&&l.length<t.length){const e=t.find((t=>"text"===t.type));s.messages.push(new s$29("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:e}));}e[r]=l.map((t=>t.write({},s))).toArray();}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return !1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return !1}return !0}hasVisibleCallout(){return n$25(this)}hasVisibleVerticalOffset(){return r$13(this)}clone(){return new S$z({verticalOffset:l$2r(this.verticalOffset),callout:l$2r(this.callout),styleOrigin:l$2r(this.styleOrigin),symbolLayers:l$2r(this.symbolLayers),thumbnail:l$2r(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new S$z({symbolLayers:[S$A.fromSimpleMarkerSymbol(t)]})}static fromPictureMarkerSymbol(t){return new S$z({symbolLayers:[S$A.fromPictureMarkerSymbol(t)]})}static fromCIMSymbol(t){var e,o;if("CIMPointSymbol"!==(null==(e=t.data)||null==(o=e.symbol)?void 0:o.type))return null;return t.data.symbol.callout?new S$z({symbolLayers:[S$A.fromCIMSymbol(t)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new S$z({symbolLayers:[S$A.fromCIMSymbol(t)]})}static fromTextSymbol(t){return new S$z({symbolLayers:[y$17.fromTextSymbol(t)]})}};e$1_([d$1S({type:i$1R,json:{write:!0}})],d$1g.prototype,"verticalOffset",void 0),e$1_([d$1S(l$1I)],d$1g.prototype,"callout",void 0),e$1_([d$1S({type:h$14,json:{type:j$v,origins:{"web-scene":{type:j$v}}}})],d$1g.prototype,"symbolLayers",void 0),e$1_([r$1c("web-scene","symbolLayers")],d$1g.prototype,"writeSymbolLayers",null),e$1_([r$1d({PointSymbol3D:"point-3d"},{readOnly:!0})],d$1g.prototype,"type",void 0),d$1g=S$z=e$1_([i$2w("esri.symbols.PointSymbol3D")],d$1g);const L$o=d$1g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var S$y;const j$u=S$F.ofType({base:null,key:"type",typeMap:{extrude:m$1G,fill:f$15,icon:S$A,line:f$12,object:l$1N,text:y$17,water:n$26}}),d$1f=S$F.ofType({base:null,key:"type",typeMap:{extrude:m$1G,fill:f$15,icon:S$A,line:f$12,object:l$1N,water:n$26}});let g$Q=S$y=class extends A$j{constructor(e){super(e),this.symbolLayers=new j$u,this.type="polygon-3d";}writeSymbolLayers(e,o,t,s){const y=e.filter((e=>"text"!==e.type));if(s&&s.messages&&y.length<e.length){const o=e.find((e=>"text"===e.type));s.messages.push(new s$29("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:o}));}o[t]=y.map((e=>e.write({},s))).toArray();}clone(){return new S$y({styleOrigin:l$2r(this.styleOrigin),symbolLayers:l$2r(this.symbolLayers),thumbnail:l$2r(this.thumbnail)})}static fromJSON(e){const o=new S$y;if(o.read(e),2===o.symbolLayers.length&&"fill"===o.symbolLayers.getItemAt(0).type&&"line"===o.symbolLayers.getItemAt(1).type){const r=o.symbolLayers.getItemAt(0),t=o.symbolLayers.getItemAt(1);!t.enabled||e.symbolLayers&&e.symbolLayers[1]&&!1===e.symbolLayers[1].enable||(r.outline={size:t.size,color:r$1G(t.material)?t.material.color:null}),o.symbolLayers.removeAt(1);}return o}static fromSimpleFillSymbol(e){return new S$y({symbolLayers:[f$15.fromSimpleFillSymbol(e)]})}};e$1_([d$1S({type:j$u,json:{type:d$1f}})],g$Q.prototype,"symbolLayers",void 0),e$1_([r$1c("web-scene","symbolLayers")],g$Q.prototype,"writeSymbolLayers",null),e$1_([r$1d({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],g$Q.prototype,"type",void 0),g$Q=S$y=e$1_([i$2w("esri.symbols.PolygonSymbol3D")],g$Q);const h$13=g$Q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$2q;const c$2d=new o$1K({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let m$1u=p$2q=class extends p$2J{constructor(...o){super(...o),this.color=new h$1l([0,0,0,.25]),this.outline=new m$1E,this.type="simple-fill",this.style="solid";}normalizeCtorArgs(o,r,s){if(o&&"string"!=typeof o)return o;const e={};return o&&(e.style=o),r&&(e.outline=r),s&&(e.color=s),e}clone(){return new p$2q({color:l$2r(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return `${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};e$1_([d$1S()],m$1u.prototype,"color",void 0),e$1_([d$1S()],m$1u.prototype,"outline",void 0),e$1_([r$1d({esriSFS:"simple-fill"},{readOnly:!0})],m$1u.prototype,"type",void 0),e$1_([d$1S({type:c$2d.apiValues,json:{read:c$2d.read,write:c$2d.write}})],m$1u.prototype,"style",void 0),m$1u=p$2q=e$1_([i$2w("esri.symbols.SimpleFillSymbol")],m$1u);const S$x=m$1u;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var h$12;const m$1t=new o$1K({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let u$1q=h$12=class extends i$1Q{constructor(...e){super(...e),this.color=new h$1l([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new m$1E;}normalizeCtorArgs(e,o,r,t){if(e&&"string"!=typeof e)return e;const i={};return e&&(i.style=e),null!=o&&(i.size=o$18(o)),r&&(i.outline=r),t&&(i.color=t),i}writeColor(e,o){e&&"x"!==this.style&&"cross"!==this.style&&(o.color=e.toJSON()),null===e&&(o.color=null);}set path(e){this.style="path",this._set("path",e);}clone(){return new h$12({angle:this.angle,color:l$2r(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return `${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${null==(e=this.outline)?void 0:e.hash()}`}};e$1_([d$1S()],u$1q.prototype,"color",void 0),e$1_([r$1c("color")],u$1q.prototype,"writeColor",null),e$1_([r$1d({esriSMS:"simple-marker"},{readOnly:!0})],u$1q.prototype,"type",void 0),e$1_([d$1S()],u$1q.prototype,"size",void 0),e$1_([d$1S({type:m$1t.apiValues,json:{read:m$1t.read,write:m$1t.write}})],u$1q.prototype,"style",void 0),e$1_([d$1S({type:String,json:{write:!0}})],u$1q.prototype,"path",null),e$1_([d$1S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":m$1E}},json:{default:null,write:!0}})],u$1q.prototype,"outline",void 0),u$1q=h$12=e$1_([i$2w("esri.symbols.SimpleMarkerSymbol")],u$1q);const y$14=u$1q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$1e;let y$13=d$1e=class extends a$2t{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new n$2d,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment=null,this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1;}normalizeCtorArgs(t,o,e){if(t&&"string"!=typeof t)return t;const i={};return t&&(i.text=t),o&&(i.font=o),e&&(i.color=e),i}writeLineWidth(t,o,e,i){i&&"string"!=typeof i?i.origin:o[e]=t;}castLineWidth(t){return o$18(t)}writeLineHeight(t,o,e,i){i&&"string"!=typeof i?i.origin:o[e]=t;}clone(){return new d$1e({angle:this.angle,backgroundColor:l$2r(this.backgroundColor),borderLineColor:l$2r(this.borderLineColor),borderLineSize:this.borderLineSize,color:l$2r(this.color),font:this.font&&this.font.clone(),haloColor:l$2r(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return `${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};e$1_([d$1S({type:h$1l,json:{write:!0}})],y$13.prototype,"backgroundColor",void 0),e$1_([d$1S({type:h$1l,json:{write:!0}})],y$13.prototype,"borderLineColor",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],y$13.prototype,"borderLineSize",void 0),e$1_([d$1S({type:n$2d,json:{write:!0}})],y$13.prototype,"font",void 0),e$1_([d$1S({type:["left","right","center","justify"],json:{write:!0}})],y$13.prototype,"horizontalAlignment",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],y$13.prototype,"kerning",void 0),e$1_([d$1S({type:h$1l,json:{write:!0}})],y$13.prototype,"haloColor",void 0),e$1_([d$1S({type:Number,cast:o$18,json:{write:!0}})],y$13.prototype,"haloSize",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],y$13.prototype,"rightToLeft",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],y$13.prototype,"rotated",void 0),e$1_([d$1S({type:String,json:{write:!0}})],y$13.prototype,"text",void 0),e$1_([r$1d({esriTS:"text"},{readOnly:!0})],y$13.prototype,"type",void 0),e$1_([d$1S({type:["baseline","top","middle","bottom"],json:{write:!0}})],y$13.prototype,"verticalAlignment",void 0),e$1_([d$1S({type:Number,cast:o$18,json:{write:!0}})],y$13.prototype,"xoffset",void 0),e$1_([d$1S({type:Number,cast:o$18,json:{write:!0}})],y$13.prototype,"yoffset",void 0),e$1_([d$1S({type:Number,json:{read:t=>t&&-1*t,write:(t,o)=>o.angle=t&&-1*t}})],y$13.prototype,"angle",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],y$13.prototype,"width",void 0),e$1_([d$1S({type:Number})],y$13.prototype,"lineWidth",void 0),e$1_([r$1c("lineWidth")],y$13.prototype,"writeLineWidth",null),e$1_([c$2Y("lineWidth")],y$13.prototype,"castLineWidth",null),e$1_([d$1S({type:Number})],y$13.prototype,"lineHeight",void 0),e$1_([r$1c("lineHeight")],y$13.prototype,"writeLineHeight",null),y$13=d$1e=e$1_([i$2w("esri.symbols.TextSymbol")],y$13);const c$2c=y$13;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$2b;const n$20=s$2h.getLogger("esri.symbols.WebStyleSymbol");let u$1p=c$2b=class extends a$2t{constructor(t){super(t),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style";}read(t,o){this.portal=o?o.portal:void 0,super.read(t,o);}clone(){return new c$2b({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,o){const e=await b$J();h$1x(o);const s=e.resolveWebStyleSymbol(this,{portal:this.portal},t,o);return s.catch((t=>{n$20.error("#fetchSymbol()","Failed to create symbol from style",t);})),s}};function b$J(){return Promise.resolve().then(function () { return webStyleSymbolUtils; })}e$1_([d$1S({json:{write:!1}})],u$1p.prototype,"color",void 0),e$1_([d$1S({type:String,json:{write:!0}})],u$1p.prototype,"styleName",void 0),e$1_([d$1S({type:B$d,json:{write:!1}})],u$1p.prototype,"portal",void 0),e$1_([d$1S({type:String,json:{read:m$1B,write:p$2E}})],u$1p.prototype,"styleUrl",void 0),e$1_([d$1S({type:c$2i,json:{read:!1}})],u$1p.prototype,"thumbnail",void 0),e$1_([d$1S({type:String,json:{write:!0}})],u$1p.prototype,"name",void 0),e$1_([r$1d({styleSymbolReference:"web-style"},{readOnly:!0})],u$1p.prototype,"type",void 0),u$1p=c$2b=e$1_([i$2w("esri.symbols.WebStyleSymbol")],u$1p);const h$11=u$1p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function c$2a(e){if(!e)return !1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return !0;default:return !1}}function x$r(e){if(!e)return !1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return !0;default:return !1}}const j$t={base:a$2t,key:"type",typeMap:{"simple-fill":S$x,"picture-fill":a$2c,"picture-marker":n$21,"simple-line":m$1E,"simple-marker":y$14,text:c$2c,"label-3d":b$L,"line-3d":b$K,"mesh-3d":a$2d,"point-3d":L$o,"polygon-3d":h$13,"web-style":h$11,cim:d$1r},errorContext:"symbol"},D$k={base:a$2t,key:"type",typeMap:{"picture-marker":n$21,"simple-marker":y$14,text:c$2c,"web-style":h$11,cim:d$1r},errorContext:"symbol"},k$n=u$29({types:j$t}),M$p={base:a$2t,key:"type",typeMap:{"simple-fill":S$x,"picture-fill":a$2c,"picture-marker":n$21,"simple-line":m$1E,"simple-marker":y$14,text:c$2c,"line-3d":b$K,"mesh-3d":a$2d,"point-3d":L$o,"polygon-3d":h$13,"web-style":h$11,cim:d$1r},errorContext:"symbol"},P$j={base:a$2t,key:"type",typeMap:{text:c$2c,"label-3d":b$L},errorContext:"symbol"},h$10={base:a$2t,key:"type",typeMap:{"line-3d":b$K,"mesh-3d":a$2d,"point-3d":L$o,"polygon-3d":h$13,"web-style":h$11,cim:d$1r},errorContext:"symbol"},F$f={base:a$2t,key:"type",typeMap:{"label-3d":b$L},errorContext:"symbol"},g$P=N$t(j$t);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1$(){const n=new Float32Array(16);return n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function r$12(n){const r=new Float32Array(16);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}function t$10(n,r,t,e,a,o,c,s,u,l,f,i,w,y,A,F){const _=new Float32Array(16);return _[0]=n,_[1]=r,_[2]=t,_[3]=e,_[4]=a,_[5]=o,_[6]=c,_[7]=s,_[8]=u,_[9]=l,_[10]=f,_[11]=i,_[12]=w,_[13]=y,_[14]=A,_[15]=F,_}function e$19(n,r){return new Float32Array(n,r,16)}const a$2a=n$1$();Object.freeze({__proto__:null,create:n$1$,clone:r$12,fromValues:t$10,createView:e$19,IDENTITY:a$2a});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1_(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function s$1z(t,a,n,s,r,o,h,M,u,e,c,i,f,b,l,m,x){return t[0]=a,t[1]=n,t[2]=s,t[3]=r,t[4]=o,t[5]=h,t[6]=M,t[7]=u,t[8]=e,t[9]=c,t[10]=i,t[11]=f,t[12]=b,t[13]=l,t[14]=m,t[15]=x,t}function r$11(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function o$12(t,a){if(t===a){const n=a[1],s=a[2],r=a[3],o=a[6],h=a[7],M=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=n,t[6]=a[9],t[7]=a[13],t[8]=s,t[9]=o,t[11]=a[14],t[12]=r,t[13]=h,t[14]=M;}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t}function h$$(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],h=a[4],M=a[5],u=a[6],e=a[7],c=a[8],i=a[9],f=a[10],b=a[11],l=a[12],m=a[13],x=a[14],q=a[15],p=n*M-s*h,g=n*u-r*h,d=n*e-o*h,R=s*u-r*M,S=s*e-o*M,T=r*e-o*u,y=c*m-i*l,j=c*x-f*l,v=c*q-b*l,D=i*x-f*m,I=i*q-b*m,O=f*q-b*x;let P=p*O-g*I+d*D+R*v-S*j+T*y;return P?(P=1/P,t[0]=(M*O-u*I+e*D)*P,t[1]=(r*I-s*O-o*D)*P,t[2]=(m*T-x*S+q*R)*P,t[3]=(f*S-i*T-b*R)*P,t[4]=(u*v-h*O-e*j)*P,t[5]=(n*O-r*v+o*j)*P,t[6]=(x*d-l*T-q*g)*P,t[7]=(c*T-f*d+b*g)*P,t[8]=(h*I-M*v+e*y)*P,t[9]=(s*v-n*I-o*y)*P,t[10]=(l*S-m*d+q*p)*P,t[11]=(i*d-c*S-b*p)*P,t[12]=(M*j-h*D-u*y)*P,t[13]=(n*D-s*j+r*y)*P,t[14]=(m*g-l*R-x*p)*P,t[15]=(c*R-i*g+f*p)*P,t):null}function M$o(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],h=a[4],M=a[5],u=a[6],e=a[7],c=a[8],i=a[9],f=a[10],b=a[11],l=a[12],m=a[13],x=a[14],q=a[15];return t[0]=M*(f*q-b*x)-i*(u*q-e*x)+m*(u*b-e*f),t[1]=-(s*(f*q-b*x)-i*(r*q-o*x)+m*(r*b-o*f)),t[2]=s*(u*q-e*x)-M*(r*q-o*x)+m*(r*e-o*u),t[3]=-(s*(u*b-e*f)-M*(r*b-o*f)+i*(r*e-o*u)),t[4]=-(h*(f*q-b*x)-c*(u*q-e*x)+l*(u*b-e*f)),t[5]=n*(f*q-b*x)-c*(r*q-o*x)+l*(r*b-o*f),t[6]=-(n*(u*q-e*x)-h*(r*q-o*x)+l*(r*e-o*u)),t[7]=n*(u*b-e*f)-h*(r*b-o*f)+c*(r*e-o*u),t[8]=h*(i*q-b*m)-c*(M*q-e*m)+l*(M*b-e*i),t[9]=-(n*(i*q-b*m)-c*(s*q-o*m)+l*(s*b-o*i)),t[10]=n*(M*q-e*m)-h*(s*q-o*m)+l*(s*e-o*M),t[11]=-(n*(M*b-e*i)-h*(s*b-o*i)+c*(s*e-o*M)),t[12]=-(h*(i*x-f*m)-c*(M*x-u*m)+l*(M*f-u*i)),t[13]=n*(i*x-f*m)-c*(s*x-r*m)+l*(s*f-r*i),t[14]=-(n*(M*x-u*m)-h*(s*x-r*m)+l*(s*u-r*M)),t[15]=n*(M*f-u*i)-h*(s*f-r*i)+c*(s*u-r*M),t}function u$1o(t){const a=t[0],n=t[1],s=t[2],r=t[3],o=t[4],h=t[5],M=t[6],u=t[7],e=t[8],c=t[9],i=t[10],f=t[11],b=t[12],l=t[13],m=t[14],x=t[15];return (a*h-n*o)*(i*x-f*m)-(a*M-s*o)*(c*x-f*l)+(a*u-r*o)*(c*m-i*l)+(n*M-s*h)*(e*x-f*b)-(n*u-r*h)*(e*m-i*b)+(s*u-r*M)*(e*l-c*b)}function e$18(t,a,n){const s=a[0],r=a[1],o=a[2],h=a[3],M=a[4],u=a[5],e=a[6],c=a[7],i=a[8],f=a[9],b=a[10],l=a[11],m=a[12],x=a[13],q=a[14],p=a[15];let g=n[0],d=n[1],R=n[2],S=n[3];return t[0]=g*s+d*M+R*i+S*m,t[1]=g*r+d*u+R*f+S*x,t[2]=g*o+d*e+R*b+S*q,t[3]=g*h+d*c+R*l+S*p,g=n[4],d=n[5],R=n[6],S=n[7],t[4]=g*s+d*M+R*i+S*m,t[5]=g*r+d*u+R*f+S*x,t[6]=g*o+d*e+R*b+S*q,t[7]=g*h+d*c+R*l+S*p,g=n[8],d=n[9],R=n[10],S=n[11],t[8]=g*s+d*M+R*i+S*m,t[9]=g*r+d*u+R*f+S*x,t[10]=g*o+d*e+R*b+S*q,t[11]=g*h+d*c+R*l+S*p,g=n[12],d=n[13],R=n[14],S=n[15],t[12]=g*s+d*M+R*i+S*m,t[13]=g*r+d*u+R*f+S*x,t[14]=g*o+d*e+R*b+S*q,t[15]=g*h+d*c+R*l+S*p,t}function c$29(t,a,n){const s=n[0],r=n[1],o=n[2];let h,M,u,e,c,i,f,b,l,m,x,q;return a===t?(t[12]=a[0]*s+a[4]*r+a[8]*o+a[12],t[13]=a[1]*s+a[5]*r+a[9]*o+a[13],t[14]=a[2]*s+a[6]*r+a[10]*o+a[14],t[15]=a[3]*s+a[7]*r+a[11]*o+a[15]):(h=a[0],M=a[1],u=a[2],e=a[3],c=a[4],i=a[5],f=a[6],b=a[7],l=a[8],m=a[9],x=a[10],q=a[11],t[0]=h,t[1]=M,t[2]=u,t[3]=e,t[4]=c,t[5]=i,t[6]=f,t[7]=b,t[8]=l,t[9]=m,t[10]=x,t[11]=q,t[12]=h*s+c*r+l*o+a[12],t[13]=M*s+i*r+m*o+a[13],t[14]=u*s+f*r+x*o+a[14],t[15]=e*s+b*r+q*o+a[15]),t}function i$1O(t,a,n){const s=n[0],r=n[1],o=n[2];return t[0]=a[0]*s,t[1]=a[1]*s,t[2]=a[2]*s,t[3]=a[3]*s,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function f$$(t,n,s,r){let o,h,M,u,e,c,i,f,b,l,m,x,q,p,g,d,R,S,T,y,j,v,D,I,O=r[0],P=r[1],A=r[2],_=Math.sqrt(O*O+P*P+A*A);return _<a$2H?null:(_=1/_,O*=_,P*=_,A*=_,o=Math.sin(s),h=Math.cos(s),M=1-h,u=n[0],e=n[1],c=n[2],i=n[3],f=n[4],b=n[5],l=n[6],m=n[7],x=n[8],q=n[9],p=n[10],g=n[11],d=O*O*M+h,R=P*O*M+A*o,S=A*O*M-P*o,T=O*P*M-A*o,y=P*P*M+h,j=A*P*M+O*o,v=O*A*M+P*o,D=P*A*M-O*o,I=A*A*M+h,t[0]=u*d+f*R+x*S,t[1]=e*d+b*R+q*S,t[2]=c*d+l*R+p*S,t[3]=i*d+m*R+g*S,t[4]=u*T+f*y+x*j,t[5]=e*T+b*y+q*j,t[6]=c*T+l*y+p*j,t[7]=i*T+m*y+g*j,t[8]=u*v+f*D+x*I,t[9]=e*v+b*D+q*I,t[10]=c*v+l*D+p*I,t[11]=i*v+m*D+g*I,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function b$I(t,a,n){const s=Math.sin(n),r=Math.cos(n),o=a[4],h=a[5],M=a[6],u=a[7],e=a[8],c=a[9],i=a[10],f=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*r+e*s,t[5]=h*r+c*s,t[6]=M*r+i*s,t[7]=u*r+f*s,t[8]=e*r-o*s,t[9]=c*r-h*s,t[10]=i*r-M*s,t[11]=f*r-u*s,t}function l$1E(t,a,n){const s=Math.sin(n),r=Math.cos(n),o=a[0],h=a[1],M=a[2],u=a[3],e=a[8],c=a[9],i=a[10],f=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*r-e*s,t[1]=h*r-c*s,t[2]=M*r-i*s,t[3]=u*r-f*s,t[8]=o*s+e*r,t[9]=h*s+c*r,t[10]=M*s+i*r,t[11]=u*s+f*r,t}function m$1s(t,a,n){const s=Math.sin(n),r=Math.cos(n),o=a[0],h=a[1],M=a[2],u=a[3],e=a[4],c=a[5],i=a[6],f=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*r+e*s,t[1]=h*r+c*s,t[2]=M*r+i*s,t[3]=u*r+f*s,t[4]=e*r-o*s,t[5]=c*r-h*s,t[6]=i*r-M*s,t[7]=f*r-u*s,t}function x$q(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function q$f(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function p$2p(t,n,s){let r,o,h,M=s[0],u=s[1],e=s[2],c=Math.sqrt(M*M+u*u+e*e);return c<a$2H?null:(c=1/c,M*=c,u*=c,e*=c,r=Math.sin(n),o=Math.cos(n),h=1-o,t[0]=M*M*h+o,t[1]=u*M*h+e*r,t[2]=e*M*h-u*r,t[3]=0,t[4]=M*u*h-e*r,t[5]=u*u*h+o,t[6]=e*u*h+M*r,t[7]=0,t[8]=M*e*h+u*r,t[9]=u*e*h-M*r,t[10]=e*e*h+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function g$O(t,a){const n=Math.sin(a),s=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function d$1d(t,a){const n=Math.sin(a),s=Math.cos(a);return t[0]=s,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R$l(t,a){const n=Math.sin(a),s=Math.cos(a);return t[0]=s,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S$w(t,a,n){const s=a[0],r=a[1],o=a[2],h=a[3],M=s+s,u=r+r,e=o+o,c=s*M,i=s*u,f=s*e,b=r*u,l=r*e,m=o*e,x=h*M,q=h*u,p=h*e;return t[0]=1-(b+m),t[1]=i+p,t[2]=f-q,t[3]=0,t[4]=i-p,t[5]=1-(c+m),t[6]=l+x,t[7]=0,t[8]=f+q,t[9]=l-x,t[10]=1-(c+b),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function T$i(t,a){const n=y$12,s=-a[0],r=-a[1],o=-a[2],h=a[3],M=a[4],u=a[5],e=a[6],c=a[7],i=s*s+r*r+o*o+h*h;return i>0?(n[0]=2*(M*h+c*s+u*o-e*r)/i,n[1]=2*(u*h+c*r+e*s-M*o)/i,n[2]=2*(e*h+c*o+M*r-u*s)/i):(n[0]=2*(M*h+c*s+u*o-e*r),n[1]=2*(u*h+c*r+e*s-M*o),n[2]=2*(e*h+c*o+M*r-u*s)),S$w(t,a,n),t}const y$12=n$2m();function j$s(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t}function v$C(t,a){const n=a[0],s=a[1],r=a[2],o=a[4],h=a[5],M=a[6],u=a[8],e=a[9],c=a[10];return t[0]=Math.sqrt(n*n+s*s+r*r),t[1]=Math.sqrt(o*o+h*h+M*M),t[2]=Math.sqrt(u*u+e*e+c*c),t}function D$j(t,a){const n=a[0]+a[5]+a[10];let s=0;return n>0?(s=2*Math.sqrt(n+1),t[3]=.25*s,t[0]=(a[6]-a[9])/s,t[1]=(a[8]-a[2])/s,t[2]=(a[1]-a[4])/s):a[0]>a[5]&&a[0]>a[10]?(s=2*Math.sqrt(1+a[0]-a[5]-a[10]),t[3]=(a[6]-a[9])/s,t[0]=.25*s,t[1]=(a[1]+a[4])/s,t[2]=(a[8]+a[2])/s):a[5]>a[10]?(s=2*Math.sqrt(1+a[5]-a[0]-a[10]),t[3]=(a[8]-a[2])/s,t[0]=(a[1]+a[4])/s,t[1]=.25*s,t[2]=(a[6]+a[9])/s):(s=2*Math.sqrt(1+a[10]-a[0]-a[5]),t[3]=(a[1]-a[4])/s,t[0]=(a[8]+a[2])/s,t[1]=(a[6]+a[9])/s,t[2]=.25*s),t}function I$p(t,a,n,s){const r=a[0],o=a[1],h=a[2],M=a[3],u=r+r,e=o+o,c=h+h,i=r*u,f=r*e,b=r*c,l=o*e,m=o*c,x=h*c,q=M*u,p=M*e,g=M*c,d=s[0],R=s[1],S=s[2];return t[0]=(1-(l+x))*d,t[1]=(f+g)*d,t[2]=(b-p)*d,t[3]=0,t[4]=(f-g)*R,t[5]=(1-(i+x))*R,t[6]=(m+q)*R,t[7]=0,t[8]=(b+p)*S,t[9]=(m-q)*S,t[10]=(1-(i+l))*S,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function O$k(t,a,n,s,r){const o=a[0],h=a[1],M=a[2],u=a[3],e=o+o,c=h+h,i=M+M,f=o*e,b=o*c,l=o*i,m=h*c,x=h*i,q=M*i,p=u*e,g=u*c,d=u*i,R=s[0],S=s[1],T=s[2],y=r[0],j=r[1],v=r[2],D=(1-(m+q))*R,I=(b+d)*R,O=(l-g)*R,P=(b-d)*S,A=(1-(f+q))*S,_=(x+p)*S,w=(l+g)*T,E=(x-p)*T,F=(1-(f+m))*T;return t[0]=D,t[1]=I,t[2]=O,t[3]=0,t[4]=P,t[5]=A,t[6]=_,t[7]=0,t[8]=w,t[9]=E,t[10]=F,t[11]=0,t[12]=n[0]+y-(D*y+P*j+w*v),t[13]=n[1]+j-(I*y+A*j+E*v),t[14]=n[2]+v-(O*y+_*j+F*v),t[15]=1,t}function P$i(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],h=n+n,M=s+s,u=r+r,e=n*h,c=s*h,i=s*M,f=r*h,b=r*M,l=r*u,m=o*h,x=o*M,q=o*u;return t[0]=1-i-l,t[1]=c+q,t[2]=f-x,t[3]=0,t[4]=c-q,t[5]=1-e-l,t[6]=b+m,t[7]=0,t[8]=f+x,t[9]=b-m,t[10]=1-e-i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A$i(t,a,n,s,r,o,h){const M=1/(n-a),u=1/(r-s),e=1/(o-h);return t[0]=2*o*M,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+a)*M,t[9]=(r+s)*u,t[10]=(h+o)*e,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*o*2*e,t[15]=0,t}function _$p(t,a,n,s,r){const o=1/Math.tan(a/2);let h;return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(h=1/(s-r),t[10]=(r+s)*h,t[14]=2*r*s*h):(t[10]=-1,t[14]=-2*s),t}function w$E(t,a,n,s){const r=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),h=Math.tan(a.leftDegrees*Math.PI/180),M=Math.tan(a.rightDegrees*Math.PI/180),u=2/(h+M),e=2/(r+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=-(h-M)*u*.5,t[9]=(r-o)*e*.5,t[10]=s/(n-s),t[11]=-1,t[12]=0,t[13]=0,t[14]=s*n/(n-s),t[15]=0,t}function E$l(t,a,n,s,r,o,h){const M=1/(a-n),u=1/(s-r),e=1/(o-h);return t[0]=-2*M,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*e,t[11]=0,t[12]=(a+n)*M,t[13]=(r+s)*u,t[14]=(h+o)*e,t[15]=1,t}function F$e(t,n,s,o){let h,M,u,e,c,i,f,b,l,m;const x=n[0],q=n[1],p=n[2],g=o[0],d=o[1],R=o[2],S=s[0],T=s[1],y=s[2];return Math.abs(x-S)<a$2H&&Math.abs(q-T)<a$2H&&Math.abs(p-y)<a$2H?r$11(t):(f=x-S,b=q-T,l=p-y,m=1/Math.sqrt(f*f+b*b+l*l),f*=m,b*=m,l*=m,h=d*l-R*b,M=R*f-g*l,u=g*b-d*f,m=Math.sqrt(h*h+M*M+u*u),m?(m=1/m,h*=m,M*=m,u*=m):(h=0,M=0,u=0),e=b*u-l*M,c=l*h-f*u,i=f*M-b*h,m=Math.sqrt(e*e+c*c+i*i),m?(m=1/m,e*=m,c*=m,i*=m):(e=0,c=0,i=0),t[0]=h,t[1]=e,t[2]=f,t[3]=0,t[4]=M,t[5]=c,t[6]=b,t[7]=0,t[8]=u,t[9]=i,t[10]=l,t[11]=0,t[12]=-(h*x+M*q+u*p),t[13]=-(e*x+c*q+i*p),t[14]=-(f*x+b*q+l*p),t[15]=1,t)}function Q$9(t,a,n,s){const r=a[0],o=a[1],h=a[2],M=s[0],u=s[1],e=s[2];let c=r-n[0],i=o-n[1],f=h-n[2],b=c*c+i*i+f*f;b>0&&(b=1/Math.sqrt(b),c*=b,i*=b,f*=b);let l=u*f-e*i,m=e*c-M*f,x=M*i-u*c;return b=l*l+m*m+x*x,b>0&&(b=1/Math.sqrt(b),l*=b,m*=b,x*=b),t[0]=l,t[1]=m,t[2]=x,t[3]=0,t[4]=i*x-f*m,t[5]=f*l-c*x,t[6]=c*m-i*l,t[7]=0,t[8]=c,t[9]=i,t[10]=f,t[11]=0,t[12]=r,t[13]=o,t[14]=h,t[15]=1,t}function k$m(t){return "mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function z$h(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function N$j(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t[4]=a[4]+n[4],t[5]=a[5]+n[5],t[6]=a[6]+n[6],t[7]=a[7]+n[7],t[8]=a[8]+n[8],t[9]=a[9]+n[9],t[10]=a[10]+n[10],t[11]=a[11]+n[11],t[12]=a[12]+n[12],t[13]=a[13]+n[13],t[14]=a[14]+n[14],t[15]=a[15]+n[15],t}function X$9(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t[4]=a[4]-n[4],t[5]=a[5]-n[5],t[6]=a[6]-n[6],t[7]=a[7]-n[7],t[8]=a[8]-n[8],t[9]=a[9]-n[9],t[10]=a[10]-n[10],t[11]=a[11]-n[11],t[12]=a[12]-n[12],t[13]=a[13]-n[13],t[14]=a[14]-n[14],t[15]=a[15]-n[15],t}function Y$9(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*n,t[5]=a[5]*n,t[6]=a[6]*n,t[7]=a[7]*n,t[8]=a[8]*n,t[9]=a[9]*n,t[10]=a[10]*n,t[11]=a[11]*n,t[12]=a[12]*n,t[13]=a[13]*n,t[14]=a[14]*n,t[15]=a[15]*n,t}function Z$8(t,a,n,s){return t[0]=a[0]+n[0]*s,t[1]=a[1]+n[1]*s,t[2]=a[2]+n[2]*s,t[3]=a[3]+n[3]*s,t[4]=a[4]+n[4]*s,t[5]=a[5]+n[5]*s,t[6]=a[6]+n[6]*s,t[7]=a[7]+n[7]*s,t[8]=a[8]+n[8]*s,t[9]=a[9]+n[9]*s,t[10]=a[10]+n[10]*s,t[11]=a[11]+n[11]*s,t[12]=a[12]+n[12]*s,t[13]=a[13]+n[13]*s,t[14]=a[14]+n[14]*s,t[15]=a[15]+n[15]*s,t}function B$c(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]}function C$o(t,n){if(t===n)return !0;const s=t[0],r=t[1],o=t[2],h=t[3],M=t[4],u=t[5],e=t[6],c=t[7],i=t[8],f=t[9],b=t[10],l=t[11],m=t[12],x=t[13],q=t[14],p=t[15],g=n[0],d=n[1],R=n[2],S=n[3],T=n[4],y=n[5],j=n[6],v=n[7],D=n[8],I=n[9],O=n[10],P=n[11],A=n[12],_=n[13],w=n[14],E=n[15];return Math.abs(s-g)<=a$2H*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(r-d)<=a$2H*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(o-R)<=a$2H*Math.max(1,Math.abs(o),Math.abs(R))&&Math.abs(h-S)<=a$2H*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(M-T)<=a$2H*Math.max(1,Math.abs(M),Math.abs(T))&&Math.abs(u-y)<=a$2H*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(e-j)<=a$2H*Math.max(1,Math.abs(e),Math.abs(j))&&Math.abs(c-v)<=a$2H*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(i-D)<=a$2H*Math.max(1,Math.abs(i),Math.abs(D))&&Math.abs(f-I)<=a$2H*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(b-O)<=a$2H*Math.max(1,Math.abs(b),Math.abs(O))&&Math.abs(l-P)<=a$2H*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(m-A)<=a$2H*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(x-_)<=a$2H*Math.max(1,Math.abs(x),Math.abs(_))&&Math.abs(q-w)<=a$2H*Math.max(1,Math.abs(q),Math.abs(w))&&Math.abs(p-E)<=a$2H*Math.max(1,Math.abs(p),Math.abs(E))}function G$c(t){const n=a$2H,s=t[0],r=t[1],o=t[2],h=t[4],M=t[5],u=t[6],e=t[8],c=t[9],i=t[10];return Math.abs(1-(s*s+h*h+e*e))<=n&&Math.abs(1-(r*r+M*M+c*c))<=n&&Math.abs(1-(o*o+u*u+i*i))<=n}const H$b=e$18,J$8=X$9;Object.freeze({__proto__:null,copy:n$1_,set:s$1z,identity:r$11,transpose:o$12,invert:h$$,adjoint:M$o,determinant:u$1o,multiply:e$18,translate:c$29,scale:i$1O,rotate:f$$,rotateX:b$I,rotateY:l$1E,rotateZ:m$1s,fromTranslation:x$q,fromScaling:q$f,fromRotation:p$2p,fromXRotation:g$O,fromYRotation:d$1d,fromZRotation:R$l,fromRotationTranslation:S$w,fromQuat2:T$i,getTranslation:j$s,getScaling:v$C,getRotation:D$j,fromRotationTranslationScale:I$p,fromRotationTranslationScaleOrigin:O$k,fromQuat:P$i,frustum:A$i,perspective:_$p,perspectiveFromFieldOfView:w$E,ortho:E$l,lookAt:F$e,targetTo:Q$9,str:k$m,frob:z$h,add:N$j,subtract:X$9,multiplyScalar:Y$9,multiplyScalarAndAdd:Z$8,exactEquals:B$c,equals:C$o,isOrthoNormal:G$c,mul:H$b,sub:J$8});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$10=(r,s)=>{const o=s$1z(r,s,0,0,0,0,s,0,0,0,0,s,0,0,0,0,1);return o$12(o,o)},s$1y=(r,s)=>{const o=s$1z(r,s,0,0,.5-.5*s,0,s,0,.5-.5*s,0,0,s,.5-.5*s,0,0,0,1);return o$12(o,o)},o$11=(r,s)=>{const o=1-s,c=s$1z(r,.2126+.7874*o,.7152-.7152*o,.0722-.0722*o,0,.2126-.2126*o,.7152+.2848*o,.0722-.0722*o,0,.2126-.2126*o,.7152-.7152*o,.0722+.9278*o,0,0,0,0,1);return o$12(c,c)},c$28=(r,s)=>{const o=Math.sin(s*Math.PI/180),c=Math.cos(s*Math.PI/180),a=s$1z(r,.213+.787*c-.213*o,.715-.715*c-.715*o,.072-.072*c+.928*o,0,.213-.213*c+.143*o,.715+.285*c+.14*o,.072-.072*c-.283*o,0,.213-.213*c-.787*o,.715-.715*c+.715*o,.072+.928*c+.072*o,0,0,0,0,1);return o$12(a,a)},a$29=(r,s)=>{const o=1-2*s,c=s$1z(r,o,0,0,s,0,o,0,s,0,0,o,s,0,0,0,1);return o$12(c,c)},e$17=(r,s)=>{const o=s$1z(r,.213+.787*s,.715-.715*s,.072-.072*s,0,.213-.213*s,.715+.285*s,.072-.072*s,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,1);return o$12(o,o)},u$1n=(r,s)=>{const o=1-s,c=s$1z(r,.393+.607*o,.769-.769*o,.189-.189*o,0,.349-.349*o,.686+.314*o,.168-.168*o,0,.272-.272*o,.534-.534*o,.131+.869*o,0,0,0,0,1);return o$12(c,c)};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class l$1D{constructor(t,s,r){this.strength=t,this.radius=s,this.threshold=r,this.type="bloom";}interpolate(t,s,r){this.strength=y$11(t.strength,s.strength,r),this.radius=y$11(t.radius,s.radius,r),this.threshold=y$11(t.threshold,s.threshold,r);}clone(){return new l$1D(this.strength,this.radius,this.threshold)}toJSON(){return {type:"bloom",radius:x$p(this.radius),strength:this.strength,threshold:this.threshold}}}class p$2o{constructor(t){this.radius=t,this.type="blur";}interpolate(t,s,r){this.radius=Math.round(y$11(t.radius,s.radius,r));}clone(){return new p$2o(this.radius)}toJSON(){return {type:"blur",radius:x$p(this.radius)}}}class d$1c{constructor(t,s){this.type=t,this.amount=s,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1));}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,s,r){this.amount=y$11(t.amount,s.amount,r),this._updateMatrix();}clone(){return new d$1c(this.type,this.amount)}toJSON(){return {type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||n$1$();switch(this.type){case"brightness":this._colorMatrix=r$10(t,this.amount);break;case"contrast":this._colorMatrix=s$1y(t,this.amount);break;case"grayscale":this._colorMatrix=o$11(t,this.amount);break;case"invert":this._colorMatrix=a$29(t,this.amount);break;case"saturate":this._colorMatrix=e$17(t,this.amount);break;case"sepia":this._colorMatrix=u$1n(t,this.amount);}}}class m$1r{constructor(t,s,r,o){this.offsetX=t,this.offsetY=s,this.blurRadius=r,this.color=o,this.type="drop-shadow";}interpolate(t,s,r){this.offsetX=y$11(t.offsetX,s.offsetX,r),this.offsetY=y$11(t.offsetY,s.offsetY,r),this.blurRadius=y$11(t.blurRadius,s.blurRadius,r),this.color[0]=Math.round(y$11(t.color[0],s.color[0],r)),this.color[1]=Math.round(y$11(t.color[1],s.color[1],r)),this.color[2]=Math.round(y$11(t.color[2],s.color[2],r)),this.color[3]=y$11(t.color[3],s.color[3],r);}clone(){return new m$1r(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:x$p(this.offsetX),yoffset:x$p(this.offsetY),blurRadius:x$p(this.blurRadius),color:t}}}class f$_{constructor(t){this.angle=t,this.type="hue-rotate";}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,s,r){this.angle=y$11(t.angle,s.angle,r),this._updateMatrix();}clone(){return new f$_(this.angle)}toJSON(){return {type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||n$1$();this._colorMatrix=c$28(t,this.angle);}}class M$n{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1);}interpolate(t,s,r){this.amount=y$11(t.amount,s.amount,r);}clone(){return new M$n(this.amount)}toJSON(){return {type:"opacity",amount:this.amount}}}function y$11(t,s,r){return t+(s-t)*r}function x$p(t){return Math.round(1e3*e$1g(t))/1e3}function g$N(s){switch(s.type){case"grayscale":case"sepia":case"invert":return new d$1c(s.type,0);case"saturate":case"brightness":case"contrast":return new d$1c(s.type,1);case"opacity":return new M$n(1);case"hue-rotate":return new f$_(0);case"blur":return new p$2o(0);case"drop-shadow":return new m$1r(0,0,0,[...l$2a("transparent")]);case"bloom":return new l$1D(0,0,0)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1Z(t,n){const e=t.length>n.length?t:n;return (t.length>n.length?n:t).every(((t,n)=>t.type===e[n].type))}function e$16(n,e){const h=n.length>e.length?n:e,l=n.length>e.length?e:n;for(let g=l.length;g<h.length;g++)l.push(g$N(h[g]));}function h$_(t){const n=t[0];return !!n&&"type"in n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$1q,g$M,v$B={exports:{}};function d$1b(t){if(!t||0===t.length)return null;if("string"==typeof t){const e=y$10(t);return e&&0!==e.length?e:null}const e=t.map((t=>{if(!Number.isFinite(t.scale)||t.scale<=0)throw new s$29("effect:invalid-scale","scale must be finite and greater than 0",{stop:t});return {scale:t.scale,effects:y$10(t.value)}}));e.sort(((t,e)=>e.effects.length-t.effects.length));for(let r=0;r<e.length-1;r++){if(!n$1Z(e[r].effects,e[r+1].effects))throw new s$29("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[r].effects,b:e[r+1].effects});e$16(e[r].effects,e[r+1].effects);}return e.sort(((t,e)=>e.scale-t.scale)),e}function y$10(t){let e;if(!t)return [];try{e=v$B.exports.parse(t);}catch(r){throw new s$29("effect:invalid-syntax","Invalid effect syntax",{value:t,error:r})}return e.map((t=>A$h(t)))}function A$h(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return w$D(t);case"opacity":return x$o(t);case"hue-rotate":return b$H(t);case"blur":return C$n(t);case"drop-shadow":return F$d(t);case"bloom":return E$k(t)}}catch(e){throw e.details.filter=t,e}throw new s$29("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function w$D(t){let e=1;return j$r(t.parameters,1),1===t.parameters.length&&(e=M$m(t.parameters[0])),new d$1c(t.name,e)}function x$o(t){let e=1;return j$r(t.parameters,1),1===t.parameters.length&&(e=M$m(t.parameters[0])),new M$n(e)}function b$H(t){let e=0;return j$r(t.parameters,1),1===t.parameters.length&&(e=N$i(t.parameters[0])),new f$_(e)}function C$n(t){let e=0;return j$r(t.parameters,1),1===t.parameters.length&&(e=T$h(t.parameters[0]),O$j(e,t.parameters[0])),new p$2o(e)}function F$d(t){const e=[];let r=null;for(const n of t.parameters)if("color"===n.type){if(e.length&&Object.freeze(e),r)throw new s$29("effect:type-error","Accepts only one color",{});r=U$i(n);}else {const t=T$h(n);if(Object.isFrozen(e))throw new s$29("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(t),3===e.length&&O$j(t,n);}if(e.length<2||e.length>3)throw new s$29("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new m$1r(e[0],e[1],e[2]||0,r||H$a("black"))}function E$k(t){let e=1,r=0,n=0;return j$r(t.parameters,3),t.parameters[0]&&(e=M$m(t.parameters[0])),t.parameters[1]&&(r=T$h(t.parameters[1]),O$j(r,t.parameters[1])),t.parameters[2]&&(n=M$m(t.parameters[2])),new l$1D(e,r,n)}function j$r(t,e){if(t.length>e)throw new s$29("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function $$d(t){if("color"===t.type)return "<color>";if(t.unit){if(R$k[t.unit])return "<length>";if(S$v[t.unit])return "<angle>";if("%"===t.unit)return "<percentage>"}return "<double>"}function O$j(t,e){if(t<0)throw new s$29("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function k$l(t){if("quantity"!==t.type||null!==t.unit)throw new s$29("effect:type-error",`Expected <double>, Actual: ${$$d(t)}`,{term:t})}function q$e(t){if("quantity"!==t.type||null!==t.unit&&"%"!==t.unit)throw new s$29("effect:type-error",`Expected <double> or <percentage>, Actual: ${$$d(t)}`,{term:t})}g$M=function(){function t(t,e){function r(){this.constructor=t;}r.prototype=e.prototype,t.prototype=new r;}function e(t,r,n,u){var a=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(a,e.prototype),a.expected=r,a.found=n,a.location=u,a.name="SyntaxError",a}function r(t,e,r){return r=r||" ",t.length>e?t:(e-=t.length,t+(r+=r.repeat(e)).slice(0,e))}function n(t,r){var n,u={},a=(r=void 0!==r?r:{}).grammarSource,c={start:Lt},o=Lt,i="none",l=")",s=",",f="(",p="%",h="px",m="cm",g="mm",v="in",d="pt",y="pc",A="deg",w="rad",x="grad",b="turn",C="#",F=".",E="e",j=/^[ \t\n\r]/,$=/^[a-z\-]/,O=/^[0-9a-fA-F]/,k=/^[+\-]/,q=/^[0-9]/,S=Bt("none"),z=Ut("none",!1),R=Ut(")",!1),I=Ut(",",!1),M=Bt("whitespace"),P=Ht([" ","\t","\n","\r"],!1,!1),N=Bt("function"),T=Ut("(",!1),U=Bt("identifier"),H=Ht([["a","z"],"-"],!1,!1),_=Bt("percentage"),B=Ut("%",!1),D=Bt("length"),G=Ut("px",!1),J=Ut("cm",!1),K=Ut("mm",!1),L=Ut("in",!1),Q=Ut("pt",!1),V=Ut("pc",!1),W=Bt("angle"),X=Ut("deg",!1),Y=Ut("rad",!1),Z=Ut("grad",!1),tt=Ut("turn",!1),et=Bt("number"),rt=Bt("color"),nt=Ut("#",!1),ut=Ht([["0","9"],["a","f"],["A","F"]],!1,!1),at=Ht(["+","-"],!1,!1),ct=Ht([["0","9"]],!1,!1),ot=Ut(".",!1),it=Ut("e",!1),lt=function(){return []},st=function(t,e){return {type:"function",name:t,parameters:e||[]}},ft=function(t,e){return e.length>0?le(t,e,3):[t]},pt=function(t){return {type:"quantity",value:t.value,unit:t.unit}},ht=function(t){return {type:"color",colorType:t.type,value:t.value}},mt=function(t){return t},gt=function(){return Tt()},vt=function(t){return {value:t,unit:"%"}},dt=function(t){return {value:t,unit:"px"}},yt=function(t){return {value:t,unit:"cm"}},At=function(t){return {value:t,unit:"mm"}},wt=function(t){return {value:t,unit:"in"}},xt=function(t){return {value:t,unit:"pt"}},bt=function(t){return {value:t,unit:"pc"}},Ct=function(t){return {value:t,unit:"deg"}},Ft=function(t){return {value:t,unit:"rad"}},Et=function(t){return {value:t,unit:"grad"}},jt=function(t){return {value:t,unit:"turn"}},$t=function(t){return {value:t,unit:null}},Ot=function(){return {type:"hex",value:Tt()}},kt=function(t){return {type:"function",value:t}},qt=function(){return {type:"named",value:Tt()}},St=function(){return parseFloat(Tt())},zt=0,Rt=0,It=[{line:1,column:1}],Mt=0,Pt=[],Nt=0;if("startRule"in r){if(!(r.startRule in c))throw new Error("Can't start parsing from rule \""+r.startRule+'".');o=c[r.startRule];}function Tt(){return t.substring(Rt,zt)}function Ut(t,e){return {type:"literal",text:t,ignoreCase:e}}function Ht(t,e,r){return {type:"class",parts:t,inverted:e,ignoreCase:r}}function _t(){return {type:"end"}}function Bt(t){return {type:"other",description:t}}function Dt(e){var r,n=It[e];if(n)return n;for(r=e-1;!It[r];)r--;for(n={line:(n=It[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return It[e]=n,n}function Gt(t,e){var r=Dt(t),n=Dt(e);return {source:a,start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function Jt(t){zt<Mt||(zt>Mt&&(Mt=zt,Pt=[]),Pt.push(t));}function Kt(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}function Lt(){var t;return (t=Qt())===u&&(t=Vt()),t}function Qt(){var e,r;return Nt++,e=zt,Zt(),t.substr(zt,4)===i?(r=i,zt+=4):(r=u,0===Nt&&Jt(z)),r!==u?(Zt(),Rt=e,e=lt()):(zt=e,e=u),Nt--,e===u&&0===Nt&&Jt(S),e}function Vt(){var t,e;if(t=[],(e=Wt())!==u)for(;e!==u;)t.push(e),e=Wt();else t=u;return t}function Wt(){var e,r,n,a;return e=zt,Zt(),(r=te())!==u?(Zt(),(n=Xt())===u&&(n=null),Zt(),41===t.charCodeAt(zt)?(a=l,zt++):(a=u,0===Nt&&Jt(R)),a!==u?(Zt(),Rt=e,e=st(r,n)):(zt=e,e=u)):(zt=e,e=u),e}function Xt(){var e,r,n,a,c,o,i,l;if(e=zt,(r=Yt())!==u){for(n=[],a=zt,c=Zt(),44===t.charCodeAt(zt)?(o=s,zt++):(o=u,0===Nt&&Jt(I)),o===u&&(o=null),i=Zt(),(l=Yt())!==u?a=c=[c,o,i,l]:(zt=a,a=u);a!==u;)n.push(a),a=zt,c=Zt(),44===t.charCodeAt(zt)?(o=s,zt++):(o=u,0===Nt&&Jt(I)),o===u&&(o=null),i=Zt(),(l=Yt())!==u?a=c=[c,o,i,l]:(zt=a,a=u);Rt=e,e=ft(r,n);}else zt=e,e=u;return e}function Yt(){var t,e;return t=zt,(e=re())===u&&(e=ne())===u&&(e=ue())===u&&(e=ae()),e!==u&&(Rt=t,e=pt(e)),(t=e)===u&&(t=zt,(e=ce())!==u&&(Rt=t,e=ht(e)),t=e),t}function Zt(){var e,r;for(Nt++,e=[],j.test(t.charAt(zt))?(r=t.charAt(zt),zt++):(r=u,0===Nt&&Jt(P));r!==u;)e.push(r),j.test(t.charAt(zt))?(r=t.charAt(zt),zt++):(r=u,0===Nt&&Jt(P));return Nt--,r=u,0===Nt&&Jt(M),e}function te(){var e,r,n;return Nt++,e=zt,(r=ee())!==u?(40===t.charCodeAt(zt)?(n=f,zt++):(n=u,0===Nt&&Jt(T)),n!==u?(Rt=e,e=mt(r)):(zt=e,e=u)):(zt=e,e=u),Nt--,e===u&&(r=u,0===Nt&&Jt(N)),e}function ee(){var e,r,n;if(Nt++,e=zt,r=[],$.test(t.charAt(zt))?(n=t.charAt(zt),zt++):(n=u,0===Nt&&Jt(H)),n!==u)for(;n!==u;)r.push(n),$.test(t.charAt(zt))?(n=t.charAt(zt),zt++):(n=u,0===Nt&&Jt(H));else r=u;return r!==u&&(Rt=e,r=gt()),Nt--,(e=r)===u&&(r=u,0===Nt&&Jt(U)),e}function re(){var e,r,n;return Nt++,e=zt,Zt(),(r=oe())!==u?(37===t.charCodeAt(zt)?(n=p,zt++):(n=u,0===Nt&&Jt(B)),n!==u?(Rt=e,e=vt(r)):(zt=e,e=u)):(zt=e,e=u),Nt--,e===u&&0===Nt&&Jt(_),e}function ne(){var e,r,n;return Nt++,e=zt,Zt(),(r=oe())!==u?(t.substr(zt,2)===h?(n=h,zt+=2):(n=u,0===Nt&&Jt(G)),n!==u?(Rt=e,e=dt(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,Zt(),(r=oe())!==u?(t.substr(zt,2)===m?(n=m,zt+=2):(n=u,0===Nt&&Jt(J)),n!==u?(Rt=e,e=yt(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,Zt(),(r=oe())!==u?(t.substr(zt,2)===g?(n=g,zt+=2):(n=u,0===Nt&&Jt(K)),n!==u?(Rt=e,e=At(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,Zt(),(r=oe())!==u?(t.substr(zt,2)===v?(n=v,zt+=2):(n=u,0===Nt&&Jt(L)),n!==u?(Rt=e,e=wt(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,Zt(),(r=oe())!==u?(t.substr(zt,2)===d?(n=d,zt+=2):(n=u,0===Nt&&Jt(Q)),n!==u?(Rt=e,e=xt(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,Zt(),(r=oe())!==u?(t.substr(zt,2)===y?(n=y,zt+=2):(n=u,0===Nt&&Jt(V)),n!==u?(Rt=e,e=bt(r)):(zt=e,e=u)):(zt=e,e=u)))))),Nt--,e===u&&0===Nt&&Jt(D),e}function ue(){var e,r,n;return Nt++,e=zt,(r=oe())!==u?(t.substr(zt,3)===A?(n=A,zt+=3):(n=u,0===Nt&&Jt(X)),n!==u?(Rt=e,e=Ct(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,(r=oe())!==u?(t.substr(zt,3)===w?(n=w,zt+=3):(n=u,0===Nt&&Jt(Y)),n!==u?(Rt=e,e=Ft(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,(r=oe())!==u?(t.substr(zt,4)===x?(n=x,zt+=4):(n=u,0===Nt&&Jt(Z)),n!==u?(Rt=e,e=Et(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,(r=oe())!==u?(t.substr(zt,4)===b?(n=b,zt+=4):(n=u,0===Nt&&Jt(tt)),n!==u?(Rt=e,e=jt(r)):(zt=e,e=u)):(zt=e,e=u)))),Nt--,e===u&&(r=u,0===Nt&&Jt(W)),e}function ae(){var t,e;return Nt++,t=zt,Zt(),(e=oe())!==u?(Rt=t,t=$t(e)):(zt=t,t=u),Nt--,t===u&&0===Nt&&Jt(et),t}function ce(){var e,r,n,a;if(Nt++,e=zt,35===t.charCodeAt(zt)?(r=C,zt++):(r=u,0===Nt&&Jt(nt)),r!==u){if(n=[],O.test(t.charAt(zt))?(a=t.charAt(zt),zt++):(a=u,0===Nt&&Jt(ut)),a!==u)for(;a!==u;)n.push(a),O.test(t.charAt(zt))?(a=t.charAt(zt),zt++):(a=u,0===Nt&&Jt(ut));else n=u;n!==u?(Rt=e,e=Ot()):(zt=e,e=u);}else zt=e,e=u;return e===u&&(e=zt,(r=Wt())!==u&&(Rt=e,r=kt(r)),(e=r)===u&&(e=zt,(r=ee())!==u&&(Rt=e,r=qt()),e=r)),Nt--,e===u&&(r=u,0===Nt&&Jt(rt)),e}function oe(){var e,r,n,a,c,o,i;for(e=zt,k.test(t.charAt(zt))?(t.charAt(zt),zt++):0===Nt&&Jt(at),r=zt,n=[],q.test(t.charAt(zt))?(a=t.charAt(zt),zt++):(a=u,0===Nt&&Jt(ct));a!==u;)n.push(a),q.test(t.charAt(zt))?(a=t.charAt(zt),zt++):(a=u,0===Nt&&Jt(ct));if(46===t.charCodeAt(zt)?(a=F,zt++):(a=u,0===Nt&&Jt(ot)),a!==u){if(c=[],q.test(t.charAt(zt))?(o=t.charAt(zt),zt++):(o=u,0===Nt&&Jt(ct)),o!==u)for(;o!==u;)c.push(o),q.test(t.charAt(zt))?(o=t.charAt(zt),zt++):(o=u,0===Nt&&Jt(ct));else c=u;c!==u?r=n=[n,a,c]:(zt=r,r=u);}else zt=r,r=u;if(r===u)if(r=[],q.test(t.charAt(zt))?(n=t.charAt(zt),zt++):(n=u,0===Nt&&Jt(ct)),n!==u)for(;n!==u;)r.push(n),q.test(t.charAt(zt))?(n=t.charAt(zt),zt++):(n=u,0===Nt&&Jt(ct));else r=u;if(r!==u){if(n=zt,101===t.charCodeAt(zt)?(a=E,zt++):(a=u,0===Nt&&Jt(it)),a!==u){if(k.test(t.charAt(zt))?(c=t.charAt(zt),zt++):(c=u,0===Nt&&Jt(at)),c===u&&(c=null),o=[],q.test(t.charAt(zt))?(i=t.charAt(zt),zt++):(i=u,0===Nt&&Jt(ct)),i!==u)for(;i!==u;)o.push(i),q.test(t.charAt(zt))?(i=t.charAt(zt),zt++):(i=u,0===Nt&&Jt(ct));else o=u;o!==u?n=a=[a,c,o]:(zt=n,n=u);}else zt=n,n=u;n===u&&(n=null),Rt=e,e=St();}else zt=e,e=u;return e}function ie(t,e){return t.map((function(t){return t[e]}))}function le(t,e,r){return [t].concat(ie(e,r))}if((n=o())!==u&&zt===t.length)return n;throw n!==u&&zt<t.length&&Jt(_t()),Kt(Pt,Mt<t.length?t.charAt(Mt):null,Mt<t.length?Gt(Mt,Mt+1):Gt(Mt,Mt))}return t(e,Error),e.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var n,u=null;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){u=t[n].text.split(/\r\n|\n|\r/g);break}var a=this.location.start,c=this.location.source+":"+a.line+":"+a.column;if(u){var o=this.location.end,i=r("",a.line.toString().length),l=u[a.line-1],s=a.line===o.line?o.column:l.length+1;e+="\n --\x3e "+c+"\n"+i+" |\n"+a.line+" | "+l+"\n"+i+" | "+r("",a.column-1)+r("",s-a.column,"^");}else e+="\n at "+c;}return e},e.buildMessage=function(t,e){var r={literal:function(t){return '"'+u(t.text)+'"'},class:function(t){var e=t.parts.map((function(t){return Array.isArray(t)?a(t[0])+"-"+a(t[1]):a(t)}));return "["+(t.inverted?"^":"")+e+"]"},any:function(){return "any character"},end:function(){return "end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function u(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return "\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return "\\x"+n(t)}))}function a(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return "\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return "\\x"+n(t)}))}function c(t){return r[t.type](t)}function o(t){var e,r,n=t.map(c);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r;}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}function i(t){return t?'"'+u(t)+'"':"end of input"}return "Expected "+o(t)+" but "+i(e)+" found."},{SyntaxError:e,parse:n}},(m$1q=v$B).exports&&(m$1q.exports=g$M());const S$v={deg:1,grad:.9,rad:180/Math.PI,turn:360};function z$g(t){if("quantity"!==t.type||!(0===t.value&&null===t.unit||t.unit&&null!=S$v[t.unit]))throw new s$29("effect:type-error",`Expected <angle>, Actual: ${$$d(t)}`,{term:t})}const R$k={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function I$o(t){if("quantity"!==t.type||!(0===t.value&&null===t.unit||t.unit&&null!=R$k[t.unit]))throw new s$29("effect:type-error",`Expected <length>, Actual: ${$$d(t)}`,{term:t})}function M$m(t){q$e(t);const e=t.value;return O$j(e,t),"%"===t.unit?.01*e:e}function P$h(t){return k$l(t),O$j(t.value,t),t.value}function N$i(t){return z$g(t),t.value*S$v[t.unit]||0}function T$h(t){return I$o(t),t.value*R$k[t.unit]||0}function U$i(t){switch(t.colorType){case"hex":return i$2c(t.value);case"named":return H$a(t.value);case"function":return D$i(t.value)}}function H$a(e){if(!r$1i(e))throw new s$29("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return a$2J(e)}const _$o=/^rgba?/i,B$b=/^hsla?/i;function D$i(t){if(j$r(t.parameters,4),_$o.test(t.name))return [M$m(t.parameters[0]),M$m(t.parameters[1]),M$m(t.parameters[2]),t.parameters[3]?M$m(t.parameters[3]):1];if(B$b.test(t.name))return o$1q(P$h(t.parameters[0]),M$m(t.parameters[1]),M$m(t.parameters[2]),t.parameters[3]?M$m(t.parameters[3]):1);throw new s$29("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const f$Z=-1;class r$${constructor(t=200){this.duration=t,this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this._effect="",this._effects=[],this._scale=0;}get effect(){return this._effect}set effect(t){if(t=t||"",this._effect!==t){this._effect=t;try{this._transitionTo(c$27(t));}catch(s){this._transitionTo([]),s$2h.getLogger("esri.views.layers.effects.EffectList").warn("Invalid Effect",{effect:t,error:s});}}}get hasEffects(){return this.transitioning||!!this._effects.length}get effects(){return this._effects}get scale(){return this._scale}get transitioning(){return null!==this._to}transitionStep(t,e){this._applyTimeTransition(t),this._updateForScale(e);}_transitionTo(e){this.scale>0&&l$1C(this._current,e,this.scale)?(this._final=e,this._to=l$2r(e),h$Z(this._current,this._to,this.scale),this._from=l$2r(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._effects=this._current[0]?l$2r(this._current[0].effects):[];}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const s=Math.min(1,this._time/this.duration);for(let t=0;t<this._current.length;t++){const e=this._current[t],i=this._from[t],n=this._to[t];e.scale=o$10(i.scale,n.scale,s);for(let t=0;t<e.effects.length;t++){const f=e.effects[t],r=i.effects[t],c=n.effects[t];f.interpolate(r,c,s);}}1===s&&(this._current=this._final,this._effects=this._current[0]?l$2r(this._current[0].effects):[],this._from=this._to=this._final=null);}_updateForScale(t){if(0===this._current.length)return;this._scale=t;const e=this._current,s=this._current.length-1;let i,n,f=1;if(1===e.length||t>=e[0].scale)n=i=e[0].effects;else if(t<=e[s].scale)n=i=e[s].effects;else for(let r=0;r<s;r++){const s=e[r],c=e[r+1];if(s.scale>=t&&c.scale<=t){f=(t-s.scale)/(c.scale-s.scale),i=s.effects,n=c.effects;break}}for(let r=0;r<this._effects.length;r++){this._effects[r].interpolate(i[r],n[r],f);}}}function c$27(t){const e=d$1b(t)||[];return a$28(e)?[{scale:f$Z,effects:e}]:e}function l$1C(t,e,s){var n,r,c,l;if(null==(n=t[0])||!n.effects||null==(r=e[0])||!r.effects)return !0;return !(((null==(c=t[0])?void 0:c.scale)===f$Z||(null==(l=e[0])?void 0:l.scale)===f$Z)&&(t.length>1||e.length>1)&&s<=0)&&n$1Z(t[0].effects,e[0].effects)}function h$Z(t,e,s){var i,r;const c=t.length>e.length?t:e,l=t.length>e.length?e:t,h=l[l.length-1],o=null!=(i=null==h?void 0:h.scale)?i:s,a=null!=(r=null==h?void 0:h.effects)?r:[];for(let n=l.length;n<c.length;n++)l.push({scale:o,effects:[...a]});for(let _=0;_<c.length;_++)l[_].scale=l[_].scale===f$Z?s:l[_].scale,c[_].scale=c[_].scale===f$Z?s:c[_].scale,e$16(l[_].effects,c[_].effects);}function o$10(t,e,s){return t+(e-t)*s}function a$28(t){const e=t[0];return !!e&&"type"in e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1Y(e,t,r){try{return c$26(e)}catch(n){var s;null==r||null==(s=r.messages)||s.push(n);}return null}function a$27(e,r,s,n){try{const n=o$$(e);o$1W(s,n,r);}catch(a){n.messages&&n.messages.push(a);}}function o$$(e){const t=d$1b(e);return t?h$_(t)?t.map((e=>e.toJSON())):t.map((({scale:e,effects:t})=>({scale:e,value:t.map((e=>e.toJSON()))}))):null}function c$26(e){if(!e||0===e.length)return null;if(u$1m(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:f$Y(r.value)});return t}return f$Y(e)}function u$1m(e){const t=e[0];return !!t&&"scale"in t}function f$Y(e){if(!e||!e.length)return "";const t=[];for(const s of e){let e=[];switch(s.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[i$1N(s,"amount")];break;case"blur":e=[i$1N(s,"radius","pt")];break;case"hue-rotate":e=[i$1N(s,"angle","deg")];break;case"drop-shadow":e=[i$1N(s,"xoffset","pt"),i$1N(s,"yoffset","pt"),i$1N(s,"blurRadius","pt"),l$1B(s,"color")];break;case"bloom":e=[i$1N(s,"strength"),i$1N(s,"radius","pt"),i$1N(s,"threshold")];}const n=`${s.type}(${e.filter(Boolean).join(" ")})`;d$1b(n),t.push(n);}return t.join(" ")}function i$1N(t,r,s){if(null==t[r])throw new s$29("effect:missing-parameter",`Missing parameter '${r}' in ${t.type} effect`,{effect:t});return s?t[r]+s:""+t[r]}function l$1B(t,r){if(null==t[r])throw new s$29("effect:missing-parameter",`Missing parameter '${r}' in ${t.type} effect`,{effect:t});const s=t[r];return `rgba(${s[0]||0}, ${s[1]||0}, ${s[2]||0}, ${s[3]/255||0})`}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$1M(n,t,o={}){return c$25(n,t,o,l$1A)}function u$1l(n,t,o={}){return c$25(n,t,o,s$1x)}function c$25(n,t,o={},i){let u=null;const c=o.once?(n,o)=>{i(n)&&(s$2k(u),t(n,o));}:(n,o)=>{i(n)&&t(n,o);};if(u=A$r(n,c,o.sync,o.equals),o.initial){const t=n();c(t,t);}return u}function l$1A(n){return !0}function s$1x(n){return !!n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$1z=class extends p$33{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new u$1X,this.scheduleHandleId=0,this.pendingPromises=new Set;}destroy(){this.removeAll(),this.handles.destroy();}add(e,s,t,d=0){const r=0!=(1&d),i=++this.handleId;r||this.installSyncUpdatingWatch(e,s,i);const a=0!=(2&d)?i$2i(e,s,t,r):e.watch(s,t,r);return this.handles.add(a,i),{remove:()=>this.handles.remove(i)}}addOnCollectionPropertyChange(e,s,t,d=0){const r=0!=(2&d),i=++this.handleId;return this.handles.add([$$f(e,s,"after-changes",this.createSyncUpdatingCallback()),$$f(e,s,"change",t,r?e=>{t({added:e.items,removed:[],moved:[],target:e});}:void 0)],i),{remove:()=>{this.handles.remove(i);}}}addOnCollectionChange(e,s,t=0){const d=0!=(2&t),r=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",s)],r),d&&s({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(r);}}}addPromise(e){if(t$1O(e))return e;const s=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(m$1p)||this._set("updating",!1));}},s),this.pendingPromises.add(e),this._set("updating",!0);const t=()=>this.handles.remove(s);return e.then(t,t),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1);}installSyncUpdatingWatch(e,s,t){const d=this.createSyncUpdatingCallback(),i=i$1M((()=>u$2b(e,s)),d,{sync:!0,equals:()=>!1});return this.handles.add(i,t),i}createSyncUpdatingCallback(){return ()=>{this.handles.remove(m$1p),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(v$R((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(m$1p));})),m$1p);}}};e$1_([d$1S({readOnly:!0})],l$1z.prototype,"updating",void 0),l$1z=e$1_([i$2w("esri.views.support.WatchUpdatingTracking")],l$1z);const m$1p=-42;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$26=s=>{let a=class extends s{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy());}get handles(){return this._get("handles")||new u$1X}get updatingHandles(){return this._get("updatingHandles")||new l$1z}};return e$1_([d$1S({readOnly:!0})],a.prototype,"handles",null),e$1_([d$1S({readOnly:!0})],a.prototype,"updatingHandles",null),a=e$1_([i$2w("esri.core.HandleOwner")],a),a};let d$1a=class extends(a$26(p$33)){};d$1a=e$1_([i$2w("esri.core.HandleOwner")],d$1a);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$15={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},t$$={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function s$1w(e,s,r){const n=new Date(e.getTime());if(s&&r){const e=t$$[r],{getter:l,setter:u,multiplier:i}=e;n[u](n[l]()+s*i);}return n}function n$1X(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function o$_(t,s,r){if(0===t)return 0;return t*e$15[s]/e$15[r]}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$1k;let d$19=u$1k=class extends a$2A{constructor(t){super(t),this.end=null,this.start=null;}static get allTime(){return c$24}static get empty(){return h$Y}readEnd(t,e){return null!=e.end?new Date(e.end):null}writeEnd(t,e){e.end=t?t.getTime():null;}get isAllTime(){return this.equals(u$1k.allTime)}get isEmpty(){return this.equals(u$1k.empty)}readStart(t,e){return null!=e.start?new Date(e.start):null}writeStart(t,e){e.start=t?t.getTime():null;}clone(){return new u$1k({end:this.end,start:this.start})}equals(t){if(!t)return !1;const e=r$1G(this.start)?this.start.getTime():this.start,s=r$1G(this.end)?this.end.getTime():this.end,i=r$1G(t.start)?t.start.getTime():t.start,n=r$1G(t.end)?t.end.getTime():t.end;return e===i&&s===n}expandTo(t){if(this.isEmpty||this.isAllTime)return this.clone();const e=E$w(this.start,(e=>n$1X(e,t))),r=E$w(this.end,(e=>s$1w(n$1X(e,t),1,t)));return new u$1k({start:e,end:r})}intersection(t){if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return u$1k.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=A$A(this.start,-1/0,(t=>t.getTime())),r=A$A(this.end,1/0,(t=>t.getTime())),s=A$A(t.start,-1/0,(t=>t.getTime())),n=A$A(t.end,1/0,(t=>t.getTime()));let o,l;if(s>=e&&s<=r?o=s:e>=s&&e<=n&&(o=e),r>=s&&r<=n?l=r:n>=e&&n<=r&&(l=n),!isNaN(o)&&!isNaN(l)){const t=new u$1k;return t.start=o===-1/0?null:new Date(o),t.end=l===1/0?null:new Date(l),t}return u$1k.empty}offset(t,e){if(this.isEmpty||this.isAllTime)return this.clone();const s=new u$1k,{start:i,end:n}=this;return r$1G(i)&&(s.start=s$1w(i,t,e)),r$1G(n)&&(s.end=s$1w(n,t,e)),s}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return c$24.clone();const e=r$1G(this.start)&&r$1G(t.start)?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,s=r$1G(this.end)&&r$1G(t.end)?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new u$1k({start:e,end:s})}};e$1_([d$1S({type:Date,json:{write:{allowNull:!0}}})],d$19.prototype,"end",void 0),e$1_([o$1j("end")],d$19.prototype,"readEnd",null),e$1_([r$1c("end")],d$19.prototype,"writeEnd",null),e$1_([d$1S({readOnly:!0,json:{read:!1}})],d$19.prototype,"isAllTime",null),e$1_([d$1S({readOnly:!0,json:{read:!1}})],d$19.prototype,"isEmpty",null),e$1_([d$1S({type:Date,json:{write:{allowNull:!0}}})],d$19.prototype,"start",void 0),e$1_([o$1j("start")],d$19.prototype,"readStart",null),e$1_([r$1c("start")],d$19.prototype,"writeStart",null),d$19=u$1k=e$1_([i$2w("esri.TimeExtent")],d$19);const c$24=new d$19,h$Y=new d$19({start:void 0,end:void 0}),y$$=d$19;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function a$25(e){if(!e)return e;const{start:i,end:o}=e;return new y$$({start:r$1G(i)?s$1w(i,-i.getTimezoneOffset(),"minutes"):i,end:r$1G(o)?s$1w(o,-o.getTimezoneOffset(),"minutes"):o})}function l$1y(e){if(!e)return e;const{start:i,end:o}=e;return new y$$({start:r$1G(i)?s$1w(i,i.getTimezoneOffset(),"minutes"):i,end:r$1G(o)?s$1w(o,o.getTimezoneOffset(),"minutes"):o})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$2n;let i$1L=p$2n=class extends a$2A{async collectRequiredFields(r,s){return b$N(r,s,this.expression)}clone(){return new p$2n({expression:this.expression,title:this.title})}};e$1_([d$1S({type:String,json:{write:!0}})],i$1L.prototype,"expression",void 0),e$1_([d$1S({type:String,json:{write:!0}})],i$1L.prototype,"title",void 0),i$1L=p$2n=e$1_([i$2w("esri.layers.support.FeatureExpressionInfo")],i$1L);const c$23=i$1L;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function T$g(e){return new k$s({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const G$b=T$g(s$1L),I$n=T$g(t$1h),E$j=T$g(e$1m),R$j=new k$s({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${s$1L.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function A$g(n){return n&&n===t$1h?I$n:n&&n===e$1m?E$j:G$b}function O$i(n){return n&&(G$g(n)||n===I$n)?I$n:n&&(C$s(n)||n===E$j)?E$j:G$b}function p$2m(n){return n&&(G$g(n)||n===I$n)?t$1h:n&&(C$s(n)||n===E$j)?e$1m:s$1L}function u$1j(n){return w$M(n)?t$1h:P$m(n)?e$1m:s$1L}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$1o=39.37,f$X=s$1L.radius*Math.PI/200,d$18=/UNIT\[([^\]]+)\]\]$/i,U$h=r$1b,q$d=/UNIT\[([^\]]+)\]/i,B$a=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),p$2l=s$25()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),h$X=e=>e*e,k$k=e=>e*e*e,y$_={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:h$X(.001)},"square-centimeters":{inBaseUnits:h$X(.01)},"square-decimeters":{inBaseUnits:h$X(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:h$X(1e3)},"square-inches":{inBaseUnits:h$X(.0254)},"square-feet":{inBaseUnits:h$X(.3048)},"square-yards":{inBaseUnits:h$X(.9144)},"square-miles":{inBaseUnits:h$X(1609.344)},"square-us-feet":{inBaseUnits:h$X(1200/3937)},acres:{inBaseUnits:.0015625*h$X(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*k$k(.001)},"cubic-centimeters":{inBaseUnits:1e3*k$k(.01)},"cubic-decimeters":{inBaseUnits:1e3*k$k(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*k$k(1e3)},"cubic-inches":{inBaseUnits:1e3*k$k(.0254)},"cubic-feet":{inBaseUnits:1e3*k$k(.3048)},"cubic-yards":{inBaseUnits:1e3*k$k(.9144)},"cubic-miles":{inBaseUnits:1e3*k$k(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},b$G=function(){const e={};for(const s in y$_)for(const r in y$_[s].units)e[r]=s;return e}();function _$n(e,s,r){return e*y$_[r].units[s].inBaseUnits}function g$L(e,s,r){return e/y$_[r].units[s].inBaseUnits}function M$l(e){const s=b$G[e];if(s)return s;throw new Error("unknown measure")}function C$m(e,s=null){return s=s||M$l(e),y$_[s].baseUnit===e}function D$h(e,s,r){if(s===r)return e;const t=M$l(s);if(t!==M$l(r))throw new Error("incompatible units");const i=C$m(s,t)?e:_$n(e,s,t);return C$m(r,t)?i:g$L(i,r,t)}function R$i(e,s,r){return D$h(e,s,"meters")/(r*Math.PI/180)}function A$f(e){return p$2l.fromJSON(e.toLowerCase())||null}function Y$8(e){if(e&&"object"==typeof e&&!o$1h(e))return 1;const s=H$9(e);return s>1e5?1:s}function G$a(e){return H$9(e)>=(e instanceof k$s?p$2m(e).metersPerDegree:1e5)?"meters":z$f(e)}function H$9(e,s=s$1L.metersPerDegree){return L$n(e,!0)||s}function L$n(e,s=!1){let r,t,i=null;if(null!=e&&("object"==typeof e?(r=e.wkid,t=e.wkt):"number"==typeof e?r=e:"string"==typeof e&&(t=e)),r){if(w$M(r))return t$1h.metersPerDegree;if(P$m(r))return e$1m.metersPerDegree;i=U$h.values[U$h[r]],!i&&s&&B$a.has(r)&&(i=f$X);}else t&&(V$a(t)?i=W$7(d$18.exec(t),i):Q$8(t)&&(i=W$7(q$d.exec(t),i)));return i}function W$7(e,s){return e&&e[1]?$$c(e[1]):s}function $$c(e){return parseFloat(e.split(",")[1])}function z$f(e){let r,t,i=null;if(null!=e&&("object"==typeof e?(r=e.wkid,t=e.wkt):"number"==typeof e?r=e:"string"==typeof e&&(t=e)),r)i=U$h.units[U$h[r]];else if(t){const e=V$a(t)?d$18:Q$8(t)?q$d:null;if(e){const s=e.exec(t);s&&s[1]&&(i=Z$7(s[1]));}}return r$1G(i)?A$f(i):null}function Q$8(e){return /^GEOCCS/i.test(e)}function V$a(e){return /^PROJCS/i.test(e)}const X$8=1e-7;function Z$7(e){const s=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let r=s&&s[1];if(!r||-1===U$h.units.indexOf(r)){const s=$$c(e);r=null;const t=U$h.values;for(let e=0;e<t.length;++e)if(Math.abs(s-t[e])<X$8){r=U$h.units[e];break}}return r}const se$5={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},re$5={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},te$5=s$25()(se$5),ie$4=s$25()(re$5);s$25()({...se$5,...re$5});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$1n={inches:D$h(1,"meters","inches"),feet:D$h(1,"meters","feet"),"us-feet":D$h(1,"meters","us-feet"),yards:D$h(1,"meters","yards"),miles:D$h(1,"meters","miles"),"nautical-miles":D$h(1,"meters","nautical-miles"),millimeters:D$h(1,"meters","millimeters"),centimeters:D$h(1,"meters","centimeters"),decimeters:D$h(1,"meters","decimeters"),meters:D$h(1,"meters","meters"),kilometers:D$h(1,"meters","kilometers"),"decimal-degrees":1/R$i(1,"meters",s$1L.radius)};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$14(){const n=Object.keys(m$1n);return n.sort(),n}const o$Z=e$14();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$1x;const m$1m=s$25()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),d$17=new o$1K({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let c$22=l$1x=class extends a$2A{constructor(){super(...arguments),this.offset=null;}readFeatureExpressionInfo(e,r){return null!=e?e:r.featureExpression&&0===r.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,r,o,t){r[o]=e.write({},t),"0"===e.expression&&(r.featureExpression={value:0});}get mode(){const{offset:e,featureExpressionInfo:r}=this;return this._isOverridden("mode")?this._get("mode"):r$1G(e)||r?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e);}set unit(e){this._set("unit",e);}write(e,r){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,r):null}clone(){return new l$1x({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};e$1_([d$1S({type:c$23,json:{write:!0}})],c$22.prototype,"featureExpressionInfo",void 0),e$1_([o$1j("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],c$22.prototype,"readFeatureExpressionInfo",null),e$1_([r$1c("featureExpressionInfo",{featureExpressionInfo:{type:c$23},"featureExpression.value":{type:[0]}})],c$22.prototype,"writeFeatureExpressionInfo",null),e$1_([d$1S({type:m$1m.apiValues,nonNullable:!0,json:{type:m$1m.jsonValues,read:m$1m.read,write:{writer:m$1m.write,isRequired:!0}}})],c$22.prototype,"mode",null),e$1_([d$1S({type:Number,json:{write:!0}})],c$22.prototype,"offset",void 0),e$1_([d$1S({type:o$Z,json:{type:String,read:d$17.read,write:d$17.write}})],c$22.prototype,"unit",null),c$22=l$1x=e$1_([i$2w("esri.layers.support.ElevationInfo")],c$22);const x$n=c$22;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$1w={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},p$2k={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,r)=>!r.disablePopup},write:{enabled:!0,writer(e,r,i){r[i]=!e;}}}},m$1l={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},f$W={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:p$2E}}},c$21={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},d$16={value:null,type:x$n,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function y$Z(e){return {type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const u$1i={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},w$C={...u$1i,json:{...u$1i.json,origins:{"web-document":{...u$1i.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,r,i)=>i&&"service"!==i.origin||!r.drawingInfo||void 0===r.drawingInfo.transparency?r.layerDefinition&&r.layerDefinition.drawingInfo&&void 0!==r.layerDefinition.drawingInfo.transparency?r$14(r.layerDefinition.drawingInfo.transparency):void 0:r$14(r.drawingInfo.transparency)}}},g$K={type:y$$,readOnly:!0,get(){var e,r;if(null==(e=this.layer)||!e.timeInfo)return null;const{datesInUnknownTimezone:i,timeOffset:n,useViewTime:a}=this.layer,s=null==(r=this.view)?void 0:r.timeExtent;let l=this.layer.timeExtent;i&&(l=l$1y(l));let p=a?s&&l?s.intersection(l):s||l:l;if(!p||p.isEmpty||p.isAllTime)return p;n&&(p=p.offset(-n.value,n.unit)),i&&(p=a$25(p));const m=this._get("timeExtent");return p.equals(m)?m:p}},v$A={type:M$r,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,n)=>{const t=M$r.fromJSON(e);return null!=n.spatialReference&&"object"==typeof n.spatialReference&&(t.spatialReference=k$s.fromJSON(n.spatialReference)),t}}}},read:!1}},j$q={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},b$F={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},I$m={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$13(e,n,i){const o=n.flatten((({sublayers:e})=>e)).length;if(o!==e.length)return !0;return !!e.some((e=>e.originIdOf("minScale")>i||e.originIdOf("maxScale")>i||e.originIdOf("renderer")>i||e.originIdOf("labelingInfo")>i||e.originIdOf("opacity")>i||e.originIdOf("labelsVisible")>i||e.originIdOf("source")>i))||!r$_(e,n)}function n$1W(e,n,i){return !!e.some((e=>{const n=e.source;return !(!n||"map-layer"===n.type&&n.mapLayerId===e.id&&(!n.gdbVersion||n.gdbVersion===i.gdbVersion))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("opacity")>2||e.originIdOf("labelsVisible")>2}))||!r$_(e,n)}function r$_(e,n){if(!e||!e.length)return !0;const r=n.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).map((e=>e.id)).toArray();if(e.length>r.length)return !1;let i=0;const o=r.length;for(const{id:t}of e){for(;i<o&&r[i]!==t;)i++;if(i>=o)return !1}return !0}function i$1K(e){return !!e&&e.some((e=>null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function o$Y(o){var n;const l=o.layer;if("floorInfo"in l&&null!=(n=l.floorInfo)&&n.floorField&&"floors"in o.view){return r$Z(o.view.floors,l.floorInfo.floorField)}return null}function n$1V(o,n){var l;return "floorInfo"in n&&null!=(l=n.floorInfo)&&l.floorField?r$Z(o,n.floorInfo.floorField):null}function l$1v(o,n){const{definitionExpression:l}=n;return o?l?`(${l}) AND (${o})`:o:l}function r$Z(o,n){if(null==o||!o.length)return null;const l=o.filter((o=>""!==o)).map((o=>`'${o}'`));return l.push("''"),`${n} IN (${l.join(",")}) OR ${n} IS NULL`}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$1k={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let c$20=class extends(a$26(p$33)){constructor(e){super(e),this.floors=null,this.scale=0;}destroy(){this.layer=null;}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((e=>{const r=n$1V(this.floors,e);return e.toExportImageJSON(r)}));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&n$1W(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",(()=>this.notifyChange("visibleSublayers"))),e.on("sublayer-update",(e=>this.notifyChange(m$1k[e.propertyName])))],"layer"));}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map((e=>e.id)).join(","):"show:-1":null}get layerDefs(){var e;const r=!(null==(e=this.floors)||!e.length),s=this.visibleSublayers.filter((e=>null!=e.definitionExpression||r&&null!=e.floorInfo));return s.length?JSON.stringify(s.reduce(((e,r)=>{const s=n$1V(this.floors,r),i=r$1G(s)?l$1v(s,r):r.definitionExpression;return e[r.id]=i,e}),{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const r=this.layer.sublayers,s=r=>{const t=this.scale,i=0===t,o=0===r.minScale||t<=r.minScale,a=0===r.maxScale||t>=r.maxScale;r.visible&&(i||o&&a)&&(r.sublayers?r.sublayers.forEach(s):e.unshift(r));};r&&r.forEach(s);const t=this._get("visibleSublayers");return !t||t.length!==e.length||t.some(((r,s)=>e[s]!==r))?e:t}toJSON(){const e=this.layer;let r={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?r.dynamicLayers=this.dynamicLayers:r={...r,layers:this.layers,layerDefs:this.layerDefs},r}};e$1_([d$1S({readOnly:!0})],c$20.prototype,"dynamicLayers",null),e$1_([d$1S()],c$20.prototype,"floors",void 0),e$1_([d$1S({readOnly:!0})],c$20.prototype,"hasDynamicLayers",null),e$1_([d$1S()],c$20.prototype,"layer",null),e$1_([d$1S({readOnly:!0})],c$20.prototype,"layers",null),e$1_([d$1S({readOnly:!0})],c$20.prototype,"layerDefs",null),e$1_([d$1S({type:Number})],c$20.prototype,"scale",void 0),e$1_([d$1S(g$K)],c$20.prototype,"timeExtent",void 0),e$1_([d$1S({readOnly:!0})],c$20.prototype,"version",null),e$1_([d$1S({readOnly:!0})],c$20.prototype,"visibleSublayers",null),c$20=e$1_([i$2w("esri.layers.mixins.ExportImageParameters")],c$20);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$_;let a$24=t$_=class extends a$2A{constructor(r){super(r),this.minValue=0,this.maxValue=0;}clone(){return new t$_({minValue:this.minValue,maxValue:this.maxValue})}};e$1_([d$1S({type:Number,json:{write:!0}})],a$24.prototype,"minValue",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],a$24.prototype,"maxValue",void 0),a$24=t$_=e$1_([i$2w("esri.renderer.support.AuthoringInfoClassBreakInfo")],a$24);const p$2j=a$24;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$1U;let a$23=n$1U=class extends a$2A{constructor(o){super(o),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[];}clone(){return new n$1U({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:l$2r(this.classBreakInfos)})}};e$1_([d$1S({type:String,json:{write:!0}})],a$23.prototype,"field",void 0),e$1_([d$1S({type:String,json:{write:!0}})],a$23.prototype,"normalizationField",void 0),e$1_([d$1S({type:String,json:{write:!0}})],a$23.prototype,"label",void 0),e$1_([d$1S({type:[p$2j],json:{write:!0}})],a$23.prototype,"classBreakInfos",void 0),a$23=n$1U=e$1_([i$2w("esri.renderers.support.AuthoringInfoFieldInfo")],a$23);const p$2i=a$23;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$1T;const l$1u=new o$1K({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),p$2h=new o$1K({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),a$22={key:e=>"number"==typeof e?"number":"string",typeMap:{number:Number,string:String},base:null},u$1h=["high-to-low","above-and-below","centered-on","extremes"],m$1j=[...new Set([...["high-to-low","above-and-below","centered-on","extremes","90-10","above","below"],...["high-to-low","above-and-below","90-10","above","below"]])],y$Y=["seconds","minutes","hours","days","months","years"];let d$15=n$1T=class extends a$2A{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null;}castEndTime(e){return "string"==typeof e||"number"==typeof e?e:null}castStartTime(e){return "string"==typeof e||"number"==typeof e?e:null}get style(){return "color"===this.type?this._get("style"):null}set style(e){this._set("style",e);}get theme(){return "color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e);}clone(){return new n$1T({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};e$1_([d$1S({types:a$22,json:{write:!0}})],d$15.prototype,"endTime",void 0),e$1_([c$2Y("endTime")],d$15.prototype,"castEndTime",null),e$1_([d$1S({type:String,json:{write:!0}})],d$15.prototype,"field",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],d$15.prototype,"maxSliderValue",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],d$15.prototype,"minSliderValue",void 0),e$1_([d$1S({types:a$22,json:{write:!0}})],d$15.prototype,"startTime",void 0),e$1_([c$2Y("startTime")],d$15.prototype,"castStartTime",null),e$1_([d$1S({type:l$1u.apiValues,value:null,json:{type:l$1u.jsonValues,read:l$1u.read,write:l$1u.write}})],d$15.prototype,"style",null),e$1_([d$1S({type:m$1j,value:null,json:{type:m$1j,origins:{"web-scene":{type:u$1h,write:{writer:(e,t)=>{u$1h.indexOf(e)>-1&&(t.theme=e);}}}},write:!0}})],d$15.prototype,"theme",null),e$1_([d$1S({type:p$2h.apiValues,json:{type:p$2h.jsonValues,read:p$2h.read,write:p$2h.write}})],d$15.prototype,"type",void 0),e$1_([d$1S({type:y$Y,json:{type:y$Y,write:!0}})],d$15.prototype,"units",void 0),d$15=n$1T=e$1_([i$2w("esri.renderers.support.AuthoringInfoVisualVariable")],d$15);const h$W=d$15;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$12=class extends a$2A{constructor(r){super(r),this.type=null;}};e$1_([d$1S({readOnly:!0,json:{read:!1,write:!0}})],e$12.prototype,"type",void 0),e$12=e$1_([i$2w("esri.rest.support.ColorRamp")],e$12);const p$2g=e$12;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$1i;let c$1$=m$1i=class extends p$2g{constructor(o){super(o),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic";}clone(){return new m$1i({fromColor:l$2r(this.fromColor),toColor:l$2r(this.toColor),algorithm:this.algorithm})}};e$1_([r$1d({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],c$1$.prototype,"algorithm",void 0),e$1_([d$1S({type:h$1l,json:{type:[S$J],write:!0}})],c$1$.prototype,"fromColor",void 0),e$1_([d$1S({type:h$1l,json:{type:[S$J],write:!0}})],c$1$.prototype,"toColor",void 0),e$1_([d$1S({type:["algorithmic"]})],c$1$.prototype,"type",void 0),c$1$=m$1i=e$1_([i$2w("esri.rest.support.AlgorithmicColorRamp")],c$1$);const a$21=c$1$;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$1_;let m$1h=c$1_=class extends p$2g{constructor(o){super(o),this.colorRamps=null,this.type="multipart";}clone(){return new c$1_({colorRamps:l$2r(this.colorRamps)})}};e$1_([d$1S({type:[a$21],json:{write:!0}})],m$1h.prototype,"colorRamps",void 0),e$1_([d$1S({type:["multipart"]})],m$1h.prototype,"type",void 0),m$1h=c$1_=e$1_([i$2w("esri.rest.support.MultipartColorRamp")],m$1h);const a$20=m$1h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$1g={key:"type",base:p$2g,typeMap:{algorithmic:a$21,multipart:a$20}};function p$2f(o){return o&&o.type?"algorithmic"===o.type?a$21.fromJSON(o):"multipart"===o.type?a$20.fromJSON(o):null:null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$14;const h$V=new o$1K({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),y$X=new o$1K({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),m$1f=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],v$z=["high-to-low","above-and-below","above","below","90-10"],f$V=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let b$E=d$14=class extends a$2A{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null;}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e);}readColorRamp(e){if(e)return p$2f(e)}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(e){this._set("fields",e);}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(e){this._set("field1",e);}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(e){this._set("field2",e);}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(e){this._set("focus",e);}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e);}get statistics(){return "univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null}set statistics(e){this._set("statistics",e);}get standardDeviationInterval(){const e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e);}get type(){return this._get("type")}set type(e){let t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t);}get univariateSymbolStyle(){return "univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e);}get univariateTheme(){return "univariate-color-size"===this.type?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e);}clone(){return new d$14({classificationMethod:this.classificationMethod,colorRamp:l$2r(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:l$2r(this.field1),field2:l$2r(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((e=>e.clone())),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme})}};e$1_([d$1S({type:h$V.apiValues,value:null,json:{type:h$V.jsonValues,read:h$V.read,write:h$V.write,origins:{"web-document":{default:"manual",type:h$V.jsonValues,read:h$V.read,write:h$V.write}}}})],b$E.prototype,"classificationMethod",null),e$1_([d$1S({types:m$1g,json:{write:!0}})],b$E.prototype,"colorRamp",void 0),e$1_([o$1j("colorRamp")],b$E.prototype,"readColorRamp",null),e$1_([d$1S({type:[String],value:null,json:{write:!0}})],b$E.prototype,"fields",null),e$1_([d$1S({type:p$2i,value:null,json:{write:!0}})],b$E.prototype,"field1",null),e$1_([d$1S({type:p$2i,value:null,json:{write:!0}})],b$E.prototype,"field2",null),e$1_([d$1S({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],b$E.prototype,"focus",null),e$1_([d$1S({type:Number,value:null,json:{type:S$J,write:!0}})],b$E.prototype,"numClasses",null),e$1_([d$1S({type:m$1f,json:{type:m$1f,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],b$E.prototype,"lengthUnit",void 0),e$1_([d$1S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],b$E.prototype,"maxSliderValue",void 0),e$1_([d$1S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],b$E.prototype,"minSliderValue",void 0),e$1_([d$1S({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],b$E.prototype,"statistics",null),e$1_([d$1S({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],b$E.prototype,"standardDeviationInterval",null),e$1_([d$1S({type:y$X.apiValues,value:null,json:{type:y$X.jsonValues,read:y$X.read,write:y$X.write}})],b$E.prototype,"type",null),e$1_([d$1S({type:[h$W],json:{write:!0}})],b$E.prototype,"visualVariables",void 0),e$1_([d$1S({type:f$V,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],b$E.prototype,"univariateSymbolStyle",null),e$1_([d$1S({type:v$z,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],b$E.prototype,"univariateTheme",null),b$E=d$14=e$1_([i$2w("esri.renderers.support.AuthoringInfo")],b$E);const w$B=b$E;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$1S=new o$1K({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});let a$1$=class extends a$2A{constructor(r){super(r),this.authoringInfo=null,this.type=null;}async getRequiredFields(r){if(!this.collectRequiredFields)return [];const e=new Set;return await this.collectRequiredFields(e,r),Array.from(e).sort()}getSymbol(r,e){}async getSymbolAsync(r,e){}getSymbols(){return []}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};e$1_([d$1S({type:w$B,json:{write:!0}})],a$1$.prototype,"authoringInfo",void 0),e$1_([d$1S({type:n$1S.apiValues,readOnly:!0,json:{type:n$1S.jsonValues,read:!1,write:{writer:n$1S.write,ignoreOrigin:!0}}})],a$1$.prototype,"type",void 0),a$1$=e$1_([i$2w("esri.renderers.Renderer")],a$1$);const p$2e=a$1$;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$11;let p$2d=e$11=class extends a$2A{constructor(){super(...arguments),this.title=null;}clone(){return new e$11({title:this.title})}};e$1_([d$1S({type:String,json:{write:!0}})],p$2d.prototype,"title",void 0),p$2d=e$11=e$1_([i$2w("esri.renderers.support.LegendOptions")],p$2d);const c$1Z=p$2d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$Z;let p$2c=t$Z=class extends c$1Z{constructor(){super(...arguments),this.showLegend=null;}clone(){return new t$Z({title:this.title,showLegend:this.showLegend})}};e$1_([d$1S({type:Boolean,json:{write:!0}})],p$2c.prototype,"showLegend",void 0),p$2c=t$Z=e$1_([i$2w("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],p$2c);const i$1J=p$2c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$1_=s$2h.getLogger("esri.renderers.visualVariables.VisualVariable"),u$1g=new o$1K({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let c$1Y=class extends a$2A{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null;}castField(e){return null==e?e:"function"==typeof e?(a$1_.error(".field: field must be a string value"),null):u$2d(e)}get arcadeRequired(){return !!this.valueExpression}clone(){}getAttributeHash(){return `${this.type}-${this.field}-${this.valueExpression}`}};e$1_([d$1S()],c$1Y.prototype,"index",void 0),e$1_([d$1S({type:u$1g.apiValues,readOnly:!0,json:{read:u$1g.read,write:u$1g.write}})],c$1Y.prototype,"type",void 0),e$1_([d$1S({type:String,json:{write:!0}})],c$1Y.prototype,"field",void 0),e$1_([c$2Y("field")],c$1Y.prototype,"castField",null),e$1_([d$1S({type:String,json:{write:!0}})],c$1Y.prototype,"valueExpression",void 0),e$1_([d$1S({type:String,json:{write:!0}})],c$1Y.prototype,"valueExpressionTitle",void 0),e$1_([d$1S({readOnly:!0})],c$1Y.prototype,"arcadeRequired",null),e$1_([d$1S({type:i$1J,json:{write:!0}})],c$1Y.prototype,"legendOptions",void 0),c$1Y=e$1_([i$2w("esri.renderers.visualVariables.VisualVariable")],c$1Y);const d$13=c$1Y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1I;let c$1X=i$1I=class extends a$2A{constructor(r){super(r),this.color=null,this.label=null,this.value=null;}writeValue(r,o,e){o[e]=null==r?0:r;}clone(){return new i$1I({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};e$1_([d$1S({type:h$1l,json:{type:[S$J],write:!0}})],c$1X.prototype,"color",void 0),e$1_([d$1S({type:String,json:{write:!0}})],c$1X.prototype,"label",void 0),e$1_([d$1S({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],c$1X.prototype,"value",void 0),e$1_([r$1c("value")],c$1X.prototype,"writeValue",null),c$1X=i$1I=e$1_([i$2w("esri.renderers.visualVariables.support.ColorStop")],c$1X);const a$1Z=c$1X;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1H;let p$2b=i$1H=class extends d$13{constructor(t){super(t),this.type="color",this.normalizationField=null;}get cache(){return {ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter((t=>!!t))).sort(((t,s)=>t.value-s.value)),this._set("stops",t);}clone(){return new i$1H({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((t=>t.clone())),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return `${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((t=>t.value||0))}};e$1_([d$1S({readOnly:!0})],p$2b.prototype,"cache",null),e$1_([d$1S({type:["color"],json:{type:["colorInfo"]}})],p$2b.prototype,"type",void 0),e$1_([d$1S({type:String,json:{write:!0}})],p$2b.prototype,"normalizationField",void 0),e$1_([d$1S({type:[a$1Z],json:{write:!0}})],p$2b.prototype,"stops",null),p$2b=i$1H=e$1_([i$2w("esri.renderers.visualVariables.ColorVariable")],p$2b);const a$1Y=p$2b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$1t;let u$1f=l$1t=class extends a$2A{constructor(r){super(r),this.label=null,this.opacity=null,this.value=null;}readOpacity(r,t){return r$14(t.transparency)}writeOpacity(r,t,o){t[o]=n$2g(r);}clone(){return new l$1t({label:this.label,opacity:this.opacity,value:this.value})}};e$1_([d$1S({type:String,json:{write:!0}})],u$1f.prototype,"label",void 0),e$1_([d$1S({type:Number,json:{type:S$J,write:{target:"transparency"}}})],u$1f.prototype,"opacity",void 0),e$1_([o$1j("opacity",["transparency"])],u$1f.prototype,"readOpacity",null),e$1_([r$1c("opacity")],u$1f.prototype,"writeOpacity",null),e$1_([d$1S({type:Number,json:{write:!0}})],u$1f.prototype,"value",void 0),u$1f=l$1t=e$1_([i$2w("esri.renderers.visualVariables.support.OpacityStop")],u$1f);const y$W=u$1f;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1G;let p$2a=i$1G=class extends d$13{constructor(t){super(t),this.type="opacity",this.normalizationField=null;}get cache(){return {ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter((t=>!!t))).sort(((t,s)=>t.value-s.value)),this._set("stops",t);}clone(){return new i$1G({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((t=>t.clone())),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return `${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((t=>t.value||0))}};e$1_([d$1S({readOnly:!0})],p$2a.prototype,"cache",null),e$1_([d$1S({type:["opacity"],json:{type:["transparencyInfo"]}})],p$2a.prototype,"type",void 0),e$1_([d$1S({type:String,json:{write:!0}})],p$2a.prototype,"normalizationField",void 0),e$1_([d$1S({type:[y$W],json:{write:!0}})],p$2a.prototype,"stops",null),p$2a=i$1G=e$1_([i$2w("esri.renderers.visualVariables.OpacityVariable")],p$2a);const a$1X=p$2a;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$29;let a$1W=p$29=class extends d$13{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null;}get cache(){return {hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,s,o,r){if(r&&r.messages){const e=`visualVariables[${this.index}]`;r.messages.push(new s$29("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:e+".valueExpressionTitle",context:r}));}}clone(){return new p$29({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};e$1_([d$1S({readOnly:!0})],a$1W.prototype,"cache",null),e$1_([d$1S({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],a$1W.prototype,"axis",void 0),e$1_([d$1S({type:["rotation"],json:{type:["rotationInfo"]}})],a$1W.prototype,"type",void 0),e$1_([d$1S({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],a$1W.prototype,"rotationType",void 0),e$1_([d$1S({type:String,json:{write:!0}})],a$1W.prototype,"valueExpressionTitle",void 0),e$1_([r$1c("web-scene","valueExpressionTitle")],a$1W.prototype,"writeValueExpressionTitleWebScene",null),a$1W=p$29=e$1_([i$2w("esri.renderers.visualVariables.RotationVariable")],a$1W);const n$1R=a$1W;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$28;let i$1F=p$28=class extends a$2A{constructor(r){super(r),this.label=null,this.size=null,this.value=null;}clone(){return new p$28({label:this.label,size:this.size,value:this.value})}};e$1_([d$1S({type:String,json:{write:!0}})],i$1F.prototype,"label",void 0),e$1_([d$1S({type:Number,cast:o$18,json:{write:!0}})],i$1F.prototype,"size",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],i$1F.prototype,"value",void 0),i$1F=p$28=e$1_([i$2w("esri.renderers.visualVariables.support.SizeStop")],i$1F);const l$1s=i$1F;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$Y;let i$1E=t$Y=class extends i$1J{constructor(){super(...arguments),this.customValues=null;}clone(){return new t$Y({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};e$1_([d$1S({type:[Number],json:{write:!0}})],i$1E.prototype,"customValues",void 0),i$1E=t$Y=e$1_([i$2w("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],i$1E);const a$1V=i$1E;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1Q(n){return n&&"esri.renderers.visualVariables.SizeVariable"===n.declaredClass}function e$10(n){return null!=n&&!isNaN(n)&&isFinite(n)}function i$1D(n){return n.valueExpression?"expression":n.field&&"string"==typeof n.field?"field":"unknown"}function l$1r(n,e){const l=e||i$1D(n),a=n.valueUnit||"unknown";return "unknown"===l?"constant":n.stops?"stops":null!=n.minSize&&null!=n.maxSize&&null!=n.minDataValue&&null!=n.maxDataValue?"clamped-linear":"unknown"===a?null!=n.minSize&&null!=n.minDataValue?n.minSize&&n.minDataValue?"proportional":"additive":"identity":"real-world-size"}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$$=class extends a$2A{constructor(r){super(r),this.type=null;}};e$1_([d$1S({type:["attachments","custom","fields","media","text"],readOnly:!0,json:{read:!1,write:!0}})],e$$.prototype,"type",void 0),e$$=e$1_([i$2w("esri.popup.content.Content")],e$$);const p$27=e$$;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var o$X;let i$1C=o$X=class extends p$27{constructor(t){super(t),this.description=null,this.displayType=null,this.title=null,this.type="attachments";}clone(){return new o$X({description:this.description,displayType:this.displayType,title:this.title})}};e$1_([d$1S({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],i$1C.prototype,"description",void 0),e$1_([d$1S({type:["auto","preview","list"],json:{write:!0}})],i$1C.prototype,"displayType",void 0),e$1_([d$1S({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],i$1C.prototype,"title",void 0),e$1_([d$1S({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],i$1C.prototype,"type",void 0),i$1C=o$X=e$1_([i$2w("esri.popup.content.AttachmentsContent")],i$1C);const p$26=i$1C;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$25;let c$1W=p$25=class extends p$27{constructor(o){super(o),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom";}clone(){return new p$25({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?l$2r(this.outFields):null})}};e$1_([d$1S()],c$1W.prototype,"creator",void 0),e$1_([d$1S()],c$1W.prototype,"destroyer",void 0),e$1_([d$1S()],c$1W.prototype,"outFields",void 0),e$1_([d$1S({type:["custom"],readOnly:!0})],c$1W.prototype,"type",void 0),c$1W=p$25=e$1_([i$2w("esri.popup.content.CustomContent")],c$1W);const i$1B=c$1W;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$1U=s$25()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});a$1U.toJSON.bind(a$1U);a$1U.fromJSON.bind(a$1U);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$1P;let l$1q=n$1P=class extends a$2A{constructor(t){super(t),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null;}clone(){return new n$1P({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(t){return this.dateFormat?L$x(t,{...S$I(this.dateFormat),...this.dateTimeFormatOptions}):m$23(t,u$24(this))}};e$1_([r$1d(a$1U)],l$1q.prototype,"dateFormat",void 0),e$1_([d$1S({type:Object,json:{read:!1}})],l$1q.prototype,"dateTimeFormatOptions",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],l$1q.prototype,"digitSeparator",void 0),e$1_([d$1S({type:S$J,json:{write:!0}})],l$1q.prototype,"places",void 0),l$1q=n$1P=e$1_([i$2w("esri.popup.support.FieldInfoFormat")],l$1q);const u$1e=l$1q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$1T;let n$1O=a$1T=class extends a$2A{constructor(t){super(t),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0;}clone(){return new a$1T({fieldName:this.fieldName,format:this.format?l$2r(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};e$1_([d$1S({type:String,json:{write:!0}})],n$1O.prototype,"fieldName",void 0),e$1_([d$1S({type:u$1e,json:{write:!0}})],n$1O.prototype,"format",void 0),e$1_([d$1S({type:Boolean,json:{write:!0,default:!1}})],n$1O.prototype,"isEditable",void 0),e$1_([d$1S({type:String,json:{write:!0}})],n$1O.prototype,"label",void 0),e$1_([r$1d(new o$1K({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],n$1O.prototype,"stringFieldOption",void 0),e$1_([d$1S({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],n$1O.prototype,"statisticType",void 0),e$1_([d$1S({type:String,json:{write:!0}})],n$1O.prototype,"tooltip",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],n$1O.prototype,"visible",void 0),n$1O=a$1T=e$1_([i$2w("esri.popup.FieldInfo")],n$1O);const c$1V=n$1O;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$1N;let l$1p=n$1N=class extends p$27{constructor(e){super(e),this.description=null,this.fieldInfos=null,this.title=null,this.type="fields";}writeFieldInfos(e,o){o.fieldInfos=e&&e.map((e=>e.toJSON()));}clone(){return new n$1N({description:this.description,fieldInfos:Array.isArray(this.fieldInfos)?l$2r(this.fieldInfos):null,title:this.title})}};e$1_([d$1S({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],l$1p.prototype,"description",void 0),e$1_([d$1S({type:[c$1V]})],l$1p.prototype,"fieldInfos",void 0),e$1_([r$1c("fieldInfos")],l$1p.prototype,"writeFieldInfos",null),e$1_([d$1S({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],l$1p.prototype,"title",void 0),e$1_([d$1S({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],l$1p.prototype,"type",void 0),l$1p=n$1N=e$1_([i$2w("esri.popup.content.FieldsContent")],l$1p);const c$1U=l$1p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$1v=class extends a$2A{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null;}};e$1_([d$1S({type:String,json:{write:!0}})],s$1v.prototype,"altText",void 0),e$1_([d$1S({type:String,json:{write:!0}})],s$1v.prototype,"caption",void 0),e$1_([d$1S({type:String,json:{write:!0}})],s$1v.prototype,"title",void 0),e$1_([d$1S({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],s$1v.prototype,"type",void 0),s$1v=e$1_([i$2w("esri.popup.content.mixins.MediaInfo")],s$1v);const p$24=s$1v;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$_;let p$23=e$_=class extends p$33{constructor(o){super(o),this.tooltip=null,this.value=null;}clone(){return new e$_({tooltip:this.tooltip,value:this.value})}};e$1_([d$1S()],p$23.prototype,"tooltip",void 0),e$1_([d$1S()],p$23.prototype,"value",void 0),p$23=e$_=e$1_([i$2w("esri.popup.content.support.ChartMediaInfoValueSeries")],p$23);const c$1T=p$23;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$22;let l$1o=p$22=class extends a$2A{constructor(o){super(o),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null;}clone(){return new p$22({fields:l$2r(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};e$1_([d$1S({type:[String],json:{write:!0}})],l$1o.prototype,"fields",void 0),e$1_([d$1S({type:String,json:{write:!0}})],l$1o.prototype,"normalizeField",void 0),e$1_([d$1S({type:[c$1T],json:{read:!1}})],l$1o.prototype,"series",void 0),e$1_([d$1S({type:String,json:{write:!0}})],l$1o.prototype,"tooltipField",void 0),l$1o=p$22=e$1_([i$2w("esri.popup.content.support.ChartMediaInfoValue")],l$1o);const n$1M=l$1o;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$21=class extends p$24{constructor(r){super(r),this.type=null,this.value=null;}};e$1_([d$1S({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],p$21.prototype,"type",void 0),e$1_([d$1S({type:n$1M,json:{write:!0}})],p$21.prototype,"value",void 0),p$21=e$1_([i$2w("esri.popup.content.mixins.ChartMediaInfo")],p$21);const a$1S=p$21;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$1S=s$25()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$1R;let p$20=a$1R=class extends a$1S{constructor(t){super(t),this.type="bar-chart";}clone(){return new a$1R({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e$1_([d$1S({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:c$1S.write}})],p$20.prototype,"type",void 0),p$20=a$1R=e$1_([i$2w("esri.popup.content.BarChartMediaInfo")],p$20);const i$1A=p$20;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$1Q;let p$1$=a$1Q=class extends a$1S{constructor(t){super(t),this.type="column-chart";}clone(){return new a$1Q({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e$1_([d$1S({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:c$1S.write}})],p$1$.prototype,"type",void 0),p$1$=a$1Q=e$1_([i$2w("esri.popup.content.ColumnChartMediaInfo")],p$1$);const c$1R=p$1$;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$Z;let p$1_=e$Z=class extends a$2A{constructor(r){super(r),this.linkURL=null,this.sourceURL=null;}clone(){return new e$Z({linkURL:this.linkURL,sourceURL:this.sourceURL})}};e$1_([d$1S({type:String,json:{write:!0}})],p$1_.prototype,"linkURL",void 0),e$1_([d$1S({type:String,json:{write:!0}})],p$1_.prototype,"sourceURL",void 0),p$1_=e$Z=e$1_([i$2w("esri.popup.content.support.ImageMediaInfoValue")],p$1_);const c$1Q=p$1_;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$1P;let i$1z=a$1P=class extends p$24{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null;}clone(){return new a$1P({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};e$1_([d$1S({type:Number,json:{write:!0}})],i$1z.prototype,"refreshInterval",void 0),e$1_([d$1S({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],i$1z.prototype,"type",void 0),e$1_([d$1S({type:c$1Q,json:{write:!0}})],i$1z.prototype,"value",void 0),i$1z=a$1P=e$1_([i$2w("esri.popup.content.ImageMediaInfo")],i$1z);const p$1Z=i$1z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1y;let a$1O=i$1y=class extends a$1S{constructor(t){super(t),this.type="line-chart";}clone(){return new i$1y({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e$1_([d$1S({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:c$1S.write}})],a$1O.prototype,"type",void 0),a$1O=i$1y=e$1_([i$2w("esri.popup.content.LineChartMediaInfo")],a$1O);const p$1Y=a$1O;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$1X;let i$1x=p$1X=class extends a$1S{constructor(t){super(t),this.type="pie-chart";}clone(){return new p$1X({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e$1_([d$1S({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:c$1S.write}})],i$1x.prototype,"type",void 0),i$1x=p$1X=e$1_([i$2w("esri.popup.content.PieChartMediaInfo")],i$1x);const a$1N=i$1x;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$1e={base:p$24,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":i$1A,"column-chart":c$1R,"line-chart":p$1Y,"pie-chart":a$1N,image:p$1Z}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$1n;let I$l=l$1n=class extends p$27{constructor(o){super(o),this.activeMediaInfoIndex=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media";}readMediaInfos(o){return o&&o.map((o=>"image"===o.type?p$1Z.fromJSON(o):"barchart"===o.type?i$1A.fromJSON(o):"columnchart"===o.type?c$1R.fromJSON(o):"linechart"===o.type?p$1Y.fromJSON(o):"piechart"===o.type?a$1N.fromJSON(o):void 0)).filter(Boolean)}writeMediaInfos(o,e){e.mediaInfos=o&&o.map((o=>o.toJSON()));}clone(){return new l$1n({activeMediaInfoIndex:this.activeMediaInfoIndex,description:this.description,mediaInfos:this.mediaInfos?l$2r(this.mediaInfos):null,title:this.title})}};e$1_([d$1S()],I$l.prototype,"activeMediaInfoIndex",void 0),e$1_([d$1S({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],I$l.prototype,"description",void 0),e$1_([d$1S({types:[m$1e]})],I$l.prototype,"mediaInfos",void 0),e$1_([o$1j("mediaInfos")],I$l.prototype,"readMediaInfos",null),e$1_([r$1c("mediaInfos")],I$l.prototype,"writeMediaInfos",null),e$1_([d$1S({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],I$l.prototype,"title",void 0),e$1_([d$1S({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],I$l.prototype,"type",void 0),I$l=l$1n=e$1_([i$2w("esri.popup.content.MediaContent")],I$l);const u$1d=I$l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$1u;let p$1W=s$1u=class extends p$27{constructor(t){super(t),this.text=null,this.type="text";}clone(){return new s$1u({text:this.text})}};e$1_([d$1S({type:String,json:{write:!0}})],p$1W.prototype,"text",void 0),e$1_([d$1S({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],p$1W.prototype,"type",void 0),p$1W=s$1u=e$1_([i$2w("esri.popup.content.TextContent")],p$1W);const c$1P=p$1W;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$Y={base:null,key:"type",typeMap:{attachment:p$26,media:u$1d,text:c$1P,field:c$1U}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$1t;let p$1V=s$1t=class extends a$2A{constructor(r){super(r),this.name=null,this.title=null,this.expression=null,this.returnType=null;}clone(){return new s$1t({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};e$1_([d$1S({type:String,json:{write:!0}})],p$1V.prototype,"name",void 0),e$1_([d$1S({type:String,json:{write:!0}})],p$1V.prototype,"title",void 0),e$1_([d$1S({type:String,json:{write:!0}})],p$1V.prototype,"expression",void 0),e$1_([d$1S({type:["string","number"],json:{write:!0}})],p$1V.prototype,"returnType",void 0),p$1V=s$1t=e$1_([i$2w("esri.popup.ExpressionInfo")],p$1V);const i$1w=p$1V;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$Y;let p$1U=e$Y=class extends a$2A{constructor(o){super(o),this.returnTopmostRaster=null,this.showNoDataRecords=null;}clone(){return new e$Y({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};e$1_([d$1S({type:Boolean,json:{write:!0}})],p$1U.prototype,"returnTopmostRaster",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],p$1U.prototype,"showNoDataRecords",void 0),p$1U=e$Y=e$1_([i$2w("esri.popup.LayerOptions")],p$1U);const a$1M=p$1U;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$X;let p$1T=t$X=class extends a$2A{constructor(r){super(r),this.field=null,this.order=null;}clone(){return new t$X({field:this.field,order:this.order})}};e$1_([d$1S({type:String,json:{write:!0}})],p$1T.prototype,"field",void 0),e$1_([d$1S({type:["asc","desc"],json:{write:!0}})],p$1T.prototype,"order",void 0),p$1T=t$X=e$1_([i$2w("esri.popup.support.RelatedRecordsInfoFieldOrder")],p$1T);const c$1O=p$1T;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$12;let c$1N=d$12=class extends a$2A{constructor(o){super(o),this.showRelatedRecords=null,this.orderByFields=null;}clone(){return new d$12({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?l$2r(this.orderByFields):null})}};e$1_([d$1S({type:Boolean,json:{write:!0}})],c$1N.prototype,"showRelatedRecords",void 0),e$1_([d$1S({type:[c$1O],json:{write:!0}})],c$1N.prototype,"orderByFields",void 0),c$1N=d$12=e$1_([i$2w("esri.popup.RelatedRecordsInfo")],c$1N);const l$1m=c$1N;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$W=0;const r$X=r=>{let o=class extends r{constructor(...e){super(...e),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+t$W++});}};return o=e$1_([i$2w("esri.core.Identifiable")],o),o};let o$W=class extends(r$X(class{})){};o$W=e$1_([i$2w("esri.core.Identifiable")],o$W);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var r$W;let p$1S=r$W=class extends(r$X(p$33)){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0;}clone(){return new r$W({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};e$1_([d$1S()],p$1S.prototype,"active",void 0),e$1_([d$1S()],p$1S.prototype,"className",void 0),e$1_([d$1S()],p$1S.prototype,"disabled",void 0),e$1_([d$1S()],p$1S.prototype,"id",void 0),e$1_([d$1S()],p$1S.prototype,"indicator",void 0),e$1_([d$1S()],p$1S.prototype,"title",void 0),e$1_([d$1S()],p$1S.prototype,"type",void 0),e$1_([d$1S()],p$1S.prototype,"visible",void 0),p$1S=r$W=e$1_([i$2w("esri.support.actions.ActionBase")],p$1S);const c$1M=p$1S;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var r$V;let e$X=r$V=class extends c$1M{constructor(s){super(s),this.image=null,this.type="button";}clone(){return new r$V({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};e$1_([d$1S()],e$X.prototype,"image",void 0),e$X=r$V=e$1_([i$2w("esri.support.Action.ActionButton")],e$X);const a$1L=e$X;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var o$V;let r$U=o$V=class extends c$1M{constructor(s){super(s),this.image=null,this.type="toggle",this.value=!1;}clone(){return new o$V({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};e$1_([d$1S()],r$U.prototype,"image",void 0),e$1_([d$1S()],r$U.prototype,"value",void 0),r$U=o$V=e$1_([i$2w("esri.support.Action.ActionToggle")],r$U);const a$1K=r$U;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var O$h;const S$u=S$F.ofType({key:"type",defaultKeyValue:"button",base:c$1M,typeMap:{button:a$1L,toggle:a$1K}}),T$f={base:p$27,key:"type",typeMap:{media:u$1d,custom:i$1B,text:c$1P,attachments:p$26,fields:c$1U}},b$D="esri.PopupTemplate",R$h=s$2h.getLogger(b$D),L$m=["attachments","fields","media","text"];let J$7=O$h=class extends a$2A{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null;}castContent(t){return Array.isArray(t)?t.map((t=>N$t(T$f,t))):"string"==typeof t||"function"==typeof t||t instanceof HTMLElement||O$r(t)?t:(R$h.error("content error","unsupported content value",{value:t}),null)}readContent(t,e){const{popupElements:o}=e;return Array.isArray(o)&&o.length>0?this._readPopupInfoElements(e):this._readPopupInfo(e)}writeContent(t,e,o,s){"string"!=typeof t?Array.isArray(t)&&(e.popupElements=t.filter((t=>-1!==L$m.indexOf(t.type))).map((t=>t&&t.toJSON(s))),e.popupElements.forEach((t=>{"attachments"===t.type?this._writeAttachmentContent(e):"media"===t.type?this._writeMediaContent(t,e):"text"===t.type&&this._writeTextContent(t,e);}))):e.description=t;}writeFieldInfos(t,e,o,s){const{content:i}=this,r=Array.isArray(i)?i:null;if(t){const o=r?r.filter((t=>"fields"===t.type)):[],i=o.length&&o.every((t=>{var e;return null==(e=t.fieldInfos)?void 0:e.length}));e.fieldInfos=t.filter(Boolean).map((t=>{const e=t.toJSON(s);return i&&(e.visible=!1),e}));}if(r)for(const n of r)"fields"===n.type&&this._writeFieldsContent(n,e);}writeLayerOptions(t,e,o,s){e[o]=!t||null===t.showNoDataRecords&&null===t.returnTopmostRaster?null:t.toJSON(s);}writeTitle(t,e){e.title=t||"";}clone(){const{actions:t}=this,e=t?l$2r(t.toArray()):[];return new O$h({actions:e,content:Array.isArray(this.content)?l$2r(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?l$2r(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?l$2r(this.fieldInfos):null,layerOptions:this.layerOptions?l$2r(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?l$2r(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?l$2r(this.relatedRecordsInfo):null})}async collectRequiredFields(t,e){await this._collectExpressionInfoFields(t,e,this.expressionInfos),g$S(t,e,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)]);}async getRequiredFields(t){const e=new Set;return await this.collectRequiredFields(e,t),[...e].sort()}_writeFieldsContent(t,e){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const o=l$2r(t.fieldInfos);Array.isArray(e.fieldInfos)?o.forEach((t=>{const o=e.fieldInfos.find((e=>e.fieldName.toLowerCase()===t.fieldName.toLowerCase()));o?o.visible=!0:e.fieldInfos.push(t);})):e.fieldInfos=o;}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0);}_writeTextContent(t,e){!e.description&&t.text&&(e.description=t.text);}_writeMediaContent(t,e){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const o=l$2r(t.mediaInfos);Array.isArray(e.mediaInfos)?e.mediaInfos=[...e.mediaInfos,...o]:e.mediaInfos=o;}_readPopupInfoElements({description:t,mediaInfos:e,popupElements:o}){const s={description:!1,mediaInfos:!1};return o.map((o=>"media"===o.type?(o.mediaInfos||!e||s.mediaInfos||(o.mediaInfos=e,s.mediaInfos=!0),u$1d.fromJSON(o)):"text"===o.type?(o.text||!t||s.description||(o.text=t,s.description=!0),c$1P.fromJSON(o)):"attachments"===o.type?p$26.fromJSON(o):"fields"===o.type?c$1U.fromJSON(o):void 0)).filter(Boolean)}_readPopupInfo({description:t,mediaInfos:e,showAttachments:o}){const s=[];return t?s.push(new c$1P({text:t})):s.push(new c$1U),Array.isArray(e)&&e.length&&s.push(u$1d.fromJSON({mediaInfos:e})),o&&s.push(p$26.fromJSON({displayType:"auto"})),s.length?s:t}_getContentElementFields(t){if(!t||"attachments"===t.type)return [];if("custom"===t.type)return t.outFields||[];if("fields"===t.type)return this._getFieldInfoFields(t.fieldInfos||this.fieldInfos);if("media"===t.type){return (t.mediaInfos||[]).reduce(((t,e)=>[...t,...this._getMediaInfoFields(e)]),[])}return "text"===t.type?this._extractFieldNames(t.text):void 0}_getMediaInfoFields(t){const{caption:e,title:o,value:s}=t,i=s||{},{fields:r=[],normalizeField:n,tooltipField:p,sourceURL:l,linkURL:a}=i,d=[...this._extractFieldNames(o),...this._extractFieldNames(e),...this._extractFieldNames(l),...this._extractFieldNames(a),...r];return n&&d.push(n),p&&d.push(p),d}_getContentFields(t){return "string"==typeof t?this._extractFieldNames(t):Array.isArray(t)?t.reduce(((t,e)=>[...t,...this._getContentElementFields(e)]),[]):[]}async _collectExpressionInfoFields(t,e,o){o&&await Promise.all(o.map((o=>b$N(t,e,o.expression))));}_getFieldInfoFields(t){return t?t.filter((t=>void 0===t.visible||!!t.visible)).map((t=>t.fieldName)).filter((t=>-1===t.indexOf("relationships/")&&-1===t.indexOf("expression/"))):[]}_getActionsFields(t){return t?t.toArray().reduce(((t,e)=>[...t,...this._getActionFields(e)]),[]):[]}_getActionFields(t){const{className:e,title:o,type:s}=t,i="button"===s||"toggle"===s?t.image:"";return [...this._extractFieldNames(o),...this._extractFieldNames(e),...this._extractFieldNames(i)]}_getTitleFields(t){return "string"==typeof t?this._extractFieldNames(t):[]}_extractFieldNames(t){if(!t||"string"!=typeof t)return [];const e=/{[^}]*}/g,o=t.match(e);if(!o)return [];const s=/\{(\w+):.+\}/,i=o.filter((t=>!(0===t.indexOf("{relationships/")||0===t.indexOf("{expression/")))).map((t=>t.replace(s,"{$1}")));return i?i.map((t=>t.slice(1,-1))):[]}};e$1_([d$1S({type:S$u})],J$7.prototype,"actions",void 0),e$1_([d$1S()],J$7.prototype,"content",void 0),e$1_([c$2Y("content")],J$7.prototype,"castContent",null),e$1_([o$1j("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],J$7.prototype,"readContent",null),e$1_([r$1c("content",{popupElements:{type:S$F.ofType(r$Y)},showAttachments:{type:Boolean},mediaInfos:{type:S$F.ofType(m$1e)},description:{type:String}})],J$7.prototype,"writeContent",null),e$1_([d$1S({type:[i$1w],json:{write:!0}})],J$7.prototype,"expressionInfos",void 0),e$1_([d$1S({type:[c$1V]})],J$7.prototype,"fieldInfos",void 0),e$1_([r$1c("fieldInfos")],J$7.prototype,"writeFieldInfos",null),e$1_([d$1S({type:a$1M})],J$7.prototype,"layerOptions",void 0),e$1_([r$1c("layerOptions")],J$7.prototype,"writeLayerOptions",null),e$1_([d$1S({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],J$7.prototype,"lastEditInfoEnabled",void 0),e$1_([d$1S()],J$7.prototype,"outFields",void 0),e$1_([d$1S()],J$7.prototype,"overwriteActions",void 0),e$1_([d$1S()],J$7.prototype,"returnGeometry",void 0),e$1_([d$1S({json:{type:String}})],J$7.prototype,"title",void 0),e$1_([r$1c("title")],J$7.prototype,"writeTitle",null),e$1_([d$1S({type:l$1m,json:{write:!0}})],J$7.prototype,"relatedRecordsInfo",void 0),J$7=O$h=e$1_([i$2w(b$D)],J$7);const M$k=J$7;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$1d;let n$1L=m$1d=class extends a$2A{constructor(...t){super(...t),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:e$1E(),configurable:!0});}normalizeCtorArgs(t,e,r,s){return t&&!t.declaredClass?t:{geometry:t,symbol:e,attributes:r,popupTemplate:s}}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t));}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),this._notifyLayer("geometry",e,t));}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t));}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t));}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;for(const e of [this.sourceLayer,this.layer])if(e){if("popupTemplate"in e&&e.popupTemplate)return e.popupTemplate;if(t&&"defaultPopupTemplate"in e&&r$1G(e.defaultPopupTemplate))return e.defaultPopupTemplate}return null}getAttribute(t){return this.attributes&&this.attributes[t]}setAttribute(t,e){if(this.attributes){const r=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",r,e,t);}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t);}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return {geometry:r$1G(this.geometry)?this.geometry.toJSON():null,symbol:r$1G(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}clone(){return new m$1d(this.cloneProperties())}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry);}cloneProperties(){return {attributes:l$2r(this.attributes),geometry:l$2r(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:l$2r(this.symbol),visible:this.visible}}_notifyLayer(t,e,r,s){if(!this.layer||!("graphicChanged"in this.layer))return;const o={graphic:this,property:t,oldValue:e,newValue:r};"attributes"===t&&(o.attributeName=s),this.layer.graphicChanged(o);}};e$1_([d$1S({value:null})],n$1L.prototype,"attributes",null),e$1_([d$1S({value:null,types:i$20,json:{read:d$1t}})],n$1L.prototype,"geometry",null),e$1_([d$1S({type:Boolean})],n$1L.prototype,"isAggregate",void 0),e$1_([d$1S()],n$1L.prototype,"layer",void 0),e$1_([d$1S({type:M$k})],n$1L.prototype,"popupTemplate",void 0),e$1_([d$1S()],n$1L.prototype,"sourceLayer",void 0),e$1_([d$1S({value:null,types:j$t})],n$1L.prototype,"symbol",null),e$1_([d$1S({type:Boolean,value:!0})],n$1L.prototype,"visible",null),n$1L=m$1d=e$1_([i$2w("esri.Graphic")],n$1L),function(t){t.generateUID=e$1E;}(n$1L||(n$1L={}));const h$U=n$1L;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1K(n){}function o$U(n){return ()=>n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$1L=s$2h.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),u$1c=new h$U,f$U=Math.PI,p$1R=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function d$11(a,r,i){const t="visualVariables"in a&&a.visualVariables?a.visualVariables.filter((e=>"color"===e.type))[0]:a;if(!t)return;if("esri.renderers.visualVariables.ColorVariable"!==t.declaredClass)return void c$1L.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const s="number"==typeof r,o=s?null:r,l=o&&o.attributes;let u=s?r:null;const f=t.field,{ipData:p,hasExpression:d}=t.cache;let v=t.cache.compiledFunc;if(!f&&!d){const e=t.stops;return e&&e[0]&&e[0].color}if("number"!=typeof u)if(d){if(!r$1G(i)||!r$1G(i.arcade))return void c$1L.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},a=i.arcade.arcadeUtils,r=a.getViewInfo(e),s=a.createExecContext(o,r);if(!v){const e=a.createSyntaxTree(t.valueExpression);v=a.createFunction(e),t.cache.compiledFunc=v;}u=a.executeFunction(v,s);}else l&&(u=l[f]);const b=t.normalizationField,h=l?parseFloat(l[b]):void 0;if(null!=u&&(!b||s||!isNaN(h)&&0!==h)){isNaN(h)||s||(u/=h);const a=C$l(u,p);if(a){const r=a[0],s=a[1],o=r===s?t.stops[r].color:h$1l.blendColors(t.stops[r].color,t.stops[s].color,a[2],r$1G(i)?i.color:void 0);return new h$1l(o)}}}function v$y(e,a,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"opacity"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.OpacityVariable"!==i.declaredClass)return void c$1L.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n="number"==typeof a,s=n?null:a,o=s&&s.attributes;let l=n?a:null;const u=i.field,{ipData:f,hasExpression:p}=i.cache;let d=i.cache.compiledFunc;if(!u&&!p){const e=i.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof l)if(p){if(t$1O(r)||t$1O(r.arcade))return void c$1L.error("Use of arcade expressions requires an arcade context");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},a=r.arcade.arcadeUtils,n=a.getViewInfo(e),o=a.createExecContext(s,n);if(!d){const e=a.createSyntaxTree(i.valueExpression);d=a.createFunction(e),i.cache.compiledFunc=d;}l=a.executeFunction(d,o);}else o&&(l=o[u]);const v=i.normalizationField,b=o?parseFloat(o[v]):void 0;if(null!=l&&(!v||n||!isNaN(b)&&0!==b)){isNaN(b)||n||(l/=b);const e=C$l(l,f);if(e){const a=e[0],r=e[1];if(a===r)return i.stops[a].opacity;{const n=i.stops[a].opacity;return n+(i.stops[r].opacity-n)*e[2]}}}}function b$C(e,a,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"rotation"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.RotationVariable"!==i.declaredClass)return void c$1L.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=i.axis||"heading",s="heading"===n&&"arithmetic"===i.rotationType?90:0,o="heading"===n&&"arithmetic"===i.rotationType?-1:1,l="number"==typeof a?null:a,u=l&&l.attributes,f=i.field,{hasExpression:p}=i.cache;let d=i.cache.compiledFunc,v=0;if(!f&&!p)return v;if(p){if(t$1O(r)||t$1O(r.arcade))return void c$1L.error("Use of arcade expressions requires an arcade context");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},a=r.arcade.arcadeUtils,n=a.getViewInfo(e),s=a.createExecContext(l,n);if(!d){const e=a.createSyntaxTree(i.valueExpression);d=a.createFunction(e),i.cache.compiledFunc=d;}v=a.executeFunction(d,s);}else u&&(v=u[f]||0);return v="number"!=typeof v||isNaN(v)?null:s+o*v,v}function h$T(e,a,r){const i="number"==typeof a,s=i?null:a,o=s&&s.attributes;let u=i?a:null;const{isScaleDriven:f}=e.cache;let p=e.cache.compiledFunc;if(f){const a=r$1G(r)?r.scale:void 0,i=r$1G(r)?r.view:void 0;u=null==a||"3d"===i?m$1c(e):a;}else if(!i)switch(e.inputValueType){case"expression":{if(t$1O(r)||t$1O(r.arcade))return void c$1L.error("Use of arcade expressions requires an arcade context");const a={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},i=r.arcade.arcadeUtils,n=i.getViewInfo(a),o=i.createExecContext(s,n);if(!p){const a=i.createSyntaxTree(e.valueExpression);p=i.createFunction(a),e.cache.compiledFunc=p;}u=i.executeFunction(p,o);break}case"field":o&&(u=o[e.field]);break;case"unknown":u=null;}if(!e$10(u))return null;if(i||!e.normalizationField)return u;const d=o?parseFloat(o[e.normalizationField]):null;return e$10(d)&&0!==d?u/d:null}function m$1c(e){let a=null,r=null;const i=e.stops;return i?(a=i[0].value,r=i[i.length-1].value):(a=e.minDataValue||0,r=e.maxDataValue||0),(a+r)/2}function V$9(e,a,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"size"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.SizeVariable"!==i.declaredClass)return void c$1L.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const n=M$j(h$T(i,a,r),i,a,r,i.cache.ipData);return null==n||isNaN(n)?0:n}function x$m(e,a,r){return null==e?null:n$1Q(e)?V$9(e,a,r):e$10(e)?e:null}function y$V(e,a,r){return e$10(r)&&e>r?r:e$10(a)&&e<a?a:e}function w$A(e,a,r,i){return e+(x$m(a.minSize,r,i)||a.minDataValue)}function g$J(e,a,r){const i=e.stops;let n=i&&i.length&&i[0].size;return null==n&&(n=e.minSize),x$m(n,a,r)}function z$e(e,a,r,i){const t=(e-a.minDataValue)/(a.maxDataValue-a.minDataValue),s=x$m(a.minSize,r,i),o=x$m(a.maxSize,r,i),l=r$1G(i)?i.shape:void 0;if(e<=a.minDataValue)return s;if(e>=a.maxDataValue)return o;if("area"===a.scaleBy&&l){const e="circle"===l,a=e?f$U*(s/2)**2:s*s,r=a+t*((e?f$U*(o/2)**2:o*o)-a);return e?2*Math.sqrt(r/f$U):Math.sqrt(r)}return s+t*(o-s)}function F$c(e,a,r,i){const t=r$1G(i)?i.shape:void 0,s=e/a.minDataValue,o=x$m(a.minSize,r,i),l=x$m(a.maxSize,r,i);let c=null;return c="circle"===t?2*Math.sqrt(s*(o/2)**2):"square"===t||"diamond"===t||"image"===t?Math.sqrt(s*o**2):s*o,y$V(c,o,l)}function S$t(e,a,r,i,n){const[t,s,o]=C$l(e,n);if(t===s)return x$m(a.stops[t].size,r,i);{const e=x$m(a.stops[t].size,r,i);return e+(x$m(a.stops[s].size,r,i)-e)*o}}function E$i(e,a,r,i){const t=(r$1G(i)&&i.resolution?i.resolution:1)*m$1n[a.valueUnit],o=x$m(a.minSize,r,i),l=x$m(a.maxSize,r,i),{valueRepresentation:c}=a;let u=null;return u="area"===c?2*Math.sqrt(e/f$U)/t:"radius"===c||"distance"===c?2*e/t:e/t,y$V(u,o,l)}function D$g(e){return e}function M$j(e,a,r,i,n){switch(a.transformationType){case"additive":return w$A(e,a,r,i);case"constant":return g$J(a,r,i);case"clamped-linear":return z$e(e,a,r,i);case"proportional":return F$c(e,a,r,i);case"stops":return S$t(e,a,r,i,n);case"real-world-size":return E$i(e,a,r,i);case"identity":return D$g(e);case"unknown":return null}}function U$g(e,a,r){const{isScaleDriven:i}=e.cache;if(!(i&&"3d"===r||a))return null;const n={scale:a,view:r};let t=x$m(e.minSize,u$1c,n),s=x$m(e.maxSize,u$1c,n);if(null!=t||null!=s){if(t>s){const e=s;s=t,t=e;}return {minSize:t,maxSize:s}}}function k$j(e,a,r){if(!e.visualVariables)return;const i=[],n=[],t=[],s=[],o=[];for(const l of e.visualVariables)switch(l.type){case"color":n.push(l);break;case"opacity":t.push(l);break;case"rotation":o.push(l);break;case"size":s.push(l);}return n.forEach((e=>{const n=d$11(e,a,r);i.push({variable:e,value:n});})),t.forEach((e=>{const n=v$y(e,a,r);i.push({variable:e,value:n});})),o.forEach((e=>{const n=b$C(e,a,r);i.push({variable:e,value:n});})),s.forEach((e=>{const n=V$9(e,a,r);i.push({variable:e,value:n});})),i.filter((e=>null!=e.value))}function C$l(e,a){if(!a)return;let r=0,i=a.length-1;return a.some(((a,n)=>e<a?(i=n,!0):(r=n,!1))),[r,i,(e-a[r])/(a[i]-a[r])]}function N$h(e,a,i){const n=["proportional","proportional","proportional"];for(const t of e){const e=t.useSymbolValue?"symbol-value":V$9(t,a,i);switch(t.axis){case"width":n[0]=e;break;case"depth":n[1]=e;break;case"height":n[2]=e;break;case"width-and-depth":n[0]=e,n[1]=e;break;case"all":case void 0:case null:n[0]=e,n[1]=e,n[2]=e;break;}}return n}

const visualVariableUtils = /*#__PURE__*/Object.freeze({
  __proto__: null,
  getAllSizes: N$h,
  getColor: d$11,
  getOpacity: v$y,
  getRotationAngle: b$C,
  getSize: V$9,
  getSizeForValue: M$j,
  getSizeFromNumberOrVariable: x$m,
  getSizeRangeAtScale: U$g,
  getVisualVariableValues: k$j,
  viewScaleRE: p$1R
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var S$s;const z$d=s$2h.getLogger("esri.renderers.visualVariables.SizeVariable"),v$x=new o$1K({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),w$z=new o$1K({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function V$8(e){if(null!=e)return "string"==typeof e||"number"==typeof e?o$18(e):"size"===e.type?n$1Q(e)?e:(delete(e={...e}).type,new g$I(e)):void 0}function f$T(e,t,i){if("object"!=typeof e)return e;const s=new g$I;return s.read(e,i),s}let g$I=S$s=class extends d$13{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null;}get cache(){return {ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:p$1R.test(this.valueExpression)}}set expression(e){z$d.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===e?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null);}set index(e){n$1Q(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),n$1Q(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e);}get inputValueType(){return i$1D(this)}set maxDataValue(e){e&&this.stops&&(z$d.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e);}set maxSize(e){e&&this.stops&&(z$d.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e);}castMaxSize(e){return V$8(e)}readMaxSize(e,t,i){return f$T(e,t,i)}set minDataValue(e){e&&this.stops&&(z$d.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e);}set minSize(e){e&&this.stops&&(z$d.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e);}castMinSize(e){return V$8(e)}readMinSize(e,t,i){return f$T(e,t,i)}get arcadeRequired(){return !!this.valueExpression||(this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired)}set stops(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)):e&&(z$d.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e);}get transformationType(){return l$1r(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,i,s,r){if("$view.scale"===e){if(r&&r.messages){const e=this.index,i="string"==typeof e?e:`visualVariables[${e}]`;r.messages.push(new s$29("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:i+".valueExpression",context:r}));}}else i[s]=e;}readValueUnit(e){return e?w$z.read(e):null}clone(){return new S$s({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:n$1Q(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:n$1Q(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map((e=>e.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if("clamped-linear"===this.transformationType){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if("stops"===this.transformationType){const e=this.stops,t=e.map((e=>e.size)).reverse(),i=e.length;for(let s=0;s<i;s++)e[s].size=t[s];return this}return this}getAttributeHash(){return `${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};e$1_([d$1S({readOnly:!0})],g$I.prototype,"cache",null),e$1_([d$1S({type:v$x.apiValues,json:{type:v$x.jsonValues,origins:{"web-map":{read:!1}},read:v$x.read,write:v$x.write}})],g$I.prototype,"axis",void 0),e$1_([d$1S({type:String,value:null,json:{read:!1}})],g$I.prototype,"expression",null),e$1_([d$1S()],g$I.prototype,"index",null),e$1_([d$1S({type:String,readOnly:!0})],g$I.prototype,"inputValueType",null),e$1_([d$1S({type:a$1V,json:{write:!0}})],g$I.prototype,"legendOptions",void 0),e$1_([d$1S({type:Number,value:null,json:{write:!0}})],g$I.prototype,"maxDataValue",null),e$1_([d$1S({type:Number,value:null,json:{write:!0}})],g$I.prototype,"maxSize",null),e$1_([c$2Y("maxSize")],g$I.prototype,"castMaxSize",null),e$1_([o$1j("maxSize")],g$I.prototype,"readMaxSize",null),e$1_([d$1S({type:Number,value:null,json:{write:!0}})],g$I.prototype,"minDataValue",null),e$1_([d$1S({type:Number,value:null,json:{write:!0}})],g$I.prototype,"minSize",null),e$1_([c$2Y("minSize")],g$I.prototype,"castMinSize",null),e$1_([o$1j("minSize")],g$I.prototype,"readMinSize",null),e$1_([d$1S({type:String,json:{write:!0}})],g$I.prototype,"normalizationField",void 0),e$1_([d$1S({readOnly:!0})],g$I.prototype,"arcadeRequired",null),e$1_([d$1S({type:String})],g$I.prototype,"scaleBy",void 0),e$1_([d$1S({type:[l$1s],value:null,json:{write:!0}})],g$I.prototype,"stops",null),e$1_([d$1S({type:["outline"],json:{write:!0}})],g$I.prototype,"target",void 0),e$1_([d$1S({type:String,readOnly:!0})],g$I.prototype,"transformationType",null),e$1_([d$1S({type:["size"],json:{type:["sizeInfo"]}})],g$I.prototype,"type",void 0),e$1_([d$1S({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],g$I.prototype,"useSymbolValue",void 0),e$1_([d$1S({type:String,json:{write:!0}})],g$I.prototype,"valueExpression",void 0),e$1_([o$1j("valueExpression",["valueExpression","expression"])],g$I.prototype,"readValueExpression",null),e$1_([r$1c("web-scene","valueExpression")],g$I.prototype,"writeValueExpressionWebScene",null),e$1_([d$1S({type:["radius","diameter","area","width","distance"],json:{write:!0}})],g$I.prototype,"valueRepresentation",void 0),e$1_([d$1S({type:w$z.apiValues,json:{write:w$z.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],g$I.prototype,"valueUnit",void 0),e$1_([o$1j("valueUnit")],g$I.prototype,"readValueUnit",null),g$I=S$s=e$1_([i$2w("esri.renderers.visualVariables.SizeVariable")],g$I);const b$B=g$I;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u$1b=s$2h.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),b$A={color:a$1Y,size:b$B,opacity:a$1X,rotation:n$1R},V$7=new o$1K({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),h$S=/^\[([^\]]+)\]$/i;let m$1b=class extends p$33{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null;}set visualVariables(r){if(this._resetVariables(),(r=r&&r.filter((r=>!!r)))&&r.length){for(const s of r)switch(s.type){case"color":this.colorVariables.push(s);break;case"opacity":this.opacityVariables.push(s);break;case"rotation":this.rotationVariables.push(s);break;case"size":this.sizeVariables.push(s);}if(this.sizeVariables.length){this.sizeVariables.some((r=>!!r.target))&&r.sort(((r,s)=>{let e=null;return e=r.target===s.target?0:r.target?1:-1,e}));}for(let s=0;s<r.length;s++){r[s].index=s;}this._set("visualVariables",r);}else this._set("visualVariables",r);}readVariables(r,s,e){const{rotationExpression:a,rotationType:t}=s,i=a&&a.match(h$S),l=i&&i[1];if(l&&(r||(r=[]),r.push({type:"rotationInfo",rotationType:t,field:l})),r)return r.map((r=>{const s=V$7.read(r.type),a=b$A[s];a||(u$1b.warn(`Unknown variable type: ${s}`),e&&e.messages&&e.messages.push(new t$1H("visual-variable:unsupported",`visualVariable of type '${s}' is not supported`,{definition:r,context:e})));const t=new a;return t.read(r,e),t}))}writeVariables(r,s){const e=[];for(const a of r){const r=a.toJSON(s);r&&e.push(r);}return e}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[];}};e$1_([d$1S()],m$1b.prototype,"visualVariables",null),m$1b=e$1_([i$2w("esri.renderers.visualVariables.VisualVariableFactory")],m$1b);const f$S=m$1b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const b$z={base:d$13,key:"type",typeMap:{opacity:a$1X,color:a$1Y,rotation:n$1R,size:b$B}},v$w=l=>{let u=class extends l{constructor(){super(...arguments),this._vvFactory=new f$S;}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables);}readVisualVariables(r,a,s){return this._vvFactory.readVariables(r,a,s)}writeVisualVariables(r,a,s,i){a[s]=this._vvFactory.writeVariables(r,i);}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return !1;for(const r of this.visualVariables)if(r.arcadeRequired)return !0;return !1}hasVisualVariables(r,a){return r?this.getVisualVariablesForType(r,a).length>0:this.getVisualVariablesForType("size",a).length>0||this.getVisualVariablesForType("color",a).length>0||this.getVisualVariablesForType("opacity",a).length>0||this.getVisualVariablesForType("rotation",a).length>0}getVisualVariablesForType(r,a){const s=this.visualVariables;return s?s.filter((s=>s.type===r&&("string"==typeof a?s.target===a:!1!==a||!s.target))):[]}async collectVVRequiredFields(r,a){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const i of s)i&&(i.field&&F$h(r,a,i.field),i.normalizationField&&F$h(r,a,i.normalizationField),i.valueExpression&&await b$N(r,a,i.valueExpression));}};return e$1_([d$1S({types:[b$z],value:null,json:{write:!0}})],u.prototype,"visualVariables",null),e$1_([o$1j("visualVariables",["visualVariables","rotationType","rotationExpression"])],u.prototype,"readVisualVariables",null),e$1_([r$1c("visualVariables")],u.prototype,"writeVisualVariables",null),u=e$1_([i$2w("esri.renderers.mixins.VisualVariablesMixin")],u),u};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$1Q={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function a$1J(a,S=p$1Q){if(!a)return {symbol:null};const{retainId:c=p$1Q.retainId,ignoreDrivers:u=p$1Q.ignoreDrivers,hasLabelingContext:d=p$1Q.hasLabelingContext,retainCIM:j=p$1Q.retainCIM}=S;let D;if(x$r(a)||a instanceof h$11)D=a.clone();else if("cim"===a.type){var g,C;const o=null==(g=a.data)||null==(C=g.symbol)?void 0:C.type;if("CIMPointSymbol"!==o)return {error:new s$29("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${o||"unknown"}' is unsupported in 3D`,{symbol:a})};D=j?a.clone():L$o.fromCIMSymbol(a);}else if(a instanceof m$1E)D=b$K.fromSimpleLineSymbol(a);else if(a instanceof y$14)D=L$o.fromSimpleMarkerSymbol(a);else if(a instanceof n$21)D=L$o.fromPictureMarkerSymbol(a);else if(a instanceof S$x)D=h$13.fromSimpleFillSymbol(a);else {if(!(a instanceof c$2c))return {error:new s$29("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${a.type||a.declaredClass}' is unsupported in 3D`,{symbol:a})};D=d?b$L.fromTextSymbol(a):L$o.fromTextSymbol(a);}if(c&&"cim"!==D.type&&(D.id=a.id),u&&x$r(D))for(let o=0;o<D.symbolLayers.length;++o)D.symbolLayers.getItemAt(o)._ignoreDrivers=!0;return {symbol:D}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function m$1a(e,o,s,r){const n=i$1v(e,{},r);n&&(o[s]=n);}function i$1v(e,m,i){if(!e)return null;if(i&&"web-scene"===i.origin&&!(e instanceof A$j)&&!(e instanceof h$11)){const r=a$1J(e,{retainCIM:!0});return r$1G(r.symbol)?r.symbol.write(m,i):(i.messages&&i.messages.push(new s$29("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:i,error:r.error})),null)}return i&&"web-map"===i.origin&&"web-style"===e.type?(i.messages&&i.messages.push(new s$29("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:e,context:i})),null):e.write(m,i)}function l$1l(o,s){return k$n(o,null,s)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$1k={types:M$p,json:{write:{writer:m$1a},origins:{"web-scene":{types:h$10,write:{writer:m$1a},read:{reader:u$29({types:h$10})}}}}},y$U={types:{base:a$2t,key:"type",typeMap:{"simple-fill":j$t.typeMap["simple-fill"],"picture-fill":j$t.typeMap["picture-fill"],"polygon-3d":j$t.typeMap["polygon-3d"]}},json:{write:{writer:m$1a},origins:{"web-scene":{type:h$13,write:{writer:m$1a}}}}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1u;let l$1j=i$1u=class extends a$2A{constructor(s){super(s),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null;}clone(){return new i$1u({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const s=JSON.stringify(this.symbol);return `${this.minValue}.${this.maxValue}.${s}`}};e$1_([d$1S({type:String,json:{write:!0}})],l$1j.prototype,"description",void 0),e$1_([d$1S({type:String,json:{write:!0}})],l$1j.prototype,"label",void 0),e$1_([d$1S({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],l$1j.prototype,"minValue",void 0),e$1_([d$1S({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],l$1j.prototype,"maxValue",void 0),e$1_([d$1S(l$1k)],l$1j.prototype,"symbol",void 0),l$1j=i$1u=e$1_([i$2w("esri.renderers.support.ClassBreakInfo")],l$1j);const a$1I=l$1j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var F$b;const E$h=s$2h.getLogger("esri.renderers.ClassBreaksRenderer"),j$p="log",w$y="percent-of-total",z$c="field",T$e=new o$1K({esriNormalizeByLog:j$p,esriNormalizeByPercentOfTotal:w$y,esriNormalizeByField:z$c}),_$m=b$Z(a$1I);let C$k=F$b=class extends(v$w(p$2e)){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[]);}readClassBreakInfos(e,s,t){if(!Array.isArray(e))return;let o=s.minValue;return e.map((e=>{const s=new a$1I;return s.read(e,t),null==s.minValue&&(s.minValue=o),null==s.maxValue&&(s.maxValue=s.minValue),o=s.maxValue,s}))}writeClassBreakInfos(e,s,t,o){const r=e.map((e=>e.write({},o)));this._areClassBreaksConsecutive()&&r.forEach((e=>delete e.classMinValue)),s[t]=r;}castField(e){return null==e?e:"function"==typeof e?(E$h.error(".field: field must be a string value"),null):u$2d(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const s=!!this.normalizationField,t=null!=this.normalizationTotal;return s||t?(e=s&&z$c||t&&w$y||null,s&&t&&E$h.warn("warning: both normalizationField and normalizationTotal are set!")):e!==z$c&&e!==w$y||(e=null),e}set normalizationType(e){this._set("normalizationType",e);}addClassBreakInfo(e,t,r){let i=null;i="number"==typeof e?new a$1I({minValue:e,maxValue:t,symbol:g$P(r)}):_$m(l$2r(e)),this.classBreakInfos.push(i),1===this.classBreakInfos.length&&this.notifyChange("minValue");}removeClassBreakInfo(e,s){const t=this.classBreakInfos.length;for(let o=0;o<t;o++){const t=[this.classBreakInfos[o].minValue,this.classBreakInfos[o].maxValue];if(t[0]===e&&t[1]===s){this.classBreakInfos.splice(o,1);break}}}getBreakIndex(e,s){return this.valueExpression&&(t$1O(s)||t$1O(s.arcade))&&E$h.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,s):this._getBreakIndexForField(e)}async getClassBreakInfo(e,s){let t=s;this.valueExpression&&(t$1O(s)||t$1O(s.arcade))&&(t={...t,arcade:await a$2u()});const o=this.getBreakIndex(e,t);return -1!==o?this.classBreakInfos[o]:null}getSymbol(e,s){if(this.valueExpression&&(t$1O(s)||t$1O(s.arcade)))return void E$h.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const t=this.getBreakIndex(e,s);return t>-1?this.classBreakInfos[t].symbol:this.defaultSymbol}async getSymbolAsync(e,s){let t=s;if(this.valueExpression&&(t$1O(s)||t$1O(s.arcade))){const e=await a$2u(),{arcadeUtils:s}=e;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),t={...t,arcade:e};}const o=this.getBreakIndex(e,t);return o>-1?this.classBreakInfos[o].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach((s=>{s.symbol&&e.push(s.symbol);})),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,s)=>e+s.getAttributeHash()),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),s=JSON.stringify(this.defaultSymbol),t=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return `${e}.${s}.${this.classBreakInfos.reduce(((e,s)=>e+s.getMeshHash()),"")}.${t}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new F$b({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:l$2r(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:l$2r(this.visualVariables),legendOptions:l$2r(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,s){const t=[this.collectVVRequiredFields(e,s),this.collectSymbolFields(e,s)];await Promise.all(t);}async collectSymbolFields(e,s){const t=[...this.getSymbols().map((t=>t.collectRequiredFields(e,s))),b$N(e,s,this.valueExpression)];F$h(e,s,this.field),F$h(e,s,this.normalizationField),await Promise.all(t);}_getBreakIndexForExpression(e,s){const{viewingMode:t,scale:o,spatialReference:r,arcade:i}=c$3f(s,{});let n=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const u=e$1Y(i).arcadeUtils;if(!n){const e=u.createSyntaxTree(this.valueExpression);n=u.createFunction(e),this._compiledValueExpression.compiledFunction=n;}this._compiledValueExpression.valueExpression=this.valueExpression;const c=u.executeFunction(n,u.createExecContext(e,u.getViewInfo({viewingMode:t,scale:o,spatialReference:r})));return this._getBreakIndexfromInfos(c)}_getBreakIndexForField(e){const s=this.field,t=e.attributes,o=this.normalizationType;let r=parseFloat(t[s]);if(o){const e=this.normalizationTotal,s=parseFloat(t[this.normalizationField]);if(o===j$p)r=Math.log(r)*Math.LOG10E;else if(o!==w$y||isNaN(e)){if(o===z$c&&!isNaN(s)){if(isNaN(r)||isNaN(s))return -1;r/=s;}}else r=r/e*100;}return this._getBreakIndexfromInfos(r)}_getBreakIndexfromInfos(e){const s=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let t=0;t<this.classBreakInfos.length;t++){const o=[this.classBreakInfos[t].minValue,this.classBreakInfos[t].maxValue];if(o[0]<=e&&(s?e<=o[1]:e<o[1]))return t}return -1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,s=e.length;for(let t=1;t<s;t++)if(e[t-1].maxValue!==e[t].minValue)return !1;return !0}};e$1_([d$1S(y$U)],C$k.prototype,"backgroundFillSymbol",void 0),e$1_([d$1S({type:[a$1I]})],C$k.prototype,"classBreakInfos",void 0),e$1_([o$1j("classBreakInfos")],C$k.prototype,"readClassBreakInfos",null),e$1_([r$1c("classBreakInfos")],C$k.prototype,"writeClassBreakInfos",null),e$1_([d$1S({type:String,json:{write:!0}})],C$k.prototype,"defaultLabel",void 0),e$1_([d$1S(l$1k)],C$k.prototype,"defaultSymbol",void 0),e$1_([d$1S({type:String,json:{write:!0}})],C$k.prototype,"field",void 0),e$1_([c$2Y("field")],C$k.prototype,"castField",null),e$1_([d$1S({type:Boolean})],C$k.prototype,"isMaxInclusive",void 0),e$1_([d$1S({type:c$1Z,json:{write:!0}})],C$k.prototype,"legendOptions",void 0),e$1_([d$1S({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],C$k.prototype,"minValue",null),e$1_([d$1S({type:String,json:{write:!0}})],C$k.prototype,"normalizationField",void 0),e$1_([d$1S({type:Number,cast:e=>a$31(e),json:{write:!0}})],C$k.prototype,"normalizationTotal",void 0),e$1_([d$1S({type:T$e.apiValues,value:null,json:{type:T$e.jsonValues,read:T$e.read,write:T$e.write}})],C$k.prototype,"normalizationType",null),e$1_([r$1d({classBreaks:"class-breaks"})],C$k.prototype,"type",void 0),e$1_([d$1S({type:String,json:{write:!0}})],C$k.prototype,"valueExpression",void 0),e$1_([d$1S({type:String,json:{write:!0}})],C$k.prototype,"valueExpressionTitle",void 0),C$k=F$b=e$1_([i$2w("esri.renderers.ClassBreaksRenderer")],C$k);const N$g=C$k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$1s=-3;class i$1t{constructor(t,e,s){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",s&&(this._storage.registerRemoveFunc(this._namespace,s),this._removeFunc=!0);}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null;}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0;}put(t,e,s,i=0){this._storage.put(this._namespace+t,e,s,i);}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,s){this._storage.updateSize(this._namespace+t,e,s);}clear(){this._storage.clear(this._namespace);}clearAll(){this._storage.clearAll();}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats();}}class h$R{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new n$2A,this._users=new n$2A;}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null;}register(t){this._users.push(t);}deregister(t){this._users.removeUnordered(t);}registerRemoveFunc(t,e){this._removeFuncs.push([t,e]);}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t));}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit();}put(t,e,i,h){const r=this._db.get(t);if(r&&(this._size-=r.size,this._db.delete(t),r.entry!==e&&this._notifyRemove(t,r.entry,0)),i>this._maxSize)return void this._notifyRemove(t,e,0);if(void 0===e)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return void console.warn("Refusing to cache entry with invalid size "+i);const _=1+Math.max(h,s$1s)-s$1s;this._db.set(t,{entry:e,size:i,lifetime:_,lives:_}),this._size+=i,this._checkSizeLimit();}updateSize(e,s,i){const h=this._db.get(e);if(h&&h.entry===s){for(this._size-=h.size;i>this._maxSize;){const h=this._notifyRemove(e,s,1);if(!(r$1G(h)&&h>0))return void this._db.delete(e);i=h;}h.size=i,this._size+=i,this._checkSizeLimit();}}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss;}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss;}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},i=new Array;this._db.forEach(((t,s)=>{const h=t.lifetime;i[h]=(i[h]||0)+t.size,this._users.forAll((i=>{const h=i.namespace;if(s.startsWith(h)){const s=e[h]||0;e[h]=s+t.size;}}));}));const h={};this._users.forAll((t=>{const s=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){const i=e[s]||0;e[s]=i,h[s]=Math.round(100*t.hitRate)+"%";}else h[s]="0%";}));const r=Object.keys(e);r.sort(((t,s)=>e[s]-e[t])),r.forEach((s=>t[s]=Math.round(e[s]/2**20)+"MB / "+h[s]));for(let _=i.length-1;_>=0;--_){const e=i[_];e&&(t["Priority "+(_+s$1s-1)]=Math.round(e/this.size*100)+"%");}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()));}clear(t){this._db.forEach(((e,s)=>{s.startsWith(t)&&(this._size-=e.size,this._db.delete(s),this._notifyRemove(s,e.entry,0));}));}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,0))),this._size=0,this._db.clear();}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,s){let i;return this._removeFuncs.some((h=>{if(t.startsWith(h[0])){const t=h[1](e,s);return "number"==typeof t&&(i=t),!0}return !1})),i}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,s]of this._db){if(this._db.delete(e),s.lives<=1){this._size-=s.size;const i=this._notifyRemove(e,s.entry,1);r$1G(i)&&i>0&&(this._size+=i,s.lives=s.lifetime,s.size=i,this._db.set(e,s));}else --s.lives,this._db.set(e,s);if(this._size<=.9*this.maxSize)return}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$W{constructor(e,s){this._storage=new h$R,this._storage.maxSize=e,s&&this._storage.registerRemoveFunc("",s);}put(t,e,s){this._storage.put(t,e,s,1);}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll();}destroy(){this._storage.destroy();}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var _$l;const j$o=s$2h.getLogger("esri.renderers.DictionaryRenderer"),w$x={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let S$r=_$l=class extends(v$w(p$2e)){constructor(e){super(e),this._ongoingRequests=new Map,this._symbolCache=new e$W(100),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary";}writeData(e,s){e&&(s.scalingExpressionInfo={expression:e,returnType:"number"});}writeVisualVariables(e,s,t,r){null!=r&&r.origin||super.writeVisualVariables(e,s,t,r);}clone(){return new _$l({config:l$2r(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:l$2r(this.fieldMap),url:l$2r(this.url),visualVariables:l$2r(this.visualVariables)})}async getSymbolAsync(e,t){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(t));try{r=await this._dictionaryPromise;}catch(d){if(d$1O(d))return this._dictionaryPromise=null,null}const i={};if(this.fieldMap)for(const s of this._symbolFields){const t=this.fieldMap[s];if(t&&null!==e.attributes[t]&&void 0!==e.attributes[t]){const r=""+e.attributes[t];i[s]=r;}else i[s]="";}const o=r(i,t);if(!o||"string"!=typeof o)return null;const n=c$3d(o).toString(),p=this._symbolCache.get(n);if(p)return p.catch((()=>{this._symbolCache.pop(n);})),p;const m=o.split(";"),u=[],f=[];for(const a of m)if(a&&0!==a.length)if(-1===a.indexOf("po:"))if(-1!==a.indexOf("|")){for(const e of a.split("|"))if(this._itemNames.has(e)){u.push(e);break}}else this._itemNames.has(a)&&u.push(a);else {const e=a.substr(3).split("|");if(3===e.length){const t=e[0],r=e[1];let i=e[2];if("DashTemplate"===r)i=i.split(" ").map((e=>Number(e)));else if("Color"===r){const e=new h$1l(i).toRgba();i=[e[0],e[1],e[2],255*e[3]];}else i=Number(i);f.push({primitiveName:t,propertyName:r,value:i});}}const h=!r$1G(e.geometry)||!e.geometry.hasZ&&"point"===e.geometry.type,y=this._cimPartsToCIMSymbol(u,f,h,t);return this._symbolCache.put(n,y,1),y}async collectRequiredFields(e,s){await this.collectVVRequiredFields(e,s),this.scaleExpression&&await b$N(e,s,this.scaleExpression);for(const t in this.fieldMap){const r=this.fieldMap[t];s.has(r)&&e.add(r);}}get arcadeRequired(){return !0}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void j$o.error("no valid URL!");const s=r$1G(e)?e.abortOptions:null,i=E$t(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},...s}),[{data:o}]=await Promise.all([i,a$2u()]);if(!o)throw this._dictionaryPromise=null,new s$29("esri.renderers.DictionaryRenderer","Bad dictionary data!");const n=o.expression,l=o.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+o.cimRefTemplateUrl,this._itemNames=new Set(o.itemsNames),this._symbolFields=l.symbol;const c={};if(this.config){const e=this.config;for(const s in e)c[s]=e[s];}if(l.configuration)for(const t of l.configuration)c.hasOwnProperty(t.name)||(c[t.name]=t.value);const p=[];if(r$1G(e)&&e.fields&&this.fieldMap)for(const t of this._symbolFields){const s=this.fieldMap[t],r=e.fields.filter((e=>e.name===s));r.length>0&&p.push({...r[0],name:t});}return this._dictionaryPromise=n$2i(n,r$1G(e)?e.spatialReference:null,p,c).then((e=>{const s={scale:0};return (t,r)=>{const i=e.repurposeFeature({geometry:null,attributes:t});return s.scale=r$1G(r)?r.scale:void 0,e.evaluate({$feature:i,$view:s})}})).catch((e=>(j$o.error("Creating dictinoary expression failed:",e),null))),this._dictionaryPromise}getSymbol(){return null}getSymbols(){return []}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,s)=>e+s.getAttributeHash()),"")}getMeshHash(){return `${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._symbolFields}async _getSymbolPart(e,s){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then((e=>e.data));const r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,e),i=E$t(r,{responseType:"json",query:{f:"json"},...s});this._ongoingRequests.set(e,i);try{return (await i).data}catch(o){return this._ongoingRequests.delete(e),Promise.reject(o)}}_combineSymbolParts(e,s,t){if(!e||0===e.length)return null;const r={...e[0]};if(e.length>1){r.symbolLayers=[];for(const s of e){const e=s;r.symbolLayers.unshift(...e.symbolLayers);}}return t&&(r.callout=w$x),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:s}}async _cimPartsToCIMSymbol(e,s,t,r){const i=new Array(e.length);for(let n=0;n<e.length;n++)i[n]=this._getSymbolPart(e[n],r);const o=await Promise.all(i);return new d$1r({data:this._combineSymbolParts(o,s,t)})}};e$1_([d$1S({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],S$r.prototype,"config",void 0),e$1_([d$1S({type:Object,json:{write:!0}})],S$r.prototype,"fieldMap",void 0),e$1_([d$1S({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],S$r.prototype,"scaleExpression",void 0),e$1_([r$1c("scaleExpression")],S$r.prototype,"writeData",null),e$1_([d$1S({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return {enabled:!!e&&!!this.scaleExpression}}}}})],S$r.prototype,"scaleExpressionTitle",void 0),e$1_([d$1S({type:String,json:{write:!0}})],S$r.prototype,"url",void 0),e$1_([r$1c("visualVariables")],S$r.prototype,"writeVisualVariables",null),S$r=_$l=e$1_([i$2w("esri.renderers.DictionaryRenderer")],S$r);const x$l=S$r;

const DictionaryRenderer = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': x$l
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$1J;const u$1a=s$2h.getLogger("esri.renderers.support.AttributeColorInfo");let c$1K=n$1J=class extends a$2A{constructor(r){super(r),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null;}castField(r){return null==r?r:"function"==typeof r?(u$1a.error(".field: field must be a string value"),null):u$2d(r)}getAttributeHash(){return `${this.field}-${this.valueExpression}`}clone(){return new n$1J({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};e$1_([d$1S({type:h$1l,json:{type:[Number],write:!0}})],c$1K.prototype,"color",void 0),e$1_([d$1S({type:String,json:{write:!0}})],c$1K.prototype,"field",void 0),e$1_([c$2Y("field")],c$1K.prototype,"castField",null),e$1_([d$1S({type:String,json:{write:!0}})],c$1K.prototype,"label",void 0),e$1_([d$1S({type:String,json:{write:!0}})],c$1K.prototype,"valueExpression",void 0),e$1_([d$1S({type:String,json:{write:!0}})],c$1K.prototype,"valueExpressionTitle",void 0),c$1K=n$1J=e$1_([i$2w("esri.renderers.support.AttributeColorInfo")],c$1K);const a$1H=c$1K;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$V;let p$1P=e$V=class extends a$2A{constructor(){super(...arguments),this.unit=null;}clone(){return new e$V({unit:this.unit})}};e$1_([d$1S({type:String,json:{write:!0}})],p$1P.prototype,"unit",void 0),p$1P=e$V=e$1_([i$2w("esri.renderers.support.DotDensityLegendOptions")],p$1P);const c$1J=p$1P;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var y$T;let m$19=y$T=class extends(v$w(p$2e)){constructor(e){super(e),this.attributes=null,this.backgroundColor=new h$1l([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new m$1E,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density";}calculateDotValue(e){if(null==this.referenceScale)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new S$x({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return [this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new y$T({attributes:l$2r(this.attributes),backgroundColor:l$2r(this.backgroundColor),dotBlendingEnabled:l$2r(this.dotBlendingEnabled),dotShape:l$2r(this.dotShape),dotSize:l$2r(this.dotSize),dotValue:l$2r(this.dotValue),legendOptions:l$2r(this.legendOptions),outline:l$2r(this.outline),referenceScale:l$2r(this.referenceScale),visualVariables:l$2r(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return `${this.attributes.map((e=>e.field||e.valueExpression||""))}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const o of this.attributes)o.valueExpression&&await b$N(e,t,o.valueExpression),o.field&&e.add(o.field);}};e$1_([d$1S({type:[a$1H],json:{write:!0}})],m$19.prototype,"attributes",void 0),e$1_([d$1S({type:h$1l,json:{write:!0}})],m$19.prototype,"backgroundColor",void 0),e$1_([d$1S({type:Boolean}),o$1Q("dotBlendingEnabled")],m$19.prototype,"blendDots",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],m$19.prototype,"dotBlendingEnabled",void 0),e$1_([d$1S({type:String,json:{write:!1}})],m$19.prototype,"dotShape",void 0),e$1_([d$1S({type:Number,json:{write:!1}})],m$19.prototype,"dotSize",void 0),e$1_([d$1S({type:c$1J,json:{write:!0}})],m$19.prototype,"legendOptions",void 0),e$1_([d$1S({type:m$1E,json:{default:null,write:!0}})],m$19.prototype,"outline",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],m$19.prototype,"dotValue",void 0),e$1_([d$1S({type:Number}),o$1Q("dotValue")],m$19.prototype,"referenceDotValue",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],m$19.prototype,"referenceScale",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],m$19.prototype,"seed",void 0),e$1_([r$1d({dotDensity:"dot-density"})],m$19.prototype,"type",void 0),m$19=y$T=e$1_([i$2w("esri.renderers.DotDensityRenderer")],m$19);const b$y=m$19;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$1O;let c$1I=p$1O=class extends a$2A{constructor(o){super(o),this.color=null,this.ratio=null;}clone(){return new p$1O({color:this.color,ratio:this.ratio})}};e$1_([d$1S({type:h$1l,json:{write:!0}})],c$1I.prototype,"color",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],c$1I.prototype,"ratio",void 0),c$1I=p$1O=e$1_([i$2w("esri.renderers.support.HeatmapColorStop")],c$1I);const i$1s=c$1I;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$1G;let m$18=a$1G=class extends p$2e{constructor(t){super(t),this.blurRadius=10,this.colorStops=[new i$1s({ratio:0,color:new h$1l("rgba(255, 140, 0, 0)")}),new i$1s({ratio:.75,color:new h$1l("rgba(255, 140, 0, 1)")}),new i$1s({ratio:.9,color:new h$1l("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.maxPixelIntensity=100,this.minPixelIntensity=0,this.type="heatmap";}async collectRequiredFields(t,e){const r=this.field;r&&"string"==typeof r&&F$h(t,e,r);}getAttributeHash(){return null}getMeshHash(){return `${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new a$1G({blurRadius:this.blurRadius,colorStops:l$2r(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}};e$1_([d$1S({type:Number,json:{write:!0}})],m$18.prototype,"blurRadius",void 0),e$1_([d$1S({type:[i$1s],json:{write:!0}})],m$18.prototype,"colorStops",void 0),e$1_([d$1S({type:String,json:{write:!0}})],m$18.prototype,"field",void 0),e$1_([d$1S({type:Number,json:{write:{overridePolicy:(t,e,r)=>({enabled:null==r})}}})],m$18.prototype,"fieldOffset",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],m$18.prototype,"maxPixelIntensity",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],m$18.prototype,"minPixelIntensity",void 0),e$1_([r$1d({heatmap:"heatmap"})],m$18.prototype,"type",void 0),m$18=a$1G=e$1_([i$2w("esri.renderers.HeatmapRenderer")],m$18);const c$1H=m$18;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$1G;let n$1I=c$1G=class extends(v$w(p$2e)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple";}async collectRequiredFields(e,s){await Promise.all([this.collectSymbolFields(e,s),this.collectVVRequiredFields(e,s)]);}async collectSymbolFields(e,s){await Promise.all(this.getSymbols().map((r=>r.collectRequiredFields(e,s))));}getSymbol(e,s){return this.symbol}async getSymbolAsync(e,s){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,s)=>e+s.getAttributeHash()),"")}getMeshHash(){return this.getSymbols().reduce(((e,s)=>e+JSON.stringify(s)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new c$1G({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:l$2r(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};e$1_([d$1S({type:String,json:{write:!0}})],n$1I.prototype,"description",void 0),e$1_([d$1S({type:String,json:{write:!0}})],n$1I.prototype,"label",void 0),e$1_([d$1S(l$1k)],n$1I.prototype,"symbol",void 0),e$1_([r$1d({simple:"simple"})],n$1I.prototype,"type",void 0),n$1I=c$1G=e$1_([i$2w("esri.renderers.SimpleRenderer")],n$1I);const p$1N=n$1I;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const f$R=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function i$1r(e){return e instanceof p$33}function c$1F(t){return t instanceof S$F?Object.keys(t.items):i$1r(t)?e$1T(t).keys():t?Object.keys(t):[]}function u$19(t,n){return t instanceof S$F?t.items[n]:t[n]}function l$1i(t,e){return !(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function s$1r(t){return t?t.declaredClass:null}function p$1M(t,e){const n=t.diff;if(n&&"function"==typeof n)return n(t,e);const r=c$1F(t),a=c$1F(e);if(0===r.length&&0===a.length)return;if(!r.length||!a.length||l$1i(t,e))return {type:"complete",oldValue:t,newValue:e};const y=a.filter((t=>-1===r.indexOf(t))),m=r.filter((t=>-1===a.indexOf(t))),d=r.filter((n=>a.indexOf(n)>-1&&u$19(t,n)!==u$19(e,n))).concat(y,m).sort(),b=s$1r(t);if(b&&f$R.indexOf(b)>-1&&d.length)return {type:"complete",oldValue:t,newValue:e};let h;const j=i$1r(t)&&i$1r(e);for(const f of d){const r=u$19(t,f),i=u$19(e,f);let c;(j||"function"!=typeof r&&"function"!=typeof i)&&(r!==i&&(null==r&&null==i||(c=n&&n[f]&&"function"==typeof n[f]?n[f](r,i):"object"==typeof r&&"object"==typeof i&&s$1r(r)===s$1r(i)?p$1M(r,i):{type:"complete",oldValue:r,newValue:i},r$1G(c)&&(r$1G(h)?h.diff[f]=c:h={type:"partial",diff:{[f]:c}}))));}return h}function a$1F(t,e){if(t$1O(t))return !1;const o=e.split(".");let r=t;for(const n of o){if("complete"===r.type)return !0;if("partial"!==r.type)return !1;{const t=r.diff[n];if(!t)return !1;r=t;}}return !0}function y$S(t,e){for(const n of e)if(a$1F(t,n))return !0;return !1}function m$17(t,e){if(!("function"==typeof t||"function"==typeof e||t$1O(t)&&t$1O(e)))return t$1O(t)||t$1O(e)||"object"==typeof t&&"object"==typeof e&&s$1r(t)!==s$1r(e)?{type:"complete",oldValue:t,newValue:e}:p$1M(t,e)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1q;let l$1h=i$1q=class extends a$2A{constructor(o){super(o),this.description=null,this.label=null,this.symbol=null,this.value=null;}clone(){return new i$1q({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const o=JSON.stringify(this.symbol&&this.symbol.toJSON());return `${this.value}.${o}`}};e$1_([d$1S({type:String,json:{write:!0}})],l$1h.prototype,"description",void 0),e$1_([d$1S({type:String,json:{write:!0}})],l$1h.prototype,"label",void 0),e$1_([d$1S(l$1k)],l$1h.prototype,"symbol",void 0),e$1_([d$1S({type:[String,Number],json:{type:String,write:{writer:(o,r)=>{r.value=null==o?void 0:o.toString();}}}})],l$1h.prototype,"value",void 0),l$1h=i$1q=e$1_([i$2w("esri.renderers.support.UniqueValueInfo")],l$1h);const p$1L=l$1h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$1E=()=>!!s$2l("enable-feature:force-wosr");

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const f$Q={};async function u$18(e,t){try{return {data:(await b$x(e,t)).data,baseUrl:ht$2(e),styleUrl:e}}catch(o){return b$Y(o),null}}function i$1p(e,t,r){const o=t&&t.portal||B$d.getDefault();let s;const l=`${o.url} - ${o.user&&o.user.username} - ${e}`;return f$Q[l]||(f$Q[l]=y$R(e,o,r).then((e=>(s=e,e.fetchData()))).then((t=>({data:t,baseUrl:s.itemUrl,styleName:e})))),f$Q[l]}function y$R(e,r,o){return r.load(o).then((()=>{const t=new d$1l({disableExtraQuery:!0,query:`owner:${w$w} AND type:${h$Q} AND typekeywords:"${e}"`});return r.queryItems(t,o)})).then((({results:r})=>{let s=null;const n=e.toLowerCase();if(r&&Array.isArray(r))for(const e of r){if(e.typeKeywords.some((e=>e.toLowerCase()===n))&&e.type===h$Q&&e.owner===w$w){s=e;break}}if(!s)throw new s$29("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(o)}))}function m$16(e,r,o){return e.styleUrl?u$18(e.styleUrl,o):e.styleName?i$1p(e.styleName,r,o):Promise.reject(new s$29("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function c$1E(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function p$1K(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!a$1E())for(const r of e.formatInfos)if("gltf"===r.type)return r.href;return e.webRef}function b$x(t,r){const s={responseType:"json",query:{f:"json"},...r};return E$t(z$q(t),s)}const w$w="esri_en",h$Q="Style",j$n="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var E$g;const M$i=s$2h.getLogger("esri.renderers.UniqueValueRenderer"),N$f=b$Z(p$1L);let R$g=E$g=class extends(v$w(p$2e)){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,t){if(!e&&!t)return;if(!e||!t)return {type:"complete",oldValue:e,newValue:t};let i=!1;const r={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<t.length;s++){const l=e.find((e=>e.value===t[s].value));l?m$17(l,t[s])?(r.changed.push({type:"complete",oldValue:l,newValue:t[s]}),i=!0):r.unchanged.push({oldValue:l,newValue:t[s]}):(r.added.push(t[s]),i=!0);}for(let s=0;s<e.length;s++){t.find((t=>t.value===e[s].value))||(r.removed.push(e[s]),i=!0);}return i?r:void 0}},this._set("uniqueValueInfos",[]);}get _cache(){return {compiledFunc:null}}castField(e){return null==e||"function"==typeof e?e:u$2d(e)}writeField(e,t,r,s){"string"==typeof e?t[r]=e:s&&s.messages?s.messages.push(new s$29("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):M$i.error(".field: cannot write field to JSON since it's not a string value");}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e);}readPortal(e,t,i){return i.portal||B$d.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const e=c$2p(t.styleUrl,i);return Object.freeze({styleUrl:e})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=i$1V(e.styleUrl,r));}set uniqueValueInfos(e){this.styleOrigin?M$i.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap());}addUniqueValueInfo(e,i){if(this.styleOrigin)return void M$i.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r="object"==typeof e?N$f(e):new p$1L({value:e,symbol:g$P(i)}),this.uniqueValueInfos.push(r),this._valueInfoMap[r.value]=r;}removeUniqueValueInfo(e){if(this.styleOrigin)M$i.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++){if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(t$1O(t)||t$1O(t.arcade))&&(i={...i,arcade:await a$2u()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(t$1O(t)||t$1O(t.arcade)))return void M$i.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(t$1O(i)||t$1O(i.arcade))){const e=await a$2u(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),i={...i,arcade:e};}const r=this._getUniqueValueInfo(e,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return `${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce(((e,t)=>e+t.getMeshHash()),"")}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new E$g({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:l$2r(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:l$2r(this.visualVariables),legendOptions:l$2r(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:l$2r(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=l$2r(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(l$2r(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i);}async collectSymbolFields(e,t){const i=[...this.getSymbols().map((i=>i.collectRequiredFields(e,t))),b$N(e,t,this.valueExpression)];F$h(e,t,this.field),F$h(e,t,this.field2),F$h(e,t,this.field3),await Promise.all(i);}populateFromStyle(){return m$16(this.styleOrigin,{portal:this.portal}).then((e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach((i=>{const r=new h$11({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const s=new p$1L({value:i.name,symbol:r});t.push(s),this._valueInfoMap[i.name]=s;})),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this}))}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach((e=>this._valueInfoMap[e.value+""]=e));}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:l}=c$3f(t,{});let a=this._cache.compiledFunc;const u=e$1Y(l).arcadeUtils;if(!a){const e=u.createSyntaxTree(this.valueExpression);a=u.createFunction(e),this._cache.compiledFunc=a;}const p=u.executeFunction(a,u.createExecContext(e,u.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._valueInfoMap[p+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if("function"!=typeof t&&this.field2){const e=this.field2,s=this.field3,l=[];t&&l.push(i[t]),e&&l.push(i[e]),s&&l.push(i[s]),r=l.join(this.fieldDelimiter||"");}else "function"==typeof t?r=t(e):t&&(r=i[t]);return this._valueInfoMap[r+""]}static fromPortalStyle(e,t){const i=new E$g(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||B$d.getDefault());const r=i.populateFromStyle();return r.catch((t=>{M$i.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",t);})),r}static fromStyleUrl(e,t){const i=new E$g(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch((t=>{M$i.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",t);})),r}};e$1_([d$1S({readOnly:!0})],R$g.prototype,"_cache",null),e$1_([r$1d({uniqueValue:"unique-value"})],R$g.prototype,"type",void 0),e$1_([d$1S(y$U)],R$g.prototype,"backgroundFillSymbol",void 0),e$1_([d$1S({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],R$g.prototype,"field",void 0),e$1_([c$2Y("field")],R$g.prototype,"castField",null),e$1_([r$1c("field")],R$g.prototype,"writeField",null),e$1_([d$1S({type:String,json:{write:!0}})],R$g.prototype,"field2",void 0),e$1_([d$1S({type:String,json:{write:!0}})],R$g.prototype,"field3",void 0),e$1_([d$1S({type:String,json:{write:!0}})],R$g.prototype,"valueExpression",void 0),e$1_([d$1S({type:String,json:{write:!0}})],R$g.prototype,"valueExpressionTitle",void 0),e$1_([d$1S({type:c$1Z,json:{write:!0}})],R$g.prototype,"legendOptions",void 0),e$1_([d$1S({type:String,json:{write:!0}})],R$g.prototype,"defaultLabel",void 0),e$1_([d$1S(n$2O({...l$1k},{json:{write:{overridePolicy(){return {enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return {enabled:!this._isDefaultSymbolDerived}}}}}}}))],R$g.prototype,"defaultSymbol",null),e$1_([d$1S({type:String,json:{write:!0}})],R$g.prototype,"fieldDelimiter",void 0),e$1_([d$1S({type:B$d,readOnly:!0})],R$g.prototype,"portal",void 0),e$1_([o$1j("portal",["styleName"])],R$g.prototype,"readPortal",null),e$1_([d$1S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],R$g.prototype,"styleOrigin",void 0),e$1_([o$1j("styleOrigin",["styleName","styleUrl"])],R$g.prototype,"readStyleOrigin",null),e$1_([r$1c("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],R$g.prototype,"writeStyleOrigin",null),e$1_([d$1S({type:[p$1L],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],R$g.prototype,"uniqueValueInfos",null),R$g=E$g=e$1_([i$2w("esri.renderers.UniqueValueRenderer")],R$g);const P$g=R$g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$15={key:"type",base:p$2e,typeMap:{heatmap:c$1H,simple:p$1N,"unique-value":P$g,"class-breaks":N$g,"dot-density":b$y,dictionary:x$l},errorContext:"renderer"},n$1H={key:"type",base:p$2e,typeMap:{simple:p$1N,"unique-value":P$g,"class-breaks":N$g},errorContext:"renderer"};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$V(e,r){return o$T(e,null,r)}const s$1q=u$29({types:m$15});function o$T(r,n,t){return r?r&&(r.styleName||r.styleUrl)&&"uniqueValue"!==r.type?(t&&t.messages&&t.messages.push(new t$1H("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+r.type+"'",{definition:r,context:t})),null):s$1q(r,n,t):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function o$S(r){return t$1O(r)||"simple"===r.type||"unique-value"===r.type||"class-breaks"===r.type||"dictionary"===r.type}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$U(t){return "function"==typeof t}function e$U(e,r,n,a){return t$U(e)?e(r,n,a):e}function r$T(t){return [t.r,t.g,t.b,t.a]}function n$1G(t,e,r){const n=" /-,\n",i=t=>{let e=t.length;for(;e--;)if(-1===n.indexOf(t.charAt(e)))return !1;return !0},l=[];let o=0,c=-1;do{if(c=e.indexOf("[",o),c>=o){if(c>o){const t=e.substr(o,c-o);l.push([t,null,i(t)]);}if(o=c+1,c=e.indexOf("]",o),c>=o){if(c>o){const r=t[e.substr(o,c-o)];r&&l.push([null,r,!1]);}o=c+1;}}}while(-1!==c);if(o<e.length-1){const t=e.substr(o);l.push([t,null,i(t)]);}return t=>{let e="",n=null;for(const r of l){const[a,i,l]=r;if(a)l?n=a:(n&&(e+=n,n=null),e+=a);else {const r=t.attributes[i];r&&(n&&(e+=n,n=null),e+=r);}}return a$1D(e,r)}}function a$1D(t,e){switch("string"!=typeof t&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function i$1o(t,e,r,n,a,i,l=!0){const o=e/a,c=r/i,u=Math.ceil(o/2),M=Math.ceil(c/2);for(let s=0;s<i;s++)for(let r=0;r<a;r++){const f=4*(r+(l?i-s-1:s)*a);let p=0,C=0,y=0,I=0,h=0,k=0,d=0;const P=(s+.5)*c;for(let n=Math.floor(s*c);n<(s+1)*c;n++){const a=Math.abs(P-(n+.5))/M,i=(r+.5)*o,l=a*a;for(let c=Math.floor(r*o);c<(r+1)*o;c++){let r=Math.abs(i-(c+.5))/u;const a=Math.sqrt(l+r*r);a>=-1&&a<=1&&(p=2*a*a*a-3*a*a+1,p>0&&(r=4*(c+n*e),d+=p*t[r+3],y+=p,t[r+3]<255&&(p=p*t[r+3]/250),I+=p*t[r],h+=p*t[r+1],k+=p*t[r+2],C+=p));}}n[f]=I/C,n[f+1]=h/C,n[f+2]=k/C,n[f+3]=d/y;}}function l$1g(t){return t?{r:t[0],g:t[1],b:t[2],a:t[3]/255}:{r:0,g:0,b:0,a:0}}function o$R(t){var e;return null==(e=t.data)?void 0:e.symbol}function c$1D(t){return "CIMVectorMarker"===t.type||"CIMPictureMarker"===t.type||"CIMBarChartMarker"===t.type||"CIMCharacterMarker"===t.type||"CIMPieChartMarker"===t.type||"CIMStackedBarChartMarker"===t.type}function u$17(t){return "CIMGradientStroke"===t.type||"CIMPictureStroke"===t.type||"CIMSolidStroke"===t.type}function M$h(t){return "CIMGradientFill"===t.type||"CIMHatchFill"===t.type||"CIMPictureFill"===t.type||"CIMSolidFill"===t.type||"CIMWaterFill"===t.type}function s$1p(t){return "CIMMarkerPlacementAlongLineRandomSize"===t.type||"CIMMarkerPlacementAlongLineSameSize"===t.type||"CIMMarkerPlacementAlongLineVariableSize"===t.type||"CIMMarkerPlacementAtExtremities"===t.type||"CIMMarkerPlacementAtMeasuredUnits"===t.type||"CIMMarkerPlacementAtRatioPositions"===t.type||"CIMMarkerPlacementOnLine"===t.type||"CIMMarkerPlacementOnVertices"===t.type}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1F(e){const c=o$R(e);if("CIMTextSymbol"===c.type)return c.height;let s=0;if(c.symbolLayers)for(const t of c.symbolLayers)c$1D(t)&&t.size>s?s=t.size:u$17(t)&&t.width>s?s=t.width:M$h(t);return s}function i$1n(e,o,a){const r=o$R(e),c=n$1F(e);if(0===c)return void l$1f(r,o);f$P(r,o/c,!1,a);}function l$1f(e,t){if("CIMTextSymbol"!==e.type){if(e.symbolLayers)for(const o of e.symbolLayers)switch(o.type){case"CIMPictureMarker":case"CIMVectorMarker":o.size=t;break;case"CIMPictureStroke":case"CIMSolidStroke":o.width=t;}}else e.height=t;}function f$P(e,t,o,a){if("CIMTextSymbol"!==e.type){if(o&&e.effects)for(const o of e.effects)y$Q(o,t);if(e.symbolLayers)for(const o of e.symbolLayers)switch(o.type){case"CIMPictureMarker":case"CIMVectorMarker":m$14(o,t,a);break;case"CIMPictureStroke":case"CIMSolidStroke":null!=a&&a.preserveOutlineWidth||(o.width*=t);break;case"CIMPictureFill":o.height*=t,o.offsetX*=t,o.offsetY*=t;break;case"CIMHatchFill":f$P(o.lineSymbol,t,!0,{...a,preserveOutlineWidth:!1}),o.offsetX*=t,o.offsetY*=t,o.separation*=t;}}else e.height*=t;}function m$14(e,t,o){if(e.markerPlacement&&M$g(e.markerPlacement,t),e.offsetX*=t,e.offsetY*=t,e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size*=t,"CIMVectorMarker"===e.type&&e.markerGraphics)for(const a of e.markerGraphics)e.scaleSymbolsProportionally||f$P(a.symbol,t,!0,o);}function M$g(e,t){switch(s$1p(e)&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset*=t,e.offsetAlongLine*=t,e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map((e=>e*t));e.placementTemplate=o;}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset*=t,e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map((e=>e*t));e.placementTemplate=o;}break;case"CIMMarkerPlacementOnLine":e.startPointOffset*=t;break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine*=t;break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition*=t,e.endPosition*=t;break;case"CIMMarkerPlacementPolygonCenter":e.offsetX*=t,e.offsetY*=t;break;case"CIMMarkerPlacementInsidePolygon":e.offsetX*=t,e.offsetY*=t,e.stepX*=t,e.stepY*=t;}}function y$Q(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width*=t;break;case"CIMGeometricEffectBuffer":e.size*=t;break;case"CIMGeometricEffectCut":e.beginCut*=t,e.endCut*=t,e.middleCut*=t;break;case"CIMGeometricEffectDashes":if(e.customEndingOffset*=t,e.offsetAlongLine*=t,e.dashTemplate&&e.dashTemplate.length){const o=e.dashTemplate.map((e=>e*t));e.dashTemplate=o;}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length*=t;break;case"CIMGeometricEffectMove":e.offsetX*=t,e.offsetY*=t;break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset*=t;break;case"CIMGeometricEffectRegularPolygon":e.radius*=t;break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth*=t,e.length*=t,e.toWidth*=t;break;case"CIMGeometricEffectWave":e.amplitude*=t,e.period*=t;}}function C$j(o){const a=[];return k$i(o$R(o),a),a.length?new h$1l(l$1g(a[0])):null}function k$i(e,t){let r;r="CIMTextSymbol"===e.type?e.symbol:e;const s="CIMPolygonSymbol"===e.type;if(r.symbolLayers)for(const n of r.symbolLayers)if(!(n.colorLocked||s&&(u$17(n)||c$1D(n)&&n.markerPlacement&&s$1p(n.markerPlacement))))switch(n.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":break;case"CIMVectorMarker":n.markerGraphics.forEach((e=>{k$i(e.symbol,t);}));break;case"CIMSolidStroke":case"CIMSolidFill":b$w(t,n.color);break;case"CIMHatchFill":k$i(n.lineSymbol,t);}}function b$w(e,t){for(const o of e)if(o.join(".")===t.join("."))return;e.push(t);}function I$k(o,a){a instanceof h$1l||(a=new h$1l(a));p$1J(o$R(o),a);}function p$1J(e,t){let r;r="CIMTextSymbol"===e.type?e.symbol:e;const s="CIMPolygonSymbol"===e.type;if(r.symbolLayers)for(const n of r.symbolLayers){if(n.colorLocked)continue;if(s&&(u$17(n)||c$1D(n)&&n.markerPlacement&&s$1p(n.markerPlacement)))continue;const e=t.toArray(0);switch(n.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":break;case"CIMVectorMarker":n.markerGraphics.forEach((e=>{p$1J(e.symbol,t);}));break;case"CIMSolidStroke":case"CIMSolidFill":n.color=e;break;case"CIMHatchFill":p$1J(n.lineSymbol,t);}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1E(r,t,e){return T$o(r.map(((r,o)=>t.apply(e,[r,o]))))}function u$16(r,t,e){return T$o(r.map(((r,o)=>t.apply(e,[r,o])))).then((r=>r.map((r=>r.value))))}function a$1C(o){return t$1O(o)?k$D():o.then((r=>({ok:!0,value:r}))).catch((r=>({ok:!1,error:r})))}function p$1I(r){return r.then((r=>({ok:!0,value:r}))).catch((r=>(b$Y(r),{ok:!1,error:r})))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$T{constructor(e,s){this._storage=new h$R,this._storage.maxSize=e,s&&this._storage.registerRemoveFunc("",s);}put(t,e){this._storage.put(t,e,1,1);}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll();}destroy(){this._storage.destroy();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$1o="picture-fill",l$1e="simple-fill",c$1C="simple-line",a$1B="simple-marker",m$13="text",u$15="cim",d$10=new e$T(1e3);function b$v(e){const r=e.style;let o=null;if(e)switch(e.type){case a$1B:"cross"!==r&&"x"!==r&&(o=e.color);break;case l$1e:"solid"===r?o=e.color:"none"!==r&&(o={type:"pattern",x:0,y:0,src:a$2O(`esri/symbols/patterns/${r}.png`),width:5,height:5});break;case s$1o:o={type:"pattern",src:e.url,width:u$1E(e.width)*e.xscale,height:u$1E(e.height)*e.yscale,x:u$1E(e.xoffset),y:u$1E(e.yoffset)};break;case m$13:o=e.color;break;case u$15:o=C$j(e);}return o}function w$v(t,e){const o=t+"-"+e;return void 0!==d$10.get(o)?Promise.resolve(d$10.get(o)):E$t(t,{responseType:"image"}).then((t=>{const r=t.data,n=r.naturalWidth,i=r.naturalHeight,s=document.createElement("canvas");s.width=n,s.height=i;const l=s.getContext("2d");l.fillStyle=e,l.fillRect(0,0,n,i),l.globalCompositeOperation="destination-in",l.drawImage(r,0,0);const c=s.toDataURL();return d$10.put(o,c),c}))}function j$m(t){if(!t)return null;let e;switch(t.type){case l$1e:case s$1o:case a$1B:e=j$m(t.outline);break;case c$1C:{const r=u$1E(t.width);"none"!==t.style&&0!==r&&(e={color:t.color,style:x$k(t.style),width:r,cap:t.cap,join:"miter"===t.join?u$1E(t.miterLimit):t.join});break}default:e=null;}return e}const x$k=function(){const t={};return function(e){if(t[e])return t[e];const r=e.replace(/-/g,"");return t[e]=r,r}}(),k$h=new h$1l([128,128,128]);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const y$P=/\/resource\/(.*?)\.svg$/,p$1H=new h$1l("white");function h$P(e){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const r=e.symbolLayers.getItemAt(t-1);return "outline"in r?m$2b(r,"outline","size"):void 0}function b$u(e){if(!e)return 0;if(x$r(e)){const t=h$P(e);return r$1G(t)?t:0}const r=j$m(e);return r&&e$1g(r.width)||0}function w$u(e){if(t$1O(e)||!("symbolLayers"in e)||t$1O(e.symbolLayers))return !1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return !1}}function d$$(e,t){const r=t.resource.href;return !s$2l("esri-canvas-svg-support")&&e.styleOrigin&&y$P.test(r)?r.replace(y$P,"/resource/png/$1.png"):r}function k$g(t,r){if(null==r)return t;const o=t.toRgba();return o[3]=o[3]*r,new h$1l(o)}function L$l(e,t,r){const o=e.symbolLayers;if(!o)return;const n=e=>{const o=r$1G(e)?e:null;return k$g(t=t||o||null!=r&&p$1H,r)};o.forEach((e=>{if("object"!==e.type||null==e.resource.href||t)if("water"===e.type)e.color=n(e.color);else {const t=r$1G(e.material)?e.material.color:null,o=n(t);t$1O(e.material)?e.material=new a$2q({color:o}):e.material.color=o,null!=r&&"outline"in e&&r$1G(e.outline)&&r$1G(e.outline.color)&&(e.outline.color=k$g(e.outline.color,r));}}));}function z$b(e,t,r){(t=t||e.color)&&(e.color=k$g(t,r)),null!=r&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=k$g(e.outline.color,r));}function v$v(o,n,i){o&&(n||null!=i)&&(n&&(n=new h$1l(n)),x$r(o)?L$l(o,n,i):c$2a(o)&&z$b(o,n,i));}async function x$j(e,t){const r=e.symbolLayers;r&&await n$1E(r,(async e=>S$q(e,t)));}async function S$q(e,t){switch(e.type){case"extrude":O$g(e,t);break;case"icon":case"line":case"text":U$f(e,t);break;case"path":$$b(e,t);break;case"object":await R$f(e,t);}}function U$f(e,t){const r=E$f(t);r$1G(r)&&(e.size=r);}function E$f(e){for(const t of e)if("number"==typeof t)return t;return null}function O$g(e,t){e.size="number"==typeof t[2]?t[2]:0;}async function R$f(e,t){const{resourceSize:r,symbolSize:o}=await C$i(e),n=A$e(t,r,o);e.width=D$f(t[0],o[0],r[0],n),e.depth=D$f(t[1],o[1],r[1],n),e.height=D$f(t[2],o[2],r[2],n);}function $$b(e,t){const r=A$e(t,l$29,[e.width,void 0,e.height]);e.width=D$f(t[0],e.width,1,r),e.height=D$f(t[2],e.height,1,r);}function A$e(e,t,r){for(let o=0;o<3;o++){const n=e[o];switch(n){case"symbol-value":return null!=r[o]?r[o]/t[o]:1;case"proportional":break;default:if(n&&t[o])return n/t[o]}}return 1}async function C$i(e){const t=await import('./symbolLayerUtils.js'),r=await t.computeObjectLayerResourceSize(e,10),{width:o,height:n,depth:i}=e,l=[o,i,n];let s=1;for(let c=0;c<3;c++)if(null!=l[c]){s=l[c]/r[c];break}for(let c=0;c<3;c++)null==l[c]&&(l[c]=r[c]*s);return {resourceSize:r,symbolSize:l}}function D$f(e,t,r,o){switch(e){case"proportional":return r*o;case"symbol-value":return null!=t?t:r;default:return e}}function I$j(e,t){const r=E$f(t);if(!t$1O(r))switch(e.type){case"simple-marker":e.size=r;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=r,e.height=r*t):(e.width=r*t,e.height=r);break}case"simple-line":e.width=r;break;case"text":e.font.size=r;}}async function M$f(e,o){if(e&&o)return x$r(e)?x$j(e,o):void(c$2a(e)&&I$j(e,o))}function q$c(e,o,n){if(e&&null!=o)if(x$r(e)){const t=e.symbolLayers;t&&t.forEach((e=>{if(e&&"object"===e.type)switch(n){case"tilt":e.tilt=o;break;case"roll":e.roll=o;break;default:e.heading=o;}}));}else c$2a(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=o));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$1B=null;function u$14(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function y$O(e,t,l){const{backgroundColor:r,outline:i,dotSize:a}=e,n=l&&l.swatchSize||22,o=.8,s=Math.round(n*n/a**2*o),y=window.devicePixelRatio,p=document.createElement("canvas"),h=n*y;p.width=h,p.height=h,p.style.width=p.width/y+"px",p.style.height=p.height/y+"px";const b=p.getContext("2d");if(r&&(b.fillStyle=r.toCss(!0),b.fillRect(0,0,h,h),b.fill()),b.fillStyle=t.toCss(!0),c$1B&&c$1B.length/2===s)for(let u=0;u<2*s;u+=2){const e=c$1B[u],t=c$1B[u+1];b.fillRect(e,t,a*y,a*y),b.fill();}else {c$1B=[];for(let e=0;e<2*s;e+=2){const e=u$14(0,h),t=u$14(0,h);c$1B.push(e,t),b.fillRect(e,t,a*y,a*y),b.fill();}}i&&(i.color&&(b.strokeStyle=i.color.toCss(!0)),b.lineWidth=i.width,b.strokeRect(0,0,h,h));const f=new Image(n,n);return f.src=p.toDataURL(),f.style.filter=l.effect,f}function p$1G(e,t={}){const l=24,r=75,i="horizontal"===t.align,a=i?r:l,n=i?l:r,{width:o=a,height:s=n,gradient:c=!0}=t,u=window.devicePixelRatio,y=o*u,p=s*u,h=document.createElement("canvas");h.width=y,h.height=p,h.style.width=`${o}px`,h.style.height=`${s}px`;const b=h.getContext("2d"),f=i?y:0,d=i?0:p;if(c){const t=b.createLinearGradient(0,0,f,d),l=e.length,r=1===l?0:1/(l-1);e.forEach(((e,l)=>t.addColorStop(l*r,e.toString()))),b.fillStyle=t,b.fillRect(0,0,y,p);}else {const t=i?y/e.length:y,l=i?p:p/e.length;let r=0,a=0;for(const n of e)b.fillStyle=n.toString(),b.fillRect(r,a,t,l),r=i?r+t:0,a=i?0:a+l;}const m=document.createElement("div");return m.style.width=`${o}px`,m.style.height=`${s}px`,m.style.filter=null==t?void 0:t.effect,m.appendChild(h),m}async function h$O(e,t){switch(e.type){case"web-style":{const{previewWebStyleSymbol:l}=await import('./previewWebStyleSymbol.js');return l(e,h$O,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:l}=await Promise.resolve().then(function () { return previewSymbol3D; });return l(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:l}=await import('./previewSymbol2D.js');return l(e,t)}case"cim":{const{previewCIMSymbol:l}=await import('./previewCIMSymbol.js');return l(e,t)}default:return}}function b$t(e){return e&&"opacity"in e?e.opacity*b$t(e.parent):1}async function f$O(o,s){var c,u;if(!o)return;const y=o.sourceLayer,p=null!=(c=r$1G(s)&&null!=(u=s.useSourceLayer)&&u?y:o.layer)?c:y,h=b$t(p);if(r$1G(o.symbol)&&(!r$1G(s)||!0!==s.ignoreGraphicSymbol)){const t="web-style"===o.symbol.type?await o.symbol.fetchSymbol(r$1G(s)?s.abortOptions:null):o.symbol.clone();return v$v(t,null,h),t}const f=r$1G(s)&&s.renderer||p&&"renderer"in p&&p.renderer;let d=f&&"getSymbolAsync"in f?await f.getSymbolAsync(o,s):null;if(!d)return;if(d="web-style"===d.type?await d.fetchSymbol(r$1G(s)?s.abortOptions:null):d.clone(),!("visualVariables"in f)||!f.visualVariables||!f.visualVariables.length)return v$v(d,null,h),d;if("arcadeRequiredForVisualVariables"in f&&f.arcadeRequiredForVisualVariables&&(t$1O(s)||t$1O(s.arcade))){const e={...e$1Y(s)};e.arcade=await a$2u(),s=e;}const m=await Promise.resolve().then(function () { return visualVariableUtils; }),g=[],w=[],S=[],v=[];for(const e of f.visualVariables)switch(e.type){case"color":g.push(e);break;case"opacity":w.push(e);break;case"rotation":v.push(e);break;case"size":e.target||S.push(e);}const V=!!g.length&&g[g.length-1],x=V?m.getColor(V,o,s):null,R=!!w.length&&w[w.length-1];let C=R?m.getOpacity(R,o,s):null;if(null!=h&&(C=null!=C?C*h:h),v$v(d,x,C),S.length){const e=m.getAllSizes(S,o,s);await M$f(d,e);}for(const e of v)q$c(d,m.getRotationAngle(e,o,s),e.axis);return d}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$1d=(e,l)=>{const a=e.featuresTilingScheme.getClosestInfoForScale(e.scale).level;return null!=l&&l.levels?l.levels[a]:null};function a$1A(a,i){if(!a||!("visualVariables"in a)||!a.visualVariables)return null;const s=a.visualVariables.find((e=>"size"===e.type)),n=l$1d(i,s);return n?new b$B({field:s.field,minSize:n[2].size,minDataValue:n[2].value,maxSize:n[3].size,maxDataValue:n[3].value}):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$1D=/^-?(\d+)(\.(\d+))?$/i;function e$S(t,n){return t-n}function r$S(t,n){let e,r;return e=Number(t.toFixed(n)),e<t?r=e+1/10**n:(r=e,e-=1/10**n),e=Number(e.toFixed(n)),r=Number(r.toFixed(n)),[e,r]}function o$Q(t,n,e,r,o){const i=l$1c(t,n,e,r),u=null==i.previous||i.previous<=o,s=null==i.next||i.next<=o;return u&&s||i.previous+i.next<=2*o}function i$1m(t){const e=String(t),r=e.match(n$1D);if(r&&r[1])return {integer:r[1].split("").length,fractional:r[3]?r[3].split("").length:0};if(e.toLowerCase().indexOf("e")>-1){const t=e.split("e"),n=t[0],r=t[1];if(n&&r){const t=Number(n);let e=Number(r);const o=e>0;o||(e=Math.abs(e));const l=i$1m(t);return o?(l.integer+=e,e>l.fractional?l.fractional=0:l.fractional-=e):(l.fractional+=e,e>l.integer?l.integer=1:l.integer-=e),l}}return {integer:0,fractional:0}}function l$1c(t,n,e,r){const o={previous:null,next:null};if(null!=e){const r=t-e,i=n-e-r;o.previous=Math.floor(Math.abs(100*i/r));}if(null!=r){const e=r-t,i=r-n-e;o.next=Math.floor(Math.abs(100*i/e));}return o}function u$13(t,n={}){const l=t.slice(0),{tolerance:u=2,strictBounds:s=!1,indexes:c=l.map(((t,n)=>n))}=n;c.sort(e$S);for(let e=0;e<c.length;e++){const t=c[e],n=l[t],a=0===t?null:l[t-1],f=t===l.length-1?null:l[t+1],m=i$1m(n).fractional;if(m){let i,c=0,g=!1;for(;c<=m&&!g;){const t=r$S(n,c);i=s&&0===e?t[1]:t[0],g=o$Q(n,i,a,f,u),c++;}g&&(l[t]=i);}}return l}const s$1n={maximumFractionDigits:20};function c$1A(n){return m$23(n,s$1n)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const g$H="<",w$t=">",I$i=S$I("short-date");function U$e(a,U,e,i){let o="";0===U?o=`${g$H} `:U===e&&(o=`${w$t} `);let r=null;return r=i?L$x(a,I$i):c$1A(a),o+r}const e$R=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$P=new h$1l([64,64,64]);function n$1C(l,o){const n=[],r=l.length-1;return 5===l.length?n.push(0,2,4):n.push(0,r),l.map(((l,t)=>n.indexOf(t)>-1?U$e(l,t,r,o):null))}async function r$R(l,e,o){let r=!1,a=[],u=[];if(l.stops){const e=l.stops;a=e.map((l=>l.value)),r=e.some((l=>!!l.label)),r&&(u=e.map((l=>l.label)));}const s=a[0],i=a[a.length-1];if(null==s&&null==i)return null;const c=r?null:n$1C(a,o);return (await Promise.all(a.map((async(o,n)=>({value:o,color:"opacity"===l.type?await t$T(o,l,e):(await Promise.resolve().then(function () { return visualVariableUtils; })).getColor(l,o),label:r?u[n]:c[n]}))))).reverse()}async function t$T(e,n,r=o$P){const t=new h$1l(r),a=(await Promise.resolve().then(function () { return visualVariableUtils; })).getOpacity(n,e);return null!=a&&(t.a=a),t}function a$1z(l){let e=!1,o=[],r=[];o=l.map((l=>l.value)),e=l.some((l=>!!l.label)),e&&(r=l.map((l=>l.label)));const t=o[0],a=o[o.length-1];if(null==t&&null==a)return null;const s=e?null:n$1C(o,!1);return o.map(((o,n)=>({value:o,color:u$12(o,l),label:e?r[n]:s[n]}))).reverse()}function u$12(e,o){const{startIndex:n,endIndex:r,weight:t}=s$1m(e,o);if(n===r)return o[n].color;const a=h$1l.blendColors(o[n].color,o[r].color,t);return new h$1l(a)}function s$1m(l,e){let o=0,n=e.length-1;return e.some(((e,r)=>l<e.value?(n=r,!0):(o=r,!1))),{startIndex:o,endIndex:n,weight:(l-e[o].value)/(e[n].value-e[o].value)}}function i$1l(e,o){let n=[];if(e&&"multipart"===e.type)e.colorRamps.reverse().forEach((function(r,t){0===t?n.push({value:o.max,color:new h$1l(r.toColor),label:"high"}):n.push({value:null,color:new h$1l(r.toColor),label:""}),t===e.colorRamps.length-1?n.push({value:o.min,color:new h$1l(r.fromColor),label:"low"}):n.push({value:null,color:new h$1l(r.fromColor),label:""});}));else {let r,t;e&&"algorithmic"===e.type?(r=e.fromColor,t=e.toColor):(r=[0,0,0,1],t=[255,255,255,1]),n=[{value:o.max,color:new h$1l(t),label:"high"},{value:o.min,color:new h$1l(r),label:"low"}];}return n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$Q(r){let t=r.colorStops,e=t.length-1;if(t&&t[0]){const r=t[e];r&&1!==r.ratio&&(t=t.slice(0),t.push(new i$1s({ratio:1,color:r.color})),e++);}return t.map(((o,r)=>{let t="";return 0===r?t="low":r===e&&(t="high"),{color:o.color,label:t,ratio:o.ratio}})).reverse()}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1B(n){return "r"in n&&"g"in n&&"b"in n}function t$S(n){return "h"in n&&"s"in n&&"v"in n}function r$P(n){return "l"in n&&"a"in n&&"b"in n}function u$11(n){return "l"in n&&"c"in n&&"h"in n}function o$O(n){return "x"in n&&"y"in n&&"z"in n}const e$Q=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],c$1z=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function i$1k(n,t){const r=[];let u,o;if(n[0].length!==t.length)throw "dimensions do not match";const e=n.length,c=n[0].length;let i=0;for(u=0;u<e;u++){for(i=0,o=0;o<c;o++)i+=n[u][o]*t[o];r.push(i);}return r}function a$1y(n){const t=[n.r/255,n.g/255,n.b/255].map((n=>n<=.04045?n/12.92:((n+.055)/1.055)**2.4)),r=i$1k(e$Q,t);return {x:100*r[0],y:100*r[1],z:100*r[2]}}function h$N(n){const t=i$1k(c$1z,[n.x/100,n.y/100,n.z/100]).map((n=>{const t=n<=.0031308?12.92*n:1.055*n**(1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return {r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function s$1l(n){const t=[n.x/95.047,n.y/100,n.z/108.883].map((n=>n>(6/29)**3?n**(1/3):1/3*(29/6)**2*n+4/29));return {l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function f$N(n){const t=n.l,r=[(t+16)/116+n.a/500,(t+16)/116,(t+16)/116-n.b/200].map((n=>n>6/29?n**3:3*(6/29)**2*(n-4/29)));return {x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function b$s(n){const t=n.l,r=n.a,u=n.b,o=Math.sqrt(r*r+u*u);let e=Math.atan2(u,r);return e=e>0?e:e+2*Math.PI,{l:t,c:o,h:e}}function l$1b(n){const t=n.l,r=n.c,u=n.h;return {l:t,a:r*Math.cos(u),b:r*Math.sin(u)}}function g$G(n){return s$1l(a$1y(n))}function M$e(n){return h$N(f$N(n))}function m$12(n){return b$s(s$1l(a$1y(n)))}function d$_(n){return h$N(f$N(l$1b(n)))}function x$i(n){const t=n.r,r=n.g,u=n.b,o=Math.max(t,r,u),e=o-Math.min(t,r,u);let c=o,i=0===e?0:o===t?(r-u)/e%6:o===r?(u-t)/e+2:(t-r)/e+4,a=0===e?0:e/c;return i<0&&(i+=6),i*=60,a*=100,c*=100/255,{h:i,s:a,v:c}}function k$f(n){const t=(n.h+360)%360/60,r=n.s/100,u=n.v/100*255,o=u*r,e=o*(1-Math.abs(t%2-1));let c;switch(Math.floor(t)){case 0:c={r:o,g:e,b:0};break;case 1:c={r:e,g:o,b:0};break;case 2:c={r:0,g:o,b:e};break;case 3:c={r:0,g:e,b:o};break;case 4:c={r:e,g:0,b:o};break;case 5:case 6:c={r:o,g:0,b:e};break;default:c={r:0,g:0,b:0};}return c.r=Math.round(c.r+u-o),c.g=Math.round(c.g+u-o),c.b=Math.round(c.b+u-o),c}function p$1F(e){return n$1B(e)?e:u$11(e)?d$_(e):r$P(e)?M$e(e):o$O(e)?h$N(e):t$S(e)?k$f(e):e}function y$N(n){if(t$S(n))return n;return x$i(p$1F(n))}function z$a(n){return r$P(n)?n:g$G(p$1F(n))}function v$u(n){return u$11(n)?n:m$12(p$1F(n))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$R={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function e$P(a,t,e){const m=22;let c=m,p=m;a<1?c*=.75:a>1&&(p*=1.25);const L=0,n=0;let o=m,s=m;t&&e&&(c=p=o=s=0);return [{type:"path",path:[{command:"M",values:[o,L]},{command:"L",values:[e?o:.875*o,L]},{command:"L",values:[e?c-.5*o:n,p-.5*s]},{command:"L",values:[c-.5*o,p-.5*s]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,L]},{command:"L",values:[o,t?L:.125*s]},{command:"L",values:[c-.5*o,t?p-.5*s:s]},{command:"L",values:[c-.5*o,p-.5*s]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[c-.5*o,p-.5*s]},{command:"L",values:[e?c-.5*o:n,p-.5*s]},{command:"L",values:[e?c-.5*o:n,t?p-.5*s:s]},{command:"L",values:[c-.5*o,t?p-.5*s:s]},{command:"Z",values:[]}]}]}function m$11(a){const t=22,e=.5*a,m=0,c=0;return [{type:"path",path:[{command:"M",values:[c,.7*t*.5]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+e]},{command:"L",values:[c,.7*t+e-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+e]},{command:"L",values:[t,e]},{command:"L",values:[t,m]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,m]},{command:"L",values:[t,m]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[c,.7*t*.5]},{command:"Z",values:[]}]}]}function c$1y(){return [{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function p$1E(a,t){let e=t?20:a;const m=t?4:6;e-=e<=22?.5*m:m;const c=0,p=0,L=t?.35*e:.5*e;return [{type:"path",path:[{command:"M",values:[.5*e,c]},{command:"L",values:[e,.5*L]},{command:"L",values:[.5*e,L]},{command:"L",values:[p,.5*L]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[c,.5*L]},{command:"L",values:[.5*e,L]},{command:"L",values:[.5*e,a]},{command:"L",values:[p,a-.5*L]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*e,L]},{command:"L",values:[.5*e,a]},{command:"L",values:[e,a-.5*L]},{command:"L",values:[e,.5*L]},{command:"Z",values:[]}]}]}function L$k(a,t){let e=t?20:a;const m=t?4:6;e-=e<=22?.5*m:m;const c=.5*e,p=.15*e,L=0,n=a-p;return [{type:"ellipse",cx:.5*e,cy:n,rx:c,ry:p},{type:"path",path:[{command:"M",values:[L,p]},{command:"L",values:[L,n]},{command:"L",values:[e,n]},{command:"L",values:[e,p]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:p,rx:c,ry:p}]}function n$1A(a,t){let e=t?20:a;const m=t?4:6;e-=e<=22?.5*m:m;const c=.15*e,p=a-c;return [{type:"ellipse",cx:.5*e,cy:p,rx:.5*e,ry:c},{type:"path",path:[{command:"M",values:[.5*e,0]},{command:"L",values:[e,p]},{command:"L",values:[0,p]},{command:"Z",values:[]}]}]}function o$N(a){let t=a;const e=6;t-=t<22?.5*e:e;const m=.15*t,c=0;return [{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[t,c]},{command:"L",values:[.5*t,a-m]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:c,rx:.5*t,ry:m}]}function s$1k(a){let t=a;const e=a,m=4;t-=t<22?.5*m:m;const c=0,p=0,L=t,n=e,o=Math.floor(a/10)-1||1;return [{type:"path",path:[{command:"M",values:[.45*L,c]},{command:"L",values:[L,.5*n-o]},{command:"L",values:[.45*L-o,.5*n+o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*L,c]},{command:"L",values:[.45*L-o,.5*n+o]},{command:"L",values:[p,.5*n-o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[p,.5*n-o]},{command:"L",values:[.45*L-o,.5*n+o]},{command:"L",values:[.45*L,e]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*L,e]},{command:"L",values:[L,.5*n-o]},{command:"L",values:[.45*L-o,.5*n+o]},{command:"Z",values:[]}]}]}function l$1a(a){const t=2;let e=a;e-=e<22?.5*t:t;const m=0,c=0;return [{type:"path",path:[{command:"M",values:[.45*a,m]},{command:"L",values:[a,e]},{command:"L",values:[.45*a,.6*e]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*a,m]},{command:"L",values:[.45*a,.6*e]},{command:"L",values:[c,e]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[c,e]},{command:"L",values:[.45*a,.6*e]},{command:"L",values:[a,e]},{command:"Z",values:[]}]}]}function u$10(a,t){const e=.75;return Math.round(Math.min(Math.max(a+255*t*e,0),255))}function h$M(t,e){if("type"in t&&("linear"===t.type||"pattern"===t.type))return t;const m=new h$1l(t);return new h$1l([u$10(m.r,e),u$10(m.g,e),u$10(m.b,e),m.a])}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1z(){const n=new Float32Array(6);return n[0]=1,n[3]=1,n}function t$Q(n){const t=new Float32Array(6);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function r$O(n,t,r,o,a,e){const c=new Float32Array(6);return c[0]=n,c[1]=t,c[2]=r,c[3]=o,c[4]=a,c[5]=e,c}function o$M(n,t){return new Float32Array(n,t,6)}function a$1x(n,t,r,o){const a=t[o],e=t[o+1];n[o]=r[0]*a+r[2]*e+r[4],n[o+1]=r[1]*a+r[3]*e+r[5];}function e$O(n,t,r,o=0,e=0,c=2){const s=e||t.length/c;for(let f=o;f<s;f++){a$1x(n,t,r,f*c);}}Object.freeze({__proto__:null,create:n$1z,clone:t$Q,fromValues:r$O,createView:o$M,transform:a$1x,transformMany:e$O});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function a$1w(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t}function n$1y(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function s$1j(t,a,n,s,r,u,o){return t[0]=a,t[1]=n,t[2]=s,t[3]=r,t[4]=u,t[5]=o,t}function r$N(t,a){const n=a[0],s=a[1],r=a[2],u=a[3],o=a[4],c=a[5];let e=n*u-s*r;return e?(e=1/e,t[0]=u*e,t[1]=-s*e,t[2]=-r*e,t[3]=n*e,t[4]=(r*c-u*o)*e,t[5]=(s*o-n*c)*e,t):null}function u$$(t){return t[0]*t[3]-t[1]*t[2]}function o$L(t,a,n){const s=a[0],r=a[1],u=a[2],o=a[3],c=a[4],e=a[5],i=n[0],h=n[1],M=n[2],f=n[3],b=n[4],l=n[5];return t[0]=s*i+u*h,t[1]=r*i+o*h,t[2]=s*M+u*f,t[3]=r*M+o*f,t[4]=s*b+u*l+c,t[5]=r*b+o*l+e,t}function c$1x(t,a,n){const s=a[0],r=a[1],u=a[2],o=a[3],c=a[4],e=a[5],i=Math.sin(n),h=Math.cos(n);return t[0]=s*h+u*i,t[1]=r*h+o*i,t[2]=s*-i+u*h,t[3]=r*-i+o*h,t[4]=c,t[5]=e,t}function e$N(t,a,n){const s=a[0],r=a[1],u=a[2],o=a[3],c=a[4],e=a[5],i=n[0],h=n[1];return t[0]=s*i,t[1]=r*i,t[2]=u*h,t[3]=o*h,t[4]=c,t[5]=e,t}function i$1j(t,a,n){const s=a[0],r=a[1],u=a[2],o=a[3],c=a[4],e=a[5],i=n[0],h=n[1];return t[0]=s,t[1]=r,t[2]=u,t[3]=o,t[4]=s*i+u*h+c,t[5]=r*i+o*h+e,t}function h$L(t,a){const n=Math.sin(a),s=Math.cos(a);return t[0]=s,t[1]=n,t[2]=-n,t[3]=s,t[4]=0,t[5]=0,t}function M$d(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t[4]=0,t[5]=0,t}function f$M(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=a[0],t[5]=a[1],t}function b$r(t){return "mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function l$19(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function m$10(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t[4]=a[4]+n[4],t[5]=a[5]+n[5],t}function d$Z(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t[4]=a[4]-n[4],t[5]=a[5]-n[5],t}function p$1D(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*n,t[5]=a[5]*n,t}function x$h(t,a,n,s){return t[0]=a[0]+n[0]*s,t[1]=a[1]+n[1]*s,t[2]=a[2]+n[2]*s,t[3]=a[3]+n[3]*s,t[4]=a[4]+n[4]*s,t[5]=a[5]+n[5]*s,t}function y$M(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]}function q$b(a,n){const s=a[0],r=a[1],u=a[2],o=a[3],c=a[4],e=a[5],i=n[0],h=n[1],M=n[2],f=n[3],b=n[4],l=n[5];return Math.abs(s-i)<=a$2H*Math.max(1,Math.abs(s),Math.abs(i))&&Math.abs(r-h)<=a$2H*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(u-M)<=a$2H*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(o-f)<=a$2H*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(c-b)<=a$2H*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(e-l)<=a$2H*Math.max(1,Math.abs(e),Math.abs(l))}const _$k=o$L,j$l=d$Z;Object.freeze({__proto__:null,copy:a$1w,identity:n$1y,set:s$1j,invert:r$N,determinant:u$$,multiply:o$L,rotate:c$1x,scale:e$N,translate:i$1j,fromRotation:h$L,fromScaling:M$d,fromTranslation:f$M,str:b$r,frob:l$19,add:m$10,subtract:d$Z,multiplyScalar:p$1D,multiplyScalarAndAdd:x$h,exactEquals:y$M,equals:q$b,mul:_$k,sub:j$l});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h$K="http://www.w3.org/2000/svg";let c$1w=0,f$L=0;const d$Y=s$2l("android"),y$L=s$2l("chrome")||d$Y&&d$Y>=4?"auto":"optimizeLegibility",u$_={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},p$1C=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let g$F={},x$g={};const m$$={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},w$s=Math.PI;function k$e(t,e){const i=t*(w$s/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function j$k(t){return t.map((t=>`${t.command} ${t.values.join(" ")}`)).join(" ").trim()}function b$q(t,e,i,o){if(t){if("circle"===t.type)return n$2o("circle",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,r:t.r});if("ellipse"===t.type)return n$2o("ellipse",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,rx:t.rx,ry:t.ry});if("rect"===t.type)return n$2o("rect",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",x:t.x,y:t.y,width:t.width,height:t.height});if("image"===t.type)return n$2o("image",{href:t.src,x:t.x,y:t.y,width:t.width,height:t.height,preserveAspectRatio:"none"});if("path"===t.type){const o="string"!=typeof t.path?j$k(t.path):t.path;return n$2o("path",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",d:o})}if("text"===t.type)return n$2o("text",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4","text-anchor":o.align,"text-decoration":o.decoration,kerning:o.kerning,rotate:o.rotate,"text-rendering":y$L,"font-style":o.font.style,"font-variant":o.font.variant,"font-weight":o.font.weight,"font-size":o.font.size,"font-family":o.font.family,x:t.x,y:t.y},t.text)}return null}function v$t(e){const i={fill:"none",pattern:null,linearGradient:null};if(e)if("type"in e&&"pattern"===e.type){const t="patternId-"+ ++c$1w;i.fill=`url(#${t})`,i.pattern={id:t,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}};}else if("type"in e&&"linear"===e.type){const o="linearGradientId-"+ ++f$L;i.fill=`url(#${o})`,i.linearGradient={id:o,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map((e=>({offset:e.offset,color:e.color&&new h$1l(e.color).toString()})))};}else if(e){const o=new h$1l(e);i.fill=o.toString();}return i}function A$d(e){const i={color:"none",width:1,cap:"butt",join:"4",dashArray:"none"};if(e&&(null!=e.width&&(i.width=e.width),e.cap&&(i.cap=e.cap),e.join&&(i.join=e.join.toString()),e.color&&(i.color=new h$1l(e.color).toString()),e.style)){let t=null;if(e.style in m$$&&(t=m$$[e.style]),Array.isArray(t)){t=t.slice(0);for(let i=0;i<t.length;++i)t[i]*=e.width;if("butt"!==e.cap){for(let i=0;i<t.length;i+=2)t[i]-=e.width,t[i]<1&&(t[i]=1);for(let i=1;i<t.length;i+=2)t[i]+=e.width;}t=t.join(",");}i.dashArray=t;}return i}function M$c(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};return t&&(i.align=t.align,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"),i}function I$h(t){const{pattern:e,linearGradient:i}=t;if(e)return n$2o("pattern",{id:e.id,patternUnits:"userSpaceOnUse",x:e.x,y:e.y,width:e.width,height:e.height},n$2o("image",{x:e.image.x,y:e.image.y,width:e.image.width,height:e.image.height,href:e.image.href}));if(i){const t=i.stops.map(((t,e)=>n$2o("stop",{key:`${e}-stop`,offset:t.offset,"stop-color":t.color})));return n$2o("linearGradient",{id:i.id,gradientUnits:"userSpaceOnUse",x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},t)}return null}function N$e(t,e,i){return i$1j(t,n$1y(t),[e,i])}function z$9(t,e,i,o,r){return e$N(t,n$1y(t),[e,i]),t[4]=t[4]*e-o*e+o,t[5]=t[5]*i-r*i+r,t}function $$a(t,e,i,o){const r=e%360*Math.PI/180;c$1x(t,n$1y(t),r);const s=Math.cos(r),l=Math.sin(r),h=t[4],c=t[5];return t[4]=h*s-c*l+o*l-i*s+i,t[5]=c*s+h*l-i*l-o*s+o,t}function S$p(t,e){g$F&&"left"in g$F?(g$F.left>t&&(g$F.left=t),g$F.right<t&&(g$F.right=t),g$F.top>e&&(g$F.top=e),g$F.bottom<e&&(g$F.bottom=e)):g$F={left:t,bottom:e,right:t,top:e};}function G$9(t){const e=t.args,i=e.length;let o;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(o=0;o<i;o+=2)S$p(e[o],e[o+1]);x$g.x=e[i-2],x$g.y=e[i-1];break;case"H":for(o=0;o<i;++o)S$p(e[o],x$g.y);x$g.x=e[i-1];break;case"V":for(o=0;o<i;++o)S$p(x$g.x,e[o]);x$g.y=e[i-1];break;case"m":{let t=0;"x"in x$g||(S$p(x$g.x=e[0],x$g.y=e[1]),t=2);for(o=t;o<i;o+=2)S$p(x$g.x+=e[o],x$g.y+=e[o+1]);break}case"l":case"t":for(o=0;o<i;o+=2)S$p(x$g.x+=e[o],x$g.y+=e[o+1]);break;case"h":for(o=0;o<i;++o)S$p(x$g.x+=e[o],x$g.y);break;case"v":for(o=0;o<i;++o)S$p(x$g.x,x$g.y+=e[o]);break;case"c":for(o=0;o<i;o+=6)S$p(x$g.x+e[o],x$g.y+e[o+1]),S$p(x$g.x+e[o+2],x$g.y+e[o+3]),S$p(x$g.x+=e[o+4],x$g.y+=e[o+5]);break;case"s":case"q":for(o=0;o<i;o+=4)S$p(x$g.x+e[o],x$g.y+e[o+1]),S$p(x$g.x+=e[o+2],x$g.y+=e[o+3]);break;case"A":for(o=0;o<i;o+=7)S$p(e[o+5],e[o+6]);x$g.x=e[i-2],x$g.y=e[i-1];break;case"a":for(o=0;o<i;o+=7)S$p(x$g.x+=e[o+5],x$g.y+=e[o+6]);}}function E$e(t,e,i){const o=u$_[t.toLowerCase()];let r;"number"==typeof o&&(o?e.length>=o&&(r={action:t,args:e.slice(0,e.length-e.length%o)},i.push(r),G$9(r)):(r={action:t,args:[]},i.push(r),G$9(r)));}function F$a(t){const e=("string"!=typeof t.path?j$k(t.path):t.path).match(p$1C),i=[];if(g$F={},x$g={},!e)return null;let o="",r=[];const n=e.length;for(let a=0;a<n;++a){const t=e[a],n=parseFloat(t);isNaN(n)?(o&&E$e(o,r,i),r=[],o=t):r.push(n);}E$e(o,r,i);const s={x:0,y:0,width:0,height:0};return g$F&&"left"in g$F&&(s.x=g$F.left,s.y=g$F.top,s.width=g$F.right-g$F.left,s.height=g$F.bottom-g$F.top),s}function T$d(t){const e={x:0,y:0,width:0,height:0};if("circle"===t.type)e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if("ellipse"===t.type)e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if("image"===t.type||"rect"===t.type)e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if("path"===t.type){const i=F$a(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height;}return e}function U$d(t){const e={x:0,y:0,width:0,height:0};let i=null,o=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY;for(const n of t)i?(i.x=Math.min(i.x,n.x),i.y=Math.min(i.y,n.y),o=Math.max(o,n.x+n.width),r=Math.max(r,n.y+n.height)):(i=e,i.x=n.x,i.y=n.y,o=n.x+n.width,r=n.y+n.height);return i&&(i.width=o-i.x,i.height=r-i.y),i}function L$j(t,e,r,n,s,a,l,h){const c=(l&&a?k$e(a,e):e)/2,f=(l&&a?k$e(a,r):r)/2,d=t.width+n,y=t.height+n,u=n$1z(),p=n$1z();let g=!1;if(s&&0!==d&&0!==y){const t=d/y,i=e>r?e:r;let n=1,s=1;isNaN(i)||(t>1?(n=i/d,s=i/t/y):(s=i/y,n=i*t/d)),o$L(p,p,z$9(u,n,s,c,f)),g=!0;}const x=t.x+(d-n)/2,m=t.y+(y-n)/2;if(o$L(p,p,N$e(u,c-x,f-m)),!g&&(d>e||y>r)){const t=d/e>y/r,i=(t?e:r)/(t?d:y);o$L(p,p,z$9(u,i,i,x,m));}return a&&o$L(p,p,$$a(u,a,x,m)),h&&o$L(p,p,N$e(u,h[0],h[1])),`matrix(${p[0]},${p[1]},${p[2]},${p[3]},${p[4]},${p[5]})`}function C$h(t,e,i,o){const r=[],n=[];for(const s of t){const t=[],a=[];let h=0,c=0,f=0;for(const e of s){const{shape:i,fill:o,stroke:n,font:s,offset:l}=e;h+=n&&n.width||0;const d=v$t(o),y=A$d(n),u="text"===i.type?M$c(i,s):null;r.push(I$h(d)),t.push(b$q(i,d.fill,y,u)),a.push(T$d(i)),l&&(c+=l[0],f+=l[1]);}const d=L$j(U$d(a),e,i,h,null==o?void 0:o.scale,null==o?void 0:o.rotation,null==o?void 0:o.useRotationSize,[c,f]);n.push(n$2o("g",{transform:d},t));}return null!=o&&o.useRotationSize&&null!=o&&o.rotation&&(e=k$e(null==o?void 0:o.rotation,e),i=k$e(null==o?void 0:o.rotation,i)),n$2o("svg",{xmlns:h$K,width:e,height:i},n$2o("defs",null,r),n)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$1i=i$2e();function h$J(t,e,i){const n=Math.ceil(e[0]),r=Math.ceil(e[1]);if(!t.some((t=>!!t.length)))return null;const o=i&&i.node||document.createElement("div");return null!=i.opacity&&(o.style.opacity=i.opacity.toString()),null!=i.effect&&(o.style.filter=i.effect),s$1i.append(o,C$h.bind(null,t,n,r,i)),o}function l$18(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const n=i.getContext("2d");return n.clearRect(0,0,t,e),n}function m$_(t,i,n){return t?E$t(t,{responseType:"image"}).then((t=>{const e=t.data,r=e.width,o=e.height,a=r/o;let c=i;if(n){const t=Math.max(r,o);c=Math.min(c,t);}return {image:e,width:a<=1?Math.ceil(c*a):c,height:a<=1?c:Math.ceil(c/a)}})):Promise.reject(new s$29("renderUtils: imageDataSize","href not provided."))}function g$E(t,e){return !(!t||"ignore"===e)&&("multiply"!==e||255!==t.r||255!==t.g||255!==t.b||1!==t.a)}function u$Z(t,e,r,o,a){switch(a){case"multiply":t[e+0]*=r[0],t[e+1]*=r[1],t[e+2]*=r[2],t[e+3]*=r[3];break;default:{const a=y$N({r:t[e+0],g:t[e+1],b:t[e+2]});a.h=o.h,a.s=o.s,a.v=a.v/100*o.v;const c=p$1F(a);t[e+0]=c.r,t[e+1]=c.g,t[e+2]=c.b,t[e+3]*=r[3];break}}}function d$X(e,n,r,a,c){return m$_(e,n,c).then((c=>{const s=c.width?c.width:n,h=c.height?c.height:n;if(c.image&&g$E(r,a)){let t=c.image.width,n=c.image.height;s$2l("edge")&&/\.svg$/i.test(e)&&(t-=1,n-=1);const m=l$18(s,h);m.drawImage(c.image,0,0,t,n,0,0,s,h);const g=m.getImageData(0,0,s,h),d=[r.r/255,r.g/255,r.b/255,r.a],f=y$N(r);for(let e=0;e<g.data.length;e+=4)u$Z(g.data,e,d,f,a);m.putImageData(g,0,0),e=m.canvas.toDataURL("image/png");}else {const i=n$2F&&n$2F.findCredential(e);if(i&&i.token){const t=-1===e.indexOf("?")?"?":"&";e=`${e}${t}token=${i.token}`;}}return {url:e,width:s,height:h}})).catch((function(){return {url:e,width:n,height:n}}))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function a$1v(a){return a=a||e$1Z.location.hostname,e$M.some((c=>{var t;return null!=(null==(t=a)?void 0:t.match(c))}))}function t$P(a,t){return a&&(t=t||e$1Z.location.hostname)?null!=t.match(r$M)||null!=t.match(m$Z)?a.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(n$1x)||null!=t.match(s$1h)?a.replace("static.arcgis.com","staticqa.arcgis.com"):a:a}const r$M=/^devext.arcgis.com$/,n$1x=/^qaext.arcgis.com$/,m$Z=/^[\w-]*\.mapsdevext.arcgis.com$/,s$1h=/^[\w-]*\.mapsqa.arcgis.com$/,e$M=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,r$M,n$1x,/^jsapps.esri.com$/,m$Z,s$1h];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function g$D(t,e,r,l){return t.name?t.styleName&&"Esri2DPointSymbolsStyle"===t.styleName?j$j(t,e,l):m$16(t,e,l).then((o=>h$I(o,t.name,e,r,l))):Promise.reject(new s$29("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function h$I(y,c,g,h,j){const d=y.data,U={portal:g&&g.portal||B$d.getDefault(),url:U$o(y.baseUrl),origin:"portal-item"},N=d.items.find((t=>t.name===c));if(!N){const t=`The symbol name '${c}' could not be found`;return Promise.reject(new s$29("symbolstyleutils:symbol-name-not-found",t,{symbolName:c}))}let w=c$2p(p$1K(N,h),U),P=N.thumbnail&&N.thumbnail.href;const S=N.thumbnail&&N.thumbnail.imageData;a$1v()&&(w=t$P(w),P=t$P(P));const D={portal:g.portal,url:U$o(ht$2(w)),origin:"portal-item"};return b$x(w,j).then((e=>{const r="cimRef"===h?c$1E(e.data):e.data,o=l$1l(r,D);if(o&&x$r(o)){if(P){const t=c$2p(P,U);o.thumbnail=new c$2i({url:t});}else S&&(o.thumbnail=new c$2i({url:`data:image/png;base64,${S}`}));y.styleUrl?o.styleOrigin=new l$1K({portal:g.portal,styleUrl:y.styleUrl,name:c}):y.styleName&&(o.styleOrigin=new l$1K({portal:g.portal,styleName:y.styleName,name:c}));}return o}))}function j$j(t,e,r){const o=j$n.replace(/\{SymbolName\}/gi,t.name);return b$x(o,r).then((t=>{const r=c$1E(t.data);return l$1l(r,{portal:e.portal,url:U$o(ht$2(o)),origin:"portal-item"})}))}

const webStyleSymbolUtils = /*#__PURE__*/Object.freeze({
  __proto__: null,
  fetchSymbolFromStyle: h$I,
  resolveWebStyleSymbol: g$D
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const D$e=22,O$f=120,C$g=80,I$g=40,R$e=20,E$d=s$2h.getLogger("esri.symbols.support.previewSymbol3D");function Z$6(e){const t=e.outline,s=r$1G(e.material)?e.material.color:null,r=r$1G(s)?s.toHex():null;if(t$1O(t)||"pattern"in t&&r$1G(t.pattern)&&"style"===t.pattern.type&&"none"===t.pattern.style)return "fill"===e.type&&"#ffffff"===r?{color:"#bdc3c7",width:.75}:null;const o=u$1E(t.size)||0;return {color:"rgba("+(r$1G(t.color)?t.color.toRgba():"255,255,255,1")+")",width:Math.min(o,C$g),style:"pattern"in t&&r$1G(t.pattern)&&"style"===t.pattern.type?x$k(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}function q$a(t,s){const r=s&&s.resource,o=r&&r.href;if(t.thumbnail&&t.thumbnail.url)return Promise.resolve(t.thumbnail.url);if(o&&"object"!==s.type)return Promise.resolve(d$$(t,s));const a=a$2O("esri/images/Legend/legend3dsymboldefault.png");return t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)?g$D(t.styleOrigin,{portal:t.styleOrigin.portal},"webRef").catch((e=>e)).then((e=>{var t;return (null==e||null==(t=e.thumbnail)?void 0:t.url)||a})):Promise.resolve(a)}function A$c(e,r=1){const o=e.a,a=y$N(e),n=a.h,l=a.s/r,i=100-(100-a.v)/r,{r:c,g:p,b:u}=p$1F({h:n,s:l,v:i});return [c,p,u,o]}function H$8(e){return "water"===e.type?t$1O(e.color)?null:e.color:t$1O(e.material)||t$1O(e.material.color)?null:e.material.color}function N$d(e,t=0){const s=H$8(e);if(!s){if("fill"===e.type)return null;const s=k$h.r,r=u$10(s,t);return [r,r,r,100]}const r=s.toRgba();for(let o=0;o<3;o++)r[o]=u$10(r[o],t);return r}async function T$c(t,s){const r=t.style;if("none"===r)return null;return {type:"pattern",x:0,y:0,src:await w$v(a$2O(`esri/symbols/patterns/${r}.png`),s.toCss(!0)),width:5,height:5}}function $$9(e){return e.outline?Z$6(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function B$9(e,t){const s=H$8(e);if(!s)return null;let r="rgba(";return r+=u$10(s.r,t)+",",r+=u$10(s.g,t)+",",r+=u$10(s.b,t)+",",r+s.a+");"}function F$9(e,t){const s=B$9(e,t);if(!s)return {};if("pattern"in e&&r$1G(e.pattern)&&"style"===e.pattern.type&&"none"===e.pattern.style)return null;return {color:s,width:Math.min(e.size?u$1E(e.size):.75,C$g),style:"pattern"in e&&r$1G(e.pattern)&&"style"===e.pattern.type?x$k(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?"miter"===e.join?u$1E(2):e.join:null}}function G$8(e,t,s){const r=.75*s;return {type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function J$6(e){const t=e.depth,s=e.height,r=e.width;return r&&t&&s&&r===t&&r<s}function K$8(e,t,s){const r=[];if(!e)return r;switch(e.type){case"icon":{const s=0,o=0,a=t,n=t;switch(e.resource&&e.resource.primitive||j$z){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:N$d(e,0),stroke:Z$6(e)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[s,n]},{command:"L",values:[s,o]},{command:"L",values:[a,o]},{command:"L",values:[a,n]},{command:"Z",values:[]}]},fill:N$d(e,0),stroke:Z$6(e)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[s,n]},{command:"L",values:[.5*a,o]},{command:"L",values:[a,n]},{command:"Z",values:[]}]},fill:N$d(e,0),stroke:Z$6(e)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*a,o]},{command:"L",values:[.5*a,n]},{command:"M",values:[s,.5*n]},{command:"L",values:[a,.5*n]}]},stroke:$$9(e)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[s,o]},{command:"L",values:[a,n]},{command:"M",values:[a,o]},{command:"L",values:[s,n]}]},stroke:$$9(e)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[s,.5*n]},{command:"L",values:[.5*a,o]},{command:"L",values:[a,.5*n]},{command:"L",values:[.5*a,n]},{command:"Z",values:[]}]},fill:N$d(e,0),stroke:Z$6(e)});}break}case"object":switch(e.resource&&e.resource.primitive||d$1j){case"cone":{const o=G$8(N$d(e,0),N$d(e,-.6),s?R$e:t),a=n$1A(t,s);r.push({shape:a[0],fill:o}),r.push({shape:a[1],fill:o});break}case"inverted-cone":{const s=N$d(e,0),o=G$8(s,N$d(e,-.6),t),a=o$N(t);r.push({shape:a[0],fill:o}),r.push({shape:a[1],fill:s});break}case"cube":{const o=p$1E(t,s);r.push({shape:o[0],fill:N$d(e,0)}),r.push({shape:o[1],fill:N$d(e,-.3)}),r.push({shape:o[2],fill:N$d(e,-.5)});break}case"cylinder":{const o=G$8(N$d(e,0),N$d(e,-.6),s?R$e:t),a=L$k(t,s);r.push({shape:a[0],fill:o}),r.push({shape:a[1],fill:o}),r.push({shape:a[2],fill:N$d(e,0)});break}case"diamond":{const s=s$1k(t);r.push({shape:s[0],fill:N$d(e,-.3)}),r.push({shape:s[1],fill:N$d(e,0)}),r.push({shape:s[2],fill:N$d(e,-.3)}),r.push({shape:s[3],fill:N$d(e,-.7)});break}case"sphere":{const s=G$8(N$d(e,0),N$d(e,-.6));s.x1=0,s.y1=0,s.x2=.25*t,s.y2=.25*t,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:s});break}case"tetrahedron":{const s=l$1a(t);r.push({shape:s[0],fill:N$d(e,-.3)}),r.push({shape:s[1],fill:N$d(e,0)}),r.push({shape:s[2],fill:N$d(e,-.6)});break}}break}return r}function Q$7(e){return "icon"===e.type?"multiply":"tint"}function V$6(e,t){const s=t&&t.size?u$1E(t.size):null,r=t&&t.maxSize?u$1E(t.maxSize):null,o=t&&t.disableUpsampling,a=e.symbolLayers,n=[];let c=0,p=0;const u=a.getItemAt(a.length-1);let h;return u&&"icon"===u.type&&(h=u.size&&u$1E(u.size)),a.forEach((a=>{if("icon"!==a.type&&"object"!==a.type)return;const l="icon"===a.type?a.size&&u$1E(a.size):0,u=s||l?Math.ceil(Math.min(s||l,r||O$f)):D$e;if(a&&a.resource&&a.resource.href){const t=q$a(e,a).then((function(e){const t=a.get("material.color"),s=Q$7(a);return d$X(e,u,t,s,o)})).then((function(e){const t=e.width,s=e.height;return c=Math.max(c,t),p=Math.max(p,s),[{shape:{type:"image",x:0,y:0,width:t,height:s,src:e.url},fill:null,stroke:null}]}));n.push(t);}else {var m;let e=u;"icon"===a.type&&h&&s&&(e=u*(l/h));const r="tall"===(null==t?void 0:t.symbolConfig)||(null==t||null==(m=t.symbolConfig)?void 0:m.isTall)||"object"===a.type&&J$6(a);c=Math.max(c,r?R$e:e),p=Math.max(p,e),n.push(Promise.resolve(K$8(a,e,r)));}})),T$o(n).then((function(e){const s=[];return e.forEach((function(e){e.value?s.push(e.value):e.error&&E$d.warn("error while building swatchInfo!",e.error);})),h$J(s,[c,p],{node:t&&t.node,scale:!1,opacity:t&&t.opacity})}))}function W$6(e,t){const s=e.symbolLayers,r=[],o=w$u(e),n=t&&t.size?u$1E(t.size):null,l=(t&&t.maxSize?u$1E(t.maxSize):null)||C$g;let c,p=0,u=0;return s.forEach(((e,t)=>{if(!e)return;if("line"!==e.type&&"path"!==e.type)return;const s=[];switch(e.type){case"line":{const r=F$9(e,0);if(t$1O(r))break;const o=r&&r.width||0;0===t&&(c=o);const i=Math.min(n||o,l),h=0===t?i:n?i*(o/c):i,m=h>I$g/2?2*h:I$g;u=Math.max(u,h),p=Math.max(p,m),r.width=h,s.push({shape:{type:"path",path:[{command:"M",values:[0,.5*u]},{command:"L",values:[p,.5*u]}]},stroke:r});break}case"path":{const t=Math.min(n||D$e,l),r=N$d(e,0),o=N$d(e,-.2),a=B$9(e,-.4),i=a?{color:a,width:1}:{};if("quad"===e.profile){const t=e.width,a=e.height,n=e$P(t&&a?t/a:1,0===a,0===t),l={...i,join:"bevel"};s.push({shape:n[0],fill:o,stroke:l}),s.push({shape:n[1],fill:o,stroke:l}),s.push({shape:n[2],fill:r,stroke:l});}else s.push({shape:t$R.pathSymbol3DLayer[0],fill:o,stroke:i}),s.push({shape:t$R.pathSymbol3DLayer[1],fill:r,stroke:i});u=Math.max(u,t),p=u;}}r.push(s);})),Promise.resolve(h$J(r,[p,u],{node:t&&t.node,scale:o,opacity:t&&t.opacity}))}async function X$7(e,t){const s="mesh-3d"===e.type,r=e.symbolLayers,o=t&&t.size?u$1E(t.size):null,l=t&&t.maxSize?u$1E(t.maxSize):null,c=o||D$e,p=[];let u=0,h=0,m=!1;for(let i=0;i<r.length;i++){const e=r.getItemAt(i),t=[];if(s&&"fill"!==e.type)continue;const o=t$R.fill[0];switch(e.type){case"fill":{const r=Z$6(e),a=Math.min(c,l||O$f);u=Math.max(u,a),h=Math.max(h,a),m=!0;let i=N$d(e,0);const p="pattern"in e&&e.pattern,f=H$8(e);!s&&r$1G(p)&&"style"===p.type&&"solid"!==p.style&&f&&(i=await T$c(p,f)),t.push({shape:o,fill:i,stroke:r});break}case"line":{const s=F$9(e,0);if(t$1O(s))break;const r={stroke:s,shape:o};u=Math.max(u,D$e),h=Math.max(h,D$e),t.push(r);break}case"extrude":{const s={join:"round",width:1,...F$9(e,-.4)},r=N$d(e,0),o=N$d(e,-.2),a=Math.min(c,l||O$f),n=m$11(a);s.width=1,t.push({shape:n[0],fill:o,stroke:s}),t.push({shape:n[1],fill:o,stroke:s}),t.push({shape:n[2],fill:r,stroke:s});const i=D$e,p=.7*D$e+.5*a;u=Math.max(u,i),h=Math.max(h,p);break}case"water":{const s=H$8(e),r=A$c(s),o=A$c(s,2),a=A$c(s,3),n=c$1y();m=!0,t.push({shape:n[0],fill:r}),t.push({shape:n[1],fill:o}),t.push({shape:n[2],fill:a});const i=Math.min(c,l||O$f);u=Math.max(u,i),h=Math.max(h,i);break}}p.push(t);}return Promise.resolve(h$J(p,[u,h],{node:t&&t.node,scale:m,opacity:t&&t.opacity}))}function Y$7(e,t){if(0===e.symbolLayers.length)return Promise.reject(new s$29("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return V$6(e,t);case"line-3d":return W$6(e,t);case"polygon-3d":case"mesh-3d":return X$7(e,t)}return Promise.reject(new s$29("symbolPreview: swatchInfo3D","symbol not supported."))}

const previewSymbol3D = /*#__PURE__*/Object.freeze({
  __proto__: null,
  getPatternDescriptor: T$c,
  getSymbolLayerFill: N$d,
  previewSymbol3D: Y$7
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$1g={HH:315,HL:45,LL:135,LH:225},l$17={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function n$1w(t){if(!t)return;const{type:s}=t;if(s.indexOf("3d")>-1)return N$d(t.symbolLayers.getItemAt(0));if("simple-line"===s){const e=j$m(t);return e&&e.color}if("simple-marker"===t.type&&("x"===t.style||"cross"===t.style)){const e=j$m(t);return e&&e.color}return b$v(t)}function H$7(t,o){const e=o.HH.label,r=o.LL.label,s=o.HL.label,l=o.LH.label;switch(t){default:return {top:e,bottom:r,left:s,right:l};case"HL":return {top:s,bottom:l,left:r,right:e};case"LL":return {top:r,bottom:e,left:l,right:s};case"LH":return {top:l,bottom:s,left:e,right:r}}}function i$1i(t){const{focus:o,infos:e,numClasses:r}=t,s=l$17[r],L={};e.forEach((t=>{L[t.value]={label:t.label,fill:n$1w(t.symbol)};}));const i=[];for(let l=0;l<r;l++){const t=[];for(let o=0;o<r;o++){const e=L[s[l][o]];t.push(e.fill);}i.push(t);}return {type:"relationship-ramp",numClasses:r,focus:o,colors:i,labels:H$7(o,L),rotation:f$K(o)}}function f$K(t){let o=s$1g[t];return t&&null==o&&(o=s$1g.HH),o||0}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u$Y=30,c$1v=12,m$Y=[255,255,255],f$J=[200,200,200],p$1B=[128,128,128],y$K=20,b$p=5;function d$W(e){return "esri.symbols.SimpleMarkerSymbol"===e.declaredClass}function h$H(e){return "esri.symbols.PictureMarkerSymbol"===e.declaredClass}function v$s(e){return "esri.symbols.SimpleLineSymbol"===e.declaredClass}function g$C(e){return "esri.symbols.TextSymbol"===e.declaredClass}function w$r(e,l){const t=e.length-1;return e.map(((e,n)=>U$e(e,n,t,l)))}async function S$o(e,l,n,i,o,a){var u,c;const m=l.legendOptions,f=m&&m.customValues,p=V$5(e,n),y=!!p,b=!!f,d=null!=l.minSize&&null!=l.maxSize,h=l.stops&&l.stops.length>1,v=!!l.target;if(!y||!b&&!(d||h&&!v))return;const g=w$u(p);let S=null,k=null,j=null;k=g&&!h?u$13([l.minDataValue,l.maxDataValue]):f||await C$f(l,p,i,o);const L=null==e?void 0:e.authoringInfo,O="univariate-color-size"===(null==L?void 0:L.type),D=O&&"above-and-below"===(null==L?void 0:L.univariateTheme);if(!k&&h&&(k=l.stops.map((e=>e.value)),S=l.stops.some((e=>!!e.label)),S&&(j=l.stops.map((e=>e.label)))),g&&(null==(u=k)?void 0:u.length)>2&&!D&&(k=[k[0],k[k.length-1]]),!k)return null;O&&5!==(null==(c=k)?void 0:c.length)&&(k=I$f({minSize:k[0],maxSize:k[k.length-1]}));const E=g?z$8(e,k):null,T=b$u(p),q=S?null:w$r(k,a);return (await Promise.all(k.map((async(t,n)=>{const s=g?E[n]:await M$b(l,p,t,i,o);return {value:t,symbol:U$c(D&&"class-breaks"===e.type?x$f(e,n):p,s),label:S?j[n]:q[n],size:s,outlineSize:T}})))).reverse()}function z$8(e,l){const t=null==e?void 0:e.authoringInfo,n="univariate-color-size"===(null==t?void 0:t.type);let i=[c$1v,u$Y];if(n){const e=l[0],t=l[l.length-1],n=c$1v,o=u$Y;i=l.map((l=>n+(l-e)/(t-e)*(o-n)));}return n&&"below"===(null==t?void 0:t.univariateTheme)&&i.reverse(),i}function x$f(e,l){const t=e.classBreakInfos,n=t.length,i=n<2||!(l>=2)?t[0].symbol.clone():t[n-1].symbol.clone();return e.visualVariables.some((e=>"color"===e.type))&&(i.type.indexOf("3d")>-1?j$i(i):L$i(i)),i}function V$5(e,l){let t=null,n=null;if("simple"===e.type)t=e.symbol;else if("class-breaks"===e.type){const l=e.classBreakInfos;t=l&&l[0]&&l[0].symbol,n=l.length>1;}else if("unique-value"===e.type){const l=e.uniqueValueInfos;t=l&&l[0]&&l[0].symbol,n=l.length>1;}return !t||k$d(t)?null:(t=t.clone(),(l||n)&&(t.type.indexOf("3d")>-1?j$i(t):L$i(t)),t)}function k$d(e){if(e){if(x$r(e)){return !!e.symbolLayers&&e.symbolLayers.some((e=>e&&"fill"===e.type))}return -1!==e.type.indexOf("fill")}return !1}function j$i(e){"line-3d"===e.type?e.symbolLayers.forEach((e=>{e.material={color:p$1B};})):e.symbolLayers.forEach((e=>{"icon"!==e.type||e.resource&&e.resource.href?e.material={color:f$J}:(e.material={color:m$Y},e.outline={color:p$1B,size:1.5});}));}function L$i(l){"cim"===l.type?I$k(l,new h$1l(f$J)):-1!==l.type.indexOf("line")?l.color=p$1B:(l.color=m$Y,"simple-marker"===l.type&&(l.outline={color:p$1B,width:1.5}));}async function C$f(e,l,n,i){const o=(await Promise.resolve().then(function () { return visualVariableUtils; })).getSizeRangeAtScale(e,n,i),s=o&&I$f(o);if(!o&&!s)return;let r=s.map((l=>O$e(l,e,o)));r=u$13(r);for(let t=1;t<r.length-1;t++){const o=await D$d(e,l,r[t],r[t-1],n,i);o&&(r[t]=o[0],s[t]=o[1]);}return r}function I$f(e){const l=e.minSize,t=e.maxSize,n=b$p,i=(t-l)/(n-1),o=[];for(let s=0;s<n;s++)o.push(l+i*s);return o}function O$e(e,l,t){const n=t.minSize,i=t.maxSize,o=l.minDataValue,s=l.maxDataValue;let r=null;if(e<=n)r=o;else if(e>=i)r=s;else {r=(e-n)/(i-n)*(s-o)+o;}return r}async function D$d(e,l,o,s,r,a){const u=await M$b(e,l,o,r,a),c=await M$b(e,l,s,r,a),m=i$1m(o),f=m.fractional,p=y$K;let b=m.integer,d=null,h=null;o>0&&o<1&&(d=10**f,b=i$1m(o*=d).integer);for(let n=b-1;n>=0;n--){const s=10**n;let m=Math.floor(o/s)*s,f=Math.ceil(o/s)*s;null!=d&&(m/=d,f/=d);let y=(m+f)/2;[,y]=u$13([m,y,f],{indexes:[1]});const b=await M$b(e,l,m,r,a),v=await M$b(e,l,f,r,a),g=await M$b(e,l,y,r,a),w=l$1c(u,b,c,null),S=l$1c(u,v,c,null),z=l$1c(u,g,c,null);let x=w.previous<=p,V=S.previous<=p;if(x&&V&&(w.previous<=S.previous?(x=!0,V=!1):(V=!0,x=!1)),x?h=[m,b]:V?h=[f,v]:z.previous<=p&&(h=[y,g]),h)break}return h}async function M$b(e,l,t,n,i){const{getSize:o}=await Promise.resolve().then(function () { return visualVariableUtils; });return o(e,t,{scale:n,view:i,shape:"simple-marker"===l.type?l.style:null})}function U$c(e,t){const n=e.clone();if(x$r(n))w$u(n)||n.symbolLayers.forEach((e=>{"fill"!==e.type&&(e.size=t);}));else if(d$W(n))n.size=t;else if(h$H(n)){const e=n.width,l=n.height;n.height=t,n.width=t*(e/l);}else v$s(n)?n.width=t:g$C(n)&&n.font&&(n.font.size=t);return n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const J$5=s$2h.getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),Q$6="https://utility.arcgis.com/sharing/tools/legend",H$6="esri.layers.ImageryLayer",X$6="esri.layers.ImageryTileLayer",K$7="esri.layers.WCSLayer",Y$6=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,Z$5=new o$1K({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),ee$4={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},te$4=new y$14({size:6,outline:{color:[128,128,128,.5],width:.5}}),se$4=new S$x({style:"solid"});function le$3(e){return "vector-field"===e.type}function re$4(e){return "raster-colormap"===e.type}function ie$3(e){return "raster-stretch"===e.type}function ne$2(e){return "raster-shaded-relief"===e.type}function ae$3(e){return "esri.renderers.SimpleRenderer"===e.declaredClass}function oe$4(e){return "esri.renderers.ClassBreaksRenderer"===e.declaredClass}function ue$3(e){return "esri.renderers.UniqueValueRenderer"===e.declaredClass}function ce$3(e){return "esri.renderers.HeatmapRenderer"===e.declaredClass}function de$3(e){return he$2(e)||me$2(e)||pe$3(e)||ye$2(e)}function ye$2(e){return "esri.renderers.PointCloudRGBRenderer"===e.declaredClass}function he$2(e){return "esri.renderers.PointCloudClassBreaksRenderer"===e.declaredClass}function me$2(e){return "esri.renderers.PointCloudStretchRenderer"===e.declaredClass}function pe$3(e){return "esri.renderers.PointCloudUniqueValueRenderer"===e.declaredClass}function fe$3(e){return "esri.renderers.DotDensityRenderer"===e.declaredClass}function ge$2(e,t){return ae$3(e)||oe$4(e)||ue$3(e)||ce$3(e)||fe$3(e)?"2d"===t.type||o$S(e):ie$3(e)||re$4(e)||ne$2(e)||he$2(e)||me$2(e)||pe$3(e)||le$3(e)}function be(e){return "esri.layers.BuildingSceneLayer"===e.declaredClass}function Se$1(e){return "esri.layers.WMSLayer"===e.declaredClass}function _e$1(e){return "esri.layers.WMTSLayer"===e.declaredClass}function ve(e){return "esri.layers.MapImageLayer"===e.declaredClass}function we$2(e){return "esri.layers.TileLayer"===e.declaredClass}function Le$1(e){return "esri.layers.FeatureLayer"===e.declaredClass}function Ee$1(e){return e.declaredClass===H$6}function Ie(e){return e.declaredClass===X$6}function Ce$1(e){return e.declaredClass===K$7}function Re$2(e){return "stretch-ramp"===e.type}function Fe$1(e){const t="authoringInfo"in e&&(null==e?void 0:e.authoringInfo);return "univariate-color-size"===(null==t?void 0:t.type)}function Ve$1(e){const t="authoringInfo"in e&&(null==e?void 0:e.authoringInfo);return "univariate-color-size"===(null==t?void 0:t.type)&&"above-and-below"===(null==t?void 0:t.univariateTheme)}const Te$1=new y$14({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let ze={},xe$1=class extends p$33{constructor(e){super(e),this._handles=new u$1X,this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this.children=new S$F,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null;}initialize(){const e=()=>this.notifyChange("ready");this._handles.add([$$f(this,"children","change",(t=>{const{added:s,removed:l}=t,r=this._handles;s.forEach((t=>{const s=`activeLayerInfo-ready-watcher-${t.layer.uid}`;r.add(i$2i(t,"ready",e),s);})),l.forEach((e=>r.remove(e.layer.uid))),e();}))]),this.keepCacheOnDestroy||(ze={});}destroy(){this._handles.destroy(),this._handles=null,this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(ze=null);}get effect(){const e=this.layer;let t=null;if("effect"in e&&e.effect){const s=new r$$(0);s.effect=e.effect,s.transitionStep(0,this.scale);const l=s.effects.filter((e=>"bloom"!==e.type)),r=l.map((e=>e.toJSON()));t=f$Y(r);}return t}get opacity(){var e;const t=this.layer.opacity,s=null==(e=this.parent)?void 0:e.opacity,l=this.layer.parent,r=l&&"uid"in l?this._getParentLayerOpacity(l):null;return null!=s?s*t:null!=r?r*t:t}get ready(){return null===this.layer||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view&&this.view.scale}get isScaleDriven(){const e=this.layer;if(null===e)return !1;if("effect"in e&&e.effect&&Array.isArray(e.effect))return !0;if("featureReduction"in e&&e.featureReduction&&"cluster"===e.featureReduction.type)return !0;if("renderer"in e&&e.renderer){if("dot-density"===e.renderer.type)return !0;const t=e.get("renderer.valueExpression");if(Y$6.test(t))return !0;const s=e.get("renderer.visualVariables");if(s)return s.some((e=>this._isScaleDrivenSizeVariable(e)))}return this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(e){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const t=Array.from(e,(e=>{if(Le$1(e))return this._getRendererLegendElements(e.renderer,{title:e.title});if(e.featureSet&&e.featureSet.features.length){const t=e.layerDefinition,s=t&&t.drawingInfo,l=s&&t$V(s.renderer),r=Z$5.read(t.geometryType);return l?this._getRendererLegendElements(l,{title:e.name,geometryType:r}):(J$5.warn("drawingInfo not available!"),null)}return null}));try{const e=[];await T$o(t).then((t=>{t.forEach((({value:t})=>t&&e.push(...t)));})),this.legendElements=e,this.notifyChange("ready");}catch(s){J$5.warn("error while building legend for layer!",s);}}async buildLegendElementsForRenderer(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getRendererLegendElements(e):[],this.notifyChange("ready");}catch(t){J$5.warn("error while building legend for layer!",t);}}async buildLegendElementsForTools(){const e=this.layer;if(_e$1(e))this._constructLegendElementsForWMTSlayer();else if(Se$1(e))await this._constructLegendElementsForWMSSublayers();else if(be(e))await this._constructLegendElementsForBuildingSceneLayer();else if(ve(e)||we$2(e)||be(e))await this._constructLegendElementsForSublayers();else {this._handles.remove("imageryLayers-watcher");let l="default";if(Ee$1(e)){var t,s;const r=e;l=((null==r||null==(t=r.renderingRule)?void 0:t.functionName)||"default")+"_"+(null!=(s=e.bandIds)&&s.length?e.bandIds.join(""):"###");}await this._getLegendLayers(`${e.uid}-${l}`).then((async t=>{this.legendElements=[],this.notifyChange("ready");const s=t.map((async t=>{if(Ee$1(e)||Ie(e)){const t=e.watch(["renderingRule","bandIds"],(()=>z$r((async()=>{ze.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools();}))()));this._handles.add(t,"imageryLayers-watcher");}const s=this._generateSymbolTableElementForLegendLayer(t);s&&s.infos.length&&(Ee$1(e)&&(s.title=e.title),this.legendElements.push(s)),this.notifyChange("ready");}));await T$o(s);})).catch((e=>{J$5.warn("Request to server for legend has failed!",e);}));}}async _isLayerInCurrentView(){const e=this.layer,t=this.layerView,s=t&&"createQuery"in t&&"queryFeatureCount"in t;if(!s&&!(t&&"createQuery"in e&&"queryFeatureCount"in e))return !0;await g$10(t,"updating");const l=s?"createQuery"in t&&t.createQuery():"createQuery"in e&&e.createQuery();l.geometry=this.view.extent;return 0!==(s?"queryFeatureCount"in t&&await t.queryFeatureCount(l):"queryFeatureCount"in e&&await e.queryFeatureCount(l))}_getParentLayerOpacity(e){let t=1;const s=e.parent;return s&&"uid"in s&&(t=this._getParentLayerOpacity(s)),e.opacity*t}_isGroupActive(){const e=this.children;return !!e.length&&e.some((e=>e.ready))}_isScaleDrivenSizeVariable(e){if(e&&"size"!==e.type)return !1;const t=e,s=t.minSize,l=t.maxSize;return "object"==typeof s&&s?this._isScaleDrivenSizeVariable(s):"object"==typeof l&&l?this._isScaleDrivenSizeVariable(l):!!t.expression||Y$6.test(t.valueExpression)}_isLayerScaleDriven(e){if("minScale"in e&&e.minScale>0||"maxScale"in e&&e.maxScale>0)return !0;if("sublayers"in e&&e.sublayers)return e.sublayers.some((e=>this._isLayerScaleDriven(e)));const t=e.parent;if(!1===e.loaded&&t&&ve(t)&&"source"in e&&e.source&&"map-layer"===e.source.type)for(const s of t.sourceJSON.layers)if(s.id===e.source.mapLayerId&&(s.minScale>0||s.maxScale>0))return !0;return !1}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this._handles.remove("wmts-activeLayer-watcher");const e=this.layer.activeLayer;if(this._handles.add(f$1p(this.layer,"activeLayer",(()=>this._constructLegendElementsForWMTSlayer())),"wmts-activeLayer-watcher"),e.styleId&&e.styles){let t=null;e.styles.some((s=>e.styleId===s.id&&(t=s.legendUrl,!0))),t&&(this.legendElements=[{type:"symbol-table",title:e.title,infos:[{src:t,opacity:this.opacity}]}]);}this.notifyChange("ready");}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this._handles.remove("wms-sublayers-watcher");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t={...e.customParameters,...e.customLayerParameters}),this._handles.add(f$1p(this.layer,"sublayers",(()=>this._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange("ready");}async _generateLegendElementsForWMSSublayers(e,t){const s=[];this._handles.add(e.on("change",(()=>this._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher");const l=e.toArray();for(const r of l){const e=r.watch(["title","visible","legendEnabled"],(()=>this._constructLegendElementsForWMSSublayers()));if(this._handles.add(e,"wms-sublayers-watcher"),!this.respectLayerVisibility||r.visible&&r.legendEnabled){const e=await this._generateSymbolTableElementForWMSSublayer(r,t);e&&e.infos.length&&s.unshift(e);}}return s}async _generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const s=(await this._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter((e=>e));return {type:"symbol-table",title:e.title,infos:s}}return this._generateSymbolTableElementForLegendUrl(e,t)}async _generateSymbolTableElementForLegendUrl(e,t){var s;let r=e.legendUrl;if(!r)return;const i={type:"symbol-table",title:e.title||e.name||e.id&&e.id+"",infos:[]};t&&(r=Rt$1(r,t));let n=null;const a=null==(s=e.layer)?void 0:s.opacity;try{n=(await E$t(r,{responseType:"image"})).data,n&&(n.style.opacity=a);}catch{}return i.infos.push({src:r,preview:n,opacity:a}),i}_getLegendLayers(e,t){const s=ze&&ze[e];return s?Promise.resolve(s):this._legendRequest(t).then((t=>{const s=t.layers;return ze[e]=s,s}))}_legendRequest(e){const t=this.layer;let s={f:"json",dynamicLayers:e};if(Ee$1(t)){const e=t.exportImageServiceParameters.renderingRule;if(e&&(s.renderingRule=JSON.stringify(e.toJSON())),t.bandIds&&(s.bandIds=t.bandIds.join()),t.raster||t.viewId||t.customParameters){const{raster:e,viewId:l,customParameters:r}=t;s={raster:e,viewId:l,...s,...r};}}let r=t.url.replace(/(\/)+$/,"");if("version"in t&&t.version>=10.01){const e=r.indexOf("?");e>-1?r=r.substring(0,e)+"/legend"+r.substring(e):r+="/legend";}else {const e=r.toLowerCase().indexOf("/rest/"),t=r.substring(0,e)+r.substring(e+5,r.length);r=Q$6+"?soapUrl="+encodeURI(t)+"&returnbytes=true";}return E$t(r,{query:s}).then((e=>e.data))}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this._handles.remove("sublayers-watcher");const e=this.layer;this._handles.add(f$1p(e,"sublayers",(()=>this._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity),this.notifyChange("ready");}catch(t){J$5.warn("Request to server for legend has failed!",t);}}async _generateLegendElementsForBuildingSublayers(e,t){let s=[];this._handles.add(e.on("change",(()=>this._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");const l=e.toArray();for(const r of l){const e=r.watch(["renderer","opacity","title","visible"],(()=>this._constructLegendElementsForBuildingSceneLayer()));if(this._handles.add(e,"sublayers-watcher"),!this.respectLayerVisibility||r.visible){const e=r&&null!=r.opacity?r.opacity:null,l=null!=e?e*t:t;if("building-group"===r.type){const e={type:"symbol-table",title:r.title,infos:[]},t=await this._generateLegendElementsForBuildingSublayers(r.sublayers,l);e.infos.push(...t),s=[e,...s];}else if(r.renderer){s=[...await this._getRendererLegendElements(r.renderer,{title:r.title,opacity:l,sublayer:r}),...s];}}}return s.filter((e=>!!e&&(!("infos"in e)||e.infos.length>0)))}async _constructLegendElementsForSublayers(){this.legendElements=[],this._handles.remove("sublayers-watcher");const e=this.layer;this._handles.add(f$1p(e,"sublayers",(()=>this._constructLegendElementsForSublayers)),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity),this.notifyChange("ready");}catch(t){J$5.warn("Request to server for legend has failed!",t);}}async _generateLegendElementsForSublayers(e,t,s){const l=this.layer;let r=[];this._handles.add(e.on("change",(()=>this._constructLegendElementsForSublayers())),"sublayers-watcher");let i=e.toArray();!s&&this.sublayerIds&&this.sublayerIds.length&&(i=this.sublayerIds.map((e=>l.findSublayerById(e))).filter(Boolean));for(const n of i){const e=n.watch("renderer, opacity, title, visible, legendEnabled",(()=>this._constructLegendElementsForSublayers()));if(this._handles.add(e,"sublayers-watcher"),!this.respectLayerVisibility||n.visible&&n.legendEnabled&&this._isSublayerInScale(n)){const e=n&&null!=n.opacity?n.opacity:null,l=null!=e?e*t:t;if(n.renderer&&!n.sublayers&&n.originIdOf("renderer")>2){await n.load();r=[...await this._getRendererLegendElements(n.renderer,{title:n.title,opacity:l,sublayer:n}),...r];}else {const e=await this._generateSymbolTableElementForSublayer(n,l,s);e&&r.unshift(e);}}}return r.filter((e=>!!e&&(!("infos"in e)||e.infos.length>0)))}async _generateSymbolTableElementForSublayer(e,t,s){if(!s){s=new Map;const t=this.layer,l=e.source;let r=null;if(!(!l||"map-layer"===l.type&&l.mapLayerId===e.id&&(!l.gdbVersion||l.gdbVersion===("gdbVersion"in t&&t.gdbVersion)))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("labelsVisible")>2){const e=new c$20({layer:this.layer});r=e.hasDynamicLayers?e.dynamicLayers:null,e.destroy();}const i=r||`${t.uid}-default`;(await this._getLegendLayers(i,r)).forEach((e=>s.set(e.layerId,e)));}const l=s.get(e.id);if(!l&&e.sublayers){const l=await this._generateLegendElementsForSublayers(e.sublayers,t,s);return {type:"symbol-table",title:e.title,infos:l}}return this._generateSymbolTableElementForLegendLayer(l,e,t)}_generateSymbolTableElementForLegendLayer(e,t,s){var l;if(!e||!e.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const r=null==t?void 0:t.renderer;let i=(null==t?void 0:t.title)||e.layerName;if(r&&(!t||(null==t?void 0:t.originIdOf("renderer"))>2)){const e=(null==t?void 0:t.title)||this._getRendererTitle(r,t);e&&(i&&"string"!=typeof e&&"title"in e&&(e.title=i),i=e);}const n={type:"symbol-table",title:i,legendType:e.legendType?e.legendType:null,infos:[]},a=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return (null==(l=e.legendGroups)?void 0:l.length)>0?e.legendGroups.forEach((t=>{var l;const r={type:"symbol-table",title:t.heading,legendType:e.legendType?e.legendType:null,infos:this._generateSymbolTableElementInfosForLegendLayer(a.filter((e=>e.groupId===t.id)),e.layerId,s)};(null==(l=r.infos)?void 0:l.length)>0&&n.infos.push(r);})):n.infos=this._generateSymbolTableElementInfosForLegendLayer(a,e.layerId,s),n.infos.length>0?n:null}_generateSymbolTableElementInfosForLegendLayer(e,t,l){return e.map((e=>{let r=e.url;if(e.imageData&&e.imageData.length>0)r=`data:image/png;base64,${e.imageData}`;else {if(0===r.indexOf("http"))return null;r=i$2p(`${this.layer.url}/${t}/images/${r}`);}return {label:e.label,src:r,opacity:null==l?this.opacity:l,width:e.width,height:e.height}})).filter((e=>!!e))}_isSublayerInScale(e){const t=e.minScale||0,s=e.maxScale||0;return !(t>0&&t<this.scale||s>this.scale)}_isLegendLayerInScale(e,t){const s=t||this.layer;let l=null,r=null,i=!0;return !s.minScale&&0!==s.minScale||!s.maxScale&&0!==s.maxScale?(0===e.minScale&&s.tileInfo&&(l=s.tileInfo.lods[0].scale),0===e.maxScale&&s.tileInfo&&(r=s.tileInfo.lods[s.tileInfo.lods.length-1].scale)):(l=Math.min(s.minScale,e.minScale)||s.minScale||e.minScale,r=Math.max(s.maxScale,e.maxScale)),(l>0&&l<this.scale||r>this.scale)&&(i=!1),i}_sanitizeLegendForSublayer(e,t){if("version"in this.layer&&this.layer.version<10.1||0===e.length)return e;const s=t.renderer,l=e.some((e=>e.values));let r=null,i=null;return l&&e.some(((e,t)=>(e.values||(r=t,i=e,i.label||(i.label="others")),null!=i))),s?"unique-value"===s.type?i&&(e.splice(r,1),e.push(i)):"class-breaks"===s.type&&(i&&e.splice(r,1),e.reverse(),i&&e.push(i)):i&&(e.splice(r,1),e.push(i)),e}async _getRendererLegendElements(e,t={}){return ge$2(e,this.view)?de$3(e)?this._constructPointCloudRendererLegendElements(e,t):fe$3(e)?this._constructDotDensityRendererLegendElements(e):this._constructRendererLegendElements(e,t):(J$5.warn(`Renderer of type '${e.type}' not supported!`),[])}_getPointCloudRendererTitle(e){return e.legendOptions&&e.legendOptions.title||e.field}_constructPointCloudRendererLegendElements(e,t={}){const s=t.title,l=[];let r=null,i=null;if(he$2(e))r={type:"symbol-table",title:s||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach((e=>{r.infos.unshift({label:e.label||e.minValue+" - "+e.maxValue,value:[e.minValue,e.maxValue],symbol:this._getAppliedCloneSymbol(te$4,e.color)});}));else if(me$2(e)){const t=e.stops;let l=null;if(t.length&&(1===t.length&&(l=t[0].color),!l)){const e=t[0].value,s=t[t.length-1].value;if(null!=e&&null!=s){l=u$12(e+(s-e)/2,t);}}r={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(te$4,l||te$4.color)}]};const n=a$1z(e.stops);i={type:"color-ramp",title:s||this._getPointCloudRendererTitle(e),infos:n,preview:p$1G(n.map((e=>e.color)))};}else pe$3(e)&&(r={type:"symbol-table",title:s||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos.forEach((e=>{r.infos.push({label:e.label||e.values.join(", "),value:e.values.join(", "),symbol:this._getAppliedCloneSymbol(te$4,e.color)});})));r&&r.infos.length&&l.push(r),i&&i.infos.length&&l.push(i);const n=l.reduce(((e,t)=>e.concat(t.infos)),[]).filter((e=>!!e.symbol)).map((t=>this._getSymbolPreview(t,this.opacity,{symbolConfig:{applyColorModulation:!!e.colorModulation}})));return T$o(n).then((()=>l))}_getElementInfoForDotDensity(e,t){const{backgroundColor:s,outline:l,dotSize:r}=e,i=this.effect,n=r+"-"+t+"-"+s+"-"+(l&&JSON.stringify(l.toJSON()))+"-"+i,a=this._dotDensityUrlCache,o=a.has(n)?a.get(n):y$O(e,t,{effect:i});return a.set(n,o),{opacity:1,src:o.src,preview:o,width:o.width,height:o.height}}_constructDotDensityRendererLegendElements(e){const t=e.calculateDotValue(this.view.scale),s=e.legendOptions&&e.legendOptions.unit,l={type:"symbol-table",title:{value:t&&Math.round(t),unit:s||""},infos:[]};return e.attributes.forEach((t=>{const s=this._getElementInfoForDotDensity(e,t.color);s.label=t.label||t.valueExpressionTitle||t.field,l.infos.push(s);})),Promise.resolve([l])}async _constructRendererLegendElements(e,t={}){const{title:s,sublayer:l}=t,r=l||this.layer;let i=await this._loadRenderer(e);this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const n=await this._getVisualVariableLegendElements(i,r)||[],a={type:"symbol-table",title:s||this._getRendererTitle(i,r),infos:[]};let o=null,c=!1;const y=new Set;if(Fe$1(i)){let e=s;const t=Ve$1(i)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",l=n.findIndex((e=>"color-ramp"===e.type)),r=-1!==l?n.splice(l,1)[0]:null,a=n.findIndex((e=>"size-ramp"===e.type)),o=-1!==a?n.splice(a,1)[0]:null,u=[];r&&(e=r.title,u.push(r)),o&&(e=o.title,u.push(o)),u.length>0&&n.push({type:t,title:e,infos:u});}else if(ce$3(i)){const e=r$Q(i);n.push({type:"heatmap-ramp",title:s,infos:e,preview:p$1G(e.map((e=>e.color)),{effect:this.effect})});}else if(ue$3(i)){const e=i&&i.authoringInfo;if(e&&"relationship"===e.type){const{focus:t,numClasses:s,field1:l,field2:o}=e;if(s&&l&&o){const e=[l,o];let u=f$K(t)||0;for(const t of e){const{field:e,normalizationField:s,label:l}=t,i=l||{field:this._getFieldAlias(e,r),normField:s&&this._getFieldAlias(s,r)},n=Te$1.clone();n.angle=u,a.infos.push({label:i,symbol:n}),y.add(n),u+=90;}const c=i$1i({focus:t,numClasses:s,infos:i.uniqueValueInfos});n.unshift(c);}}else {const e=i.field;i.uniqueValueInfos.forEach((t=>{t.symbol&&a.infos.push({label:t.label||this._getDomainName(e,t.value,r)||t.value,value:t.value,symbol:t.symbol});}));}i.defaultSymbol&&(a.infos.push({label:i.defaultLabel||"others",symbol:i.defaultSymbol}),c=!0);}else if(oe$4(i)){o=this._isUnclassedRenderer(i);(!o||!this._hasSizeRamp)&&(i.classBreakInfos.forEach((e=>{e.symbol&&a.infos.unshift({label:e.label||(o?null:e.minValue+" - "+e.maxValue),value:[e.minValue,e.maxValue],symbol:e.symbol});})),o&&(a.title=null),this._updateInfosforClassedSizeRenderer(i,a.infos)),i.defaultSymbol&&!o&&(a.infos.push({label:i.defaultLabel||"others",symbol:i.defaultSymbol}),c=!0);}else if(ie$3(i)){var h,m;if(Ie(this.layer)&&"Map"===(null==(h=this.layer)||null==(m=h.raster)?void 0:m.tileType))this._getServerSideLegend();else if(Ie(this.layer)||Ce$1(this.layer)){const e=this._constructTileImageryStretchRendererElements(i);Re$2(e)?n.push(e):a.infos=e;}else {const e=this.layer;let t,s;var p,f;if(i.statistics&&i.statistics.length)t=null!=i.statistics[0].min?i.statistics[0].min:i.statistics[0][0],s=null!=i.statistics[0].max?i.statistics[0].max:i.statistics[0][1];else t=null==(p=i)?void 0:p.outputMin,s=null==(f=i)?void 0:f.outputMax;let l=[];const r=e$1Y(e.renderingRule?await e.generateRasterInfo(e.renderingRule):e.serviceRasterInfo),o=r.keyProperties.BandProperties;1===r.bandCount?(t=null!=t?t:r.statistics&&r.statistics[0].min,s=null!=s?s:r.statistics&&r.statistics[0].max,t||s?n.push(this._getStretchLegendElements(i,{min:t,max:s})):this._getServerSideLegend()):e.bandIds&&1===e.bandIds.length?(t=null!=t?t:r.statistics&&r.statistics[e.bandIds[0]].min,s=null!=s?s:r.statistics&&r.statistics[e.bandIds[0]].max,t||s?n.push(this._getStretchLegendElements(i,{min:t,max:s})):this._getServerSideLegend()):r.bandCount>=3?o&&o.length>=r.bandCount?e.bandIds&&3===e.bandIds.length?(l=e.bandIds.map((e=>o[e].BandName)),a.infos=this._createSymbolTableElementMultiBand(l)):"lerc"===e.format?(l=[0,1,2].map((e=>o[e].BandName)),a.infos=this._createSymbolTableElementMultiBand(l)):this._getServerSideLegend():"lerc"===e.format?(l=["band1","band2","band3"],a.infos=this._createSymbolTableElementMultiBand(l)):this._getServerSideLegend():this._getServerSideLegend();}}else if(re$4(i))i.colormapInfos.forEach((e=>{a.infos.push({label:e.label,value:e.value,symbol:this._getAppliedCloneSymbol(se$4,e.color)});}));else if(ae$3(i)){let e=i.symbol;switch(t.geometryType){case"point":e="pointSymbol"in r&&r.pointSymbol;break;case"polyline":e="lineSymbol"in r&&r.lineSymbol;break;case"polygon":e="polygonSymbol"in r&&r.polygonSymbol;}i.symbol&&!this._hasSizeRamp&&a.infos.push({label:i.label,symbol:e});}else if(le$3(i)){i.outputUnit&&(this.title="("+i.toJSON().outputUnit+")"),a.title=i.attributeField;const e=i.getClassBreakInfos();null!=e&&e.length?e.forEach((e=>{a.infos.push({label:e.minValue+" - "+e.maxValue,symbol:e.symbol});})):a.infos.push({label:i.attributeField,symbol:i.getDefaultSymbol()});}else ne$2(i)&&n.push(this._getStretchLegendElements(i,{min:0,max:255}));const g=i.defaultSymbol;!g||c||ae$3(i)||o&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||n.push({type:"symbol-table",infos:[{label:i.defaultLabel||"others",symbol:g}]}),a.infos.length&&n.unshift(a);const b=null==t.opacity?this.opacity:t.opacity,S=this._isTallSymbol("visualVariables"in i&&i.visualVariables),_=Ee$1(this.layer)||Ie(this.layer),v=n.reduce(((e,t)=>e.concat(this._getAllInfos(t))),[]).filter((e=>!(null==e||!e.symbol))).map((e=>this._getSymbolPreview(e,b,{isDefault:e.symbol===g,applyScaleDrivenSize:!y.has(e.symbol),symbolConfig:{isTall:S,isSquareFill:_},effect:y.has(e.symbol)?null:this.effect})));return i=null,await T$o(v),n}_getServerSideLegend(){setTimeout((()=>this.buildLegendElementsForTools()),0);}_getAllInfos(e){const t=null==e?void 0:e.infos;return t?t.reduce(((e,t)=>e.concat(this._getAllInfos(t))),[]):[e]}_constructTileImageryStretchRendererElements(e){var t,s;const l=this.layer,r=l.rasterInfo,i=r.bandCount||e.statistics.length;let n,a,o=[];const u=r.keyProperties&&r.keyProperties.BandProperties,c=null!=e&&null!=(t=e.statistics)&&t.length?e.statistics:null==r?void 0:r.statistics;if(c)n=void 0!==c[0].min?c[0].min:c[0][0],a=c[0].max||c[0][1];else {const e=ee$4[l.rasterInfo.pixelType.toLowerCase()];n=e[0],a=e[1];}if(l.hasStandardTime()&&(n=l.getStandardTimeValue(n),a=l.getStandardTimeValue(a)),1===r.bandCount||1===(null==(s=l.bandIds)?void 0:s.length))return this._getStretchLegendElements(e,{min:n,max:a});function d(e){var t;const s=(null!=l&&null!=(t=l.bandIds)&&t.length?l.bandIds:Array.from(Array(Math.min(r.bandCount,3)).keys())).map((t=>e&&e[t]&&e[t].BandName||"band"+(t+1)));return s.length<3?s.push(s[1]):s.length>3&&s.splice(3),s}return o=u&&u.length>=i?d(u):d(),this._createSymbolTableElementMultiBand(o)}_getStretchLegendElements(e,t){const s=e.colorRamp,l=i$1l(s,t);return {type:"stretch-ramp",title:"",infos:l,preview:p$1G(l.map((e=>e.color)))}}_createSymbolTableElementMultiBand(e){const t=[],s=["red","green","blue"];return e.forEach(((e,l)=>{t.push({label:{colorName:s[l],bandName:e},src:e$R[l],opacity:1});})),t}_updateInfosforClassedSizeRenderer(e,t){const s=e.authoringInfo&&"class-breaks-size"===e.authoringInfo.type,l=e.classBreakInfos.some((e=>w$u(e.symbol)));if(s&&l){const s=u$Y,l=c$1v,r=e.classBreakInfos.length,i=(s-l)/(r>1?r-1:r);t.forEach(((e,t)=>{e.size=s-i*t;}));}}_isTallSymbol(e){let t=!1,s=!1;if(e)for(let l=0;l<e.length&&(!t||!s);l++){const r=e[l];"size"===r.type&&("height"===r.axis&&(t=!0),"width-and-depth"===r.axis&&(s=!0));}return t&&s}async _getSymbolPreview(e,t,s){let l=null!=s&&s.isDefault||null!=e.size||!this._hasSizeRamp?e.size:e$1g(22);if(this._scaleDrivenSizeVariable&&null!=s&&s.applyScaleDrivenSize){const{getSize:t}=await Promise.resolve().then(function () { return visualVariableUtils; });l=t(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:"simple-marker"===e.symbol.type?e.symbol.style:null});}return h$O(e.symbol,{size:l,opacity:t,scale:!1,symbolConfig:null==s?void 0:s.symbolConfig,effect:null==s?void 0:s.effect}).then((t=>(e.preview=t,e))).catch((()=>(e.preview=null,e)))}async _loadRenderer(e){var t,s;const l=[],r=this.layer;e=e.clone(),this._hasClusterSizeVariable=!1;const i="visualVariables"in e&&(null==(t=e.visualVariables)?void 0:t.some((e=>"size"===e.type&&"outline"!==e.target&&!Y$6.test(e.valueExpression))));if(e&&"visualVariables"in e&&!i&&"featureReduction"in r&&"cluster"===(null==(s=r.featureReduction)?void 0:s.type)){const t=this.layerView._effectiveRenderer,s=e$1Y(a$1A(t,this.view));if(s){const t=r.featureReduction;if("clusterMinSize"in t&&"clusterMaxSize"in t){const{clusterMinSize:e,clusterMaxSize:l}=t;s.legendOptions=new a$1V({showLegend:e!==l});}const l=e.visualVariables||[];e.visualVariables=l.concat([s]),this._hasClusterSizeVariable=!0;}}const n=await this._getMedianColor(e);if(oe$4(e)||ue$3(e)){const t=(e.classBreakInfos||e.uniqueValueInfos).map((e=>this._fetchSymbol(e.symbol,n).then((t=>{e.symbol=t;})).catch((()=>{e.symbol=null;}))));Array.prototype.push.apply(l,t);}return l.push(this._fetchSymbol(e.symbol||e.defaultSymbol,e.defaultSymbol?null:n).then((t=>{this._applySymbolToRenderer(e,t,ae$3(e));})).catch((()=>{this._applySymbolToRenderer(e,null,ae$3(e));}))),T$o(l).then((()=>e))}_applySymbolToRenderer(e,t,s){s?e.symbol=t:e.defaultSymbol=t;}async _getMedianColor(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find((e=>"color"===e.type));if(!t)return null;let s=null,l=null;if(t.stops){if(1===t.stops.length)return t.stops[0].color;s=t.stops[0].value,l=t.stops[t.stops.length-1].value;}const r=s+(l-s)/2,{getColor:i}=await Promise.resolve().then(function () { return visualVariableUtils; });return i(t,r)}_fetchSymbol(e,t){if(!e)return Promise.reject();if("web-style"===e.type){const s=e.portal,l=s&&s.url,r=s&&s.user&&s.user.username,i=e.name+"-"+e.styleName+"-"+e.styleUrl+"-"+l+"-"+r,n=this._webStyleSymbolCache;return n.has(i)||("2d"===this.view.type?n.set(i,e.fetchCIMSymbol()):n.set(i,e.fetchSymbol())),n.get(i).then((e=>this._getAppliedCloneSymbol(e,t))).catch((()=>(J$5.warn("Fetching web-style failed!"),Promise.reject())))}return Promise.resolve(this._getAppliedCloneSymbol(e,t))}_getAppliedCloneSymbol(e,s){if(!e||!s)return e;const l=e.clone(),r=s&&s.toRgba();return l.type.indexOf("3d")>-1?this._applyColorTo3dSymbol(l,r):"cim"===l.type?I$k(l,s):l.color&&(l.color=new h$1l(r||l.color)),l}_applyColorTo3dSymbol(e,s){s&&e.symbolLayers.forEach((e=>{e&&(e.material||(e.material={}),e.material.color=new h$1l(s));}));}async _getVisualVariableLegendElements(e,t){if(!("visualVariables"in e)||!e.visualVariables||"vector-field"===e.type)return null;const s=e.visualVariables,l=[],r=[],i=[];for(const c of s)"color"===c.type?l.push(c):"size"===c.type?r.push(c):"opacity"===c.type&&i.push(c);const n=[...l,...r,...i];let a,o;if(0===l.length&&oe$4(e)&&e.classBreakInfos&&1===e.classBreakInfos.length){const t=e.classBreakInfos[0];a=t&&t.symbol;}if(0===l.length&&ae$3(e)&&(a=e.symbol),a)if(a.type.indexOf("3d")>-1){const e=a.symbolLayers.getItemAt(0);"water"===e.type?r$1G(e.color)&&(o=e.color):r$1G(e.material)&&r$1G(e.material.color)&&(o=e.material.color);}else a.url||(o=a.color);const u=this.effect;return (await Promise.all(n.map((async s=>{if(!s.legendOptions||!1!==s.legendOptions.showLegend){const l=this._getRampTitle(s,t);let r=null;const i="getField"in t&&t.getField&&t.getField(s.field),n=i&&K$9(i);if("color"===s.type){const e=await r$R(s,null,n);r={type:"color-ramp",title:l,infos:e,preview:p$1G(e.map((e=>e.color)),{effect:u})},this._hasColorRamp||(this._hasColorRamp=!(null==r.infos||!r.infos.length));}else if("size"===s.type&&"outline"!==s.target)Y$6.test(s.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=s):(r={type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(s):l,infos:await S$o(e,s,await this._getMedianColor(e),this.scale,this.view.type,n)},this._hasSizeRamp||(this._hasSizeRamp=!(null==r.infos||!r.infos.length)));else if("opacity"===s.type){const e=await r$R(s,o,n);r={type:"opacity-ramp",title:l,infos:e,preview:p$1G(e.map((e=>e.color)),{effect:u})},this._hasOpacityRamp||(this._hasOpacityRamp=!(null==r.infos||!r.infos.length));}return r&&r.infos?r:null}})))).filter((e=>!!e))}_getDomainName(e,t,s){if(e&&"function"!=typeof e){const l="getField"in s&&s.getField&&s.getField(e),r=l&&"getFieldDomain"in s&&s.getFieldDomain?s.getFieldDomain(l.name):null;return r&&"coded-value"===r.type?r.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,s=e.field;if("featureReduction"in t&&t.featureReduction&&"cluster"===t.featureReduction.type){const e=t.featureReduction,l="popupTemplate"in e&&e.popupTemplate,r=l&&l.fieldInfos;if(r)for(const t of r)if(t.fieldName===s)return "cluster_count"===s?t.label||{showCount:!0}:t.label}return {showCount:!0}}_getRampTitle(e,t){let s=e.field,l=e.normalizationField,r=!1,i=!1,n=!1,a=null;s="function"==typeof s?null:s,l="function"==typeof l?null:l;const o=e.legendOptions&&e.legendOptions.title;if(null!=o)a=o;else if(e.valueExpressionTitle)a=e.valueExpressionTitle;else {if("renderer"in t&&t.renderer&&"authoringInfo"in t.renderer&&t.renderer.authoringInfo&&t.renderer.authoringInfo.visualVariables){const e=t.renderer.authoringInfo.visualVariables;for(let t=0;t<e.length;t++){const s=e[t];if("color"===s.type){if("ratio"===s.style){r=!0;break}if("percent"===s.style){i=!0;break}if("percent-of-total"===s.style){n=!0;break}}}}a={field:s&&this._getFieldAlias(s,t),normField:l&&this._getFieldAlias(l,t),ratio:r,ratioPercent:i,ratioPercentTotal:n};}return a}_getRendererTitle(e,t){const s=e;if(s.legendOptions&&s.legendOptions.title)return s.legendOptions.title;if(s.valueExpressionTitle)return s.valueExpressionTitle;let l=s.field,r=null,i=null;oe$4(s)&&(r=s.normalizationField,i="percent-of-total"===s.normalizationType),l="function"==typeof l?null:l,r="function"==typeof r?null:r;let n=null;return (l||r)&&(n={field:l&&this._getFieldAlias(l,t),normField:r&&this._getFieldAlias(r,t),normByPct:i}),n}_getFieldAlias(e,t){const s="popupTemplate"in t&&t.popupTemplate,l=s&&s.fieldInfos;let r=null;l&&l.some((t=>e===t.fieldName&&(r=t,!0)));let i=null;"getField"in t&&t.getField?i=t.getField(e):"fieldsIndex"in t&&t.fieldsIndex&&(i=t.fieldsIndex.get(e));const n=r||i;let a=null;return n&&(a=r&&r.label||i&&i.alias||"name"in n&&n.name||"fieldName"in n&&n.fieldName),a}_isUnclassedRenderer(e){const t=e.visualVariables;let s=!1;return oe$4(e)&&e.classBreakInfos&&1===e.classBreakInfos.length&&t&&(s=e.field?t.some((t=>!(!t||e.field!==t.field||(e.normalizationField||t.normalizationField)&&e.normalizationField!==t.normalizationField))):!!t.length),s}};e$1_([d$1S()],xe$1.prototype,"children",void 0),e$1_([d$1S({readOnly:!0})],xe$1.prototype,"effect",null),e$1_([d$1S()],xe$1.prototype,"layerView",void 0),e$1_([d$1S()],xe$1.prototype,"layer",void 0),e$1_([d$1S()],xe$1.prototype,"legendElements",void 0),e$1_([d$1S({readOnly:!0})],xe$1.prototype,"opacity",null),e$1_([d$1S()],xe$1.prototype,"parent",void 0),e$1_([d$1S({readOnly:!0,dependsOn:[]})],xe$1.prototype,"ready",null),e$1_([d$1S()],xe$1.prototype,"hideLayersNotInCurrentView",void 0),e$1_([d$1S()],xe$1.prototype,"keepCacheOnDestroy",void 0),e$1_([d$1S()],xe$1.prototype,"respectLayerVisibility",void 0),e$1_([d$1S({readOnly:!0})],xe$1.prototype,"scale",null),e$1_([d$1S()],xe$1.prototype,"sublayerIds",void 0),e$1_([d$1S({readOnly:!0})],xe$1.prototype,"isScaleDriven",null),e$1_([d$1S()],xe$1.prototype,"title",void 0),e$1_([d$1S({readOnly:!0,dependsOn:["ready"],value:0})],xe$1.prototype,"version",null),e$1_([d$1S()],xe$1.prototype,"view",void 0),xe$1=e$1_([i$2w("esri.widgets.Legend.support.ActiveLayerInfo")],xe$1);const je$1=xe$1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h$G={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},c$1u=S$F.ofType(je$1),L$h=["esri.layers.BuildingSceneLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.TileLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer"],_$j="view.basemapView.baseLayerViews",f$I="view.groundView.layerViews",v$r="view.basemapView.referenceLayerViews",p$1A=[_$j,f$I,"view.layerViews",v$r];let u$X=class extends p$33{constructor(e){super(e),this._handles=new u$1X,this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new S$F,this.activeLayerInfos=new c$1u,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null;}initialize(){this._handles.add(i$2i(this,"view",this._viewHandles),h$G.view),this._handles.add(g$16((()=>this._refresh())));}destroy(){this._destroyViewActiveLayerInfos(),this._handles.destroy(),this._handles=null,this.view=null;}get state(){return this.get("view.ready")?"ready":"disabled"}_viewHandles(){this._handles.remove(h$G.state),this.view&&this._handles.add(i$2i(this,"state",this._stateHandles),h$G.state);}_stateHandles(){this._resetAll(),"ready"===this.state&&this._watchPropertiesAndAllLayerViews();}_resetAll(){this._handles.remove([h$G.allLayerViews,h$G.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll();}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this);}_destroyViewActiveLayerInfo(e){this._handles.remove(e);const i=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],i&&i.parent&&i.parent.children.remove(i);}_watchPropertiesAndAllLayerViews(){const{allLayerViews:e}=this.view;e.length&&this._refresh(),this._handles.add(e.on("change",this._allLayerViewsChangeHandle.bind(this)),h$G.allLayerViews),this._handles.add(f$1p(this,"layerInfos, basemapLegendVisible, groundLegendVisible",this._propertiesChangeHandle.bind(this)),h$G.legendProperties);}_allLayerViewsChangeHandle(e){e.removed.forEach((e=>this._destroyViewActiveLayerInfo(e.uid))),this._refresh();}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh();}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos);}_sortActiveLayerInfos(e){if(e.length<2)return;const i=[];e.forEach((r=>{if(!r.parent){const t=r.layer.parent,s=t&&"uid"in t&&this._layerViewByLayerId[t.uid],a=s&&this._activeLayerInfosByLayerViewId[s.uid];a&&-1!==e.indexOf(a)&&(i.push(r),r.parent=a,a.children.add(r),this._sortActiveLayerInfos(a.children));}})),e.removeMany(i);const r={};this.view.allLayerViews.forEach(((e,i)=>r[e.layer.uid]=i)),e.sort(((e,i)=>{const t=r[e.layer.uid]||0;return (r[i.layer.uid]||0)-t}));}_generateLayerViews(){const e=[];return p$1A.filter(this._filterLayerViews,this).map(this.get,this).filter((e=>null!=e)).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===_$j||e===v$r),r=!this.groundLegendVisible&&e===f$I;return !i&&!r}_collectLayerViews(e,i){const r=t=>(t&&t.forEach((t=>{i.push(t),r(t[e]);})),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return !i||!i.length||i.some((i=>this._hasLayerInfo(i,e)))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some((e=>this._isLayerUIDMatching(e,i)))}_isLayerViewSupported(e){return !!L$h.includes(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this._handles.remove(e.uid),this._handles.add(f$1p(e,"legendEnabled, layer.legendEnabled",(()=>this._layerActiveHandle(e))),e.uid));}_layerActiveHandle(e){this._isLayerActive(e)&&(this._handles.remove(e.uid),this._buildActiveLayerInfo(e));}_isLayerActive(e){return !this.respectLayerVisibility||e.legendEnabled&&e.get("layer.legendEnabled")}_buildActiveLayerInfo(e){var i;const r=e.layer,t=e.uid,s=this._layerInfosByLayerViewId[t];let o=this._activeLayerInfosByLayerViewId[t];if(!o){const i=s&&void 0!==s.title&&s.layer.uid===r.uid;o=new je$1({layer:r,layerView:e,title:i?s.title:r.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:s&&s.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[t]=o;}const l=r.parent&&"uid"in r.parent&&this._layerViewByLayerId[null==(i=r.parent)?void 0:i.uid];if(o.parent=this._activeLayerInfosByLayerViewId[null==l?void 0:l.uid],!this._handles.has(t)){const i=[f$1p(r,"title",(e=>this._titleHandle(e,o))),f$1p(r,"renderer?, opacity, pointSymbol?, lineSymbol?, polygonSymbol?",(()=>this._constructLegendElements(o))),v$O(this.view,"stationary",(()=>this._scaleHandle(o))),f$1p(e,"_effectiveRenderer",(()=>this._constructLegendElements(o))),f$1p(r,"effect",(()=>this._constructLegendElements(o)))];if(this.respectLayerVisibility){const t=f$1p(e,"legendEnabled",(e=>this._legendEnabledHandle(e,o))),s=f$1p(r,"legendEnabled",(e=>this._legendEnabledHandle(e,o)));i.push(t,s);}this._handles.add(i,t);}o.isScaleDriven||this._constructLegendElements(o),this._addActiveLayerInfo(o);}_titleHandle(e,i){i.title=e,this._constructLegendElements(i);}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i);}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e);}_addActiveLayerInfo(e){const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&-1===this.activeLayerInfos.indexOf(e)){const i=e.parent;if(i)-1===i.children.indexOf(e)&&i.children.push(e),this._sortActiveLayerInfos(i.children);else {var t;const i=null==(t=this.layerInfos)?void 0:t.some((e=>e.layer.uid===r.uid));r.parent&&"uid"in r.parent&&!i?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos));}if(this._activeLayerInfosWithNoParent.length){const e=[];this._activeLayerInfosWithNoParent.forEach((i=>{const r=i.layer.parent,t=r&&"uid"in r&&this._layerViewByLayerId[null==r?void 0:r.uid],s=this._activeLayerInfosByLayerViewId[null==t?void 0:t.uid];s&&(e.push(i),i.parent=s);})),e.length&&(this._activeLayerInfosWithNoParent.removeMany(e),e.forEach((e=>this._addActiveLayerInfo(e))));}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e);}_constructLegendElements(e){const i=e.layer;"featureCollections"in i&&i.featureCollections?e.buildLegendElementsForFeatureCollections(i.featureCollections):"renderer"in i&&i.renderer?e.buildLegendElementsForRenderer(i.renderer):"url"in i&&i.url?e.buildLegendElementsForTools():e.children.forEach((e=>this._constructLegendElements(e)));}};e$1_([d$1S({type:c$1u})],u$X.prototype,"activeLayerInfos",void 0),e$1_([d$1S()],u$X.prototype,"basemapLegendVisible",void 0),e$1_([d$1S()],u$X.prototype,"groundLegendVisible",void 0),e$1_([d$1S()],u$X.prototype,"hideLayersNotInCurrentView",void 0),e$1_([d$1S()],u$X.prototype,"keepCacheOnDestroy",void 0),e$1_([d$1S()],u$X.prototype,"respectLayerVisibility",void 0),e$1_([d$1S()],u$X.prototype,"layerInfos",void 0),e$1_([d$1S({readOnly:!0})],u$X.prototype,"state",null),e$1_([d$1S()],u$X.prototype,"view",void 0),u$X=e$1_([i$2w("esri.widgets.Legend.LegendViewModel")],u$X);const I$e=u$X;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const d$V="http://www.w3.org/2000/svg",m$X={diamondContainer:"esri-relationship-ramp--diamond__container",diamondLeftCol:"esri-relationship-ramp--diamond__left-column",diamondRightCol:"esri-relationship-ramp--diamond__right-column",diamondMidCol:"esri-relationship-ramp--diamond__middle-column",diamondMidColLabel:"esri-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"esri-relationship-ramp--diamond__middle-column--ramp",squareTable:"esri-relationship-ramp--square__table",squareTableRow:"esri-relationship-ramp--square__table-row",squareTableCell:"esri-relationship-ramp--square__table-cell",squareTableLabel:"esri-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"esri-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"esri-relationship-ramp--square__table-label--right-bottom",squareTableLabelLeftTop:"esri-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"esri-relationship-ramp--square__table-label--right-top"};function u$W(e,a,r,l){const{focus:t,labels:s}=e,i=!!t,d=p$1z(e,a,r,l);return i?n$2o("div",{class:m$X.diamondContainer},n$2o("div",{class:m$X.diamondLeftCol},s.left),n$2o("div",{class:m$X.diamondMidCol},n$2o("div",{class:m$X.diamondMidColLabel},s.top),d,n$2o("div",{class:m$X.diamondMidColLabel},s.bottom)),n$2o("div",{class:m$X.diamondRightCol},s.right)):n$2o("div",{class:m$X.squareTable},n$2o("div",{class:m$X.squareTableRow},n$2o("div",{class:l$2e(m$X.squareTableCell,m$X.squareTableLabel,m$X.squareTableLabelRightBottom)},s.left),n$2o("div",{class:m$X.squareTableCell}),n$2o("div",{class:l$2e(m$X.squareTableCell,m$X.squareTableLabel,m$X.squareTableLabelLeftBottom)},s.top)),n$2o("div",{class:m$X.squareTableRow},n$2o("div",{class:m$X.squareTableCell}),d,n$2o("div",{class:m$X.squareTableCell})),n$2o("div",{class:m$X.squareTableRow},n$2o("div",{class:l$2e(m$X.squareTableCell,m$X.squareTableLabel,m$X.squareTableLabelRightTop)},s.bottom),n$2o("div",{class:m$X.squareTableCell}),n$2o("div",{class:l$2e(m$X.squareTableCell,m$X.squareTableLabel,m$X.squareTableLabelLeftTop)},s.right)))}function b$o(e,a,r){const l=`${r}_arrowStart`,t=`${r}_arrowEnd`,s="left"===e,i={markerStart:null,markerEnd:null};switch(a){case"HL":s?i.markerStart=`url(#${t})`:i.markerEnd=`url(#${l})`;break;case"LL":i.markerStart=`url(#${t})`;break;case"LH":s?i.markerEnd=`url(#${l})`:i.markerStart=`url(#${t})`;break;default:i.markerEnd=`url(#${l})`;}return i}function p$1z(o,u,p,c,h=60){const{focus:q,numClasses:f,colors:k,rotation:T}=o,_=!!q,L=Math.sqrt(h**2+h**2)+(_?0:5),g=[],C=[],v=[],w=(h||75)/f;for(let s=0;s<f;s++){const i=s*w;for(let o=0;o<f;o++){const n=o*w,d=v$t(k[s][o]),m=A$d(null),u={type:"rect",x:n,y:i,width:w,height:w};g.push(I$h(d)),C.push(b$q(u,d.fill,m,null)),v.push(T$d(u));}}const y=10,x=15,R=15,$=10;let E=null;_||(E="margin: -15px -15px -18px -15px");const M=b$o("left",q,u),S=b$o("right",q,u),j=U$d(v),B=L$j(j,L,L,0,!1,T,!1),H=L$j(j,L,L,0,!1,_?-45:null,!1);return n$2o("div",{styles:{filter:c,opacity:null==p?null:`${p}`},class:_?m$X.diamondMidColRamp:m$X.squareTableCell},n$2o("svg",{xmlns:d$V,width:L,height:L,style:E},n$2o("defs",null,n$2o("marker",{id:`${u}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},n$2o("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),n$2o("marker",{id:`${u}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},n$2o("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),g),n$2o("g",{transform:B},C),n$2o("g",{transform:H},n$2o("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":M.markerStart,"marker-end":M.markerEnd,x1:-y,y1:h-x,x2:-y,y2:x}),n$2o("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":S.markerStart,"marker-end":S.markerEnd,x1:R,y1:h+$,x2:h-R,y2:h+$}))))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$16=i$2e(),r$L=10,n$1v=20,s$1f=10,a$1u=20,c$1t={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function f$H(e="vertical"){const t="stroke:rgb(200, 200, 200);stroke-width:1";return "vertical"===e?n$2o("svg",{height:"4",width:"10"},n$2o("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:t})):n$2o("svg",{height:"10",width:"10"},n$2o("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:t}))}function p$1y(e,t="vertical"){const o=document.createElement("div");return o.style.height=`${n$1v}px`,o.className=c$1t.univariateAboveAndBelowSymbol,null!=e&&(o.style.opacity=e.toString()),l$16.append(o,f$H.bind(null,t)),o}function m$W(t,o,i="vertical",l){t.infos.forEach(((t,r)=>{if(l&&2===r)t.preview=p$1y(o,i);else {const o=u$1E(t.size)+("horizontal"===i?a$1u:s$1f),l="div"===t.preview.tagName.toLowerCase(),r=l?t.preview:document.createElement("div");r.className=c$1t.univariateAboveAndBelowSymbol,"horizontal"===i?r.style.width=`${o}px`:r.style.height=`${o}px`,l||r.appendChild(t.preview),t.preview=r;}}));}function u$V(t,o="classic"){const i=t.infos;return "classic"===o?(u$1E(i[0].size)+s$1f)/2:(u$1E(i[0].size)-u$1E(i[i.length-1].size))/2}function v$q(e,t){if(!e)return null;const i=e.infos.map((e=>e.color)),l=p$1G("full"===t.type?i:"above"===t.type?i.slice(0,3):i.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,effect:t.effect});return l.className=c$1t.colorRamp,null!=t.opacity&&(l.style.opacity=t.opacity.toString()),l}function h$F(t,o,i,l="vertical"){let c=0;const f=t.infos,p=Math.floor(f.length/2),m="full"===o||"above"===o?0:p,u="full"===o||"below"===o?f.length-1:p;for(let v=m;v<=u;v++)if(i&&v===p)c+="horizontal"===l?r$L:n$1v;else {c+=u$1E(f[v].size)+("horizontal"===l?a$1u:s$1f);}return Math.round(c)}function y$J(t,o,i,l="vertical"){const c=h$F(t,o,i,l),f=t.infos,p=Math.floor(f.length/2),m="full"===o||"above"===o?0:p,u="full"===o||"below"===o?f.length-1:p,v="full"===o?f[m].size+f[u].size:"above"===o?f[m].size:f[u].size,y=i?"vertical"===l?n$1v:r$L:0,d="vertical"===l?s$1f*("full"===o?2:1):a$1u*("full"===o?2:1);return Math.round(c-(u$1E(v)/2+y/2+d/2))}function d$U(e,t,o="vertical"){const i=e.infos;let l=i.filter((({type:e})=>"size-ramp"===e))[0],r=i.filter((({type:e})=>"color-ramp"===e))[0];var n;(l&&(l={...l},l.infos=[...l.infos]),r&&(r={...r},r.infos=[...r.infos]),m$W(l,t,o,!0),"horizontal"===o)&&(l.infos.reverse(),null==(n=r)||n.infos.reverse());return {sizeRampElement:l,colorRampElement:r}}function g$B(e,t="vertical"){const o=e.infos;let i=o.filter((({type:e})=>"size-ramp"===e))[0],l=o.filter((({type:e})=>"color-ramp"===e))[0];var r;(i&&(i={...i},i.infos=[...i.infos]),l&&(l={...l},l.infos=[...l.infos]),m$W(i,null,t,!1),"horizontal"===t)&&(i.infos.reverse(),null==(r=l)||r.infos.reverse());return {sizeRampElement:i,colorRampElement:l}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1u(e,n){return n}function t$O(e){const n=this;e.appendChild(n);}function r$K(t,r,i){if(!r)return;if("string"==typeof r||"number"==typeof r)return r;if("value"in r||"unit"in r)return s$23(t.dotValue,r);if("colorName"in r||"bandName"in r)return t[r.colorName]+": "+(t[r.bandName]||r.bandName);if("showCount"in r)return r.showCount?t.clusterCountTitle:null;let l=null;return n$1u(r,i)?l=r.ratioPercentTotal?"showRatioPercentTotal":r.ratioPercent?"showRatioPercent":r.ratio?"showRatio":r.normField?"showNormField":r.field?"showField":null:o$K(r,i)&&(l=r.normField?"showNormField":r.normByPct?"showNormPct":r.field?"showField":null),l?s$23("showField"===l?"{field}":t[l],{field:r.field,normField:r.normField}):null}function o$K(e,n){return !n}function i$1h(e,n){return !!(n&&"Stretched"===n&&e.version>=10.3&&"esri.layers.ImageryLayer"===e.declaredClass)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$J={heading:"esri-widget__heading"};function s$1e(s,i){const c=`h${e$1o(Math.ceil(s.level),1,6)}`;return delete s.level,n$2o(c,{...s,class:l$2e(r$J.heading,s.class)},i)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const L$g={activated:"esri-legend--card__carousel-indicator--activated",base:"esri-legend--card",stacked:"esri-legend--stacked",carouselTitle:"esri-legend--card__carousel-title",indicator:"esri-legend--card__carousel-indicator",intervalSeparator:"esri-legend--card__interval-separator",imageryLayerStretchedImage:"esri-legend--card__imagery-layer-image--stretched",imageLabel:"esri-legend--card__image-label",layerCaption:"esri-legend--card__layer-caption",labelElement:"esri-legend--card__label-element",layerRow:"esri-legend--card__layer-row",labelCell:"esri-legend--card__label-cell",message:"esri-legend--card__message",rampLabel:"esri-legend--card__ramp-label",section:"esri-legend--card__section",relationshipSection:"esri-legend--card__relationship-section",serviceCaptionText:"esri-legend--card__service-caption-text",serviceContent:"esri-legend--card__service-content",service:"esri-legend--card__service",groupLayer:"esri-legend--card__group-layer",groupLayerChild:"esri-legend--card__group-layer-child",symbol:"esri-legend--card__symbol",sizeRampRow:"esri-legend--card__size-ramp-row",symbolRow:"esri-legend--card__symbol-row",symbolCell:"esri-legend--card__symbol-cell",indicatorContainer:"esri-legend--card__carousel-indicator-container",intervalSeparatorsContainer:"esri-legend--card__interval-separators-container",relationshipLabelContainer:"esri-legend--card__relationship-label-container",labelContainer:"esri-legend--card__label-container",serviceCaptionContainer:"esri-legend--card__service-caption-container",symbolContainer:"esri-legend--card__symbol-container",sizeRampContainer:"esri-legend--card__size-ramp-container",sizeRampPreview:"esri-legend--card__size-ramp-preview",rampContainer:"esri-legend__ramps",sizeRampHorizontal:"esri-legend__size-ramp--horizontal",rampLabelsContainer:"esri-legend__ramp-labels",layerInfo:"esri-legend__layer-cell esri-legend__layer-cell--info",univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card",hidden:"esri-hidden"},C$e=25,x$e=25,S$n=768,z$7=100,R$d="#ddd",$$8=window.devicePixelRatio;function I$d(e){if(e){if(e.type.indexOf("3d")>-1){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const s=e.symbolLayers.getItemAt(t-1),i=s.resource&&s.resource.primitive;return "circle"===i||"cross"===i||"kite"===i||"sphere"===i||"cube"===i||"diamond"===i}{const t=e.style;return "circle"===t||"diamond"===t||"cross"===t}}}function k$c(e){if(e){if(e.type.indexOf("3d")>-1){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const s=e.symbolLayers.getItemAt(t-1).get("resource.primitive");return "triangle"===s||"cone"===s||"tetrahedron"===s}return "triangle"===e.style}}let N$c=class extends z$n{constructor(e,s){super(e,s),this._handles=new u$1X,this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null;}initialize(){this.own([this.watch("activeLayerInfos",(e=>{this._handles.removeAll(),this._watchForSectionChanges(e);}))]);}destroy(){this._handles.destroy(),this._handles=null;}render(){this._hasIndicators="auto"===this.layout&&this.view.container.clientWidth<=S$n||"stack"===this.layout;const e=this.activeLayerInfos,t=e&&e.toArray().map((e=>this._renderLegendForLayer(e))).filter((e=>!!e));this._hasIndicators?this._selectedSectionName&&-1!==this._sectionNames.indexOf(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const s=this._sectionNames.length,i=this._sectionNames.map(((e,t)=>{const i=s$23(this.messagesCommon.pagination.pageText,{index:t+1,total:s});return n$2o("div",{key:e,role:"tab",id:e,"aria-label":i,"aria-controls":`${e}-panel`,"aria-selected":(this._selectedSectionName===e).toString(),tabIndex:this._selectedSectionName===e?0:-1,title:i,onclick:this._selectSection,onkeydown:this._focusSection,bind:this,class:this.classes(L$g.indicator,{[L$g.activated]:this._selectedSectionName===e}),"data-section-name":e})})),r=this._hasIndicators&&s>1?n$2o("div",{class:L$g.indicatorContainer,key:"carousel-navigation",role:"tablist"},i):null,a=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):t&&t.length?t:null,o={[L$g.stacked]:this._hasIndicators};return n$2o("div",{class:this.classes(L$g.base,o)},a||n$2o("div",{class:L$g.message},this.messages.noLegend),r)}_selectSection(e){const t=e.target.getAttribute("data-section-name");t&&(this._selectedSectionName=t);}_focusSection(e){switch(e.key){case"ArrowLeft":case"ArrowRight":this._switchSectionOnArrowPress(e);break;case"Enter":case" ":this._selectSection(e);}}_switchSectionOnArrowPress(e){const t=e.key,s="ArrowLeft"===t?-1:1,i=e.target.getAttribute("data-section-name"),r=this._sectionNames.indexOf(i),a=this._sectionNames;let o=null;-1!==r&&(a[r+s]?o=document.getElementById(a[r+s]):"ArrowLeft"===t?o=document.getElementById(a[a.length-1]):"ArrowRight"===t&&(o=document.getElementById(a[0])),o&&o.focus());}_watchForSectionChanges(e){if(this._generateSectionNames(),e){e.forEach((e=>{const t=`activeLayerInfo-${e.layer.uid}-version-change`;this._handles.remove(t),this._watchForSectionChanges(e.children),this._handles.add(e.watch("version",(()=>this._generateSectionNames())),t);}));const t="activeLayerInfos-collection-change";this._handles.remove(t),this._handles.add(e.on("change",(()=>this._watchForSectionChanges(e))),t);}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this);}_getSectionName(e,t,s){return `${this.id}${e.uid}-type-${t.type}-${s}`}_generateSectionNamesForActiveLayerInfo(e){e.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),e.legendElements&&e.legendElements.forEach(((t,s)=>{this._sectionNames.push(this._getSectionName(e.layer,t,s));}));}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const t=e.children.map((e=>this._renderLegendForLayer(e))).toArray();return n$2o("div",{key:e.layer.uid,class:this.classes(L$g.service,L$g.groupLayer)},n$2o("div",{class:L$g.serviceCaptionContainer},e.title),t)}{const t=e.legendElements;if(t&&!t.length)return null;const s=t.some((e=>"relationship-ramp"===e.type)),i=t.map(((t,i)=>this._renderLegendForElement(t,e,i,s))).filter((e=>!!e));if(!i.length)return null;const r={[L$g.groupLayerChild]:!!e.parent};return n$2o("div",{key:e.layer.uid,class:this.classes(L$g.service,r)},n$2o("div",{class:L$g.serviceCaptionContainer},n$2o("div",{class:L$g.serviceCaptionText},e.title)),n$2o("div",{class:L$g.serviceContent},i))}}_renderLegendForElement(e,t,s,i=!1){const r="color-ramp"===e.type,a="opacity-ramp"===e.type,o="size-ramp"===e.type,n=t.layer;let c=null;if("string"==typeof e.title)c=e.title;else if(e.title){const t=e.title,s=r$K(this.messages,t,r||a);c=t.title?`${t.title} (${s})`:s;}const d=this._getSectionName(n,e,s),p=this._hasIndicators?n$2o("div",null,n$2o(s$1e,{level:this.headingLevel,class:L$g.carouselTitle},t.title),n$2o(s$1e,{level:this.headingLevel+1,class:L$g.layerCaption},c)):c?n$2o(s$1e,{level:this.headingLevel,class:L$g.layerCaption},c):null,m=t.effect;let h=null;if("symbol-table"===e.type){const s=e.infos.map(((s,i)=>this._renderLegendForElementInfo(s,t,e.legendType,i))).filter((e=>!!e));if(s.length){const e=s[0].properties.classes&&s[0].properties.classes[L$g.symbolRow],t={[L$g.labelContainer]:!e&&!i,[L$g.relationshipLabelContainer]:i};h=n$2o("div",{class:this.classes(t)},s);}}else "color-ramp"===e.type||"opacity-ramp"===e.type||"heatmap-ramp"===e.type?h=this._renderLegendForRamp(e,n.opacity,m):o?h=this._renderSizeRamp(e,n.opacity):"relationship-ramp"===e.type?h=u$W(e,this.id,n.opacity,m):"univariate-above-and-below-ramp"===e.type?h=this._renderUnivariateAboveAndBelowRamp(e,n.opacity,m):"univariate-color-size-ramp"===e.type&&(h=this._renderUnivariateColorSizeRamp(e,n.opacity,m));if(!h)return null;const g=n$2o("div",{key:d,class:L$g.section,id:`${d}-panel`,role:"tabpanel","aria-labelledby":d,tabIndex:0},[p,h]);return this._sectionMap.set(d,g),g}_renderUnivariateAboveAndBelowRamp(e,t,s){const{sizeRampElement:i,colorRampElement:r}=d$U(e,t,"horizontal"),a=h$F(i,"full",!0,"horizontal"),o=y$J(i,"above",!0,"horizontal"),l=y$J(i,"below",!0,"horizontal"),h=12,y=v$q(r,{width:o,height:h,rampAlignment:"horizontal",opacity:t,type:"above",effect:s}),_=v$q(r,{width:l,height:h,rampAlignment:"horizontal",opacity:t,type:"below",effect:s}),v=u$V(i,"card"),f=i.infos.map((e=>e.label)),u=f.length-1,w=f.map(((e,t)=>0===t||t===u?n$2o("div",{key:t},e):null)),C={display:"flex",flexDirection:"column"},x={display:"flex",flexDirection:"row"},S={marginTop:"3px",marginLeft:`${v}px`,display:"flex"},z={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return n$2o("div",{class:L$g.layerRow,key:"size-ramp-preview",styles:C},n$2o("div",{class:this.classes(L$g.symbolContainer,L$g.sizeRampHorizontal),styles:x},i.infos.map(((e,t)=>n$2o("div",{key:t,class:L$g.symbol,bind:e.preview,afterCreate:t$O})))),y?n$2o("div",{class:L$g.univariateAboveAndBelowColorRamp,styles:S,key:"color-ramp-preview"},n$2o("div",{bind:y,afterCreate:t$O}),n$2o("div",{bind:_,afterCreate:t$O})):null,n$2o("div",{class:L$g.layerInfo},n$2o("div",{class:L$g.rampLabelsContainer,styles:z},w)))}_renderUnivariateColorSizeRamp(e,t,s){const{sizeRampElement:i,colorRampElement:r}=g$B(e,"horizontal"),a=h$F(i,"full",!1,"horizontal"),o=y$J(i,"full",!1,"horizontal"),l=v$q(r,{width:o,height:12,rampAlignment:"horizontal",opacity:t,type:"full",effect:s}),n=u$V(i,"card"),y=i.infos.length-1,_=i.infos.map(((e,t)=>0===t||t===y?n$2o("div",{key:t},e.label):null)),v={display:"flex",flexDirection:"column"},f={display:"flex",flexDirection:"row"},u={marginTop:"3px",marginLeft:`${n}px`,display:"flex"},w={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return n$2o("div",{class:L$g.layerRow,key:"size-ramp-preview",styles:v},n$2o("div",{class:this.classes(L$g.symbolContainer,L$g.sizeRampHorizontal),styles:f},i.infos.map(((e,t)=>n$2o("div",{key:t,class:L$g.symbol,bind:e.preview,afterCreate:t$O})))),n$2o("div",{class:L$g.univariateAboveAndBelowColorRamp,styles:u,key:"color-ramp-preview"},n$2o("div",{bind:l,afterCreate:t$O})),n$2o("div",{class:L$g.layerInfo},n$2o("div",{class:L$g.rampLabelsContainer,styles:w},_)))}_renderLegendForElementInfo(e,t,s,i){const r=t.layer;if(e.type)return this._renderLegendForElement(e,t,i);const a=i$1h(r,s);if(e.preview){var o,l;if(!e.symbol||-1===e.symbol.type.indexOf("simple-fill")){if(!e.label)return n$2o("div",{key:i,bind:e.preview,afterCreate:t$O});const t={[L$g.symbolCell]:this._hasIndicators};return n$2o("div",{key:i,class:this.classes(L$g.layerRow,{[L$g.symbolRow]:this._hasIndicators})},n$2o("div",{class:this.classes(t),bind:e.preview,afterCreate:t$O}),n$2o("div",{class:this.classes(L$g.imageLabel,{[L$g.labelCell]:this._hasIndicators})},r$K(this.messages,e.label,!1)||""))}let s=255,a=255,n=255,c=0,d=255,p=255,m=255,h=0;const _=e.symbol.color&&e.symbol.color.a,v=e.symbol.outline&&e.symbol.outline.color&&e.symbol.outline.color.a;_&&(s=e.symbol.color.r,a=e.symbol.color.g,n=e.symbol.color.b,c=e.symbol.color.a*r.opacity),v&&(d=e.symbol.outline.color.r,p=e.symbol.outline.color.g,m=e.symbol.outline.color.b,h=e.symbol.outline.color.a*r.opacity);const f=null==(o=null==(l=e.symbol.color)?void 0:l.isBright)||o,u=f?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)",w={background:_?`rgba(${s}, ${a}, ${n}, ${c})`:"none",color:f?"black":"white",textShadow:`-1px -1px 0 ${u},\n                                              1px -1px 0 ${u},\n                                              -1px 1px 0 ${u},\n                                              1px 1px 0 ${u}`,border:v?`1px solid rgba(${d}, ${p}, ${m}, ${h})`:"none",filter:t.effect};return n$2o("div",{key:i,class:L$g.layerRow},n$2o("div",{class:L$g.labelElement,styles:w}," ",e.label," "))}if(e.src){const t=this._renderImage(e,r,a);return n$2o("div",{key:i,class:L$g.layerRow},t,n$2o("div",{class:L$g.imageLabel},e.label||""))}}_renderImage(e,t,s){const{label:i,src:r,opacity:a}=e,o={[L$g.imageryLayerStretchedImage]:s,[L$g.symbol]:!s},l={opacity:`${null!=a?a:t.opacity}`};return n$2o("img",{alt:r$K(this.messages,i,!1),src:r,border:0,width:e.width,height:e.height,class:this.classes(o),styles:l})}_renderSizeRampLines(e){const t=e.infos,i=t[0],r=t[t.length-1],a=i.symbol,o=this._hasIndicators,l=u$1E(i.size+i.outlineSize)*$$8,n=u$1E(r.size+r.outlineSize)*$$8,c=o?l:l+50*$$8,d=o?l/2+50*$$8:l,p=k$c(a),m=I$d(a),h=document.createElement("canvas");h.width=c,h.height=d,h.style.width=h.width/$$8+"px",h.style.height=h.height/$$8+"px";const y=h.getContext("2d");if(o){y.beginPath();const e=0,t=0,s=c/2-n/2,i=d;y.moveTo(e,t),y.lineTo(s,i);const r=c,a=0,o=c/2+n/2,l=d;y.moveTo(r,a),y.lineTo(o,l);}else {y.beginPath();const e=0,t=d/2-n/2,s=c,i=0;y.moveTo(e,t),y.lineTo(s,i);const r=0,a=d/2+n/2,o=c,l=d;y.moveTo(r,a),y.lineTo(o,l);}return y.strokeStyle=R$d,y.stroke(),n$2o("div",{bind:h,afterCreate:t$O,styles:o?{display:"flex",marginTop:`-${p?0:m?l/2:0}px`,marginBottom:`-${p?n:m?n/2:0}px`}:{display:"flex",marginRight:`-${p?0:m?l/2:0}px`,marginLeft:`-${p?0:m?n/2:0}px`}})}_renderSizeRamp(e,t){const s=e.infos,i=s[0].label,r=s[s.length-1].label;let a=s[0].preview,o=s[s.length-1].preview;const l=this._hasIndicators,n={"flex-direction":l?"column":"row-reverse"};a&&(a=a.cloneNode(!0),a.style.display="flex"),o&&(o=o.cloneNode(!0),o.style.display="flex");const c={opacity:null!=t?`${t}`:""};return n$2o("div",{class:this.classes(L$g.layerRow,{[L$g.sizeRampRow]:l})},n$2o("div",{class:L$g.rampLabel},l?i:r),n$2o("div",{class:L$g.sizeRampContainer,styles:n},n$2o("div",{bind:a,afterCreate:t$O,class:L$g.sizeRampPreview,styles:c}),this._renderSizeRampLines(e),n$2o("div",{bind:o,afterCreate:t$O,class:L$g.sizeRampContainer,styles:c})),n$2o("div",{class:L$g.rampLabel},l?r:i))}_renderLegendForRamp(e,t,s){const i=e.infos,r="heatmap-ramp"===e.type,o=i.length-1,l=x$e,n=o>2&&!r?C$e*o:z$7,c=n+20,d=10,p=i.slice(0).reverse();p.forEach(((e,t)=>{e.offset=r?e.ratio:t/o;}));const m=p.length-1,h=p.length%2!=0&&p[p.length/2|0],y=h&&n$2o("div",{class:L$g.intervalSeparatorsContainer},n$2o("div",{class:L$g.intervalSeparator},"|"),n$2o("div",{class:L$g.rampLabel},h.label)),g=i[i.length-1].label,_=i[0].label,v=[[{shape:{type:"path",path:`M0 ${l/2} L${d} 0 L${d} ${l} Z`},fill:p[0].color,stroke:{width:0}},{shape:{type:"rect",x:d,y:0,width:n,height:l},fill:{type:"linear",x1:d,y1:0,x2:n+d,y2:0,colors:p},stroke:{width:0}},{shape:{type:"path",path:`M${n+d} 0 L${c} ${l/2} L${n+d} ${l} Z`},fill:p[m].color,stroke:{width:0}}]],f=C$h(v,c,l),{messages:u}=this,w={filter:s,opacity:null==t?null:`${t}`};return n$2o("div",{class:L$g.layerRow},n$2o("div",{class:L$g.rampLabel},r?u[g]:g),n$2o("div",{class:L$g.symbolContainer},n$2o("div",{styles:w},f),y),n$2o("div",{class:L$g.rampLabel},r?u[_]:_))}};e$1_([d$1S()],N$c.prototype,"activeLayerInfos",void 0),e$1_([d$1S()],N$c.prototype,"headingLevel",void 0),e$1_([d$1S()],N$c.prototype,"layout",void 0),e$1_([d$1S(),e$1w("esri/widgets/Legend/t9n/Legend")],N$c.prototype,"messages",void 0),e$1_([d$1S(),e$1w("esri/t9n/common")],N$c.prototype,"messagesCommon",void 0),e$1_([d$1S({readOnly:!0})],N$c.prototype,"type",void 0),e$1_([d$1S()],N$c.prototype,"view",void 0),e$1_([t$1p()],N$c.prototype,"_selectSection",null),N$c=e$1_([i$2w("esri.widgets.Legend.styles.Card")],N$c);const A$b=N$c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const _$i={service:"esri-legend__service",label:"esri-legend__service-label",layer:"esri-legend__layer",groupLayer:"esri-legend__group-layer",groupLayerChild:"esri-legend__group-layer-child",layerTable:"esri-legend__layer-table",layerTableSizeRamp:"esri-legend__layer-table--size-ramp",layerChildTable:"esri-legend__layer-child-table",layerCaption:"esri-legend__layer-caption",layerBody:"esri-legend__layer-body",layerRow:"esri-legend__layer-row",layerCell:"esri-legend__layer-cell",layerInfo:"esri-legend__layer-cell esri-legend__layer-cell--info",imageryLayerStretchedImage:"esri-legend__imagery-layer-image--stretched",imageryLayerCellStretched:"esri-legend__imagery-layer-cell--stretched",imageryLayerInfoStretched:"esri-legend__imagery-layer-info--stretched",symbolContainer:"esri-legend__layer-cell esri-legend__layer-cell--symbols",symbol:"esri-legend__symbol",rampContainer:"esri-legend__ramps",sizeRamp:"esri-legend__size-ramp",colorRamp:"esri-legend__color-ramp",opacityRamp:"esri-legend__opacity-ramp",borderlessRamp:"esri-legend__borderless-ramp",rampTick:"esri-legend__ramp-tick",rampFirstTick:"esri-legend__ramp-tick-first",rampLastTick:"esri-legend__ramp-tick-last",rampLabelsContainer:"esri-legend__ramp-labels",rampLabel:"esri-legend__ramp-label",univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label",message:"esri-legend__message",header:"esri-widget__heading",hidden:"esri-hidden"},u$U="esri-legend__",f$G=24,L$f={display:"flex",alignItems:"flex-start"},w$q={marginLeft:"3px"},C$d={display:"table-cell",verticalAlign:"middle"};let R$c=class extends z$n{constructor(e,r){super(e,r),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic";}render(){const e=this.activeLayerInfos,r=e&&e.toArray().map((e=>this._renderLegendForLayer(e))).filter((e=>!!e));return n$2o("div",null,r&&r.length?r:n$2o("div",{class:_$i.message},this.messages.noLegend))}_renderLegendForLayer(e){if(!e.ready)return null;const r=!!e.children.length,l=`${u$U}${e.layer.uid}-version-${e.version}`,a=e.title?s$1e({level:this.headingLevel,class:this.classes(_$i.header,_$i.label)},e.title):null;if(r){const r=e.children.map((e=>this._renderLegendForLayer(e))).toArray();return n$2o("div",{key:l,class:this.classes(_$i.service,_$i.groupLayer)},a,r)}{const r=e.legendElements;if(r&&!r.length)return null;const s=r.map((r=>this._renderLegendForElement(r,e.layer,e.effect))).filter((e=>!!e));if(!s.length)return null;const i={[_$i.groupLayerChild]:!!e.parent};return n$2o("div",{key:l,class:this.classes(_$i.service,i),tabIndex:0},a,n$2o("div",{class:_$i.layer},s))}}_renderLegendForElement(e,r,l,a){const i="color-ramp"===e.type,t="opacity-ramp"===e.type,n="size-ramp"===e.type;let o=null;if("symbol-table"===e.type||n){const a=e.infos.map((a=>this._renderLegendForElementInfo(a,r,l,n,e.legendType))).filter((e=>!!e));a.length&&(o=n$2o("div",{class:_$i.layerBody},a));}else "color-ramp"===e.type||"opacity-ramp"===e.type||"heatmap-ramp"===e.type||"stretch-ramp"===e.type?o=this._renderLegendForRamp(e,r.opacity):"relationship-ramp"===e.type?o=u$W(e,this.id,r.opacity,l):"univariate-above-and-below-ramp"===e.type?o=this._renderUnivariateAboveAndBelowRamp(e,r.opacity,l):"univariate-color-size-ramp"===e.type&&(o=this._renderUnivariateColorSizeRamp(e,r.opacity,l));if(!o)return null;const p=e.title;let m=null;if("string"==typeof p)m=p;else if(p){const e=r$K(this.messages,p,i||t);m=o$K(p,i||t)&&p.title?`${p.title} (${e})`:e;}const c=a?_$i.layerChildTable:_$i.layerTable,g=m?n$2o("div",{class:_$i.layerCaption},m):null,v={[_$i.layerTableSizeRamp]:n||!a};return n$2o("div",{class:this.classes(c,v)},g,o)}_renderUnivariateAboveAndBelowRamp(e,r,l){const{sizeRampElement:a,colorRampElement:s}=d$U(e,r),p=y$J(a,"above",!0),d=y$J(a,"below",!0),y=12,c=v$q(s,{width:y,height:p,rampAlignment:"vertical",opacity:r,type:"above",effect:l}),g=v$q(s,{width:y,height:d,rampAlignment:"vertical",opacity:r,type:"below",effect:l}),v=u$V(a),b=a.infos.map((e=>e.label)),u=b.map(((e,r)=>{const l=2===r;return 0===r?n$2o("div",{key:r,class:e?c?_$i.univariateAboveAndBelowLabel:_$i.rampLabel:null},e):l?n$2o("div",null):null})),f=b.length-1,R=Math.floor(b.length/2),A=b.map(((e,r)=>r===R||r===f?n$2o("div",{key:r,class:e?c?_$i.univariateAboveAndBelowLabel:_$i.rampLabel:null},e):null)),S={display:"table-cell",verticalAlign:"middle"},j={marginTop:`${v}px`},I={height:`${p}px`},k={height:`${d}px`};return n$2o("div",{key:"univariate-above-and-below-ramp-preview",styles:L$f},n$2o("div",{class:_$i.layerBody},a.infos.map(((e,r)=>n$2o("div",{class:this.classes(_$i.layerRow,_$i.sizeRamp)},n$2o("div",{class:_$i.symbol,styles:S,bind:e.preview,afterCreate:t$O}),c||r%2!=0?null:n$2o("div",{class:_$i.layerInfo},b[r]))))),c?n$2o("div",{styles:j,key:"color-ramp-preview"},n$2o("div",{styles:w$q},n$2o("div",{styles:C$d},n$2o("div",{class:_$i.rampContainer,bind:c,afterCreate:t$O})),n$2o("div",{styles:C$d},n$2o("div",{class:_$i.rampLabelsContainer,styles:I},u))),n$2o("div",{styles:w$q},n$2o("div",{styles:C$d},n$2o("div",{class:_$i.rampContainer,bind:g,afterCreate:t$O})),n$2o("div",{styles:C$d},n$2o("div",{class:_$i.rampLabelsContainer,styles:k},A)))):null)}_renderUnivariateColorSizeRamp(e,r,l){const{sizeRampElement:a,colorRampElement:s}=g$B(e),i=u$V(a),d=12,y=y$J(a,"full",!1),c=v$q(s,{width:d,height:y,rampAlignment:"vertical",opacity:r,type:"full",effect:l}),g=a.infos.length-1,v=a.infos.map(((e,r)=>0===r||r===g?n$2o("div",{key:r,class:e.label?s?_$i.univariateAboveAndBelowLabel:_$i.rampLabel:null},e.label):null)),b={display:"table-cell",verticalAlign:"middle"},u={marginTop:`${i}px`},f={height:`${y}px`};return n$2o("div",{key:"univariate-above-and-below-ramp-preview",styles:L$f},n$2o("div",{class:_$i.layerBody},a.infos.map((e=>n$2o("div",{class:this.classes(_$i.layerRow,_$i.sizeRamp)},n$2o("div",{class:_$i.symbol,styles:b,bind:e.preview,afterCreate:t$O}))))),n$2o("div",{styles:u,key:"color-ramp-preview"},n$2o("div",{styles:w$q},n$2o("div",{styles:C$d},n$2o("div",{class:_$i.rampContainer,bind:c,afterCreate:t$O})),n$2o("div",{styles:C$d},n$2o("div",{class:_$i.rampLabelsContainer,styles:f},v)))))}_renderLegendForRamp(e,r){const l=e.infos,a="opacity-ramp"===e.type,s="heatmap-ramp"===e.type,i="stretch-ramp"===e.type,t=e.preview,n=a?_$i.opacityRamp:"";t.className=`${_$i.colorRamp} ${n}`,null!=r&&(t.style.opacity=r.toString());const o=l.map((e=>n$2o("div",{class:e.label?_$i.rampLabel:null},s?this.messages[e.label]:i?this._getStretchStopLabel(e):e.label))),p={width:`${f$G}px`},d={height:t.style.height};return n$2o("div",{class:_$i.layerRow},n$2o("div",{class:_$i.symbolContainer,styles:p},n$2o("div",{class:_$i.rampContainer,bind:t,afterCreate:t$O})),n$2o("div",{class:_$i.layerInfo},n$2o("div",{class:_$i.rampLabelsContainer,styles:d},o)))}_getStretchStopLabel(e){return e.label?this.messages[e.label]+": "+("string"==typeof e.value?e.value:m$23(e.value,{style:"decimal",notation:e.value.toString().indexOf("e")>-1?"scientific":"standard"})):""}_renderLegendForElementInfo(e,r,l,a,s){if(e.type)return this._renderLegendForElement(e,r,l,!0);let i=null;const t=i$1h(r,s);if(e.preview?i=n$2o("div",{class:_$i.symbol,bind:e.preview,afterCreate:t$O}):e.src&&(i=this._renderImage(e,r,t)),!i)return null;const n={[_$i.imageryLayerInfoStretched]:t},o={[_$i.imageryLayerInfoStretched]:t,[_$i.sizeRamp]:!t&&a};return n$2o("div",{class:_$i.layerRow},n$2o("div",{class:this.classes(_$i.symbolContainer,o)},i),n$2o("div",{class:this.classes(_$i.layerInfo,n)},r$K(this.messages,e.label,!1)||""))}_renderImage(e,r,l){const{label:a,src:s,opacity:i}=e,t={[_$i.imageryLayerStretchedImage]:l,[_$i.symbol]:!l},n={opacity:`${null!=i?i:r.opacity}`};return n$2o("img",{alt:r$K(this.messages,a,!1),src:s,border:0,width:e.width,height:e.height,class:this.classes(t),styles:n})}};e$1_([d$1S()],R$c.prototype,"activeLayerInfos",void 0),e$1_([d$1S()],R$c.prototype,"headingLevel",void 0),e$1_([d$1S(),e$1w("esri/widgets/Legend/t9n/Legend")],R$c.prototype,"messages",void 0),e$1_([d$1S({readOnly:!0})],R$c.prototype,"type",void 0),R$c=e$1_([i$2w("esri.widgets.Legend.styles.Classic")],R$c);const A$a=R$c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const g$A={base:"esri-legend",widget:"esri-widget",panel:"esri-widget--panel",widgetIcon:"esri-icon-layer-list"};let f$F=class extends z$n{constructor(e,t){super(e,t),this._handles=new u$1X,this.activeLayerInfos=null,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.headingLevel=3,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.iconClass=g$A.widgetIcon,this.label=void 0,this.layerInfos=null,this.messages=null,this.style=new A$a,this.view=null,this.viewModel=new I$e;}initialize(){this.own($$f(this,"view","resize",(()=>this.scheduleRender())),$$f(this,"activeLayerInfos","change",(()=>this._refreshActiveLayerInfos(this.activeLayerInfos))),f$1p(this,"headingLevel",(e=>{const{style:s}=this;s&&(s.headingLevel=e);})),i$2i(this,"style",((e,s)=>{s&&e!==s&&s.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,"card"===e.type&&(e.view=this.view),e.headingLevel=this.headingLevel);})));}destroy(){this._handles.destroy(),this._handles=null;}castStyle(e){if(e instanceof A$b||e instanceof A$a)return e;if("string"==typeof e)return "card"===e?new A$b:new A$a;if(e&&"string"==typeof e.type){const s={...e};delete s.type;return new("card"===e.type?A$b:A$a)(s)}return new A$a}render(){return n$2o("div",{class:this.classes(g$A.base,g$A.widget,this.style instanceof A$a?g$A.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){this._handles.removeAll(),e.forEach((e=>this._renderOnActiveLayerInfoChange(e))),this.scheduleRender();}_renderOnActiveLayerInfoChange(e){const s=i$2i(e,"version",(()=>this.scheduleRender()));this._handles.add(s,`version_${e.layer.uid}`);const i=$$f(e,"children","change",(()=>{e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)));}));this._handles.add(i,`children_${e.layer.uid}`),e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)));}};e$1_([o$1Q("viewModel.activeLayerInfos")],f$F.prototype,"activeLayerInfos",void 0),e$1_([o$1Q("viewModel.basemapLegendVisible")],f$F.prototype,"basemapLegendVisible",void 0),e$1_([o$1Q("viewModel.groundLegendVisible")],f$F.prototype,"groundLegendVisible",void 0),e$1_([d$1S()],f$F.prototype,"headingLevel",void 0),e$1_([o$1Q("viewModel.hideLayersNotInCurrentView")],f$F.prototype,"hideLayersNotInCurrentView",void 0),e$1_([o$1Q("viewModel.keepCacheOnDestroy")],f$F.prototype,"keepCacheOnDestroy",void 0),e$1_([o$1Q("viewModel.respectLayerVisibility")],f$F.prototype,"respectLayerVisibility",void 0),e$1_([d$1S()],f$F.prototype,"iconClass",void 0),e$1_([d$1S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],f$F.prototype,"label",void 0),e$1_([o$1Q("viewModel.layerInfos")],f$F.prototype,"layerInfos",void 0),e$1_([d$1S(),e$1w("esri/widgets/Legend/t9n/Legend")],f$F.prototype,"messages",void 0),e$1_([d$1S()],f$F.prototype,"style",void 0),e$1_([c$2Y("style")],f$F.prototype,"castStyle",null),e$1_([o$1Q("viewModel.view")],f$F.prototype,"view",void 0),e$1_([d$1S()],f$F.prototype,"viewModel",void 0),f$F=e$1_([i$2w("esri.widgets.Legend")],f$F);const L$e=f$F;

const arcgisLegendCss = "@import url('https://js.arcgis.com/next/esri/themes/light/main.css');";

let ArcGISLegend = class extends HTMLElement {
  constructor() {
    super();
    this.__registerHost();
  }
  validateView(value) {
    if (value) {
      this.widget.view = value;
      if (this.el.parentElement.tagName.toLowerCase() !== 'arcgis-expand') {
        this.widget.view.ui.add(this.widget, this.position);
      }
    }
  }
  componentWillLoad() {
    const legend = new L$e({
      container: this.el
    });
    if (this.view) {
      legend.view = this.view;
    }
    this.widget = legend;
  }
  render() {
    return (h$1F("div", { class: "legend-container" }));
  }
  get el() { return this; }
  static get watchers() { return {
    "view": ["validateView"]
  }; }
  static get style() { return arcgisLegendCss; }
};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function n$1t(o,a){return await o.load(),i$1g(o,a)}async function i$1g(n,i){const f=[],c=(...o)=>{for(const a of o)t$1O(a)||(Array.isArray(a)?c(...a):S$F.isCollection(a)?a.forEach((o=>c(o))):m$1A.isLoadable(a)&&f.push(a));};i(c);let e=null;if(await u$16(f,(async o=>{!1!==(await a$1C(s$1d(o)?o.loadAll():o.load())).ok||e||(e=o);})),e)throw e.loadError;return n}function s$1d(o){return "loadAll"in o&&"function"==typeof o.loadAll}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h$E=s$2h.getLogger("esri.portal.PortalItemResource");let n$1s=class extends p$33{constructor(t){super(t),this.portalItem=null;}normalizeCtorArgs(t){return t&&t.portalItem&&t.path?{...t,path:this.normalizePath(t.path,t.portalItem)}:t}set path(t){r$1G(t)&&Q$d(t)?h$E.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t);}_castPath(t){return this.normalizePath(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",r){const o=this.url;if(t$1O(o))throw new s$29("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(o,{responseType:t,query:{token:this.portalItem.apiKey},signal:m$2b(r,"signal")})}async update(t,r){return (await import('./resourceUtils.js')).addOrUpdateResource(this,"update",t,r)}hasPath(){return r$1G(this.path)}normalizePath(t,r){return t$1O(t)?t:(t=t.replace(/^\/+/,""),r$1G(r)&&Q$d(t)&&(t=W$a(t,r.itemUrl)),t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};e$1_([d$1S()],n$1s.prototype,"portalItem",void 0),e$1_([d$1S({type:String,value:null})],n$1s.prototype,"path",null),e$1_([c$2Y("path")],n$1s.prototype,"_castPath",null),e$1_([d$1S({type:String,readOnly:!0})],n$1s.prototype,"url",null),e$1_([d$1S({type:String,readOnly:!0})],n$1s.prototype,"itemRelativeUrl",null),n$1s=e$1_([i$2w("esri.portal.PortalItemResource")],n$1s);const y$I=n$1s;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$L=class extends p$33{constructor(r){super(r),this.created=null,this.rating=null;}};e$1_([d$1S()],e$L.prototype,"created",void 0),e$1_([d$1S()],e$L.prototype,"rating",void 0),e$L=e$1_([i$2w("esri.portal.PortalRating")],e$L);const c$1s=e$L;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var v$p;let w$p=v$p=class extends(i$27(m$1A)){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null;}static from(e){return v$W(v$p,e)}destroy(){this.portal=null;}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return "Feature Service"===e||"Feature Collection"===e?i=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===e?i=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?i="Scene Layer":"Scene Package"===e?i="Scene Layer Package":"Stream Service"===e?i="Feature Layer":"Geoprocessing Service"===e&&this.portal&&this.portal.isPortal?i=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===e?i="Locator":"Geoenrichment Service"===e?i="GeoEnrichment Service":"Microsoft Powerpoint"===e?i="Microsoft PowerPoint":"GeoJson"===e?i="GeoJSON":"Globe Service"===e?i="Globe Layer":"Vector Tile Service"===e?i="Tile Layer":"netCDF"===e?i="NetCDF":"Map Service"===e?i=-1===t.indexOf("Spatiotemporal")&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&-1===t.indexOf("Relational")?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?i=e.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===e?i="Big Data File Share":"Compact Tile Package"===e?i="Tile Package (tpkx)":"OGCFeatureServer"===e&&(i="OGC Feature Layer"),i}readExtent(e){return e&&e.length?new M$r(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",i=this.typeKeywords||[],r="esri/images/portal/",o="16";let a,s=!1,n=!1,l=!1,p=!1,c=!1,d=!1;return e.indexOf("service")>0||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e?(s=i.indexOf("Hosted Service")>-1,"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(n=i.indexOf("Table")>-1,l=i.indexOf("Route Layer")>-1,p=i.indexOf("Markup")>-1,c=-1!==i.indexOf("Spatiotemporal"),d=-1!==i.indexOf("UtilityNetwork"),a=c&&n?"spatiotemporaltable":n?"table":l?"routelayer":p?"markup":c?"spatiotemporal":s?"featureshosted":d?"utilitynetwork":"features"):a="map service"===e||"wms"===e||"wmts"===e?s||i.indexOf("Tiled")>-1||"wmts"===e?"maptiles":"mapimages":"scene service"===e?i.indexOf("Line")>-1?"sceneweblayerline":i.indexOf("3DObject")>-1?"sceneweblayermultipatch":i.indexOf("Point")>-1?"sceneweblayerpoint":i.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":i.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":i.indexOf("Polygon")>-1?"sceneweblayerpolygon":i.indexOf("Building")>-1?"sceneweblayerbuilding":i.indexOf("Voxel")>-1?"sceneweblayervoxel":"sceneweblayer":"image service"===e?i.indexOf("Elevation 3D Layer")>-1?"elevationlayer":i.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===e?"streamlayer":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"geoprocessing service"===e&&i.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):a="web map"===e||"cityengine web scene"===e?"maps":"web scene"===e?i.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===e||"desktop application"===e?"apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&i.indexOf("ArcGIS Pro")>-1||"explorer map"===e&&i.indexOf("Explorer Document")?"mapsgray":"service definition"===e||"csv"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"360 vr experience"===e||"netcdf"===e||"administrative report"===e?"datafiles":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?"appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?"addindesktop":"rule package"===e||"file geodatabase"===e||"sqlite geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"gml"===e||"arcpad package"===e||"code sample"===e||"form"===e||"document link"===e||"earth configuration"===e||"operations dashboard add in"===e||"rules package"===e||"image"===e||"workflow manager package"===e||"explorer map"===e&&i.indexOf("Explorer Mapping Application")>-1||i.indexOf("Document")>-1?"datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e?"toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?"layersgray":"scene package"===e?"scenepackage":"mobile scene package"===e?"mobilescenepackage":"tile package"===e||"compact tile package"===e?"tilepackage":"task file"===e?"taskfile":"report template"===e?"report-template":"statistical data collection"===e?"statisticaldatacollection":"insights workbook"===e?"workbook":"insights model"===e?"insightsmodel":"insights page"===e?"insightspage":"insights theme"===e?"insightstheme":"hub initiative"===e?"hubinitiative":"hubpage"===e?"hubpage":"hub event"===e?"hubevent":"hub site application"===e?"hubsite":"relational database connection"===e?"relationaldatabaseconnection":"big data file share"===e?"datastorecollection":"image collection"===e?"imagecollection":"style"===e?"style":"desktop style"===e?"desktopstyle":"dashboard"===e?"dashboard":"raster function template"===e?"rasterprocessingtemplate":"vector tile package"===e?"vectortilepackage":"ortho mapping project"===e?"orthomappingproject":"ortho mapping template"===e?"orthomappingtemplate":"solution"===e?"solutions":"geopackage"===e?"geopackage":"deep learning package"===e?"deeplearningpackage":"real time analytic"===e?"realtimeanalytics":"big data analytic"===e?"bigdataanalytics":"feed"===e?"feed":"excalibur imagery project"===e?"excaliburimageryproject":"notebook"===e?"notebook":"storymap"===e?"storymap":"survey123 add in"===e?"survey123addin":"mission"===e?"mission":"mission report"===e?"missionreport":"quickcapture project"===e?"quickcaptureproject":"pro report"===e?"proreport":"urban model"===e?"urbanmodel":"web experience"===e?"experiencebuilder":"web experience template"===e?"webexperiencetemplate":"workflow"===e?"workflow":"insights script"===e?"insightsscript":"kernel gateway connection"===e?"kernelgatewayconnection":"hub initiative template"===e?"hubinitiativetemplate":"storymap theme"===e?"storymaptheme":"knowledge graph"===e?"knowledgegraph":"native application"===e?"nativeapp":"native application installer"===e?"nativeappinstaller":"link chart"===e?"linkchart":"investigation"===e?"investigation":"ogcfeatureserver"===e?"features":"pro project"===e?"proproject":"insights workbook package"===e?"insightsworkbookpackage":"apache parquet"===e?"apacheparquet":"maps",a?a$2O(r+a+o+".png"):null}get isLayer(){return ["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");if(!t)return null;return `${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`}load(e){this.portal||(this.portal=B$d.getDefault());const t=this.portal.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:r$1G(e)?e.signal:null,query:{token:this.apiKey}}):{})).then((e=>{this.sourceJSON=e,this.read(e);}));return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof c$1s&&(e=e.rating),isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then((()=>new c$1s({rating:e,created:new Date})))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:l$2r(this.applicationProxies),avgRating:this.avgRating,categories:l$2r(this.categories),created:l$2r(this.created),culture:this.culture,description:this.description,extent:l$2r(this.extent),groupCategories:l$2r(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:l$2r(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:l$2r(this.screenshots),size:this.size,snippet:this.snippet,tags:l$2r(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:l$2r(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new v$p({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then((()=>{}))}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then((e=>null!=e.rating?(e.created=new Date(e.created),new c$1s(e)):null))}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},v$p)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then((e=>(this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e&&e.data,i={method:"post"};i.query=this.createPostQuery();for(const e in i.query)null===i.query[e]&&(i.query[e]="");return i.query.clearEmptyFields=!0,null!=t&&("string"==typeof t?i.query.text=t:"object"==typeof t&&(i.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,i).then((()=>this.reload()))})):Promise.reject(new s$29("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if("string"==typeof t)G$k(t)?r.query={data:t}:r.query={url:T$n(t)},r$1G(i)&&(r.query.filename=i);else {const e=new FormData;r$1G(i)?e.append("file",t,i):e.append("file",t),r.body=e;}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,r).then((()=>this.reload()))})):Promise.reject(new s$29("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return (await import('./resourceUtils.js')).fetchResources(this,e,t)}async addResource(e,t,i){const r=await import('./resourceUtils.js');return e.portalItem=this,r.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const r=await import('./resourceUtils.js');if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new s$29("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r.removeResource(this,e,t)}async removeAllResources(e){return (await import('./resourceUtils.js')).removeAllResources(this,e)}resourceFromPath(e){return new y$I({portalItem:this,path:e})}toJSON(){const e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return y$1u(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new v$p({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};e$1_([d$1S({type:["private","shared","org","public"]})],w$p.prototype,"access",void 0),e$1_([d$1S()],w$p.prototype,"accessInformation",void 0),e$1_([d$1S({type:String})],w$p.prototype,"apiKey",void 0),e$1_([d$1S({json:{read:{source:"appProxies"}}})],w$p.prototype,"applicationProxies",void 0),e$1_([d$1S()],w$p.prototype,"avgRating",void 0),e$1_([d$1S()],w$p.prototype,"categories",void 0),e$1_([d$1S({type:Date})],w$p.prototype,"created",void 0),e$1_([d$1S()],w$p.prototype,"culture",void 0),e$1_([d$1S()],w$p.prototype,"description",void 0),e$1_([d$1S({readOnly:!0})],w$p.prototype,"displayName",null),e$1_([d$1S({type:M$r})],w$p.prototype,"extent",void 0),e$1_([o$1j("extent")],w$p.prototype,"readExtent",null),e$1_([d$1S()],w$p.prototype,"groupCategories",void 0),e$1_([d$1S({readOnly:!0})],w$p.prototype,"iconUrl",null),e$1_([d$1S()],w$p.prototype,"id",void 0),e$1_([d$1S({readOnly:!0})],w$p.prototype,"isLayer",null),e$1_([d$1S()],w$p.prototype,"itemControl",void 0),e$1_([d$1S({readOnly:!0})],w$p.prototype,"itemUrl",null),e$1_([d$1S()],w$p.prototype,"licenseInfo",void 0),e$1_([d$1S({type:Date})],w$p.prototype,"modified",void 0),e$1_([d$1S()],w$p.prototype,"name",void 0),e$1_([d$1S()],w$p.prototype,"numComments",void 0),e$1_([d$1S()],w$p.prototype,"numRatings",void 0),e$1_([d$1S()],w$p.prototype,"numViews",void 0),e$1_([d$1S()],w$p.prototype,"owner",void 0),e$1_([d$1S()],w$p.prototype,"ownerFolder",void 0),e$1_([d$1S({type:B$d})],w$p.prototype,"portal",void 0),e$1_([d$1S()],w$p.prototype,"screenshots",void 0),e$1_([d$1S()],w$p.prototype,"size",void 0),e$1_([d$1S()],w$p.prototype,"snippet",void 0),e$1_([d$1S()],w$p.prototype,"sourceJSON",void 0),e$1_([d$1S()],w$p.prototype,"tags",void 0),e$1_([d$1S()],w$p.prototype,"thumbnail",void 0),e$1_([d$1S({readOnly:!0})],w$p.prototype,"thumbnailUrl",null),e$1_([d$1S()],w$p.prototype,"title",void 0),e$1_([d$1S()],w$p.prototype,"type",void 0),e$1_([d$1S()],w$p.prototype,"typeKeywords",void 0),e$1_([d$1S()],w$p.prototype,"url",void 0),e$1_([d$1S({readOnly:!0})],w$p.prototype,"userItemUrl",null),w$p=v$p=e$1_([i$2w("esri.portal.PortalItem")],w$p);const b$n=w$p;

const PortalItem = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': b$n
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function a$1t(e){if(!e)return;const a=e.indexOf("-vector")>-1?e.slice(0,e.indexOf("-vector")):e,s=await u$22("esri/t9n/basemaps");return s[e]||s[a]}const s$1c={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return a$2O("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return a$2O("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return a$2O("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return a$2O("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return a$2O("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return a$2O("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return a$2O("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return a$2O("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return a$2O("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return a$2O("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return a$2O("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return a$2O("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return a$2O("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return a$2O("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return a$2O("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return a$2O("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return a$2O("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return a$2O("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return a$2O("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return a$2O("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return a$2O("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return a$2O("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return a$2O("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return a$2O("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return a$2O("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return a$2O("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return a$2O("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$J=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),l$15=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function c$1r(e){return "basemap"===e.layerContainerType?o$J:"operational-layers"===e.layerContainerType?l$15:null}function m$V(e){return !("feature"!==e.type||e.url||!e.source||"memory"!==e.source.type)}function p$1x(e,t){if(t.restrictedWebMapWriting){const r=c$1r(t);return !r$1G(r)||r.has(e.type)&&!m$V(e)}return !0}function u$T(e,t){if(m$V(e)){const n=t$1L("featureCollection.layers",t),i=n&&n[0]&&n[0].layerDefinition;i&&d$T(e,i);}else if("stream"===e.type){d$T(e,t.layerDefinition=t.layerDefinition||{});}else "group"!==e.type&&d$T(e,t);}function d$T(e,t){"maxScale"in e&&(t.maxScale=y$1p(e.maxScale)),"minScale"in e&&(t.minScale=y$1p(e.minScale));}function f$E(e,t){if(u$T(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,"normal"===t.blendMode&&delete t.blendMode),t.opacity=y$1p(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&"wmts"!==e.type)if(m$V(e)){const n=t.featureCollection;n&&(n.showLegend=e.legendEnabled);}else t.showLegend=e.legendEnabled;}function y$H(r,i,o){if(!("write"in r)||!r.write)return o&&o.messages&&o.messages.push(new s$29("layer:unsupported",`Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted`,{layer:r})),null;if(p$1x(r,o)){const e={};return r.write(e,o)?e:null}return r$1G(i)&&f$E(r,i=l$2r(i)),i}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var v$o;let S$m=0;const _$h=s$2h.getLogger("esri.Basemap");let U$b=v$o=class extends(i$27(m$1A)){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+S$m++,this.baseLayers=new S$F,this.referenceLayers=new S$F;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"===e.type&&_$h.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a basemap layer and will therefore be ignored.`);},s=e=>{e.parent=null;};this.baseLayers.on("after-add",(e=>t(e.item))),this.referenceLayers.on("after-add",(e=>t(e.item))),this.baseLayers.on("after-remove",(e=>s(e.item))),this.referenceLayers.on("after-remove",(e=>s(e.item)));}initialize(){this.when().catch((e=>{_$h.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e);})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context);}destroy(){var e;const r=this.baseLayers.removeAll();for(const s of r)s.destroy();const t=this.referenceLayers.removeAll();for(const s of t)s.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),null==(e=this.portalItem)||e.destroy(),this.portalItem=null;}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",n$2a(e,this._get("baseLayers")));}_writeBaseLayers(e,r,t){const s=[];e?(t={...t,layerContainerType:"basemap"},this.baseLayers.forEach((e=>{const r=y$H(e,t.webmap?t.webmap.getLayerJSONFromResourceInfo(e):null,t);r$1G(r)&&s.push(r);})),this.referenceLayers.forEach((e=>{const r=y$H(e,t.webmap?t.webmap.getLayerJSONFromResourceInfo(e):null,t);r$1G(r)&&(r.isReference=!0,s.push(r));})),r.baseMapLayers=s):r.baseMapLayers=s;}set referenceLayers(e){this._set("referenceLayers",n$2a(e,this._get("referenceLayers")));}writeTitle(e,r){r.title=e||"Basemap";}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return n$1t(this,(e=>{e(this.baseLayers,this.referenceLayers);}))}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new v$o({resourceInfo:this.resourceInfo}).set(e)}read(e,r){this.resourceInfo||this._set("resourceInfo",{data:e,context:r}),super.read(e,r);}write(e,r){return e=e||{},r&&r.origin||(r={origin:"web-map",...r}),super.write(e,r),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((e=>{const r=l$2r(e);return r.url&&et$2(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&et$2(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r}))),e}async _loadFromSource(e){const{resourceInfo:r,portalItem:t}=this;h$1x(e);const s=[];if(r){const t=r.context?r.context.url:null;if(s.push(this._loadLayersFromJSON(r.data,t,e)),r.data.id&&!r.data.title){const e=r.data.id;s.push(a$1t(e).then((e=>{e&&this.read({title:e},r.context);})));}}else t&&s.push(this._loadFromItem(t,e));await Promise.all(s);}async _loadLayersFromJSON(e,r,t){const s=this.resourceInfo&&this.resourceInfo.context,o=this.portalItem&&this.portalItem.portal||s&&s.portal||null,a=s&&"web-scene"===s.origin?"web-scene":"web-map",{populateOperationalLayers:i}=await import('./layersCreator.js'),n=[];if(h$1x(t),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const t={context:{origin:a,url:r,portal:o,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},s=i(this.baseLayers,e.baseMapLayers.filter((e=>!e.isReference)),t);n.push(s);const l=i(this.referenceLayers,e.baseMapLayers.filter((e=>e.isReference)),t);n.push(l);}await T$o(n);}async _loadFromItem(e,r){const t=await e.load(r),s=await t.fetchData("json",r),o=U$o(e.itemUrl);return this._set("resourceInfo",{data:s.baseMap,context:{origin:"web-map",portal:e.portal||B$d.getDefault(),url:o}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||B$d.getDefault(),url:o}),this._loadLayersFromJSON(this.resourceInfo.data,o,r)}static fromId(e){const r=s$1c[e];if(r){if(r.deprecated){let r=null;"dark-gray"===e?r="dark-gray-vector":"gray"===e?r="gray-vector":"streets"===e?r="streets-vector":"topo"===e&&(r="topo-vector"),s$1_(_$h,`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:r,see:"https://arcg.is/1iq8aD",warnOnce:!0});}return v$o.fromJSON(r)}return null}};e$1_([d$1S({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,r,t,s){this._writeBaseLayers(e,r,s);}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:S$F}},writer(e,r,t,s){this._writeBaseLayers(e,r,s);}}}}}})],U$b.prototype,"baseLayers",null),e$1_([d$1S({type:String,json:{origins:{"web-scene":{write:!0}}}})],U$b.prototype,"id",void 0),e$1_([d$1S({type:b$n})],U$b.prototype,"portalItem",void 0),e$1_([d$1S()],U$b.prototype,"referenceLayers",null),e$1_([d$1S({readOnly:!0})],U$b.prototype,"resourceInfo",void 0),e$1_([d$1S({type:k$s})],U$b.prototype,"spatialReference",void 0),e$1_([d$1S()],U$b.prototype,"thumbnailUrl",void 0),e$1_([d$1S({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],U$b.prototype,"title",void 0),e$1_([r$1c("title")],U$b.prototype,"writeTitle",null),U$b=v$o=e$1_([i$2w("esri.Basemap")],U$b);const x$d=U$b;

const Basemap = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': x$d
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$N;let p$1w=t$N=class extends a$2A{constructor(o){super(o),this.type="none";}clone(){return new t$N({type:this.type})}};e$1_([r$1d({none:"none",stayAbove:"stay-above"})],p$1w.prototype,"type",void 0),p$1w=t$N=e$1_([i$2w("esri.ground.NavigationConstraint")],p$1w);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var w$o;const C$c=s$2h.getLogger("esri.Ground");let S$l=w$o=class extends(i$27(m$1A)){constructor(r){super(r),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new S$F;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,"elevation"!==r.type&&"base-elevation"!==r.type&&C$c.error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`);},t=r=>{r.parent=null;};this.layers.on("after-add",(r=>e(r.item))),this.layers.on("after-remove",(r=>t(r.item)));}initialize(){this.when().catch((r=>{C$c.error("#load()","Failed to load ground",r);})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context);}destroy(){const r=this.layers.removeAll();for(const e of r)e.destroy();this.layers.destroy();}normalizeCtorArgs(r){return r&&"resourceInfo"in r&&(this._set("resourceInfo",r.resourceInfo),delete(r={...r}).resourceInfo),r}set layers(r){this._set("layers",n$2a(r,this._get("layers")));}writeLayers(r,e,o,t){const i=[];r?(t={...t,layerContainerType:"ground"},r.forEach((r=>{if("write"in r){const e={};o$U(r)().write(e,t)&&i.push(e);}else t&&t.messages&&t.messages.push(new s$29("layer:unsupported",`Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted in the ground`,{layer:r}));})),e.layers=i):e.layers=i;}load(r){return this.addResolvingPromise(this._loadFromSource(r)),Promise.resolve(this)}loadAll(){return n$1t(this,(r=>{r(this.layers);}))}async queryElevation(r,e){await this.load({signal:null==e?void 0:e.signal});const{ElevationQuery:o}=await import('./ElevationQuery.js');h$1x(e);const t=new o,s=this.layers.filter(L$d).toArray();return t.queryAll(s,r,e)}async createElevationSampler(r,e){await this.load({signal:null==e?void 0:e.signal});const{ElevationQuery:o}=await import('./ElevationQuery.js');h$1x(e);const t=new o,s=this.layers.filter(L$d).toArray();return t.createSamplerAll(s,r,e)}clone(){const r={opacity:this.opacity,surfaceColor:l$2r(this.surfaceColor),navigationConstraint:l$2r(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(r.loadStatus="loaded"),new w$o({resourceInfo:this.resourceInfo}).set(r)}read(r,e){this.resourceInfo||this._set("resourceInfo",{data:r,context:e}),super.read(r,e);}_loadFromSource(r){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,r):Promise.resolve(null)}_loadLayersFromJSON(r,e,o){const t=e&&e.origin||"web-scene",s=e&&e.portal||null,a=e&&e.url||null;return import('./layersCreator.js').then((({populateOperationalLayers:e})=>{h$1x(o);const i=[];if(r.layers&&Array.isArray(r.layers)){const o={context:{origin:t,url:a,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};i.push(e(this.layers,r.layers,o));}return T$o(i)})).then((()=>{}))}};function I$c(r){return r&&"createElevationSampler"in r}function L$d(r){return "elevation"===r.type||I$c(r)}e$1_([d$1S({json:{read:!1}})],S$l.prototype,"layers",null),e$1_([r$1c("layers")],S$l.prototype,"writeLayers",null),e$1_([d$1S({readOnly:!0})],S$l.prototype,"resourceInfo",void 0),e$1_([d$1S({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:S$J,read:{reader:r$14,source:"transparency"},write:{writer:(r,e)=>{e.transparency=n$2g(r);},target:"transparency"}}})],S$l.prototype,"opacity",void 0),e$1_([d$1S({type:h$1l,json:{type:[S$J],write:(r,e)=>{e.surfaceColor=r.toJSON().slice(0,3);}}})],S$l.prototype,"surfaceColor",void 0),e$1_([d$1S({type:p$1w,json:{write:!0}})],S$l.prototype,"navigationConstraint",void 0),S$l=w$o=e$1_([i$2w("esri.Ground")],S$l);const A$9=S$l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$14=class extends(a$26(S$F)){constructor(t){super(t),this.getCollections=null;}initialize(){this.handles.add(l$2f((()=>this.refresh())));}destroy(){this.getCollections=null;}refresh(){const t=r$1G(this.getCollections)?this.getCollections():null;if(t$1O(t))return void this.removeAll();let o=0;for(const s of t)r$1G(s)&&(o=this._processCollection(o,s));this.splice(o,this.length);}_createNewInstance(t){return new S$F(t)}_processCollection(t,o){if(!o)return t;const s=this.itemFilterFunction?this.itemFilterFunction:t=>!!t;for(const e of o)if(e){if(s(e)){const o=this.indexOf(e,t);o>=0?o!==t&&this.reorder(e,t):this.add(e,t),++t;}if(this.getChildrenFunction){const o=this.getChildrenFunction(e);if(Array.isArray(o))for(const s of o)t=this._processCollection(t,s);else t=this._processCollection(t,o);}}return t}};e$1_([d$1S()],l$14.prototype,"getCollections",void 0),e$1_([d$1S()],l$14.prototype,"getChildrenFunction",void 0),e$1_([d$1S()],l$14.prototype,"itemFilterFunction",void 0),l$14=e$1_([i$2w("esri.core.CollectionFlattener")],l$14);const p$1v=l$14;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$1f(i){var n;return !!(i&&i.loaded&&"capabilities"in i&&null!=i&&null!=(n=i.capabilities)&&n.operations&&"supportsEditing"in i.capabilities.operations&&!0===i.capabilities.operations.supportsEditing)&&!("editingEnabled"in i&&!i.editingEnabled)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$1q=s$2h.getLogger("esri.support.basemapUtils");function u$S(){return {}}function f$D(e){for(const r in e){const n=e[r];!1===(null==n?void 0:n.destroyed)&&n.destroy(),delete e[r];}}function y$G(n,t){var a;let l;if("string"==typeof n){if(!(n in s$1c)){const e=Object.entries(s$1c).filter((([e,n])=>t$1K.apiKey&&!n.classic||!t$1K.apiKey&&n.classic&&!n.deprecated)).map((([e])=>`"${e}"`)).join(", ");return c$1q.warn(`Unable to find basemap definition for: ${n}. Try one of these: ${e}`),null}t&&(l=t[n]),l||(l=x$d.fromId(n),t&&(t[n]=l));}else l=b$Z(x$d,n);return null!=(a=l)&&a.destroyed&&(c$1q.warn("The provided basemap is already destroyed",{basemap:l}),l=null),l}function d$S(e){return !(null==e||!e.baseLayers.concat(e.referenceLayers).some(S$k))}function S$k(e){if(v$n(e.url))return !0;if("vector-tile"===e.type)for(const r in e.sourceNameToSource){const n=e.sourceNameToSource[r];if(v$n(null==n?void 0:n.sourceUrl))return !0}return !1}const h$D=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function v$n(e){if(!e)return !1;const r=new $$h(T$n(e));return h$D.test(r.authority)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$1e=s$2h.getLogger("esri.support.groundUtils"),t$M={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function a$1s(r){let a=null;if("string"==typeof r)if(r in t$M){const o=t$M[r];a=new A$9({resourceInfo:{data:{layers:[o]}}});}else i$1e.warn(`Unable to find ground definition for: ${r}. Try "world-elevation"`);else a=b$Z(A$9,r);return a}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let m$U=0;const h$C=s$2h.getLogger("esri.layers.Layer");let f$C=class extends(n$2y.EventedMixin(r$X(m$1A))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new M$r(-180,-90,180,90,k$s.WGS84),this.id=Date.now().toString(16)+"-layer-"+m$U++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=k$s.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0;}static async fromArcGISServerUrl(t){const r="string"==typeof t?{url:t}:t,e=await import('./arcgisLayers.js');try{return await e.fromUrl(r)}catch(o){throw h$C.error("#fromArcGISServerUrl({ url: '"+r.url+"'})","Failed to create layer from arcgis server url",o),o}}static async fromPortalItem(t){const e="portalItem"in t?t:{portalItem:t},o=await import('./portalLayers.js');try{return await o.fromItem(e)}catch(i){const t=e&&e.portalItem,o=t&&t.id||"unset",a=t&&t.portal&&t.portal.url||t$1K.portalUrl;throw h$C.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+o+"')",i),i}}initialize(){this.when().catch((t=>{var r,e;d$1O(t)||s$2h.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${null!=(r=this.title)?r:"no title"}', id: '${null!=(e=this.id)?e:"no id"}')`,{error:t});}));}destroy(){if(this.parent){const t=this,r=this.parent;"layers"in r&&r.layers.includes(t)?r.layers.remove(t):"tables"in r&&r.tables.includes(t)?r.tables.remove(t):"baseLayers"in r&&r.baseLayers.includes(t)?r.baseLayers.remove(t):"baseLayers"in r&&r.referenceLayers.includes(t)&&r.referenceLayers.remove(t);}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const t=this.url;return t?U$o(t):null}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t){return (await E$t(t,{query:{f:"json"},responseType:"json"})).data}throw new s$29("layer:no-attribution-data","Layer does not have attribution data")}};e$1_([d$1S({type:String})],f$C.prototype,"attributionDataUrl",void 0),e$1_([d$1S({type:M$r})],f$C.prototype,"fullExtent",void 0),e$1_([d$1S({readOnly:!0})],f$C.prototype,"hasAttributionData",null),e$1_([d$1S({type:String})],f$C.prototype,"id",void 0),e$1_([d$1S({type:Boolean,nonNullable:!0})],f$C.prototype,"legendEnabled",void 0),e$1_([d$1S({type:["show","hide","hide-children"]})],f$C.prototype,"listMode",void 0),e$1_([d$1S({type:Number,range:{min:0,max:1},nonNullable:!0})],f$C.prototype,"opacity",void 0),e$1_([d$1S()],f$C.prototype,"parent",void 0),e$1_([d$1S({readOnly:!0})],f$C.prototype,"parsedUrl",null),e$1_([d$1S({type:Boolean})],f$C.prototype,"popupEnabled",void 0),e$1_([d$1S({type:Boolean})],f$C.prototype,"attributionVisible",void 0),e$1_([d$1S({type:k$s})],f$C.prototype,"spatialReference",void 0),e$1_([d$1S({type:String})],f$C.prototype,"title",void 0),e$1_([d$1S({type:String,readOnly:!0,json:{read:!1}})],f$C.prototype,"type",void 0),e$1_([d$1S()],f$C.prototype,"url",void 0),e$1_([d$1S({type:Boolean,nonNullable:!0})],f$C.prototype,"visible",void 0),f$C=e$1_([i$2w("esri.layers.Layer")],f$C);const b$m=f$C;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function l$13(e){return e&&"group"===e.type}function d$R(e,r,t){let s,o;if(e)for(let i=0,a=e.length;i<a;i++){if(s=e.getItemAt(i),s[r]===t)return s;if(l$13(s)&&(o=d$R(s.layers,r,t),o))return o}}const y$F=s$2h.getLogger("esri.support.LayersMixin"),p$1u=s=>{let l=class extends s{constructor(...e){super(...e),this.layers=new S$F;const t=e=>{e.parent&&"remove"in e.parent&&e.parent.remove(e);},s=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||y$F.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`);},o=e=>{e.parent=null,this.layerRemoved(e);};this.layers.on("before-add",(e=>t(e.item))),this.layers.on("after-add",(e=>s(e.item))),this.layers.on("after-remove",(e=>o(e.item)));}destroy(){const e=this.layers.removeAll();for(const r of e)this.layerRemoved(r),r.destroy();this.layers.destroy();}set layers(e){this._set("layers",n$2a(e,this._get("layers")));}add(e,r){const t=this.layers;if(r=t.getNextIndex(r),e instanceof b$m){const s=e;s.parent===this?this.reorder(s,r):t.add(s,r);}else O$r(e)?e.then((e=>{this.destroyed||this.add(e,r);})):y$F.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.");}addMany(e,r){const t=this.layers;r=t.getNextIndex(r),e.slice().forEach((e=>{e.parent!==this?(t.add(e,r),r+=1):this.reorder(e,r);}));}findLayerById(e){return d$R(this.layers,"id",e)}findLayerByUid(e){return d$R(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,r){return this.layers.reorder(e,r)}layerAdded(e){}layerRemoved(e){}};return e$1_([d$1S()],l.prototype,"layers",null),l=e$1_([i$2w("esri.support.LayersMixin")],l),l};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$1r="esri.support.TablesMixin",n$1r=s$2h.getLogger(a$1r);function l$12(t){return t&&"group"===t.type}function p$1t(t,e,r){if(t)for(let s=0,o=t.length;s<o;s++){const o=t.getItemAt(s);if(o[e]===r)return o;if(l$12(o)){const t=p$1t(o.tables,e,r);if(t)return t}}}const c$1p=s=>{let l=class extends s{constructor(...t){super(...t),this.tables=new S$F,this.tables.on("after-add",(t=>{const e=t.item;e.parent&&e.parent!==this&&"tables"in e.parent&&e.parent.tables.remove(e),e.parent=this,"feature"!==e.type&&n$1r.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as a table and will therefore be ignored.`);})),this.tables.on("after-remove",(t=>{t.item.parent=null;}));}destroy(){const t=this.tables.removeAll();for(const e of t)e.destroy();this.tables.destroy();}set tables(t){this._set("tables",n$2a(t,this._get("tables")));}findTableById(t){return p$1t(this.tables,"id",t)}findTableByUid(t){return p$1t(this.tables,"uid",t)}};return e$1_([d$1S()],l.prototype,"tables",null),l=e$1_([i$2w(a$1r)],l),l};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let f$B=class extends(c$1p(p$1u(n$2y.EventedMixin(p$33)))){constructor(e){super(e),this.allLayers=new p$1v({getCollections:()=>{var e,s,r;return [null==(e=this.basemap)?void 0:e.baseLayers,null==(s=this.ground)?void 0:s.layers,this.layers,null==(r=this.basemap)?void 0:r.referenceLayers]},getChildrenFunction:e=>"layers"in e?e.layers:null}),this.allTables=new p$1v({getCollections:()=>[this.tables,this.layers],getChildrenFunction:e=>{const s=[];return "tables"in e&&s.push(e.tables),"layers"in e&&s.push(e.layers),s},itemFilterFunction:e=>{const s=e.parent;return s&&"tables"in s&&s.tables.includes(e)}}),this.basemap=null,this.editableLayers=new p$1v({getCollections:()=>[this.allLayers],itemFilterFunction:i$1f}),this.ground=new A$9,this._basemapCache=u$S();}destroy(){var e,s;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),null==(e=this.ground)||e.destroy(),null==(s=this.basemap)||s.destroy(),f$D(this._basemapCache),this._basemapCache=null;}castBasemap(e){return y$G(e,this._basemapCache)}castGround(e){const s=a$1s(e);return t$1O(s)?this._get("ground"):s}findLayerById(e){return this.allLayers.find((s=>s.id===e))}findTableById(e){return this.allTables.find((s=>s.id===e))}};e$1_([d$1S({readOnly:!0,dependsOn:[]})],f$B.prototype,"allLayers",void 0),e$1_([d$1S({readOnly:!0})],f$B.prototype,"allTables",void 0),e$1_([d$1S({type:x$d})],f$B.prototype,"basemap",void 0),e$1_([c$2Y("basemap")],f$B.prototype,"castBasemap",null),e$1_([d$1S({readOnly:!0})],f$B.prototype,"editableLayers",void 0),e$1_([d$1S({type:A$9,nonNullable:!0})],f$B.prototype,"ground",void 0),e$1_([c$2Y("ground")],f$B.prototype,"castGround",null),f$B=e$1_([i$2w("esri.Map")],f$B);const j$h=f$B;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$K;!function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON";}(e$K||(e$K={}));let r$I=0;function n$1q(){return r$I++}function s$1b(t){return t&&"object"==typeof t&&("result"in t||"transferList"in t)}function a$1q(t){return t?"string"==typeof t?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function i$1d(t,r,n,a){if(r.type===e$K.OPEN_PORT)return void t.postMessage(r,[r.port]);if(r.type!==e$K.INVOKE&&r.type!==e$K.RESPONSE)return void t.postMessage(r);let i;s$1b(n)?(i=o$I(n.transferList),r.data=n.result):(i=o$I(a),r.data=n),i?t.postMessage(r,i):t.postMessage(r);}function f$A(t){if(!t)return null;const e=t.data;return e?"string"==typeof e?JSON.parse(e):e:null}function o$I(e){if(!e||!e.length)return null;if(s$2l("esri-workers-arraybuffer-transfer"))return e;const r=e.filter((t=>!u$R(t)));return r.length?r:null}function u$R(t){return t instanceof ArrayBuffer||t&&t.constructor&&"ArrayBuffer"===t.constructor.name}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$T={statsWorker:()=>import('./statsWorker.js'),geometryEngineWorker:()=>import('./geometryEngineWorker.js'),CSVSourceWorker:()=>import('./CSVSourceWorker.js'),EdgeProcessingWorker:()=>import('./EdgeProcessingWorker.js'),ElevationSamplerWorker:()=>import('./ElevationSamplerWorker.js'),FeatureServiceSnappingSourceWorker:()=>import('./FeatureServiceSnappingSourceWorker.js'),GeoJSONSourceWorker:()=>import('./GeoJSONSourceWorker.js'),LercWorker:()=>import('./LercWorker.js'),MemorySourceWorker:()=>import('./MemorySourceWorker.js'),PBFDecoderWorker:()=>import('./PBFDecoderWorker.js'),Pipeline:()=>import('./Pipeline.js'),PointCloudWorker:()=>import('./PointCloudWorker.js'),RasterWorker:()=>import('./RasterWorker.js'),SceneLayerWorker:()=>import('./SceneLayerWorker.js'),WFSSourceWorker:()=>import('./WFSSourceWorker.js'),WorkerTileHandler:()=>import('./WorkerTileHandler.js')},{CLOSE:g$z,ABORT:b$l,INVOKE:k$b,RESPONSE:v$m,OPEN_PORT:y$E,ON:j$g}=e$K;class f$z{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this);}push(e){e.type===e$K.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)));}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null;}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0;}}class M$a{constructor(e,s){this._port=e,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new f$z((e=>this._onInvokeMessage(e))),this._client=s.client,this._onMessage=this._onMessage.bind(this),this._channel=s.channel,this._schedule=s.schedule,this._port.addEventListener("message",this._onMessage),this._port.start();}static connect(e){const s=new MessageChannel;let t;t="function"==typeof e?new e:"default"in e&&"function"==typeof e.default?new e.default:e;const o=new M$a(s.port1,{channel:s,client:t});return "object"==typeof t&&"remoteClient"in t&&(t.remoteClient=o),M$a.clients.set(o,t),s.port2}static loadWorker(e){const s=m$T[e];return s?s():Promise.resolve(null)}close(){this._post({type:g$z}),this._close();}isBusy(){return this._outJobs.size>0}invoke(e,t,o){const n=o&&o.signal,a=o&&o.transferList;if(!this._port)return Promise.reject(new s$29("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:t}));const c=n$1q();return new Promise(((s,o)=>{const l=v$T(n,(()=>{var e;const s=this._outJobs.get(c);s&&(this._outJobs.delete(c),null==(e=s.abortHandle)||e.remove(),this._post({type:b$l,jobId:c}),o(m$22()));})),p={resolve:s,reject:o,abortHandle:l,debugInfo:e};this._outJobs.set(c,p),this._post({type:k$b,jobId:c,methodName:e,abortable:null!=n},t,a);}))}on(e,s){const t=new MessageChannel;function o(e){s(e.data);}return this._port.postMessage({type:e$K.ON,eventType:e,port:t.port2},[t.port2]),t.port1.addEventListener("message",o),t.port1.start(),{remove(){t.port1.postMessage({type:e$K.CLOSE}),t.port1.close(),t.port1.removeEventListener("message",o);}}}openPort(){const e=new MessageChannel;return this._post({type:y$E,port:e.port2}),e.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((e=>{var s;null==(s=e.abortHandle)||s.remove(),e.reject(m$22(`Worker closing, aborting job calling '${e.debugInfo}'`));})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null;}_onMessage(e){r$1G(this._schedule)?this._schedule((()=>this._processMessage(e))):this._processMessage(e);}_processMessage(e){const s=f$A(e);if(s)switch(s.type){case v$m:this._onResponseMessage(s);break;case k$b:this._invokeQueue.push(s);break;case b$l:this._onAbortMessage(s);break;case g$z:this._onCloseMessage();break;case y$E:this._onOpenPortMessage(s);break;case j$g:this._onOnMessage(s);}}_onAbortMessage(e){const s=this._inJobs,t=e.jobId,o=s.get(t);this._invokeQueue.push(e),o&&(o.controller&&o.controller.abort(),s.delete(t));}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&M$a.clients.get(this)===e&&e.destroy(),M$a.clients.delete(this),e&&e.remoteClient&&(e.remoteClient=null);}_onInvokeMessage(e){const{methodName:s,jobId:t,data:o,abortable:r}=e,i=r?new AbortController:null,l=this._inJobs;let c,p=this._client,u=p[s];try{if(!u&&s&&-1!==s.indexOf(".")){const e=s.split(".");for(let s=0;s<e.length-1;s++)p=p[e[s]],u=p[e[s+1]];}if("function"!=typeof u)throw new TypeError(`${s} is not a function`);c=u.call(p,o,{client:this,signal:i?i.signal:null});}catch(_){return void this._post({type:v$m,jobId:t,error:a$1q(_)})}O$r(c)?(l.set(t,{controller:i,promise:c}),c.then((e=>{l.has(t)&&(l.delete(t),this._post({type:v$m,jobId:t},e));}),(e=>{l.has(t)&&(l.delete(t),d$1O(e)||this._post({type:v$m,jobId:t,error:a$1q(e||{message:`Error encountered at method ${s}`})}));}))):this._post({type:v$m,jobId:t},c);}_onOpenPortMessage(e){new M$a(e.port,{client:this._client});}_onOnMessage(e){const{port:s}=e,o=this._client.on(e.eventType,(e=>{s.postMessage(e);})),r=r$1x(e.port,"message",(e=>{f$A(e).type===e$K.CLOSE&&(r.remove(),o.remove(),s.close());}));}_onResponseMessage(e){var t;const{jobId:o,error:r,data:i}=e,n=this._outJobs;if(!n.has(o))return;const a=n.get(o);n.delete(o),null==(t=a.abortHandle)||t.remove(),r?a.reject(s$29.fromJSON(JSON.parse(r))):a.resolve(i);}_post(e,s,t){return i$1d(this._port,e,s,t)}}M$a.kernelInfo={revision:e$1V,version:a$2Q,buildDate:d$1U},M$a.clients=new Map;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$H=s$2h.getLogger("esri.core.workers.Connection");class l$11{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0;}destroy(){this.close();}get closed(){return !this._clients||!this._clients.length}open(e,t){return new Promise(((r,l)=>{let o=!0;const h=e=>{h$1x(t.signal),o&&(o=!1,e());};this._clients.length=e.length,this._clientPromises.length=e.length;for(let i=0;i<e.length;++i){const o=e[i];O$r(o)?this._clientPromises[i]=o.then((e=>(this._clients[i]=new M$a(e,t),h(r),this._clients[i])),(()=>(h(l),null))):(this._clients[i]=new M$a(o,t),this._clientPromises[i]=Promise.resolve(this._clients[i]),h(r));}}))}broadcast(e,t,s){const i=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const r=this._clientPromises[n];i[n]=r.then((i=>i.invoke(e,t,s)));}return i}close(){for(const e of this._clientPromises)e.then((e=>e.close()));this._clients.length=0,this._clientPromises.length=0;}getAvailableClient(){let e;for(let t=0;t<this._clients.length;++t){const s=this._clients[t];if(s){if(!s.isBusy())return Promise.resolve(s)}else e=e||[],e.push(this._clientPromises[t]);}return e?Promise.race(e):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(e,t,s){let i=null;if(Array.isArray(s)?(r$H.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),i={transferList:s}):i=s,this.closed)return Promise.reject(new Error("Connection closed"));return this.getAvailableClient().then((s=>s.invoke(e,t,i)))}on(t,s){return Promise.all(this._clientPromises).then((()=>r$1C(this._clients.map((e=>e.on(t,s))))))}openPorts(){return new Promise((e=>{const t=new Array(this._clientPromises.length);let s=t.length;for(let i=0;i<this._clientPromises.length;++i){this._clientPromises[i].then((n=>{t[i]=n.openPort(),0==--s&&e(t);}));}}))}get test(){return {numClients:this._clients.length}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$1a={};function e$J(a,s){for(const e of a)if(e.name===s.name)return;a.push(s);}function r$G(a){var r;const n={async:a.async,isDebug:a.isDebug,locale:a.locale,baseUrl:a.baseUrl,has:{...a.has},map:{...a.map},packages:a.packages&&a.packages.concat()||[],paths:{...a.paths}};return a.hasOwnProperty("async")||(n.async=!0),a.hasOwnProperty("isDebug")||(n.isDebug=!1),a.baseUrl||(n.baseUrl=s$1a.baseUrl),null==(r=s$1a.packages)||r.forEach((a=>{e$J(n.packages,a);})),n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class n$1p{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((t=>{this[t]=(...s)=>e[t](...s);}));}}const o$H=e$1Z.MutationObserver||e$1Z.WebKitMutationObserver,a$1p=function(){let t;if(e$1Z.process&&e$1Z.process.nextTick)t=t=>{e$1Z.process.nextTick(t);};else if(e$1Z.Promise)t=t=>{e$1Z.Promise.resolve().then(t);};else if(o$H){const e=[],s=document.createElement("div");new o$H((()=>{for(;e.length>0;)e.shift()();})).observe(s,{attributes:!0}),t=t=>{e.push(t),s.setAttribute("queueStatus","1");};}return t}(),i$1c=(()=>{const t=e$1Z.MessageEvent;try{new t("message",{data:null});}catch{return (e,t={})=>{const{data:s,bubbles:r=!1,cancelable:n=!1}=t,o=document.createEvent("Event");return o.initEvent(e,r,n),o.data=s,o}}return (e,s)=>new t(e,s)})();class d$Q{constructor(){this._dispatcher=new n$1p,this._workerPostMessage({type:e$K.HANDSHAKE});}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e);}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e);}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e);}postMessage(e){a$1p((()=>{this._workerMessageHandler(i$1c("message",{data:e}));}));}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,s){this._dispatcher.addEventListener(e,t,s);}removeEventListener(e,t,s){this._dispatcher.removeEventListener(e,t,s);}_workerPostMessage(e){a$1p((()=>{this.dispatchEvent(i$1c("message",{data:e}));}));}async _workerMessageHandler(e){const n=f$A(e);if(n&&n.type===e$K.OPEN){const{modulePath:e,jobId:r}=n;let o=await M$a.loadWorker(e);o||(o=await import(
/* @vite-ignore */
/* webpackIgnore: true */
e));const a=M$a.connect(o);this._workerPostMessage({type:e$K.OPENED,jobId:r,data:a});}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$S=s$2h.getLogger("esri.core.workers"),{HANDSHAKE:g$y}=e$K,p$1s='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let k$a,h$B;const w$n="Failed to create Worker. Fallback to execute module in main thread";async function v$l(){if(!s$2l("esri-workers"))return b$k(new d$Q);if(!k$a&&!h$B)try{const e=p$1s.replace('"{CONFIGURATION}"',`'${y$D()}'`);k$a=URL.createObjectURL(new Blob([e],{type:"text/javascript"}));}catch(r){h$B=r||{};}let e;if(k$a)try{e=new Worker(k$a,{name:"esri-worker-"+P$f++});}catch(r){m$S.warn(w$n,h$B),e=new d$Q;}else m$S.warn(w$n,h$B),e=new d$Q;return b$k(e)}async function b$k(e){return new Promise((r=>{function o(s){const i=f$A(s);i&&i.type===g$y&&(e.removeEventListener("message",o),e.removeEventListener("error",t),r(e));}function t(r){r.preventDefault(),e.removeEventListener("message",o),e.removeEventListener("error",t),m$S.warn("Failed to create Worker. Fallback to execute module in main thread",r),(e=new d$Q).addEventListener("message",o),e.addEventListener("error",t);}e.addEventListener("message",o),e.addEventListener("error",t);}))}function y$D(){let s;if(null!=t$1K.default){const e={...t$1K};delete e.default,s=JSON.parse(JSON.stringify(e));}else s=JSON.parse(JSON.stringify(t$1K));s.assetsPath=T$n(s.assetsPath),s.request.interceptors=[],s.log.interceptors=[],s.locale=i$2v(),s.has={"esri-csp-restrictions":s$2l("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":s$2l("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":s$2l("esri-2d-query-centroid-enabled"),"featurelayer-pbf":s$2l("featurelayer-pbf"),"featurelayer-simplify-thresholds":s$2l("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":s$2l("featurelayer-simplify-payload-size-factors"),"esri-atomics":s$2l("esri-atomics"),"esri-shared-array-buffer":s$2l("esri-shared-array-buffer"),"esri-tiles-debug":s$2l("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":s$2l("esri-workers-arraybuffer-transfer"),"host-webworker":1},s.workers.loaderUrl&&(s.workers.loaderUrl=T$n(s.workers.loaderUrl)),s.workers.workerPath?s.workers.workerPath=T$n(s.workers.workerPath):s.workers.workerPath=T$n(a$2O("esri/core/workers/RemoteClient.js"));const a=t$1K.workers.loaderConfig,l=r$G({baseUrl:null==a?void 0:a.baseUrl,locale:i$2v(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...null==a?void 0:a.has},map:{...null==a?void 0:a.map},paths:{...null==a?void 0:a.paths},packages:(null==a?void 0:a.packages)||[]}),f={version:a$2Q,buildDate:d$1U,revision:e$1V};return JSON.stringify({esriConfig:s,loaderConfig:l,kernelInfo:f})}let P$f=0;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$1r=s$2h.getLogger("esri.core.workers"),{ABORT:b$j,INVOKE:m$R,OPEN:_$g,OPENED:u$Q,RESPONSE:g$x}=e$K;class j$f{constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",(e=>{e.preventDefault(),p$1r.error(e);}));}static async create(e){const t=await v$l();return new j$f(t,e)}terminate(){this.worker.terminate();}async open(e,t={}){const{signal:o}=t,r=n$1q();return new Promise(((t,n)=>{const a={resolve:t,reject:n,abortHandle:v$T(o,(()=>{this._outJobs.delete(r),this._post({type:b$j,jobId:r});}))};this._outJobs.set(r,a),this._post({type:_$g,jobId:r,modulePath:e});}))}_onMessage(e){const t=f$A(e);if(t)switch(t.type){case u$Q:this._onOpenedMessage(t);break;case g$x:this._onResponseMessage(t);break;case b$j:this._onAbortMessage(t);break;case m$R:this._onInvokeMessage(t);}}_onAbortMessage(e){const t=this._inJobs,o=e.jobId,s=t.get(o);s&&(s.controller&&s.controller.abort(),t.delete(o));}_onInvokeMessage(t){const{methodName:o,jobId:s,data:a,abortable:i}=t,d=i?new AbortController:null,h=this._inJobs,c=s$20[o];let p;try{if("function"!=typeof c)throw new TypeError(`${o} is not a function`);p=c.call(null,a,{signal:d?d.signal:null});}catch(b){return void this._post({type:g$x,jobId:s,error:a$1q(b)})}O$r(p)?(h.set(s,{controller:d,promise:p}),p.then((e=>{h.has(s)&&(h.delete(s),this._post({type:g$x,jobId:s},e));}),(e=>{h.has(s)&&(h.delete(s),e||(e={message:"Error encountered at method"+o}),d$1O(e)||this._post({type:g$x,jobId:s,error:a$1q(e||{message:`Error encountered at method ${o}`})}));}))):this._post({type:g$x,jobId:s},p);}_onOpenedMessage(e){var t;const{jobId:o,data:s}=e,r=this._outJobs.get(o);r&&(this._outJobs.delete(o),null==(t=r.abortHandle)||t.remove(),r.resolve(s));}_onResponseMessage(e){var o;const{jobId:s,error:r,data:n}=e,a=this._outJobs.get(s);a&&(this._outJobs.delete(s),null==(o=a.abortHandle)||o.remove(),r?a.reject(s$29.fromJSON(JSON.parse(r))):a.resolve(n));}_post(e,t,o){return i$1d(this.worker,e,t,o)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$19=s$2l("esri-workers-debug")?1:s$2l("host-browser")?navigator.hardwareConcurrency-1:0;s$19||(s$19=s$2l("safari")&&s$2l("mac")||s$2l("trident")?7:2);let a$1o=0;const l$10=[];function c$1o(){h$A();}async function f$y(t,r){const e=new l$11;return await e.open(t,r),e}async function u$P(o,i={}){if("string"!=typeof o)throw new s$29("workers:undefined-module","modulePath is missing");let c=i.strategy||"distributed";if(s$2l("host-webworker")&&!s$2l("esri-workers")&&(c="local"),"local"===c){let t=await M$a.loadWorker(o);t||(t=await import(
/* @vite-ignore */
/* webpackIgnore: true */
o)),h$1x(i.signal);const r=i.client||t;return f$y([M$a.connect(t)],{...i,client:r})}if(await h$A(),h$1x(i.signal),"dedicated"===c){const t=a$1o++%s$19;return f$y([await l$10[t].open(o,i)],i)}if(i.maxNumWorkers&&i.maxNumWorkers>0){const t=Math.min(i.maxNumWorkers,s$19);if(t<s$19){const r=new Array(t);for(let e=0;e<t;++e){const t=a$1o++%s$19;r[e]=l$10[t].open(o,i);}return f$y(r,i)}}return f$y(l$10.map((t=>t.open(o,i))),i)}let d$P=null;async function h$A(){if(d$P)return d$P;new AbortController;const t=[];for(let r=0;r<s$19;r++){const e=j$f.create(r).then((t=>(l$10[r]=t,t)));t.push(e);}return d$P=Promise.all(t),d$P}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$$={widthBreakpoint:{getValue(e){const i=e.viewSize[0],s=e.breakpoints,a=this.values;return i<=s.xsmall?a.xsmall:i<=s.small?a.small:i<=s.medium?a.medium:i<=s.large?a.large:a.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const i=e.viewSize[1],s=e.breakpoints,a=this.values;return i<=s.xsmall?a.xsmall:i<=s.small?a.small:i<=s.medium?a.medium:i<=s.large?a.large:a.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const i=e.viewSize,s=i[0],a=i[1],t=this.values;return a>=s?t.portrait:t.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},h$z={xsmall:544,small:768,medium:992,large:1200};function n$1o(e){const i=e;return i&&i.xsmall<i.small&&i.small<i.medium&&i.medium<i.large}function o$G(e,i){return i?l$$[e].valueToClassName[i].split(" "):[]}const m$Q=m=>{let g=class extends m{constructor(...e){super(...e),this._breakpointsHandles=new u$1X,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=h$z;}initialize(){this._breakpointsHandles.add(i$2i(this,["breakpoints","size"],this._updateClassNames));}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null);}set breakpoints(e){if(e===this._get("breakpoints"))return;const i=n$1o(e);if(!i){const e=JSON.stringify(h$z,null,2);console.warn("provided breakpoints are not valid, using defaults:"+e);}e=i?e:h$z,this._set("breakpoints",{...e});}_updateClassNames(){if(!this.container)return;const e=t$1y.acquire(),s=t$1y.acquire();let a,t=!1;for(a in l$$){const i=this[a],r=l$$[a].getValue({viewSize:this.size,breakpoints:this.breakpoints});i!==r&&(t=!0,this[a]=r,o$G(a,i).forEach((e=>s.push(e))),o$G(a,r).forEach((i=>e.push(i))));}t&&(this._applyClassNameChanges(e,s),t$1y.release(e),t$1y.release(s));}_applyClassNameChanges(e,i){const s=this.container;s&&(i.forEach((e=>s.classList.remove(e))),e.forEach((e=>s.classList.add(e))));}_removeActiveClassNames(){const e=this.container;if(!e)return;let i;for(i in l$$)o$G(i,this[i]).forEach((i=>e.classList.remove(i)));}};return e$1_([d$1S()],g.prototype,"breakpoints",null),e$1_([d$1S()],g.prototype,"orientation",void 0),e$1_([d$1S()],g.prototype,"widthBreakpoint",void 0),e$1_([d$1S()],g.prototype,"heightBreakpoint",void 0),g=e$1_([i$2w("esri.views.BreakpointsOwner")],g),g};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$1n=class extends p$33{constructor(){super(...arguments),this.items=new S$F,this._watchUpdatingTracking=new l$1z,this._callbacks=new Map,this._projector=i$2e(),this._hiddenProjector=i$2e();}get needsRender(){return this.items.length>0}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(this.items,(t=>{for(const e of t.added){const t=()=>e.render();this._callbacks.set(e,t),this._projector.append(this.surface,t);}for(const e of t.removed){const t=this._projector.detach(this._callbacks.get(e));this.surface.removeChild(t.domNode),this._callbacks.delete(e);}}));}addItem(t){this.items.add(t);}removeItem(t){this.items.remove(t);}destroy(){this.items.removeAll(),this._callbacks.forEach((t=>this._projector.detach(t))),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy();}render(){this._projector.renderNow();}computeBoundingRect(t){const e=this._hiddenSurface,r=this._hiddenProjector;let o=null;const s=()=>(o=t.render(),o);r.append(e,s),r.renderNow();const i={left:0,top:0,right:0,bottom:0};if(o&&o.domNode){const t=o.domNode.getBoundingClientRect();i.left=t.left,i.top=t.top,i.right=t.right,i.bottom=t.bottom;}for(r.detach(s);e.firstChild;)e.removeChild(e.firstChild);return i}overlaps(t,e){const r=this.computeBoundingRect(t),o=this.computeBoundingRect(e);return Math.max(r.left,o.left)<=Math.min(r.right,o.right)&&Math.max(r.top,o.top)<=Math.min(r.bottom,o.bottom)}get hasVisibleItems(){return this.items.some((t=>t.visible))}renderCanvas(t){if(!this.items.some((t=>t.visible)))return;const e=t.getContext("2d");e.save(),e.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach((t=>{e.save(),t.renderCanvas(e),e.restore();})),e.restore();}};e$1_([d$1S({readOnly:!0})],c$1n.prototype,"surface",void 0),e$1_([d$1S({readOnly:!0})],c$1n.prototype,"items",void 0),e$1_([d$1S({readOnly:!0})],c$1n.prototype,"needsRender",null),e$1_([d$1S({readOnly:!0})],c$1n.prototype,"_watchUpdatingTracking",void 0),e$1_([d$1S({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],c$1n.prototype,"updating",void 0),c$1n=e$1_([i$2w("esri.views.overlay.ViewOverlay")],c$1n);const n$1n=c$1n;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$I(e,t,l,n){let u=null,a=1e3;"number"==typeof t?(a=t,n=l):(u=null!=t?t:null,a=l);let o,p=0;const r=()=>{p=0,e.apply(n,o);},c=(...e)=>{u&&u.apply(n,e),o=e,a?p||(p=setTimeout(r,a)):r();};return c.remove=()=>{p&&(clearTimeout(p),p=0);},c.forceUpdate=()=>{p&&(clearTimeout(p),r());},c.hasPendingUpdates=()=>!!p,c}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const D$c=["B","kB","MB","GB","TB"];function M$9(i,r){let o=0===r?0:Math.floor(Math.log(r)/Math.log(1024));o=e$1o(o,0,D$c.length-1);const u=m$23(r/1024**o,{maximumFractionDigits:2});return r$1F(i.units.bytes[D$c[o]],{fileSize:u})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1m(n){const{exifInfo:e,exifName:a,tagName:u}=n;if(!e||!a||!u)return null;const f=e.find((n=>n.name===a));return f?t$L({tagName:u,tags:f.tags}):null}function t$L(n){const{tagName:t,tags:e}=n;if(!e||!t)return null;const a=e.find((n=>n.name===t));return a&&a.value||null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$18;const p$1q={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let a$1n=s$18=class extends a$2A{constructor(t){super(t),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null;}get orientationInfo(){const{exifInfo:t}=this,o=n$1m({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:t});return p$1q[o]||null}clone(){return new s$18({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};e$1_([d$1S({type:String})],a$1n.prototype,"contentType",void 0),e$1_([d$1S()],a$1n.prototype,"exifInfo",void 0),e$1_([d$1S({readOnly:!0})],a$1n.prototype,"orientationInfo",null),e$1_([d$1S({type:S$J})],a$1n.prototype,"id",void 0),e$1_([d$1S({type:String})],a$1n.prototype,"globalId",void 0),e$1_([d$1S({type:String})],a$1n.prototype,"keywords",void 0),e$1_([d$1S({type:String})],a$1n.prototype,"name",void 0),e$1_([d$1S({json:{read:!1}})],a$1n.prototype,"parentGlobalId",void 0),e$1_([d$1S({json:{read:!1}})],a$1n.prototype,"parentObjectId",void 0),e$1_([d$1S({type:S$J})],a$1n.prototype,"size",void 0),e$1_([d$1S({json:{read:!1}})],a$1n.prototype,"url",void 0),a$1n=s$18=e$1_([i$2w("esri.layers.support.AttachmentInfo")],a$1n);const l$_=a$1n;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$1m;let p$1p=a$1m=class extends a$2A{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null;}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10;}clone(){return new a$1m(l$2r({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};e$1_([d$1S({type:[String],json:{write:!0}})],p$1p.prototype,"attachmentTypes",void 0),e$1_([d$1S({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],p$1p.prototype,"attachmentsWhere",void 0),e$1_([d$1S({type:[String],json:{write:!0}})],p$1p.prototype,"keywords",void 0),e$1_([d$1S({type:[Number],json:{write:!0}})],p$1p.prototype,"globalIds",void 0),e$1_([d$1S({json:{write:!0}})],p$1p.prototype,"name",void 0),e$1_([d$1S({type:Number,json:{read:{source:"resultRecordCount"}}})],p$1p.prototype,"num",void 0),e$1_([d$1S({type:[Number],json:{write:!0}})],p$1p.prototype,"objectIds",void 0),e$1_([d$1S({type:Boolean,json:{default:!1,write:!0}})],p$1p.prototype,"returnMetadata",void 0),e$1_([d$1S({type:[Number],json:{write:!0}})],p$1p.prototype,"size",void 0),e$1_([d$1S({type:Number,json:{read:{source:"resultOffset"}}})],p$1p.prototype,"start",void 0),e$1_([r$1c("start"),r$1c("num")],p$1p.prototype,"writeStart",null),e$1_([d$1S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],p$1p.prototype,"where",void 0),p$1p=a$1m=e$1_([i$2w("esri.rest.support.AttachmentQuery")],p$1p),p$1p.from=b$Z(p$1p);const u$O=p$1p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$1m="esri.widgets.Feature.support.featureUtils",d$O=s$2h.getLogger(c$1m),p$1o=/href=(""|'')/gi,m$P=/(\{([^\{\r\n]+)\})/g,y$C=/\'/g,g$w=/^\s*expression\//i,h$y=/(\n)/gi,b$i=/[\u00A0-\u9999<>\&]/gim,F$8=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,I$b=/^(?:mailto:|tel:)/,w$m="relationships/",N$b=S$I("short-date-short-time");function x$c(e){if(!t$1O(e))return e.get("sourceLayer")||e.get("layer")}async function E$c(e,t){return "function"==typeof e?e.call(null,t):e}function v$k(e=""){if(e)return !I$b.test(e.trim().toLowerCase())}function j$e(e){return !!e&&g$w.test(e)}function T$b(e,t){if(!j$e(t)||!e)return null;const r=t.replace(g$w,"").toLowerCase();let n;return e.some((e=>e.name.toLowerCase()===r&&(n=e,!0))),n}function C$b(e,t){const r=T$b(t,null==e?void 0:e.fieldName);return r?r.title||null:e?e.label||e.fieldName:null}function q$9(e,t){const r=t.get(e.toLowerCase());return `{${r&&r.fieldName||e}}`}function D$b(e){return e.replace(p$1o,"")}function R$b(e,t){const r=M$8(t,e);return r?r.name:e}function L$c(e,t){return e&&e.map((e=>R$b(e,t)))}function M$8(e,t){return e&&"function"==typeof e.getField?e.getField(t):null}function U$a(e){return `${e}`.trim()}function $$7({attributes:e,globalAttributes:t,layer:r,text:n,expressionAttributes:i,fieldInfoMap:o}){return n?A$8({formattedAttributes:t,template:P$e(n,{...t,...i,...e},r),fieldInfoMap:o}):""}function A$8({formattedAttributes:e,template:t,fieldInfoMap:r}){return U$a(D$b(r$1F(r$1F(t,(e=>q$9(e,r))),e)))}function O$d(e,t,r=!1){const n=t[e];if("string"==typeof n){const i="%27",o=(r?encodeURIComponent(n):n).replace(y$C,i);t[e]=o;}}function S$j(e,t=!1){const r={...e};return Object.keys(r).forEach((e=>O$d(e,r,t))),r}function G$7(e,t,r){const i=(t=U$a(t))&&"{"!==t[0];return r$1F(e,S$j(r,i))}function k$9(e,t){return e.replace(m$P,((e,r,n)=>{const i=M$8(t,n);return i?`{${i.name}}`:r}))}function P$e(e,t,r){const n=k$9(e,r);return n?n.replace(F$8,((e,r,n)=>G$7(e,r||n,t))):n}function _$f(e,t){if("string"==typeof e&&t&&null==t.dateFormat&&(null!=t.places||null!=t.digitSeparator)){const t=Number(e);if(!isNaN(t))return t}return e}function z$6(e){return "feature"===(null==e?void 0:e.type)}function H$5(e){return "map-image"===(null==e?void 0:e.type)}function Q$5(e){return !(null==e||!e.layer)}function Z$4(e,t){const r=t.fieldInfos,n=t.fieldName,i=B$8(r,n),o=null==i?void 0:i.clone(),l=t.preventPlacesFormatting,f=t.layer,c=M$8(f,n);if(o&&"date"===(null==c?void 0:c.type)){const e=o.format||new u$1e;e.dateFormat=e.dateFormat||"short-date-short-time",e.dateTimeFormatOptions=z$6(f)&&f.datesInUnknownTimezone||Q$5(f)&&H$5(f.layer)&&f.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,o.format=e;}const d=o&&o.format;return "string"==typeof(e=_$f(e,d))||null==e||null==d?e:l?m$23(e,{...u$24(d),minimumFractionDigits:0,maximumFractionDigits:20}):d.format(e)}function B$8(e,t){if(!e||!e.length||!t)return;const r=t.toLowerCase();let n;return e.some((e=>!(!e.fieldName||e.fieldName.toLowerCase()!==r)&&(n=e,!0))),n}function J$4({fieldName:e,graphic:t,layer:r}){if(ae$2(e))return null;if(!r||"function"!=typeof r.getFeatureType)return null;const{typeIdField:n}=r;if(!n||e!==n)return null;const i=r.getFeatureType(t);return i?i.name:null}function K$6({fieldName:e,value:t,graphic:r,layer:n}){if(ae$2(e))return null;if(!n||"function"!=typeof n.getFieldDomain)return null;const i=n.getFieldDomain(e,{feature:r});return i&&"coded-value"===i.type?i.getName(t):null}function V$4(e,t){const{creatorField:r,creationDateField:n,editorField:o,editDateField:a}=e;if(!t)return;const u=t[a];if("number"==typeof u){const e=t[o];return {type:"edit",date:L$x(u,N$b),user:e}}const l=t[n];if("number"==typeof l){const e=t[r];return {type:"create",date:L$x(l,N$b),user:e}}return null}function W$5(e,t){const r=new Map;return e&&e.forEach((e=>{const n=R$b(e.fieldName,t);e.fieldName=n,r.set(n.toLowerCase(),e);})),r}function X$5(e){const t=[];if(!e)return t;const{fieldInfos:r,content:n}=e;return r&&t.push(...r),n&&Array.isArray(n)?(n.forEach((e=>{if("fields"===e.type){const r=e&&e.fieldInfos;r&&t.push(...r);}})),t):t}function Y$5(e){return e.replace(b$i,(e=>`&#${e.charCodeAt(0)};`))}function ee$3(e){return "string"==typeof e?e.replace(h$y,'<br class="esri-text-new-line" />'):e}function te$3(e){const{value:t,fieldName:r,fieldInfos:n,fieldInfoMap:o,layer:a,graphic:u}=e;if(null==t)return "";const l=K$6({fieldName:r,value:t,graphic:u,layer:a});if(l)return l;const s=J$4({fieldName:r,graphic:u,layer:a});if(s)return s;if(o.get(r.toLowerCase()))return Z$4(t,{fieldInfos:n,fieldName:r,layer:a});const f=a&&a.fieldsIndex;return f&&f.isDateField(r)?L$x(t,N$b):ee$3(t)}function re$3({fieldInfos:e,attributes:t,layer:r,graphic:n,fieldInfoMap:i,relatedInfos:o}){const a={};return null==o||o.forEach((e=>se$3(a,e))),Object.keys(t).forEach((o=>{const u=t[o];a[o]=te$3({fieldName:o,fieldInfos:e,fieldInfoMap:i,layer:r,value:u,graphic:n});})),a}async function ne$1(e,t){var r,n;const{layer:i,graphic:o,outFields:a,objectIds:u,returnGeometry:l,spatialReference:s}=e,f=u[0];if("number"!=typeof f&&"string"!=typeof f){const e="Could not query required fields for the specified feature. The feature's ID is invalid.",t={layer:i,graphic:o,objectId:f,requiredFields:a};return d$O.warn(e,t),null}if(null==(r=i.capabilities)||null==(n=r.operations)||!n.supportsQuery){const e="The specified layer cannot be queried. The following fields will not be available.",t={layer:i,graphic:o,requiredFields:a,returnGeometry:l};return d$O.warn(e,t),null}const c=i.createQuery();c.objectIds=u,c.outFields=null!=a&&a.length?a:[i.objectIdField],c.returnGeometry=!!l,c.returnZ=!!l,c.returnM=!!l,c.outSpatialReference=s;return (await i.queryFeatures(c,t)).features[0]}async function ie$2(e){var t;if(null==(t=e.expressionInfos)||!t.length)return !1;const r=await a$2u(),{arcadeUtils:{hasGeometryFunctions:n}}=r;return n(e)}async function oe$3({graphic:e,popupTemplate:t,layer:r,spatialReference:n},i){if(!r||!t)return;if("function"==typeof r.load&&await r.load(i),!e.attributes)return;const o=e.attributes[r.objectIdField];if(null==o)return;const a=[o],u=await t.getRequiredFields(r.fieldsIndex),s=ce$4(u,e),f=s?[]:u,c=t.returnGeometry||await ie$2(t);if(s&&!c)return;const d=await ne$1({layer:r,graphic:e,outFields:f,objectIds:a,returnGeometry:c,spatialReference:n},i);d&&(d.geometry&&(e.geometry=d.geometry),d.attributes&&(e.attributes={...e.attributes,...d.attributes}));}function ae$2(e=""){return !!e&&-1!==e.indexOf(w$m)}function ue$2(e){return e?`${w$m}${e.layerId}/${e.fieldName}`:""}function le$2({attributes:e,graphic:t,relatedInfo:r}){e&&t&&r&&Object.keys(t.attributes).forEach((n=>{const i=ue$2({layerId:r.relation.id.toString(),fieldName:n});e[i]=t.attributes[n];}));}function se$3(e,t){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach((r=>le$2({attributes:e,graphic:r,relatedInfo:t}))),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach((r=>le$2({attributes:e,graphic:r,relatedInfo:t}))));}const fe$2=e=>{if(!e)return !1;const t=e.toUpperCase();return t.indexOf("CURRENT_TIMESTAMP")>-1||t.indexOf("CURRENT_DATE")>-1||t.indexOf("CURRENT_TIME")>-1},ce$2=({layer:e,method:t,query:n,definitionExpression:i})=>{var o,a;if(null==(o=e.capabilities)||null==(a=o.query)||!a.supportsCacheHint||"attachments"===t)return;const u=r$1G(n.where)&&n.where,l=r$1G(n.geometry)&&n.geometry;fe$2(i)||fe$2(u)||"extent"===(null==l?void 0:l.type)||"tile"===n.resultType||(n.cacheHint=!0);},de$2=({query:e,layer:t,method:r})=>{ce$2({layer:t,method:r,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`});},pe$2=({queryPayload:e,layer:t,method:r})=>{ce$2({layer:t,method:r,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`});};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$1n={editing:!1,operations:{add:!0,update:!0,delete:!0}},u$N=S$F.ofType(l$_),y$B="graphic.layer.capabilities.operations.supportsResizeAttachments";let f$x=class extends d$1a{constructor(t){super(t),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...p$1n},this.activeAttachmentInfo=null,this.attachmentInfos=new u$N,this.graphic=null,this.mode="view",this.handles.add([i$2i(this,"graphic",(()=>this._graphicChanged()))]);}destroy(){this._attachmentLayer=null,this.graphic=null;}castAbilities(t){return {...p$1n,...t}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get(y$B)||!1}async getAttachments(){const{_attachmentLayer:t,attachmentInfos:e}=this;if(!t||"function"!=typeof t.queryAttachments)throw new s$29("invalid-layer","getAttachments(): A valid layer is required.");const a=this._getFeatureId(),n=new u$O({objectIds:[a],returnMetadata:!0}),r=[],s=t.queryAttachments(n).then((t=>t[a]||r)).catch((()=>r));this._getAttachmentsPromise=s,this.notifyChange("state");const o=await s;return e.removeAll(),o.length&&e.addMany(o),this._getAttachmentsPromise=null,this.notifyChange("state"),o}async addAttachment(t){const{_attachmentLayer:e,attachmentInfos:a,graphic:n,abilities:r}=this;if(!t)throw new s$29("invalid-attachment","addAttachment(): An attachment is required.",{attachment:t});if(!r.operations.add)throw new s$29("invalid-abilities","addAttachment(): add abilities are required.");if(!e||"function"!=typeof e.addAttachment)throw new s$29("invalid-layer","addAttachment(): A valid layer is required.");const s=e.addAttachment(n,t).then((t=>this._queryAttachment(t.objectId))),o=await s;return a.add(o),o}async deleteAttachment(t){const{_attachmentLayer:e,attachmentInfos:a,graphic:n,abilities:r}=this;if(!t)throw new s$29("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!r.operations.delete)throw new s$29("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!e||"function"!=typeof e.deleteAttachments)throw new s$29("invalid-layer","deleteAttachment(): A valid layer is required.");const s=e.deleteAttachments(n,[t.id]).then((()=>t)),o=await s;return a.remove(o),o}async updateAttachment(t,e=this.activeAttachmentInfo){const{_attachmentLayer:a,attachmentInfos:n,graphic:r,abilities:s}=this;if(!t)throw new s$29("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:t});if(!e)throw new s$29("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!s.operations.update)throw new s$29("invalid-abilities","updateAttachment(): Update abilities are required.");const o=n.findIndex((t=>t===e));if(!a||"function"!=typeof a.updateAttachment)throw new s$29("invalid-layer","updateAttachment(): A valid layer is required.");const c=a.updateAttachment(r,e.id,t).then((t=>this._queryAttachment(t.objectId))),h=await c;return n.splice(o,1,h),h}async _queryAttachment(t){if(!t)throw new s$29("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:e}=this,a=this._getFeatureId(),n=new u$O({objectIds:[a],attachmentsWhere:`AttachmentId=${t}`,returnMetadata:!0});return e.queryAttachments(n).then((t=>t[a][0]))}_getFeatureId(){const{_attachmentLayer:t,graphic:e}=this;if(!t||!e)return null;const{objectIdField:a}=t,{attributes:i}=e;return i&&i[a]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch((()=>{})));}_setAttachmentLayer(){const{graphic:t}=this,e=x$c(t);this._attachmentLayer=e?"scene"===e.type&&r$1G(e.associatedLayer)?e.associatedLayer:e:null;}};e$1_([d$1S()],f$x.prototype,"abilities",void 0),e$1_([c$2Y("abilities")],f$x.prototype,"castAbilities",null),e$1_([d$1S()],f$x.prototype,"activeAttachmentInfo",void 0),e$1_([d$1S({readOnly:!0,type:u$N})],f$x.prototype,"attachmentInfos",void 0),e$1_([d$1S({type:h$U})],f$x.prototype,"graphic",void 0),e$1_([d$1S()],f$x.prototype,"mode",void 0),e$1_([d$1S({readOnly:!0})],f$x.prototype,"state",null),e$1_([d$1S({readOnly:!0})],f$x.prototype,"supportsResizeAttachments",null),f$x=e$1_([i$2w("esri.widgets.Attachments.AttachmentsViewModel")],f$x);const A$7=f$x;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$H(i){const e=i.toLowerCase();return "image/bmp"===e||"image/emf"===e||"image/exif"===e||"image/gif"===e||"image/x-icon"===e||"image/jpeg"===e||"image/png"===e||"image/tiff"===e||"image/x-wmf"===e}function p$1m(e){const p=a$2O("esri/themes/base/images/files/");return e?"text/plain"===e?`${p}text-32.svg`:"application/pdf"===e?`${p}pdf-32.svg`:"text/csv"===e?`${p}csv-32.svg`:"application/gpx+xml"===e?`${p}gpx-32.svg`:"application/x-dwf"===e?`${p}cad-32.svg`:"application/postscript"===e||"application/json"===e||"text/xml"===e||"model/vrml"===e?`${p}code-32.svg`:"application/x-zip-compressed"===e||"application/x-7z-compressed"===e||"application/x-gzip"===e||"application/x-tar"===e||"application/x-gtar"===e||"application/x-bzip2"===e||"application/gzip"===e||"application/x-compress"===e||"application/x-apple-diskimage"===e||"application/x-rar-compressed"===e||"application/zip"===e?`${p}zip-32.svg`:-1!==e.indexOf("image/")?`${p}image-32.svg`:-1!==e.indexOf("audio/")?`${p}sound-32.svg`:-1!==e.indexOf("video/")?`${p}video-32.svg`:-1!==e.indexOf("msexcel")||-1!==e.indexOf("ms-excel")||-1!==e.indexOf("spreadsheetml")?`${p}excel-32.svg`:-1!==e.indexOf("msword")||-1!==e.indexOf("ms-word")||-1!==e.indexOf("wordprocessingml")?`${p}word-32.svg`:-1!==e.indexOf("powerpoint")||-1!==e.indexOf("presentationml")?`${p}report-32.svg`:`${p}generic-32.svg`:`${p}generic-32.svg`}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const f$w={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},v$j={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},y$A=window.CSS;let B$7=class extends z$n{constructor(t,e){super(t,e),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new A$7,this.visibleElements={...f$w},this._supportsImageOrientation=y$A&&y$A.supports&&y$A.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null;}initialize(){this.own($$f(this,"viewModel.attachmentInfos","change",(()=>this.scheduleRender())),i$2i(this,"viewModel.mode",(()=>this._modeChanged())));}get effectiveDisplayType(){return "auto"===this.displayType?this.viewModel.supportsResizeAttachments?"preview":"list":this.displayType}castVisibleElements(t){return {...f$w,...t}}addAttachment(){const{_addAttachmentForm:t,viewModel:s}=this;return this._set("submitting",!0),this._set("error",null),s.addAttachment(t).then((t=>(this._set("submitting",!1),this._set("error",null),s.mode="view",t))).catch((t=>{throw this._set("submitting",!1),this._set("error",new s$29("attachments:add-attachment",this.messages.addErrorMessage,t)),t}))}deleteAttachment(t){const{viewModel:s}=this;return this._set("submitting",!0),this._set("error",null),s.deleteAttachment(t).then((t=>(this._set("submitting",!1),this._set("error",null),s.mode="view",t))).catch((t=>{throw this._set("submitting",!1),this._set("error",new s$29("attachments:delete-attachment",this.messages.deleteErrorMessage,t)),t}))}updateAttachment(){const{viewModel:t}=this,{_updateAttachmentForm:s}=this;return this._set("submitting",!0),this._set("error",null),t.updateAttachment(s).then((e=>(this._set("submitting",!1),this._set("error",null),t.mode="view",e))).catch((t=>{throw this._set("submitting",!1),this._set("error",new s$29("attachments:update-attachment",this.messages.updateErrorMessage,t)),t}))}render(){const{submitting:t,viewModel:e}=this,{state:s}=e;return n$2o("div",{class:this.classes(v$j.base,v$j.esriWidget)},t?this.renderProgressBar():null,"loading"===s?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:t,visibleElements:e}=this;return t&&e.errorMessage?n$2o("div",{key:"error-message",class:v$j.errorMessage},t.message):null}renderAttachments(){const{mode:t,activeAttachmentInfo:e}=this.viewModel;return "add"===t?this.renderAddForm():"edit"===t?this.renderDetailsForm(e):this.renderAttachmentContainer()}renderLoading(){return n$2o("div",{class:v$j.loaderContainer,key:"loader"},n$2o("div",{class:v$j.loader}))}renderProgressBar(){return this.visibleElements.progressBar?n$2o("div",{class:v$j.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:t,selectedFile:e}=this,s=t||!e,i=this.visibleElements.cancelAddButton?n$2o("button",{type:"button",bind:this,disabled:t,onclick:this._cancelForm,class:this.classes(v$j.esriButton,v$j.esriButtonTertiary,v$j.esriButtonSmall,v$j.esriButtonHalf,t&&v$j.buttonDisabled)},this.messages.cancel):null,a=this.visibleElements.addSubmitButton?n$2o("button",{type:"submit",disabled:s,class:this.classes(v$j.esriButton,v$j.esriButtonSecondary,v$j.esriButtonSmall,v$j.esriButtonHalf,{[v$j.buttonDisabled]:s})},this.messages.add):null,n=e?n$2o("span",{key:"file-name",class:v$j.fileName},e.name):null,r=n$2o("form",{bind:this,afterCreate:g$$,afterRemoved:p$30,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},n$2o("fieldset",{class:v$j.fileFieldset},n,n$2o("label",{class:this.classes(v$j.fileLabel,v$j.esriButton,v$j.esriButtonSecondary)},e?this.messages.changeFile:this.messages.selectFile,n$2o("input",{class:v$j.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),a,i);return n$2o("div",{key:"add-form-container",class:v$j.formNode},r)}renderDetailsForm(t){const{visibleElements:e,viewModel:i,selectedFile:a,submitting:n}=this,{contentType:r,size:o,url:l}=t,{abilities:m}=i,d=n||!a,c=m.editing&&m.operations.delete&&e.deleteButton?n$2o("button",{key:"delete-button",type:"button",disabled:n,bind:this,onclick:e=>this._submitDeleteAttachment(e,t),class:this.classes(v$j.esriButton,v$j.esriButtonSmall,v$j.esriButtonTertiary,v$j.deleteButton,{[v$j.buttonDisabled]:n})},this.messages.delete):null,h=m.editing&&m.operations.update&&e.updateButton?n$2o("button",{disabled:d,key:"update-button",type:"submit",class:this.classes(v$j.esriButton,v$j.esriButtonSmall,v$j.esriButtonThird,{[v$j.buttonDisabled]:d})},this.messages.update):null,b=this.visibleElements.cancelUpdateButton?n$2o("button",{disabled:n,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(v$j.esriButton,v$j.esriButtonSmall,v$j.esriButtonTertiary,v$j.esriButtonThird,{[v$j.buttonDisabled]:n})},this.messages.cancel):null,g=a?n$2o("span",{key:"file-name",class:v$j.fileName},a.name):null,f=m.editing&&m.operations.update?n$2o("fieldset",{key:"file",class:v$j.fileFieldset},g,n$2o("label",{class:this.classes(v$j.fileLabel,v$j.esriButton,v$j.esriButtonSecondary)},this.messages.changeFile,n$2o("input",{class:v$j.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,y=n$2o("fieldset",{key:"size",class:v$j.metadataFieldset},n$2o("label",null,M$9(this.messagesUnits,o))),B=n$2o("fieldset",{key:"content-type",class:v$j.metadataFieldset},n$2o("label",null,r)),A=n$2o("form",{bind:this,afterCreate:g$$,afterRemoved:p$30,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},n$2o("div",{class:v$j.metadata},y,B),f,n$2o("div",{class:v$j.actions},c,b,h));return n$2o("div",{key:"edit-form-container",class:v$j.formNode},n$2o("a",{class:v$j.itemLink,href:l,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:t,size:400}),n$2o("div",{class:v$j.itemLinkOverlay},n$2o("span",{class:v$j.itemLinkOverlayIcon},n$2o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},n$2o("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),n$2o("path",{fill:"none",d:"M0 0h32v32H0z"}))))),A)}renderImageMask({attachmentInfo:t,size:e}){const{supportsResizeAttachments:s}=this.viewModel,{contentType:i,name:a,url:n}=t,r=s&&e$H(i),o=this._getCSSTransform(t,r),l=o?{transform:o,"image-orientation":"none"}:{},m=-1===n.indexOf("?")?"?":"&",d=r?`${n}${m}w=${e}`:p$1m(i),u={[v$j.itemMaskIcon]:!r},p={[v$j.itemImageResizable]:s};return n$2o("div",{class:this.classes(u,v$j.itemMask)},n$2o("img",{styles:l,alt:a,src:d,class:this.classes(p,v$j.itemImage)}))}renderAttachmentInfo({attachmentInfo:t,displayType:e}){const{viewModel:s}=this,{abilities:i}=s,{name:a,url:n}=t,r=this.renderImageMask({attachmentInfo:t,size:"list"===e?48:400}),o=i.editing?n$2o("span",{"aria-hidden":"true",class:this.classes(v$j.itemChevronIcon,d$1G(this.container)?v$j.iconLeft:v$j.iconRight)}):null,l=[r,n$2o("label",{class:v$j.itemLabel},n$2o("span",{class:v$j.itemFilename},a||this.messages.noTitle),o)],m=i.editing?n$2o("button",{key:"details-button",bind:this,class:v$j.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":t.id,onclick:()=>this._startEditAttachment(t),type:"button"},l):n$2o("a",{key:"details-link",class:v$j.itemButton,href:n,target:"_blank"},l);return n$2o("li",{class:v$j.item,key:t},m)}renderAttachmentContainer(){const{effectiveDisplayType:t,viewModel:e,visibleElements:s}=this,{attachmentInfos:i,abilities:a}=e,n=i&&i.length,r={[v$j.containerList]:"preview"!==t,[v$j.containerPreview]:"preview"===t},o=a.editing&&a.operations.add&&s.addButton?n$2o("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(v$j.esriButton,v$j.esriButtonTertiary,v$j.addAttachmentButton),type:"button"},n$2o("span",{"aria-hidden":"true",class:this.classes(v$j.itemAddIcon,v$j.iconPlus)}),this.messages.add):null,l=n?n$2o("ul",{class:v$j.items},i.toArray().map((e=>this.renderAttachmentInfo({attachmentInfo:e,displayType:t})))):n$2o("div",{class:v$j.empty},this.messages.noAttachments);return n$2o("div",{key:"attachments-container",class:this.classes(v$j.container,r)},l,o)}_modeChanged(){this._set("error",null),this._set("selectedFile",null);}_handleFileInputChange(t){const e=t.target,s=e&&e.files&&e.files.item(0);this._set("selectedFile",s);}_submitDeleteAttachment(t,e){t.preventDefault(),this.deleteAttachment(e);}_submitAddAttachment(t){t.preventDefault(),this.addAttachment();}_submitUpdateAttachment(t){t.preventDefault(),this.updateAttachment();}_startEditAttachment(t){const{viewModel:e}=this;e.activeAttachmentInfo=t,e.mode="edit";}_startAddAttachment(){this.viewModel.mode="add";}_cancelForm(t){t.preventDefault(),this.viewModel.mode="view";}_getCSSTransform(t,e){const{orientationInfo:s}=t;return !this._supportsImageOrientation&&e&&s?[s.rotation?`rotate(${s.rotation}deg)`:"",s.mirrored?"scaleX(-1)":""].join(" "):""}};e$1_([o$1Q("viewModel.abilities")],B$7.prototype,"abilities",void 0),e$1_([d$1S()],B$7.prototype,"displayType",void 0),e$1_([d$1S({readOnly:!0})],B$7.prototype,"effectiveDisplayType",null),e$1_([o$1Q("viewModel.graphic")],B$7.prototype,"graphic",void 0),e$1_([d$1S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],B$7.prototype,"label",void 0),e$1_([d$1S(),e$1w("esri/widgets/Attachments/t9n/Attachments")],B$7.prototype,"messages",void 0),e$1_([d$1S(),e$1w("esri/core/t9n/Units")],B$7.prototype,"messagesUnits",void 0),e$1_([d$1S({readOnly:!0})],B$7.prototype,"selectedFile",void 0),e$1_([d$1S({readOnly:!0})],B$7.prototype,"submitting",void 0),e$1_([d$1S({readOnly:!0})],B$7.prototype,"error",void 0),e$1_([d$1S({type:A$7})],B$7.prototype,"viewModel",void 0),e$1_([d$1S()],B$7.prototype,"visibleElements",void 0),e$1_([c$2Y("visibleElements")],B$7.prototype,"castVisibleElements",null),B$7=e$1_([i$2w("esri.widgets.Attachments")],B$7);const A$6=B$7;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let o$F=class extends A$7{constructor(t){super(t),this.description=null,this.title=null;}};e$1_([d$1S()],o$F.prototype,"description",void 0),e$1_([d$1S()],o$F.prototype,"title",void 0),o$F=e$1_([i$2w("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],o$F);const c$1l=o$F;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$1l={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let n$1l=class extends z$n{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null;}render(){return n$2o("div",{class:p$1l.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?n$2o(s$1e,{level:this.headingLevel,class:p$1l.title},e):null}renderDescription(){const{description:e}=this;return e?n$2o("div",{key:"description",class:p$1l.description},e):null}};e$1_([d$1S()],n$1l.prototype,"description",void 0),e$1_([d$1S()],n$1l.prototype,"headingLevel",void 0),e$1_([d$1S()],n$1l.prototype,"title",void 0),n$1l=e$1_([i$2w("esri.widgets.Feature.support.FeatureElementInfo")],n$1l);const c$1k=n$1l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const d$N={base:"esri-feature-attachments"};let c$1j=class extends z$n{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new A$6,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new c$1l;}initialize(){this._featureElementInfo=new c$1k,i$2i(this,["viewModel.description","viewModel.title","headingLevel"],(()=>this._setupFeatureElementInfo())),i$2i(this,"viewModel.graphic",(e=>this.attachmentsWidget.graphic=e));}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy();}render(){var e;const{attachmentsWidget:t}=this;return n$2o("div",{class:d$N.base},null==(e=this._featureElementInfo)?void 0:e.render(),null==t?void 0:t.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:o}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:o});}};e$1_([d$1S({readOnly:!0})],c$1j.prototype,"attachmentsWidget",void 0),e$1_([o$1Q("viewModel.description")],c$1j.prototype,"description",void 0),e$1_([o$1Q("attachmentsWidget.displayType")],c$1j.prototype,"displayType",void 0),e$1_([o$1Q("viewModel.graphic")],c$1j.prototype,"graphic",void 0),e$1_([d$1S()],c$1j.prototype,"headingLevel",void 0),e$1_([o$1Q("viewModel.title")],c$1j.prototype,"title",void 0),e$1_([d$1S({type:c$1l})],c$1j.prototype,"viewModel",void 0),c$1j=e$1_([i$2w("esri.widgets.Feature.FeatureAttachments")],c$1j);const m$O=c$1j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let n$1k=class extends(a$26(p$33)){constructor(t){super(t),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(i$2i(this,"creator",(t=>{this._destroyContent(),this._createContent(t);})));}destroy(){this._destroyContent();}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:t,graphic:r,destroyer:e}=this;t&&(E$c(e,{graphic:r}).catch((()=>null)),this._set("created",null));}async _createContent(t){const{graphic:r}=this,e=E$c(t,{graphic:r}).catch((()=>null));this._loadingPromise=e,this.notifyChange("state");const o=await e;e===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",o));}};e$1_([d$1S({readOnly:!0})],n$1k.prototype,"created",void 0),e$1_([d$1S()],n$1k.prototype,"creator",void 0),e$1_([d$1S()],n$1k.prototype,"destroyer",void 0),e$1_([d$1S({type:h$U})],n$1k.prototype,"graphic",void 0),e$1_([d$1S({readOnly:!0})],n$1k.prototype,"state",null),n$1k=e$1_([i$2w("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],n$1k);const p$1k=n$1k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$1i={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let l$Z=class extends z$n{constructor(e,r){super(e,r),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=e=>{Array.from(e.querySelectorAll("a")).forEach((e=>{v$k(e.href)&&!e.hasAttribute("target")&&e.setAttribute("target","_blank");}));};}renderLoading(){return n$2o("div",{class:c$1i.loaderContainer,key:"loader"},n$2o("div",{class:c$1i.loader}))}renderCreated(){var e;const r=null==(e=this.viewModel)?void 0:e.created;return r?r instanceof HTMLElement?n$2o("div",{key:r,bind:r,afterCreate:this._attachToNode}):e$1u(r)?n$2o("div",{key:r},!r.destroyed&&r.render()):n$2o("div",{key:r,innerHTML:r,afterCreate:this._addTargetToAnchors}):null}render(){var e;const r=null==(e=this.viewModel)?void 0:e.state;return n$2o("div",{class:c$1i.base},"loading"===r?this.renderLoading():this.renderCreated())}_attachToNode(e){const r=this;e.appendChild(r);}};e$1_([o$1Q("viewModel.creator")],l$Z.prototype,"creator",void 0),e$1_([o$1Q("viewModel.graphic")],l$Z.prototype,"graphic",void 0),e$1_([d$1S({type:p$1k})],l$Z.prototype,"viewModel",void 0),l$Z=e$1_([i$2w("esri.widgets.Feature.FeatureContent")],l$Z);const p$1j=l$Z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$Y=class extends p$33{constructor(o){super(o),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null;}get formattedFieldInfos(){const{expressionInfos:o,fieldInfos:e}=this,s=[];return null==e||e.forEach((e=>{if(!(!e.hasOwnProperty("visible")||e.visible))return;const t=e.clone();t.label=C$b(t,o),s.push(t);})),s}};e$1_([d$1S()],l$Y.prototype,"attributes",void 0),e$1_([d$1S({type:[i$1w]})],l$Y.prototype,"expressionInfos",void 0),e$1_([d$1S()],l$Y.prototype,"description",void 0),e$1_([d$1S({type:[c$1V]})],l$Y.prototype,"fieldInfos",void 0),e$1_([d$1S({readOnly:!0})],l$Y.prototype,"formattedFieldInfos",null),e$1_([d$1S()],l$Y.prototype,"title",void 0),l$Y=e$1_([i$2w("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],l$Y);const n$1j=l$Y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$17=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function a$1l(e){let a=null;return s$17.some((s=>(s.pattern.test(e)&&(a=s),!!a))),a}function p$1i(s,p){if("string"!=typeof p||!p)return p;const r=a$1l(p);if(!r)return p;const t=p.match(r.pattern),n=t&&t[2],l=r$1F(r$1F(r.label,{messages:s,hierPart:n}),{appName:r.appName}),i=r.target?` target="${r.target}"`:"",o="_blank"===r.target?' rel="noreferrer"':"";return p.replace(r.pattern,`<a${i} href="$1"${o}>${l}</a>`)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const f$v={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let u$M=class extends z$n{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new n$1j,this.messages=null,this.messagesURIUtils=null;}initialize(){this._featureElementInfo=new c$1k,i$2i(this,["viewModel.description","viewModel.title"],(()=>this._setupFeatureElementInfo()));}destroy(){this._featureElementInfo.destroy();}renderFieldInfo(e,t){const{attributes:s}=this.viewModel,r=e.fieldName,i=e.label||r,o=s?null==s[r]?"":s[r]:"",l=!(!e.format||!e.format.dateFormat),a="number"==typeof o&&!l?this._forceLTR(o):p$1i(this.messagesURIUtils,o),n={[f$v.fieldDataDate]:l};return n$2o("tr",{key:`fields-element-info-row-${r}-${t}`},n$2o("th",{key:`fields-element-info-row-header-${r}-${t}`,class:f$v.fieldHeader,innerHTML:i}),n$2o("td",{key:`fields-element-info-row-data-${r}-${t}`,class:this.classes(f$v.fieldData,n),innerHTML:a}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return null!=e&&e.length?n$2o("table",{class:f$v.esriTable,summary:this.messages.fieldsSummary},n$2o("tbody",null,e.map(((e,t)=>this.renderFieldInfo(e,t))))):null}render(){var e;return n$2o("div",{class:f$v.base},null==(e=this._featureElementInfo)?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t});}_forceLTR(e){return `&lrm;${e}`}};e$1_([o$1Q("viewModel.attributes")],u$M.prototype,"attributes",void 0),e$1_([o$1Q("viewModel.description")],u$M.prototype,"description",void 0),e$1_([o$1Q("viewModel.expressionInfos")],u$M.prototype,"expressionInfos",void 0),e$1_([o$1Q("viewModel.fieldInfos")],u$M.prototype,"fieldInfos",void 0),e$1_([o$1Q("viewModel.title")],u$M.prototype,"title",void 0),e$1_([d$1S({type:n$1j})],u$M.prototype,"viewModel",void 0),e$1_([d$1S(),e$1w("esri/widgets/Feature/t9n/Feature")],u$M.prototype,"messages",void 0),e$1_([d$1S(),e$1w("esri/widgets/support/t9n/uriUtils")],u$M.prototype,"messagesURIUtils",void 0),u$M=e$1_([i$2w("esri.widgets.Feature.FeatureFields")],u$M);const m$N=u$M;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$K;let p$1h=t$K=class extends a$2A{constructor(r){super(r),this.name=null,this.code=null;}clone(){return new t$K({name:this.name,code:this.code})}};e$1_([d$1S({type:String,json:{write:!0}})],p$1h.prototype,"name",void 0),e$1_([d$1S({type:[String,Number],json:{write:!0}})],p$1h.prototype,"code",void 0),p$1h=t$K=e$1_([i$2w("esri.layers.support.CodedValue")],p$1h);const c$1h=p$1h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$1g=new o$1K({inherited:"inherited",codedValue:"coded-value",range:"range"});let a$1k=class extends a$2A{constructor(r){super(r),this.name=null,this.type=null;}};e$1_([d$1S({type:String,json:{write:!0}})],a$1k.prototype,"name",void 0),e$1_([r$1d(c$1g)],a$1k.prototype,"type",void 0),a$1k=e$1_([i$2w("esri.layers.support.Domain")],a$1k);const i$1b=a$1k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$M;let p$1g=d$M=class extends i$1b{constructor(e){super(e),this.codedValues=null,this.type="coded-value";}getName(e){let o=null;if(this.codedValues){const r=String(e);this.codedValues.some((e=>(String(e.code)===r&&(o=e.name),!!o)));}return o}clone(){return new d$M({codedValues:l$2r(this.codedValues),name:this.name})}};e$1_([d$1S({type:[c$1h],json:{write:!0}})],p$1g.prototype,"codedValues",void 0),e$1_([r$1d({codedValue:"coded-value"})],p$1g.prototype,"type",void 0),p$1g=d$M=e$1_([i$2w("esri.layers.support.CodedValueDomain")],p$1g);const u$L=p$1g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$J;let p$1f=t$J=class extends i$1b{constructor(r){super(r),this.type="inherited";}clone(){return new t$J}};e$1_([r$1d({inherited:"inherited"})],p$1f.prototype,"type",void 0),p$1f=t$J=e$1_([i$2w("esri.layers.support.InheritedDomain")],p$1f);const c$1f=p$1f;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$16;let n$1i=s$16=class extends i$1b{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range";}clone(){return new s$16({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};e$1_([d$1S({type:Number,json:{type:[Number],read:{source:"range",reader:(e,r)=>r.range&&r.range[1]},write:{enabled:!1,overridePolicy(){return {enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,r,a){r[a]=[this.minValue||0,e];}}}})],n$1i.prototype,"maxValue",void 0),e$1_([d$1S({type:Number,json:{type:[Number],read:{source:"range",reader:(e,r)=>r.range&&r.range[0]},write:{target:"range",writer(e,r,a){r[a]=[e,this.maxValue||0];}}}})],n$1i.prototype,"minValue",void 0),e$1_([r$1d({range:"range"})],n$1i.prototype,"type",void 0),n$1i=s$16=e$1_([i$2w("esri.layers.support.RangeDomain")],n$1i);const i$1a=n$1i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$1h={key:"type",base:i$1b,typeMap:{range:i$1a,"coded-value":u$L,inherited:c$1f}};function t$I(o){if(!o||!o.type)return null;switch(o.type){case"range":return i$1a.fromJSON(o);case"codedValue":return u$L.fromJSON(o);case"inherited":return c$1f.fromJSON(o)}return null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$19=new o$1K({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$K;const c$1e=new o$1K({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let m$M=u$K=class extends a$2A{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null;}readDescription(e,{description:t}){let o;try{o=JSON.parse(t);}catch(r){}return o?o.value:null}readValueType(e,{description:t}){let o;try{o=JSON.parse(t);}catch(r){}return o?c$1e.fromJSON(o.fieldValueType):null}clone(){return new u$K({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};e$1_([d$1S({type:String,json:{write:!0}})],m$M.prototype,"alias",void 0),e$1_([d$1S({type:[String,Number],json:{write:{allowNull:!0}}})],m$M.prototype,"defaultValue",void 0),e$1_([d$1S()],m$M.prototype,"description",void 0),e$1_([o$1j("description")],m$M.prototype,"readDescription",null),e$1_([d$1S({types:n$1h,json:{read:{reader:t$I},write:!0}})],m$M.prototype,"domain",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],m$M.prototype,"editable",void 0),e$1_([d$1S({type:S$J,json:{write:!0}})],m$M.prototype,"length",void 0),e$1_([d$1S({type:String,json:{write:!0}})],m$M.prototype,"name",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],m$M.prototype,"nullable",void 0),e$1_([r$1d(i$19)],m$M.prototype,"type",void 0),e$1_([d$1S()],m$M.prototype,"valueType",void 0),e$1_([o$1j("valueType",["description"])],m$M.prototype,"readValueType",null),m$M=u$K=e$1_([i$2w("esri.layers.support.Field")],m$M);const y$z=m$M;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$1j;let c$1d=a$1j=class extends a$2A{constructor(r){super(r),this.type="map-layer";}clone(){const{mapLayerId:r,gdbVersion:o}=this;return new a$1j({mapLayerId:r,gdbVersion:o})}};e$1_([r$1d({mapLayer:"map-layer"})],c$1d.prototype,"type",void 0),e$1_([d$1S({type:S$J,json:{write:!0}})],c$1d.prototype,"mapLayerId",void 0),e$1_([d$1S({type:String,json:{write:!0}})],c$1d.prototype,"gdbVersion",void 0),c$1d=a$1j=e$1_([i$2w("esri.layers.support.source.MapLayerSource")],c$1d);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$1c;let a$1i=c$1c=class extends a$2A{constructor(e){super(e),this.type="query-table";}clone(){var e;const{workspaceId:r,query:o,oidFields:t,spatialReference:p,geometryType:s}=this,i={workspaceId:r,query:o,oidFields:t,spatialReference:null!=(e=null==p?void 0:p.clone())?e:void 0,geometryType:s};return new c$1c(i)}};e$1_([r$1d({queryTable:"query-table"})],a$1i.prototype,"type",void 0),e$1_([d$1S({type:String,json:{write:!0}})],a$1i.prototype,"workspaceId",void 0),e$1_([d$1S({type:String,json:{write:!0}})],a$1i.prototype,"query",void 0),e$1_([d$1S({type:String,json:{write:!0}})],a$1i.prototype,"oidFields",void 0),e$1_([d$1S({type:k$s,json:{write:!0}})],a$1i.prototype,"spatialReference",void 0),e$1_([r$1d(i$21)],a$1i.prototype,"geometryType",void 0),a$1i=c$1c=e$1_([i$2w("esri.layers.support.source.QueryTableDataSource")],a$1i);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$1e;let a$1h=p$1e=class extends a$2A{constructor(r){super(r),this.type="raster";}clone(){const{workspaceId:r,dataSourceName:o}=this;return new p$1e({workspaceId:r,dataSourceName:o})}};e$1_([r$1d({raster:"raster"})],a$1h.prototype,"type",void 0),e$1_([d$1S({type:String,json:{write:!0}})],a$1h.prototype,"dataSourceName",void 0),e$1_([d$1S({type:String,json:{write:!0}})],a$1h.prototype,"workspaceId",void 0),a$1h=p$1e=e$1_([i$2w("esri.layers.support.source.RasterDataSource")],a$1h);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$1d;let a$1g=p$1d=class extends a$2A{constructor(r){super(r),this.type="table";}clone(){const{workspaceId:r,gdbVersion:o,dataSourceName:e}=this;return new p$1d({workspaceId:r,gdbVersion:o,dataSourceName:e})}};e$1_([r$1d({table:"table"})],a$1g.prototype,"type",void 0),e$1_([d$1S({type:String,json:{write:!0}})],a$1g.prototype,"workspaceId",void 0),e$1_([d$1S({type:String,json:{write:!0}})],a$1g.prototype,"gdbVersion",void 0),e$1_([d$1S({type:String,json:{write:!0}})],a$1g.prototype,"dataSourceName",void 0),a$1g=p$1d=e$1_([i$2w("esri.layers.support.source.TableDataSource")],a$1g);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var f$u,m$L;const j$d=s$25()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let T$a=f$u=class extends a$2A{constructor(e){super(e),this.type="join-table";}readLeftTableSource(e,r,o){return v$i()(e,r,o)}castLeftTableSource(e){return N$t(L$b(),e)}readRightTableSource(e,r,o){return v$i()(e,r,o)}castRightTableSource(e){return N$t(L$b(),e)}clone(){var e,r;const{leftTableKey:o,rightTableKey:t,leftTableSource:a,rightTableSource:s,joinType:l}=this,p={leftTableKey:o,rightTableKey:t,leftTableSource:null!=(e=null==a?void 0:a.clone())?e:void 0,rightTableSource:null!=(r=null==s?void 0:s.clone())?r:void 0,joinType:l};return new f$u(p)}};e$1_([r$1d({joinTable:"join-table"})],T$a.prototype,"type",void 0),e$1_([d$1S({type:String,json:{write:!0}})],T$a.prototype,"leftTableKey",void 0),e$1_([d$1S({type:String,json:{write:!0}})],T$a.prototype,"rightTableKey",void 0),e$1_([d$1S({json:{write:!0}})],T$a.prototype,"leftTableSource",void 0),e$1_([o$1j("leftTableSource")],T$a.prototype,"readLeftTableSource",null),e$1_([c$2Y("leftTableSource")],T$a.prototype,"castLeftTableSource",null),e$1_([d$1S({json:{write:!0}})],T$a.prototype,"rightTableSource",void 0),e$1_([o$1j("rightTableSource")],T$a.prototype,"readRightTableSource",null),e$1_([c$2Y("rightTableSource")],T$a.prototype,"castRightTableSource",null),e$1_([r$1d(j$d)],T$a.prototype,"joinType",void 0),T$a=f$u=e$1_([i$2w("esri.layers.support.source.JoinTableDataSource")],T$a);let h$x=null;function v$i(){return h$x||(h$x=u$29({types:L$b()})),h$x}let g$v=null;function L$b(){return g$v||(g$v={key:"type",base:null,typeMap:{"data-layer":K$5,"map-layer":c$1d}}),g$v}const w$l={key:"type",base:null,typeMap:{"join-table":T$a,"query-table":a$1i,raster:a$1h,table:a$1g}};let K$5=m$L=class extends a$2A{constructor(e){super(e),this.type="data-layer";}clone(){const{fields:e,dataSource:r}=this;return new m$L({fields:e,dataSource:r})}};e$1_([r$1d({dataLayer:"data-layer"})],K$5.prototype,"type",void 0),e$1_([d$1S({type:[y$z],json:{write:!0}})],K$5.prototype,"fields",void 0),e$1_([d$1S({types:w$l,json:{write:!0}})],K$5.prototype,"dataSource",void 0),K$5=m$L=e$1_([i$2w("esri.layers.support.source.DataLayerSource")],K$5),K$5.from=b$Z(K$5);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$1g;const c$1b=new o$1K({upperLeft:"upper-left",lowerLeft:"lower-left"});let m$K=n$1g=class extends a$2A{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1;}clone(){return new n$1g(l$2r({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};e$1_([d$1S({type:M$r,json:{write:{overridePolicy(){return {enabled:"view"===this.mode}}}}})],m$K.prototype,"extent",void 0),e$1_([d$1S({type:["view","edit"],json:{write:!0}})],m$K.prototype,"mode",void 0),e$1_([d$1S({type:String,json:{read:c$1b.read,write:c$1b.write}})],m$K.prototype,"originPosition",void 0),e$1_([d$1S({type:Number,json:{write:{overridePolicy(){return {enabled:"view"===this.mode}}}}})],m$K.prototype,"tolerance",void 0),m$K=n$1g=e$1_([i$2w("esri.rest.support.QuantizationParameters")],m$K);const a$1f=m$K;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$1a;const n$1f=new o$1K({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});let p$1c=c$1a=class extends a$2A{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null;}writeStatisticParameters(t,e){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(e.statisticParameters=l$2r(t));}clone(){return new c$1a({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:l$2r(this.statisticParameters)})}};e$1_([d$1S({type:Number,json:{write:!0}})],p$1c.prototype,"maxPointCount",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],p$1c.prototype,"maxRecordCount",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],p$1c.prototype,"maxVertexCount",void 0),e$1_([d$1S({type:String,json:{write:!0}})],p$1c.prototype,"onStatisticField",void 0),e$1_([d$1S({type:String,json:{write:!0}})],p$1c.prototype,"outStatisticFieldName",void 0),e$1_([d$1S({type:String,json:{read:{source:"statisticType",reader:n$1f.read},write:{target:"statisticType",writer:n$1f.write}}})],p$1c.prototype,"statisticType",void 0),e$1_([d$1S({type:Object})],p$1c.prototype,"statisticParameters",void 0),e$1_([r$1c("statisticParameters")],p$1c.prototype,"writeStatisticParameters",null),p$1c=c$1a=e$1_([i$2w("esri.rest.support.StatisticDefinition")],p$1c);const m$J=p$1c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var S$i;const v$h=new o$1K({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),g$u=new o$1K({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let R$a=S$i=class extends a$2A{constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.datumTransformation=null,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null;}static from(t){return v$W(S$i,t)}castDatumTransformation(t){return "number"==typeof t||"object"==typeof t?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime();}writeParameterValues(t,e){if(t){const r={};for(const e in t){const i=t[e];Array.isArray(i)?r[e]=i.map((t=>t instanceof Date?t.getTime():t)):i instanceof Date?r[e]=i.getTime():r[e]=i;}e.parameterValues=r;}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1";}writeWhere(t,e){e.where=t||"1=1";}clone(){return new S$i(l$2r({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:r$1G(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};R$a.MAX_MAX_RECORD_COUNT_FACTOR=5,e$1_([d$1S({json:{write:!0}})],R$a.prototype,"aggregateIds",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],R$a.prototype,"cacheHint",void 0),e$1_([d$1S({json:{write:!0}})],R$a.prototype,"datumTransformation",void 0),e$1_([c$2Y("datumTransformation")],R$a.prototype,"castDatumTransformation",null),e$1_([d$1S({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],R$a.prototype,"distance",void 0),e$1_([d$1S({type:K$5,json:{write:!0}})],R$a.prototype,"dynamicDataSource",void 0),e$1_([d$1S({type:String,json:{write:!0}})],R$a.prototype,"formatOf3DObjects",void 0),e$1_([d$1S({type:String,json:{write:!0}})],R$a.prototype,"gdbVersion",void 0),e$1_([d$1S({types:i$20,json:{read:d$1t,write:!0}})],R$a.prototype,"geometry",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],R$a.prototype,"geometryPrecision",void 0),e$1_([d$1S({type:[String],json:{write:!0}})],R$a.prototype,"groupByFieldsForStatistics",void 0),e$1_([d$1S({type:String,json:{write:!0}})],R$a.prototype,"having",void 0),e$1_([d$1S({type:Date})],R$a.prototype,"historicMoment",void 0),e$1_([r$1c("historicMoment")],R$a.prototype,"writeHistoricMoment",null),e$1_([d$1S({type:Number,json:{write:!0}})],R$a.prototype,"maxAllowableOffset",void 0),e$1_([d$1S({type:Number,cast:t=>t<1?1:t>S$i.MAX_MAX_RECORD_COUNT_FACTOR?S$i.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],R$a.prototype,"maxRecordCountFactor",void 0),e$1_([d$1S({type:["xyFootprint"],json:{write:!0}})],R$a.prototype,"multipatchOption",void 0),e$1_([d$1S({type:Number,json:{read:{source:"resultRecordCount"}}})],R$a.prototype,"num",void 0),e$1_([d$1S({json:{write:!0}})],R$a.prototype,"objectIds",void 0),e$1_([d$1S({type:[String],json:{write:!0}})],R$a.prototype,"orderByFields",void 0),e$1_([d$1S({type:[String],json:{write:!0}})],R$a.prototype,"outFields",void 0),e$1_([d$1S({type:k$s,json:{name:"outSR",write:!0}})],R$a.prototype,"outSpatialReference",void 0),e$1_([d$1S({type:[m$J],json:{write:{enabled:!0,overridePolicy(){return {enabled:r$1G(this.outStatistics)&&this.outStatistics.length>0}}}}})],R$a.prototype,"outStatistics",void 0),e$1_([d$1S({json:{write:!0}})],R$a.prototype,"parameterValues",void 0),e$1_([r$1c("parameterValues")],R$a.prototype,"writeParameterValues",null),e$1_([d$1S({type:b$O,json:{write:!0}})],R$a.prototype,"pixelSize",void 0),e$1_([d$1S({type:a$1f,json:{write:!0}})],R$a.prototype,"quantizationParameters",void 0),e$1_([d$1S({type:[Object],json:{write:!0}})],R$a.prototype,"rangeValues",void 0),e$1_([d$1S({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return {enabled:"relation"===this.spatialRelationship}}}}})],R$a.prototype,"relationParameter",void 0),e$1_([d$1S({type:String,json:{write:!0}})],R$a.prototype,"resultType",void 0),e$1_([d$1S({type:Boolean,json:{default:!1,write:!0}})],R$a.prototype,"returnCentroid",void 0),e$1_([d$1S({type:Boolean,json:{default:!1,write:!0}})],R$a.prototype,"returnDistinctValues",void 0),e$1_([d$1S({type:Boolean,json:{default:!0,write:!0}})],R$a.prototype,"returnExceededLimitFeatures",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],R$a.prototype,"returnGeometry",void 0),e$1_([d$1S({type:Boolean,json:{default:!1,write:!0}})],R$a.prototype,"returnQueryGeometry",void 0),e$1_([d$1S({type:Boolean,json:{default:!1,write:!0}})],R$a.prototype,"returnM",void 0),e$1_([d$1S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],R$a.prototype,"returnZ",void 0),e$1_([d$1S({type:k$s,json:{write:!0}})],R$a.prototype,"sourceSpatialReference",void 0),e$1_([r$1d(v$h,{ignoreUnknown:!1,name:"spatialRel"})],R$a.prototype,"spatialRelationship",void 0),e$1_([d$1S({type:Number,json:{read:{source:"resultOffset"}}})],R$a.prototype,"start",void 0),e$1_([r$1c("start"),r$1c("num")],R$a.prototype,"writeStart",null),e$1_([d$1S({type:String,json:{write:!0}})],R$a.prototype,"sqlFormat",void 0),e$1_([d$1S({type:String,json:{write:!0}})],R$a.prototype,"text",void 0),e$1_([d$1S({type:y$$,json:{write:!0}})],R$a.prototype,"timeExtent",void 0),e$1_([d$1S({type:Boolean,json:{default:!1,write:!0}})],R$a.prototype,"timeReferenceUnknownClient",void 0),e$1_([r$1d(g$u,{ignoreUnknown:!1}),d$1S({json:{write:{overridePolicy(t){return {enabled:t&&this.distance>0}}}}})],R$a.prototype,"units",void 0),e$1_([d$1S({type:String,json:{write:{overridePolicy(t){return {enabled:null!=t||this.start>0}}}}})],R$a.prototype,"where",void 0),e$1_([r$1c("where")],R$a.prototype,"writeWhere",null),R$a=S$i=e$1_([i$2w("esri.rest.support.Query")],R$a);const b$h=R$a;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$J;let d$L=u$J=class extends a$2A{constructor(t){super(t),this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null;}_writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime();}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(e.definitionExpression="1=1");}clone(){return new u$J(l$2r({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};e$1_([d$1S({type:K$5,json:{write:!0}})],d$L.prototype,"dynamicDataSource",void 0),e$1_([d$1S({type:String,json:{write:!0}})],d$L.prototype,"gdbVersion",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],d$L.prototype,"geometryPrecision",void 0),e$1_([d$1S({type:Date})],d$L.prototype,"historicMoment",void 0),e$1_([r$1c("historicMoment")],d$L.prototype,"_writeHistoricMoment",null),e$1_([d$1S({type:Number,json:{write:!0}})],d$L.prototype,"maxAllowableOffset",void 0),e$1_([d$1S({type:[Number],json:{write:!0}})],d$L.prototype,"objectIds",void 0),e$1_([d$1S({type:[String],json:{write:!0}})],d$L.prototype,"orderByFields",void 0),e$1_([d$1S({type:[String],json:{write:!0}})],d$L.prototype,"outFields",void 0),e$1_([d$1S({type:k$s,json:{read:{source:"outSR"},write:{target:"outSR"}}})],d$L.prototype,"outSpatialReference",void 0),e$1_([d$1S({json:{write:!0}})],d$L.prototype,"relationshipId",void 0),e$1_([d$1S({type:Number,json:{read:{source:"resultOffset"}}})],d$L.prototype,"start",void 0),e$1_([r$1c("start"),r$1c("num")],d$L.prototype,"writeStart",null),e$1_([d$1S({type:Number,json:{read:{source:"resultRecordCount"}}})],d$L.prototype,"num",void 0),e$1_([d$1S({json:{write:!0}})],d$L.prototype,"returnGeometry",void 0),e$1_([d$1S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],d$L.prototype,"returnM",void 0),e$1_([d$1S({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],d$L.prototype,"returnZ",void 0),e$1_([d$1S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],d$L.prototype,"where",void 0),d$L=u$J=e$1_([i$2w("esri.rest.support.RelationshipQuery")],d$L),d$L.from=b$Z(d$L);const l$X=d$L;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$F(t,r){return r?{...r,query:{...t,...r.query}}:{query:t}}function e$G(r){return "string"==typeof r?U$o(r):r}function n$1e(t,r,e){const o={};for(const i in t){if("declaredClass"===i)continue;const f=t[i];if(null!=f&&"function"!=typeof f)if(Array.isArray(f)){o[i]=[];for(let t=0;t<f.length;t++)o[i][t]=n$1e(f[t]);}else if("object"==typeof f)if(f.toJSON){const t=f.toJSON(e&&e[i]);o[i]=r?t:JSON.stringify(t);}else o[i]=r?f:JSON.stringify(f);else o[i]=f;}return o}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$H(n){const o={};for(const e in n){if("declaredClass"===e)continue;const r=n[e];if(null!=r&&"function"!=typeof r)if(Array.isArray(r)){o[e]=[];for(let n=0;n<r.length;n++)o[e][n]=t$H(r[n]);}else "object"==typeof r?r.toJSON&&(o[e]=JSON.stringify(r)):o[e]=r;}return o}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1d(t){const o=t.toJSON();return o.attachmentTypes&&(o.attachmentTypes=o.attachmentTypes.join(",")),o.keywords&&(o.keywords=o.keywords.join(",")),o.globalIds&&(o.globalIds=o.globalIds.join(",")),o.objectIds&&(o.objectIds=o.objectIds.join(",")),o.size&&(o.size=o.size.join(",")),o}function a$1e(o,s){const n={};for(const a of o){const{parentObjectId:o,parentGlobalId:c,attachmentInfos:i}=a;for(const a of i){const{id:i}=a,m=j$L(i$2p(`${s}/${o}/attachments/${i}`)),p=l$_.fromJSON(a);p.set({url:m,parentObjectId:o,parentGlobalId:c}),n[o]?n[o].push(p):n[o]=[p];}}return n}function c$19(t,e,r){let a={query:t$H({...t.query,f:"json",...n$1d(e)})};return r&&(a={...r,...a,query:{...r.query,...a.query}}),E$t(t.path+"/queryAttachments",a)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function a$1d(a,m,n){const s=e$G(a);return c$19(s,u$O.from(m),{...n}).then((t=>a$1e(t.data.attachmentGroups,s.path)))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$E={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new m$1L({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:k$s.WebMercator}),minus180Line:new m$1L({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:k$s.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new m$1L({paths:[[[180,-180],[180,180]]],spatialReference:k$s.WGS84}),minus180Line:new m$1L({paths:[[[-180,-180],[-180,180]]],spatialReference:k$s.WGS84})}};function i$18(e,n){return Math.ceil((e-n)/(2*n))}function o$E(e,n){const t=s$15(e);for(const r of t)for(const e of r)e[0]+=n;return e}function s$15(e){return c$2D(e)?e.rings:e.paths}function a$1c(e){const n=(null==e?void 0:e.isWebMercator)?102100:4326;return [r$E[n].minX,r$E[n].maxX]}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function o$D(o,i,n,m){const p="string"==typeof o?U$o(o):o,a=i[0].spatialReference,u={...m,query:{...p.query,f:"json",sr:JSON.stringify(a),target:JSON.stringify({geometryType:v$H(i[0]),geometries:i}),cutter:JSON.stringify(n)}},c=await E$t(p.path+"/cut",u),{cutIndexes:f,geometries:g=[]}=c.data;return {cutIndexes:f,geometries:g.map((e=>{const t=d$1t(e);return t.spatialReference=a,t}))}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function i$17(o,i,f){const m="string"==typeof o?U$o(o):o,p=i[0].spatialReference,a=v$H(i[0]),u={...f,query:{...m.query,f:"json",sr:p.wkid?p.wkid:JSON.stringify(p),geometries:JSON.stringify(s$14(i))}};return n$1c((await E$t(m.path+"/simplify",u)).data,a,p)}function s$14(r){return {geometryType:v$H(r[0]),geometries:r.map((r=>r.toJSON()))}}function n$1c(r,t,e){const i=a$2v(t);return r.map((r=>{const t=i.fromJSON(r);return t.spatialReference=e,t}))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const y$y=s$2h.getLogger("esri.geometry.support.normalizeUtils");function x$b(t){return "polygon"===t.type}function d$K(t){return "polygon"===t[0].type}function w$k(t){return "polyline"===t[0].type}function R$9(t,n){if(!(t instanceof m$1L||t instanceof v$I)){const t="straightLineDensify: the input geometry is neither polyline nor polygon";throw y$y.error(t),new s$29(t)}const o=s$15(t),s=[];for(const e of o){const t=[];s.push(t),t.push([e[0][0],e[0][1]]);for(let o=0;o<e.length-1;o++){const s=e[o][0],r=e[o][1],i=e[o+1][0],l=e[o+1][1],f=Math.sqrt((i-s)*(i-s)+(l-r)*(l-r)),c=(l-r)/f,p=(i-s)/f,u=f/n;if(u>1){for(let l=1;l<=u-1;l++){const e=l*n,o=p*e+s,i=c*e+r;t.push([o,i]);}const e=(f+Math.floor(u-1)*n)/2,o=p*e+s,i=c*e+r;t.push([o,i]);}t.push([i,l]);}}return x$b(t)?new v$I({rings:s,spatialReference:t.spatialReference}):new m$1L({paths:s,spatialReference:t.spatialReference})}function M$7(t,e,n){if(e){const e=R$9(t,1e6);t=j$D(e,!0);}return n&&(t=o$E(t,n)),t}function P$d(t,e,n){if(Array.isArray(t)){const o=t[0];if(o>e){const n=i$18(o,e);t[0]=o+n*(-2*e);}else if(o<n){const e=i$18(o,n);t[0]=o+e*(-2*n);}}else {const o=t.x;if(o>e){const n=i$18(o,e);t=t.clone().offset(n*(-2*e),0);}else if(o<n){const e=i$18(o,n);t=t.clone().offset(e*(-2*n),0);}}return t}function b$g(t,e){let n=-1;for(let o=0;o<e.cutIndexes.length;o++){const s=e.cutIndexes[o],r=e.geometries[o],i=s$15(r);for(let t=0;t<i.length;t++){const e=i[t];e.some((n=>{if(n[0]<180)return !0;{let n=0;for(let t=0;t<e.length;t++){const o=e[t][0];n=o>n?o:n;}n=Number(n.toFixed(9));const o=-360*i$18(n,180);for(let s=0;s<e.length;s++){const e=r.getPoint(t,s);r.setPoint(t,s,e.clone().offset(o,0));}return !0}}));}if(s===n){if(d$K(t))for(const e of s$15(r))t[s]=t[s].addRing(e);else if(w$k(t))for(const e of s$15(r))t[s]=t[s].addPath(e);}else n=s,t[s]=r;}return t}async function v$g(e,n,l){var h;if(!Array.isArray(e))return v$g([e],n);const y=null!=(h=null==n?void 0:n.url)?h:t$1K.geometryServiceUrl;let x,d,w,j,R,L,U,k,A=0;const z=[],I=[];for(const t of e)if(t$1O(t))I.push(t);else if(x||(x=t.spatialReference,d=S$C(x),w=x.isWebMercator,L=w?102100:4326,j=r$E[L].maxX,R=r$E[L].minX,U=r$E[L].plus180Line,k=r$E[L].minus180Line),d)if("mesh"===t.type)I.push(t);else if("point"===t.type)I.push(P$d(t.clone(),j,R));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map((t=>P$d(t,j,R))),I.push(e);}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,d);I.push(e.rings?new v$I(e):e);}else if(t.extent){const e=t.extent,n=i$18(e.xmin,R)*(2*j);let o=0===n?t.clone():o$E(t.clone(),n);e.offset(n,0),e.intersects(U)&&e.xmax!==j?(A=e.xmax>A?e.xmax:A,o=M$7(o,w),z.push(o),I.push("cut")):e.intersects(k)&&e.xmin!==R?(A=e.xmax*(2*j)>A?e.xmax*(2*j):A,o=M$7(o,w,360),z.push(o),I.push("cut")):I.push(o);}else I.push(t.clone());else I.push(t);let X=i$18(A,j),q=-90;const C=X,D=new m$1L;for(;X>0;){const t=360*X-180;D.addPath([[t,q],[t,-1*q]]),q*=-1,X--;}if(z.length>0&&C>0){const t=b$g(z,await o$D(y,z,D,l)),n=[],o=[];for(let l=0;l<I.length;l++){const r=I[l];if("cut"!==r)o.push(r);else {const r=t.shift(),i=e[l];r$1G(i)&&"polygon"===i.type&&i.rings&&i.rings.length>1&&r.rings.length>=i.rings.length?(n.push(r),o.push("simplify")):o.push(w?R$o(r):r);}}if(!n.length)return o;const r=await i$17(y,n,l),i=[];for(let e=0;e<o.length;e++){const t=o[e];"simplify"!==t?i.push(t):i.push(w?R$o(r.shift()):r.shift());}return i}const E=[];for(let t=0;t<I.length;t++){const e=I[t];if("cut"!==e)E.push(e);else {const t=z.shift();E.push(!0===w?R$o(t):t);}}return Promise.resolve(E)}function U$9(t,e){const n=S$C(e);if(n){const[e,o]=n.valid,s=o-e;if(t<e)for(;t<e;)t+=s;if(t>o)for(;t>o;)t-=s;}return t}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$13=4294967296,i$16=s$2l("esri-text-decoder")?new TextDecoder("utf-8"):null,r$D=s$2l("safari")||s$2l("ios")?6:s$2l("ff")?12:32;class a$1b{constructor(t,e,s=0,i=(t?t.byteLength:0)){this._tag=0,this._dataType=99,this.init(t,e,s,i);}init(t,e,s,i){this._data=t,this._dataView=e,this._pos=s,this._end=i;}clone(){return new a$1b(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t;}nextTag(t){for(;;){if(this._pos===this._end)return !1;const e=this._decodeVarint();if(this._tag=e>>3,this._dataType=7&e,!t||t===this._tag)break;this.skip();}return !0}next(){if(this._pos===this._end)return !1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=0!==this._data[this._pos];return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,e=this._pos,i=t.getUint32(e,!0)+t.getUint32(e+4,!0)*s$13;return this._skip(8),i}getSFixed64(){const t=this._dataView,e=this._pos,i=t.getUint32(e,!0)+t.getInt32(e+4,!0)*s$13;return this._skip(8),i}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),e=this._pos,s=this._toString(this._data,e,e+t);return this._skip(t),s}getBytes(){const t=this._getLength(),e=this._pos,s=this._toBytes(this._data,e,e+t);return this._skip(t),s}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,e,s,i){const r=this.getMessage(),a=t(r,e,s,i);return r.release(),a}processMessage(t){const e=this.getMessage(),s=t(e);return e.release(),s}getMessage(){const t=this._getLength(),e=a$1b.pool.acquire();return e.init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),e}release(){a$1b.pool.release(this);}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t);}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t;}_decodeVarint(){const t=this._data;let e,s=this._pos,i=0;if(this._end-s>=10)do{if(e=t[s++],i|=127&e,0==(128&e))break;if(e=t[s++],i|=(127&e)<<7,0==(128&e))break;if(e=t[s++],i|=(127&e)<<14,0==(128&e))break;if(e=t[s++],i|=(127&e)<<21,0==(128&e))break;if(e=t[s++],i+=268435456*(127&e),0==(128&e))break;if(e=t[s++],i+=34359738368*(127&e),0==(128&e))break;if(e=t[s++],i+=4398046511104*(127&e),0==(128&e))break;if(e=t[s++],i+=562949953421312*(127&e),0==(128&e))break;if(e=t[s++],i+=72057594037927940*(127&e),0==(128&e))break;if(e=t[s++],i+=0x8000000000000000*(127&e),0==(128&e))break;throw new Error("Varint too long!")}while(0);else {let r=1;for(;s!==this._end&&(e=t[s],0!=(128&e));)++s,i+=(127&e)*r,r*=128;if(s===this._end)throw new Error("Varint overrun!");++s,i+=e*r;}return this._pos=s,i}_decodeSVarint(){const t=this._decodeVarint();return t%2?-(t+1)/2:t/2}_getLength(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,e,s){if((s=Math.min(this._end,s))-e>r$D&&i$16){const r=t.subarray(e,s);return i$16.decode(r)}let a="",n="";for(let i=e;i<s;++i){const e=t[i];128&e?n+="%"+e.toString(16):(a+=decodeURIComponent(n)+String.fromCharCode(e),n="");}return n.length&&(a+=decodeURIComponent(n)),a}_toBytes(t,e,s){return s=Math.min(this._end,s),new Uint8Array(t.buffer,e,s-e)}}a$1b.pool=new e$1I(a$1b,null,(t=>{t._data=null,t._dataView=null;}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$G{constructor(t=[],e=[],s=!1){this.lengths=null!=t?t:[],this.coords=null!=e?e:[],this.hasIndeterminateRingOrder=s;}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((t,e)=>t+e))}forEachVertex(t){let e=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let s=0;s<this.lengths.length;s++){const h=this.lengths[s];for(let s=0;s<h;s++){t(this.coords[2*(s+e)],this.coords[2*(s+e)+1]);}e+=h;}}clone(e){return e?(e.set(this.coords),new t$G(this.lengths.slice(),e,this.hasIndeterminateRingOrder)):new t$G(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$12{constructor(t=null,s={},e,o){this.geometry=t,this.attributes=s,this.centroid=e,this.objectId=o,this.displayId=0,this.geohashX=0,this.geohashY=0;}weakClone(){const t=new s$12(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function e$F(s){return !(t$1O(s.geometry)||!s.geometry.coords||!s.geometry.coords.length)}class o$C extends s$12{}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$E{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null;}weakClone(){const t=new e$E;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$1b=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class a$1a{constructor(e){this.options=e,this.geometryTypes=n$1b,this._coordinatePtr=0,this._vertexDimension=0;}createFeatureResult(){return new e$E}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++;}finishFeatureResult(r){if(!r||!r.features||!r.hasZ||!this.options.sourceSpatialReference||!r.spatialReference||E$n(r.spatialReference,this.options.sourceSpatialReference)||r.spatialReference.vcsWkid)return;const i=Y$8(this.options.sourceSpatialReference)/Y$8(r.spatialReference);if(1!==i)for(const e of r.features){if(!e$F(e))continue;const t=e.geometry.coords;for(let e=2;e<t.length;e+=3)t[e]*=i;}}addFeature(e,t){e.features.push(t);}createFeature(){return new s$12}createSpatialReference(){return {wkid:0}}createGeometry(){return new t$G}addField(e,t){e.fields.push(t);}allocateCoordinates(e){e.coords.length=e.lengths.reduce(((e,t)=>e+t),0)*this._vertexDimension,this._coordinatePtr=0;}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t;}addCoordinatePoint(e,t){e.coords.push(t);}addLength(e,t){e.lengths.push(t);}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType;}createPointGeometry(){return new t$G}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$1a=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],o$B=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],i$15=["upperLeft","lowerLeft"];function c$18(e){return e>=n$1a.length?null:n$1a[e]}function l$W(e){return e>=o$B.length?null:o$B[e]}function g$t(e){return e>=i$15.length?null:i$15[e]}function p$1b(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function u$I(e,t,r){const s=3,a=t.createPointGeometry(r);for(;e.next();)switch(e.tag()){case s:{const r=e.getUInt32(),s=e.pos()+r;let n=0;for(;e.pos()<s;)t.addCoordinatePoint(a,e.getSInt64(),n++);break}default:e.skip();}return a}function y$x(e,t,r){const s=2,a=3,n=t.createGeometry(r),o=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;e.next();)switch(e.tag()){case s:{const r=e.getUInt32(),s=e.pos()+r;let a=0;for(;e.pos()<s;)t.addLength(n,e.getUInt32(),a++);break}case a:{const r=e.getUInt32(),s=e.pos()+r;let a=0;for(t.allocateCoordinates(n);e.pos()<s;)t.addCoordinate(n,e.getSInt64(),a),a++,a===o&&(a=0);break}default:e.skip();}return n}function f$t(e){const t=1,r=2,n=3,o=new t$G;let i="esriGeometryPoint";for(;e.next();)switch(e.tag()){case r:{const t=e.getUInt32(),r=e.pos()+t;for(;e.pos()<r;)o.lengths.push(e.getUInt32());break}case n:{const t=e.getUInt32(),r=e.pos()+t;for(;e.pos()<r;)o.coords.push(e.getSInt64());break}case t:i=n$1b[e.getEnum()];break;default:e.skip();}return {queryGeometry:o,queryGeometryType:i}}function b$f(e){const t=1,r=2,s=3,a=4,n=5,o=6,i=7,c=8,l=9;for(;e.next();)switch(e.tag()){case t:return e.getString();case r:return e.getFloat();case s:return e.getDouble();case a:return e.getSInt32();case n:return e.getUInt32();case o:return e.getInt64();case i:return e.getUInt64();case c:return e.getSInt64();case l:return e.getBool();default:return e.skip(),null}return null}function k$8(e){const t=1,r=2,s=3,a=4,n=6,o={type:c$18(0)};for(;e.next();)switch(e.tag()){case t:o.name=e.getString();break;case r:o.type=c$18(e.getEnum());break;case s:o.alias=e.getString();break;case a:o.sqlType=l$W(e.getEnum());break;default:e.skip();break;case n:o.defaultValue=e.getString();}return o}function d$J(e){const t=1,r=2,s={};for(;e.next();)switch(e.tag()){case t:s.name=e.getString();break;case r:s.isSystemMaintained=e.getBool();break;default:e.skip();}return s}function m$I(e,t,r,s){const a=1,n=2,o=4,i=t.createFeature(r);let c=0;for(;e.next();)switch(e.tag()){case a:{const t=s[c++].name;i.attributes[t]=e.processMessage(b$f);break}case n:i.geometry=e.processMessageWithArgs(y$x,t,r);break;case o:i.centroid=e.processMessageWithArgs(u$I,t,r);break;default:e.skip();}return i}function h$w(e){const t=1,r=2,s=3,a=4,n=[1,1,1,1];for(;e.next();)switch(e.tag()){case t:n[0]=e.getDouble();break;case r:n[1]=e.getDouble();break;case a:n[2]=e.getDouble();break;case s:n[3]=e.getDouble();break;default:e.skip();}return n}function T$9(e){const t=1,r=2,s=3,a=4,n=[0,0,0,0];for(;e.next();)switch(e.tag()){case t:n[0]=e.getDouble();break;case r:n[1]=e.getDouble();break;case a:n[2]=e.getDouble();break;case s:n[3]=e.getDouble();break;default:e.skip();}return n}function q$8(e){const t=1,r=2,s=3,a={originPosition:g$t(0)};for(;e.next();)switch(e.tag()){case t:a.originPosition=g$t(e.getEnum());break;case r:a.scale=e.processMessage(h$w);break;case s:a.translate=e.processMessage(T$9);break;default:e.skip();}return a}function I$a(e){const t=1,r=2,s=3,a={};for(;e.next();)switch(e.tag()){case t:a.shapeAreaFieldName=e.getString();break;case r:a.shapeLengthFieldName=e.getString();break;case s:a.units=e.getString();break;default:e.skip();}return a}function F$7(e,t){const r=1,s=2,a=3,n=4,o=5,i=t.createSpatialReference();for(;e.next();)switch(e.tag()){case r:i.wkid=e.getUInt32();break;case o:i.wkt=e.getString();break;case s:i.latestWkid=e.getUInt32();break;case a:i.vcsWkid=e.getUInt32();break;case n:i.latestVcsWkid=e.getUInt32();break;default:e.skip();}return i}function S$h(e,t){const r=1,s=2,a=3,n=4,o=5,i=7,c=8,l=9,g=10,u=11,y=12,f=13,b=15,h=t.createFeatureResult();h.geometryType=p$1b(t,0);let T=!1;for(;e.next();)switch(e.tag()){case r:h.objectIdFieldName=e.getString();break;case a:h.globalIdFieldName=e.getString();break;case n:h.geohashFieldName=e.getString();break;case o:h.geometryProperties=e.processMessage(I$a);break;case i:h.geometryType=p$1b(t,e.getEnum());break;case c:h.spatialReference=e.processMessageWithArgs(F$7,t);break;case g:h.hasZ=e.getBool();break;case u:h.hasM=e.getBool();break;case y:h.transform=e.processMessage(q$8);break;case l:{const t=e.getBool();h.exceededTransferLimit=t;break}case f:t.addField(h,e.processMessage(k$8));break;case b:T||(t.prepareFeatures(h),T=!0),t.addFeature(h,e.processMessageWithArgs(m$I,t,h,h.fields));break;case s:h.uniqueIdField=e.processMessage(d$J);break;default:e.skip();}return t.finishFeatureResult(h),h}function w$j(e,r){const s=1,a=4,n={};let o=null;for(;e.next();)switch(e.tag()){case a:o=e.processMessageWithArgs(f$t);break;case s:n.featureResult=e.processMessageWithArgs(S$h,r);break;default:e.skip();}return r$1G(o)&&n.featureResult&&r.addQueryGeometry(n,o),n}function D$a(t,s){try{const e=2,a=new a$1b(new Uint8Array(t),new DataView(t)),n={};for(;a.next();)if(a.tag()===e)n.queryResult=a.processMessageWithArgs(w$j,s);else a.skip();return n}catch(a){throw new s$29("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:a})}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$F(t,r){const u=D$a(t,r),o=u.queryResult.featureResult,s=u.queryResult.queryGeometry,y=u.queryResult.queryGeometryType;if(o&&o.features&&o.features.length&&o.objectIdFieldName){const e=o.objectIdFieldName;for(const t of o.features)t.attributes&&(t.objectId=t.attributes[e]);}return o&&(o.queryGeometry=s,o.queryGeometryType=y),o}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$E(t,c,l){if(t$1O(c)||t$1O(l)||l.vcsWkid||E$n(c,l))return null;const u=Y$8(c)/Y$8(l);if(1===u)return null;switch(t){case"point":case"esriGeometryPoint":return n=>i$14(n,u);case"polyline":case"esriGeometryPolyline":return n=>s$11(n,u);case"polygon":case"esriGeometryPolygon":return n=>r$C(n,u);case"multipoint":case"esriGeometryMultipoint":return n=>f$s(n,u);default:return null}}function i$14(n,o){n&&null!=n.z&&(n.z*=o);}function r$C(n,o){if(n)for(const e of n.rings)for(const n of e)n.length>2&&(n[2]*=o);}function s$11(n,o){if(n)for(const e of n.paths)for(const n of e)n.length>2&&(n[2]*=o);}function f$s(n,o){if(n)for(const e of n.points)e.length>2&&(e[2]*=o);}function c$17(n,o,e){if(null==n.hasM||n.hasZ)for(const t of o)for(const n of t)n.length>2&&(n[2]*=e);}function l$V(n,e,t){if(!n&&!e||!t)return;const i=Y$8(t);u$H(n,t,i),u$H(e,t,i);}function u$H(n,o,e){if(n)for(const t of n)a$19(t.geometry,o,e);}function a$19(t,i,r){if(t$1O(t)||!t.spatialReference||E$n(t.spatialReference,i))return;const s=Y$8(t.spatialReference)/r;if(1!==s)if("x"in t)null!=t.z&&(t.z*=s);else if("rings"in t)c$17(t,t.rings,s);else if("paths"in t)c$17(t,t.paths,s);else if("points"in t&&(null==t.hasM||t.hasZ))for(const n of t.points)n.length>2&&(n[2]*=s);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$B(r,t,f){if(!f||!f.features||!f.hasZ)return;const s=t$E(f.geometryType,t,r.outSpatialReference);if(!t$1O(s))for(const e of f.features)s(e.geometry);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$U="Layer does not support extent calculation.";function m$H(t,r){const n=t.geometry,o=t.toJSON(),s=o;if(r$1G(n)&&(s.geometry=JSON.stringify(n),s.geometryType=v$H(n),s.inSR=n.spatialReference.wkid||JSON.stringify(n.spatialReference)),o.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=o.groupByFieldsForStatistics.join(",")),o.objectIds&&(s.objectIds=o.objectIds.join(",")),o.orderByFields&&(s.orderByFields=o.orderByFields.join(",")),!o.outFields||!o.returnDistinctValues&&(null!=r&&r.returnCountOnly||null!=r&&r.returnExtentOnly||null!=r&&r.returnIdsOnly)?delete s.outFields:-1!==o.outFields.indexOf("*")?s.outFields="*":s.outFields=o.outFields.join(","),o.outSR?s.outSR=o.outSR.wkid||JSON.stringify(o.outSR):n&&(o.returnGeometry||o.returnCentroid)&&(s.outSR=s.inSR),o.returnGeometry&&delete o.returnGeometry,o.outStatistics&&(s.outStatistics=JSON.stringify(o.outStatistics)),o.pixelSize&&(s.pixelSize=JSON.stringify(o.pixelSize)),o.quantizationParameters&&(s.quantizationParameters=JSON.stringify(o.quantizationParameters)),o.parameterValues&&(s.parameterValues=JSON.stringify(o.parameterValues)),o.rangeValues&&(s.rangeValues=JSON.stringify(o.rangeValues)),o.dynamicDataSource&&(s.layer=JSON.stringify({source:o.dynamicDataSource}),delete o.dynamicDataSource),o.timeExtent){const t=o.timeExtent,{start:e,end:r}=t;null==e&&null==r||(s.time=e===r?e:`${null==e?"null":e},${null==r?"null":r}`),delete o.timeExtent;}return s}async function y$w(t,r,n,i){const o=r$1G(r.timeExtent)&&r.timeExtent.isEmpty?{data:{features:[]}}:await g$s(t,r,"json",i);return r$B(r,n,o.data),o}async function c$16(t,r,n,i){if(r$1G(r.timeExtent)&&r.timeExtent.isEmpty)return Promise.resolve({data:n.createFeatureResult()});const o=await d$I(t,r,i),u=o;return u.data=t$F(o.data,n),u}function d$I(t,e,r){return g$s(t,e,"pbf",r)}function f$r(t,r,n){return r$1G(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):g$s(t,r,"json",n,{returnIdsOnly:!0})}function p$1a(t,r,n){return r$1G(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):g$s(t,r,"json",n,{returnIdsOnly:!0,returnCountOnly:!0})}function S$g(t,r,n){return r$1G(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):g$s(t,r,"json",n,{returnExtentOnly:!0,returnCountOnly:!0}).then((t=>{const e=t.data;if(e.hasOwnProperty("extent"))return t;if(e.features)throw new Error(l$U);if(e.hasOwnProperty("count"))throw new Error(l$U);return t}))}function g$s(i,s,u,l={},y={}){const c="string"==typeof i?U$o(i):i,d=s.geometry?[s.geometry]:[];return l.responseType="pbf"===u?"array-buffer":"json",v$g(d,null,l).then((n=>{const i=n&&n[0];r$1G(i)&&((s=s.clone()).geometry=i);const o=t$H({...c.query,f:u,...y,...m$H(s,y)});return E$t(D$s(c.path,"query"),{...l,query:{...o,...l.query}})}))}

const query = /*#__PURE__*/Object.freeze({
  __proto__: null,
  executeQuery: y$w,
  executeQueryForCount: p$1a,
  executeQueryForExtent: S$g,
  executeQueryForIds: f$r,
  executeQueryPBF: c$16,
  executeQueryPBFBuffer: d$I,
  queryToQueryStringParameters: m$H,
  runQuery: g$s
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function n$19(n,s,m){const p=e$G(n);return p$1a(p,b$h.from(s),{...m}).then((o=>o.data.count))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function m$G(m,n,s){const p=e$G(m);return S$g(p,b$h.from(n),{...s}).then((t=>({count:t.data.count,extent:M$r.fromJSON(t.data.extent)})))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function s$10(s,e,m){const n=e$G(s);return f$r(n,b$h.from(e),{...m}).then((o=>o.data.objectIds))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h$v=new o$1K({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let d$H=class extends a$2A{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null;}readFeatures(e,t){const o=k$s.fromJSON(t.spatialReference),s=[];for(let i=0;i<e.length;i++){const t=e[i],p=h$U.fromJSON(t),a=t.geometry&&t.geometry.spatialReference;r$1G(p.geometry)&&!a&&(p.geometry.spatialReference=o),s.push(p);}return s}writeGeometryType(e,t,r,o){if(e)return void h$v.write(e,t,r,o);const{features:s}=this;if(s)for(const i of s)if(i&&r$1G(i.geometry))return void h$v.write(i.geometry.type,t,r,o)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=d$1t(e);return !r&&t.spatialReference&&(o.spatialReference=k$s.fromJSON(t.spatialReference)),o}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const o of r)if(o&&r$1G(o.geometry)&&o.geometry.spatialReference)return void(t.spatialReference=o.geometry.spatialReference.toJSON())}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e&&e[r];o.geometry=t&&t.toJSON()||o.geometry;}}return t}quantize(e){const{scale:[t,r],translate:[o,s]}=e,n=e=>Math.round((e-o)/t),p=e=>Math.round((s-e)/r),a=this.features,l=this._getQuantizationFunction(this.geometryType,n,p);for(let y=0,m=a.length;y<m;y++)l(e$1Y(a[y].geometry))||(a.splice(y,1),y--,m--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[o,s],scale:[i,p]}=r,a=e=>e*i+o,l=e=>s-e*p,y=this._getHydrationFunction(e,a,l);for(const{geometry:m}of t)r$1G(m)&&y(m);return this.transform=null,this}_quantizePoints(e,t,r){let o,s;const n=[];for(let i=0,p=e.length;i<p;i++){const p=e[i];if(i>0){const e=t(p[0]),i=r(p[1]);e===o&&i===s||(n.push([e-o,i-s]),o=e,s=i);}else o=t(p[0]),s=r(p[1]),n.push([o,s]);}return n.length>0?n:null}_getQuantizationFunction(e,t,r){return "point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const o=c$2D(e)?e.rings:e.paths,s=[];for(let n=0,i=o.length;n<i;n++){const e=o[n],i=this._quantizePoints(e,t,r);i&&s.push(i);}return s.length>0?(c$2D(e)?e.rings=s:e.paths=s,e):null}:"multipoint"===e?e=>{const o=this._quantizePoints(e.points,t,r);return o.length>0?(e.points=o,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r){return "point"===e?e=>{e.x=t(e.x),e.y=r(e.y);}:"polyline"===e||"polygon"===e?e=>{const o=c$2D(e)?e.rings:e.paths;let s,n;for(let i=0,p=o.length;i<p;i++){const e=o[i];for(let o=0,i=e.length;o<i;o++){const i=e[o];o>0?(s+=i[0],n+=i[1]):(s=i[0],n=i[1]),i[0]=t(s),i[1]=r(n);}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax);}:"multipoint"===e?e=>{const o=e.points;let s,n;for(let i=0,p=o.length;i<p;i++){const e=o[i];i>0?(s+=e[0],n+=e[1]):(s=e[0],n=e[1]),e[0]=t(s),e[1]=r(n);}}:void 0}};e$1_([d$1S({type:String,json:{write:!0}})],d$H.prototype,"displayFieldName",void 0),e$1_([d$1S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d$H.prototype,"exceededTransferLimit",void 0),e$1_([d$1S({type:[h$U],json:{write:!0}})],d$H.prototype,"features",void 0),e$1_([o$1j("features")],d$H.prototype,"readFeatures",null),e$1_([d$1S({type:[y$z],json:{write:!0}})],d$H.prototype,"fields",void 0),e$1_([d$1S({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:h$v.read}}})],d$H.prototype,"geometryType",void 0),e$1_([r$1c("geometryType")],d$H.prototype,"writeGeometryType",null),e$1_([d$1S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d$H.prototype,"hasM",void 0),e$1_([d$1S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d$H.prototype,"hasZ",void 0),e$1_([d$1S({types:i$20,json:{write:!0}})],d$H.prototype,"queryGeometry",void 0),e$1_([o$1j("queryGeometry")],d$H.prototype,"readQueryGeometry",null),e$1_([d$1S({type:k$s,json:{write:!0}})],d$H.prototype,"spatialReference",void 0),e$1_([r$1c("spatialReference")],d$H.prototype,"writeSpatialReference",null),e$1_([d$1S({json:{write:!0}})],d$H.prototype,"transform",void 0),d$H=e$1_([i$2w("esri.rest.support.FeatureSet")],d$H),d$H.prototype.toJSON.isDefaultToJSON=!0;const g$r=d$H;

const FeatureSet = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': g$r
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function s$$(r,t,e){const s=await a$18(r,t,e);return g$r.fromJSON(s)}async function a$18(o,s,a){const n=e$G(o),i={...a},p=b$h.from(s),{data:u}=await y$w(n,p,p.sourceSpatialReference,i);return u}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function h$u(t,e){return t?e?4:3:e?3:2}const a$17=s$2h.getLogger("esri.tasks.support.optimizedFeatureSet"),g$q={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},d$G=(t,e,n,o,r,s)=>{t[n]=r,t[n+1]=s;},m$F=(t,e,n,o,r,s)=>{t[n]=r,t[n+1]=s,t[n+2]=e[o+2];},y$v=(t,e,n,o,r,s)=>{t[n]=r,t[n+1]=s,t[n+2]=e[o+3];},p$19=(t,e,n,o,r,s)=>{t[n]=r,t[n+1]=s,t[n+2]=e[o+2],t[n+3]=e[o+3];};function I$9(t,e,n,o){if(t){if(n)return e&&o?p$19:m$F;if(e&&o)return y$v}else if(e&&o)return m$F;return d$G}function b$e({scale:t,translate:e},n){return Math.round((n-e[0])/t[0])}function M$6({scale:t,translate:e},n){return Math.round((e[1]-n)/t[1])}function w$i({scale:t,translate:e},n){return n*t[0]+e[0]}function N$a({scale:t,translate:e},n){return e[1]-n*t[1]}function G$6(t,e,n){return t?e?n?k$7(t):P$c(t):n?Z$3(t):T$8(t):null}function T$8(t){const e=t.coords;return {x:e[0],y:e[1]}}function F$6(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function P$c(t){const e=t.coords;return {x:e[0],y:e[1],z:e[2]}}function x$a(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function Z$3(t){const e=t.coords;return {x:e[0],y:e[1],m:e[2]}}function j$c(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function k$7(t){const e=t.coords;return {x:e[0],y:e[1],z:e[2],m:e[3]}}function E$b(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function z$5(t,e,n,r){let s=T$8;n&&r?s=k$7:n?s=P$c:r&&(s=Z$3);for(const c of e){const{geometry:e,attributes:n}=c,r=r$1G(e)?s(e):null;t.push({attributes:n,geometry:r});}return t}function S$f(t,e){return t&&e?E$b:t?x$a:e?j$c:F$6}function v$f(t,e,n,o,r){const s=S$f(n,o);for(const c of e){const{geometry:e,attributes:n}=c;let o;e&&(o=s(new t$G,e)),t.push(new s$12(o,n,null,n[r]));}return t}function Y$4(t,e,n,o){for(const r of e){const{geometry:e,attributes:s}=r;let c;e&&(c=_$e(e,n,o)),t.push({attributes:s,geometry:c});}return t}function _$e(t,e,o){if(t$1O(t))return null;const r=h$u(e,o),s=[];for(let n=0;n<t.coords.length;n+=r){const e=[];for(let o=0;o<r;o++)e.push(t.coords[n+o]);s.push(e);}return e?o?{points:s,hasZ:e,hasM:o}:{points:s,hasZ:e}:o?{points:s,hasM:o}:{points:s}}function O$c(t,e,n,o,r){const s=h$u(n,o);for(const c of e){const e=c.geometry,n=c.attributes;let o;e&&(o=A$5(new t$G,e,s)),t.push(new s$12(o,n,null,n[r]));}return t}function A$5(t,e,n=h$u(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const o=t.coords;let r=0;for(const s of e.points)for(let t=0;t<n;t++)o[r++]=s[t];return t}function L$a(t,e,n,r){for(const s of e){const{geometry:e,attributes:c}=s;let l;r$1G(e)&&(l=U$8(e,n,r)),t.push({attributes:c,geometry:l});}return t}function U$8(t,e,n){if(!t)return null;const o=h$u(e,n),{coords:r,lengths:s}=t,c=[];let l=0;for(const u of s){const t=[];for(let e=0;e<u;e++){const e=[];for(let t=0;t<o;t++)e.push(r[l++]);t.push(e);}c.push(t);}return e?n?{paths:c,hasZ:e,hasM:n}:{paths:c,hasZ:e}:n?{paths:c,hasM:n}:{paths:c}}function q$7(t,e,n,o,r){const s=h$u(n,o);for(const c of e){const e=c.geometry,n=c.attributes;let o;e&&(o=$$6(new t$G,e,s)),t.push(new s$12(o,n,null,n[r]));}return t}function $$6(t,e,n=h$u(e.hasZ,e.hasM)){const{lengths:o,coords:r}=t;let s=0;for(const c of e.paths){for(const t of c)for(let e=0;e<n;e++)r[s++]=t[e];o.push(c.length);}return t}function R$8(t,e,n,r){for(const s of e){const{geometry:e,attributes:c,centroid:l}=s;let u;if(r$1G(e)&&(u=C$a(e,n,r)),l){const e=T$8(l);t.push({attributes:c,centroid:e,geometry:u});}else t.push({attributes:c,geometry:u});}return t}function C$a(t,e,n){if(!t)return null;const o=h$u(e,n),{coords:r,lengths:s}=t,c=[];let l=0;for(const u of s){const t=[];for(let e=0;e<u;e++){const e=[];for(let t=0;t<o;t++)e.push(r[l++]);t.push(e);}c.push(t);}return e?n?{rings:c,hasZ:e,hasM:n}:{rings:c,hasZ:e}:n?{rings:c,hasM:n}:{rings:c}}function B$6(t,e,n,r,s){for(const c of e){const e=c.geometry,l=c.centroid,i=c.attributes;let h;e&&(h=D$9(new t$G,e,n,r)),r$1G(l)?t.push(new s$12(h,i,F$6(new t$G,l),i[s])):t.push(new s$12(h,i,null,i[s]));}return t}function D$9(t,e,n=e.hasZ,o=e.hasM){return H$4(t,e.rings,n,o),t}function H$4(t,e,n,o){const r=h$u(n,o),{lengths:s,coords:c}=t;let l=0;s.length=c.length=0;for(const u of e){for(const t of u)for(let e=0;e<r;e++)c[l++]=t[e];s.push(u.length);}return t}const J$3=[],K$4=[];function Q$4(t,e,n,o,r){J$3[0]=t;const[s]=W$4(K$4,J$3,e,n,o,r);return J$3.length=K$4.length=0,s}function W$4(e,n,o,r,s,c){if(e.length=0,!o){for(const t of n){const n=t.attributes[c];e.push(new s$12(null,t.attributes,null,n));}return e}switch(o){case"esriGeometryPoint":return v$f(e,n,r,s,c);case"esriGeometryMultipoint":return O$c(e,n,r,s,c);case"esriGeometryPolyline":return q$7(e,n,r,s,c);case"esriGeometryPolygon":return B$6(e,n,r,s,c);default:a$17.error("convertToFeatureSet:unknown-geometry",new s$29(`Unable to parse unknown geometry type '${o}'`)),e.length=0;}return e}function X$4(e,n,o,r,s,c){const l=e.length;switch(o){case"esriGeometryPoint":v$f(e,n,r,s,c);break;case"esriGeometryMultipoint":O$c(e,n,r,s,c);break;case"esriGeometryPolyline":q$7(e,n,r,s,c);break;case"esriGeometryPolygon":B$6(e,n,r,s,c);break;default:a$17.error("convertToFeatureSet:unknown-geometry",new s$29(`Unable to parse unknown geometry type '${o}'`));}for(let t=0;t<n.length;t++)e[t+l].geometryType=o,e[t+l].insertAfter=n[t].insertAfter,e[t+l].groupId=n[t].groupId;return e}function tt$1(t,e,n,o){K$4[0]=t,rt$1(J$3,K$4,e,n,o);const r=J$3[0];return J$3.length=K$4.length=0,r}function et$1(e,o,u){if(t$1O(e))return null;const i=new t$G;if("hasZ"in e&&null==o&&(o=e.hasZ),"hasM"in e&&null==u&&(u=e.hasM),l$1_(e)){return S$f(null!=o?o:null!=e.z,null!=u?u:null!=e.m)(i,e)}return c$2D(e)?D$9(i,e,o,u):y$1c(e)?$$6(i,e,h$u(o,u)):f$19(e)?A$5(i,e,h$u(o,u)):void a$17.error("convertFromGeometry:unknown-geometry",new s$29(`Unable to parse unknown geometry type '${e}'`))}function nt(e,o,r,s){const c=e&&("coords"in e?e:e.geometry);if(t$1O(c))return null;switch(o){case"esriGeometryPoint":{let t=T$8;return r&&s?t=k$7:r?t=P$c:s&&(t=Z$3),t(c)}case"esriGeometryMultipoint":return _$e(c,r,s);case"esriGeometryPolyline":return U$8(c,r,s);case"esriGeometryPolygon":return C$a(c,r,s);default:return void a$17.error("convertToGeometry:unknown-geometry",new s$29(`Unable to parse unknown geometry type '${o}'`))}}function ot$1(t,e){for(const n of e)t.push({attributes:n.attributes});return t}function rt$1(e,o,r,s,c){if(e.length=0,t$1O(r))return ot$1(e,o);switch(r){case"esriGeometryPoint":return z$5(e,o,s,c);case"esriGeometryMultipoint":return Y$4(e,o,s,c);case"esriGeometryPolyline":return L$a(e,o,s,c);case"esriGeometryPolygon":return R$8(e,o,s,c);default:a$17.error("convertToFeatureSet:unknown-geometry",new s$29(`Unable to parse unknown geometry type '${r}'`));}return e}function st$1(t){const{objectIdFieldName:e,spatialReference:n,transform:o,fields:r,hasM:s,hasZ:c,features:l,geometryType:u,exceededTransferLimit:i,uniqueIdField:f,queryGeometry:h,queryGeometryType:a}=t,g={features:rt$1([],l,u,c,s),fields:r,geometryType:u,objectIdFieldName:e,spatialReference:n,uniqueIdField:f,queryGeometry:nt(h,a,!1,!1)};return o&&(g.transform=o),i&&(g.exceededTransferLimit=i),s&&(g.hasM=s),c&&(g.hasZ=c),g}function ct$1(e,n){const o=new e$E,{hasM:r,hasZ:s,features:c,objectIdFieldName:l,spatialReference:u,geometryType:f,exceededTransferLimit:h,transform:g,fields:d}=e;return d&&(o.fields=d),o.geometryType=f,o.objectIdFieldName=l||n,o.spatialReference=u,o.objectIdFieldName?(c&&W$4(o.features,c,f,s,r,o.objectIdFieldName),h&&(o.exceededTransferLimit=h),r&&(o.hasM=r),s&&(o.hasZ=s),g&&(o.transform=g),o):(a$17.error(new s$29("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),o)}function lt$1(t){const{transform:e,features:n,hasM:r,hasZ:s}=t;if(!e)return t;for(const c of n)r$1G(c.geometry)&&mt$1(c.geometry,c.geometry,r,s,e),c.centroid&&mt$1(c.centroid,c.centroid,r,s,e);return t.transform=null,t}function ut$1(t,e){const{geometryType:n,features:o,hasM:r,hasZ:s}=e;if(!t)return e;for(let c=0;c<o.length;c++){const e=o[c],l=e.weakClone();l.geometry=new t$G,it$1(l.geometry,e.geometry,r,s,n,t),e.centroid&&(l.centroid=new t$G,it$1(l.centroid,e.centroid,r,s,"esriGeometryPoint",t)),o[c]=l;}return e.transform=t,e}function it$1(t,e,o,r,s,c,l=o,u=r){if(t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0),t$1O(e)||!e.coords.length)return null;const i=g$q[s],{coords:f,lengths:a}=e,d=h$u(o,r),m=h$u(o&&l,r&&u),y=I$9(o,r,l,u);if(!a.length)return y(t.coords,f,0,0,b$e(c,f[0]),M$6(c,f[1])),t.lengths.length&&(t.lengths.length=0),t.coords.length=d,t;let p,w,N,G,T=0,F=0,P=F;for(const n of a){if(n<i)continue;let e=0;F=P,N=p=b$e(c,f[T]),G=w=M$6(c,f[T+1]),y(t.coords,f,F,T,N,G),e++,T+=d,F+=m;for(let o=1;o<n;o++,T+=d)N=b$e(c,f[T]),G=M$6(c,f[T+1]),N===p&&G===w||(y(t.coords,f,F,T,N-p,G-w),F+=m,e++,p=N,w=G);e>=i&&(t.lengths.push(e),P=F);}return t.coords.length=P,t.coords.length?t:null}function ft$1(t,e,n,o,r,s,c=n,l=o){if(t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0),!e||!e.coords.length)return null;const u=g$q[r],{coords:i,lengths:f}=e,a=h$u(n,o),d=h$u(n&&c,o&&l),m=I$9(n,o,c,l);if(!f.length)return m(t.coords,i,0,0,i[0],i[1]),t.lengths.length&&(t.lengths.length=0),t.coords.length=a,t;let y=0;const p=s*s;for(const h of f){if(h<u){y+=h*a;continue}const e=t.coords.length/d,n=y,o=y+(h-1)*a;m(t.coords,i,t.coords.length,n,i[n],i[n+1]),at$1(t.coords,i,a,p,m,n,o),m(t.coords,i,t.coords.length,o,i[o],i[o+1]);const r=t.coords.length/d-e;r>=u?t.lengths.push(r):t.coords.length=e*d,y+=h*a;}return t.coords.length?t:null}function ht$1(t,e,n,o){const r=t[e],s=t[e+1],c=t[n],l=t[n+1],u=t[o],i=t[o+1];let f=c,h=l,a=u-f,g=i-h;if(0!==a||0!==g){const t=((r-f)*a+(s-h)*g)/(a*a+g*g);t>1?(f=u,h=i):t>0&&(f+=a*t,h+=g*t);}return a=r-f,g=s-h,a*a+g*g}function at$1(t,e,n,o,r,s,c){let l,u=o,i=0;for(let f=s+n;f<c;f+=n)l=ht$1(e,f,s,c),l>u&&(i=f,u=l);u>o&&(i-s>n&&at$1(t,e,n,o,r,s,i),r(t,e,t.length,i,e[i],e[i+1]),c-i>n&&at$1(t,e,n,o,r,i,c));}function gt$1(t,e,o,r){if(t$1O(e)||!e.coords||!e.coords.length)return null;const s=h$u(o,r);let c=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(e&&e.coords){const t=e.coords;for(let e=0;e<t.length;e+=s){const n=t[e],o=t[e+1];c=Math.min(c,n),u=Math.max(u,n),l=Math.min(l,o),i=Math.max(i,o);}}return t[0]=c,t[1]=l,t[2]=u,t[3]=i,t}function mt$1(t,e,n,o,r){const{coords:s,lengths:c}=e,l=n?o?p$19:m$F:o?m$F:d$G,u=h$u(n,o);if(!s.length)return t!==e&&(t.lengths.length=0,t.coords.length=0),t;if(!c.length)return l(t.coords,s,0,0,w$i(r,s[0]),N$a(r,s[1])),t!==e&&(t.lengths.length=0,t.coords.length=u),t;const[i,f]=r.scale;let a=0;for(let h=0;h<c.length;h++){const e=c[h];t.lengths[h]=e;let n=w$i(r,s[a]),o=N$a(r,s[a+1]);l(t.coords,s,a,a,n,o),a+=u;for(let r=1;r<e;r++,a+=u)n+=s[a]*i,o-=s[a+1]*f,l(t.coords,s,a,a,n,o);}return t!==e&&(t.lengths.length=c.length,t.coords.length=s.length),t}function yt$1(t,e,n,o,r,s){const c=h$u(n,o),l=I$9(n,o,r,s),u=e.coords;t.coords.length=0,t.lengths.length=0,t.lengths.push(...e.lengths);for(let i=0;i<u.length;i+=c)l(t.coords,u,t.coords.length,i,u[i],u[i+1]);return t}function It(t,e,n,o){let r=0,s=t[o*e],c=t[o*(e+1)];for(let l=1;l<n;l++){const n=s+t[o*(e+l)],u=c+t[o*(e+l)+1],i=(n-s)*(u+c);s=n,c=u,r+=i;}return .5*r}function bt$1(t,e){const{coords:n,lengths:o}=t;let r=0,s=0;for(let c=0;c<o.length;c++){s+=It(n,r,o[c],e),r+=c;}return Math.abs(s)}function wt$1(t,e){if(t$1O(t))return null;const o=t.clone(),r=t.coords,s=t.lengths;let c=0;for(let n=0;n<s.length;n++){const t=s[n];let l=r[e*c],u=r[e*c+1];for(let n=1;n<t;n++){const t=l+r[e*(c+n)],s=u+r[e*(c+n)+1];o.coords[e*(c+n)]=t,o.coords[e*(c+n)+1]=s,l=t,u=s;}c+=t;}return o}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$13(e,t){return t}function n$18(e,t,r,s){switch(r){case 0:return d$F(e,t+s,0);case 1:return "lowerLeft"===e.originPosition?d$F(e,t+s,1):l$T(e,t+s,1)}}function a$16(e,t,r,s){return 2===r?d$F(e,t,2):n$18(e,t,r,s)}function h$t(e,t,r,s){return 2===r?d$F(e,t,3):n$18(e,t,r,s)}function u$G(e,t,r,s){return 3===r?d$F(e,t,3):a$16(e,t,r,s)}function d$F({translate:e,scale:t},r,s){return e[s]+r*t[s]}function l$T({translate:e,scale:t},r,s){return e[s]-r*t[s]}class c$15{constructor(e){this.options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=i$13,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){};}createFeatureResult(){return {fields:[],features:[]}}finishFeatureResult(e){if(this.options.applyTransform&&(e.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,!e.hasZ)return;const r=t$E(e.geometryType,this.options.sourceSpatialReference,e.spatialReference);if(!t$1O(r))for(const t of e.features)r(t.geometry);}createSpatialReference(){return {}}addField(e,t){e.fields.push(t);const r=e.fields.map((e=>e.name));this.AttributesConstructor=function(){for(const e of r)this[e]=null;};}addFeature(e,t){e.features.push(t);}prepareFeatures(t){switch(this.transform=t.transform,this.options.applyTransform&&t.transform&&(this.applyTransform=this.deriveApplyTransform(t)),this.vertexDimension=2,t.hasZ&&this.vertexDimension++,t.hasM&&this.vertexDimension++,t.geometryType){case"esriGeometryPoint":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case"esriGeometryPolygon":this.addCoordinate=(e,t,r)=>this.addCoordinatePolygon(e,t,r),this.createGeometry=e=>this.createPolygonGeometry(e);break;case"esriGeometryPolyline":this.addCoordinate=(e,t,r)=>this.addCoordinatePolyline(e,t,r),this.createGeometry=e=>this.createPolylineGeometry(e);break;case"esriGeometryMultipoint":this.addCoordinate=(e,t,r)=>this.addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this.createMultipointGeometry(e);break;}}createFeature(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this.AttributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t);}addQueryGeometry(e,t){const{queryGeometry:o,queryGeometryType:i}=t,n=mt$1(o.clone(),o,!1,!1,this.transform),a=nt(n,i,!1,!1);e.queryGeometryType=i,e.queryGeometry={...a};}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){switch(t=this.applyTransform(this.transform,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:"z"in e?e.z=t:e.m=t;break;case 3:e.m=t;}}transformPathLikeValue(e,t){let r=0;return t<=1&&(r=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,r)}addCoordinatePolyline(e,t,r){this.dehydratedAddPointsCoordinate(e.paths,t,r);}addCoordinatePolygon(e,t,r){this.dehydratedAddPointsCoordinate(e.rings,t,r);}addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const s=this.transformPathLikeValue(t,r);e.points[e.points.length-1].push(s);}createPolygonGeometry(e){return {rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}createPolylineGeometry(e){return {paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}createMultipointGeometry(e){return {points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}dehydratedAddPointsCoordinate(e,t,r){0===r&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);const s=this.transformPathLikeValue(t,r),o=e[e.length-1];0===r&&(this.coordinateBufferPtr=0,this.coordinateBuffer=new Array(this.vertexDimension),o.push(this.coordinateBuffer)),this.coordinateBuffer[this.coordinateBufferPtr++]=s;}deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?u$G:t?a$16:r?h$t:n$18}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function n$17(o,s,n){const p=e$G(o),i={...n},u=b$h.from(s),m=!u.quantizationParameters,{data:f}=await c$16(p,u,new c$15({sourceSpatialReference:u.sourceSpatialReference,applyTransform:m}),i);return f}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function o$A(e,t){const o=e.toJSON();return o.objectIds&&(o.objectIds=o.objectIds.join(",")),o.orderByFields&&(o.orderByFields=o.orderByFields.join(",")),!o.outFields||null!=t&&t.returnCountOnly?delete o.outFields:-1!==o.outFields.indexOf("*")?o.outFields="*":o.outFields=o.outFields.join(","),o.outSpatialReference&&(o.outSR=o.outSR.wkid||JSON.stringify(o.outSR.toJSON()),delete o.outSpatialReference),o.dynamicDataSource&&(o.layer=JSON.stringify({source:o.dynamicDataSource}),delete o.dynamicDataSource),o}async function r$A(e,t,o){const r=await s$_(e,t,o),n=r.data,a=n.geometryType,d=n.spatialReference,i={};for(const s of n.relatedRecordGroups){const e={fields:void 0,objectIdFieldName:void 0,geometryType:a,spatialReference:d,hasZ:!!n.hasZ,hasM:!!n.hasM,features:s.relatedRecords};if(null!=s.objectId)i[s.objectId]=e;else for(const t in s)s.hasOwnProperty(t)&&"relatedRecords"!==t&&(i[s[t]]=e);}return {...r,data:i}}async function n$16(e,t,o){const r=await s$_(e,t,o,{returnCountOnly:!0}),n=r.data,a={};for(const s of n.relatedRecordGroups)null!=s.objectId&&(a[s.objectId]=s.count);return {...r,data:a}}async function s$_(r,n,s={},a){const d=t$H({...r.query,f:"json",...a,...o$A(n,a)});return E$t(r.path+"/queryRelatedRecords",{...s,query:{...s.query,...d}})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function n$15(e,n,u){n=l$X.from(n);const a=e$G(e);return r$A(a,n,u).then((t=>{const r=t.data,e={};return Object.keys(r).forEach((t=>e[t]=g$r.fromJSON(r[t]))),e}))}async function u$F(r,o,n){o=l$X.from(o);const u=e$G(r);return n$16(u,o,{...n}).then((t=>t.data))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u$E="Layer does not support extent calculation.";function y$u(t,r){var n,i;const s=t.geometry,l=t.toJSON(),u=l;if(r$1G(s)&&(u.geometry=JSON.stringify(s),u.geometryType=v$H(s),u.inSR=s.spatialReference.wkid||JSON.stringify(s.spatialReference)),null!=(n=l.topFilter)&&n.groupByFields&&(u.topFilter.groupByFields=l.topFilter.groupByFields.join(",")),null!=(i=l.topFilter)&&i.orderByFields&&(u.topFilter.orderByFields=l.topFilter.orderByFields.join(",")),l.topFilter&&(u.topFilter=JSON.stringify(u.topFilter)),l.objectIds&&(u.objectIds=l.objectIds.join(",")),l.orderByFields&&(u.orderByFields=l.orderByFields.join(",")),l.outFields&&!(null!=r&&r.returnCountOnly||null!=r&&r.returnExtentOnly||null!=r&&r.returnIdsOnly)?-1!==l.outFields.indexOf("*")?u.outFields="*":u.outFields=l.outFields.join(","):delete u.outFields,l.outSR?u.outSR=l.outSR.wkid||JSON.stringify(l.outSR):s&&l.returnGeometry&&(u.outSR=u.inSR),l.returnGeometry&&delete l.returnGeometry,l.timeExtent){const t=l.timeExtent,{start:e,end:r}=t;null==e&&null==r||(u.time=e===r?e:`${null==e?"null":e},${null==r?"null":r}`),delete l.timeExtent;}return u}async function m$E(t,e,r,n){const o=await c$14(t,e,"json",n);return r$B(e,r,o.data),o}async function d$E(t,r,n){return r$1G(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):c$14(t,r,"json",n,{returnIdsOnly:!0})}async function p$18(t,r,n){return r$1G(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):c$14(t,r,"json",n,{returnExtentOnly:!0,returnCountOnly:!0}).then((t=>{const e=t.data;if(e.hasOwnProperty("extent"))return t;if(e.features)throw new Error(u$E);if(e.hasOwnProperty("count"))throw new Error(u$E);return t}))}function a$15(t,r,n){return r$1G(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):c$14(t,r,"json",n,{returnIdsOnly:!0,returnCountOnly:!0})}function c$14(o,s,u,m={},d={}){const p="string"==typeof o?U$o(o):o,a=s.geometry?[s.geometry]:[];return m.responseType="pbf"===u?"array-buffer":"json",v$g(a,null,m).then((n=>{const o=n&&n[0];r$1G(o)&&((s=s.clone()).geometry=o);const i=t$H({...p.query,f:u,...d,...y$u(s,d)});return E$t(D$s(p.path,"queryTopFeatures"),{...m,query:{...i,...m.query}})}))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$D;let p$17=e$D=class extends a$2A{constructor(o){super(o),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0;}clone(){return new e$D({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};e$1_([d$1S({type:[String],json:{write:!0}})],p$17.prototype,"groupByFields",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],p$17.prototype,"topCount",void 0),e$1_([d$1S({type:[String],json:{write:!0}})],p$17.prototype,"orderByFields",void 0),p$17=e$D=e$1_([i$2w("esri.rest.support.TopFilter")],p$17);const i$12=p$17;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var y$t;const m$D=new o$1K({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),h$s=new o$1K({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let j$b=y$t=class extends a$2A{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1";}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10;}clone(){return new y$t(l$2r({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};e$1_([d$1S({type:Boolean,json:{write:!0}})],j$b.prototype,"cacheHint",void 0),e$1_([d$1S({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],j$b.prototype,"distance",void 0),e$1_([d$1S({types:i$20,json:{read:d$1t,write:!0}})],j$b.prototype,"geometry",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],j$b.prototype,"geometryPrecision",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],j$b.prototype,"maxAllowableOffset",void 0),e$1_([d$1S({type:Number,json:{read:{source:"resultRecordCount"}}})],j$b.prototype,"num",void 0),e$1_([d$1S({json:{write:!0}})],j$b.prototype,"objectIds",void 0),e$1_([d$1S({type:[String],json:{write:!0}})],j$b.prototype,"orderByFields",void 0),e$1_([d$1S({type:[String],json:{write:!0}})],j$b.prototype,"outFields",void 0),e$1_([d$1S({type:k$s,json:{read:{source:"outSR"},write:{target:"outSR"}}})],j$b.prototype,"outSpatialReference",void 0),e$1_([d$1S({type:String,json:{write:!0}})],j$b.prototype,"resultType",void 0),e$1_([d$1S({json:{write:!0}})],j$b.prototype,"returnGeometry",void 0),e$1_([d$1S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],j$b.prototype,"returnM",void 0),e$1_([d$1S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],j$b.prototype,"returnZ",void 0),e$1_([d$1S({type:Number,json:{read:{source:"resultOffset"}}})],j$b.prototype,"start",void 0),e$1_([r$1c("start"),r$1c("num")],j$b.prototype,"writeStart",null),e$1_([d$1S({type:String,json:{read:{source:"spatialRel",reader:m$D.read},write:{target:"spatialRel",writer:m$D.write}}})],j$b.prototype,"spatialRelationship",void 0),e$1_([d$1S({type:y$$,json:{write:!0}})],j$b.prototype,"timeExtent",void 0),e$1_([d$1S({type:i$12,json:{write:!0}})],j$b.prototype,"topFilter",void 0),e$1_([d$1S({type:String,json:{read:h$s.read,write:{writer:h$s.write,overridePolicy(e){return {enabled:e&&this.distance>0}}}}})],j$b.prototype,"units",void 0),e$1_([d$1S({type:String,json:{write:!0}})],j$b.prototype,"where",void 0),j$b=y$t=e$1_([i$2w("esri.rest.support.TopFeaturesQuery")],j$b),j$b.from=b$Z(j$b);const S$e=j$b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function s$Z(s,p,u,a){const m=e$G(s),i={...a},{data:f}=await m$E(m,S$e.from(p),u,i);return g$r.fromJSON(f)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function s$Y(s,e,p){const a=e$G(s);return (await d$E(a,S$e.from(e),{...p})).data.objectIds}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function m$C(m,s,n){const p=e$G(m),a=await p$18(p,S$e.from(s),{...n});return {count:a.data.count,extent:M$r.fromJSON(a.data.extent)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function s$X(s,e,p){const u=e$G(s);return (await a$15(u,S$e.from(e),{...p})).data.count}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$11=class extends p$33{constructor(...r){super(...r),this.requestOptions=null,this.url=null;}normalizeCtorArgs(r,s){return "string"!=typeof r?r:{url:r,...s}}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(r){return r?U$o(r):null}_encode(r,s,t){const o={};for(const e in r){if("declaredClass"===e)continue;const i=r[e];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){o[e]=[];for(let r=0;r<i.length;r++)o[e][r]=this._encode(i[r]);}else if("object"==typeof i)if(i.toJSON){const r=i.toJSON(t&&t[e]);o[e]=s?r:JSON.stringify(r);}else o[e]=s?i:JSON.stringify(i);else o[e]=i;}return o}};e$1_([d$1S({readOnly:!0})],i$11.prototype,"parsedUrl",null),e$1_([d$1S()],i$11.prototype,"requestOptions",void 0),e$1_([d$1S({type:String})],i$11.prototype,"url",void 0),i$11=e$1_([i$2w("esri.tasks.Task")],i$11);const l$S=i$11;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let g$p=class extends l$S{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.format="json",this.gdbVersion=null,this.infoFor3D=null,this.sourceSpatialReference=null;}execute(e,t){return this.executeJSON(e,t).then((r=>this.featureSetFromJSON(e,r,t)))}async executeJSON(e,t){var o;const s={...this.requestOptions,...t},i=this._normalizeQuery(e),u=null!=(null==(o=e.outStatistics)?void 0:o[0]),n=s$2l("featurelayer-pbf-statistics"),a=!u||n;let c;if("pbf"===this.format&&a)try{c=await n$17(this.url,i,s);}catch(p){if("query:parsing-pbf"!==p.name)throw p;this.format="json";}return "json"!==this.format&&a||(c=await a$18(this.url,i,s)),this._normalizeFields(c.fields),c}async featureSetFromJSON(e,t,r){if(!(this._queryIs3DObjectFormat(e)&&r$1G(this.infoFor3D)&&t.features&&t.features.length))return g$r.fromJSON(t);const{meshFeatureSetFromJSON:s}=await P$s(import('./meshFeatureSet.js').then(function (n) { return n.a; }),r);return s(e,this.infoFor3D,t)}executeForCount(e,t){const r={...this.requestOptions,...t},o=this._normalizeQuery(e);return n$19(this.url,o,r)}executeForExtent(e,t){const r={...this.requestOptions,...t},o=this._normalizeQuery(e);return m$G(this.url,o,r)}executeForIds(e,t){const r={...this.requestOptions,...t},o=this._normalizeQuery(e);return s$10(this.url,o,r)}executeRelationshipQuery(e,t){e=l$X.from(e);const r={...this.requestOptions,...t};return (this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),n$15(this.url,e,r)}executeRelationshipQueryForCount(e,t){e=l$X.from(e);const r={...this.requestOptions,...t};return (this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),u$F(this.url,e,r)}executeAttachmentQuery(e,t){const r={...this.requestOptions,...t};return a$1d(this.url,e,r)}executeTopFeaturesQuery(e,t){const r={...this.requestOptions,...t};return s$Z(this.parsedUrl,e,this.sourceSpatialReference,r)}executeForTopIds(e,t){const r={...this.requestOptions,...t};return s$Y(this.parsedUrl,e,r)}executeForTopExtents(e,t){const r={...this.requestOptions,...t};return m$C(this.parsedUrl,e,r)}executeForTopCount(e,t){const r={...this.requestOptions,...t};return s$X(this.parsedUrl,e,r)}_normalizeQuery(e){let r=b$h.from(e);if(r.sourceSpatialReference=r.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(r=r===e?r.clone():r,r.gdbVersion=e.gdbVersion||this.gdbVersion,r.dynamicDataSource=e.dynamicDataSource?K$5.from(e.dynamicDataSource):this.dynamicDataSource),r$1G(this.infoFor3D)&&this._queryIs3DObjectFormat(e)){r=r===e?r.clone():r,r.formatOf3DObjects=null;for(const e of this.infoFor3D.queryFormats){if("3D_glb"===e.id){r.formatOf3DObjects=e.id;break}"3D_gltf"!==e.id||r.formatOf3DObjects||(r.formatOf3DObjects=e.id);}if(!r.formatOf3DObjects)throw new s$29("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(t$1O(r.outFields)||!r.outFields.includes("*")){r=r===e?r.clone():r,t$1O(r.outFields)&&(r.outFields=[]);const{originX:t,originY:o,originZ:i,translationX:u,translationY:n,translationZ:a,scaleX:c,scaleY:p,scaleZ:m,rotationX:f,rotationY:l,rotationZ:h,rotationDeg:d}=this.infoFor3D.transformFieldRoles;r.outFields.push(t,o,i,u,n,a,c,p,m,f,l,h,d);}}return r}_normalizeFields(e){if(r$1G(this.fieldsIndex)&&r$1G(e))for(const t of e){const e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON());}}_queryIs3DObjectFormat(e){return r$1G(this.infoFor3D)&&e.returnGeometry&&"xyFootprint"!==e.multipatchOption&&!e.outStatistics}};e$1_([d$1S({type:K$5})],g$p.prototype,"dynamicDataSource",void 0),e$1_([d$1S()],g$p.prototype,"fieldsIndex",void 0),e$1_([d$1S()],g$p.prototype,"format",void 0),e$1_([d$1S()],g$p.prototype,"gdbVersion",void 0),e$1_([d$1S()],g$p.prototype,"infoFor3D",void 0),e$1_([d$1S()],g$p.prototype,"sourceSpatialReference",void 0),g$p=e$1_([i$2w("esri.tasks.QueryTask")],g$p);const Q$3=g$p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$13="esri.widgets.Feature.support.relatedFeatureUtils",d$D=s$2h.getLogger(c$13),f$q=new Map;function p$16(e){if(!ae$2(e))return null;const[t,r]=e.split("/").slice(1);return {layerId:t,fieldName:r}}function m$B(e,t){if(!t.relationships)return null;let r=null;const{relationships:s}=t;return s.some((t=>t.id===parseInt(e,10)&&(r=t,!0))),r}function y$s({originRelationship:e,relationships:t,layerId:r}){let s;return t&&t.some((t=>(`${t.relatedTableId}`===r&&t.id===e.id&&(s=t),!!s))),s}function F$5(e,t){const r=t.toLowerCase();for(const s in e)if(s.toLowerCase()===r)return e[s];return null}function h$r(e,t){const r=m$B(e,t);if(!r)return;const s=`${t.url}/${r.relatedTableId}`;return {url:s,queryTask:new Q$3({url:s,sourceSpatialReference:t.spatialReference}),relation:r,relatedFields:[],outStatistics:[]}}function I$8(e,t){if(!t)return;if(!e)return;const{features:r,statsFeatures:s}=e,i=r&&r.value;t.relatedFeatures=i?i.features:[];const o=s&&s.value;t.relatedStatsFeatures=o?o.features:[];}function w$h(e,t,r,s){const i=new l$X;return i.outFields=["*"],i.relationshipId="number"==typeof t.id?t.id:parseInt(t.id,10),i.objectIds=[e.attributes[r.objectIdField]],r.queryRelatedFeatures(i,s)}function b$d(e,t,r){let s=0;const i=[];for(;s<t.length;)i.push(`${e} IN (${t.slice(s,r+s)})`),s+=r;return i.join(" OR ")}async function j$a(e,t,r,n){const a=r.layerId.toString(),{layerInfo:l,queryTask:u,relation:c,relatedFields:d,outStatistics:f}=t,p=y$s({originRelationship:c,relationships:l.relationships,layerId:a});if(p.relationshipTableId&&p.keyFieldInRelationshipTable){const t=(await w$h(e,p,r,n))[e.attributes[r.objectIdField]];if(!t)return null;const i=t.features.map((e=>e.attributes[l.objectIdField]));if((null==f?void 0:f.length)>0&&l.supportsStatistics){const e=new b$h;e.where=b$d(l.objectIdField,i,1e3),e.outFields=d,e.outStatistics=f;const r={features:Promise.resolve(t),statsFeatures:u.execute(e)};return T$o(r)}}const m=null==p?void 0:p.keyField;if(m){const r=B$f(q$6(l.fields,m)),a=F$5(e.attributes,c.keyField),d=r?`${m}=${a}`:`${m}='${a}'`,f=u.execute(new b$h({where:d,outFields:t.relatedFields}),n),p=t.outStatistics&&t.outStatistics.length>0&&l.supportsStatistics?u.execute(new b$h({where:d,outFields:t.relatedFields,outStatistics:t.outStatistics}),n):null,y={features:f};return p&&(y.statsFeatures=p),T$o(y)}return null}function g$o(t,r){return E$t(t,{query:{f:"json"},signal:r&&r.signal})}function S$d({relatedInfos:e,layer:r},i){const o={};return e.forEach(((e,s)=>{const{relation:n}=e;if(!n){const e=new s$29("relation-required","A relation is required on a layer to retrieve related records.");throw d$D.error(e),e}const{relatedTableId:a}=n;if("number"!=typeof a){const e=new s$29("A related table ID is required on a layer to retrieve related records.");throw d$D.error(e),e}const l=`${r.url}/${a}`,u=f$q.get(l),c=u||g$o(l,i);u||f$q.set(l,c),o[s]=c;})),T$o(o)}function T$7({graphic:e,relatedInfos:t,layer:r},i){const o={};return t.forEach(((t,s)=>{t.layerInfo&&(o[s]=j$a(e,t,r,i));})),T$o(o)}function $$5({relatedInfo:e,fieldName:t,fieldInfo:r}){if(e.relatedFields.push(t),r.statisticType){const s=new m$J({statisticType:r.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(s);}}function q$6(e,t){if(null!=e){t=t.toLowerCase();for(const r of e)if(r&&r.name.toLowerCase()===t)return r}return null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let y$r=class extends p$33{constructor(t){super(t),this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null;}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(t){this._setContentElementMedia(t);}next(){this._pageContentElementMedia(1);}previous(){this._pageContentElementMedia(-1);}_setContentElementMedia(t){const{formattedMediaInfoCount:e}=this,o=(t+e)%e;this.activeMediaInfoIndex=o;}_pageContentElementMedia(t){const{activeMediaInfoIndex:e}=this,o=e+t;this._setContentElementMedia(o);}_formatMediaInfos(){const{attributes:t,mediaInfos:e,formattedAttributes:o,expressionAttributes:i,fieldInfoMap:r,layer:a}=this;return null==e?void 0:e.map((e=>{if(!e)return null;if(e.title=$$7({attributes:t,fieldInfoMap:r,globalAttributes:o,expressionAttributes:i,layer:a,text:e.title}),e.caption=$$7({attributes:t,fieldInfoMap:r,globalAttributes:o,expressionAttributes:i,layer:a,text:e.caption}),e.altText=$$7({attributes:t,fieldInfoMap:r,globalAttributes:o,expressionAttributes:i,layer:a,text:e.altText}),"image"===e.type){const{value:t}=e;return this._setImageValue({value:t,formattedAttributes:o,layer:a}),e.value.sourceURL?e:void 0}if("pie-chart"===e.type||"line-chart"===e.type||"column-chart"===e.type||"bar-chart"===e.type){const{value:i}=e;return this._setChartValue({value:i,chartType:e.type,attributes:t,formattedAttributes:o,layer:a}),e}return null})).filter(Boolean)}_setImageValue(t){const{fieldInfoMap:e}=this,{value:o,formattedAttributes:i,layer:r}=t,{linkURL:a,sourceURL:s}=o;if(s){const t=k$9(s,r);o.sourceURL=A$8({formattedAttributes:i,template:t,fieldInfoMap:e});}if(a){const t=k$9(a,r);o.linkURL=A$8({formattedAttributes:i,template:t,fieldInfoMap:e});}}_setChartValue(t){const{value:e,attributes:o,formattedAttributes:i,chartType:r,layer:a}=t,{popupTemplate:s,relatedInfos:l}=this,{fields:n,normalizeField:f}=e;e.fields=L$c(n,a),f&&(e.normalizeField=R$b(f,a));if(!n.some((t=>!!(null!=i[t]||ae$2(t)&&l.size))))return;const m=null==s?void 0:s.fieldInfos;n.forEach((t=>{if(ae$2(t))return void(e.series=[...e.series,...this._getRelatedChartInfos({fieldInfos:m,fieldName:t,formattedAttributes:i,chartType:r,value:e})]);const a=this._getChartOption({value:e,attributes:o,chartType:r,formattedAttributes:i,fieldName:t,fieldInfos:m});e.series.push(a);}));}_getRelatedChartInfos(t){var e;const{fieldInfos:o,fieldName:i,formattedAttributes:r,chartType:a,value:s}=t,l=[],n=p$16(i),{layerId:d,fieldName:p}=n,u=null==(e=this.relatedInfos)?void 0:e.get(d.toString());if(!u)return l;const{relatedFeatures:f,relation:m}=u;if(!m||!f)return l;const{cardinality:c}=m;f.forEach((t=>{const{attributes:e}=t;e&&Object.keys(e).forEach((t=>{t===p&&l.push(this._getChartOption({value:s,attributes:e,formattedAttributes:r,fieldName:i,chartType:a,relatedFieldName:t,fieldInfos:o}));}));}));return "one-to-many"===c||"many-to-many"===c?l:[l[0]]}_getTooltip({label:t,value:e,chartType:o}){return "pie-chart"===o?t:`${t}: ${e}`}_getChartOption(t){var e;const{value:o,attributes:i,formattedAttributes:s,fieldName:l,relatedFieldName:n,fieldInfos:d,chartType:y}=t,{layer:I}=this,{normalizeField:v,tooltipField:b}=o,M=v?ae$2(v)?i[p$16(v).fieldName]:i[v]:null,g=n&&void 0!==i[n]?i[n]:void 0!==i[l]?i[l]:s[l],A=void 0===g?null:g&&M?g/M:g,_=new c$1T({value:A});if(ae$2(l)){const t=p$16(l),e=p$16(b),o=e?e.fieldName:null,r=Z$4(A,{fieldInfos:d,fieldName:n,layer:I,preventPlacesFormatting:!!M}),a=t?t.label||t.fieldName:n,s=o&&void 0!==i[o]?i[o]:a;return _.tooltip=this._getTooltip({label:s,value:r,chartType:y}),_}const x=B$8(d,l),T=R$b(l,I),C=b&&void 0!==s[b]?s[b]:C$b(x||new c$1V({fieldName:T}),null==(e=this.popupTemplate)?void 0:e.expressionInfos),F=s[T];return _.tooltip=this._getTooltip({label:C,value:F,chartType:y}),_}};e$1_([d$1S()],y$r.prototype,"activeMediaInfoIndex",void 0),e$1_([d$1S({readOnly:!0})],y$r.prototype,"activeMediaInfo",null),e$1_([d$1S()],y$r.prototype,"attributes",void 0),e$1_([d$1S()],y$r.prototype,"description",void 0),e$1_([d$1S()],y$r.prototype,"fieldInfoMap",void 0),e$1_([d$1S()],y$r.prototype,"formattedAttributes",void 0),e$1_([d$1S()],y$r.prototype,"expressionAttributes",void 0),e$1_([d$1S({readOnly:!0})],y$r.prototype,"formattedMediaInfos",null),e$1_([d$1S()],y$r.prototype,"layer",void 0),e$1_([d$1S({readOnly:!0})],y$r.prototype,"formattedMediaInfoCount",null),e$1_([d$1S()],y$r.prototype,"mediaInfos",void 0),e$1_([d$1S()],y$r.prototype,"popupTemplate",void 0),e$1_([d$1S()],y$r.prototype,"relatedInfos",void 0),e$1_([d$1S()],y$r.prototype,"title",void 0),y$r=e$1_([i$2w("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],y$r);const I$7=y$r;

var f$p=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],b$c=[].concat(f$p.slice(30,39),f$p.slice(28,30).reverse()),e$C=[{name:"default",colors:b$c},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$14="en-us",h$q=new Map([["ar",()=>import('./ar.js').then((t=>t.a))],["bs-ba",()=>import('./bs_BA.js').then((t=>t.b))],["ca-es",()=>import('./ca_ES.js').then((t=>t.c))],["cs-cz",()=>import('./cs_CZ.js').then((t=>t.c))],["da-dk",()=>import('./da_DK.js').then((t=>t.d))],["de-de",()=>import('./de_DE.js').then((t=>t.d))],["de-ch",()=>import('./de_CH.js').then((t=>t.d))],["el-gr",()=>import('./el_GR.js').then((t=>t.e))],["en-us",()=>import('./en_US.js').then((t=>t.e))],["en-ca",()=>import('./en_CA.js').then((t=>t.e))],["es-es",()=>import('./es_ES.js').then((t=>t.e))],["et-ee",()=>import('./et_EE.js').then((t=>t.e))],["fi-fi",()=>import('./fi_FI.js').then((t=>t.f))],["fr-fr",()=>import('./fr_FR.js').then((t=>t.f))],["he-il",()=>import('./he_IL.js').then((t=>t.h))],["hr-hr",()=>import('./hr_HR.js').then((t=>t.h))],["hu-hu",()=>import('./hu_HU.js').then((t=>t.h))],["id-id",()=>import('./id_ID.js').then((t=>t.i))],["it-it",()=>import('./it_IT.js').then((t=>t.i))],["ja-jp",()=>import('./ja_JP.js').then((t=>t.j))],["ko-kr",()=>import('./ko_KR.js').then((t=>t.k))],["lt-lt",()=>import('./lt_LT.js').then((t=>t.l))],["lv-lv",()=>import('./lv_LV.js').then((t=>t.l))],["nb-no",()=>import('./nb_NO.js').then((t=>t.n))],["nl-nl",()=>import('./nl_NL.js').then((t=>t.n))],["pl-pl",()=>import('./pl_PL.js').then((t=>t.p))],["pt-br",()=>import('./pt_BR.js').then((t=>t.p))],["pt-pt",()=>import('./pt_PT.js').then((t=>t.p))],["ro-ro",()=>import('./ro_RO.js').then((t=>t.r))],["ru-ru",()=>import('./ru_RU.js').then((t=>t.r))],["sk-sk",()=>import('./sk_SK.js').then((t=>t.s))],["sl-sl",()=>import('./sl_SL.js').then((t=>t.s))],["sr-rs",()=>import('./sr_RS.js').then((t=>t.s))],["sv-se",()=>import('./sv_SE.js').then((t=>t.s))],["th-th",()=>import('./th_TH.js').then((t=>t.t))],["tr-tr",()=>import('./tr_TR.js').then((t=>t.t))],["uk-ua",()=>import('./uk_UA.js').then((t=>t.u))],["vi-vn",()=>import('./vi_VN.js').then((t=>t.v))],["zh-cn",()=>import('./zh_Hans.js').then((t=>t.z))],["zh-hk",()=>import('./zh_Hant.js').then((t=>t.z))],["zh-tw",()=>import('./zh_Hant.js').then((t=>t.z))]]);function e$B(t){const s=t.split("-")[0].toLowerCase();let n=null;for(const e of h$q.keys())if(e.startsWith(s)){n=e;break}return n}function r$z(t){return t?h$q.has(t.toLowerCase())?t.toLowerCase():e$B(t)||n$14:n$14}let o$z,i$10;async function c$12(t=i$2v()){if(t=r$z(t),o$z&&t===i$10)return o$z;o$z=import('./index2.js').then((t=>t.i)),i$10=t;try{const[s,n]=await Promise.all([o$z,h$q.get(i$10)()]);i$10===t&&(s.am4core.options.defaultLocale=n.default),s.am4core.options.suppressWarnings=!0,s.am4core.options.autoDispose=!0;}catch{return o$z=null,i$10=null,null}return o$z}function u$D(s,n="default"){const h=e$C.find((t=>t.name===n));return h?h.colors.map((t=>s.color(t))):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const v$e={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},_$d=.05,I$6=.95,M$5=15;let w$g=class extends z$n{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new I$7,this.messages=null;}initialize(){this._featureElementInfo=new c$1k,this.own(i$2i(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],(()=>this._setupMediaRefreshTimer())),i$2i(this,["viewModel.description","viewModel.title"],(()=>this._setupFeatureElementInfo())));}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy();}render(){var e;return n$2o("div",{bind:this,class:v$e.base,onkeyup:this._handleMediaKeyup},null==(e=this._featureElementInfo)?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?n$2o("div",{key:"media-element-container",class:v$e.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel,{value:a,refreshInterval:o,altText:s,title:n,type:l}=e,{sourceURL:c,linkURL:m}=a,u=v$k(m)?"_blank":"_self",h="_blank"===u?"noreferrer":"",p=o?t:null,v=p?p.timestamp:0,_=p?p.sourceURL:c,I=n$2o("img",{alt:s||n,key:`media-${l}-${i}-${r}-${v}`,src:_}),M=m?n$2o("a",{title:n,href:m,rel:h,target:u},I):null;return M||I}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return n$2o("div",{key:`media-${e.type}-${t}-${i}`,bind:this,class:v$e.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?"image"===e.type?this.renderImageMediaInfo(e):-1!==e.type.indexOf("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?n$2o("div",{key:"media-title",class:v$e.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?n$2o("div",{key:"media-caption",class:v$e.mediaItemCaption,innerHTML:e.caption}):null;return n$2o("div",{key:"media-container",class:v$e.mediaItemContainer},n$2o("div",{key:"media-item-container",class:v$e.mediaItem},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t="previous"===e,i=t?this.messages.previous:this.messages.next,r=t?this.classes(v$e.mediaButton,v$e.mediaPrevious):this.classes(v$e.mediaButton,v$e.mediaNext),a=t?this.classes(v$e.mediaIcon,v$e.mediaPreviousIconLTR,v$e.iconLeftTriangleArrow):this.classes(v$e.mediaIcon,v$e.mediaNextIconLTR,v$e.iconRightTriangleArrow),o=t?this.classes(v$e.mediaIcon,v$e.mediaPreviousIconRTL,v$e.iconRightTriangleArrow):this.classes(v$e.mediaIcon,v$e.mediaNextIconRTL,v$e.iconLeftTriangleArrow),s=t?"media-previous":"media-next",n=t?this._previous:this._next;return n$2o("button",{type:"button",key:s,title:i,"aria-label":i,tabIndex:0,class:r,bind:this,onclick:n},n$2o("span",{"aria-hidden":"true",class:a}),n$2o("span",{"aria-hidden":"true",class:o}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t});}_next(){this.viewModel.next();}_previous(){this.viewModel.previous();}async _getChartDependencies(e){const t=await c$12(),{activeMediaInfo:i}=this.viewModel;this._renderChart({chartDiv:e,mediaInfo:i,chartsModule:t});}_handleMediaKeyup(e){const i=i$2r(e);"ArrowLeft"===i&&(e.stopPropagation(),this.viewModel.previous()),"ArrowRight"===i&&(e.stopPropagation(),this.viewModel.next());}_renderChart(e){const{chartsModule:t,chartDiv:i,mediaInfo:r}=e,{value:a,type:o}=r,{am4core:s}=t,n=u$D(s);function l(e){e instanceof s.ColorSet&&n&&(e.list=n);}E$r()&&s.useTheme(t.am4themes_dark),s.useTheme(t.am4themes_animated),s.useTheme(l);const d="pie-chart"===o?this._createPieChart(e):this._createXYChart(e);i.setAttribute("aria-label",r.altText||r.title),d.data=a.series.map((e=>({tooltip:e.tooltip,value:e.value}))).filter((e=>"pie-chart"!==o||e.value>0));}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7});}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:r,am4charts:a}=i,o=r.create(t,a.PieChart);o.rtl=d$1G(this.container);const s=o.series.push(new a.PieSeries);return s.labels.template.disabled=!0,s.ticks.template.disabled=!0,s.dataFields.value="value",s.dataFields.category="tooltip",this._customizeChartTooltip(s.tooltip,r),o}_getMinSeriesValue(e){let t=0;return e.forEach((e=>t=Math.min(e.value,t))),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:a}=r,{am4core:o,am4charts:s}=i,n=e.xAxes.push(new s.CategoryAxis);n.dataFields.category="tooltip",n.renderer.labels.template.disabled=!0,this._customizeChartTooltip(n.tooltip,o),n.tooltip.events.on("sizechanged",(()=>{n.tooltip.dy=-n.tooltip.contentHeight;}));const l=e.yAxes.push(new s.ValueAxis),d=l.renderer.labels.template;l.renderer.minLabelPosition=_$d,l.renderer.maxLabelPosition=I$6,l.min=this._getMinSeriesValue(a.series),this._customizeChartTooltip(l.tooltip,o),d.wrap=!0;const c=e.series.push(new s.ColumnSeries);c.dataFields.valueY="value",c.dataFields.categoryX="tooltip",e.cursor=new s.XYCursor,a.series.length>M$5&&(e.scrollbarX=new o.Scrollbar);}_createBarChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:a}=r,{am4core:o,am4charts:s}=i,n=e.yAxes.push(new s.CategoryAxis);n.dataFields.category="tooltip",n.renderer.inversed=!0,n.renderer.labels.template.disabled=!0,this._customizeChartTooltip(n.tooltip,o),n.tooltip.events.on("sizechanged",(()=>{n.tooltip.dx=n.tooltip.contentWidth;}));const l=e.xAxes.push(new s.ValueAxis),d=l.renderer.labels.template;l.renderer.minLabelPosition=_$d,l.renderer.maxLabelPosition=I$6,l.min=this._getMinSeriesValue(a.series),this._customizeChartTooltip(l.tooltip,o),d.wrap=!0;const c=e.series.push(new s.ColumnSeries);c.dataFields.valueX="value",c.dataFields.categoryY="tooltip",e.cursor=new s.XYCursor,a.series.length>M$5&&(e.scrollbarY=new o.Scrollbar);}_createLineChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:a}=r,{am4core:o,am4charts:s}=i,n=e.xAxes.push(new s.CategoryAxis);n.dataFields.category="tooltip",n.renderer.labels.template.disabled=!0,this._customizeChartTooltip(n.tooltip,o),n.tooltip.events.on("sizechanged",(()=>{n.tooltip.dy=-n.tooltip.contentHeight;}));const l=e.yAxes.push(new s.ValueAxis),d=l.renderer.labels.template;l.renderer.minLabelPosition=_$d,l.renderer.maxLabelPosition=I$6,l.min=this._getMinSeriesValue(a.series),this._customizeChartTooltip(l.tooltip,o),d.wrap=!0;const c=e.series.push(new s.LineSeries);c.dataFields.categoryX="tooltip",c.dataFields.valueY="value",e.cursor=new s.XYCursor,a.series.length>M$5&&(e.scrollbarX=new o.Scrollbar);}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:r}=e,{type:a}=r,{am4core:o,am4charts:s}=i,n=o.create(t,s.XYChart);return n.rtl=d$1G(this.container),"column-chart"===a&&this._createColumnChart(n,e),"bar-chart"===a&&this._createBarChart(n,e),"line-chart"===a&&this._createLineChart(n,e),n}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null);}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender();}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&"image"===e.type&&e.refreshInterval&&this._setRefreshTimeout(e);}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const r=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const a=setInterval((()=>{this._updateMediaInfoTimestamp(i.sourceURL);}),r);this._refreshTimer=a;}_getImageSource(e,t){const i=-1!==e.indexOf("?")?"&":"?",[r,a=""]=e.split("#");return `${r}${i}timestamp=${t}${a?"#":""}${a}`}};e$1_([o$1Q("viewModel.attributes")],w$g.prototype,"attributes",void 0),e$1_([o$1Q("viewModel.activeMediaInfoIndex")],w$g.prototype,"activeMediaInfoIndex",void 0),e$1_([o$1Q("viewModel.description")],w$g.prototype,"description",void 0),e$1_([o$1Q("viewModel.fieldInfoMap")],w$g.prototype,"fieldInfoMap",void 0),e$1_([o$1Q("viewModel.layer")],w$g.prototype,"layer",void 0),e$1_([o$1Q("viewModel.mediaInfos")],w$g.prototype,"mediaInfos",void 0),e$1_([o$1Q("viewModel.popupTemplate")],w$g.prototype,"popupTemplate",void 0),e$1_([o$1Q("viewModel.relatedInfos")],w$g.prototype,"relatedInfos",void 0),e$1_([o$1Q("viewModel.title")],w$g.prototype,"title",void 0),e$1_([d$1S({type:I$7})],w$g.prototype,"viewModel",void 0),e$1_([d$1S(),e$1w("esri/widgets/Feature/t9n/Feature")],w$g.prototype,"messages",void 0),w$g=e$1_([i$2w("esri.widgets.Feature.FeatureMedia")],w$g);const g$n=w$g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$A{constructor(e,a){this.preLayerQueryCallback=e,this.preRequestCallback=a,this.preLayerQueryCallback||(this.preLayerQueryCallback=e=>{}),this.preRequestCallback||(this.preLayerQueryCallback=e=>{});}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class r$y{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(r$1t),this._values=new Map;}clone(s){const i=new r$y,o=this._originStores[0];o&&o.forEach(((s,e)=>{i.set(e,l$2r(s),0);}));for(let r=2;r<r$1t;r++){const e=this._originStores[r];e&&e.forEach(((e,o)=>{s&&s.has(o)||i.set(o,l$2r(e),r);}));}return i}get(t,s){const e=void 0===s?this._values:this._originStores[s];return e?e.get(t):void 0}keys(t){const s=null==t?this._values:this._originStores[t];return s?[...s.keys()]:[]}set(t,e,r=6){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(t,e),!this._values.has(t)||q$q(this._propertyOriginMap.get(t))<=r){const s=this._values.get(t);return this._values.set(t,e),this._propertyOriginMap.set(t,r),s!==e}return !1}delete(t,s=6){const e=this._originStores[s];if(!e)return;const r=e.get(t);if(e.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===s){this._values.delete(t);for(let e=s-1;e>=0;e--){const s=this._originStores[e];if(s&&s.has(t)){this._values.set(t,s.get(t)),this._propertyOriginMap.set(t,e);break}}}return r}has(t,s){const e=void 0===s?this._values:this._originStores[s];return !!e&&e.has(t)}revert(t,s){for(;s>0&&!this.has(t,s);)--s;const e=this._originStores[s],r=e&&e.get(t),i=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,s),i!==r}originOf(t){return this._propertyOriginMap.get(t)||0}forEach(t){this._values.forEach(t);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$14=t=>{let a=class extends t{constructor(...r){super(...r);const t=q$q(e$1T(this)),o=t.metadatas,i=t.store,n=new r$y;t.store=n,i.keys().forEach((r=>{n.set(r,i.get(r),0);})),Object.keys(o).forEach((r=>{t.internalGet(r)&&n.set(r,t.internalGet(r),0);}));}read(r,t){u$1Q(this,r,t);}getAtOrigin(r,t){const s=u$C(this),e=t$1z(t);if("string"==typeof r)return s.get(r,e);const o={};return r.forEach((r=>{o[r]=s.get(r,e);})),o}originOf(r){return n$2C(this.originIdOf(r))}originIdOf(r){return u$C(this).originOf(r)}revert(r,t){const s=u$C(this),e=t$1z(t),o=e$1T(this);let n;n="string"==typeof r?"*"===r?s.keys(e):[r]:r,n.forEach((r=>{o.invalidate(r),s.revert(r,e),o.commit(r);}));}};return a=e$1_([i$2w("esri.core.ReadOnlyMultiOriginJSONSupport")],a),a};function u$C(r){return e$1T(r).store}let f$o=class extends(a$14(p$33)){};f$o=e$1_([i$2w("esri.core.ReadOnlyMultiOriginJSONSupport")],f$o);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$15=t=>{let s=class extends t{constructor(...r){super(...r);}clear(r,t="user"){return u$B(this).delete(r,t$1z(t))}write(r={},t){return p$2W(this,r=r||{},t),r}setAtOrigin(r,t,s){e$1T(this).setAtOrigin(r,t,t$1z(s));}removeOrigin(r){const t=u$B(this),s=t$1z(r),o=t.keys(s);for(const e of o)t.originOf(e)===s&&t.set(e,t.get(e,s),6);}updateOrigin(r,t){const s=u$B(this),i=t$1z(t),c=this.get(r);for(let e=i+1;e<r$1t;++e)s.delete(r,e);s.set(r,c,i);}toJSON(r){return this.write({},r)}};return s=e$1_([i$2w("esri.core.WriteableMultiOriginJSONSupport")],s),s.prototype.toJSON.isDefaultToJSON=!0,s};function u$B(r){return e$1T(r).store}const l$R=t=>{let e=class extends(p$15(a$14(t))){constructor(...r){super(...r);}};return e=e$1_([i$2w("esri.core.MultiOriginJSONSupport")],e),e};let O$b=class extends(l$R(p$33)){};O$b=e$1_([i$2w("esri.core.MultiOriginJSONSupport")],O$b);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function e$z(e,r){const{WhereClause:t}=await import('./WhereClause.js');return t.create(e,r)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$W;let p$14=s$W=class extends a$2A{constructor(r){super(r),this.expression=null,this.name=null,this.returnType="boolean",this.title=null;}clone(){return new s$W({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};e$1_([d$1S({type:String,json:{write:!0}})],p$14.prototype,"expression",void 0),e$1_([d$1S({type:String,json:{write:!0}})],p$14.prototype,"name",void 0),e$1_([d$1S({type:["boolean"],json:{write:!0}})],p$14.prototype,"returnType",void 0),e$1_([d$1S({type:String,json:{write:!0}})],p$14.prototype,"title",void 0),p$14=s$W=e$1_([i$2w("esri.form.ExpressionInfo")],p$14);const i$$=p$14;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$y=class extends a$2A{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null;}};e$1_([d$1S({type:String,json:{write:!0}})],e$y.prototype,"description",void 0),e$1_([d$1S({type:String,json:{write:!0}})],e$y.prototype,"label",void 0),e$1_([d$1S()],e$y.prototype,"type",void 0),e$1_([d$1S({type:String,json:{write:!0}})],e$y.prototype,"visibilityExpression",void 0),e$y=e$1_([i$2w("esri.form.elements.Element")],e$y);const i$_=e$y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$V;let p$13=s$V=class extends a$2A{constructor(r){super(r),this.type=null;}clone(){return new s$V({type:this.type})}};e$1_([d$1S({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],p$13.prototype,"type",void 0),p$13=s$V=e$1_([i$2w("esri.form.elements.inputs.AttachmentInput")],p$13);const c$11=p$13;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$Z;let p$12=i$Z=class extends i$_{constructor(t){super(t),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment";}clone(){return new i$Z({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};e$1_([d$1S({type:String,json:{write:!0}})],p$12.prototype,"attachmentKeyword",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],p$12.prototype,"editable",void 0),e$1_([d$1S({type:c$11,json:{read:{source:"inputType"},write:{target:"inputType"}}})],p$12.prototype,"input",void 0),e$1_([d$1S({type:["attachment"],json:{read:!1,write:!0}})],p$12.prototype,"type",void 0),p$12=i$Z=e$1_([i$2w("esri.form.elements.AttachmentElement")],p$12);const n$13=p$12;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$x=class extends a$2A{constructor(r){super(r),this.type=null;}};e$1_([d$1S()],e$x.prototype,"type",void 0),e$x=e$1_([i$2w("esri.form.elements.inputs.Input")],e$x);const p$11=e$x;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$w=class extends p$11{constructor(r){super(r),this.maxLength=null,this.minLength=0;}};e$1_([d$1S({type:Number,json:{write:!0}})],e$w.prototype,"maxLength",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],e$w.prototype,"minLength",void 0),e$w=e$1_([i$2w("esri.form.elements.inputs.TextInput")],e$w);const p$10=e$w;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var o$y;let c$10=o$y=class extends p$10{constructor(r){super(r),this.type="barcode-scanner";}clone(){return new o$y({maxLength:this.maxLength,minLength:this.minLength})}};e$1_([d$1S({type:["barcode-scanner"],json:{read:!1,write:!0}})],c$10.prototype,"type",void 0),c$10=o$y=e$1_([i$2w("esri.form.elements.inputs.BarcodeScannerInput")],c$10);const p$$=c$10;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$U;let p$_=s$U=class extends p$11{constructor(o){super(o),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box";}clone(){return new s$U({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};e$1_([d$1S({type:String,json:{write:!0}})],p$_.prototype,"noValueOptionLabel",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],p$_.prototype,"showNoValueOption",void 0),e$1_([d$1S({type:["combo-box"],json:{read:!1,write:!0}})],p$_.prototype,"type",void 0),p$_=s$U=e$1_([i$2w("esri.form.elements.inputs.ComboBoxInput")],p$_);const i$Y=p$_;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$T;function n$12(e){return null!=e?new Date(e):null}function a$13(e){return e?e.getTime():null}let m$A=s$T=class extends p$11{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker";}readMax(e,r){return n$12(r.max)}writeMax(e,r){r.max=a$13(e);}readMin(e,r){return n$12(r.min)}writeMin(e,r){r.min=a$13(e);}clone(){return new s$T({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};e$1_([d$1S({type:Boolean,json:{write:!0}})],m$A.prototype,"includeTime",void 0),e$1_([d$1S({type:Date,json:{type:Number,write:!0}})],m$A.prototype,"max",void 0),e$1_([o$1j("max")],m$A.prototype,"readMax",null),e$1_([r$1c("max")],m$A.prototype,"writeMax",null),e$1_([d$1S({type:Date,json:{type:Number,write:!0}})],m$A.prototype,"min",void 0),e$1_([o$1j("min")],m$A.prototype,"readMin",null),e$1_([r$1c("min")],m$A.prototype,"writeMin",null),e$1_([d$1S({type:["datetime-picker"],json:{read:!1,write:!0}})],m$A.prototype,"type",void 0),m$A=s$T=e$1_([i$2w("esri.form.elements.inputs.DateTimePickerInput")],m$A);const c$$=m$A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$S;let p$Z=s$S=class extends p$11{constructor(o){super(o),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons";}clone(){return new s$S({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};e$1_([d$1S({type:String,json:{write:!0}})],p$Z.prototype,"noValueOptionLabel",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],p$Z.prototype,"showNoValueOption",void 0),e$1_([d$1S({type:["radio-buttons"],json:{read:!1,write:!0}})],p$Z.prototype,"type",void 0),p$Z=s$S=e$1_([i$2w("esri.form.elements.inputs.RadioButtonsInput")],p$Z);const i$X=p$Z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$R;let p$Y=s$R=class extends p$11{constructor(o){super(o),this.offValue=null,this.onValue=null,this.type="switch";}clone(){return new s$R({offValue:this.offValue,onValue:this.onValue})}};e$1_([d$1S({type:[String,Number],json:{write:!0}})],p$Y.prototype,"offValue",void 0),e$1_([d$1S({type:[String,Number],json:{write:!0}})],p$Y.prototype,"onValue",void 0),e$1_([d$1S({type:["switch"],json:{read:!1,write:!0}})],p$Y.prototype,"type",void 0),p$Y=s$R=e$1_([i$2w("esri.form.elements.inputs.SwitchInput")],p$Y);const i$W=p$Y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var o$x;let p$X=o$x=class extends p$10{constructor(r){super(r),this.type="text-area";}clone(){return new o$x({maxLength:this.maxLength,minLength:this.minLength})}};e$1_([d$1S({type:["text-area"],json:{read:!1,write:!0}})],p$X.prototype,"type",void 0),p$X=o$x=e$1_([i$2w("esri.form.elements.inputs.TextAreaInput")],p$X);const a$12=p$X;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$Q;let p$W=s$Q=class extends p$10{constructor(t){super(t),this.type="text-box";}clone(){return new s$Q({maxLength:this.maxLength,minLength:this.minLength})}};e$1_([d$1S({type:["text-box"],json:{read:!1,write:!0}})],p$W.prototype,"type",void 0),p$W=s$Q=e$1_([i$2w("esri.form.elements.inputs.TextBoxInput")],p$W);const c$_=p$W;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$z={base:p$11,key:"type",typeMap:{"barcode-scanner":p$$,"combo-box":i$Y,"datetime-picker":c$$,"radio-buttons":i$X,switch:i$W,"text-area":a$12,"text-box":c$_}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$11;let l$Q=n$11=class extends i$_{constructor(e){super(e),this.domain=null,this.editable=!0,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field";}clone(){return new n$11({description:this.description,domain:this.domain,editable:this.editable,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,visibilityExpression:this.visibilityExpression})}};e$1_([d$1S({types:n$1h,json:{read:{reader:t$I},write:!0}})],l$Q.prototype,"domain",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],l$Q.prototype,"editable",void 0),e$1_([d$1S({type:String,json:{write:!0}})],l$Q.prototype,"fieldName",void 0),e$1_([d$1S({type:String,json:{write:!0}})],l$Q.prototype,"hint",void 0),e$1_([d$1S({types:m$z,json:{read:{source:"inputType"},write:{target:"inputType"}}})],l$Q.prototype,"input",void 0),e$1_([d$1S({type:String,json:{write:!0}})],l$Q.prototype,"requiredExpression",void 0),e$1_([d$1S({type:String,json:{read:!1,write:!0}})],l$Q.prototype,"type",void 0),l$Q=n$11=e$1_([i$2w("esri.form.elements.FieldElement")],l$Q);const a$11=l$Q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$V;let l$P=p$V=class extends i$_{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship";}clone(){return new p$V({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:l$2r(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};e$1_([d$1S({type:Number,json:{write:!0}})],l$P.prototype,"displayCount",void 0),e$1_([d$1S({type:["list"],json:{write:!0}})],l$P.prototype,"displayType",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],l$P.prototype,"editable",void 0),e$1_([d$1S({type:[c$1O],json:{write:!0}})],l$P.prototype,"orderByFields",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],l$P.prototype,"relationshipId",void 0),e$1_([d$1S({type:["relationship"],json:{read:!1,write:!0}})],l$P.prototype,"type",void 0),l$P=p$V=e$1_([i$2w("esri.form.elements.RelationshipElement")],l$P);const d$C=l$P;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$10(t){return {typesWithGroup:{base:i$_,key:"type",typeMap:{attachment:n$13,field:a$11,group:t,relationship:d$C}},typesWithoutGroup:{base:i$_,key:"type",typeMap:{attachment:n$13,field:a$11,relationship:d$C}}}}function i$V(t,e,p=!0){if(!t)return null;const r=p?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter((t=>r[t.type])).map((t=>r[t.type].fromJSON(t)))}function u$A(t,e,p=!0){if(!t)return null;const r=p?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter((t=>r[t.type])).map((t=>t.toJSON()))}function s$P(e,p,r=!0){return e?e.map((e=>N$t(r?p.typesWithGroup:p.typesWithoutGroup,e))):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$B;let u$z=d$B=class extends i$_{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group";}castElements(e){return s$P(e,f$n,!1)}readElements(e,t){return i$V(t.formElements,f$n,!1)}writeElements(e,t){t.formElements=u$A(e,f$n,!1);}clone(){return new d$B({description:this.description,elements:l$2r(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};e$1_([d$1S({json:{write:!0}})],u$z.prototype,"elements",void 0),e$1_([c$2Y("elements")],u$z.prototype,"castElements",null),e$1_([o$1j("elements",["formElements"])],u$z.prototype,"readElements",null),e$1_([r$1c("elements")],u$z.prototype,"writeElements",null),e$1_([d$1S({type:["collapsed","expanded"],json:{write:!0}})],u$z.prototype,"initialState",void 0),e$1_([d$1S({type:String,json:{read:!1,write:!0}})],u$z.prototype,"type",void 0),u$z=d$B=e$1_([i$2w("esri.form.elements.GroupElement")],u$z);const f$n=n$10(u$z),y$q=u$z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$A;const j$9=n$10(y$q);let y$p=d$A=class extends a$2A{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null;}castElements(e){return s$P(e,j$9)}readElements(e,t){return i$V(t.formElements,j$9)}writeElements(e,t){t.formElements=u$A(e,j$9);}clone(){return new d$A({description:this.description,expressionInfos:l$2r(this.expressionInfos),elements:l$2r(this.elements),title:this.title})}};e$1_([d$1S({type:String,json:{write:!0}})],y$p.prototype,"description",void 0),e$1_([d$1S({json:{write:!0}})],y$p.prototype,"elements",void 0),e$1_([c$2Y("elements")],y$p.prototype,"castElements",null),e$1_([o$1j("elements",["formElements"])],y$p.prototype,"readElements",null),e$1_([r$1c("elements")],y$p.prototype,"writeElements",null),e$1_([d$1S({type:[i$$],json:{write:!0}})],y$p.prototype,"expressionInfos",void 0),e$1_([d$1S({type:String,json:{write:!0}})],y$p.prototype,"title",void 0),y$p=d$A=e$1_([i$2w("esri.form.FormTemplate")],y$p);const E$a=y$p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$z;const p$U=s$25()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),u$y=p$U.jsonValues.slice();v$X(u$y,"orthometric");const g$m=s$25()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let m$y=d$z=class extends a$2A{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null;}writeHeightModel(e,t,r){return p$U.write(e,t,r)}readHeightModel(e,t,r){const o=p$U.read(e);return o||(r&&r.messages&&r.messages.push(f$m(e,{context:r})),null)}readHeightUnit(e,t,r){const o=g$m.read(e);return o||(r&&r.messages&&r.messages.push(y$o(e,{context:r})),null)}readHeightUnitService(e,t,r){const o=A$f(e)||g$m.read(e);return o||(r&&r.messages&&r.messages.push(y$o(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new d$z({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return !!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=G$a(t);return new d$z({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new d$z;return t.read(e,{origin:"web-scene"}),t}};function y$o(e,t){return new t$1H("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function f$m(e,t){return new t$1H("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}e$1_([d$1S({type:p$U.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:u$y,default:"ellipsoidal"}}}})],m$y.prototype,"heightModel",void 0),e$1_([r$1c("web-scene","heightModel")],m$y.prototype,"writeHeightModel",null),e$1_([o$1j(["web-scene","service"],"heightModel")],m$y.prototype,"readHeightModel",null),e$1_([d$1S({type:g$m.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:g$m.jsonValues,write:g$m.write}}}})],m$y.prototype,"heightUnit",void 0),e$1_([o$1j("web-scene","heightUnit")],m$y.prototype,"readHeightUnit",null),e$1_([o$1j("service","heightUnit")],m$y.prototype,"readHeightUnitService",null),e$1_([d$1S({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],m$y.prototype,"vertCRS",void 0),e$1_([o$1j("service","vertCRS",["vertCRS","ellipsoid","geoid"])],m$y.prototype,"readVertCRS",null),m$y=d$z=e$1_([i$2w("esri.geometry.HeightModelInfo")],m$y);const v$d=m$y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let T$6=0;const F$4=s$2h.getLogger("esri.layers.graphics.sources.MemorySource");let G$5=class extends(m$1A.LoadableMixin(n$2w(a$26(S$F)))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory";}load(e){const t=r$1G(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;null==(e=this._connection)||e.close(),this._connection=null;}get workerGeometryType(){var e;const t=null==(e=this.layer)?void 0:e.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(e){return this.load().then((()=>this._applyEdits(e)))}openPorts(){return this.load().then((()=>this._connection.openPorts()))}async queryFeatures(e,t={}){await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);r$B(e,this.layer.spatialReference,r);const s=g$r.fromJSON(r);if(!this._requiresClientGraphicMapping())return s;const o=this.layer.objectIdField;for(const i of s.features){const e=i.attributes[o],t=this._idToClientGraphic.get(e);t&&(i.geometry=t.geometry);}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new s$29("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return r$B(e,this.layer.spatialReference,r),r}queryFeatureCount(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t)))}queryObjectIds(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t)))}queryExtent(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t))).then((e=>({count:e.count,extent:M$r.fromJSON(e.extent)})))}querySnapping(e,t={}){return this.load(t).then((()=>this._connection.invoke("querySnapping",e,t)))}async _applyEdits(e){if(!this._connection)throw new s$29("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let r=null;const o=[],i=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const n=e=>"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[t]?e.attributes[t]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const s of e.deleteFeatures){const e=n(s);null!=e&&o.push(e);}const a=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures)for(const s of e.updateFeatures)if(i.push(this._serializeFeature(s)),a){const e=n(s);null!=e&&a.set(e,s);}l$V(r?r.features:null,i,this.layer.spatialReference);const{fullExtent:l,featureEditResults:u}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:i,deletes:o});return this.fullExtent=l,r&&r.finish(u.uidToObjectId),this._updateClientGraphicIds(a,u),this._createEditsResult(u)}async _prepareClientMapping(e,t){if("mesh"!==this.layerOrSourceGeometryType||t$1O(e))return;const r=[];for(const{geometry:s}of e)!r$1G(s)||"mesh"!==s.type||s.hasExtent||s.loaded||r.push(s.load({signal:t}));r.length&&await Promise.all(r);}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const r of t.updateResults){if(!r.success)continue;const t=e.get(r.objectId);null!=t&&this._addIdToClientGraphic(t);}for(const e of t.deleteResults)e.success&&this._idToClientGraphic.delete(e.objectId);}}_createEditsResult(e){return {addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=!0===e.success?null:e.error||{code:void 0,description:void 0};return {objectId:e.objectId,globalId:e.globalId,error:t?new s$29("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,r=new Array(e.length);let s=null;for(let i=0;i<e.length;i++){const o=e[i],n=this._serializeFeature(o);!s&&r$1G(o.geometry)&&(s=o.geometry.type),r[i]=n,t.set(`${n.uid}`,o);}const o=this;return {features:r,inferredGeometryType:s,finish(e){const r=o.sourceJSON.objectIdField;for(const s in e){const i=e[s],n=t.get(s);n&&(n.attributes||(n.attributes={}),-1===i?delete n.attributes[r]:n.attributes[r]=i,o._addIdToClientGraphic(n));}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];null!=r&&this._idToClientGraphic.set(r,e);}get layerOrSourceGeometryType(){var e,t,r;return null!=(e=null==(t=this.layer)?void 0:t.geometryType)?e:null==(r=this.sourceJSON)?void 0:r.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return "mesh"===e||"multipatch"===e||"extent"===e}_serializeFeature(e){const{attributes:t}=e,r=this._geometryForSerialization(e),s=(T$6++).toString();return r?{uid:s,geometry:r.toJSON(),attributes:t}:{uid:s,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;if(t$1O(t))return null;if(this._geometryRequiresClientGraphicMapping(t)){return t.extent?v$I.fromExtent(t.extent):null}return t}async _startWorker(e){this._connection=await u$P("MemorySourceWorker",{strategy:s$2l("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:r,objectIdField:s,hasM:o,hasZ:n,timeInfo:a}=this.layer,l="defaults"===this.layer.originOf("spatialReference");await this._prepareClientMapping(this.items,e);const u=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",(e=>{F$4.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault();})));const p={features:u.features,fields:t&&t.map((e=>e.toJSON())),geometryType:t$1d.toJSON(this.workerGeometryType),hasM:"mesh"!==this.layerOrSourceGeometryType&&o,hasZ:"mesh"===this.layerOrSourceGeometryType||n,objectIdField:s,spatialReference:l?null:r&&r.toJSON(),timeInfo:a?a.toJSON():null},d=await this._connection.invoke("load",p,{signal:e});for(const i of d.warnings)F$4.warn(i.message,{layer:this.layer,warning:i});d.featureErrors.length&&F$4.warn(`Encountered ${d.featureErrors.length} validation errors while loading features`,d.featureErrors);const h=d.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(u.inferredGeometryType)&&(h.geometryType=t$1d.toJSON(u.inferredGeometryType)),this.sourceJSON=h,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),u.finish(d.assignedObjectIds);}};e$1_([n$2x({Type:h$U,ensureType:b$Z(h$U)})],G$5.prototype,"itemType",void 0),e$1_([d$1S()],G$5.prototype,"type",void 0),e$1_([d$1S({constructOnly:!0})],G$5.prototype,"layer",void 0),e$1_([d$1S({readOnly:!0})],G$5.prototype,"workerGeometryType",null),e$1_([d$1S()],G$5.prototype,"sourceJSON",void 0),G$5=e$1_([i$2w("esri.layers.graphics.sources.MemorySource")],G$5);const R$7=G$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$D(r){return "portalItem"in r}const i$U=i=>{let o=class extends i{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):t$D(this)?null==(r=this.portalItem)?void 0:r.apiKey:null}set apiKey(r){null!=r?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"));}};return e$1_([d$1S({type:String})],o.prototype,"apiKey",null),o=e$1_([i$2w("esri.layers.mixins.APIKeyMixin")],o),o};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$O={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},a$10=Object.values(l$O),c$Z=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${a$10.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),f$l=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${a$10.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),v$c=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function p$T(e){return !!c$Z.test(e)}function d$y(e){const t=U$o(e),n=t.path.match(c$Z)||t.path.match(f$l);if(!n)return null;const[,s,i,o,u]=n,a=i.indexOf("/");return {title:w$f(-1!==a?i.slice(a+1):i),serverType:l$O[o.toLowerCase()],sublayer:null!=u&&""!==u?parseInt(u,10):null,url:{path:s}}}function m$x(e){const t=U$o(e).path.match(v$c);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function w$f(e){return (e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function h$p(r,t){const n=[];if(r){const t=d$y(r);r$1G(t)&&t.title&&n.push(t.title);}if(t){const e=w$f(t);n.push(e);}if(2===n.length){if(-1!==n[0].toLowerCase().indexOf(n[1].toLowerCase()))return n[0];if(-1!==n[1].toLowerCase().indexOf(n[0].toLowerCase()))return n[1]}return n.join(" - ")}function y$n(e){if(!e)return !1;const r=".arcgis.com/",t="//services",n="//tiles",s="//features",i=-1!==(e=e.toLowerCase()).indexOf(r),o=-1!==e.indexOf(t)||-1!==e.indexOf(n)||-1!==e.indexOf(s);return i&&o}function g$l(e,r){return e?gt$2(Ut(e,r)):e}function O$a(s){let{url:i}=s;if(!i)return {url:i};i=Ut(i,s.logger);const o=U$o(i),u=d$y(o.path);let l;if(r$1G(u))null!=u.sublayer&&null==s.layer.layerId&&(l=u.sublayer),i=u.url.path;else if(s.nonStandardUrlAllowed){const r=m$x(o.path);r$1G(r)&&(i=r.serviceUrl,l=r.sublayerId);}return {url:gt$2(i),layerId:l}}function C$9(e,r,t,n,i){p$2E(r,n,"url",i),n.url&&null!=e.layerId&&(n.url=D$s(n.url,t,e.layerId.toString()));}function S$c(e){if(!e)return !1;const r=e.toLowerCase(),t=-1!==r.indexOf("/services/"),n=-1!==r.indexOf("/mapserver/wmsserver"),s=-1!==r.indexOf("/imageserver/wmsserver"),i=-1!==r.indexOf("/wmsserver");return t&&(n||s||i)}function L$9(e){if(!e)return !1;const r=new $$h(T$n(e)).authority.toLowerCase();return "server.arcgisonline.com"===r||"services.arcgisonline.com"===r}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$S=p=>{let c=class extends p{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const t=d$y(this.url);if(r$1G(t)&&t.title)return t.title}return this._get("title")||""}set title(t){this._set("title",t);}set url(t){this._set("url",g$l(t,s$2h.getLogger(this.declaredClass)));}};return e$1_([d$1S()],c.prototype,"title",null),e$1_([d$1S({type:String})],c.prototype,"url",null),c=e$1_([i$2w("esri.layers.mixins.ArcGISService")],c),c};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$T=i=>{let n=class extends i{constructor(){super(...arguments),this.blendMode="normal",this.effect=null;}};return e$1_([d$1S({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0}}}})],n.prototype,"blendMode",void 0),e$1_([d$1S({json:{read:!1,write:!1,origins:{"web-map":{read:{reader:n$1Y},write:{allowNull:!0,writer:a$27}}}}})],n.prototype,"effect",void 0),n=e$1_([i$2w("esri.layers.mixins.BlendLayer")],n),n};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$w=o=>{let t=class extends o{constructor(){super(...arguments),this.customParameters=null;}};return e$1_([d$1S({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=e$1_([i$2w("esri.layers.mixins.CustomParametersMixin")],t),t};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$Y;const m$w=new o$1K({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),u$x=new o$1K({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let d$x=c$Y=class extends a$2A{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null;}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:s,objectIds:n,units:a,distance:l}=this;return new b$h({geometry:l$2r(i),objectIds:l$2r(n),spatialRelationship:r,timeExtent:l$2r(s),where:t,units:a,distance:l,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:s,units:n,distance:a}=this;return new c$Y({geometry:l$2r(t),objectIds:l$2r(s),spatialRelationship:i,timeExtent:l$2r(r),where:e,units:n,distance:a})}};e$1_([d$1S({type:String,json:{write:!0}})],d$x.prototype,"where",void 0),e$1_([d$1S({types:i$20,json:{write:!0}})],d$x.prototype,"geometry",void 0),e$1_([d$1S({type:m$w.apiValues,json:{name:"spatialRel",read:{reader:m$w.read},write:{allowNull:!1,writer:m$w.write,overridePolicy(){return {enabled:r$1G(this.geometry)}}}}})],d$x.prototype,"spatialRelationship",void 0),e$1_([d$1S({type:Number,json:{write:{overridePolicy(e){return {enabled:null!=e&&null!=this.geometry}}}}})],d$x.prototype,"distance",void 0),e$1_([d$1S({type:[Number],json:{write:!0}})],d$x.prototype,"objectIds",void 0),e$1_([d$1S({type:u$x.apiValues,json:{read:u$x.read,write:{writer:u$x.write,overridePolicy(e){return {enabled:null!=e&&null!=this.geometry}}}}})],d$x.prototype,"units",void 0),e$1_([d$1S({type:y$$,json:{write:!0}})],d$x.prototype,"timeExtent",void 0),d$x=c$Y=e$1_([i$2w("esri.layers.support.FeatureFilter")],d$x);const y$m=d$x;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$w;let p$R=d$w=class extends a$2A{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1;}clone(){return new d$w({filter:r$1G(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};e$1_([d$1S({type:y$m,json:{write:!0,origins:{"web-map":{write:{allowNull:!0,writer(e,r,t,o){if(!e)return void(r[t]=e);const s=e.write({},o),i=Object.keys(s);1===i.length&&"where"===i[0]?r[t]=s:r[t]=null;}}}}}})],p$R.prototype,"filter",void 0),e$1_([d$1S({json:{write:!0,origins:{"web-map":{read:{reader:n$1Y},write:{allowNull:!0,writer:a$27}}}}})],p$R.prototype,"includedEffect",void 0),e$1_([d$1S({json:{write:!0,origins:{"web-map":{read:{reader:n$1Y},write:{allowNull:!0,writer:a$27}}}}})],p$R.prototype,"excludedEffect",void 0),e$1_([d$1S({type:Boolean,json:{write:!0,name:"showExcludedLabels",default:!1}})],p$R.prototype,"excludedLabelsVisible",void 0),p$R=d$w=e$1_([i$2w("esri.layers.support.FeatureEffect")],p$R);const a$$=p$R;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$C=t=>{let p=class extends t{constructor(){super(...arguments),this.featureEffect=null;}};return e$1_([d$1S({type:a$$,json:{origins:{"web-map":{write:{allowNull:!0}}}}})],p.prototype,"featureEffect",void 0),p=e$1_([i$2w("esri.layers.mixins.FeatureEffectLayer")],p),p};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$v={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const y$l=y=>{let u=class extends y{constructor(){super(...arguments),this.title=null;}writeListMode(e,r,i,t){(t&&"ground"===t.layerContainerType||e&&g$X(this,i,{},t))&&(r[i]=e);}writeOperationalLayerType(e,r,i,t){!e||t&&"tables"===t.layerContainerType||(r.layerType=e);}writeTitle(e,r){r.title=e||"Layer";}read(e,r){r&&(r.layer=this),d$1y(this,e,(r=>super.read(e,r)),r);}write(e,t){if(null!=t&&t.origin){const e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,i=e$v[e];let s=i&&i[this.operationalLayerType];var o;if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(s=!1),!s)return null==(o=t.messages)||o.push(new s$29("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const s=super.write(e,{...t,layer:this}),a=!!t&&!!t.messages&&!!t.messages.filter((e=>e instanceof s$29&&"web-document-write:property-required"===e.name)).length;var n;return F$m(null==s?void 0:s.url)?(null==t||null==(n=t.messages)||n.push(new s$29("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&a?null:s}beforeSave(){}};return e$1_([d$1S({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],u.prototype,"id",void 0),e$1_([d$1S({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],u.prototype,"listMode",void 0),e$1_([r$1c("listMode")],u.prototype,"writeListMode",null),e$1_([d$1S({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],u.prototype,"operationalLayerType",void 0),e$1_([r$1c("operationalLayerType")],u.prototype,"writeOperationalLayerType",null),e$1_([d$1S(u$1i)],u.prototype,"opacity",void 0),e$1_([d$1S({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],u.prototype,"title",void 0),e$1_([r$1c("title")],u.prototype,"writeTitle",null),e$1_([d$1S({type:Boolean,json:{name:"visibility",origins:{"web-document":{name:"visibility",default:!0},"portal-item":{name:"visibility",read:{source:["visible","visibility"]}}}}})],u.prototype,"visible",void 0),u=e$1_([i$2w("esri.layers.mixins.OperationalLayer")],u),u};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$S;const p$Q=new o$1K({asc:"ascending",desc:"descending"});let n$$=i$S=class extends a$2A{constructor(r){super(r),this.field=null,this.valueExpression=null,this.order="ascending";}clone(){return new i$S({field:this.field,valueExpression:this.valueExpression,order:this.order})}};e$1_([d$1S({type:String,json:{write:!0}})],n$$.prototype,"field",void 0),e$1_([d$1S({type:String,json:{write:!0}})],n$$.prototype,"valueExpression",void 0),e$1_([d$1S({type:p$Q.apiValues,json:{read:p$Q.read,write:p$Q.write}})],n$$.prototype,"order",void 0),n$$=i$S=e$1_([i$2w("esri.layers.support.OrderByInfo")],n$$);const c$X=n$$;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$_(r,e,o){if(!r)return null;const t=r.find((r=>!!r.field));if(!t)return null;const i=new c$X;return i.read(t,o),[i]}function c$W(r,o,t,s){const i=r.find((r=>!!r.field));i&&o$1W(t,[i.toJSON()],o);}const p$P=e=>{let i=class extends e{constructor(){super(...arguments),this.orderBy=null;}};return e$1_([d$1S({type:[c$X],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:n$_},write:{target:"layerDefinition.orderBy",writer:c$W}}})],i.prototype,"orderBy",void 0),i=e$1_([i$2w("esri.layers.mixins.OrderedLayer")],i),i};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const v$b=s$2h.getLogger("esri.layers.mixins.PortalLayer"),w$e=i=>{let w=class extends i{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0;}destroy(){var t;null==(t=this.portalItem)||t.destroy(),this.portalItem=null;}set portalItem(t){t!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",t));}readPortalItem(t,r,e){if(r.itemId)return new b$n({id:r.itemId,portal:e&&e.portal})}writePortalItem(t,r){t&&t.id&&(r.itemId=t.id);}async loadFromPortal(t,r){if(this.portalItem&&this.portalItem.id)try{const e=await import('./layersLoader.js').then(function (n) { return n.l; });return h$1x(r),await e.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},r)}catch(e){throw d$1O(e)||v$b.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(t){this._set("userHasEditingPrivileges",await this.fetchUserHasEditingPrivileges(t).catch((t=>(b$Y(t),!0))));}async fetchUserHasEditingPrivileges(t){const e=this.url?null==n$2F?void 0:n$2F.findCredential(this.url):null;if(!e)return !0;const s=P$b.credential===e?P$b.user:await this.fetchEditingUser(t);return P$b.credential=e,P$b.user=s,t$1O(s)||null==s.privileges||s.privileges.includes("features:user:edit")}async fetchEditingUser(t){var o,i;const a=null==(o=this.portalItem)||null==(i=o.portal)?void 0:i.user;if(a)return a;const p=n$2F.findServerInfo(this.url);if(null==p||!p.owningSystemUrl)return null;const n=`${p.owningSystemUrl}/sharing/rest`,m=B$d.getDefault();if(m&&m.loaded&&z$q(m.restUrl)===z$q(n))return m.user;const c=`${n}/community/self`,d=r$1G(t)?t.signal:null,h=await a$1C(E$t(c,{authMode:"no-prompt",query:{f:"json"},signal:d}));return h.ok?p$2y.fromJSON(h.value.data):null}read(t,r){r&&(r.layer=this),super.read(t,r);}write(t,r){const e=r&&r.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||B$d.getDefault());return e&&s&&!P$r(s.restUrl,e.restUrl)?(r.messages&&r.messages.push(new s$29("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...r,layer:this})}};return e$1_([d$1S({type:b$n})],w.prototype,"portalItem",null),e$1_([o$1j("web-document","portalItem",["itemId"])],w.prototype,"readPortalItem",null),e$1_([r$1c("web-document","portalItem",{itemId:{type:String}})],w.prototype,"writePortalItem",null),e$1_([d$1S()],w.prototype,"resourceReferences",void 0),e$1_([d$1S({readOnly:!0})],w.prototype,"userHasEditingPrivileges",void 0),w=e$1_([i$2w("esri.layers.mixins.PortalLayer")],w),w},P$b={credential:null,user:null};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$B=new S$F,n$Z=new WeakMap;function o$v(e){c$V(e)&&t$B.push(e);}function s$O(e){c$V(e)&&t$B.includes(e)&&t$B.remove(e);}function c$V(e){return e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function f$k(e,r){return Number.isFinite(e)&&Number.isFinite(r)?r<=0?e:f$k(r,e%r):0}let i$R=0,a$_=0;function l$N(){const e=Date.now();for(const o of t$B)if(o.refreshInterval){var r;e-(null!=(r=n$Z.get(o))?r:0)+5>=6e4*o.refreshInterval&&(n$Z.set(o,e),o.refresh(e));}}l$2f((()=>{const e=Date.now();let r=0;for(const o of t$B)r=f$k(Math.round(6e4*o.refreshInterval),r),o.refreshInterval?n$Z.get(o)||n$Z.set(o,e):n$Z.delete(o);if(r!==a$_){if(a$_=r,clearInterval(i$R),0===a$_)return void(i$R=0);i$R=setInterval(l$N,a$_);}}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$Y=p=>{let n=class extends p{constructor(...e){super(...e),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=z$r((()=>this.hasDataChanged())),this.when().then((()=>{o$v(this);}),(()=>{}));}destroy(){s$O(this);}get refreshParameters(){return {_ts:this.refreshTimestamp||null}}refresh(e=Date.now()){g$15(this._debounceHasDataChanged()).then((r=>{r&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:r});}),(e=>{s$2h.getLogger(this.declaredClass).error(e),this.emit("refresh",{dataChanged:!1,error:e});}));}async hasDataChanged(){return !0}};return e$1_([d$1S({type:Number,cast:e=>e>=.1?e:e<=0?0:.1,json:{write:!0}})],n.prototype,"refreshInterval",void 0),e$1_([d$1S({readOnly:!0})],n.prototype,"refreshTimestamp",void 0),e$1_([d$1S()],n.prototype,"refreshParameters",null),n=e$1_([i$2w("esri.layers.mixins.RefreshableLayer")],n),n};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$N=s=>{let t=class extends s{constructor(){super(...arguments),this.minScale=0,this.maxScale=0;}get scaleRangeId(){return `${this.minScale},${this.maxScale}`}};return e$1_([d$1S({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),e$1_([d$1S({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),e$1_([d$1S({readOnly:!0})],t.prototype,"scaleRangeId",null),t=e$1_([i$2w("esri.layers.mixins.ScaleRangeLayer")],t),t};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$u=s$25()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$O;let a$Z=p$O=class extends a$2A{constructor(r){super(r),this.value=0,this.unit="milliseconds";}toMilliseconds(){return o$_(this.value,this.unit,"milliseconds")}clone(){return new p$O({value:this.value,unit:this.unit})}};e$1_([d$1S({type:Number,json:{write:!0},nonNullable:!0})],a$Z.prototype,"value",void 0),e$1_([d$1S({type:e$u.apiValues,json:{type:e$u.jsonValues,read:e$u.read,write:e$u.write},nonNullable:!0})],a$Z.prototype,"unit",void 0),a$Z=p$O=e$1_([i$2w("esri.TimeInterval")],a$Z);const l$M=a$Z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$Q;let a$Y=i$Q=class extends a$2A{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null;}readRespectsDaylightSaving(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new i$Q({respectsDaylightSaving:e,timezone:t})}};e$1_([d$1S({type:Boolean,json:{write:!0}})],a$Y.prototype,"respectsDaylightSaving",void 0),e$1_([o$1j("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],a$Y.prototype,"readRespectsDaylightSaving",null),e$1_([d$1S({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],a$Y.prototype,"timezone",void 0),a$Y=i$Q=e$1_([i$2w("esri.layers.support.TimeReference")],a$Y);const p$N=a$Y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$v;let c$U=d$v=class extends a$2A{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0;}readFullTimeExtent(e,r){if(!r.timeExtent||!Array.isArray(r.timeExtent)||2!==r.timeExtent.length)return null;const i=new Date(r.timeExtent[0]),l=new Date(r.timeExtent[1]);return new y$$({start:i,end:l})}writeFullTimeExtent(e,t){e&&r$1G(e.start)&&r$1G(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null;}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new l$M({value:t.timeInterval,unit:e$u.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new l$M({value:t.defaultTimeInterval,unit:e$u.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit;}else t.timeInterval=null,t.timeIntervalUnits=null;}clone(){const{cumulative:e,endField:t,hasLiveData:r,interval:i,startField:o,timeReference:n,fullTimeExtent:a,trackIdField:s,useTime:m}=this;return new d$v({cumulative:e,endField:t,hasLiveData:r,interval:i,startField:o,timeReference:l$2r(n),fullTimeExtent:l$2r(a),trackIdField:s,useTime:m})}};e$1_([d$1S({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],c$U.prototype,"cumulative",void 0),e$1_([d$1S({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],c$U.prototype,"endField",void 0),e$1_([d$1S({type:y$$,json:{write:{enabled:!0,allowNull:!0}}})],c$U.prototype,"fullTimeExtent",void 0),e$1_([o$1j("fullTimeExtent",["timeExtent"])],c$U.prototype,"readFullTimeExtent",null),e$1_([r$1c("fullTimeExtent")],c$U.prototype,"writeFullTimeExtent",null),e$1_([d$1S({type:Boolean,json:{write:!0}})],c$U.prototype,"hasLiveData",void 0),e$1_([d$1S({type:l$M,json:{write:{enabled:!0,allowNull:!0}}})],c$U.prototype,"interval",void 0),e$1_([o$1j("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],c$U.prototype,"readInterval",null),e$1_([r$1c("interval")],c$U.prototype,"writeInterval",null),e$1_([d$1S({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],c$U.prototype,"startField",void 0),e$1_([d$1S({type:p$N,json:{write:{enabled:!0,allowNull:!0}}})],c$U.prototype,"timeReference",void 0),e$1_([d$1S({type:String,json:{write:{enabled:!0,allowNull:!0}}})],c$U.prototype,"trackIdField",void 0),e$1_([d$1S({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],c$U.prototype,"useTime",void 0),c$U=d$v=e$1_([i$2w("esri.layers.support.TimeInfo")],c$U);const v$a=c$U;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$X=f=>{let a=class extends f{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0;}readOffset(e,t){const o=t.timeInfo.exportOptions;if(!o)return null;const i=o.timeOffset,s=e$u.fromJSON(o.timeOffsetUnits);return i&&s?new l$M({value:i,unit:s}):null}set timeInfo(e){m$1K(e,this.fieldsIndex),this._set("timeInfo",e);}};return e$1_([d$1S({type:y$$,json:{write:!1}})],a.prototype,"timeExtent",void 0),e$1_([d$1S({type:l$M})],a.prototype,"timeOffset",void 0),e$1_([o$1j("service","timeOffset",["timeInfo.exportOptions"])],a.prototype,"readOffset",null),e$1_([d$1S({value:null,type:v$a,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],a.prototype,"timeInfo",null),e$1_([d$1S({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"useViewTime",void 0),a=e$1_([i$2w("esri.layers.mixins.TemporalLayer")],a),a};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$t;let c$T=e$t=class extends a$2A{constructor(o){super(o);}clone(){const{name:o,fields:r,isAscending:s,isUnique:t,description:c}=this;return new e$t({name:o,fields:r,isAscending:s,isUnique:t,description:c})}};e$1_([d$1S({constructOnly:!0})],c$T.prototype,"name",void 0),e$1_([d$1S({constructOnly:!0})],c$T.prototype,"fields",void 0),e$1_([d$1S({constructOnly:!0})],c$T.prototype,"isAscending",void 0),e$1_([d$1S({constructOnly:!0})],c$T.prototype,"isUnique",void 0),e$1_([d$1S({constructOnly:!0})],c$T.prototype,"description",void 0),c$T=e$t=e$1_([i$2w("esri.layers.support.FeatureIndex")],c$T);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$A=class extends a$2A{constructor(){super(...arguments),this.type=null;}};e$1_([d$1S({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],t$A.prototype,"type",void 0),t$A=e$1_([i$2w("esri.layers.support.FeatureReduction")],t$A);const p$M=t$A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var r$x;let e$s=r$x=class extends a$2A{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null;}clone(){return new r$x({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};e$1_([d$1S({type:String,json:{write:!0}})],e$s.prototype,"statisticType",void 0),e$1_([d$1S({type:String,json:{write:!0}})],e$s.prototype,"onStatisticField",void 0),e$1_([d$1S({type:String,json:{write:!0}})],e$s.prototype,"onStatisticValueExpression",void 0),e$s=r$x=e$1_([i$2w("esri.layers.support.OutStatistic")],e$s);const p$L=e$s;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$K;let i$P=p$K=class extends a$2A{constructor(){super(...arguments),this.name=null;}clone(){return new p$K({name:this.name,outStatistic:this.outStatistic.clone()})}};e$1_([d$1S({type:String,json:{write:!0}})],i$P.prototype,"name",void 0),e$1_([d$1S({type:p$L,json:{write:!0}})],i$P.prototype,"outStatistic",void 0),i$P=p$K=e$1_([i$2w("esri.layers.support.AggregateField")],i$P);const c$S=i$P;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$X="__begin__",r$w="__end__",s$M=new RegExp(n$X,"ig"),t$z=new RegExp(r$w,"ig"),o$u=new RegExp("^"+n$X,"i"),i$O=new RegExp(r$w+"$","i"),l$L='"',a$W=l$L+" + ",c$R=" + "+l$L;function p$J(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function u$w(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function x$9(e){const n={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(n.expression=e.labelExpressionInfo.value,n.type="conventional"):e.labelExpressionInfo.expression&&(n.expression=e.labelExpressionInfo.expression,n.type="arcade"):null!=e.labelExpression&&(n.expression=p$J(e.labelExpression),n.type="conventional"),n}function f$j(e){const n=x$9(e);if(!n)return null;switch(n.type){case"conventional":return w$d(n.expression);case"arcade":return n.expression}return null}function g$k(e){const n=x$9(e);if(!n)return null;switch(n.type){case"conventional":return $$4(n.expression);case"arcade":return _$c(n.expression)}return null}function w$d(p){let u;return p?(u=r$1F(p,(e=>n$X+'$feature["'+e+'"]'+r$w)),u=o$u.test(u)?u.replace(o$u,""):l$L+u,u=i$O.test(u)?u.replace(i$O,""):u+l$L,u=u.replace(s$M,a$W).replace(t$z,c$R)):u='""',u}const E$9=/^\s*\{([^}]+)\}\s*$/i;function $$4(e){const n=e.match(E$9);return n&&n[1].trim()||null}const b$b=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,m$v=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,R$6=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function _$c(e){if(!e)return null;let n=b$b.exec(e)||m$v.exec(e);return n?n[1]||n[3]:(n=R$6.exec(e),n?n[2]:null)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$K;let n$W=l$K=class extends a$2A{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null;}readExpression(r,e){return e.value?w$d(e.value):r}writeExpression(r,e,s){null!=this.value&&(r=w$d(this.value)),null!=r&&(e[s]=r);}clone(){return new l$K({expression:this.expression,title:this.title,value:this.value})}};e$1_([d$1S({type:String,json:{write:{writerEnsuresNonNull:!0}}})],n$W.prototype,"expression",void 0),e$1_([o$1j("expression",["expression","value"])],n$W.prototype,"readExpression",null),e$1_([r$1c("expression")],n$W.prototype,"writeExpression",null),e$1_([d$1S({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],n$W.prototype,"title",void 0),e$1_([d$1S({json:{read:!1,write:!1}})],n$W.prototype,"value",void 0),n$W=l$K=e$1_([i$2w("esri.layers.support.LabelExpressionInfo")],n$W);const a$V=n$W;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$r=[252,146,31,255],l$J={type:"esriSMS",style:"esriSMSCircle",size:6,color:e$r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o$t={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e$r},S$b={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},t$y={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},r$v={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},s$L={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},y$k={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
y$14.fromJSON(l$J);m$1E.fromJSON(o$t);S$x.fromJSON(S$b);const y$j=c$2c.fromJSON(t$y);const N$9=y$14.fromJSON(r$v),O$9=m$1E.fromJSON(s$L),j$8=S$x.fromJSON(y$k);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$u;const y$i=new o$1K({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function w$c(e){return !e||"service"!==e.origin&&!x$8(e.layer)}function x$8(e){return "map-image"===(null==e?void 0:e.type)}function P$a(e){var r,t;return !!x$8(e)&&!(null==(r=e.capabilities)||null==(t=r.exportMap)||!t.supportsArcadeExpressionForLabeling)}function L$8(e){return w$c(e)||P$a(e.layer)}let g$j=d$u=class extends a$2A{constructor(e){super(e),this.type="label",this.name=null,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.maxScale=0,this.minScale=0,this.symbol=y$j,this.useCodedValues=void 0,this.where=null;}static evaluateWhere(e,r){const t=function(e,r,t){switch(r){case"=":return e==t;case"<>":return e!=t;case">":return e>t;case">=":return e>=t;case"<":return e<t;case"<=":return e<=t}return !1};try{if(null==e)return !0;const o=e.split(" ");if(3===o.length)return t(r[o[0]],o[1],o[2]);if(7===o.length){const e=t(r[o[0]],o[1],o[2]),n=o[3],s=t(r[o[4]],o[5],o[6]);switch(n){case"AND":return e&&s;case"OR":return e||s}}return !1}catch(o){console.log("Error.: can't parse = "+e);}}readLabelExpression(e,r){const t=r.labelExpressionInfo;if(!t||!t.value&&!t.expression)return e}writeLabelExpression(e,r,t){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=u$w(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const r=_$c(this.labelExpressionInfo.expression);r&&(e="["+r+"]");}null!=e&&(r[t]=e);}writeLabelExpressionInfo(e,r,t,o){if(null==e&&null!=this.labelExpression&&w$c(o))e=new a$V({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(o);n.expression&&(r[t]=n);}writeMaxScale(e,r){(e||this.minScale)&&(r.maxScale=e);}writeMinScale(e,r){(e||this.maxScale)&&(r.minScale=e);}getLabelExpression(){return x$9(this)}getLabelExpressionArcade(){return f$j(this)}getLabelExpressionSingleField(){return g$k(this)}hash(){return JSON.stringify(this)}clone(){return new d$u({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:l$2r(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:l$2r(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};e$1_([d$1S({type:String,json:{write:!0}})],g$j.prototype,"name",void 0),e$1_([d$1S({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],g$j.prototype,"deconflictionStrategy",void 0),e$1_([d$1S({type:String,json:{write:{overridePolicy(e,r,t){return this.labelExpressionInfo&&"service"===(null==t?void 0:t.origin)&&P$a(t.layer)?{enabled:!1}:{allowNull:!0}}}}})],g$j.prototype,"labelExpression",void 0),e$1_([o$1j("labelExpression")],g$j.prototype,"readLabelExpression",null),e$1_([r$1c("labelExpression")],g$j.prototype,"writeLabelExpression",null),e$1_([d$1S({type:a$V,json:{write:{overridePolicy:(e,r,t)=>L$8(t)?{allowNull:!0}:{enabled:!1}}}})],g$j.prototype,"labelExpressionInfo",void 0),e$1_([r$1c("labelExpressionInfo")],g$j.prototype,"writeLabelExpressionInfo",null),e$1_([d$1S({type:y$i.apiValues,json:{type:y$i.jsonValues,read:y$i.read,write:y$i.write}})],g$j.prototype,"labelPlacement",void 0),e$1_([d$1S({type:Number})],g$j.prototype,"maxScale",void 0),e$1_([r$1c("maxScale")],g$j.prototype,"writeMaxScale",null),e$1_([d$1S({type:Number})],g$j.prototype,"minScale",void 0),e$1_([r$1c("minScale")],g$j.prototype,"writeMinScale",null),e$1_([d$1S({types:P$j,json:{origins:{"web-scene":{types:F$f,write:m$1a,default:null}},write:m$1a,default:null}})],g$j.prototype,"symbol",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],g$j.prototype,"useCodedValues",void 0),e$1_([d$1S({type:String,json:{write:!0}})],g$j.prototype,"where",void 0),g$j=d$u=e$1_([i$2w("esri.layers.support.LabelClass")],g$j);const E$8=g$j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$u;let d$t=m$u=class extends a$2A{constructor(e){super(e),this.type="cluster",this.clusterRadius=o$18("80px"),this.clusterMinSize=o$18("12px"),this.clusterMaxSize=o$18("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null;}clone(){return new m$u({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:l$2r(this.labelingInfo),labelsVisible:this.labelsVisible,fields:l$2r(this.fields),popupEnabled:this.popupEnabled,popupTemplate:l$2r(this.popupTemplate)})}};e$1_([d$1S({type:["cluster"],readOnly:!0,json:{write:!0}})],d$t.prototype,"type",void 0),e$1_([d$1S({type:Number,cast:e=>"auto"===e?e:o$18(e),json:{write:!0}})],d$t.prototype,"clusterRadius",void 0),e$1_([d$1S({type:Number,cast:o$18,json:{write:!0}})],d$t.prototype,"clusterMinSize",void 0),e$1_([d$1S({type:Number,cast:o$18,json:{write:!0}})],d$t.prototype,"clusterMaxSize",void 0),e$1_([d$1S(p$2k)],d$t.prototype,"popupEnabled",void 0),e$1_([d$1S({type:M$k,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],d$t.prototype,"popupTemplate",void 0),e$1_([d$1S({types:D$k})],d$t.prototype,"symbol",void 0),e$1_([d$1S({type:[E$8],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],d$t.prototype,"labelingInfo",void 0),e$1_([d$1S(m$1l)],d$t.prototype,"labelsVisible",void 0),e$1_([d$1S({type:[c$S],json:{write:!0}})],d$t.prototype,"fields",void 0),d$t=m$u=e$1_([i$2w("esri.layers.support.FeatureReductionCluster")],d$t);const b$a=d$t;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$x;let c$Q=t$x=class extends p$M{constructor(r){super(r),this.type="selection";}clone(){return new t$x}};e$1_([d$1S({type:["selection"]})],c$Q.prototype,"type",void 0),c$Q=t$x=e$1_([i$2w("esri.layers.support.FeatureReductionSelection")],c$Q);const p$I=c$Q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$K={types:{key:"type",base:p$M,typeMap:{selection:p$I,cluster:b$a}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:{key:"type",base:p$M,typeMap:{selection:b$a}}},"web-scene":{types:{key:"type",base:p$M,typeMap:{selection:p$I}}}}}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$J=new o$1K({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let l$I=class extends a$2A{constructor(o){super(o),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null;}};e$1_([d$1S({json:{write:!0}})],l$I.prototype,"name",void 0),e$1_([d$1S({json:{write:!0}})],l$I.prototype,"description",void 0),e$1_([d$1S({json:{read:s$J.read,write:s$J.write}})],l$I.prototype,"drawingTool",void 0),e$1_([d$1S({json:{write:!0}})],l$I.prototype,"prototype",void 0),e$1_([d$1S({json:{write:!0}})],l$I.prototype,"thumbnail",void 0),l$I=e$1_([i$2w("esri.layers.support.FeatureTemplate")],l$I);const a$U=l$I;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$P=class extends a$2A{constructor(o){super(o),this.id=null,this.name=null,this.domains=null,this.templates=null;}readDomains(o){const r={};for(const s of Object.keys(o))r[s]=t$I(o[s]);return r}writeDomains(o,r){const s={};for(const e of Object.keys(o)){var t;if(o[e])s[e]=null==(t=o[e])?void 0:t.toJSON();}r.domains=s;}};e$1_([d$1S({json:{write:!0}})],c$P.prototype,"id",void 0),e$1_([d$1S({json:{write:!0}})],c$P.prototype,"name",void 0),e$1_([d$1S({json:{write:!0}})],c$P.prototype,"domains",void 0),e$1_([o$1j("domains")],c$P.prototype,"readDomains",null),e$1_([r$1c("domains")],c$P.prototype,"writeDomains",null),e$1_([d$1S({type:[a$U],json:{write:!0}})],c$P.prototype,"templates",void 0),c$P=e$1_([i$2w("esri.layers.support.FeatureType")],c$P);const m$t=c$P;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$w(e){return "date"===e.type||"esriFieldTypeDate"===e.type}function s$I(e){return "oid"===e.type||"esriFieldTypeOID"===e.type}function l$H(e){return "global-id"===e.type||"esriFieldTypeGlobalID"===e.type}class d$s{constructor(i){if(this.fields=i,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!i)return;const d=[];for(const n of i){const i=n&&n.name;if(i){const u=r$u(i);this._fieldsMap.set(i,n),this._fieldsMap.set(u,n),d.push(u),t$w(n)?(this.dateFields.push(n),this._dateFieldsSet.add(n)):B$f(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n)),s$I(n)||l$H(n)||(n.editable=null==n.editable||!!n.editable,n.nullable=null==n.nullable||!!n.nullable);}}d.sort(),this.uid=d.join(",");}destroy(){this._fieldsMap.clear();}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)s$I(e)||l$H(e)||e.nullable||void 0!==P$l(e)||this._requiredFields.push(e);}return this._requiredFields}has(e){return null!=this.get(e)}get(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(r$u(e)):void 0}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){const i=this.get(e);if(i)return i.name}}function r$u(e){return e.toLowerCase().trim()}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$H=s$2h.getLogger("esri.layers.support.fieldProperties");function l$G(){return {fields:{type:[y$z],value:null},fieldsIndex:{readOnly:!0,get(){return new d$s(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields");},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return ["*"];if(!this.fields)return e;for(const i of e){this.fieldsIndex.has(i)||s$H.error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:e});}return y$1b(this.fieldsIndex,e)}}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$N=class extends a$2A{constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null;}};e$1_([d$1S({type:String,json:{read:{source:"shapeAreaFieldName"}}})],i$N.prototype,"shapeAreaField",void 0),e$1_([d$1S({type:String,json:{read:{source:"shapeLengthFieldName"}}})],i$N.prototype,"shapeLengthField",void 0),e$1_([d$1S({type:String,json:{read:e=>te$5.read(e)||ie$4.read(e)}})],i$N.prototype,"units",void 0),i$N=e$1_([i$2w("esri.layers.support.GeometryFieldsInfo")],i$N);const a$T=i$N;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$V=/\[([^\[\]]+)\]/gi;function r$t(r,i,o){return r?r.map((r=>{const s=new E$8;if(s.read(r,o),s.labelExpression){const e=i.fields||i.layerDefinition&&i.layerDefinition.fields||this.fields;s.labelExpression=s.labelExpression.replace(n$V,((n,r)=>`[${t$v(r,e)}]`));}return s})):null}function t$v(e,n){if(!n)return e;const r=e.toLowerCase();for(let t=0;t<n.length;t++){const e=n[t].name;if(e.toLowerCase()===r)return e}return e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$F;let i$M=l$F=class extends a$2A{constructor(o){super(o),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new S$F;}clone(){return new l$F({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};e$1_([d$1S({type:String,json:{write:!0}})],i$M.prototype,"floorField",void 0),e$1_([d$1S({json:{read:!1,write:!1}})],i$M.prototype,"viewAllMode",void 0),e$1_([d$1S({json:{read:!1,write:!1}})],i$M.prototype,"viewAllLevelIds",void 0),i$M=l$F=e$1_([i$2w("esri.layers.support.LayerFloorInfo")],i$M);const p$H=i$M;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$G=new o$1K({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),a$S=new o$1K({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let n$U=class extends a$2A{constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null;}};e$1_([d$1S({json:{read:s$G.read,write:s$G.write}})],n$U.prototype,"cardinality",void 0),e$1_([d$1S({json:{read:!0,write:!0}})],n$U.prototype,"composite",void 0),e$1_([d$1S({json:{read:!0,write:!0}})],n$U.prototype,"id",void 0),e$1_([d$1S({json:{read:!0,write:!0}})],n$U.prototype,"keyField",void 0),e$1_([d$1S({json:{read:!0,write:!0}})],n$U.prototype,"keyFieldInRelationshipTable",void 0),e$1_([d$1S({json:{read:!0,write:!0}})],n$U.prototype,"name",void 0),e$1_([d$1S({json:{read:!0,write:!0}})],n$U.prototype,"relatedTableId",void 0),e$1_([d$1S({json:{read:!0,write:!0}})],n$U.prototype,"relationshipTableId",void 0),e$1_([d$1S({json:{read:a$S.read,write:a$S.write}})],n$U.prototype,"role",void 0),n$U=e$1_([i$2w("esri.layers.support.Relationship")],n$U);const l$E=n$U;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function t$u(t,i,n){const s=t&&t.getAtOrigin&&t.getAtOrigin("renderer",i.origin);if(s&&"unique-value"===s.type&&s.styleOrigin){const a=await a$1C(s.populateFromStyle());if(h$1x(n),!1===a.ok){const e=a.error;i&&i.messages&&i.messages.push(new t$1H("renderer:style-reference",`Failed to create unique value renderer from style reference: ${e.message}`,{error:e,context:i})),t.clear("renderer",i.origin);}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$D=["oid","global-id"],s$F=["oid","global-id","guid"];function a$R({displayField:t,editFieldsInfo:i,fields:o,objectIdField:n,title:r},l){if(!o)return null;const s=b$9({editFieldsInfo:i,fields:o,objectIdField:n},l);if(!s.length)return null;const a=j$7({titleBase:r,fields:o,displayField:t}),d=C$8();return new M$k({title:a,content:d,fieldInfos:s})}const d$r=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],p$G=(e,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:o})=>o?o.has(e.name):!f$i(e.name,t)&&((!i||e.name!==i)&&(!(l$D.indexOf(e.type)>-1)&&!d$r.some((t=>t.test(e.name)))));function u$v(e,t){const i=e;return t&&(e=e.filter((e=>-1===t.indexOf(e.type)))),e===i&&(e=e.slice()),e.sort(c$O),e}function c$O(e,t){return "oid"===e.type?-1:"oid"===t.type?1:y$h(e)?-1:y$h(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function f$i(e,t){if(!e||!t)return !1;const{creationDateField:i,creatorField:o,editDateField:n,editorField:r}=t;return -1!==[i&&i.toLowerCase(),o&&o.toLowerCase(),n&&n.toLowerCase(),r&&r.toLowerCase()].indexOf(e.toLowerCase())}function m$s(e,t){return e.editable&&-1===s$F.indexOf(e.type)&&!f$i(e.name,t)}function b$9({editFieldsInfo:e,fields:t,objectIdField:i},o){return u$v(t,(null==o?void 0:o.ignoreFieldTypes)||g$i).map((t=>new c$1V({fieldName:t.name,isEditable:m$s(t,e),label:t.alias,format:w$b(t),visible:p$G(t,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:null==o?void 0:o.visibleFieldNames})})))}function w$b(e){switch(e.type){case"small-integer":case"integer":case"single":return new u$1e({digitSeparator:!0,places:0});case"double":return new u$1e({digitSeparator:!0,places:2});case"date":return new u$1e({dateFormat:"long-month-day-year"});default:return null}}function C$8(){return [new c$1U,new p$26]}function j$7(e){const i=h$1d(e),{titleBase:o}=e;return i?`${o}: {${i.trim()}}`:o}function y$h(e){if("name"===(e.name&&e.name.toLowerCase()))return !0;return "name"===(e.alias&&e.alias.toLowerCase())||void 0}const g$i=["geometry","blob","raster","guid","xml"];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const Me$1=new o$1K({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Le={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},Oe="FeatureLayer",Pe$1=s$2h.getLogger("esri.layers.FeatureLayer");function _e(e){return e&&e instanceof S$F}function Re$1(e,t,r){return !!(e&&e.hasOwnProperty(t)?e[t]:r)}function Ae(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const qe=l$G();function Qe(e,t,r){const i=!(null==r||!r.writeLayerSchema);return {enabled:i,ignoreOrigin:i}}let Ue=class extends(t$C(i$T(p$P(a$X(s$N(n$Y(p$S(y$l(w$e(l$R(o$w(i$U(b$m))))))))))))){constructor(...e){super(...e),this._handles=new u$1X,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=k$s.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(S$F.ofType(c$T)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0;}destroy(){var e;null==(e=this.source)||e.destroy(),this._handles=l$2t(this._handles);}normalizeCtorArgs(e,t){return "string"==typeof e?{url:e,...t}:e}load(e){const t=r$1G(e)?e.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(t).then((e=>this._initLayerProperties(e))));const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(b$Y).then((async()=>{if(this.url&&null==this.layerId&&/FeatureServer|MapServer\/*$/i.test(this.url)){const e=await this._fetchFirstLayerId(t);null!=e&&(this.layerId=e);}if(!this.url&&!this._hasMemorySource())throw new s$29("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(t))})).then((()=>this.finishLoadEditablePortalLayer(e)));return this.addResolvingPromise(r),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return !(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){null!=e?this._override("editingEnabled",e):this._clearOverride("editingEnabled");}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1);}writeEditingEnabledToWebMap(e,t,r,i){this._writeEditingEnabled(e,t,!0,i);}readEditingInfo(e,t){const{editingInfo:r}=t;return r?{lastEditDate:null!=r.lastEditDate?new Date(r.lastEditDate):null}:null}readIsTable(e,t){return "Table"===(t=t&&t.layerDefinition||t).type||!t.geometryType}writeIsTable(e,t,r,i){null!=i&&i.writeLayerSchema&&o$1W(r,e?"Table":"Feature Layer",t);}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields)for(const r of t.fields)if("esriFieldTypeGlobalID"===r.type)return r.name}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields)for(const r of t.fields)if("esriFieldTypeOID"===r.type)return r.name}get parsedUrl(){const e=this.url?U$o(this.url):null;return null!=e&&(null!=this.dynamicDataSource?e.path=D$s(e.path,"dynamicLayer"):null!=this.layerId&&(e.path=D$s(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){d$1s(e,this.fieldsIndex),this._set("renderer",e);}readRenderer(e,t,s){const n=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(n){const e=o$T(n,t,s)||void 0;return e||Pe$1.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:s}),e}if(t.defaultSymbol)return t.types&&t.types.length?new P$g({defaultSymbol:Ve(t.defaultSymbol,t,s),field:t.typeIdField,uniqueValueInfos:t.types.map((e=>({id:e.id,symbol:Ve(e.symbol,e,s)})))}):new p$1N({symbol:Ve(t.defaultSymbol,t,s)})}set source(e){const t=this._get("source");t!==e&&(_e(t)&&this._resetMemorySource(t),_e(e)&&this._initMemorySource(e),this._set("source",e));}castSource(e){return e?Array.isArray(e)||e instanceof S$F?new R$7({layer:this,items:e}):e:null}readSource(e,t){const r=g$r.fromJSON(t.featureSet);return new R$7({layer:this,items:r&&r.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){const r=t.editFieldsInfo,i=r&&r.creatorField,o=r&&r.editorField;return e=e&&e.map((e=>a$U.fromJSON(e))),this._fixTemplates(e,i),this._fixTemplates(e,o),e}readTitle(e,t){const r=t.layerDefinition&&t.layerDefinition.name||t.name,i=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){const e=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?h$p(this.url,r):r;let t=r;if(!t&&this.url){const e=d$y(this.url);r$1G(e)&&(t=e.title);}if(!t)return;return "item-title-and-service-name"===this.sublayerTitleMode&&e&&e!==t&&(t=e+" - "+t),w$f(t)}if("item-title"===this.sublayerTitleMode&&i)return i}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const e=t.fields.find((e=>e.name.toLowerCase()===r));e&&(r=e.name);}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,i=r&&r.creatorField,o=r&&r.editorField;return e&&e.map((e=>(e=m$t.fromJSON(e),this._fixTemplates(e.templates,i),this._fixTemplates(e.templates,o),e)))}set url(e){const t=O$a({layer:this,url:e,nonStandardUrlAllowed:!0,logger:Pe$1});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId);}writeUrl(e,t,r,i){C$9(this,e,null,t,i);}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0}addAttachment(e,t){return this.load().then((()=>this._checkAttachmentSupport(e))).then((()=>{if(!("addAttachment"in this.source))throw new s$29(Oe,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)}))}updateAttachment(e,t,r){return this.load().then((()=>this._checkAttachmentSupport(e))).then((()=>{if(!("updateAttachment"in this.source))throw new s$29(Oe,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,r)}))}async applyEdits(e,t){const r=await import('./editingSupport.js');return await this.load(),r.applyEdits(this,this.source,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return a$R(this,e)}async createGraphicsSource(e){if(this._hasMemorySource())return this.source.load({signal:e});const{default:t}=await P$s(import('./FeatureLayerSource.js'),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=new b$h,t=this.get("capabilities.data");e.dynamicDataSource=this.dynamicDataSource,e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:r,timeExtent:i}=this;return e.timeExtent=null!=r&&null!=i?i.offset(-r.value,r.unit):i||null,e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then((()=>this._checkAttachmentSupport(e))).then((()=>{if(!("deleteAttachments"in this.source))throw new s$29(Oe,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)}))}fetchRecomputedExtents(e){return this.load({signal:null==e?void 0:e.signal}).then((()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new s$29(Oe,"Layer source does not support fetchUpdates capability")}))}getFeatureType(e){const{typeIdField:t,types:r}=this;if(!t||!e)return null;const i=e.attributes?e.attributes[t]:void 0;if(null==i)return null;let o=null;return r.some((e=>{const{id:t}=e;return null!=t&&(t.toString()===i.toString()&&(o=e),!!o)})),o}getFieldDomain(e,t){const r=t&&t.feature,i=this.getFeatureType(r);if(i){const t=i.domains&&i.domains[e];if(t&&"inherited"!==t.type)return t}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=u$O.from(e),this.load().then((()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new s$29(Oe,"this layer doesn't support attachments");const{attachmentTypes:t,objectIds:r,globalIds:i,num:o,size:s,start:n,where:a}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){const p=r&&r.length>1,l=t&&t.length,u=i&&i.length,y=s&&s.length;if(p||l||u||y||o||n||a)throw new s$29(Oe,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(r&&r.length||a))throw new s$29(Oe,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new s$29(Oe,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)}))}queryFeatures(e,t){return this.load().then((()=>this.source.queryFeatures(b$h.from(e)||this.createQuery(),t))).then((e=>{if(null!=e&&e.features)for(const t of e.features)t.layer=t.sourceLayer=this;return e}))}queryObjectIds(e,t){return this.load().then((()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(b$h.from(e)||this.createQuery(),t);throw new s$29(Oe,"Layer source does not support queryObjectIds capability")}))}queryFeatureCount(e,t){return this.load().then((()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(b$h.from(e)||this.createQuery(),t);throw new s$29(Oe,"Layer source does not support queryFeatureCount capability")}))}queryExtent(e,t){return this.load().then((()=>{if(this.source.queryExtent)return this.source.queryExtent(b$h.from(e)||this.createQuery(),t);throw new s$29(Oe,"Layer source does not support queryExtent capability")}))}queryRelatedFeatures(e,t){return this.load().then((()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(l$X.from(e),t);throw new s$29(Oe,"Layer source does not support queryRelatedFeatures capability")}))}queryRelatedFeaturesCount(e,t){return this.load().then((()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(l$X.from(e),t);throw new s$29(Oe,"Layer source does not support queryRelatedFeaturesCount capability")}))}queryTopFeatures(e,t){return this.load().then((()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(S$e.from(e),t).then((e=>{if(null!=e&&e.features)for(const t of e.features)t.layer=t.sourceLayer=this;return e}));throw new s$29(Oe,"Layer source does not support queryTopFeatures capability")}))}queryTopObjectIds(e,t){return this.load().then((()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(S$e.from(e),t);throw new s$29(Oe,"Layer source does not support queryTopObjectIds capability")}))}queryTopFeaturesExtent(e,t){return this.load().then((()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(S$e.from(e),t);throw new s$29(Oe,"Layer source does not support queryTopExtents capability")}))}queryTopFeatureCount(e,t){return this.load().then((()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(S$e.from(e),t);throw new s$29(Oe,"Layer source does not support queryFeatureCount capability")}))}read(e,t){const r=e.featureCollection;if(r){const e=r.layers;e&&1===e.length&&(super.read(e[0],t),null!=r.showLegend&&super.read({showLegend:r.showLegend},t));}super.read(e,t),t&&"service"===t.origin&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service");}write(e,t){var r,i;const o=(t={...t,writeLayerSchema:null!=(r=null==(i=t)?void 0:i.writeLayerSchema)?r:this._hasMemorySource()}).origin,s=t.layerContainerType,n=t.messages;if(this.isTable){if("web-scene"===o||"web-map"===o&&"tables"!==s)return n&&n.push(new s$29("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Table source cannot be written to web scenes and web maps`,{layer:this})),null;if(this._hasMemorySource())return n&&n.push(new s$29("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using an in-memory Table source cannot be written to web scenes and web maps`,{layer:this})),null}else if(this.loaded&&"web-map"===o&&"tables"===s)return n&&n.push(new s$29("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a non-table source cannot be written to tables in web maps`,{layer:this})),null;return super.write(e,t)}_readEditingEnabled(e,t,r){var i;let o=null==(i=e.layerDefinition)?void 0:i.capabilities;return o?this._hasEditingCapability(o):(o=e.capabilities,t&&"web-map"===(null==r?void 0:r.origin)&&!this._hasMemorySource()&&o?this._hasEditingCapability(o):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map((e=>e.trim())).includes("editing")}_writeEditingEnabled(e,t,r,i){if(!e){var o,s;const e=null!=(o=this.capabilities)&&null!=(s=o.operations)&&s.supportsSync?"Query,Sync":"Query";o$1W("layerDefinition.capabilities",e,t),!r||null!=i&&i.writeLayerSchema||(t.capabilities=e);}}_checkAttachmentSupport(e){const{attributes:t}=e,{objectIdField:r}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:Promise.reject(new s$29(Oe,`feature is missing the identifying attribute ${r}`)):Promise.reject(new s$29(Oe,"'attributes' are required on a feature to query attachments")):Promise.reject(new s$29(Oe,"A feature is required to add/delete/update attachments")):Promise.reject(new s$29(Oe,"this layer doesn't support attachments"))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return E$t(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then((e=>{const t=e.data;if(t)return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}))}async _initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),d$1s(this.renderer,this.fieldsIndex),m$1K(this.timeInfo,this.fieldsIndex),t$u(this,{origin:"service"})}async hasDataChanged(){var e;if(null!=(e=this.source)&&e.refresh)try{var t;const{dataChanged:e,updates:r}=await(null==(t=this.source)?void 0:t.refresh());if(r$1G(r)&&(this.sourceJSON={...this.sourceJSON,...r},this.read(r,{origin:"service",url:this.parsedUrl})),e)return !0}catch{}if(this.definitionExpression)try{return (await e$z(this.definitionExpression,this.fieldsIndex)).hasDateFunctions}catch{}return !1}_verifyFields(){const e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some((function(e){return "geometry"===e.type}))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")");}_fixTemplates(e,t){e&&e.forEach((e=>{const r=e.prototype&&e.prototype.attributes;r&&t&&delete r[t];}));}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new s$29("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new s$29("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach((e=>{e.layer=this,e.sourceLayer=this;})),this._handles.add([e.on("after-add",(e=>{e.item.layer=this,e.item.sourceLayer=this;})),e.on("after-remove",(e=>{e.item.layer=null,e.item.sourceLayer=null;}))],"fl-source");}_resetMemorySource(e){e.forEach((e=>{e.layer=null,e.sourceLayer=null;})),this._handles.remove("fl-source");}_hasMemorySource(){return !(this.url||!this.source)}_readAttachmentCapabilities(e){const t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach((e=>{const r=Le[e.name];r&&(t[r]=!!e.isEnabled);})),t}_readDataCapabilities(e){return {isVersioned:Re$1(e,"isDataVersioned",!1),supportsAttachment:Re$1(e,"hasAttachments",!1),supportsM:Re$1(e,"hasM",!1),supportsZ:Re$1(e,"hasZ",!1)}}_readMetadataCapabilities(e){return {supportsAdvancedFieldProperties:Re$1(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){const r=e?e.toLowerCase().split(",").map((e=>e.trim())):[],i=r.includes("editing")&&!t.datesInUnknownTimezone;let o=i&&r.includes("create"),s=i&&r.includes("delete"),n=i&&r.includes("update");const a=r.includes("changetracking");return i&&!(o||s||n)&&(o=s=n=!0),{supportsCalculate:Re$1(t,"supportsCalculate",!1),supportsTruncate:Re$1(t,"supportsTruncate",!1),supportsValidateSql:Re$1(t,"supportsValidateSql",!1),supportsAdd:o,supportsDelete:s,supportsEditing:i,supportsChangeTracking:a,supportsQuery:r.includes("query"),supportsQueryAttachments:Re$1(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:Re$1(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:n,supportsExceedsLimitStatistics:Re$1(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){var t;const r=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,o=e.archivingInfo,s=null==(t=this.url)?void 0:t.includes("MapServer"),n=!s$2l("mapserver-pbf-enabled")&&s&&this.version<10.81,a=(e.supportedQueryFormats||"").split(",").reduce(((e,t)=>{const r=t.toLowerCase().trim();return r&&e.add(r),e}),new Set);return {supportsStatistics:Re$1(r,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Re$1(r,"supportsPercentileStatistics",!1),supportsCentroid:Re$1(r,"supportsReturningGeometryCentroid",!1),supportsDistance:Re$1(r,"supportsQueryWithDistance",!1),supportsDistinct:Re$1(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Re$1(r,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Re$1(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:Re$1(r,"supportsHavingClause",!1),supportsOrderBy:Re$1(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Re$1(r,"supportsPagination",!1),supportsQuantization:Re$1(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Re$1(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Re$1(e,"supportsReturningQueryGeometry",!1),supportsResultType:Re$1(r,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Re$1(r,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Re$1(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Re$1(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Re$1(r,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Re$1(i,"allowOthersToQuery",!0),supportsHistoricMoment:Re$1(o,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!n&&a.has("pbf"),supportsDisjointSpatialRelationship:Re$1(r,"supportsDisjointSpatialRel",!1),supportsCacheHint:Re$1(r,"supportsQueryWithCacheHint",!1),maxRecordCountFactor:Ae(e,"maxRecordCountFactor",void 0),maxRecordCount:Ae(e,"maxRecordCount",void 0),standardMaxRecordCount:Ae(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:Ae(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){const t=e.advancedQueryCapabilities,r=Re$1(t,"supportsAdvancedQueryRelated",!1);return {supportsPagination:Re$1(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r}}_readEditingCapabilities(e){const t=e.ownershipBasedAccessControlForFeatures;return {supportsGeometryUpdate:Re$1(e,"allowGeometryUpdates",!0),supportsGlobalId:Re$1(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Re$1(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Re$1(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Re$1(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Re$1(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Re$1(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Re$1(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Re$1(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Re$1(t,"allowOthersToUpdate",!0)}}};e$1_([d$1S({readOnly:!0,json:{read:!1}})],Ue.prototype,"capabilities",void 0),e$1_([o$1j("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],Ue.prototype,"readCapabilities",null),e$1_([d$1S({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ue.prototype,"charts",void 0),e$1_([d$1S({readOnly:!0})],Ue.prototype,"createQueryVersion",null),e$1_([d$1S({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],Ue.prototype,"copyright",void 0),e$1_([d$1S({type:Boolean})],Ue.prototype,"datesInUnknownTimezone",void 0),e$1_([d$1S({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],Ue.prototype,"displayField",void 0),e$1_([d$1S({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],Ue.prototype,"definitionExpression",void 0),e$1_([d$1S({types:j$t,readOnly:!0})],Ue.prototype,"defaultSymbol",void 0),e$1_([d$1S({type:K$5})],Ue.prototype,"dynamicDataSource",void 0),e$1_([d$1S({readOnly:!0})],Ue.prototype,"editFieldsInfo",void 0),e$1_([d$1S({type:Boolean})],Ue.prototype,"editingEnabled",null),e$1_([o$1j(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ue.prototype,"readEditingEnabled",null),e$1_([o$1j("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ue.prototype,"readEditingEnabledFromWebMap",null),e$1_([r$1c(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ue.prototype,"writeEditingEnabled",null),e$1_([r$1c("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ue.prototype,"writeEditingEnabledToWebMap",null),e$1_([d$1S({readOnly:!0})],Ue.prototype,"editingInfo",void 0),e$1_([o$1j("editingInfo")],Ue.prototype,"readEditingInfo",null),e$1_([d$1S(d$16)],Ue.prototype,"elevationInfo",void 0),e$1_([d$1S(s$K)],Ue.prototype,"featureReduction",void 0),e$1_([d$1S({...qe.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Qe}}}}})],Ue.prototype,"fields",void 0),e$1_([d$1S(qe.fieldsIndex)],Ue.prototype,"fieldsIndex",void 0),e$1_([d$1S({type:p$H,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],Ue.prototype,"floorInfo",void 0),e$1_([d$1S({type:E$a,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ue.prototype,"formTemplate",void 0),e$1_([d$1S({type:M$r,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],Ue.prototype,"fullExtent",void 0),e$1_([d$1S()],Ue.prototype,"gdbVersion",void 0),e$1_([d$1S({readOnly:!0,type:a$T,json:{read:{source:"geometryProperties"}}})],Ue.prototype,"geometryFieldsInfo",void 0),e$1_([d$1S({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Me$1.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Qe,writer(e,t,r){const i=e?Me$1.toJSON(e):null;i&&o$1W(r,i,t);}}}},read:{source:"layerDefinition.geometryType",reader:Me$1.read}}})],Ue.prototype,"geometryType",void 0),e$1_([d$1S({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],Ue.prototype,"hasM",void 0),e$1_([d$1S({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],Ue.prototype,"hasZ",void 0),e$1_([d$1S({readOnly:!0,type:v$d})],Ue.prototype,"heightModelInfo",void 0),e$1_([d$1S({type:Date})],Ue.prototype,"historicMoment",void 0),e$1_([d$1S(j$q)],Ue.prototype,"id",void 0),e$1_([d$1S({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ue.prototype,"infoFor3D",void 0),e$1_([d$1S({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ue.prototype,"isTable",void 0),e$1_([o$1j("service","isTable",["type","geometryType"]),o$1j("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ue.prototype,"readIsTable",null),e$1_([r$1c("web-map","isTable")],Ue.prototype,"writeIsTable",null),e$1_([d$1S(m$1l)],Ue.prototype,"labelsVisible",void 0),e$1_([d$1S({type:[E$8],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:r$t},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:r$t},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Ue.prototype,"labelingInfo",void 0),e$1_([d$1S(w$C)],Ue.prototype,"opacity",void 0),e$1_([d$1S({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],Ue.prototype,"layerId",void 0),e$1_([d$1S(c$21)],Ue.prototype,"legendEnabled",void 0),e$1_([d$1S({type:["show","hide"]})],Ue.prototype,"listMode",void 0),e$1_([d$1S(b$F)],Ue.prototype,"minScale",void 0),e$1_([o$1j("service","minScale",["minScale","effectiveMinScale"])],Ue.prototype,"readMinScale",null),e$1_([d$1S(I$m)],Ue.prototype,"maxScale",void 0),e$1_([o$1j("service","maxScale",["maxScale","effectiveMaxScale"])],Ue.prototype,"readMaxScale",null),e$1_([d$1S({type:String})],Ue.prototype,"globalIdField",void 0),e$1_([o$1j("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),o$1j("service","globalIdField",["globalIdField","fields"])],Ue.prototype,"readGlobalIdFieldFromService",null),e$1_([d$1S({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Qe}}}}})],Ue.prototype,"objectIdField",void 0),e$1_([o$1j("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),o$1j("service","objectIdField",["objectIdField","fields"])],Ue.prototype,"readObjectIdFieldFromService",null),e$1_([d$1S({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Ue.prototype,"operationalLayerType",void 0),e$1_([d$1S(qe.outFields)],Ue.prototype,"outFields",void 0),e$1_([d$1S({readOnly:!0})],Ue.prototype,"parsedUrl",null),e$1_([d$1S({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ue.prototype,"path",void 0),e$1_([d$1S(p$2k)],Ue.prototype,"popupEnabled",void 0),e$1_([d$1S({type:M$k,json:{name:"popupInfo",write:!0}})],Ue.prototype,"popupTemplate",void 0),e$1_([d$1S({readOnly:!0})],Ue.prototype,"defaultPopupTemplate",null),e$1_([d$1S({type:[l$E],readOnly:!0})],Ue.prototype,"relationships",void 0),e$1_([d$1S({types:m$15,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:n$1H,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,r)=>({ignoreOrigin:null==r?void 0:r.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:null==r?void 0:r.writeLayerSchema})}}})],Ue.prototype,"renderer",null),e$1_([o$1j("service","renderer",["drawingInfo.renderer","defaultSymbol"]),o$1j("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ue.prototype,"readRenderer",null),e$1_([d$1S()],Ue.prototype,"sourceJSON",void 0),e$1_([d$1S({type:Boolean})],Ue.prototype,"returnM",void 0),e$1_([d$1S({type:Boolean})],Ue.prototype,"returnZ",void 0),e$1_([d$1S(l$1w)],Ue.prototype,"screenSizePerspectiveEnabled",void 0),e$1_([d$1S()],Ue.prototype,"source",null),e$1_([c$2Y("source")],Ue.prototype,"castSource",null),e$1_([o$1j("portal-item","source",["featureSet"]),o$1j("web-map","source",["featureSet"])],Ue.prototype,"readSource",null),e$1_([d$1S({readOnly:!0})],Ue.prototype,"serviceDefinitionExpression",void 0),e$1_([o$1j("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],Ue.prototype,"readServiceDefinitionExpression",null),e$1_([d$1S({type:k$s,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],Ue.prototype,"spatialReference",void 0),e$1_([d$1S({type:Number})],Ue.prototype,"subtypeCode",void 0),e$1_([d$1S({type:[a$U]})],Ue.prototype,"templates",void 0),e$1_([o$1j("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ue.prototype,"readTemplates",null),e$1_([d$1S({type:v$a})],Ue.prototype,"timeInfo",void 0),e$1_([d$1S()],Ue.prototype,"title",void 0),e$1_([o$1j("service","title",["name"]),o$1j("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ue.prototype,"readTitle",null),e$1_([o$1j("web-map","title",["layerDefinition.name","title"])],Ue.prototype,"readTitleFromWebMap",null),e$1_([d$1S({type:String})],Ue.prototype,"sublayerTitleMode",void 0),e$1_([d$1S({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],Ue.prototype,"trackIdField",void 0),e$1_([d$1S({json:{read:!1}})],Ue.prototype,"type",void 0),e$1_([d$1S({type:String})],Ue.prototype,"typeIdField",void 0),e$1_([o$1j("service","typeIdField"),o$1j("typeIdField",["layerDefinition.typeIdField"])],Ue.prototype,"readTypeIdField",null),e$1_([d$1S({type:[m$t]})],Ue.prototype,"types",void 0),e$1_([o$1j("service","types",["types"]),o$1j("types",["layerDefinition.types"])],Ue.prototype,"readTypes",null),e$1_([d$1S({readOnly:!0,json:{write:!1}})],Ue.prototype,"serverGens",void 0),e$1_([d$1S({type:S$F.ofType(c$T),readOnly:!0})],Ue.prototype,"indexes",void 0),e$1_([d$1S(f$W)],Ue.prototype,"url",null),e$1_([r$1c("url")],Ue.prototype,"writeUrl",null),e$1_([d$1S({readOnly:!0})],Ue.prototype,"userIsAdmin",void 0),e$1_([d$1S({json:{origins:{service:{read:!0}},read:!1}})],Ue.prototype,"version",void 0),e$1_([o$1j("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],Ue.prototype,"readVersion",null),e$1_([d$1S({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ue.prototype,"visible",void 0),e$1_([o$1j("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ue.prototype,"readVisible",null),Ue=e$1_([i$2w("esri.layers.FeatureLayer")],Ue);const Ve=u$29({types:M$p}),Ge=Ue;

const FeatureLayer = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': Ge
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$s=["$datastore","$map","$layer","$aggregatedfeatures"],n$T="esri.widgets.Feature.support.arcadeFeatureUtils",c$N=s$2h.getLogger(n$T);function p$F(e){return `<ul class="esri-widget__list">${e.map((e=>`<li>${"string"==typeof e?ee$3(Y$5(e)):e}</li>`)).join("")}</ul>`}function l$C(e){return `<table class="esri-widget__table">${e.keys().map((r=>{const t=e.field(r);return `<tr><th>${r}</th><td>${"string"==typeof t?ee$3(Y$5(t)):t}</td></tr>`})).join("")}</table>`}function u$u({aggregatedFeatures:e,arcadeUtils:r,featureSetVars:t,context:i,viewInfo:s,map:o,graphic:n,interceptor:c}){t.forEach((t=>{const p=t.toLowerCase(),l={map:o,spatialReference:s.sr,interceptor:c};if("$map"===p&&(i.vars[p]=r.convertMapToFeatureSetCollection(l)),"$layer"===p&&(i.vars[p]=r.convertFeatureLayerToFeatureSet({layer:n.sourceLayer,spatialReference:s.sr,interceptor:c})),"$datastore"===p&&(i.vars[p]=r.convertServiceUrlToWorkspace({url:n.sourceLayer.url,spatialReference:s.sr,interceptor:c})),"$aggregatedfeatures"===p){const t=n.layer,{fields:o,objectIdField:l,geometryType:u,spatialReference:f,displayField:d}=t,g=new Ge({fields:o,objectIdField:l,geometryType:u,spatialReference:f,displayField:d,..."feature"===t.type?{templates:t.templates,typeIdField:t.typeIdField,types:t.types}:null,source:e});i.vars[p]=r.convertFeatureLayerToFeatureSet({layer:g,spatialReference:s.sr,interceptor:c});}}));}function f$h(){return import('./arcadeUtils.js').then(function (n) { return n.as; })}async function d$q({graphic:e,view:r}){const{isAggregate:t,layer:a}=e;if(!t||!a||"2d"!==(null==r?void 0:r.type))return [];const i=await r.whenLayerView(a);if(!i.createQuery||!i.queryFeatures)return [];const s=i.createQuery();s.aggregateIds=[e.getObjectId()];const{features:o}=await i.queryFeatures(s);return o}async function g$h({expressionAttributes:e,info:r,arcadeUtils:a,interceptor:n,spatialReference:f,map:g,graphic:y,view:m}){const w=`expression/${r.name}`,F=a.createSyntaxTree(r.expression),v=o$s.filter((e=>a.hasVariable(F,e))),[h]=await s$22([d$q({graphic:y,view:m}),a.loadScriptDependencies(F,!0,v)]),x=a.getViewInfo({spatialReference:f}),$=a.createExecContext(y,x);$.interceptor=n,$.useAsync=!0,u$u({aggregatedFeatures:h,arcadeUtils:a,featureSetVars:v,context:$,viewInfo:x,map:g,graphic:y,interceptor:n});const I=a.createFunction(F,$),j=await a.executeAsyncFunction(I,$).catch((e=>c$N.error("arcade-execution-error",{error:e,graphic:y,expressionInfo:r})));e[w]="string"==typeof j?ee$3(Y$5(j)):Array.isArray(j)?p$F(j):j&&"esri.arcade.Dictionary"===j.declaredClass?l$C(j):j;}async function y$g({popupTemplate:e,spatialReference:t,graphic:a,interceptor:i,map:s,view:o}){const n=e.expressionInfos,c=[],p={};if(!n||!n.length)return p;const l=await f$h();for(const r of n)c.push(g$h({expressionAttributes:p,info:r,arcadeUtils:l,interceptor:i,spatialReference:t,map:s,graphic:a,view:o}));return await T$o(c),p}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var U$7;const N$8=1,q$5="esri.widgets.FeatureViewModel",D$8=s$2h.getLogger(q$5),Q$2={attachmentsContent:!0,customContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let B$5=U$7=class extends p$33{constructor(e){super(e),this._handles=new u$1X,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=e$I(this.graphicChanged,N$8,this),this._expressionAttributes=null,this.abilities={...Q$2},this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=e=>{const{abilities:t}=this;return "attachments"===e.type&&t.attachmentsContent||"custom"===e.type&&t.customContent||"fields"===e.type&&t.fieldsContent||"media"===e.type&&t.mediaContent||"text"===e.type&&t.textContent},this._handles.add(i$2i(this,["graphic","_effectivePopupTemplate","abilities"],(()=>this.graphicChangedThrottled())));}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear();}get _effectivePopupTemplate(){return r$1G(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return W$5(X$5(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return x$c(this.graphic)}castAbilities(e){return {...Q$2,...e}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null);}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(e){void 0!==e?this._override("spatialReference",e):this._clearOverride("spatialReference");}get map(){return this.get("view.map")||null}set map(e){void 0!==e?this._override("map",e):this._clearOverride("map");}get waitingForContent(){return !!this._featureAbortController}setActiveMedia(e,t){const r=this.contentViewModels[e];r instanceof I$7&&r.setActiveMedia(t);}nextMedia(e){const t=this.contentViewModels[e];t instanceof I$7&&t.next();}previousMedia(e){const t=this.contentViewModels[e];t instanceof I$7&&t.previous();}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null);}async graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal});}catch(r){d$1O(r)||(this._error=r,D$8.error("error","The popupTemplate could not be displayed for this feature.",{error:r,graphic:e,popupTemplate:this._effectivePopupTemplate}));}this._featureAbortController===t&&(this._featureAbortController=null);}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null;}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map(((e,t)=>"attachments"===e.type?this._compileAttachments(e,t):"custom"===e.type?this._compileCustom(e,t):"fields"===e.type?this._compileFields(e,t):"media"===e.type?this._compileMedia(e,t):"text"===e.type?this._compileText(e,t):void 0)):"string"==typeof e?this._compileText(new c$1P({text:e}),0).text:e}_destroyContentViewModels(){this.contentViewModels.forEach((e=>e&&!e.destroyed&&e.destroy())),this._set("contentViewModels",[]);}_compileAttachments(e,t){const{graphic:r}=this,{description:i,title:o}=e;return this.contentViewModels[t]=new c$1l({graphic:r,...this._compileTitleAndDesc({title:o,description:i})}),e}_compileCustom(e,t){const{graphic:r}=this,{creator:i,destroyer:o}=e;return this.contentViewModels[t]=new p$1k({graphic:r,creator:i,destroyer:o}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:r,_sourceLayer:i,graphic:o,formattedAttributes:s,_expressionAttributes:a}=this,{attributes:n}=o,l=s.global;return {title:$$7({attributes:n,fieldInfoMap:r,globalAttributes:l,expressionAttributes:a,layer:i,text:e}),description:$$7({attributes:n,fieldInfoMap:r,globalAttributes:l,expressionAttributes:a,layer:i,text:t})}}_compileFields(e,t){const{_effectivePopupTemplate:r,formattedAttributes:i}=this,o=e.clone(),s={...i.global,...i.content[t]},a=(null==e?void 0:e.fieldInfos)||(null==r?void 0:r.fieldInfos),n=null==a?void 0:a.filter((({fieldName:e})=>j$e(e)||ae$2(e)||s.hasOwnProperty(e))),l=null==r?void 0:r.expressionInfos,{description:p,title:c}=o,d=new n$1j({attributes:s,expressionInfos:l,fieldInfos:n,...this._compileTitleAndDesc({title:c,description:p})});return this.contentViewModels[t]=d,o.fieldInfos=d.formattedFieldInfos.slice(0),o}_compileMedia(e,t){const{graphic:r,_fieldInfoMap:i,_effectivePopupTemplate:o,relatedInfos:s,_sourceLayer:a,_expressionAttributes:n}=this,{attributes:l}=r,p=this.formattedAttributes.global,c=e.clone(),{description:d,mediaInfos:u,title:f}=c,h=new I$7({activeMediaInfoIndex:c.activeMediaInfoIndex||0,attributes:l,layer:a,fieldInfoMap:i,formattedAttributes:p,expressionAttributes:n,mediaInfos:u,popupTemplate:o,relatedInfos:s,...this._compileTitleAndDesc({title:f,description:d})});return c.mediaInfos=h.formattedMediaInfos.slice(0),this.contentViewModels[t]=h,c}_compileText(e,t){const r=e.clone(),{graphic:i,_fieldInfoMap:o,_sourceLayer:s,_expressionAttributes:a}=this;if(r&&r.text){const{attributes:e}=i,t=this.formattedAttributes.global;r.text=$$7({attributes:e,fieldInfoMap:o,globalAttributes:t,expressionAttributes:a,layer:s,text:r.text});}return this.contentViewModels[t]=new p$1k({graphic:i,creator:r.text}),r}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:r}=this;if(!e)return;const{lastEditInfoEnabled:i}=e,o=null==t?void 0:t.editFieldsInfo;return i&&o?V$4(o,r.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:r,graphic:i,_expressionAttributes:o}=this,{attributes:s}=i,a=this.formattedAttributes.global;return $$7({attributes:s,fieldInfoMap:t,globalAttributes:a,expressionAttributes:o,layer:r,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this,r=null==e?void 0:e.title;return E$c(r,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this,r=null==e?void 0:e.content;return E$c(r,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:r,graphic:i,_effectivePopupTemplate:o,spatialReference:s,map:a,view:n}=this,{content:{value:p},title:{value:c}}=await T$o({content:this._getContent(),title:this._getTitle()});if(t!==this._featureAbortController||!i)return;await oe$3({graphic:i,popupTemplate:o,layer:r,spatialReference:s},e);const{expressionAttributes:{value:d}}=await T$o({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:y$g({popupTemplate:this._effectivePopupTemplate,spatialReference:s,graphic:i,map:a,interceptor:U$7.interceptor,view:n})});t===this._featureAbortController&&i&&(this._expressionAttributes=d,this._set("formattedAttributes",this._createFormattedAttributes(p,d)),this._set("title",this._compileTitle(c)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(p)||null));}_createFormattedAttributes(e,t){const{_effectivePopupTemplate:r,graphic:i,relatedInfos:o,_sourceLayer:s,_fieldInfoMap:a}=this,n=null==r?void 0:r.fieldInfos,l={...i.attributes,...t},p={global:re$3({fieldInfos:n,graphic:i,attributes:l,layer:s,fieldInfoMap:a,relatedInfos:o}),content:[]};return Array.isArray(e)&&e.forEach(((e,t)=>{"fields"===e.type&&e.fieldInfos&&(p.content[t]=re$3({fieldInfos:e.fieldInfos,graphic:i,attributes:l,layer:s,fieldInfoMap:a,relatedInfos:o}));})),p}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:r}=this;return this._queryRelatedInfos(t,X$5(r),e)}async _queryRelatedInfos(e,t,r){const{relatedInfos:i,_sourceLayer:o}=this;i.clear();const s=r$1G(o.associatedLayer)?await o.associatedLayer.load(r):o;if(!s)return;const n=t.filter((e=>e&&ae$2(e.fieldName)));if(!n||!n.length)return;t.forEach((e=>this._configureRelatedInfo(e,s)));const l=await S$d({relatedInfos:i,layer:s},r);Object.keys(l).forEach((e=>{var t;const r=i.get(e.toString()),o=null==(t=l[e])?void 0:t.value;r&&o&&(r.layerInfo=o.data);}));const p=await T$7({graphic:e,relatedInfos:i,layer:s},r);Object.keys(p).forEach((e=>{var t;I$8(null==(t=p[e])?void 0:t.value,i.get(e.toString()));}));}_configureRelatedInfo(e,t){const{relatedInfos:r}=this,i=p$16(e.fieldName);if(!i)return;const{layerId:o,fieldName:s}=i;if(!o)return;const a=r.get(o.toString())||h$r(o,t);a&&($$5({relatedInfo:a,fieldName:s,fieldInfo:e}),this.relatedInfos.set(o,a));}};B$5.interceptor=new e$A(de$2,pe$2),e$1_([d$1S()],B$5.prototype,"_error",void 0),e$1_([d$1S()],B$5.prototype,"_featureAbortController",void 0),e$1_([d$1S({readOnly:!0})],B$5.prototype,"_effectivePopupTemplate",null),e$1_([d$1S({readOnly:!0})],B$5.prototype,"_fieldInfoMap",null),e$1_([d$1S({readOnly:!0})],B$5.prototype,"_sourceLayer",null),e$1_([d$1S()],B$5.prototype,"abilities",void 0),e$1_([c$2Y("abilities")],B$5.prototype,"castAbilities",null),e$1_([d$1S({readOnly:!0})],B$5.prototype,"content",void 0),e$1_([d$1S({readOnly:!0})],B$5.prototype,"contentViewModels",void 0),e$1_([d$1S({type:Boolean})],B$5.prototype,"defaultPopupTemplateEnabled",void 0),e$1_([d$1S({readOnly:!0})],B$5.prototype,"state",null),e$1_([d$1S({readOnly:!0})],B$5.prototype,"formattedAttributes",void 0),e$1_([d$1S({type:h$U,value:null})],B$5.prototype,"graphic",null),e$1_([d$1S({readOnly:!0})],B$5.prototype,"lastEditInfo",void 0),e$1_([d$1S()],B$5.prototype,"relatedInfos",void 0),e$1_([d$1S()],B$5.prototype,"spatialReference",null),e$1_([d$1S({readOnly:!0})],B$5.prototype,"title",void 0),e$1_([d$1S()],B$5.prototype,"map",null),e$1_([d$1S({readOnly:!0})],B$5.prototype,"waitingForContent",null),e$1_([d$1S()],B$5.prototype,"view",void 0),B$5=U$7=e$1_([i$2w(q$5)],B$5);const G$4=B$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$L=i=>{let c=class extends i{constructor(){super(...arguments),this.renderNodeContent=e=>e$1u(e)&&!e.destroyed?n$2o("div",{key:e},e.render()):e instanceof HTMLElement?n$2o("div",{key:e,bind:e,afterCreate:this._attachToNode}):t$1m(e)?n$2o("div",{key:e,bind:e.domNode,afterCreate:this._attachToNode}):null;}_attachToNode(e){const r=this;e.appendChild(r);}};return c=e$1_([i$2w("esri.widgets.Feature.ContentMixin")],c),c};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const g$g={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},y$f={title:!0,content:!0,lastEditedInfo:!0};let _$b=class extends(i$L(z$n)){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements={...y$f},this.map=null,this.view=null,this.viewModel=new G$4;}initialize(){this.own(i$2i(this,"viewModel.contentViewModels",(()=>this._setupContentWidgets())));}loadDependencies(){return import('./calcite-notice.js')}destroy(){this._destroyContentWidgets();}castVisibleElements(e){return {...y$f,...e}}render(){const{state:e}=this.viewModel,t=n$2o("div",{class:g$g.container,key:"container"},this.renderTitle(),"error"===e?this.renderError():"loading"===e?this.renderLoading():this.renderContentContainer());return n$2o("div",{class:this.classes(g$g.base,g$g.esriWidget)},t)}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t);}nextMedia(e){this.viewModel.nextMedia(e);}previousMedia(e){this.viewModel.previousMedia(e);}renderError(){const{messagesCommon:e,messages:t,visibleElements:i}=this;return n$2o("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},i.title?n$2o("div",{key:"error-title",slot:"title"},e.errorMessage):null,n$2o("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return n$2o("div",{key:"loading-container",class:g$g.loadingSpinnerContainer},n$2o("span",{class:this.classes(g$g.iconLoading,g$g.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?n$2o("div",{class:g$g.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?n$2o(s$1e,{level:this.headingLevel,class:g$g.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?n$2o("div",{key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if("string"==typeof e){const e=this._contentWidgets[0];return !e||e.destroyed?null:n$2o("div",{key:`${t}-content`},e.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:i}=this;if("boolean"!=typeof i.content&&!i.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:i,attachmentInfos:s}=t.viewModel;return "loading"===i||s.length>0?n$2o("div",{key:this._buildKey("attachments-element",e),class:this.classes(g$g.contentElement)},t.render()):null}renderCustom(e,t){const{creator:i}=e,s=this._contentWidgets[t];return !s||s.destroyed?null:i?n$2o("div",{key:this._buildKey("custom-element",t),class:g$g.contentElement},s.render()):null}renderFields(e){const t=this._contentWidgets[e];return !t||t.destroyed?null:n$2o("div",{key:this._buildKey("fields-element",e),class:g$g.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return !t||t.destroyed?null:n$2o("div",{key:this._buildKey("media-element",e),class:g$g.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:i}=this.viewModel;if(!i||!e.lastEditedInfo)return null;const{date:s,user:n}=i,r="edit"===i.type?n?t.lastEditedByUser:t.lastEdited:n?t.lastCreatedByUser:t.lastCreated,o=s$23(r,{date:s,user:n});return n$2o("div",{key:"edit-info-element",class:this.classes(g$g.lastEditedInfo,g$g.contentElement)},o)}renderText(e,t){const i=e.text,s=this._contentWidgets[t];return !s||s.destroyed?null:i?n$2o("div",{key:this._buildKey("text-element",t),class:this.classes(g$g.contentElement,g$g.text)},s.render()):null}_buildKey(e,...t){return `${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidgets(){this._contentWidgets.forEach((e=>{e.viewModel=null,e&&!e.destroyed&&e.destroy();})),this._contentWidgets=[];}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,i=this.get("viewModel.content"),{contentViewModels:s}=this.viewModel;if(Array.isArray(i))i.forEach(((i,n)=>{"attachments"===i.type&&(this._contentWidgets[n]=new m$O({displayType:i.displayType,headingLevel:t.title?e+1:e,viewModel:s[n]})),"fields"===i.type&&(this._contentWidgets[n]=new m$N({viewModel:s[n]})),"media"===i.type&&(this._contentWidgets[n]=new g$n({viewModel:s[n]})),"text"===i.type&&(this._contentWidgets[n]=new p$1j({viewModel:s[n]})),"custom"===i.type&&(this._contentWidgets[n]=new p$1j({viewModel:s[n]}));}),this);else {const e=s[0];e&&!e.destroyed&&(this._contentWidgets[0]=new p$1j({viewModel:e}));}this.scheduleRender();}};e$1_([o$1Q("viewModel.graphic")],_$b.prototype,"graphic",void 0),e$1_([o$1Q("viewModel.defaultPopupTemplateEnabled")],_$b.prototype,"defaultPopupTemplateEnabled",void 0),e$1_([d$1S()],_$b.prototype,"headingLevel",void 0),e$1_([d$1S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],_$b.prototype,"label",void 0),e$1_([d$1S(),e$1w("esri/widgets/Feature/t9n/Feature")],_$b.prototype,"messages",void 0),e$1_([d$1S(),e$1w("esri/t9n/common")],_$b.prototype,"messagesCommon",void 0),e$1_([d$1S(),e$1w("esri/widgets/support/t9n/uriUtils")],_$b.prototype,"messagesURIUtils",void 0),e$1_([o$1Q("viewModel.spatialReference")],_$b.prototype,"spatialReference",void 0),e$1_([o$1Q("viewModel.title")],_$b.prototype,"title",void 0),e$1_([d$1S()],_$b.prototype,"visibleElements",void 0),e$1_([c$2Y("visibleElements")],_$b.prototype,"castVisibleElements",null),e$1_([o$1Q("viewModel.map")],_$b.prototype,"map",void 0),e$1_([o$1Q("viewModel.view")],_$b.prototype,"view",void 0),e$1_([d$1S({type:G$4})],_$b.prototype,"viewModel",void 0),_$b=e$1_([i$2w("esri.widgets.Feature")],_$b);const w$a=_$b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$M=class extends n$2y.EventedAccessor{constructor(e){super(e),this._anchorHandles=new u$1X,this.location=null,this.screenLocation=null,this.screenLocationEnabled=!1,this.view=null,this._anchorHandles.add([f$1p(this,["screenLocationEnabled","location","view.size","view.stationary"],(()=>this._updateScreenPointAndHandle())),f$1p(this,["view","view.ready"],(()=>this._wireUpView()))]);}destroy(){this.view=null,this._anchorHandles&&this._anchorHandles.destroy(),this._anchorHandles=null,this._viewpointHandle=null;}_wireUpView(){const e="view";this._anchorHandles.remove(e),this._viewpointHandle=null;if(!this.get("view.ready"))return;this._setScreenLocation();const{view:t}=this,o="3d"===t.type?"camera":"viewpoint",i=O$p(t,o,(()=>this._viewpointChange()));this._anchorHandles.add(i,e),this._viewpointHandle=i,this._toggleWatchingViewpoint();}_viewpointChange(){this._setScreenLocation(),this.emit("view-change");}_updateScreenPointAndHandle(){this._setScreenLocation(),this._toggleWatchingViewpoint();}_toggleWatchingViewpoint(){const{_viewpointHandle:e,location:t,screenLocationEnabled:o}=this;if(!e)return;t&&o?e.resume():e.pause();}_setScreenLocation(){const{location:e,view:t,screenLocationEnabled:o}=this,n=this.get("view.ready"),s=o&&n&&r$1G(e)?t.toScreen(e):null;this._set("screenLocation",s);}};e$1_([d$1S()],c$M.prototype,"location",void 0),e$1_([d$1S({readOnly:!0})],c$M.prototype,"screenLocation",void 0),e$1_([d$1S()],c$M.prototype,"screenLocationEnabled",void 0),e$1_([d$1S()],c$M.prototype,"view",void 0),c$M=e$1_([i$2w("esri.widgets.support.AnchorElementViewModel")],c$M);const l$B=c$M;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$t="esri.widgets.CompassViewModel";let p$E=class extends l$B{constructor(s){super(s),this.visible=!1;}};e$1_([d$1S()],p$E.prototype,"visible",void 0),p$E=e$1_([i$2w(t$t)],p$E);const c$L=p$E;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$K={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let h$o=class extends z$n{constructor(i,s){super(i,s),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new c$L,this.visible=!1;}initialize(){this.own([f$1p(this,"visible",(i=>this._visibleChange(i)))]);}destroy(){this._animationPromise=null;}show(i){const{location:s,promise:e}=i;s&&(this.viewModel.location=s),this.visible=!0;const o=()=>this.hide();e&&e.catch((()=>{})).then(o);}hide(){this.visible=!1;}render(){const{visible:i}=this,{screenLocation:s}=this.viewModel,e=!!s,o=i&&e,t=!i&&e,r={[c$K.spinnerStart]:o,[c$K.spinnerFinish]:t},n=this._getPositionStyles();return n$2o("div",{class:this.classes(c$K.base,r),styles:n})}_visibleChange(i){if(i)return void(this.viewModel.screenLocationEnabled=!0);const s=L$w(this._animationDelay);this._animationPromise=s,s.catch((()=>{})).then((()=>{this._animationPromise===s&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null);}));}_getPositionStyles(){const{screenLocation:i,view:e}=this.viewModel;if(!e||t$1O(i))return {};const{padding:o}=e;return {left:i.x-o.left+"px",top:i.y-o.top+"px"}}};e$1_([o$1Q("viewModel.location")],h$o.prototype,"location",void 0),e$1_([o$1Q("viewModel.view")],h$o.prototype,"view",void 0),e$1_([d$1S({type:c$L})],h$o.prototype,"viewModel",void 0),e$1_([o$1Q("viewModel.visible")],h$o.prototype,"visible",void 0),h$o=e$1_([i$2w("esri.widgets.Spinner")],h$o);const m$r=h$o;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$q{constructor(t=(t=>t.values().next().value)){this._peeker=t,this._items=new Set;}get length(){return this._items.size}clear(){this._items.clear();}last(){if(0===this._items.size)return;let t;for(t of this._items);return t}peek(){if(0!==this._items.size)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t);}contains(t){return this._items.has(t)}pop(){if(0===this.length)return;const e=this.peek();return this._items.delete(q$q(e)),e}popLast(){if(0===this.length)return;const e=this.last();return this._items.delete(q$q(e)),e}remove(t){this._items.delete(t);}filter(t){return this._items.forEach((e=>{t(e)||this._items.delete(e);})),this}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$s=s$2l("mac")?"Meta":"Ctrl",o$r={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let s=48;s<58;s++)o$r[s]=String.fromCharCode(s);for(let s=1;s<25;s++)o$r[111+s]=`F${s}`;for(let s=65;s<91;s++)o$r[s]=[String.fromCharCode(s+32),String.fromCharCode(s)];function a$Q(e){if(void 0!==e.key)return i$2r(e);const t=o$r[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function n$S(r){switch(r){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return !0}return !1}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$p{constructor(e,t=[]){this.eventType=e,this.keyModifiers=t;}matches(e){if(e.type!==this.eventType)return !1;if(0===this.keyModifiers.length)return !0;const t=e.modifiers;for(const i of this.keyModifiers)if(!t.has(i))return !1;return !0}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$R=s$2h.getLogger("esri.views.input.InputHandler");class i$K{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e;}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const t=this._incoming[e];for(const e of t)this._incomingEventMatches.push(e.match);}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map((e=>e.eventType))),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return !1}onInstall(e){this._manager?n$R.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback((e=>this._handleEvent(e))),e.setUninstallCallback((()=>this._onUninstall())),this._manager=e);}onUninstall(){}registerIncoming(e,n,i){let a;"function"==typeof n?(i=n,a=[]):a=n||[];const o="string"==typeof e?new e$p(e,a):e,h=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null;},r=e=>{const t=this._incoming[e.match.eventType];if(t){const n=t.indexOf(e);t.splice(n,1),h(),this._manager&&this._manager.updateDependencies();}},g=new s$E(o,i,{onPause:r,onRemove:r,onResume:e=>{const t=this._incoming[e.match.eventType];t&&-1===t.indexOf(e)&&(t.push(e),h(),this._manager&&this._manager.updateDependencies());}});let c=this._incoming[o.eventType];return c||(c=[],this._incoming[o.eventType]=c),c.push(g),h(),this._manager&&this._manager.updateDependencies(),g}registerOutgoing(e){if(this._outgoing[e])throw Error("There is already a callback registered for this outgoing InputEvent: "+e);const t=new a$P(e,{onEmit:(e,t,n,i)=>{this._manager.emit(e.eventType,t,n,i);},onRemove:e=>{delete this._outgoing[e.eventType],this._manager.updateDependencies();}});return this._outgoing[e]=t,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),t}startCapturingPointer(e){this._manager.setPointerCapture(e,!0);}stopCapturingPointer(e){this._manager.setPointerCapture(e,!1);}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs();}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):n$R.error("This InputHandler is not registered with an InputManager");}_handleEvent(e){const t=this._incoming[e.type];if(t)for(const n of t)if(n.match.matches(e)&&(n.callback(e),e.shouldStopPropagation()))break}}class s$E{constructor(e,t,n){this.match=e,this._callback=t,this._handler=n;}pause(){this._handler.onPause(this);}resume(){this._handler.onResume(this);}remove(){this._handler.onRemove(this);}get callback(){return this._callback}}class a$P{constructor(e,t){this.eventType=e,this._removed=!1,this._handler=t;}emit(e,t,n){this._removed||this._handler.onEmit(this,e,t,n);}remove(){this._removed=!0,this._handler.onRemove(this);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$r extends i$K{constructor(e){super(!0),this._onChange=e,this._value="mouse",this.registerIncoming("pointer-down",(e=>{const t="touch"===e.data.native.pointerType;this._setValue(t?"touch":"mouse");})),this._moveHandler=this.registerIncoming("pointer-move",(e=>{const t="touch"===e.data.native.pointerType;this._setValue(t?"touch":"mouse");})),this._moveHandler.pause();}_setValue(e){e!==this._value&&("touch"===e?this._moveHandler.resume():this._moveHandler.pause(),this._value=e,this._onChange(e));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h$n=s$2h.getLogger("esri.views.input.InputManager");let d$p=class extends p$33{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=t$s,this.latestPointerType="mouse",this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation};}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers();}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource=null,this._currentPropagation=null;}get hasPendingInputs(){return this._handlers.some((e=>e.handler.hasPendingInputs))}installHandlers(e,t,r=u$t.INTERNAL){if(this._nameToGroup[e])return void h$n.error("There is already an InputHandler group registered under the name `"+e+"`");if(0===t.length)return void h$n.error("Can't register a group of zero handlers");const i={name:e,handlers:t.map((e=>({handler:e,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null})))};this._nameToGroup[e]=i;for(let n=i.handlers.length-1;n>=0;n--){const e=i.handlers[n];this._handlers.push(e),e.handler.onInstall({updateDependencies:()=>{this.updateDependencies();},emit:(t,r,i,n,s)=>{this._emitInputEvent(e.priorityIndex+1,t,r,i,s,n);},setPointerCapture:(t,r)=>{this._setPointerCapture(i,e,t,r);},setEventCallback:t=>{e.eventCallback=t;},setUninstallCallback:t=>{e.uninstallCallback=t;},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs");}});}this.updateDependencies();}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach((e=>{e.removed=!0,e.uninstallCallback();})),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):h$n.error("There is no InputHandler group registered under the name `"+e+"`");}hasHandlers(e){return void 0!==this._nameToGroup[e]}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const e=this._handlers[r];e.priorityIndex=r,this._handlersPriority.push(e);}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const i=this._handlersPriority[r];i.priorityIndex=r;let n=i.handler.hasSideEffects;if(!n)for(const t of i.handler.outgoingEventTypes)if(e.has(t)){n=!0;break}if(n)for(const r of i.handler.incomingEventMatches){e.add(r.eventType);for(const e of r.keyModifiers)n$S(e)||t.add(e);}i.active=n;}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents);}_setLatestPointerType(e){this._set("latestPointerType",e);}_onEventReceived(e,t){if("pointer-capture-lost"===e){const e=t;this._pointerCaptures.delete(e.native.pointerId);}this._updateKeyModifiers(e,t);const r=null!=this.test.timestamp?this.test.timestamp:t.native?t.native.timestamp:void 0,i=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,r,i);}_updateKeyModifiers(e,t){if(!t)return;let r=!1;const i=()=>{if(!r){const e=new Set;this._activeKeyModifiers.forEach((t=>{e.add(t);})),this._activeKeyModifiers=e,r=!0;}},n=(e,t)=>{t&&!this._activeKeyModifiers.has(e)?(i(),this._activeKeyModifiers.add(e)):!t&&this._activeKeyModifiers.has(e)&&(i(),this._activeKeyModifiers.delete(e));};if("key-down"===e||"key-up"===e){const r=t.key;this._keyModifiers.has(r)&&n(r,"key-down"===e);}const s=t.native;n("Alt",!(!s||!s.altKey)),n("Ctrl",!(!s||!s.ctrlKey)),n("Shift",!(!s||!s.shiftKey)),n("Meta",!(!s||!s.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey));}_installRecognizers(){this._latestPointerTypeHandler=new t$r((e=>this._setLatestPointerType(e))),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,u$t.INTERNAL),this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler],u$t.INTERNAL);}_setPointerCapture(e,t,r,i){const n=e.name+"-"+t.priorityIndex,s=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,s),i?(s.add(n),1===s.size&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):s.has(n)&&(s.delete(n),0===s.size&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)));}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter((e=>!e.removed)),this.updateDependencies();}_emitInputEventFromSource(e,t,r,i){this._emitInputEvent(0,e,t,r,i);}_emitInputEvent(e,t,r,i,n,s){const o=void 0!==i?i:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),a=void 0!==n&&n,p={event:new l$A(t,r,o,s||this._activeKeyModifiers,a),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(p):this._doNewPropagation(p);}_doNewPropagation(e){this._currentPropagation={events:new e$q,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation();}_continuePropagation(){const e=this._currentPropagation;if(e){for(;this._currentPropagation.events.length>0;){const{event:t,priorityIndex:r}=this._currentPropagation.events.pop(),i=t.data&&t.data.eventId;if(!(null!=i&&this._stoppedPropagationEventIds.has(i)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else {if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback(t),t.shouldStopPropagation()){null!=i&&this._stoppedPropagationEventIds.add(i);break}if(t.shouldPausePropagation((()=>this._continuePropagation())))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1];}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies();}}_pausePropagation(e){const t=new e$q;for(t.push(e);this._currentPropagation.events.length;)t.push(this._currentPropagation.events.pop());this._currentPropagation.events=t,this._currentPropagation.currentHandler=null;}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const e of t.handler.incomingEventMatches){if(r.eventType!==e.eventType)continue;const t=r.keyModifiers.filter((t=>-1!==e.keyModifiers.indexOf(t)));if(t.length===r.keyModifiers.length!==(t.length===e.keyModifiers.length))return r.keyModifiers.length>e.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const r of e){let e=0;for(;e<t.length&&this._compareHandlerPriority(r,t[e])>=0;)e++;t.splice(e,0,r);}return t}get debug(){const e=e=>{const t=this._setPointerCapture;this._setPointerCapture=()=>{},e(),this._setPointerCapture=t;};return {injectEvent:(t,r)=>{e((()=>{this._onEventReceived(t,r);}));},disablePointerCapture:e}}};e$1_([d$1S({readOnly:!0})],d$p.prototype,"hasPendingInputs",null),e$1_([d$1S()],d$p.prototype,"eventSource",void 0),e$1_([d$1S()],d$p.prototype,"recognizers",void 0),e$1_([d$1S({readOnly:!0})],d$p.prototype,"latestPointerType",void 0),d$p=e$1_([i$2w("esri.views.input.InputManager")],d$p);class l$A{constructor(e,t,r,i,n){this.type=e,this.data=t,this.timestamp=r,this.modifiers=i,this.cancelable=n,this._propagationState=0,this._resumeCallback=null;}stopPropagation(){this._propagationState|=1;}shouldStopPropagation(){return 0!=(1&this._propagationState)}async(e){this._propagationState|=2;const t=(e,t)=>{this._propagationState&=-3;const r=this._resumeCallback;if(this._resumeCallback=null,r&&r(),t)throw e;return e};return ("function"==typeof e?e():e).then((e=>t(e,!1)),(e=>t(e,!0)))}shouldPausePropagation(e){return !!(2&this._propagationState)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault();}}const u$t={DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$o(n){return n&&"function"==typeof n.highlight}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$D={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},o$q=new a$1L({id:"zoom-to-feature",title:"{messages.zoom}",className:s$D.iconZoom}),t$q=new a$1L({id:"remove-selected-feature",title:"{messages.remove}",className:s$D.iconTrash}),r$s=new a$1L({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:s$D.iconZoom}),i$J=new a$1L({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:s$D.iconBrowseClusteredFeatures});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$O="esri.widgets.Popup.PopupViewModel",s$C=s$2h.getLogger(a$O),c$J=function(t){const{event:a,view:s}=t,{action:c}=a,u=s&&s.popup;if(!c)return Promise.reject(new s$29("trigger-action:missing-arguments","Event has no action"));if(!u)return Promise.reject(new s$29("trigger-action:missing-arguments","view.popup is missing"));const{disabled:d,id:w}=c;if(!w)return Promise.reject(new s$29("trigger-action:invalid-action","action.id is missing"));if(d)return Promise.reject(new s$29("trigger-action:invalid-action","Action is disabled"));if(w===o$q.id)return l$z(u.viewModel);if(w===r$s.id)return g$f(u.viewModel);if(w===i$J.id)return u.featureMenuOpen=!u.featureMenuOpen,u.viewModel.browseClusterEnabled=!u.viewModel.browseClusterEnabled,Promise.resolve();if(u.viewModel.browseClusterEnabled=!1,w===t$q.id){u.close();const{selectedFeature:t}=u;if(!t)return Promise.reject(new s$29(`trigger-action:${t$q.id}`,"selectedFeature is required",{selectedFeature:t}));const{sourceLayer:r}=t;return r?r.remove(t):s.graphics.remove(t),Promise.resolve()}return Promise.resolve()};function u$s(e){const{selectedFeature:t,location:r,view:i}=e;if(!i)return null;if("3d"===i.type)return t||r;return e.get("selectedFeature.geometry")||r}function d$o(t,r){if("3d"!==(null==r?void 0:r.type)||!t||"esri.Graphic"!==t.declaredClass)return !0;const i=r.getViewForGraphic(t);if(i&&"whenGraphicBounds"in i){let r=!1;return i.whenGraphicBounds(t,{useViewElevation:!0}).then((e=>{r=!e||!e.boundingBox||e.boundingBox[0]===e.boundingBox[3]&&e.boundingBox[1]===e.boundingBox[4]&&e.boundingBox[2]===e.boundingBox[5];})).catch((()=>{const r=new s$29("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:t});s$C.error(r);})),r}return !0}async function l$z(t){const{location:i,selectedFeature:o,view:n,zoomFactor:a}=t,c=u$s(t);if(!c){const t=new s$29("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:c,view:n});return s$C.error(t),Promise.reject(t)}const l=n.scale/a,g=t.get("selectedFeature.geometry")||i,w=g&&"point"===g.type&&d$o(o,n);o$q.active=!0,o$q.disabled=!0,await t.view.goTo({target:c,scale:w?l:void 0}),o$q.active=!1,o$q.disabled=!1,t.zoomToLocation=null,w&&(t.location=g);}async function g$f(t){const{selectedFeature:r,view:o}=t;if("2d"!==(null==o?void 0:o.type)){const t=new s$29("zoomToCluster:invalid-view","View must be 2d MapView.",{view:o});throw s$C.error(t),t}if(!r.isAggregate){const t=new s$29("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:r});throw s$C.error(t),t}const n=r.sourceLayer,a=await o.whenLayerView(n),c=a.createQuery();c.aggregateIds=[r.getObjectId()],r$s.active=!0,r$s.disabled=!0;const{extent:u}=await a.queryExtent(c);await o.goTo({target:u}),r$s.active=!1,r$s.disabled=!1;}async function w$9(t){const{selectedFeature:r,view:i}=t;if("2d"!==(null==i?void 0:i.type)){const t=new s$29("displayClusterExtent:invalid-view","View must be 2d MapView.",{view:i});throw s$C.error(t),t}if(!r.isAggregate){const t=new s$29("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:r});throw s$C.error(t),t}const o=r.sourceLayer,n=await i.whenLayerView(o),a=n.createQuery();a.aggregateIds=[r.getObjectId()];const{extent:c}=await n.queryExtent(a);t.selectedClusterBoundaryFeature.geometry=c,i.graphics.add(t.selectedClusterBoundaryFeature);}async function v$9(t){const{selectedFeature:r,view:i}=t;if("2d"!==(null==i?void 0:i.type)){const t=new s$29("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:i});throw s$C.error(t),t}if(!r.isAggregate){const t=new s$29("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:r});throw s$C.error(t),t}const n=r.sourceLayer,a=await i.whenLayerView(n),c=a.createQuery();c.aggregateIds=[r.getObjectId()],i$J.active=!0,i$J.disabled=!0;const{features:u}=await a.queryFeatures(c);i$J.active=!1,i$J.disabled=!1,i.popup.open({features:[r].concat(u),featureMenuOpen:!0});}function p$D(e){e.features=e.features.filter((e=>e.isAggregate));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$n=e=>{let t=class extends e{constructor(...o){super(...o),this.goToOverride=null,this.view=null;}callGoTo(o){const{view:r}=this;return this.goToOverride?this.goToOverride(r,o):r.goTo(o.target,o.options)}};return e$1_([d$1S()],t.prototype,"goToOverride",void 0),e$1_([d$1S()],t.prototype,"view",void 0),t=e$1_([i$2w("esri.widgets.support.GoTo")],t),t};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const T$5=S$F.ofType({key:"type",defaultKeyValue:"button",base:c$1M,typeMap:{button:a$1L,toggle:a$1K}}),S$a=()=>[o$q.clone()],B$4=()=>[r$s.clone(),i$J.clone()],R$5="esri.widgets.Popup.PopupViewModel",G$3=s$2h.getLogger(R$5);let z$4=class extends(e$n(l$B)){constructor(e){super(e),this._handles=new u$1X,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new T$5,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new h$U({symbol:new S$x({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null;}get isLoadingFeature(){return this.featureViewModels.some((e=>e.waitingForContent))}initialize(){this._handles.add([i$2i(this,["autoOpenEnabled","view"],(()=>this._autoOpenEnabledChange())),this.on("view-change",(()=>this._autoClose())),f$1p(this,["highlightEnabled","selectedFeature","visible","view"],(()=>this._highlightFeature())),f$1p(this,"view.animation.state",(e=>this._animationStateChange(e))),f$1p(this,"location",(e=>this._locationChange(e))),f$1p(this,"selectedFeature",(e=>this._selectedFeatureChange(e))),f$1p(this,["selectedFeatureIndex","featureCount","featuresPerPage"],(()=>this._selectedFeatureIndexChange())),f$1p(this,["featurePage","selectedFeatureIndex","featureCount","featuresPerPage, featureViewModels"],(()=>this._setGraphicOnFeatureViewModels())),f$1p(this,"featureViewModels",(()=>this._featureViewModelsChange())),this.on("trigger-action",(e=>c$J({event:e,view:this.view}))),h$1q(this,"waitingForResult",(()=>this._waitingForResultChange()),!0),f$1p(this,["features","view","view.map","view.spatialReference"],(()=>this._updateFeatureVMs())),f$1p(this,["view.scale"],this._viewScaleChange),h$1q(this,"visible",(()=>this.browseClusterEnabled=!1)),f$1p(this,"browseClusterEnabled",(e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing()))]);}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null;}get active(){return !(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new T$5;e.removeAll();const{actions:t,defaultActions:s,defaultPopupTemplateEnabled:i,includeDefaultActions:o,selectedFeature:r}=this,n=o?s.concat(t):t,a=r&&("function"==typeof r.getEffectivePopupTemplate&&r.getEffectivePopupTemplate(i)||r.popupTemplate),l=a&&a.actions,u=a&&a.overwriteActions?l:l?l.concat(n):n;return u&&u.filter(Boolean).forEach((t=>e.add(t))),e}get defaultActions(){var e;const t=this._get("defaultActions")||new T$5;return t.removeAll(),t.addMany(null!=(e=this.selectedFeature)&&e.isAggregate?B$4():S$a()),t}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:s,promiseCount:i,selectedFeatureIndex:o}=this,r=i&&t.length;r&&s&&-1===o?this.selectedFeatureIndex=0:r&&-1!==o||(this.selectedFeatureIndex=t.length?0:-1);}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=R$o(e)),this._set("location",e);}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return !(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||0!==this.featureCount)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach((e=>{this._pendingPromises.add(e);const t=t=>{this._pendingPromises.has(e)&&this._updateFeatures(t),this._updatePendingPromises(e);},s=()=>this._updatePendingPromises(e);e.then(t,s);})),this.notifyChange("pendingPromisesCount");}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;if(-1===t)return null;return e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return "number"==typeof e?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this._set("selectedFeatureIndex",e);}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=u$s(this);if(!t){const s=new s$29("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return G$3.error(s),Promise.reject(s)}return this.callGoTo({target:{target:t,scale:e.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null});}fetchFeatures(e,t){const{view:s}=this;if(!s||!e){const t=new s$29("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:s});return G$3.error(t),Promise.reject(t)}return s.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:s}=t;delete t.fetchFeatures,s&&this._setFetchFeaturesPromises(t.location),this.set(t);}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t});}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){p$D(this),this._clearBrowsedClusterGraphics();}async enableClusterBrowsing(){await w$9(this),await v$9(this);}_animationStateChange(e){this.zoomToLocation||(o$q.disabled="waiting-for-target"===e);}_clearBrowsedClusterGraphics(){var e;const t=null==(e=this.view)?void 0:e.graphics;t&&(t.remove(this.selectedClusterBoundaryFeature),t.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null;}_viewScaleChange(){var e;(null!=(e=this.selectedFeature)&&e.isAggregate||this.browseClusterEnabled)&&(this.browseClusterEnabled=!1,this.visible=!1);}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:s}=this;s&&e&&(!t||t.geometry)&&this.centerAtLocation();}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null;}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null;}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:s,featuresPerPage:i,featureViewModels:o}=this;if(null===s)return;const r=((s-1)*i+t)%t,n=r+i;o.slice(r,n).forEach(((t,s)=>{t&&!t.graphic&&(t.graphic=e[r+s]);}));}async _selectedFeatureChange(e){if(!e)return;const{location:t,updateLocationEnabled:s,view:i}=this;if(this.browseClusterEnabled){if(this._selectedClusterFeature&&(i.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),e.isAggregate)return;return e.symbol=await f$O(e),this._selectedClusterFeature=e,void i.graphics.add(this._selectedClusterFeature)}!s&&t||!e.geometry?s&&!e.geometry&&this.centerAtLocation().then((()=>{this.location=i.center.clone();})):this.location=e$1Y(this._getPointFromGeometry(e.geometry));}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1);}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then((e=>{const{clientOnlyGraphics:t,promisesPerLayerView:s}=e,i=Promise.resolve(t),o=s.map((e=>e.promise));this.promises=[i,...o];}))}_destroyFeatureVMs(){this.featureViewModels.forEach((e=>e&&!e.destroyed&&e.destroy())),this._set("featureViewModels",[]);}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:s}=this;if(null!=e&&e.isAggregate||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const i=s.slice(0),o=[];t.forEach(((t,s)=>{if(!t)return;let r=null;if(i.some(((e,s)=>(e&&e.graphic===t&&(r=e,i.splice(s,1)),!!r))),r)o[s]=r;else {var n,a;const i=new G$4({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(n=this.view)?void 0:n.spatialReference,graphic:t===e?t:null,map:null==(a=this.view)?void 0:a.map,view:this.view});o[s]=i;}})),i.forEach((e=>e&&!e.destroyed&&e.destroy())),this._set("featureViewModels",o);}_getScreenPoint(e){const{view:t}=this;return t&&e&&"function"==typeof t.toScreen?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:s}=this;if(t.remove(e),s&&this.view){const s=this.view.on("click",(e=>{"mouse"===e.pointerType&&0!==e.button||this._fetchFeaturesAndOpen(e);}),u$t.WIDGET);t.add(s,e);}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult");}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const s=new AbortController,{signal:i}=s;this._fetchFeaturesController=s,this.notifyChange("waitingForResult");const o=this.fetchFeatures(e,{signal:i,event:t});return o.catch((()=>{})).then((()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult");})),o}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:s}=e,{view:i}=this;this._fetchFeaturesWithController(t,e).then((e=>{const{clientOnlyGraphics:t,promisesPerLayerView:o,location:r}=e,n=[Promise.resolve(t),...o.map((e=>e.promise))];return i.popup.open({location:r||s,promises:n}),e}));}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"));}_autoClose(){this.autoCloseEnabled&&(this.visible=!1);}_getPointFromGeometry(e){return t$1O(e)?null:"point"===e.type?e:"extent"===e.type?e.center:"polygon"===e.type?e.centroid:"multipoint"===e.type||"polyline"===e.type?e.extent.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}async _highlightFeature(){const e="highlight";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:s,view:i,visible:o}=this;if(!(t&&i&&s&&o))return;let{layer:r,sourceLayer:n}=t;if("map-notes"!==(null==n?void 0:n.type)&&"subtype-group"!==(null==n?void 0:n.type)||(r=n),!(r&&r instanceof b$m))return;const a=this._getLayerView(i,r);this._highlightPromise=a;const l=await a;if(!(l&&e$o(l)&&this._highlightPromise===a&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const u="objectIdField"in r&&r.objectIdField,h=t.attributes,c=h&&u&&h[u],p=l.highlight(c||t);this._handles.add(p,e);}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const s=e.filter((e=>-1===t.indexOf(e)));this.features=t.concat(s);}};e$1_([d$1S()],z$4.prototype,"featurePage",void 0),e$1_([d$1S()],z$4.prototype,"isLoadingFeature",null),e$1_([d$1S({type:T$5})],z$4.prototype,"actions",void 0),e$1_([d$1S({readOnly:!0})],z$4.prototype,"active",null),e$1_([d$1S({readOnly:!0})],z$4.prototype,"allActions",null),e$1_([d$1S({type:Boolean})],z$4.prototype,"defaultPopupTemplateEnabled",void 0),e$1_([d$1S()],z$4.prototype,"autoCloseEnabled",void 0),e$1_([d$1S()],z$4.prototype,"autoOpenEnabled",void 0),e$1_([d$1S()],z$4.prototype,"browseClusterEnabled",void 0),e$1_([d$1S()],z$4.prototype,"content",void 0),e$1_([d$1S({type:T$5,readOnly:!0})],z$4.prototype,"defaultActions",null),e$1_([d$1S({readOnly:!0})],z$4.prototype,"featureCount",null),e$1_([d$1S()],z$4.prototype,"features",null),e$1_([d$1S()],z$4.prototype,"featuresPerPage",void 0),e$1_([d$1S()],z$4.prototype,"featureViewModelAbilities",void 0),e$1_([d$1S({readOnly:!0})],z$4.prototype,"featureViewModels",void 0),e$1_([d$1S()],z$4.prototype,"highlightEnabled",void 0),e$1_([d$1S()],z$4.prototype,"includeDefaultActions",void 0),e$1_([d$1S({type:b$O})],z$4.prototype,"location",null),e$1_([d$1S({readOnly:!0})],z$4.prototype,"pendingPromisesCount",null),e$1_([d$1S({readOnly:!0})],z$4.prototype,"selectedClusterBoundaryFeature",void 0),e$1_([d$1S({readOnly:!0})],z$4.prototype,"waitingForResult",null),e$1_([d$1S({readOnly:!0})],z$4.prototype,"promiseCount",null),e$1_([d$1S()],z$4.prototype,"promises",null),e$1_([d$1S({value:null,readOnly:!0})],z$4.prototype,"selectedFeature",null),e$1_([d$1S({value:-1})],z$4.prototype,"selectedFeatureIndex",null),e$1_([d$1S({readOnly:!0})],z$4.prototype,"selectedFeatureViewModel",null),e$1_([d$1S({readOnly:!0})],z$4.prototype,"state",null),e$1_([d$1S()],z$4.prototype,"title",void 0),e$1_([d$1S()],z$4.prototype,"updateLocationEnabled",void 0),e$1_([d$1S()],z$4.prototype,"view",void 0),e$1_([d$1S()],z$4.prototype,"visible",void 0),e$1_([d$1S()],z$4.prototype,"zoomFactor",void 0),e$1_([d$1S()],z$4.prototype,"zoomToLocation",void 0),e$1_([d$1S()],z$4.prototype,"centerAtLocation",null),z$4=e$1_([i$2w(R$5)],z$4);const U$6=z$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const O$8="selected-index",N$7=0,B$3="popup-spinner",T$4={iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button"},D$7={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},E$7="esri-popup";function P$9(e,t){return void 0===t?`${E$7}__${e}`:`${E$7}__${e}-${t}`}const L$7="esri.widgets.Popup",S$9=s$2h.getLogger(L$7),V$3={closeButton:!0,featureNavigation:!0};let R$4=class extends(i$L(z$n)){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new u$1X,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([e])=>{null!=e&&e.isIntersecting&&this.viewModel.featurePage++;},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback),this._displaySpinnerThrottled=e$I((()=>this._displaySpinner()),N$7),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new U$6,this.visible=null,this.visibleElements={...V$3},this._addSelectedFeatureIndexHandle(),this.own([f$1p(this,"viewModel.screenLocation",(()=>this._positionContainer())),f$1p(this,["viewModel.active","dockEnabled"],(()=>this._toggleScreenLocationEnabled())),f$1p(this,"viewModel.screenLocation",((e,t)=>{!!e!=!!t&&this.reposition();})),f$1p(this,["viewModel.view.padding","viewModel.view.size","viewModel.active","viewModel.location","alignment"],(()=>this.reposition())),f$1p(this,"spinnerEnabled",(e=>this._spinnerEnabledChange(e))),f$1p(this,"viewModel.view.size",((e,t)=>this._updateDockEnabledForViewSize(e,t))),f$1p(this,"viewModel.view",((e,t)=>this._viewChange(e,t))),f$1p(this,"viewModel.view.ready",((e,t)=>this._viewReadyChange(e,t))),f$1p(this,["viewModel.waitingForResult","viewModel.location"],(()=>{this._hideSpinner(),this._displaySpinnerThrottled();})),f$1p(this,["selectedFeatureWidget.viewModel.title","selectedFeatureWidget.viewModel.state"],(()=>this._setTitleFromFeatureWidget())),f$1p(this,["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.state"],(()=>this._setContentFromFeatureWidget())),h$1q(this,"collapsed",(()=>{var e,t;"xsmall"===(null==(e=this.viewModel)||null==(t=e.view)?void 0:t.widthBreakpoint)&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation();})),$$f(this,"viewModel.allActions","change",(()=>this._watchActions())),i$2i(this,"viewModel.allActions",(()=>this._watchActions())),f$1p(this,"viewModel.featureViewModels",(()=>this._featureMenuViewportScrollTop()))]);}destroy(){var e,t;this._destroySelectedFeatureWidget(),this._destroySpinner(),null==(e=this._handles)||e.destroy(),this._unobserveFeatureMenuObserver(),null==(t=this._featureMenuIntersectionObserver)||t.disconnect(),this._handles=null;}get actionsMenuId(){return `${this.id}-actions-menu`}get actionsMenuButtonId(){return `${this.id}-actions-menu-button`}get featureMenuId(){return `${this.id}-feature-menu`}get titleId(){return `${this.id}-popup-title`}get contentId(){return `${this.id}-popup-content`}get hasContent(){var e,t,i,o,n,s,r;return !!(this.selectedFeatureWidget?(null==(e=this.selectedFeatureWidget)||null==(t=e.viewModel)?void 0:t.waitingForContent)||"error"===(null==(i=this.selectedFeatureWidget)||null==(o=i.viewModel)?void 0:o.state)||(null==(n=this.selectedFeatureWidget)||null==(s=n.viewModel)?void 0:s.content):null==(r=this.viewModel)?void 0:r.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return !!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e);}get actionsMenuOpen(){return !!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||D$7}set dockOptions(e){const t={...D$7},i=this.get("viewModel.view.breakpoints"),o={};i&&(o.width=i.xsmall,o.height=i.xsmall);const n={...t,...e},s={...t.breakpoint,...o},{breakpoint:r}=n;!0===r?n.breakpoint=s:"object"==typeof r&&(n.breakpoint={...s,...r}),this._set("dockOptions",n),this._setCurrentDockPosition(),this.reposition();}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:i}=this,{selectedFeatureViewModel:o}=this.viewModel,n={...t,title:!1};return o?(e?(e.viewModel=o,e.visibleElements=n):this._feature=new w$a({headingLevel:i+1,viewModel:o,visibleElements:n}),this._feature):null}castVisibleElements(e){return {...V$3,...e}}blur(){const{active:e}=this.viewModel;e||S$9.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender();}clear(){this.viewModel.clear();}close(){this.visible=!1;}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||S$9.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender();}next(){return this.viewModel.next()}open(e){var t,i;this._handles.remove(O$8);const o=!!e&&!!e.featureMenuOpen,n=!!e&&!!e.actionsMenuOpen,s={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:n,featureMenuOpen:o};"xsmall"===(null==(t=this.viewModel)||null==(i=t.view)?void 0:i.widthBreakpoint)&&(s.collapsed=!0),this.set(s),this.viewModel.open(e),this._addSelectedFeatureIndexHandle();}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment();}triggerAction(e){this.viewModel.triggerAction(e);}render(){var e,t,i,o;const{actionsMenuOpen:n,dockEnabled:s,featureMenuVisible:r,dividedActions:a,currentAlignment:l,currentDockPosition:u}=this,{active:c}=this.viewModel,{menuActions:d}=a,p=c&&d.length>1&&n,h=c&&s,g=c&&!s,_=null==(e=this.selectedFeature)||null==(t=e.layer)?void 0:t.title,f=null==(i=this.selectedFeature)||null==(o=i.layer)?void 0:o.id,v={[T$4.alignTopCenter]:"top-center"===l,[T$4.alignBottomCenter]:"bottom-center"===l,[T$4.alignTopLeft]:"top-left"===l,[T$4.alignBottomLeft]:"bottom-left"===l,[T$4.alignTopRight]:"top-right"===l,[T$4.alignBottomRight]:"bottom-right"===l,[T$4.isDocked]:h,[T$4.shadow]:g,[T$4.isDockedTopLeft]:"top-left"===u,[T$4.isDockedTopCenter]:"top-center"===u,[T$4.isDockedTopRight]:"top-right"===u,[T$4.isDockedBottomLeft]:"bottom-left"===u,[T$4.isDockedBottomCenter]:"bottom-center"===u,[T$4.isDockedBottomRight]:"bottom-right"===u,[T$4.isFeatureMenuOpen]:r,[T$4.isActionsMenuOpen]:p};return n$2o("div",{class:this.classes(T$4.base,v),role:"presentation","data-layer-title":_,"data-layer-id":f,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},c?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return n$2o("span",{"aria-hidden":"true",class:this.classes(T$4.icon,T$4.iconLoading,T$4.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?n$2o("div",{key:P$9("loading-container"),role:"presentation",class:T$4.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=d$1G(this.container),t={[T$4.iconRightTriangleArrow]:e,[T$4.paginationPreviousIconRTL]:e,[T$4.iconLeftTriangleArrow]:!e,[T$4.paginationPreviousIconLTR]:!e};return n$2o("span",{"aria-hidden":"true",class:this.classes(T$4.icon,t)})}renderPreviousButton(){const{messages:e}=this;return n$2o("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(T$4.button,T$4.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=d$1G(this.container),t={[T$4.iconLeftTriangleArrow]:e,[T$4.paginationNextIconRTL]:e,[T$4.iconRightTriangleArrow]:!e,[T$4.paginationNextIconLTR]:!e};return n$2o("span",{"aria-hidden":"true",class:this.classes(T$4.icon,t)})}renderNextButton(){const{messages:e}=this;return n$2o("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(T$4.button,T$4.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:i}=this,{featureCount:o,selectedFeatureIndex:n}=this.viewModel;return n$2o("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(T$4.button,T$4.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":i.menu,title:i.menu},this._getPageText(o,n))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),i={[T$4.iconUndock]:e,[T$4.iconDock]:!e,[T$4.iconDockToRight]:!e&&("top-right"===t||"bottom-right"===t),[T$4.iconDockToLeft]:!e&&("top-left"===t||"bottom-left"===t),[T$4.iconDockToTop]:!e&&"top-center"===t,[T$4.iconDockToBottom]:!e&&"bottom-center"===t};return n$2o("span",{"aria-hidden":"true",class:this.classes(i,T$4.icon)})}renderDockButton(){var e,t,i;const{dockEnabled:o,messages:n}=this,s=null==(e=this.viewModel)||null==(t=e.view)?void 0:t.widthBreakpoint,r=o?n.undock:n.dock;return "xsmall"!==s&&null!=(i=this.dockOptions)&&i.buttonEnabled?n$2o("div",{role:"button","aria-label":r,title:r,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(T$4.button,T$4.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:i,contentCollapsed:o,messagesCommon:n}=this,s={[T$4.headerContainerButton]:i},r=n$2o(s$1e,{level:this.headingLevel,class:T$4.headerTitle,innerHTML:e}),a=i?n$2o("button",{key:`${e}--collapsible`,id:t,title:o?n.expand:n.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(T$4.headerContainer,s),"aria-expanded":o?"false":"true",onclick:this._toggleCollapsed},r):n$2o("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(T$4.headerContainer,s)},r);return e?a:null}renderCloseIcon(){return n$2o("span",{"aria-hidden":"true",class:this.classes(T$4.icon,T$4.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?n$2o("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:T$4.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return n$2o("header",{class:T$4.header},this.renderTitle(),n$2o("div",{class:T$4.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:i}=this,{content:o}=this.viewModel;return t&&!i?n$2o("article",{key:o,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:T$4.content},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:o,messagesCommon:n}=this,s=i?n.close:n.open,{menuActions:r}=o;return r.length?n$2o("div",{key:P$9("actions-menu-button"),class:this.classes(T$4.button,T$4.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":i?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":s,title:s},n$2o("span",{"aria-hidden":"true",class:T$4.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:o}=this,{menuActions:n,inlineActions:s}=o;return n.length&&i?n$2o("ul",{id:e,role:"menu","aria-labelledby":t,key:P$9("actions"),class:T$4.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},n.toArray().map(((e,t)=>this.renderAction({action:e,index:t+s.length,type:"menu-item"})))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return !!e.length&&e.toArray().map(((e,t)=>this.renderAction({action:e,index:t,type:"inline"})))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,i=!!e.length,o=!!t.length;return i||o?n$2o("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":o.toString(),class:T$4.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?n$2o("section",{key:P$9("navigation"),class:this.classes(T$4.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:i,menuActions:o}=t,n=!!i.length,s=!!o.length,r={[T$4.footerHasPagination]:e,[T$4.footerHasActions]:n,[T$4.footerHasActionsMenu]:s};return e||n?n$2o("div",{key:P$9("feature-buttons"),class:this.classes(T$4.footer,r)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:i}=this.viewModel,o=s$23(e.selectedFeatures,{total:t.length});return n$2o("section",{key:P$9("menu"),class:T$4.featureMenu},n$2o("strong",{class:T$4.featureMenuHeader},o),n$2o("nav",{bind:this,class:T$4.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:g$$},this.renderFeatureMenu(),n$2o("div",{class:T$4.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?n$2o("div",{class:T$4.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:n$2o("div",{key:P$9("pointer"),class:T$4.pointer,role:"presentation"},n$2o("div",{class:this.classes(T$4.pointerDirection,T$4.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:i,titleId:o,contentId:n,collapsible:s,hasContent:r,contentCollapsed:a,visibleElements:l}=this,{title:u}=this.viewModel,c="bottom-left"===t||"bottom-center"===t||"bottom-right"===t||"top-left"===i||"top-center"===i||"top-right"===i,d="top-left"===t||"top-center"===t||"top-right"===t||"bottom-left"===i||"bottom-center"===i||"bottom-right"===i,p={[T$4.shadow]:e,[T$4.isCollapsible]:s,[T$4.isCollapsed]:a};return n$2o("div",{class:this.classes(T$4.main,T$4.widget,p),tabIndex:l.closeButton?null:-1,role:"dialog","aria-labelledby":u?o:"","aria-describedby":r&&!a?n:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},c?this.renderFooter():null,c?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),d?this.renderFooter():null,d?this.renderFeatureMenuContainer():null)}renderContent(){var e;const t=null==(e=this.viewModel)?void 0:e.content;return t?"string"==typeof t?n$2o("div",{key:t,innerHTML:t}):this.renderNodeContent(t):null}renderActionText(e){return n$2o("span",{key:"text",class:T$4.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),i=this._getActionImage(e),o={[T$4.iconLoading]:e.active,[T$4.rotating]:e.active,[T$4.icon]:!!t,[T$4.actionImage]:!e.active&&!!i};return t&&(o[t]=!e.active),n$2o("span",{key:"icon","aria-hidden":"true",class:this.classes(T$4.icon,o),styles:this._getIconStyles(i)})}renderAction(e){const{action:t,index:i,type:o}=e,n=this._getActionTitle(t),s={[T$4.action]:"toggle"!==t.type,[T$4.actionToggle]:"toggle"===t.type,[T$4.actionToggleOn]:"toggle"===t.type&&t.value,[T$4.buttonDisabled]:t.disabled},r=[this.renderActionIcon(t),this.renderActionText(n)],a="menu-item"===o?n$2o("li",{key:t.uid,role:"menuitem",tabIndex:0,title:n,"aria-label":n,class:this.classes(T$4.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":i,onclick:this._triggerAction,onkeydown:this._triggerAction},r):n$2o("div",{key:t.uid,role:"button",tabIndex:0,title:n,"aria-label":n,class:this.classes(T$4.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":i,onclick:this._triggerAction,onkeydown:this._triggerAction},r);return t.visible?a:null}renderFeatureMenuItem(e,t){const{messages:i,messagesCommon:o}=this,{selectedFeatureIndex:n,selectedFeatureViewModel:s}=this.viewModel,r=e===s,a={[T$4.featureMenuSelected]:r},l=r?n$2o("span",{key:P$9(`feature-menu-selected-feature-${n}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:T$4.iconCheckMark}):null,u=n$2o("span",{innerHTML:e.title||o.untitled});return n$2o("li",{role:"menuitem",tabIndex:-1,key:P$9(`feature-menu-feature-${n}`),class:this.classes(a,T$4.featureMenuItem),bind:this,"data-feature-index":t,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},n$2o("span",{class:T$4.featureMenuTitle},u,l))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?n$2o("ol",{class:T$4.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter((e=>!!e.graphic)).map(((e,t)=>this.renderFeatureMenuItem(e,t)))):null}_getActionTitle(e){const{messages:t,selectedFeature:i,messagesCommon:o}=this,{id:n}=e,s=null==i?void 0:i.attributes,r="zoom-to-feature"===n?s$23(e.title,{messages:t}):"remove-selected-feature"===n?s$23(e.title,{messages:o}):"zoom-to-clustered-features"===n||"browse-clustered-features"===n?s$23(e.title,{messages:t}):e.title;return r&&s?s$23(r,s):r}_getActionClass(e){const{selectedFeature:t}=this,i=null==t?void 0:t.attributes,{className:o,image:n}=e,s=n||o?o:T$4.iconDefaultAction;return s&&i?s$23(s,i):s}_getActionImage(e){const{selectedFeature:t}=this,i=null==t?void 0:t.attributes,{image:o}=e;return o&&i?s$23(o,i):o}_createFeatureUpdatedAnimation(){return f$1o("enter",T$4.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if("number"!=typeof e)return null;const i=Math.round(e);return Math.max(t?i-1:i,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach((e=>{this._handles.add(f$1p(e,["active","className","disabled","id","title","image","visible"],(()=>this.scheduleRender())),t);}));}_divideActions(){const{allActions:e}=this.viewModel,i=this._getInlineActionCount(),o=null===i,n=0===i;return {inlineActions:o?e.slice(0):n?new S$F:e.slice(0,i),menuActions:o?new S$F:n?e.slice(0):e.slice(i)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0;}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0;}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:e,messagesCommon:t}=this;var i,o;e&&(this.viewModel.title="error"===(null==(i=e.viewModel)?void 0:i.state)?t.errorMessage:(null==(o=e.viewModel)?void 0:o.title)||"");}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e);}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode);}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e;}_handleFeatureMenuKeyup(e){"Escape"===i$2r(e)&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender());}_handleActionMenuKeyup(e){"Escape"===i$2r(e)&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender());}_handleFeatureMenuItemKeyup(e){const t=i$2r(e),{_featureMenuNode:o}=this,n=e.currentTarget["data-feature-index"];if(!o)return;const s=o.querySelectorAll("li"),r=s.length;if("ArrowUp"!==t)if("ArrowDown"!==t)if("Home"!==t)if("End"!==t);else {e.stopPropagation();s[s.length-1].focus();}else {e.stopPropagation();s[0].focus();}else {e.stopPropagation();s[(n+1+r)%r].focus();}else {e.stopPropagation();s[(n-1+r)%r].focus();}}_handleActionMenuItemKeyup(e){const t=i$2r(e),{_actionsMenuNode:o}=this,n=e.currentTarget["data-action-index"];if(!o)return;const s=o.querySelectorAll("li"),r=s.length;if("ArrowUp"!==t)if("ArrowDown"!==t)if("Home"!==t)if("End"!==t);else {e.stopPropagation();s[s.length-1].focus();}else {e.stopPropagation();s[0].focus();}else {e.stopPropagation();s[(n+1+r)%r].focus();}else {e.stopPropagation();s[(n-1+r)%r].focus();}}_handleMainKeyup(e){const t=i$2r(e);"ArrowLeft"===t&&(e.stopPropagation(),this.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.next());}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t);}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide());}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:i}=this.viewModel;i?e.show({location:t}):e.hide();}_getIconStyles(e){return {"background-image":e?`url(${e})`:""}}_addSelectedFeatureIndexHandle(){const e=f$1p(this,"viewModel.selectedFeatureIndex",((e,t)=>this._selectedFeatureIndexUpdated(e,t)));this._handles.add(e,O$8);}_selectedFeatureIndexUpdated(e,t){const{featureCount:i}=this;i&&e!==t&&-1!==e&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1);}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null;}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:i,screenLocation:o,side:n,view:s}=e;if(isNaN(i)||isNaN(t)||!s||!o)return !1;const r=s.padding;return "right"===n&&o.x+i/2>s.width-r.right||("left"===n&&o.x-i/2<r.left||("top"===n&&o.y-t<r.top||"bottom"===n&&o.y+t>s.height-r.bottom))}_calculateAutoAlignment(e){if("auto"!==e)return e;const{_pointerOffsetInPx:t,_containerNode:i,_mainContainerNode:o,viewModel:n}=this,{screenLocation:r,view:a}=n;if(t$1O(r)||!a||!i)return "top-center";if(!this._isScreenLocationWithinView(r,a))return this._get("currentAlignment")||"top-center";function l(e){return parseInt(e.replace(/[^-\d\.]/g,""),10)}const u=o?window.getComputedStyle(o,null):null,c=u?l(u.getPropertyValue("max-height")):0,d=u?l(u.getPropertyValue("height")):0,{height:p,width:h}=i.getBoundingClientRect(),g=h+t,_=Math.max(p,c,d)+t,f=this._isOutsideView({popupHeight:_,popupWidth:g,screenLocation:r,side:"right",view:a}),v=this._isOutsideView({popupHeight:_,popupWidth:g,screenLocation:r,side:"left",view:a}),m=this._isOutsideView({popupHeight:_,popupWidth:g,screenLocation:r,side:"top",view:a}),b=this._isOutsideView({popupHeight:_,popupWidth:g,screenLocation:r,side:"bottom",view:a});return v?m?"bottom-right":"top-right":f?m?"bottom-left":"top-left":m?b?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return "function"==typeof e?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment());}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition());}_calculatePositionResult(e){const t=["left","right"];return d$1G(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return "function"==typeof e?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(e=this.dockOptions)?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var t;if("auto"!==e)return e;const i=null==(t=this.viewModel)?void 0:t.view,o=d$1G(this.container)?"top-left":"top-right";if(!i)return o;const n=i.padding||{left:0,right:0,top:0,bottom:0},s=i.width-n.left-n.right,{breakpoints:r}=i;return r&&s<=r.xsmall?"bottom-center":o}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:i}=e.getBoundingClientRect(),o=this._calculatePositionStyle(t,i);o&&(e.style.top=o.top,e.style.left=o.left,e.style.bottom=o.bottom,e.style.right=o.right);}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:i}=this;return "top-left"===t||"bottom-left"===t||"top-right"===t||"bottom-right"===t?e+i:e}_calculateAlignmentPosition(e,t,i,o){const{currentAlignment:n,_pointerOffsetInPx:s}=this,r=o/2,a=i.height-t,l=i.width-e,{padding:u}=this.view;return "bottom-center"===n?{top:t+s-u.top,left:e-r-u.left}:"top-left"===n?{bottom:a+s-u.bottom,right:l+s-u.right}:"bottom-left"===n?{top:t+s-u.top,right:l+s-u.right}:"top-right"===n?{bottom:a+s-u.bottom,left:e+s-u.left}:"bottom-right"===n?{top:t+s-u.top,left:e+s-u.left}:"top-center"===n?{bottom:a+s-u.bottom,left:e-r-u.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:i,view:o}=this;if(!o)return;if(i)return {left:"",top:"",right:"",bottom:""};if(t$1O(e)||!t)return;const n=this._calculateFullWidth(t),r=this._calculateAlignmentPosition(e.x,e.y,o,n);return r?{top:void 0!==r.top?`${r.top}px`:"auto",left:void 0!==r.left?`${r.left}px`:"auto",bottom:void 0!==r.bottom?`${r.bottom}px`:"auto",right:void 0!==r.right?`${r.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear());}_viewReadyChange(e,t){if(e){const e=this.get("viewModel.view");this._wireUpView(e);}else t&&(this.close(),this.clear());}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions);}_dockingThresholdCrossed(e,t,i){const[o,n]=e,[s,r]=t,{width:a,height:l}=i;return o<=a&&s>a||o>a&&s<=a||n<=l&&r>l||n>l&&r<=l}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},o=i.left+i.right,n=i.top+i.bottom,s=[],r=[];s[0]=e[0]-o,s[1]=e[1]-n,r[0]=t[0]-o,r[1]=t[1]-n;const{dockOptions:a}=this,l=a.breakpoint;this._dockingThresholdCrossed(s,r,l)&&this._setDockEnabledForViewSize(a),this._setCurrentDockPosition();}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus());}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");if(t.length){t[0].focus();}}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");if(t.length){t[0].focus();}}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus());}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus());}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0);}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const i=t.active&&!e;t.screenLocationEnabled=i;}_shouldDockAtCurrentViewSize(e){var t,i;const o=e.breakpoint,n=null==(t=this.viewModel)||null==(i=t.view)?void 0:i.ui;if(!n)return !1;const{width:s,height:r}=n;if(isNaN(s)||isNaN(r))return !1;const a=o.hasOwnProperty("width")&&s<=o.width,l=o.hasOwnProperty("height")&&r<=o.height;return a||l}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e));}_getPageText(e,t){return this.featureNavigationVisible?s$23(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,B$3),e.destroy(),this._spinner=null);}_createSpinner(e){e&&(this._spinner=new m$r({view:e}),e.ui.add(this._spinner,{key:B$3,position:"manual"}));}_toggleCollapsed(){this.collapsed=!this.collapsed;}_close(){this.close(),this.view&&this.view.focus();}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender();}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e;}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e;}_triggerAction(e){const t=e.currentTarget["data-action-index"],i=this.viewModel.allActions.getItemAt(t);i&&"toggle"===i.type&&(i.value=!i.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(t);}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender();}_next(){this.next();}_previous(){this.previous();}};e$1_([d$1S({readOnly:!0})],R$4.prototype,"actionsMenuId",null),e$1_([d$1S({readOnly:!0})],R$4.prototype,"actionsMenuButtonId",null),e$1_([d$1S({readOnly:!0})],R$4.prototype,"featureMenuId",null),e$1_([d$1S({readOnly:!0})],R$4.prototype,"titleId",null),e$1_([d$1S({readOnly:!0})],R$4.prototype,"contentId",null),e$1_([d$1S({readOnly:!0})],R$4.prototype,"hasContent",null),e$1_([d$1S({readOnly:!0})],R$4.prototype,"featureNavigationVisible",null),e$1_([d$1S({readOnly:!0})],R$4.prototype,"collapsible",null),e$1_([d$1S({readOnly:!0})],R$4.prototype,"featureMenuVisible",null),e$1_([d$1S({readOnly:!0})],R$4.prototype,"contentCollapsed",null),e$1_([d$1S({readOnly:!0})],R$4.prototype,"dividedActions",null),e$1_([o$1Q("viewModel.actions")],R$4.prototype,"actions",void 0),e$1_([d$1S()],R$4.prototype,"actionsMenuOpen",null),e$1_([d$1S()],R$4.prototype,"alignment",void 0),e$1_([o$1Q("viewModel.autoCloseEnabled")],R$4.prototype,"autoCloseEnabled",void 0),e$1_([o$1Q("viewModel.autoOpenEnabled")],R$4.prototype,"autoOpenEnabled",void 0),e$1_([o$1Q("viewModel.defaultPopupTemplateEnabled")],R$4.prototype,"defaultPopupTemplateEnabled",void 0),e$1_([o$1Q("viewModel.content")],R$4.prototype,"content",void 0),e$1_([d$1S()],R$4.prototype,"collapsed",void 0),e$1_([d$1S()],R$4.prototype,"collapseEnabled",void 0),e$1_([d$1S({readOnly:!0})],R$4.prototype,"currentAlignment",null),e$1_([d$1S({readOnly:!0})],R$4.prototype,"currentDockPosition",null),e$1_([d$1S()],R$4.prototype,"dockOptions",null),e$1_([d$1S()],R$4.prototype,"dockEnabled",void 0),e$1_([o$1Q("viewModel.featureCount")],R$4.prototype,"featureCount",void 0),e$1_([d$1S()],R$4.prototype,"featureMenuOpen",void 0),e$1_([o$1Q("viewModel.features")],R$4.prototype,"features",void 0),e$1_([o$1Q("viewModel.goToOverride")],R$4.prototype,"goToOverride",void 0),e$1_([d$1S()],R$4.prototype,"headingLevel",void 0),e$1_([o$1Q("viewModel.highlightEnabled")],R$4.prototype,"highlightEnabled",void 0),e$1_([o$1Q("viewModel.location")],R$4.prototype,"location",void 0),e$1_([d$1S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],R$4.prototype,"label",void 0),e$1_([d$1S()],R$4.prototype,"maxInlineActions",void 0),e$1_([d$1S(),e$1w("esri/widgets/Popup/t9n/Popup")],R$4.prototype,"messages",void 0),e$1_([d$1S(),e$1w("esri/t9n/common")],R$4.prototype,"messagesCommon",void 0),e$1_([o$1Q("viewModel.promises")],R$4.prototype,"promises",void 0),e$1_([o$1Q("viewModel.selectedFeature")],R$4.prototype,"selectedFeature",void 0),e$1_([o$1Q("viewModel.selectedFeatureIndex")],R$4.prototype,"selectedFeatureIndex",void 0),e$1_([d$1S({readOnly:!0})],R$4.prototype,"selectedFeatureWidget",null),e$1_([d$1S()],R$4.prototype,"spinnerEnabled",void 0),e$1_([o$1Q("viewModel.title")],R$4.prototype,"title",void 0),e$1_([o$1Q("viewModel.updateLocationEnabled")],R$4.prototype,"updateLocationEnabled",void 0),e$1_([o$1Q("viewModel.view")],R$4.prototype,"view",void 0),e$1_([d$1S({type:U$6}),t$1o(["triggerAction","trigger-action"])],R$4.prototype,"viewModel",void 0),e$1_([o$1Q("viewModel.visible")],R$4.prototype,"visible",void 0),e$1_([d$1S()],R$4.prototype,"visibleElements",void 0),e$1_([c$2Y("visibleElements")],R$4.prototype,"castVisibleElements",null),e$1_([t$1p()],R$4.prototype,"_close",null),e$1_([t$1p()],R$4.prototype,"_toggleDockEnabled",null),e$1_([t$1p()],R$4.prototype,"_toggleFeatureMenu",null),e$1_([t$1p()],R$4.prototype,"_toggleActionsMenu",null),e$1_([t$1p()],R$4.prototype,"_triggerAction",null),e$1_([t$1p()],R$4.prototype,"_selectFeature",null),e$1_([t$1p()],R$4.prototype,"_next",null),e$1_([t$1p()],R$4.prototype,"_previous",null),R$4=e$1_([i$2w(L$7)],R$4);const U$5=R$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u$r=[0,0];function l$y(e){const t=(e.ownerDocument||window.document).defaultView,s=e.getBoundingClientRect();return u$r[0]=s.left+t.pageXOffset,u$r[1]=s.top+t.pageYOffset,u$r}function p$C(e){e&&(t$1B(e),e.parentNode&&e.parentNode.removeChild(e));}function c$I(e){const t=document.createElement("div");return e.appendChild(t),t}const m$q=16,f$g=750,y$e=512,v$8=2,_$a=i=>{let u=class extends i{constructor(...e){super(...e),this._freqInfo={freq:m$q,time:f$g},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([this.watch("cursor",(e=>{const t=this.surface;t&&t.setAttribute("data-cursor",e);})),this.watch("interacting",(e=>{const t=this.surface;t&&t.setAttribute("data-interacting",e.toString());}))]);}initialize(){this.handles.add(this.watch("ui",((e,t)=>this._handleUIChange(e,t)))),this._wireUI(this.ui),this.handles.add([this.on("focus",(()=>this.notifyChange("focused"))),this.on("blur",(()=>this.notifyChange("focused")))]);}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null);}set container(e){const s=this._get("container");if(s===e)return;const i="dom-size";if(this.handles.remove(i),this._stopMeasuring(),s&&(s.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),p$C(this.root),this._set("root",null),r$1u(this.userContent,s),p$C(this.userContent),this._set("userContent",null)),e){e.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",r$1u(e,s),e.appendChild(s),this._set("userContent",s);const n=document.createElement("div");n.className="esri-view-root",e.insertBefore(n,e.firstChild),this._set("root",n);const h=document.createElement("div");h.className="esri-view-surface",h.setAttribute("role","application"),h.tabIndex=0,n.appendChild(h),this._set("surface",h);const d=new n$1n;n.appendChild(d.surface),this._set("overlay",d),d.watch("needsRender",(e=>{e&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=A$s({render:()=>{this.overlay.render();}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null);})),this.forceDOMReadyCycle(),this.handles.add(i$2i(this,"size",(e=>{const[t,s]=e,i="esri-view-surface--inset-outline";t>=document.body.clientWidth||s>=document.body.clientHeight?h.classList.add(i):h.classList.remove(i);})),i),this._set("container",e),this._startMeasuring();}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null);}get focused(){const e=document.activeElement===this.surface;return document.hasFocus()&&e}get popup(){return this._get("popup")||new U$5({view:this})}set popup(e){const t=this._get("popup");t&&t!==e&&t.destroy(),this._set("popup",e);}get size(){return [this.width,this.height]}blur(){this.surface&&this.surface.blur();}focus(){this.surface&&this.surface.focus();}pageToContainer(e,t,s){const i=this.position;return e-=i[0],t-=i[1],s?(s[0]=e,s[1]=t):s=[e,t],s}containerToPage(e,t,s){const i=this.position;return e+=i[0],t+=i[1],s?(s[0]=e,s[1]=t):s=[e,t],s}_handleUIChange(e,t){t&&(this.handles.remove("ui"),t.destroy()),e&&this._wireUI(e),this._set("ui",e);}_wireUI(e){this.handles.remove("ui"),e&&(e.view=this,this.handles.add([i$2i(this,"root",(t=>{e.container=t?c$I(t):null;})),i$2i(this,"popup",((t,s)=>{const i="popup",o="manual";s&&e.remove(s,i),t&&(t.view=e.view,e.add(t,{key:i,position:o}));}))],"ui"));}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1);}_startMeasuring(){const e=this._freqInfo;e.freq=m$q,e.time=f$g,this.handles.add([(()=>{const t=()=>{e.freq=m$q,e.time=f$g;};return window.addEventListener("resize",t),{remove(){window.removeEventListener("resize",t);}}})(),A$s({prepare:e=>{const t=this._measure(),s=this._freqInfo;if(s.time+=e.deltaTime,t&&(s.freq=m$q,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const i=this._position();s.freq=i||t?m$q:Math.min(f$g,s.freq*v$8),!t&&s.freq>=y$e&&this._get("resizing")&&this._set("resizing",!1);}})],"measuring"),this._measure(),this._position();}_measure(){const e=this.container,t=e?e.clientWidth:0,s=e?e.clientHeight:0;if(0===t||0===s)return this.suspended||this._set("suspended",!0),!1;const i=this.width,o=this.height;return t===i&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",t),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:i,oldHeight:o,width:t,height:s}),!0)}_position(){const e=this.container,t=this.position,s=l$y(e);return (!t||s[0]!==t[0]||s[1]!==t[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return e$1_([d$1S({value:null,cast:e=>e$1J(e)})],u.prototype,"container",null),e$1_([d$1S({readOnly:!0})],u.prototype,"focused",null),e$1_([d$1S({readOnly:!0})],u.prototype,"height",void 0),e$1_([d$1S({type:U$5})],u.prototype,"popup",null),e$1_([d$1S({type:n$1n})],u.prototype,"overlay",void 0),e$1_([d$1S({readOnly:!0})],u.prototype,"position",void 0),e$1_([d$1S({readOnly:!0})],u.prototype,"resizing",void 0),e$1_([d$1S({readOnly:!0})],u.prototype,"root",void 0),e$1_([d$1S({value:null,readOnly:!0})],u.prototype,"size",null),e$1_([d$1S({readOnly:!0})],u.prototype,"surface",void 0),e$1_([d$1S({readOnly:!0})],u.prototype,"suspended",void 0),e$1_([d$1S()],u.prototype,"ui",void 0),e$1_([d$1S({readOnly:!0})],u.prototype,"userContent",void 0),e$1_([d$1S({readOnly:!0})],u.prototype,"width",void 0),e$1_([d$1S()],u.prototype,"widthBreakpoint",void 0),u=e$1_([i$2w("esri.views.DOMContainer")],u),u};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function d$n(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],i=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],o=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(n,i,o))}class P$8{constructor(t,n){this.min=t,this.max=n,this.range=n-t;}ndiff(t,n=0){return Math.ceil((t-n)/this.range)*this.range+n}_normalize(t,n,i,o=0,s=!1){return (i-=o)<t?i+=this.ndiff(t-i):i>n&&(i-=this.ndiff(i-n)),s&&i===n&&(i=t),i+o}normalize(t,n=0,i=!1){return this._normalize(this.min,this.max,t,n,i)}clamp(t,i=0){return e$1o(t-i,this.min,this.max)+i}monotonic(t,n,i){return t<n?n:n+this.ndiff(t-n,i)}minimalMonotonic(t,n,i){return this._normalize(t,t+this.range,n,i)}center(t,n,i){return n=this.monotonic(t,n,i),this.normalize((t+n)/2,i)}diff(t,n,i){return this.monotonic(t,n,i)-t}shortestSignedDiff(t,n){t=this.normalize(t);const i=(n=this.normalize(n))-t,o=n<t?this.minimalMonotonic(t,n)-t:n-this.minimalMonotonic(n,t);return Math.abs(i)<Math.abs(o)?i:o}contains(t,n,i){return n=this.minimalMonotonic(t,n),(i=this.minimalMonotonic(t,i))>t&&i<n}}function D$6(t){for(const n in t){const i=t[n];i instanceof Function&&(t[n]=i.bind(t));}return t}D$6(new P$8(0,2*Math.PI));D$6(new P$8(-Math.PI,Math.PI));const U$4=D$6(new P$8(0,360));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$q;let m$p=u$q=class extends a$2A{constructor(...o){super(...o),this.position=new b$O([0,0,0]),this.heading=0,this.tilt=0,this.fov=55;}normalizeCtorArgs(o,t,r,e){if(o&&"object"==typeof o&&("x"in o||Array.isArray(o))){const i={position:o};return null!=t&&(i.heading=t),null!=r&&(i.tilt=r),null!=e&&(i.fov=e),i}return o}writePosition(o,t,r,e){const i=o.clone();i.x=a$31(o.x||0),i.y=a$31(o.y||0),i.z=o.hasZ?a$31(o.z||0):o.z,t[r]=i.write({},e);}readPosition(o,t){const r=new b$O;return r.read(o,t),r.x=a$31(r.x||0),r.y=a$31(r.y||0),r.z=r.hasZ?a$31(r.z||0):r.z,r}equals(o){return !!o&&(this.tilt===o.tilt&&this.heading===o.heading&&this.fov===o.fov&&this.position.equals(o.position))}clone(){return new u$q({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})}};e$1_([d$1S({type:b$O,json:{write:{isRequired:!0}}})],m$p.prototype,"position",void 0),e$1_([r$1c("position")],m$p.prototype,"writePosition",null),e$1_([o$1j("position")],m$p.prototype,"readPosition",null),e$1_([d$1S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),c$2Y((o=>U$4.normalize(a$31(o))))],m$p.prototype,"heading",void 0),e$1_([d$1S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),c$2Y((o=>e$1o(a$31(o),-180,180)))],m$p.prototype,"tilt",void 0),e$1_([d$1S({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],m$p.prototype,"fov",void 0),m$p=u$q=e$1_([i$2w("esri.Camera")],m$p);const d$m=m$p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$o;let n$Q=m$o=class extends a$2A{constructor(r){super(r),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null;}castRotation(r){return (r%=360)<0&&(r+=360),r}clone(){return new m$o({rotation:this.rotation,scale:this.scale,targetGeometry:r$1G(this.targetGeometry)?this.targetGeometry.clone():null,camera:r$1G(this.camera)?this.camera.clone():null})}};function l$x(){return {enabled:!this.camera}}e$1_([d$1S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:l$x}}}}})],n$Q.prototype,"rotation",void 0),e$1_([c$2Y("rotation")],n$Q.prototype,"castRotation",null),e$1_([d$1S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:l$x}}}}})],n$Q.prototype,"scale",void 0),e$1_([d$1S({types:i$20,json:{read:d$1t,write:!0,origins:{"web-scene":{read:d$1t,write:{overridePolicy:l$x}}}}})],n$Q.prototype,"targetGeometry",void 0),e$1_([d$1S({type:d$m,json:{write:!0}})],n$Q.prototype,"camera",void 0),n$Q=m$o=e$1_([i$2w("esri.Viewpoint")],n$Q);const u$p=n$Q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$I;let l$w=i$I=class extends a$2A{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.resolution=0,this.rows=null,this.scale=0;}clone(){return new i$I({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};e$1_([d$1S({type:Number,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l$w.prototype,"cols",void 0),e$1_([d$1S({type:S$J,json:{write:!0}})],l$w.prototype,"level",void 0),e$1_([d$1S({type:String,json:{write:!0}})],l$w.prototype,"levelValue",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],l$w.prototype,"resolution",void 0),e$1_([d$1S({type:Number,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l$w.prototype,"rows",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],l$w.prototype,"scale",void 0),l$w=i$I=e$1_([i$2w("esri.layers.support.LOD")],l$w);const p$B=l$w;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var w$8;const x$7=new o$1K({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let S$8=w$8=class extends a$2A{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null;}static create(e={}){const{resolutionFactor:t=1,scales:o,size:r=256,spatialReference:i=k$s.WebMercator,numLODs:l=24}=e;if(!I$u(i)){const e=[];if(o)for(let t=0;t<o.length;t++){const r=o[t];e.push({level:t,scale:r,resolution:r});}else {let t=5e-4;for(let o=l-1;o>=0;o--)e.unshift({level:o,scale:t,resolution:t}),t*=2;}return new w$8({dpi:96,lods:e,origin:new b$O(0,0,i),size:[r,r],spatialReference:i})}const n=S$C(i),a=e.origin?new b$O({x:e.origin.x,y:e.origin.y,spatialReference:i}):new b$O(n?{x:n.origin[0],y:n.origin[1],spatialReference:i}:{x:0,y:0,spatialReference:i}),p=96,f=1/(H$9(i)*39.37*p),y=[];if(o)for(let s=0;s<o.length;s++){const e=o[s],t=e*f;y.push({level:s,scale:e,resolution:t});}else {let e=R$p(i)?512/r*591657527.5917094:256/r*591657527.591555;const o=Math.ceil(l/t);y.push({level:0,scale:e,resolution:e*f});for(let r=1;r<o;r++){const o=e/2**t,s=o*f;y.push({level:r,scale:o,resolution:s}),e=o;}}return new w$8({dpi:p,lods:y,origin:a,size:[r,r],spatialReference:i})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const o=S$C(e);return e.isWrappable&&Math.abs(o.origin[0]-t.x)<=o.dx}return !1}readOrigin(e,t){return b$O.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,o=0;const r=[];this._levelToLOD={},e&&(t=-1/0,o=1/0,e.forEach((e=>{r.push(e.scale),t=e.scale>t?e.scale:t,o=e.scale<o?e.scale:o,this._levelToLOD[e.level]=e;}))),this._set("scales",r),this._set("minScale",t),this._set("maxScale",o),this._set("lods",e),this._initializeUpsampleLevels();}readSize(e,t){return [t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1];}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const o=Math.floor(e),r=o+1;return t[o]/(t[o]/t[r])**(e-o)}}scaleToZoom(e){const t=this.scales,o=t.length-1;let r=0;for(;r<o;r++){const o=t[r],s=t[r+1];if(o<=e)return r;if(s===e)return r+1;if(o>e&&s<e)return r+Math.log(o/e)/Math.log(o/s)}return r}snapScale(e,t=.95){const o=this.scaleToZoom(e);return o%Math.floor(o)>=t?this.zoomToScale(Math.ceil(o)):this.zoomToScale(Math.floor(o))}tileAt(e,t,o,s){const i=this.lodAt(e);if(!i)return null;let l,n;if("number"==typeof t)l=t,n=o;else if(E$n(t.spatialReference,this.spatialReference))l=t.x,n=t.y,s=o;else {const e=M$s(t,this.spatialReference);if(t$1O(e))return null;l=e.x,n=e.y,s=o;}const a=i.resolution*this.size[0],p=i.resolution*this.size[1];return s||(s={id:null,level:0,row:0,col:0,extent:u$1D()}),s.level=e,s.row=Math.floor((this.origin.y-n)/p+.001),s.col=Math.floor((l-this.origin.x)/a+.001),this.updateTileInfo(s),s}updateTileInfo(e,t=0){let o=this.lodAt(e.level);if(!o&&1===t){const t=this.lods[this.lods.length-1];t.level<e.level&&(o=t);}if(!o)return;const r=e.level-o.level,s=o.resolution*this.size[0]/2**r,i=o.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=u$1D()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*i,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+i;}upsampleTile(e){const t=this._upsampleLevels[e.level];return !(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:o}=this.lodAt(t.level),r=o*this.size[0],s=o*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+r,e[3]=e[1]+s,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return w$8.fromJSON(this.write({}))}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let o=0;o<e.length;o++){const r=e[o];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r;}}};e$1_([d$1S({type:Number,json:{write:!0}})],S$8.prototype,"compressionQuality",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],S$8.prototype,"dpi",void 0),e$1_([d$1S({type:String,json:{read:x$7.read,write:x$7.write,origins:{"web-scene":{read:!1,write:!1}}}})],S$8.prototype,"format",void 0),e$1_([d$1S({readOnly:!0})],S$8.prototype,"isWrappable",null),e$1_([d$1S({type:b$O,json:{write:!0}})],S$8.prototype,"origin",void 0),e$1_([o$1j("origin")],S$8.prototype,"readOrigin",null),e$1_([d$1S({type:[p$B],value:null,json:{write:!0}})],S$8.prototype,"lods",null),e$1_([d$1S({readOnly:!0})],S$8.prototype,"minScale",void 0),e$1_([d$1S({readOnly:!0})],S$8.prototype,"maxScale",void 0),e$1_([d$1S({readOnly:!0})],S$8.prototype,"scales",void 0),e$1_([d$1S({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],S$8.prototype,"size",void 0),e$1_([o$1j("size",["rows","cols"])],S$8.prototype,"readSize",null),e$1_([r$1c("size",{cols:{type:S$J},rows:{type:S$J}})],S$8.prototype,"writeSize",null),e$1_([d$1S({type:k$s,json:{write:!0}})],S$8.prototype,"spatialReference",void 0),S$8=w$8=e$1_([i$2w("esri.layers.support.TileInfo")],S$8);const j$6=S$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$N=a=>{let t=class extends a{async fetchPopupFeatures(e,s){await this.when();const{location:p,queryArea:a,layerViewsAndGraphics:t,clientOnlyGraphics:o}=await this._prepareFetchPopupFeatures(e,s),c=Promise.resolve(o),n=this._queryLayerPopupFeatures(a,t,s),l=n.map((e=>e.promise));return {location:p,clientOnlyGraphics:o,allGraphicsPromise:E$v([c,...l]).then(M$B),promisesPerLayerView:n}}_queryLayerPopupFeatures(e,r,i){return r.map((({layerView:r,graphics:p})=>{const a={clientGraphics:p,event:r$1G(i)?i.event:null,signal:r$1G(i)?i.signal:null,defaultPopupTemplateEnabled:!!r$1G(i)&&!!i.defaultPopupTemplateEnabled},t=r.fetchPopupFeatures(e,a);return {layerView:r,promise:t}}))}_isValidPopupGraphic(e,r){return e&&!!e.getEffectivePopupTemplate(r$1G(r)&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(e,r){const{clientGraphics:s,queryArea:i,location:p}=await this._popupHitTestGraphics(e,r),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:t,clientOnlyGraphics:o}=this._graphicsPerFetchPopupLayerView(s,a);return {clientOnlyGraphics:o,layerViewsAndGraphics:t,queryArea:i,location:p}}async _popupHitTestGraphics(e,r){const{results:s,mapPoint:i}=await this.popupHitTest(e),p=s.filter((e=>this._isValidPopupGraphic(e.graphic,r))),a=p.length?p[0].mapPoint:null;return {clientGraphics:p.map((e=>e.graphic)),queryArea:i,location:i||a}}_getFetchPopupLayerViews(){const e=[];return this.allLayerViews.forEach((r=>{this._isValidPopupLayerView(r)&&e.push(r);})),r$1G(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&e.push(this.graphicsView),e.reverse()}_isValidPopupLayerView(e){return r$1G(e)&&(!("layer"in e)||!e.suspended)&&"fetchPopupFeatures"in e}_graphicsPerFetchPopupLayerView(e,r){const s=[],i=new Map,p=r.map((e=>{const r=[];return "layer"in e?i.set(e.layer,r):i.set(e.graphics,r),{layerView:e,graphics:r}}));for(const a of e){const e=i.get(a.layer)||i.get(a.sourceLayer)||null;e?e.push(a):s.push(a);}return {layerViewsAndGraphics:p,clientOnlyGraphics:s}}};return t=e$1_([i$2w("esri.views.PopupView")],t),t};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
s$2h.getLogger("esri.core.support.OwningCollection");let m$n=class extends(a$26(S$F)){constructor(e){super(e),this.handles.add([this.on("before-add",(e=>{t$1O(e.item)&&e.preventDefault();})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(e=>this._release(e.item)))]);}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll());}_ownAll(){for(const e of this.items)this._own(e);}_releaseAll(){for(const e of this.items)this._release(e);}_createNewInstance(e){return this.itemType?new(S$F.ofType(this.itemType.Type))(e):new S$F(e)}};function a$M(e,t){return {type:e,cast:t$13,set(s){const r=n$2a(s,this._get(t),e);r.owner=this,this._set(t,r);}}}e$1_([d$1S()],m$n.prototype,"owner",null),m$n=e$1_([i$2w("esri.core.support.OwningCollection")],m$n);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$H=class extends m$n{_own(r){r.layer&&"remove"in r.layer&&r.layer!==this.owner&&r.layer.remove(r),r.layer=this.owner;}_release(r){r.layer===this.owner&&(r.layer=null);}};e$1_([n$2x({Type:h$U,ensureType:b$Z(h$U)})],c$H.prototype,"itemType",void 0),c$H=e$1_([i$2w("esri.support.GraphicsCollection")],c$H);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let a$L=class extends p$33{constructor(e){super(e),this.view=null,this.baseLayerViews=new S$F,this.referenceLayerViews=new S$F,this._loadingHandle=i$2i(this,"view.map.basemap",(e=>{e&&e.load().catch((()=>{}));}));}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);}get suspended(){return !this.view||this.view.suspended}get updating(){return (!this.view||!this.view.suspended)&&!(!(this.view&&this.view.map&&this.view.map.basemap)||this.view.map.basemap.loaded)}};e$1_([d$1S({constructOnly:!0})],a$L.prototype,"view",void 0),e$1_([d$1S({readOnly:!0})],a$L.prototype,"baseLayerViews",void 0),e$1_([d$1S({readOnly:!0})],a$L.prototype,"referenceLayerViews",void 0),e$1_([d$1S({readOnly:!0})],a$L.prototype,"suspended",null),e$1_([d$1S({type:Boolean,readOnly:!0})],a$L.prototype,"updating",null),a$L=e$1_([i$2w("esri.views.BasemapView")],a$L);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const _$9=s$2h.getLogger("esri.views.LayerViewManager");class g$e{constructor(e,r,t){this.layer=e,this.view=r,this.layerViewImporter=t,this._controller=new AbortController,this._deferred=A$v(),this._started=!1,this.done=!1,j$M(this._controller.signal,(()=>{const r=new s$29("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(r);}));}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:e}=this;if(!e)return;const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:e}),i.emit("layerview-destroy",{layer:r,layerView:e}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null;}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:r,view:t}=this;this._map=t.map;try{var a,s;let l,y;if(await r.load({signal:e}),"prefetchResources"in r&&await r.prefetchResources({signal:e}),r.createLayerView)l=await r.createLayerView(t,{signal:e});else {if(!this.layerViewImporter.hasLayerViewModule(r))throw new s$29("layer:view-not-supported","No layerview implementation was found");const a=await this.layerViewImporter.importLayerView(r);h$1x(e),l="default"in a?new a.default({layer:r,view:t}):new a({layer:r,view:t});}const h=()=>{y=s$2k(y),l.destroyed||l.destroy(),l.layer=null,l.parent=null,l.view=null,this.done=!0;};y=j$M(e,h),h$1x(e);try{await l.when();}catch(o){throw h(),o}if(!(null==(a=this._map)||null==(s=a.allLayers)?void 0:s.includes(r)))return h(),void this._deferred.reject(new s$29("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=l,r.emit("layerview-create",{view:t,layerView:l}),t.emit("layerview-create",{layer:r,layerView:l}),this.done=!0,this._deferred.resolve(l);}catch(o){r.emit("layerview-create-error",{view:t,error:o}),t.emit("layerview-create-error",{layer:r,error:o}),this.done=!0,this._deferred.reject(new s$29("layerview:create-error","layerview creation failed",{layer:r,error:o}));}}}let V$2=class extends d$1a{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new l$1z,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var e;const r=null==(e=this.view.map)?void 0:e.allLayers;if(r)for(const i of r)this.layerViewImporter.hasLayerViewModule(i)&&this.layerViewImporter.importLayerView(i);},this._reschedule=()=>(t$1O(this._workPromise)&&(this._workPromise=A$v()),this.handles.remove("reschedule"),this.handles.add(v$R(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var e,i,t;const a=this.view.map;if(this._map!==a&&(this.clear(),this._map=a),t$1O(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const s=new p$1v({getCollections:()=>this._rootCollectionNames.map((e=>this.get(e))),getChildrenFunction:e=>e&&"layers"in e?e.layers:null});if(!s)return this._workPromise.resolve(),void(this._workPromise=null);for(const r of s)this._createLayerView(r);this._refreshCollections();for(const[r,o]of this._layerLayerViewInfoMap)s.includes(r)||(this._layerLayerViewInfoMap.delete(o.layer),o.destroy());const l=s.filter((e=>"group"===e.type)).map((e=>e.layers)),n=[null==a||null==(e=a.ground)?void 0:e.layers,null==a||null==(i=a.basemap)?void 0:i.baseLayers,null==a||null==(t=a.basemap)?void 0:t.referenceLayers,null==a?void 0:a.layers,...l].filter((e=>!!e));this.handles.add(n.map((e=>this._watchUpdatingTracking.addOnCollectionChange(e,this._reschedule))),"collection-change"),this._workPromise.resolve(),this._workPromise=null;};}initialize(){this.handles.add([$$f(this,"view.map.allLayers","change",this._preloadLayerViewModules,this._preloadLayerViewModules),i$2i(this.view,["map.basemap","map.ground","map.layers","ready"],this._reschedule,!0)]),this._preloadLayerViewModules(),this._reschedule();}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null;}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return r$1G(this._workPromise)||this._watchUpdatingTracking.updating||n$2M(this._layerLayerViewInfoMap,(e=>!e.done))}get updatingRemaining(){let e=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections();}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new s$29("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,r]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining");}_populateLayerViewsOwners(e,r,i){if(!e||!r)return void(r&&r.removeAll());let t=0;for(const a of e){const e=this._layerLayerViewInfoMap.get(a);if(!e||!e.layerView)continue;const s=e.layerView;s.layer=a,s.parent=i,r.getItemAt(t)!==s&&r.splice(t,0,s),a.layers&&this._populateLayerViewsOwners(a.layers,s.layerViews,s),t+=1;}t<r.length&&r.splice(t,r.length);}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch((()=>{})),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const r=new g$e(e,this.view,this.layerViewImporter);r.promise.then((()=>this._refreshCollections()),(r=>{var i,t;r&&(d$1O(r)||"cancelled:layerview-create"===r.name)||_$9.error(`Failed to create layerview for layer title:'${null!=(i=e.title)?i:"no title"}', id:'${null!=(t=e.id)?t:"no id"}' of type '${e.type}'.`,{layer:e,error:r});this._refreshCollections();})),this._layerLayerViewInfoMap.set(e,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining");}};e$1_([d$1S()],V$2.prototype,"_workPromise",void 0),e$1_([d$1S({readOnly:!0})],V$2.prototype,"_watchUpdatingTracking",void 0),e$1_([d$1S({readOnly:!0})],V$2.prototype,"_layersToLayerViews",null),e$1_([d$1S({readOnly:!0})],V$2.prototype,"_rootCollectionNames",null),e$1_([d$1S()],V$2.prototype,"layerViewImporter",void 0),e$1_([d$1S()],V$2.prototype,"supportsGround",void 0),e$1_([d$1S({readOnly:!0})],V$2.prototype,"updating",null),e$1_([d$1S({readOnly:!0})],V$2.prototype,"updatingRemaining",null),e$1_([d$1S({constructOnly:!0})],V$2.prototype,"view",void 0),V$2=e$1_([i$2w("esri.views.LayerViewManager")],V$2);const L$6=V$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$H=class extends p$33{constructor(o){super(o),this.factor=1.5,this.offset=c$2A(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0;}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};e$1_([d$1S({type:Number})],i$H.prototype,"factor",void 0),e$1_([d$1S({nonNullable:!0})],i$H.prototype,"offset",void 0),e$1_([d$1S()],i$H.prototype,"position",void 0),e$1_([d$1S({type:Number,range:{min:0}})],i$H.prototype,"size",void 0),e$1_([d$1S()],i$H.prototype,"maskUrl",void 0),e$1_([d$1S()],i$H.prototype,"maskEnabled",void 0),e$1_([d$1S()],i$H.prototype,"overlayUrl",void 0),e$1_([d$1S()],i$H.prototype,"overlayEnabled",void 0),e$1_([d$1S({readOnly:!0})],i$H.prototype,"version",null),e$1_([d$1S({type:Boolean})],i$H.prototype,"visible",void 0),i$H=e$1_([i$2w("esri.views.Magnifier")],i$H);const p$A=i$H;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$G=class extends p$33{constructor(){super(...arguments),this._tasks=new Array,this.running=!1;}get length(){return this._tasks.length}destroy(){this.cancelAll();}runTask(s){for(;!s.done&&this._process(s);)s.madeProgress();}push(s,r,t){return this.running=!0,new Promise(((e,o)=>this._tasks.push(new a$K(e,o,s,r,t))))}unshift(s,r,t){return this.running=!0,new Promise(((e,o)=>this._tasks.unshift(new a$K(e,o,s,r,t))))}_process(s){if(0===this._tasks.length)return !1;const r=this._tasks.shift();try{const c=p$37(r.signal);if(c&&!r.abortCallback)r.reject(m$22());else {const t=c?r.abortCallback(m$22()):r.callback(s);q$p(t)?t.then(r.resolve,r.reject):r.resolve(t);}}catch(c){r.reject(c);}return this.running=this._tasks.length>0,!0}cancelAll(){const s=m$22();for(const r of this._tasks)if(r.abortCallback){const t=r.abortCallback(s);r.resolve(t);}else r.reject(s);this._tasks.length=0,this.running=!1;}};e$1_([d$1S()],i$G.prototype,"running",void 0),i$G=e$1_([i$2w("esri.layers.support.PromiseQueue")],i$G);class a$K{constructor(s,r,t,e,o){this.resolve=s,this.reject=r,this.callback=t,this.signal=e,this.abortCallback=o;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$p=class extends p$33{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;}};e$1_([d$1S()],t$p.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),e$1_([d$1S()],t$p.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),t$p=e$1_([i$2w("esri.views.support.DebugFlags")],t$p);const p$z=new t$p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const I$5=s$2h.getLogger("esri.views.support.Scheduler");var f$f;!function(e){e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="cloud generator",e[e.TEST_PRIO=1]="TEST_PRIO";}(f$f||(f$f={}));const A$4=0,S$7=new Map([[f$f.RESOURCE_CONTROLLER,A$4],[f$f.SLIDE,A$4],[f$f.STREAM_DATA_LOADER,A$4],[f$f.ELEVATION_QUERY,A$4],[f$f.TERRAIN_SURFACE,1],[f$f.SURFACE_GEOMETRY_UPDATES,1],[f$f.GRAPHICS_CORE,2],[f$f.I3S_CONTROLLER,2],[f$f.POINT_CLOUD_LAYER,2],[f$f.FEATURE_TILE_FETCHER,2],[f$f.OVERLAY,4],[f$f.STAGE,4],[f$f.GRAPHICS_DECONFLICTOR,4],[f$f.FILTER_VISIBILITY,4],[f$f.SCALE_VISIBILITY,4],[f$f.FRUSTUM_VISIBILITY,4],[f$f.POINT_OF_INTEREST_FREQUENT,6],[f$f.POINT_OF_INTEREST_INFREQUENT,30],[f$f.LABELER,8],[f$f.FEATURE_QUERY_ENGINE,8],[f$f.FEATURE_TILE_TREE,16],[f$f.FEATURE_TILE_TREE_ACTIVE,A$4],[f$f.ELEVATION_ALIGNMENT,12],[f$f.TEXT_TEXTURE_ATLAS,12],[f$f.CLOUDS_GENERATOR,12],[f$f.TEXTURE_UNLOAD,12],[f$f.LINE_OF_SIGHT_TOOL,16],[f$f.LINE_OF_SIGHT_TOOL_INTERACTIVE,A$4],[f$f.SNAPPING,A$4],[f$f.SHADOW_ACCUMULATOR,30]]);function b$8(e){return S$7.has(e)?S$7.get(e):"number"==typeof e?e:1}const L$5=n$2z(6.5),k$6=n$2z(1),O$7=n$2z(30),U$3=n$2z(1e3/30),N$6=n$2z(100),P$7=.9;var F$3,y$d;!function(r){let h=class extends p$33{constructor(e){super(e),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new e$1G("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=null,this._state=1,this._tasks=new n$2A,this._runQueue=new n$2A,this._load=0,this._idleStateCallbacks=new n$2A,this._idleUpdatesStartFired=!1,this._maxReschedule=v$7,this._forceTask=!1,this._debug=!1,this._debugHandle=i$2i(p$z,"SCHEDULER_LOG_SLOW_TASKS",(e=>this._debug=e)),this._budget=new d(e.nowFunc);for(const r of Object.keys(f$f))this.performanceInfo.tasks.set(f$f[r],new e$1G(f$f[r]));let t;const s=this;this._test={get state(){return c$3f(t,s._state)},set state(e){t=e;},FRAME_SAFETY_BUDGET:L$5,INTERACTING_BUDGET:U$3,IDLE_BUDGET:N$6,get budget(){return s._budget.budget},usedBudget:0,setBudget:e=>s._budget=e,updateTask:e=>this._updateTask(e),getState:e=>this._getState(e),getRuntime:e=>this._getRuntime(e),resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()};}destroy(){this._debugHandle&&this._debugHandle.remove(),this._microTaskQueued=!1;}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=v$7,this._schedule(),this.frame()));})));}registerTask(e,t){const s=b$8(e),r=new _(this,e,t,s);return this._tasks.push(r),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new e$1G(e)),r}registerIdleStateCallbacks(e,t){const s={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(s),2===this.state&&this._idleUpdatesStartFired&&s.idleBegin();const r=this;return {remove:()=>this._removeIdleStateCallbacks(s),set idleBegin(e){r._idleUpdatesStartFired&&(s.idleEnd(),2===r._state&&e()),s.idleBegin=e;},set idleEnd(e){s.idleEnd=e;}}}get now(){return this.nowFunc()}get load(){return this._load}set state(e){this._state!==e&&(this._state=e,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((e=>e.idleEnd()))));}get state(){return t$1O(this._test.state)?this._state:this._test.state}updateBudget(e){this._test.usedBudget=0;let t=L$5,s=e.frameDuration,r=k$6;switch(this.state){case 2:t=n$2z(0),s=n$2z(Math.max(N$6,e.frameDuration)),r=O$7;break;case 1:s=n$2z(Math.max(U$3,e.frameDuration));}return s=n$2z(s-e.elapsedFrameTime-t),2!==this.state&&s<k$6&&!this._forceTask?(this._forceTask=!0,!1):(s=n$2z(Math.max(s,r)),this._budget.reset(s,this.state),this._maxReschedule=v$7,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((e=>e.idleBegin()))),this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating();}this._test.usedBudget=this._budget.elapsed;}stopFrame(){this._budget.reset(n$2z(0),this._state),this._budget.madeProgress();}_removeIdleStateCallbacks(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e);}removeTask(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e);}_updateTask(e){this._tasks.forAll((t=>{t.name===e&&t.setPriority(e);}));}_getState(e){if(this._runQueue.some((t=>t.name===e)))return y$d.SCHEDULED;let t=y$d.IDLE;return this._tasks.forAll((s=>{s.name===e&&s.needsUpdate&&(s.schedulePriority<=1?t=y$d.READY:t!==y$d.READY&&(t=y$d.WAITING));})),t}_getRuntime(e){let t=0;return this._tasks.forAll((s=>{s.name===e&&(t+=s.runtime);})),t}_resetRuntimes(){this._tasks.forAll((e=>e.runtime=0));}_getRunning(){const e=new Map;if(this._tasks.forAll((t=>{t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1);})),0===e.size)return null;let t="";return e.forEach(((e,s)=>{t+=e>1?` ${e}x ${s}`:` ${s}`;})),t}_runIdle(){this._run();}_runInteracting(){this._run();}_runAnimating(){this._run();}_updateLoad(){const e=this._tasks.reduce(((e,t)=>t.needsUpdate?++e:e),0);this._load=this._load*P$7+e*(1-P$7);}_schedule(){if(this._maxReschedule<=0)return !1;for(this._runQueue.filterInPlace((e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1))),this._tasks.forAll((e=>{e.basePriority===A$4&&e.needsUpdate&&!this._runQueue.some((t=>t===e))&&this._runQueue.unshift(e);}));0===this._runQueue.length;){let e=!1,t=0;if(this._tasks.forAll((s=>{if(s.needsUpdate&&0!==s.schedulePriority&&s.basePriority!==A$4)if(e=!0,t=Math.max(t,s.basePriority),1===s.schedulePriority)s.schedulePriority=0,this._runQueue.push(s);else --s.schedulePriority;})),!e)return this.updating=!1,!1;this._maxReschedule===v$7&&(this._maxReschedule=t),--this._maxReschedule;}return this.updating=!0,!0}_run(){const e=this._budget.now();this._startFrameTaskTimes();do{for(;this._runQueue.length>0;){const s=this._budget.now(),r=this._runQueue.pop();this._budget.resetProgress();try{r.task.runTask(this._budget);}catch(t){I$5.error(`Exception in task "${r.name}"`,t);}r.schedulePriority=r.basePriority;const i=this._budget.now()-s;if(r.runtime+=i,this._frameTaskTimes.set(r.priority,this._frameTaskTimes.get(r.priority)+i),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",r.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return void this._recordFrameTaskTimes(this._budget.now()-e)}}while(this._schedule());this._recordFrameTaskTimes(this._budget.now()-e);}_startFrameTaskTimes(){for(const e of Object.keys(f$f))this._frameTaskTimes.set(f$f[e],0);}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach(((e,t)=>this.performanceInfo.tasks.get(t).record(e))),this.performanceInfo.total.record(e);}get test(){return this._test}};e$1_([d$1S()],h.prototype,"updating",void 0),e$1_([d$1S()],h.prototype,"nowFunc",void 0),h=e$1_([i$2w("esri.views.support.Scheduler")],h),r.Scheduler=h;let _=class extends p$33{constructor(e,t,r,i){super({}),this._scheduler=e,this.name=t,this._basePriority=i,this.runtime=0,this._queue=new i$G,this._handles=new u$1X,this.schedulePriority=this._basePriority,this.task=r$1G(r)?r:this._queue,this._handles.add(u$1l((()=>this.task.running),(()=>e.activate())));}get updating(){return this._queue.running}normalizeCtorArgs(){return {}}remove(){this.processQueue(C$7),this._scheduler.removeTask(this),this.schedule=D$5.schedule,this.reschedule=D$5.reschedule,this._handles.destroy();}get basePriority(){return this._basePriority}setPriority(e){this.name=e;const t=b$8(e);this._basePriority!==A$4&&0===this.schedulePriority||(this.schedulePriority=t),this._basePriority=t;}get priority(){return this.name}set priority(e){this.setPriority(e);}get needsUpdate(){return this.updating||this.task.running}schedule(e,t,s){return this._queue.push(e,t,s)}reschedule(e,t,s){return this._queue.unshift(e,t,s)}processQueue(e){this._queue.runTask(e);}};e$1_([d$1S({constructOnly:!0})],_.prototype,"task",void 0),e$1_([d$1S({readOnly:!0})],_.prototype,"updating",null),_=e$1_([i$2w("esri.views.support.SchedulerTask")],_);class d{constructor(e){this.now=e,this._begin=0,this._budget=0,this._state=2,this._didWork=!1,this._enabled=!0;}run(e){return !this.done&&(!0===e()&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0;}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e;}reset(e,t){this._begin=this.now(),this._budget=e,this._state=t,this._didWork=!1;}get remaining(){return Math.max(this._budget-this.elapsed,0)}get elapsed(){return this.now()-this._begin}resetProgress(){this._didWork=!1;}get hasProgressed(){return this._didWork}}r.Budget=d;}(F$3||(F$3={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i";}(y$d||(y$d={}));const C$7=(()=>{const e=new F$3.Budget((()=>performance.now()));return e.enabled=!1,e})();class w$7{remove(){}processQueue(){}schedule(e,t,s){try{if(p$37(t)){const e=m$22();return s?Promise.resolve(s(e)):Promise.reject(e)}return U$p(e(C$7))}catch(r){return Promise.reject(r)}}reschedule(e,t,s){return this.schedule(e,t,s)}}const D$5=new w$7,v$7=Number.MAX_SAFE_INTEGER;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$B{constructor(s,u){this._stage=s,this._textureRequests=new Map,this._frameTask=r$1G(u)?u.registerTask(f$f.TEXTURE_UNLOAD):D$5;}destroy(){this._frameTask.remove(),this._textureRequests.forEach((e=>this._releaseTextureRequest(e))),this._textureRequests.clear();}fromData(e,t){const r=this.makeUid(e);let s=this._textureRequests.get(r);return s||(s={referenceCount:0,texture:t(),textureAsync:null,abortController:null},this._stage&&(this._stage.add(s.texture),this._stage.loadSynchronous(s.texture)),this._textureRequests.set(r,s)),s.referenceCount++,{uid:r,texture:s.texture,release:()=>this._release(r)}}_release(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule((()=>this._releaseNow(e)))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`);}get test(){return {textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e));}_releaseTextureRequest(e){var t;e.texture?null==(t=this._stage)||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null);}makeUid(t,r=null){return r$1G(r)?`${t}.${r}px`:t}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$r=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],i$F={};function o$p(t){return !!i$F[t]}function s$A(t){for(const e of t)if(!o$p(e))return !1;return !0}r$r.forEach((t=>{i$F[t]=!0;}));class p$y{constructor(t){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null;}connect(t){t&&this.disconnect(),this.inputManager=t,this.handlers.forEach((({handler:t,priority:e},a)=>this.inputManager.installHandlers(a,[t],e)));}disconnect(){this.inputManager&&this.handlers.forEach(((t,e)=>this.inputManager.uninstallHandlers(e))),this.inputManager=null;}destroy(){this.disconnect(),this.handlers.clear(),this.view=null;}on(t,e,a,r){const i=Array.isArray(t)?t:t.split(",");if(!s$A(i))return i.some(o$p)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let p,l;Array.isArray(e)?l=e:(p=e,l=[]),"function"==typeof a?p=a:r=a,r=null!=r?r:u$t.DEFAULT;const u=this.createUniqueGroupName(),m=new c$G(this.view,i,l,p);this.handlers.set(u,{handler:m,priority:r});for(const n of i){const t=this.handlerCounts.get(n)||0;this.handlerCounts.set(n,t+1);}return this.inputManager&&this.inputManager.installHandlers(u,[m],r),{remove:()=>this.removeHandler(u,i)}}hasHandler(t){return !!this.handlerCounts.get(t)}removeHandler(t,e){if(this.handlers.has(t)){this.handlers.delete(t);for(const t of e){const e=this.handlerCounts.get(t);void 0===e?console.error("Trying to remove handler for event that has no handlers registered: ",t):1===e?this.handlerCounts.delete(t):this.handlerCounts.set(t,e-1);}}this.inputManager&&this.inputManager.uninstallHandlers(t);}createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class c$G extends i$K{constructor(t,e,a,n){super(!0),this.view=t;for(const r of e)switch(r){case"click":this.registerIncoming("click",a,(t=>n(this.wrapClick(t))));break;case"double-click":this.registerIncoming("double-click",a,(t=>n(this.wrapDoubleClick(t))));break;case"immediate-click":this.registerIncoming("immediate-click",a,(t=>n(this.wrapImmediateClick(t))));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",a,(t=>n(this.wrapImmediateDoubleClick(t))));break;case"hold":this.registerIncoming("hold",a,(t=>n(this.wrapHold(t))));break;case"drag":this.registerIncoming("drag",a,(t=>{const e=this.wrapDrag(t);e&&n(e);}));break;case"key-down":this.registerIncoming("key-down",a,(t=>n(this.wrapKeyDown(t))));break;case"key-up":this.registerIncoming("key-up",a,(t=>n(this.wrapKeyUp(t))));break;case"pointer-down":this.registerIncoming("pointer-down",a,(t=>n(this.wrapPointer(t,"pointer-down"))));break;case"pointer-move":this.registerIncoming("pointer-move",a,(t=>n(this.wrapPointer(t,"pointer-move"))));break;case"pointer-up":this.registerIncoming("pointer-up",a,(t=>n(this.wrapPointer(t,"pointer-up"))));break;case"pointer-drag":this.registerIncoming("pointer-drag",a,(t=>n(this.wrapPointerDrag(t))));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",a,(t=>n(this.wrapMouseWheel(t))));break;case"pointer-enter":this.registerIncoming("pointer-enter",a,(t=>n(this.wrapPointer(t,"pointer-enter"))));break;case"pointer-leave":this.registerIncoming("pointer-leave",a,(t=>n(this.wrapPointer(t,"pointer-leave"))));break;case"gamepad":this.registerIncoming("gamepad",a,(t=>{n(this.wrapGamepad(t));}));break;case"focus":this.registerIncoming("focus",a,(t=>{n(this.wrapFocus(t));}));break;case"blur":this.registerIncoming("blur",a,(t=>{n(this.wrapBlur(t));}));}}wrapFocus(t){return {type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapBlur(t){return {type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapClick(t){const{pointerType:a,button:n,buttons:r,x:i,y:o,native:s,eventId:p}=t.data,{cancelable:c,timestamp:l}=t;return {type:"click",pointerType:a,button:n,buttons:r,x:i,y:o,native:s,timestamp:l,screenPoint:c$2A(i,o),mapPoint:this.getMapPoint(i,o),eventId:p,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapDoubleClick(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o,eventId:s}=t.data,{cancelable:p,timestamp:c}=t;return {type:"double-click",pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:c,mapPoint:this.getMapPoint(r,i),eventId:s,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapImmediateClick(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o,eventId:s}=t.data,p=o.pointerId,{cancelable:c,timestamp:l}=t;return {type:"immediate-click",pointerId:p,pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:l,mapPoint:this.getMapPoint(r,i),eventId:s,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapImmediateDoubleClick(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o,eventId:s}=t.data,p=o.pointerId,{cancelable:c,timestamp:l}=t;return {type:"immediate-double-click",pointerId:p,pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:l,mapPoint:this.getMapPoint(r,i),eventId:s,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapHold(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o}=t.data,{cancelable:s,timestamp:p}=t;return {type:"hold",pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:p,mapPoint:this.getMapPoint(r,i),cancelable:s,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}getMapPoint(t,a){return this.view.toMap(c$2A(t,a),{exclude:[]})}wrapDrag(e){const a=e.data,{x:n,y:r}=a.center,{action:i,pointerType:o,button:s}=a;if("start"===i&&(this.latestDragStart=a),!this.latestDragStart)return;const p=a.pointer.native,c=a.buttons,{cancelable:l,timestamp:u}=e,m={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return "end"===i&&(this.latestDragStart=void 0),{type:"drag",action:i,x:n,y:r,origin:m,pointerType:o,button:s,buttons:c,radius:a.radius,angle:m$1S(a.angle),native:p,timestamp:u,cancelable:l,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}wrapKeyDown(t){const{key:e,repeat:a,native:n}=t.data,{cancelable:r,timestamp:i}=t;return {type:"key-down",key:e,repeat:a,native:n,timestamp:i,cancelable:r,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapKeyUp(t){const{key:e,native:a}=t.data,{cancelable:n,timestamp:r}=t;return {type:"key-up",key:e,native:a,timestamp:r,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapPointer(t,e){const{x:a,y:n,button:r,buttons:i,native:o,eventId:s}=t.data,p=o.pointerId,c=o.pointerType,{cancelable:l,timestamp:u}=t;return {type:e,x:a,y:n,pointerId:p,pointerType:c,button:r,buttons:i,native:o,timestamp:u,eventId:s,cancelable:l,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapPointerDrag(t){const{x:e,y:a,buttons:n,native:r,eventId:i}=t.data.currentEvent,{button:o}=t.data.startEvent,s=t.data.startEvent.native.pointerId,p=t.data.startEvent.native.pointerType,c=t.data.action,l={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:u,timestamp:m}=t;return {type:"pointer-drag",x:e,y:a,pointerId:s,pointerType:p,button:o,buttons:n,action:c,origin:l,native:r,timestamp:m,eventId:i,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapMouseWheel(t){const{cancelable:e,data:a,timestamp:n}=t,{x:r,y:i,deltaY:o,native:s}=a;return {type:"mouse-wheel",x:r,y:i,deltaY:o,native:s,timestamp:n,cancelable:e,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapGamepad(t){const{action:e,state:a,device:n}=t.data,{cancelable:r,timestamp:i}=t,{buttons:o,axes:s}=a;return {type:"gamepad",device:n,timestamp:i,action:e,buttons:o,axes:s,cancelable:r,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$m(t){return [t.on("after-add",(t=>{const e=t.item;e.view&&e.view.ready&&!e.attached&&e.attach();})),t.on("after-remove",(t=>{const e=t.item;e.active&&(e.view.activeTool=null),e.attached&&e.detach();}))]}function a$J(t){return t.visible&&t.getEditableFlag(0)&&t.getEditableFlag(1)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$o(t){return c$2A(t.x,t.y)}function n$P(t,n){const c=(t instanceof HTMLElement?t:t.surface).getBoundingClientRect();return c$2A(n.clientX-c.left,n.clientY-c.top)}function c$F(e,c){return c instanceof Event?n$P(e,c):t$o(c)}function i$E(e){if(e instanceof Event)return !0;if("object"==typeof e&&"type"in e){switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return !0;default:return !1}}return !1}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class p$x{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null;}get cursor(){return this._cursor}handleInputEvent(t,a){const s=()=>t.stopPropagation();switch(t.type){case"pointer-move":c$E(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(s(),"end"===t.action&&(this._stopDrag=!1));break;case"pointer-down":{if(!u$o(t))break;const e=t$o(t),n=this._intersect(e,t.pointerType,a.forEachTool);if(t$1O(n))break;const p=this._findToolAndManipulatorByKey(n,a.forEachTool,h$m),c=o$1Y(p,(t=>t.manipulator)),d=o$1Y(p,(t=>t.tool));!(r$1G(c)&&r$1G(d)&&c.interactive)||c.grabbable&&c.grabbableForEvent(t)||!c.grabbing||c.dragging||this._ungrabManipulatorBeforeDragging(c,d,t),r$1G(c)&&c.interactive&&c.grabbable&&c.grabbableForEvent(t)&&!c.grabbing&&(this._grabbedManipulators.set(t.pointerId,{key:n,start:e,pointerType:t.pointerType}),1===this._grabbedManipulators.size&&a.activeTool!==n.tool&&(this._currentlyActiveTool=a.activeTool,this._revertToActiveTool=!0,a.setActiveTool(n.tool)),c.grabbing=!0,c.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:e}),s());break}case"pointer-up":this._handlePointerEnd(t,a);break;case"pointer-drag":{if(!u$o(t))break;const o=this._grabbedManipulators.get(t.pointerId),p=this._draggedManipulators.get(t.pointerId),c=o$1Y(o||p,(({key:t})=>t)),d=this._findManipulatorByKey(c,a.forEachTool);if(t$1O(d))break;const h=t$o(t);h.x=e$1o(h.x,0,a.view.width),h.y=e$1o(h.y,0,a.view.height);const g=e$1Y(o||p).start;switch(t.action){case"start":case"update":"update"!==t.action&&1!==this._grabbedManipulators.size||(d.dragging=!0,p?d.events.emit("drag",{action:"update",start:g,screenPoint:h}):d.events.emit("drag",{action:"start",start:g,screenPoint:h,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{key:e$1Y(c),start:g}));break;case"end":d.dragging=!1,p&&d.events.emit("drag",{action:"end",start:g,screenPoint:h}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,a);}s();break}case"immediate-click":{const e=t$o(t),r=this._intersect(e,t.pointerType,a.forEachTool),n=this._findToolAndManipulatorByKey(r,a.forEachTool,h$m);if(d$l(t)||a.forEachTool((t=>{if((!r$1G(n)||n.tool!==t||t.automaticManipulatorSelection)&&t.manipulators){let e=!1;t.manipulators.forEach((({manipulator:t})=>{t.selected&&(t.selected=!1,e=!0);})),e&&t.manipulatorSelectionChanged&&t.manipulatorSelectionChanged();}})),t$1O(n))break;const{manipulator:p,tool:c}=n;if(!p.interactive)break;p.selectable&&c.automaticManipulatorSelection&&(p.selected=!p.selected,c.manipulatorSelectionChanged&&c.manipulatorSelectionChanged());const u=t.native.shiftKey;p.events.emit("immediate-click",{screenPoint:e,button:t.button,pointerType:t.pointerType,shiftKey:u,stopPropagation:s});break}case"click":{const e=t$o(t),o=this._intersect(e,t.pointerType,a.forEachTool),r=this._findManipulatorByKey(o,a.forEachTool);if(t$1O(r)||!r.interactive)break;const n=t.native.shiftKey;r.events.emit(t.type,{screenPoint:e,button:t.button,pointerType:t.pointerType,shiftKey:n}),s();break}case"double-click":{const e=t$o(t),o=this._intersect(e,t.pointerType,a.forEachTool),r=this._findManipulatorByKey(o,a.forEachTool);if(t$1O(r)||!r.interactive)break;const n=t.native.shiftKey;r.events.emit("double-click",{screenPoint:e,button:t.button,pointerType:t.pointerType,shiftKey:n,stopPropagation:s});break}case"immediate-double-click":{const e=t$o(t),o=this._intersect(e,t.pointerType,a.forEachTool),r=this._findManipulatorByKey(o,a.forEachTool);if(t$1O(r)||!r.interactive)break;const n=t.native.shiftKey;r.events.emit("immediate-double-click",{screenPoint:e,button:t.button,pointerType:t.pointerType,shiftKey:n,stopPropagation:s});break}}this._updateCursor(a.forEachTool);}_ungrabManipulatorBeforeDragging(t,e,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:t$o(i)}),this._grabbedManipulators.forEach((({key:i},o)=>{i.tool===e&&e.manipulators.findById(i.manipulatorId)===t&&this._grabbedManipulators.delete(o);}));}_handlePointerEnd(t,e){const i=o$1Y(this._grabbedManipulators.get(t.pointerId),(({key:t})=>t)),n=this._findManipulatorByKey(i,e.forEachTool);r$1G(n)&&!n.dragging&&(1===this._grabbedManipulators.size&&0===this._draggedManipulators.size&&this._revertToActiveTool&&(e.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),n.grabbing&&(n.grabbing=!1,n.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:t$o(t)})),this._grabbedManipulators.delete(t.pointerId));}_cursorFromMap(e,i){let r=null;return n$2M(e,(({key:t})=>{const e=this._findManipulatorByKey(t,i);return !!(r$1G(e)&&e.interactive&&"cursor"in e&&e.cursor)&&(r=e.cursor,!0)})),r}_updateCursor(t){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,t)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,t)||"pointer":this._cursor=null;}clearPointers(t,e,r=!0,n){const a=e=>e.tool===t&&(t$1O(n)||e.manipulatorId===n);this._grabbedManipulators.forEach((({key:t,pointerType:i},r)=>{if(a(t)){this._grabbedManipulators.delete(r);const n=this._findManipulatorByKey(t,e);r$1G(n)&&(n.grabbing=!1,n.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:i}));}})),this._draggedManipulators.forEach((({key:t},i)=>{if(a(t)){this._draggedManipulators.delete(i);const r=this._findManipulatorByKey(t,e);r$1G(r)&&(r.dragging=!1,r.events.emit("drag",{action:"cancel"}));}})),r&&this._hoveredManipulators.forEach((({key:t},i)=>{if(a(t)){this._hoveredManipulators.delete(i);const r=this._findManipulatorByKey(t,e);r$1G(r)&&(r.hovering=!1);}})),this._updateCursor(e);}_intersect(t,e,o){let r=null;return o((o=>{if(null==o.manipulators||!a$J(o))return !1;const n=o.manipulators.intersect(t,e);return !t$1O(n)&&(r={manipulatorId:n.id,tool:o},!0)})),r}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach(((e,i)=>{this._updateHoveredStateForPointerAtScreenPosition(c$2A(e.x,e.y),i,e.pointerType,t);}));}handleHoverEvent(t,e){"pointer-up"!==t.type&&"immediate-click"!==t.type&&"pointer-move"!==t.type||!c$E(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(t$o(t),t.pointerId,t.pointerType,e);}_updateHoveredStateForPointerAtScreenPosition(t,e,i,a){const s=this._intersect(t,i,a);let l=this._findManipulatorByKey(s,a);const p=o$1Y(this._hoveredManipulators.get(e),(({key:t})=>t)),c=this._findManipulatorByKey(p,a);r$1G(l)&&!l.interactive&&(l=null),c!==l&&(r$1G(c)&&(c.hovering=!1),r$1G(l)?(l.hovering=!0,this._hoveredManipulators.set(e,{key:e$1Y(s)})):this._hoveredManipulators.delete(e),this._updateCursor(a));}_findManipulatorByKey(t,e){return this._findToolAndManipulatorByKey(t,e,h$m)?h$m.manipulator:null}_findToolAndManipulatorByKey(t,e,r){return t$1O(t)?null:(r.tool=null,r.manipulator=null,e((e=>{if(e!==t.tool||null==e.manipulators||!a$J(e))return !1;const i=e.manipulators.findById(t.manipulatorId);return !!r$1G(i)&&(r.manipulator=i,r.tool=e,!0)})),r.manipulator?r:null)}}function c$E(t){return "mouse"===t}function u$o(t){return "mouse"!==t.pointerType||0===t.button}function d$l(t){return !!t.native.shiftKey}const h$m={manipulator:null,tool:null};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const f$e=s$2h.getLogger("esri.views.ToolViewManager"),T$3="manipulators",_$8="tools";let E$6=class extends d$1a{constructor(t){super(t),this._manipulatorState=new p$x,this.tools=new S$F,this.cursor=null,this._forEachTool=t=>{for(const o of this.tools.items)if(t(o))return};}initialize(){this.handles.add([this.view.on(r$r,(t=>{this._handleInputEvent(t);}),u$t.TOOL),...e$m(this.tools),this.tools.on("before-add",(t=>{const o=t.item;if(null==o||this.tools.includes(o))return f$e.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault()})),this.tools.on("before-remove",(({item:t})=>{this._manipulatorState.clearPointers(t,this._forEachTool);})),this.tools.on("change",(()=>{this._refreshToolWatchers();}))]);}destroy(){this._forEachTool((t=>t.destroy()));}set activeTool(t){if(r$1G(t)&&!this.view.ready)return void f$e.error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return void(r$1G(t)&&f$e.warn("Tool is already active - ignoring activation request."));r$1G(this.activeTool)&&this.activeTool.deactivate(),r$1G(t)&&t.activate(),this._set("activeTool",t),this._removeIncompleteTools(t);const o=t$1O(this.activeTool);for(const e of this.tools){e.setEditableFlag(1,o||e===this.activeTool);const t=a$J(e);!o&&t||this._manipulatorState.clearPointers(e,this._forEachTool,!t);}this._updateCursor();}get updating(){return this.updatingHandles.updating||this.tools.some((t=>t.updating))}attach(){this._forEachTool((t=>t.attach())),"3d"===this.view.type?(this._set("textures",new s$B(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([this.view.state.watch("camera",(()=>{this._forEachManipulator((t=>{null!=t.onViewChange&&t.onViewChange();}));})),this.view.elevationProvider.on("elevation-change",(t=>{this._forEachManipulator((o=>{null!=o.onElevationChange&&o.onElevationChange(t);}));}))],T$3)):this.handles.add(this.view.watch("extent",(()=>{this._forEachManipulator((t=>{null!=t.onViewChange&&t.onViewChange();}));})));}detach(){r$1G(this.activeTool)&&(this.activeTool=null),this._forEachTool((t=>{t.detach(),t.destroy();})),this.tools.removeAll(),this.handles.remove(T$3);}_forEachManipulator(t){this._forEachTool((o=>{o.manipulators&&o.manipulators.forEach((({manipulator:e})=>t(e,o)));}));}_handleInputEvent(t){let o=!1;const e={...t,stopPropagation:()=>{o=!0,t.stopPropagation();}};r$1G(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(e):this._forEachTool((t=>{!o&&t.attached&&t.visible&&t.handleInputEvent(e);})),!o&&"key-down"===t.type&&"Escape"===t.key&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(e,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t;},view:this.view}),!o&&r$1G(this.activeTool)&&this.activeTool.handleInputEventAfter(e),this._manipulatorState.handleHoverEvent(e,this._forEachTool),this._updateCursor();}_refreshToolWatchers(){this.handles.remove(_$8),this._forEachTool((t=>{if(t instanceof p$33){const o=f$1p(t,["cursor","visible","editable"],(()=>{a$J(t)||this._manipulatorState.clearPointers(t,this._forEachTool),this._updateCursor();}));this.handles.add(o,_$8);}t.manipulators&&this.handles.add(t.manipulators.on("change",(o=>{o.removed.forEach((({id:o})=>{this._manipulatorState.clearPointers(t,this._forEachTool,!0,o);})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor();})),_$8);})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor();}_updateCursor(){let t=this._manipulatorState.cursor;this._forEachTool((o=>!(!r$1G(o.cursor)||!o.visible)&&(t=o.cursor,!0))),this._get("cursor")!==t&&this._set("cursor",t);}_removeIncompleteTools(t){this.tools.filter((o=>(t$1O(t)||o!==t)&&!o.completed)).forEach((t=>{this.tools.remove(t),t.destroy();}));}};e$1_([d$1S({constructOnly:!0,nonNullable:!0})],E$6.prototype,"view",void 0),e$1_([d$1S({readOnly:!0,nonNullable:!0})],E$6.prototype,"textures",void 0),e$1_([d$1S({value:null})],E$6.prototype,"activeTool",null),e$1_([d$1S({readOnly:!0,type:S$F})],E$6.prototype,"tools",void 0),e$1_([d$1S({readOnly:!0})],E$6.prototype,"cursor",void 0),e$1_([d$1S({readOnly:!0})],E$6.prototype,"updating",null),E$6=e$1_([i$2w("esri.views.ToolViewManager")],E$6);const w$6=E$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let o$o=class extends p$33{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown","standard"===e.mapping?this._detectedDeviceType="standard":n$O.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index;}get native(){return (navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return a$I[this.deviceType]}};e$1_([d$1S({nonNullable:!0,readOnly:!0})],o$o.prototype,"nativeIndex",void 0),e$1_([d$1S({type:String,readOnly:!0})],o$o.prototype,"deviceType",null),e$1_([d$1S({type:Number,readOnly:!0})],o$o.prototype,"axisThreshold",null),o$o=e$1_([i$2w("esri.views.input.gamepad.GamepadInputDevice")],o$o);const n$O=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),a$I={standard:.15,spacemouse:.025,unknown:0},i$D=o$o;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$D=class extends p$33{constructor(...e){super(...e),this.devices=new S$F,this.enabledFocusMode="document";}};e$1_([d$1S({type:S$F.ofType(i$D),readOnly:!0})],c$D.prototype,"devices",void 0),e$1_([d$1S({type:["document","view","none"]})],c$D.prototype,"enabledFocusMode",void 0),c$D=e$1_([i$2w("esri.views.input.gamepad.GamepadSettings")],c$D);const i$C=c$D;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$w=class extends p$33{constructor(){super(...arguments),this.gamepad=new i$C;}};e$1_([d$1S({readOnly:!0})],p$w.prototype,"gamepad",void 0),p$w=e$1_([i$2w("esri.views.input.Input")],p$w);const a$H=p$w;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$z=class extends p$33{constructor(o){super(o),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1;}};e$1_([d$1S({type:Boolean,nonNullable:!0})],s$z.prototype,"enabled",void 0),e$1_([d$1S({type:i$D})],s$z.prototype,"device",void 0),e$1_([d$1S({type:["pan","zoom"],nonNullable:!0})],s$z.prototype,"mode",void 0),e$1_([d$1S({type:["forward-down","forward-up"],nonNullable:!0})],s$z.prototype,"tiltDirection",void 0),e$1_([d$1S({type:Number,nonNullable:!0})],s$z.prototype,"velocityFactor",void 0),s$z=e$1_([i$2w("esri.views.navigation.gamepad.GamepadSettings")],s$z);const a$G=s$z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let a$F=class extends p$33{constructor(o){super(o),this.browserTouchPanEnabled=!0,this.gamepad=new a$G,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0;}};e$1_([d$1S({type:Boolean})],a$F.prototype,"browserTouchPanEnabled",void 0),e$1_([d$1S({type:a$G,nonNullable:!0})],a$F.prototype,"gamepad",void 0),e$1_([d$1S({type:Boolean})],a$F.prototype,"momentumEnabled",void 0),e$1_([d$1S({type:Boolean})],a$F.prototype,"mouseWheelZoomEnabled",void 0),a$F=e$1_([i$2w("esri.views.navigation.Navigation")],a$F);const p$v=a$F;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function l$v(e){const r=e.url&&d$y(e.url);return !(null==(e.spatialReference&&e.spatialReference.vcsWkid)&&r$1G(r)&&"ImageServer"===r.serverType)&&h$l(e)&&e.heightModelInfo?e.heightModelInfo:f$d(e)?v$d.deriveUnitFromSR(d$k,e.spatialReference):null}function h$l(e){return "heightModelInfo"in e}function u$n(e){if("unknown"===e.type||!("capabilities"in e))return !1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return !0;default:return !1}}function f$d(e){return u$n(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):m$m(e)}function g$d(e){return null!=e.layers||m$m(e)||u$n(e)||h$l(e)}function m$m(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return !0;case"analysis":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return !1}return !1}const d$k=new v$d({heightModel:"gravity-related-height"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var _$7;const m$l=s$2h.getLogger("esri.views.support.DefaultsFromMap"),S$6=10;let y$c=_$7=class extends p$33{constructor(){super(...arguments),this._handles=new u$1X,this._waitTask=null,this._extentProjectController=null,this._spatialReferenceCandidates=null,this._extentCandidates=null,this.logDebugInformation=!1,this.isSpatialReferenceDone=!1,this.isTileInfoDone=!1,this.isHeightModelInfoSearching=!1,this.spatialReference=null,this.extent=null,this.heightModelInfo=null,this.vcsWkid=null,this.latestVcsWkid=null,this.mapCollectionPaths=_$7.DefaultMapCollectionPaths.slice(),this.tileInfo=null;}initialize(){this.watch("mapCollectionPaths",(()=>{this._running&&(this.reset(),this.start());}));}destroy(){this._set("view",null),this._handles=l$2t(this._handles),this._cancelLoading();}get _running(){return !!(this._handles&&this._handles.size>0)}reset(){this._handles.removeAll(),this._set("isSpatialReferenceDone",!1),this._set("isTileInfoDone",!1),this._set("isHeightModelInfoSearching",!1),this._set("spatialReference",null),this._set("extent",null),this._set("heightModelInfo",null),this._set("vcsWkid",null),this._set("latestVcsWkid",null),this._set("tileInfo",null),this._spatialReferenceCandidates=null,this._extentCandidates=null;}start(){this._handles.removeAll();const e=this._updateLayerChange.bind(this);for(const t of this.mapCollectionPaths)this._handles.add($$f(this.view,`map.${t}`,"change",e,e,e,!0));this._handles.add(s$1W(this,"isSpatialReferenceDone",(()=>this._updateTileInfo()),!0));}_ownerNameFromCollectionName(e){const t=e.lastIndexOf(".");return -1===t?"view":"view."+e.slice(0,t)}_ensureLoadedOwnersFromCollectionName(e){const t=this._ownerNameFromCollectionName(e).split(".");let i;for(let s=0;s<t.length&&(i=this.get(t.slice(0,s+1).join(".")),i);s++)if(i.load&&!i.isFulfilled())return {collectionName:e,owner:null,loading:i.load().catch((()=>{}))};return {collectionName:e,owner:i}}_cancelLoading(){this._waitTask=null,this._extentProjectController&&(this._extentProjectController.abort(),this._extentProjectController=null);}_updateWhen(e){let t=!0,i=!1;const s=e.catch((()=>{})).then((()=>{t?i=!0:s===this._waitTask&&this._update();}));return t=!1,i||(this._waitTask=s),i}_updateLayerChange(){this.isSpatialReferenceDone&&!this.spatialReference&&this._set("isSpatialReferenceDone",!1),this._update();}_update(){if(this._cancelLoading(),this.view){if(!this.isSpatialReferenceDone){this._debugLog("Starting search for spatial reference...");const e=this._processMapCollections((e=>this._processSpatialReferenceSource(e)));if(this._debugLog(`Search ended with status '${b$7(e)}'`),0!==e){let e=null,t=this._spatialReferenceCandidates;if(!t||t.length<1?(e=this.defaultSpatialReference,this._debugLog(`No spatial reference found, locking to default (${I$4(e)})`)):(this.defaultSpatialReference&&t.length>1&&t.findIndex((e=>e.equals(this.defaultSpatialReference)))>-1&&(t=[this.defaultSpatialReference]),e=t[0],this._debugLog(`Locking to ${I$4(e)}`)),this._set("spatialReference",e),e)if(this.extent)this._set("isSpatialReferenceDone",!0);else {const t=this.logDebugInformation;this.logDebugInformation=!1,this._processMapCollections((t=>this._findExtent(t,e))),this.logDebugInformation=t,this._projectExtentCandidate().catch((()=>{})).then((()=>this._set("isSpatialReferenceDone",!0)));}else this._set("isSpatialReferenceDone",!0);}}if(null==this.heightModelInfo&&this.view.isHeightModelInfoRequired){this._debugLog("Starting search for height model info...");const e=this._processMapCollections((e=>this._processHeightModelInfoSource(e)),(e=>g$d(e)));this._debugLog(`Search ended with status ${b$7(e)}`),this._set("isHeightModelInfoSearching",0===e);}this._updateTileInfo();}}_processMapCollections(e,t){this._preloadMapCollections(t);let i=2;return this._forAllMapCollectionSources((e=>{if(2!==i)return !1;const{collectionName:t}=e;return this._debugLog(`Processing collection ${t}...`),!(e.loading&&!this._updateWhen(e.loading))||(this._debugLog(`Collection ${e.collectionName} owner is loading -> wait`),i=0,!1)}),(s=>{if(2!==i)return !1;return null!=t&&!t(s)?(this._debugLog(`Source ${s.id} is skipped due to predicate`),!1):!s.load||s.isFulfilled()||this._updateWhen(s.load())?!((!s.load||s.isResolved())&&e(s))||(i=1,!1):(this._debugLog(`Source ${s.id} is loading -> wait`),i=0,!1)})),i}_preloadMapCollections(e){let t=S$6;const i=this.logDebugInformation;this.logDebugInformation=!1,this._forAllMapCollectionSources((()=>!0),(s=>{if(0===t)return !1;return !(null!=e&&!e(s))&&(s.load&&!s.isFulfilled()&&(this.logDebugInformation=i,this._debugLog(`Pre-loading source ${s.id}`),this.logDebugInformation=!1,s.load().catch((()=>{})),t--),!0)})),this.logDebugInformation=i;}_forAllMapCollectionSources(e,t){for(const i of this.mapCollectionPaths){const s=`map.${i}`,o=this._ensureLoadedOwnersFromCollectionName(s);if(!1===e(o))continue;const n=o.owner;if(!n||n.isRejected&&n.isRejected()){this._debugLog(`Collection ${s} owner is invalid or rejected -> skip`);continue}const a=this.view.get(s);a?this._forEachSource(a,t):this._debugLog(`Collection ${s} does not exist -> skip`);}}_forEachSource(e,t){for(const i of e.items)!1!==t(i)&&"layers"in i&&i.layers&&this._forEachSource(i.layers,t);}_processSpatialReferenceSource(e){let t=this._getSupportedSpatialReferences(e);return 0!==t.length&&(this._spatialReferenceCandidates?(t=s$2j(t,this._spatialReferenceCandidates,((e,t)=>e.equals(t))),t.length>0?this._spatialReferenceCandidates=t:this._debugLog(`Layer ${e.id} is ignored because its supported spatial\n          references are not compatible with the previous candidates`)):this._spatialReferenceCandidates=t,1===this._spatialReferenceCandidates.length)}_findExtent(e,t){const i="fullExtents"in e&&e.fullExtents||(r$1G(e.fullExtent)?[e.fullExtent]:[]),s=i.find((e=>e.spatialReference.equals(t)));if(s)return this._set("extent",s),!0;if(this._getSupportedSpatialReferences(e).length>0){const t=i.map((t=>({extent:t,layer:e}))),s=this._extentCandidates||[];this._extentCandidates=s.concat(t);}return !1}async _projectExtentCandidate(){if(!this._extentCandidates||!this._extentCandidates.length)return;const e=this.spatialReference,t=this._extentCandidates.find((t=>g$W(t.extent.spatialReference,e)));if(r$1G(t))this._set("extent",e$1Y(M$s(t.extent,e)));else {const t=this._extentCandidates[0];this._extentProjectController=new AbortController;const i=await import('./geometryServiceUtils.js');try{const s=await i.projectGeometry(t.extent,e,t.layer.portalItem,this._extentProjectController.signal);this._set("extent",s);}catch{}this._extentProjectController=null;}}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(0===t.length)return this._debugLog(`Layer ${e.id} is ignored because it does not have any spatial references`),[];const i=t.filter((t=>this.view.isSpatialReferenceSupported(t,e,(e=>this._debugLog(e)))));return 0===i.length?this._debugLog(`Layer ${e.id} has spatial references but none of them are supported (or layer doesn't require locking)`):this._debugLog(`Layer ${e.id} has spatial references. Resulting candidate set: ${i.map(I$4).join(", ")}`),i}_processHeightModelInfoSource(e){const t=l$v(e);return !!t&&(this._set("heightModelInfo",t),this._set("isHeightModelInfoSearching",!1),e.spatialReference&&(this._set("vcsWkid",e.spatialReference.vcsWkid),this._set("latestVcsWkid",e.spatialReference.latestVcsWkid)),!0)}_updateTileInfo(){if(null!=this.tileInfo)return;if(!this.view.isTileInfoRequired())return void this._set("isTileInfoDone",!0);if(!this.isSpatialReferenceDone)return;const e=this.get("view.map");if(!e)return void this._debugLog("updateTileInfo: no map");const t=e.basemap,i=e.get("layers.0");let s=null;if(t&&"failed"!==t.loadStatus){if(!t.loaded)return this._updateWhen(t.load()),void this._debugLog("updateTileInfo: basemap still loading");const e=t&&t.get("baseLayers.0");if(e&&"failed"!==e.loadStatus){if(!e.loaded)return this._updateWhen(e.load()),void this._debugLog("updateTileInfo: first basemap layer still loading");s="tileInfo"in e&&e.tileInfo;}else {if(!i||"failed"===i.loadStatus)return this._debugLog("updateTileInfo: no tileInfo"),void this._set("isTileInfoDone",!0);if(!i.loaded)return this._updateWhen(i.load()),void this._debugLog("updateTileInfo: first operational layer still loading");s="tileInfo"in i&&i.tileInfo;}}else if(i&&"failed"!==i.loadStatus){if(!i.loaded)return this._updateWhen(i.load()),void this._debugLog("updateTileInfo: first operational layer still loading");s="tileInfo"in i&&i.tileInfo;}s&&!s.spatialReference.equals(this.spatialReference)&&(s=null),this._debugLog(`updateTileInfo: setting ${s}`),this._set("tileInfo",s),this._set("isTileInfoDone",!0);}_debugLog(e){this.logDebugInformation&&m$l.info(e);}};function I$4(e){return e?JSON.stringify(e.toJSON()):"undefined"}function b$7(e){switch(e){case 0:return "Waiting";case 1:return "Found";case 2:return "Exhausted"}}y$c.DefaultMapCollectionPaths=["basemap.baseLayers","layers","ground.layers","basemap.referenceLayers"],e$1_([d$1S()],y$c.prototype,"logDebugInformation",void 0),e$1_([d$1S({readOnly:!0})],y$c.prototype,"isSpatialReferenceDone",void 0),e$1_([d$1S({readOnly:!0})],y$c.prototype,"isTileInfoDone",void 0),e$1_([d$1S({readOnly:!0})],y$c.prototype,"isHeightModelInfoSearching",void 0),e$1_([d$1S({constructOnly:!0})],y$c.prototype,"view",void 0),e$1_([d$1S({readOnly:!0})],y$c.prototype,"spatialReference",void 0),e$1_([d$1S({readOnly:!0})],y$c.prototype,"extent",void 0),e$1_([d$1S({readOnly:!0})],y$c.prototype,"heightModelInfo",void 0),e$1_([d$1S({readOnly:!0})],y$c.prototype,"vcsWkid",void 0),e$1_([d$1S({readOnly:!0})],y$c.prototype,"latestVcsWkid",void 0),e$1_([d$1S()],y$c.prototype,"mapCollectionPaths",void 0),e$1_([d$1S()],y$c.prototype,"defaultSpatialReference",void 0),e$1_([d$1S({readOnly:!0})],y$c.prototype,"tileInfo",void 0),y$c=_$7=e$1_([i$2w("esri.views.support.DefaultsFromMap")],y$c);const R$3=y$c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var z$3;const H$3=s$2h.getLogger("esri.views.View");let W$3=z$3=class extends(a$26(n$2y.EventedMixin(n$2w(p$33)))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new p$1v({getCollections:()=>{var e,t,i;return [null==(e=this.basemapView)?void 0:e.baseLayerViews,null==(t=this.groundView)?void 0:t.layerViews,this.layerViews,null==(i=this.basemapView)?void 0:i.referenceLayerViews]},getChildrenFunction:e=>e.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.defaultsFromMap=new R$3({view:this}),this.fatalError=null,this.extent=null,this.graphics=new c$H,this.navigating=!1,this.layerViews=new S$F,this.magnifier=new p$A,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new a$H,this.navigation=new p$v,this.layerViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new p$y(this),this.persistableViewModels=new S$F,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(this.watch("preconditionsReady",(e=>{e?(this._currentSpatialReference=this.spatialReference,z$3.views.add(this)):(this._currentSpatialReference=null,z$3.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?(this.layerViewManager.clear(),this.toolViewManager.detach(),this._teardown()):e&&!this.ready&&(this._startup(),this.toolViewManager.attach());}),!0));}initialize(){let e;this.addResolvingPromise(this.validate().then((()=>(this._isValid=!0,a$2N(this,"ready"))))),this.basemapView=new a$L({view:this}),this.layerViewManager=new L$6({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new w$6({view:this}),this._resetInitialViewPropertiesFromContent(),i$2i(this.defaultsFromMap,"isSpatialReferenceDone",(t=>{const i=!!(this.map&&this.map.allLayers.length>0);if(t&&!this.spatialReference&&i||!e){if(t&&!this.spatialReference&&i&&!e){const t=e=L$w(this.spatialReferenceWarningDelay);e.then((()=>{t===e&&H$3.warn("#spatialReference","no spatial reference could be derived from the currently added map layers");})).catch((()=>{}));}}else e=null;}),!0);}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=l$2t(this.graphics),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.toolViewManager=l$2t(this.toolViewManager),this.layerViewManager=l$2t(this.layerViewManager),this.basemapView=l$2t(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,null==e||e.destroy();}_startup(){this._set("ready",!0);}_teardown(){this._set("ready",!1);}whenReady(){return Promise.resolve(this)}toMap(){return H$3.error("#toMap()","Not implemented on this instance of View"),null}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){return !!(!this.fatalError&&this._isValid&&!this._readyCycleForced&&this.map&&(!m$1A.isLoadable(this.map)||this.map.loaded)&&0!==this.width&&0!==this.height&&this.spatialReference&&this.isSpatialReferenceSupported(this.spatialReference)&&(this._currentSpatialReference||!this.initialExtentRequired||this.initialExtent||this.defaultsFromMap&&this.defaultsFromMap.isSpatialReferenceDone)&&this.defaultsFromMap&&this.defaultsFromMap.isTileInfoDone)}set map(e){var t;e!==this._get("map")&&(null!=(t=e)&&t.destroyed&&(H$3.warn("#map","The provided map is already destroyed",{map:e}),e=null),m$1A.isLoadable(e)&&e.load().catch((()=>{})),this.initialized&&(this.forceReadyCycle(),this._resetInitialViewPropertiesFromContent()),this._set("map",e));}get spatialReference(){let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&this.isHeightModelInfoRequired&&this.defaultsFromMap&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){this._userSpatialReference=e,this._set("spatialReference",e);}get stationary(){return !this.animation&&!this.navigating&&!this.resizing}get initialExtent(){return this.defaultsFromMap&&this.defaultsFromMap.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return r$1G(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor");}get size(){return [this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){return this.get("defaultsFromMap.spatialReference")}getDefaultHeightModelInfo(){return this.get("map.supportsHeightModelInfo")&&this.get("map.heightModelInfo")||this.get("defaultsFromMap.heightModelInfo")||null}importLayerView(e){throw new s$29("importLayerView() not implemented")}hasLayerViewModule(e){return !1}async validate(){}invalidate(){this._isValid=!1;}isSpatialReferenceSupported(e,t,i){return !0}isTileInfoRequired(){return !1}when(e,t){return this.isResolved()&&!this.ready&&H$3.warn("#when()",'Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use watchUtils.whenOnce(view, "ready").then(...) instead.'),super.when(e,t)}forceReadyCycle(){this.ready&&(this._readyCycleForced=!0,g$10(this,"preconditionsReady",(()=>this._readyCycleForced=!1)));}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e;}tryFatalErrorRecovery(){this.fatalError=null;}_resetInitialViewPropertiesFromContent(){if(!this.defaultsFromMap)return;const e=()=>this.defaultsFromMap&&this.defaultsFromMap.start();this.defaultsFromMap.reset(),this._currentSpatialReference=null,this.notifyChange("spatialReference"),this.handles.remove("defaultsFromMap"),this.handles.add([f$1p(this,"spatialReference",((t,i)=>{E$n(t,i)||e();})),f$1p(this,"initialExtentRequired",e),v$R(e)],"defaultsFromMap");}};W$3.views=new S$F,e$1_([o$1Q("toolViewManager.activeTool")],W$3.prototype,"activeTool",void 0),e$1_([d$1S({readOnly:!0})],W$3.prototype,"allLayerViews",void 0),e$1_([d$1S()],W$3.prototype,"groundView",void 0),e$1_([d$1S()],W$3.prototype,"animation",void 0),e$1_([d$1S()],W$3.prototype,"basemapView",void 0),e$1_([d$1S()],W$3.prototype,"defaultsFromMap",void 0),e$1_([d$1S()],W$3.prototype,"fatalError",void 0),e$1_([d$1S({type:M$r})],W$3.prototype,"extent",void 0),e$1_([d$1S(a$M(c$H,"graphics"))],W$3.prototype,"graphics",void 0),e$1_([d$1S({readOnly:!0,type:v$d,dependsOn:["map.heightModelInfo?","defaultsFromMap.heightModelInfo"]})],W$3.prototype,"heightModelInfo",null),e$1_([d$1S({readOnly:!0})],W$3.prototype,"interacting",null),e$1_([d$1S({readOnly:!0})],W$3.prototype,"navigating",void 0),e$1_([d$1S({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","initialExtentRequired","initialExtent","defaultsFromMap.isSpatialReferenceDone","defaultsFromMap.isTileInfoDone"]})],W$3.prototype,"preconditionsReady",null),e$1_([d$1S({type:S$F,readOnly:!0})],W$3.prototype,"layerViews",void 0),e$1_([d$1S({type:p$A})],W$3.prototype,"magnifier",void 0),e$1_([d$1S({value:null,type:j$h})],W$3.prototype,"map",null),e$1_([d$1S()],W$3.prototype,"padding",void 0),e$1_([d$1S({readOnly:!0})],W$3.prototype,"ready",void 0),e$1_([d$1S({type:k$s})],W$3.prototype,"spatialReference",null),e$1_([d$1S()],W$3.prototype,"spatialReferenceWarningDelay",void 0),e$1_([d$1S()],W$3.prototype,"stationary",null),e$1_([d$1S({readOnly:!0})],W$3.prototype,"supportsGround",void 0),e$1_([d$1S({type:y$$})],W$3.prototype,"timeExtent",void 0),e$1_([o$1Q("toolViewManager.tools")],W$3.prototype,"tools",void 0),e$1_([d$1S()],W$3.prototype,"toolViewManager",void 0),e$1_([d$1S({readOnly:!0})],W$3.prototype,"type",void 0),e$1_([d$1S({type:Number})],W$3.prototype,"scale",void 0),e$1_([d$1S({readOnly:!0})],W$3.prototype,"updating",void 0),e$1_([d$1S({readOnly:!0})],W$3.prototype,"initialExtentRequired",void 0),e$1_([d$1S({readOnly:!0,type:M$r})],W$3.prototype,"initialExtent",null),e$1_([d$1S()],W$3.prototype,"cursor",null),e$1_([d$1S({readOnly:!0})],W$3.prototype,"input",void 0),e$1_([d$1S({type:p$v,nonNullable:!0})],W$3.prototype,"navigation",void 0),e$1_([d$1S()],W$3.prototype,"layerViewManager",void 0),e$1_([d$1S()],W$3.prototype,"width",void 0),e$1_([d$1S()],W$3.prototype,"height",void 0),e$1_([d$1S({readOnly:!0})],W$3.prototype,"resizing",void 0),e$1_([d$1S({value:null,readOnly:!0})],W$3.prototype,"size",null),e$1_([d$1S({readOnly:!0})],W$3.prototype,"suspended",void 0),e$1_([d$1S({readOnly:!0})],W$3.prototype,"viewEvents",void 0),e$1_([d$1S({readOnly:!0})],W$3.prototype,"persistableViewModels",void 0),e$1_([d$1S()],W$3.prototype,"_isValid",void 0),e$1_([d$1S()],W$3.prototype,"_readyCycleForced",void 0),e$1_([d$1S()],W$3.prototype,"_currentSpatialReference",void 0),W$3=z$3=e$1_([i$2w("esri.views.View")],W$3);const P$6=W$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$u=class extends m$1Y{constructor(t){super(t),this.state="running",this.target=null;}initialize(){this.addResolvingPromise(new Promise(((t,s)=>this._dfd={resolve:t,reject:s})));}get done(){return "finished"===this.state||"stopped"===this.state}stop(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._dfd.reject(new s$29("ViewAnimation stopped")));}finish(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._dfd.resolve());}update(t,s){s||(s=O$r(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",s);}};e$1_([d$1S({readOnly:!0})],p$u.prototype,"done",null),e$1_([d$1S({readOnly:!0,type:String})],p$u.prototype,"state",void 0),e$1_([d$1S()],p$u.prototype,"target",void 0),p$u=e$1_([i$2w("esri.views.ViewAnimation")],p$u),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"};}(p$u||(p$u={}));const n$N=p$u;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$l(e,n,t,r){const u=3*e,i=3*(t-e)-u,a=1-u-i,o=3*n,s=3*(r-n)-o,f=1-o-s;function c(e){return ((a*e+i)*e+u)*e}function l(e){return ((f*e+s)*e+o)*e}function b(e){return (3*a*e+2*i)*e+u}function p(e,n){let t,r,u,i,a,o;for(u=e,o=0;o<8;o++){if(i=c(u)-e,Math.abs(i)<n)return u;if(a=b(u),Math.abs(a)<1e-6)break;u-=i/a;}if(t=0,r=1,u=e,u<t)return t;if(u>r)return r;for(;t<r;){if(i=c(u),Math.abs(i-e)<n)return u;e>i?t=u:r=u,u=.5*(r-t)+t;}return u}return function(e,n=1e-6){return l(p(e,n))}}const n$M=/^cubic-bezier\((.*)\)/,t$n={};function r$q(r){let u=t$n[r]||null;if(!u){const t=n$M.exec(r);if(t){const n=t[1].split(",").map((e=>parseFloat(e.trim())));4!==n.length||n.some((e=>isNaN(e)))||(u=e$l.apply(e$l,n));}}return u}t$n.ease=e$l(.25,.1,.25,1),t$n.linear=e$l(0,0,1,1),t$n.easeIn=t$n["ease-in"]=e$l(.42,0,1,1),t$n.easeOut=t$n["ease-out"]=e$l(0,0,.58,1),t$n.easeInOut=t$n["ease-in-out"]=e$l(.42,0,.58,1);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$k(){return [1,0,0,1,0,0]}function n$L(e){return [e[0],e[1],e[2],e[3],e[4],e[5]]}function r$p(e,n,r,t,a,o){return [e,n,r,t,a,o]}function t$m(e,n){return new Float64Array(e,n,6)}Object.freeze({__proto__:null,create:e$k,clone:n$L,fromValues:r$p,createView:t$m});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function a$E(t,n){return t[0]=n[0],t[1]=n[1],t}function r$o(t,n,a){return t[0]=n,t[1]=a,t}function s$y(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t}function o$n(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t}function u$m(t,n,a){return t[0]=n[0]*a[0],t[1]=n[1]*a[1],t}function c$C(t,n,a){return t[0]=n[0]/a[0],t[1]=n[1]/a[1],t}function e$j(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t}function i$B(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t}function f$c(t,n,a){return t[0]=Math.min(n[0],a[0]),t[1]=Math.min(n[1],a[1]),t}function M$4(t,n,a){return t[0]=Math.max(n[0],a[0]),t[1]=Math.max(n[1],a[1]),t}function h$k(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t}function l$u(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t}function m$k(t,n,a,r){return t[0]=n[0]+a[0]*r,t[1]=n[1]+a[1]*r,t}function d$j(t,n){const a=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(a*a+r*r)}function q$4(t,n){const a=n[0]-t[0],r=n[1]-t[1];return a*a+r*r}function b$6(t){const n=t[0],a=t[1];return Math.sqrt(n*n+a*a)}function p$t(t){const n=t[0],a=t[1];return n*n+a*a}function x$6(t,n){return t[0]=-n[0],t[1]=-n[1],t}function g$c(t,n){return t[0]=1/n[0],t[1]=1/n[1],t}function v$6(t,n){const a=n[0],r=n[1];let s=a*a+r*r;return s>0&&(s=1/Math.sqrt(s),t[0]=n[0]*s,t[1]=n[1]*s),t}function j$5(t,n){return t[0]*n[0]+t[1]*n[1]}function A$3(t,n,a){const r=n[0]*a[1]-n[1]*a[0];return t[0]=t[1]=0,t[2]=r,t}function _$6(t,n,a,r){const s=n[0],o=n[1];return t[0]=s+r*(a[0]-s),t[1]=o+r*(a[1]-o),t}function y$b(t,a){a=a||1;const r=2*t$1k()*Math.PI;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t}function z$2(t,n,a){const r=n[0],s=n[1];return t[0]=a[0]*r+a[2]*s,t[1]=a[1]*r+a[3]*s,t}function D$4(t,n,a){const r=n[0],s=n[1];return t[0]=a[0]*r+a[2]*s+a[4],t[1]=a[1]*r+a[3]*s+a[5],t}function E$5(t,n,a){const r=n[0],s=n[1];return t[0]=a[0]*r+a[3]*s+a[6],t[1]=a[1]*r+a[4]*s+a[7],t}function I$3(t,n,a){const r=n[0],s=n[1];return t[0]=a[0]*r+a[4]*s+a[12],t[1]=a[1]*r+a[5]*s+a[13],t}function L$4(t,n,a,r){const s=n[0]-a[0],o=n[1]-a[1],u=Math.sin(r),c=Math.cos(r);return t[0]=s*c-o*u+a[0],t[1]=s*u+o*c+a[1],t}function P$5(t,n){const a=t[0],r=t[1],s=n[0],o=n[1];let u=a*a+r*r;u>0&&(u=1/Math.sqrt(u));let c=s*s+o*o;c>0&&(c=1/Math.sqrt(c));const e=(a*s+r*o)*u*c;return e>1?0:e<-1?Math.PI:Math.acos(e)}function O$6(t){return "vec2("+t[0]+", "+t[1]+")"}function k$5(t,n){return t[0]===n[0]&&t[1]===n[1]}function w$5(n,a){const r=n[0],s=n[1],o=a[0],u=a[1];return Math.abs(r-o)<=a$2H*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(s-u)<=a$2H*Math.max(1,Math.abs(s),Math.abs(u))}function B$2(t,n,a,r,s){let o=n[0]-a[0],u=n[1]-a[1];const c=(r[0]*o+r[1]*u)*(s-1);return o=r[0]*c,u=r[1]*c,t[0]=n[0]+o,t[1]=n[1]+u,t}const C$6=b$6,F$2=o$n,G$2=u$m,H$2=c$C,J$2=d$j,K$3=q$4,N$5=p$t;Object.freeze({__proto__:null,copy:a$E,set:r$o,add:s$y,subtract:o$n,multiply:u$m,divide:c$C,ceil:e$j,floor:i$B,min:f$c,max:M$4,round:h$k,scale:l$u,scaleAndAdd:m$k,distance:d$j,squaredDistance:q$4,length:b$6,squaredLength:p$t,negate:x$6,inverse:g$c,normalize:v$6,dot:j$5,cross:A$3,lerp:_$6,random:y$b,transformMat2:z$2,transformMat2d:D$4,transformMat3:E$5,transformMat4:I$3,rotate:L$4,angle:P$5,str:O$6,exactEquals:k$5,equals:w$5,projectAndScale:B$2,len:C$6,sub:F$2,mul:G$2,div:H$2,dist:J$2,sqrDist:K$3,sqrLen:N$5});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$K(){return [0,0]}function r$n(n){return [n[0],n[1]]}function t$l(n,r){return [n,r]}function e$i(r){const t=n$K(),e=Math.min(2,r.length);for(let n=0;n<e;++n)t[n]=r[n];return t}function u$l(n,r){return new Float64Array(n,r,2)}function a$D(){return n$K()}function o$m(){return t$l(1,1)}function s$x(){return t$l(1,0)}function c$B(){return t$l(0,1)}const f$b=a$D(),i$A=o$m(),l$t=s$x(),_$5=c$B();Object.freeze({__proto__:null,create:n$K,clone:r$n,fromValues:t$l,fromArray:e$i,createView:u$l,zeros:a$D,ones:o$m,unitX:s$x,unitY:c$B,ZEROS:f$b,ONES:i$A,UNIT_X:l$t,UNIT_Y:_$5});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const W$2=39.37,C$5=180/Math.PI;function U$2(t,e,n){const r=o$1o(e[0]/s$1L.radius);return r$o(t,n?r:r-360*Math.floor((r+180)/360),o$1o(.5*Math.PI-2*Math.atan(Math.exp(-e[1]/s$1L.radius))))}function Q$1(t,e){let n=e[1];return n>89.99999?n=89.99999:n<-89.99999&&(n=-89.99999),n=Math.sin(s$1R(n)),r$o(t,s$1R(e[0])*s$1L.radius,.5*s$1L.radius*Math.log((1+n)/(1-n)))}function B$1(t,e,n,r){return r&&n&&!r.equals(n)&&g$W(r,n)&&r.isWebMercator?r.isWebMercator?Q$1(t,e):U$2(t,e):a$E(t,e)}function D$3(t){return t.wkid?t:t.spatialReference||k$s.WGS84}function T$2(t,e){return e.type?r$o(t,e.x,e.y):a$E(t,e)}function H$1(t){return H$9(t)}function J$1(t,e){return Math.max(t.width/e[0],t.height/e[1])*ct(t.spatialReference)}async function K$2(t,a,i,s){let c,u;if(!t)return null;if(Array.isArray(t)&&!t.length)return null;if(S$F.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&"object"==typeof t[0]){const e=t.every((t=>"attributes"in t)),r=t.some((t=>!t.geometry));let o=t;if(e&&r&&a&&a.allLayerViews){const e=new Map;for(const n of t){const t=n.layer,r=e.get(t)||[],o=n.attributes[t.objectIdField];null!=o&&r.push(o),e.set(t,r);}const r=[];e.forEach(((t,e)=>{const n=a.allLayerViews.find((t=>t.layer.id===e.id));if("queryFeatures"in n){const o=e.createQuery();o.objectIds=t,o.returnGeometry=!0,r.push(n.queryFeatures(o));}}));const i=await Promise.all(r),s=[];for(const t of i)if(t&&t.features&&t.features.length)for(const e of t.features)r$1G(e.geometry)&&s.push(e.geometry);o=s;}for(const t of o)s=await K$2(t,a,i,s);return s}if(Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1])c=new b$O(t);else if(t instanceof p$2U)c=t;else if("geometry"in t)if(t.geometry)c=t.geometry;else if(t.layer){const e=t.layer,n=a.allLayerViews.find((t=>t.layer.id===e.id));if("queryFeatures"in n){const o=e.createQuery();o.objectIds=[t.attributes[e.objectIdField]],o.returnGeometry=!0;const a=await n.queryFeatures(o);c=m$2b(a,"features",0,"geometry");}}if(t$1O(c))return null;if(u="point"===c.type?new M$r({xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y,spatialReference:c.spatialReference}):c.extent,!u)return null;const f=M$s(u,i);return t$1O(f)?null:s=s?s.union(f):f}function X$3(t){if(t&&(!Array.isArray(t)||"number"!=typeof t[0])&&("object"==typeof t||Array.isArray(t)&&"object"==typeof t[0])){if("layer"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return {min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every((t=>"layer"in t))){let e=0,n=0;for(const r of t){const t=r.layer;t&&t.minScale&&t.maxScale&&(e=t.minScale<e?t.minScale:e,n=t.maxScale>n?t.maxScale:n);}return e&&n?{min:e,max:n}:null}}}async function Y$3(e,r){if(!e||!r)return new u$p({targetGeometry:new b$O,scale:0,rotation:0});let o=r.spatialReference;const{constraints:a,padding:i,viewpoint:s,size:c}=r,u=[i?c[0]-i.left-i.right:c[0],i?c[1]-i.top-i.bottom:c[1]];let f=null;e instanceof u$p?f=e:e.viewpoint?f=e.viewpoint:e.target&&"esri.Viewpoint"===e.target.declaredClass&&(f=e.target);let l=null;f&&f.targetGeometry?l=f.targetGeometry:e instanceof M$r?l=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(l=await K$2(e.center,r,o)||await K$2(e.extent,r,o)||await K$2(e.target,r,o)||await K$2(e,r,o)),!l&&s&&s.targetGeometry?l=s.targetGeometry:!l&&r.extent&&(l=r.extent);const m=D$3(l);if(o||(o=D$3(r.spatialReference||r.extent||l)),!g$W(l,o)&&m&&!m.equals(o))return null;const y=T$2(n$K(),l.center?l.center:l),p=new b$O(B$1(y,y,m,o),o);let g=null;if(f&&r$1G(f.targetGeometry)&&"point"===f.targetGeometry.type)g=f.scale;else if(e.hasOwnProperty("scale")&&e.scale)g=e.scale;else if(e.hasOwnProperty("zoom")&&-1!==e.zoom&&a&&a.effectiveLODs)g=a.zoomToScale(e.zoom);else if(Array.isArray(l)||"point"===l.type||"extent"===l.type&&0===l.width&&0===l.height){const t=M$s(r.extent,o);g=r$1G(t)?J$1(t,u):r.extent?J$1(r.extent,u):s.scale;}else g=g$W(l.extent,o)?J$1(M$s(l.extent,o),u):J$1(l.extent,u);const h=X$3(e);h&&(h.min&&h.min>g?g=h.min:h.max&&h.max<g&&(g=h.max));let x=0;f?x=f.rotation:e.hasOwnProperty("rotation")?x=e.rotation:s&&(x=s.rotation);let b=new u$p({targetGeometry:p,scale:g,rotation:x});return a&&(b=a.fit(b),a.constrainByGeometry(b),a.rotationEnabled||(b.rotation=x)),b}function Z$2(t,e){const n=t.targetGeometry,r=e.targetGeometry;return n.x=r.x,n.y=r.y,n.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function $$3(t,e,n){return n?r$o(t,.5*(e[0]-n.right+n.left),.5*(e[1]-n.bottom+n.top)):l$u(t,e,.5)}const _$4=function(){const t=n$K();return function(e,n,r){const o=n.targetGeometry;T$2(t,o);const a=.5*at(n);return e.xmin=t[0]-a*r[0],e.ymin=t[1]-a*r[1],e.xmax=t[0]+a*r[0],e.ymax=t[1]+a*r[1],e.spatialReference=o.spatialReference,e}}();function tt(t,e,n,r,o){return wt(t,e,n.center),t.scale=J$1(n,r),o&&o.constraints&&o.constraints.constrain(t),t}function et(t,e,n,r){return mt(t,e,n,r),r$N(t,t)}const rt=function(){const t=n$K();return function(e,n,r){return F$2(e,ut(e,n),$$3(t,n,r))}}(),ot=function(){const t=e$k(),e=n$K();return function(n,r,o,a){const i=at(r),s=st(r);return r$o(e,i,i),M$d(t,e),c$1x(t,t,s),i$1j(t,t,rt(e,o,a)),i$1j(t,t,[0,a.top-a.bottom]),r$o(n,t[4],t[5])}}();function at(t){return t.scale*it(t.targetGeometry)}function it(t){return r$1G(t)&&I$u(t.spatialReference)?1/(H$1(t.spatialReference)*W$2*ft()):1}function st(t){return s$1R(t.rotation)||0}function ct(t){return I$u(t)?H$1(t)*W$2*ft():1}function ut(t,e){return l$u(t,e,.5)}function ft(){return 96}const lt=function(){const t=n$K(),e=n$K(),n=n$K();return function(r,o,a,i,s,c){return x$6(t,o),l$u(e,a,.5*c),r$o(n,1/i*c,-1/i*c),n$1y(r),i$1j(r,r,e),s&&c$1x(r,r,s),e$N(r,r,n),i$1j(r,r,t),r}}(),mt=function(){const t=n$K();return function(e,n,r,o){const a=at(n),i=st(n);return T$2(t,n.targetGeometry),lt(e,t,r,a,i,o)}}(),yt=function(){const t=n$K();return function(e,n,r,o){const a=at(n);return T$2(t,n.targetGeometry),lt(e,t,r,a,0,o)}}();function pt(t){if(t.isWrappable){const e=S$C(t);return e.valid[1]-e.valid[0]}return 0}function gt(t,e){return Math.round(pt(t)/e)}function ht(t,e){return Y$3(t,e)}const xt=function(){const t=n$K(),e=n$K(),n=[0,0,0];return function(r,o,a){o$n(t,r,o),v$6(t,t),o$n(e,r,a),v$6(e,e),A$3(n,t,e);let i=Math.acos(j$5(t,e)/(b$6(t)*b$6(e)))*C$5;return n[2]<0&&(i=-i),isNaN(i)&&(i=0),i}}(),bt=function(){const t=n$K();return function(e,n,r,o){const a=e.targetGeometry;return Z$2(e,n),ot(t,n,r,o),a.x+=t[0],a.y+=t[1],e}}(),wt=function(){const t=n$K();return function(e,n,r){Z$2(e,n);const o=e.targetGeometry,a=D$3(r),i=D$3(o);return T$2(t,r),B$1(t,t,a,i),o.x=t[0],o.y=t[1],e}}();const Gt=function(){const t=n$K();return function(e,n,r,o,a){a||(a="center"),F$2(t,r,o),l$u(t,t,.5);const i=t[0],s=t[1];switch(a){case"center":r$o(t,0,0);break;case"left":r$o(t,-i,0);break;case"top":r$o(t,0,s);break;case"right":r$o(t,i,0);break;case"bottom":r$o(t,0,-s);break;case"top-left":r$o(t,-i,s);break;case"bottom-left":r$o(t,-i,-s);break;case"top-right":r$o(t,i,s);break;case"bottom-right":r$o(t,i,-s);}return Ft(e,n,t),e}}();function Mt(t,e,n){return Z$2(t,e),t.rotation+=n,t}function kt(t,e,n){return Z$2(t,e),t.rotation=n,t}const At=function(){const t=n$K();return function(e,n,r,o,a){return Z$2(e,n),isNaN(r)||0===r||(Pt(t,o,n,a),e.scale=n.scale*r,qt(t,t,e,a),Ft(e,e,r$o(t,t[0]-o[0],o[1]-t[1]))),e}}();function Rt(t,e,n){return Z$2(t,e),t.scale=n,t}const St=function(){const t=n$K();return function(e,n,r,o,a,i){return Z$2(e,n),isNaN(r)||0===r||(Pt(t,a,n,i),e.scale=n.scale*r,e.rotation+=o,qt(t,t,e,i),Ft(e,e,r$o(t,t[0]-a[0],a[1]-t[1]))),e}}(),vt=function(){const t=n$K(),e=n$K();return function(n,r,o,a,i,s,c){return rt(e,s,c),s$y(t,i,e),a?St(n,r,o,a,t,s):At(n,r,o,t,s)}}(),Pt=function(){const t=e$k();return function(e,n,r,o){return D$4(e,n,et(t,r,o,1))}}(),qt=function(){const t=e$k();return function(e,n,r,o){return D$4(e,n,mt(t,r,o,1))}}(),Ft=function(){const t=n$K(),e=e$k();return function(n,r,o){Z$2(n,r);const a=at(r),i=n.targetGeometry;return h$L(e,st(r)),e$N(e,e,t$l(a,a)),D$4(t,o,e),i.x+=t[0],i.y+=t[1],n}}();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class m$j{constructor(t,i,s,e){const o=t.targetGeometry,n=i.targetGeometry;e?"string"==typeof e&&(e=r$q(e)||t$n.ease):e=t$n.ease,this.easing=e,this.duration=s,this.sCenterX=o.x,this.sCenterY=o.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=n.x,this.tCenterY=n.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360);}applyRatio(t,i){const s=this.easing(i);let e,o,n,a;i>=1?(e=this.tCenterX,o=this.tCenterY,n=this.tRotation,a=this.tScale):(e=this.sCenterX+s*this.dCenterX,o=this.sCenterY+s*this.dCenterY,n=this.sRotation+s*this.dRotation,a=this.sScale+s*this.dScale),t.targetGeometry.x=e,t.targetGeometry.y=o,t.scale=a,t.rotation=n;}}let u$k=class extends p$33{constructor(t){super(t),this.duration=200,this.transition=null,this.easing=t$n.ease,this.view=null,this.viewpoint=null,this.viewpoint=new u$p({targetGeometry:new b$O,scale:0,rotation:0}),this._updateTask=A$s({postRender:this._postRender.bind(this)}),this._updateTask.pause();}destroy(){this._updateTask.remove(),this._updateTask=null;}animate(t,i,s){this.stop();const e=this.viewpoint;Z$2(e,i),this.transition=new m$j(this.viewpoint,t.target,s&&s.duration||this.duration,s&&s.easing||this.easing);const o=()=>{this.animation===t&&this._updateTask&&("finished"===t.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null);};return t.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinous(t,i){this.stop(),this.updateFunction=i,this.viewpoint=t;const s=new n$N({target:t.clone()}),e=()=>{this.animation===s&&this._updateTask&&(this.animation=null,this.updateFunction=null);};return s.when(e,e),this._startTime=performance.now(),this._updateTask.resume(),this.animation=s,s}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null);}_postRender(t){const i=this.animation;if(i&&i.state!==n$N.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime);else {const t=(performance.now()-this._startTime)/this.transition.duration,i=t>=1;this.transition.applyRatio(this.viewpoint,t),i&&this.animation.finish();}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone());}else this._updateTask.pause();}};e$1_([d$1S()],u$k.prototype,"animation",void 0),e$1_([d$1S()],u$k.prototype,"duration",void 0),e$1_([d$1S()],u$k.prototype,"transition",void 0),e$1_([d$1S()],u$k.prototype,"easing",void 0),e$1_([d$1S()],u$k.prototype,"view",void 0),e$1_([d$1S()],u$k.prototype,"viewpoint",void 0),u$k=e$1_([i$2w("esri.views.2d.AnimationManager")],u$k);const d$i=u$k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class a$C{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.updateEnabled=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions;},this.update=()=>{if(this._updateRequested=!1,!this.updateEnabled)return;const{basemapView:t,graphicsView:a,labelManager:s,layerViews:i,state:{id:r}}=this.view;t.baseLayerViews.forEach(this._updateLayerView,this),i.forEach(this._updateLayerView,this),t.referenceLayerViews.forEach(this._updateLayerView,this),r$1G(s)&&(s.lastUpdateId!==r&&(s.viewChange(),s.lastUpdateId=r),s.updateRequested&&s.processUpdate(this._updateParameters)),r$1G(a)&&(a.lastUpdateId!==r&&(a.viewChange(),a.lastUpdateId=r),a.updateRequested&&a.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause();};}destroy(){this.stop();}start(){this.stationary=this.view.stationary,this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions},this._stationaryHandle=this.view.watch("stationary",(e=>{this.stationary=e,this.requestFrame();})),this._frameTaskHandle=A$s(this);}stop(){this._frameTaskHandle&&(this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1);}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame());}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume();}_updateLayerView(e){const t=this.view.state,a=e.lastUpdateId;null!=a&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),a!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$k(){return Promise.all([import('./webgl.js'),import('./mapViewDeps.js')])}const s$w=()=>t$k().then((()=>import('./TileLayerView2D.js'))),a$B=()=>t$k().then((()=>import('./FeatureLayerView2D.js'))),i$z={"base-dynamic":()=>t$k().then((()=>import('./BaseDynamicLayerView2D.js'))),"base-tile":s$w,"bing-maps":s$w,csv:a$B,"geo-rss":()=>t$k().then((()=>import('./GeoRSSLayerView2D.js'))),feature:a$B,geojson:a$B,graphics:()=>t$k().then((()=>import('./GraphicsLayerView2D.js'))),group:()=>t$k().then((()=>import('./GroupLayerView2D.js'))),imagery:()=>t$k().then((()=>import('./ImageryLayerView2D.js'))),"imagery-tile":()=>t$k().then((()=>import('./ImageryTileLayerView2D.js'))),kml:()=>t$k().then((()=>import('./KMLLayerView2D.js'))),"map-image":()=>t$k().then((()=>import('./MapImageLayerView2D.js'))),"map-notes":()=>t$k().then((()=>import('./MapNotesLayerView2D.js'))),"ogc-feature":()=>t$k().then((()=>import('./OGCFeatureLayerView2D.js'))),"open-street-map":s$w,route:()=>t$k().then((()=>import('./RouteLayerView2D.js'))),stream:()=>t$k().then((()=>import('./StreamLayerView2D.js'))),"subtype-group":()=>t$k().then((()=>import('./SubtypeGroupLayerView2D.js'))),tile:s$w,"vector-tile":()=>t$k().then((()=>import('./VectorTileLayerView2D.js'))),wcs:()=>t$k().then((()=>import('./ImageryTileLayerView2D.js'))),"web-tile":s$w,wfs:a$B,wms:()=>t$k().then((()=>import('./WMSLayerView2D.js'))),wmts:()=>t$k().then((()=>import('./WMTSLayerView2D.js'))),analysis:null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function o$l(r){const t=r.declaredClass?r.declaredClass.slice(r.declaredClass.lastIndexOf(".")+1):"Unknown",s=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new s$29(`${s}:view-not-supported`,`${t} is not supported in 2D`)}const l$s={hasLayerViewModule:e=>r$1G(i$z[e.type]),importLayerView:e=>{const t=i$z[e.type];if(!r$1G(t))throw o$l(e);return t(e)}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let o$k,r$m=null;function n$J(){return !!r$m}function _$3(){return !!s$2l("esri-wasm")}function P$4(){return o$k||(o$k=import('./pe-wasm.js').then((e=>e.p)).then((({default:t})=>t({locateFile:t=>a$2O(`esri/geometry/support/${t}`)}))).then((e=>{N$4(e);})),o$k)}var s$v,E$4,i$y;!function(e){function t(e,t,o){r$m.ensureCache.prepare();const n=A$2(o),_=o===n,P=r$m.ensureFloat64(n),s=r$m._pe_geog_to_proj(r$m.getPointer(e),t,P);return s&&d$h(o,t,P,_),s}function o(e,o,r,_){switch(_){case E$4.PE_TRANSFORM_P_TO_G:return n(e,o,r);case E$4.PE_TRANSFORM_G_TO_P:return t(e,o,r)}return 0}function n(e,t,o){return _(e,t,o,0)}function _(e,t,o,n){r$m.ensureCache.prepare();const _=A$2(o),P=o===_,s=r$m.ensureFloat64(_),E=r$m._pe_proj_to_geog_center(r$m.getPointer(e),t,s,n);return E&&d$h(o,t,s,P),E}e.geogToProj=t,e.projGeog=o,e.projToGeog=n,e.projToGeogCenter=_;}(s$v||(s$v={})),function(e){function t(){e.PE_BUFFER_MAX=r$m.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=r$m.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=r$m.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=r$m.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=r$m.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=r$m.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=r$m.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=r$m.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=r$m.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=r$m.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=r$m.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=r$m.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=r$m.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=r$m.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=r$m.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=r$m.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=r$m.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=r$m.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=r$m.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=r$m.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=r$m.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=r$m.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=r$m.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=r$m.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=r$m.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=r$m.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=r$m.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=r$m.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=r$m.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=r$m.PeDefs.prototype.PE_HORIZON_DELTA;}e.init=t;}(E$4||(E$4={})),function(e){const t={},o={},n=e=>{if(e){const t=e.getType();switch(t){case E$4.PE_TYPE_GEOGCS:e=r$m.castObject(e,r$m.PeGeogcs);break;case E$4.PE_TYPE_PROJCS:e=r$m.castObject(e,r$m.PeProjcs);break;case E$4.PE_TYPE_GEOGTRAN:e=r$m.castObject(e,r$m.PeGeogtran);break;default:t&E$4.PE_TYPE_UNIT&&(e=r$m.castObject(e,r$m.PeUnit));}}return e};function _(){r$m.PeFactory.prototype.initialize(null);}function P(e){return s(E$4.PE_TYPE_COORDSYS,e)}function s(e,o){let _=null,P=t[e];if(P||(P={},t[e]=P),P.hasOwnProperty(String(o)))_=P[o];else {const t=r$m.PeFactory.prototype.factoryByType(e,o);r$m.compare(t,r$m.NULL)||(_=t,P[o]=_);}return _=n(_),_}function i(e,t){let _=null,P=o[e];if(P||(P={},o[e]=P),P.hasOwnProperty(t))_=P[t];else {const o=r$m.PeFactory.prototype.fromString(e,t);r$m.compare(o,r$m.NULL)||(_=o,P[t]=_);}return _=n(_),_}function p(e){return s(E$4.PE_TYPE_GEOGCS,e)}function u(e){return s(E$4.PE_TYPE_GEOGTRAN,e)}function c(e){return r$m.PeFactory.prototype.getCode(e)}function a(e){return s(E$4.PE_TYPE_PROJCS,e)}function g(e){return s(E$4.PE_TYPE_UNIT,e)}e.initialize=_,e.coordsys=P,e.factoryByType=s,e.fromString=i,e.geogcs=p,e.geogtran=u,e.getCode=c,e.projcs=a,e.unit=g;}(i$y||(i$y={}));let p$s=null;var u$j,c$A,a$A,g$b,T$1,f$a,O$5,S$5,l$r;function N$4(e){function t(e,t,o){e[t]=o(e[t]);}r$m=e,E$4.init(),u$j.init(),T$1.init(),O$5.init(),S$5.init(),p$s=class extends r$m.PeGCSExtent{destroy(){r$m.destroy(this);}};const o=[r$m.PeDatum,r$m.PeGeogcs,r$m.PeGeogtran,r$m.PeObject,r$m.PeParameter,r$m.PePrimem,r$m.PeProjcs,r$m.PeSpheroid,r$m.PeUnit];for(const r of o)t(r.prototype,"getName",(e=>function(){return e.call(this,new Array(E$4.PE_NAME_MAX))}));for(const P of [r$m.PeGeogtran,r$m.PeProjcs])t(P.prototype,"getParameters",(e=>function(){const t=new Array(E$4.PE_PARM_MAX);let o=e.call(this);for(let e=0;e<t.length;e++){const n=r$m.getValue(o,"*");t[e]=n?r$m.wrapPointer(n,r$m.PeParameter):null,o+=Int32Array.BYTES_PER_ELEMENT;}return t}));t(r$m.PeHorizon.prototype,"getCoord",(e=>function(){const t=this.getSize();if(!t)return null;const o=[];return d$h(o,t,e.call(this)),o})),t(r$m.PeGTlistExtendedEntry.prototype,"getEntries",(e=>{const t=r$m._pe_getPeGTlistExtendedGTsSize();return function(){let o=null;const n=e.call(this);if(!r$m.compare(n,r$m.NULL)){o=[n];const e=this.getSteps();if(e>1){const _=r$m.getPointer(n);for(let n=1;n<e;n++)o.push(r$m.wrapPointer(_+t*n,r$m.PeGTlistExtendedGTs));}}return o}}));const n=r$m._pe_getPeHorizonSize(),_=e=>function(){let t=this._cache;if(t||(t=new Map,this._cache=t),t.has(e))return t.get(e);let o=null;const _=e.call(this);if(!r$m.compare(_,r$m.NULL)){o=[_];const e=_.getNump();if(e>1){const t=r$m.getPointer(_);for(let _=1;_<e;_++)o.push(r$m.wrapPointer(t+n*_,r$m.PeHorizon));}}return t.set(e,o),o};t(r$m.PeProjcs.prototype,"horizonGcsGenerate",_),t(r$m.PeProjcs.prototype,"horizonPcsGenerate",_),r$m.PeObject.prototype.toString=function(e=E$4.PE_STR_OPTS_NONE){r$m.ensureCache.prepare();const t=r$m.getPointer(this),o=r$m.ensureInt8(new Array(E$4.PE_BUFFER_MAX));return r$m.UTF8ToString(r$m._pe_object_to_string_ext(t,e,o))};}function y$a(e){if(!e)return;const t=r$m.getClass(e);if(!t)return;const o=r$m.getCache(t);if(!o)return;const n=r$m.getPointer(e);n&&delete o[n];}function M$3(e,t){const o=[],n=new Array(t);for(let _=0;_<e;_++)o.push(r$m.ensureInt8(n));return o}function A$2(e){let t;return Array.isArray(e[0])?(t=[],e.forEach((e=>{t.push(e[0],e[1]);}))):t=e,t}function d$h(e,t,o,n=!1){if(n)for(let _=0;_<2*t;_++)e[_]=r$m.getValue(o+_*Float64Array.BYTES_PER_ELEMENT,"double");else {const n=0===e.length;for(let _=0;_<t;_++)n&&(e[_]=new Array(2)),e[_][0]=r$m.getValue(o,"double"),e[_][1]=r$m.getValue(o+Float64Array.BYTES_PER_ELEMENT,"double"),o+=2*Float64Array.BYTES_PER_ELEMENT;}}!function(e){let t;function o(){e.PE_GTLIST_OPTS_COMMON=r$m.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=r$m._pe_getPeGTlistExtendedEntrySize();}function n(e,o,n,_,P,s){let E=null;const i=new r$m.PeInteger(s);try{const p=r$m.PeGTlistExtended.prototype.getGTlist(e,o,n,_,P,i);if((s=i.val)&&(E=[p],s>1)){const e=r$m.getPointer(p);for(let o=1;o<s;o++)E.push(r$m.wrapPointer(e+t*o,r$m.PeGTlistExtendedEntry));}}finally{r$m.destroy(i);}return E}e.init=o,e.getGTlist=n;}(u$j||(u$j={})),function(e){function t(e){if(e&&e.length){for(const t of e)y$a(t),t.getEntries().forEach((e=>{y$a(e);const t=e.getGeogtran();y$a(t),t.getParameters().forEach(y$a),[t.getGeogcs1(),t.getGeogcs2()].forEach((e=>{y$a(e);const t=e.getDatum();y$a(t),y$a(t.getSpheroid()),y$a(e.getPrimem()),y$a(e.getUnit());}));}));r$m.PeGTlistExtendedEntry.prototype.Delete(e[0]);}}e.destroy=t;}(c$A||(c$A={})),function(e){function t(e,t,o,n,_){r$m.ensureCache.prepare();const P=A$2(o),s=o===P,E=r$m.ensureFloat64(P);let i=0;n&&(i=r$m.ensureFloat64(n));const p=r$m._pe_geog_to_geog(r$m.getPointer(e),t,E,i,_);return p&&d$h(o,t,E,s),p}e.geogToGeog=t;}(a$A||(a$A={})),function(e){const t=(e,t,o,n,_,P)=>{let s,i;switch(r$m.ensureCache.prepare(),e){case"dd":s=r$m._pe_geog_to_dd,i=E$4.PE_DD_MAX;break;case"ddm":s=r$m._pe_geog_to_ddm,i=E$4.PE_DDM_MAX;break;case"dms":s=r$m._pe_geog_to_dms,i=E$4.PE_DMS_MAX;}let p=0;t&&(p=r$m.getPointer(t));const u=A$2(n),c=r$m.ensureFloat64(u),a=M$3(o,i),g=s(p,o,c,_,r$m.ensureInt32(a));if(g)for(let E=0;E<o;E++)P[E]=r$m.UTF8ToString(a[E]);return g},o=(e,t,o,n,_)=>{let P;switch(r$m.ensureCache.prepare(),e){case"dd":P=r$m._pe_dd_to_geog;break;case"ddm":P=r$m._pe_ddm_to_geog;break;case"dms":P=r$m._pe_dms_to_geog;}let s=0;t&&(s=r$m.getPointer(t));const E=n.map((e=>r$m.ensureString(e))),i=r$m.ensureInt32(E),p=r$m.ensureFloat64(new Array(2*o)),u=P(s,o,i,p);return u&&d$h(_,o,p),u};function n(e,o,r,n,_){return t("dms",e,o,r,n,_)}function _(e,t,r,n){return o("dms",e,t,r,n)}function P(e,o,r,n,_){return t("ddm",e,o,r,n,_)}function s(e,t,r,n){return o("ddm",e,t,r,n)}function i(e,o,r,n,_){return t("dd",e,o,r,n,_)}function p(e,t,r,n){return o("dd",e,t,r,n)}e.geog_to_dms=n,e.dms_to_geog=_,e.geog_to_ddm=P,e.ddm_to_geog=s,e.geog_to_dd=i,e.dd_to_geog=p;}(g$b||(g$b={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=r$m.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=r$m.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=r$m.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=r$m.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=r$m.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES;}function o(e,t,o,n,_,P,s){r$m.ensureCache.prepare();let i=0;e&&(i=r$m.getPointer(e));const p=A$2(o),u=r$m.ensureFloat64(p),c=M$3(t,E$4.PE_MGRS_MAX),a=r$m.ensureInt32(c),g=r$m._pe_geog_to_mgrs_extended(i,t,u,n,_,P,a);if(g)for(let E=0;E<t;E++)s[E]=r$m.UTF8ToString(c[E]);return g}function n(e,t,o,n,_){r$m.ensureCache.prepare();let P=0;e&&(P=r$m.getPointer(e));const s=o.map((e=>r$m.ensureString(e))),E=r$m.ensureInt32(s),i=r$m.ensureFloat64(new Array(2*t)),p=r$m._pe_mgrs_to_geog_extended(P,t,E,n,i);return p&&d$h(_,t,i),p}e.init=t,e.geog_to_mgrs_extended=o,e.mgrs_to_geog_extended=n;}(T$1||(T$1={})),function(e){function t(e,t,o,n,_,P,s){r$m.ensureCache.prepare();let i=0;e&&(i=r$m.getPointer(e));const p=A$2(o),u=r$m.ensureFloat64(p),c=M$3(t,E$4.PE_MGRS_MAX),a=r$m.ensureInt32(c),g=r$m._pe_geog_to_usng(i,t,u,n,_,P,a);if(g)for(let E=0;E<t;E++)s[E]=r$m.UTF8ToString(c[E]);return g}function o(e,t,o,n){r$m.ensureCache.prepare();let _=0;e&&(_=r$m.getPointer(e));const P=o.map((e=>r$m.ensureString(e))),s=r$m.ensureInt32(P),E=r$m.ensureFloat64(new Array(2*t)),i=r$m._pe_usng_to_geog(_,t,s,E);return i&&d$h(n,t,E),i}e.geog_to_usng=t,e.usng_to_geog=o;}(f$a||(f$a={})),function(e){function t(){e.PE_UTM_OPTS_NONE=r$m.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=r$m.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=r$m.PeNotationUtm.prototype.PE_UTM_OPTS_NS;}function o(e,t,o,n,_){r$m.ensureCache.prepare();let P=0;e&&(P=r$m.getPointer(e));const s=A$2(o),i=r$m.ensureFloat64(s),p=M$3(t,E$4.PE_UTM_MAX),u=r$m.ensureInt32(p),c=r$m._pe_geog_to_utm(P,t,i,n,u);if(c)for(let E=0;E<t;E++)_[E]=r$m.UTF8ToString(p[E]);return c}function n(e,t,o,n,_){r$m.ensureCache.prepare();let P=0;e&&(P=r$m.getPointer(e));const s=o.map((e=>r$m.ensureString(e))),E=r$m.ensureInt32(s),i=r$m.ensureFloat64(new Array(2*t)),p=r$m._pe_utm_to_geog(P,t,E,n,i);return p&&d$h(_,t,i),p}e.init=t,e.geog_to_utm=o,e.utm_to_geog=n;}(O$5||(O$5={})),function(e){const t=new Map;function o(){e.PE_PCSINFO_OPTION_NONE=r$m.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=r$m.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=r$m.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=r$m.PePCSInfo.prototype.PE_POLE_POINT;}function n(o,n=e.PE_PCSINFO_OPTION_DOMAIN){let _,P;return t.has(o)&&(P=t.get(o),P[n]&&(_=P[n])),_||(_=r$m.PePCSInfo.prototype.generate(o,n),P||(P=[],t.set(o,P)),P[n]=_),_}e.init=o,e.generate=n;}(S$5||(S$5={})),function(e){function t(){return r$m.PeVersion.prototype.version_string()}e.version_string=t;}(l$r||(l$r={}));const R$2=Object.freeze({__proto__:null,get _pe(){return r$m},isLoaded:n$J,isSupported:_$3,load:P$4,get PeCSTransformations(){return s$v},get PeDefs(){return E$4},get PeFactory(){return i$y},get PeGCSExtent(){return p$s},get PeGTlistExtended(){return u$j},get PeGTlistExtendedEntry(){return c$A},get PeGTTransformations(){return a$A},get PeNotationDms(){return g$b},get PeNotationMgrs(){return T$1},get PeNotationUsng(){return f$a},get PeNotationUtm(){return O$5},get PePCSInfo(){return S$5},get PeVersion(){return l$r},_init:N$4});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$l=s$1L.radius,n$I=s$1L.eccentricitySquared,s$u={a1:r$l*n$I,a2:r$l*n$I*r$l*n$I,a3:r$l*n$I*n$I/2,a4:r$l*n$I*r$l*n$I*2.5,a5:r$l*n$I+r$l*n$I*n$I/2,a6:1-n$I};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$t=0;class t$j{constructor(t=null){this.uid=s$t++,t?(this._wkt=void 0!==t.wkt?t.wkt:null,this._wkid=void 0!==t.wkid?t.wkid:-1,this._isInverse=void 0!==t.isInverse&&!0===t.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1);}static fromGE(s){const i=new t$j;return i._wkt=s.wkt,i._wkid=s.wkid,i._isInverse=s.isInverse,i}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=s$t++;}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=s$t++;}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=s$t++;}getInverse(){const s=new t$j;return s._wkt=this.wkt,s._wkid=this._wkid,s._isInverse=!this.isInverse,s}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$s{constructor(s){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,s&&s.steps)for(const i of s.steps)i instanceof t$j?this.steps.push(i):this.steps.push(new t$j({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}));}static cacheKey(t,s){return [void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():"",void 0!==s.wkid&&null!==s.wkid?s.wkid.toString():"-1",void 0!==s.wkt&&null!==s.wkt?s.wkt.toString():""].join(",")}static fromGE(i){const e=new s$s;let n="";for(const s of i.steps){const i=t$j.fromGE(s);e.steps.push(i),n+=i.uid.toString()+",";}return e._cached_projection={},e._gtlistentry=null,e._chain=n,e}getInverse(){const t=new s$s;t.steps=[];for(let s=this.steps.length-1;s>=0;s--){const i=this.steps[s];t.steps.push(i.getInverse());}return t}getGTListEntry(){let t="";for(const s of this.steps)t+=s.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,e){this._cached_projection[s$s.cacheKey(t,i)]=e;}getCachedGeTransformation(t,i){let e="";for(const s of this.steps)e+=s.uid.toString()+",";e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e);const n=this._cached_projection[s$s.cacheKey(t,i)];return void 0===n?null:n}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let N$3=null,V$1=null,X$2=null,D$2={};function H(){return !!N$3&&n$J()}function J(n){return t$1O(X$2)&&(X$2=Promise.all([P$4(),import('./geometryEngineBase.js').then((n=>n.g)),import('./hydrated.js')])),X$2.then((([,e,{hydratedAdapter:t}])=>{h$1x(n),V$1=t,N$3=e.default,N$3._enableProjection(R$2);}))}function O$4(n,e,t=null){return Array.isArray(n)?0===n.length?[]:Q(V$1,n,n[0].spatialReference,e,t):Q(V$1,[n],n.spatialReference,e,t)[0]}function Q(n,e,t,r,l=null){if(t$1O(t)||t$1O(r))return e;if(tn(t,r,l))return e.map((n=>e$1Y(un(n,t,r))));if(t$1O(l)){const n=s$s.cacheKey(t,r);void 0!==D$2[n]?l=D$2[n]:(l=Y$2(t,r,null),t$1O(l)&&(l=new s$s),D$2[n]=l);}if(t$1O(N$3))throw new nn;return N$3._project(n,e,t,r,l)}function Y$2(n,e,t=null){if(t$1O(N$3))throw new nn;if(t$1O(n)||t$1O(e))return null;const r=N$3._getTransformation(V$1,n,e,t,null==t?void 0:t.spatialReference);return null!==r?s$s.fromGE(r):null}class nn extends s$29{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()");}}function tn(n,e,t){return !t&&(!!E$n(n,e)||I$u(n)&&I$u(e)&&!!Re(n,e,Ee))}async function rn(n,e,t,r){if(!H())if(Array.isArray(n)){for(const{source:l,dest:u,geographicTransformation:o}of n)if(!tn(l,u,o))return J(r)}else if(!tn(n,e,t))return J(r)}function un(n,e,t){return n?"x"in n?an(n,e,new b$O,t,0):"xmin"in n?Mn(n,e,new M$r,t,0):"rings"in n?mn(n,e,new v$I,t,0):"paths"in n?pn(n,e,new m$1L,t,0):"points"in n?cn(n,e,new m$1N,t,0):null:null}function an(n,e,t,r,l){Se[0]=n.x,Se[1]=n.y;const u=n.z;return Se[2]=void 0!==u?u:l,xn(Se,e,0,Se,r,0,1)?(t.x=Se[0],t.y=Se[1],t.spatialReference=r,void 0===u?(t.z=void 0,t.hasZ=!1):(t.z=Se[2],t.hasZ=!0),void 0===n.m?(t.m=void 0,t.hasM=!1):(t.m=n.m,t.hasM=!0),t):null}function cn(n,e,t,r,l){const{points:u,hasZ:o,hasM:a}=n,s=[],i=u.length,c=[];for(const f of u)c.push(f[0],f[1],o?f[2]:l);if(!xn(c,e,0,c,r,0,i))return null;for(let f=0;f<i;++f){const n=3*f,e=c[n],t=c[n+1];o&&a?s.push([e,t,c[n+2],u[f][3]]):o?s.push([e,t,c[n+2]]):a?s.push([e,t,u[f][2]]):s.push([e,t]);}return t.points=s,t.spatialReference=r,t.hasZ=o,t.hasM=a,t}function pn(n,e,t,r,l){const{paths:u,hasZ:o,hasM:a}=n,s=[];return Cn(u,o,a,e,s,r,l)?(t.paths=s,t.spatialReference=r,t.hasZ=o,t.hasM=a,t):null}function hn(n,e,t=e.spatialReference,r=0){return r$1G(t)&&r$1G(mn(n,n.spatialReference,e,t,r))}function mn(n,e,t,r,l){const{rings:u,hasZ:o,hasM:a}=n,s=[];return Cn(u,o,a,e,s,r,l)?(t.rings=s,t.spatialReference=r,t.hasZ=o,t.hasM=a,t):null}function Mn(n,e,t,r,l){const{xmin:u,ymin:o,xmax:a,ymax:s,hasZ:i,hasM:c}=n;if(!yn(u,o,i?n.zmin:l,e,Se,r))return null;t.xmin=Se[0],t.ymin=Se[1],i&&(t.zmin=Se[2]);return yn(a,s,i?n.zmax:l,e,Se,r)?(t.xmax=Se[0],t.ymax=Se[1],i&&(t.zmax=Se[2]),c&&(t.mmin=n.mmin,t.mmax=n.mmax),t.spatialReference=r,t):null}function wn(n,e,t,r=0){Se[0]=n.x,Se[1]=n.y;const l=n.z;return Se[2]=void 0!==l?l:r,xn(Se,n.spatialReference,0,e,t,0,1)}function yn(n,e,t,r,l,u){return Te[0]=n,Te[1]=e,Te[2]=t,xn(Te,r,0,l,u,0,1)}function xn(n,e,t,r,l,o,a=1){const s=Re(e,l,Ee);if(t$1O(s))return !1;if(s===Gn){if(n===r&&t===o)return !0;const e=t+3*a;for(let l=t,u=o;l<e;l++,u++)r[u]=n[l];return !0}const i=t+3*a;for(let u=t,c=o;u<i;u+=3,c+=3)s(n,u,r,c);return !0}function Cn(n,e,t,r,l,u,o=0){const a=new Array;for(const i of n)for(const n of i)a.push(n[0],n[1],e?n[2]:o);if(!xn(a,r,0,a,u,0,a.length/3))return !1;let s=0;l.length=0;for(const i of n){const n=new Array;for(const r of i)e&&t?n.push([a[s++],a[s++],a[s++],r[3]]):e?n.push([a[s++],a[s++],a[s++]]):t?(n.push([a[s++],a[s++],r[2]]),s++):(n.push([a[s++],a[s++]]),s++);l.push(n);}return !0}function vn(n,e,t,r){if(t$1O(n)||t$1O(r))return !1;const l=Un(n,ye$1),o=Un(r,ge$1);if(l===o&&!qn(o)&&(0!==l||E$n(n,r)))return r$11(t),c$29(t,t,e),!0;if(qn(o)){const n=Me[l][11],r=Me[11][o];return !t$1O(n)&&!t$1O(r)&&(n(e,0,Ce,0),r(Ce,0,Fe,0),zn(Pe*Ce[0],Pe*Ce[1],t),t[12]=Fe[0],t[13]=Fe[1],t[14]=Fe[2],!0)}if(!(3!==o&&12!==o||2!==l&&1!==l&&3!==l)){const n=Me[l][11],r=Me[11][o];return !t$1O(n)&&!t$1O(r)&&(n(e,0,Ce,0),r(Ce,0,Fe,0),1===l?An(Pe*Ce[0],Pe*Ce[1],t):r$11(t),t[12]=Fe[0],t[13]=Fe[1],t[14]=Fe[2],!0)}return !1}function qn(n){return 1===n||7===n||9===n}function zn(n,e,t){const r=Math.sin(n),l=Math.cos(n),u=Math.sin(e),o=Math.cos(e),a=t;return a[0]=-r,a[4]=-u*l,a[8]=o*l,a[12]=0,a[1]=l,a[5]=-u*r,a[9]=o*r,a[13]=0,a[2]=0,a[6]=o,a[10]=u,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function An(n,e,t){return zn(n,e,t),o$12(t,t),t}function Un(n,e){return e.spatialReference===n?e.spatialReferenceId:(e.spatialReference=n,"metersPerUnit"in e&&(e.metersPerUnit=H$9(n,1)),n.wkt===G$b.wkt?e.spatialReferenceId=1:A$m(n)?e.spatialReferenceId=2:T$l(n)?e.spatialReferenceId=3:k$t(n)?e.spatialReferenceId=12:n.wkt===R$j.wkt?e.spatialReferenceId=4:4490===n.wkid?e.spatialReferenceId=5:n.wkt===I$n.wkt?e.spatialReferenceId=7:n.wkt===E$j.wkt?e.spatialReferenceId=9:G$g(n)?e.spatialReferenceId=8:C$s(n)?e.spatialReferenceId=10:e.spatialReferenceId=0)}function Gn(n,e,t,r){n!==t&&(t[r++]=n[e++],t[r++]=n[e++],t[r]=n[e]);}function Wn(n,e,t,r){t[r++]=xe*(n[e++]/s$1L.radius),t[r++]=xe*(Math.PI/2-2*Math.atan(Math.exp(-n[e++]/s$1L.radius))),t[r]=n[e];}function Zn(n,e,t,r){Wn(n,e,t,r),le$1(t,r,t,r);}function _n(n,e,t,r){Wn(n,e,t,r),pe$1(t,r,t,r);}function Bn(n,t,r,l,u){const o=.4999999*Math.PI,a=e$1o(Pe*n[t+1],-o,o),s=Math.sin(a);r[l++]=Pe*n[t]*u.radius,r[l++]=u.halfSemiMajorAxis*Math.log((1+s)/(1-s)),r[l]=n[t+2];}function Kn(n,e,t,r){Bn(n,e,t,r,s$1L);}const Ln=s$1L.radius*Math.PI/180,Nn=180/(s$1L.radius*Math.PI);function Vn(n,e,t,r){t[r]=n[e]*Ln,t[r+1]=n[e+1]*Ln,t[r+2]=n[e+2];}function Xn(n,e,t,r){t[r]=n[e]*Nn,t[r+1]=n[e+1]*Nn,t[r+2]=n[e+2];}function Dn(n,e,t,r){Wn(n,e,t,r),Vn(t,r,t,r);}function Hn(n,e,t,r){he$1(n,e,t,r),Vn(t,r,t,r);}function Jn(n,e,t,r){se$2(n,e,t,r),Vn(t,r,t,r);}function On(n,e,t,r){Xn(n,e,t,r),le$1(t,r,t,r);}function Qn(n,e,t,r){Xn(n,e,t,r),Kn(t,r,t,r);}function Yn(n,e,t,r){Xn(n,e,t,r),pe$1(t,r,t,r);}function ee$2(n,e,t,r,l){const u=l+n[e+2],o=Pe*n[e+1],a=Pe*n[e],s=Math.cos(o);t[r++]=Math.cos(a)*s*u,t[r++]=Math.sin(a)*s*u,t[r]=Math.sin(o)*u;}function te$2(n,e,t,r){ee$2(n,e,t,r,e$1m.radius);}function re$2(n,e,t,r){ee$2(n,e,t,r,t$1h.radius);}function le$1(n,e,t,r){ee$2(n,e,t,r,s$1L.radius);}function ue$1(n,e,t,r,u){const o=n[e],a=n[e+1],s=n[e+2],i=Math.sqrt(o*o+a*a+s*s),c=b$P(s/(0===i?1:i)),f=Math.atan2(a,o);t[r++]=xe*f,t[r++]=xe*c,t[r]=i-u;}function oe$2(n,e,t,r){ue$1(n,e,t,r,e$1m.radius);}function ae$1(n,e,t,r){ue$1(n,e,t,r,t$1h.radius);}function se$2(n,e,t,r){ue$1(n,e,t,r,s$1L.radius);}function ie$1(n,e,t,r){se$2(n,e,t,r),Kn(t,r,t,r);}function ce$1(n,e,t,r){se$2(n,e,t,r),pe$1(t,r,t,r);}function fe$1(n,e,t,r,l){const u=Pe*n[e],o=Pe*n[e+1],a=n[e+2],s=Math.sin(o),i=Math.cos(o),c=l.radius/Math.sqrt(1-l.eccentricitySquared*s*s);t[r++]=(c+a)*i*Math.cos(u),t[r++]=(c+a)*i*Math.sin(u),t[r++]=(c*(1-l.eccentricitySquared)+a)*s;}function pe$1(n,e,t,r){fe$1(n,e,t,r,s$1L);}function he$1(n,e,t,r){const l=s$u,u=n[e],o=n[e+1],a=n[e+2];let s,i,c,f,p,h,m,d,M,R,j,w,y,g,E,I,P,x,T,C,F;s=Math.abs(a),i=u*u+o*o,c=Math.sqrt(i),f=i+a*a,p=Math.sqrt(f),C=Math.atan2(o,u),h=a*a/f,m=i/f,g=l.a2/p,E=l.a3-l.a4/p,m>.3?(d=s/p*(1+m*(l.a1+g+h*E)/p),T=Math.asin(d),R=d*d,M=Math.sqrt(1-R)):(M=c/p*(1-h*(l.a5-g-m*E)/p),T=Math.acos(M),R=1-M*M,d=Math.sqrt(R)),j=1-s$1L.eccentricitySquared*R,w=s$1L.radius/Math.sqrt(j),y=l.a6*w,g=c-w*M,E=s-y*d,P=M*g+d*E,I=M*E-d*g,x=I/(y/j+P),T+=x,F=P+I*x/2,a<0&&(T=-T),t[r++]=xe*C,t[r++]=xe*T,t[r]=F;}function me$1(n,e,t,r){he$1(n,e,t,r),le$1(t,r,t,r);}function de$1(n,e,t,r){he$1(n,e,t,r),Kn(t,r,t,r);}const Me={2:{5:null,8:null,10:null,11:Gn,6:Gn,1:le$1,7:null,9:null,0:null,3:Kn,12:Vn,2:Gn,4:pe$1},5:{5:Gn,8:null,10:null,11:Gn,6:Gn,1:le$1,7:null,9:null,0:null,3:null,12:Vn,2:null,4:pe$1},8:{5:null,8:Gn,10:null,11:Gn,6:null,1:null,7:re$2,9:null,0:null,3:null,12:null,2:null,4:null},10:{5:null,8:null,10:Gn,11:Gn,6:null,1:null,7:null,9:te$2,0:null,3:null,12:null,2:null,4:null},3:{5:null,8:null,10:null,11:Wn,6:Wn,1:Zn,7:null,9:null,0:null,3:Gn,12:Dn,2:Wn,4:_n},4:{5:he$1,8:null,10:null,11:he$1,6:he$1,1:me$1,7:null,9:null,0:null,3:de$1,12:Hn,2:he$1,4:Gn},1:{5:se$2,8:null,10:null,11:se$2,6:se$2,1:Gn,7:null,9:null,0:null,3:ie$1,12:Jn,2:se$2,4:ce$1},7:{5:null,8:ae$1,10:null,11:ae$1,6:null,1:null,7:Gn,9:null,0:null,3:null,12:null,2:null,4:null},9:{5:null,8:null,10:oe$2,11:oe$2,6:null,1:null,7:null,9:Gn,0:null,3:null,12:null,2:null,4:null},0:{5:null,8:null,10:null,11:null,6:null,1:null,7:null,9:null,0:Gn,3:null,12:null,2:null,4:null},11:{5:Gn,8:Gn,10:Gn,11:Gn,6:Gn,1:le$1,7:re$2,9:te$2,0:null,3:Kn,12:Vn,2:Gn,4:pe$1},6:{5:null,8:null,10:null,11:Gn,6:Gn,1:le$1,7:null,9:null,0:null,3:null,12:Vn,2:Gn,4:pe$1},12:{5:Xn,8:null,10:null,11:Xn,6:Xn,1:On,7:null,9:null,0:null,3:Qn,12:Gn,2:Xn,4:Yn}};function Re(n,e,t=we$1()){return t$1O(n)||t$1O(e)?null:je(n,e,t).projector}function je(n,e,t){if(t$1O(n)||t$1O(e)||t.source.spatialReference===n&&t.dest.spatialReference===e)return t;const r=Un(n,t.source),l=Un(e,t.dest);return 0===r&&0===l?E$n(n,e)?t.projector=Gn:t.projector=null:t.projector=Me[r][l],t}function we$1(){return {source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Gn}}const ye$1={spatialReference:null,spatialReferenceId:0},ge$1={spatialReference:null,spatialReferenceId:0},Ee=we$1(),Pe=M$u(1),xe=m$1S(1),Te=n$2m(),Ce=n$2m(),Fe=n$2m(),Se=n$2m();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function o$j(o,m){const{spatialReference:r}=m,i=[m.x,m.y];let s=Number.POSITIVE_INFINITY,x=0,c=0;const a=[0,0],f="extent"===o.type?[[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]]]:o.rings;for(const n of f)for(let o=0;o<n.length-1;o++){o$1d(a,i,n,o);const m=d$j(i,a);m<s&&(s=m,x=a[0],c=a[1]);}return {coordinate:new b$O({x,y:c,spatialReference:r}),distance:s}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$i;const g$a=s$2h.getLogger("esri.views.MapView");let h$j=u$i=class extends p$33{constructor(e){super(e),this.geometry=null,this.spatialReference=null;}get normalizedGeometry(){return t$1O(this.geometry)||!this.spatialReference?null:this.spatialReference.equals(this.geometry.spatialReference)?this.geometry:g$W(this.geometry,this.spatialReference)?M$s(this.geometry,this.spatialReference):H()?O$4(this.geometry,this.spatialReference):(g$a.error("#constraints.geometry","unsupported coordinate system. The source geometry cannot be projected to the view's coordinate system. The projection engine cannot be loaded.",{geometry:this.geometry}),null)}constrain(e,r){if(t$1O(this.normalizedGeometry))return e;const t=e.targetGeometry;if("extent"===this.normalizedGeometry.type?r$1a(this.normalizedGeometry,t):c$2J(this.normalizedGeometry,t))return e;const{coordinate:s}=o$j(this.normalizedGeometry,t);return s?(e.targetGeometry=s,e):e}clone(){var e,r;return new u$i({geometry:null==(e=this.geometry)?void 0:e.clone(),spatialReference:null==(r=this.spatialReference)?void 0:r.clone()})}};e$1_([d$1S({constructOnly:!0})],h$j.prototype,"geometry",void 0),e$1_([d$1S({readOnly:!0})],h$j.prototype,"normalizedGeometry",null),e$1_([d$1S({constructOnly:!0})],h$j.prototype,"spatialReference",void 0),h$j=u$i=e$1_([i$2w("esri.views.2d.constraints.GeometryConstraint")],h$j);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$r;let a$z=s$r=class extends p$33{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0;}constrain(o,r){return this.enabled&&r?(this.rotationEnabled||(o.rotation=r.rotation),o):o}clone(){return new s$r({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};e$1_([d$1S()],a$z.prototype,"enabled",void 0),e$1_([d$1S()],a$z.prototype,"rotationEnabled",void 0),a$z=s$r=e$1_([i$2w("esri.views.2d.constraints.RotationConstraint")],a$z);const n$H=a$z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$y;let c$z=a$y=class extends p$33{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0;}initialize(){let e,{lods:t,minScale:o,maxScale:s,minZoom:i,maxZoom:a}=this,c=-1,r=-1,l=!1,n=!1;if(0!==o&&0!==s&&o<s&&([o,s]=[s,o]),!t||!t.length)return this._set("effectiveMinScale",o),void this._set("effectiveMaxScale",s);t=t.map((e=>e.clone())),t.sort(((e,t)=>t.scale-e.scale)),t.forEach(((e,t)=>e.level=t));for(const f of t)!l&&o>0&&o>=f.scale&&(c=f.level,l=!0),!n&&s>0&&s>=f.scale&&(r=e?e.level:-1,n=!0),e=f;-1===i&&(i=0===o?0:c),-1===a&&(a=0===s?t.length-1:r),i=Math.max(i,0),i=Math.min(i,t.length-1),a=Math.max(a,0),a=Math.min(a,t.length-1),i>a&&([i,a]=[a,i]),o=t[i].scale,s=t[a].scale,t.splice(0,i),t.splice(a-i+1,t.length),t.forEach(((e,t)=>{this._lodByScale[e.scale]=e,this._scales[t]=e.scale;})),this._set("effectiveLODs",t),this._set("effectiveMinZoom",i),this._set("effectiveMaxZoom",a),this._set("effectiveMinScale",o),this._set("effectiveMaxScale",s);}constrain(e,t){if(t&&e.scale===t.scale)return e;const o=this.effectiveMinScale,s=this.effectiveMaxScale,i=e.targetGeometry,a=t&&t.targetGeometry,c=0!==s&&e.scale<s,r=0!==o&&e.scale>o;if(c||r){const c=r?o:s;if(a){const o=(c-t.scale)/(e.scale-t.scale);i.x=a.x+(i.x-a.x)*o,i.y=a.y+(i.y-a.y)*o;}e.scale=c;}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),o=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(o>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const o=Math.round(e-.5),s=Math.round(e);return t[s]+(s-e)*(t[o]-t[s])}scaleToZoom(e){if(!this.effectiveLODs)return -1;const t=this._scales;let o,s;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let i=0;i<t.length-1;i++){if(o=t[i],s=t[i+1],s===e){return i+this.effectiveMinZoom+1}if(o>e&&s<e){return i+this.effectiveMinZoom+1-(e-s)/(o-s)}}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const o=Math.round(this.scaleToZoom(e));return this.zoomToScale(o+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const o=Math.round(this.scaleToZoom(e));return this.zoomToScale(o-1)}clone(){return new a$y({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce(((t,o)=>Math.abs(o-e)<=Math.abs(t-e)?o:t),this._scales[0])),this._lodByScale[e].scale}};e$1_([d$1S({readOnly:!0})],c$z.prototype,"effectiveLODs",void 0),e$1_([d$1S({readOnly:!0})],c$z.prototype,"effectiveMinZoom",void 0),e$1_([d$1S({readOnly:!0})],c$z.prototype,"effectiveMaxZoom",void 0),e$1_([d$1S({readOnly:!0})],c$z.prototype,"effectiveMinScale",void 0),e$1_([d$1S({readOnly:!0})],c$z.prototype,"effectiveMaxScale",void 0),e$1_([d$1S({type:[p$B]})],c$z.prototype,"lods",void 0),e$1_([d$1S()],c$z.prototype,"minZoom",void 0),e$1_([d$1S()],c$z.prototype,"maxZoom",void 0),e$1_([d$1S()],c$z.prototype,"minScale",void 0),e$1_([d$1S()],c$z.prototype,"maxScale",void 0),e$1_([d$1S()],c$z.prototype,"snapToZoom",void 0),c$z=a$y=e$1_([i$2w("esri.views.2d.constraints.ZoomConstraint")],c$z);const r$k=c$z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$r={base:null,key:"type",typeMap:{extent:M$r,polygon:v$I}};let c$y=class extends n$2y.EventedAccessor{constructor(){super(...arguments),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0;}initialize(){this.watch(["_zoom","_rotation"],this.emit.bind(this,"update"),!0);}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null);}set geometry(o){o?this._set("geometry",o):this._set("geometry",null);}get _defaultLODs(){const o=this.get("view.defaultsFromMap.tileInfo"),t=this.get("view.spatialReference");return o&&t&&o.spatialReference.equals(t)?o.lods:null}get _geometry(){return new h$j({geometry:this.geometry,spatialReference:this.view.spatialReference})}get _rotation(){return new n$H({rotationEnabled:this.rotationEnabled})}get _zoom(){return new r$k({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})}canZoomInTo(o){const t=this.effectiveMaxScale;return 0===t||o>=t}canZoomOutTo(o){const t=this.effectiveMinScale;return 0===t||o<=t}constrain(o,t){return this._zoom.constrain(o,t),this._rotation.constrain(o,t),this._geometry.constrain(o,t),o}constrainByGeometry(o){return this._geometry.constrain(o)}fit(o){return this._zoom.fit(o)}zoomToScale(o){return this._zoom.zoomToScale(o)}scaleToZoom(o){return this._zoom.scaleToZoom(o)}snapScale(o){return this._zoom.snapToClosestScale(o)}snapToNextScale(o){return this._zoom.snapToNextScale(o)}snapToPreviousScale(o){return this._zoom.snapToPreviousScale(o)}};e$1_([d$1S({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],c$y.prototype,"effectiveLODs",void 0),e$1_([d$1S({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],c$y.prototype,"effectiveMinScale",void 0),e$1_([d$1S({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],c$y.prototype,"effectiveMaxScale",void 0),e$1_([d$1S({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],c$y.prototype,"effectiveMinZoom",void 0),e$1_([d$1S({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],c$y.prototype,"effectiveMaxZoom",void 0),e$1_([d$1S({types:p$r,value:null})],c$y.prototype,"geometry",null),e$1_([d$1S({type:[p$B]})],c$y.prototype,"lods",void 0),e$1_([d$1S()],c$y.prototype,"minScale",void 0),e$1_([d$1S()],c$y.prototype,"maxScale",void 0),e$1_([d$1S()],c$y.prototype,"minZoom",void 0),e$1_([d$1S()],c$y.prototype,"maxZoom",void 0),e$1_([d$1S()],c$y.prototype,"rotationEnabled",void 0),e$1_([d$1S()],c$y.prototype,"snapToZoom",void 0),e$1_([d$1S()],c$y.prototype,"view",void 0),e$1_([d$1S()],c$y.prototype,"_defaultLODs",null),e$1_([d$1S({type:h$j})],c$y.prototype,"_geometry",null),e$1_([d$1S({type:n$H})],c$y.prototype,"_rotation",null),e$1_([d$1S({readOnly:!0,type:r$k})],c$y.prototype,"_zoom",null),c$y=e$1_([i$2w("esri.views.2d.MapViewConstraints")],c$y);const y$9=c$y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function a$x(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t}function n$G(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t}function s$q(t,a,n,s,r,o,u,c,e,i){return t[0]=a,t[1]=n,t[2]=s,t[3]=r,t[4]=o,t[5]=u,t[6]=c,t[7]=e,t[8]=i,t}function r$j(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function o$i(t,a){if(t===a){const n=a[1],s=a[2],r=a[5];t[1]=a[3],t[2]=a[6],t[3]=n,t[5]=a[7],t[6]=s,t[7]=r;}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t}function u$h(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],u=a[4],c=a[5],e=a[6],i=a[7],M=a[8],h=M*u-c*i,f=-M*o+c*e,b=i*o-u*e;let l=n*h+s*f+r*b;return l?(l=1/l,t[0]=h*l,t[1]=(-M*s+r*i)*l,t[2]=(c*s-r*u)*l,t[3]=f*l,t[4]=(M*n-r*e)*l,t[5]=(-c*n+r*o)*l,t[6]=b*l,t[7]=(-i*n+s*e)*l,t[8]=(u*n-s*o)*l,t):null}function c$x(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],u=a[4],c=a[5],e=a[6],i=a[7],M=a[8];return t[0]=u*M-c*i,t[1]=r*i-s*M,t[2]=s*c-r*u,t[3]=c*e-o*M,t[4]=n*M-r*e,t[5]=r*o-n*c,t[6]=o*i-u*e,t[7]=s*e-n*i,t[8]=n*u-s*o,t}function e$h(t){const a=t[0],n=t[1],s=t[2],r=t[3],o=t[4],u=t[5],c=t[6],e=t[7],i=t[8];return a*(i*o-u*e)+n*(-i*r+u*c)+s*(e*r-o*c)}function i$x(t,a,n){const s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],i=a[6],M=a[7],h=a[8],f=n[0],b=n[1],l=n[2],m=n[3],x=n[4],d=n[5],p=n[6],y=n[7],j=n[8];return t[0]=f*s+b*u+l*i,t[1]=f*r+b*c+l*M,t[2]=f*o+b*e+l*h,t[3]=m*s+x*u+d*i,t[4]=m*r+x*c+d*M,t[5]=m*o+x*e+d*h,t[6]=p*s+y*u+j*i,t[7]=p*r+y*c+j*M,t[8]=p*o+y*e+j*h,t}function M$2(t,a,n){const s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],i=a[6],M=a[7],h=a[8],f=n[0],b=n[1];return t[0]=s,t[1]=r,t[2]=o,t[3]=u,t[4]=c,t[5]=e,t[6]=f*s+b*u+i,t[7]=f*r+b*c+M,t[8]=f*o+b*e+h,t}function h$i(t,a,n){const s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],i=a[6],M=a[7],h=a[8],f=Math.sin(n),b=Math.cos(n);return t[0]=b*s+f*u,t[1]=b*r+f*c,t[2]=b*o+f*e,t[3]=b*u-f*s,t[4]=b*c-f*r,t[5]=b*e-f*o,t[6]=i,t[7]=M,t[8]=h,t}function f$9(t,a,n){const s=n[0],r=n[1],o=n[2];return t[0]=s*a[0],t[1]=s*a[1],t[2]=s*a[2],t[3]=r*a[3],t[4]=r*a[4],t[5]=r*a[5],t[6]=o*a[6],t[7]=o*a[7],t[8]=o*a[8],t}function b$5(t,a,n){const s=n[0],r=n[1];return t[0]=s*a[0],t[1]=s*a[1],t[2]=s*a[2],t[3]=r*a[3],t[4]=r*a[4],t[5]=r*a[5],t}function l$q(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a[0],t[7]=a[1],t[8]=1,t}function m$i(t,a){const n=Math.sin(a),s=Math.cos(a);return t[0]=s,t[1]=n,t[2]=0,t[3]=-n,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function x$5(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=a[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function d$g(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t}function p$q(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],u=n+n,c=s+s,e=r+r,i=n*u,M=s*u,h=s*c,f=r*u,b=r*c,l=r*e,m=o*u,x=o*c,d=o*e;return t[0]=1-h-l,t[3]=M-d,t[6]=f+x,t[1]=M+d,t[4]=1-i-l,t[7]=b-m,t[2]=f-x,t[5]=b+m,t[8]=1-i-h,t}function y$8(t,a){const n=a[0],s=a[1],r=a[2],o=a[4],u=a[5],c=a[6],e=a[8],i=a[9],M=a[10],h=M*u-c*i,f=-M*o+c*e,b=i*o-u*e,l=n*h+s*f+r*b;if(!l)return null;const m=1/l;return t[0]=h*m,t[1]=(-M*s+r*i)*m,t[2]=(c*s-r*u)*m,t[3]=f*m,t[4]=(M*n-r*e)*m,t[5]=(-c*n+r*o)*m,t[6]=b*m,t[7]=(-i*n+s*e)*m,t[8]=(u*n-s*o)*m,t}function j$4(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],u=a[4],c=a[5],e=a[6],i=a[7],M=a[8],h=a[9],f=a[10],b=a[11],l=a[12],m=a[13],x=a[14],d=a[15],p=n*c-s*u,y=n*e-r*u,j=n*i-o*u,q=s*e-r*c,_=s*i-o*c,g=r*i-o*e,A=M*m-h*l,E=M*x-f*l,F=M*d-b*l,S=h*x-f*m,v=h*d-b*m,z=f*d-b*x;let B=p*z-y*v+j*S+q*F-_*E+g*A;return B?(B=1/B,t[0]=(c*z-e*v+i*S)*B,t[1]=(e*F-u*z-i*E)*B,t[2]=(u*v-c*F+i*A)*B,t[3]=(r*v-s*z-o*S)*B,t[4]=(n*z-r*F+o*E)*B,t[5]=(s*F-n*v-o*A)*B,t[6]=(m*g-x*_+d*q)*B,t[7]=(x*j-l*g-d*y)*B,t[8]=(l*_-m*j+d*p)*B,t):null}function q$3(t,a,n){return t[0]=2/a,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function _$2(t){return "mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function g$9(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function A$1(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t[4]=a[4]+n[4],t[5]=a[5]+n[5],t[6]=a[6]+n[6],t[7]=a[7]+n[7],t[8]=a[8]+n[8],t}function E$3(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t[4]=a[4]-n[4],t[5]=a[5]-n[5],t[6]=a[6]-n[6],t[7]=a[7]-n[7],t[8]=a[8]-n[8],t}function F$1(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*n,t[5]=a[5]*n,t[6]=a[6]*n,t[7]=a[7]*n,t[8]=a[8]*n,t}function S$4(t,a,n,s){return t[0]=a[0]+n[0]*s,t[1]=a[1]+n[1]*s,t[2]=a[2]+n[2]*s,t[3]=a[3]+n[3]*s,t[4]=a[4]+n[4]*s,t[5]=a[5]+n[5]*s,t[6]=a[6]+n[6]*s,t[7]=a[7]+n[7]*s,t[8]=a[8]+n[8]*s,t}function v$5(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]}function z$1(a,n){const s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],i=a[6],M=a[7],h=a[8],f=n[0],b=n[1],l=n[2],m=n[3],x=n[4],d=n[5],p=n[6],y=n[7],j=n[8];return Math.abs(s-f)<=a$2H*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(r-b)<=a$2H*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-l)<=a$2H*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(u-m)<=a$2H*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-x)<=a$2H*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(e-d)<=a$2H*Math.max(1,Math.abs(e),Math.abs(d))&&Math.abs(i-p)<=a$2H*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(M-y)<=a$2H*Math.max(1,Math.abs(M),Math.abs(y))&&Math.abs(h-j)<=a$2H*Math.max(1,Math.abs(h),Math.abs(j))}function B(a){const n=a$2H,s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],i=a[6],M=a[7],h=a[8];return Math.abs(1-(s*s+u*u+i*i))<=n&&Math.abs(1-(r*r+c*c+M*M))<=n&&Math.abs(1-(o*o+e*e+h*h))<=n}const O$3=i$x,k$4=E$3;Object.freeze({__proto__:null,fromMat4:a$x,copy:n$G,set:s$q,identity:r$j,transpose:o$i,invert:u$h,adjoint:c$x,determinant:e$h,multiply:i$x,translate:M$2,rotate:h$i,scale:f$9,scaleByVec2:b$5,fromTranslation:l$q,fromRotation:m$i,fromScaling:x$5,fromMat2d:d$g,fromQuat:p$q,normalFromMat4Legacy:y$8,normalFromMat4:j$4,projection:q$3,str:_$2,frob:g$9,add:A$1,subtract:E$3,multiplyScalar:F$1,multiplyScalarAndAdd:S$4,exactEquals:v$5,equals:z$1,isOrthoNormal:B,mul:O$3,sub:k$4});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$F(){const n=new Float32Array(9);return n[0]=1,n[4]=1,n[8]=1,n}function r$i(n){const r=new Float32Array(9);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r}function t$i(n,r,t,e,a,o,c,s,u){const l=new Float32Array(9);return l[0]=n,l[1]=r,l[2]=t,l[3]=e,l[4]=a,l[5]=o,l[6]=c,l[7]=s,l[8]=u,l}function e$g(n,r){return new Float32Array(n,r,9)}Object.freeze({__proto__:null,create:n$F,clone:r$i,fromValues:t$i,createView:e$g});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$E(){return new Float32Array(2)}function r$h(n){const r=new Float32Array(2);return r[0]=n[0],r[1]=n[1],r}function t$h(n,r){const t=new Float32Array(2);return t[0]=n,t[1]=r,t}function e$f(n,r){return new Float32Array(n,r,2)}function a$w(){return n$E()}function o$h(){return t$h(1,1)}function u$g(){return t$h(1,0)}function s$p(){return t$h(0,1)}const c$w=a$w(),f$8=o$h(),i$w=u$g(),l$p=s$p();Object.freeze({__proto__:null,create:n$E,clone:r$h,fromValues:t$h,createView:e$f,zeros:a$w,ones:o$h,unitX:u$g,unitY:s$p,ZEROS:c$w,ONES:f$8,UNIT_X:i$w,UNIT_Y:l$p});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$D(n){return n instanceof Float32Array&&n.length>=2}function r$g(n){return Array.isArray(n)&&n.length>=2}function t$g(t){return n$D(t)||r$g(t)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var V;const G$1=[0,0];let O$2=V=class extends a$2A{constructor(t){super(t),this._viewpoint2D={center:n$K(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new M$r,this.id=0,this.inverseTransform=e$k(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=e$k(),this.transformNoRotation=e$k(),this.displayMat3=n$F(),this.displayViewMat3=n$F(),this.viewMat3=n$F(),this.viewMat2d=n$1z(),this.worldScreenWidth=0,this.size=[0,0];}set pixelRatio(t){this._set("pixelRatio",t),this._update();}set size(t){this._set("size",t),this._update();}set viewpoint(t){if(t){const s=this._viewpoint2D,i=t.targetGeometry;s.center[0]=i.x,s.center[1]=i.y,s.rotation=t.rotation,s.scale=t.scale,s.spatialReference=i.spatialReference;}this._update();}copy(t){const s=this.size,i=this.viewpoint;return i&&s?(this.viewpoint=Z$2(i,t.viewpoint),this._set("size",a$E(s,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new V({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,s,i){return t$g(s)?D$4(t,s,this.inverseTransform):(G$1[0]=s,G$1[1]=i,D$4(t,G$1,this.inverseTransform))}toScreen(t,s,i){return t$g(s)?D$4(t,s,this.transform):(G$1[0]=s,G$1[1]=i,D$4(t,G$1,this.transform))}toScreenNoRotation(t,s,i){return t$g(s)?D$4(t,s,this.transformNoRotation):(G$1[0]=s,G$1[1]=i,D$4(t,G$1,this.transformNoRotation))}getScreenTransform(t,s){const{center:i}=this._viewpoint2D,e=this._get("pixelRatio")||1,o=this._get("size");return lt(t,i,o,s,0,e),t}_update(){const{center:t,spatialReference:i,scale:e,rotation:o}=this._viewpoint2D,c=this._get("pixelRatio")||1,m=this._get("size"),d=new u$p({targetGeometry:new b$O(t[0],t[1],i),scale:e,rotation:o});if(this._set("viewpoint",d),!m||!i||!e)return;this.resolution=at(d),this.rotation=o,this.scale=e,this.spatialReference=i,a$E(this.center,t);const y=0!==m[0]?2/m[0]:0,_=0!==m[1]?-2/m[1]:0;s$q(this.displayMat3,y,0,0,0,_,0,-1,1,1);const x=r$j(this.viewMat3),z=t$h(m[0]/2,m[1]/2),g=t$h(-m[0]/2,-m[1]/2),b=s$1R(o);M$2(x,x,z),h$i(x,x,b),M$2(x,x,g),i$x(this.displayViewMat3,this.displayMat3,x);const V=n$1y(this.viewMat2d);return i$1j(V,V,z),c$1x(V,V,b),i$1j(V,V,g),_$4(this.extent,d,m),mt(this.transform,d,m,c),r$N(this.inverseTransform,this.transform),yt(this.transformNoRotation,d,m,c),this.worldScreenWidth=gt(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};e$1_([d$1S({readOnly:!0})],O$2.prototype,"id",void 0),e$1_([d$1S({value:1,json:{write:!0}})],O$2.prototype,"pixelRatio",null),e$1_([d$1S({json:{write:!0}})],O$2.prototype,"size",null),e$1_([d$1S({type:u$p,json:{write:!0}})],O$2.prototype,"viewpoint",null),O$2=V=e$1_([i$2w("esri.views.2d.ViewState")],O$2);const U$1=O$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$v=class extends p$33{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0;}};e$1_([d$1S()],c$v.prototype,"left",void 0),e$1_([d$1S()],c$v.prototype,"top",void 0),e$1_([d$1S()],c$v.prototype,"right",void 0),e$1_([d$1S()],c$v.prototype,"bottom",void 0),c$v=e$1_([i$2w("esri.views.2d.PaddedViewState.Padding")],c$v);let h$h=class extends U$1{constructor(...t){super(...t),this.paddedViewState=new U$1,this._updateContent=(()=>{const t=n$K();return ()=>{const e=this._get("size"),s=this._get("padding");if(!e||!s)return;const o=this.paddedViewState;r$o(t,s.left+s.right,s.top+s.bottom),o$n(t,e,t),a$E(o.size,t);const a=o.viewpoint;a&&(this.viewpoint=a);}})(),this.watch(["size","padding"],this._updateContent,!0),this.padding=new c$v,this.size=[0,0];}set padding(t){this._set("padding",t||new c$v);}set viewpoint(t){if(t){const e=t.clone();this.paddedViewState.viewpoint=t,bt(e,t,this._get("size"),this._get("padding"));const s=this._viewpoint2D,o=e.targetGeometry;s.center[0]=o.x,s.center[1]=o.y,s.rotation=e.rotation,s.scale=e.scale,s.spatialReference=o.spatialReference,this._update();}}};e$1_([d$1S()],h$h.prototype,"paddedViewState",void 0),e$1_([d$1S({type:c$v})],h$h.prototype,"padding",null),e$1_([d$1S()],h$h.prototype,"viewpoint",null),h$h=e$1_([i$2w("esri.views.2d.PaddedViewState")],h$h);const m$h=h$h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class u$f{constructor(e,s){this.item=e,this.controller=s,this.promise=null;}}class l$o{constructor(s){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,s.concurrency&&(this.concurrency=s.concurrency),this._queue=new e$q(s.peeker),this.process=s.process;const t=s.scheduler;s.priority&&r$1G(t)&&(this._task=t.registerTask(s.priority,this));}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null);}get length(){return this._processingItems.size+this._queue.length}abort(e){const s=this._controllers.get(e);s&&s.abort();}clear(){this._queue.clear();const e=[];this._controllers.forEach((s=>e.push(s))),this._controllers.clear(),e.forEach((e=>e.abort())),this._processingItems.clear(),this._cancelNext();}forEach(e){this._deferreds.forEach(((s,t)=>e(t)));}get(e){const s=this._deferreds.get(e);return s?s.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext());}push(s,h){const c=this.get(s);if(c)return c;const n=new AbortController;let u=null;h&&(u=j$M(h,(()=>n.abort())));const l=()=>{const e=this._processingItems.get(s);e&&e.controller.abort(),_(),a.reject(m$22());},_=()=>{p.remove(),r$1G(u)&&u.remove(),this._deferreds.delete(s),this._controllers.delete(s),this._queue.remove(s),this._processingItems.delete(s),this._scheduleNext();},p=v$T(n.signal,l),a=A$v();return this._deferreds.set(s,a),this._controllers.set(s,n),a.promise.then(_,_),this._queue.push(s),this._scheduleNext(),a.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const e=[];this._processingItems.forEach((s=>e.push(s))),this._processingItems.clear();for(const s of e)this._queue.push(s.item),s.controller.abort();this._scheduleNext();}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext());}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return !this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress();}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=v$R((()=>{this._schedule=null,this._next();})));}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop());}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null);}_processResult(e,s){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(s));}_processError(e,s){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(s));}_canProcessFulfillment(e){return !!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(t$1O(e))return;let t;const r=new AbortController,i=new u$f(e,r);this._processingItems.set(e,i);try{t=this.process(e,r.signal);}catch(o){this._processError(i,o);}O$r(t)?(i.promise=t,t.then((e=>this._processResult(i,e)),(e=>this._processError(i,e)))):this._processResult(i,t);}get test(){return {update:e=>this.runTask(e)}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$C(e,t){return e.length=0,t.forEach((t=>e.push(t))),e}const u$e=new Set,a$v=[],c$u=new Map,h$g=[0,0];let l$n=class extends p$33{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null;}initialize(){const{concurrency:e,process:t}=this;this._queue=new l$o({concurrency:e,process:(e,s)=>{const r=this._keyToItem.get(e);return t(r,{signal:s})},peeker:e=>e.values().next().value});}destroy(){this.clear(),this._queue.destroy(),this._queue=null;}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t);}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating");}has(e){return "string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause();}push(e,t){const s=e.key.id+"-"+t;if(this.has(s))return this.get(s);const r=this._queue.push(s),o=()=>{this._keyToItem.delete(s),this.notifyChange("updating");};return this._keyToItem.set(s,e),r.then(o,o),this.notifyChange("updating"),r}reset(){this._queue.reset(),this.notifyChange("updating");}resume(){this._queue.resume();}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let s=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach((e=>{const t=this._keyToItem.get(e),o=this.tileInfoView.getTileScale(t.key);c$u.has(o)||(c$u.set(o,[]),s=Math.max(o,s),r=Math.min(o,r)),c$u.get(o).push(t.key),u$e.add(o);}));let o=this.state.scale;c$u.has(o)||(n$C(a$v,u$e),a$v.sort(((e,t)=>e-t)),o=a$v.reduce(((e,t)=>Math.abs(t-o)<Math.abs(e-o)?t:e),a$v[0])),o=Math.min(o,s),o=Math.max(o,r);const i=c$u.get(o),h=t.getClosestInfoForScale(o),l=h.getColumnForX(this.state.center[0]),p=h.getRowForY(this.state.center[1]);return i.sort(((e,t)=>{const s=h.denormalizeCol(e.col,e.world),r=h.denormalizeCol(t.col,t.world);return Math.sqrt((l-s)*(l-s)+(p-e.row)*(p-e.row))-Math.sqrt((l-r)*(l-r)+(p-t.row)*(p-t.row))})),u$e.clear(),c$u.clear(),i[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,s=this.state.center;let r=Number.POSITIVE_INFINITY,i=null;return e.forEach((e=>{const n=this._keyToItem.get(e);t.getTileCoords(h$g,n.key);const u=d$j(h$g,s);u<r&&(r=u,i=n.key);})),i.id}};e$1_([d$1S({constructOnly:!0})],l$n.prototype,"concurrency",void 0),e$1_([d$1S({constructOnly:!0})],l$n.prototype,"process",void 0),e$1_([d$1S()],l$n.prototype,"state",void 0),e$1_([d$1S({constructOnly:!0})],l$n.prototype,"strategy",void 0),e$1_([d$1S({constructOnly:!0})],l$n.prototype,"tileInfoView",void 0),e$1_([d$1S({readOnly:!0})],l$n.prototype,"updating",null),l$n=e$1_([i$2w("esri.views.2d.tiling.PagedTileQueue")],l$n);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$e{constructor(t,e,l,s){this.set(t,e,l,s);}static getId(t,e,l,s){return "object"==typeof t?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${e}/${l}/${s}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t);}get hash(){const t=4095&this.row,e=4095&this.col,l=63&this.level;return (3&this.world)<<30|e<<22|t<<8|l}acquire(t,e,l,s){this.set(t,e,l,s);}contains(t){const e=t.level-this.level;return this.row===t.row>>e&&this.col===t.col>>e&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new e$e(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0;}set(t,e,l,s){if(null==t)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof t)this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if("string"==typeof t){const[e,l,s,o]=t.split("/");this.level=parseFloat(e),this.row=parseFloat(l),this.col=parseFloat(s),this.world=parseFloat(o);}else this.level=+t,this.row=+e,this.col=+l,this.world=+s||0;return this}toString(){return `${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new e$e(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,l=this.row<<1,s=this.col<<1,o=this.world;return [new e$e(t,l,s,o),new e$e(t,l,s+1,o),new e$e(t,l+1,s,o),new e$e(t,l+1,s+1,o)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}e$e.pool=new e$1I(e$e,null,null,25,50);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$v(t,r){return [t,r]}function e$d(t,r,o){return t[0]=r,t[1]=o,t}function s$o(t,r,o,i,e){return t[0]=r,t[1]=o,t[2]=i,t[3]=e,t}const n$B=new e$e("0/0/0/0");class l$m{constructor(t,r,o,i,e,s,n,l,h,a,u,m){this.level=t,this.resolution=r,this.scale=o,this.origin=i,this.first=e,this.last=s,this.size=n,this.norm=l,this.worldStart=h,this.worldEnd=a,this.worldSize=u,this.wrap=m;}static create(o,s,n=null){const h=S$C(o.spatialReference),a=i$v(o.origin.x,o.origin.y),u=i$v(o.size[0]*s.resolution,o.size[1]*s.resolution),m=i$v(-1/0,-1/0),g=i$v(1/0,1/0),w=i$v(1/0,1/0);r$1G(n)&&(e$d(m,Math.max(0,Math.floor((n.xmin-a[0])/u[0])),Math.max(0,Math.floor((a[1]-n.ymax)/u[1]))),e$d(g,Math.max(0,Math.floor((n.xmax-a[0])/u[0])),Math.max(0,Math.floor((a[1]-n.ymin)/u[1]))),e$d(w,g[0]-m[0]+1,g[1]-m[1]+1));const{cols:c,rows:d}=s;let f,F,z,p;return !n&&c&&d&&(e$d(m,0,0),e$d(g,c-1,d-1),e$d(w,c,d)),o.isWrappable?(f=i$v(Math.ceil(Math.round((h.valid[1]-h.valid[0])/s.resolution)/o.size[0]),w[1]),F=i$v(Math.floor((h.origin[0]-a[0])/u[0]),m[1]),z=i$v(f[0]+F[0]-1,g[1]),p=!0):(F=m,z=g,f=w,p=!1),new l$m(s.level,s.resolution,s.scale,a,m,g,w,u,F,z,f,p)}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return (t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return (this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,o=!1){n$B.set(r);const i=o?n$B.col:this.denormalizeCol(n$B.col,n$B.world),e=n$B.row;return s$o(t,this.getXForColumn(i),this.getYForRow(e+1),this.getXForColumn(i+1),this.getYForRow(e)),t}getTileCoords(t,r,o=!1){n$B.set(r);const i=o?n$B.col:this.denormalizeCol(n$B.col,n$B.world);return Array.isArray(t)?e$d(t,this.getXForColumn(i),this.getYForRow(n$B.row)):(t.x=this.getXForColumn(i),t.y=this.getYForRow(n$B.row)),t}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class l$l{constructor(){this.spans=[];}acquire(o){this.lodInfo=o;}release(){this.lodInfo=null,this.spans.length=0;}forEach(o,l){const{spans:s,lodInfo:t}=this,{level:e}=t;if(0!==s.length)for(const{row:r,colFrom:n,colTo:c}of s)for(let s=n;s<=c;s++)o.call(l,e,r,t.normalizeCol(s),t.getWorldForColumn(s));}}l$l.pool=new e$1I(l$l);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class o$g{constructor(o,s,t){this.row=o,this.colFrom=s,this.colTo=t;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$u=new e$e("0/0/0/0");class n$A{constructor(e,t,o,l,s,i,n,r){this.x=e,this.ymin=t,this.ymax=o,this.invM=l,this.leftAdjust=s,this.rightAdjust=i,this.leftBound=n,this.rightBound=r;}static create(e,t){e[1]>t[1]&&([e,t]=[t,e]);const[o,l]=e,[s,i]=t,r=s-o,a=i-l,h=0!==a?r/a:0,c=(Math.ceil(l)-l)*h,f=(Math.floor(l)-l)*h;return new n$A(o,Math.floor(l),Math.ceil(i),h,r<0?c:f,r<0?f:c,r<0?s:o,r<0?o:s)}incrRow(){this.x+=this.invM;}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const r$f=[[0,0],[0,0],[0,0],[0,0]],a$u=1e-6;class h$f{constructor(e,o=null){this.tileInfo=e,this.fullExtent=o,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const l=e.lods.slice();l.sort((function(e,t){return t.scale-e.scale}));const s=this._lodInfos=l.map((l=>l$m.create(e,l,o)));l.forEach(((e,t)=>{this._infoByLevel[e.level]=s[t],this._infoByScale[e.scale]=s[t],this.scales[t]=e.scale;}),this),this._wrap=e.isWrappable;}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel["number"==typeof e?e:e.level]}getTileBounds(e,t,o=!1){i$u.set(t);const l=this._infoByLevel[i$u.level];return l?l.getTileBounds(e,i$u,o):e}getTileCoords(e,t,o=!1){i$u.set(t);const l=this._infoByLevel[i$u.level];return l?l.getTileCoords(e,i$u,o):e}getTileCoverage(e,t=192,l="closest"){const i="closest"===l?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),a=l$l.pool.acquire(i),h=this._wrap;let c,f,u,m=1/0,g=-1/0;const d=a.spans;r$f[0][0]=r$f[0][1]=r$f[1][1]=r$f[3][0]=-t,r$f[1][0]=r$f[2][0]=e.size[0]+t,r$f[2][1]=r$f[3][1]=e.size[1]+t;for(const o of r$f)e.toMap(o,o),o[0]=i.getColumnForX(o[0]),o[1]=i.getRowForY(o[1]);const y=[];let _=3;for(let o=0;o<4;o++){if(r$f[o][1]===r$f[_][1]){_=o;continue}const e=n$A.create(r$f[o],r$f[_]);m=Math.min(e.ymin,m),g=Math.max(e.ymax,g),void 0===y[e.ymin]&&(y[e.ymin]=[]),y[e.ymin].push(e),_=o;}if(null==m||null==g||g-m>100)return null;let v=[];for(c=m;c<g;){null!=y[c]&&(v=v.concat(y[c])),f=1/0,u=-1/0;for(let e=v.length-1;e>=0;e--){const t=v[e];f=Math.min(f,t.getLeftCol()),u=Math.max(u,t.getRightCol());}if(f=Math.floor(f),u=Math.floor(u),c>=i.first[1]&&c<=i.last[1])if(h)if(i.size[0]<i.worldSize[0]){const e=Math.floor(u/i.worldSize[0]);for(let t=Math.floor(f/i.worldSize[0]);t<=e;t++)d.push(new o$g(c,Math.max(i.getFirstColumnForWorld(t),f),Math.min(i.getLastColumnForWorld(t),u)));}else d.push(new o$g(c,f,u));else f>i.last[0]||u<i.first[0]||(f=Math.max(f,i.first[0]),u=Math.min(u,i.last[0]),d.push(new o$g(c,f,u)));c+=1;for(let e=v.length-1;e>=0;e--){const t=v[e];t.ymax>=c?t.incrRow():v.splice(e,1);}}return a}getTileParentId(e){i$u.set(e);const t=this._infoByLevel[i$u.level],o=this._lodInfos.indexOf(t)-1;return o<0?null:(this._getTileIdAtLOD(i$u,this._lodInfos[o],i$u),i$u.id)}getTileResolution(e){const t=this._infoByLevel["object"==typeof e?e.level:e];return t?t.resolution:-1}getTileScale(e){const t=this._infoByLevel[e.level];return t?t.scale:-1}intersects(e,t){i$u.set(t);const o=this._infoByLevel[i$u.level],l=e.lodInfo;if(l.resolution>o.resolution){this._getTileIdAtLOD(i$u,l,i$u);const t=l.denormalizeCol(i$u.col,i$u.world);for(const o of e.spans)if(o.row===i$u.row&&o.colFrom<=t&&o.colTo>=t)return !0}if(l.resolution<o.resolution){const[t,s,n,r]=e.spans.reduce(((e,t)=>(e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e)),[1/0,-1/0,1/0,-1/0]),a=o.denormalizeCol(i$u.col,i$u.world),h=l.getColumnForX(o.getXForColumn(a)),c=l.getRowForY(o.getYForRow(i$u.row)),f=l.getColumnForX(o.getXForColumn(a+1))-1,u=l.getRowForY(o.getYForRow(i$u.row+1))-1;return !(h>r||f<n||c>s||u<t)}const s=l.denormalizeCol(i$u.col,i$u.world);return e.spans.some((e=>e.row===i$u.row&&e.colFrom<=s&&e.colTo>=s))}normalizeBounds(t,o,l){if(t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],this._wrap){const o=S$C(this.tileInfo.spatialReference),s=-l*(o.valid[1]-o.valid[0]);t[0]+=s,t[2]+=s;}return t}getSmallestInfoForScale(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>t[0])return this._infoByScale[t[0]];for(let o=1;o<t.length-1;o++)if(e>t[o]+a$u)return this._infoByScale[t[o-1]];return this._infoByScale[t[t.length-1]]}getClosestInfoForScale(e){const t=this.scales;return this._infoByScale[e]||(e=t.reduce(((t,o)=>Math.abs(o-e)<Math.abs(t-e)?o:t),t[0])),this._infoByScale[e]}scaleToLevel(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let o=t.length-1;o>=0;o--)if(e<t[o]){if(o===t.length-1)return this._infoByScale[t[t.length-1]].level;return this._infoByScale[t[o]].level+(t[o]-e)/(t[o]-t[o+1])}return this._infoByScale[t[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,t,o){const l=this._infoByLevel[o.level];return e.set(o),t.resolution<l.resolution?null:(t.resolution===l.resolution||(e.level=t.level,e.col=Math.floor(o.col*l.resolution/t.resolution+.01),e.row=Math.floor(o.row*l.resolution/t.resolution+.01)),e)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$z(e,t){return e.length=0,t.forEach((t=>e.push(t))),e}const u$d=new Set,c$t=[],a$t=new Map,h$e=[0,0];let l$k=class extends p$33{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null;}initialize(){const{concurrency:e,process:t,strategy:s}=this;this._queue=new l$o({concurrency:e,process:(e,s)=>{const r=this._keyToItem.get(e);return t(r,{signal:s})},peeker:"scale-first"===s?e=>this._peekByScaleFirst(e):e=>this._peekByCenterFirst(e)});}destroy(){this.clear(),this._queue.destroy(),this._queue=null;}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t);}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating");}has(e){return "string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause();}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const s=this._queue.push(t),r=()=>{this._keyToItem.delete(t),this.notifyChange("updating");};return this._keyToItem.set(t,e),s.then(r,r),this.notifyChange("updating"),s}reset(){this._queue.reset();}resume(){this._queue.resume();}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let s=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach((e=>{const t=this._keyToItem.get(e),o=this.tileInfoView.getTileScale(t.key);a$t.has(o)||(a$t.set(o,[]),s=Math.max(o,s),r=Math.min(o,r)),a$t.get(o).push(t.key),u$d.add(o);}));let o=this.state.scale;a$t.has(o)||(n$z(c$t,u$d),c$t.sort(((e,t)=>e-t)),o=c$t.reduce(((e,t)=>Math.abs(t-o)<Math.abs(e-o)?t:e),c$t[0])),o=Math.min(o,s),o=Math.max(o,r);const i=a$t.get(o),h=t.getClosestInfoForScale(o),l=h.getColumnForX(this.state.center[0]),p=h.getRowForY(this.state.center[1]);return i.sort(((e,t)=>{const s=h.denormalizeCol(e.col,e.world),r=h.denormalizeCol(t.col,t.world);return Math.sqrt((l-s)*(l-s)+(p-e.row)*(p-e.row))-Math.sqrt((l-r)*(l-r)+(p-t.row)*(p-t.row))})),u$d.clear(),a$t.clear(),i[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,s=this.state.center;let r=Number.POSITIVE_INFINITY,i=null;return e.forEach((e=>{const n=this._keyToItem.get(e);t.getTileCoords(h$e,n.key);const u=d$j(h$e,s);u<r&&(r=u,i=n.key);})),i.id}};e$1_([d$1S({constructOnly:!0})],l$k.prototype,"concurrency",void 0),e$1_([d$1S({constructOnly:!0})],l$k.prototype,"process",void 0),e$1_([d$1S()],l$k.prototype,"state",void 0),e$1_([d$1S({constructOnly:!0})],l$k.prototype,"strategy",void 0),e$1_([d$1S({constructOnly:!0})],l$k.prototype,"tileInfoView",void 0),e$1_([d$1S({readOnly:!0})],l$k.prototype,"updating",null),l$k=e$1_([i$2w("esri.views.2d.tiling.TileQueue")],l$k);const p$p=l$k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$f{constructor(e,t,i){this.maxSize=e,this.tileInfoView=t,this.removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[];}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const t=this._tilePerId.get(e);if(!t)return null;const s=t.key.level,r=this._tileKeysPerLevel[s];i$t(this._tilePerId,e);for(let i=0;i<r.length;i++)if(r[i].id===e){r.splice(i,1);break}return t.visible=!0,t}add(e){e.visible=!1;const t=e.key,i=t.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,e);const s=t.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(t);}prune(e,t,i){let s=this._tilePerId.size;if(s<=this.maxSize)return;let r=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&r>=0;)r!==e&&(s=this._pruneAroundCenterTile(s,t,i,r)),r--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,t,i,e));}_pruneAroundCenterTile(t,i,s,r){const l=this._tileKeysPerLevel[r];if(!l||0===l.length)return t;const{size:n,origin:h}=this.tileInfoView.tileInfo,o=s*n[0],u=s*n[1],d=[0,0],_=[0,0];for(l.sort(((t,s)=>(d[0]=h.x+o*(t.col+.5),d[1]=h.y-u*(t.row+.5),_[0]=h.x+o*(s.col+.5),_[1]=h.y-u*(s.row+.5),q$4(d,i)-q$4(_,i))));l.length>0;){const e=l.pop();if(this._removeTile(e.id),--t===this.maxSize)break}return t}_removeTile(e){const t=this._tilePerId.get(e);this.removedFunc&&this.removedFunc(t),i$t(this._tilePerId,e);}}function i$t(e,t){e.delete(t);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$s=new e$e(0,0,0,0),h$d=new Map,o$f=[],c$s=[];class r$e{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.resampling=null==e.resampling||!!e.resampling,e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),null!=e.buffer&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new t$f(e.cacheSize,this.tileInfoView,(e=>{this.releaseTile(e);})));}destroy(){this.tileIndex.clear();}update(e){const{resampling:i,tileIndex:t}=this,l=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(c$s.length=0,o$f.length=0,h$d.clear(),!l)return;const{minScale:r,maxScale:n}=this.tileInfoView.tileInfo,{spans:f,lodInfo:d}=l,{level:u}=d,{scale:p,center:g,resolution:y}=e.state,I=!e.stationary&&p>this._previousScale;if(this._previousScale=p,this.tiles.length=0,!i&&(p>r||p<n))return this.tiles.length=0,h$d.clear(),t.forEach((e=>{this.releaseTile(e);})),t.clear(),c$s.length=0,o$f.length=0,h$d.clear(),l$l.pool.release(l),!0;t.forEach((e=>e.visible=!0));let T=0,_=0;if(f.length>0)for(const{row:s,colFrom:o,colTo:c}of f)for(let e=o;e<=c;e++){T++;const i=a$s.set(u,s,d.normalizeCol(e),d.getWorldForColumn(e)).id;if(t.has(i)){const e=t.get(i);e.isReady?(h$d.set(i,e),_++):I||this._addParentTile(i,h$d);}else {let e;if(this._tileCache&&this._tileCache.has(i)){if(e=this._tileCache.pop(i),this.tileIndex.set(i,e),e.isReady){h$d.set(i,e),_++;continue}}else e=this.acquireTile(a$s),this.tileIndex.set(i,e);I||this._addParentTile(i,h$d);}}const m=_===T;t.forEach(((e,i)=>{if(a$s.set(i),h$d.has(i))return;const t=this.tileInfoView.intersects(l,a$s),s="purge"===this.cachePolicy?a$s.level!==u:a$s.level>u;!t||!I&&m?!s&&t||o$f.push(i):e.isReady?s&&"purge"===this.cachePolicy&&this._hasReadyAncestor(a$s,u)?o$f.push(i):c$s.push(i):s&&o$f.push(i);}));for(const s of c$s){const e=t.get(s);e&&e.isReady&&h$d.set(s,e);}for(const s of o$f){const e=t.get(s);this._tileCache?this._tileCache.add(e):this.releaseTile(e),t.delete(s);}return h$d.forEach((e=>this.tiles.push(e))),t.forEach((e=>{h$d.has(e.key.id)||(e.visible=!1);})),this._tileCache&&this._tileCache.prune(u,g,y),l$l.pool.release(l),h$d.clear(),m}clear(e=!0){const{tileIndex:i}=this;e&&i.forEach((e=>{this.releaseTile(e);})),i.clear();}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e);}_addParentTile(e,i){let t=e,s=null;for(;t=this.tileInfoView.getTileParentId(t),t;)if(this.tileIndex.has(t)){if(s=this.tileIndex.get(t),s&&s.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if(this._tileCache&&this._tileCache.has(t)&&(s=this._tileCache.pop(t),this.tileIndex.set(t,s),s&&s.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(t,s){const l=u$1D();this.tileInfoView.getTileBounds(l,t,!0);for(const a of this.tileIndex.values())if(a.isReady&&a.key.level>=s&&a.key.level<t.level){const t=u$1D();if(this.tileInfoView.getTileBounds(t,a.key,!0),q$h(t,l))return !0}return !1}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$e,o$e,r$d,n$y={exports:{}};t$e=n$y,o$e=function(){function t(t,r,a,f,e){o(t,r,a||0,f||t.length-1,e||n);}function o(t,n,a,f,e){for(;f>a;){if(f-a>600){var h=f-a+1,i=n-a+1,u=Math.log(h),M=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*M*(h-M)/h)*(i-h/2<0?-1:1);o(t,n,Math.max(a,Math.floor(n-i*M/h+c)),Math.min(f,Math.floor(n+(h-i)*M/h+c)),e);}var s=t[n],x=a,p=f;for(r(t,a,n),e(t[f],s)>0&&r(t,a,f);x<p;){for(r(t,x,p),x++,p--;e(t[x],s)<0;)x++;for(;e(t[p],s)>0;)p--;}0===e(t[a],s)?r(t,a,p):r(t,++p,f),p<=n&&(a=p+1),n<=p&&(f=p-1);}}function r(t,o,r){var n=t[o];t[o]=t[r],t[r]=n;}function n(t,o){return t<o?-1:t>o?1:0}return t},void 0!==(r$d=o$e())&&(t$e.exports=r$d);const a$r=n$y.exports;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$s(t,n){if(!(this instanceof i$s))return new i$s(t,n);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&("function"==typeof n?this.toBBox=n:this._initFormat(n)),this.clear();}function n$x(t,i,n){if(!n)return i.indexOf(t);for(var h=0;h<i.length;h++)if(n(t,i[h]))return h;return -1}function h$c(t,i){a$q(t,0,t.children.length,i,t);}function a$q(t,i,n,h,a){a||(a=x$4(null)),a.minX=1/0,a.minY=1/0,a.maxX=-1/0,a.maxY=-1/0;for(var e,o=i;o<n;o++)e=t.children[o],r$c(a,t.leaf?h(e):e);return a}function r$c(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function e$c(t,i){return t.minX-i.minX}function o$d(t,i){return t.minY-i.minY}function s$n(t){return (t.maxX-t.minX)*(t.maxY-t.minY)}function l$j(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m$g(t,i){return (Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function c$r(t,i){var n=Math.max(t.minX,i.minX),h=Math.max(t.minY,i.minY),a=Math.min(t.maxX,i.maxX),r=Math.min(t.maxY,i.maxY);return Math.max(0,a-n)*Math.max(0,r-h)}function u$c(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function f$7(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function x$4(t){return {children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d$f(i,n,h,a,r){for(var e,o=[n,h];o.length;)(h=o.pop())-(n=o.pop())<=a||(e=n+Math.ceil((h-n)/a/2)*a,a$r(i,e,n,h,r),o.push(n,e,e,h));}i$s.prototype={all:function(){return this._all(this.data,[])},search:function(t){var i=this.data,n=[],h=this.toBBox;if(!f$7(t,i))return n;for(var a,r,e,o,s=[];i;){for(a=0,r=i.children.length;a<r;a++)e=i.children[a],f$7(t,o=i.leaf?h(e):e)&&(i.leaf?n.push(e):u$c(t,o)?this._all(e,n):s.push(e));i=s.pop();}return n},collides:function(t){var i=this.data,n=this.toBBox;if(!f$7(t,i))return !1;for(var h,a,r,e,o=[];i;){for(h=0,a=i.children.length;h<a;h++)if(r=i.children[h],f$7(t,e=i.leaf?n(r):r)){if(i.leaf||u$c(t,e))return !0;o.push(r);}i=o.pop();}return !1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}var h=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===h.height)this._splitRoot(this.data,h);else {if(this.data.height<h.height){var a=this.data;this.data=h,h=a;}this._insert(h,this.data.height-h.height-1,!0);}else this.data=h;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=x$4([]),this},remove:function(t,i){if(!t)return this;for(var h,a,r,e,o=this.data,s=this.toBBox(t),l=[],m=[];o||l.length;){if(o||(o=l.pop(),a=l[l.length-1],h=m.pop(),e=!0),o.leaf&&-1!==(r=n$x(t,o.children,i)))return o.children.splice(r,1),l.push(o),this._condense(l),this;e||o.leaf||!u$c(o,s)?a?(h++,o=a.children[h],e=!1):o=null:(l.push(o),m.push(h),h=0,a=o,o=o.children[0]);}return this},toBBox:function(t){return t},compareMinX:e$c,compareMinY:o$d,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},_build:function(t,i,n,a){var r,e=n-i+1,o=this._maxEntries;if(e<=o)return h$c(r=x$4(t.slice(i,n+1)),this.toBBox),r;a||(a=Math.ceil(Math.log(e)/Math.log(o)),o=Math.ceil(e/Math.pow(o,a-1))),(r=x$4([])).leaf=!1,r.height=a;var s,l,m,c,u=Math.ceil(e/o),f=u*Math.ceil(Math.sqrt(o));for(d$f(t,i,n,f,this.compareMinX),s=i;s<=n;s+=f)for(d$f(t,s,m=Math.min(s+f-1,n),u,this.compareMinY),l=s;l<=m;l+=u)c=Math.min(l+u-1,m),r.children.push(this._build(t,l,c,a-1));return h$c(r,this.toBBox),r},_chooseSubtree:function(t,i,n,h){for(var a,r,e,o,l,c,u,f;h.push(i),!i.leaf&&h.length-1!==n;){for(u=f=1/0,a=0,r=i.children.length;a<r;a++)l=s$n(e=i.children[a]),(c=m$g(t,e)-l)<f?(f=c,u=l<u?l:u,o=e):c===f&&l<u&&(u=l,o=e);i=o||i.children[0];}return i},_insert:function(t,i,n){var h=this.toBBox,a=n?t:h(t),e=[],o=this._chooseSubtree(a,this.data,i,e);for(o.children.push(t),r$c(o,a);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(a,e,i);},_split:function(t,i){var n=t[i],a=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,a);var e=this._chooseSplitIndex(n,r,a),o=x$4(n.children.splice(e,n.children.length-e));o.height=n.height,o.leaf=n.leaf,h$c(n,this.toBBox),h$c(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o);},_splitRoot:function(t,i){this.data=x$4([t,i]),this.data.height=t.height+1,this.data.leaf=!1,h$c(this.data,this.toBBox);},_chooseSplitIndex:function(t,i,n){var h,r,e,o,l,m,u,f;for(m=u=1/0,h=i;h<=n-i;h++)o=c$r(r=a$q(t,0,h,this.toBBox),e=a$q(t,h,n,this.toBBox)),l=s$n(r)+s$n(e),o<m?(m=o,f=h,u=l<u?l:u):o===m&&l<u&&(u=l,f=h);return f},_chooseSplitAxis:function(t,i,n){var h=t.leaf?this.compareMinX:e$c,a=t.leaf?this.compareMinY:o$d;this._allDistMargin(t,i,n,h)<this._allDistMargin(t,i,n,a)&&t.children.sort(h);},_allDistMargin:function(t,i,n,h){t.children.sort(h);var e,o,s=this.toBBox,m=a$q(t,0,i,s),c=a$q(t,n-i,n,s),u=l$j(m)+l$j(c);for(e=i;e<n-i;e++)o=t.children[e],r$c(m,t.leaf?s(o):o),u+=l$j(m);for(e=n-i-1;e>=i;e--)o=t.children[e],r$c(c,t.leaf?s(o):o),u+=l$j(c);return u},_adjustParentBBoxes:function(t,i,n){for(var h=n;h>=0;h--)r$c(i[h],t);},_condense:function(t){for(var i,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():h$c(t[n],this.toBBox);},_initFormat:function(t){var i=["return a"," - b",";"];this.compareMinX=new Function("a","b",i.join(t[0])),this.compareMinY=new Function("a","b",i.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};");}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class n$w{constructor(t,e){this.key=new e$e(0,0,0,0),this.bounds=u$1D(),this.objectIds=new Set,this.key.set(e);const s=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=s.resolution,this.scale=s.scale,this.level=s.level;}get id(){return this.key.id}get extent(){return M$r.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return {originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const e=this.key.getChildKeys(),i=t$1y.acquire();for(let t=0;t<e.length;t++)i[t]=new n$w(this.tileInfoView,e[t]);return i}getQuantizationParameters(){return a$1f.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$v={added:[],removed:[]},r$b=new Set,d$e=new e$e(0,0,0,0);class l$i extends n$2y{constructor(e){super(),this._tiles=new Map,this._index=i$s(9,s$2l("esri-csp-restrictions")?e=>({minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e;}destroy(){this.clear();}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear();}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const t={added:[],removed:[]};for(const s of e.added)if(!this.has(s)){const e=new n$w(this.tileScheme,s);this._tiles.set(s,e),this._index.insert(e),t.added.push(e);}for(const s of e.removed)if(this.has(s)){const e=this.get(s);this._tiles.delete(s),this._index.remove(e),t.removed.push(e);}this.tiles.length=0,this._tiles.forEach((e=>this.tiles.push(e))),(t.added.length||t.removed.length)&&this.emit("update",t);}setViewState(e){const t=this.tileScheme.getTileCoverage(e,0);if(!t)return;const{spans:s,lodInfo:h}=t,{level:l}=h;if(s.length>0)for(const{row:o,colFrom:a,colTo:m}of s)for(let e=a;e<=m;e++){const t=d$e.set(l,o,h.normalizeCol(e),h.getWorldForColumn(e)).id;if(r$b.add(t),!this.has(t)){const e=new n$w(this.tileScheme,t);this._tiles.set(t,e),this._index.insert(e),this.tiles.push(e),n$v.added.push(e);}}for(let i=this.tiles.length-1;i>=0;i--){const e=this.tiles[i];r$b.has(e.id)||(this._tiles.delete(e.id),this.tiles.splice(i,1),this._index.remove(e),n$v.removed.push(e));}(n$v.added.length||n$v.removed.length)&&this.emit("update",n$v),l$l.pool.release(t),r$b.clear(),n$v.added.length=0,n$v.removed.length=0;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$m=s=>-1!==s.indexOf("Brush");class e$b{constructor(){this._names=new Map;}begin(e){this._names.has(e)||(this._names.set(e,!1),s$m(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`));}end(s){this._names.has(s)&&!this._names.get(s)&&(this._names.set(s,!0),performance.mark(`Esri.${s}.End`));}record(s){this._names.has(s)||(this._names.set(s,!0),performance.mark(`Esri.${s}`));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const N$2=s$2h.getLogger("esri.views.MapView");function q$2(t){return t&&"esri.Viewpoint"===t.declaredClass}const L$3=160;let A=class extends(a$N(P$6)){constructor(t){super(t),this._stationaryTimer=null,this.frameTask=new a$C(this),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.initialExtent=null,this.labelManager=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.resizeAlign="center",this.supportsGround=!1,this.timeline=new e$b,this.type="2d",this.constraints=new y$9,this.padding={top:0,right:0,bottom:0,left:0};const e=this.handles,i=()=>this.notifyChange("updating");e.add([this.watch("viewpoint",(()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(L$3);}),!0),this.on("resize",(t=>this._resizeHandler(t))),this.watch("animationManager.animation",(t=>{this.animation=t;})),this.allLayerViews.on("change",(()=>{i(),e.remove("map-view-base-layerViewsUpdating"),e.add(this.allLayerViews.map((t=>t.watch("updating",i))),"map-view-base-layerViewsUpdating");}))],"map-view-base");}destroy(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null);}set animation(t){const e=this._get("animation");if(t===e)return;if(e&&e.stop(),!t||t.isFulfilled())return void this._set("animation",null);this._set("animation",t),this.frameTask.animationInProgress=!0;const i=()=>{t===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1;};t.when(i,i);}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:e}=this.state.paddedViewState;return new b$O({x:t[0],y:t[1],spatialReference:e})}set center(t){if(null==t)return;if(!this._normalizeInput(t))return void N$2.error("#center",`incompatible spatialReference ${JSON.stringify(t.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!this.ready)return this._set("center",t),void this.notifyChange("initialExtentRequired");const e=this.viewpoint;wt(e,e,t),this.viewpoint=e;}set constraints(t){const e=this._get("constraints");e&&(this.handles.remove("map-view-base-constraints"),e.destroy()),this._set("constraints",t),t&&(t.view=this,this.ready&&(this.state.viewpoint=t.fit(this.state.paddedViewState.viewpoint)),this.handles.add(t.on("update",(()=>{this.ready&&this.state&&(this.state.viewpoint=t.fit(this.state.paddedViewState.viewpoint));})),"map-view-base-constraints"));}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(t){if(null==t)return;const e=this._normalizeInput(t);if(!e)return void N$2.error("#center",`incompatible spatialReference ${JSON.stringify(t.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!e.width||!e.height)return void N$2.error("#extent","invalid extent size");if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");const i=this.viewpoint;tt(i,i,e,this.size,{constraints:this.constraints}),this.viewpoint=i;}get graphicsTileStore(){return new l$i(this.featuresTilingScheme)}get initialExtentRequired(){const{extent:t,center:e,scale:i,viewpoint:s,zoom:n}=this;return !this.get("map.initialViewProperties.viewpoint")&&(!t&&((!e||0===i&&-1===n)&&!s))}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t);}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const e=this.viewpoint;kt(e,e,t),this.viewpoint=e;}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",-1);const e=this._get("extent");return e&&(this._set("extent",null),this._set("center",e.center)),void this.notifyChange("initialExtentRequired")}const e=this.viewpoint;Rt(e,e,t),this.viewpoint=e;}get stationary(){return !(this.animation||this.navigating||this._get("resizing")||this._stationaryTimer)}get updating(){return !this.destroyed&&(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some((t=>!t.destroyed&&!("layerViews"in t)&&!0===t.updating)))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const t=this.state.paddedViewState;return t&&t.viewpoint.clone()}set viewpoint(t){if(null==t)return;const i=this._normalizeInput(t);if(!i)return void(!t.scale||isNaN(t.scale)?N$2.error("#viewpoint",`invalid scale value of ${t.scale}`):t$1O(t.targetGeometry)?N$2.error("#viewpoint","geometry not defined"):N$2.error("#viewpoint",`incompatible spatialReference ${JSON.stringify(t.targetGeometry.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`));if(!this.ready)return this._set("viewpoint",i),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");const s=new u$p({targetGeometry:new b$O,scale:0,rotation:0});Z$2(s,i),this.constraints.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this.frameTask.requestFrame(),this._set("viewpoint",s);}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(t){if(null==t)return;if(!this.ready){this.notifyChange("initialExtentRequired"),this._set("zoom",t),this._set("scale",0);const e=this._get("extent");e&&(this._set("extent",null),this._set("center",e.center));}if(!this.constraints.effectiveLODs)return;const e=this.viewpoint;Rt(e,e,this.constraints.zoomToScale(t)),this.viewpoint=e,this._set("zoom",this.constraints.scaleToZoom(this.scale));}goTo(t,e){if(t)return this.animation&&(this.animation=null),this._createAnimation(),d$1H(this,"ready",e&&e.signal).then((()=>{const i={animate:!0,...e},s=ht(t,this);return this.animation.update(s),this._gotoTask={},i.animate?this._gotoAnimated(s,i):this._gotoImmediate(s,i)}));N$2.error("#goTo()","target cannot be null or undefined");}hitTest(t){return Promise.reject("Should be implemented by subclasses")}popupHitTest(t){return this.hitTest(t).then((e=>({...e,mapPoint:this.toMap(t)})))}toMap(t){if(!this.ready)return null;const e=[0,0],[i,s]=this.state.toMap(e,[t.x,t.y]),n=this.spatialReference;return new b$O({x:i,y:s,spatialReference:n})}isTileInfoRequired(){return !0}toScreen(t){if(!this.ready)return null;const e=this._normalizeInput(t),i=[e.x,e.y];return this.state.toScreen(i,i),c$2A(i[0],i[1])}pixelSizeAt(){return this.ready?this.state.resolution:(N$2.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}requestUpdate(){this.ready&&this.frameTask.requestUpdate();}getDefaultSpatialReference(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null}isSpatialReferenceSupported(t,e){return !(!e&&!this._get("ready"))||null!==this._getDefaultViewpoint()}importLayerView(t){return l$s.importLayerView(t)}hasLayerViewModule(t){return l$s.hasLayerViewModule(t)}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new n$N),this.animation}_cancellableGoTo(t,e,i){const s=()=>t===this._gotoTask,n=i.then((()=>{s()&&(this.animation=null);})).catch((t=>{throw s()&&(this.animation=null,e.done||(e.stop(),this.frameTask.animationInProgress=!1)),t})),a=new Promise((t=>t(n)));return e.when().catch((()=>{s()&&a.cancel&&a.cancel();})),a}_gotoImmediate(t,e){const s=this._gotoTask,n=this.animation,a=t.then((t=>{if(h$1x(e),s!==this._gotoTask)throw new s$29("view:goto-interrupted","Goto was interrupted");this.viewpoint=n.target=t,n.finish();}));return this._cancellableGoTo(s,n,a)}_gotoAnimated(t,e){const s=this._gotoTask,n=this.animation,a=t.then((t=>{if(h$1x(e),s!==this._gotoTask)throw new s$29("view:goto-interrupted","Goto was interrupted");return n.update(t),this.animationManager.animate(n,this.viewpoint,e),n.when().then((()=>{}),(()=>{}))}));return this._cancellableGoTo(s,n,a)}_resizeHandler(t){const e=this.state;if(!e)return;let i=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();e.size=[t.width,t.height],Gt(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i;}_startup(){const t=this._getDefaultViewpoint();this.constraints.view=this,this.constraints.fit(t),this._set("animationManager",new d$i({view:this})),this._set("state",new m$h({padding:this._get("padding"),size:this.size,viewpoint:t})),this._set("featuresTilingScheme",new h$f(j$6.create({spatialReference:this.spatialReference,size:512,numLODs:36}))),this._set("ready",!0),this.frameTask&&this.frameTask.start();}_teardown(){this.frameTask&&this.frameTask.stop(),this._set("ready",!1),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);const{center:[t,e],spatialReference:i,rotation:s,scale:n}=this.state.paddedViewState,a=new b$O({x:t,y:e,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",a),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("spatialReference",i),this.constraints.view=null,this.animationManager.destroy(),this._set("animationManager",null),this._set("state",null),this.animation=null;}_flipStationary(t){return null!==this._stationaryTimer||(this._stationaryTimer=setTimeout((()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<L$3&&(this._stationaryTimer=this._flipStationary(t));}),t)),this._stationaryTimer}_normalizeInput(t,e=this.spatialReference){const i=t&&t.targetGeometry||t;return e?i?e.equals(i.spatialReference)?t:g$W(i,e)?q$2(t)?(t.targetGeometry=M$s(i,e),t):M$s(i,e):null:null:t}_getDefaultViewpoint(){const t=this.constraints,i={zoom:this._get("zoom"),scale:this._get("scale"),center:this._normalizeInput(this._get("center")),extent:this._normalizeInput(this._get("extent")),rotation:this._get("rotation"),viewpoint:this._normalizeInput(this._get("viewpoint")),spatialReference:this._userSpatialReference};t.effectiveLODs?-1!==i.zoom&&(i.scale=t.zoomToScale(i.zoom)):i.zoom=-1;let s=null,n=null,r=0;const o=i.viewpoint&&i.viewpoint.rotation,l=i.viewpoint&&i.viewpoint.targetGeometry;r$1G(l)&&("extent"===l.type?s=l:"point"===l.type&&(n=l,r=i.viewpoint.scale));const p=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent")),h=this._normalizeInput(this.initialExtent),d=i.extent||s||p||h,m=i.center||n||d&&d.center,c=this.get("map.initialViewProperties.viewpoint.scale"),u=i.scale||r||c||d&&J$1(d,this.size),g=this.get("map.initialViewProperties.viewpoint.rotation"),y=i.rotation||o||g||0;return m&&u?new u$p({targetGeometry:m,scale:u,rotation:y}):null}};e$1_([d$1S()],A.prototype,"_stationaryTimer",void 0),e$1_([d$1S()],A.prototype,"animation",null),e$1_([d$1S({readOnly:!0})],A.prototype,"animationManager",void 0),e$1_([d$1S({value:null,type:b$O,dependsOn:["state.id","ready"]})],A.prototype,"center",null),e$1_([d$1S({type:y$9})],A.prototype,"constraints",null),e$1_([d$1S({value:null,type:M$r,dependsOn:["state.id","ready"]})],A.prototype,"extent",null),e$1_([d$1S({readOnly:!0})],A.prototype,"featuresTilingScheme",void 0),e$1_([d$1S()],A.prototype,"fullOpacity",void 0),e$1_([d$1S({readOnly:!0})],A.prototype,"graphicsTileStore",null),e$1_([d$1S()],A.prototype,"graphicsView",void 0),e$1_([d$1S({type:M$r})],A.prototype,"initialExtent",void 0),e$1_([d$1S({dependsOn:["map.initialViewProperties?.viewpoint"]})],A.prototype,"initialExtentRequired",null),e$1_([d$1S()],A.prototype,"labelManager",void 0),e$1_([d$1S({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],A.prototype,"padding",null),e$1_([d$1S({type:Object})],A.prototype,"renderingOptions",void 0),e$1_([d$1S()],A.prototype,"resizeAlign",void 0),e$1_([d$1S({readOnly:!0,dependsOn:["state.id"]})],A.prototype,"resolution",null),e$1_([d$1S({value:0,type:Number,dependsOn:["state.id","ready"]})],A.prototype,"rotation",null),e$1_([d$1S({value:0,type:Number,dependsOn:["state.id","ready"]})],A.prototype,"scale",null),e$1_([d$1S({type:k$s,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],A.prototype,"spatialReference",void 0),e$1_([d$1S({readOnly:!0})],A.prototype,"state",void 0),e$1_([d$1S({dependsOn:["animation","navigating","resizing","_stationaryTimer"]})],A.prototype,"stationary",null),e$1_([d$1S({readOnly:!0})],A.prototype,"supportsGround",void 0),e$1_([d$1S({type:e$b,readOnly:!0})],A.prototype,"timeline",void 0),e$1_([d$1S({readOnly:!0})],A.prototype,"type",void 0),e$1_([d$1S({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],A.prototype,"updating",null),e$1_([d$1S({value:null,type:u$p,dependsOn:["state.id","ready"]})],A.prototype,"viewpoint",null),e$1_([d$1S({value:-1,dependsOn:["state.id"]})],A.prototype,"zoom",null),A=e$1_([i$2w("esri.views.MapViewBase")],A);const U=A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$d(t,r){switch(r){case"primary":return "touch"===t.pointerType||0===t.button;case"secondary":return "touch"!==t.pointerType&&2===t.button;case"tertiary":return "touch"!==t.pointerType&&1===t.button}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class a$p extends i$K{constructor(t,i){super(!0),this.view=t,this.registerIncoming("double-click",i,(t=>this._handleDoubleClick(t,i)));}_handleDoubleClick(t,a){t$d(t.data,"primary")&&(t.stopPropagation(),a?this.view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this.view.mapViewNavigation.zoomIn([t.data.x,t.data.y]));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$a extends i$K{constructor(t,e,a){super(!0),this.view=t,this.pointerType=e,this.registerIncoming("double-tap-drag",a,(t=>this._handleDoubleTapDrag(t)));}_handleDoubleTapDrag(t){const{data:e}=t,{pointerType:a}=e;if(a!==this.pointerType)return;t.stopPropagation();const{action:s,delta:i}=e,{view:r}=this,{mapViewNavigation:n}=r;switch(s){case"begin":{const{scale:t}=r;this._startScale=t,this._currentScale=t,this._previousDelta=i,n.begin();break}case"update":{if(this._previousDelta.y===i.y)return;this._previousDelta=i;const t=1.015**i.y,e=this._startScale*t,a=e/this._currentScale;n.setViewpointImmediate(a),this._currentScale=e;break}case"end":{const{constraints:t}=r,{effectiveLODs:e,snapToZoom:a}=t;if(!a||!e)return void n.end();const s=t.snapScale(this._currentScale),o=(i.y>0?Math.max(s,t.snapToPreviousScale(this._startScale)):Math.min(s,t.snapToNextScale(this._startScale)))/this._currentScale;n.zoom(o);break}}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$c{constructor(t){this.callbacks=t,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0);}handle(t){const s=t.data,i=s.pointers.size;switch(s.action){case"start":this.currentCount=i,this.emitStart(t);break;case"added":this.emitEnd(this.previousEvent),this.currentCount=i,this.emitStart(t);break;case"update":this.emitUpdate(t);break;case"removed":this.startEvent&&this.emitEnd(this.previousEvent),this.currentCount=i,this.emitStart(t);break;case"end":this.emitEnd(t),this.currentCount=0;}this.previousEvent=t;}emitStart(t){this.startEvent=t,this.callbacks.condition(this.currentCount,t)&&this.callbacks.start(this.currentCount,t,this.startEvent);}emitUpdate(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.update(this.currentCount,t,this.startEvent);}emitEnd(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.end(this.currentCount,t,this.startEvent),this.startEvent=null;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class n$u extends i$K{constructor(i,n,o){super(!0),this.view=i,this.pointerAction=n,this.registerIncoming("drag",o,(t=>this._handleDrag(t))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()));const e=this.view.mapViewNavigation;this.dragEventSeparator=new t$c({start:(t,i)=>{e.pan.begin(this.view,i.data),i.stopPropagation();},update:(t,i)=>{e.pan.update(this.view,i.data),i.stopPropagation();},end:(t,i)=>{e.pan.end(this.view,i.data),i.stopPropagation();},condition:(t,i)=>1===t&&t$d(i.data,this.pointerAction)});}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(t);}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class o$c extends i$K{constructor(a,o,r){super(!0),this.view=a,this.pointerAction=o;const e=this.view.mapViewNavigation;this.dragEventSeparator=new t$c({start:(t,a)=>{e.rotate.begin(this.view,a.data),a.stopPropagation();},update:(t,a)=>{e.rotate.update(this.view,a.data),a.stopPropagation();},end:(t,a)=>{e.rotate.end(),a.stopPropagation();},condition:(t,a)=>1===t&&t$d(a.data,this.pointerAction)}),this.registerIncoming("drag",r,(t=>this.dragEventSeparator.handle(t)));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$t(t){let n=t*t;return t<0&&(n*=-1),n}function a$o(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function i$r(a,i,o){const s=o,e=a.state,r=a.device,l="forward-down"===i.tiltDirection?1:-1,c=1;return "standard"===r.deviceType?(s.translation[0]=n$t(e.axes[0]),s.translation[1]=n$t(e.axes[1]),s.translation[2]=n$t(e.buttons[7])-n$t(e.buttons[6]),s.heading=n$t(e.axes[2]),s.tilt=n$t(e.axes[3])):"spacemouse"===r.deviceType&&(s.translation[0]=1.2*n$t(e.axes[0]),s.translation[1]=1.2*n$t(e.axes[1]),s.translation[2]=2*-n$t(e.axes[2]),s.heading=1.2*n$t(e.axes[5]),s.tilt=1.2*n$t(e.axes[3])),s.tilt*=l,d$1A(s.translation,s.translation,c),s}function s$l(t){return 0===t.translation[0]&&0===t.translation[1]&&0===t.translation[2]&&0===t.heading&&0===t.tilt&&0===t.zoom}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class l$h extends i$K{constructor(i){super(!0),this.view=i,this.frameTask=null,this.watchHandles=new u$1X,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",(t=>this.handleEvent(t))),this.handle.pause();}onInstall(t){super.onInstall(t),this.watchHandles.add([i$2i(this.view.navigation.gamepad,"enabled",(t=>{t?(this.handle.resume(),this.frameTask||(this.frameTask=A$s({update:t=>this.frameUpdate(t.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null));}))]);}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall();}handleEvent(t){const i=this.view.navigation.gamepad.device;i&&t.data.device!==i||this.currentDevice&&this.currentDevice!==t.data.device||("end"===t.data.action?(this.currentDevice=null,a$o(this.transformation)):(this.currentDevice=t.data.device,i$r(t.data,this.view.navigation.gamepad,this.transformation)));}frameUpdate(t){const i=this.transformation;if(s$l(i))return;const e=this.view.viewpoint.clone(),n=this.view.navigation.gamepad.velocityFactor,r=m$f*n*t;Ft(e,e,[i.translation[0]*r,-i.translation[1]*r]);const o=1+i.translation[2]*c$q*t,l=this.view.constraints.rotationEnabled?-i.heading*d$d*t:0,v=this.view.size,p=[v[0]/2,v[1]];St(e,e,o,l,p,v);const f=this.view.constraints.constrain(e,this.view.viewpoint);this.view.viewpoint=f;}}const d$d=.06,m$f=.7,c$q=6e-4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class i$q extends i$K{constructor(e,i,t){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",t,(e=>this._handleKeyDown(e))),this.registerIncoming("key-up",t,(e=>this._handleKeyUp(e))),this.registerIncoming("blur",t,(()=>this._handleBlur()));}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0);}_handleKeyUp(e){this._handleKey(e,!1);}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop());}_handleKey(e,i){const t=this._keyMap[e.data.key];if(this._pressed=null!=t,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),t){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown();}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation();}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class i$p extends i$K{constructor(e,i,t){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",t,(e=>this._handleKeyDown(e))),this.registerIncoming("key-up",t,(e=>this._handleKeyUp(e))),this.registerIncoming("blur",t,(()=>this._handleBlur()));}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0);}_handleKeyUp(e){this._handleKey(e,!1);}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop());}_handleKey(e,i){const t=e.modifiers;if(t.size>0&&!t.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[e.data.key];if(this._pressed=null!=s,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation();}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation();}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$b extends i$K{constructor(o,t,e){super(!0),this.view=o,this.keys=t,this._keysToZoomAction={},this.registerIncoming("key-down",e,(o=>this._handleKeyDown(o))),t.zoomIn.forEach((o=>this._keysToZoomAction[o]=0)),t.zoomOut.forEach((o=>this._keysToZoomAction[o]=1));}_handleKeyDown(o){this._handleKey(o);}_handleKey(o){const t=o.modifiers;if(t.size>0&&!t.has("Shift"))return;const{key:e}=o.data;if(!(e in this._keysToZoomAction))return;const i=this._keysToZoomAction[e],{mapViewNavigation:s}=this.view;let n=null;switch(i){case 0:n=s.zoomIn();break;case 1:n=s.zoomOut();break;default:return}s.begin(),n.then((()=>s.end())),o.stopPropagation();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$a=.6;class o$b extends i$K{constructor(e,t){super(!0),this.view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",t,(e=>this._handleMouseWheel(e)));}_handleMouseWheel(e){if(!this.view.navigation.mouseWheelZoomEnabled)return;if(e.preventDefault(),e.stopPropagation(),!this._canZoom)return;const o=this.view.mapViewNavigation,{x:n,y:i,deltaY:s}=e.data,a=1/t$a**(1/60*s),h=o.zoom(a,[n,i]);h&&(this._canZoom=!1,h.catch((()=>{})).then((()=>{this._canZoom=!0,o.end();})));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class a$n extends i$K{constructor(i){super(!0),this.view=i,this.registerIncoming("drag",(t=>this._handleDrag(t))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()));const a=this.view.mapViewNavigation;this.dragEventSeparator=new t$c({start:(t,i)=>{a.pinch.begin(this.view,i.data),i.stopPropagation();},update:(t,i)=>{a.pinch.update(this.view,i.data),i.stopPropagation();},end:(t,i)=>{a.pinch.end(this.view),i.stopPropagation();},condition:t=>t>=2});}_handleDrag(t){this.dragEventSeparator.handle(t);}stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$9(t){const n=t.native;return n?{buttons:n.buttons.map((t=>t.pressed?t.value?t.value:1:0)),axes:n.axes.map((n=>s$k(n,t.axisThreshold)))}:{buttons:[],axes:[]}}function n$s(t,n){if(t.axes.length!==n.axes.length)return !1;if(t.buttons.length!==n.buttons.length)return !1;for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==n.axes[e])return !1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==n.buttons[e])return !1;return !0}function e$9(t){for(let n=0;n<t.axes.length;n++)if(0!==t.axes[n])return !1;for(let n=0;n<t.buttons.length;n++)if(0!==t.buttons[n])return !1;return !0}function s$k(t,n){const e=Math.abs(t);return e<n?0:Math.sign(t)*(e-n)/(1-n)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class a$m{constructor(e,t){this.element=e,this.input=t,this._hasEventListeners=!1,this.onConnectGamepad=e=>{this.connectGamepad(e.gamepad);},this.onDisconnectGamepad=e=>{const t=e.gamepad,i=t.index,n=this.inputDevices[i];n&&(this.emitGamepadEvent(t,t$9(n),!1),this.inputDevices.splice(i,1),this.latestUpdate.splice(i,1),this.input.gamepad.devices.remove(n),this.ensurePollingState());},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const i="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=i&&n,this.supported&&(this.forEachGamepad((e=>this.connectGamepad(e))),window.addEventListener("gamepadconnected",this.onConnectGamepad),window.addEventListener("gamepaddisconnected",this.onDisconnectGamepad),this.ensurePollingState());}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this.onConnectGamepad),window.removeEventListener("gamepaddisconnected",this.onDisconnectGamepad));}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState());}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this.callback=e;}connectGamepad(e){const s=new i$D(e);"unknown"!==s.deviceType&&(this.inputDevices[e.index]=s,this.input.gamepad.devices.add(s)),this.ensurePollingState();}ensurePollingState(){this.eventsEnabled?this.startPolling():this.stopPolling();}startPolling(){null==this.frameTask&&(this.frameTask=A$s({update:()=>this.readGamepadState()}));}stopPolling(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array);}readGamepadState(){const e=document.hasFocus(),t=this.element.contains(document.activeElement),a="document"===this.input.gamepad.enabledFocusMode&&!e||"view"===this.input.gamepad.enabledFocusMode&&!t;this.forEachGamepad((e=>{const t=this.inputDevices[e.index];if(!t)return;const d=this.latestUpdate[e.index],o=t$9(t),r=a||e$9(o);if(d){if(d.timestamp===e.timestamp)return;if(!d.active&&r)return;if(n$s(d.state,o))return}this.emitGamepadEvent(e,o,!r);}));}forEachGamepad(e){const t=window.navigator.getGamepads();for(let s=0;s<t.length;s++){const i=t[s];this.validate(i)&&e(i);}}emitGamepadEvent(e,t,s){const i=this.latestUpdate[e.index],n=i&&i.active;if(!n&&!s)return;const a=!n&&s?"start":n&&s?"update":"end";this.latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:s},this.callback&&this.callback({device:this.inputDevices[e.index],state:t,action:a});}validate(e){if(!e)return !1;if(!e.connected)return !1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return !1;return !0}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$a=s$2l("trident"),a$l=s$2l("edge"),s$j=s$2l("chrome"),r$a=s$2l("ff"),h$b=s$2l("safari"),l$g={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};class u$b{constructor(e,t){this.input=t,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new a$m(e,this.input),this._gamepadSource.onEvent=e=>this._callback("gamepad",e);}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach((e=>{this._releasePointerCaptureSafe(e);})),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault);}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling();}set onEventReceived(e){this._callback=e;}set activeEvents(e){for(const t in this._active)if(!e||!e.has(t)){const e=this._active[t];this._element.removeEventListener(c$p[t],e),delete this._active[t];}e&&e.forEach((e=>{if(!this._active[e]&&c$p[e]){const t=(this._eventHandlers[e]||this._handleDefault).bind(this,e);this._element.addEventListener(c$p[e],t),this._active[e]=t;}})),this._gamepadSource.hasEventListeners=e&&e.has("gamepad");}setPointerCapture(e,t){t?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId));}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?l$g.touchNone:l$g.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?l$g.touchPan:l$g.touchNone);}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning);}_removeTouchAction(){this._element.classList.remove(l$g.touchNone),this._element.classList.remove(l$g.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning);}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e);}catch(t){}}_updateNormalizedPointerLikeEvent(e,t){const n=n$P(this._element,e);return u$b.test.disableSubpixelCoordinates&&(n.x=Math.round(n.x),n.y=Math.round(n.y)),t.x=n.x,t.y=n.y,t}_handleKey(e,n){const i=a$Q(n);i&&"key-up"===e&&this._keyDownState.delete(i);const o={native:n,key:i,repeat:i&&this._keyDownState.has(i)};i&&"key-down"===e&&this._keyDownState.add(o.key),this._callback(e,o);}_handlePointer(e,t){const n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});this._callback(e,n);}_handlePointerPreventDefault(e,t){const n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});t.preventDefault(),this._callback(e,n);}_handleMouseWheel(e,t){let n=t.deltaY;switch(t.deltaMode){case 0:(o$a||a$l)&&(n=n/document.documentElement.clientHeight*600);break;case 1:n*=30;break;case 2:n*=900;}o$a||a$l?n*=.7:s$j||h$b?n*=.6:r$a&&(n*=1.375);const i=100,l=Math.abs(n);if(l>i){const e=.02;n=n/l*200/(1+Math.exp(-e*(l-i)));}const u=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,deltaY:n});this._callback(e,u);}_handlePointerCaptureLost(e,t){this._activePointerCaptures.delete(t.pointerId),this._handleDefault(e,t);}_handleDefault(e,t){const n={native:t};t.preventDefault(),this._callback(e,n);}_preventAltKeyDefault(e){"Alt"===e.key&&e.preventDefault();}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault();}}u$b.test={disableSubpixelCoordinates:!1};const c$p={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$8 extends i$K{constructor(){super(!0),this.registerIncoming("context-menu",(t=>{t.data.native.preventDefault();}));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$7(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function n$r(t,e){const n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function r$9(e,n){if(n?(n.radius=0,n.center.x=0,n.center.y=0):n={radius:0,center:c$2A()},0===e.length)return n;if(1===e.length)return n.center.x=e[0].x,n.center.y=e[0].y,n;if(2===e.length){const[t,r]=e,[c,s]=[r.x-t.x,r.y-t.y];return n.radius=Math.sqrt(c*c+s*s)/2,n.center.x=(t.x+r.x)/2,n.center.y=(t.y+r.y)/2,n}let r=0,c=0;for(let t=0;t<e.length;t++)r+=e[t].x,c+=e[t].y;r/=e.length,c/=e.length;const s=e.map((t=>t.x-r)),x=e.map((t=>t.y-c));let o=0,y=0,a=0,h=0,l=0,u=0,i=0;for(let t=0;t<s.length;t++){const e=s[t],n=x[t],r=e*e,c=n*n;o+=r,y+=c,a+=e*n,h+=r*e,l+=c*n,u+=e*c,i+=n*r;}const f=.5*(h+u),g=.5*(l+i),M=o*y-a*a,d=(f*y-g*a)/M,m=(o*g-a*f)/M,p=c$2A(d+r,m+c);return {radius:Math.sqrt(d*d+m*m+(o+y)/e.length),center:p}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$f={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class s$i extends i$K{constructor(t=l$f.maximumDoubleClickDelay,i=l$f.maximumDoubleClickDistance,o=l$f.maximumDoubleTouchDelay,s=l$f.maximumDoubleTouchDistance,u=o$1H){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=o,this.maximumDoubleTouchDistance=s,this._clock=u,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this));}onUninstall(){this._pointerState.forEach((e=>{null!=e.doubleClickTimeout&&(e.doubleClickTimeout.remove(),e.doubleClickTimeout=null);}));}get hasPendingInputs(){return n$2M(this._pointerState,(e=>null!=e.doubleClickTimeout))}_pointerId(e){const t=e.native;return "mouse"===t.pointerType?`${t.pointerId}:${t.button}`:`${t.pointerType}`}_handleImmediateClick(e){const t=e.data,i=this._pointerId(t),l=this._pointerState.get(i);if(l){const s="touch"===t.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;e$7(l.event.data,t)>s?(this._clearDoubleClickTimeout(i,!0),this._startClick(e)):(this._clearDoubleClickTimeout(i,!1),this._doubleClick.emit(l.event.data,void 0,l.event.modifiers));}else this._startClick(e);}_startClick(e){const t=this._pointerId(e.data),i="touch"===e.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(t,{event:e,doubleClickTimeout:this._clock.setTimeout((()=>this._doubleClickTimeoutExceeded(t)),i)}),this.refreshHasPendingInputs();}_handlePointerDrag(e){const t=this._pointerId(e.data.currentEvent);this._clearDoubleClickTimeout(t,!0);}_handleDrag(e){const t=this._pointerId(e.data.pointer);this._clearDoubleClickTimeout(t,!0);}_clearDoubleClickTimeout(e,t){const i=this._pointerState.get(e);i&&(i.doubleClickTimeout.remove(),i.doubleClickTimeout=null,t&&this._doubleClickTimeoutExceeded(e),this._pointerState.delete(e),this.refreshHasPendingInputs());}_doubleClickTimeoutExceeded(e){const t=this._pointerState.get(e);this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimeout=null,this._pointerState.delete(e),this.refreshHasPendingInputs();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$h extends i$K{constructor(e=l$f.maximumDoubleClickDelay,o=l$f.maximumDoubleClickDistance,n=l$f.maximumDoubleTouchDelay,s=l$f.maximumDoubleTouchDistance,u=o$1H){super(!1),this.maximumDoubleClickDelay=e,this.maximumDoubleClickDistance=o,this.maximumDoubleTouchDelay=n,this.maximumDoubleTouchDistance=s,this._clock=u,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=c$2A(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new t$c({start:(t,e)=>this._dragStart(t,e),update:(t,e)=>this._dragUpdate(e),end:(t,e)=>this._dragEnd(e)}),this.registerIncoming("drag",(t=>this._dragEventSeparator.handle(t))),this.registerIncoming("pointer-down",(t=>this._handlePointerDown(t))),this.registerIncoming("pointer-up",(()=>this._handlePointerUp()));}onUninstall(){this._pointerState.forEach((t=>{null!=t.doubleTapTimeout&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null);}));}get hasPendingInputs(){return n$2M(this._pointerState,(t=>null!=t.doubleTapTimeout))}_clearPointerDown(t){const e=this._pointerState.get(t);e&&(e.doubleTapTimeout.remove(),e.doubleTapTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs());}_createDoubleTapDragData(t,e,i){const{button:a,buttons:o,pointer:r,pointers:n,pointerType:s,timestamp:u}=i;return {action:t,delta:e,button:a,buttons:o,pointer:r,pointers:n,pointerType:s,timestamp:u}}_dragStart(t,e){if(!this._doubleTapDragReady||1!==t)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:a,modifiers:o}=e,{center:r}=a;this._dragStartCenter=r;const n=this._createDoubleTapDragData("begin",c$2A(0,0),a);this._doubleTapDrag.emit(n,void 0,o),e.stopPropagation();}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:e,modifiers:a}=t,{center:o}=e,r=c$2A(o.x-this._dragStartCenter.x,o.y-this._dragStartCenter.y),n=this._createDoubleTapDragData("update",r,e);this._doubleTapDrag.emit(n,void 0,a),t.stopPropagation();}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:e,modifiers:a}=t,{center:o}=e,r=c$2A(o.x-this._dragStartCenter.x,o.y-this._dragStartCenter.y),n=this._createDoubleTapDragData("end",r,e);this._doubleTapDrag.emit(n,void 0,a),this._doubleTapDragActive=!1,t.stopPropagation();}_handlePointerDown(t){const{data:e}=t,i=this._pointerId(e),a=this._pointerState.get(i),{pointerType:o}=e.native;if(a){const r="touch"===o?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(i),e$7(a.event.data,e)>r?this._storePointerDown(t):this._doubleTapDragReady=!0;}else this._storePointerDown(t);}_handlePointerUp(){this._doubleTapDragReady=!1;}_pointerId(t){const{native:e}=t,{pointerId:i,button:a,pointerType:o}=e;return "mouse"===o?`${i}:${a}`:`${o}`}_storePointerDown(t){const{data:e}=t,{pointerType:i}=e.native,a=this._pointerId(e),o="touch"===i?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,r=this._clock.setTimeout((()=>this._clearPointerDown(a)),o);this._pointerState.set(a,{event:t,doubleTapTimeout:r}),this.refreshHasPendingInputs();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$g extends i$K{constructor(t){super(!1),this.navigationTouch=t,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this.handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this.handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this.handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this.handlePointerUpAndPointerLost.bind(this));}createPayload(t,e,i,n){return {action:t,pointerType:this.pointerType,button:this.mouseButton,buttons:e.buttons,timestamp:n,pointers:o$9(this.activePointerMap),pointer:e,angle:i.angle,radius:i.radius,center:i.center}}addPointer(t){const e=t.native.pointerId,i=a$k(this.activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this.activePointerMap.set(e,n);const s=h$a(n,r$8(this.activePointerMap));n.initialAngle=s,n.lastAngle=s,this.updatePointerAngles(i);}updatePointer(t){if(t&&null==t.x&&null==t.y)return;const e=t.native.pointerId,i=this.activePointerMap.get(e);i?i.event=t:this.addPointer(t);}removePointer(t){const e=a$k(this.activePointerMap).angle;this.activePointerMap.delete(t),this.updatePointerAngles(e);}updatePointerAngles(t){const e=a$k(this.activePointerMap);this.activePointerMap.forEach((i=>{i.initialAngle=h$a(i,e)-t,i.lastAngle=h$a(i,e)-t;}));}emitEvent(t,e,i){const n=a$k(this.activePointerMap);this.drag.emit(this.createPayload(t,e,n,i),void 0,this.startStateModifiers);}handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,n=n$2z(t.timestamp);this.activePointerMap.get(i)&&(1===this.activePointerMap.size?(this.updatePointer(t.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",t.data,n),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.removePointer(i)):(this.removePointer(i),this.emitEvent("removed",t.data,n$2z(t.timestamp))));}handlePointerDrag(t){const i=t.data,n=i.currentEvent,s=n$2z(t.timestamp);switch(i.action){case"start":case"update":this.isDragging?this.activePointerMap.has(n.native.pointerId)?(this.updatePointer(n),!this.isCurrentDragSuppressed&&this.emitEvent("update",n,s)):(this.addPointer(n),this.emitEvent("added",n,s),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(n),this.pointerType=t.data.startEvent.pointerType,this.mouseButton=t.data.startEvent.button,this.startStateModifiers=t.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",n,s));}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}function r$8(e){const i=[];return e.forEach((e=>{i.push(c$2A(e.event.x,e.event.y));})),r$9(i)}function a$k(t){const e=r$8(t);let i=0;return t.forEach((t=>{let n=h$a(t,e),s=n-t.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=t.lastAngle+s,t.lastAngle=n;const r=n-t.initialAngle;i+=r;})),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function o$9(t){const e=new Map;return t.forEach(((t,i)=>e.set(i,t.event))),e}function h$a(t,e){const i=t.event,n=i.x-e.center.x,s=i.y-e.center.y;return Math.atan2(s,n)}var p$o;!function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined";}(p$o||(p$o={}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class n$q extends i$K{constructor(e=l$f.maximumDoubleClickDelay,o=l$f.maximumDoubleClickDistance,n=l$f.maximumDoubleTouchDelay,a=l$f.maximumDoubleTouchDistance,s=o$1H){super(!1),this.maximumDoubleClickDelay=e,this.maximumDoubleClickDistance=o,this.maximumDoubleTouchDelay=n,this.maximumDoubleTouchDistance=a,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",(t=>{this._handlePointerLoss(t,"pointer-up");})),this.registerIncoming("pointer-capture-lost",(t=>{this._handlePointerLoss(t,"pointer-capture-lost");})),this.registerIncoming("pointer-cancel",(t=>{this._handlePointerLoss(t,"pointer-cancel");}));}onUninstall(){this._pointerState.forEach((t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove();})),super.onUninstall();}_handlePointerDown(t){const e=t.data,i=this._pointerId(e);if(!this._pointerState.has(i)){const t={downButton:e.native.button,immediateDoubleClick:null};this._pointerState.set(i,t),this.startCapturingPointer(e.native);}}_handlePointerLoss(t,e){const i=t.data,n=this._pointerId(i),a=this._pointerState.get(n);if(a&&"pointer-up"===e&&a.downButton===i.native.button){const e=a.immediateDoubleClick;if(e){e.timeoutHandle.remove();const n="touch"===t.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;e$7(e,t.data)>n?this._startImmediateDoubleClick(t,a):(this._immediateDoubleClick.emit(t.data,void 0,e.modifiers),this._removeState(i));}else this._startImmediateDoubleClick(t,a);}}_startImmediateDoubleClick(t,e){const i="touch"===t.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;e.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout((()=>this._removeState(t.data)),i)};}_pointerId(t){const e=t.native;return "mouse"===e.pointerType?`${e.pointerId}:${e.button}`:`${e.pointerType}`}_removeState(t){const e=this._pointerId(t);this._pointerState.delete(e),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$p={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class o$8 extends i$K{constructor(e=n$p.maximumClickDelay,i=n$p.movementUntilMouseDrag,o=n$p.movementUntilPenDrag,r=n$p.movementUntilTouchDrag,s=n$p.holdDelay,a=o$1H){super(!1),this.maximumClickDelay=e,this.movementUntilMouseDrag=i,this.movementUntilPenDrag=o,this.movementUntilTouchDrag=r,this.holdDelay=s,this._clock=a,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",(t=>{this._handlePointerLoss(t,"pointer-up");})),this.registerIncoming("pointer-capture-lost",(t=>{this._handlePointerLoss(t,"pointer-capture-lost");})),this.registerIncoming("pointer-cancel",(t=>{this._handlePointerLoss(t,"pointer-cancel");})),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause();}onUninstall(){this._pointerState.forEach((t=>{null!=t.holdTimeout&&(t.holdTimeout.remove(),t.holdTimeout=null);})),super.onUninstall();}_handlePointerDown(t){const e=t.data,i=e.native.pointerId;let n=null;0===this._pointerState.size&&(n=this._clock.setTimeout((()=>{const e=this._pointerState.get(i);if(e){if(!e.isDragging){const i=e.previousEvent;this._pointerHold.emit(i,void 0,t.modifiers),e.holdEmitted=!0;}e.holdTimeout=null;}}),this.holdDelay));const o={startEvent:e,previousEvent:e,startTimestamp:t.timestamp,isDragging:!1,downButton:e.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(i,o),this.startCapturingPointer(e.native),this._moveHandle.resume(),this._pointerState.size>1&&this.startDragging(t);}_createPointerDragData(t,e,i){return {action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}_handlePointerMove(t){const e=t.data,n=e.native.pointerId,o=this._pointerState.get(n);if(o){if(o.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",o,e),void 0,o.modifiers);else {n$r(e,o.startEvent)>this._getDragThreshold(e.native.pointerType)&&this.startDragging(t);}o.previousEvent=e;}}_getDragThreshold(t){switch(t){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}startDragging(t){const e=t.data,i=e.native.pointerId;this._pointerState.forEach((n=>{null!=n.holdTimeout&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,i===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,e)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),t.timestamp));}));}_handlePointerLoss(t,e){const i=t.data,n=i.native.pointerId,o=this._pointerState.get(n);if(o){if(null!=o.holdTimeout&&(o.holdTimeout.remove(),o.holdTimeout=null),o.isDragging)this._pointerDrag.emit(this._createPointerDragData("end",o,"pointer-up"===e?i:o.previousEvent),void 0,o.modifiers);else if("pointer-up"===e&&o.downButton===i.native.button){t.timestamp-o.startTimestamp<=this.maximumClickDelay&&!o.holdEmitted&&this._immediateClick.emit(i);}this._pointerState.delete(n),this.stopCapturingPointer(i.native),0===this._pointerState.size&&this._moveHandle.pause();}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const k$3={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let C$4=class extends p$33{constructor(){super(...arguments),this._handles=new u$1X;}initialize(){this._handles.add([m$1X(this.view,"ready",(()=>this._disconnect())),s$1W(this.view,"ready",(()=>this._connect()))]);}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect();}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null);}_connect(){const e=this.view.surface,o=new u$b(e,this.view.input),r=[new n$q,new o$8,new s$i,new s$g(this.view.navigation),new s$h],t=new d$p({eventSource:o,recognizers:r});t.installHandlers("prevent-context-menu",[new e$8],u$t.INTERNAL),t.installHandlers("navigation",[new a$n(this.view),new l$h(this.view),new o$b(this.view),new a$p(this.view),new a$p(this.view,[k$3.counter]),new n$u(this.view,"primary"),new i$q(this.view,k$3.pan),new t$b(this.view,k$3.zoom),new i$p(this.view,k$3.rotate),new o$c(this.view,"secondary"),new e$a(this.view,"touch")],u$t.INTERNAL),this.view.viewEvents.connect(t),this._source=o,this._inputManager=t,i$2i(this.view.navigation,"browserTouchPanEnabled",(e=>{this._source.browserTouchPanningEnabled=!e;}));}get test(){return {inputManager:this._inputManager}}};e$1_([d$1S()],C$4.prototype,"view",void 0),C$4=e$1_([i$2w("esri.views.2d.input.MapViewInputManager")],C$4);const E$2=C$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$n=0,i$o=class extends p$33{constructor(){super(...arguments),this.color=new h$1l([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25;}get version(){return p$n++}};e$1_([d$1S({readOnly:!0})],i$o.prototype,"version",null),e$1_([d$1S({type:h$1l})],i$o.prototype,"color",void 0),e$1_([d$1S({type:h$1l})],i$o.prototype,"haloColor",void 0),e$1_([d$1S()],i$o.prototype,"haloOpacity",void 0),e$1_([d$1S()],i$o.prototype,"fillOpacity",void 0),i$o=e$1_([i$2w("esri.views.2d.support.HighlightOptions")],i$o);const c$o=i$o;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$8(t,h,i,e,d,l,n,o){let u;t.ignorePadding&&(e={left:0,right:0,top:0,bottom:0}),null!=t.width&&null!=t.height?u=[t.width,t.height]:null==t.width&&null!=t.height?u=[t.height,t.height]:null!=t.width&&null==t.height?u=[t.width,t.width]:null==t.width&&null==t.height&&(u=null);const r=i[0]-(e.left+e.right),a=i[1]-(e.top+e.bottom);let g,w,c=t.area||{x:0,y:0,width:r,height:a};if(u){const t=r/a,h=u[0]/u[1];if(h>t){const t=c.width/h;c={x:c.x,y:Math.round(c.y+(c.height-t)/2),width:c.width,height:Math.round(t)};}else {const t=c.height*h;c={x:Math.round(c.x+(c.width-t)/2),y:c.y,width:Math.round(t),height:c.height};}}else u=[c.width,c.height];u[0]>c.width?(g=Math.min(u[0]/c.width,h),w=u[0]/c.width/g):(g=1,w=u[0]/c.width);return {resolutionScale:g,cropArea:{x:Math.round((c.x+e.left)*g),y:Math.round((c.y+e.top)*g),width:Math.round(c.width*g),height:Math.round(c.height*g)},outputScale:w,format:d,quality:l,children:n,rotation:o}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function a$j(t,i,h,e){e.premultipliedAlpha&&I$2(t),h.width=t.width,h.height=t.height;const n=h.getContext("2d");n.putImageData(t,0,0),e.flipY&&q$1(n);const o=n.getImageData(0,0,t.width,t.height),a=r$7(h,i);return h.width=0,h.height=0,{dataUrl:a,data:o}}function r$7(t,i){const h=C$3[i.format],e=i.quality/100;return t.toDataURL(h,e)}function l$e(i,h){const e=D$1(i),n=v$4[e];return {format:e,quality:e$1o(null!=h?h:n,0,100)}}function g$8(t,i){return i/Math.max(t[0],t[1])}function f$6(t,i,h){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(m$e)try{return new ImageData(t,i)}catch(e){m$e=!1;}return s$f(t,i,h)}function u$a(t,i,h,e){if(!i||!h)throw new Error("Cannot construct image data without dimensions");if(m$e)try{return new ImageData(t,i,h)}catch(o){m$e=!1;}const n=s$f(i,h,e);return n.data.set(t,0),n}function d$c(t,i,h,e=0,n=0,o=t.width-e,a=t.height-n,r=!1){const{data:l}=t,{width:g,height:f,data:u}=i,d=o/g,c=a/f,s=Math.ceil(d/2),w=Math.ceil(c/2),m=t.width;for(let M=0;M<f;M++)for(let t=0;t<g;t++){const i=4*(t+(r?f-M-1:M)*g);let o=0,a=0,p=0,y=0,x=0,b=0;const j=(M+.5)*c;for(let r=Math.floor(M*c);r<(M+1)*c;r++){const i=Math.abs(j-(r+.5))/w,g=(t+.5)*d,f=i*i;for(let u=Math.floor(t*d);u<(t+1)*d;u++){const t=Math.abs(g-(u+.5))/s,i=Math.sqrt(f+t*t);if(i>=1)continue;let d=2*i*i*i-3*i*i+1;const c=4*(e+u+(n+r)*m);b+=d*l[c+3],a+=d,!h&&l[c+3]<255&&(d=d*l[c+3]/255),p+=d*l[c],y+=d*l[c+1],x+=d*l[c+2],o+=d;}}u[i]=p/o,u[i+1]=y/o,u[i+2]=x/o,u[i+3]=b/a;}return i}function s$f(t,i,h){return h||(h=M$1()),h.getContext("2d").createImageData(t,i)}let w$4=null,m$e=!0;function M$1(){return w$4||(w$4=document.createElement("canvas"),w$4.width=1,w$4.height=1),w$4}function D$1(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return k$2}}function q$1(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore();}function I$2(t){const i=t.data,h=i.length;for(let e=0;e<h;e+=4){const t=i[e+3];if(t>0){const h=t/255;i[e+0]=i[e+0]/h,i[e+1]=i[e+1]/h,i[e+2]=i[e+2]/h;}}}const C$3={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},P$3=98,k$2="png",v$4={png:100,jpg:P$3,jpeg:P$3};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$7(t,l,a={}){if(!window.WebGLRenderingContext)return o$7(t,n$o),null;const b=r$6(t,l,a);return t$1O(b)&&o$7(t,i$n),b}function r$6(e,t,r={}){const o=1===t?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let n=null;for(const l of o){try{n=e.getContext(l,r);}catch(i){}if(n)break}return n}function o$7(e,t){const r=e.parentNode;r&&(r.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>");}const n$o='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',i$n='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let n$n;function o$6(){return n$n||(n$n=a$i()),n$n}function a$i(){const n={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};if(void 0===typeof WebGLRenderingContext)return n;const o=document.createElement("canvas");if(!o)return n;let a=r$6(o,1,{failIfMajorPerformanceCaveat:!0});if(t$1O(a)&&(a=r$6(o,1),r$1G(a)&&(n.majorPerformanceCaveat=!0)),t$1O(a))return n;const i=a.getParameter(a.VERSION);if(!i)return n;const u=i.match(/^WebGL\s+([\d.]*)/);if(u){const e=parseFloat(u[1]);n.available=e>=.94;const t=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT);t&&(n.supportsHighPrecisionFragment=t.precision>0),n.supportsVertexShaderSamplers=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0,n.supportsElementIndexUint=null!==a.getExtension("OES_element_index_uint"),n.supportsStandardDerivatives=null!==a.getExtension("OES_standard_derivatives"),n.supportsInstancedArrays=null!==a.getExtension("ANGLE_instanced_arrays"),n.supportsTextureFloat=null!==a.getExtension("OES_texture_float"),n.supportsColorBufferFloat=null!==a.getExtension("WEBGL_color_buffer_float")&&null!==a.getExtension("EXT_float_blend");}return n.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),n.version=s$e()?2:1,n}function s$e(){if(void 0===typeof WebGL2RenderingContext)return !1;const e=document.createElement("canvas");if(!e)return !1;const n=r$6(e,2);return !!r$1G(n)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$6={checkMajorWebPerformanceCaveat:!0};function s$d(s){s={...t$6,...s};const o=o$6();return o.available?s.checkMajorWebPerformanceCaveat&&o.majorPerformanceCaveat?new s$29("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):o.supportsHighPrecisionFragment?o.supportsVertexShaderSamplers?o.supportsElementIndexUint?o.supportsStandardDerivatives?o.supportsInstancedArrays?null:new s$29("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new s$29("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new s$29("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new s$29("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new s$29("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new s$29("webgl:required","WebGL is required but not supported.")}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$m(t){return t&&"nodeType"in t}function d$b(t){return t&&"function"==typeof t.render}const c$n={component:"esri-component"};let p$m=class extends p$33{constructor(){super(...arguments),this.widget=null;}destroy(){this.widget&&this.widget.destroy(),this.node=null;}get id(){return this.get("widget.id")||this.get("node.id")}set node(t){const o=this._get("node");t!==o&&(t&&t.classList.add(c$n.component),o&&o.classList.remove(c$n.component),this._set("node",t));}castNode(t){return t?"string"==typeof t||i$m(t)?(this._set("widget",null),e$1J(t)):(d$b(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};e$1_([d$1S({dependsOn:[]})],p$m.prototype,"id",null),e$1_([d$1S()],p$m.prototype,"node",null),e$1_([c$2Y("node")],p$m.prototype,"castNode",null),e$1_([d$1S({readOnly:!0})],p$m.prototype,"widget",void 0),p$m=e$1_([i$2w("esri.views.ui.Component")],p$m);const l$d=p$m;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h$9={left:0,top:0,bottom:0,right:0},m$d={bottom:30,top:15,right:15,left:15},u$9="manual",f$5={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function _$1(t){return t&&!t._started&&"function"==typeof t.postMixInProperties&&"function"==typeof t.buildRendering&&"function"==typeof t.postCreate&&"function"==typeof t.startup}function g$7(t){const o=t,i="object"==typeof o&&null!==o&&Object.getPrototypeOf(o);return (null===i||i===Object.prototype)&&("component"in o||"index"in o||"position"in o)?t:null}function y$7(t,{top:o,bottom:i,left:e,right:n}){t.style.top=o,t.style.bottom=i,t.style.left=e,t.style.right=n;}let C$2=class extends n$2y.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new u$1X,this.view=null,this._initContainers();}initialize(){this._handles.add([i$2i(this,"view.padding, container",this._applyViewPadding.bind(this)),i$2i(this,"padding",this._applyUIPadding.bind(this))]);}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear();}set container(t){const i=this._get("container");t!==i&&(t&&(t.classList.add(f$5.ui),t.classList.add(k$y()),this._attachContainers(t)),i&&(i.classList.remove(f$5.ui),y$7(i,{top:"",bottom:"",left:"",right:""}),t$1B(i)),this._set("container",t));}get height(){const t=this.get("view.height")||0;if(0===t)return t;const o=this._getViewPadding(),i=o.top+o.bottom;return Math.max(t-i,0)}get padding(){return this._get("padding")}set padding(t){t?this._override("padding",t):this._clearOverride("padding");}castPadding(t){return "number"==typeof t?{bottom:t,top:t,right:t,left:t}:{...m$d,...t}}get width(){const t=this.get("view.width")||0;if(0===t)return t;const o=this._getViewPadding(),i=o.left+o.right;return Math.max(t-i,0)}add(t,o){let i,e;if(Array.isArray(t))return void t.forEach((t=>this.add(t,o)));const n=g$7(t);n&&({index:i,position:o,component:t,key:e}=n),o&&"object"==typeof o&&({index:i,key:e,position:o}=o),!t||o&&!this._isValidPosition(o)||this._add(t,o,i,e);}remove(t,o){if(!t)return;if(Array.isArray(t))return t.map((t=>this.remove(t,o)));const i=this._find(t);if(i){const e=this._componentToKey;if(e.has(t)&&e.get(t)!==o)return;const n=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(t),this._components.splice(n,1)[0]}}empty(t){if(Array.isArray(t))return t.map((t=>this.empty(t))).reduce(((t,o)=>t.concat(o)));if((t=t||u$9)===u$9){return Array.prototype.slice.call(this._manualContainer.children).filter((t=>!t.classList.contains(f$5.corner))).map((t=>this.remove(t)))}return this._isValidPosition(t)?Array.prototype.slice.call(this._cornerNameToContainerLookup[t].children).map(this.remove,this):null}move(t,o){if(Array.isArray(t)&&t.forEach((t=>this.move(t,o))),!t)return;let i;const e=g$7(t)||g$7(o);if(e&&(i=e.index,o=e.position,t=e.component||t),o&&!this._isValidPosition(o))return;const n=this.remove(t);n&&this.add(n,{position:o,index:i});}find(t){if(!t)return null;const o=this._findById(t);return o&&(o.widget||o.node)}getPosition(t){for(const o in this._positionNameToContainerLookup){if(this._positionNameToContainerLookup[o].contains(t))return o}return null}_add(t,o,i,e){t instanceof l$d||(t=new l$d({node:t})),this._place({component:t,position:o,index:i}),this._components.push(t),e&&this._componentToKey.set(t,e);}_find(t){return t?t instanceof l$d?this._findByComponent(t):"string"==typeof t?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){return this.get("view.padding")||h$9}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer);}_initContainers(){const t=document.createElement("div");t.classList.add(f$5.innerContainer),t.classList.add(f$5.cornerContainer);const o=document.createElement("div");o.classList.add(f$5.innerContainer),o.classList.add(f$5.manualContainer);const i=document.createElement("div");i.classList.add(f$5.topLeft),i.classList.add(f$5.corner),t.appendChild(i);const e=document.createElement("div");e.classList.add(f$5.topRight),e.classList.add(f$5.corner),t.appendChild(e);const n=document.createElement("div");n.classList.add(f$5.bottomLeft),n.classList.add(f$5.corner),t.appendChild(n);const r=document.createElement("div");r.classList.add(f$5.bottomRight),r.classList.add(f$5.corner),t.appendChild(r),this._innerContainer=t,this._manualContainer=o;const s=d$1G();this._cornerNameToContainerLookup={"top-left":i,"top-right":e,"bottom-left":n,"bottom-right":r,"top-leading":s?e:i,"top-trailing":s?i:e,"bottom-leading":s?r:n,"bottom-trailing":s?n:r},this._positionNameToContainerLookup={manual:o,...this._cornerNameToContainerLookup};}_isValidPosition(t){return !!this._positionNameToContainerLookup[t]}_place(t){const o=t.component,e=t.position||u$9,n=t.index,r=this._positionNameToContainerLookup[e],s=n>-1;if(_$1(o.widget)&&o.widget.startup(),!s)return void r.appendChild(o.node);const a=Array.prototype.slice.call(r.children);if(0===n)return void(r.firstChild?o$1D(o.node,r.firstChild):r.appendChild(o.node));n>=a.length?r.appendChild(o.node):o$1D(o.node,a[n]);}_applyViewPadding(){const t=this.container;t&&y$7(t,this._toPxPosition(this._getViewPadding()));}_applyUIPadding(){const t=this._innerContainer;t&&y$7(t,this._toPxPosition(this.padding));}_toPxPosition(t){return {top:this._toPxUnit(t.top),left:this._toPxUnit(t.left),right:this._toPxUnit(t.right),bottom:this._toPxUnit(t.bottom)}}_toPxUnit(t){return 0===t?"0":t+"px"}_findByComponent(t){let o,i=null;return this._components.some((e=>(o=e===t,o&&(i=e),o))),i}_findById(t){let o,i=null;return this._components.some((e=>(o=e.id===t,o&&(i=e),o))),i}_findByNode(t){let o,i=null;return this._components.some((e=>(o=e.node===t,o&&(i=e),o))),i}};e$1_([d$1S()],C$2.prototype,"container",null),e$1_([d$1S()],C$2.prototype,"height",null),e$1_([d$1S({value:m$d})],C$2.prototype,"padding",null),e$1_([c$2Y("padding")],C$2.prototype,"castPadding",null),e$1_([d$1S()],C$2.prototype,"view",void 0),e$1_([d$1S()],C$2.prototype,"width",null),C$2=e$1_([i$2w("esri.views.ui.UI")],C$2);const v$3=C$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function p$l(t,e){return t&&"copyright"in t&&(!e||"function"==typeof t.originOf&&"user"===t.originOf("copyright"))}function d$a(t,e){return t.length!==e.length||t.some(((t,i)=>t.text!==e[i].text))}function m$c(t,e,i){if(!i||!e)return;t.find((t=>t.layerView===e&&t.text===i))||t.push({text:i,layerView:e});}function f$4(t){return "bing-maps"===t.type}const b$4=[];let y$6=class extends d$1a{constructor(t){super(t),this.clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state");},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new S$F,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const e=this.get("view.allLayerViews");e&&this.handles.add(e.map((t=>t.watch(["suspended","attributionVisible"],this._updateAttributionItems))),"suspension"),t&&t.removed&&t.removed.forEach((t=>{this._pendingAttributions.delete(t),this._fetchedAttributionData.delete(t);})),this._updateAttributionItems();},this._updateAttributionItems=()=>{const t=this.get("view.allLayerViews");b$4.length=0,t?(t.forEach((t=>{if(t.suspended||!t.get("layer.attributionVisible"))return;const e=t.layer;if(p$l(e,"user"))return void m$c(b$4,t,e.copyright);if(e.hasAttributionData){if(this._fetchedAttributionData.has(t)){const i=this._fetchedAttributionData.get(t);return void(i?m$c(b$4,t,this._getDynamicAttribution(i,this.view,e)):p$l(e)&&m$c(b$4,t,e.copyright))}return void this._fetchAttributionData(t)}const i=e.get("portalItem.accessInformation");m$c(b$4,t,i||e.copyright);})),d$a(this.items,b$4)&&(this.items.removeAll(),this.items.addMany(b$4)),b$4.length=0,this.notifyChange("state")):this.clear();},this.handles.add([$$f(this,"view.allLayerViews","change",this._allLayerViewsChange,this._allLayerViewsChange,this.clear),v$O(this,"view.stationary",(()=>this._updateAttributionItems()))]);}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll();}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const i=await a$1C(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const e=i.ok?this._createContributionIndex(i.value,f$4(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,e);}this._updateAttributionItems();}_createContributionIndex(t,e){const i=t.contributors,r={};if(!i)return r;for(let s=0;s<i.length;s++){const t=i[s],o=t.coverageAreas;if(!o)return;for(const i of o){const o=i.bbox,n=i.zoomMin-(e&&i.zoomMin?1:0),a=i.zoomMax-(e&&i.zoomMax?1:0),c={xmin:o[1],ymin:o[0],xmax:o[3],ymax:o[2],spatialReference:k$s.WGS84},u={extent:R$o(c),attribution:t.attribution||"",score:null!=i.score?i.score:100,id:s};for(let t=n;t<=a;t++)r[t]=r[t]||[],r[t].push(u);}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(t,e,i){const{extent:r,scale:s}=e;let o=i.tileInfo.scaleToZoom(s);if(o=Math.min(t.maxKey,Math.round(o)),!r||null==o||o<=-1)return "";const n=t[o],a=M$s(r.center.clone().normalize(),e.spatialReference),h={};return n?n.filter((t=>{const e=!h[t.id]&&a&&r$1a(t.extent,a);return e&&(h[t.id]=!0),e})).sort(((t,e)=>e.score-t.score||t.objectId-e.objectId)).map((t=>t.attribution)).join(", "):""}};e$1_([d$1S({readOnly:!0,type:S$F})],y$6.prototype,"items",void 0),e$1_([d$1S({readOnly:!0})],y$6.prototype,"state",null),e$1_([d$1S()],y$6.prototype,"view",void 0),y$6=e$1_([i$2w("esri.widgets.Attribution.AttributionViewModel")],y$6);const g$6=y$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$m={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let l$c=class extends z$n{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this.iconClass=c$m.widgetIcon,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new g$6;}initialize(){this.own($$f(this,"viewModel.items","change",(()=>this.scheduleRender())));}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce(((e,t)=>(-1===e.indexOf(t.text)&&e.push(t.text),e)),[]).join(this.itemDelimiter)}render(){const e={[c$m.open]:this._isOpen};return n$2o("div",{bind:this,class:this.classes(c$m.base,e),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return n$2o("div",{class:c$m.poweredBy},"Powered by"," ",n$2o("a",{class:c$m.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?0:-1,{attributionText:r}=this,o=t?"button":void 0,s={[c$m.sourcesOpen]:e,[c$m.interactive]:t};return n$2o("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes(c$m.sources,s),innerHTML:r,role:o,tabIndex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth;}_afterSourcesNodeUpdate(e){let t=!1;const{clientHeight:i,clientWidth:r,scrollWidth:o}=e,s=o>=r,n=this._attributionTextOverflowed!==s;if(this._attributionTextOverflowed=s,n&&(t=!0),this._isOpen){const e=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,e&&(this._isOpen=!1,t=!0);}t&&this.scheduleRender();}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen);}};e$1_([d$1S()],l$c.prototype,"_isOpen",void 0),e$1_([d$1S()],l$c.prototype,"_isInteractive",null),e$1_([d$1S()],l$c.prototype,"_attributionTextOverflowed",void 0),e$1_([d$1S()],l$c.prototype,"_prevSourceNodeHeight",void 0),e$1_([d$1S({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],l$c.prototype,"attributionText",null),e$1_([d$1S()],l$c.prototype,"iconClass",void 0),e$1_([d$1S()],l$c.prototype,"itemDelimiter",void 0),e$1_([d$1S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],l$c.prototype,"label",void 0),e$1_([d$1S(),e$1w("esri/widgets/Attribution/t9n/Attribution")],l$c.prototype,"messages",void 0),e$1_([o$1Q("viewModel.view")],l$c.prototype,"view",void 0),e$1_([d$1S({type:g$6})],l$c.prototype,"viewModel",void 0),e$1_([t$1p()],l$c.prototype,"_toggleState",null),l$c=e$1_([i$2w("esri.widgets.Attribution")],l$c);const u$8=l$c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$m="esri.widgets.CompassViewModel";let h$8=class extends(e$n(p$33)){constructor(t){super(t),this._handles=new u$1X,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this);}initialize(){this._handles.add(i$2i(this,"view",this._updateRotationWatcher));}destroy(){this._handles.destroy(),this._handles=null,this.view=null;}get canShowNorth(){const t=this.get("view.spatialReference");return !(!t||!t.isWebMercator&&!t.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const t={};"2d"===this.view.type?t.rotation=0:t.heading=0,this.callGoTo({target:t});}_updateForRotation(t){null!=t&&(this.orientation={z:t});}_updateForCamera(t){if(!t)return;const e=-t.heading;this.orientation={x:0,y:0,z:e};}_updateRotationWatcher(t){this._handles.removeAll(),t&&("2d"===t.type?this._handles.add(i$2i(this,"view.rotation",this._updateForRotation)):this._handles.add(i$2i(this,"view.camera",this._updateForCamera)));}};e$1_([d$1S({readOnly:!0})],h$8.prototype,"canShowNorth",null),e$1_([d$1S()],h$8.prototype,"orientation",void 0),e$1_([d$1S({readOnly:!0})],h$8.prototype,"state",null),e$1_([d$1S()],h$8.prototype,"view",void 0),h$8=e$1_([i$2w(n$m)],h$8);const d$9=h$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$l={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let l$b=class extends z$n{constructor(s,e){super(s,e),this.goToOverride=null,this.iconClass=n$l.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new d$9;}reset(){return this.viewModel.reset()}render(){const{orientation:s,state:e}=this.viewModel,o="disabled"===e,t="compass"===("rotation"===e?"rotation":"compass"),r=o?-1:0,i={[n$l.disabled]:o,[n$l.interactive]:!o},a={[n$l.northIcon]:t,[n$l.rotationIcon]:!t},{messages:c}=this;return n$2o("div",{bind:this,class:this.classes(n$l.base,i),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:r,"aria-label":c.reset,title:c.reset},n$2o("span",{"aria-hidden":"true",class:this.classes(n$l.icon,a),styles:this._toRotationTransform(s)}),n$2o("span",{class:n$l.text},c.reset))}_reset(){this.viewModel.reset();}_toRotationTransform(s){return {transform:`rotateZ(${s.z}deg)`}}};e$1_([o$1Q("viewModel.goToOverride")],l$b.prototype,"goToOverride",void 0),e$1_([d$1S()],l$b.prototype,"iconClass",void 0),e$1_([d$1S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],l$b.prototype,"label",void 0),e$1_([d$1S(),e$1w("esri/widgets/Compass/t9n/Compass")],l$b.prototype,"messages",void 0),e$1_([o$1Q("viewModel.view")],l$b.prototype,"view",void 0),e$1_([d$1S({type:d$9})],l$b.prototype,"viewModel",void 0),e$1_([t$1p()],l$b.prototype,"_reset",null),l$b=e$1_([i$2w("esri.widgets.Compass")],l$b);const d$8=l$b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let a$h=class extends p$33{constructor(t){super(t),this._handles=new u$1X,this.navigationMode="pan",this.view=null;}initialize(){this._handles.add(s$1W(this,"view.inputManager",this._setNavigationMode.bind(this)));}destroy(){this._handles.destroy(),this._handles=null,this.view=null;}get state(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode());}_setNavigationMode(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate";}};e$1_([d$1S({readOnly:!0})],a$h.prototype,"state",null),e$1_([d$1S()],a$h.prototype,"navigationMode",void 0),e$1_([d$1S()],a$h.prototype,"view",void 0),a$h=e$1_([i$2w("esri.widgets.NavigationToggleViewModel")],a$h);const n$k=a$h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const g$5={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let p$k=class extends z$n{constructor(t,o){super(t,o),this.iconClass=g$5.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new n$k;}set layout(t){"horizontal"!==t&&(t="vertical"),this._set("layout",t);}toggle(){return this.viewModel.toggle()}render(){const t="disabled"===this.get("viewModel.state"),o="pan"===this.get("viewModel.navigationMode"),e={[g$5.disabled]:t,[g$5.isLayoutHorizontal]:"horizontal"===this.layout},s={[g$5.activeButton]:o},i={[g$5.activeButton]:!o},a=t?-1:0,r=this.messages.toggle;return n$2o("div",{bind:this,class:this.classes(g$5.base,e),onclick:this._toggle,onkeydown:this._toggle,tabIndex:a,"aria-label":r,title:r},n$2o("div",{class:this.classes(g$5.button,g$5.panButton,s)},n$2o("span",{class:g$5.panIcon})),n$2o("div",{class:this.classes(g$5.button,g$5.rotateButton,i)},n$2o("span",{class:g$5.rotationIcon})))}_toggle(){this.toggle();}};e$1_([d$1S()],p$k.prototype,"iconClass",void 0),e$1_([d$1S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],p$k.prototype,"label",void 0),e$1_([d$1S({value:"vertical"})],p$k.prototype,"layout",null),e$1_([d$1S(),e$1w("esri/widgets/NavigationToggle/t9n/NavigationToggle")],p$k.prototype,"messages",void 0),e$1_([o$1Q("viewModel.view")],p$k.prototype,"view",void 0),e$1_([d$1S({type:n$k})],p$k.prototype,"viewModel",void 0),e$1_([t$1p()],p$k.prototype,"_toggle",null),p$k=e$1_([i$2w("esri.widgets.NavigationToggle")],p$k);const c$l=p$k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$k={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let n$j=class extends z$n{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title="";}render(){const t=this.enabled?0:-1,s={[c$k.disabled]:!this.enabled,[c$k.interactive]:this.enabled},o={[this.iconClass]:!!this.iconClass};return n$2o("div",{bind:this,class:this.classes(c$k.button,s),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:t,title:this.title},n$2o("span",{"aria-hidden":"true",role:"presentation",class:this.classes(c$k.icon,o)}),n$2o("span",{class:c$k.iconText},this.title))}_triggerAction(){this.action.call(this);}};e$1_([d$1S()],n$j.prototype,"action",void 0),e$1_([d$1S()],n$j.prototype,"enabled",void 0),e$1_([d$1S()],n$j.prototype,"iconClass",void 0),e$1_([d$1S()],n$j.prototype,"title",void 0),e$1_([t$1p()],n$j.prototype,"_triggerAction",null),n$j=e$1_([i$2w("esri.widgets.IconButton")],n$j);const a$g=n$j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$c=class extends p$33{get canZoomIn(){if(!this.get("view.ready"))return !1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return 0===t||e>t}get canZoomOut(){if(!this.get("view.ready"))return !1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return 0===t||e<t}};e$1_([d$1S({readOnly:!0})],s$c.prototype,"canZoomIn",null),e$1_([d$1S({readOnly:!0})],s$c.prototype,"canZoomOut",null),e$1_([d$1S()],s$c.prototype,"view",void 0),s$c=e$1_([i$2w("esri.widgets.Zoom.ZoomConditions2D")],s$c);const i$l=s$c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$b=class extends p$33{get canZoomIn(){return !!this.get("view.ready")}get canZoomOut(){return !!this.get("view.ready")}};e$1_([d$1S({readOnly:!0})],s$b.prototype,"canZoomIn",null),e$1_([d$1S({readOnly:!0})],s$b.prototype,"canZoomOut",null),e$1_([d$1S()],s$b.prototype,"view",void 0),s$b=e$1_([i$2w("esri.widgets.Zoom.ZoomConditions3D")],s$b);const c$j=s$b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let m$b=class extends p$33{constructor(o){super(o),this.canZoomIn=!1,this.canZoomOut=!1;}destroy(){this.view=null;}get state(){return this.get("view.ready")?"ready":"disabled"}set view(o){o?"2d"===o.type?this._zoomConditions=new i$l({view:o}):"3d"===o.type&&(this._zoomConditions=new c$j({view:o})):this._zoomConditions=null,this._set("view",o);}zoomIn(){if(!this.canZoomIn)return;const o=this.view;"2d"===o.type?o.mapViewNavigation.zoomIn():g$15(o.goTo({zoomFactor:2}));}zoomOut(){if(!this.canZoomOut)return;const o=this.view;"2d"===o.type?o.mapViewNavigation.zoomOut():g$15(o.goTo({zoomFactor:.5}));}};e$1_([d$1S()],m$b.prototype,"_zoomConditions",void 0),e$1_([d$1S({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],m$b.prototype,"canZoomIn",void 0),e$1_([d$1S({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],m$b.prototype,"canZoomOut",void 0),e$1_([d$1S({readOnly:!0})],m$b.prototype,"state",null),e$1_([d$1S()],m$b.prototype,"view",null),m$b=e$1_([i$2w("esri.widgets.Zoom.ZoomViewModel")],m$b);const a$f=m$b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$a={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let u$7=class extends z$n{constructor(o,t){super(o,t),this.iconClass=l$a.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new a$f;}initialize(){this._zoomInButton=new a$g({action:this.zoomIn.bind(this),iconClass:l$a.zoomInIcon}),this._zoomOutButton=new a$g({action:this.zoomOut.bind(this),iconClass:l$a.zoomOutIcon});}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null;}set layout(o){"horizontal"!==o&&(o="vertical"),this._set("layout",o);}render(){const o=this.viewModel,t={[l$a.horizontalLayout]:"horizontal"===this.layout};return this._zoomInButton.enabled="ready"===o.state&&o.canZoomIn,this._zoomOutButton.enabled="ready"===o.state&&o.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,n$2o("div",{class:this.classes(l$a.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};e$1_([d$1S()],u$7.prototype,"iconClass",void 0),e$1_([d$1S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],u$7.prototype,"label",void 0),e$1_([d$1S({value:"vertical"})],u$7.prototype,"layout",null),e$1_([d$1S(),e$1w("esri/widgets/Zoom/t9n/Zoom")],u$7.prototype,"messages",void 0),e$1_([o$1Q("viewModel.view")],u$7.prototype,"view",void 0),e$1_([d$1S({type:a$f})],u$7.prototype,"viewModel",void 0),u$7=e$1_([i$2w("esri.widgets.Zoom")],u$7);const c$i=u$7;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$a="esri.views.ui.DefaultUI";function h$7(t){return t&&void 0!==t.view}s$2h.getLogger(m$a);let g$4=class extends v$3{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"},this.components=[];}initialize(){this._handles.add([i$2i(this,"components",this._componentsWatcher.bind(this)),i$2i(this,"view",this._updateViewAwareWidgets.bind(this))]);}_add(t,o,i,e){if("string"==typeof t&&this._defaultPositionLookup[t]){if(this._find(t))return;t=this._createComponent(t);}super._add(t,o,i,e);}_removeComponents(t){t.forEach((t=>{const o=this._find(t);o&&(this.remove(o),o.destroy());}));}_updateViewAwareWidgets(t){this.components.forEach((o=>{const i=this._find(o),e=i&&i.widget;h$7(e)&&(e.view=t);}));}_componentsWatcher(t,o){this._removeComponents(o),this._addComponents(t),this._adjustPadding(t);}_adjustPadding(t){if(-1===t.indexOf("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t;}}_addComponents(t){this.initialized&&t.forEach((t=>this.add(this._createComponent(t),this._defaultPositionLookup[t])));}_createComponent(t){const o=this._createWidget(t);if(o)return new l$d({id:t,node:o})}_createWidget(t){return "attribution"===t?this._createAttribution():"compass"===t?this._createCompass():"navigation-toggle"===t?this._createNavigationToggle():"zoom"===t?this._createZoom():void 0}_createAttribution(){return new u$8({view:this.view})}_createCompass(){return new d$8({view:this.view})}_createNavigationToggle(){return new c$l({view:this.view})}_createZoom(){return new c$i({view:this.view})}};e$1_([d$1S()],g$4.prototype,"components",void 0),g$4=e$1_([i$2w(m$a)],g$4);const u$6=g$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$6=class extends u$6{constructor(o){super(o),this.components=["attribution","zoom"];}};e$1_([d$1S()],e$6.prototype,"components",void 0),e$6=e$1_([i$2w("esri.views.ui.2d.DefaultUI2D")],e$6);const p$j=e$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$i;let a$e=p$i=class extends a$2A{constructor(o){super(o),this.color=new h$1l([0,0,0,1]);}clone(){return new p$i(l$2r({color:this.color}))}};e$1_([d$1S({type:h$1l,json:{write:!0}})],a$e.prototype,"color",void 0),a$e=p$i=e$1_([i$2w("esri.webmap.background.ColorBackground")],a$e);const m$9=a$e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const S$3=s$2h.getLogger("esri.views.MapView");let O$1,C$1,L$2,k$1,E$1,x$3;async function N$1(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,Stage:a}]=await Promise.all([import('./webgl.js'),import('./mapViewDeps.js')]);C$1=e,L$2=t,k$1=i,E$1=r,x$3=s,O$1=a;}function P$2(e){return e instanceof h$U}function W$1(e,t,r){if(e)if(Array.isArray(e)||S$F.isCollection(e)){if(0===e.length)return;e.forEach((e=>W$1(e,t,r)));}else P$2(e)?t.add(e):r.add(e);}let R$1=class extends(m$Q(_$a(U))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new p$1v({getCollections:()=>{var e,t;return [null==(e=this.basemapView)?void 0:e.baseLayerViews,this.layerViews,null==(t=this.basemapView)?void 0:t.referenceLayerViews]},getChildrenFunction:()=>null}),this.floors=new S$F,this.graphicsView=null,this.highlightOptions=new c$o,this.inputManager=new E$2({view:this}),this.mapViewNavigation=null,this.supersampleScreenshotsEnabled=!1,this.ui=new p$j,this.rendering=!1,c$1o();}destroy(){this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null);}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){void 0===e?this._clearOverride("background"):this._override("background",e);}get textureManager(){return this._stage.painter.textureManager}get navigating(){return !(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}toMap(e){if(i$E(e)){const t=c$F(this,e);return super.toMap(t)}return super.toMap(e)}hitTest(e,t){const i=i$E(e)?c$F(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return Promise.resolve({screenPoint:i,results:[]});const r=this.toMap(i),s=[this.graphicsView];s.push.apply(s,this.allLayerViews.toArray().reverse());const a=new Set,n=new Set,o=new Set,h=new Set;return t&&(W$1(t&&t.include,a,o),W$1(t&&t.exclude,n,h)),Promise.all(s.map((e=>!e||!e.hitTest||o.size>0&&!e.layer||o.size>0&&e.layer&&!o.has(e.layer)||h.size>0&&e.layer&&h.has(e.layer)?null:e.hitTest(i.x,i.y)))).then((e=>({screenPoint:i,results:e.filter((e=>null!=e&&(!(a.size>0)||a.has(e))&&(!(n.size>0)||!n.has(e)))).map((e=>({mapPoint:r,graphic:e})))})))}takeScreenshot(e){if(e=e||{},!this.ready)return Promise.reject("Map view cannot be used before it is ready");const t=this.supersampleScreenshotsEnabled?Math.min(4,g$8(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach((e=>{const t=this.allLayerViews.find((t=>t.layer.id===e.id));t&&"container"in t&&t.container&&i.push(t.container);}))):i=this._stage.children;const{format:r,quality:s}=l$e(e.format,e.quality),a=t$8(e,t,this.size,this.padding,r,s,i,e.rotation);return this._stage.takeScreenshot(a)}on(e,t,i,r){const s=this.inputManager&&this.viewEvents.on(e,t,i,r);return s||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){if(this.graphicsView){this.graphicsView.graphicUpdateHandler(e);}}whenReady(){return new Promise((e=>{this.ready?e(this):this._resolveWhenReady.push(e);}))}forceDOMReadyCycle(){this.forceReadyCycle();}validate(){let e=s$d({checkMajorWebPerformanceCaveat:!1});return s$2l("safari")&&s$2l("safari")<9&&(e=new s$29("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:s$2l("safari")})),r$1G(e)?(S$3.warn("#validate()",e.message),Promise.reject(e)):N$1()}_startup(){this.timeline.begin("MapView Startup"),super._startup(),this.graphics.owner=this;const e={disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},t=new O$1(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:e,renderingOptions:this.renderingOptions,timeline:this.timeline}),i=new C$1({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new L$2(this.featuresTilingScheme)}),r=new E$1({view:this,animationManager:this.animationManager}),s=new k$1({view:this});this._magnifierView=new x$3,this._magnifierView.magnifier=this.magnifier,this._stage=t,this.frameTask.graphicsView=i,this._set("graphicsView",i),this._set("mapViewNavigation",r),this._set("labelManager",s),this.handles.add([this.rootLayerViews.on("change",(()=>this._updateStageChildren())),t.on("post-render",(()=>this._set("rendering",t.renderRequested))),t.on("will-render",(()=>this._set("rendering",t.renderRequested))),t.on("webgl-error",(e=>this.fatalError=e.error)),i$2i(this,"stationary",(e=>t.stationary=e),!0),i$2i(this,"state.id",(()=>t.state=this.state),!0),i$2i(this,"background",(e=>{t.background=e,this._magnifierView.background=e;}),!0),i$2i(this,"magnifier",(e=>this._magnifierView.magnifier=e),!0),i$2i(this,"renderingOptions",(e=>t.renderingOptions=e),!0),i$2i(this,"highlightOptions",(()=>t.highlightOptions=this.highlightOptions),!0)],"map-view"),t.state=this.state,this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach((e=>e(this))),this.timeline.end("MapView Startup");}_teardown(){this.handles.remove("map-view"),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy();this.graphicsView.destroy(),this.mapViewNavigation.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,super._teardown();}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach((e=>{this._stage.addChild(e.container);}));const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView);}};e$1_([d$1S({type:m$9})],R$1.prototype,"background",null),e$1_([d$1S()],R$1.prototype,"floors",void 0),e$1_([d$1S()],R$1.prototype,"graphicsView",void 0),e$1_([d$1S({type:c$o})],R$1.prototype,"highlightOptions",void 0),e$1_([d$1S({readOnly:!0})],R$1.prototype,"inputManager",void 0),e$1_([d$1S({readOnly:!0})],R$1.prototype,"textureManager",null),e$1_([d$1S({readOnly:!0})],R$1.prototype,"mapViewNavigation",void 0),e$1_([d$1S({type:Boolean})],R$1.prototype,"navigating",null),e$1_([d$1S({type:Boolean,constructOnly:!0})],R$1.prototype,"supersampleScreenshotsEnabled",void 0),e$1_([d$1S({type:p$j})],R$1.prototype,"ui",void 0),e$1_([d$1S({readOnly:!0})],R$1.prototype,"rendering",void 0),e$1_([d$1S({constructOnly:!0})],R$1.prototype,"renderCanvas",void 0),e$1_([d$1S({constructOnly:!0})],R$1.prototype,"deactivatedWebGLExtensions",void 0),e$1_([d$1S({constructOnly:!0})],R$1.prototype,"debugWebGLExtensions",void 0),R$1=e$1_([i$2w("esri.views.MapView")],R$1);const G=R$1;

const arcgisMapCss = "@import url('https://js.arcgis.com/next/esri/themes/light/main.css');.map-view{padding:0;margin:0}";

let ArcGISMap = class extends HTMLElement {
  constructor() {
    super();
    this.__registerHost();
  }
  validateApiKey(value) {
    t$1K.apiKey = value;
  }
  componentWillLoad() {
    if (this.apiKey) {
      t$1K.apiKey = this.apiKey;
    }
    const map = new j$h({
      basemap: this.basemap || 'streets-vector'
    });
    const params = {};
    if (this.zoom) {
      params.zoom = this.zoom;
    }
    if (this.center) {
      if (typeof this.center === 'string') {
        params.center = this.center.split(',').map((x) => Number(x));
      }
      else {
        params.center = this.center;
      }
    }
    const view = new G(Object.assign({ container: this.el, map }, params));
    this.view = view;
    view.when(() => console.log('view ready'));
  }
  componentDidRender() {
    const elem = this.el.querySelector('.esri-view-user-storage');
    if (elem) {
      const elems = Array.from(elem.children);
      for (let e of elems) {
        if (e.tagName.toLowerCase().includes('arcgis-')) {
          e.view = this.view;
        }
      }
    }
  }
  render() {
    return (h$1F("div", { class: "map-view" }));
  }
  get el() { return this; }
  static get watchers() { return {
    "apiKey": ["validateApiKey"]
  }; }
  static get style() { return arcgisMapCss; }
};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$h=class extends(r$X(a$2A)){constructor(t){super(t),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null;}};e$1_([d$1S()],p$h.prototype,"autoNavigate",void 0),e$1_([d$1S()],p$h.prototype,"filter",void 0),e$1_([d$1S()],p$h.prototype,"getResults",void 0),e$1_([d$1S()],p$h.prototype,"getSuggestions",void 0),e$1_([d$1S()],p$h.prototype,"maxResults",void 0),e$1_([d$1S()],p$h.prototype,"maxSuggestions",void 0),e$1_([d$1S()],p$h.prototype,"minSuggestCharacters",void 0),e$1_([d$1S()],p$h.prototype,"outFields",void 0),e$1_([d$1S()],p$h.prototype,"placeholder",void 0),e$1_([d$1S()],p$h.prototype,"popupEnabled",void 0),e$1_([d$1S()],p$h.prototype,"popupTemplate",void 0),e$1_([d$1S()],p$h.prototype,"prefix",void 0),e$1_([d$1S()],p$h.prototype,"resultGraphicEnabled",void 0),e$1_([d$1S()],p$h.prototype,"resultSymbol",void 0),e$1_([d$1S()],p$h.prototype,"suggestionsEnabled",void 0),e$1_([d$1S()],p$h.prototype,"suffix",void 0),e$1_([d$1S()],p$h.prototype,"withinViewEnabled",void 0),e$1_([d$1S()],p$h.prototype,"zoomScale",void 0),p$h=e$1_([i$2w("esri.widgets.Search.SearchSource")],p$h);const i$k=p$h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$5=96;function r$5(r,i){const o=i||r.extent,c=r.width,u=H$9(o&&o.spatialReference);return o&&c?o.width/c*u*m$1o*e$5:0}function i$j(r,i){return r/(H$9(i)*m$1o*e$5)}function c$h(t,n){const e=t.extent,r=t.width,o=i$j(n,e.spatialReference);return e.clone().expand(o*r/e.width)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$5=s$2h.getLogger("esri.widgets.Search.support.geometryUtils");function s$a(r,t){var n,i;if(!t)return o$5.error("missing-parameter: view is missing."),Promise.reject(new s$29("searchgeometryutils:missing-parameter","view is missing."));if(!r)return o$5.error("missing-parameter: point is missing."),Promise.reject(new s$29("searchgeometryutils:missing-parameter","point is missing."));if(r.hasZ||"2d"===t.type)return Promise.resolve(r);const s=null==t||null==(n=t.map)?void 0:n.ground;return s&&s.layers.length?s.queryElevation(r,{cache:null==(i=t.basemapTerrain)?void 0:i.elevationQueryCache}).then((e=>e.geometry)):Promise.resolve(r)}function m$8(e){if(t$1O(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function a$d(e,r,n){return t$1O(e)?null:"extent"===e.type?e:"multipoint"===e.type||"polygon"===e.type||"polyline"===e.type?e.extent:"point"===e.type?l$9(e,r,n):void 0}function p$g(e,r,n){return t$1O(e)||t$1O(r)?null:l$9(e.center,r,n)}function l$9(e,r,t){const o=e.hasZ?e.z:void 0;if(r&&r.map){return (t?c$h(r,t):r.extent).clone().centerAt(e).set({zmax:o,zmin:o})}return new M$r({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:o,zmax:o})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$g=/https?:\/\/services.*\.arcgis\.com/i,d$7=/(?:\{([^}]+)\})/g,f$3=s$2h.getLogger("esri.widgets.Search.support.layerSearchUtils");function m$7(t,r){const{exactMatch:i=!1,location:l,maxResults:o,spatialReference:s,source:u,sourceIndex:a,suggestResult:c,view:d}=t,{layer:m,filter:g,zoomScale:F}=u,b=d&&d.scale,j=p$f(u,d),T=r&&r.signal;return h$6(m).then((()=>{const e=m.popupTemplate;return e?e.getRequiredFields(m.fieldsIndex):null})).then((t=>{var r,p;const{objectIdField:h,returnZ:R}=m,S=x$2(u);if(!$$2(m,S))throw f$3.error("invalid-field: displayField is invalid."),new s$29("getResults():invalid-field","displayField is invalid.");const D=t&&t.length?t:[S],E=u.outFields||D,M=y$5(E);-1!==E.indexOf(h)||M||E.push(h);if(!(M||w$3(m,E)))throw f$3.error("invalid-field: outField is invalid."),new s$29("getResults():invalid-field","outField is invalid.");const O=m.createQuery(),{orderByFields:C}=u;if(C&&(O.orderByFields=C),s){O.outSpatialReference=s;const e=1/H$9(s);e&&(O.maxAllowableOffset=e);}const N="mesh"===m.geometryType||"multipatch"===m.geometryType,U=(null==(r=m.capabilities)||null==(p=r.data)?void 0:p.supportsZ)&&!N;if(O.returnZ=U&&!1!==R,O.returnGeometry=!0,O.multipatchOption=N?"xyFootprint":null,E&&(O.outFields=E),l)O.geometry=l;else if(c.key)O.objectIds=[c.key];else {const t=u.searchFields||[S];if(!w$3(m,t))throw f$3.error("invalid-field: search field is invalid."),new s$29("getResults():invalid-field","search field is invalid.");v$2(m)&&(O.num=o),j&&(O.geometry=j);if(!c.text.trim())return [];const{prefix:r="",suffix:n=""}=u,l=L$1({searchTerm:I$1(`${r}${c.text}${n}`),layer:m,searchFields:t,filter:g,exactMatch:i,type:"search"});if(!l)return [];O.where=l;}return m.queryFeatures(O,{signal:T}).then((e=>k(e,d,u,a,S,b,F)))}))}function g$3(t,r){const{source:i,spatialReference:n,view:l,suggestTerm:o,maxSuggestions:s,sourceIndex:u,exactMatch:a}=t,{layer:c,filter:m}=i,g=r&&r.signal,F=p$f(i,l);return h$6(c).then((()=>{if(!v$2(c))return [];const t=x$2(i),r=i.searchFields||[t],l=[];i.suggestionTemplate?i.suggestionTemplate.replace(d$7,((e,t)=>(l.push(t),e))):l.push(t);const p=y$5(l);-1!==l.indexOf(c.objectIdField)||p||l.push(c.objectIdField);const h=$$2(c,t),b=p||w$3(c,l),j=w$3(c,r);if(!h)throw f$3.error("invalid-field: displayField is invalid."),new s$29("getSuggestions():invalid-field","displayField is invalid.");if(!b)throw f$3.error("invalid-field: outField is invalid."),new s$29("getSuggestions():invalid-field","outField is invalid.");if(!j)throw f$3.error("invalid-field: search field is invalid."),new s$29("getSuggestions():invalid-field","search field is invalid.");const T=c.createQuery(),{orderByFields:R}=i;R&&(T.orderByFields=R),T.outSpatialReference=n,T.returnGeometry=!1,T.num=s,T.outFields=l,F&&(T.geometry=F);if(!o.trim())return [];const{prefix:S="",suffix:D=""}=i,E=L$1({searchTerm:I$1(`${S}${o}${D}`),layer:c,searchFields:r,filter:m,exactMatch:a,type:"suggest"});return E?(T.where=E,c.queryFeatures(T,{signal:g}).then((e=>C(e,i,u,t)))):[]}))}function p$f(e,t){const{filter:r,withinViewEnabled:i}=e,n=t&&t.extent;return r&&r.geometry||(i&&n?n:void 0)}function y$5(e){return e&&-1!==e.indexOf("*")}async function h$6(e){e&&await e.load();}function v$2(e){var t,r,i;return null!=(t=null==e||null==(r=e.capabilities)||null==(i=r.query)?void 0:i.supportsPagination)&&t}function F(e){var t,r,i,n;return null!=(t=null==e||null==(r=e.fieldsIndex)||null==(i=r.fields)||null==(n=i.find((e=>"string"===e.type)))?void 0:n.name)?t:""}function x$2(e){return e.displayField||e.layer.displayField||F(e.layer)}function w$3(e,t){return !(!e||!t)&&t.every((t=>$$2(e,t)))}function $$2(e,t){return !!e.getField(t)}function b$3(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return !0;return !1}function j$3(e,t,r){let i=null;const{codedValues:n}=e;return n&&n.some((e=>{const n=e.name,l=r?n:n.toLowerCase();return (r?t:t.toLowerCase())===l&&(i=e.code.toString(),!0)})),i}function I$1(e){return e.replace(/\'/g,"''")}function T(e,t){const r=t&&t.where;return r?`(${e}) AND (${r})`:e}function R({currentTerm:e,field:t,filter:r,exactMatch:i,url:n,type:l}){const o=t.type,s=t.name;if("string"===o||"date"===o||"global-id"===o){const t=c$g.test(n),o=t&&b$3(e)?"N":"";if(i&&"search"===l)return T(`${s} = ${o}'${e}'`,r);const u=t?s:`UPPER(${s})`,a=t?e:e.toUpperCase();return T(`${u} LIKE ${o}${i?`'${a}%'`:`'%${a}%'`}`,r)}if("oid"===o||"small-integer"===o||"integer"===o||"single"===o||"double"===o){const t=Number(e);return isNaN(t)?null:T(`${s} = ${t}`,r)}return T(`${s} = ${e}`,r)}function S$2(e,t){return e?` OR (${t})`:`(${t})`}function L$1({searchTerm:e,layer:t,searchFields:r,filter:i,exactMatch:n,type:l}){const{definitionExpression:o,url:s}=t;let u="";return e&&r&&r.forEach((r=>{const o=t.getField(r),a="function"==typeof t.getFieldDomain&&t.getFieldDomain(r),c=(a&&"coded-value"===a.type?j$3(a,e,n):null)||e||null;if(null!==c){const e=R({currentTerm:c,field:o,filter:i,exactMatch:n,url:s,type:l});e&&(u+=S$2(u,e));}})),o?`(${o}) AND (${u})`:u}function D(e,t){let r=null;const{codedValues:i}=e;return i&&i.length&&i.some((e=>e.code===t&&(r=e.name,!0))),r}function E(e,t){return e[Object.keys(e).find((e=>e.toLowerCase()===t.toLowerCase()))]}function M(e,t,r){const i=e.sourceLayer,{attributes:n}=e,l="function"==typeof i.getFieldDomain&&i.getFieldDomain(r);if(t)return s$23(t,n);if(r&&n){const e=i.getField(r),t=E(n,r);return null==t?"":l&&"coded-value"===l.type?D(l,t):"date"===(null==e?void 0:e.type)?L$x(new Date(t)):"number"==typeof t?t.toString():"string"!=typeof t?"":t.trim()}return ""}function O(e,t,r,i){const n=e.sourceLayer,{attributes:l}=e,{objectIdField:o}=n,s=l[o];return {text:M(e,t.suggestionTemplate,i),key:s,sourceIndex:r}}function C(e,t,r,i){return e.features.map((e=>O(e,t,r,i)))}function N(e,r,n,u,a,c,d){const f=e.clone(),m=e.sourceLayer,g=m&&m.objectIdField,p=g&&e.attributes[g],y=M(e,n.searchTemplate,a),h=a$d(f.geometry,r,c),v="number"==typeof d?p$g(l$2r(h),r,d):h,F=e.clone();return r$1G(v)&&(F.geometry=v$I.fromExtent(v)),{extent:v,target:F,feature:f,key:p,name:y,sourceIndex:u}}function k(e,t,r,i,n,l,o){return e.features.map((e=>N(e,t,r,i,n,l,o)))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var o$4;let n$i=o$4=class extends i$k{constructor(e){super(e),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,t)=>m$7({source:this,...e},t),this.getSuggestions=(e,t)=>g$3({source:this,...e},t);}set layer(e){this._set("layer",e),e&&e.load().catch((()=>{}));}get name(){return this._getLayerTitle()||""}set name(e){void 0!==e?this._override("name",e):this._clearOverride("name");}clone(){return new o$4({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?l$2r(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?l$2r(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var e,t;return null!=(e=null==(t=this.layer.fieldsIndex.fields.find((e=>"string"===e.type)))?void 0:t.name)?e:""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;if(!e.loaded)return "";return `: ${(t||[this._getDisplayField()]).map((t=>{const s=e.getField(t);return s&&s.alias||t})).join(", ")}`}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?`${t}${this._getSearchFieldsString()}`:void 0}};e$1_([d$1S({json:{read:{source:"field.name"},write:{target:"field.name"}}})],n$i.prototype,"displayField",void 0),e$1_([d$1S({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],n$i.prototype,"exactMatch",void 0),e$1_([d$1S({value:null})],n$i.prototype,"layer",null),e$1_([d$1S()],n$i.prototype,"name",null),e$1_([d$1S({type:[String],json:{write:!0}})],n$i.prototype,"orderByFields",void 0),e$1_([d$1S()],n$i.prototype,"searchFields",void 0),e$1_([d$1S()],n$i.prototype,"searchTemplate",void 0),e$1_([d$1S()],n$i.prototype,"suggestionTemplate",void 0),n$i=o$4=e$1_([i$2w("esri.widgets.Search.LayerSearchSource")],n$i);const h$5=n$i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$h(n){return n&&"number"==typeof n.x&&"number"==typeof n.y}function e$4(n){return n&&"number"==typeof n.xmin&&"number"==typeof n.ymin&&"number"==typeof n.xmax&&"number"==typeof n.ymax}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$i=class extends a$2A{constructor(t){super(t),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null;}};e$1_([d$1S({type:String,json:{write:!0}})],i$i.prototype,"address",void 0),e$1_([d$1S({type:Object,json:{write:!0}})],i$i.prototype,"attributes",void 0),e$1_([d$1S({type:M$r,json:{write:!0}})],i$i.prototype,"extent",void 0),e$1_([d$1S({type:b$O,json:{write:!0}})],i$i.prototype,"location",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],i$i.prototype,"score",void 0),i$i=e$1_([i$2w("esri.rest.support.AddressCandidate")],i$i);const c$f=i$i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$5={type:String,json:{read:{source:"token"},write:{target:"token"}}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$8=class extends a$2A{constructor(t){super(t),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null;}};e$1_([d$1S({type:Object,json:{write:!0}})],l$8.prototype,"address",void 0),e$1_([d$1S(t$5)],l$8.prototype,"apiKey",void 0),e$1_([d$1S({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,o)=>{o.category=t?t.join(","):null;}}}})],l$8.prototype,"categories",void 0),e$1_([d$1S({type:String,json:{write:!0}})],l$8.prototype,"countryCode",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],l$8.prototype,"forStorage",void 0),e$1_([d$1S({type:b$O,json:{write:{writer:(t,o)=>{o.location=t?t.clone().normalize():null;}}}})],l$8.prototype,"location",void 0),e$1_([d$1S({type:String,json:{write:!0}})],l$8.prototype,"locationType",void 0),e$1_([d$1S({type:String,json:{write:!0}})],l$8.prototype,"magicKey",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],l$8.prototype,"maxLocations",void 0),e$1_([d$1S({type:[String],json:{write:{writer:(t,o)=>{o.outFields=t?t.join(","):null;}}}})],l$8.prototype,"outFields",void 0),e$1_([d$1S({type:k$s,json:{read:{source:"outSR"},write:{target:"outSR"}}})],l$8.prototype,"outSpatialReference",void 0),e$1_([d$1S({type:M$r,json:{write:{writer:(t,o)=>{const e=t?t.shiftCentralMeridian():null;o.searchExtent=e;}}}})],l$8.prototype,"searchExtent",void 0),l$8=e$1_([i$2w("esri.rest.support.AddressToLocationsParameters")],l$8),l$8.from=b$Z(l$8);const c$e=l$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function d$6(o,n,a){n=c$e.from(n);const d=e$G(o),{address:p,...m}=n.toJSON(),u={...p,...m,f:"json"},c=n$1e({...d.query,...u}),j=r$F(c,a),l=`${d.path}/findAddressCandidates`;return E$t(l,j).then(f$2)}function f$2({data:r}){if(!r)return [];const{candidates:t,spatialReference:e}=r;return t?t.map((r=>{if(!r)return;const{extent:t,location:s}=r,i=!t||e$4(t);return n$h(s)&&i?(t&&(t.spatialReference=e),s.spatialReference=e,c$f.fromJSON(r)):void 0})):[]}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$e=class extends a$2A{constructor(r){super(r),this.addresses=null,this.categories=null,this.countryCode=null,this.locationType=null,this.outSpatialReference=null;}};e$1_([d$1S({type:[Object],json:{read:{reader:r=>r&&r.records?r.records.map((r=>r.attributes)):null},write:{writer:(r,e)=>{const o=[];Array.isArray(r)&&r.forEach((r=>{o.push({attributes:r});})),e.addresses={records:o};}}}})],p$e.prototype,"addresses",void 0),e$1_([d$1S({type:[String],json:{read:{source:"category",reader:r=>r?r.split(","):null},write:{target:"category",writer:(r,e)=>{e.category=r?r.join(","):null;}}}})],p$e.prototype,"categories",void 0),e$1_([d$1S({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],p$e.prototype,"countryCode",void 0),e$1_([d$1S({type:String,json:{write:!0}})],p$e.prototype,"locationType",void 0),e$1_([d$1S({type:k$s,json:{read:{source:"outSR"},write:{target:"outSR"}}})],p$e.prototype,"outSpatialReference",void 0),p$e=e$1_([i$2w("esri.rest.support.AddressesToLocationsParameters")],p$e),p$e.from=b$Z(p$e);const i$h=p$e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function a$c(s,a,c){a=i$h.from(a);const p=e$G(s),f={...a.toJSON(),f:"json"},m=n$1e({...p.query,...f}),u=r$F(m,c),d=`${p.path}/geocodeAddresses`;return E$t(d,u).then(i$g)}function i$g(o){const{data:r}=o;if(!r)return [];const{locations:t,spatialReference:e}=r;return t?t.map((o=>{const{location:r}=o;return r&&(r.spatialReference=e),c$f.fromJSON(o)})):[]}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let a$b=class extends a$2A{constructor(o){super(o),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null;}};e$1_([d$1S(t$5)],a$b.prototype,"apiKey",void 0),e$1_([d$1S({type:b$O,json:{write:{writer:(o,r)=>{const t=o?o.clone().normalize():null,e=void 0!==t;r.location=e?t:null;}}}})],a$b.prototype,"location",void 0),e$1_([d$1S({type:String,json:{write:!0}})],a$b.prototype,"locationType",void 0),e$1_([d$1S({type:k$s,json:{read:{source:"outSR"},write:{target:"outSR"}}})],a$b.prototype,"outSpatialReference",void 0),a$b=e$1_([i$2w("esri.rest.support.LocationToAddressParameters")],a$b),a$b.from=b$Z(a$b);const n$g=a$b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function n$f(e,n,i){n=n$g.from(n);const c=e$G(e),m={...n.toJSON(),f:"json"},u=n$1e({...c.query,...m}),f=r$F(u,i),p=`${c.path}/reverseGeocode`;return E$t(p,f).then(d$5)}function d$5({data:r}){if(!r)return;const{address:o,location:t}=r,s=o&&o.Match_addr||"";return c$f.fromJSON({address:s,attributes:o||{},location:t,score:100})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$3=class extends a$2A{constructor(o){super(o),this.isCollection=null,this.magicKey=null,this.text=null;}};e$1_([d$1S({type:Boolean,json:{write:!0}})],e$3.prototype,"isCollection",void 0),e$1_([d$1S({type:String,json:{write:!0}})],e$3.prototype,"magicKey",void 0),e$1_([d$1S({type:String,json:{write:!0}})],e$3.prototype,"text",void 0),e$3=e$1_([i$2w("esri.rest.support.SuggestionCandidate")],e$3);const p$d=e$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$d=class extends a$2A{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null;}};e$1_([d$1S(t$5)],c$d.prototype,"apiKey",void 0),e$1_([d$1S({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,o)=>{o.category=t?t.join(","):null;}}}})],c$d.prototype,"categories",void 0),e$1_([d$1S({type:String,json:{write:!0}})],c$d.prototype,"countryCode",void 0),e$1_([d$1S({type:b$O,json:{write:{writer:(t,o)=>{o.location=t?t.clone().normalize():null;}}}})],c$d.prototype,"location",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],c$d.prototype,"maxSuggestions",void 0),e$1_([d$1S({type:k$s,json:{read:{source:"outSR"},write:{target:"outSR"}}})],c$d.prototype,"outSpatialReference",void 0),e$1_([d$1S({type:M$r,json:{write:{writer:(t,o)=>{const e=t?t.shiftCentralMeridian():null;o.searchExtent=JSON.stringify(e);}}}})],c$d.prototype,"searchExtent",void 0),e$1_([d$1S({type:String,json:{write:!0}})],c$d.prototype,"text",void 0),c$d=e$1_([i$2w("esri.rest.support.SuggestLocationsParameters")],c$d),c$d.from=b$Z(c$d);const l$7=c$d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function u$5(n,u,m){const p=e$G(n),a={...(u=l$7.from(u)).toJSON(),f:"json"},f=n$1e({...p.query,...a}),g=r$F(f,m),c=`${p.path}/suggest`;return E$t(c,g).then(i$f)}function i$f(t){const{data:o}=t;if(!o)return [];const{suggestions:r}=o;return r?r.map((t=>new p$d(t))):[]}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let n$e=class extends l$S{constructor(t){super(t),this.outSpatialReference=null,this.url=null;}addressToLocations(t,e){!t.outSpatialReference&&this.outSpatialReference&&(t.outSpatialReference=this.outSpatialReference);const o={...this.requestOptions,...e};return d$6(this.url,t,o)}suggestLocations(t,e){const o={...this.requestOptions,...e};return u$5(this.url,t,o)}addressesToLocations(t,e){!t.outSpatialReference&&this.outSpatialReference&&(t.outSpatialReference=this.outSpatialReference);const o={...this.requestOptions,...e};return a$c(this.url,t,o)}locationToAddress(t,e){!t.outSpatialReference&&this.outSpatialReference&&(t.outSpatialReference=this.outSpatialReference);const o={...this.requestOptions,...e};return n$f(this.url,t,o)}};e$1_([d$1S({type:k$s})],n$e.prototype,"outSpatialReference",void 0),e$1_([d$1S()],n$e.prototype,"url",void 0),n$e=e$1_([i$2w("esri.tasks.Locator")],n$e);const u$4=n$e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const f$1="Single Line Input",d$4=3e5;function g$2(e,o){return e.location?j$2(e,o):$$1(e,o)}function p$c(e){const o=null==e?void 0:e.scale;return "number"==typeof o&&o<=d$4?e.get("extent.center"):null}function y$4(e,t){const{source:r,spatialReference:s,view:n,suggestTerm:c,maxSuggestions:a,sourceIndex:l}=e,m=new l$7,{apiKey:f,url:d}=r,g=I(r,n),y=t&&t.signal;if(!d)return Promise.resolve(null);f&&(m.apiKey=f),r.categories&&(m.categories=r.categories),s&&(m.outSpatialReference=s);const x=p$c(n);x&&(m.location=x);if(!c.trim())return Promise.resolve(null);const{prefix:v="",suffix:S=""}=r,w=`${v}${c}${S}`;return m.text=w,g&&(m.searchExtent=e$1Y(g)),m.maxSuggestions=a,r.countryCode&&(m.countryCode=r.countryCode),u$5(d,m,{signal:y}).then((e=>K$1(e,l)))}function x$1(e){return !!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function v$1(e){return !!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function S$1(e){return !!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}const w$2="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";function j$2(e,o){const{source:t,spatialReference:r,location:s,sourceIndex:i,view:c}=e,{apiKey:u,url:l,zoomScale:m,defaultZoomScale:f}=t,d=c&&c.scale,g=o&&o.signal,p=new n$g;return p.location=s,u&&(p.apiKey=u),r&&(p.outSpatialReference=r),n$f(l,p,{signal:g}).then((e=>P$1([e],{sourceIndex:i,scale:d,view:c,zoomScale:m,defaultZoomScale:f})))}function I(e,o){const{filter:t,withinViewEnabled:r}=e,s=o&&o.scale,n=o&&o.extent,i=t&&t.geometry;return a$d(i,o,s)||(r&&n?n:void 0)}function $$1(e,t){const{source:r,suggestResult:n,spatialReference:i,view:a,maxResults:u,sourceIndex:l}=e,m=r&&r.zoomScale,d=r&&r.defaultZoomScale;if(!n.text.trim())return Promise.resolve(null);const g=!n.key&&r.prefix?r.prefix:"",y=!n.key&&r.suffix?r.suffix:"",x=`${g}${n.text}${y}`,v=new c$e,{apiKey:S,url:w}=r,j=a&&a.scale,$=I(r,a),h=t&&t.signal;if(S&&(v.apiKey=S),!w)return Promise.resolve(null);r.categories&&(v.categories=r.categories),r.locationType&&(v.locationType=r.locationType),i&&(v.outSpatialReference=i);const K=p$c(a);K&&(v.location=K),v.maxLocations=u,$&&(v.searchExtent=e$1Y($)),r.countryCode&&(v.countryCode=r.countryCode);const{key:L}=n,R=`${L}`;return L&&(v.magicKey=R),v.address={},v.address[r.singleLineFieldName||f$1]=x,r.outFields&&(v.outFields=r.outFields),d$6(w,v,{signal:h}).then((e=>P$1(e,{key:R,scale:j,sourceIndex:l,view:a,zoomScale:m,defaultZoomScale:d})))}function h$4(e,o){return {text:e.text,key:e.magicKey,sourceIndex:o}}function K$1(e,o){return e.map((e=>h$4(e,o)))}function L(o,s){const{key:n,scale:i,sourceIndex:c,view:a,zoomScale:u,defaultZoomScale:f}=s,{attributes:d,extent:g,location:p,address:y}=o,x=new h$U({geometry:p,attributes:d}),v=g||p,S=a$d(v,a,i),w="number"==typeof u?p$g(S,a,u):"number"==typeof f&&"point"===v.type?p$g(S,a,f):S,j=p?`${p.x},${p.y}`:"",I=y||j,$=x.clone();return r$1G(w)&&($.geometry=v$I.fromExtent(w)),{extent:w,feature:x,target:$,key:n,name:I,sourceIndex:c}}function P$1(e,o){return e.filter(Boolean).map((e=>L(e,o)))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$d;const u$3="esri.widgets.Search.LocatorSearchSource",h$3=s$2h.getLogger(u$3);let d$3=n$d=class extends i$k{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(e,t)=>g$2({source:this,...e},t),this.getSuggestions=(e,t)=>y$4({source:this,...e},t);}set locator(e){r$1v(h$3,"locator",{replacement:"url",version:"4.22"}),this._set("url",e.url),this._set("locator",e);}get locator(){return r$1v(h$3,"locator",{replacement:"url",version:"4.22"}),this._get("locator")}clone(){return new n$d({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?l$2r(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?l$2r(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};e$1_([d$1S()],d$3.prototype,"apiKey",void 0),e$1_([d$1S()],d$3.prototype,"categories",void 0),e$1_([d$1S()],d$3.prototype,"countryCode",void 0),e$1_([d$1S({json:{write:!0}})],d$3.prototype,"defaultZoomScale",void 0),e$1_([d$1S({type:u$4,json:{read:!1,write:!1}})],d$3.prototype,"locator",null),e$1_([d$1S()],d$3.prototype,"locationType",void 0),e$1_([d$1S({json:{write:!0}})],d$3.prototype,"name",void 0),e$1_([d$1S({json:{write:!0}})],d$3.prototype,"placeholder",void 0),e$1_([d$1S()],d$3.prototype,"searchTemplate",void 0),e$1_([d$1S({json:{write:!0}})],d$3.prototype,"singleLineFieldName",void 0),e$1_([d$1S({json:{read:{source:"suggest"},write:{target:"suggest"}}})],d$3.prototype,"suggestionsEnabled",void 0),e$1_([d$1S({json:{write:!0}})],d$3.prototype,"url",void 0),e$1_([d$1S({json:{write:!0}})],d$3.prototype,"zoomScale",void 0),d$3=n$d=e$1_([i$2w(u$3)],d$3);const m$6=d$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const _=new o$1K({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$b=class extends a$2A{constructor(r){super(r),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null;}};e$1_([d$1S({type:String,json:{write:!0}})],p$b.prototype,"deviationUnit",void 0),e$1_([d$1S({json:{read:{reader:r=>r?r.map((r=>d$1t(r))):null},write:{writer:(r,o)=>{o.geometries=r.map((r=>r.toJSON()));}}}})],p$b.prototype,"geometries",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],p$b.prototype,"maxDeviation",void 0),p$b=e$1_([i$2w("esri.rest.support.GeneralizeParameters")],p$b),p$b.from=b$Z(p$b);const a$a=p$b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$e=new o$1K({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});function r$4(e){const{geometries:r,deviationUnit:s,maxDeviation:o}=e.toJSON(),n={maxDeviation:o};return r&&r.length&&(n.geometries=JSON.stringify({geometryType:v$H(r[0]),geometries:r}),n.sr=JSON.stringify(r[0].spatialReference)),i$e.write(s,n,"deviationUnit"),n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$6=class extends a$2A{constructor(o){super(o),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null;}};e$1_([d$1S({type:String,json:{write:!0}})],l$6.prototype,"calculationType",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],l$6.prototype,"geodesic",void 0),e$1_([d$1S({json:{write:!0}})],l$6.prototype,"lengthUnit",void 0),e$1_([d$1S({type:[m$1L],json:{read:{reader:o=>o?o.map((o=>d$1t(o))):null},write:{writer:(o,r)=>{r.polylines=o.map((o=>o.toJSON()));}}}})],l$6.prototype,"polylines",void 0),l$6=e$1_([i$2w("esri.rest.support.LengthsParameters")],l$6),l$6.from=b$Z(l$6);const n$c=l$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$b=new o$1K({preserveShape:"preserve-shape"});function o$3(e){const{polylines:o,lengthUnit:t,geodesic:i,calculationType:s}=e.toJSON(),r={};r.polylines=JSON.stringify(o);const l=e.polylines[0].spatialReference;return r.sr=l.wkid?l.wkid:JSON.stringify(l.toJSON()),t&&(r.lengthUnit=t),i&&(r.geodesic=i),s&&(r.calculationType=n$b.toJSON(s)),r}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$d=class extends a$2A{constructor(o){super(o),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null;}};e$1_([d$1S({type:Number,json:{write:!0}})],i$d.prototype,"bevelRatio",void 0),e$1_([d$1S({json:{read:{reader:o=>o?o.map((o=>d$1t(o))):null},write:{writer:(o,t)=>{t.geometries=o.map((o=>o.toJSON()));}}}})],i$d.prototype,"geometries",void 0),e$1_([d$1S({type:Number,json:{write:!0}})],i$d.prototype,"offsetDistance",void 0),e$1_([d$1S({type:String,json:{write:!0}})],i$d.prototype,"offsetHow",void 0),e$1_([d$1S({type:String,json:{write:!0}})],i$d.prototype,"offsetUnit",void 0),i$d=e$1_([i$2w("esri.rest.support.OffsetParameters")],i$d),i$d.from=b$Z(i$d);const m$5=i$d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$2=new o$1K({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),s$9=new o$1K({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});function r$3(e){const{geometries:r,bevelRatio:i,offsetDistance:f,offsetHow:n,offsetUnit:m}=e.toJSON(),l={bevelRatio:i,offsetDistance:f};return r&&r.length&&(l.geometries=JSON.stringify({geometryType:v$H(r[0]),geometries:r}),l.sr=JSON.stringify(r[0].spatialReference)),n&&(l.offsetHow=o$2.toJSON(n)),m&&(l.offsetUnit=s$9.toJSON(m)),l}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$2(t){return {geometryType:v$H(t[0]),geometries:t.map((e=>e.toJSON()))}}function o$1(e,r,o){const n=a$2v(r);return e.map((e=>{const t=n.fromJSON(e);return t.spatialReference=o,t}))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$c=class extends a$2A{constructor(r){super(r),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null;}toJSON(){const r=this.geometries.map((function(r){return r.toJSON()})),t=this.geometries[0],o={};return o.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),o.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),o.geometries=JSON.stringify({geometryType:v$H(t),geometries:r}),this.transformation&&(o.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(o.transformForward=this.transformForward),o}};e$1_([d$1S()],i$c.prototype,"geometries",void 0),e$1_([d$1S({json:{read:{source:"outSR"}}})],i$c.prototype,"outSpatialReference",void 0),e$1_([d$1S()],i$c.prototype,"transformation",void 0),e$1_([d$1S()],i$c.prototype,"transformForward",void 0),i$c=e$1_([i$2w("esri.rest.support.ProjectParameters")],i$c);const a$9=i$c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$b=b$Z(a$9);async function n$a(o,m,n){m=i$b(m);const u=e$G(o),c={...u.query,f:"json",...m.toJSON()},j=m.outSpatialReference,a=v$H(m.geometries[0]),f=r$F(c,n);return E$t(u.path+"/project",f).then((({data:{geometries:r}})=>o$1(r,a,j)))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$a=class extends a$2A{constructor(r){super(r),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null;}};e$1_([d$1S({json:{read:{reader:r=>r?r.map((r=>d$1t(r))):null},write:{writer:(r,e)=>{e.geometries1=r.map((r=>r.toJSON()));}}}})],p$a.prototype,"geometries1",void 0),e$1_([d$1S({json:{read:{reader:r=>r?r.map((r=>d$1t(r))):null},write:{writer:(r,e)=>{e.geometries2=r.map((r=>r.toJSON()));}}}})],p$a.prototype,"geometries2",void 0),e$1_([d$1S({type:String,json:{write:!0}})],p$a.prototype,"relation",void 0),e$1_([d$1S({type:String,json:{write:!0}})],p$a.prototype,"relationParameter",void 0),p$a=e$1_([i$2w("esri.rest.support.RelationParameters")],p$a),p$a.from=b$Z(p$a);const a$8=p$a;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$4=new o$1K({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});function o(e){const{geometries1:o,geometries2:r,relation:n,relationParameter:s}=e.toJSON(),a={};if(o&&o.length){a.geometries1=JSON.stringify({geometryType:v$H(o[0]),geometries:o});const e=o[0].spatialReference;a.sr=e.wkid?e.wkid:JSON.stringify(e);}return r&&r.length>0&&(a.geometries2=JSON.stringify({geometryType:v$H(r[0]),geometries:r})),n&&(a.relation=t$4.toJSON(n)),s&&(a.relationParam=s),a}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let m$4=class extends a$2A{constructor(r){super(r),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null;}};e$1_([d$1S({type:String,json:{write:!0}})],m$4.prototype,"extendHow",void 0),e$1_([d$1S({type:[m$1L],json:{read:{reader:r=>r?r.map((r=>d$1t(r))):null},write:{writer:(r,o)=>{o.polylines=r.map((r=>r.toJSON()));}}}})],m$4.prototype,"polylines",void 0),e$1_([d$1S({json:{read:{reader:r=>r?d$1t(r):null},write:{writer:(r,o)=>{o.trimExtendTo=r.toJSON();}}}})],m$4.prototype,"trimExtendTo",void 0),m$4=e$1_([i$2w("esri.rest.support.TrimExtendParameters")],m$4),m$4.from=b$Z(m$4);const n$9=m$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$3=new o$1K({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});function n$8(e){const{extendHow:n,polylines:o,trimExtendTo:r}=e.toJSON(),i={};return i.extendHow=t$3.toJSON(n),o&&o.length&&(i.polylines=JSON.stringify(o),i.sr=JSON.stringify(o[0].spatialReference)),r&&(i.trimExtendTo=JSON.stringify(r)),i}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u$2=s$2h.getLogger("esri.widgets.support.geolocationUtils"),c$c={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function p$9(){const e=s$2l("esri-geolocation");return e||u$2.warn("geolocation-unsupported","Geolocation unsupported."),e}function l$5(){const e=window.isSecureContext;return e||u$2.warn("insecure-context","Geolocation requires a secure origin."),e}function g$1(){return p$9()&&l$5()}function f(e){const r=15e3;return e||(e=c$c),new Promise(((o,i)=>{setTimeout((()=>i(new s$29("geolocation:timeout","getting the current geolocation position timed out"))),r),navigator.geolocation.getCurrentPosition(o,i,e);}))}function j$1(e,t){const{position:r,view:o}=e;return P(y$3(d$2(r)),o,t)}function d$2(e){const t=e&&e.coords||{},r={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e?{coords:r,timestamp:e.timestamp}:e}function y$3(e){const t=e&&e.coords;return t?new b$O({longitude:t.longitude,latitude:t.latitude,z:t.altitude||null,spatialReference:{wkid:4326}}):null}function P(e,r,o){if(!r)return Promise.resolve(e);const i=r.spatialReference;return i.isWGS84?Promise.resolve(e):i.isWebMercator?Promise.resolve(R$o(e)):w$1(o).then((r=>{if(!r)throw new s$29("geometry-service:missing-url","Geometry service URL is missing");const s=new a$9({geometries:[e],outSpatialReference:i});return n$a(r,s,o).then((e=>e[0]))}))}function w$1(t){if(t$1K.geometryServiceUrl)return Promise.resolve(t$1K.geometryServiceUrl);const r=B$d.getDefault();return r.load(t).catch((()=>{})).then((()=>r.get("helperServices.geometry.url")))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function Z$1(e,t){return e.hasOwnProperty(t)&&null!=e[t]&&""!==e[t]}const q=()=>u$22("esri/widgets/Search/t9n/Search"),z="esri.widgets.Search.SearchViewModel",K=s$2h.getLogger(z),W="highlight",X$1=S$F.ofType({key:e=>e.layer?"layer":"locator",base:i$k,typeMap:{layer:h$5,locator:m$6}}),Y$1=k$s.WGS84,$="esri/images/search/search-symbol-32.svg",ee$1="esri/images/search/search-symbol-32.png",te$1=/<(?:.|\s)*?>/g,se$1=-1;let re$1=class extends(e$n(n$2y.EventedMixin(p$33))){constructor(e){super(e),this._handles=new u$1X,this._gotoController=null,this._searching=null,this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new X$1,this.defaultSymbols={point:new n$21({url:a$2O(s$2l("trident")?ee$1:$),size:24,width:24,height:24}),polyline:new m$1E({color:[130,130,130,1],width:2}),polygon:new S$x({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=B$d.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new X$1,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null;}initialize(){const e=async()=>{const e=await q();this.messages=e,this.defaultPopupTemplate=new M$k({title:e.searchResult,content:"{Match_addr}"});};e(),this._handles.add([$$f(this,["defaultSources","sources"],"change",(()=>this.notifyChange("allSources"))),i$2i(this,["includeDefaultSources","view","portal"],(()=>this._update())),g$16(e)]);}destroy(){this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null;}get activeSource(){return this.allSources.getItemAt(this.activeSourceIndex)||null}get activeSourceIndex(){return 1===this.allSources.length||!this.searchAllEnabled?0:se$1}set activeSourceIndex(e){void 0!==e?this._override("activeSourceIndex",e):this._clearOverride("activeSourceIndex");}get allPlaceholder(){var e;return null==(e=this.messages)?void 0:e.allPlaceholder}set allPlaceholder(e){e?this._override("allPlaceholder",e):this._clearOverride("allPlaceholder");}get allSources(){const{sources:e,defaultSources:t,includeDefaultSources:s}=this,r="function"==typeof s?s.call(null,{sources:e,defaultSources:t}):s?t.concat(e):e,o=this._get("allSources")||new X$1;return o.removeAll(),o.addMany(r.filter(Boolean)),o}get defaultSymbol(){return r$1v(K,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._get("defaultSymbol")}set defaultSymbol(e){r$1v(K,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._set("defaultSymbol",e);}get locationEnabled(){return this._get("locationEnabled")||g$1()}set locationEnabled(e){if(void 0===e)return void this._clearOverride("locationEnabled");const t=g$1();if(e&&!t){const e=new s$29("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});K.error(e);}this._override("locationEnabled",e&&t);}get placeholder(){const{allSources:e,activeSourceIndex:t,allPlaceholder:s}=this;if(t===se$1)return s;const r=e.getItemAt(t);return r?r.placeholder:""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),""===e&&this._clear();}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}get updating(){return null!=this._updatingPromise}clear(){this.searchTerm="";}clearGraphics(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null);}search(e,t){this.emit("search-start"),this.clearGraphics();const s=this._createSuggestionForSearch(e),r=this.when().then((()=>this._getResultsFromSources(s,t).then((e=>{var r;if(null!=(r=e$1Y(null==t?void 0:t.signal))&&r.aborted)return null;const o={activeSourceIndex:this.activeSourceIndex,searchTerm:s.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(o,e,s);const l=this._getFirstResult(o.results),i=(s.location&&l?l.name:s.text).replace(te$1,"");return this._set("searchTerm",i),(s.key&&"number"==typeof s.sourceIndex||s.location)&&this._set("selectedSuggestion",s),this._set("results",o.results),this._set("resultCount",o.results.reduce(((e,t)=>e+t.results.length),0)),this.emit("search-complete",o),this._selectFirstResult(l).then((()=>o))})))).then((e=>(this._clearSearching(),e)),(e=>{throw this._clearSearching(),e}));return this._searching=r,this.notifyChange("state"),r}searchNearby(e){if(!this.locationEnabled){const e=new s$29("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return K.error(e),Promise.reject(e)}const t=f().then((t=>j$1({position:t,view:this.view},e))).then((t=>this.search(t,e)));return this._searching=t,this.notifyChange("state"),t.catch((()=>{})).then((()=>this._clearSearching())),t}select(e){if(this.clearGraphics(),!e){const t=new s$29("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});return K.error(t),Promise.reject(t)}const{view:t}=this,s=Z$1(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),o=this.allSources.getItemAt(s);if(!o){const e=new s$29("select:missing-source","Cannot select without a source.",{source:o});return K.error(e),Promise.reject(e)}const l=o instanceof h$5?this._getLayerSourcePopupTemplate(o):o.popupTemplate,i=o.resultSymbol||this._getDefaultSymbol(e),a=Z$1(o,"resultGraphicEnabled")?o.resultGraphicEnabled:this.resultGraphicEnabled,u=Z$1(o,"autoNavigate")?o.autoNavigate:this.autoNavigate,c=Z$1(o,"popupEnabled")?o.popupEnabled:this.popupEnabled,h=c?l||this.popupTemplate||this.defaultPopupTemplate:null,{feature:p}=e;if(!p){const e=new s$29("select:missing-feature","Cannot select without a feature.",{feature:p});return K.error(e),Promise.reject(e)}const{attributes:d,geometry:y,layer:f,sourceLayer:S}=p,v=m$8(y),_={layerViewQuery:this._getLayerView(p),elevationQuery:t&&r$1G(v)?s$a(v,t).catch((()=>v)):Promise.resolve(v)};return T$o(_).then((l=>{const n=l.layerViewQuery.value,m=l.elevationQuery.value;i instanceof c$2c&&(i.text=e.name);const v=t&&u?e.target||e.extent:null;return (r$1G(v)?this._goToSearchResult(v):Promise.resolve()).then((()=>{var l;const u=n?p:new h$U({geometry:y,symbol:i,attributes:d,layer:f,sourceLayer:S,popupTemplate:h}),g=c&&(null==(l=this.view)?void 0:l.popup),v=g&&u.getEffectivePopupTemplate(g.defaultPopupTemplateEnabled);return v&&t.popup.open({features:[u],location:m}),n&&e$o(n)&&!v&&this._highlightFeature({graphic:u,layerView:n}),!n&&a&&t&&t.graphics.push(u),this._set("selectedResult",e),this._set("resultGraphic",u),this.emit("select-result",{result:e,source:o,sourceIndex:s}),e}))}))}suggest(e,t,s){const r=e||this.searchTerm;return this.emit("suggest-start",{searchTerm:r}),this._suggestTimer(t,s).then((()=>this._suggestImmediate(r,s).then((e=>(this._set("suggestions",e.results),this._set("suggestionCount",e.results.reduce(((e,t)=>e+t.results.length),0)),this.emit("suggest-complete",e),e)))))}async when(){await g$10(this,"updating");}async _update(){const{portal:e,view:t}=this;if(this.includeDefaultSources){const s=this._updatingPromise=T$o([null==e?void 0:e.load(),null==t?void 0:t.when()]);if(this.destroyed)return;if(this.notifyChange("updating"),await s,s!==this._updatingPromise)return}this._updatingPromise=null,this.notifyChange("updating");const s=a$2N(this,"messages");this.destroyed||(this._handles.add(s),await s,this._updateDefaultSources());}_clearSearching(){this._searching=null,this.notifyChange("state");}_convertHelperServices(){var e,t;const r=null==(e=this.portal)||null==(t=e.helperServices)?void 0:t.geocode;if(!r)return [];return r.map((e=>{if(!1===e.placefinding)return;const t=t$1K.apiKey&&S$1(e.url)?{url:w$2}:null,r=m$6.fromJSON({...e,...t}),o=r.url;if(S$1(o)||v$1(o)||x$1(o)){const e=r.outFields||["Addr_type","Match_addr","StAddr","City"],t=r.placeholder||this.messages.placeholder,s="number"==typeof r.defaultZoomScale?r.defaultZoomScale:2500;r.set({singleLineFieldName:"SingleLine",outFields:e,placeholder:t,defaultZoomScale:s});}return r.singleLineFieldName?r:void 0})).filter(Boolean)}_getLayerSources(e,t){var s;const r=null==(s=this.view)?void 0:s.map;return e.map((e=>{const s=r.findLayerById(e.id);if(!s)return;const o=this._getLayerJSON(e),l=h$5.fromJSON(o);return l.placeholder=t,this._getLayer(s,o).then((e=>{l.layer=e;})),l})).filter(Boolean).toArray()}_getTableSources(e,t){var s;const r=null==(s=this.view)?void 0:s.map;return e.map((e=>{const s=r.findTableById(e.id);if(!s)return;const o=this._getLayerJSON(e),l=h$5.fromJSON(o);return l.placeholder=t,this._getLayer(s,o).then((e=>{l.layer=e;})),l})).filter(Boolean).toArray()}_convertApplicationProperties(){var e,t,s;const r=null==(e=this.view)?void 0:e.map,o=null==r||null==(t=r.applicationProperties)||null==(s=t.viewing)?void 0:s.search;if(!o)return [];const{enabled:l,hintText:i,layers:a,tables:n}=o;if(!l)return [];return [...this._getLayerSources(a,i),...this._getTableSources(n,i)]}_getSubLayer(e,t){return e.load().then((()=>{if(!e.allSublayers)return Promise.reject();const s=e.allSublayers.find((e=>e.id===t.subLayer));return s?s.createFeatureLayer():Promise.reject()}))}async _getBuildingSubLayer(e,t){await e.load();const s=e.allSublayers.find((e=>e.id===t.subLayer));return "building-component"!==(null==s?void 0:s.type)?Promise.reject():(await s.load(),null==s.associatedLayer?Promise.reject():(await s.associatedLayer.load(),s))}_getLayer(e,t){return "feature"===e.type||"scene"===e.type||"csv"===e.type||"geojson"===e.type||"ogc-feature"===e.type?Promise.resolve(e):"map-image"===e.type?this._getSubLayer(e,t).catch((()=>{const t=new s$29("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return K.error(t),null})):"building-scene"===e.type?this._getBuildingSubLayer(e,t):Promise.resolve(null)}_getLayerJSON(e){return "function"==typeof e.toJSON?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:t}=this;e.removeAll(),t&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()]),this.notifyChange("allSources");}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null;}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear");}_closePopup(){var e;const t=null==(e=this.view)?void 0:e.popup,{resultGraphic:s}=this;if(!t||!s)return;const{selectedFeature:r}=t;r&&r===s&&t.close();}_suggestTimer(e,t){const s=null!=e?e:this.suggestionDelay;return L$w(s,null,t&&t.signal)}_createLocationForSearch(e){return e instanceof h$U?m$8(e.geometry):e instanceof b$O?e:Array.isArray(e)&&2===e.length?new b$O({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&Z$1(e,"key")&&Z$1(e,"text")&&Z$1(e,"sourceIndex"))return e;const t=this._createLocationForSearch(e),s="string"==typeof e?e:this.searchTerm,{selectedSuggestion:r,selectedResult:o}=this,l=!e&&r&&o,i=l&&r.key===o.key&&r.sourceIndex===o.sourceIndex,a=l&&r.location;return i||a?r:{location:e$1Y(t),text:t?"":s,sourceIndex:null,key:null}}_getFirstResult(e){let t=null;return e&&e.some((e=>{const{results:s}=e,r=s[0],o=!!r;return o&&(t=r),o})),t}_selectFirstResult(e){return this.autoSelect&&e?this.select(e):Promise.resolve(null)}_suggestImmediate(e,t){return this.when().then((()=>this._getSuggestionsFromSources(e,t))).then((s=>{var r;if(null!=(r=e$1Y(null==t?void 0:t.signal))&&r.aborted)return null;const o={activeSourceIndex:this.activeSourceIndex,searchTerm:e,numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(o,s),o}))}_formatSourceResponse(e,t,s){const r=t&&t.value||[],o=t&&t.error,l=this.allSources.getItemAt(s);if(o){const t={sourceIndex:s,source:l,error:o};e.errors.push(t),K.error(o),e.numErrors++;}else {const t={sourceIndex:s,source:l,results:r};e.results.push(t),e.numResults+=r.length;}}_formatResponse(e,t,s){if(t)if(e.activeSourceIndex===se$1){const r=s&&Z$1(s,"sourceIndex")&&-1!==s.sourceIndex?s.sourceIndex:void 0;t.forEach(((t,s)=>{const o=void 0!==r?r:s;this._formatSourceResponse(e,t,o);}));}else this._formatSourceResponse(e,t[0],e.activeSourceIndex);}_getResultsFromSources(e,t){const{allSources:s}=this,r=!e.location&&Z$1(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,o=[];if(!s.length){const e=new s$29("search:no-sources-defined","At least one source is required.",{allSources:s});return K.error(e),Promise.reject(e)}return r===se$1?s.forEach(((s,r)=>{o.push(this._getResultsFromSource(e,r,t));})):o.push(this._getResultsFromSource(e,r,t)),T$o(o)}_getSuggestionsFromSources(e,t){const{allSources:s,activeSourceIndex:r}=this,o=[];if(!s.length){const e=new s$29("suggest:no-sources-defined","At least one source is required.",{allSources:s});return K.error(e),Promise.reject(e)}return r===se$1?s.forEach(((s,r)=>{o.push(this._getSuggestionsFromSource(e,r,t));})):o.push(this._getSuggestionsFromSource(e,r,t)),T$o(o)}_getResultsFromSource(e,t,s){var r;const o=this.allSources.getItemAt(t),{location:l=null}=e,i=(null==(r=this.view)?void 0:r.spatialReference)||Y$1,a=Z$1(o,"maxResults")?o.maxResults:this.maxResults,n=!!(o instanceof h$5&&Z$1(o,"exactMatch"))&&o.exactMatch,{view:u}=this;return o.getResults({view:u,sourceIndex:t,location:l,suggestResult:e,spatialReference:i,exactMatch:n,maxResults:a},s)}_getSuggestionsFromSource(e,t,s){const r=this.allSources.getItemAt(t),o=Z$1(r,"suggestionsEnabled")?r.suggestionsEnabled:this.suggestionsEnabled,l=e.length,i=Z$1(r,"minSuggestCharacters")?r.minSuggestCharacters:this.minSuggestCharacters;if(o&&e.trim()&&l>=i){var a;const o=(null==(a=this.view)?void 0:a.spatialReference)||Y$1,l=Z$1(r,"maxSuggestions")?r.maxSuggestions:this.maxSuggestions,{view:i}=this,n=!!(r instanceof h$5&&Z$1(r,"exactMatch"))&&r.exactMatch;return r.getSuggestions({view:i,sourceIndex:t,suggestTerm:e,spatialReference:o,maxSuggestions:l,exactMatch:n},s)}return Promise.resolve(null)}_getLayerSourcePopupTemplate(e){const{layer:t}=e;if(t)return Z$1(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}_getSourceIndexOfResult(e){const t=this.results;let s=null;return t.some((t=>t.results.some((r=>r===e&&(s=t.sourceIndex,!0))))),s}async _goToSearchResult(e){const t=!!e;this._abortGoTo();const s=new AbortController;this._gotoController=s;const r={target:{target:e},options:{animate:t,signal:s.signal}};await this.callGoTo(r),this._gotoController=null;}_getDefaultSymbol(e){var t;const{defaultSymbols:s}=this,r=null==(t=e.feature)?void 0:t.geometry;if(!r$1G(r))return null;const o=this._get("defaultSymbol");if(o&&("point"===r.type||"multipoint"===r.type))return o;switch(r.type){case"point":case"multipoint":return s.point;case"polyline":return s.polyline;case"extent":case"polygon":return s.polygon;default:return null}}_removeHighlight(){this._handles.remove(W);}async _getLayerView(e){const{view:t}=this;if(!e||!t||"building-component"===e.layer.type||"subtype-sublayer"===e.layer.type)return Promise.resolve(null);const{layer:s}=e;return await t.when(),t.whenLayerView(s)}_highlightFeature(e){const{graphic:t,layerView:s}=e,{attributes:r,layer:o}=t,{objectIdField:l}=o,i=r&&r[l],a=s.highlight(i||t);this._handles.add(a,W);}};re$1.ALL_INDEX=se$1,e$1_([d$1S({readOnly:!0,value:null})],re$1.prototype,"activeSource",null),e$1_([d$1S()],re$1.prototype,"activeSourceIndex",null),e$1_([d$1S()],re$1.prototype,"allPlaceholder",null),e$1_([d$1S({readOnly:!0,dependsOn:["defaultSources.length","sources.length","includeDefaultSources"]})],re$1.prototype,"allSources",null),e$1_([d$1S()],re$1.prototype,"autoNavigate",void 0),e$1_([d$1S()],re$1.prototype,"autoSelect",void 0),e$1_([d$1S()],re$1.prototype,"defaultPopupTemplate",void 0),e$1_([d$1S({readOnly:!0})],re$1.prototype,"defaultSources",void 0),e$1_([d$1S()],re$1.prototype,"defaultSymbol",null),e$1_([d$1S()],re$1.prototype,"defaultSymbols",void 0),e$1_([d$1S()],re$1.prototype,"includeDefaultSources",void 0),e$1_([d$1S()],re$1.prototype,"locationEnabled",null),e$1_([d$1S()],re$1.prototype,"maxInputLength",void 0),e$1_([d$1S()],re$1.prototype,"maxResults",void 0),e$1_([d$1S()],re$1.prototype,"maxSuggestions",void 0),e$1_([d$1S()],re$1.prototype,"messages",void 0),e$1_([d$1S()],re$1.prototype,"minSuggestCharacters",void 0),e$1_([d$1S({readOnly:!0})],re$1.prototype,"placeholder",null),e$1_([d$1S()],re$1.prototype,"popupEnabled",void 0),e$1_([d$1S({type:M$k})],re$1.prototype,"popupTemplate",void 0),e$1_([d$1S({type:B$d})],re$1.prototype,"portal",void 0),e$1_([d$1S()],re$1.prototype,"resultCount",void 0),e$1_([d$1S()],re$1.prototype,"resultGraphicEnabled",void 0),e$1_([d$1S({readOnly:!0})],re$1.prototype,"resultGraphic",void 0),e$1_([d$1S({readOnly:!0})],re$1.prototype,"results",void 0),e$1_([d$1S({readOnly:!0})],re$1.prototype,"selectedSuggestion",void 0),e$1_([d$1S()],re$1.prototype,"searchAllEnabled",void 0),e$1_([d$1S({readOnly:!0})],re$1.prototype,"selectedResult",void 0),e$1_([d$1S()],re$1.prototype,"searchTerm",null),e$1_([d$1S({type:X$1})],re$1.prototype,"sources",void 0),e$1_([d$1S({readOnly:!0,dependsOn:["allSources.length","updating"]})],re$1.prototype,"state",null),e$1_([d$1S()],re$1.prototype,"suggestionDelay",void 0),e$1_([d$1S()],re$1.prototype,"suggestionCount",void 0),e$1_([d$1S({readOnly:!0})],re$1.prototype,"suggestions",void 0),e$1_([d$1S()],re$1.prototype,"suggestionsEnabled",void 0),e$1_([d$1S({readOnly:!0})],re$1.prototype,"updating",null),e$1_([d$1S()],re$1.prototype,"view",void 0),e$1_([d$1S()],re$1.prototype,"clear",null),re$1=e$1_([i$2w(z)],re$1);const oe$1=re$1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$7={base:"esri-search-result-renderer esri-widget",anchor:"esri-widget__anchor",showMoreResults:"esri-search-result-renderer__more-results--show-more-results",moreResults:"esri-search-result-renderer__more-results",moreResultsList:"esri-search-result-renderer__more-results-list",moreResultsHeader:"esri-search-result-renderer__more-results-header",moreResultsItem:"esri-search-result-renderer__more-results-item",moreResultsListHeader:"esri-search-result-renderer__more-results-list-header"};let c$b=class extends z$n{constructor(e,s){super(e,s),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null;}render(){const e={[n$7.showMoreResults]:this.showMoreResultsOpen};return n$2o("div",{class:n$7.base},n$2o("div",{key:"esri-search-renderer__container",class:this.classes(n$7.moreResults,e)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return n$2o("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var e;const s=null==(e=this.viewModel)?void 0:e.selectedResult,r=s&&s.name||"";return n$2o("div",{key:"esri-search-renderer__result-name",class:n$7.moreResultsItem},r)}renderMoreResultsLists(){var e;const s=null==(e=this.viewModel)?void 0:e.results,{resultCount:r}=this.viewModel;if(r<2)return null;const t=s.map((e=>this.renderMoreResultsList(e)));return n$2o("div",{key:"esri-search-renderer__more-results-container",class:n$7.moreResultsList},t)}renderMoreResultsButton(){const{messages:e}=this,{resultCount:s}=this.viewModel;return s<2?null:n$2o("div",{key:"esri-search-renderer__more-results-button",class:n$7.moreResultsItem},n$2o("a",{class:n$7.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults))}renderMoreResultsHeader(e,s){return n$2o("div",{key:`esri-search-result-renderer__header-${s}`,class:n$7.moreResultsListHeader},e)}renderMoreResultsList(e){var s,r;const{results:t}=e,o=t.length,l=!!o,i=null==(s=this.viewModel)?void 0:s.selectedResult,n=1===o&&t[0]===i,c=this._getSourceName(e.source,e.sourceIndex),d=(null==(r=this.viewModel)?void 0:r.results.length)>1&&!n?this.renderMoreResultsHeader(c,e.sourceIndex):null,a=l&&t.map(((e,s)=>this.renderMoreResultsListItem(e,s))),h=l&&!n?n$2o("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},a):null;return l?n$2o("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},d,h):null}renderMoreResultsListItem(e,s){return e!==this.get("viewModel.selectedResult")?n$2o("li",{key:`esri-search-result-renderer__list-item-${s}`},n$2o("a",{class:n$7.anchor,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}_showMoreResultsClick(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const s=this.get("viewModel.view.popup");s&&s.reposition();}_selectResultClick(e){e.preventDefault();const s=e.currentTarget["data-result"];this.viewModel&&this.viewModel.select(s);}_getSourceName(e,s){return s===oe$1.ALL_INDEX?this.messages.all:e.name}};e$1_([d$1S(),e$1w("esri/widgets/Search/t9n/Search")],c$b.prototype,"messages",void 0),e$1_([d$1S()],c$b.prototype,"showMoreResultsOpen",void 0),e$1_([d$1S()],c$b.prototype,"viewModel",void 0),e$1_([t$1p()],c$b.prototype,"_showMoreResultsClick",null),e$1_([t$1p()],c$b.prototype,"_selectResultClick",null),c$b=e$1_([i$2w("esri.widgets.Search.SearchResultRenderer")],c$b);const d$1=c$b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const w={base:"esri-search esri-widget",loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:"esri-search--multiple-sources",isLoading:"esri-search--loading",isSearching:"esri-search--searching",showSuggestions:"esri-search--show-suggestions",showSources:"esri-search--sources",showWarning:"esri-search--warning",container:"esri-search__container",input:"esri-search__input",inputContainer:"esri-search__input-container",form:"esri-search__form",submitButton:"esri-search__submit-button",sourcesButton:"esri-search__sources-button",clearButton:"esri-search__clear-button",sourceName:"esri-search__source-name",suggestionsMenu:"esri-search__suggestions-menu",suggestionList:"esri-search__suggestions-list",suggestionListCurrentLocation:"esri-search__suggestions-list--current-location",sourcesMenu:"esri-search__sources-menu",source:"esri-search__source",warningMenu:"esri-search__warning-menu",warningMenuBody:"esri-search__warning-body",warningMenuHeader:"esri-search__warning-header",warningMenuText:"esri-search__warning-text",noValueText:"esri-search__no-value-text",esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"},S=/<[a-z/][\s\S]*>/i;let b$2=class extends z$n{constructor(e,t){super(e,t),this._activeMenuItemIndex=-1,this._handles=new u$1X,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new d$1,this._locateFailed=null,this._container=null,this.activeMenu="none",this.activeSource=null,this.activeSourceIndex=null,this.allPlaceholder=null,this.allSources=null,this.autoNavigate=null,this.autoSelect=null,this.defaultSources=null,this.disabled=!1,this.goToOverride=null,this.iconClass=w.widgetIcon,this.includeDefaultSources=null,this.label=void 0,this.locationEnabled=null,this.maxResults=null,this.maxSuggestions=null,this.messages=null,this.messagesCommon=null,this.minSuggestCharacters=null,this.popupEnabled=null,this.popupTemplate=null,this.portal=null,this.resultGraphic=null,this.resultGraphicEnabled=null,this.results=null,this.searchAllEnabled=null,this.searchTerm=null,this.selectedResult=null,this.sources=null,this.suggestions=null,this.suggestionsEnabled=null,this.view=null,this.viewModel=new oe$1,this._clearActiveMenu=()=>{this.activeMenu="none";},this._removeActiveMenu=e=>{var t;const s=e.relatedTarget;s&&null!=(t=this._container)&&t.contains(s)||this._clearActiveMenu();},this.own(f$1p(this,"searchTerm",(e=>{(e&&"warning"===this.activeMenu||!e&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu();})),$$f(this,"viewModel.allSources","change",(()=>this._watchSourceChanges())),i$2i(this,"activeMenu",(()=>this._resetActiveMenuItemIndex())),i$2i(this,"viewModel.defaultPopupTemplate",(e=>{e&&(e.content=this._renderSearchResultsContent.bind(this));})));}destroy(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null);}get displayedSearchTerm(){return `${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}clear(){}focus(){var e;null==(e=this._inputNode)||e.focus(),this.emit("search-focus");}blur(){var e;null==(e=this._inputNode)||e.blur(),this.emit("search-blur");}search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const t=new AbortController,{signal:s}=t;return this._searchController=t,this.viewModel.search(e,{signal:s}).catch((e=>{if(this._searchController===t)return this._clearActiveMenu(),this._searchController=null,e})).then((e=>{if(this._searchController===t)return this.activeMenu=e.numResults?"none":"warning",this._searchController=null,e}))}suggest(e){this._cancelSuggest();const t=new AbortController,{signal:s}=t;return this._suggestController=t,this.viewModel.suggest(e,null,{signal:s}).then((e=>{if(this._suggestController===t)return this._suggestController=null,e.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),e})).catch((()=>{if(this._suggestController===t)return this._suggestController=null,null}))}render(){const{state:e}=this.viewModel,t={[w.disabled]:"disabled"===e,[w.esriWidgetDisabled]:this.disabled};return n$2o("div",{class:this.classes(w.base,t)},"loading"===e?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:e}=this;return n$2o("button",{"aria-label":e.searchButtonTitle,bind:this,class:this.classes(w.submitButton,w.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle},n$2o("span",{"aria-hidden":"true",class:w.searchIcon}))}renderWarningMenu(){return n$2o("div",{key:"esri-search__error-menu",class:this.classes(w.menu,w.warningMenu)},n$2o("div",{class:w.warningMenuBody},this.renderWarning()))}renderSourceMenuButton(){const{messages:e,activeMenu:t,sourceMenuId:s,sourceMenuButtonId:i}=this,{activeSourceIndex:r,allSources:n}=this.viewModel;return n.length>1?n$2o("button",{id:i,key:"esri-search__source-menu-button",bind:this,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":("source"===t).toString(),"aria-controls":s,class:this.classes(w.sourcesButton,w.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._clearActiveMenu,afterCreate:g$$,"data-node-ref":"_sourceMenuButtonNode"},n$2o("span",{"aria-hidden":"true",class:w.dropdownIcon}),n$2o("span",{"aria-hidden":"true",class:w.dropupIcon}),n$2o("span",{class:w.sourceName},this._getSourceName(r))):null}renderSourcesList(){const{allSources:e,searchAllEnabled:t}=this.viewModel,{_activeMenuItemIndex:s,activeMenu:i,sourceMenuId:r,sourceMenuButtonId:n}=this,o="source"===i&&s>-1?this._buildId("source-item",s):null;return e.length>1?n$2o("ul",{"aria-activedescendant":o,"aria-labelledby":n,id:r,role:"menu",bind:this,afterCreate:g$$,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:w.menuList,tabIndex:-1},t?this.renderSource(oe$1.ALL_INDEX):null,e.map(((e,t)=>this.renderSource(t))).toArray()):null}renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?n$2o("div",{key:"esri-search__source-menu",class:this.classes(w.menu,w.sourcesMenu)},this.renderSourcesList()):null}renderLoader(){const{messages:e,messagesCommon:t}=this;return n$2o("div",{class:w.loader,key:"base-loader"},n$2o("span",{"aria-hidden":"true",class:w.loaderAnimation}),n$2o("span",{class:w.fallbackText},e.searchButtonTitle),n$2o("span",{class:w.loaderText},t.loading))}renderContainer(){const{allSources:e,state:t}=this.viewModel,{activeMenu:s}=this,i={[w.hasMultipleSources]:e.length>1,[w.isLoading]:"loading"===t,[w.isSearching]:"searching"===t,[w.showWarning]:"warning"===s,[w.showSources]:"source"===s,[w.showSuggestions]:"suggestion"===s};return n$2o("div",{tabIndex:-1,afterCreate:e=>{this._container=e,e.addEventListener("focusout",this._removeActiveMenu);},afterRemoved:e=>{e.removeEventListener("focusout",this._removeActiveMenu);},class:this.classes(i,w.container),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?n$2o("button",{bind:this,class:this.classes(w.clearButton,w.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle},n$2o("span",{"aria-hidden":"true",class:w.clearIcon})):null}renderLocationGroup(){const{messages:e,locationEnabled:t,displayedSearchTerm:s}=this,i=t&&!s,r="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return i?n$2o("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(w.menuList,w.suggestionList,w.suggestionListCurrentLocation)},n$2o("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes(w.menuItem,r?w.menuItemFocus:null)},n$2o("span",{"aria-hidden":"true",class:w.locate})," ",e.useCurrentLocation)):null}renderInput(){const{activeMenu:e,locationEnabled:t,displayedSearchTerm:s,messages:i,suggestionsMenuId:r,inputId:n,_activeMenuItemIndex:o}=this,{maxInputLength:a,placeholder:u,searchTerm:l,suggestionCount:c}=this.viewModel,d=!(!(t&&!s)&&!c),h="suggestion"===e&&o>-1?this._buildId("suggestion-item",o):null;return n$2o("input",{"aria-activedescendant":h,"aria-autocomplete":"list","aria-expanded":(d&&"suggestion"===e).toString(),"aria-controls":d?r:null,"aria-haspopup":"listbox","aria-label":i.searchButtonTitle,bind:this,placeholder:u,maxlength:a,autocomplete:"off",type:"text",class:this.classes(w.esriInput,w.input),value:l,id:n,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:g$$,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:l?"":u})}renderForm(){return n$2o("form",{key:"esri-search__form",bind:this,class:w.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(e){const{sourceIndex:t}=e,s=e.results.length,i=e.results;return s?n$2o("ul",{role:"group",key:`esri-search__suggestion-list-${t}`,class:this.classes(w.menuList,w.suggestionList)},i.map((e=>this.renderSuggestion(e,this._menuItemCount++)))):null}renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map((e=>[this.renderSuggestionHeader(e),this.renderSuggestList(e)])):null}renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:t,suggestionsMenuId:s,inputId:i}=this,{suggestionCount:r}=this.viewModel,n=t&&!e||r;return this._menuItemCount=0,n?n$2o("div",{id:s,key:"esri-search__suggestions-menu",class:this.classes(w.menu,w.suggestionsMenu),role:"listbox","aria-labelledby":i,bind:this,afterCreate:g$$,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return n$2o("div",{key:"esri-search__input-container",class:w.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(e){const{allSources:t,activeSourceIndex:s}=this.viewModel,{sourceIndex:i}=e,r=e.results.length,n=t.length>1&&s===oe$1.ALL_INDEX;return r&&n?n$2o("div",{key:`esri-search__suggestion-header-${i}`,class:w.menuHeader},this._getSourceName(i)):null}renderSuggestion(e,t){const{_activeMenuItemIndex:s,messages:i}=this,{searchTerm:r}=this.viewModel;if(r){const{text:n}=e,o=n||i.untitledResult,a=S.test(o),u=[];if(a)u.push(n$2o("div",{innerHTML:o}));else {const e=this._splitResult(o,r),t=r.toLowerCase();e.forEach(((e,s)=>{e&&e.length&&(e.toLowerCase()===t?u.push(n$2o("strong",{key:s},e)):u.push(e));}));}const l="suggestion"===this.activeMenu&&s===t;return n$2o("li",{bind:this,id:this._buildId("suggestion-item",t),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===t).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${t}`,"data-suggestion":e,role:"option",class:this.classes(w.menuItem,l?w.menuItemFocus:null)},u)}}renderSource(e){const{activeSourceIndex:t,searchAllEnabled:s}=this.viewModel,i={[w.menuItemActive]:e===t,[w.menuItemFocus]:"source"===this.activeMenu&&e===(s?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},r=s?e+1:e;return n$2o("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",r),"aria-checked":(e===t).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes(w.source,w.menuItem,i)},this._getSourceName(e))}renderNoResultsWarning(e){const{messages:t}=this,s=e?s$23(t.noResultsFoundForValue,{value:`"${e}"`}):t.noResultsFound;return n$2o("div",{key:"esri-search__no_results"},n$2o("div",{class:w.warningMenuHeader},t.noResults),n$2o("div",{class:w.warningMenuText},s))}renderEmptySearchWarning(){const{messages:e}=this;return n$2o("div",{key:"esri-search__empty-search"},n$2o("span",{"aria-hidden":"true",class:w.noticeIcon}),n$2o("span",{class:w.noValueText},e.emptyValue))}renderLocateWarning(){const{messages:e}=this;return n$2o("div",{key:"esri-search__locate-error"},n$2o("span",{"aria-hidden":"true",class:w.noticeIcon}),n$2o("span",{class:w.noValueText},e.locateError))}renderWarning(){var e;const{displayedSearchTerm:t,_locateFailed:s}=this,{viewModel:i}=this;return s?this.renderLocateWarning():null!=(e=i.selectedSuggestion)&&e.location||t?this.renderNoResultsWarning(t):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1;}_buildId(e,t){return `${this.id}-${e}${void 0===t?"":`-${t}`}`}_watchSourceChanges(){const{_handles:e,viewModel:{allSources:t}}=this,s="sources";e.remove(s),t.forEach((t=>e.add(f$1p(t,"name",(()=>this.scheduleRender())),s)));}_handleSourcesMenuToggleClick(){const e="source"===this.activeMenu;var t;(this.activeMenu=e?"none":"source",this.renderNow(),"source"===this.activeMenu)&&(null==(t=this._sourceListNode)||t.focus());}_handleClearButtonClick(){this.viewModel.clear(),this._focus();}_handleSearchButtonClick(){this.search();}_handleSuggestionClick(e){const t=e.currentTarget["data-suggestion"];t&&(this._focus(),this.search(t));}_handleUseCurrentLocationClick(){this._useCurrentLocation();}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:t}=e;this._searchController=e,this.viewModel.searchNearby({signal:t}).catch((()=>{this._locateFailed=!0,this.activeMenu="warning";})).then((()=>{this._searchController=null;}));}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget);}_setSourceFromMenuItem(e){var t;if(!e)return;const s=e["data-source-index"];this.viewModel.activeSourceIndex=s,this._clearActiveMenu(),null==(t=this._sourceMenuButtonNode)||t.focus();}_cancelSuggest(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null);}_cancelSearch(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1;}_handleInputKeyup(e){var s;const i=i$2r(e);if(e.ctrlKey||e.metaKey||"Copy"===i||"ArrowLeft"===i||"ArrowRight"===i||"Shift"===i)return;if("Tab"===i||"Escape"===i||e.shiftKey&&"Tab"===i)return this._cancelSuggest(),void("Escape"===i&&this._clearActiveMenu());const r="Home"===i||"End"===i||"ArrowUp"===i||"ArrowDown"===i;if("Enter"===i&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const n=null==(s=this._suggestionListNode)?void 0:s.getElementsByTagName("li");if(null!=n&&n.length){if("suggestion"!==this.activeMenu&&this._openSuggestionMenu(),r)return e.preventDefault(),this._cancelSuggest(),void this.handleItemNavigation(i,n,this._suggestionListNode);const t=n[this._activeMenuItemIndex];if("Enter"===i&&t){const e=t["data-suggestion"];return void(e?(this._focus(),this.search(e)):t["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest();}handleItemNavigation(e,t,s){const i=this._activeMenuItemIndex;"Home"===e&&(this._activeMenuItemIndex=0),"End"===e&&(this._activeMenuItemIndex=t.length-1),"ArrowUp"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?t.length-1:this._activeMenuItemIndex-1),"ArrowDown"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex===t.length-1?0:this._activeMenuItemIndex+1),i!==this._activeMenuItemIndex&&w$R(t[this._activeMenuItemIndex],s);}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0);}_openSuggestionMenu(){this.activeMenu="suggestion";}_handleInputPaste(e){const t=e.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value),this.viewModel.searchTerm&&this.suggest();}_handleSourceMenuKeydown(e){const s=i$2r(e);if(y$1k(s)){e.preventDefault();const t=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(t);}else "ArrowUp"!==s&&"ArrowDown"!==s&&"End"!==s&&"Home"!==s||e.preventDefault();}_handleSourceMenuKeyup(e){var s;const i=i$2r(e),r="ArrowUp"===i||"ArrowDown"===i||"End"===i||"Home"===i;var n;if(r&&e.preventDefault(),"Escape"===i)return this._clearActiveMenu(),void(null==(n=this._sourceMenuButtonNode)||n.focus());const o=null==(s=this._sourceListNode)?void 0:s.getElementsByTagName("li");return o&&0!==o.length&&r?("source"!==this.activeMenu&&(this.activeMenu="source"),void this.handleItemNavigation(i,o,this._sourceListNode.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e);}_formSubmit(e){e.preventDefault(),-1===this._activeMenuItemIndex&&this.search();}_getSourceName(e){const{messages:t}=this,s=this.viewModel,{allSources:i}=s,r=i.getItemAt(e);return e===oe$1.ALL_INDEX?t.all:r&&r.name||t.untitledSource}_splitResult(e,t){const s=o$1V(t);return e.replace(new RegExp(`(^|)(${s})(|$)`,"ig"),"$1|$2|$3").split("|")}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};e$1_([d$1S()],b$2.prototype,"_activeMenuItemIndex",void 0),e$1_([d$1S()],b$2.prototype,"displayedSearchTerm",null),e$1_([d$1S({readOnly:!0})],b$2.prototype,"inputId",null),e$1_([d$1S({readOnly:!0})],b$2.prototype,"suggestionsMenuId",null),e$1_([d$1S({readOnly:!0})],b$2.prototype,"sourceMenuId",null),e$1_([d$1S({readOnly:!0})],b$2.prototype,"sourceMenuButtonId",null),e$1_([d$1S()],b$2.prototype,"activeMenu",void 0),e$1_([o$1Q("viewModel.activeSource")],b$2.prototype,"activeSource",void 0),e$1_([o$1Q("viewModel.activeSourceIndex")],b$2.prototype,"activeSourceIndex",void 0),e$1_([o$1Q("viewModel.allPlaceholder")],b$2.prototype,"allPlaceholder",void 0),e$1_([o$1Q("viewModel.allSources")],b$2.prototype,"allSources",void 0),e$1_([o$1Q("viewModel.autoNavigate")],b$2.prototype,"autoNavigate",void 0),e$1_([o$1Q("viewModel.autoSelect")],b$2.prototype,"autoSelect",void 0),e$1_([o$1Q("viewModel.defaultSources")],b$2.prototype,"defaultSources",void 0),e$1_([d$1S()],b$2.prototype,"disabled",void 0),e$1_([o$1Q("viewModel.goToOverride")],b$2.prototype,"goToOverride",void 0),e$1_([d$1S()],b$2.prototype,"iconClass",void 0),e$1_([o$1Q("viewModel.includeDefaultSources")],b$2.prototype,"includeDefaultSources",void 0),e$1_([d$1S({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b$2.prototype,"label",void 0),e$1_([o$1Q("viewModel.locationEnabled")],b$2.prototype,"locationEnabled",void 0),e$1_([o$1Q("viewModel.maxResults")],b$2.prototype,"maxResults",void 0),e$1_([o$1Q("viewModel.maxSuggestions")],b$2.prototype,"maxSuggestions",void 0),e$1_([d$1S(),e$1w("esri/widgets/Search/t9n/Search")],b$2.prototype,"messages",void 0),e$1_([d$1S(),e$1w("esri/t9n/common")],b$2.prototype,"messagesCommon",void 0),e$1_([o$1Q("viewModel.minSuggestCharacters")],b$2.prototype,"minSuggestCharacters",void 0),e$1_([o$1Q("viewModel.popupEnabled")],b$2.prototype,"popupEnabled",void 0),e$1_([o$1Q("viewModel.popupTemplate")],b$2.prototype,"popupTemplate",void 0),e$1_([o$1Q("viewModel.portal")],b$2.prototype,"portal",void 0),e$1_([o$1Q("viewModel.resultGraphic")],b$2.prototype,"resultGraphic",void 0),e$1_([o$1Q("viewModel.resultGraphicEnabled")],b$2.prototype,"resultGraphicEnabled",void 0),e$1_([o$1Q("viewModel.results")],b$2.prototype,"results",void 0),e$1_([o$1Q("viewModel.searchAllEnabled")],b$2.prototype,"searchAllEnabled",void 0),e$1_([o$1Q("viewModel.searchTerm")],b$2.prototype,"searchTerm",void 0),e$1_([o$1Q("viewModel.selectedResult")],b$2.prototype,"selectedResult",void 0),e$1_([o$1Q("viewModel.sources")],b$2.prototype,"sources",void 0),e$1_([o$1Q("viewModel.suggestions")],b$2.prototype,"suggestions",void 0),e$1_([o$1Q("viewModel.suggestionsEnabled")],b$2.prototype,"suggestionsEnabled",void 0),e$1_([o$1Q("viewModel.view")],b$2.prototype,"view",void 0),e$1_([t$1o(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),d$1S({type:oe$1})],b$2.prototype,"viewModel",void 0),e$1_([o$1Q("viewModel.clear")],b$2.prototype,"clear",null),b$2=e$1_([i$2w("esri.widgets.Search")],b$2);const y$2=b$2;

const arcgisSearchCss = "@import url('https://js.arcgis.com/next/esri/themes/light/main.css');";

let ArcGISSearch = class extends HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.searchBlur = createEvent(this, "searchBlur", 7);
    this.searchClear = createEvent(this, "searchClear", 7);
    this.searchComplete = createEvent(this, "searchComplete", 7);
    this.searchFocus = createEvent(this, "searchFocus", 7);
    this.searchStart = createEvent(this, "searchStart", 7);
    this.selectResult = createEvent(this, "selectResult", 7);
    this.suggestComplete = createEvent(this, "suggestComplete", 7);
    this.suggestStart = createEvent(this, "suggestStart", 7);
  }
  validateView(newValue) {
    if (newValue) {
      this.widget.view = newValue;
      if (this.el.parentElement.tagName.toLowerCase() !== 'arcgis-expand') {
        this.widget.view.ui.add(this.widget, this.position);
      }
    }
  }
  componentWillLoad() {
    const search = new y$2({
      container: this.el
    });
    // proxy events
    search.on('search-blur', (e) => this.searchBlur.emit(e));
    search.on('search-clear', (e) => this.searchClear.emit(e));
    search.on('search-complete', (e) => this.searchComplete.emit(e));
    search.on('search-focus', (e) => this.searchFocus.emit(e));
    search.on('search-start', (e) => this.searchStart.emit(e));
    search.on('select-result', (e) => this.selectResult.emit(e));
    search.on('suggest-complete', (e) => this.suggestComplete.emit(e));
    search.on('suggest-start', (e) => this.suggestStart.emit(e));
    this.widget = search;
  }
  render() {
    return (h$1F("div", { class: "search-container" }));
  }
  get el() { return this; }
  static get watchers() { return {
    "view": ["validateView"]
  }; }
  static get style() { return arcgisSearchCss; }
};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$a(i){return i&&"getAtOrigin"in i&&"originOf"in i}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$1(r){r&&r.writtenProperties&&r.writtenProperties.forEach((r=>{const t=r.target;r.newOrigin&&r.oldOrigin!==r.newOrigin&&i$a(t)&&t.updateOrigin(r.propName,r.newOrigin);}));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const y$1=s$2h.getLogger("esri.networks.Network");let m$3=class extends(l$R(m$1A)){constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null;}initialize(){this.when().catch((e=>{var r,t;d$1O(e)||y$1.error("#load()",`Failed to load layer (title: '${null!=(r=this.title)?r:"no title"}', id: '${null!=(t=this.id)?t:"no id"}')`,{error:e});}));}get datasetName(){var e;return null==(e=this.dataElement)?void 0:e.name}get owner(){var e;return null==(e=this.dataElement)?void 0:e.userIdentity}get schemaGeneration(){var e;return null==(e=this.dataElement)?void 0:e.schemaGeneration}get parsedUrl(){const e=this.layerUrl;return e?U$o(e):null}get featureServiceUrl(){const e=this.parsedUrl&&d$y(this.parsedUrl.path);return r$1G(e)?e.url.path:null}get networkServiceUrl(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}get layerId(){const e=this.parsedUrl&&d$y(this.parsedUrl.path);return r$1G(e)?e.sublayer:null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(this.dataElement){const r=this.dataElement.domainNetworks;for(const t of r){for(const r of t.edgeSources?t.edgeSources:[])if(r.sourceId===e)return r.layerId;for(const r of t.junctionSources?t.junctionSources:[])if(r.sourceId===e)return r.layerId}return null}return null}async _fetchLayerMetaData(e,t){const o=await E$t(e,{responseType:"json",query:{f:"json"},...t});this.read(o.data,{origin:"service"});}async _fetchDataElement(e,t,o){if(this.dataElement)return;const s=await E$t(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([t]),f:"json"},...o}).then((e=>{var r;return null==(r=e.data.layerDataElements)?void 0:r[0]}));s&&this.read(s,{origin:"service"});}};e$1_([d$1S({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],m$3.prototype,"id",void 0),e$1_([d$1S({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],m$3.prototype,"title",void 0),e$1_([d$1S({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],m$3.prototype,"layerUrl",void 0),e$1_([d$1S({type:Object,json:{origins:{service:{read:!0}},read:!1}})],m$3.prototype,"dataElement",void 0),e$1_([d$1S({type:M$r,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],m$3.prototype,"fullExtent",void 0),e$1_([d$1S({type:k$s,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],m$3.prototype,"spatialReference",void 0),e$1_([d$1S({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],m$3.prototype,"type",void 0),e$1_([d$1S({readOnly:!0})],m$3.prototype,"datasetName",null),e$1_([d$1S({readOnly:!0})],m$3.prototype,"owner",null),e$1_([d$1S({readOnly:!0})],m$3.prototype,"schemaGeneration",null),e$1_([d$1S({readOnly:!0})],m$3.prototype,"parsedUrl",null),e$1_([d$1S({readOnly:!0})],m$3.prototype,"featureServiceUrl",null),e$1_([d$1S({readOnly:!0})],m$3.prototype,"networkServiceUrl",null),e$1_([d$1S({readOnly:!0})],m$3.prototype,"layerId",null),m$3=e$1_([i$2w("esri.networks.Network")],m$3);const h$2=m$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$8=class extends a$2A{constructor(t){super(t),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null;}};e$1_([d$1S({type:[Object],json:{write:!0}})],s$8.prototype,"conditionBarriers",void 0),e$1_([d$1S({type:[Object],json:{write:!0}})],s$8.prototype,"outputConditions",void 0),e$1_([d$1S({type:[Object],json:{write:!0}})],s$8.prototype,"functions",void 0),e$1_([d$1S({type:[Object],json:{write:!0}})],s$8.prototype,"functionBarriers",void 0),e$1_([d$1S({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],s$8.prototype,"traversabilityScope",void 0),e$1_([d$1S({type:String,json:{write:!0}})],s$8.prototype,"shortestPathNetworkAttributeName",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],s$8.prototype,"includeBarriers",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],s$8.prototype,"validateConsistency",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],s$8.prototype,"ignoreBarriersAtStartingPoints",void 0),s$8=e$1_([i$2w("esri.networks.support.TraceConfiguration")],s$8);const i$9=s$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$2=new o$1K({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork","subnetwork controllers":"subnetwork-controllers",loops:"loops",isolation:"isolation"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$8=class extends i$9{constructor(t){super(t),this.filterBarriers=[],this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.tierName=null,this.validateLocatability=null;}};e$1_([d$1S({type:[Object],json:{write:!0}})],i$8.prototype,"filterBarriers",void 0),e$1_([d$1S({type:String,json:{write:!0}})],i$8.prototype,"domainNetworkName",void 0),e$1_([d$1S({type:String,json:{write:!0}})],i$8.prototype,"filterBitsetNetworkAttributeName",void 0),e$1_([d$1S({type:[Object],json:{write:!0}})],i$8.prototype,"filterFunctionBarriers",void 0),e$1_([d$1S({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],i$8.prototype,"filterScope",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],i$8.prototype,"includeContainers",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],i$8.prototype,"includeContent",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],i$8.prototype,"includeIsolated",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],i$8.prototype,"includeStructures",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],i$8.prototype,"includeUpToFirstSpatialContainer",void 0),e$1_([d$1S({type:Object,json:{write:!0}})],i$8.prototype,"nearestNeighbor",void 0),e$1_([d$1S({type:[Object],json:{write:!0}})],i$8.prototype,"outputFilterCategories",void 0),e$1_([d$1S({type:[Object],json:{write:!0}})],i$8.prototype,"outputFilters",void 0),e$1_([d$1S({type:[Object],json:{write:!0}})],i$8.prototype,"propagators",void 0),e$1_([d$1S({type:String,json:{write:!0}})],i$8.prototype,"subnetworkName",void 0),e$1_([d$1S({type:String,json:{write:!0}})],i$8.prototype,"targetTierName",void 0),e$1_([d$1S({type:String,json:{write:!0}})],i$8.prototype,"tierName",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],i$8.prototype,"validateLocatability",void 0),i$8=e$1_([i$2w("esri.networks.support.UNTraceConfiguration")],i$8);const s$7=i$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$8=class extends O$b{constructor(r){super(r),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null;}readTraceConfiguration(r,e){return void 0!==r.tierName?s$7.fromJSON(r):i$9.fromJSON(r)}};e$1_([d$1S({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"}}},read:!1}})],p$8.prototype,"globalId",void 0),e$1_([d$1S({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],p$8.prototype,"title",void 0),e$1_([d$1S({type:i$9,json:{origins:{service:{read:!0}},read:!1}})],p$8.prototype,"traceConfiguration",void 0),e$1_([o$1j("service","traceConfiguration")],p$8.prototype,"readTraceConfiguration",null),e$1_([d$1S({type:Date,json:{origins:{service:{read:!0}},read:!1}})],p$8.prototype,"creationDate",void 0),e$1_([d$1S({type:String,json:{origins:{service:{read:!0}},read:!1}})],p$8.prototype,"creator",void 0),e$1_([d$1S({type:String,json:{origins:{service:{read:!0}},read:!1}})],p$8.prototype,"description",void 0),e$1_([d$1S({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"}}},read:!1}})],p$8.prototype,"minStartingPoints",void 0),e$1_([d$1S({type:[Object],json:{origins:{service:{read:!0}},read:!1}})],p$8.prototype,"resultTypes",void 0),e$1_([d$1S({type:[String],json:{origins:{service:{read:!0}},read:!1}})],p$8.prototype,"tags",void 0),e$1_([d$1S({type:t$2.apiValues,json:{type:t$2.jsonValues,origins:{service:{read:t$2.read}},read:!1}})],p$8.prototype,"traceType",void 0),p$8=e$1_([i$2w("esri.networks.support.NamedTraceConfiguration")],p$8);const c$a=p$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$6=class extends a$2A{constructor(r){super(r),this.id=null,this.name=null;}};e$1_([d$1S({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],s$6.prototype,"id",void 0),e$1_([d$1S({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],s$6.prototype,"name",void 0),e$1_([d$1S({type:Boolean,json:{write:!0}})],s$6.prototype,"isUpstreamTerminal",void 0),s$6=e$1_([i$2w("esri.networks.support.Terminal")],s$6);const p$7=s$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$7=new o$1K({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let n$6=class extends a$2A{constructor(r){super(r),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null;}};e$1_([d$1S({type:String,json:{write:!0}})],n$6.prototype,"defaultConfiguration",void 0),e$1_([d$1S({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],n$6.prototype,"id",void 0),e$1_([d$1S({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],n$6.prototype,"name",void 0),e$1_([d$1S({type:[p$7],json:{write:!0}})],n$6.prototype,"terminals",void 0),e$1_([d$1S({type:a$7.apiValues,json:{type:a$7.jsonValues,read:a$7.read,write:a$7.write}})],n$6.prototype,"traversabilityModel",void 0),n$6=e$1_([i$2w("esri.networks.support.TerminalConfiguration")],n$6);const p$6=n$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$5=class extends h$2{constructor(r){super(r),this.sharedNamedTraceConfigurations=[],this.type="utility";}get serviceTerritoryFeatureLayerId(){var r;return null==(r=this.dataElement)?void 0:r.serviceTerritoryFeatureLayerId}get terminalConfigurations(){var r;return (null==(r=this.dataElement)?void 0:r.terminalConfigurations.map((r=>p$6.fromJSON(r))))||[]}get domainNetworkNames(){var r;return (null==(r=this.dataElement)?void 0:r.domainNetworks.map((r=>r.domainNetworkName)))||[]}async load(r){return this.addResolvingPromise(super.load(r)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(r)),this}getTerminalConfiguration(r){let e=null,t=null;const o=r.layer;let a=null;if("feature"!==(null==o?void 0:o.type))return null;if(a=o.layerId,null===a)return null;const n=r.attributes;if(null==n)return null;for(const i of Object.keys(n))"ASSETGROUP"===i.toUpperCase()&&(e=r.getAttribute(i)),"ASSETTYPE"===i.toUpperCase()&&(t=r.getAttribute(i));if(!this.dataElement)return null;let s=null;const l=this.dataElement.domainNetworks;for(const i of l){var u;const r=null==(u=i.junctionSources)?void 0:u.find((r=>r.layerId===a));if(r){var d;const o=null==(d=r.assetGroups)?void 0:d.find((r=>r.assetGroupCode===e));if(o){var m;const r=null==(m=o.assetTypes)?void 0:m.find((r=>r.assetTypeCode===t));if(r){s=r.terminalConfigurationId;break}}}}if(null!=s){const r=this.dataElement.terminalConfigurations,e=null==r?void 0:r.find((r=>r.terminalConfigurationId===s));return e?p$6.fromJSON(e):null}return null}getTierNames(r){var e;const t=null==(e=this.dataElement)?void 0:e.domainNetworks.find((e=>e.domainNetworkName===r));return (null==t?void 0:t.tiers.map((r=>r.name)))||[]}async _loadNamedTraceConfigurationsFromNetwork(r){var e;if(0===(null==(e=this.sharedNamedTraceConfigurations)?void 0:e.length))return;const t=this.sharedNamedTraceConfigurations.map((r=>r.globalId)),o=await this._fetchTraceConfigData(this.networkServiceUrl,t,r);for(const a of this.sharedNamedTraceConfigurations){const r=null==o?void 0:o.find((r=>r.globalId===a.globalId));r&&a.read(r,{origin:"service"});}}_fetchTraceConfigData(r,t,o){return E$t(`${r}/traceConfigurations/query`,{responseType:"json",query:{globalIds:JSON.stringify(t),f:"json"},...o}).then((r=>r.data.traceConfigurations))}};e$1_([d$1S({type:[c$a],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],s$5.prototype,"sharedNamedTraceConfigurations",void 0),e$1_([d$1S({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],s$5.prototype,"type",void 0),e$1_([d$1S({readOnly:!0})],s$5.prototype,"serviceTerritoryFeatureLayerId",null),e$1_([d$1S({readOnly:!0})],s$5.prototype,"terminalConfigurations",null),e$1_([d$1S({readOnly:!0})],s$5.prototype,"domainNetworkNames",null),s$5=e$1_([i$2w("esri.networks.UtilityNetwork")],s$5);const l$4=s$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$2(e,n){if(!t$1(e,n)){const t=e.typeKeywords;t?t.push(n):e.typeKeywords=[n];}}function t$1(e,t){return !!e.typeKeywords&&e.typeKeywords.indexOf(t)>-1}function n$5(e,t){const n=e.typeKeywords;if(n){const e=n.indexOf(t);e>-1&&n.splice(e,1);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$4=class extends a$2A{constructor(r){super(r),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null;}};e$1_([d$1S({type:String,json:{write:!0}})],s$4.prototype,"facilityIdField",void 0),e$1_([d$1S({type:String,json:{write:!0}})],s$4.prototype,"layerId",void 0),e$1_([d$1S({type:String,json:{write:!0}})],s$4.prototype,"nameField",void 0),e$1_([d$1S({type:String,json:{write:!0}})],s$4.prototype,"siteIdField",void 0),e$1_([d$1S({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],s$4.prototype,"sublayerId",void 0),s$4=e$1_([i$2w("esri.layers.support.FacilityLayerInfo")],s$4);const i$7=s$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$6=class extends a$2A{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null;}};e$1_([d$1S({type:String,json:{write:!0}})],i$6.prototype,"facilityIdField",void 0),e$1_([d$1S({type:String,json:{write:!0}})],i$6.prototype,"layerId",void 0),e$1_([d$1S({type:String,json:{write:!0}})],i$6.prototype,"levelIdField",void 0),e$1_([d$1S({type:String,json:{write:!0}})],i$6.prototype,"levelNumberField",void 0),e$1_([d$1S({type:String,json:{write:!0}})],i$6.prototype,"longNameField",void 0),e$1_([d$1S({type:String,json:{write:!0}})],i$6.prototype,"shortNameField",void 0),e$1_([d$1S({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],i$6.prototype,"sublayerId",void 0),e$1_([d$1S({type:String,json:{write:!0}})],i$6.prototype,"verticalOrderField",void 0),i$6=e$1_([i$2w("esri.layers.support.LevelLayerInfo")],i$6);const s$3=i$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$2=class extends a$2A{constructor(r){super(r),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null;}};e$1_([d$1S({type:String,json:{write:!0}})],s$2.prototype,"layerId",void 0),e$1_([d$1S({type:String,json:{write:!0}})],s$2.prototype,"nameField",void 0),e$1_([d$1S({type:String,json:{write:!0}})],s$2.prototype,"siteIdField",void 0),e$1_([d$1S({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],s$2.prototype,"sublayerId",void 0),s$2=e$1_([i$2w("esri.layers.support.SiteLayerInfo")],s$2);const i$5=s$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let a$6=class extends a$2A{constructor(r){super(r),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null;}};e$1_([d$1S({type:s$3,json:{write:!0}})],a$6.prototype,"levelLayer",void 0),e$1_([d$1S({type:i$7,json:{write:!0}})],a$6.prototype,"facilityLayer",void 0),e$1_([d$1S({type:i$5,json:{write:!0}})],a$6.prototype,"siteLayer",void 0),a$6=e$1_([i$2w("esri.support.MapFloorInfo")],a$6);const l$3=a$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$1;let a$5=s$1=class extends a$2A{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null;}clone(){return new s$1(l$2r({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};e$1_([d$1S({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],a$5.prototype,"activeRange",void 0),e$1_([d$1S({type:[Number],json:{write:!0}})],a$5.prototype,"currentRangeExtent",void 0),e$1_([d$1S({type:[Number],json:{write:!0}})],a$5.prototype,"fullRangeExtent",void 0),a$5=s$1=e$1_([i$2w("esri.webdoc.RangeInfo")],a$5);const c$9=a$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s;let n$4=s=class extends a$2A{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null;}clone(){return new s(l$2r({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};e$1_([d$1S({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],n$4.prototype,"enabled",void 0),e$1_([d$1S({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],n$4.prototype,"longNames",void 0),e$1_([d$1S({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],n$4.prototype,"minimized",void 0),e$1_([d$1S({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],n$4.prototype,"pinnedLevels",void 0),e$1_([d$1S({type:String,json:{read:{source:"site"},write:{target:"site"}}})],n$4.prototype,"site",void 0),e$1_([d$1S({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],n$4.prototype,"facility",void 0),e$1_([d$1S({type:String,json:{read:{source:"level"},write:{target:"level"}}})],n$4.prototype,"level",void 0),n$4=s=e$1_([i$2w("esri.webdoc.widgets.FloorFilter")],n$4);const l$2=n$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$4;const n$3=new o$1K({slider:"slider",picker:"picker"});let p$5=i$4=class extends a$2A{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null;}clone(){return new i$4({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};e$1_([d$1S({type:n$3.apiValues,nonNullable:!0,json:{type:n$3.jsonValues,default:null,read:{reader:n$3.read},write:{isRequired:!0,writer:n$3.write}}})],p$5.prototype,"interactionMode",void 0),e$1_([d$1S({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=null!=this.stopInterval;return {enabled:!e,isRequired:!e}}}}})],p$5.prototype,"numStops",void 0),e$1_([d$1S({type:Number,json:{write:{overridePolicy(){return {isRequired:null==this.numStops}}}}})],p$5.prototype,"stopInterval",void 0),p$5=i$4=e$1_([i$2w("esri.webdoc.widgets.Range")],p$5);const a$4=p$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$2;let c$8=m$2=class extends a$2A{constructor(t){super(t),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null;}readCurrentTimeExtent(t){if(!t)return;const r=null!=t[0]?new Date(t[0]):null,o=null!=t[1]?new Date(t[1]):null;return new y$$({start:r,end:o})}writeCurrentTimeExtent(t,e,r){t&&o$1W(r,[r$1G(t.start)?t.start.getTime():null,r$1G(t.end)?t.end.getTime():null],e);}readFullTimeExtent(t,r){const o=r.properties;if(!o)return;const s=null!=o.endTime?new Date(o.endTime):null,n=null!=o.startTime?new Date(o.startTime):null;return new y$$({start:n,end:s})}writeFullTimeExtent(t,e){if(!t)return;const r=e.properties=e.properties||{},o=t.end,s=t.start;o&&(r.endTime=r$1G(o)?o.getTime():null),s&&(r.startTime=r$1G(s)?s.getTime():null);}readStopInterval(t,e,o){return t?l$M.fromJSON({value:t.interval,unit:t.units},o):null}writeStopInterval(t,e,r,o){if(!t)return;const s=t.toJSON(o);o$1W(r,{interval:s.value,units:s.unit},e);}readStops(t){return t&&t.length?t.map((t=>new Date(t))):null}writeStops(t,e,r){t&&t.length&&o$1W(r,t.map((t=>t.getTime())),e);}clone(){return new m$2(l$2r({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};e$1_([d$1S({type:y$$,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],c$8.prototype,"currentTimeExtent",void 0),e$1_([o$1j("currentTimeExtent")],c$8.prototype,"readCurrentTimeExtent",null),e$1_([r$1c("currentTimeExtent")],c$8.prototype,"writeCurrentTimeExtent",null),e$1_([d$1S({type:y$$,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],c$8.prototype,"fullTimeExtent",void 0),e$1_([o$1j("fullTimeExtent")],c$8.prototype,"readFullTimeExtent",null),e$1_([r$1c("fullTimeExtent")],c$8.prototype,"writeFullTimeExtent",null),e$1_([d$1S({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],c$8.prototype,"loop",void 0),e$1_([d$1S({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var t;const e=!!this.stopInterval,r=!(null==(t=this.stops)||!t.length),o=!(e||r);return {enabled:o,isRequired:o}}}}})],c$8.prototype,"numStops",void 0),e$1_([d$1S({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],c$8.prototype,"numThumbs",void 0),e$1_([d$1S({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],c$8.prototype,"stopDelay",void 0),e$1_([d$1S({type:l$M,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){var t;const e=null!=this.numStops,r=!(null==(t=this.stops)||!t.length);return {enabled:!r,isRequired:!(e||r)}}}}})],c$8.prototype,"stopInterval",void 0),e$1_([o$1j("stopInterval")],c$8.prototype,"readStopInterval",null),e$1_([r$1c("stopInterval")],c$8.prototype,"writeStopInterval",null),e$1_([d$1S({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return {isRequired:null==this.numStops&&!this.stopInterval}}}}})],c$8.prototype,"stops",void 0),e$1_([o$1j("stops")],c$8.prototype,"readStops",null),e$1_([r$1c("stops")],c$8.prototype,"writeStops",null),c$8=m$2=e$1_([i$2w("esri.webdoc.widgets.TimeSlider")],c$8);const d=c$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$1;let c$7=m$1=class extends a$2A{constructor(r){super(r),this.range=null,this.timeSlider=null,this.floorFilter=null;}clone(){return new m$1(l$2r({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};e$1_([d$1S({type:a$4,json:{write:!0}})],c$7.prototype,"range",void 0),e$1_([d$1S({type:d,json:{write:!0}})],c$7.prototype,"timeSlider",void 0),e$1_([d$1S({type:l$2,json:{write:!0}})],c$7.prototype,"floorFilter",void 0),c$7=m$1=e$1_([i$2w("esri.webdoc.Widgets")],c$7);const n$2=c$7;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h$1={width:600,height:400},t=1.5;function i$3(i,e){e=e||h$1;let{width:d,height:n}=e;const g=d/n;return g<t?n=d/t:g>t&&(d=n*t),d>i.width&&(n*=i.width/d,d=i.width),n>i.height&&(d*=i.height/n,n=i.height),{width:Math.round(d),height:Math.round(n)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1(n){return {enabled:!(null==n||!n.length)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$6;let a$3=c$6=class extends a$2A{constructor(r){super(r),this.exactMatch=!1,this.name=null,this.type=null;}clone(){return new c$6({exactMatch:this.exactMatch,type:this.type,name:this.name})}};e$1_([d$1S({type:Boolean,json:{write:!0}})],a$3.prototype,"exactMatch",void 0),e$1_([d$1S({type:String,json:{write:!0}})],a$3.prototype,"name",void 0),e$1_([r$1d(i$19)],a$3.prototype,"type",void 0),a$3=c$6=e$1_([i$2w("esri.webdoc.applicationProperties.SearchLayerField")],a$3);const i$2=a$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$5;let a$2=c$5=class extends a$2A{constructor(r){super(r),this.field=null,this.id=null,this.subLayer=null;}clone(){return new c$5(l$2r({field:this.field,id:this.id,subLayer:this.subLayer}))}};e$1_([d$1S({type:i$2,json:{write:{isRequired:!0}}})],a$2.prototype,"field",void 0),e$1_([d$1S({type:String,json:{write:{isRequired:!0}}})],a$2.prototype,"id",void 0),e$1_([d$1S({type:S$J,json:{write:!0}})],a$2.prototype,"subLayer",void 0),a$2=c$5=e$1_([i$2w("esri.webdoc.applicationProperties.SearchLayer")],a$2);const u$1=a$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$4;let a$1=c$4=class extends a$2A{constructor(r){super(r),this.exactMatch=!1,this.name=null,this.type=null;}clone(){return new c$4({exactMatch:this.exactMatch,type:this.type,name:this.name})}};e$1_([d$1S({type:Boolean,json:{write:!0}})],a$1.prototype,"exactMatch",void 0),e$1_([d$1S({type:String,json:{write:!0}})],a$1.prototype,"name",void 0),e$1_([r$1d(i$19)],a$1.prototype,"type",void 0),a$1=c$4=e$1_([i$2w("esri.webdoc.applicationProperties.SearchTableField")],a$1);const i$1=a$1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$4;let c$3=p$4=class extends a$2A{constructor(r){super(r),this.field=null,this.id=null;}clone(){return new p$4(l$2r({field:this.field,id:this.id}))}};e$1_([d$1S({type:i$1,json:{write:{isRequired:!0}}})],c$3.prototype,"field",void 0),e$1_([d$1S({type:String,json:{write:{isRequired:!0}}})],c$3.prototype,"id",void 0),c$3=p$4=e$1_([i$2w("esri.webdoc.applicationProperties.SearchTable")],c$3);const l$1=c$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$3;const b$1=S$F.ofType(u$1),h=S$F.ofType(l$1);let u=p$3=class extends a$2A{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new b$1,this.tables=new h;}readAddressSearchEnabled(e){return !e}writeAddressSearchEnabled(e,r,o){r[o]=!e;}clone(){return new p$3(l$2r({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};e$1_([d$1S({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],u.prototype,"addressSearchEnabled",void 0),e$1_([o$1j("addressSearchEnabled")],u.prototype,"readAddressSearchEnabled",null),e$1_([r$1c("addressSearchEnabled")],u.prototype,"writeAddressSearchEnabled",null),e$1_([d$1S({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],u.prototype,"enabled",void 0),e$1_([d$1S({type:String,json:{write:!0}})],u.prototype,"hintText",void 0),e$1_([d$1S({type:b$1,json:{write:{overridePolicy:n$1},origins:{"web-scene":{write:{isRequired:!0}}}}})],u.prototype,"layers",void 0),e$1_([d$1S({type:h,json:{read:!0,write:{overridePolicy:n$1}}})],u.prototype,"tables",void 0),u=p$3=e$1_([i$2w("esri.webdoc.applicationProperties.Search")],u);const y=u;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$2;let a=p$2=class extends a$2A{constructor(r){super(r),this.search=null;}clone(){return new p$2(l$2r({search:this.search}))}};e$1_([d$1S({type:y,json:{write:!0}})],a.prototype,"search",void 0),a=p$2=e$1_([i$2w("esri.webdoc.applicationProperties.Viewing")],a);const i=a;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$1;let n=p$1=class extends a$2A{constructor(o){super(o),this.editing=null,this.offline=null,this.viewing=null;}clone(){return new p$1(l$2r({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};e$1_([d$1S({json:{write:!0}})],n.prototype,"editing",void 0),e$1_([d$1S({json:{write:!0}})],n.prototype,"offline",void 0),e$1_([d$1S({type:i,json:{write:!0}})],n.prototype,"viewing",void 0),n=p$1=e$1_([i$2w("esri.webmap.ApplicationProperties")],n);const c$2=n;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$1;let p=e$1=class extends a$2A{constructor(){super(...arguments),this.url="";}destroy(){this.url="";}clone(){return new e$1({url:this.url})}};e$1_([d$1S({type:String,json:{write:{isRequired:!0}}})],p.prototype,"url",void 0),p=e$1=e$1_([i$2w("esri.webdoc.support.Thumbnail")],p);const c$1=p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var j;const b="esri.webmap.Bookmark",v=s$2h.getLogger(b);let g=j=class extends(r$X(a$2A)){constructor(e){super(e),this.name=null,this.thumbnail=new c$1;}set extent(e){r$1v(v,"extent",{replacement:"viewpoint",version:"4.17"}),this._set("viewpoint",new u$p({targetGeometry:e.clone()})),this._set("extent",e);}castThumbnail(e){return "string"==typeof e?new c$1({url:e}):b$Z(c$1,e)}set viewpoint(e){const{targetGeometry:t,scale:o}=e;r$1G(t)&&("extent"===t.type?this._set("extent",t.clone()):"point"===t.type&&t$1O(o)&&v.warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e)),this._set("viewpoint",e);}readViewpoint(e,o){const{extent:r,viewpoint:i}=o;return u$p.fromJSON(i||{targetGeometry:r})}writeViewpoint(e,t,o,i){if(!e)return;const{targetGeometry:n}=e;if(r$1G(n)&&"extent"!==n.type){const e="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";null!=i&&i.messages?i.messages.push(new s$29("property:unsupported",e)):v.error(e);}else t[o]=e.toJSON();}clone(){return new j(l$2r({name:this.name,thumbnail:this.thumbnail,viewpoint:this.viewpoint}))}};e$1_([d$1S({type:M$r,nonNullable:!0,json:{read:!1,write:{isRequired:!0}}})],g.prototype,"extent",null),e$1_([d$1S({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],g.prototype,"name",void 0),e$1_([d$1S({type:c$1,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],g.prototype,"thumbnail",void 0),e$1_([c$2Y("thumbnail")],g.prototype,"castThumbnail",null),e$1_([d$1S({type:u$p,nonNullable:!0,json:{write:!0}})],g.prototype,"viewpoint",null),e$1_([o$1j("viewpoint",["extent","viewpoint"])],g.prototype,"readViewpoint",null),e$1_([r$1c("viewpoint")],g.prototype,"writeViewpoint",null),g=j=e$1_([i$2w(b)],g);const x=g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c;let l=c=class extends p$33{constructor(o){super(o),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.viewpoint=null;}clone(){return new c(l$2r({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))}};e$1_([d$1S({type:m$9})],l.prototype,"background",void 0),e$1_([d$1S({type:c$9})],l.prototype,"rangeInfo",void 0),e$1_([d$1S({type:k$s})],l.prototype,"spatialReference",void 0),e$1_([d$1S({type:u$p})],l.prototype,"viewpoint",void 0),l=c=e$1_([i$2w("esri.webmap.InitialViewProperties")],l);const m=l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class r{constructor(t,r,o=""){this.major=t,this.minor=r,this._context=o;}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}since(t,r){return !this.lessThan(t,r)}validate(r){if(this.major!==r.major){const o=this._context&&this._context+":",s=this._context&&this._context+" ";throw new s$29(o+"unsupported-version",`Required major ${s}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:r})}}clone(){return new r(this.major,this.minor,this._context)}static parse(o,s=""){const[e,i]=o.split("."),n=/^\s*\d+\s*$/;if(!e||!e.match||!e.match(n)){throw new s$29((s&&s+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:o})}if(!i||!i.match||!i.match(n)){throw new s$29((s&&s+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:o})}const a=parseInt(e,10),h=parseInt(i,10);return new r(a,h,s)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e extends r{constructor(s,e){super(s,e,"webmap");}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const X=new e(2,23),Y="Web Map",Z=S$F.ofType(x),ee=S$F.ofType(l$4),te=s$2h.getLogger("esri.WebMap"),re=new Map;re.set("image/jpeg","jpeg"),re.set("image/jpg","jpg"),re.set("image/png","png"),re.set("image/gif","gif");const ie="ArcGIS Pro",oe="ArcGIS API for JavaScript",ae="CollectorDisabled",se="Collector",ne="Data Editing",le="OfflineDisabled",pe="Offline",me="Workforce Project",ue="Workforce Worker",he="Workforce Dispatcher",de="Offline Map Areas",ce="FieldMapsDisabled",ye="DeveloperBasemap",we=["NatGeo_World_Map","Ocean_Basemap","USA_Topo_Maps","World_Imagery","World_Street_Map","World_Terrain_Base","World_Topo_Map","World_Hillshade","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Reference/World_Boundaries_and_Places","Reference/World_Reference_Overlay","Reference/World_Transportation"].map((e=>e.toLowerCase()));let fe=class extends(l$R(m$1A.LoadableMixin(n$2w(j$h)))){constructor(e){super(e),this.applicationProperties=null,this.bookmarks=new Z,this.floorInfo=null,this.initialViewProperties=new m,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.utilityNetworks=null,this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1;}destroy(){const e=this.portalItem;this.portalItem=null,null==e||e.destroy();}initialize(){if(this.when().catch((e=>{te.error("#load()","Failed to load web map",e);})),this.resourceInfo){let t;try{t=this._validateJSON(this.resourceInfo);}catch(e){return void this.addResolvingPromise(Promise.reject(e))}this.read(t);}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e);}writeAuthoringApp(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp=oe;}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e);}writeAuthoringAppVersion(e,r){e&&this._isAuthoringAppVersionSetByUser?r.authoringAppVersion=e:r.authoringAppVersion=a$2Q;}readInitialViewProperties(e$1,t){var r;const o=new m;t.background&&(o.background=m$9.fromJSON(t.background));const a=null==(r=t.initialState)?void 0:r.viewpoint;if(a){if(a.rotation){e.parse(t.version||"","webmap").lessThan(2,20)&&t.authoringApp===ie&&(a.rotation*=-1);}o.viewpoint=u$p.fromJSON(a);}return t.mapRangeInfo&&(o.rangeInfo=c$9.fromJSON(t.mapRangeInfo)),t.spatialReference&&(o.spatialReference=k$s.fromJSON(t.spatialReference)),o}writeInitialViewProperties(e,t,r,i){if(!e)return;const o=e.background;o&&o.color&&(t.background=o.write({},i)),e.viewpoint&&(t.initialState={viewpoint:e.viewpoint.write({},i)}),e.rangeInfo&&(t.mapRangeInfo=e.rangeInfo.toJSON(i)),e.spatialReference&&(t.spatialReference=e.spatialReference.write({},i));}writeLayers(e,t,r,i){t[r]=this._writeLayers(e,i,"operational-layers");}readSourceVersion(e$1,t){const[r,i]=t.version.split(".");return new e(parseInt(r,10),parseInt(i,10))}writeSourceVersion(e,t,r){t[r]=`${X.major}.${X.minor}`;}writeTables(e,t,r,i){const o=this._writeLayers(e,i,"tables");o.length&&(t[r]=o);}get thumbnailUrl(){return this.portalItem&&this.portalItem.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride();}load(e){return this.addResolvingPromise(this._loadFromSource()),Promise.resolve(this)}loadAll(){return n$1t(this,(e=>{e(this.ground,this.basemap,this.layers,this.tables);}))}read(e,t){t={...t,origin:"web-map"};const r=this._getAuthoringPropsState();d$1y(this,e,(t=>super.read(e,t)),t),this._restoreAuthoringPropsFromState(r);}write(e,t){if("loaded"!==this.loadStatus){const e=new s$29("webmap:not-loaded","Web map must be loaded before it can be serialized");throw te.error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),e}return this._removeDanglingLayerRefs(),t={...t,origin:"web-map",restrictedWebMapWriting:!0,webmap:this},super.write(e,t)}async save(e){e=e||{},this._validateItem(),await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),this._validateMap();const t=this.portalItem,r={origin:"web-map",messages:[],writtenProperties:[],url:t.itemUrl&&U$o(t.itemUrl),portal:t.portal||B$d.getDefault()},i=this.write({},r);return this._validateJSONForWriting(r,e),await this._updateItemProperties(t),await this._updateItem(t,i,r),await this._updateItemThumbnail(),t}async saveAs(e,t){t=t||{};const r=this._getPortalItem(e);await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),this._validateMap();const i={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:r.portal},o=this.write({},i);this._validateJSONForWriting(i,t),await this._updateItemPropertiesForSaveAs(r);const a=this._getThumbnailState();return await this._createItem(r,o,i,t),this._restoreThumbnailFromState(a),await this._updateItemThumbnail(),r}async updateFrom(e,t){const r=this._updateFromInternal(e,t);this._updateFromPromise=r,await r;r===this._updateFromPromise&&(this._updateFromPromise=null);}getLayerJSONFromResourceInfo(e){var t,r,i,a;const s=this.resourceInfo;return this._collectAllLayersJSON(M$B([null==s||null==(t=s.baseMap)?void 0:t.baseMapLayers,null==s?void 0:s.operationalLayers,null==(r=this.basemap)||null==(i=r.resourceInfo)||null==(a=i.data)?void 0:a.baseMapLayers])).find((t=>t.id===e.id))}_collectAllLayersJSON(e){return e.reduce(((e,t)=>(e.push(t),"GroupLayer"===t.layerType&&(e=e.concat(this._collectAllLayersJSON(t.layers||[]))),e)),[])}_writeLayers(e,t,r){t={...t,layerContainerType:r};return e.map((e=>e$1Y(y$H(e,"tables"===r?null:this.getLayerJSONFromResourceInfo(e),t)))).filter(Boolean).toArray()}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve(null)}_loadFromItem(e){return e.load().catch((e=>{throw new s$29("webmap:load-portal-item","Failed to load portal item",{error:e})})).then((()=>{if("Web Map"!==e.type)throw new s$29("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:e.type})})).then((()=>e.fetchData())).then((t=>(this.resourceInfo=t,this._readAndLoadFromJSON(t,{origin:"web-map",portal:e.portal||B$d.getDefault()})))).then((()=>this._computeInitialViewpoint()))}_readAndLoadFromJSON(e,t){const r=this._validateJSON(e);return this.read(r,t),this._loadFromJSON(r,t)}_validateJSON(e$1){const t=e.parse(e$1.version||"","webmap");return X.validate(t),e$1.version=`${t.major}.${t.minor}`,e$1}_loadFromJSON(e,t){const r={context:{...t,layerContainerType:"operational-layers"}};return this.portalItem&&(r.context.portal=this.portalItem.portal||B$d.getDefault()),import('./layersCreator.js').then((({populateOperationalLayers:t})=>{const i=[],o=e.operationalLayers;o&&o.length&&i.push(t(this.layers,o,r));const a={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},s=e.tables;return s&&s.length&&i.push(t(this.tables,s,a)),T$o(i).then((()=>{}))}))}async _computeInitialViewpoint(){var e,t;let r=this.initialViewProperties;if(null==(e=r)||null==(t=e.viewpoint)?void 0:t.targetGeometry)return;const o=await this._getExtentFromItem();o&&(r=r?r.clone():new m,r.viewpoint=new u$p,r.viewpoint.targetGeometry=o,this.initialViewProperties=r);}async _getExtentFromItem(){var e,t;const r=null==(e=this.initialViewProperties)?void 0:e.spatialReference,i=null==(t=this.portalItem)?void 0:t.extent;if(r&&i){if(r.isWGS84)return i.clone();if(r.isWebMercator)return R$o(i);return (await import('./geometryServiceUtils.js')).getGeometryServiceURL(this.portalItem).then((e=>{const t=new a$9;return t.geometries=[i],t.outSpatialReference=r,n$a(e,t)})).then((e=>e[0])).catch((e=>(te.error("Error projecting item's extent:",e),null)))}return null}_removeDanglingLayerRefs(){const e=this.applicationProperties,t=e&&e.viewing&&e.viewing.search,r=e=>!!this.allLayers.find((t=>t.id===e));t&&t.layers&&(t.layers=t.layers.filter((e=>r(e.id)))),t&&t.tables&&(t.tables=t.tables.filter((e=>!!this.tables.find((t=>t.id===e.id)))));const i=e&&e.editing&&e.editing.locationTracking;i&&i.info&&!r(i.info.layerId)&&(e.editing=null);const o=this.presentation&&this.presentation.slides;o&&o.forEach((e=>{e.visibleLayers&&(e.visibleLayers=e.visibleLayers.filter((e=>r(e.id))));}));}_validateMap(){if(!this.basemap||!this.basemap.baseLayers.length)throw new s$29("webmap:save","Map does not have a valid basemap with a base layer.")}_validateItem(){if(!this.portalItem)throw te.error("save: requires the portalItem property to be set"),new s$29("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem);}_validateItemType(e){if(e.type!==Y)throw new s$29("webmap:portal-item-wrong-type",`Portal item needs to have type "${Y}"`)}_loadLayerContainers(){const e=[];return this.basemap&&e.push(this.basemap.load()),this.ground&&e.push(this.ground.load()),T$o(e).then((()=>{}))}async _beforeSave(){const e=[];for(const t of this.allLayers)if("beforeSave"in t&&"function"==typeof t.beforeSave){const r=t.beforeSave();r&&e.push(r);}await T$o(e);}_loadAllLayers(){const e=this._getAllLayersAndTables().map((e=>e.load()));return T$o(e).then((()=>{}))}_getAllLayersAndTables(){return this.allLayers.concat(this.allTables)}_validateJSONForWriting(e,t){let r=e.messages.filter((e=>"error"===e.type)).map((e=>new s$29(e.name,e.message,e.details)));if(t.ignoreUnsupported&&(r=r.filter((e=>"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name))),r.length>0)throw new s$29("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:r})}async _updateItemProperties(e){e.extent=await this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry),await this._updateTypeKeywords(e);}async _updateItemPropertiesForSaveAs(e){n$5(e,ae),n$5(e,le),n$5(e,me),n$5(e,ue),n$5(e,he),n$5(e,de),n$5(e,ce),await this._updateItemProperties(e);}async _getWGS84Extent(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return this._projectToWGS84(r)}async _projectToWGS84(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return j$D(e);const r=await import('./geometryServiceUtils.js'),i=await r.getGeometryServiceURL(this.portalItem),o=new a$9;o.geometries=[e],o.outSpatialReference=k$s.WGS84;return (await n$a(i,o))[0]}async _updateTypeKeywords(e){e$2(e,oe),await this._loadAllLayers(),this._evalCollectorKeyword(e),this._evalDataEditingKeyword(e),this._evalOfflineKeyword(e),this._evalDeveloperBasemapKeyword(e),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)));}_evalCollectorKeyword(e){t$1(e,ae)||t$1(e,me)||t$1(e,ue)||t$1(e,he)||!this._hasEditableFeatureLayer()?n$5(e,se):e$2(e,se);}_evalDataEditingKeyword(e){this._hasEditableFeatureLayer()?e$2(e,ne):n$5(e,ne);}_evalOfflineKeyword(e){!t$1(e,le)&&this._isOfflineCapableMap()?e$2(e,pe):n$5(e,pe);}_evalDeveloperBasemapKeyword(e){d$S(this.basemap)?e$2(e,ye):n$5(e,ye);}_hasEditableFeatureLayer(){return this._getAllLayersAndTables().some((e=>e.loaded&&this._isFeatureServiceLayer(e)&&e.capabilities.operations.supportsEditing&&e.editingEnabled))}_isFeatureServiceLayer(e){return !("feature"!==e.type||!e.source||"feature-layer"!==e.source.type)}_isOfflineCapableMap(){return this._getAllLayersAndTables().filter((e=>"group"!==e.type)).every((e=>e.loaded&&this._isOfflineCapableLayer(e)))}_isOfflineCapableLayer(e){return this._isFeatureServiceLayer(e)&&e.capabilities.operations.supportsSync||("tile"===e.type||"vector-tile"===e.type)&&(e.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(e)||S$k(e))&&e.spatialReference.equals(this.initialViewProperties.spatialReference)}_isExportableAGOLTileLayer(e){return "tile"===e.type&&(L$9(e.url)&&we.some((t=>e.url.toLowerCase().indexOf("/"+t+"/")>-1)))}async _updateItem(e,t,r){await e.update({data:t}),this._syncUpInstanceWithItem(e,t,r);}async _createItem(e,t,r,i){const o=this.portalItem,a=!!(o&&o.id&&o.portal.user),n=e.portal;if(await n._signIn(),!await this._canCopyItem(o,a,n))throw new s$29("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");await n.user.addItem({item:e,folder:i.folder,data:t}),this.portalItem=e,this._syncUpInstanceWithItem(e,t,r);}async _canCopyItem(e,t,r){return !(r$1G(e)&&e.id&&e.typeKeywords&&e.typeKeywords.indexOf("useOnly")>-1)||e.portal.portalHostname===r.portalHostname&&(t||await e.reload(),"admin"===e.itemControl||"update"===e.itemControl)}_syncUpInstanceWithItem(e,t,r){O$b.prototype.read.call(this,{version:t.version,authoringApp:t.authoringApp,authoringAppVersion:t.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:e.itemUrl&&U$o(e.itemUrl)}),r$1(r),this.resourceInfo=t;}async _updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride());}_getPortalItem(e){let t=b$n.from(e);return t.id&&(t=t.clone(),t.id=null),t.type||(t.type=Y),t.portal||(t.portal=B$d.getDefault()),this._validateItemType(t),t}async _updateFromInternal(e,t){if(t=t||{},await d$1H(e,"ready"),this._updateInitialViewProperties(e,t),e.map===this)for(const r of e.allLayerViews)for(const e of ["visible","featureEffect"])e in r&&e in r.layer&&r._isOverridden(e)&&(r.layer[e]=r[e]);await this._updateThumbnailUrl(e,t);}_updateInitialViewProperties(e,t){var r;t.backgroundExcluded||(this.initialViewProperties.background=null==(r=e.background)?void 0:r.clone());if(this.initialViewProperties.spatialReference=e.spatialReference.clone(),t.viewpointExcluded||(this.initialViewProperties.viewpoint=new u$p({rotation:e.rotation,scale:t.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!t.widgetsExcluded)for(const i of e.persistableViewModels)i.updateWebDocument(this);}_getViewExtent(e){const t=e.center.clone().normalize(),r=e.extent.clone(),i=r.width/2;return r.xmin=t.x-i,r.xmax=t.x+i,r}async _updateThumbnailUrl(e,t){if(t.thumbnailExcluded)return;const r=i$3(e,t.thumbnailSize),i=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(i.dataUrl);}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null;}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null;}_generateCustomThumbnailFilename(e){if(G$k(e)){const t=V$e(e),r=t&&t.mediaType,i=r&&re.get(r.toLowerCase())||null,o=`thumbnail${Date.now()}`;return i?`${o}.${i}`:o}return null}_getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:bt$2(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}_restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename;}_getAuthoringPropsState(){return {authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1;}static fromJSON(e){const t=e;if(!t)throw new s$29("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:t})}};fe.VERSION=X,e$1_([d$1S({type:c$2,json:{write:!0}})],fe.prototype,"applicationProperties",void 0),e$1_([d$1S({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],fe.prototype,"authoringApp",null),e$1_([r$1c("authoringApp")],fe.prototype,"writeAuthoringApp",null),e$1_([d$1S({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],fe.prototype,"authoringAppVersion",null),e$1_([r$1c("authoringAppVersion")],fe.prototype,"writeAuthoringAppVersion",null),e$1_([d$1S({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],fe.prototype,"basemap",void 0),e$1_([d$1S({type:Z,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],fe.prototype,"bookmarks",void 0),e$1_([d$1S({type:l$3,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],fe.prototype,"floorInfo",void 0),e$1_([d$1S({type:m,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:m$9},"initialState.viewpoint":{type:u$p},mapRangeInfo:{type:c$9},spatialReference:{type:k$s}}}}})],fe.prototype,"initialViewProperties",void 0),e$1_([o$1j("initialViewProperties")],fe.prototype,"readInitialViewProperties",null),e$1_([r$1c("initialViewProperties")],fe.prototype,"writeInitialViewProperties",null),e$1_([d$1S({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],fe.prototype,"layers",void 0),e$1_([r$1c("layers")],fe.prototype,"writeLayers",null),e$1_([d$1S({type:b$n})],fe.prototype,"portalItem",void 0),e$1_([d$1S({json:{write:!0}})],fe.prototype,"presentation",void 0),e$1_([d$1S()],fe.prototype,"resourceInfo",void 0),e$1_([d$1S({readOnly:!0,type:e,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],fe.prototype,"sourceVersion",void 0),e$1_([o$1j("sourceVersion")],fe.prototype,"readSourceVersion",null),e$1_([r$1c("sourceVersion")],fe.prototype,"writeSourceVersion",null),e$1_([d$1S({json:{read:!1,write:{ignoreOrigin:!0}}})],fe.prototype,"tables",void 0),e$1_([r$1c("tables")],fe.prototype,"writeTables",null),e$1_([d$1S()],fe.prototype,"thumbnailUrl",null),e$1_([d$1S({type:n$2,json:{write:!0}})],fe.prototype,"widgets",void 0),e$1_([d$1S({type:ee,json:{read:!0,write:!0}})],fe.prototype,"utilityNetworks",void 0),fe=e$1_([i$2w("esri.WebMap")],fe);const ge=fe;

const arcgisWebmapCss = "@import url('https://js.arcgis.com/next/esri/themes/light/main.css');.map-view{padding:0;margin:0}";

let ArcGISWebMap = class extends HTMLElement {
  constructor() {
    super();
    this.__registerHost();
  }
  validateApiKey(value) {
    t$1K.apiKey = value;
  }
  validateItemId(value, old) {
    if (value && value !== old) {
      this.loadMap();
    }
  }
  componentWillLoad() {
    if (this.apiKey) {
      t$1K.apiKey = this.apiKey;
    }
    if (this.itemId) {
      this.loadMap();
    }
  }
  componentDidRender() {
    const elem = this.el.querySelector('.esri-view-user-storage');
    if (elem) {
      const elems = Array.from(elem.children);
      for (let e of elems) {
        if (e.tagName.toLowerCase().includes('arcgis-')) {
          e.view = this.view;
        }
      }
    }
  }
  loadMap() {
    const map = new ge({
      portalItem: {
        id: this.itemId
      }
    });
    const params = {};
    if (this.zoom) {
      params.zoom = this.zoom;
    }
    if (this.center) {
      if (typeof this.center === 'string') {
        params.center = this.center.split(',').map((x) => Number(x));
      }
      else {
        params.center = this.center;
      }
    }
    const view = new G(Object.assign({ container: this.el, map }, params));
    this.view = view;
    view.when(() => console.log('view ready'));
  }
  render() {
    return (h$1F("div", { class: "map-view" }));
  }
  get el() { return this; }
  static get watchers() { return {
    "apiKey": ["validateApiKey"],
    "itemId": ["validateItemId"]
  }; }
  static get style() { return arcgisWebmapCss; }
};

const ArcgisExpand = /*@__PURE__*/proxyCustomElement(ArcGISSearch$1, [0,"arcgis-expand",{"position":[1],"view":[16]}]);
const ArcgisLegend = /*@__PURE__*/proxyCustomElement(ArcGISLegend, [0,"arcgis-legend",{"position":[1],"view":[16],"widget":[8]}]);
const ArcgisMap = /*@__PURE__*/proxyCustomElement(ArcGISMap, [0,"arcgis-map",{"apiKey":[1,"api-key"],"basemap":[1],"zoom":[2],"center":[1]}]);
const ArcgisSearch = /*@__PURE__*/proxyCustomElement(ArcGISSearch, [0,"arcgis-search",{"position":[1],"view":[16],"widget":[8]}]);
const ArcgisWebmap = /*@__PURE__*/proxyCustomElement(ArcGISWebMap, [0,"arcgis-webmap",{"apiKey":[1,"api-key"],"itemId":[1,"item-id"],"zoom":[2],"center":[1]}]);
const defineCustomElements = (opts) => {
  if (typeof customElements !== 'undefined') {
    [
      ArcgisExpand,
  ArcgisLegend,
  ArcgisMap,
  ArcgisSearch,
  ArcgisWebmap
    ].forEach(cmp => {
      if (!customElements.get(cmp.is)) {
        customElements.define(cmp.is, cmp, opts);
      }
    });
  }
};

export { n$2m as $, r$1h as A, ArcgisExpand, ArcgisLegend, ArcgisMap, ArcgisSearch, ArcgisWebmap, n$K as B, e$k as C, D$4 as D, E$t as E, e$b as F, A$s as G, r$1x as H, i$2i as I, n$F as J, n$1y as K, i$1j as L, c$1x as M, d$c as N, a$j as O, f$6 as P, s$1R as Q, e$1o as R, m$1n as S, a$26 as T, p$33 as U, e$I as V, e$1_ as W, d$1S as X, i$2w as Y, u$t as Z, c$2A as _, s$2i as a, n$1z as a$, o$1n as a0, d$1A as a1, s$1Q as a2, u$p as a3, b$O as a4, Ft as a5, i$1_ as a6, rt as a7, s$y as a8, St as a9, it$1 as aA, U$8 as aB, w$I as aC, t$G as aD, a$1c as aE, i$s as aF, k$q as aG, U$9 as aH, e$1e as aI, r$X as aJ, o$6 as aK, s$1C as aL, l$1S as aM, k$s as aN, b$Y as aO, u$1J as aP, O$9 as aQ, j$8 as aR, N$9 as aS, r$j as aT, i$x as aU, M$2 as aV, t$h as aW, f$9 as aX, h$i as aY, l$2r as aZ, h$L as a_, $$3 as aa, Mt as ab, xt as ac, a$E as ad, vt as ae, u$1X as af, F$n as ag, wt$2 as ah, l$1_ as ai, f$19 as aj, s$1G as ak, c$2D as al, y$1c as am, c$2G as an, y$1e as ao, S$C as ap, r$E as aq, i$18 as ar, s$15 as as, T$l as at, u$1D as au, X$4 as av, v$H as aw, e$1j as ax, $$6 as ay, ft$1 as az, t$1O as b, D$9 as b$, o$L as b0, e$O as b1, o$14 as b2, e$1I as b3, f$17 as b4, e$1g as b5, c$2Q as b6, h$1l as b7, B$l as b8, r$$ as b9, o$1K as bA, p$1N as bB, l$1l as bC, W$4 as bD, ct$1 as bE, tt$1 as bF, nt as bG, e$F as bH, bt$1 as bI, mt$1 as bJ, m$17 as bK, d$1W as bL, v$Y as bM, d$s as bN, m$16 as bO, j$n as bP, b$x as bQ, c$1E as bR, B$d as bS, U$o as bT, c$2p as bU, p$1K as bV, a$1v as bW, t$P as bX, t$1N as bY, b$5 as bZ, H$4 as b_, y$1f as ba, d$1w as bb, I$u as bc, E$n as bd, g$W as be, Q as bf, rn as bg, e$e as bh, E$w as bi, wt$1 as bj, et$1 as bk, e$1Y as bl, o$18 as bm, c$3f as bn, e$U as bo, r$v as bp, s$L as bq, y$k as br, e$W as bs, n$1G as bt, i$1$ as bu, v$I as bv, r$1c as bw, b$B as bx, n$1Q as by, l$1s as bz, i$2G as c, o$3 as c$, s$q as c0, A$A as c1, H$9 as c2, e$q as c3, a$2O as c4, c$3d as c5, l$1g as c6, o$19 as c7, a$1D as c8, d$1t as c9, s$25 as cA, r$1d as cB, M$r as cC, gt$2 as cD, t$1L as cE, r$F as cF, u$P as cG, n$2L as cH, C$z as cI, p$S as cJ, y$l as cK, w$e as cL, l$R as cM, h$1E as cN, C$w as cO, v$d as cP, f$W as cQ, b$m as cR, j$6 as cS, g$1a as cT, y$1m as cU, n$2A as cV, r$2 as cW, _ as cX, a$a as cY, r$4 as cZ, n$c as c_, i$1o as ca, c$2Y as cb, a$2A as cc, b$n as cd, t$1 as ce, t$u as cf, T$o as cg, S$F as ch, a$9 as ci, n$a as cj, m$1D as ck, r$1a as cl, M$s as cm, O$4 as cn, c$2r as co, P$s as cp, a$1C as cq, m$1N as cr, m$1L as cs, q$h as ct, o$1j as cu, h$U as cv, g$r as cw, e$G as cx, v$g as cy, l$S as cz, s$2l as d, G$f as d$, m$5 as d0, r$3 as d1, a$8 as d2, o as d3, o$1 as d4, n$9 as d5, n$8 as d6, b$Z as d7, n$1e as d8, y$z as d9, o$1V as dA, O$l as dB, gt$1 as dC, I$s as dD, e$T as dE, H$d as dF, h$R as dG, i$1t as dH, s$2k as dI, l$2t as dJ, A$k as dK, D$l as dL, f$16 as dM, C$7 as dN, u$2g as dO, a$2m as dP, l$J as dQ, o$t as dR, S$b as dS, l$1$ as dT, z$f as dU, R$p as dV, yt$1 as dW, G$6 as dX, C$a as dY, _$e as dZ, o$1e as d_, V$9 as da, d$11 as db, v$y as dc, b$C as dd, z$q as de, defineCustomElements, U$g as df, o$Y as dg, V$e as dh, n$2F as di, r$1w as dj, g$1b as dk, D$s as dl, m$2b as dm, qt$1 as dn, d$y as dp, m$x as dq, pt$1 as dr, a$2u as ds, a$2t as dt, m$1g as du, p$2f as dv, P$l as dw, s$12 as dx, c$2M as dy, i$2v as dz, s$29 as e, S$g as e$, i$25 as e0, q$q as e1, b$_ as e2, a$r as e3, w$Y as e4, u$1T as e5, j$G as e6, m$2a as e7, n$2P as e8, r$1f as e9, G$g as eA, C$s as eB, a$x as eC, o$i as eD, L$q as eE, c$2K as eF, j$4 as eG, B as eH, L$n as eI, Y$8 as eJ, D$h as eK, a$2H as eL, a$2G as eM, s$1P as eN, l$27 as eO, _$s as eP, j$F as eQ, x$y as eR, q$j as eS, g$Y as eT, D$o as eU, E$o as eV, Y$b as eW, t$1k as eX, p$1I as eY, d$1a as eZ, l$2s as e_, z$m as ea, _$t as eb, l$26 as ec, H$f as ed, c$2S as ee, q$k as ef, M$u as eg, a$2F as eh, r$1e as ei, m$1S as ej, i$1O as ek, f$$ as el, c$29 as em, h$$ as en, I$v as eo, vn as ep, e$18 as eq, xn as er, C$o as es, F$j as et, B$c as eu, A$g as ev, t$1l as ew, p$2m as ex, O$i as ey, u$1P as ez, t$l as f, e$l as f$, b$h as f0, c$16 as f1, a$1a as f2, lt$1 as f3, y$w as f4, p$1a as f5, y$1a as f6, A$v as f7, l$1z as f8, v$a as f9, s$1L as fA, g$15 as fB, g$10 as fC, h$f as fD, l$i as fE, st$1 as fF, e$E as fG, o$1X as fH, P$o as fI, S$J as fJ, c$1Z as fK, a$1Z as fL, s$s as fM, p$1F as fN, z$a as fO, y$N as fP, H as fQ, J as fR, tn as fS, Y$2 as fT, t$1M as fU, rt$2 as fV, E$u as fW, ut$2 as fX, i$21 as fY, t$1y as fZ, v$u as f_, p$31 as fa, i$19 as fb, Q$4 as fc, B$f as fd, ne$3 as fe, ie$5 as ff, de$4 as fg, j$E as fh, t$E as fi, e$1E as fj, t$F as fk, q$8 as fl, c$18 as fm, d$I as fn, ut$1 as fo, l$11 as fp, y$$ as fq, a$1F as fr, y$S as fs, E$v as ft, Rt$1 as fu, L$w as fv, b$e as fw, M$6 as fx, y$n as fy, o$C as fz, a$1b as g, f$1d as g$, p$p as g0, r$e as g1, p$2U as g2, n$2a as g3, n$2w as g4, $$f as g5, m$1Y as g6, l$l as g7, a$$ as g8, y$m as g9, r$i as gA, e$1Z as gB, e$1w as gC, z$n as gD, n$2o as gE, s$23 as gF, g$$ as gG, e$1u as gH, y$1u as gI, $$h as gJ, A$u as gK, T$n as gL, o$1E as gM, b$v as gN, j$m as gO, w$v as gP, h$M as gQ, h$J as gR, t$R as gS, c$2o as gT, m$14 as gU, r$T as gV, n$1F as gW, i$1n as gX, F$g as gY, t$14 as gZ, c$2q as g_, g$K as ga, y$1b as gb, I$t as gc, r$1v as gd, j$B as ge, A$l as gf, V$b as gg, N$l as gh, _$q as gi, g$S as gj, F$h as gk, ce$4 as gl, z$r as gm, M$B as gn, O$m as go, M$k as gp, t$V as gq, t$13 as gr, c$H as gs, f$1p as gt, pt as gu, a$2Q as gv, b$X as gw, k$p as gx, f$1c as gy, c$20 as gz, d$1O as h, s$K as h$, f$1v as h0, C$x as h1, k$D as h2, z$k as h3, s$22 as h4, O$r as h5, m$1A as h6, Q$3 as h7, l$V as h8, a$1e as h9, p$1v as hA, n$1t as hB, v$A as hC, d$16 as hD, j$q as hE, h$p as hF, w$f as hG, O$a as hH, C$9 as hI, r$1 as hJ, m$1B as hK, c$1p as hL, p$1u as hM, y$H as hN, e$1T as hO, A$m as hP, c$21 as hQ, m$1E as hR, n$21 as hS, y$14 as hT, S$x as hU, p$P as hV, o$w as hW, t$C as hX, a$X as hY, d$1s as hZ, m$1K as h_, o$1W as ha, p$2E as hb, i$1V as hc, u$a as hd, v$W as he, wn as hf, W$a as hg, ht$2 as hh, f$1m as hi, r$11 as hj, i$T as hk, s$N as hl, n$Y as hm, O$b as hn, y$Z as ho, Ge as hp, a$R as hq, x$n as hr, n$1H as hs, p$2k as ht, l$G as hu, t$1H as hv, i$1g as hw, t$18 as hx, o$1z as hy, i$U as hz, i$2F as i, p$M as i$, m$1l as i0, E$8 as i1, r$t as i2, u$1i as i3, m$15 as i4, l$1w as i5, a$U as i6, m$t as i7, o$1Q as i8, i$20 as i9, F$m as iA, s$2d as iB, R$m as iC, hn as iD, i$27 as iE, a$2N as iF, d$1H as iG, u$2e as iH, e$13 as iI, r$5 as iJ, r as iK, s$2g as iL, x$r as iM, c$1d as iN, p$H as iO, K$5 as iP, l$1v as iQ, i$1K as iR, n$2C as iS, a$M as iT, c$2c as iU, t$1d as iV, p$B as iW, r$1F as iX, et$2 as iY, i$1w as iZ, N$q as i_, U$p as ia, s$$ as ib, s$10 as ic, n$19 as id, v$V as ie, a$31 as ig, v$w as ih, n$1R as ii, M$f as ij, N$h as ik, q$c as il, N$g as im, a$1I as io, P$g as ip, T$q as iq, a$20 as ir, w$B as is, p$1L as it, g$l as iu, y$1r as iv, i$a as iw, t$1z as ix, Q$d as iy, U$j as iz, j$M as j, p$I as j0, r$14 as j1, o$T as j2, I$m as j3, b$F as j4, u$29 as j5, M$p as j6, p$T as j7, v$R as j8, M$z as j9, G$k as jA, e$1X as jB, t$1D as jC, s$1O as jD, q$g as jE, w$H as jF, G$c as jG, n$1$ as jH, h$1a as jI, e$1s as jJ, B$e as jK, i$2a as jL, H$h as jM, g$O as jN, r$1E as jO, n$1K as jP, m$J as jQ, l$X as jR, l$29 as jS, o$1Y as jT, request as jU, DictionaryRenderer as jV, query as jW, FeatureSet as jX, FeatureLayer as jY, w$U as ja, o$12 as jb, p$2Y as jc, n$1_ as jd, y$1i as je, d$n as jf, y$1h as jg, i$1M as jh, J$b as ji, r$1r as jj, u$l as jk, u$1U as jl, P$n as jm, w$C as jn, S$c as jo, g$X as jp, r$1b as jq, u$1j as jr, f$1E as js, x$9 as jt, s$1F as ju, L$x as jv, S$I as jw, m$23 as jx, _$c as jy, x$z as jz, l$o as k, lt as l, m$22 as m, h$1x as n, o$1l as o, p$37 as p, t$1K as q, r$1G as r, s$2h as s, t$7 as t, r$o as u, u$1E as v, w$V as w, n$E as x, a$33 as y, n$2y as z };
