import { setAssetPath, createEvent, h as h$1H, proxyCustomElement } from '@stencil/core/internal/client';
export { setAssetPath, setPlatformOptions } from '@stencil/core/internal/client';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$25(e,t,r,o){var c,f=arguments.length,n=f<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(c=e[l])&&(n=(f<3?c(n):f>3?c(t,r,n):c(t,r))||n);return f>3&&n&&Object.defineProperty(t,r,n),n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$24="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$3a,d$22;let r$1L;var o$22,i$2Q;null!=(a$3a=e$24.dojoConfig)&&a$3a.has||null!=(d$22=e$24.esriConfig)&&d$22.has?r$1L={...null==(o$22=e$24.dojoConfig)?void 0:o$22.has,...null==(i$2Q=e$24.esriConfig)?void 0:i$2Q.has}:r$1L={};function s$2r(a){return "function"==typeof r$1L[a]?r$1L[a]=r$1L[a](e$24):r$1L[a]}s$2r.add=(e,a,d,o)=>((o||void 0===r$1L[e])&&(r$1L[e]=a),d&&s$2r(e)),s$2r.cache=r$1L,s$2r.add("esri-deprecation-warnings",!0),(()=>{s$2r.add("host-webworker",void 0!==e$24.WorkerGlobalScope&&self instanceof e$24.WorkerGlobalScope);const a="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(s$2r.add("host-browser",a),s$2r.add("host-node","object"==typeof e$24.process&&e$24.process.versions&&e$24.process.versions.node&&e$24.process.versions.v8),s$2r.add("dom",a),s$2r("host-browser")){const e=navigator,a=e.userAgent,d=e.appVersion,r=parseFloat(d);if(s$2r.add("wp",parseFloat(a.split("Windows Phone")[1])||void 0),s$2r.add("msapp",parseFloat(a.split("MSAppHost/")[1])||void 0),s$2r.add("khtml",d.includes("Konqueror")?r:void 0),s$2r.add("edge",parseFloat(a.split("Edge/")[1])||void 0),s$2r.add("opr",parseFloat(a.split("OPR/")[1])||void 0),s$2r.add("webkit",!s$2r("wp")&&!s$2r("edge")&&parseFloat(a.split("WebKit/")[1])||void 0),s$2r.add("chrome",!s$2r("edge")&&!s$2r("opr")&&parseFloat(a.split("Chrome/")[1])||void 0),s$2r.add("android",!s$2r("wp")&&parseFloat(a.split("Android ")[1])||void 0),s$2r.add("safari",!d.includes("Safari")||s$2r("wp")||s$2r("chrome")||s$2r("android")||s$2r("edge")||s$2r("opr")?void 0:parseFloat(d.split("Version/")[1])),s$2r.add("mac",d.includes("Macintosh")),!s$2r("wp")&&a.match(/(iPhone|iPod|iPad)/)){const e=RegExp.$1.replace(/P/,"p"),d=a.match(/OS ([\d_]+)/)?RegExp.$1:"1",r=parseFloat(d.replace(/_/,".").replace(/_/g,""));s$2r.add(e,r),s$2r.add("ios",r);}s$2r.add("trident",parseFloat(d.split("Trident/")[1])||void 0),s$2r("webkit")||(!a.includes("Gecko")||s$2r("wp")||s$2r("khtml")||s$2r("trident")||s$2r("edge")||s$2r.add("mozilla",r),s$2r("mozilla")&&s$2r.add("ff",parseFloat(a.split("Firefox/")[1]||a.split("Minefield/")[1])||void 0));}})(),(()=>{if(e$24.navigator){const e=navigator.userAgent,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),d=/iPhone/i.test(e);a&&s$2r.add("esri-mobile",a),d&&s$2r.add("esri-iPhone",d),s$2r.add("esri-geolocation",!!navigator.geolocation);}s$2r.add("esri-canvas-svg-support",!s$2r("trident")),s$2r.add("esri-wasm","WebAssembly"in e$24),s$2r.add("esri-shared-array-buffer",(()=>{const a="SharedArrayBuffer"in e$24,d=!1===e$24.crossOriginIsolated;return a&&!d})),s$2r.add("esri-atomics","Atomics"in e$24),s$2r.add("esri-workers","Worker"in e$24),s$2r.add("esri-text-decoder","TextDecoder"in e$24),s$2r.add("esri-text-encoder","TextEncoder"in e$24),s$2r.add("web-feat:cache","caches"in e$24),s$2r.add("esri-workers-arraybuffer-transfer",!s$2r("safari")||Number(s$2r("safari"))>=12),s$2r.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),s$2r.add("featurelayer-simplify-payload-size-factors",[1,1,4]),s$2r.add("featurelayer-snapshot-enabled",!0),s$2r.add("featurelayer-snapshot-point-min-threshold",8e4),s$2r.add("featurelayer-snapshot-point-max-threshold",4e5),s$2r.add("featurelayer-snapshot-point-coverage",.1),s$2r.add("featurelayer-advanced-symbols",!1),s$2r.add("featurelayer-pbf",!0),s$2r.add("featurelayer-pbf-statistics",!1),s$2r.add("feature-layers-workers",!0),s$2r.add("mapview-transitions-duration",200),s$2r.add("mapserver-pbf-enabled",!1),s$2r("host-webworker")||s$2r("host-browser")&&(s$2r.add("esri-csp-restrictions",(()=>{try{new Function;}catch{return !0}return !1})),s$2r.add("esri-image-decode",(()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{s$2r.add("esri-image-decode",!0,!0,!0);})).catch((()=>{s$2r.add("esri-image-decode",!1,!0,!0);}))}return !1})),s$2r.add("esri-url-encodes-apostrophe",(()=>{const a=e$24.document.createElement("a");return a.href="?'",a.href.includes("?%27")})),s$2r.add("vectortilelayer-max-buffers",s$2r("ff")?160:Number.POSITIVE_INFINITY));})();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$2V=null;function r$1K(n){return null!=n}function t$1T(n){return null==n}function u$2l(n){return void 0===n}function o$21(t,u){return r$1K(t)?u(t):n$2V}function e$23(n){return n}function f$1O(n,r){if(t$1T(n))throw new Error(r);return n}function c$3o(n,t){return r$1K(n)?n:"function"==typeof t?t():t}function l$2y(n){return r$1K(n)&&n.destroy(),null}function i$2P(n){return r$1K(n)&&n.dispose(),null}function s$2q(n){return r$1K(n)&&n.remove(),null}function h$1G(n){return r$1K(n)&&n.release(),null}function w$12(n){return null}function d$21(n,r){const t=new Array;for(const u of n)t.push(A$B(u,null,r));return t}function v$13(n,r){for(const t of n)A$B(t,null,r);}function A$B(n,t,u){return r$1K(n)?u(n):t}function E$y(n,t){return r$1K(n)?t(n):null}function g$1f(n){return n.filter((n=>r$1K(n)))}function m$2i(n,...r){let t=n;for(let u=0;u<r.length&&t;++u)t=t[r[u]];return t}function q$s(n){return n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$1S{constructor(t=1){this._seed=t;}set seed(e){this._seed=null==e?Math.random()*t$1S._m:e;}getInt(){return this._seed=(t$1S._a*this._seed+t$1S._c)%t$1S._m,this._seed}getFloat(){return this.getInt()/(t$1S._m-1)}getIntRange(t,e){return Math.round(this.getFloatRange(t,e))}getFloatRange(e,s){const n=s-e;return e+this.getInt()/t$1S._m*n}}t$1S._m=2147483647,t$1S._a=48271,t$1S._c=0;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function l$2x(t,r,e){if(t$1T(t)&&t$1T(r))return !0;if(t$1T(t)||t$1T(r)||t.length!==r.length)return !1;if(e){for(let n=0;n<t.length;n++)if(!e(t[n],r[n]))return !1}else for(let n=0;n<t.length;n++)if(t[n]!==r[n])return !1;return !0}function s$2p(n,t,r){return n&&t?r?n.filter((function(n){return t.findIndex((function(t){return r(n,t)}))>-1})):n.filter((function(n){return t.indexOf(n)>-1})):[]}function a$39(n){return n&&"number"==typeof n.length}const d$20=!!Array.prototype.fill;function g$1e(n,t){if(d$20)return new Array(n).fill(t);const r=new Array(n);for(let e=0;e<n;e++)r[e]=t;return r}function m$2h(n,t){void 0===t&&(t=n,n=0);const r=new Array(t-n);for(let e=n;e<t;e++)r[e-n]=e;return r}function M$H(n){return n.reduce(((n,t)=>n.concat(t||[])),[])}class w$11{constructor(){this.last=0;}}const y$1F=new w$11;function b$19(n,t,r,e){e=e||y$1F;const o=Math.max(0,e.last-10);for(let u=o;u<r;++u)if(n[u]===t)return e.last=u,u;const f=Math.min(o,r);for(let u=0;u<f;++u)if(n[u]===t)return e.last=u,u;return -1}function v$12(n,t,r,e){const o=null==r?n.length:r,f=b$19(n,t,o,e);if(-1!==f)return n[f]=n[o-1],null==r&&n.pop(),t}const A$A=new Set;function O$v(n,t,r=n.length,e=t.length,o,f){if(0===e||0===r)return r;A$A.clear();for(let i=0;i<e;++i)A$A.add(t[i]);o=o||y$1F;const u=Math.max(0,o.last-10);for(let i=u;i<r;++i)if(A$A.has(n[i])&&(f&&f.push(n[i]),A$A.delete(n[i]),n[i]=n[r-1],--r,--i,0===A$A.size||0===r))return A$A.clear(),r;for(let i=0;i<u;++i)if(A$A.has(n[i])&&(f&&f.push(n[i]),A$A.delete(n[i]),n[i]=n[r-1],--r,--i,0===A$A.size||0===r))return A$A.clear(),r;return A$A.clear(),r}function C$B(n,t){const r=n.indexOf(t);return -1!==r?(n.splice(r,1),t):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2U(r,n){if(r.forEach)r.forEach(n);else for(let t=0;t<r.length;t++)n(r[t],t,r);}function t$1R(r,n,t){if(r.slice)return r.slice(n,t);void 0===n?n=0:(n<0&&(n+=r.length),n=Math.min(r.length,Math.max(0,n))),void 0===t?t=r.length:(t<0&&(t+=r.length),t=Math.min(r.length,Math.max(0,t)));const o=Math.max(0,t-n),c=new(r.constructor)(o);for(let e=0;e<o;e++)c[e]=r[n+e];return c}function o$20(r){return r instanceof ArrayBuffer||r&&r.constructor&&"ArrayBuffer"===r.constructor.name}function c$3n(r){return r instanceof Int8Array||r&&r.constructor&&"Int8Array"===r.constructor.name}function e$22(r){return r instanceof Uint8Array||r&&r.constructor&&"Uint8Array"===r.constructor.name}function a$38(r){return r instanceof Uint8ClampedArray||r&&r.constructor&&"Uint8ClampedArray"===r.constructor.name}function u$2k(r){return r instanceof Int16Array||r&&r.constructor&&"Int16Array"===r.constructor.name}function i$2O(r){return r instanceof Uint16Array||r&&r.constructor&&"Uint16Array"===r.constructor.name}function f$1N(r){return r instanceof Int32Array||r&&r.constructor&&"Int32Array"===r.constructor.name}function s$2o(r){return r instanceof Uint32Array||r&&r.constructor&&"Uint32Array"===r.constructor.name}function y$1E(r){return r instanceof Float32Array||r&&r.constructor&&"Float32Array"===r.constructor.name}function A$z(r){return r instanceof Float64Array||r&&r.constructor&&"Float64Array"===r.constructor.name}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function y$1D(e,t){let n;if(t)for(n in e)e.hasOwnProperty(n)&&(void 0===e[n]?delete e[n]:e[n]instanceof Object&&y$1D(e[n],!0));else for(n in e)e.hasOwnProperty(n)&&void 0===e[n]&&delete e[n];return e}function l$2w(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(c$3n(e)||e$22(e)||a$38(e)||u$2k(e)||i$2O(e)||f$1N(e)||s$2o(e)||y$1E(e)||A$z(e))return t$1R(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer){return e.slice(0,e.byteLength)}if(e instanceof Map){const t=new Map;return e.forEach(((e,n)=>{t.set(n,l$2w(e));})),t}if(e instanceof Set){const t=new Set;return e.forEach((e=>{t.add(l$2w(e));})),t}let t;const y=e;if("function"==typeof y.clone)t=y.clone();else if("function"==typeof y.map&&"function"==typeof y.forEach)t=y.map(l$2w);else if("function"==typeof y.notifyChange&&"function"==typeof y.watch)t=y.clone();else {t={};for(const n of Object.getOwnPropertyNames(e))t[n]=l$2w(e[n]);}return t}function m$2g(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof(e||{}).getTime&&"function"==typeof(t||{}).getTime&&e.getTime()===t.getTime()||!1}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2T(r,n,t=!1){return e$21(r,n,t)}function t$1Q(r,n){if(null!=n)return n[r]||i$2N(r.split("."),!1,n)}function o$1$(r,n,t){const o=r.split("."),e=o.pop(),u=i$2N(o,!0,t);u&&e&&(u[e]=n);}function i$2N(r,n,t){let o=t;for(const i of r){if(null==o)return;if(!(i in o)){if(!n)return;o[i]={};}o=o[i];}return o}function e$21(n,t,o){return t?Object.keys(t).reduce((function(n,i){let u=n[i],c=t[i];return u===c?n:void 0===u?(n[i]=l$2w(c),n):(Array.isArray(c)||Array.isArray(n)?(u=u?Array.isArray(u)?n[i]=u.concat():n[i]=[u]:n[i]=[],c&&(Array.isArray(c)||(c=[c]),o?c.forEach((r=>{-1===u.indexOf(r)&&u.push(r);})):n[i]=c.concat())):c&&"object"==typeof c?n[i]=e$21(u,c,o):n.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(n[i]=c),n)}),n||{}):n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const d$1$="20211104",e$20="f56ab3008fdaea1ce910515531b6ddb258d83e4f";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$1P={apiKey:void 0,applicationUrl:e$24.location&&e$24.location.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(e$24.esriConfig&&(n$2T(t$1P,e$24.esriConfig,!0),delete t$1P.has),!t$1P.assetsPath){const e="4.22.0";t$1P.assetsPath=`https://cdn.jsdelivr.net/npm/@arcgis/core@${e}-next.${d$1$}/assets`;}t$1P.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(t$1P,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath");}}),t$1P.request.corsEnabledServers=[],t$1P.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$1$=/\{([^\}]+)\}/g;function n$2S(t){return null==t?"":t}function r$1J(r,o){return r.replace(e$1$,"object"==typeof o?(e,r)=>n$2S(t$1Q(r,o)):(t,e)=>n$2S(o(e)))}function o$1_(t,e){return t.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,(t=>e&&-1!==e.indexOf(t)?t:`\\${t}`))}function c$3m(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}function u$2j(t){return (new DOMParser).parseFromString(t||"","text/html").body.innerText||""}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$1Z={info:0,warn:1,error:2,none:3};class s$2n{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=e.level&&(this.level=e.level),null!=e.writer&&(this.writer=e.writer),this._module=e.module,s$2n._loggers[this.module]=this;const t=this.module.lastIndexOf(".");-1!==t&&(this._parent=s$2n.getLogger(this.module.slice(0,t)));}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e);}warn(...e){this._log("warn","always",...e);}info(...e){this._log("info","always",...e);}errorOnce(...e){this._log("error","once",...e);}warnOnce(...e){this._log("warn","once",...e);}infoOnce(...e){this._log("info","once",...e);}errorOncePerTick(...e){this._log("error","oncePerTick",...e);}warnOncePerTick(...e){this._log("warn","oncePerTick",...e);}infoOncePerTick(...e){this._log("info","oncePerTick",...e);}get test(){const e=this;return {loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get testSingleton(){return {resetLoggers(e={}){const t=s$2n._loggers;return s$2n._loggers=e,t},set throttlingDisabled(e){s$2n._throttlingDisabled=e;}}}static getLogger(e){let t=s$2n._loggers[e];return t||(t=new s$2n({module:e})),t}_log(t,r,...o){if(!this._matchLevel(t))return;if("always"!==r&&!s$2n._throttlingDisabled){const e=this._argsToKey(o),n=this._loggedMessages[t].get(e);if("once"===r&&null!=n||"oncePerTick"===r&&n&&n>=s$2n._tickCounter)return;this._loggedMessages[t].set(e,s$2n._tickCounter),s$2n._scheduleTickCounterIncrement();}for(const s of t$1P.log.interceptors)if(s(t,this.module,...o))return;this._inheritedWriter()(t,this.module,...o);}_parentWithMember(e,r){let o=this;for(;r$1K(o);){const r=o[e];if(r$1K(r))return r;o=o.parent;}return r}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,t,...r){console[e](`[${t}]`,...r);}_matchLevel(t){const r=t$1P.log.level?t$1P.log.level:"warn";return o$1Z[this._parentWithMember("level",r)]<=o$1Z[t]}_argsToKey(...e){const t=(e,t)=>"object"!=typeof t||Array.isArray(t)?t:"[Object]";return c$3m(JSON.stringify(e,t))}static _scheduleTickCounterIncrement(){s$2n._tickCounterScheduled||(s$2n._tickCounterScheduled=!0,Promise.resolve().then((()=>{s$2n._tickCounter++,s$2n._tickCounterScheduled=!1;})));}}s$2n._loggers={},s$2n._tickCounter=0,s$2n._tickCounterScheduled=!1,s$2n._throttlingDisabled=!1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1_(e,s){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(function(e,n){if(""===n)return "$";const i=t$1Q(n,s),r=null==i?"":i;if(void 0===r)throw new Error(`could not find key "${n}" in template`);return r.toString()}))}class s$2m{constructor(t,n,i){this.name=t,this.details=i,this.message=void 0,this instanceof s$2m&&(this.message=n&&e$1_(n,i)||"");}toString(){return "["+this.name+"]: "+this.message}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$2l extends s$2m{constructor(e,t,r){if(super(e,t,r),!(this instanceof s$2l))return new s$2l(e,t,r)}toJSON(){if(null!=this.details)try{return {name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((t,r)=>{if(r&&"object"==typeof r&&"function"==typeof r.toJSON)return r;try{return l$2w(r)}catch(s){return "[object]"}})))}}catch(r){throw s$2n.getLogger("esri.core.Error").error(r),r}return {name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new s$2l(e.name,e.message,e.details)}}s$2l.prototype.type="error";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u$2i=s$2n.getLogger("esri.core.urlUtils"),l$2v=t$1P.request,c$3l="esri/config: esriConfig.request.proxyUrl is not set.",f$1M=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,a$37=/^\s*http:/i,h$1F=/^\s*https:/i,p$3k=/^\s*file:/i,d$1_=/:\d+$/,g$1d=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,m$2f=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),y$1C=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class $$j{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let e=q$s(this.uri.match(m$2f));this.scheme=e[2]||(e[1]?"":null),this.authority=e[4]||(e[3]?"":null),this.path=e[5],this.query=e[7]||(e[6]?"":null),this.fragment=e[9]||(e[8]?"":null),null!=this.authority&&(e=q$s(this.authority.match(y$1C)),this.user=e[3]||null,this.password=e[4]||null,this.host=e[6]||e[7],this.port=e[9]||null);}toString(){return this.uri}}const x$K=new $$j(t$1P.applicationUrl),O$u={},w$10=(()=>{const t=q$s(x$K.path),e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return `${`${x$K.scheme}://${x$K.host}${null!=x$K.port?`:${x$K.port}`:""}`}${e}`})();function U$s(t){const e={path:null,query:null},n=new $$j(t),r=t.indexOf("?");return null===n.query?e.path=t:(e.path=t.substring(0,r),e.query=b$18(n.query)),n.fragment&&(e.hash=n.fragment,null===n.query&&(e.path=e.path.substring(0,e.path.length-(n.fragment.length+1)))),e}function b$18(t){const e=t.split("&"),n={};for(const r of e){if(!r)continue;const t=r.indexOf("=");let e,o;t<0?(e=decodeURIComponent(r),o=""):(e=decodeURIComponent(r.slice(0,t)),o=decodeURIComponent(r.slice(t+1)));let i=n[e];"string"==typeof i&&(i=n[e]=[i]),Array.isArray(i)?i.push(o):n[e]=o;}return n}function R$v(t){return t&&"object"==typeof t&&"toJSON"in t&&"function"==typeof t.toJSON}function C$A(t,e){return t?e&&"function"==typeof e?Object.keys(t).map((n=>encodeURIComponent(n)+"="+encodeURIComponent(e(n,t[n])))).join("&"):Object.keys(t).map((n=>{const r=t[n];if(null==r)return "";const o=encodeURIComponent(n)+"=",i=e&&e[n];return i?o+encodeURIComponent(i(r)):Array.isArray(r)?r.map((t=>R$v(t)?o+encodeURIComponent(JSON.stringify(t)):o+encodeURIComponent(t))).join("&"):R$v(r)?o+encodeURIComponent(JSON.stringify(r)):o+encodeURIComponent(r)})).filter((t=>t)).join("&"):""}function q$r(t=!1){let n,r=l$2v.proxyUrl;if("string"==typeof t){n=rt$3(t);const e=A$y(t);e&&(r=e.proxyUrl);}else n=!!t;if(!r)throw u$2i.warn(c$3l),new s$2l("urlutils:proxy-not-set",c$3l);n&&ct$3()&&(r=ut$3(r));return U$s(r)}function j$V(t){const e=A$y(t);let n,r;if(e){const t=v$11(e.proxyUrl);n=t.path,r=t.query?b$18(t.query):null;}if(n){const e=U$s(t);t=n+"?"+e.path;const o=C$A({...r,...e.query});o&&(t=`${t}?${o}`);}return t}const L$A={path:"",query:""};function v$11(t){const e=t.indexOf("?");return -1!==e?(L$A.path=t.slice(0,e),L$A.query=t.slice(e+1)):(L$A.path=t,L$A.query=null),L$A}function I$D(t){return t=(t=ft$3(t=dt$1(t=v$11(t).path),!0)).toLowerCase()}function S$L(t){const e={proxyUrl:t.proxyUrl,urlPrefix:I$D(t.urlPrefix)},n=l$2v.proxyRules,r=e.urlPrefix;let o=n.length;for(let i=0;i<n.length;i++){const t=n[i].urlPrefix;if(0===r.indexOf(t)){if(r.length===t.length)return -1;o=i;break}0===t.indexOf(r)&&(o=i+1);}return n.splice(o,0,e),o}function A$y(t){const e=l$2v.proxyRules,n=I$D(t);for(let r=0;r<e.length;r++)if(0===n.indexOf(e[r].urlPrefix))return e[r]}function P$u(t,e){return t=k$F(t),e=k$F(e),ft$3(t)===ft$3(e)}function k$F(t){const e=(t=z$s(t)).indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function B$n(t){const e=e=>null==e||e instanceof RegExp&&e.test(t)||"string"==typeof e&&t.startsWith(e),n=l$2v.interceptors;if(n)for(const r of n)if(Array.isArray(r.urls)){if(r.urls.some(e))return r}else if(e(r.urls))return r;return null}function E$x(t,e,n=!1){const r=Ot$1(t),o=Ot$1(e);return !(!n&&r.scheme!==o.scheme)&&(null!=r.host&&null!=o.host&&(r.host.toLowerCase()===o.host.toLowerCase()&&r.port===o.port))}function J$e(t){if("string"==typeof t){if(!Q$e(t))return !0;t=Ot$1(t);}if(E$x(t,x$K))return !0;const e=l$2v.trustedServers||[];for(let n=0;n<e.length;n++){const r=N$v(e[n]);for(let e=0;e<r.length;e++)if(E$x(t,r[e]))return !0}return !1}function N$v(t){return O$u[t]||(nt$2(t)||et$3(t)?O$u[t]=[new $$j(T$t(t))]:O$u[t]=[new $$j(`http://${t}`),new $$j(`https://${t}`)]),O$u[t]}function T$t(t,e=w$10,n){return et$3(t)?n&&n.preserveProtocolRelative?t:"http"===x$K.scheme&&x$K.authority===M$G(t).slice(2)?`http:${t}`:`https:${t}`:nt$2(t)?t:q$s(D$v("/"===t[0]?at$3(e):e,t))}function W$b(t,e=w$10,n){if(!Q$e(t))return t;const r=z$s(t),o=r.toLowerCase(),i=z$s(e).toLowerCase().replace(/\/+$/,""),s=n?z$s(n).toLowerCase().replace(/\/+$/,""):null;if(s&&0!==i.indexOf(s))return t;const u=(t,e,n)=>-1===(n=t.indexOf(e,n))?t.length:n;let l=u(o,"/",o.indexOf("//")+2),c=-1;for(;o.slice(0,l+1)===i.slice(0,l)+"/"&&(c=l+1,l!==o.length);)l=u(o,"/",l+1);if(-1===c)return t;if(s&&c<s.length)return t;t=r.slice(c);const f=i.slice(c-1).replace(/[^/]+/g,"").length;if(f>0)for(let a=0;a<f;a++)t=`../${t}`;else t=`./${t}`;return t}function z$s(t){return t=$t$1(t=yt$3(t=mt$3(t=T$t(t=t.trim()))))}function D$v(...t){const e=t.filter(r$1K);if(!e||!e.length)return;const n=[];if(Q$e(e[0])){const t=e[0],r=t.indexOf("//");-1!==r&&(n.push(t.slice(0,r+1)),it$3(e[0])&&(n[0]+="/"),e[0]=t.slice(r+2));}else "/"===e[0][0]&&n.push("");const r=e.reduce(((t,e)=>e?t.concat(e.split("/")):t),[]);for(let o=0;o<r.length;o++){const t=r[o];".."===t&&n.length>0&&".."!==n[n.length-1]?n.pop():(!t&&o===r.length-1||t&&("."!==t||0===n.length))&&n.push(t);}return n.join("/")}function M$G(t,e=!1){if(F$s(t)||G$l(t))return null;let n=t.indexOf("://");if(-1===n&&et$3(t))n=2;else {if(-1===n)return null;n+=3;}const r=t.indexOf("/",n);return -1!==r&&(t=t.slice(0,r)),e&&(t=ft$3(t,!0)),t}function Q$e(t){return et$3(t)||nt$2(t)}function F$s(t){return null!=t&&"blob:"===t.slice(0,5)}function G$l(t){return "data:"===t.slice(0,5)}function H$i(t){const e=V$f(t);if(!e||!e.isBase64)return null;const n=atob(e.data),r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r.buffer}const K$d=/^data:(.*?)(;base64)?,(.*)$/;function V$f(t){const e=t.match(K$d);if(!e)return null;const[,n,r,o]=e;return {mediaType:n,isBase64:!!r,data:o}}function X$e(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}function et$3(t){return null!=t&&void 0!==t&&"/"===t[0]&&"/"===t[1]}function nt$2(t){return f$1M.test(t)}function rt$3(t){return h$1F.test(t)||"https"===x$K.scheme&&et$3(t)}function ot$3(t){return a$37.test(t)||"http"===x$K.scheme&&et$3(t)}function it$3(t){return p$3k.test(t)}function ut$3(t){return et$3(t)?`https:${t}`:t.replace(a$37,"https:")}function lt$3(){return "http"===x$K.scheme}function ct$3(){return "https"===x$K.scheme}function ft$3(t,e=!1){return et$3(t)?t.slice(2):(t=t.replace(f$1M,""),e&&t.length>1&&"/"===t[0]&&"/"===t[1]&&(t=t.slice(2)),t)}function at$3(t){const e=t.indexOf("//"),n=t.indexOf("/",e+2);return -1===n?t:t.slice(0,n)}function ht$3(t){let e=0;if(Q$e(t)){const n=t.indexOf("//");-1!==n&&(e=n+2);}const n=t.lastIndexOf("/");return n<e?t:t.slice(0,n+1)}function pt$2(t,e){if(!t)return "";const n=U$s(t).path.replace(/\/+$/,""),r=n.substring(n.lastIndexOf("/")+1);if(null==e||!e.length)return r;const o=new RegExp(`.(${e.join("|")})$`,"ig");return r.replace(o,"")}function dt$1(t){return t&&"/"===t[t.length-1]?t:`${t}/`}function gt$3(t){return t.replace(/\/+$/,"")}function mt$3(t){if(/^https?:\/\//i.test(t)){const e=v$11(t);t=(t=e.path.replace(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`);}return t}function yt$3(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function $t$1(t){const e=l$2v.httpsDomains;if(!ot$3(t))return t;const n=t.indexOf("/",7);let r;if(r=-1===n?t:t.slice(0,n),r=r.toLowerCase().slice(7),d$1_.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","");}return lt$3()&&r===x$K.authority&&!g$1d.test(t)||(ct$3()&&r===x$K.authority||e&&e.some((t=>r===t||r.endsWith(`.${t}`)))||ct$3()&&!A$y(t))&&(t=ut$3(t)),t}function xt$2(t,e,n){if(!(e&&n&&t&&Q$e(t)))return t;const r=t.indexOf("//"),o=t.indexOf("/",r+2),i=t.indexOf(":",r+2),s=Math.min(o<0?t.length:o,i<0?t.length:i);if(t.slice(r+2,s).toLowerCase()!==e.toLowerCase())return t;return `${t.slice(0,r+2)}${n}${t.slice(s)}`}function Ot$1(t){return "string"==typeof t?new $$j(T$t(t)):(t.scheme||(t.scheme=x$K.scheme),t)}function wt$3(t){return Lt$1.test(t)}function Ut$1(t,e){const n=U$s(t),r=Object.keys(n.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),n.path}function bt$3(t,e,n){const r=U$s(t),o=r.query||{};return o[e]=String(n),`${r.path}?${C$A(o)}`}function Rt$2(t,e){const n=U$s(t),r=n.query||{};for(const i in e)r[i]=e[i];const o=C$A(r);return o?`${n.path}?${o}`:n.path}function qt$2(t){if(t$1T(t))return null;const e=t.match(jt$1);return e?e[1]:null}const jt$1=/.*?\.([^\/]*)$/,Lt$1=/(^data:image\/svg|\.svg$)/i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$36="4.22",s$2k={async request(e,r){var a;const{default:s}=await Promise.resolve().then(function () { return request; }),n=e.options,o=n.responseType;n.signal=null==r?void 0:r.signal,n.responseType="native"===o||"native-request-init"===o?"native-request-init":["blob","json","text"].includes(o)&&null!=(a=B$n(e.url))&&a.after?o:"array-buffer";const i=await s(e.url,n),u={data:i.data,ssl:i.ssl};switch(i.requestOptions.responseType){case"native-request-init":return delete u.data.signal,u;case"blob":u.data=await u.data.arrayBuffer();break;case"json":u.data=(new TextEncoder).encode(JSON.stringify(u.data)).buffer;break;case"text":u.data=(new TextEncoder).encode(u.data).buffer;}return {result:u,transferList:[u.data]}}};let n$2R;function o$1Y(e){n$2R=e;}function i$2M(e){const t=n$2R&&n$2R.findCredential(e);return t&&t.token?bt$3(e,"token",t.token):e}s$2r("host-webworker")||(s$2r("edge")||s$2r("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1Z(t){return {setTimeout:(e,o)=>{const r=t.setTimeout(e,o);return {remove:()=>t.clearTimeout(r)}}}}const o$1X=e$1Z(e$24);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1Y(e){return e&&("function"==typeof e.on||"function"==typeof e.addEventListener)}function r$1I(r,t,n){if(!e$1Y(r))throw new TypeError("target is not a Evented or EventTarget object");if("on"in r)return r.on(t,n);if(Array.isArray(t)){const e=t.slice();for(const t of e)r.addEventListener(t,n);return {remove(){for(const t of e)r.removeEventListener(t,n);}}}return r.addEventListener(t,n),{remove(){r.removeEventListener(t,n);}}}function t$1O(t,n,o){if(!e$1Y(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(n,o);const i=r$1I(t,n,(e=>{i.remove(),o.call(t,e);}));return {remove(){i.remove();}}}function n$2Q(e,t,n){let o=!1;const i=r$1I(e,t,(r=>{o||n.call(e,r);}));return {resume(){o=!1;},pause(){o=!0;},remove(){i.remove();}}}const o$1W={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function i$2L({key:e}){return o$1W[e]||e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function s$2j(t){return Promise.all(t)}function f$1L(t){return new Promise(((n,e)=>{try{t(n,e);}catch(r){Promise.resolve().then((()=>e(r)));}}))}function m$2e(t="Aborted"){return new s$2l("AbortError",t)}function h$1E(t,n="Aborted"){if(p$3j(t))throw m$2e(n)}function a$35(t){return r$1K(t)?"aborted"in t?t:t.signal:t}function p$3j(t){const n=a$35(t);return r$1K(n)&&n.aborted}function b$17(t){if(d$1Z(t))throw t}function w$$(t){if(!d$1Z(t))throw t}function j$U(t,n){const r=a$35(t);if(!t$1T(r)){if(!r.aborted)return t$1O(r,"abort",(()=>n()));n();}}function v$10(t,n){const r=a$35(t);if(!t$1T(r))return h$1E(r),t$1O(r,"abort",(()=>n(m$2e())))}function P$t(t,n){const e=a$35(n);return t$1T(e)?t:new Promise(((e,r)=>{let o=j$U(n,(()=>r(m$2e())));const i=()=>o=s$2q(o);t.then(i,i),t.then(e,r);}))}function d$1Z(t){return t&&"AbortError"===t.name}function g$1c(t){return t.catch((t=>{if(!d$1Z(t))throw t}))}function A$x(){let t=null;const n=new Promise(((n,e)=>{t={promise:void 0,resolve:n,reject:e};}));return t.promise=n,t}function T$s(t){if(!t)return;if("function"!=typeof t.forEach){const n=Object.keys(t);return T$s(n.map((n=>t[n]))).then((t=>{const e={};return n.forEach(((n,r)=>e[n]=t[r])),e}))}const n=t;return f$1L((t=>{const e=[];let r=n.length;0===r&&t(e),n.forEach((n=>{const o={promise:n||Promise.resolve(n)};e.push(o),o.promise.then((t=>{o.value=t;})).catch((t=>{o.error=t;})).then((()=>{--r,0===r&&t(e);}));}));}))}function E$w(t){return T$s(t).then((t=>t.filter((t=>!!t.value)).map((t=>t.value))))}function C$z(t){return Promise.reject(t)}function k$E(t){return Promise.resolve(t)}function L$z(t,n,e){const r=new AbortController;return j$U(e,(()=>r.abort())),new Promise(((e,o)=>{let i=setTimeout((()=>{i=0,e(n);}),t);j$U(r,(()=>{i&&(clearTimeout(i),o(m$2e()));}));}))}function O$t(t){return t&&"function"==typeof t.then}function U$r(t){return q$q(t)?t:Promise.resolve(t)}function q$q(t){return t&&"object"==typeof t&&"then"in t&&"function"==typeof t.then}function z$r(t,n=-1){let e,r,o,i,c=null;const s=(...l)=>{if(e){r=l,i&&i.reject(m$2e()),i=A$x();const t=q$s(i.promise);if(c){const t=c;c=null,t.abort();}return t}if(o=i||A$x(),i=null,n>0){const r=new AbortController;e=U$r(t(...l,r.signal));const o=e;L$z(n).then((()=>{e===o&&(i?r.abort():c=r);}));}else e=1,e=U$r(t(...l));const f=()=>{const t=r;r=o=e=c=null,null!=t&&s(...t);},h=e,a=o;return h.then(f,f),h.then(a.resolve,a.reject),q$s(a.promise)};return s}function B$m(){let n,e;const r=new Promise(((t,r)=>{n=t,e=r;})),o=t=>{n(t);};return o.resolve=t=>n(t),o.reject=t=>e(t),o.timeout=(n,e)=>o$1X.setTimeout((()=>o.reject(e)),n),o.promise=r,o}function F$r(t){let n=new AbortController;const e=t(n.signal);let r={promise:e,finished:!1,abort:()=>{n&&(n.abort(),n=null);}};const o=()=>{r&&(r.finished=!0,r=null),n=null;};return e.then(o,o),r}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$1N=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function r$1H(c){const r=M$G(c,!0);return r&&r.endsWith(".arcgis.com")&&!t$1N.includes(r)&&!c.endsWith("/sharing/rest/generateToken")}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$1M(t,i,s=!1,c){return new Promise(((d,a)=>{if(p$3j(c))return void a(n$2P());let m=()=>{v(),a(new Error(`Unable to load ${i}`));},l=()=>{const e=t;v(),d(e);},u=()=>{if(!t)return;const e=t;v(),e.src="",a(n$2P());};const v=()=>{s$2r("esri-image-decode")||(t.removeEventListener("error",m),t.removeEventListener("load",l)),m=null,l=null,t=null,r$1K(c)&&c.removeEventListener("abort",u),u=null,s&&URL.revokeObjectURL(i);};r$1K(c)&&c.addEventListener("abort",u),s$2r("esri-image-decode")?t.decode().then(l,m):(t.addEventListener("error",m),t.addEventListener("load",l));}))}function n$2P(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function E$v(e,t){var r;const s=G$l(e),n=F$s(e);n||s||(e=z$s(e));const l={url:e,requestOptions:{...e$23(t)}};let u=B$n(e);if(u){const e=await W$a(u,l);if(null!=e)return {data:e,getHeader:F$q,requestOptions:l.requestOptions,url:l.url};u.after||u.error||(u=null);}if(e=l.url,"image"===(t=l.requestOptions).responseType){if(s$2r("host-webworker")||s$2r("host-node"))throw H$h("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),l)}else if(s)throw H$h("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),l);if("head"===t.method){if(t.body)throw H$h("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),l);if(s||n)throw H$h("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),l)}if(await A$w(),L$y)return L$y.execute(e,t);const c=new AbortController;j$U(t,(()=>c.abort()));const h={controller:c,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:u,params:l,redoRequest:!1,useIdentity:j$T.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},y=await J$d(h);return null==(r=u)||null==r.after||r.after(y),y}let L$y;const j$T=t$1P.request,U$q="FormData"in e$24,P$s=[499,498,403,401],D$u=["COM_0056","COM_0057","SB_0008"],_$I=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],F$q=()=>null,I$C=Symbol();function M$F(e){const t=M$G(e);t&&!E$v._corsServers.includes(t)&&E$v._corsServers.push(t);}function R$u(e){const t=M$G(e);return !t||t.endsWith(".arcgis.com")||E$v._corsServers.includes(t)||J$e(t)}function H$h(e,t,s,o){let a="Error";const i={url:s.url,requestOptions:s.requestOptions,getHeader:F$q,ssl:!1};if(t instanceof s$2l)return t.details?(t.details=l$2w(t.details),t.details.url=s.url,t.details.requestOptions=s.requestOptions):t.details=i,t;if(t){const e=o&&(e=>o.headers.get(e)),r=o&&o.status,s=t.message;s&&(a=s),e&&(i.getHeader=e),i.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||r||0,i.subCode=t.subcode,i.messageCode=t.messageCode,"string"==typeof t.details?i.messages=[t.details]:i.messages=t.details,i.raw=I$C in t?t[I$C]:t;}return d$1Z(t)?m$2e():new s$2l(e,a,i)}async function A$w(){s$2r("host-webworker")?L$y||(L$y=await import('./request.js')):E$v._abortableFetch||(E$v._abortableFetch=e$24.fetch.bind(e$24));}async function B$l(){n$2R||await import('./IdentityManager.js');}async function N$u(r){const o=r.params.url,n=r.params.requestOptions,a=r.controller.signal,i=n.body;let l=null,u=null,d=null;if(U$q&&"HTMLFormElement"in e$24&&(i instanceof FormData?l=i:i instanceof HTMLFormElement&&(u=i,l=new FormData(u))),"string"==typeof i&&(d=i),r.fetchOptions={cache:n.cacheBust&&!E$v._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:n.headers||{},method:"head"===n.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:a},(l||d)&&(r.fetchOptions.body=l||d),"anonymous"===n.authMode&&(r.useIdentity=!1),r.hasToken=!!(/token=/i.test(o)||n.query&&n.query.token||l&&l.get&&l.get("token")||u&&u.elements.token),!r.hasToken&&t$1P.apiKey&&r$1H(o)&&(n.query||(n.query={}),n.query.token=t$1P.apiKey,r.hasToken=!0),r.useIdentity&&!r.hasToken&&!r.credentialToken&&!$$i(o)&&!p$3j(a)){let e;"immediate"===n.authMode?(await B$l(),e=await n$2R.getCredential(o,{signal:a}),r.credential=e):"no-prompt"===n.authMode?(await B$l(),e=await n$2R.getCredential(o,{prompt:!1,signal:a}).catch((()=>{})),r.credential=e):n$2R&&(e=n$2R.findCredential(o)),e&&(r.credentialToken=e.token,r.useSSL=!!e.ssl);}}function $$i(e){return _$I.some((t=>t.test(e)))}async function K$c(e){let r=e.params.url;const s=e.params.requestOptions,n=e.fetchOptions,a=F$s(r)||G$l(r),i=s.responseType||"json",l=a?0:null!=s.timeout?s.timeout:j$T.timeout;let c=!1;if(!a){e.useSSL&&(r=ut$3(r)),s.cacheBust&&"default"===n.cache&&(r=bt$3(r,"request.preventCache",Date.now()));let a={...s.query};e.credentialToken&&(a.token=e.credentialToken);let i=C$A(a);s$2r("esri-url-encodes-apostrophe")&&(i=i.replace(/'/g,"%27"));const l=r.length+1+i.length;let u;c="delete"===s.method||"post"===s.method||"put"===s.method||!!s.body||l>j$T.maxUrlLength;const d=s.useProxy||!!A$y(r);if(d){const e=q$r(r);u=e.path,!c&&u.length+1+l>j$T.maxUrlLength&&(c=!0),e.query&&(a={...e.query,...a});}if("HEAD"===n.method&&(c||d)){if(c){if(l>j$T.maxUrlLength)throw H$h("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params);throw H$h("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params)}if(d)throw H$h("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(c?(n.method="delete"===s.method?"DELETE":"put"===s.method?"PUT":"POST",s.body?r=Rt$2(r,a):(n.body=C$A(a),n.headers["Content-Type"]="application/x-www-form-urlencoded")):r=Rt$2(r,a),d&&(e.useProxy=!0,r=`${u}?${r}`),a.token&&U$q&&n.body instanceof FormData){const e=n.body;e.set?e.set("token",a.token):e.append("token",a.token);}if(s.hasOwnProperty("withCredentials"))e.withCredentials=s.withCredentials;else if(!E$x(r,x$K))if(J$e(r))e.withCredentials=!0;else if(n$2R){const s=n$2R.findServerInfo(r);s&&s.webTierAuth&&(e.withCredentials=!0);}e.withCredentials&&(n.credentials="include");}let m,f,v=0,C=!1;l>0&&(v=setTimeout((()=>{C=!0,e.controller.abort();}),l));try{if("native-request-init"===s.responseType)f=n,f.url=r;else if("image"!==s.responseType||"default"!==n.cache||"GET"!==n.method||c||G$k(s.headers)||!a&&!e.useProxy&&j$T.proxyUrl&&!R$u(r)){if(m=await E$v._abortableFetch(r,n),e.useProxy||M$F(r),"native"===s.responseType)f=m;else if("HEAD"!==n.method)if(m.ok){switch(i){case"array-buffer":f=await m.arrayBuffer();break;case"blob":case"image":f=await m.blob();break;default:f=await m.text();}if(v&&(clearTimeout(v),v=0),"json"===i||"xml"===i||"document"===i)if(f)switch(i){case"json":f=JSON.parse(f);break;case"xml":f=z$q(f,"application/xml");break;case"document":f=z$q(f,"text/html");}else f=null;if(f){if("array-buffer"===i||"blob"===i){const e=m.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(e)&&f["blob"===i?"size":"byteLength"]<=750)try{const e=await new Response(f).json();e.error&&(f=e);}catch{}}"image"===i&&f instanceof Blob&&(f=await Q$d(URL.createObjectURL(f),e,!0));}}else f=await m.text();}else f=await Q$d(r,e);}catch(L){if("AbortError"===L.name){if(C)throw new Error("Timeout exceeded");throw m$2e("Request canceled")}if(!(!m&&L instanceof TypeError&&j$T.proxyUrl)||s.body||"delete"===s.method||"head"===s.method||"post"===s.method||"put"===s.method||e.useProxy||R$u(r))throw L;e.redoRequest=!0,S$L({proxyUrl:j$T.proxyUrl,urlPrefix:M$G(r)});}finally{v&&clearTimeout(v);}return [m,f]}async function W$a(e,t){if(null!=e.responseData)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let o,n;try{n=await e.before(t);}catch(s){o=H$h("request:interceptor",s,t);}if((n instanceof Error||n instanceof s$2l)&&(o=H$h("request:interceptor",n,t)),o)throw e.error&&e.error(o),o;return n}}function G$k(e){if(e)for(const t of Object.getOwnPropertyNames(e))if(e[t])return !0;return !1}function z$q(e,t){let r;try{r=(new DOMParser).parseFromString(e,t);}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function J$d(e){var r,s;let o,n;await N$u(e);try{do{[o,n]=await K$c(e);}while(!await X$d(e,o,n))}catch(l){const t=H$h("request:server",l,e.params,o);throw t.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(t),t}const a=e.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(a)&&!e.hasToken&&!e.credentialToken&&null!=(r=n)&&null!=(s=r.user)&&s.username&&!J$e(a)){const e=M$G(a,!0);e&&j$T.trustedServers.push(e);}const i=e.credential;if(i&&n$2R){const e=n$2R.findServerInfo(i.server);let r=e&&e.owningSystemUrl;if(r){r=r.replace(/\/?$/,"/sharing");const e=n$2R.findCredential(r,i.userId);e&&-1===n$2R._getIdenticalSvcIdx(r,e)&&e.resources.unshift(r);}}return {data:n,getHeader:o?e=>o.headers.get(e):F$q,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function X$d(e,r,s){if(e.redoRequest)return e.redoRequest=!1,!1;const o=e.params.requestOptions;if(!r||"native"===o.responseType||"native-request-init"===o.responseType)return !0;let n,a,i,l;if(!r.ok)throw n=new Error(`Unable to load ${r.url} status: ${r.status}`),n[I$C]=s,n;null!=s&&s.error&&(n=s.error),n&&(a=Number(n.code),i=n.hasOwnProperty("subcode")?Number(n.subcode):null,l=n.messageCode,l=l&&l.toUpperCase());const u=o.authMode;if(403===a&&(4===i||n.message&&n.message.toLowerCase().indexOf("ssl")>-1&&-1===n.message.toLowerCase().indexOf("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&("no-prompt"!==u||498===a)&&-1!==P$s.indexOf(a)&&!$$i(e.params.url)&&(403!==a||-1===D$u.indexOf(l)&&(null==i||2===i&&e.credentialToken))){await B$l();try{const r=await n$2R.getCredential(e.params.url,{error:H$h("request:server",n,e.params),prompt:"no-prompt"!==u,signal:e.controller.signal,token:e.credentialToken});return e.credential=r,e.credentialToken=r.token,e.useSSL=e.useSSL||r.ssl,!1}catch(c){if("no-prompt"===u)return e.credential=null,e.credentialToken=null,!1;n=c;}}if(n)throw n;return !0}function Q$d(e,t,r=!1){const s=t.controller.signal,o=new Image;return t.withCredentials?o.crossOrigin="use-credentials":o.crossOrigin="anonymous",o.alt="",o.src=e,t$1M(o,e,r,s)}E$v._abortableFetch=null,E$v._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];

const request = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': E$v
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$2K=s$2n.getLogger("esri.assets");function a$34(t){if(!t$1P.assetsPath)throw i$2K.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new s$2l("assets:path-not-set","config.assetsPath is not set");return D$v(t$1P.assetsPath,t)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$1X=new Set;function i$2J(n,i,o=!1){o&&e$1X.has(i)||(o&&e$1X.add(i),n.warn(`🛑 DEPRECATED - ${i}`));}function t$1L(e,i,o={}){if(s$2r("esri-deprecation-warnings")){const{moduleName:n}=o;s$2i(e,`Function: ${(n?n+"::":"")+i+"()"}`,o);}}function r$1G(e,i,o={}){if(s$2r("esri-deprecation-warnings")){const{moduleName:n}=o;s$2i(e,`Property: ${(n?n+"::":"")+i}`,o);}}function s$2i(e,o,t={}){if(s$2r("esri-deprecation-warnings")){const{replacement:n,version:r,see:s,warnOnce:a}=t;let c=o;n&&(c+=`\n\t🛠️ Replacement: ${n}`),r&&(c+=`\n\t⚙️ Version: ${r}`),s&&(c+=`\n\t🔗 See ${s} for more details.`),i$2J(e,c,a);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$1F(r){return n$2O((()=>r.forEach((r=>r$1K(r)&&r.remove()))))}function n$2O(e){return {remove:()=>{e&&(e(),e=void 0);}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1W(r){return r?r.__accessor__?r.__accessor__:r.propertyInvalidated?r:null:null}function i$2I(r,n){return null!=r&&r.metadatas&&null!=r.metadatas[n]}function u$2h(r,n,t){if(t){return a$33(r,n,{policy:t,path:""})}return a$33(r,n,null)}function a$33(r,e,i){return e?Object.keys(e).reduce((function(r,o){let u=null,l="merge";if(i&&(u=i.path?`${i.path}.${o}`:o,l=i.policy(u)),"replace"===l)return r[o]=e[o],r;if(void 0===r[o])return r[o]=l$2w(e[o]),r;let f=r[o],s=e[o];if(f===s)return r;if(Array.isArray(s)||Array.isArray(r))f=f?Array.isArray(f)?r[o]=f.concat():r[o]=[f]:r[o]=[],s&&(Array.isArray(s)||(s=[s]),s.forEach((r=>{-1===f.indexOf(r)&&f.push(r);})));else if(s&&"object"==typeof s)if(i){const n=i.path;i.path=q$s(u),r[o]=a$33(f,s,i),i.path=n;}else r[o]=a$33(f,s,null);else r.hasOwnProperty(o)&&!e.hasOwnProperty(o)||(r[o]=s);return r}),r||{}):r}function f$1K(r){return Array.isArray(r)?r:r.split(".")}function s$2h(r){return r.indexOf(",")>-1?r.split(",").map((r=>r.trim())):[r.trim()]}function c$3k(r){if(Array.isArray(r)){const n=[];for(const t of r)n.push(...s$2h(t));return n}return s$2h(r)}function y$1B(n,t,e,i){const o=c$3k(t);if(1!==o.length){const t=o.map((r=>i(n,r,e)));return r$1F(t)}return i(n,o[0],e)}function h$1D(r){let n=!1;return ()=>{n||(n=!0,r());}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1V(t,e){const i="?"===t[t.length-1]?t.slice(0,-1):t;if(null!=e.getItemAt||Array.isArray(e)){const t=parseInt(i,10);if(!isNaN(t))return Array.isArray(e)?e[t]:e.getItemAt(t)}const u=e$1W(e);return i$2I(u,i)?u.get(i):e[i]}function i$2H(t,n,r){if(null==t)return t;const u=e$1V(n[r],t);return !u&&r<n.length-1?void 0:r===n.length-1?u:i$2H(u,n,r+1)}function u$2g(n,r,u=0){return "string"==typeof r&&-1===r.indexOf(".")?e$1V(r,n):i$2H(n,f$1K(r),u)}function o$1V(t,n){return u$2g(t,n)}function s$2g(t,n){return void 0!==u$2g(n,t)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class o$1U{constructor(t){this.autoDestroy=!1,this.properties=t;}}function n$2N(r){let n=r.constructor.__accessorMetadata__;const c=Object.prototype.hasOwnProperty.call(r.constructor,"__accessorMetadata__");if(n){if(!c){const e=Object.create(n.properties),c=n.autoDestroy;for(const r in e)e[r]=l$2w(e[r]);n=new o$1U(e),n.autoDestroy=c,Object.defineProperty(r.constructor,"__accessorMetadata__",{value:n,enumerable:!1,configurable:!0,writable:!0});}}else n=new o$1U({}),Object.defineProperty(r.constructor,"__accessorMetadata__",{value:n,enumerable:!1,configurable:!0,writable:!0});return q$s(r.constructor.__accessorMetadata__)}function c$3j(t){return n$2N(t).properties}function s$2f(t,e){const r=c$3j(t);let o=r[e];return o||(o=r[e]={}),o}function i$2G(t,e){return u$2h(t,e,_$H)}const p$3i=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function _$H(t){return p$3i.test(t)?"replace":"merge"}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$1K(t){return t&&t.release&&"function"==typeof t.release}function i$2F(t){return t&&t.acquire&&"function"==typeof t.acquire}class e$1U{constructor(t,i,e,o=1,s=0){if(this.ctor=t,this.acquireFunction=i,this.releaseFunction=e,this.allocationSize=o,this._pool=new Array(s),this._initialSize=s,this.ctor)for(let n=0;n<s;n++)this._pool[n]=new this.ctor;this.allocationSize=Math.max(o,1);}destroy(){this.prune(0);}acquire(...t){let o;if(e$1U.test.disabled)o=new this.ctor;else {if(0===this._pool.length){const t=this.allocationSize;for(let i=0;i<t;i++)this._pool[i]=new this.ctor;}o=this._pool.pop();}return this.acquireFunction?this.acquireFunction(o,...t):i$2F(o)&&o.acquire(...t),o}release(i){i&&!e$1U.test.disabled&&(this.releaseFunction?this.releaseFunction(i):t$1K(i)&&i.release(),this._pool.push(i));}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const t=this._pool[i];this._dispose(t);}this._pool.length=t;}}_dispose(t){t.dispose&&"function"==typeof t.dispose&&t.dispose();}}e$1U.test={disabled:!1};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let o$1T,r$1E=[];const s$2e=s$2n.getLogger("esri.core.Accessor");function i$2E(t){void 0!==o$1T&&o$1T.onObservableAccessed(t);}let l$2u=!1,f$1J=!1;function a$32(t,n,e){if(l$2u)return g$1b(t,n,e);u$2f(t);const o=n.call(e);return p$3h(),o}function g$1b(t,n,e){const o=l$2u;l$2u=!0,u$2f(t);let r=null;try{r=n.call(e);}catch(c){f$1J&&s$2e.error(c);}return p$3h(),l$2u=o,r}function u$2f(t){o$1T=t,r$1E.push(t);}function p$3h(){const t=r$1E.pop();o$1T=r$1E.length>0?r$1E[r$1E.length-1]:void 0,void 0!==t&&t.onTrackingEnd();}function d$1Y(t,n){if(32&n.flags)return;const e=f$1J;f$1J=!1,64&n.flags?g$1b(n,n.metadata.get,t):h$1C(t,n),f$1J=e;}const m$2d=[];function h$1C(t,e){128&e.flags||(e.flags|=128,g$1b(e,(()=>{const o=e.metadata.dependsOn||m$2d;for(const e of o)if("string"==typeof e&&-1===e.indexOf("."))A$v(t,e,!1);else {const o=f$1K(e);for(let n=0,e=t;n<o.length&&null!=e&&"object"==typeof e;++n)e=A$v(e,o[n],n!==o.length-1);}})),e.flags&=-129);}function A$v(t,n,o){const r="?"===n[n.length-1]?n.slice(0,-1):n;if(null!=t.getItemAt||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.getItemAt(n)}const s=e$1W(t),c=null==s?void 0:s.properties.get(r);return c&&(i$2E(c),d$1Y(t,c)),o?t[r]:void 0}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$2d{constructor(r,s){this._observers=r,this._observer=s;}remove(){C$B(this._observers,this._observer);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class n$2M{constructor(s,t,e){this.properties=s,this.propertyName=t,this.metadata=e,this._observers=null,this._accessed=null,this._handles=null,this.flags=1|(e.nonNullable?8:0)|(e.hasOwnProperty("value")?16:0)|(void 0===e.get?32:0)|(void 0===e.dependsOn?64:0);}destroy(){this._accessed=null,this._observers=null,this._clearObservationHandles();}getComputed(){i$2E(this);const i=this.properties.store,n=this.propertyName,l=this.flags,r=i.get(n);if(4&l)return r;if(1&~l&&i.has(n))return r;this.flags|=4;const h=this.properties.host;let o;64&l?o=a$32(this,this.metadata.get,h):(h$1C(h,this),o=this.metadata.get.call(h)),i.set(n,o,1);const a=i.get(n);return a===r?this.flags&=-2:this.commit(),this.flags&=-5,a}onObservableAccessed(s){s!==this&&(null===this._accessed&&(this._accessed=[]),this._accessed.includes(s)||this._accessed.push(s));}onTrackingEnd(){this._clearObservationHandles(),this.flags|=32;const s=this._accessed;if(null===s)return;let t=this._handles;null===t&&(t=this._handles=[]);for(let e=0;e<s.length;++e)t.push(s[e].observe(this));s.length=0;}observe(s){return null===this._observers&&(this._observers=[]),this._observers.includes(s)||this._observers.push(s),new s$2d(this._observers,s)}notifyChange(){this.onInvalidated(),this.onCommitted();}invalidate(){this.onInvalidated();}onInvalidated(){2&~this.flags&&(this.flags|=1);const s=this._observers;if(null!==s)for(let t=0;t<s.length;++t)s[t].onInvalidated();}commit(){this.flags&=-2,this.onCommitted();}onCommitted(){if(null===this._observers)return;const s=this._observers.slice();for(let t=0;t<s.length;++t)s[t].onCommitted();}_clearObservationHandles(){const s=this._handles;if(null!==s){for(let t=0;t<s.length;++t)s[t].remove();s.length=0;}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$1D=7;function t$1J(e){switch(e){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"user":return 6}}function n$2L(r){switch(r){case 0:return "defaults";case 2:return "service";case 3:return "portal-item";case 4:return "web-scene";case 5:return "web-map";case 6:return "user"}return q$s(void 0)}function c$3i(e){return n$2L(e)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$2c{constructor(){this._values=new Map;}clone(t){const r=new s$2c;return this._values.forEach(((s,a)=>{t&&t.has(a)||r.set(a,l$2w(s));})),r}get(e){return this._values.get(e)}originOf(){return 6}keys(){return [...this._values.keys()]}set(e,s){this._values.set(e,s);}delete(e){this._values.delete(e);}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function p$3g(t,e,s){return void 0!==t}function f$1I(t,e,s,i){return void 0!==t&&(!(null==s&&8&t.flags)||(!1))}function u$2e(t){return t&&"function"==typeof t.destroy}s$2n.getLogger("esri.core.accessorSupport.Properties");class g$1a{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=0,this.store=new s$2c,this._origin=6;const e=this.host.constructor.__accessorMetadata__,s=e.properties;for(const r in s){const t=new n$2M(this,r,s[r]);this.properties.set(r,t);}this.metadatas=s,this._autoDestroy=e.autoDestroy;}initialize(){this.lifecycle=1;}constructed(){this.lifecycle=2;}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,e]of this.properties){const s=this.internalGet(t);s&&u$2e(s)&&(s.destroy(),8&~e.flags&&this._internalSet(e,null)),e.destroy();}else for(const[t,e]of this.properties)e.destroy();}get initialized(){return 0!==this.lifecycle}get(t){const e=this.properties.get(t);if(e.metadata.get)return e.getComputed();i$2E(e);const s=this.store;return s.has(t)?s.get(t):e.metadata.value}originOf(t){const e=this.store.originOf(t);if(void 0===e){const e=this.properties.get(t);if(void 0!==e&&16&e.flags)return "defaults"}return n$2L(e)}has(t){return !!this.properties.has(t)&&this.store.has(t)}keys(){return [...this.properties.keys()]}internalGet(t){const e=this.properties.get(t);if(p$3g(e))return this.store.has(t)?this.store.get(t):e.metadata.value}internalSet(t,e){const s=this.properties.get(t);p$3g(s)&&this._internalSet(s,e);}getDependsInfo(t,e,s){const r=this.properties.get(e);if(!p$3g(r))return "";const o=new Set,n=a$32({onObservableAccessed:t=>o.add(t),onTrackingEnd:()=>{}},(()=>{var e;return null==(e=r.metadata.get)?void 0:e.call(t)}));let a=`${s}${t.declaredClass.split(".").pop()}.${e}: ${n}\n`;if(0===o.size)return a;s+="  ";for(const c of o){if(!(c instanceof n$2M))continue;const t=c.properties.host,e=c.propertyName,r=e$1W(t);a+=r?r.getDependsInfo(t,e,s):`${s}${e}: undefined\n`;}return a}setAtOrigin(t,e,s){const i=this.properties.get(t);if(p$3g(i))return this._setAtOrigin(i,e,s)}isOverridden(t){const e=this.properties.get(t);return void 0!==e&&!!(2&e.flags)}clearOverride(t){const e=this.properties.get(t);void 0!==e&&2&e.flags&&(e.flags&=-3,e.notifyChange());}override(t,e){const s=this.properties.get(t);if(!f$1I(s,t,e))return;const i=s.metadata.cast;if(i){const t=this._cast(i,e),{valid:s,value:r}=t;if(m$2c.release(t),!s)return;e=r;}s.flags|=2,this._internalSet(s,e);}set(t,e){const s=this.properties.get(t);if(!f$1I(s,t,e))return;const i=s.metadata.cast;if(i){const t=this._cast(i,e),{valid:s,value:r}=t;if(m$2c.release(t),!s)return;e=r;}const r=s.metadata.set;r?r.call(this.host,e):this._internalSet(s,e);}setDefaultOrigin(t){this._origin=t$1J(t);}getDefaultOrigin(){return n$2L(this._origin)}notifyChange(t){const e=this.properties.get(t);void 0!==e&&e.notifyChange();}invalidate(t){const e=this.properties.get(t);void 0!==e&&e.invalidate();}commit(t){const e=this.properties.get(t);void 0!==e&&e.commit();}_internalSet(t,e){const s=0!==this.lifecycle?this._origin:0;this._setAtOrigin(t,e,s);}_setAtOrigin(e,s,i){const r=this.store,o=e.propertyName;r.has(o,i)&&m$2g(s,r.get(o))&&2&~e.flags&&i===r.originOf(o)||(e.invalidate(),r.set(o,s,i),e.commit(),d$1Y(this.host,e));}_cast(t,e){const s=m$2c.acquire();return s.valid=!0,s.value=e,t&&(s.value=t.call(this.host,e,s)),s}}class d$1X{constructor(){this.value=null,this.valid=!0;}acquire(){this.valid=!0;}release(){this.value=null;}}const m$2c=new e$1U(d$1X);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$1I(e,r,s){if(e&&r)if("object"==typeof r)for(const o of Object.getOwnPropertyNames(r))t$1I(e,o,r[o]);else {if(-1!==r.indexOf(".")){const i=r.split("."),f=i.splice(i.length-1,1)[0];return void t$1I(o$1V(e,i),f,s)}e[r]=s;}}s$2n.getLogger("esri.core.accessorSupport.set");

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$1C(e){e.length=0;}class t$1H{constructor(t=50,o=50){this._pool=new e$1U(Array,void 0,r$1C,o,t);}acquire(){return this._pool.acquire()}release(e){this._pool.release(e);}prune(){this._pool.prune(0);}static acquire(){return o$1S.acquire()}static release(e){return o$1S.release(e)}static prune(){o$1S.prune();}}const o$1S=new t$1H(100);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$1G extends e$1U{constructor(){super(...arguments),this._set=new Set;}destroy(){super.destroy(),this._set=w$12();}acquire(...e){const s=super.acquire(...e);return this._set.delete(s),s}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e));}_dispose(e){this._set.delete(e),super._dispose(e);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1T(){return e$24.queueMicrotask?e$24.queueMicrotask:e=>{e$24.Promise.resolve().then(e);}}const t$1F=e$1T(),n$2K=[];function r$1B(o){n$2K.push(o),1===n$2K.length&&t$1F((()=>{const o=n$2K.slice();n$2K.length=0;for(const e of o)e();}));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$1E=29;class e$1S{constructor(e,s=t$1E){this.name=e,this._counter=0,this._items=new Array(s);}record(t){this._items[++this._counter%this._items.length]=t;}get median(){return this._items.slice().sort(((t,e)=>t-e))[Math.floor(this._items.length/2)]}get average(){return this._items.reduce(((t,e)=>t+e),0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var o$1R;!function(o){const t=(o,t,n,e)=>{let i=t,c=t;const l=n>>>1,r=o[i-1];for(;c<=l;){c=i<<1,c<n&&e(o[c-1],o[c])<0&&++c;const t=o[c-1];if(e(t,r)<=0)break;o[i-1]=t,i=c;}o[i-1]=r;},n=(o,t)=>o<t?-1:o>t?1:0;function e(o,e,i,c){void 0===e&&(e=0),void 0===i&&(i=o.length),void 0===c&&(c=n);for(let n=i>>>1;n>e;n--)t(o,n,i,c);const l=e+1;for(let n=i-1;n>e;n--){const i=o[e];o[e]=o[n],o[n]=i,t(o,l,n,c);}}function*i(o,e,i,c){void 0===e&&(e=0),void 0===i&&(i=o.length),void 0===c&&(c=n);for(let n=i>>>1;n>e;n--)t(o,n,i,c),yield;const l=e+1;for(let n=i-1;n>e;n--){const i=o[e];o[e]=o[n],o[n]=i,t(o,l,n,c),yield;}}o.sort=e,o.iterableSort=i;}(o$1R||(o$1R={}));const t$1D=o$1R;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$1R=1.5,l$2t=1.1;class n$2J{constructor(h){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new w$11,h&&(h.initialSize&&(this.data=new Array(h.initialSize)),h.allocator&&(this._allocator=h.allocator),void 0!==h.deallocator&&(this._deallocator=h.deallocator),h.shrink&&(this._shrink=()=>r$1A(this)));}toArray(){return this.data.slice(0,this.length)}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t;}else {if(this._deallocator)for(let h=t;h<this._length;++h)this.data[h]=this._deallocator(this.data[h]);this._length=t,this._shrink();}}clear(){this.length=0;}prune(){this.clear(),this.data=[];}push(t){this.data[this._length++]=t;}pushArray(t,h=t.length){for(let i=0;i<h;i++)this.data[this._length++]=t[i];}fill(t,h){for(let i=0;i<h;i++)this.data[this._length++]=t;}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return ++this._length,t}unshift(t){this.data.unshift(t),this._length++,r$1A(this);}pop(){if(0===this.length)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=b$19(this.data,t,this.length,this._hint);if(-1!==i)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){const h=v$12(this.data,t,this.length,this._hint);return void 0!==h&&(this.length=this.length-1),this._shrink(),h}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,h=t.length,i){this.length=O$v(this.data,t,this.length,h,this._hint,i),this._shrink();}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(t,h){t>=this.length||h>=this.length||t===h||([this.data[t],this.data[h]]=[this.data[h],this.data[t]]);}sort(t){t$1D.sort(this.data,0,this.length,t);}iterableSort(t){return t$1D.iterableSort(this.data,0,this.length,t)}some(t,h){for(let i=0;i<this.length;++i)if(t.call(h,this.data[i],i,this.data))return !0;return !1}filterInPlace(t,h){let i=0;for(let s=0;s<this._length;++s){const a=this.data[s];t.call(h,a,s,this.data)&&(this.data[s]=this.data[i],this.data[i]=a,i++);}if(this._deallocator)for(let s=i;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=i,this._shrink(),this}forAll(t,h){const i=this.length,s=this.data;for(let a=0;a<i;++a)t.call(h,s[a],a,s);}forEach(t,h){for(let i=0;i<this.length;++i)t.call(h,this.data[i],i,this.data);}map(t,h){const i=new Array(this.length);for(let s=0;s<this.length;++s)i[s]=t.call(h,this.data[s],s,this.data);return i}reduce(t,h){let i=h;for(let s=0;s<this.length;++s)i=t(i,this.data[s],s,this.data);return i}has(t){const h=this.length,i=this.data;for(let s=0;s<h;++s)if(i[s]===t)return !0;return !1}}function r$1A(t){t.data.length>e$1R*t.length&&(t.data.length=Math.floor(t.length*l$2t));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2I(n){return n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class c$3h{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1;}}class m$2b{constructor(e){this.callback=e,this.isActive=!0;}remove(){this.isActive=!1;}}let l$2s=0;const u$2d={time:n$2I(0),deltaTime:n$2I(0),elapsedFrameTime:n$2I(0),frameDuration:n$2I(0)},f$1H=["prepare","preRender","render","postRender","update"],h$1B=[],d$1W=new n$2J;class w$_{constructor(e){this._task=e;}remove(){this._task.removed=!0;}pause(){this._task.paused=!0;}resume(){this._task.paused=!1;}}const k$D={frameTasks:d$1W,willDispatch:!1,clearFrameTasks:j$S,dispatch:b$16,executeFrameTasks:D$t};function v$$(e){const r=new m$2b(e);return h$1B.push(r),k$D.willDispatch||(k$D.willDispatch=!0,r$1B(b$16)),r}function A$u(e){const t=new c$3h(e);return d$1W.push(t),null==T$r&&(l$2s=performance.now(),T$r=requestAnimationFrame(x$J)),new w$_(t)}let T$r=null;function j$S(e=!1){d$1W.forAll((e=>{e.removed=!0;})),e&&_$G();}function x$J(){const e=performance.now();T$r=null,T$r=d$1W.length>0?requestAnimationFrame(x$J):null,k$D.executeFrameTasks(e);}function D$t(e){const t=n$2I(e-l$2s);l$2s=e;const r=1e3/60,s=Math.max(0,t-r);for(let o=0;o<f$1H.length;o++){const n=performance.now(),a=f$1H[o];d$1W.forAll((n=>{var c;if(n.paused||n.removed)return;0===o&&n.ticks++;n.phases[a]&&(u$2d.time=e,u$2d.deltaTime=0===n.ticks?n$2I(0):t,u$2d.elapsedFrameTime=n$2I(performance.now()-e),u$2d.frameDuration=n$2I(r-s),null==(c=n.phases[a])||c.call(n,u$2d));})),M$E[o].record(performance.now()-n);}_$G(),q$p.record(performance.now()-e);}const g$19=new n$2J;function _$G(){d$1W.forAll((e=>{e.removed&&g$19.push(e);})),d$1W.removeUnorderedMany(g$19.data,g$19.length),g$19.clear();}function b$16(){for(;h$1B.length;){const t=q$s(h$1B.shift());t.isActive&&t.callback();}k$D.willDispatch=!1;}function y$1A(e=1,r){const s=B$m(),i=()=>{p$3j(r)?s.reject(m$2e()):0===e?s():(--e,r$1B((()=>i())));};return i(),s.promise}const M$E=f$1H.map((e=>new e$1S(e))),q$p=new e$1S("total");

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$1C=0;function e$1Q(){return ++t$1C}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$2b{constructor(s){this._notify=s,this._accessed=[],this._handles=[],this._invalidCount=0;}destroy(){this._accessed.length=0,this.clear();}onInvalidated(){this._invalidCount++;}onCommitted(){const s=this._invalidCount;if(1===s)return this._invalidCount=0,void this._notify();this._invalidCount=s>0?s-1:0;}onObservableAccessed(s){this._accessed.includes(s)||this._accessed.push(s);}onTrackingEnd(){const s=this._handles,t=this._accessed;for(let e=0;e<t.length;++e)s.push(t[e].observe(this));t.length=0;}clear(){const s=this._handles;for(let t=0;t<s.length;++t)s[t].remove();s.length=0;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let r$1z=!1;const e$1P=[];function o$1Q(e,o){let u=new s$2b(s),l=null,f=!1;function s(){if(!u||f)return;if(r$1z)return void i$2D(s);const t=l;u.clear(),r$1z=!0,f=!0,l=a$32(u,e),f=!1,r$1z=!1,o(l,t),c$3g();}function m(){u&&(u.destroy(),u=null,l=null);}return f=!0,l=a$32(u,e),f=!1,{remove:m}}function u$2c(r,e){let o=new s$2b(l),u=null;function l(){e(u,c);}function i(){o&&(o.destroy(),o=null),u=null;}function c(){return o?(o.clear(),u=a$32(o,r),u):null}return c(),{remove:i}}function l$2r(e){let o=new s$2b(l),u=!1;function l(){o&&!u&&(r$1z?i$2D(l):(o.clear(),r$1z=!0,u=!0,a$32(o,e),u=!1,r$1z=!1,c$3g()));}function f(){o&&(o.destroy(),o=null);}return u=!0,a$32(o,e),u=!1,{remove:f}}function i$2D(n){e$1P.includes(n)||e$1P.unshift(n);}function c$3g(){for(;e$1P.length;)e$1P.pop()();}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class d$1V{constructor(){this.uid=e$1Q(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null;}static acquireUntracked(e,r,o,l,i){return this.pool.acquire(0,e,r,o,l,i,m$2g)}static acquireTracked(e,t,r,o){return this.pool.acquire(1,e,t,r,null,null,o)}notify(e,t){0===this.type?this.callback.call(this.target,e,t,this.path,this.target):this.callback.call(null,e,t);}acquire(e,t,r,o,l,n,s){this.uid=e$1Q(),this.removed=!1,this.type=e,this.oldValue=t,this.callback=r,this.getValue=o,this.target=l,this.path=n,this.equals=s;}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=e$1Q(),this.removed=!0;}}d$1V.pool=new t$1G(d$1V);const h$1A=new t$1H,f$1G=new Set;let m$2a;function p$3f(e){f$1G.delete(e),f$1G.add(e),m$2a||(m$2a=v$$(q$o));}function v$_(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t));}function _$F(e){for(const t of f$1G.values())t.target===e&&(t.removed=!0);}function q$o(){let e=10;for(;m$2a&&e--;){m$2a=null;const e=j$R(),t=h$1A.acquire();for(const r of e){const e=r.uid;v$_(r),e===r.uid&&r.removed&&t.push(r);}for(const r of f$1G)r.removed&&(t.push(r),f$1G.delete(r));for(const r of t)d$1V.pool.release(r);h$1A.release(t),h$1A.release(e),k$C.forEach((e=>e()));}}function j$R(){const e=h$1A.acquire();e.length=f$1G.size;let t=0;for(const r of f$1G)e[t]=r,++t;return f$1G.clear(),e}const k$C=new Set;function V$e(e,t,r){let o=y$1B(e,t,r,((e,t,r)=>{let l,i,s=u$2c((()=>u$2g(e,t)),((n,s)=>{e.__accessor__.destroyed||l&&l.uid!==i?o.remove():(l||(l=d$1V.acquireUntracked(n,r,s,e,t),i=l.uid),p$3f(l));}));return {remove:h$1D((()=>{s.remove(),l&&(l.uid!==i||l.removed||(l.removed=!0,p$3f(l)),l=null),o=s=null;}))}}));return o}function b$15(e,r,o){const l=y$1B(e,r,o,((e,r,o)=>{let i=!1;return o$1Q((()=>u$2g(e,r)),((n,s)=>{e.__accessor__.destroyed?l.remove():i||(i=!0,m$2g(s,n)||o.call(e,n,s,r,e),i=!1);}))}));return l}function w$Z(e,t,r,o=!1){return !e.__accessor__||e.__accessor__.destroyed?{remove(){}}:o?b$15(e,t,r):V$e(e,t,r)}function U$p(e,t,r){let o,l,i=u$2c(e,((e,n)=>{o&&o.uid!==l?i.remove():(o||(o=d$1V.acquireTracked(e,t,n,r),l=o.uid),p$3f(o));}));return {remove:h$1D((()=>{i.remove(),o&&(o.uid!==l||o.removed||(o.removed=!0,p$3f(o)),o=null),i=null;}))}}function S$K(e,t,r){let o=!1;return o$1Q(e,((e,l)=>{o||(o=!0,r(l,e)||t(e,l),o=!1);}))}function A$t(e,r,o=!1,l=m$2g){return o?S$K(e,r,l):U$p(e,r,l)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2H(n,t){for(const[r,o]of n)if(t(o,r))return !0;return !1}function r$1y(n,t,r){const o=n.get(t);if(void 0!==o)return o;const f=r();return n.set(t,f),f}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$1x=s$2n.getLogger("esri.core.Accessor");function t$1B(e){return null==e?e:new Date(e)}function o$1P(e){return null==e?e:!!e}function u$2b(e){return null==e?e:e.toString()}function a$31(e){return null==e?e:(e=parseFloat(e),isNaN(e)?0:e)}function s$2a(e){return null==e?e:Math.round(parseFloat(e))}function l$2q(e){return e&&e.constructor&&void 0!==e.constructor.__accessorMetadata__}function i$2C(e,n){return null!=n&&e&&!(n instanceof e)}function c$3f(e){return e&&"isCollection"in e}function f$1F(e){return e&&e.Type?"function"==typeof e.Type?e.Type:e.Type.base:null}function p$3e(e,n){if(!n||!n.constructor||!c$3f(n.constructor))return y$1z(e,n)?n:new e(n);const r=f$1F(e.prototype.itemType),t=f$1F(n.constructor.prototype.itemType);return r?t?r===t?n:r.prototype.isPrototypeOf(t.prototype)?new e(n):(y$1z(e,n),n):new e(n):n}function y$1z(e,n){return !!l$2q(n)&&(r$1x.error("Accessor#set","Assigning an instance of '"+(n.declaredClass||"unknown")+"' which is not a subclass of '"+g$18(e)+"'"),!0)}function v$Z(e,n){return null==n?n:c$3f(e)?p$3e(e,n):i$2C(e,n)?y$1z(e,n)?n:new e(n):n}function g$18(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const d$1U=new WeakMap;function h$1z(e){switch(e){case Number:return a$31;case S$J:return s$2a;case Boolean:return o$1P;case String:return u$2b;case Date:return t$1B;default:return r$1y(d$1U,e,(()=>v$Z.bind(null,e)))}}function b$14(e,n){const r=h$1z(e);return 1===arguments.length?r:r(n)}function m$29(e,n,r){return 1===arguments.length?m$29.bind(null,e):n?Array.isArray(n)?n.map((n=>e(n,r))):[e(n,r)]:n}function w$Y(e,n){return 1===arguments.length?m$29(b$14.bind(null,e)):m$29(b$14.bind(null,e),n)}function A$s(e,n,r){return 0!==n&&Array.isArray(r)?r.map((r=>A$s(e,n-1,r))):e(r)}function $$h(e,n,r){if(2===arguments.length)return $$h.bind(null,e,n);if(!r)return r;let t=n,o=r=A$s(e,n,r);for(;t>0&&Array.isArray(o);)t--,o=o[0];if(void 0!==o)for(let u=0;u<t;u++)r=[r];return r}function j$Q(e,n,r){return 2===arguments.length?$$h(b$14.bind(null,e),n):$$h(b$14.bind(null,e),n,r)}function k$B(e){return !!Array.isArray(e)&&!e.some((n=>{const r=typeof n;return !("string"===r||"number"===r||"function"===r&&e.length>1)}))}function M$D(e,n){if(2===arguments.length)return M$D(e).call(null,n);const t=new Set,o=e.filter((e=>"function"!=typeof e)),u=e.filter((e=>"function"==typeof e));for(const r of e)"string"!=typeof r&&"number"!=typeof r||t.add(r);let a=null,s=null;return (e,n)=>{if(null==e)return e;const l=typeof e,c="string"===l||"number"===l;return c&&(t.has(e)||u.some((e=>"string"===l&&e===String||"number"===l&&e===Number)))||"object"===l&&u.some((n=>!i$2C(e,n)))?e:(c&&o.length?(a||(a=o.map((e=>"string"==typeof e?`'${e}'`:`${e}`)).join(", ")),r$1x.error("Accessor#set",`'${e}' is not a valid value for this property, only the following values are valid: ${a}`)):"object"==typeof e&&u.length?(s||(s=u.map((e=>g$18(e))).join(", ")),r$1x.error("Accessor#set",`'${e}' is not a valid value for this property, value must be one of ${s}`)):r$1x.error("Accessor#set",`'${e}' is not a valid value for this property`),n&&(n.valid=!1),null)}}function N$t(e,n){if(2===arguments.length)return N$t(e).call(null,n);const t={},o=[],u=[];for(const r in e.typeMap){const n=e.typeMap[r];t[r]=b$14(n),o.push(g$18(n)),u.push(r);}const a=()=>`'${o.join("', '")}'`,s=()=>`'${u.join("', '")}'`,c="string"==typeof e.key?n=>n[e.key]:e.key;return n=>{if(e.base&&!i$2C(e.base,n))return n;if(null==n)return n;const o=c(n)||e.defaultKeyValue,u=t[o];if(!u)return r$1x.error("Accessor#set",`Invalid property value, value needs to be one of ${a()}, or a plain object that can autocast (having .type = ${s()})`),null;if(!i$2C(e.typeMap[o],n))return n;if("string"==typeof e.key&&!l$2q(n)){const r={};for(const t in n)t!==e.key&&(r[t]=n[t]);return u(r)}return u(n)}}class S$J{}const T$q={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function _$E(e){if(!e||!("type"in e))return !1;switch(e.type){case"native":case"array":case"one-of":return !0}return !1}function B$k(e){switch(e.type){case"native":return b$14(e.value);case"array":return m$29(B$k(e.value));case"one-of":return C$y(e);default:return null}}function C$y(e){let n=null;return (t,o)=>F$p(t,e)?t:(null==n&&(n=D$s(e)),r$1x.error("Accessor#set",`Invalid property value, value needs to be of type ${n}`),o&&(o.valid=!1),null)}function D$s(e){switch(e.type){case"native":switch(e.value){case Number:return "number";case String:return "string";case Boolean:return "boolean";case S$J:return "integer";case Date:return "date";default:return g$18(e.value)}case"array":return `array of ${D$s(e.value)}`;case"one-of":{const n=e.values.map((e=>D$s(e)));return `one of ${n.slice(0,n.length-1)} or ${n[n.length-1]}`}}return "unknown"}function F$p(e,n){if(null==e)return !0;switch(n.type){case"native":switch(n.value){case Number:case S$J:return "number"==typeof e;case Boolean:return "boolean"==typeof e;case String:return "string"==typeof e}return e instanceof n.value;case"array":return !!Array.isArray(e)&&!e.some((e=>!F$p(e,n.value)));case"one-of":return n.values.some((n=>F$p(e,n)))}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function d$1T(n={}){return (o,i)=>{if(o===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${o.name}.${i}. Accessor does not support static properties.`);const s=Object.getOwnPropertyDescriptor(o,i),a=s$2f(o,i);s&&(s.get||s.set?(a.get=s.get||a.get,a.set=s.set||a.set):"value"in s&&("value"in n&&s$2n.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${o.constructor.name}" already defined in the metadata`,n),a.value=n.value=s.value)),null!=n.readOnly&&(a.readOnly=n.readOnly);const c=n.aliasOf;if(c){const t="string"==typeof c?c:c.source,e="string"==typeof c?null:!0===c.overridable;let r;a.dependsOn=[t],a.get=function(){let e=o$1V(this,t);if("function"==typeof e){r||(r=t.split(".").slice(0,-1).join("."));const n=o$1V(this,r);n&&(e=e.bind(n));}return e},a.readOnly||(a.set=e?function(t){void 0!==t?this._override(i,t):this._clearOverride(i);}:function(e){t$1I(this,t,e);});}const p=n.type,u=n.types;a.cast||(p?a.cast=h$1y(p):u&&(Array.isArray(u)?a.cast=m$29(N$t(u[0])):a.cast=N$t(u))),n.range&&(a.cast=v$Y(a.cast,n.range)),i$2G(a,n);}}function y$1y(t,e,r){const n=s$2f(t,r);n.json||(n.json={});let o=n.json;return void 0!==e&&(o.origins||(o.origins={}),o.origins[e]||(o.origins[e]={}),o=o.origins[e]),o}function h$1y(t){let e=0,r=t;if(_$E(t))return B$k(t);for(;Array.isArray(r)&&1===r.length&&"string"!=typeof r[0]&&"number"!=typeof r[0];)r=r[0],e++;const l=r;if(k$B(l))return 0===e?M$D(l):$$h(M$D(l),e);if(1===e)return w$Y(l);if(e>1)return j$Q(l,e);const f=t;return f.from?f.from:b$14(f)}function v$Y(t,e){return r=>{let n=+t(r);return null!=e.step&&(n=Math.round(n/e.step)*e.step),null!=e.min&&(n=Math.max(e.min,n)),null!=e.max&&(n=Math.min(e.max,n)),n}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2G(n){if(n.json&&n.json.origins){const o=n.json.origins,e={"web-document":["web-scene","web-map"]};for(const n in e)if(o[n]){const s=o[n];e[n].forEach((n=>{o[n]=s;})),delete o[n];}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$1A extends s$2m{constructor(e,s,r){if(super(e,s,r),!(this instanceof t$1A))return new t$1A(e,s,r)}}t$1A.prototype.type="warning";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1O(e){return !!e&&e.prototype&&e.prototype.declaredClass&&0===e.prototype.declaredClass.indexOf("esri.core.Collection")}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$2B=s$2n.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function p$3d(t,r,n){var o,i;t&&(!n&&!r.read||null!=(o=r.read)&&o.reader||!1===(null==(i=r.read)?void 0:i.enabled)||d$1S(t)&&o$1$("read.reader",u$2a(t),r));}function u$2a(t){var e;const r=null!=(e=t.ndimArray)?e:0;if(r>1)return c$3e(t);if(1===r)return a$30(t);if("type"in t&&l$2p(t.type)){var n,o;const e=null==(n=t.type.prototype)||null==(o=n.itemType)?void 0:o.Type,r=a$30("function"==typeof e?{type:e}:{types:e});return (e,n,o)=>{const i=r(e,n,o);return i?new t.type(i):i}}return s$29(t)}function s$29(t){return "type"in t?y$1x(t.type):j$P(t.types)}function y$1x(t){return t.prototype.read?(e,r,n)=>{if(null==e)return e;const o=typeof e;if("object"!==o)return void i$2B.error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${o}'`);const p=new t;return p.read(e,n),p}:t.fromJSON}function f$1E(t,e,r,n){return 0!==n&&Array.isArray(e)?e.map((e=>f$1E(t,e,r,n-1))):t(e,void 0,r)}function c$3e(t){var e;const r=s$29(t),n=f$1E.bind(null,r),o=null!=(e=t.ndimArray)?e:0;return (t,e,r)=>{if(null==t)return t;t=n(t,r,o);let i=o,p=t;for(;i>0&&Array.isArray(p);)i--,p=p[0];if(void 0!==p)for(let n=0;n<i;n++)t=[t];return t}}function a$30(t){const e=s$29(t);return (t,r,n)=>{if(null==t)return t;if(Array.isArray(t)){const r=[];for(const o of t){const t=e(o,void 0,n);void 0!==t&&r.push(t);}return r}const o=e(t,void 0,n);return void 0!==o?[o]:void 0}}function l$2p(t){if(!e$1O(t))return !1;const e=t.prototype.itemType;return !(!e||!e.Type)&&("function"==typeof e.Type?v$X(e.Type):m$28(e.Type))}function d$1S(t){return "types"in t?m$28(t.types):v$X(t.type)}function v$X(t){return !Array.isArray(t)&&(!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||l$2p(t)))}function m$28(t){for(const e in t.typeMap){if(!v$X(t.typeMap[e]))return !1}return !0}function j$P(t){var e;let n=null;const o=null!=(e=t.errorContext)?e:"type";return (e,p,u)=>{if(null==e)return e;const s=typeof e;if("object"!==s)return void i$2B.error(`Expected JSON value of type 'object' to deserialize, but got '${s}'`);n||(n=g$17(t));const y=t.key;if("string"!=typeof y)return;const f=e[y],c=f?n[f]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!c){const t=`Type '${f||"unknown"}' is not supported`;return u&&u.messages&&e&&u.messages.push(new t$1A(`${o}:unsupported`,t,{definition:e,context:u})),void i$2B.error(t)}const a=new c;return a.read(e,u),a}}function g$17(t){const e={};for(const i in t.typeMap){var r,o;const p=t.typeMap[i],u=n$2N(p.prototype);if("function"==typeof t.key)continue;const s=u.properties[t.key];if(!s)continue;null!=(r=s.json)&&r.type&&Array.isArray(s.json.type)&&1===s.json.type.length&&"string"==typeof s.json.type[0]&&(e[s.json.type[0]]=p);const y=null==(o=s.json)?void 0:o.write;if(!y||!y.writer){e[i]=p;continue}const f=y.target,c="string"==typeof f?f:t.key,a={};y.writer(i,a,c),a[c]&&(e[a[c]]=p);}return e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1N(e){if(e.json||(e.json={}),o$1O(e.json),n$2F(e.json),r$1w(e.json),e.json.origins)for(const t in e.json.origins)o$1O(e.json.origins[t]),n$2F(e.json.origins[t]),r$1w(e.json.origins[t]);return !0}function r$1w(e){e.name&&(e.read&&"object"==typeof e.read?void 0===e.read.source&&(e.read.source=e.name):e.read={source:e.name},e.write&&"object"==typeof e.write?void 0===e.write.target&&(e.write.target=e.name):e.write={target:e.name});}function o$1O(e){"boolean"==typeof e.read?e.read={enabled:e.read}:"function"==typeof e.read?e.read={enabled:!0,reader:e.read}:e.read&&"object"==typeof e.read&&void 0===e.read.enabled&&(e.read.enabled=!0);}function n$2F(e){"boolean"==typeof e.write?e.write={enabled:e.write}:"function"==typeof e.write?e.write={enabled:!0,writer:e.write}:e.write&&"object"==typeof e.write&&void 0===e.write.enabled&&(e.write.enabled=!0);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$2A=s$2n.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function o$1N(r,t){var e;if(!t.write||t.write.writer||!1===t.write.enabled&&!t.write.overridePolicy)return;const i=null!=(e=null==r?void 0:r.ndimArray)?e:0;r&&(1===i||"type"in r&&e$1O(r.type))?t.write.writer=a$2$:i>1?t.write.writer=w$X(i):t.types?Array.isArray(t.types)?t.write.writer=s$28(t.types[0]):t.write.writer=u$29(t.types):t.write.writer=l$2o;}function u$29(r){return (t,e,n,i)=>t?f$1D(t,r,i)?l$2o(t,e,n,i):void 0:l$2o(t,e,n,i)}function f$1D(t,e,n){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return !0;if(null!=n&&n.messages){var o,u;const f=null!=(o=e.errorContext)?o:"type",s=`Values of type '${null!=(u="function"!=typeof e.key?t[e.key]:t.declaredClass)?u:"Unknown"}' cannot be written`;n&&n.messages&&t&&n.messages.push(new s$2l(`${f}:unsupported`,s,{definition:t,context:n})),i$2A.error(s);}return !1}function s$28(r){return (t,e,n,i)=>{if(!t||!Array.isArray(t))return l$2o(t,e,n,i);return l$2o(t.filter((t=>f$1D(t,r,i))),e,n,i)}}function l$2o(r,t,n,i){o$1$(n,p$3c(r,i),t);}function p$3c(r,t){return r&&"function"==typeof r.write?r.write({},t):r&&"function"==typeof r.toJSON?r.toJSON():"number"==typeof r?y$1w(r):r}function y$1w(r){return r===-1/0?-Number.MAX_VALUE:r===1/0?Number.MAX_VALUE:isNaN(r)?null:r}function a$2$(r,t,n,i){let o;null===r?o=null:r&&"function"==typeof r.map?(o=r.map((r=>p$3c(r,i))),"function"==typeof o.toArray&&(o=o.toArray())):o=[p$3c(r,i)],o$1$(n,o,t);}function c$3d(r,t,e){return 0!==e&&Array.isArray(r)?r.map((r=>c$3d(r,t,e-1))):p$3c(r,t)}function w$X(r){return function(t,n,i,o){let u;if(null===t)u=null;else {u=c$3d(t,o,r);let e=r,n=u;for(;e>0&&Array.isArray(n);)e--,n=n[0];if(void 0!==n)for(let r=0;r<e;r++)u=[u];}o$1$(i,u,n);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function o$1M(r,n){return a$2_(r,"read",n)}function s$27(r,n){return a$2_(r,"write",n)}function a$2_(r,n,e){let t=r&&r.json;if(r&&r.json&&r.json.origins&&e){const i=r.json.origins[e.origin];i&&("any"===n||n in i)&&(t=i);}return t}function p$3b(r){const n=y$1v(r);if(r.json.origins)for(const t in r.json.origins){const o=r.json.origins[t],s=o.types?f$1C(o):n;p$3d(s,o,!1),o.types&&!o.write&&r.json.write&&r.json.write.enabled&&(o.write={...r.json.write}),o$1N(s,o);}p$3d(n,r.json,!0),o$1N(n,r.json);}function y$1v(r){return r.json.types?u$28(r.json):r.type?j$O(r):u$28(r)}function f$1C(r){return r.type?j$O(r):u$28(r)}function j$O(n){if(!n.type)return;let e=0,t=n.type;for(;Array.isArray(t)&&!k$B(t);)t=t[0],e++;return {type:t,ndimArray:e}}function u$28(r){if(!r.types)return;let n=0,e=r.types;for(;Array.isArray(e);)e=e[0],n++;return {types:e,ndimArray:n}}function c$3c(r){e$1N(r)&&(n$2G(r),p$3b(r));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$1L=new Set,s$26=new Set;function i$2z(t){return r=>{r.prototype.declaredClass=t,a$2Z(r);const i=[],n=[];let c=r.prototype;for(;c;)c.hasOwnProperty("initialize")&&!o$1L.has(c.initialize)&&(o$1L.add(c.initialize),i.push(c.initialize)),c.hasOwnProperty("destroy")&&!s$26.has(c.destroy)&&(s$26.add(c.destroy),n.push(c.destroy)),c=Object.getPrototypeOf(c);o$1L.clear(),s$26.clear();class l extends r{constructor(...e){if(super(...e),this.constructor===l&&"function"==typeof this.postscript){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let e=i.length-1;e>=0;e--)i[e].call(this);}}),n.length){let e=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!e){e=!0;for(let e=0;e<n.length;e++)n[e].call(this);}}});}this.postscript(...e);}}}return l.__accessorMetadata__=n$2N(r.prototype),l.prototype.declaredClass=t,l}}function n$2E(e,r){return null==r.get?function(){const r=this.__accessor__.properties.get(e);if(void 0===r)return;i$2E(r);const o=this.__accessor__.store;return o.has(e)?o.get(e):r.metadata.value}:function(){const t=this.__accessor__.properties.get(e);if(void 0!==t)return t.getComputed()}}function a$2Z(t){const o=t.prototype,s=n$2N(o).properties,i={};for(const e of Object.getOwnPropertyNames(s)){const t=s[e];c$3c(t),i[e]={enumerable:!0,configurable:!0,get:n$2E(e,t),set(r){const o=this.__accessor__;if(void 0!==o){if(!Object.isFrozen(this)){if(o.initialized&&t.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${e}' of ${this.declaredClass}`);if(2===o.lifecycle&&t.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${e}' of ${this.declaredClass}`);o.set(e,r);}}else Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:r});}};}Object.defineProperties(t.prototype,i);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function u$27(t){if(null==t)return {value:t};if(Array.isArray(t))return {type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor&&t.constructor.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return {type:Boolean,value:t};case"string":return {type:String,value:t};case"number":return {type:Number,value:t};case"function":return {type:t,value:null};default:return}}class p$3a{constructor(...t){if(this.constructor===p$3a)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new g$1a(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t));}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:e,constructor:o}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const c=this;class i extends c{constructor(...t){super(...t),this.inherited=null,o&&o.apply(this,t);}}n$2N(i.prototype);for(const s in t){const r=t[s];i.prototype[s]="function"==typeof r?function(...t){const e=this.inherited;let o;this.inherited=function(...t){if(c.prototype[s])return c.prototype[s].apply(this,t)};try{o=r.apply(this,t);}catch(i){throw this.inherited=e,i}return this.inherited=e,o}:t[s];}for(const s in r){const t=u$27(r[s]);d$1T(t)(i.prototype,s);}return i$2z(e)(i)}postscript(t){const r=this.__accessor__,e=r.ctorArgs||t;r.initialize(),e&&(this.set(e),r.ctorArgs=null),r.constructed(),this.initialize();}initialize(){}destroy(){this.destroyed||(_$F(this),this.__accessor__.destroy());}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t);}get(t){return o$1V(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}isInstanceOf(e){return t$1L(s$2n.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof e}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return t$1I(this,t,r),this}watch(t,r,e){return w$Z(this,t,r,e)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,r){return this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t);}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class i$2y{constructor(){this._emitter=new i$2y.EventEmitter(this);}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}}!function(n){class o{constructor(t=null){this.target=t,this._listenersMap=null;}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null;}emit(t,e){const s=this._listenersMap&&this._listenersMap.get(t);if(!s)return !1;const r=this.target||this;return [...s].forEach((t=>{t.call(r,e);})),s.length>0}on(t,e){if(Array.isArray(t)){const r=t.map((t=>this.on(t,e)));return r$1F(r)}if(t.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const r=this._listenersMap.get(t)||[];return r.push(e),this._listenersMap.set(t,r),{remove:()=>{const s=this._listenersMap&&this._listenersMap.get(t)||[],r=s.indexOf(e);r>=0&&s.splice(r,1);}}}once(t,e){const s=this.on(t,(t=>{s.remove(),e.call(null,t);}));return s}hasEventListener(t){const e=this._listenersMap&&this._listenersMap.get(t);return null!=e&&e.length>0}}n.EventEmitter=o,n.EventedMixin=e=>{let s=class extends e{constructor(){super(...arguments),this._emitter=new o;}destroy(){this._emitter.clear();}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}};return s=e$25([i$2z("esri.core.Evented")],s),s};let h=class extends p$3a{constructor(){super(...arguments),this._emitter=new i$2y.EventEmitter(this);}destroy(){this._emitter.clear();}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}};h=e$25([i$2z("esri.core.Evented")],h),n.EventedAccessor=h;}(i$2y||(i$2y={}));const n$2D=i$2y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2C(n){return (r,t)=>{r[t]=n;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$1M{constructor(){this._observers=[];}observe(e){return this._observers.includes(e)||this._observers.push(e),new s$2d(this._observers,e)}notify(){const s=this._observers.slice();for(let e=0;e<s.length;++e){const r=s[e];r.onInvalidated(),r.onCommitted();}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$26;class g$16{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0;}preventDefault(){this.cancellable&&(this.defaultPrevented=!0);}reset(e){this.defaultPrevented=!1,this.item=e;}}const p$39=new e$1U(g$16,void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1;})),d$1R=()=>{};function b$13(e){return e?e instanceof L$x?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function v$W(e){if(e&&e.length)return e[0]}function y$1u(e,t,s,i){const r=Math.min(e.length-s,t.length-i);let n=0;for(;n<r&&e[s+n]===t[i+n];)n++;return n}function C$x(e,t,s,i){t&&t.forEach(((t,r,n)=>{e.push(t),C$x(e,s.call(i,t,r,n),s,i);}));}const A$r=new Set,x$I=new Set,E$u=new Set,j$N=new Map;let B$j=0,L$x=u$26=class extends n$2D.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new e$1M,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:B$j++});}static isCollection(e){return null!=e&&e instanceof u$26}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof u$26?{items:e}:e:{}}destroy(){this.removeAll();}*[Symbol.iterator](){yield*this.items;}get items(){return i$2E(this._observable),this._items}set items(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,...b$13(e)),this._emitAfterChanges(1));}hasEventListener(e){return "change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if("change"===e){const e=this._chgListeners,s={removed:!1,callback:t};return e.push(s),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=d$1R,s.removed=!0,e.splice(e.indexOf(s),1);}}}return this._emitter.on(e,t)}once(e,t){const s=this.on(e,t);return {remove(){s.remove();}}}add(e,t){if(i$2E(this._observable),this._emitBeforeChanges(1))return this;const s=this.getNextIndex(null!=t?t:null);return this._splice(s,0,e),this._emitAfterChanges(1),this}addMany(e,t=this._items.length){if(i$2E(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(1))return this;const s=this.getNextIndex(t);return this._splice(s,0,...b$13(e)),this._emitAfterChanges(1),this}removeAll(){if(i$2E(this._observable),!this.length||this._emitBeforeChanges(2))return [];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(2),e}clone(){return i$2E(this._observable),this._createNewInstance({items:this._items.map(l$2w)})}concat(...e){i$2E(this._observable);const t=e.map(b$13);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(i$2E(this._observable),!this.length||this._emitBeforeChanges(2))return;const s=q$s(this._splice(0,this.length)),i=s.length;for(let r=0;r<i;r++)e.call(t,s[r],r,s);this._emitAfterChanges(2);}every(e,t){return i$2E(this._observable),this._items.every(e,t)}filter(e,t){let s;return i$2E(this._observable),s=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:s})}find(e,t){return i$2E(this._observable),this._items.find(e,t)}findIndex(e,t){return i$2E(this._observable),this._items.findIndex(e,t)}flatten(e,t){i$2E(this._observable);const s=[];return C$x(s,this,e,t),new u$26(s)}forEach(e,t){return i$2E(this._observable),this._items.forEach(e,t)}getItemAt(e){return i$2E(this._observable),this._items[e]}getNextIndex(e){i$2E(this._observable);const t=this.length;return (e=null==e?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return i$2E(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return i$2E(this._observable),this._items.indexOf(e,t)}join(e=","){return i$2E(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return i$2E(this._observable),this._items.lastIndexOf(e,t)}map(e,t){i$2E(this._observable);const s=this._items.map(e,t);return new u$26({items:s})}reorder(e,t=this.length-1){i$2E(this._observable);const s=this.indexOf(e);if(-1!==s){if(t<0?t=0:t>=this.length&&(t=this.length-1),s!==t){if(this._emitBeforeChanges(4))return e;this._splice(s,1),this._splice(t,0,e),this._emitAfterChanges(4);}return e}}pop(){if(i$2E(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=v$W(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}push(...e){return i$2E(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,...e),this._emitAfterChanges(1)),this.length}reduce(e,t){i$2E(this._observable);const s=this._items;return 2===arguments.length?s.reduce(e,t):s.reduce(e)}reduceRight(e,t){i$2E(this._observable);const s=this._items;return 2===arguments.length?s.reduceRight(e,t):s.reduceRight(e)}remove(e){return i$2E(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(i$2E(this._observable),e<0||e>=this.length||this._emitBeforeChanges(2))return;const t=v$W(this._splice(e,1));return this._emitAfterChanges(2),t}removeMany(e){if(i$2E(this._observable),!e||!e.length||this._emitBeforeChanges(2))return [];const t=e instanceof u$26?e.toArray():e,s=this._items,i=[],r=t.length;for(let n=0;n<r;n++){const e=t[n],r=s.indexOf(e);if(r>-1){const e=1+y$1u(t,s,n+1,r+1),h=this._splice(r,e);h&&h.length>0&&i.push.apply(i,h),n+=e-1;}}return this._emitAfterChanges(2),i}reverse(){if(i$2E(this._observable),this._emitBeforeChanges(4))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,...e)),this._emitAfterChanges(4),this}shift(){if(i$2E(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=v$W(this._splice(0,1));return this._emitAfterChanges(2),e}slice(e=0,t=this.length){return i$2E(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return i$2E(this._observable),this._items.some(e,t)}sort(e){if(i$2E(this._observable),!this.length||this._emitBeforeChanges(4))return this;const t=q$s(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice(0,0,...t),this._emitAfterChanges(4),this}splice(e,t,...s){i$2E(this._observable);const i=(t?2:0)|(s.length?1:0);if(this._emitBeforeChanges(i))return [];const r=this._splice(e,t,...s)||[];return this._emitAfterChanges(i),r}toArray(){return i$2E(this._observable),this._items.slice()}toJSON(){return i$2E(this._observable),this.toArray()}toLocaleString(){return i$2E(this._observable),this._items.toLocaleString()}toString(){return i$2E(this._observable),this._items.toString()}unshift(...e){return i$2E(this._observable),!e.length||this._emitBeforeChanges(1)||(this._splice(0,0,...e),this._emitAfterChanges(1)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,...s){const i=this._items,r=this.itemType;let n,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=v$$((()=>this._dispatchChange()))),t){if(o=i.splice(e,t),this.hasEventListener("before-remove")){const t=p$39.acquire();t.target=this,t.cancellable=!0;for(let s=0,r=o.length;s<r;s++)n=o[s],t.reset(n),this.emit("before-remove",t),t.defaultPrevented&&(o.splice(s,1),i.splice(e,0,n),e+=1,s-=1,r-=1);p$39.release(t);}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=p$39.acquire();e.target=this,e.cancellable=!1;const t=o.length;for(let s=0;s<t;s++)e.reset(o[s]),this.emit("after-remove",e);p$39.release(e);}}if(s&&s.length){if(r){const e=[];for(const t of s){const s=r.ensureType(t);null==s&&null!=t||e.push(s);}s=e;}const t=this.hasEventListener("before-add"),n=this.hasEventListener("after-add"),h=e===this.length;if(t||n){const r=p$39.acquire();r.target=this,r.cancellable=!0;const o=p$39.acquire();o.target=this,o.cancellable=!1;for(const l of s)t?(r.reset(l),this.emit("before-add",r),r.defaultPrevented||(h?i.push(l):i.splice(e++,0,l),this._set("length",i.length),n&&(o.reset(l),this.emit("after-add",o)))):(h?i.push(l):i.splice(e++,0,l),this._set("length",i.length),o.reset(l),this.emit("after-add",o));p$39.release(o),p$39.release(r);}else {if(h)for(const e of s)i.push(e);else i.splice(e,0,...s);this._set("length",i.length);}}return (s&&s.length||o&&o.length)&&this._notifyChangeEvent(s,o),o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const s=p$39.acquire();s.target=this,s.cancellable=!0,s.type=e,this.emit("before-changes",s),t=s.defaultPrevented,p$39.release(s);}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=p$39.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),p$39.release(t);}this._observable.notify();}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t});}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const s of e){const e=s.changes;A$r.clear(),x$I.clear(),E$u.clear();for(const{added:t,removed:s}of e){if(t)if(0===E$u.size&&0===x$I.size)for(const e of t)A$r.add(e);else for(const e of t)x$I.has(e)?(E$u.add(e),x$I.delete(e)):E$u.has(e)||A$r.add(e);if(s)if(0===E$u.size&&0===A$r.size)for(const e of s)x$I.add(e);else for(const e of s)A$r.has(e)?A$r.delete(e):(E$u.delete(e),x$I.add(e));}const i=t$1H.acquire();A$r.forEach((e=>{i.push(e);}));const r=t$1H.acquire();x$I.forEach((e=>{r.push(e);}));const n=this._items,h=s.items,o=t$1H.acquire();if(E$u.forEach((e=>{h.indexOf(e)!==n.indexOf(e)&&o.push(e);})),s.listeners&&(i.length||r.length||o.length)){const e={target:this,added:i,removed:r,moved:o},t=s.listeners.length;for(let i=0;i<t;i++){const t=s.listeners[i];t.removed||t.callback.call(this,e);}}t$1H.release(i),t$1H.release(r),t$1H.release(o);}A$r.clear(),x$I.clear(),E$u.clear();}};L$x.ofType=t=>{if(!t)return u$26;if(j$N.has(t))return j$N.get(t);let s=null;if("function"==typeof t)s=t.prototype.declaredClass;else if(t.base)s=t.base.prototype.declaredClass;else for(const e in t.typeMap){const i=t.typeMap[e].prototype.declaredClass;s?s+=` | ${i}`:s=i;}let i=class extends u$26{};return e$25([n$2C({Type:t,ensureType:"function"==typeof t?b$14(t):N$t(t)})],i.prototype,"itemType",void 0),i=e$25([i$2z(`esri.core.Collection<${s}>`)],i),j$N.set(t,i),i},e$25([d$1T()],L$x.prototype,"length",void 0),e$25([d$1T()],L$x.prototype,"items",null),L$x=u$26=e$25([i$2z("esri.core.Collection")],L$x);const S$I=L$x;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let h$1x=class extends p$3a{constructor(r){super(r),this._groups=new Map;}destroy(){this.removeAll();}get size(){let r=0;return this._groups.forEach((e=>{r+=e.length;})),r}add(r,e){if(!this._isHandle(r)&&!Array.isArray(r)&&!S$I.isCollection(r))return this;const t=this._getOrCreateGroup(e);return Array.isArray(r)||S$I.isCollection(r)?r.forEach((r=>this._isHandle(r)&&t.push(r))):t.push(r),this.notifyChange("size"),this}forEach(r,e){if("function"==typeof r)this._groups.forEach((e=>e.forEach(r)));else {const s=this._getGroup(r);s&&e&&s.forEach(e);}}has(r){return this._groups.has(this._ensureGroupKey(r))}remove(r){if(Array.isArray(r)||S$I.isCollection(r))return r.forEach(this.remove,this),this;if(!this.has(r))return this;const e=this._getGroup(r);for(let s=0;s<e.length;s++)e[s].remove();return this._deleteGroup(r),this.notifyChange("size"),this}removeAll(){return this._groups.forEach((r=>{for(let e=0;e<r.length;e++)r[e].remove();})),this._groups.clear(),this.notifyChange("size"),this}_isHandle(r){return r&&!!r.remove}_getOrCreateGroup(r){if(this.has(r))return this._getGroup(r);const e=[];return this._groups.set(this._ensureGroupKey(r),e),e}_getGroup(r){return q$s(this._groups.get(this._ensureGroupKey(r)))}_deleteGroup(r){return this._groups.delete(this._ensureGroupKey(r))}_ensureGroupKey(r){return r||"_default_"}};e$25([d$1T({readOnly:!0})],h$1x.prototype,"size",null),h$1x=e$25([i$2z("esri.core.Handles")],h$1x);const u$25=h$1x;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$3b=/\?(\.|$)/g;function i$2x(n,t,r,e){const o=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],u=f$1B(n,t,r,e);for(const i of o){const t=i.trim().replace(c$3b,"$1"),e=n.get(t);r.call(n,e,e,t,n);}return u}function f$1B(n,t,r,e){return n.watch(t,r,e)}function s$25(n,t,r,e){return z$p(n,t,U$o,r,e)}function a$2Y(n,t,r,e){return N$s(n,t,U$o,r,e)}function m$27(n,t,r,e){return z$p(n,t,V$d,r,e)}function p$38(n,t,r,e){return N$s(n,t,V$d,r,e)}function v$V(n,t,r,e){return z$p(n,t,k$A,r,e)}function d$1Q(n,t,r,e){return N$s(n,t,k$A,r,e)}function h$1w(n,t,r,e){return z$p(n,t,q$n,r,e)}function g$15(n,t,r,e){return N$s(n,t,q$n,r,e)}function O$s(n,t,r,e){let o=!1;const u=n.watch(t,((t,e,u,c)=>{o||r.call(n,t,e,u,c);}),e);return {remove(){u.remove();},pause(){o=!0;},resume(){o=!1;}}}function $$g(r,e,o,u,c,f,l){const s={};function a(n){const t=s[n];t&&(f&&f(t.target,n,r,o),t.handle.remove(),delete s[n]);}const m=i$2x(r,e,((e,i,f)=>{a(f),e$1Y(e)&&(s[f]={handle:r$1I(e,o,u),target:e},c&&c(e,f,r,o));}),l);return {remove(){m.remove();for(const n in s)a(n);}}}function z$p(n,t,r,e,o){const u=n.watch(t,((t,o,u,c)=>{r&&!r(t)||null==e||e.call(n,t,o,u,c);}),o);if(Array.isArray(t))for(const c of t){const o=n.get(c);r&&r(o)&&(null==e||e.call(n,o,o,t,n));}else {const o=n.get(t);r&&r(o)&&(null==e||e.call(n,o,o,t,n));}return u}function N$s(n,t,r,c,i){const f="function"==typeof c?c:null,l="object"==typeof c?c:null;"boolean"==typeof c&&(i=c);let s,a=!1;function m(){s&&(s.remove(),s=null);}const p=A$x();j$U(l,(()=>{m(),p.reject(m$2e());}));const v={then:p.promise.then.bind(p.promise),catch:p.promise.catch.bind(p.promise),remove:m};return Object.freeze(v),s=z$p(n,t,r,((t,r,e,o)=>{a=!0,m(),f&&f.call(n,t,r,e,o),p.resolve({value:t,oldValue:r,propertyName:e,target:o});}),i),a&&m(),v}function U$o(n){return !!n}function V$d(n){return !n}function k$A(n){return !0===n}function q$n(n){return !1===n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function o$1K(o,t){const e=t?{...t,source:o}:o;return d$1T({aliasOf:e})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class o$1J{constructor(o,s={ignoreUnknown:!1}){this.jsonToAPI=o,this.options=s,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this.invertMap(o),this.apiValues=this.getKeysSorted(this.apiToJSON),this.jsonValues=this.getKeysSorted(this.jsonToAPI),this.read=t=>this.fromJSON(t),this.write=(o,s,i)=>{const n=this.toJSON(o);void 0!==n&&o$1$(i,n,s);},this.write.isJSONMapWriter=!0;}toJSON(t){return this.apiToJSON.hasOwnProperty(t)?this.apiToJSON[t]:this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}invertMap(t){const o={};for(const s in t)o[t[s]]=s;return o}getKeysSorted(t){const o=[];for(const s in t)o.push(s);return o.sort(),o}}function s$24(){return function(t){return new o$1J(t,{ignoreUnknown:!0})}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var o$1I,l$2n,e$1L;let t$1z,r$1v;const u$24=null!=(o$1I=null==(l$2n=e$24.esriConfig)?void 0:l$2n.locale)?o$1I:null==(e$1L=e$24.dojoConfig)?void 0:e$1L.locale;function c$3a(){var o,l;return null!=(o=null!=u$24?u$24:null==(l=e$24.navigator)?void 0:l.language)?o:"en"}function i$2w(){return void 0===r$1v&&(r$1v=c$3a()),r$1v}const d$1P=[];function g$14(n){return d$1P.push(n),{remove(){d$1P.splice(d$1P.indexOf(n),1);}}}const h$1v=[];function p$37(n){return h$1v.push(n),{remove(){d$1P.splice(h$1v.indexOf(n),1);}}}function m$26(){var n;const o=null!=(n=t$1z)?n:c$3a();r$1v!==o&&(r$1v=o,[...h$1v].forEach((n=>{n.call(null,o);})),[...d$1P].forEach((n=>{n.call(null,o);})));}null==e$24.addEventListener||e$24.addEventListener("languagechange",m$26);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$1u={year:"numeric",month:"numeric",day:"numeric"},n$2B={year:"numeric",month:"long",day:"numeric"},a$2X={year:"numeric",month:"short",day:"numeric"},h$1u={year:"numeric",month:"long",weekday:"long",day:"numeric"},m$25={hour:"numeric",minute:"numeric"},i$2v={...m$25,second:"numeric"},s$23={"short-date":r$1u,"short-date-short-time":{...r$1u,...m$25},"short-date-short-time-24":{...r$1u,...m$25,hour12:!1},"short-date-long-time":{...r$1u,...i$2v},"short-date-long-time-24":{...r$1u,...i$2v,hour12:!1},"short-date-le":r$1u,"short-date-le-short-time":{...r$1u,...m$25},"short-date-le-short-time-24":{...r$1u,...m$25,hour12:!1},"short-date-le-long-time":{...r$1u,...i$2v},"short-date-le-long-time-24":{...r$1u,...i$2v,hour12:!1},"long-month-day-year":n$2B,"long-month-day-year-short-time":{...n$2B,...m$25},"long-month-day-year-short-time-24":{...n$2B,...m$25,hour12:!1},"long-month-day-year-long-time":{...n$2B,...i$2v},"long-month-day-year-long-time-24":{...n$2B,...i$2v,hour12:!1},"day-short-month-year":a$2X,"day-short-month-year-short-time":{...a$2X,...m$25},"day-short-month-year-short-time-24":{...a$2X,...m$25,hour12:!1},"day-short-month-year-long-time":{...a$2X,...i$2v},"day-short-month-year-long-time-24":{...a$2X,...i$2v,hour12:!1},"long-date":h$1u,"long-date-short-time":{...h$1u,...m$25},"long-date-short-time-24":{...h$1u,...m$25,hour12:!1},"long-date-long-time":{...h$1u,...i$2v},"long-date-long-time-24":{...h$1u,...i$2v,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":m$25,"long-time":i$2v},l$2m=s$24()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});l$2m.toJSON.bind(l$2m);l$2m.fromJSON.bind(l$2m);const u$23={ar:"ar-u-nu-latn-ca-gregory"};let c$39=new WeakMap,D$r=s$23["short-date-short-time"];function T$p(t){const o=t||D$r;if(!c$39.has(o)){const t=i$2w(),r=u$23[i$2w()]||t;c$39.set(o,new Intl.DateTimeFormat(r,o));}return c$39.get(o)}function S$H(t){return s$23[t]||null}function L$w(t,o){return T$p(o).format(t)}p$37((()=>{c$39=new WeakMap,D$r=s$23["short-date-short-time"];}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$2W={ar:"ar-u-nu-latn"};let e$1K=new WeakMap,o$1H={};function i$2u(n){const i=n||o$1H;if(!e$1K.has(i)){const t=i$2w(),o=a$2W[i$2w()]||t;e$1K.set(i,new Intl.NumberFormat(o,n));}return q$s(e$1K.get(i))}function u$22(t={}){const n={};return null!=t.digitSeparator&&(n.useGrouping=t.digitSeparator),null!=t.places&&(n.minimumFractionDigits=n.maximumFractionDigits=t.places),n}function m$24(t,n){return i$2u(n).format(t)}p$37((()=>{e$1K=new WeakMap,o$1H={};}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$2t=s$2n.getLogger("esri.intl");function s$22(t,r,n={}){const{format:o={}}=n;return r$1J(t,(t=>u$21(t,r,o)))}function u$21(t,e,n){let o,i;const s=t.indexOf(":");if(-1===s?o=t.trim():(o=t.slice(0,s).trim(),i=t.slice(s+1).trim()),!o)return "";const u=t$1Q(o,e);if(null==u)return "";const m=n[i]||n[o];return m?c$38(u,m):i?a$2V(u,i):f$1A(u)}function c$38(t,r){switch(r.type){case"date":return L$w(t,r.intlOptions);case"number":return m$24(t,r.intlOptions);default:return i$2t.warn("missing format descriptor for key {key}"),f$1A(t)}}function a$2V(t,r){switch(r.toLowerCase()){case"dateformat":return L$w(t);case"numberformat":return m$24(t);default:return i$2t.warn(`inline format is unsupported since 4.12: ${r}`),/^(dateformat|datestring)/i.test(r)?L$w(t):/^numberformat/i.test(r)?m$24(t):f$1A(t)}}function f$1A(t){switch(typeof t){case"string":return t;case"number":return m$24(t);case"boolean":return ""+t;default:return t instanceof Date?L$w(t):""}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$21=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,o$1G={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function i$2s(t){var e;return null!=(e=o$1G[t])&&e}const a$2U=[],c$37=new Map;function d$1O(t){for(const e of c$37.keys())m$23(t.pattern,e)&&c$37.delete(e);}function l$2l(t){return a$2U.includes(t)||(d$1O(t),a$2U.unshift(t)),{remove(){const e=a$2U.indexOf(t);e>-1&&(a$2U.splice(e,1),d$1O(t));}}}async function u$20(t){const e=i$2w();c$37.has(t)||c$37.set(t,f$1z(t,e));const n=c$37.get(t);return await _$D.add(n),n}function h$1t(t){if(!s$21.test(t))return null;const[,e,n]=s$21.exec(t),r=e+(n?"-"+n.toUpperCase():"");return i$2s(r)?r:i$2s(e)?e:null}async function f$1z(e,n){const r=[];for(const t of a$2U)if(m$23(t.pattern,e))try{return await t.fetchMessageBundle(e,n)}catch(s){r.push(s);}if(r.length)throw new s$2l("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r});throw new s$2l("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function m$23(t,e){return "string"==typeof t?e.startsWith(t):t.test(e)}p$37((()=>{c$37.clear();}));const _$D=new class{constructor(){this._numLoading=0;}async waitForAll(){this._dfd&&await this._dfd.promise;}add(t){return this._increase(),t.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=A$x());}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null);}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function s$20(e,n,r,s){const a=n.exec(r);if(!a)throw new s$2l("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${n}"`);const c=a[1]?`${a[1]}/`:"",l=a[2],h=h$1t(s),u=`${c}${l}.json`,w=h?`${c}${l}_${h}.json`:u;let f;try{f=await i$2r(e(w));}catch(d){if(w===u)throw new s$2l("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:d});try{f=await i$2r(e(u));}catch(d){throw new s$2l("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:d})}}return f}async function i$2r(t){if(r$1K(l$2k.fetchBundleAsset))return l$2k.fetchBundleAsset(t);const n=await E$v(t,{responseType:"text"});return JSON.parse(n.data)}class a$2T{constructor({base:e="",pattern:t,location:r=new URL(window.location.href)}){let o;o="string"==typeof r?e=>new URL(e,new URL(r,e$24.location)).href:r instanceof URL?e=>new URL(e,r).href:r,this.pattern="string"==typeof t?new RegExp(`^${t}`):t,this.getAssetUrl=o,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`);}fetchMessageBundle(e,t){return s$20(this.getAssetUrl,this.matcher,e,t)}}function c$36(e){return new a$2T(e)}const l$2k={};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
l$2l(c$36({pattern:"esri/",location:a$34}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1J(e){return "string"==typeof e?document.getElementById(e):e}function t$1y(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild);}function o$1F(e,t){const n=t.parentNode;n&&n.insertBefore(e,t);}function r$1t(e,t){for(;;){const n=e.firstChild;if(!n)break;t.appendChild(n);}}function i$2q(e){e.parentNode&&e.parentNode.removeChild(e);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class h$1s{constructor(s){this.instance=s,this._resolver=A$x(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=1,this._cleanUp();}),(()=>{this._status=2,this._cleanUp();}));}addResolvingPromise(s){this._resolvingPromises.push(s),this._tryResolve();}isResolved(){return 1===this._status}isRejected(){return 2===this._status}isFulfilled(){return 0!==this._status}abort(){this._resolver.reject(m$2e());}when(s,e){return this._resolver.promise.then(s,e)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null;}_tryResolve(){if(this.isFulfilled())return;const s=A$x(),e=[...this._resolvingPromises,q$s(s.promise)],t=this._allPromise=Promise.all(e);t.then((()=>{this.isFulfilled()||this._allPromise!==t||this._resolver.resolve(this.instance);}),(s=>{this.isFulfilled()||this._allPromise!==t||d$1Z(s)||this._resolver.reject(s);})),s.resolve();}}const n$2A=e=>{let i=class extends e{constructor(...s){super(...s),this._promiseProps=new h$1s(this),this.addResolvingPromise(Promise.resolve());}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(s,e){return new Promise(((s,e)=>{this._promiseProps.when(s,e);})).then(s,e)}catch(s){return this.when(null,s)}addResolvingPromise(s){s&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in s?s.when():s);}};return i=e$25([i$2z("esri.core.Promise")],i),i};let m$22=class extends(n$2A(p$3a)){};m$22=e$25([i$2z("esri.core.Promise")],m$22);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function o$1E(){const t=n$2z.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const o=o=>t[o].toString(16);return o(0)+o(1)+"-"+o(2)+"-"+o(3)+"-"+o(4)+"-"+o(5)+o(6)+o(7)}const n$2z=e$24.crypto||e$24.msCrypto;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$1D=Object.prototype.toString;function r$1s(n){const o="__accessorMetadata__"in n?b$14(n):n;return function(...t){if(t.push(o),"number"==typeof t[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return e$1I.apply(this,t)}}function e$1I(t,o,r,e){s$2f(t,o).cast=e;}function i$2p(t){return function(o,r){s$2f(o,t).cast=o[r];}}function c$35(...t){if(3!==t.length||"string"!=typeof t[1])return 1===t.length&&"[object Function]"===o$1D.call(t[0])?r$1s(t[0]):1===t.length&&"string"==typeof t[0]?i$2p(t[0]):void 0}

/*!
 * @esri/arcgis-html-sanitizer - v2.9.0-next.1 - Tue Oct 19 2021 10:19:42 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2021 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */
/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/** `Object#toString` result references. */
var objectTag = '[object Object]';

/**
 * Checks if `value` is a host object in IE < 9.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a host object, else `false`.
 */
function isHostObject(value) {
  // Many host objects are `Object` objects that can coerce to strings
  // despite having improperly defined `toString` methods.
  var result = false;
  if (value != null && typeof value.toString != 'function') {
    try {
      result = !!(value + '');
    } catch (e) {}
  }
  return result;
}

/**
 * Creates a unary function that invokes `func` with its argument transformed.
 *
 * @private
 * @param {Function} func The function to wrap.
 * @param {Function} transform The argument transform.
 * @returns {Function} Returns the new function.
 */
function overArg(func, transform) {
  return function(arg) {
    return func(transform(arg));
  };
}

/** Used for built-in method references. */
var funcProto = Function.prototype,
    objectProto = Object.prototype;

/** Used to resolve the decompiled source of functions. */
var funcToString = funcProto.toString;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/** Used to infer the `Object` constructor. */
var objectCtorString = funcToString.call(Object);

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var objectToString = objectProto.toString;

/** Built-in value references. */
var getPrototype = overArg(Object.getPrototypeOf, Object);

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

/**
 * Checks if `value` is a plain object, that is, an object created by the
 * `Object` constructor or one with a `[[Prototype]]` of `null`.
 *
 * @static
 * @memberOf _
 * @since 0.8.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 * }
 *
 * _.isPlainObject(new Foo);
 * // => false
 *
 * _.isPlainObject([1, 2, 3]);
 * // => false
 *
 * _.isPlainObject({ 'x': 0, 'y': 0 });
 * // => true
 *
 * _.isPlainObject(Object.create(null));
 * // => true
 */
function isPlainObject(value) {
  if (!isObjectLike(value) ||
      objectToString.call(value) != objectTag || isHostObject(value)) {
    return false;
  }
  var proto = getPrototype(value);
  if (proto === null) {
    return true;
  }
  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;
  return (typeof Ctor == 'function' &&
    Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString);
}

var lodash_isplainobject = isPlainObject;

var lib$1 = {exports: {}};

var _default$1 = {};

var lib = {exports: {}};

var _default = {};

/**
 * cssfilter
 *
 * @author 老雷<leizongmin@gmail.com>
 */

function getDefaultWhiteList$1 () {
  // 白名单值说明：
  // true: 允许该属性
  // Function: function (val) { } 返回true表示允许该属性，其他值均表示不允许
  // RegExp: regexp.test(val) 返回true表示允许该属性，其他值均表示不允许
  // 除上面列出的值外均表示不允许
  var whiteList = {};

  whiteList['align-content'] = false; // default: auto
  whiteList['align-items'] = false; // default: auto
  whiteList['align-self'] = false; // default: auto
  whiteList['alignment-adjust'] = false; // default: auto
  whiteList['alignment-baseline'] = false; // default: baseline
  whiteList['all'] = false; // default: depending on individual properties
  whiteList['anchor-point'] = false; // default: none
  whiteList['animation'] = false; // default: depending on individual properties
  whiteList['animation-delay'] = false; // default: 0
  whiteList['animation-direction'] = false; // default: normal
  whiteList['animation-duration'] = false; // default: 0
  whiteList['animation-fill-mode'] = false; // default: none
  whiteList['animation-iteration-count'] = false; // default: 1
  whiteList['animation-name'] = false; // default: none
  whiteList['animation-play-state'] = false; // default: running
  whiteList['animation-timing-function'] = false; // default: ease
  whiteList['azimuth'] = false; // default: center
  whiteList['backface-visibility'] = false; // default: visible
  whiteList['background'] = true; // default: depending on individual properties
  whiteList['background-attachment'] = true; // default: scroll
  whiteList['background-clip'] = true; // default: border-box
  whiteList['background-color'] = true; // default: transparent
  whiteList['background-image'] = true; // default: none
  whiteList['background-origin'] = true; // default: padding-box
  whiteList['background-position'] = true; // default: 0% 0%
  whiteList['background-repeat'] = true; // default: repeat
  whiteList['background-size'] = true; // default: auto
  whiteList['baseline-shift'] = false; // default: baseline
  whiteList['binding'] = false; // default: none
  whiteList['bleed'] = false; // default: 6pt
  whiteList['bookmark-label'] = false; // default: content()
  whiteList['bookmark-level'] = false; // default: none
  whiteList['bookmark-state'] = false; // default: open
  whiteList['border'] = true; // default: depending on individual properties
  whiteList['border-bottom'] = true; // default: depending on individual properties
  whiteList['border-bottom-color'] = true; // default: current color
  whiteList['border-bottom-left-radius'] = true; // default: 0
  whiteList['border-bottom-right-radius'] = true; // default: 0
  whiteList['border-bottom-style'] = true; // default: none
  whiteList['border-bottom-width'] = true; // default: medium
  whiteList['border-collapse'] = true; // default: separate
  whiteList['border-color'] = true; // default: depending on individual properties
  whiteList['border-image'] = true; // default: none
  whiteList['border-image-outset'] = true; // default: 0
  whiteList['border-image-repeat'] = true; // default: stretch
  whiteList['border-image-slice'] = true; // default: 100%
  whiteList['border-image-source'] = true; // default: none
  whiteList['border-image-width'] = true; // default: 1
  whiteList['border-left'] = true; // default: depending on individual properties
  whiteList['border-left-color'] = true; // default: current color
  whiteList['border-left-style'] = true; // default: none
  whiteList['border-left-width'] = true; // default: medium
  whiteList['border-radius'] = true; // default: 0
  whiteList['border-right'] = true; // default: depending on individual properties
  whiteList['border-right-color'] = true; // default: current color
  whiteList['border-right-style'] = true; // default: none
  whiteList['border-right-width'] = true; // default: medium
  whiteList['border-spacing'] = true; // default: 0
  whiteList['border-style'] = true; // default: depending on individual properties
  whiteList['border-top'] = true; // default: depending on individual properties
  whiteList['border-top-color'] = true; // default: current color
  whiteList['border-top-left-radius'] = true; // default: 0
  whiteList['border-top-right-radius'] = true; // default: 0
  whiteList['border-top-style'] = true; // default: none
  whiteList['border-top-width'] = true; // default: medium
  whiteList['border-width'] = true; // default: depending on individual properties
  whiteList['bottom'] = false; // default: auto
  whiteList['box-decoration-break'] = true; // default: slice
  whiteList['box-shadow'] = true; // default: none
  whiteList['box-sizing'] = true; // default: content-box
  whiteList['box-snap'] = true; // default: none
  whiteList['box-suppress'] = true; // default: show
  whiteList['break-after'] = true; // default: auto
  whiteList['break-before'] = true; // default: auto
  whiteList['break-inside'] = true; // default: auto
  whiteList['caption-side'] = false; // default: top
  whiteList['chains'] = false; // default: none
  whiteList['clear'] = true; // default: none
  whiteList['clip'] = false; // default: auto
  whiteList['clip-path'] = false; // default: none
  whiteList['clip-rule'] = false; // default: nonzero
  whiteList['color'] = true; // default: implementation dependent
  whiteList['color-interpolation-filters'] = true; // default: auto
  whiteList['column-count'] = false; // default: auto
  whiteList['column-fill'] = false; // default: balance
  whiteList['column-gap'] = false; // default: normal
  whiteList['column-rule'] = false; // default: depending on individual properties
  whiteList['column-rule-color'] = false; // default: current color
  whiteList['column-rule-style'] = false; // default: medium
  whiteList['column-rule-width'] = false; // default: medium
  whiteList['column-span'] = false; // default: none
  whiteList['column-width'] = false; // default: auto
  whiteList['columns'] = false; // default: depending on individual properties
  whiteList['contain'] = false; // default: none
  whiteList['content'] = false; // default: normal
  whiteList['counter-increment'] = false; // default: none
  whiteList['counter-reset'] = false; // default: none
  whiteList['counter-set'] = false; // default: none
  whiteList['crop'] = false; // default: auto
  whiteList['cue'] = false; // default: depending on individual properties
  whiteList['cue-after'] = false; // default: none
  whiteList['cue-before'] = false; // default: none
  whiteList['cursor'] = false; // default: auto
  whiteList['direction'] = false; // default: ltr
  whiteList['display'] = true; // default: depending on individual properties
  whiteList['display-inside'] = true; // default: auto
  whiteList['display-list'] = true; // default: none
  whiteList['display-outside'] = true; // default: inline-level
  whiteList['dominant-baseline'] = false; // default: auto
  whiteList['elevation'] = false; // default: level
  whiteList['empty-cells'] = false; // default: show
  whiteList['filter'] = false; // default: none
  whiteList['flex'] = false; // default: depending on individual properties
  whiteList['flex-basis'] = false; // default: auto
  whiteList['flex-direction'] = false; // default: row
  whiteList['flex-flow'] = false; // default: depending on individual properties
  whiteList['flex-grow'] = false; // default: 0
  whiteList['flex-shrink'] = false; // default: 1
  whiteList['flex-wrap'] = false; // default: nowrap
  whiteList['float'] = false; // default: none
  whiteList['float-offset'] = false; // default: 0 0
  whiteList['flood-color'] = false; // default: black
  whiteList['flood-opacity'] = false; // default: 1
  whiteList['flow-from'] = false; // default: none
  whiteList['flow-into'] = false; // default: none
  whiteList['font'] = true; // default: depending on individual properties
  whiteList['font-family'] = true; // default: implementation dependent
  whiteList['font-feature-settings'] = true; // default: normal
  whiteList['font-kerning'] = true; // default: auto
  whiteList['font-language-override'] = true; // default: normal
  whiteList['font-size'] = true; // default: medium
  whiteList['font-size-adjust'] = true; // default: none
  whiteList['font-stretch'] = true; // default: normal
  whiteList['font-style'] = true; // default: normal
  whiteList['font-synthesis'] = true; // default: weight style
  whiteList['font-variant'] = true; // default: normal
  whiteList['font-variant-alternates'] = true; // default: normal
  whiteList['font-variant-caps'] = true; // default: normal
  whiteList['font-variant-east-asian'] = true; // default: normal
  whiteList['font-variant-ligatures'] = true; // default: normal
  whiteList['font-variant-numeric'] = true; // default: normal
  whiteList['font-variant-position'] = true; // default: normal
  whiteList['font-weight'] = true; // default: normal
  whiteList['grid'] = false; // default: depending on individual properties
  whiteList['grid-area'] = false; // default: depending on individual properties
  whiteList['grid-auto-columns'] = false; // default: auto
  whiteList['grid-auto-flow'] = false; // default: none
  whiteList['grid-auto-rows'] = false; // default: auto
  whiteList['grid-column'] = false; // default: depending on individual properties
  whiteList['grid-column-end'] = false; // default: auto
  whiteList['grid-column-start'] = false; // default: auto
  whiteList['grid-row'] = false; // default: depending on individual properties
  whiteList['grid-row-end'] = false; // default: auto
  whiteList['grid-row-start'] = false; // default: auto
  whiteList['grid-template'] = false; // default: depending on individual properties
  whiteList['grid-template-areas'] = false; // default: none
  whiteList['grid-template-columns'] = false; // default: none
  whiteList['grid-template-rows'] = false; // default: none
  whiteList['hanging-punctuation'] = false; // default: none
  whiteList['height'] = true; // default: auto
  whiteList['hyphens'] = false; // default: manual
  whiteList['icon'] = false; // default: auto
  whiteList['image-orientation'] = false; // default: auto
  whiteList['image-resolution'] = false; // default: normal
  whiteList['ime-mode'] = false; // default: auto
  whiteList['initial-letters'] = false; // default: normal
  whiteList['inline-box-align'] = false; // default: last
  whiteList['justify-content'] = false; // default: auto
  whiteList['justify-items'] = false; // default: auto
  whiteList['justify-self'] = false; // default: auto
  whiteList['left'] = false; // default: auto
  whiteList['letter-spacing'] = true; // default: normal
  whiteList['lighting-color'] = true; // default: white
  whiteList['line-box-contain'] = false; // default: block inline replaced
  whiteList['line-break'] = false; // default: auto
  whiteList['line-grid'] = false; // default: match-parent
  whiteList['line-height'] = false; // default: normal
  whiteList['line-snap'] = false; // default: none
  whiteList['line-stacking'] = false; // default: depending on individual properties
  whiteList['line-stacking-ruby'] = false; // default: exclude-ruby
  whiteList['line-stacking-shift'] = false; // default: consider-shifts
  whiteList['line-stacking-strategy'] = false; // default: inline-line-height
  whiteList['list-style'] = true; // default: depending on individual properties
  whiteList['list-style-image'] = true; // default: none
  whiteList['list-style-position'] = true; // default: outside
  whiteList['list-style-type'] = true; // default: disc
  whiteList['margin'] = true; // default: depending on individual properties
  whiteList['margin-bottom'] = true; // default: 0
  whiteList['margin-left'] = true; // default: 0
  whiteList['margin-right'] = true; // default: 0
  whiteList['margin-top'] = true; // default: 0
  whiteList['marker-offset'] = false; // default: auto
  whiteList['marker-side'] = false; // default: list-item
  whiteList['marks'] = false; // default: none
  whiteList['mask'] = false; // default: border-box
  whiteList['mask-box'] = false; // default: see individual properties
  whiteList['mask-box-outset'] = false; // default: 0
  whiteList['mask-box-repeat'] = false; // default: stretch
  whiteList['mask-box-slice'] = false; // default: 0 fill
  whiteList['mask-box-source'] = false; // default: none
  whiteList['mask-box-width'] = false; // default: auto
  whiteList['mask-clip'] = false; // default: border-box
  whiteList['mask-image'] = false; // default: none
  whiteList['mask-origin'] = false; // default: border-box
  whiteList['mask-position'] = false; // default: center
  whiteList['mask-repeat'] = false; // default: no-repeat
  whiteList['mask-size'] = false; // default: border-box
  whiteList['mask-source-type'] = false; // default: auto
  whiteList['mask-type'] = false; // default: luminance
  whiteList['max-height'] = true; // default: none
  whiteList['max-lines'] = false; // default: none
  whiteList['max-width'] = true; // default: none
  whiteList['min-height'] = true; // default: 0
  whiteList['min-width'] = true; // default: 0
  whiteList['move-to'] = false; // default: normal
  whiteList['nav-down'] = false; // default: auto
  whiteList['nav-index'] = false; // default: auto
  whiteList['nav-left'] = false; // default: auto
  whiteList['nav-right'] = false; // default: auto
  whiteList['nav-up'] = false; // default: auto
  whiteList['object-fit'] = false; // default: fill
  whiteList['object-position'] = false; // default: 50% 50%
  whiteList['opacity'] = false; // default: 1
  whiteList['order'] = false; // default: 0
  whiteList['orphans'] = false; // default: 2
  whiteList['outline'] = false; // default: depending on individual properties
  whiteList['outline-color'] = false; // default: invert
  whiteList['outline-offset'] = false; // default: 0
  whiteList['outline-style'] = false; // default: none
  whiteList['outline-width'] = false; // default: medium
  whiteList['overflow'] = false; // default: depending on individual properties
  whiteList['overflow-wrap'] = false; // default: normal
  whiteList['overflow-x'] = false; // default: visible
  whiteList['overflow-y'] = false; // default: visible
  whiteList['padding'] = true; // default: depending on individual properties
  whiteList['padding-bottom'] = true; // default: 0
  whiteList['padding-left'] = true; // default: 0
  whiteList['padding-right'] = true; // default: 0
  whiteList['padding-top'] = true; // default: 0
  whiteList['page'] = false; // default: auto
  whiteList['page-break-after'] = false; // default: auto
  whiteList['page-break-before'] = false; // default: auto
  whiteList['page-break-inside'] = false; // default: auto
  whiteList['page-policy'] = false; // default: start
  whiteList['pause'] = false; // default: implementation dependent
  whiteList['pause-after'] = false; // default: implementation dependent
  whiteList['pause-before'] = false; // default: implementation dependent
  whiteList['perspective'] = false; // default: none
  whiteList['perspective-origin'] = false; // default: 50% 50%
  whiteList['pitch'] = false; // default: medium
  whiteList['pitch-range'] = false; // default: 50
  whiteList['play-during'] = false; // default: auto
  whiteList['position'] = false; // default: static
  whiteList['presentation-level'] = false; // default: 0
  whiteList['quotes'] = false; // default: text
  whiteList['region-fragment'] = false; // default: auto
  whiteList['resize'] = false; // default: none
  whiteList['rest'] = false; // default: depending on individual properties
  whiteList['rest-after'] = false; // default: none
  whiteList['rest-before'] = false; // default: none
  whiteList['richness'] = false; // default: 50
  whiteList['right'] = false; // default: auto
  whiteList['rotation'] = false; // default: 0
  whiteList['rotation-point'] = false; // default: 50% 50%
  whiteList['ruby-align'] = false; // default: auto
  whiteList['ruby-merge'] = false; // default: separate
  whiteList['ruby-position'] = false; // default: before
  whiteList['shape-image-threshold'] = false; // default: 0.0
  whiteList['shape-outside'] = false; // default: none
  whiteList['shape-margin'] = false; // default: 0
  whiteList['size'] = false; // default: auto
  whiteList['speak'] = false; // default: auto
  whiteList['speak-as'] = false; // default: normal
  whiteList['speak-header'] = false; // default: once
  whiteList['speak-numeral'] = false; // default: continuous
  whiteList['speak-punctuation'] = false; // default: none
  whiteList['speech-rate'] = false; // default: medium
  whiteList['stress'] = false; // default: 50
  whiteList['string-set'] = false; // default: none
  whiteList['tab-size'] = false; // default: 8
  whiteList['table-layout'] = false; // default: auto
  whiteList['text-align'] = true; // default: start
  whiteList['text-align-last'] = true; // default: auto
  whiteList['text-combine-upright'] = true; // default: none
  whiteList['text-decoration'] = true; // default: none
  whiteList['text-decoration-color'] = true; // default: currentColor
  whiteList['text-decoration-line'] = true; // default: none
  whiteList['text-decoration-skip'] = true; // default: objects
  whiteList['text-decoration-style'] = true; // default: solid
  whiteList['text-emphasis'] = true; // default: depending on individual properties
  whiteList['text-emphasis-color'] = true; // default: currentColor
  whiteList['text-emphasis-position'] = true; // default: over right
  whiteList['text-emphasis-style'] = true; // default: none
  whiteList['text-height'] = true; // default: auto
  whiteList['text-indent'] = true; // default: 0
  whiteList['text-justify'] = true; // default: auto
  whiteList['text-orientation'] = true; // default: mixed
  whiteList['text-overflow'] = true; // default: clip
  whiteList['text-shadow'] = true; // default: none
  whiteList['text-space-collapse'] = true; // default: collapse
  whiteList['text-transform'] = true; // default: none
  whiteList['text-underline-position'] = true; // default: auto
  whiteList['text-wrap'] = true; // default: normal
  whiteList['top'] = false; // default: auto
  whiteList['transform'] = false; // default: none
  whiteList['transform-origin'] = false; // default: 50% 50% 0
  whiteList['transform-style'] = false; // default: flat
  whiteList['transition'] = false; // default: depending on individual properties
  whiteList['transition-delay'] = false; // default: 0s
  whiteList['transition-duration'] = false; // default: 0s
  whiteList['transition-property'] = false; // default: all
  whiteList['transition-timing-function'] = false; // default: ease
  whiteList['unicode-bidi'] = false; // default: normal
  whiteList['vertical-align'] = false; // default: baseline
  whiteList['visibility'] = false; // default: visible
  whiteList['voice-balance'] = false; // default: center
  whiteList['voice-duration'] = false; // default: auto
  whiteList['voice-family'] = false; // default: implementation dependent
  whiteList['voice-pitch'] = false; // default: medium
  whiteList['voice-range'] = false; // default: medium
  whiteList['voice-rate'] = false; // default: normal
  whiteList['voice-stress'] = false; // default: normal
  whiteList['voice-volume'] = false; // default: medium
  whiteList['volume'] = false; // default: medium
  whiteList['white-space'] = false; // default: normal
  whiteList['widows'] = false; // default: 2
  whiteList['width'] = true; // default: auto
  whiteList['will-change'] = false; // default: auto
  whiteList['word-break'] = true; // default: normal
  whiteList['word-spacing'] = true; // default: normal
  whiteList['word-wrap'] = true; // default: normal
  whiteList['wrap-flow'] = false; // default: auto
  whiteList['wrap-through'] = false; // default: wrap
  whiteList['writing-mode'] = false; // default: horizontal-tb
  whiteList['z-index'] = false; // default: auto

  return whiteList;
}


/**
 * 匹配到白名单上的一个属性时
 *
 * @param {String} name
 * @param {String} value
 * @param {Object} options
 * @return {String}
 */
function onAttr (name, value, options) {
  // do nothing
}

/**
 * 匹配到不在白名单上的一个属性时
 *
 * @param {String} name
 * @param {String} value
 * @param {Object} options
 * @return {String}
 */
function onIgnoreAttr (name, value, options) {
  // do nothing
}

var REGEXP_URL_JAVASCRIPT = /javascript\s*\:/img;

/**
 * 过滤属性值
 *
 * @param {String} name
 * @param {String} value
 * @return {String}
 */
function safeAttrValue$1(name, value) {
  if (REGEXP_URL_JAVASCRIPT.test(value)) return '';
  return value;
}


_default.whiteList = getDefaultWhiteList$1();
_default.getDefaultWhiteList = getDefaultWhiteList$1;
_default.onAttr = onAttr;
_default.onIgnoreAttr = onIgnoreAttr;
_default.safeAttrValue = safeAttrValue$1;

var util$1 = {
  indexOf: function (arr, item) {
    var i, j;
    if (Array.prototype.indexOf) {
      return arr.indexOf(item);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      if (arr[i] === item) {
        return i;
      }
    }
    return -1;
  },
  forEach: function (arr, fn, scope) {
    var i, j;
    if (Array.prototype.forEach) {
      return arr.forEach(fn, scope);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      fn.call(scope, arr[i], i, arr);
    }
  },
  trim: function (str) {
    if (String.prototype.trim) {
      return str.trim();
    }
    return str.replace(/(^\s*)|(\s*$)/g, '');
  },
  trimRight: function (str) {
    if (String.prototype.trimRight) {
      return str.trimRight();
    }
    return str.replace(/(\s*$)/g, '');
  }
};

/**
 * cssfilter
 *
 * @author 老雷<leizongmin@gmail.com>
 */

var _$3$1 = util$1;


/**
 * 解析style
 *
 * @param {String} css
 * @param {Function} onAttr 处理属性的函数
 *   参数格式： function (sourcePosition, position, name, value, source)
 * @return {String}
 */
function parseStyle$1 (css, onAttr) {
  css = _$3$1.trimRight(css);
  if (css[css.length - 1] !== ';') css += ';';
  var cssLength = css.length;
  var isParenthesisOpen = false;
  var lastPos = 0;
  var i = 0;
  var retCSS = '';

  function addNewAttr () {
    // 如果没有正常的闭合圆括号，则直接忽略当前属性
    if (!isParenthesisOpen) {
      var source = _$3$1.trim(css.slice(lastPos, i));
      var j = source.indexOf(':');
      if (j !== -1) {
        var name = _$3$1.trim(source.slice(0, j));
        var value = _$3$1.trim(source.slice(j + 1));
        // 必须有属性名称
        if (name) {
          var ret = onAttr(lastPos, retCSS.length, name, value, source);
          if (ret) retCSS += ret + '; ';
        }
      }
    }
    lastPos = i + 1;
  }

  for (; i < cssLength; i++) {
    var c = css[i];
    if (c === '/' && css[i + 1] === '*') {
      // 备注开始
      var j = css.indexOf('*/', i + 2);
      // 如果没有正常的备注结束，则后面的部分全部跳过
      if (j === -1) break;
      // 直接将当前位置调到备注结尾，并且初始化状态
      i = j + 1;
      lastPos = i + 1;
      isParenthesisOpen = false;
    } else if (c === '(') {
      isParenthesisOpen = true;
    } else if (c === ')') {
      isParenthesisOpen = false;
    } else if (c === ';') {
      if (isParenthesisOpen) ; else {
        addNewAttr();
      }
    } else if (c === '\n') {
      addNewAttr();
    }
  }

  return _$3$1.trim(retCSS);
}

var parser$2 = parseStyle$1;

/**
 * cssfilter
 *
 * @author 老雷<leizongmin@gmail.com>
 */

var DEFAULT$1 = _default;
var parseStyle = parser$2;


/**
 * 返回值是否为空
 *
 * @param {Object} obj
 * @return {Boolean}
 */
function isNull$1 (obj) {
  return (obj === undefined || obj === null);
}

/**
 * 浅拷贝对象
 *
 * @param {Object} obj
 * @return {Object}
 */
function shallowCopyObject$1 (obj) {
  var ret = {};
  for (var i in obj) {
    ret[i] = obj[i];
  }
  return ret;
}

/**
 * 创建CSS过滤器
 *
 * @param {Object} options
 *   - {Object} whiteList
 *   - {Function} onAttr
 *   - {Function} onIgnoreAttr
 *   - {Function} safeAttrValue
 */
function FilterCSS$2 (options) {
  options = shallowCopyObject$1(options || {});
  options.whiteList = options.whiteList || DEFAULT$1.whiteList;
  options.onAttr = options.onAttr || DEFAULT$1.onAttr;
  options.onIgnoreAttr = options.onIgnoreAttr || DEFAULT$1.onIgnoreAttr;
  options.safeAttrValue = options.safeAttrValue || DEFAULT$1.safeAttrValue;
  this.options = options;
}

FilterCSS$2.prototype.process = function (css) {
  // 兼容各种奇葩输入
  css = css || '';
  css = css.toString();
  if (!css) return '';

  var me = this;
  var options = me.options;
  var whiteList = options.whiteList;
  var onAttr = options.onAttr;
  var onIgnoreAttr = options.onIgnoreAttr;
  var safeAttrValue = options.safeAttrValue;

  var retCSS = parseStyle(css, function (sourcePosition, position, name, value, source) {

    var check = whiteList[name];
    var isWhite = false;
    if (check === true) isWhite = check;
    else if (typeof check === 'function') isWhite = check(value);
    else if (check instanceof RegExp) isWhite = check.test(value);
    if (isWhite !== true) isWhite = false;

    // 如果过滤后 value 为空则直接忽略
    value = safeAttrValue(name, value);
    if (!value) return;

    var opts = {
      position: position,
      sourcePosition: sourcePosition,
      source: source,
      isWhite: isWhite
    };

    if (isWhite) {

      var ret = onAttr(name, value, opts);
      if (isNull$1(ret)) {
        return name + ':' + value;
      } else {
        return ret;
      }

    } else {

      var ret = onIgnoreAttr(name, value, opts);
      if (!isNull$1(ret)) {
        return ret;
      }

    }
  });

  return retCSS;
};


var css = FilterCSS$2;

/**
 * cssfilter
 *
 * @author 老雷<leizongmin@gmail.com>
 */

(function (module, exports) {
var DEFAULT = _default;
var FilterCSS = css;


/**
 * XSS过滤
 *
 * @param {String} css 要过滤的CSS代码
 * @param {Object} options 选项：whiteList, onAttr, onIgnoreAttr
 * @return {String}
 */
function filterCSS (html, options) {
  var xss = new FilterCSS(options);
  return xss.process(html);
}


// 输出
exports = module.exports = filterCSS;
exports.FilterCSS = FilterCSS;
for (var i in DEFAULT) exports[i] = DEFAULT[i];
}(lib, lib.exports));

var util = {
  indexOf: function (arr, item) {
    var i, j;
    if (Array.prototype.indexOf) {
      return arr.indexOf(item);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      if (arr[i] === item) {
        return i;
      }
    }
    return -1;
  },
  forEach: function (arr, fn, scope) {
    var i, j;
    if (Array.prototype.forEach) {
      return arr.forEach(fn, scope);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      fn.call(scope, arr[i], i, arr);
    }
  },
  trim: function (str) {
    if (String.prototype.trim) {
      return str.trim();
    }
    return str.replace(/(^\s*)|(\s*$)/g, "");
  },
  spaceIndex: function (str) {
    var reg = /\s|\n|\t/;
    var match = reg.exec(str);
    return match ? match.index : -1;
  },
};

/**
 * default settings
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */

var FilterCSS$1 = lib.exports.FilterCSS;
var getDefaultCSSWhiteList = lib.exports.getDefaultWhiteList;
var _$2$1 = util;

function getDefaultWhiteList() {
  return {
    a: ["target", "href", "title"],
    abbr: ["title"],
    address: [],
    area: ["shape", "coords", "href", "alt"],
    article: [],
    aside: [],
    audio: [
      "autoplay",
      "controls",
      "crossorigin",
      "loop",
      "muted",
      "preload",
      "src",
    ],
    b: [],
    bdi: ["dir"],
    bdo: ["dir"],
    big: [],
    blockquote: ["cite"],
    br: [],
    caption: [],
    center: [],
    cite: [],
    code: [],
    col: ["align", "valign", "span", "width"],
    colgroup: ["align", "valign", "span", "width"],
    dd: [],
    del: ["datetime"],
    details: ["open"],
    div: [],
    dl: [],
    dt: [],
    em: [],
    figcaption: [],
    figure: [],
    font: ["color", "size", "face"],
    footer: [],
    h1: [],
    h2: [],
    h3: [],
    h4: [],
    h5: [],
    h6: [],
    header: [],
    hr: [],
    i: [],
    img: ["src", "alt", "title", "width", "height"],
    ins: ["datetime"],
    li: [],
    mark: [],
    nav: [],
    ol: [],
    p: [],
    pre: [],
    s: [],
    section: [],
    small: [],
    span: [],
    sub: [],
    summary: [],
    sup: [],
    strong: [],
    strike: [],
    table: ["width", "border", "align", "valign"],
    tbody: ["align", "valign"],
    td: ["width", "rowspan", "colspan", "align", "valign"],
    tfoot: ["align", "valign"],
    th: ["width", "rowspan", "colspan", "align", "valign"],
    thead: ["align", "valign"],
    tr: ["rowspan", "align", "valign"],
    tt: [],
    u: [],
    ul: [],
    video: [
      "autoplay",
      "controls",
      "crossorigin",
      "loop",
      "muted",
      "playsinline",
      "poster",
      "preload",
      "src",
      "height",
      "width",
    ],
  };
}

var defaultCSSFilter = new FilterCSS$1();

/**
 * default onTag function
 *
 * @param {String} tag
 * @param {String} html
 * @param {Object} options
 * @return {String}
 */
function onTag(tag, html, options) {
  // do nothing
}

/**
 * default onIgnoreTag function
 *
 * @param {String} tag
 * @param {String} html
 * @param {Object} options
 * @return {String}
 */
function onIgnoreTag(tag, html, options) {
  // do nothing
}

/**
 * default onTagAttr function
 *
 * @param {String} tag
 * @param {String} name
 * @param {String} value
 * @return {String}
 */
function onTagAttr(tag, name, value) {
  // do nothing
}

/**
 * default onIgnoreTagAttr function
 *
 * @param {String} tag
 * @param {String} name
 * @param {String} value
 * @return {String}
 */
function onIgnoreTagAttr(tag, name, value) {
  // do nothing
}

/**
 * default escapeHtml function
 *
 * @param {String} html
 */
function escapeHtml(html) {
  return html.replace(REGEXP_LT, "&lt;").replace(REGEXP_GT, "&gt;");
}

/**
 * default safeAttrValue function
 *
 * @param {String} tag
 * @param {String} name
 * @param {String} value
 * @param {Object} cssFilter
 * @return {String}
 */
function safeAttrValue(tag, name, value, cssFilter) {
  // unescape attribute value firstly
  value = friendlyAttrValue(value);

  if (name === "href" || name === "src") {
    // filter `href` and `src` attribute
    // only allow the value that starts with `http://` | `https://` | `mailto:` | `/` | `#`
    value = _$2$1.trim(value);
    if (value === "#") return "#";
    if (
      !(
        value.substr(0, 7) === "http://" ||
        value.substr(0, 8) === "https://" ||
        value.substr(0, 7) === "mailto:" ||
        value.substr(0, 4) === "tel:" ||
        value.substr(0, 11) === "data:image/" ||
        value.substr(0, 6) === "ftp://" ||
        value.substr(0, 2) === "./" ||
        value.substr(0, 3) === "../" ||
        value[0] === "#" ||
        value[0] === "/"
      )
    ) {
      return "";
    }
  } else if (name === "background") {
    // filter `background` attribute (maybe no use)
    // `javascript:`
    REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {
      return "";
    }
  } else if (name === "style") {
    // `expression()`
    REGEXP_DEFAULT_ON_TAG_ATTR_7.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_7.test(value)) {
      return "";
    }
    // `url()`
    REGEXP_DEFAULT_ON_TAG_ATTR_8.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_8.test(value)) {
      REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;
      if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {
        return "";
      }
    }
    if (cssFilter !== false) {
      cssFilter = cssFilter || defaultCSSFilter;
      value = cssFilter.process(value);
    }
  }

  // escape `<>"` before returns
  value = escapeAttrValue(value);
  return value;
}

// RegExp list
var REGEXP_LT = /</g;
var REGEXP_GT = />/g;
var REGEXP_QUOTE = /"/g;
var REGEXP_QUOTE_2 = /&quot;/g;
var REGEXP_ATTR_VALUE_1 = /&#([a-zA-Z0-9]*);?/gim;
var REGEXP_ATTR_VALUE_COLON = /&colon;?/gim;
var REGEXP_ATTR_VALUE_NEWLINE = /&newline;?/gim;
var REGEXP_DEFAULT_ON_TAG_ATTR_4 =
  /((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi;
var REGEXP_DEFAULT_ON_TAG_ATTR_7 =
  /e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi;
var REGEXP_DEFAULT_ON_TAG_ATTR_8 = /u\s*r\s*l\s*\(.*/gi;

/**
 * escape double quote
 *
 * @param {String} str
 * @return {String} str
 */
function escapeQuote(str) {
  return str.replace(REGEXP_QUOTE, "&quot;");
}

/**
 * unescape double quote
 *
 * @param {String} str
 * @return {String} str
 */
function unescapeQuote(str) {
  return str.replace(REGEXP_QUOTE_2, '"');
}

/**
 * escape html entities
 *
 * @param {String} str
 * @return {String}
 */
function escapeHtmlEntities(str) {
  return str.replace(REGEXP_ATTR_VALUE_1, function replaceUnicode(str, code) {
    return code[0] === "x" || code[0] === "X"
      ? String.fromCharCode(parseInt(code.substr(1), 16))
      : String.fromCharCode(parseInt(code, 10));
  });
}

/**
 * escape html5 new danger entities
 *
 * @param {String} str
 * @return {String}
 */
function escapeDangerHtml5Entities(str) {
  return str
    .replace(REGEXP_ATTR_VALUE_COLON, ":")
    .replace(REGEXP_ATTR_VALUE_NEWLINE, " ");
}

/**
 * clear nonprintable characters
 *
 * @param {String} str
 * @return {String}
 */
function clearNonPrintableCharacter(str) {
  var str2 = "";
  for (var i = 0, len = str.length; i < len; i++) {
    str2 += str.charCodeAt(i) < 32 ? " " : str.charAt(i);
  }
  return _$2$1.trim(str2);
}

/**
 * get friendly attribute value
 *
 * @param {String} str
 * @return {String}
 */
function friendlyAttrValue(str) {
  str = unescapeQuote(str);
  str = escapeHtmlEntities(str);
  str = escapeDangerHtml5Entities(str);
  str = clearNonPrintableCharacter(str);
  return str;
}

/**
 * unescape attribute value
 *
 * @param {String} str
 * @return {String}
 */
function escapeAttrValue(str) {
  str = escapeQuote(str);
  str = escapeHtml(str);
  return str;
}

/**
 * `onIgnoreTag` function for removing all the tags that are not in whitelist
 */
function onIgnoreTagStripAll() {
  return "";
}

/**
 * remove tag body
 * specify a `tags` list, if the tag is not in the `tags` list then process by the specify function (optional)
 *
 * @param {array} tags
 * @param {function} next
 */
function StripTagBody(tags, next) {
  if (typeof next !== "function") {
    next = function () {};
  }

  var isRemoveAllTag = !Array.isArray(tags);
  function isRemoveTag(tag) {
    if (isRemoveAllTag) return true;
    return _$2$1.indexOf(tags, tag) !== -1;
  }

  var removeList = [];
  var posStart = false;

  return {
    onIgnoreTag: function (tag, html, options) {
      if (isRemoveTag(tag)) {
        if (options.isClosing) {
          var ret = "[/removed]";
          var end = options.position + ret.length;
          removeList.push([
            posStart !== false ? posStart : options.position,
            end,
          ]);
          posStart = false;
          return ret;
        } else {
          if (!posStart) {
            posStart = options.position;
          }
          return "[removed]";
        }
      } else {
        return next(tag, html, options);
      }
    },
    remove: function (html) {
      var rethtml = "";
      var lastPos = 0;
      _$2$1.forEach(removeList, function (pos) {
        rethtml += html.slice(lastPos, pos[0]);
        lastPos = pos[1];
      });
      rethtml += html.slice(lastPos);
      return rethtml;
    },
  };
}

/**
 * remove html comments
 *
 * @param {String} html
 * @return {String}
 */
function stripCommentTag(html) {
  var retHtml = "";
  var lastPos = 0;
  while (lastPos < html.length) {
    var i = html.indexOf("<!--", lastPos);
    if (i === -1) {
      retHtml += html.slice(lastPos);
      break;
    }
    retHtml += html.slice(lastPos, i);
    var j = html.indexOf("-->", i);
    if (j === -1) {
      break;
    }
    lastPos = j + 3;
  }
  return retHtml;
}

/**
 * remove invisible characters
 *
 * @param {String} html
 * @return {String}
 */
function stripBlankChar(html) {
  var chars = html.split("");
  chars = chars.filter(function (char) {
    var c = char.charCodeAt(0);
    if (c === 127) return false;
    if (c <= 31) {
      if (c === 10 || c === 13) return true;
      return false;
    }
    return true;
  });
  return chars.join("");
}

_default$1.whiteList = getDefaultWhiteList();
_default$1.getDefaultWhiteList = getDefaultWhiteList;
_default$1.onTag = onTag;
_default$1.onIgnoreTag = onIgnoreTag;
_default$1.onTagAttr = onTagAttr;
_default$1.onIgnoreTagAttr = onIgnoreTagAttr;
_default$1.safeAttrValue = safeAttrValue;
_default$1.escapeHtml = escapeHtml;
_default$1.escapeQuote = escapeQuote;
_default$1.unescapeQuote = unescapeQuote;
_default$1.escapeHtmlEntities = escapeHtmlEntities;
_default$1.escapeDangerHtml5Entities = escapeDangerHtml5Entities;
_default$1.clearNonPrintableCharacter = clearNonPrintableCharacter;
_default$1.friendlyAttrValue = friendlyAttrValue;
_default$1.escapeAttrValue = escapeAttrValue;
_default$1.onIgnoreTagStripAll = onIgnoreTagStripAll;
_default$1.StripTagBody = StripTagBody;
_default$1.stripCommentTag = stripCommentTag;
_default$1.stripBlankChar = stripBlankChar;
_default$1.cssFilter = defaultCSSFilter;
_default$1.getDefaultCSSWhiteList = getDefaultCSSWhiteList;

var parser$1 = {};

/**
 * Simple HTML Parser
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */

var _$1$1 = util;

/**
 * get tag name
 *
 * @param {String} html e.g. '<a hef="#">'
 * @return {String}
 */
function getTagName(html) {
  var i = _$1$1.spaceIndex(html);
  if (i === -1) {
    var tagName = html.slice(1, -1);
  } else {
    var tagName = html.slice(1, i + 1);
  }
  tagName = _$1$1.trim(tagName).toLowerCase();
  if (tagName.slice(0, 1) === "/") tagName = tagName.slice(1);
  if (tagName.slice(-1) === "/") tagName = tagName.slice(0, -1);
  return tagName;
}

/**
 * is close tag?
 *
 * @param {String} html 如：'<a hef="#">'
 * @return {Boolean}
 */
function isClosing(html) {
  return html.slice(0, 2) === "</";
}

/**
 * parse input html and returns processed html
 *
 * @param {String} html
 * @param {Function} onTag e.g. function (sourcePosition, position, tag, html, isClosing)
 * @param {Function} escapeHtml
 * @return {String}
 */
function parseTag$1(html, onTag, escapeHtml) {

  var rethtml = "";
  var lastPos = 0;
  var tagStart = false;
  var quoteStart = false;
  var currentPos = 0;
  var len = html.length;
  var currentTagName = "";
  var currentHtml = "";

  chariterator: for (currentPos = 0; currentPos < len; currentPos++) {
    var c = html.charAt(currentPos);
    if (tagStart === false) {
      if (c === "<") {
        tagStart = currentPos;
        continue;
      }
    } else {
      if (quoteStart === false) {
        if (c === "<") {
          rethtml += escapeHtml(html.slice(lastPos, currentPos));
          tagStart = currentPos;
          lastPos = currentPos;
          continue;
        }
        if (c === ">") {
          rethtml += escapeHtml(html.slice(lastPos, tagStart));
          currentHtml = html.slice(tagStart, currentPos + 1);
          currentTagName = getTagName(currentHtml);
          rethtml += onTag(
            tagStart,
            rethtml.length,
            currentTagName,
            currentHtml,
            isClosing(currentHtml)
          );
          lastPos = currentPos + 1;
          tagStart = false;
          continue;
        }
        if (c === '"' || c === "'") {
          var i = 1;
          var ic = html.charAt(currentPos - i);

          while (ic.trim() === "" || ic === "=") {
            if (ic === "=") {
              quoteStart = c;
              continue chariterator;
            }
            ic = html.charAt(currentPos - ++i);
          }
        }
      } else {
        if (c === quoteStart) {
          quoteStart = false;
          continue;
        }
      }
    }
  }
  if (lastPos < html.length) {
    rethtml += escapeHtml(html.substr(lastPos));
  }

  return rethtml;
}

var REGEXP_ILLEGAL_ATTR_NAME = /[^a-zA-Z0-9_:\.\-]/gim;

/**
 * parse input attributes and returns processed attributes
 *
 * @param {String} html e.g. `href="#" target="_blank"`
 * @param {Function} onAttr e.g. `function (name, value)`
 * @return {String}
 */
function parseAttr$1(html, onAttr) {

  var lastPos = 0;
  var retAttrs = [];
  var tmpName = false;
  var len = html.length;

  function addAttr(name, value) {
    name = _$1$1.trim(name);
    name = name.replace(REGEXP_ILLEGAL_ATTR_NAME, "").toLowerCase();
    if (name.length < 1) return;
    var ret = onAttr(name, value || "");
    if (ret) retAttrs.push(ret);
  }

  // 逐个分析字符
  for (var i = 0; i < len; i++) {
    var c = html.charAt(i);
    var v, j;
    if (tmpName === false && c === "=") {
      tmpName = html.slice(lastPos, i);
      lastPos = i + 1;
      continue;
    }
    if (tmpName !== false) {
      if (
        i === lastPos &&
        (c === '"' || c === "'") &&
        html.charAt(i - 1) === "="
      ) {
        j = html.indexOf(c, i + 1);
        if (j === -1) {
          break;
        } else {
          v = _$1$1.trim(html.slice(lastPos + 1, j));
          addAttr(tmpName, v);
          tmpName = false;
          i = j;
          lastPos = i + 1;
          continue;
        }
      }
    }
    if (/\s|\n|\t/.test(c)) {
      html = html.replace(/\s|\n|\t/g, " ");
      if (tmpName === false) {
        j = findNextEqual(html, i);
        if (j === -1) {
          v = _$1$1.trim(html.slice(lastPos, i));
          addAttr(v);
          tmpName = false;
          lastPos = i + 1;
          continue;
        } else {
          i = j - 1;
          continue;
        }
      } else {
        j = findBeforeEqual(html, i - 1);
        if (j === -1) {
          v = _$1$1.trim(html.slice(lastPos, i));
          v = stripQuoteWrap(v);
          addAttr(tmpName, v);
          tmpName = false;
          lastPos = i + 1;
          continue;
        } else {
          continue;
        }
      }
    }
  }

  if (lastPos < html.length) {
    if (tmpName === false) {
      addAttr(html.slice(lastPos));
    } else {
      addAttr(tmpName, stripQuoteWrap(_$1$1.trim(html.slice(lastPos))));
    }
  }

  return _$1$1.trim(retAttrs.join(" "));
}

function findNextEqual(str, i) {
  for (; i < str.length; i++) {
    var c = str[i];
    if (c === " ") continue;
    if (c === "=") return i;
    return -1;
  }
}

function findBeforeEqual(str, i) {
  for (; i > 0; i--) {
    var c = str[i];
    if (c === " ") continue;
    if (c === "=") return i;
    return -1;
  }
}

function isQuoteWrapString(text) {
  if (
    (text[0] === '"' && text[text.length - 1] === '"') ||
    (text[0] === "'" && text[text.length - 1] === "'")
  ) {
    return true;
  } else {
    return false;
  }
}

function stripQuoteWrap(text) {
  if (isQuoteWrapString(text)) {
    return text.substr(1, text.length - 2);
  } else {
    return text;
  }
}

parser$1.parseTag = parseTag$1;
parser$1.parseAttr = parseAttr$1;

/**
 * filter xss
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */

var FilterCSS = lib.exports.FilterCSS;
var DEFAULT = _default$1;
var parser = parser$1;
var parseTag = parser.parseTag;
var parseAttr = parser.parseAttr;
var _$C = util;

/**
 * returns `true` if the input value is `undefined` or `null`
 *
 * @param {Object} obj
 * @return {Boolean}
 */
function isNull(obj) {
  return obj === undefined || obj === null;
}

/**
 * get attributes for a tag
 *
 * @param {String} html
 * @return {Object}
 *   - {String} html
 *   - {Boolean} closing
 */
function getAttrs(html) {
  var i = _$C.spaceIndex(html);
  if (i === -1) {
    return {
      html: "",
      closing: html[html.length - 2] === "/",
    };
  }
  html = _$C.trim(html.slice(i + 1, -1));
  var isClosing = html[html.length - 1] === "/";
  if (isClosing) html = _$C.trim(html.slice(0, -1));
  return {
    html: html,
    closing: isClosing,
  };
}

/**
 * shallow copy
 *
 * @param {Object} obj
 * @return {Object}
 */
function shallowCopyObject(obj) {
  var ret = {};
  for (var i in obj) {
    ret[i] = obj[i];
  }
  return ret;
}

/**
 * FilterXSS class
 *
 * @param {Object} options
 *        whiteList, onTag, onTagAttr, onIgnoreTag,
 *        onIgnoreTagAttr, safeAttrValue, escapeHtml
 *        stripIgnoreTagBody, allowCommentTag, stripBlankChar
 *        css{whiteList, onAttr, onIgnoreAttr} `css=false` means don't use `cssfilter`
 */
function FilterXSS(options) {
  options = shallowCopyObject(options || {});

  if (options.stripIgnoreTag) {
    if (options.onIgnoreTag) {
      console.error(
        'Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'
      );
    }
    options.onIgnoreTag = DEFAULT.onIgnoreTagStripAll;
  }

  options.whiteList = options.whiteList || DEFAULT.whiteList;
  options.onTag = options.onTag || DEFAULT.onTag;
  options.onTagAttr = options.onTagAttr || DEFAULT.onTagAttr;
  options.onIgnoreTag = options.onIgnoreTag || DEFAULT.onIgnoreTag;
  options.onIgnoreTagAttr = options.onIgnoreTagAttr || DEFAULT.onIgnoreTagAttr;
  options.safeAttrValue = options.safeAttrValue || DEFAULT.safeAttrValue;
  options.escapeHtml = options.escapeHtml || DEFAULT.escapeHtml;
  this.options = options;

  if (options.css === false) {
    this.cssFilter = false;
  } else {
    options.css = options.css || {};
    this.cssFilter = new FilterCSS(options.css);
  }
}

/**
 * start process and returns result
 *
 * @param {String} html
 * @return {String}
 */
FilterXSS.prototype.process = function (html) {
  // compatible with the input
  html = html || "";
  html = html.toString();
  if (!html) return "";

  var me = this;
  var options = me.options;
  var whiteList = options.whiteList;
  var onTag = options.onTag;
  var onIgnoreTag = options.onIgnoreTag;
  var onTagAttr = options.onTagAttr;
  var onIgnoreTagAttr = options.onIgnoreTagAttr;
  var safeAttrValue = options.safeAttrValue;
  var escapeHtml = options.escapeHtml;
  var cssFilter = me.cssFilter;

  // remove invisible characters
  if (options.stripBlankChar) {
    html = DEFAULT.stripBlankChar(html);
  }

  // remove html comments
  if (!options.allowCommentTag) {
    html = DEFAULT.stripCommentTag(html);
  }

  // if enable stripIgnoreTagBody
  var stripIgnoreTagBody = false;
  if (options.stripIgnoreTagBody) {
    var stripIgnoreTagBody = DEFAULT.StripTagBody(
      options.stripIgnoreTagBody,
      onIgnoreTag
    );
    onIgnoreTag = stripIgnoreTagBody.onIgnoreTag;
  }

  var retHtml = parseTag(
    html,
    function (sourcePosition, position, tag, html, isClosing) {
      var info = {
        sourcePosition: sourcePosition,
        position: position,
        isClosing: isClosing,
        isWhite: whiteList.hasOwnProperty(tag),
      };

      // call `onTag()`
      var ret = onTag(tag, html, info);
      if (!isNull(ret)) return ret;

      if (info.isWhite) {
        if (info.isClosing) {
          return "</" + tag + ">";
        }

        var attrs = getAttrs(html);
        var whiteAttrList = whiteList[tag];
        var attrsHtml = parseAttr(attrs.html, function (name, value) {
          // call `onTagAttr()`
          var isWhiteAttr = _$C.indexOf(whiteAttrList, name) !== -1;
          var ret = onTagAttr(tag, name, value, isWhiteAttr);
          if (!isNull(ret)) return ret;

          if (isWhiteAttr) {
            // call `safeAttrValue()`
            value = safeAttrValue(tag, name, value, cssFilter);
            if (value) {
              return name + '="' + value + '"';
            } else {
              return name;
            }
          } else {
            // call `onIgnoreTagAttr()`
            var ret = onIgnoreTagAttr(tag, name, value, isWhiteAttr);
            if (!isNull(ret)) return ret;
            return;
          }
        });

        // build new tag html
        var html = "<" + tag;
        if (attrsHtml) html += " " + attrsHtml;
        if (attrs.closing) html += " /";
        html += ">";
        return html;
      } else {
        // call `onIgnoreTag()`
        var ret = onIgnoreTag(tag, html, info);
        if (!isNull(ret)) return ret;
        return escapeHtml(html);
      }
    },
    escapeHtml
  );

  // if enable stripIgnoreTagBody
  if (stripIgnoreTagBody) {
    retHtml = stripIgnoreTagBody.remove(retHtml);
  }

  return retHtml;
};

var xss = FilterXSS;

/**
 * xss
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */

(function (module, exports) {
var DEFAULT = _default$1;
var parser = parser$1;
var FilterXSS = xss;

/**
 * filter xss function
 *
 * @param {String} html
 * @param {Object} options { whiteList, onTag, onTagAttr, onIgnoreTag, onIgnoreTagAttr, safeAttrValue, escapeHtml }
 * @return {String}
 */
function filterXSS(html, options) {
  var xss = new FilterXSS(options);
  return xss.process(html);
}

exports = module.exports = filterXSS;
exports.filterXSS = filterXSS;
exports.FilterXSS = FilterXSS;
for (var i in DEFAULT) exports[i] = DEFAULT[i];
for (var i in parser) exports[i] = parser[i];

// using `xss` on the WebWorker, output `filterXSS` to the globals
function isWorkerEnv() {
  return (
    typeof self !== "undefined" &&
    typeof DedicatedWorkerGlobalScope !== "undefined" &&
    self instanceof DedicatedWorkerGlobalScope
  );
}
if (isWorkerEnv()) {
  self.filterXSS = module.exports;
}
}(lib$1, lib$1.exports));

/* Copyright (c) 2020 Environmental Systems Research Institute, Inc.
 * Apache-2.0
 *
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * The MIT License, see
 * https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 * */
/**
 * The Sanitizer Class
 *
 * @export
 * @class Sanitizer
 */
var Sanitizer = /** @class */ (function () {
    function Sanitizer(filterOptions, extendDefaults) {
        var _this = this;
        // Supported HTML Spec: https://doc.arcgis.com/en/arcgis-online/reference/supported-html.htm
        this.arcgisWhiteList = {
            a: ["href", "style", "target"],
            abbr: ["title"],
            audio: ["autoplay", "controls", "loop", "muted", "preload"],
            b: [],
            br: [],
            dd: ["style"],
            div: ["align", "style"],
            dl: ["style"],
            dt: ["style"],
            em: [],
            figcaption: ["style"],
            figure: ["style"],
            font: ["color", "face", "size", "style"],
            h1: ["style"],
            h2: ["style"],
            h3: ["style"],
            h4: ["style"],
            h5: ["style"],
            h6: ["style"],
            hr: [],
            i: [],
            img: ["alt", "border", "height", "src", "style", "width"],
            li: [],
            ol: [],
            p: ["style"],
            source: ["media", "src", "type"],
            span: ["style"],
            strong: [],
            sub: ["style"],
            sup: ["style"],
            table: ["border", "cellpadding", "cellspacing", "height", "style", "width"],
            tbody: [],
            tr: ["align", "height", "style", "valign"],
            td: [
                "align",
                "colspan",
                "height",
                "nowrap",
                "rowspan",
                "style",
                "valign",
                "width"
            ],
            th: [
                "align",
                "colspan",
                "height",
                "nowrap",
                "rowspan",
                "style",
                "valign",
                "width"
            ],
            u: [],
            ul: [],
            video: [
                "autoplay",
                "controls",
                "height",
                "loop",
                "muted",
                "poster",
                "preload",
                "width"
            ]
        };
        this.allowedProtocols = [
            "http",
            "https",
            "mailto",
            "iform",
            "tel",
            "flow",
            "lfmobile",
            "arcgis-navigator",
            "arcgis-appstudio-player",
            "arcgis-survey123",
            "arcgis-collector",
            "arcgis-workforce",
            "arcgis-explorer",
            "arcgis-trek2there",
            "arcgis-quickcapture",
            "mspbi",
            "comgooglemaps",
            "pdfefile",
            "pdfehttp",
            "pdfehttps",
            "boxapp",
            "boxemm",
            "awb",
            "awbs",
            "gropen",
            "radarscope"
        ];
        this.arcgisFilterOptions = {
            allowCommentTag: true,
            safeAttrValue: function (tag, name, value, cssFilter) {
                // Take over safe attribute filtering for `a` `href`, `img` `src`,
                // and `source` `src` attributes, otherwise pass onto the
                // default `XSS.safeAttrValue` method.
                if ((tag === "a" && name === "href") ||
                    ((tag === "img" || tag === "source") && name === "src")) {
                    return _this.sanitizeUrl(value);
                }
                return lib$1.exports.safeAttrValue(tag, name, value, cssFilter);
            }
        };
        var xssFilterOptions;
        if (filterOptions && !extendDefaults) {
            // Override the defaults
            xssFilterOptions = filterOptions;
        }
        else if (filterOptions && extendDefaults) {
            // Extend the defaults
            xssFilterOptions = Object.create(this.arcgisFilterOptions);
            Object.keys(filterOptions).forEach(function (key) {
                if (key === "whiteList") {
                    // Extend the whitelist by concatenating arrays
                    xssFilterOptions.whiteList = _this._extendObjectOfArrays([
                        _this.arcgisWhiteList,
                        filterOptions.whiteList || {}
                    ]);
                }
                else {
                    xssFilterOptions[key] = filterOptions[key];
                }
            });
        }
        else {
            // Only use the defaults
            xssFilterOptions = Object.create(this.arcgisFilterOptions);
            xssFilterOptions.whiteList = this.arcgisWhiteList;
        }
        this.xssFilterOptions = xssFilterOptions;
        // Make this readable to tests
        this._xssFilter = new lib$1.exports.FilterXSS(xssFilterOptions);
    }
    /**
     * Sanitizes value to remove invalid HTML tags.
     *
     * Note: If the value passed does not contain a valid JSON data type (String,
     * Number, JSON Object, Array, Boolean, or null), the value will be nullified.
     *
     * @param {any} value The value to sanitize.
     * @returns {any} The sanitized value.
     * @memberof Sanitizer
     */
    Sanitizer.prototype.sanitize = function (value, options) {
        if (options === void 0) { options = {}; }
        switch (typeof value) {
            case "number":
                if (isNaN(value) || !isFinite(value)) {
                    return null;
                }
                return value;
            case "boolean":
                return value;
            case "string":
                return this._xssFilter.process(value);
            case "object":
                return this._iterateOverObject(value, options);
            default:
                if (options.allowUndefined && typeof value === "undefined") {
                    return;
                }
                return null;
        }
    };
    /**
     * Sanitizes a URL string following the allowed protocols and sanitization rules.
     *
     * @param {string} value The URL to sanitize.
     * @returns {string} The sanitized URL.
     */
    Sanitizer.prototype.sanitizeUrl = function (value) {
        var protocol = this._trim(value.substring(0, value.indexOf(":")));
        if (!(value === "/" ||
            value === "#" ||
            value[0] === "#" ||
            this.allowedProtocols.indexOf(protocol.toLowerCase()) > -1)) {
            return "";
        }
        else {
            return lib$1.exports.escapeAttrValue(value);
        }
    };
    /**
     * Sanitizes an HTML attribute value.
     *
     * @param {string} tag The tagname of the HTML element.
     * @param {string} attribute The attribute name of the HTML element.
     * @param {string} value The raw value to be used for the HTML attribute value.
     * @param {XSS.ICSSFilter} [cssFilter] The CSS filter to be used.
     * @returns {string} The sanitized attribute value.
     * @memberof Sanitizer
     */
    Sanitizer.prototype.sanitizeHTMLAttribute = function (tag, attribute, value, cssFilter) {
        // use the custom safeAttrValue function if provided
        if (typeof this.xssFilterOptions.safeAttrValue === 'function') {
            // @ts-ignore safeAttrValue does handle undefined cssFilter
            return this.xssFilterOptions.safeAttrValue(tag, attribute, value, cssFilter);
        }
        // otherwise use the default
        // @ts-ignore safeAttrValue does handle undefined cssFilter
        return lib$1.exports.safeAttrValue(tag, attribute, value, cssFilter);
    };
    /**
     * Checks if a value only contains valid HTML.
     *
     * @param {any} value The value to validate.
     * @returns {boolean}
     * @memberof Sanitizer
     */
    Sanitizer.prototype.validate = function (value, options) {
        if (options === void 0) { options = {}; }
        var sanitized = this.sanitize(value, options);
        return {
            isValid: value === sanitized,
            sanitized: sanitized
        };
    };
    /**
     * Extends an object of arrays by by concatenating arrays of the same object
     * keys. If the if the previous key's value is not an array, the next key's
     * value will replace the previous key. This method is used for extending the
     * whiteList in the XSS filter options.
     *
     * @private
     * @param {Array<{}>} objects An array of objects.
     * @returns {{}} The extended object.
     * @memberof Sanitizer
     */
    Sanitizer.prototype._extendObjectOfArrays = function (objects) {
        var finalObj = {};
        objects.forEach(function (obj) {
            Object.keys(obj).forEach(function (key) {
                if (Array.isArray(obj[key]) && Array.isArray(finalObj[key])) {
                    finalObj[key] = finalObj[key].concat(obj[key]);
                }
                else {
                    finalObj[key] = obj[key];
                }
            });
        });
        return finalObj;
    };
    /**
     * Iterate over a plain object or array to deeply sanitize each value.
     *
     * @private
     * @param {object} obj The object to iterate over.
     * @returns {(object | null)} The sanitized object.
     * @memberof Sanitizer
     */
    Sanitizer.prototype._iterateOverObject = function (obj, options) {
        var _this = this;
        if (options === void 0) { options = {}; }
        try {
            var hasChanged_1 = false;
            var changedObj = void 0;
            if (Array.isArray(obj)) {
                changedObj = obj.reduce(function (prev, value) {
                    var validation = _this.validate(value, options);
                    if (validation.isValid) {
                        return prev.concat([value]);
                    }
                    else {
                        hasChanged_1 = true;
                        return prev.concat([validation.sanitized]);
                    }
                }, []);
            }
            else if (!lodash_isplainobject(obj)) {
                if (options.allowUndefined && typeof obj === "undefined") {
                    return;
                }
                return null;
            }
            else {
                var keys = Object.keys(obj);
                changedObj = keys.reduce(function (prev, key) {
                    var value = obj[key];
                    var validation = _this.validate(value, options);
                    if (validation.isValid) {
                        prev[key] = value;
                    }
                    else {
                        hasChanged_1 = true;
                        prev[key] = validation.sanitized;
                    }
                    return prev;
                }, {});
            }
            if (hasChanged_1) {
                return changedObj;
            }
            return obj;
        }
        catch (err) {
            return null;
        }
    };
    /**
     * Trim whitespace from the start and ends of a string.
     * @param {string} val The string to trim.
     * @returns {string} The trimmed string.
     */
    Sanitizer.prototype._trim = function (val) {
        // @ts-ignore This is used by Jest,
        // but TypeScript errors since it assumes `trim` is always available.
        return String.prototype.trim
            ? val.trim()
            : val.replace(/(^\s*)|(\s*$)/g, "");
    };
    return Sanitizer;
}());

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$2o,r$1r,o$1C=function(t){if("WebkitTransition"in t.style)i$2o="webkitTransitionEnd",r$1r="webkitAnimationEnd";else {if(!("transition"in t.style))throw new Error("Your browser is not supported!");i$2o="transitionend",r$1r="animationend";}},s$1$=function(t){i$2o||o$1C(t);},a$2S=function(t,e){return void 0===e&&(e=t+"-active"),function(n){s$1$(n);var o=!1,a=function(s){o||(o=!0,n.removeEventListener(i$2o,a),n.removeEventListener(r$1r,a),n.classList.remove(t),n.classList.remove(e));};n.classList.add(t),n.addEventListener(i$2o,a),n.addEventListener(r$1r,a),requestAnimationFrame((function(){n.classList.add(e);}));}},c$34=function(t,e){return void 0===e&&(e=t+"-active"),function(n,o){s$1$(n);var a=!1,c=function(t){a||(a=!0,n.removeEventListener(i$2o,c),n.removeEventListener(r$1r,c),o());};n.classList.add(t),n.addEventListener(i$2o,c),n.addEventListener(r$1r,c),requestAnimationFrame((function(){n.classList.add(e);}));}};function l$2j(t){const n=t$1H.acquire();for(let e=0;e<arguments.length;e++){const t=arguments[e],i=typeof t;if("string"===i)n.push(t);else if(Array.isArray(t))n.push.apply(n,t);else if("object"===i)for(const e in t)t[e]&&n.push(e);}const i=n.join(" ");return t$1H.release(n),i}function d$1N(t){const e=null==t?void 0:t.closest("[dir]");return null!==e&&e instanceof HTMLElement&&"rtl"===e.dir||"rtl"===document.dir}function u$1$(t){return d$1N(t)?"rtl":"ltr"}function p$36(t){const e="data-node-ref";this[t.getAttribute(e)]=null;}function g$13(t){const e="data-node-ref";this[t.getAttribute(e)]=t;}function f$1y(t,e){return ("enter"===t?a$2S:c$34)(e)}s$2n.getLogger("esri.widgets.support.widgetUtils");const m$21=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup",...["animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"]],h$1r=m$21.reduce(((t,e)=>(t[e]=[],t)),{}),v$U=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],L$v=new Sanitizer({whiteList:h$1r,onTagAttr:(t,e,n)=>{const i=`${e}="${n}"`;if(v$U.includes(e))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function w$W(t,e){const n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.top+n.height,o=i.top+i.height,s=n.top,a=i.top;(r>o||s<a)&&t.scrollIntoView({block:"end"});}function y$1t(t){return "Enter"===t||" "===t}function b$12(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function E$t(){return b$12().startsWith("dark")}function k$z(){return "calcite-theme-"+(E$t()?"dark":"light")}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$1x="http://www.w3.org/",r$1q=`${t$1x}2000/svg`,o$1B=`${t$1x}1999/xlink`;let i$2n,l$2i=[],n$2y=(e,t)=>{let r={};return Object.keys(e).forEach((t=>{r[t]=e[t];})),t&&Object.keys(t).forEach((e=>{r[e]=t[e];})),r},s$1_=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),p$35=e=>{if("string"!=typeof e)throw new Error("Style values must be strings")},d$1M=(e,t,r)=>{if(""!==t.vnodeSelector)for(let o=r;o<e.length;o++)if(s$1_(e[o],t))return o;return -1},a$2R=(e,t,r,o)=>{let i=e[t];if(""===i.vnodeSelector)return;let l=i.properties;if(!(l?void 0===l.key?l.bind:l.key:void 0))for(let n=0;n<e.length;n++)if(n!==t){let t=e[n];if(s$1_(t,i))throw new Error(`${r.vnodeSelector} had a ${i.vnodeSelector} child ${"added"===o?o:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}},f$1x=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties);}},c$33=[],u$1_=!1,h$1q=e=>{(e.children||[]).forEach(h$1q),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode]);},m$20=()=>{u$1_=!1,c$33.forEach(h$1q),c$33.length=0;},v$T=e=>{c$33.push(e),u$1_||(u$1_=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(m$20,{timeout:16}):setTimeout(m$20,16));},y$1s=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r){t.style.pointerEvents="none";let o=()=>{t.parentNode&&(t.parentNode.removeChild(t),v$T(e));};return void r(t,o,e.properties)}}t.parentNode&&(t.parentNode.removeChild(t),v$T(e));},g$12=(t,i,l)=>{if(!i)return;let n=l.eventHandlerInterceptor,s=Object.keys(i),d=s.length;for(let a=0;a<d;a++){let d=s[a],f=i[d];if("className"===d)throw new Error('Property "className" is not supported, use "class".');if("class"===d)x$H(t,f,!0);else if("classes"===d){let e=Object.keys(f),r=e.length;for(let o=0;o<r;o++){let r=e[o];f[r]&&t.classList.add(r);}}else if("styles"===d){let e=Object.keys(f),r=e.length;for(let o=0;o<r;o++){let r=e[o],i=f[r];i&&(p$35(i),l.styleApplyer(t,r,i));}}else if("key"!==d&&null!=f){let s=typeof f;"function"===s?(0===d.lastIndexOf("on",0)&&(n&&(f=n(d,f,t,i)),"oninput"===d&&function(){let e=f;f=function(t){e.apply(this,[t]),t.target["oninput-value"]=t.target.value;};}()),t[d]=f):l.namespace===r$1q?"href"===d?t.setAttributeNS(o$1B,d,f):t.setAttribute(d,f):"string"===s&&"value"!==d?"innerHTML"===d?t[d]=L$v.sanitize(f):t.setAttribute(d,f):t[d]=f;}}},b$11=(e,t,r)=>{if(t)for(let o of t)w$V(o,e,void 0,r);},N$r=(e,t,r)=>{b$11(e,t.children,r),t.text&&(e.textContent=t.text),g$12(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children]);},w$V=(e,t,o,i)=>{let l,s=0,p=e.vnodeSelector,d=t.ownerDocument;if(""===p)l=e.domNode=d.createTextNode(e.text),void 0!==o?t.insertBefore(l,o):t.appendChild(l);else {for(let a=0;a<=p.length;++a){let f=p.charAt(a);if(a===p.length||"."===f||"#"===f){let f=p.charAt(s-1),c=p.slice(s,a);"."===f?l.classList.add(c):"#"===f?l.id=c:("svg"===c&&(i=n$2y(i,{namespace:r$1q})),void 0!==i.namespace?l=e.domNode=d.createElementNS(i.namespace,c):(l=e.domNode=e.domNode||d.createElement(c),"input"===c&&e.properties&&void 0!==e.properties.type&&l.setAttribute("type",e.properties.type)),void 0!==o?t.insertBefore(l,o):l.parentNode!==t&&t.appendChild(l)),s=a+1;}}N$r(l,e,i);}},x$H=(e,t,r)=>{t&&t.split(" ").forEach((t=>{t&&e.classList.toggle(t,r);}));},k$y=(t,i,l,n)=>{if(!l)return;let s=!1,d=Object.keys(l),a=d.length;for(let f=0;f<a;f++){let a=d[f],c=l[a],u=i[a];if("class"===a)u!==c&&(x$H(t,u,!1),x$H(t,c,!0));else if("classes"===a){let e=t.classList,r=Object.keys(c),o=r.length;for(let t=0;t<o;t++){let o=r[t],i=!!c[o];i!==!!u[o]&&(s=!0,i?e.add(o):e.remove(o));}}else if("styles"===a){let e=Object.keys(c),r=e.length;for(let o=0;o<r;o++){let r=e[o],i=c[r];i!==u[r]&&(s=!0,i?(p$35(i),n.styleApplyer(t,r,i)):n.styleApplyer(t,r,""));}}else if(c||"string"!=typeof u||(c=""),"value"===a){let e=t[a];e!==c&&(t["oninput-value"]?e===t["oninput-value"]:c!==u)&&(t[a]=c,t["oninput-value"]=void 0),c!==u&&(s=!0);}else if(c!==u){let i=typeof c;"function"===i&&n.eventHandlerInterceptor||(n.namespace===r$1q?"href"===a?t.setAttributeNS(o$1B,a,c):t.setAttribute(a,c):"string"===i?"innerHTML"===a?t[a]=L$v.sanitize(c):"role"===a&&""===c?t.removeAttribute(a):t.setAttribute(a,c):t[a]!==c&&(t[a]=c),s=!0);}}return s},A$q=(e,t,r,o,n)=>{if(r===o)return !1;o=o||l$2i;let p,c=(r=r||l$2i).length,u=o.length,h=0,m=0,v=!1;for(;m<u;){let l=h<c?r[h]:void 0,u=o[m];if(void 0!==l&&s$1_(l,u))v=i$2n(l,u,n)||v,h++;else {let l=d$1M(r,u,h+1);if(l>=0){for(p=h;p<l;p++)y$1s(r[p]),a$2R(r,p,e,"removed");v=i$2n(r[l],u,n)||v,h=l+1;}else w$V(u,t,h<c?r[h].domNode:void 0,n),f$1x(u),a$2R(o,m,e,"added");}m++;}if(c>h)for(p=h;p<c;p++)y$1s(r[p]),a$2R(r,p,e,"removed");return v};i$2n=(e,t,o)=>{let i=e.domNode,l=!1;if(e===t)return !1;let s=!1;if(""===t.vnodeSelector){if(t.text!==e.text){let e=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(e,i),t.domNode=e,l=!0,l}t.domNode=i;}else 0===t.vnodeSelector.lastIndexOf("svg",0)&&(o=n$2y(o,{namespace:r$1q})),e.text!==t.text&&(s=!0,void 0===t.text?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,s=A$q(t,i,e.children,t.children,o)||s,s=k$y(i,e.properties,t.properties,o)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,o,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),l};let S$G=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let o=e;e=r,i$2n(o,r,t);},domNode:e.domNode});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$34={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,r,o)=>{"-"===r.charAt(0)?e.style.setProperty(r,o):e.style[r]=o;}};let d$1L=r=>n$2y(p$34,r),n$2x={create:(e,t)=>(t=d$1L(t),w$V(e,document.createElement("div"),void 0,t),S$G(e,t)),append:(e,t,p)=>(p=d$1L(p),w$V(t,e,void 0,p),S$G(t,p)),insertBefore:(e,t,p)=>(p=d$1L(p),w$V(t,e.parentNode,e,p),S$G(t,p)),merge:(e,r,p)=>(p=d$1L(p),r.domNode=e,N$r(e,r,p),S$G(r,p)),replace:(e,t,p)=>(p=d$1L(p),w$V(t,e.parentNode,e,p),e.parentNode.removeChild(e),S$G(t,p))};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$1w,n$2w=(e,r)=>{let t=[];for(;e&&e!==r;)t.push(e),e=e.parentNode;return t};t$1w=Array.prototype.find?(e,r)=>e.find(r):(e,r)=>e.filter(r)[0];let o$1A=(e,r)=>{let n=e;return r.forEach((e=>{n=n&&n.children?t$1w(n.children,(r=>r.domNode===e)):void 0;})),n},d$1K=(e,r,t)=>{let d=function(d){t("domEvent",d);let i=r(),p=n$2w(d.currentTarget,i.domNode);p.reverse();let l,a=o$1A(i.getLastRender(),p);return e.scheduleRender(),a&&(l=a.properties[`on${d.type}`].apply(a.properties.bind||this,arguments)),t("domEventProcessed",d),l};return (e,r,t,n)=>d},i$2m=t=>{let n,o,i=d$1L(t),p=i.performanceLogger,l=!0,a=!1,s=[],c=[],u=(e,r,t)=>{let o,l=()=>o;i.eventHandlerInterceptor=d$1K(n,l,p),o=e(r,t(),i),s.push(o),c.push(t);},f=()=>{if(o=void 0,l){l=!1,p("renderStart",void 0);for(let e=0;e<s.length;e++){let r=c[e]();p("rendered",void 0),s[e].update(r),p("patched",void 0);}p("renderDone",void 0),l=!0;}};return n={renderNow:f,scheduleRender:()=>{o||a||(o=requestAnimationFrame(f));},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),a=!0;},resume:()=>{a=!1,l=!0,n.scheduleRender();},append:(e,t)=>{u(n$2x.append,e,t);},insertBefore:(e,t)=>{u(n$2x.insertBefore,e,t);},merge:(e,t)=>{u(n$2x.merge,e,t);},replace:(e,t)=>{u(n$2x.replace,e,t);},detach:e=>{for(let r=0;r<c.length;r++)if(c[r]===e)return c.splice(r,1),s.splice(r,1)[0];throw new Error("renderFunction was not found")}},n};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$1H={handleInterceptedEvent:(e,p,t,n)=>(e.scheduleRender(),p.properties[`on${n.type}`].apply(p.properties.bind||t,[n]))};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$1G={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,r,o)=>{e.style[r]=o;}},r$1p=r=>({...e$1G,...r});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$1z=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},n$2v=(e,t)=>e.find(t),d$1J=(e,t,r=!1)=>{let o=e;return t.forEach(((e,d)=>{var s;const i=null!=(s=o)&&s.children?n$2v(o.children,(t=>t.domNode===e)):void 0;r&&!i&&d!==t.length-1||(o=i);})),o},s$1Z=n=>{let s;const i={...e$1H,...n},c=r$1p(i),a=c.performanceLogger;let l,m=!0,p=!1;const u=[],f=[],v=(e,t,r)=>{let n;c.eventHandlerInterceptor=(e,t,r,c)=>function(e){let t;a("domEvent",e);const r=o$1z(e.currentTarget,n.domNode),c=r.some((e=>{var t;return customElements.get(null==e||null==(t=e.tagName)?void 0:t.toLowerCase())}));if(e.eventPhase===Event.CAPTURING_PHASE||!c)r.reverse(),t=d$1J(n.getLastRender(),r);else {const r=e.composedPath(),o=r.slice(r.indexOf(e.currentTarget),r.indexOf(n.domNode)).filter((e=>e.getRootNode()===e.ownerDocument)).reverse();t=d$1J(n.getLastRender(),o,!0);}let l;return t&&(l=i.handleInterceptedEvent(s,t,this,e)),a("domEventProcessed",e),l},null==i.postProcessProjectionOptions||i.postProcessProjectionOptions(c);const l=r();n=e(t,l,c),u.push(n),f.push(r),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(n,l);};let h=()=>{if(l=void 0,m){m=!1,a("renderStart",void 0);for(let e=0;e<u.length;e++){const t=f[e]();a("rendered",void 0),u[e].update(t),a("patched",void 0);}a("renderDone",void 0),m=!0;}};return i.modifyDoRenderImplementation&&(h=i.modifyDoRenderImplementation(h,u,f)),s={renderNow:h,scheduleRender:()=>{l||p||(l=requestAnimationFrame(h));},stop:()=>{l&&(cancelAnimationFrame(l),l=void 0),p=!0;},resume:()=>{p=!1,m=!0,s.scheduleRender();},append:(t,r)=>{v(n$2x.append,t,r);},insertBefore:(t,r)=>{v(n$2x.insertBefore,t,r);},merge:(t,r)=>{v(n$2x.merge,t,r);},replace:(t,r)=>{v(n$2x.replace,t,r);},detach:e=>{for(let t=0;t<f.length;t++)if(f[t]===e)return f.splice(t,1),u.splice(t,1)[0];throw new Error("renderFunction was not found")}},s};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$1F;function r$1o(){setAssetPath(T$t(a$34(e$1F)));}e$1F="components/assets";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$1v=Symbol("widget"),r$1n=[],n$2u={},o$1y=new WeakMap;function i$2l(e,t){let o=t.children;if(o&&o.length)for(let r=0;r<o.length;++r)o[r]=i$2l(e,o[r]);else o=r$1n;const s=t.vnodeSelector;if(c$32(s)){const r=t.properties||n$2u,i=r.key||s;return {vnodeSelector:"div",properties:{key:i,afterCreate:d$1I,afterUpdate:a$2Q,afterRemoved:l$2h,parentWidget:e,widgetConstructor:s,widgetProperties:{...r,key:i,children:o}},children:void 0,text:void 0,domNode:null}}return t}function d$1I(t,r,n,{parentWidget:i,widgetConstructor:d,widgetProperties:a}){const c=new d(a);c.container=t,o$1y.set(t,c),null==c.afterCreate||c.afterCreate(c,t),i._internalHandles.add(n$2O((()=>l$2h(t))));}function a$2Q(e,t,r,{widgetProperties:n}){const i=o$1y.get(e);i&&(i.set(n),null==i.afterUpdate||i.afterUpdate(i,e));}function l$2h(e){const t=o$1y.get(e);t&&(t.destroy(),o$1y.delete(e));}function c$32(e){return "function"==typeof e&&e[t$1v]}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const P$r="esri.widgets.Widget",E$s=s$2n.getLogger(P$r);let L$u=0;const N$q=new Map,I$B={widgetIcon:"esri-icon-checkbox-unchecked"};function F$o(e,t){for(const r in t)null!=e[r]&&("object"==typeof e[r]&&"object"==typeof t[r]?F$o(e[r],t[r]):e[r]=t[r]);return e}const U$n=s$1Z({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(e,s,o,i)=>{const n=t(e,s,o,i),a=r.test(e);if(!((e=e.replace(r,"")).toLowerCase()in o)||a){const t=e[2].toLowerCase()+e.slice(3),r=e=>n.call(o,e);o.addEventListener(t,r,a);const s=()=>o.removeEventListener(t,r,a),d=i.afterRemoved;i.afterRemoved=e=>{null==d||d(e),s();};}return n};},handleInterceptedEvent(e,t,r,s){const{eventPhase:o,type:i}=s,n=o===Event.CAPTURING_PHASE;let a=`on${i}${n?"capture":""}`;const d=t.properties;(a in d||(a=`on${i[0].toUpperCase()}${i.slice(1)}${n?"Capture":""}`,a in d))&&(N$q.clear(),e.scheduleRender(),d[a].call(d.bind||r,s));}});let $$f=!1,x$G=class extends(n$2A(n$2D.EventedAccessor)){constructor(e,r){super(e,r),this._attached=!1,this._internalHandles=new u$25,this._projector=U$n,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=I$B.widgetIcon,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=z$r((async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const e=await T$s(this._messageBundleProps.map((async({bundlePath:e,propertyName:t})=>{let r=await u$20(e);this.uiStrings&&Object.keys(this.uiStrings)&&(r=F$o(l$2w(r),this.uiStrings)),this[t]=r;})));for(const t of e)t.error&&E$s.error("widget-intl:locale-error",this.declaredClass,t.error);}await this.loadLocale();})),r$1o();const s=["light","dark"],n=b$12()||"light";s.includes(n)||s$2i(E$s,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});const a="esri-widget-uid-"+o$1E(),d=this.render.bind(this);this._trackingTarget=new s$2b((()=>this.scheduleRender()));const c=()=>{var e;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return {vnodeSelector:"div",properties:{key:a,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const t=d();let{properties:r}=t;r||(t.properties=r={});let{key:s,styles:o}=r;s||(r.key=a),o||(r.styles=o={}),o.display||(o.display="");let i=0;return null==(e=t.children)||e.forEach((e=>{if(c$32(e.vnodeSelector))return;let{properties:t}=e;t||(e.properties=t={}),t.key||(t.key=`${this.id}--${i++}`);})),i$2l(this,t)};this.render=()=>{if($$f)return c();let e=N$q.get(this);if(e)return e;this._trackingTarget.clear(),$$f=!0;try{e=a$32(this._trackingTarget,c);}finally{$$f=!1;}return N$q.set(this,e),e},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then((()=>{this._readyForTrueRender=!0,this._postInitialize();})));}normalizeCtorArgs(e,t){const r={...e};return t&&(r.container=t),r}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then((()=>{})).catch(w$$)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(this._trackingTarget=l$2y(this._trackingTarget),this.viewModel=l$2y(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,N$q.delete(this));}set container(e){this._get("container")||this._set("container",e);}castContainer(e){return e$1J(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+L$u++}set id(e){e&&this._set("id",e);}get renderable(){return this._resourcesFetch}get test(){return {projector:this._projector,handles:this._internalHandles}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(N$q.delete(this),this._projector.scheduleRender());}classes(...e){return l$2j.apply(this,e)}own(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this._internalHandles.add(e);}renderNow(){N$q.delete(this),this._projector.renderNow();}_postInitialize(){var e;if(this.destroyed)return;this.scheduleRender(),null!=(e=this._delegatedEventNames)&&e.length&&this._internalHandles.add(i$2x(this,"viewModel",((e,t)=>{t&&this._internalHandles.remove("delegated-events"),e&&this._internalHandles.add(this._delegatedEventNames.map((t=>e.on(t,(e=>{this.emit(t,e);})))),"delegated-events");}))),this.postInitialize();const t=async()=>{await this._loadLocale().catch(w$$),this.scheduleRender();};this._internalHandles.add([g$14(t),this.watch("uiStrings",t),a$2Y(this,"container",(async e=>{this.destroyed||this._attach(e);}))]);}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0);}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1);}};x$G[t$1v]=!0,e$25([d$1T()],x$G.prototype,"_readyForTrueRender",void 0),e$25([d$1T({value:null})],x$G.prototype,"container",null),e$25([c$35("container")],x$G.prototype,"castContainer",null),e$25([d$1T({aliasOf:"container"})],x$G.prototype,"domNode",void 0),e$25([d$1T()],x$G.prototype,"iconClass",void 0),e$25([d$1T()],x$G.prototype,"id",null),e$25([d$1T()],x$G.prototype,"label",void 0),e$25([d$1T()],x$G.prototype,"renderable",null),e$25([d$1T()],x$G.prototype,"uiStrings",void 0),e$25([d$1T()],x$G.prototype,"viewModel",void 0),e$25([d$1T()],x$G.prototype,"visible",void 0),e$25([d$1T()],x$G.prototype,"key",void 0),e$25([d$1T()],x$G.prototype,"children",void 0),e$25([d$1T()],x$G.prototype,"afterCreate",void 0),e$25([d$1T()],x$G.prototype,"afterUpdate",void 0),e$25([d$1T()],x$G.prototype,"afterRemoved",void 0),x$G=e$25([i$2z(P$r)],x$G);const z$o=x$G;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$2k="not-loaded",d$1H="loading",c$31="failed",u$1Z="loaded",h$1p=s=>{let h=class extends s{constructor(...o){super(...o),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise((o=>{const s=this.load.bind(this);this.load=l=>{const a=new Promise(((o,s)=>{const e=v$10(l,s);this.destroyed&&s(new s$2l("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(o,s).finally((()=>{e&&e.remove();}));}));if(this.loadStatus===i$2k){this._set("loadStatus",d$1H);const o=this._loadController=new AbortController;s({signal:o.signal}),j$U(o.signal,(()=>{this._promiseProps.abort();}));}return o(),a};}))),this.when((()=>{this._set("loadStatus",u$1Z),this._loadController=null;}),(o=>{this._set("loadStatus",c$31),this._set("loadError",o),this._loadController=null;}));}get loaded(){return this.loadStatus===u$1Z}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var o;return this.isFulfilled()||(this._set("loadError",new s$2l("load:cancelled","Cancelled")),null==(o=this._loadController)||o.abort()),this}};return e$25([d$1T({readOnly:!0})],h.prototype,"loaded",null),e$25([d$1T({readOnly:!0})],h.prototype,"loadError",void 0),e$25([d$1T()],h.prototype,"loadStatus",void 0),e$25([d$1T({type:[t$1A],readOnly:!0})],h.prototype,"loadWarnings",null),h=e$25([i$2z("esri.core.Loadable")],h),h};let p$33=class extends(h$1p(m$22)){};p$33=e$25([i$2z("esri.core.Loadable")],p$33),function(o){function t(o){return !(!o||!o.load)}o.LoadableMixin=h$1p,o.isLoadable=t;}(p$33||(p$33={}));const m$1$=p$33;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2t(n,t,i=S$I){return t||(t=new i),t===n||(t.removeAll(),e$1E(n)?t.addMany(n):n&&t.add(n)),t}function t$1u(r){return r}function e$1E(r){return r&&(Array.isArray(r)||"items"in r&&Array.isArray(r.items))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function s$1Y(e,r,n){if(!e||!e.read||!1===e.read.enabled||!e.read.source)return !1;const o=e.read.source;if("string"==typeof o){if(o===r)return !0;if(o.indexOf(".")>-1&&0===o.indexOf(r)&&s$2g(o,n))return !0}else for(const s of o){if(s===r)return !0;if(s.indexOf(".")>-1&&0===s.indexOf(r)&&s$2g(s,n))return !0}return !1}function i$2j(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)}function a$2P(e,t,r,o,a){let f=o$1M(t[r],a);i$2j(f)&&(e[r]=!0);for(const i of Object.getOwnPropertyNames(t))f=o$1M(t[i],a),s$1Y(f,r,o)&&(e[i]=!0);}function f$1w(e,t,r,n){const s=r.metadatas,i=a$2_(s[t],"any",n),a=i&&i.default;if(void 0===a)return;const f="function"==typeof a?a.call(e,t,n):a;void 0!==f&&r.set(t,f);}const c$30={origin:"service"};function u$1Y(t,o,s=c$30){if(!o||"object"!=typeof o)return;const i=e$1W(t),u=i.metadatas,d={};for(const e of Object.getOwnPropertyNames(o))a$2P(d,u,e,o,s);i.setDefaultOrigin(s.origin);for(const r of Object.getOwnPropertyNames(d)){const a=o$1M(u[r],s).read,f=a&&a.source;let c;c=f&&"string"==typeof f?u$2g(o,f):o[r],a&&a.reader&&(c=a.reader.call(t,c,o,s)),void 0!==c&&i.set(r,c);}if(!s||!s.ignoreDefaults)for(const e of Object.getOwnPropertyNames(u))d[e]||f$1w(t,e,i,s);i.setDefaultOrigin("user");}function d$1G(e,t,r,n=c$30){var o;const s={...n,messages:[]};r(s),null==(o=s.messages)||o.forEach((t=>{"warning"!==t.type||e.loaded?n&&n.messages&&n.messages.push(t):e.loadWarnings.push(t);}));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$2g=s$2n.getLogger("esri.core.accessorSupport.write");function a$2O(r,e,t,i,n){var o,s;const u={};return null==(o=e.write)||null==(s=o.writer)||s.call(r,i,u,t,n),u}function f$1v(r,t,i,o,s,u){if(!o||!o.write)return !1;const a=r.get(i);if(!s&&o.write.overridePolicy){const e=o.write.overridePolicy.call(r,a,i,u);void 0!==e&&(s=e);}if(s||(s=o.write),!s||!1===s.enabled)return !1;if((null===a&&!s.allowNull&&!s.writerEnsuresNonNull||void 0===a)&&s.isRequired){const t=new s$2l("web-document-write:property-required",`Missing value for required property '${i}' on '${r.declaredClass}'`,{propertyName:i,target:r});return t&&u&&u.messages?u.messages.push(t):t&&!u&&l$2g.error(t.name,t.message),!1}if(void 0===a)return !1;if(null===a&&!s.allowNull&&!s.writerEnsuresNonNull)return !1;if(c$2$(r,i,u,o,a))return !1;if(void 0!==o.default)return !0;if(!s.ignoreOrigin&&u&&u.origin){if(t.store.originOf(i)<t$1J(u.origin))return !1}return !0}function c$2$(e,t,i,n,o){const s=n.default;if(void 0===s)return !1;if(null!=n.defaultEquals)return n.defaultEquals(o);if("function"==typeof s){if(Array.isArray(o)){const n=s.call(e,t,i);return l$2x(n,o)}return !1}return s===o}function g$11(r,e,t,i){const n=e$1W(r),s=n.metadatas,l=s$27(s[e],i);return !!l&&f$1v(r,n,e,l,t,i)}function p$32(r,e,t){if(r&&"function"==typeof r.toJSON&&(!r.toJSON.isDefaultToJSON||!r.write))return u$2h(e,r.toJSON());const n=e$1W(r),l=n.metadatas;for(const o in l){const p=s$27(l[o],t);if(!f$1v(r,n,o,p,void 0,t))continue;const d=r.get(o),m=a$2O(r,p,p.write&&"string"==typeof p.write.target?p.write.target:o,d,t);var c,g;if(Object.keys(m).length>0)e=u$2h(e,m),null!=t&&null!=(c=t.resources)&&null!=(g=c.pendingOperations)&&g.length&&Promise.all(t.resources.pendingOperations).then((()=>u$2h(e,m))),t&&t.writtenProperties&&t.writtenProperties.push({target:r,propName:o,oldOrigin:c$3i(n.store.originOf(o)),newOrigin:t.origin});}return e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$2i=t=>{let i=class extends t{constructor(...r){super(...r);}read(r,t){u$1Y(this,r,t);}write(r={},t){return p$32(this,r,t)}toJSON(r){return this.write({},r)}static fromJSON(r,t){return c$2_.call(this,r,t)}};return i=e$25([i$2z("esri.core.JSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function c$2_(r,t){if(!r)return null;if(r.declaredClass)throw new Error("JSON object is already hydrated");const s=new this;return s.read(r,t),s}let a$2N=class extends(i$2i(p$3a)){};a$2N=e$25([i$2z("esri.core.JSONSupport")],a$2N);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2s(r,t,e){return T$s(r.map(((r,o)=>t.apply(e,[r,o]))))}function u$1X(r,t,e){return T$s(r.map(((r,o)=>t.apply(e,[r,o])))).then((r=>r.map((r=>r.value))))}function a$2M(o){return t$1T(o)?k$E():o.then((r=>({ok:!0,value:r}))).catch((r=>({ok:!1,error:r})))}function p$31(r){return r.then((r=>({ok:!0,value:r}))).catch((r=>(b$17(r),{ok:!1,error:r})))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function n$2r(o,a){return await o.load(),i$2h(o,a)}async function i$2h(n,i){const f=[],c=(...o)=>{for(const a of o)t$1T(a)||(Array.isArray(a)?c(...a):S$I.isCollection(a)?a.forEach((o=>c(o))):m$1$.isLoadable(a)&&f.push(a));};i(c);let e=null;if(await u$1X(f,(async o=>{!1!==(await a$2M(s$1X(o)?o.loadAll():o.load())).ok||e||(e=o);})),e)throw e.loadError;return n}function s$1X(o){return "loadAll"in o&&"function"==typeof o.loadAll}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$1m(r,o,e){let i,n;return void 0===o?(n=r,i=[void 0]):"string"!=typeof o?(n=r,i=[void 0],e=o):(n=o,i=Array.isArray(r)?r:[r]),(r,o)=>{const p=r.constructor.prototype;for(const c of i){const i=y$1y(r,c,n);i.write&&"object"==typeof i.write||(i.write={}),e&&(i.write.target=e),i.write.writer=p[o];}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let o$1x;const r$1l={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(o$1x=2e3;o$1x<=2045;o$1x++)r$1l[o$1x]=0;for(o$1x=2056;o$1x<=2065;o$1x++)r$1l[o$1x]=0;for(o$1x=2067;o$1x<=2135;o$1x++)r$1l[o$1x]=0;for(o$1x=2137;o$1x<=2154;o$1x++)r$1l[o$1x]=0;for(o$1x=2161;o$1x<=2170;o$1x++)r$1l[o$1x]=0;for(o$1x=2172;o$1x<=2193;o$1x++)r$1l[o$1x]=0;for(o$1x=2195;o$1x<=2198;o$1x++)r$1l[o$1x]=0;for(o$1x=2200;o$1x<=2203;o$1x++)r$1l[o$1x]=0;for(o$1x=2205;o$1x<=2217;o$1x++)r$1l[o$1x]=0;for(o$1x=2222;o$1x<=2224;o$1x++)r$1l[o$1x]=1;for(o$1x=2225;o$1x<=2250;o$1x++)r$1l[o$1x]=2;for(o$1x=2251;o$1x<=2253;o$1x++)r$1l[o$1x]=1;for(o$1x=2257;o$1x<=2264;o$1x++)r$1l[o$1x]=2;for(o$1x=2274;o$1x<=2279;o$1x++)r$1l[o$1x]=2;for(o$1x=2280;o$1x<=2282;o$1x++)r$1l[o$1x]=1;for(o$1x=2283;o$1x<=2289;o$1x++)r$1l[o$1x]=2;for(o$1x=2290;o$1x<=2292;o$1x++)r$1l[o$1x]=0;for(o$1x=2308;o$1x<=2313;o$1x++)r$1l[o$1x]=0;for(o$1x=2315;o$1x<=2491;o$1x++)r$1l[o$1x]=0;for(o$1x=2494;o$1x<=2866;o$1x++)r$1l[o$1x]=0;for(o$1x=2867;o$1x<=2869;o$1x++)r$1l[o$1x]=1;for(o$1x=2870;o$1x<=2888;o$1x++)r$1l[o$1x]=2;for(o$1x=2891;o$1x<=2895;o$1x++)r$1l[o$1x]=2;for(o$1x=2896;o$1x<=2898;o$1x++)r$1l[o$1x]=1;for(o$1x=2902;o$1x<=2908;o$1x++)r$1l[o$1x]=2;for(o$1x=2915;o$1x<=2920;o$1x++)r$1l[o$1x]=2;for(o$1x=2921;o$1x<=2923;o$1x++)r$1l[o$1x]=1;for(o$1x=2924;o$1x<=2930;o$1x++)r$1l[o$1x]=2;for(o$1x=2931;o$1x<=2962;o$1x++)r$1l[o$1x]=0;for(o$1x=2964;o$1x<=2968;o$1x++)r$1l[o$1x]=2;for(o$1x=2969;o$1x<=2973;o$1x++)r$1l[o$1x]=0;for(o$1x=2975;o$1x<=2991;o$1x++)r$1l[o$1x]=0;for(o$1x=2995;o$1x<=3051;o$1x++)r$1l[o$1x]=0;for(o$1x=3054;o$1x<=3079;o$1x++)r$1l[o$1x]=0;for(o$1x=3081;o$1x<=3088;o$1x++)r$1l[o$1x]=0;for(o$1x=3092;o$1x<=3101;o$1x++)r$1l[o$1x]=0;for(o$1x=3106;o$1x<=3138;o$1x++)r$1l[o$1x]=0;for(o$1x=3146;o$1x<=3151;o$1x++)r$1l[o$1x]=0;for(o$1x=3153;o$1x<=3166;o$1x++)r$1l[o$1x]=0;for(o$1x=3168;o$1x<=3172;o$1x++)r$1l[o$1x]=0;for(o$1x=3174;o$1x<=3203;o$1x++)r$1l[o$1x]=0;for(o$1x=3294;o$1x<=3358;o$1x++)r$1l[o$1x]=0;for(o$1x=3367;o$1x<=3403;o$1x++)r$1l[o$1x]=0;for(o$1x=3408;o$1x<=3416;o$1x++)r$1l[o$1x]=0;for(o$1x=3417;o$1x<=3438;o$1x++)r$1l[o$1x]=2;for(o$1x=3441;o$1x<=3446;o$1x++)r$1l[o$1x]=2;for(o$1x=3447;o$1x<=3450;o$1x++)r$1l[o$1x]=0;for(o$1x=3451;o$1x<=3459;o$1x++)r$1l[o$1x]=2;for(o$1x=3460;o$1x<=3478;o$1x++)r$1l[o$1x]=0;for(o$1x=3554;o$1x<=3559;o$1x++)r$1l[o$1x]=0;for(o$1x=3560;o$1x<=3570;o$1x++)r$1l[o$1x]=2;for(o$1x=3571;o$1x<=3581;o$1x++)r$1l[o$1x]=0;for(o$1x=3594;o$1x<=3597;o$1x++)r$1l[o$1x]=0;for(o$1x=3601;o$1x<=3604;o$1x++)r$1l[o$1x]=0;for(o$1x=3637;o$1x<=3639;o$1x++)r$1l[o$1x]=0;for(o$1x=3665;o$1x<=3667;o$1x++)r$1l[o$1x]=0;for(o$1x=3693;o$1x<=3695;o$1x++)r$1l[o$1x]=0;for(o$1x=3701;o$1x<=3727;o$1x++)r$1l[o$1x]=0;for(o$1x=3728;o$1x<=3739;o$1x++)r$1l[o$1x]=2;for(o$1x=3740;o$1x<=3751;o$1x++)r$1l[o$1x]=0;for(o$1x=3753;o$1x<=3760;o$1x++)r$1l[o$1x]=2;for(o$1x=3761;o$1x<=3773;o$1x++)r$1l[o$1x]=0;for(o$1x=3775;o$1x<=3777;o$1x++)r$1l[o$1x]=0;for(o$1x=3779;o$1x<=3781;o$1x++)r$1l[o$1x]=0;for(o$1x=3783;o$1x<=3785;o$1x++)r$1l[o$1x]=0;for(o$1x=3788;o$1x<=3791;o$1x++)r$1l[o$1x]=0;for(o$1x=3797;o$1x<=3802;o$1x++)r$1l[o$1x]=0;for(o$1x=3814;o$1x<=3816;o$1x++)r$1l[o$1x]=0;for(o$1x=3825;o$1x<=3829;o$1x++)r$1l[o$1x]=0;for(o$1x=3832;o$1x<=3841;o$1x++)r$1l[o$1x]=0;for(o$1x=3844;o$1x<=3852;o$1x++)r$1l[o$1x]=0;for(o$1x=3873;o$1x<=3885;o$1x++)r$1l[o$1x]=0;for(o$1x=3890;o$1x<=3893;o$1x++)r$1l[o$1x]=0;for(o$1x=3907;o$1x<=3912;o$1x++)r$1l[o$1x]=0;for(o$1x=3942;o$1x<=3950;o$1x++)r$1l[o$1x]=0;for(o$1x=3968;o$1x<=3970;o$1x++)r$1l[o$1x]=0;for(o$1x=3973;o$1x<=3976;o$1x++)r$1l[o$1x]=0;for(o$1x=3986;o$1x<=3989;o$1x++)r$1l[o$1x]=0;for(o$1x=3994;o$1x<=3997;o$1x++)r$1l[o$1x]=0;for(o$1x=4048;o$1x<=4051;o$1x++)r$1l[o$1x]=0;for(o$1x=4056;o$1x<=4063;o$1x++)r$1l[o$1x]=0;for(o$1x=4093;o$1x<=4096;o$1x++)r$1l[o$1x]=0;for(o$1x=4390;o$1x<=4398;o$1x++)r$1l[o$1x]=0;for(o$1x=4399;o$1x<=4413;o$1x++)r$1l[o$1x]=2;for(o$1x=4418;o$1x<=4433;o$1x++)r$1l[o$1x]=2;for(o$1x=4455;o$1x<=4457;o$1x++)r$1l[o$1x]=2;for(o$1x=4484;o$1x<=4489;o$1x++)r$1l[o$1x]=0;for(o$1x=4491;o$1x<=4554;o$1x++)r$1l[o$1x]=0;for(o$1x=4568;o$1x<=4589;o$1x++)r$1l[o$1x]=0;for(o$1x=4652;o$1x<=4656;o$1x++)r$1l[o$1x]=0;for(o$1x=4766;o$1x<=4800;o$1x++)r$1l[o$1x]=0;for(o$1x=5014;o$1x<=5016;o$1x++)r$1l[o$1x]=0;for(o$1x=5069;o$1x<=5072;o$1x++)r$1l[o$1x]=0;for(o$1x=5105;o$1x<=5130;o$1x++)r$1l[o$1x]=0;for(o$1x=5173;o$1x<=5188;o$1x++)r$1l[o$1x]=0;for(o$1x=5253;o$1x<=5259;o$1x++)r$1l[o$1x]=0;for(o$1x=5269;o$1x<=5275;o$1x++)r$1l[o$1x]=0;for(o$1x=5292;o$1x<=5311;o$1x++)r$1l[o$1x]=0;for(o$1x=5329;o$1x<=5331;o$1x++)r$1l[o$1x]=0;for(o$1x=5343;o$1x<=5349;o$1x++)r$1l[o$1x]=0;for(o$1x=5355;o$1x<=5357;o$1x++)r$1l[o$1x]=0;for(o$1x=5387;o$1x<=5389;o$1x++)r$1l[o$1x]=0;for(o$1x=5459;o$1x<=5463;o$1x++)r$1l[o$1x]=0;for(o$1x=5479;o$1x<=5482;o$1x++)r$1l[o$1x]=0;for(o$1x=5518;o$1x<=5520;o$1x++)r$1l[o$1x]=0;for(o$1x=5530;o$1x<=5539;o$1x++)r$1l[o$1x]=0;for(o$1x=5550;o$1x<=5552;o$1x++)r$1l[o$1x]=0;for(o$1x=5562;o$1x<=5583;o$1x++)r$1l[o$1x]=0;for(o$1x=5623;o$1x<=5625;o$1x++)r$1l[o$1x]=2;for(o$1x=5631;o$1x<=5639;o$1x++)r$1l[o$1x]=0;for(o$1x=5649;o$1x<=5653;o$1x++)r$1l[o$1x]=0;for(o$1x=5663;o$1x<=5680;o$1x++)r$1l[o$1x]=0;for(o$1x=5682;o$1x<=5685;o$1x++)r$1l[o$1x]=0;for(o$1x=5875;o$1x<=5877;o$1x++)r$1l[o$1x]=0;for(o$1x=5896;o$1x<=5899;o$1x++)r$1l[o$1x]=0;for(o$1x=5921;o$1x<=5940;o$1x++)r$1l[o$1x]=0;for(o$1x=6050;o$1x<=6125;o$1x++)r$1l[o$1x]=0;for(o$1x=6244;o$1x<=6275;o$1x++)r$1l[o$1x]=0;for(o$1x=6328;o$1x<=6348;o$1x++)r$1l[o$1x]=0;for(o$1x=6350;o$1x<=6356;o$1x++)r$1l[o$1x]=0;for(o$1x=6366;o$1x<=6372;o$1x++)r$1l[o$1x]=0;for(o$1x=6381;o$1x<=6387;o$1x++)r$1l[o$1x]=0;for(o$1x=6393;o$1x<=6404;o$1x++)r$1l[o$1x]=0;for(o$1x=6480;o$1x<=6483;o$1x++)r$1l[o$1x]=0;for(o$1x=6511;o$1x<=6514;o$1x++)r$1l[o$1x]=0;for(o$1x=6579;o$1x<=6581;o$1x++)r$1l[o$1x]=0;for(o$1x=6619;o$1x<=6624;o$1x++)r$1l[o$1x]=0;for(o$1x=6625;o$1x<=6627;o$1x++)r$1l[o$1x]=2;for(o$1x=6628;o$1x<=6632;o$1x++)r$1l[o$1x]=0;for(o$1x=6634;o$1x<=6637;o$1x++)r$1l[o$1x]=0;for(o$1x=6669;o$1x<=6692;o$1x++)r$1l[o$1x]=0;for(o$1x=6707;o$1x<=6709;o$1x++)r$1l[o$1x]=0;for(o$1x=6720;o$1x<=6723;o$1x++)r$1l[o$1x]=0;for(o$1x=6732;o$1x<=6738;o$1x++)r$1l[o$1x]=0;for(o$1x=6931;o$1x<=6933;o$1x++)r$1l[o$1x]=0;for(o$1x=6956;o$1x<=6959;o$1x++)r$1l[o$1x]=0;for(o$1x=7005;o$1x<=7007;o$1x++)r$1l[o$1x]=0;for(o$1x=7057;o$1x<=7070;o$1x++)r$1l[o$1x]=2;for(o$1x=7074;o$1x<=7082;o$1x++)r$1l[o$1x]=0;for(o$1x=7109;o$1x<=7118;o$1x++)r$1l[o$1x]=0;for(o$1x=7119;o$1x<=7127;o$1x++)r$1l[o$1x]=1;for(o$1x=7374;o$1x<=7376;o$1x++)r$1l[o$1x]=0;for(o$1x=7528;o$1x<=7586;o$1x++)r$1l[o$1x]=0;for(o$1x=7587;o$1x<=7645;o$1x++)r$1l[o$1x]=2;for(o$1x=7692;o$1x<=7696;o$1x++)r$1l[o$1x]=0;for(o$1x=7755;o$1x<=7787;o$1x++)r$1l[o$1x]=0;for(o$1x=7791;o$1x<=7795;o$1x++)r$1l[o$1x]=0;for(o$1x=7799;o$1x<=7801;o$1x++)r$1l[o$1x]=0;for(o$1x=7803;o$1x<=7805;o$1x++)r$1l[o$1x]=0;for(o$1x=7825;o$1x<=7831;o$1x++)r$1l[o$1x]=0;for(o$1x=7845;o$1x<=7859;o$1x++)r$1l[o$1x]=0;for(o$1x=8013;o$1x<=8032;o$1x++)r$1l[o$1x]=0;for(o$1x=8065;o$1x<=8068;o$1x++)r$1l[o$1x]=1;for(o$1x=8518;o$1x<=8529;o$1x++)r$1l[o$1x]=2;for(o$1x=8533;o$1x<=8536;o$1x++)r$1l[o$1x]=2;for(o$1x=8538;o$1x<=8540;o$1x++)r$1l[o$1x]=2;for(o$1x=8677;o$1x<=8679;o$1x++)r$1l[o$1x]=0;for(o$1x=8836;o$1x<=8840;o$1x++)r$1l[o$1x]=0;for(o$1x=8857;o$1x<=8859;o$1x++)r$1l[o$1x]=0;for(o$1x=8908;o$1x<=8910;o$1x++)r$1l[o$1x]=0;for(o$1x=9154;o$1x<=9159;o$1x++)r$1l[o$1x]=0;for(o$1x=9205;o$1x<=9218;o$1x++)r$1l[o$1x]=0;for(o$1x=9271;o$1x<=9273;o$1x++)r$1l[o$1x]=0;for(o$1x=9295;o$1x<=9297;o$1x++)r$1l[o$1x]=0;for(o$1x=9356;o$1x<=9360;o$1x++)r$1l[o$1x]=0;for(o$1x=9404;o$1x<=9407;o$1x++)r$1l[o$1x]=0;for(o$1x=9476;o$1x<=9482;o$1x++)r$1l[o$1x]=0;for(o$1x=9487;o$1x<=9494;o$1x++)r$1l[o$1x]=0;for(o$1x=9697;o$1x<=9699;o$1x++)r$1l[o$1x]=0;for(o$1x=20002;o$1x<=20032;o$1x++)r$1l[o$1x]=0;for(o$1x=20062;o$1x<=20092;o$1x++)r$1l[o$1x]=0;for(o$1x=20135;o$1x<=20138;o$1x++)r$1l[o$1x]=0;for(o$1x=20248;o$1x<=20258;o$1x++)r$1l[o$1x]=0;for(o$1x=20348;o$1x<=20358;o$1x++)r$1l[o$1x]=0;for(o$1x=20436;o$1x<=20440;o$1x++)r$1l[o$1x]=0;for(o$1x=20822;o$1x<=20824;o$1x++)r$1l[o$1x]=0;for(o$1x=20934;o$1x<=20936;o$1x++)r$1l[o$1x]=0;for(o$1x=21035;o$1x<=21037;o$1x++)r$1l[o$1x]=0;for(o$1x=21095;o$1x<=21097;o$1x++)r$1l[o$1x]=0;for(o$1x=21148;o$1x<=21150;o$1x++)r$1l[o$1x]=0;for(o$1x=21413;o$1x<=21423;o$1x++)r$1l[o$1x]=0;for(o$1x=21453;o$1x<=21463;o$1x++)r$1l[o$1x]=0;for(o$1x=21473;o$1x<=21483;o$1x++)r$1l[o$1x]=0;for(o$1x=21780;o$1x<=21782;o$1x++)r$1l[o$1x]=0;for(o$1x=21891;o$1x<=21894;o$1x++)r$1l[o$1x]=0;for(o$1x=21896;o$1x<=21899;o$1x++)r$1l[o$1x]=0;for(o$1x=22171;o$1x<=22177;o$1x++)r$1l[o$1x]=0;for(o$1x=22181;o$1x<=22187;o$1x++)r$1l[o$1x]=0;for(o$1x=22191;o$1x<=22197;o$1x++)r$1l[o$1x]=0;for(o$1x=22234;o$1x<=22236;o$1x++)r$1l[o$1x]=0;for(o$1x=22521;o$1x<=22525;o$1x++)r$1l[o$1x]=0;for(o$1x=22991;o$1x<=22994;o$1x++)r$1l[o$1x]=0;for(o$1x=23028;o$1x<=23038;o$1x++)r$1l[o$1x]=0;for(o$1x=23830;o$1x<=23853;o$1x++)r$1l[o$1x]=0;for(o$1x=23866;o$1x<=23872;o$1x++)r$1l[o$1x]=0;for(o$1x=23877;o$1x<=23884;o$1x++)r$1l[o$1x]=0;for(o$1x=23886;o$1x<=23894;o$1x++)r$1l[o$1x]=0;for(o$1x=23946;o$1x<=23948;o$1x++)r$1l[o$1x]=0;for(o$1x=24311;o$1x<=24313;o$1x++)r$1l[o$1x]=0;for(o$1x=24342;o$1x<=24347;o$1x++)r$1l[o$1x]=0;for(o$1x=24370;o$1x<=24374;o$1x++)r$1l[o$1x]=10;for(o$1x=24375;o$1x<=24381;o$1x++)r$1l[o$1x]=0;for(o$1x=24718;o$1x<=24721;o$1x++)r$1l[o$1x]=0;for(o$1x=24817;o$1x<=24821;o$1x++)r$1l[o$1x]=0;for(o$1x=24877;o$1x<=24882;o$1x++)r$1l[o$1x]=0;for(o$1x=24891;o$1x<=24893;o$1x++)r$1l[o$1x]=0;for(o$1x=25391;o$1x<=25395;o$1x++)r$1l[o$1x]=0;for(o$1x=25828;o$1x<=25838;o$1x++)r$1l[o$1x]=0;for(o$1x=26191;o$1x<=26195;o$1x++)r$1l[o$1x]=0;for(o$1x=26391;o$1x<=26393;o$1x++)r$1l[o$1x]=0;for(o$1x=26701;o$1x<=26722;o$1x++)r$1l[o$1x]=0;for(o$1x=26729;o$1x<=26799;o$1x++)r$1l[o$1x]=2;for(o$1x=26801;o$1x<=26803;o$1x++)r$1l[o$1x]=2;for(o$1x=26811;o$1x<=26813;o$1x++)r$1l[o$1x]=2;for(o$1x=26847;o$1x<=26870;o$1x++)r$1l[o$1x]=2;for(o$1x=26891;o$1x<=26899;o$1x++)r$1l[o$1x]=0;for(o$1x=26901;o$1x<=26923;o$1x++)r$1l[o$1x]=0;for(o$1x=26929;o$1x<=26946;o$1x++)r$1l[o$1x]=0;for(o$1x=26948;o$1x<=26998;o$1x++)r$1l[o$1x]=0;for(o$1x=27037;o$1x<=27040;o$1x++)r$1l[o$1x]=0;for(o$1x=27205;o$1x<=27232;o$1x++)r$1l[o$1x]=0;for(o$1x=27258;o$1x<=27260;o$1x++)r$1l[o$1x]=0;for(o$1x=27391;o$1x<=27398;o$1x++)r$1l[o$1x]=0;for(o$1x=27561;o$1x<=27564;o$1x++)r$1l[o$1x]=0;for(o$1x=27571;o$1x<=27574;o$1x++)r$1l[o$1x]=0;for(o$1x=27581;o$1x<=27584;o$1x++)r$1l[o$1x]=0;for(o$1x=27591;o$1x<=27594;o$1x++)r$1l[o$1x]=0;for(o$1x=28191;o$1x<=28193;o$1x++)r$1l[o$1x]=0;for(o$1x=28348;o$1x<=28358;o$1x++)r$1l[o$1x]=0;for(o$1x=28402;o$1x<=28432;o$1x++)r$1l[o$1x]=0;for(o$1x=28462;o$1x<=28492;o$1x++)r$1l[o$1x]=0;for(o$1x=29118;o$1x<=29122;o$1x++)r$1l[o$1x]=0;for(o$1x=29168;o$1x<=29172;o$1x++)r$1l[o$1x]=0;for(o$1x=29177;o$1x<=29185;o$1x++)r$1l[o$1x]=0;for(o$1x=29187;o$1x<=29195;o$1x++)r$1l[o$1x]=0;for(o$1x=29900;o$1x<=29903;o$1x++)r$1l[o$1x]=0;for(o$1x=30161;o$1x<=30179;o$1x++)r$1l[o$1x]=0;for(o$1x=30491;o$1x<=30494;o$1x++)r$1l[o$1x]=0;for(o$1x=30729;o$1x<=30732;o$1x++)r$1l[o$1x]=0;for(o$1x=31251;o$1x<=31259;o$1x++)r$1l[o$1x]=0;for(o$1x=31265;o$1x<=31268;o$1x++)r$1l[o$1x]=0;for(o$1x=31275;o$1x<=31279;o$1x++)r$1l[o$1x]=0;for(o$1x=31281;o$1x<=31297;o$1x++)r$1l[o$1x]=0;for(o$1x=31461;o$1x<=31469;o$1x++)r$1l[o$1x]=0;for(o$1x=31491;o$1x<=31495;o$1x++)r$1l[o$1x]=0;for(o$1x=31917;o$1x<=31922;o$1x++)r$1l[o$1x]=0;for(o$1x=31965;o$1x<=32e3;o$1x++)r$1l[o$1x]=0;for(o$1x=32001;o$1x<=32003;o$1x++)r$1l[o$1x]=2;for(o$1x=32005;o$1x<=32031;o$1x++)r$1l[o$1x]=2;for(o$1x=32033;o$1x<=32060;o$1x++)r$1l[o$1x]=2;for(o$1x=32064;o$1x<=32067;o$1x++)r$1l[o$1x]=2;for(o$1x=32074;o$1x<=32077;o$1x++)r$1l[o$1x]=2;for(o$1x=32081;o$1x<=32086;o$1x++)r$1l[o$1x]=0;for(o$1x=32107;o$1x<=32130;o$1x++)r$1l[o$1x]=0;for(o$1x=32133;o$1x<=32158;o$1x++)r$1l[o$1x]=0;for(o$1x=32164;o$1x<=32167;o$1x++)r$1l[o$1x]=2;for(o$1x=32180;o$1x<=32199;o$1x++)r$1l[o$1x]=0;for(o$1x=32201;o$1x<=32260;o$1x++)r$1l[o$1x]=0;for(o$1x=32301;o$1x<=32360;o$1x++)r$1l[o$1x]=0;for(o$1x=32601;o$1x<=32662;o$1x++)r$1l[o$1x]=0;for(o$1x=32664;o$1x<=32667;o$1x++)r$1l[o$1x]=2;for(o$1x=32701;o$1x<=32761;o$1x++)r$1l[o$1x]=0;for(o$1x=53001;o$1x<=53004;o$1x++)r$1l[o$1x]=0;for(o$1x=53008;o$1x<=53019;o$1x++)r$1l[o$1x]=0;for(o$1x=53021;o$1x<=53032;o$1x++)r$1l[o$1x]=0;for(o$1x=53034;o$1x<=53037;o$1x++)r$1l[o$1x]=0;for(o$1x=53042;o$1x<=53046;o$1x++)r$1l[o$1x]=0;for(o$1x=53074;o$1x<=53080;o$1x++)r$1l[o$1x]=0;for(o$1x=54001;o$1x<=54004;o$1x++)r$1l[o$1x]=0;for(o$1x=54008;o$1x<=54019;o$1x++)r$1l[o$1x]=0;for(o$1x=54021;o$1x<=54032;o$1x++)r$1l[o$1x]=0;for(o$1x=54034;o$1x<=54037;o$1x++)r$1l[o$1x]=0;for(o$1x=54042;o$1x<=54046;o$1x++)r$1l[o$1x]=0;for(o$1x=54048;o$1x<=54053;o$1x++)r$1l[o$1x]=0;for(o$1x=54074;o$1x<=54080;o$1x++)r$1l[o$1x]=0;for(o$1x=54098;o$1x<=54101;o$1x++)r$1l[o$1x]=0;for(o$1x=102001;o$1x<=102040;o$1x++)r$1l[o$1x]=0;for(o$1x=102042;o$1x<=102063;o$1x++)r$1l[o$1x]=0;for(o$1x=102065;o$1x<=102067;o$1x++)r$1l[o$1x]=0;for(o$1x=102070;o$1x<=102117;o$1x++)r$1l[o$1x]=0;for(o$1x=102122;o$1x<=102216;o$1x++)r$1l[o$1x]=0;for(o$1x=102221;o$1x<=102377;o$1x++)r$1l[o$1x]=0;for(o$1x=102382;o$1x<=102388;o$1x++)r$1l[o$1x]=0;for(o$1x=102389;o$1x<=102398;o$1x++)r$1l[o$1x]=2;for(o$1x=102399;o$1x<=102444;o$1x++)r$1l[o$1x]=0;for(o$1x=102445;o$1x<=102447;o$1x++)r$1l[o$1x]=2;for(o$1x=102448;o$1x<=102458;o$1x++)r$1l[o$1x]=0;for(o$1x=102459;o$1x<=102468;o$1x++)r$1l[o$1x]=2;for(o$1x=102469;o$1x<=102499;o$1x++)r$1l[o$1x]=0;for(o$1x=102500;o$1x<=102519;o$1x++)r$1l[o$1x]=1;for(o$1x=102520;o$1x<=102524;o$1x++)r$1l[o$1x]=0;for(o$1x=102525;o$1x<=102529;o$1x++)r$1l[o$1x]=2;for(o$1x=102530;o$1x<=102588;o$1x++)r$1l[o$1x]=0;for(o$1x=102590;o$1x<=102598;o$1x++)r$1l[o$1x]=0;for(o$1x=102601;o$1x<=102603;o$1x++)r$1l[o$1x]=0;for(o$1x=102605;o$1x<=102628;o$1x++)r$1l[o$1x]=0;for(o$1x=102629;o$1x<=102646;o$1x++)r$1l[o$1x]=2;for(o$1x=102648;o$1x<=102700;o$1x++)r$1l[o$1x]=2;for(o$1x=102701;o$1x<=102703;o$1x++)r$1l[o$1x]=0;for(o$1x=102707;o$1x<=102730;o$1x++)r$1l[o$1x]=2;for(o$1x=102733;o$1x<=102758;o$1x++)r$1l[o$1x]=2;for(o$1x=102767;o$1x<=102900;o$1x++)r$1l[o$1x]=0;for(o$1x=102965;o$1x<=102969;o$1x++)r$1l[o$1x]=0;for(o$1x=102971;o$1x<=102973;o$1x++)r$1l[o$1x]=0;for(o$1x=102975;o$1x<=102989;o$1x++)r$1l[o$1x]=0;for(o$1x=102990;o$1x<=102992;o$1x++)r$1l[o$1x]=1;for(o$1x=102997;o$1x<=103002;o$1x++)r$1l[o$1x]=0;for(o$1x=103003;o$1x<=103008;o$1x++)r$1l[o$1x]=2;for(o$1x=103009;o$1x<=103011;o$1x++)r$1l[o$1x]=0;for(o$1x=103012;o$1x<=103014;o$1x++)r$1l[o$1x]=2;for(o$1x=103019;o$1x<=103021;o$1x++)r$1l[o$1x]=0;for(o$1x=103022;o$1x<=103024;o$1x++)r$1l[o$1x]=2;for(o$1x=103029;o$1x<=103031;o$1x++)r$1l[o$1x]=0;for(o$1x=103032;o$1x<=103034;o$1x++)r$1l[o$1x]=2;for(o$1x=103065;o$1x<=103068;o$1x++)r$1l[o$1x]=0;for(o$1x=103074;o$1x<=103076;o$1x++)r$1l[o$1x]=0;for(o$1x=103077;o$1x<=103079;o$1x++)r$1l[o$1x]=1;for(o$1x=103080;o$1x<=103082;o$1x++)r$1l[o$1x]=0;for(o$1x=103083;o$1x<=103085;o$1x++)r$1l[o$1x]=2;for(o$1x=103090;o$1x<=103093;o$1x++)r$1l[o$1x]=0;for(o$1x=103097;o$1x<=103099;o$1x++)r$1l[o$1x]=0;for(o$1x=103100;o$1x<=103102;o$1x++)r$1l[o$1x]=2;for(o$1x=103107;o$1x<=103109;o$1x++)r$1l[o$1x]=0;for(o$1x=103110;o$1x<=103112;o$1x++)r$1l[o$1x]=2;for(o$1x=103113;o$1x<=103116;o$1x++)r$1l[o$1x]=0;for(o$1x=103117;o$1x<=103120;o$1x++)r$1l[o$1x]=2;for(o$1x=103153;o$1x<=103157;o$1x++)r$1l[o$1x]=0;for(o$1x=103158;o$1x<=103162;o$1x++)r$1l[o$1x]=2;for(o$1x=103163;o$1x<=103165;o$1x++)r$1l[o$1x]=0;for(o$1x=103166;o$1x<=103168;o$1x++)r$1l[o$1x]=1;for(o$1x=103169;o$1x<=103171;o$1x++)r$1l[o$1x]=2;for(o$1x=103186;o$1x<=103188;o$1x++)r$1l[o$1x]=0;for(o$1x=103189;o$1x<=103191;o$1x++)r$1l[o$1x]=2;for(o$1x=103192;o$1x<=103195;o$1x++)r$1l[o$1x]=0;for(o$1x=103196;o$1x<=103199;o$1x++)r$1l[o$1x]=2;for(o$1x=103200;o$1x<=103224;o$1x++)r$1l[o$1x]=0;for(o$1x=103225;o$1x<=103227;o$1x++)r$1l[o$1x]=1;for(o$1x=103232;o$1x<=103237;o$1x++)r$1l[o$1x]=0;for(o$1x=103238;o$1x<=103243;o$1x++)r$1l[o$1x]=2;for(o$1x=103244;o$1x<=103246;o$1x++)r$1l[o$1x]=0;for(o$1x=103247;o$1x<=103249;o$1x++)r$1l[o$1x]=2;for(o$1x=103254;o$1x<=103256;o$1x++)r$1l[o$1x]=0;for(o$1x=103257;o$1x<=103259;o$1x++)r$1l[o$1x]=2;for(o$1x=103264;o$1x<=103266;o$1x++)r$1l[o$1x]=0;for(o$1x=103267;o$1x<=103269;o$1x++)r$1l[o$1x]=2;for(o$1x=103300;o$1x<=103375;o$1x++)r$1l[o$1x]=0;for(o$1x=103381;o$1x<=103383;o$1x++)r$1l[o$1x]=0;for(o$1x=103384;o$1x<=103386;o$1x++)r$1l[o$1x]=1;for(o$1x=103387;o$1x<=103389;o$1x++)r$1l[o$1x]=0;for(o$1x=103390;o$1x<=103392;o$1x++)r$1l[o$1x]=2;for(o$1x=103397;o$1x<=103399;o$1x++)r$1l[o$1x]=0;for(o$1x=103400;o$1x<=103471;o$1x++)r$1l[o$1x]=2;for(o$1x=103476;o$1x<=103478;o$1x++)r$1l[o$1x]=0;for(o$1x=103479;o$1x<=103481;o$1x++)r$1l[o$1x]=2;for(o$1x=103486;o$1x<=103488;o$1x++)r$1l[o$1x]=0;for(o$1x=103489;o$1x<=103491;o$1x++)r$1l[o$1x]=2;for(o$1x=103492;o$1x<=103495;o$1x++)r$1l[o$1x]=0;for(o$1x=103496;o$1x<=103499;o$1x++)r$1l[o$1x]=2;for(o$1x=103528;o$1x<=103543;o$1x++)r$1l[o$1x]=0;for(o$1x=103544;o$1x<=103548;o$1x++)r$1l[o$1x]=2;for(o$1x=103549;o$1x<=103551;o$1x++)r$1l[o$1x]=0;for(o$1x=103552;o$1x<=103554;o$1x++)r$1l[o$1x]=1;for(o$1x=103555;o$1x<=103557;o$1x++)r$1l[o$1x]=2;for(o$1x=103558;o$1x<=103560;o$1x++)r$1l[o$1x]=0;for(o$1x=103571;o$1x<=103573;o$1x++)r$1l[o$1x]=0;for(o$1x=103574;o$1x<=103576;o$1x++)r$1l[o$1x]=2;for(o$1x=103577;o$1x<=103580;o$1x++)r$1l[o$1x]=0;for(o$1x=103581;o$1x<=103583;o$1x++)r$1l[o$1x]=2;for(o$1x=103595;o$1x<=103694;o$1x++)r$1l[o$1x]=0;for(o$1x=103696;o$1x<=103699;o$1x++)r$1l[o$1x]=0;for(o$1x=103700;o$1x<=103793;o$1x++)r$1l[o$1x]=2;for(o$1x=103794;o$1x<=103872;o$1x++)r$1l[o$1x]=0;for(o$1x=103900;o$1x<=103971;o$1x++)r$1l[o$1x]=2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$2L={102113:!0,102100:!0,3857:!0,3785:!0},_$B={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0},t$1t='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',l$2f=[-20037508.342788905,20037508.342788905],M$C=[-20037508.342787,20037508.342787],d$1F={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:l$2f,origin:M$C,dx:1e-5},102100:{wkTemplate:t$1t,valid:l$2f,origin:M$C,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:l$2f,origin:M$C,dx:1e-5},3857:{wkTemplate:t$1t,valid:l$2f,origin:M$C,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function E$r(e,i){return !t$1T(e)&&!t$1T(i)&&(e===i||(null!=e.wkid||null!=i.wkid?e.wkid===i.wkid||T$o(e)&&T$o(i)||null!=i.latestWkid&&e.wkid===i.latestWkid||null!=e.latestWkid&&i.wkid===e.latestWkid:!(!e.wkt||!i.wkt)&&e.wkt.toUpperCase()===i.wkt.toUpperCase()))}function S$F(e){return I$A(e)&&e.wkid?d$1F[e.wkid]:null}function R$t(e){return !!I$A(e)&&(e.wkid?null==r$1l[e.wkid]:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function o$1w(e){return !(G$j(e)||C$w(e))}function A$p(e){return I$A(e)&&4326===e.wkid}function u$1W(e){return I$A(e)&&4490===e.wkid}function T$o(e){return I$A(e)&&null!=e.wkid&&!0===a$2L[e.wkid]}function k$x(e){return I$A(e)&&32662===e.wkid}function w$U(e){return 104971===e||104905===e}function G$j(e){return I$A(e)&&null!=e.wkid&&w$U(e.wkid)}function P$q(e){return 104903===e}function C$w(e){return I$A(e)&&null!=e.wkid&&P$q(e.wkid)}function s$1W(e){return I$A(e)&&null!=e.wkid&&!0===_$B[e.wkid]}function I$A(r){return r$1K(r)&&(null!=r.wkid&&r.wkid>=2e3||null!=r.wkt)}const c$2Z={wkid:4326,wkt:r$1J(d$1F[4326].wkTemplate,{Central_Meridian:"0.0"})},p$30={wkid:102100,latestWkid:3857},D$q={wkid:32662};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var y$1r;let S$E=y$1r=class extends a$2N{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null;}static fromJSON(e){if(!e)return null;if(e.wkid){if(102100===e.wkid)return y$1r.WebMercator;if(4326===e.wkid)return y$1r.WGS84}const t=new y$1r;return t.read(e),t}normalizeCtorArgs(e){if(e&&"object"==typeof e)return e;return {["string"==typeof e?"wkt":"wkid"]:e}}get isWGS84(){return A$p(this)}get isWebMercator(){return T$o(this)}get isGeographic(){return R$t(this)}get isWrappable(){return s$1W(this)}writeWkt(e,t){this.wkid||(t.wkt=e);}clone(){if(this===y$1r.WGS84)return y$1r.WGS84;if(this===y$1r.WebMercator)return y$1r.WebMercator;const e=new y$1r;return null!=this.wkid?(e.wkid=this.wkid,null!=this.latestWkid&&(e.latestWkid=this.latestWkid),null!=this.vcsWkid&&(e.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(e.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=l$2w(this.imageCoordinateSystem)),e}equals(e){if(null==e)return !1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==e.imageCoordinateSystem)return !1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,o=this.imageCoordinateSystem;return null==t||i?JSON.stringify(o)===JSON.stringify(e.imageCoordinateSystem):r?o.id===t&&o.referenceServiceName===r:o.id===t}return E$r(this,e)}toJSON(e){return this.write(void 0,e)}};S$E.GCS_NAD_1927=null,S$E.WGS84=null,S$E.WebMercator=null,S$E.PlateCarree=null,e$25([d$1T({readOnly:!0})],S$E.prototype,"isWGS84",null),e$25([d$1T({readOnly:!0})],S$E.prototype,"isWebMercator",null),e$25([d$1T({readOnly:!0})],S$E.prototype,"isGeographic",null),e$25([d$1T({readOnly:!0})],S$E.prototype,"isWrappable",null),e$25([d$1T({type:S$J,json:{write:!0}})],S$E.prototype,"latestWkid",void 0),e$25([d$1T({type:S$J,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return {isRequired:null===this.wkt}}}}}}})],S$E.prototype,"wkid",void 0),e$25([d$1T({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return {isRequired:null===this.wkid}}}}}}})],S$E.prototype,"wkt",void 0),e$25([r$1m("wkt"),r$1m("web-scene","wkt")],S$E.prototype,"writeWkt",null),e$25([d$1T({type:S$J,json:{write:!0}})],S$E.prototype,"vcsWkid",void 0),e$25([d$1T({type:S$J,json:{write:!0}})],S$E.prototype,"latestVcsWkid",void 0),e$25([d$1T()],S$E.prototype,"imageCoordinateSystem",void 0),S$E=y$1r=e$25([i$2z("esri.geometry.SpatialReference")],S$E),S$E.prototype.toJSON.isDefaultToJSON=!0,S$E.GCS_NAD_1927=new S$E({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),S$E.WGS84=new S$E(c$2Z),S$E.WebMercator=new S$E(p$30),S$E.PlateCarree=new S$E(D$q),Object.freeze&&(Object.freeze(S$E.GCS_NAD_1927),Object.freeze(S$E.WGS84),Object.freeze(S$E.WebMercator));const k$w=S$E;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function o$1v(o,e,t){let a,c;return void 0===e||Array.isArray(e)?(c=o,t=e,a=[void 0]):(c=e,a=Array.isArray(o)?o:[o]),(o,e)=>{const d=o.constructor.prototype;a.forEach((a=>{const s=y$1y(o,a,c);s.read&&"object"==typeof s.read||(s.read={}),s.read.reader=d[e],t&&(s.read.source=(s.read.source||[]).concat(t));}));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$2Y=class extends a$2N{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=k$w.WGS84;}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,r){if(e instanceof k$w)return e;if(null!=e){const t=new k$w;return t.read(e,r),t}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache");}getCacheValue(e){return this.cache[e]}setCacheValue(e,r){this.cache[e]=r;}};e$25([d$1T()],c$2Y.prototype,"type",void 0),e$25([d$1T({readOnly:!0})],c$2Y.prototype,"cache",null),e$25([d$1T({readOnly:!0})],c$2Y.prototype,"extent",null),e$25([d$1T({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],c$2Y.prototype,"hasM",void 0),e$25([d$1T({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],c$2Y.prototype,"hasZ",void 0),e$25([d$1T({type:k$w,json:{write:!0}})],c$2Y.prototype,"spatialReference",void 0),e$25([o$1v("spatialReference")],c$2Y.prototype,"readSpatialReference",null),c$2Y=e$25([i$2z("esri.geometry.Geometry")],c$2Y);const p$2$=c$2Y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2q(n,r,u,t){var l;(n.x=n.x+r,n.y=n.y+u,null!=t)&&(n.z=(null!=(l=n.z)?l:0)+t);return n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$1s(t,n){const s=t.x-n.x,r=t.y-n.y,a=t.hasZ&&n.hasZ?t.z-n.z:0;return Math.sqrt(s*s+r*r+a*a)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class i$2g{constructor(i,s,t,e){this.semiMajorAxis=i,this.flattening=s,this.outerAtmosphereRimWidth=t;const h=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*h,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=e||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3;}get radius(){return this.semiMajorAxis}}const s$1V=new i$2g(6378137,1/298.257223563,3e5,.006694379990137799),t$1r=new i$2g(3396190,1/169.8944472236118,23e4),e$1D=new i$2g(1737400,0,0);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$1u=57.29577951308232,u$1V=.017453292519943;function l$2e(n){return n*o$1u}function p$2_(n){return n*u$1V}function f$1u(n){return n/s$1V.radius}function c$2X(n){return Math.PI/2-2*Math.atan(Math.exp(-n/s$1V.radius))}function h$1o(n){return null!=n.wkid||null!=n.wkt}const m$1_=[0,0];function x$F(n,t,e,i,r){const s=n,a=r;if(a.spatialReference=e,"x"in s&&"x"in a)[a.x,a.y]=t(s.x,s.y,m$1_,i);else if("xmin"in s&&"xmin"in a)[a.xmin,a.ymin]=t(s.xmin,s.ymin,m$1_,i),[a.xmax,a.ymax]=t(s.xmax,s.ymax,m$1_,i);else if("paths"in s&&"paths"in a||"rings"in s&&"rings"in a){const n="paths"in s?s.paths:s.rings,e=[];let r;for(let s=0;s<n.length;s++){const a=n[s];r=[],e.push(r);for(let n=0;n<a.length;n++)r.push(t(a[n][0],a[n][1],[0,0],i)),a[n].length>2&&r[n].push(a[n][2]),a[n].length>3&&r[n].push(a[n][3]);}"paths"in a?a.paths=e:a.rings=e;}else if("points"in s&&"points"in a){const n=s.points,e=[];for(let r=0;r<n.length;r++)e[r]=t(n[r][0],n[r][1],[0,0],i),n[r].length>2&&e[r].push(n[r][2]),n[r].length>3&&e[r].push(n[r][3]);a.points=e;}return r}function g$10(n,t){const e=n&&(h$1o(n)?n:n.spatialReference),i=t&&(h$1o(t)?t:t.spatialReference);return !(n&&"type"in n&&"mesh"===n.type||t&&"type"in t&&"mesh"===t.type||!e||!i)&&(!!E$r(i,e)||(T$o(i)&&A$p(e)||T$o(e)&&A$p(i)))}function M$B(i,o){if(t$1T(i))return null;const u=i.spatialReference,l=o&&(h$1o(o)?o:o.spatialReference);return g$10(u,l)?E$r(u,l)?l$2w(i):T$o(l)?x$F(i,y$1q,k$w.WebMercator,!1,l$2w(i)):A$p(l)?x$F(i,d$1E,k$w.WGS84,!1,l$2w(i)):null:null}function y$1q(n,t,e=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=p$2_(t);return e[0]=p$2_(n)*s$1V.radius,e[1]=s$1V.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),e}function d$1E(n,t,e=[0,0],r=!1){const s=l$2e(n/s$1V.radius);return e[0]=r?s:s-360*Math.floor((s+180)/360),e[1]=l$2e(Math.PI/2-2*Math.atan(Math.exp(-t/s$1V.radius))),e}function R$s(t,i=!1,r=l$2w(t)){return x$F(t,y$1q,k$w.WebMercator,i,r)}function j$M(t,i=!1,r=l$2w(t)){return x$F(t,d$1E,k$w.WGS84,i,r)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$1Z;const f$1t=[0,0];function g$$(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}const x$E=s$2n.getLogger("esri.geometry.Point");let w$T=m$1Z=class extends p$2${constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point";}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(r)?r:r.clone());}normalizeCtorArgs(e,t,r,s,i){let o;if(Array.isArray(e))o=e,i=t,e=o[0],t=o[1],r=o[2],s=o[3];else if(e&&"object"==typeof e){if(o=e,e=null!=o.x?o.x:o.longitude,t=null!=o.y?o.y:o.latitude,r=o.z,s=o.m,(i=o.spatialReference)&&"esri.geometry.SpatialReference"!==i.declaredClass&&(i=new k$w(i)),null!=o.longitude||null!=o.latitude)if(null==o.longitude)x$E.warn(".longitude=","Latitude was defined without longitude");else if(null==o.latitude)x$E.warn(".latitude=","Longitude was defined without latitude");else if(!o.declaredClass&&i&&i.isWebMercator){const r=y$1q(o.longitude,o.latitude,f$1t);e=r[0],t=r[1];}}else g$$(r)?(i=r,r=null):g$$(s)&&(i=s,s=null);const a={x:e,y:t};return null==a.x&&null!=a.y?x$E.warn(".y=","Y coordinate was defined without an X coordinate"):null==a.y&&null!=a.x&&x$E.warn(".x=","X coordinate was defined without a Y coordinate"),null!=i&&(a.spatialReference=i),null!=r&&(a.z=r),null!=s&&(a.m=s),a}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return void 0!==this.m}set hasM(e){e!==(void 0!==this._get("m"))&&(this._set("m",e?0:void 0),this._set("hasM",e));}get hasZ(){return void 0!==this.z}set hasZ(e){e!==(void 0!==this._get("z"))&&(this._set("z",e?0:void 0),this._set("hasZ",e));}get latitude(){const{spatialReference:e,x:t,y:r}=this;if(e){if(e.isWebMercator)return d$1E(t,r,f$1t)[1];if(e.isGeographic)return r}return null}set latitude(e){const{spatialReference:t,x:r}=this;t&&(t.isWebMercator?this._set("y",y$1q(r,e,f$1t)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e));}get longitude(){const{x:e,y:t,spatialReference:r}=this;if(r){if(r.isWebMercator)return d$1E(e,t,f$1t)[0];if(r.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:r}=this;r&&(r.isWebMercator?this._set("x",y$1q(e,t,f$1t)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e));}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e;}readX(e){return "string"==typeof e?NaN:e}clone(){const e=new m$1Z;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return m$1Z.copy(e,this),this}equals(e){if(!e)return !1;const{x:t,y:r,z:s,m:i,spatialReference:o}=this,{z:a,m:n}=e;let{x:l,y:c,spatialReference:p}=e;if(!o.equals(p))if(o.isWebMercator&&p.isWGS84)[l,c]=y$1q(l,c),p=o;else {if(!o.isWGS84||!p.isWebMercator)return !1;[l,c]=d$1E(l,c),p=o;}return t===l&&r===c&&s===a&&i===n&&o.wkid===p.wkid}offset(e,t,r){return n$2q(this,e,t,r)}normalize(){if(!this.spatialReference)return this;const e=S$F(this.spatialReference);if(!e)return this;let t=this.x;const[r,s]=e.valid,i=2*s;let o;return t>s?(o=Math.ceil(Math.abs(t-s)/i),t-=o*i):t<r&&(o=Math.ceil(Math.abs(t-r)/i),t+=o*i),this._set("x",t),this}distance(e){return t$1s(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};e$25([d$1T({readOnly:!0})],w$T.prototype,"cache",null),e$25([d$1T({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],w$T.prototype,"hasM",null),e$25([d$1T({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],w$T.prototype,"hasZ",null),e$25([d$1T({type:Number})],w$T.prototype,"latitude",null),e$25([d$1T({type:Number})],w$T.prototype,"longitude",null),e$25([d$1T({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),c$35((e=>isNaN(e)?e:a$31(e)))],w$T.prototype,"x",void 0),e$25([r$1m("x")],w$T.prototype,"writeX",null),e$25([o$1v("x")],w$T.prototype,"readX",null),e$25([d$1T({type:Number,json:{write:!0}})],w$T.prototype,"y",void 0),e$25([d$1T({type:Number,json:{write:{overridePolicy(){return {enabled:this.hasZ}}}}})],w$T.prototype,"z",void 0),e$25([d$1T({type:Number,json:{write:{overridePolicy(){return {enabled:this.hasM}}}}})],w$T.prototype,"m",void 0),w$T=m$1Z=e$25([i$2z("esri.geometry.Point")],w$T),w$T.prototype.toJSON.isDefaultToJSON=!0;const b$10=w$T;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$1q=[0,0];function r$1k(t,r){return !!r$1K(r)&&f$1s(t,r.x,r.y,r.z)}function i$2f(n,t){if(!t.points||t.points.length)return !1;for(const r of t.points)if(!u$1U(n,r))return !1;return !0}function o$1t(n,t){const{xmin:r,ymin:i,zmin:o,xmax:u,ymax:e,zmax:c}=t;return n.hasZ&&t.hasZ?f$1s(n,r,i,o)&&f$1s(n,r,e,o)&&f$1s(n,u,e,o)&&f$1s(n,u,i,o)&&f$1s(n,r,i,c)&&f$1s(n,r,e,c)&&f$1s(n,u,e,c)&&f$1s(n,u,i,c):f$1s(n,r,i)&&f$1s(n,r,e)&&f$1s(n,u,e)&&f$1s(n,u,i)}function u$1U(n,t){return f$1s(n,t[0],t[1])}function e$1C(n,t){return f$1s(n,t[0],t[1],t[2])}function f$1s(n,t,r,i){return t>=n.xmin&&t<=n.xmax&&r>=n.ymin&&r<=n.ymax&&(null==i||!n.hasZ||i>=n.zmin&&i<=n.zmax)}function c$2W(n,r){return t$1q[1]=r.y,t$1q[0]=r.x,m$1Y(n,t$1q)}function m$1Y(n,t){return s$1U(n.rings,t)}function s$1U(n,t){if(!n)return !1;if(x$D(n))return a$2K(!1,n,t);let r=!1;for(let i=0,o=n.length;i<o;i++)r=a$2K(r,n[i],t);return r}function x$D(n){return !Array.isArray(n[0][0])}function a$2K(n,t,r){const[i,o]=r;let u=n,e=0;for(let f=0,c=t.length;f<c;f++){e++,e===c&&(e=0);const[n,r]=t[f],[m,s]=t[e];(r<o&&s>=o||s<o&&r>=o)&&n+(o-r)/(s-r)*(m-n)<i&&(u=!u);}return u}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$2e(t,e){return r$1k(t,e)}function o$1s(n,t){const e=n.hasZ&&t.hasZ;let r,i,o;if(n.xmin<=t.xmin){if(r=t.xmin,n.xmax<r)return !1}else if(r=n.xmin,t.xmax<r)return !1;if(n.ymin<=t.ymin){if(i=t.ymin,n.ymax<i)return !1}else if(i=n.ymin,t.ymax<i)return !1;if(e&&t.hasZ)if(n.zmin<=t.zmin){if(o=t.zmin,n.zmax<o)return !1}else if(o=n.zmin,t.zmax<o)return !1;return !0}function f$1r(n,t){const{points:i,hasZ:o}=t,f=o?e$1C:u$1U;for(const e of i)if(f(n,e))return !0;return !1}const s$1T=[0,0],c$2V=[0,0],m$1X=[0,0],u$1T=[0,0],l$2d=[s$1T,c$2V,m$1X,u$1T],a$2J=[[m$1X,s$1T],[s$1T,c$2V],[c$2V,u$1T],[u$1T,m$1X]];function x$C(n,r){s$1T[0]=n.xmin,s$1T[1]=n.ymax,c$2V[0]=n.xmax,c$2V[1]=n.ymax,m$1X[0]=n.xmin,m$1X[1]=n.ymin,u$1T[0]=n.xmax,u$1T[1]=n.ymin;for(const e of l$2d)if(m$1Y(r,e))return !0;for(const t of r.rings){if(!t.length)continue;let r=t[0];if(u$1U(n,r))return !0;for(let i=1;i<t.length;i++){const o=t[i];if(u$1U(n,o)||p$2Z(r,o,a$2J))return !0;r=o;}}return !1}function y$1p(n,t){s$1T[0]=n.xmin,s$1T[1]=n.ymax,c$2V[0]=n.xmax,c$2V[1]=n.ymax,m$1X[0]=n.xmin,m$1X[1]=n.ymin,u$1T[0]=n.xmax,u$1T[1]=n.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let t=i[0];if(u$1U(n,t))return !0;for(let r=1;r<i.length;r++){const o=i[r];if(u$1U(n,o)||p$2Z(t,o,a$2J))return !0;t=o;}}return !1}const h$1n=[0,0];function g$_(n){for(let t=0;t<n.length;t++){const e=n[t];for(let i=0;i<e.length-1;i++){const r=e[i],o=e[i+1];for(let e=t+1;e<n.length;e++)for(let t=0;t<n[e].length-1;t++){const i=n[e][t],f=n[e][t+1];if(z$n(r,o,i,f,h$1n)&&!(h$1n[0]===r[0]&&h$1n[1]===r[1]||h$1n[0]===i[0]&&h$1n[1]===i[1]||h$1n[0]===o[0]&&h$1n[1]===o[1]||h$1n[0]===f[0]&&h$1n[1]===f[1]))return !0}}const r=e.length;if(!(r<=4))for(let n=0;n<r-3;n++){let t=r-1;0===n&&(t=r-2);const i=e[n],o=e[n+1];for(let r=n+2;r<t;r++){const n=e[r],t=e[r+1];if(z$n(i,o,n,t,h$1n)&&!(h$1n[0]===i[0]&&h$1n[1]===i[1]||h$1n[0]===n[0]&&h$1n[1]===n[1]||h$1n[0]===o[0]&&h$1n[1]===o[1]||h$1n[0]===t[0]&&h$1n[1]===t[1]))return !0}}}return !1}function p$2Z(n,t,e){for(let r=0;r<e.length;r++)if(z$n(n,t,e[r][0],e[r][1]))return !0;return !1}function z$n(n,t,e,r,i){const[o,f]=n,[s,c]=t,[m,u]=e,[l,a]=r,x=l-m,y=o-m,h=s-o,g=a-u,p=f-u,z=c-f,G=g*h-x*z;if(0===G)return !1;const Z=(x*p-g*y)/G,P=(h*p-z*y)/G;return Z>=0&&Z<=1&&P>=0&&P<=1&&(i&&(i[0]=o+Z*(s-o),i[1]=f+Z*(c-f)),!0)}function G$i(n){switch(n){case"esriGeometryEnvelope":case"extent":return o$1s;case"esriGeometryMultipoint":case"multipoint":return f$1r;case"esriGeometryPoint":case"point":return i$2e;case"esriGeometryPolygon":case"polygon":return x$C;case"esriGeometryPolyline":case"polyline":return y$1p}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$1S;function f$1q(t){return t&&("esri.geometry.SpatialReference"===t.declaredClass||null!=t.wkid)}function d$1D(t,i,e){return null==i?e:null==e?i:t(i,e)}let z$m=u$1S=class extends p$2${constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0;}normalizeCtorArgs(t,i,e,s,n){return f$1q(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:"object"==typeof t?(t.spatialReference=null==t.spatialReference?k$w.WGS84:t.spatialReference,t):{xmin:t,ymin:i,xmax:e,ymax:s,spatialReference:null==n?k$w.WGS84:n}}static fromBounds(t,i){return new u$1S({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:i})}static fromPoint(t){return new u$1S({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new b$10({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return null!=this.mmin&&null!=this.mmax}get hasZ(){return null!=this.zmin&&null!=this.zmax}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const i=this.center;return null!=t.z&&this.hasZ?this.offset(t.x-i.x,t.y-i.y,t.z-i.z):this.offset(t.x-i.x,t.y-i.y)}clone(){const t=new u$1S;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,null!=this.zmin&&(t.zmin=this.zmin,t.zmax=this.zmax),null!=this.mmin&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return !1;const i=this.spatialReference,e=t.spatialReference;return i&&e&&!i.equals(e)&&g$10(i,e)&&(t=i.isWebMercator?R$s(t):j$M(t,!0)),"point"===t.type?r$1k(this,t):"extent"===t.type&&o$1t(this,t)}equals(t){if(this===t)return !0;if(t$1T(t))return !1;const e=this.spatialReference,s=t.spatialReference;return e&&s&&!e.equals(s)&&g$10(e,s)&&(t=e.isWebMercator?R$s(t):j$M(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const i=.5*(1-t),e=this.width*i,s=this.height*i;if(this.xmin+=e,this.ymin+=s,this.xmax-=e,this.ymax-=s,this.hasZ){const t=(this.zmax-this.zmin)*i;this.zmin+=t,this.zmax-=t;}if(this.hasM){const t=(this.mmax-this.mmin)*i;this.mmin+=t,this.mmax-=t;}return this}intersects(t){if(t$1T(t))return !1;"mesh"===t.type&&(t=t.extent);const e=this.spatialReference,s=t.spatialReference;e&&s&&!e.equals(s)&&g$10(e,s)&&(t=e.isWebMercator?R$s(t):j$M(t,!0));return G$i(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,i,e){return this.xmin+=t,this.ymin+=i,this.xmax+=t,this.ymax+=i,null!=e&&(this.zmin+=e,this.zmax+=e),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=d$1D(Math.min,this.zmin,t.zmin),this.zmax=d$1D(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=d$1D(Math.min,this.mmin,t.mmin),this.mmax=d$1D(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t$1T(t)||!this.intersects(t)?null:(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=d$1D(Math.max,this.zmin,t.zmin),this.zmax=d$1D(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=d$1D(Math.max,this.mmin,t.mmin),this.mmax=d$1D(Math.min,this.mmax,t.mmax)),this)}toJSON(t){return this.write({},t)}_shiftCM(t=S$F(this.spatialReference)){if(!t||!this.spatialReference)return this;const i=this.spatialReference,s=this._getCM(t);if(s){const n=i.isWebMercator?j$M(s):s;this.xmin-=s.x,this.xmax-=s.x,i.isWebMercator||(n.x=this._normalizeX(n.x,t).x),this.spatialReference=new k$w(r$1J(i.isWGS84?t.altTemplate:t.wkTemplate,{Central_Meridian:n.x}));}return this}_getCM(t){let i=null;const[e,s]=t.valid,n=this.xmin,m=this.xmax;return n>=e&&n<=s&&(m>=e&&m<=s)||(i=this.center),i}_normalize(t,i,e){const s=this.spatialReference;if(!s)return this;if(!(e=e||S$F(s)))return this;const n=this._getParts(e).map((t=>t.extent));if(n.length<2)return n[0]||this;if(n.length>2)return t?this._shiftCM(e):this.set({xmin:e.valid[0],xmax:e.valid[1]});if(t)return this._shiftCM(e);if(i)return n;let m=!0,r=!0;return n.forEach((t=>{t.hasZ||(m=!1),t.hasM||(r=!1);})),{rings:n.map((t=>{const i=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];if(m){const e=(t.zmax-t.zmin)/2;for(let t=0;t<i.length;t++)i[t].push(e);}if(r){const e=(t.mmax-t.mmin)/2;for(let t=0;t<i.length;t++)i[t].push(e);}return i})),hasZ:m,hasM:r,spatialReference:s}}_getParts(t){let i=this.cache._parts;if(!i){i=[];const{ymin:e,ymax:s,spatialReference:n}=this,m=this.width,r=this.xmin,a=this.xmax;let h;t=t||S$F(n);const[o,x]=t.valid;h=this._normalizeX(this.xmin,t);const p=h.x,c=h.frameId;h=this._normalizeX(this.xmax,t);const y=h.x,f=h.frameId,d=p===y&&m>0;if(m>2*x){const t=new u$1S(r<a?p:y,e,x,s,n),m=new u$1S(o,e,r<a?y:p,s,n),h=new u$1S(0,e,x,s,n),l=new u$1S(o,e,0,s,n),d=[],z=[];t.contains(h)&&d.push(c),t.contains(l)&&z.push(c),m.contains(h)&&d.push(f),m.contains(l)&&z.push(f);for(let i=c+1;i<f;i++)d.push(i),z.push(i);i.push({extent:t,frameIds:[c]},{extent:m,frameIds:[f]},{extent:h,frameIds:d},{extent:l,frameIds:z});}else p>y||d?i.push({extent:new u$1S(p,e,x,s,n),frameIds:[c]},{extent:new u$1S(o,e,y,s,n),frameIds:[f]}):i.push({extent:new u$1S(p,e,y,s,n),frameIds:[c]});this.cache._parts=i;}const e=this.hasZ,s=this.hasM;if(e||s){const t={};e&&(t.zmin=this.zmin,t.zmax=this.zmax),s&&(t.mmin=this.mmin,t.mmax=this.mmax);for(let e=0;e<i.length;e++)i[e].extent.set(t);}return i}_normalizeX(t,i){const[e,s]=i.valid,n=2*s;let m,r=0;return t>s?(m=Math.ceil(Math.abs(t-s)/n),t-=m*n,r=m):t<e&&(m=Math.ceil(Math.abs(t-e)/n),t+=m*n,r=-m),{x:t,frameId:r}}};e$25([d$1T({readOnly:!0})],z$m.prototype,"cache",null),e$25([d$1T({readOnly:!0})],z$m.prototype,"center",null),e$25([d$1T({readOnly:!0})],z$m.prototype,"extent",null),e$25([d$1T({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],z$m.prototype,"hasM",null),e$25([d$1T({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],z$m.prototype,"hasZ",null),e$25([d$1T({readOnly:!0})],z$m.prototype,"height",null),e$25([d$1T({readOnly:!0})],z$m.prototype,"width",null),e$25([d$1T({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],z$m.prototype,"xmin",void 0),e$25([d$1T({type:Number,json:{write:!0}})],z$m.prototype,"ymin",void 0),e$25([d$1T({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return {enabled:this.hasM}}}}})],z$m.prototype,"mmin",void 0),e$25([d$1T({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return {enabled:this.hasZ}}}}})],z$m.prototype,"zmin",void 0),e$25([d$1T({type:Number,json:{write:!0}})],z$m.prototype,"xmax",void 0),e$25([d$1T({type:Number,json:{write:!0}})],z$m.prototype,"ymax",void 0),e$25([d$1T({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return {enabled:this.hasM}}}}})],z$m.prototype,"mmax",void 0),e$25([d$1T({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return {enabled:this.hasZ}}}}})],z$m.prototype,"zmax",void 0),z$m=u$1S=e$25([i$2z("esri.geometry.Extent")],z$m),z$m.prototype.toJSON.isDefaultToJSON=!0;const M$A=z$m;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$1R;const m$1W=new o$1J({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let c$2U=u$1R=class extends p$3a{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1;}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){"asc"!==t&&"desc"!==t||this._set("sortOrder",t);}clone(){return new u$1R({categories:this.categories?l$2w(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,r){let e,s;if(this.categories&&(e=this.categories.map((t=>Array.isArray(t)?JSON.stringify(t):t))),this.extent){const t=M$B(this.extent,k$w.WGS84);r$1K(t)&&(s=`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`);}let i=this.query;!this.disableExtraQuery&&t.extraQuery&&(i="("+i+")"+t.extraQuery);const a={categories:e,bbox:s,q:i,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(a.sortField=this.sortField.split(",").map((t=>m$1W.toJSON(t.trim()))).join(","),a.sortOrder=this.sortOrder),{query:{...r,...a}}}};e$25([d$1T()],c$2U.prototype,"categories",void 0),e$25([d$1T()],c$2U.prototype,"disableExtraQuery",void 0),e$25([d$1T({type:M$A})],c$2U.prototype,"extent",void 0),e$25([d$1T()],c$2U.prototype,"filter",void 0),e$25([d$1T()],c$2U.prototype,"num",void 0),e$25([d$1T()],c$2U.prototype,"query",void 0),e$25([d$1T()],c$2U.prototype,"sortField",void 0),e$25([d$1T()],c$2U.prototype,"sortOrder",null),e$25([d$1T()],c$2U.prototype,"start",void 0),c$2U=u$1R=e$25([i$2z("esri.portal.PortalQueryParams")],c$2U);const d$1C=c$2U;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$1B=class extends p$3a{constructor(r){super(r),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null;}};e$25([d$1T()],e$1B.prototype,"nextQueryParams",void 0),e$25([d$1T()],e$1B.prototype,"queryParams",void 0),e$25([d$1T()],e$1B.prototype,"results",void 0),e$25([d$1T()],e$1B.prototype,"total",void 0),e$1B=e$25([i$2z("esri.portal.PortalQueryResult")],e$1B);const p$2Y=e$1B;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$2X=class extends a$2N{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null;}get url(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new s$2l("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};e$25([d$1T({type:Date})],p$2X.prototype,"created",void 0),e$25([d$1T()],p$2X.prototype,"id",void 0),e$25([d$1T()],p$2X.prototype,"portal",void 0),e$25([d$1T()],p$2X.prototype,"title",void 0),e$25([d$1T({readOnly:!0})],p$2X.prototype,"url",null),e$25([d$1T()],p$2X.prototype,"username",void 0),p$2X=e$25([i$2z("esri.portal.PortalFolder")],p$2X);const l$2c=p$2X;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$2b=class extends a$2N{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null;}get thumbnailUrl(){const t=this.url,r=this.thumbnail;return t&&r?this.portal._normalizeUrl(`${t}/info/${r}?f=json`):null}get url(){const t=this.get("portal.restUrl");return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal._request(this.url+"/categorySchema",t).then((r=>{const e=r.categorySchema||[];return e.some((t=>"contentCategorySetsGroupQuery.LivingAtlas"===t.source))?this._fetchCategorySchemaSet("LivingAtlas",t):e}))}fetchMembers(t){return this.portal._request(this.url+"/users",t)}getThumbnailUrl(t){let r=this.thumbnailUrl;return r&&t&&(r+=`&w=${t}`),r}toJSON(){throw new s$2l("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(t,r){let e=b$14(d$1C,t);return parseFloat(this.portal.currentVersion)>5?(e=e||new d$1C,this.portal._queryPortal(`/content/groups/${this.id}/search`,e,"PortalItem",r)):(e=e?e.clone():new d$1C,e.query="group:"+this.id+(e.query?" "+e.query:""),this.portal.queryItems(e,r))}_fetchCategorySchemaSet(t,e){return this.portal._fetchSelf(this.portal.authMode,!0,e).then((t=>{const o=t.contentCategorySetsGroupQuery;if(o){const t=new d$1C;return t.disableExtraQuery=!0,t.num=1,t.query=o,this.portal.queryGroups(t,e)}throw new s$2l("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((o=>{if(o.total){const r=o.results[0],s=new d$1C;return s.num=1,s.query=`typekeywords:"${t}"`,r.queryItems(s,e)}throw new s$2l("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((t=>{if(t.total){return t.results[0].fetchData("json",e).then((t=>{const r=t&&t.categorySchema;return r&&r.length?r:[]}))}return []}))}};e$25([d$1T()],l$2b.prototype,"access",void 0),e$25([d$1T({type:Date})],l$2b.prototype,"created",void 0),e$25([d$1T()],l$2b.prototype,"description",void 0),e$25([d$1T()],l$2b.prototype,"id",void 0),e$25([d$1T()],l$2b.prototype,"isInvitationOnly",void 0),e$25([d$1T({type:Date})],l$2b.prototype,"modified",void 0),e$25([d$1T()],l$2b.prototype,"owner",void 0),e$25([d$1T()],l$2b.prototype,"portal",void 0),e$25([d$1T()],l$2b.prototype,"snippet",void 0),e$25([d$1T()],l$2b.prototype,"sortField",void 0),e$25([d$1T()],l$2b.prototype,"sortOrder",void 0),e$25([d$1T()],l$2b.prototype,"tags",void 0),e$25([d$1T()],l$2b.prototype,"thumbnail",void 0),e$25([d$1T({readOnly:!0})],l$2b.prototype,"thumbnailUrl",null),e$25([d$1T()],l$2b.prototype,"title",void 0),e$25([d$1T({readOnly:!0})],l$2b.prototype,"url",null),l$2b=e$25([i$2z("esri.portal.PortalGroup")],l$2b);const p$2W=l$2b;

const PortalGroup = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': p$2W
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$2d;let u$1Q=i$2d=class extends a$2N{constructor(...t){super(...t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null;}get thumbnailUrl(){const t=this.url,r=this.thumbnail;return t&&r?this.portal._normalizeUrl(`${t}/info/${r}?f=json`):null}get userContentUrl(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}`:null}get url(){const t=this.get("portal.restUrl");return t?`${t}/community/users/${this.username}`:null}addItem(t){const r=t&&t.item,e=t&&t.data,o=t&&t.folder,s={method:"post"};r&&(s.query=r.createPostQuery(),null!=e&&("string"==typeof e?s.query.text=e:"object"==typeof e&&(s.query.text=JSON.stringify(e))));let l=this.userContentUrl;return o&&(l+="/"+("string"==typeof o?o:o.id)),this.portal._request(l+"/addItem",s).then((t=>(r.id=t.id,r.portal=this.portal,r.loaded?r.reload():r.load())))}deleteItem(t){let r=this.userContentUrl;return t.ownerFolder&&(r+="/"+t.ownerFolder),this.portal._request(r+`/items/${t.id}/delete`,{method:"post"}).then((()=>{t.id=null,t.portal=null;}))}deleteItems(t){const r=this.userContentUrl+"/deleteItems",e=t.map((t=>t.id));if(e.length){const o={method:"post",query:{items:e.join(",")}};return this.portal._request(r,o).then((()=>{t.forEach((t=>{t.id=null,t.portal=null;}));}))}return Promise.resolve(void 0)}fetchFolders(){const t={query:{num:1}};return this.portal._request(this.userContentUrl,t).then((t=>{let r;return r=t&&t.folders?t.folders.map((t=>{const r=l$2c.fromJSON(t);return r.portal=this.portal,r})):[],r}))}fetchGroups(){return this.portal._request(this.url).then((t=>{let r;return r=t&&t.groups?t.groups.map((t=>{const r=p$2W.fromJSON(t);return r.portal=this.portal,r})):[],r}))}fetchItems(t){t||(t={});let r,e=this.userContentUrl;return t.folder&&(e+="/"+t.folder.id),Promise.resolve().then(function () { return PortalItem; }).then((({default:o})=>{r=o;const s={folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"};return this.portal._request(e,{query:s})})).then((t=>{let e;return t&&t.items?(e=t.items.map((t=>{const e=r.fromJSON(t);return e.portal=this.portal,e})),Promise.all(e.map((t=>t.load()))).catch((t=>t)).then((()=>({items:e,nextStart:t.nextStart,total:t.total})))):{items:[],nextStart:-1,total:0}}))}fetchTags(){return this.portal._request(this.url+"/tags").then((t=>t.tags))}getThumbnailUrl(t){let r=this.thumbnailUrl;return r&&t&&(r+=`&w=${t}`),r}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new p$2W({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new s$2l("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new s$2l("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const r=new i$2d;return r.sourceJSON=t,r.read(t),r}};e$25([d$1T()],u$1Q.prototype,"access",void 0),e$25([d$1T({type:Date})],u$1Q.prototype,"created",void 0),e$25([d$1T()],u$1Q.prototype,"culture",void 0),e$25([d$1T()],u$1Q.prototype,"description",void 0),e$25([d$1T()],u$1Q.prototype,"email",void 0),e$25([d$1T()],u$1Q.prototype,"favGroupId",void 0),e$25([d$1T()],u$1Q.prototype,"fullName",void 0),e$25([d$1T({type:Date})],u$1Q.prototype,"modified",void 0),e$25([d$1T()],u$1Q.prototype,"orgId",void 0),e$25([d$1T()],u$1Q.prototype,"portal",void 0),e$25([d$1T()],u$1Q.prototype,"preferredView",void 0),e$25([d$1T()],u$1Q.prototype,"privileges",void 0),e$25([d$1T()],u$1Q.prototype,"region",void 0),e$25([d$1T()],u$1Q.prototype,"role",void 0),e$25([d$1T()],u$1Q.prototype,"roleId",void 0),e$25([d$1T()],u$1Q.prototype,"sourceJSON",void 0),e$25([d$1T()],u$1Q.prototype,"thumbnail",void 0),e$25([d$1T({readOnly:!0})],u$1Q.prototype,"thumbnailUrl",null),e$25([d$1T()],u$1Q.prototype,"units",void 0),e$25([d$1T({readOnly:!0})],u$1Q.prototype,"userContentUrl",null),e$25([d$1T({readOnly:!0})],u$1Q.prototype,"url",null),e$25([d$1T()],u$1Q.prototype,"username",void 0),e$25([d$1T()],u$1Q.prototype,"userType",void 0),u$1Q=i$2d=e$25([i$2z("esri.portal.PortalUser")],u$1Q);const p$2V=u$1Q;

const PortalUser = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': p$2V
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var w$S;let j$L;const Q$c={PortalGroup:()=>Promise.resolve().then(function () { return PortalGroup; }),PortalItem:()=>Promise.resolve().then(function () { return PortalItem; }),PortalUser:()=>Promise.resolve().then(function () { return PortalUser; })};let C$v=w$S=class extends(i$2i(m$1$)){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=t$1P.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null;}normalizeCtorArgs(e){return "string"==typeof e?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null);}readAuthorizedCrossOriginDomains(e){if(e)for(const r of e)-1===t$1P.request.trustedServers.indexOf(r)&&t$1P.request.trustedServers.push(r);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return !!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest";}return e}get stylesGroupQuery(){return r$1G(s$2n.getLogger(this.declaredClass),"stylesGroupQuery",{replacement:"stylesGroupQuery3d",version:"4.21"}),this.stylesGroupQuery3d}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e?e.toLowerCase():e}readUser(e){let t=null;return e&&(t=p$2V.fromJSON(e),t.portal=this),t}load(e){const t=Promise.resolve().then(function () { return Basemap; }).then((({default:t})=>{h$1E(e),j$L=t;})).then((()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e))).then((e=>{if(n$2R){const e=n$2R;this.credential=e.findCredential(this.restUrl),this.credential||this.authMode!==w$S.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=e.on("credential-create",(()=>{e.findCredential(this.restUrl)&&this._signIn();})));}this.sourceJSON=e,this.read(e);}));return this.addResolvingPromise(t),Promise.resolve(this)}async createClosestFacilityTask(){t$1L(s$2n.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/closestFacility",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("closestFacility");return new((await import('./ClosestFacilityTask.js')).default)(e)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await import('./ElevationLayer.js')).default;return e?e.map((e=>new t({id:e.id,url:e.url}))):[]}async createGeometryService(){t$1L(s$2n.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/geometryService",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("geometry");return new((await import('./GeometryService.js')).default)({url:e})}async createPrintTask(){t$1L(s$2n.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/print",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("printTask");return new((await import('./PrintTask.js')).default)(e)}async createRouteTask(){t$1L(s$2n.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/route",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("route");return new((await import('./RouteTask.js')).default)(e)}async createServiceAreaTask(){t$1L(s$2n.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/serviceArea",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("serviceArea");return new((await import('./ServiceAreaTask.js')).default)(e)}fetchBasemaps(e,r){const o=new d$1C;return o.query=e||(t$1P.apiKey&&r$1H(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),o.disableExtraQuery=!0,this.queryGroups(o,r).then((e=>{if(o.num=100,o.query='type:"Web Map" -type:"Web Application"',e.total){const t=e.results[0];return o.sortField=t.sortField||"name",o.sortOrder=t.sortOrder||"desc",t.queryItems(o,r)}return null})).then((e=>{let t;return t=e&&e.total?e.results.filter((e=>"Web Map"===e.type)).map((e=>new j$L({portalItem:e}))):[],t}))}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then((e=>e.categorySchema)):p$3j(e)?Promise.reject(m$2e()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new d$1C;if(r.num=100,r.sortField="title",t&&t.length){const o=[];for(const e of t)o.push(`(title:"${e.title}" AND owner:${e.owner})`);return r.query=o.join(" OR "),this.queryGroups(r,e).then((e=>e.results))}return p$3j(e)?Promise.reject(m$2e()):Promise.resolve([])}fetchRegions(e){const t=this.user&&this.user.culture||this.culture||i$2w();return this._request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}static getDefault(){return w$S._default&&!w$S._default.destroyed||(w$S._default=new w$S),w$S._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new s$2l("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new w$S({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new s$2l("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new s$2l("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,r){const o=this.restUrl+"/portals/self",s={authMode:e,query:{culture:i$2w().toLowerCase()},...r};return "auto"===s.authMode&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this._request(o,s)}_queryPortal(e,t,r,o){const s=b$14(d$1C,t),i=t=>this._request(this.restUrl+e,{...s.toRequestOptions(this),...o}).then((e=>{const r=s.clone();return r.start=e.nextStart,new p$2Y({nextQueryParams:r,queryParams:s,total:e.total,results:w$S._resultsToTypedArray(t,{portal:this},e,o)})})).then((e=>Promise.all(e.results.map((t=>"function"==typeof t.when?t.when():e))).then((()=>e),(t=>(b$17(t),e)))));return r&&Q$c[r]?Q$c[r]().then((({default:e})=>(h$1E(o),i(e)))):i()}_signIn(){if(this.authMode===w$S.AUTH_MODE_ANONYMOUS)return Promise.reject(new s$2l("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const e=e=>Promise.resolve().then((()=>"not-loaded"===this.loadStatus?(e||(this.authMode="immediate"),this.load().then((()=>null))):"loading"===this.loadStatus?this.load().then((()=>this.credential?null:(this.credential=e,this._fetchSelf("immediate")))):this.user&&this.credential===e?null:(this.credential=e,this._fetchSelf("immediate")))).then((e=>{e&&(this.sourceJSON=e,this.read(e));}));return n$2R?n$2R.getCredential(this.restUrl).then((t=>e(t))):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.indexOf("?")>-1?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,r){return this._request(e,t).then((e=>{const t=w$S._resultsToTypedArray(r,{portal:this},e);return Promise.all(t.map((t=>"function"==typeof t.when?t.when():e))).then((()=>t),(()=>t))}))}_readBasemap(e){if(e){const t=j$L.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const r={f:"json",...t.query},{authMode:s=(this.authMode===w$S.AUTH_MODE_ANONYMOUS?"anonymous":"auto"),body:i=null,cacheBust:a=!1,method:l="auto",responseType:n="json",signal:u}=t,p={authMode:s,body:i,cacheBust:a,method:l,query:r,responseType:n,timeout:0,signal:u};return E$v(this._normalizeSSL(e),p).then((e=>e.data))}static _resultsToTypedArray(e,t,r,o){let s;if(r){const i=r$1K(o)?o.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(s=s.map((r=>{const o=Object.assign(e?e.fromJSON(r):r,t);return "function"==typeof o.load&&o.load(i),o})));}else s=[];return s}};C$v.AUTH_MODE_ANONYMOUS="anonymous",C$v.AUTH_MODE_AUTO="auto",C$v.AUTH_MODE_IMMEDIATE="immediate",e$25([d$1T()],C$v.prototype,"access",void 0),e$25([d$1T()],C$v.prototype,"allSSL",void 0),e$25([d$1T()],C$v.prototype,"authMode",void 0),e$25([d$1T()],C$v.prototype,"authorizedCrossOriginDomains",void 0),e$25([o$1v("authorizedCrossOriginDomains")],C$v.prototype,"readAuthorizedCrossOriginDomains",null),e$25([d$1T()],C$v.prototype,"basemapGalleryGroupQuery",void 0),e$25([d$1T()],C$v.prototype,"bingKey",void 0),e$25([d$1T()],C$v.prototype,"canListApps",void 0),e$25([d$1T()],C$v.prototype,"canListData",void 0),e$25([d$1T()],C$v.prototype,"canListPreProvisionedItems",void 0),e$25([d$1T()],C$v.prototype,"canProvisionDirectPurchase",void 0),e$25([d$1T()],C$v.prototype,"canSearchPublic",void 0),e$25([d$1T()],C$v.prototype,"canShareBingPublic",void 0),e$25([d$1T()],C$v.prototype,"canSharePublic",void 0),e$25([d$1T()],C$v.prototype,"canSignInArcGIS",void 0),e$25([d$1T()],C$v.prototype,"canSignInIDP",void 0),e$25([d$1T()],C$v.prototype,"colorSetsGroupQuery",void 0),e$25([d$1T()],C$v.prototype,"commentsEnabled",void 0),e$25([d$1T({type:Date})],C$v.prototype,"created",void 0),e$25([d$1T()],C$v.prototype,"credential",void 0),e$25([d$1T()],C$v.prototype,"culture",void 0),e$25([d$1T()],C$v.prototype,"currentVersion",void 0),e$25([d$1T()],C$v.prototype,"customBaseUrl",void 0),e$25([d$1T()],C$v.prototype,"defaultBasemap",void 0),e$25([o$1v("defaultBasemap")],C$v.prototype,"readDefaultBasemap",null),e$25([d$1T()],C$v.prototype,"defaultDevBasemap",void 0),e$25([o$1v("defaultDevBasemap")],C$v.prototype,"readDefaultDevBasemap",null),e$25([d$1T({type:M$A})],C$v.prototype,"defaultExtent",void 0),e$25([d$1T()],C$v.prototype,"defaultVectorBasemap",void 0),e$25([o$1v("defaultVectorBasemap")],C$v.prototype,"readDefaultVectorBasemap",null),e$25([d$1T()],C$v.prototype,"description",void 0),e$25([d$1T()],C$v.prototype,"devBasemapGalleryGroupQuery",void 0),e$25([d$1T()],C$v.prototype,"eueiEnabled",void 0),e$25([d$1T({readOnly:!0})],C$v.prototype,"extraQuery",null),e$25([d$1T()],C$v.prototype,"featuredGroups",void 0),e$25([d$1T()],C$v.prototype,"featuredItemsGroupQuery",void 0),e$25([d$1T()],C$v.prototype,"galleryTemplatesGroupQuery",void 0),e$25([d$1T()],C$v.prototype,"livingAtlasGroupQuery",void 0),e$25([d$1T()],C$v.prototype,"hasCategorySchema",void 0),e$25([d$1T()],C$v.prototype,"helpBase",void 0),e$25([d$1T()],C$v.prototype,"helperServices",void 0),e$25([d$1T()],C$v.prototype,"helpMap",void 0),e$25([d$1T()],C$v.prototype,"homePageFeaturedContent",void 0),e$25([d$1T()],C$v.prototype,"homePageFeaturedContentCount",void 0),e$25([d$1T()],C$v.prototype,"httpPort",void 0),e$25([d$1T()],C$v.prototype,"httpsPort",void 0),e$25([d$1T()],C$v.prototype,"id",void 0),e$25([d$1T()],C$v.prototype,"ipCntryCode",void 0),e$25([d$1T({readOnly:!0})],C$v.prototype,"isOrganization",null),e$25([d$1T()],C$v.prototype,"isPortal",void 0),e$25([d$1T()],C$v.prototype,"isReadOnly",void 0),e$25([d$1T()],C$v.prototype,"layerTemplatesGroupQuery",void 0),e$25([d$1T()],C$v.prototype,"maxTokenExpirationMinutes",void 0),e$25([d$1T({type:Date})],C$v.prototype,"modified",void 0),e$25([d$1T()],C$v.prototype,"name",void 0),e$25([d$1T()],C$v.prototype,"portalHostname",void 0),e$25([d$1T()],C$v.prototype,"portalMode",void 0),e$25([d$1T()],C$v.prototype,"portalProperties",void 0),e$25([d$1T()],C$v.prototype,"region",void 0),e$25([d$1T({readOnly:!0})],C$v.prototype,"restUrl",null),e$25([d$1T()],C$v.prototype,"rotatorPanels",void 0),e$25([d$1T()],C$v.prototype,"showHomePageDescription",void 0),e$25([d$1T()],C$v.prototype,"sourceJSON",void 0),e$25([d$1T()],C$v.prototype,"staticImagesUrl",void 0),e$25([d$1T({readOnly:!0,json:{read:!1}})],C$v.prototype,"stylesGroupQuery",null),e$25([d$1T({json:{name:"2DStylesGroupQuery"}})],C$v.prototype,"stylesGroupQuery2d",void 0),e$25([d$1T({json:{name:"stylesGroupQuery"}})],C$v.prototype,"stylesGroupQuery3d",void 0),e$25([d$1T()],C$v.prototype,"supportsHostedServices",void 0),e$25([d$1T()],C$v.prototype,"symbolSetsGroupQuery",void 0),e$25([d$1T()],C$v.prototype,"templatesGroupQuery",void 0),e$25([d$1T()],C$v.prototype,"thumbnail",void 0),e$25([d$1T({readOnly:!0})],C$v.prototype,"thumbnailUrl",null),e$25([d$1T()],C$v.prototype,"units",void 0),e$25([d$1T()],C$v.prototype,"url",void 0),e$25([d$1T()],C$v.prototype,"urlKey",void 0),e$25([o$1v("urlKey")],C$v.prototype,"readUrlKey",null),e$25([d$1T()],C$v.prototype,"user",void 0),e$25([o$1v("user")],C$v.prototype,"readUser",null),e$25([d$1T()],C$v.prototype,"useStandardizedQuery",void 0),e$25([d$1T()],C$v.prototype,"useVectorBasemaps",void 0),e$25([d$1T()],C$v.prototype,"vectorBasemapGalleryGroupQuery",void 0),C$v=w$S=e$25([i$2z("esri.portal.Portal")],C$v);const B$i=C$v;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h$1m=s$2n.getLogger("esri.portal.PortalItemResource");let n$2p=class extends p$3a{constructor(t){super(t),this.portalItem=null;}normalizeCtorArgs(t){return t&&t.portalItem&&t.path?{...t,path:this.normalizePath(t.path,t.portalItem)}:t}set path(t){r$1K(t)&&Q$e(t)?h$1m.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t);}_castPath(t){return this.normalizePath(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",r){const o=this.url;if(t$1T(o))throw new s$2l("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(o,{responseType:t,query:{token:this.portalItem.apiKey},signal:m$2i(r,"signal")})}async update(t,r){return (await import('./resourceUtils.js')).addOrUpdateResource(this,"update",t,r)}hasPath(){return r$1K(this.path)}normalizePath(t,r){return t$1T(t)?t:(t=t.replace(/^\/+/,""),r$1K(r)&&Q$e(t)&&(t=W$b(t,r.itemUrl)),t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};e$25([d$1T()],n$2p.prototype,"portalItem",void 0),e$25([d$1T({type:String,value:null})],n$2p.prototype,"path",null),e$25([c$35("path")],n$2p.prototype,"_castPath",null),e$25([d$1T({type:String,readOnly:!0})],n$2p.prototype,"url",null),e$25([d$1T({type:String,readOnly:!0})],n$2p.prototype,"itemRelativeUrl",null),n$2p=e$25([i$2z("esri.portal.PortalItemResource")],n$2p);const y$1o=n$2p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$1A=class extends p$3a{constructor(r){super(r),this.created=null,this.rating=null;}};e$25([d$1T()],e$1A.prototype,"created",void 0),e$25([d$1T()],e$1A.prototype,"rating",void 0),e$1A=e$25([i$2z("esri.portal.PortalRating")],e$1A);const c$2T=e$1A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var v$S;let w$R=v$S=class extends(i$2i(m$1$)){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null;}static from(e){return v$Z(v$S,e)}destroy(){this.portal=null;}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return "Feature Service"===e||"Feature Collection"===e?i=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===e?i=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?i="Scene Layer":"Scene Package"===e?i="Scene Layer Package":"Stream Service"===e?i="Feature Layer":"Geoprocessing Service"===e&&this.portal&&this.portal.isPortal?i=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===e?i="Locator":"Geoenrichment Service"===e?i="GeoEnrichment Service":"Microsoft Powerpoint"===e?i="Microsoft PowerPoint":"GeoJson"===e?i="GeoJSON":"Globe Service"===e?i="Globe Layer":"Vector Tile Service"===e?i="Tile Layer":"netCDF"===e?i="NetCDF":"Map Service"===e?i=-1===t.indexOf("Spatiotemporal")&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&-1===t.indexOf("Relational")?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?i=e.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===e?i="Big Data File Share":"Compact Tile Package"===e?i="Tile Package (tpkx)":"OGCFeatureServer"===e&&(i="OGC Feature Layer"),i}readExtent(e){return e&&e.length?new M$A(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",i=this.typeKeywords||[],r="esri/images/portal/",o="16";let a,s=!1,n=!1,l=!1,p=!1,c=!1,d=!1;return e.indexOf("service")>0||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e?(s=i.indexOf("Hosted Service")>-1,"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(n=i.indexOf("Table")>-1,l=i.indexOf("Route Layer")>-1,p=i.indexOf("Markup")>-1,c=-1!==i.indexOf("Spatiotemporal"),d=-1!==i.indexOf("UtilityNetwork"),a=c&&n?"spatiotemporaltable":n?"table":l?"routelayer":p?"markup":c?"spatiotemporal":s?"featureshosted":d?"utilitynetwork":"features"):a="map service"===e||"wms"===e||"wmts"===e?s||i.indexOf("Tiled")>-1||"wmts"===e?"maptiles":"mapimages":"scene service"===e?i.indexOf("Line")>-1?"sceneweblayerline":i.indexOf("3DObject")>-1?"sceneweblayermultipatch":i.indexOf("Point")>-1?"sceneweblayerpoint":i.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":i.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":i.indexOf("Polygon")>-1?"sceneweblayerpolygon":i.indexOf("Building")>-1?"sceneweblayerbuilding":i.indexOf("Voxel")>-1?"sceneweblayervoxel":"sceneweblayer":"image service"===e?i.indexOf("Elevation 3D Layer")>-1?"elevationlayer":i.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===e?"streamlayer":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"geoprocessing service"===e&&i.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):a="web map"===e||"cityengine web scene"===e?"maps":"web scene"===e?i.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===e||"desktop application"===e?"apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&i.indexOf("ArcGIS Pro")>-1||"explorer map"===e&&i.indexOf("Explorer Document")?"mapsgray":"service definition"===e||"csv"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"360 vr experience"===e||"netcdf"===e||"administrative report"===e?"datafiles":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?"appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?"addindesktop":"rule package"===e||"file geodatabase"===e||"sqlite geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"gml"===e||"arcpad package"===e||"code sample"===e||"form"===e||"document link"===e||"earth configuration"===e||"operations dashboard add in"===e||"rules package"===e||"image"===e||"workflow manager package"===e||"explorer map"===e&&i.indexOf("Explorer Mapping Application")>-1||i.indexOf("Document")>-1?"datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e?"toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?"layersgray":"scene package"===e?"scenepackage":"mobile scene package"===e?"mobilescenepackage":"tile package"===e||"compact tile package"===e?"tilepackage":"task file"===e?"taskfile":"report template"===e?"report-template":"statistical data collection"===e?"statisticaldatacollection":"insights workbook"===e?"workbook":"insights model"===e?"insightsmodel":"insights page"===e?"insightspage":"insights theme"===e?"insightstheme":"hub initiative"===e?"hubinitiative":"hubpage"===e?"hubpage":"hub event"===e?"hubevent":"hub site application"===e?"hubsite":"relational database connection"===e?"relationaldatabaseconnection":"big data file share"===e?"datastorecollection":"image collection"===e?"imagecollection":"style"===e?"style":"desktop style"===e?"desktopstyle":"dashboard"===e?"dashboard":"raster function template"===e?"rasterprocessingtemplate":"vector tile package"===e?"vectortilepackage":"ortho mapping project"===e?"orthomappingproject":"ortho mapping template"===e?"orthomappingtemplate":"solution"===e?"solutions":"geopackage"===e?"geopackage":"deep learning package"===e?"deeplearningpackage":"real time analytic"===e?"realtimeanalytics":"big data analytic"===e?"bigdataanalytics":"feed"===e?"feed":"excalibur imagery project"===e?"excaliburimageryproject":"notebook"===e?"notebook":"storymap"===e?"storymap":"survey123 add in"===e?"survey123addin":"mission"===e?"mission":"mission report"===e?"missionreport":"quickcapture project"===e?"quickcaptureproject":"pro report"===e?"proreport":"urban model"===e?"urbanmodel":"web experience"===e?"experiencebuilder":"web experience template"===e?"webexperiencetemplate":"workflow"===e?"workflow":"insights script"===e?"insightsscript":"kernel gateway connection"===e?"kernelgatewayconnection":"hub initiative template"===e?"hubinitiativetemplate":"storymap theme"===e?"storymaptheme":"knowledge graph"===e?"knowledgegraph":"native application"===e?"nativeapp":"native application installer"===e?"nativeappinstaller":"link chart"===e?"linkchart":"investigation"===e?"investigation":"ogcfeatureserver"===e?"features":"pro project"===e?"proproject":"insights workbook package"===e?"insightsworkbookpackage":"apache parquet"===e?"apacheparquet":"maps",a?a$34(r+a+o+".png"):null}get isLayer(){return ["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");if(!t)return null;return `${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`}load(e){this.portal||(this.portal=B$i.getDefault());const t=this.portal.load(e).then((()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:r$1K(e)?e.signal:null,query:{token:this.apiKey}}):{})).then((e=>{this.sourceJSON=e,this.read(e);}));return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof c$2T&&(e=e.rating),isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then((()=>new c$2T({rating:e,created:new Date})))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:l$2w(this.applicationProxies),avgRating:this.avgRating,categories:l$2w(this.categories),created:l$2w(this.created),culture:this.culture,description:this.description,extent:l$2w(this.extent),groupCategories:l$2w(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:l$2w(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:l$2w(this.screenshots),size:this.size,snippet:this.snippet,tags:l$2w(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:l$2w(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new v$S({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then((()=>{}))}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then((e=>null!=e.rating?(e.created=new Date(e.created),new c$2T(e)):null))}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},v$S)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then((e=>(this.sourceJSON=e,this.read(e),this)))}update(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e&&e.data,i={method:"post"};i.query=this.createPostQuery();for(const e in i.query)null===i.query[e]&&(i.query[e]="");return i.query.clearEmptyFields=!0,null!=t&&("string"==typeof t?i.query.text=t:"object"==typeof t&&(i.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,i).then((()=>this.reload()))})):Promise.reject(new s$2l("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then((()=>this.portal._signIn())).then((()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if("string"==typeof t)G$l(t)?r.query={data:t}:r.query={url:T$t(t)},r$1K(i)&&(r.query.filename=i);else {const e=new FormData;r$1K(i)?e.append("file",t,i):e.append("file",t),r.body=e;}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,r).then((()=>this.reload()))})):Promise.reject(new s$2l("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return (await import('./resourceUtils.js')).fetchResources(this,e,t)}async addResource(e,t,i){const r=await import('./resourceUtils.js');return e.portalItem=this,r.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const r=await import('./resourceUtils.js');if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new s$2l("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r.removeResource(this,e,t)}async removeAllResources(e){return (await import('./resourceUtils.js')).removeAllResources(this,e)}resourceFromPath(e){return new y$1o({portalItem:this,path:e})}toJSON(){const e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return y$1D(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new v$S({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};e$25([d$1T({type:["private","shared","org","public"]})],w$R.prototype,"access",void 0),e$25([d$1T()],w$R.prototype,"accessInformation",void 0),e$25([d$1T({type:String})],w$R.prototype,"apiKey",void 0),e$25([d$1T({json:{read:{source:"appProxies"}}})],w$R.prototype,"applicationProxies",void 0),e$25([d$1T()],w$R.prototype,"avgRating",void 0),e$25([d$1T()],w$R.prototype,"categories",void 0),e$25([d$1T({type:Date})],w$R.prototype,"created",void 0),e$25([d$1T()],w$R.prototype,"culture",void 0),e$25([d$1T()],w$R.prototype,"description",void 0),e$25([d$1T({readOnly:!0})],w$R.prototype,"displayName",null),e$25([d$1T({type:M$A})],w$R.prototype,"extent",void 0),e$25([o$1v("extent")],w$R.prototype,"readExtent",null),e$25([d$1T()],w$R.prototype,"groupCategories",void 0),e$25([d$1T({readOnly:!0})],w$R.prototype,"iconUrl",null),e$25([d$1T()],w$R.prototype,"id",void 0),e$25([d$1T({readOnly:!0})],w$R.prototype,"isLayer",null),e$25([d$1T()],w$R.prototype,"itemControl",void 0),e$25([d$1T({readOnly:!0})],w$R.prototype,"itemUrl",null),e$25([d$1T()],w$R.prototype,"licenseInfo",void 0),e$25([d$1T({type:Date})],w$R.prototype,"modified",void 0),e$25([d$1T()],w$R.prototype,"name",void 0),e$25([d$1T()],w$R.prototype,"numComments",void 0),e$25([d$1T()],w$R.prototype,"numRatings",void 0),e$25([d$1T()],w$R.prototype,"numViews",void 0),e$25([d$1T()],w$R.prototype,"owner",void 0),e$25([d$1T()],w$R.prototype,"ownerFolder",void 0),e$25([d$1T({type:B$i})],w$R.prototype,"portal",void 0),e$25([d$1T()],w$R.prototype,"screenshots",void 0),e$25([d$1T()],w$R.prototype,"size",void 0),e$25([d$1T()],w$R.prototype,"snippet",void 0),e$25([d$1T()],w$R.prototype,"sourceJSON",void 0),e$25([d$1T()],w$R.prototype,"tags",void 0),e$25([d$1T()],w$R.prototype,"thumbnail",void 0),e$25([d$1T({readOnly:!0})],w$R.prototype,"thumbnailUrl",null),e$25([d$1T()],w$R.prototype,"title",void 0),e$25([d$1T()],w$R.prototype,"type",void 0),e$25([d$1T()],w$R.prototype,"typeKeywords",void 0),e$25([d$1T()],w$R.prototype,"url",void 0),e$25([d$1T({readOnly:!0})],w$R.prototype,"userItemUrl",null),w$R=v$S=e$25([i$2z("esri.portal.PortalItem")],w$R);const b$$=w$R;

const PortalItem = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': b$$
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function a$2I(e){if(!e)return;const a=e.indexOf("-vector")>-1?e.slice(0,e.indexOf("-vector")):e,s=await u$20("esri/t9n/basemaps");return s[e]||s[a]}const s$1S={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return a$34("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return a$34("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return a$34("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return a$34("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return a$34("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return a$34("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return a$34("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return a$34("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return a$34("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return a$34("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return a$34("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return a$34("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return a$34("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return a$34("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return a$34("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return a$34("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return a$34("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return a$34("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return a$34("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return a$34("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return a$34("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return a$34("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return a$34("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return a$34("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return a$34("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return a$34("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return a$34("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$1r=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),l$2a=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function c$2S(e){return "basemap"===e.layerContainerType?o$1r:"operational-layers"===e.layerContainerType?l$2a:null}function m$1V(e){return !("feature"!==e.type||e.url||!e.source||"memory"!==e.source.type)}function p$2U(e,t){if(t.restrictedWebMapWriting){const r=c$2S(t);return !r$1K(r)||r.has(e.type)&&!m$1V(e)}return !0}function u$1P(e,t){if(m$1V(e)){const n=t$1Q("featureCollection.layers",t),i=n&&n[0]&&n[0].layerDefinition;i&&d$1B(e,i);}else if("stream"===e.type){d$1B(e,t.layerDefinition=t.layerDefinition||{});}else "group"!==e.type&&d$1B(e,t);}function d$1B(e,t){"maxScale"in e&&(t.maxScale=y$1w(e.maxScale)),"minScale"in e&&(t.minScale=y$1w(e.minScale));}function f$1p(e,t){if(u$1P(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,"normal"===t.blendMode&&delete t.blendMode),t.opacity=y$1w(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&"wmts"!==e.type)if(m$1V(e)){const n=t.featureCollection;n&&(n.showLegend=e.legendEnabled);}else t.showLegend=e.legendEnabled;}function y$1n(r,i,o){if(!("write"in r)||!r.write)return o&&o.messages&&o.messages.push(new s$2l("layer:unsupported",`Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted`,{layer:r})),null;if(p$2U(r,o)){const e={};return r.write(e,o)?e:null}return r$1K(i)&&f$1p(r,i=l$2w(i)),i}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var v$R;let S$D=0;const _$A=s$2n.getLogger("esri.Basemap");let U$m=v$R=class extends(i$2i(m$1$)){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+S$D++,this.baseLayers=new S$I,this.referenceLayers=new S$I;const t=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"===e.type&&_$A.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a basemap layer and will therefore be ignored.`);},s=e=>{e.parent=null;};this.baseLayers.on("after-add",(e=>t(e.item))),this.referenceLayers.on("after-add",(e=>t(e.item))),this.baseLayers.on("after-remove",(e=>s(e.item))),this.referenceLayers.on("after-remove",(e=>s(e.item)));}initialize(){this.when().catch((e=>{_$A.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e);})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context);}destroy(){var e;const r=this.baseLayers.removeAll();for(const s of r)s.destroy();const t=this.referenceLayers.removeAll();for(const s of t)s.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),null==(e=this.portalItem)||e.destroy(),this.portalItem=null;}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",n$2t(e,this._get("baseLayers")));}_writeBaseLayers(e,r,t){const s=[];e?(t={...t,layerContainerType:"basemap"},this.baseLayers.forEach((e=>{const r=y$1n(e,t.webmap?t.webmap.getLayerJSONFromResourceInfo(e):null,t);r$1K(r)&&s.push(r);})),this.referenceLayers.forEach((e=>{const r=y$1n(e,t.webmap?t.webmap.getLayerJSONFromResourceInfo(e):null,t);r$1K(r)&&(r.isReference=!0,s.push(r));})),r.baseMapLayers=s):r.baseMapLayers=s;}set referenceLayers(e){this._set("referenceLayers",n$2t(e,this._get("referenceLayers")));}writeTitle(e,r){r.title=e||"Basemap";}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return n$2r(this,(e=>{e(this.baseLayers,this.referenceLayers);}))}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new v$R({resourceInfo:this.resourceInfo}).set(e)}read(e,r){this.resourceInfo||this._set("resourceInfo",{data:e,context:r}),super.read(e,r);}write(e,r){return e=e||{},r&&r.origin||(r={origin:"web-map",...r}),super.write(e,r),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((e=>{const r=l$2w(e);return r.url&&et$3(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&et$3(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r}))),e}async _loadFromSource(e){const{resourceInfo:r,portalItem:t}=this;h$1E(e);const s=[];if(r){const t=r.context?r.context.url:null;if(s.push(this._loadLayersFromJSON(r.data,t,e)),r.data.id&&!r.data.title){const e=r.data.id;s.push(a$2I(e).then((e=>{e&&this.read({title:e},r.context);})));}}else t&&s.push(this._loadFromItem(t,e));await Promise.all(s);}async _loadLayersFromJSON(e,r,t){const s=this.resourceInfo&&this.resourceInfo.context,o=this.portalItem&&this.portalItem.portal||s&&s.portal||null,a=s&&"web-scene"===s.origin?"web-scene":"web-map",{populateOperationalLayers:i}=await import('./layersCreator.js'),n=[];if(h$1E(t),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const t={context:{origin:a,url:r,portal:o,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},s=i(this.baseLayers,e.baseMapLayers.filter((e=>!e.isReference)),t);n.push(s);const l=i(this.referenceLayers,e.baseMapLayers.filter((e=>e.isReference)),t);n.push(l);}await T$s(n);}async _loadFromItem(e,r){const t=await e.load(r),s=await t.fetchData("json",r),o=U$s(e.itemUrl);return this._set("resourceInfo",{data:s.baseMap,context:{origin:"web-map",portal:e.portal||B$i.getDefault(),url:o}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||B$i.getDefault(),url:o}),this._loadLayersFromJSON(this.resourceInfo.data,o,r)}static fromId(e){const r=s$1S[e];if(r){if(r.deprecated){let r=null;"dark-gray"===e?r="dark-gray-vector":"gray"===e?r="gray-vector":"streets"===e?r="streets-vector":"topo"===e&&(r="topo-vector"),s$2i(_$A,`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:r,see:"https://arcg.is/1iq8aD",warnOnce:!0});}return v$R.fromJSON(r)}return null}};e$25([d$1T({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,r,t,s){this._writeBaseLayers(e,r,s);}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:S$I}},writer(e,r,t,s){this._writeBaseLayers(e,r,s);}}}}}})],U$m.prototype,"baseLayers",null),e$25([d$1T({type:String,json:{origins:{"web-scene":{write:!0}}}})],U$m.prototype,"id",void 0),e$25([d$1T({type:b$$})],U$m.prototype,"portalItem",void 0),e$25([d$1T()],U$m.prototype,"referenceLayers",null),e$25([d$1T({readOnly:!0})],U$m.prototype,"resourceInfo",void 0),e$25([d$1T({type:k$w})],U$m.prototype,"spatialReference",void 0),e$25([d$1T()],U$m.prototype,"thumbnailUrl",void 0),e$25([d$1T({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],U$m.prototype,"title",void 0),e$25([r$1m("title")],U$m.prototype,"writeTitle",null),U$m=v$R=e$25([i$2z("esri.Basemap")],U$m);const x$B=U$m;

const Basemap = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': x$B
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$2R=s$2n.getLogger("esri.support.basemapUtils");function u$1O(){return {}}function f$1o(e){for(const r in e){const n=e[r];!1===(null==n?void 0:n.destroyed)&&n.destroy(),delete e[r];}}function y$1m(n,t){var a;let l;if("string"==typeof n){if(!(n in s$1S)){const e=Object.entries(s$1S).filter((([e,n])=>t$1P.apiKey&&!n.classic||!t$1P.apiKey&&n.classic&&!n.deprecated)).map((([e])=>`"${e}"`)).join(", ");return c$2R.warn(`Unable to find basemap definition for: ${n}. Try one of these: ${e}`),null}t&&(l=t[n]),l||(l=x$B.fromId(n),t&&(t[n]=l));}else l=b$14(x$B,n);return null!=(a=l)&&a.destroyed&&(c$2R.warn("The provided basemap is already destroyed",{basemap:l}),l=null),l}function b$_(e,r){if(e===r)return !0;return "equal"===U$l(g$Z(e),g$Z(r),{mustMatchReferences:!0})}function d$1A(e){return !(null==e||!e.baseLayers.concat(e.referenceLayers).some(S$C))}function S$C(e){if(v$Q(e.url))return !0;if("vector-tile"===e.type)for(const r in e.sourceNameToSource){const n=e.sourceNameToSource[r];if(v$Q(null==n?void 0:n.sourceUrl))return !0}return !1}const h$1l=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function v$Q(e){if(!e)return !1;const r=new $$j(T$t(e));return h$1l.test(r.authority)}function g$Z(e){return e?!e.loaded&&e.resourceInfo?j$K(e.resourceInfo.data):{baseLayers:T$n(e.baseLayers),referenceLayers:T$n(e.referenceLayers)}:null}function T$n(e){return (S$I.isCollection(e)?e.toArray():e).map(x$A)}function x$A(e){return {type:e.type,url:R$r("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible}}function j$K(e){return e?{baseLayers:q$m(e.baseMapLayers.filter((e=>!e.isReference))),referenceLayers:q$m(e.baseMapLayers.filter((e=>e.isReference)))}:null}function q$m(e){return e.map((e=>w$Q(e)))}function w$Q(e){let r;switch(e.layerType){case"VectorTileLayer":r="vector-tile";break;case"ArcGISTiledMapServiceLayer":r="tile";break;default:r="unknown";}return {type:r,url:R$r(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility}}function U$l(e,r,n){if(null!=e!=(null!=r))return "not-equal";if(!e)return "equal";if(!I$z(e.baseLayers,r.baseLayers))return "not-equal";return I$z(e.referenceLayers,r.referenceLayers)?"equal":n.mustMatchReferences?"not-equal":"base-layers-equal"}function I$z(e,r){if(e.length!==r.length)return !1;for(let n=0;n<e.length;n++)if(!M$z(e[n],r[n]))return !1;return !0}function M$z(e,r){return e.type===r.type&&e.url===r.url&&e.minScale===r.minScale&&e.maxScale===r.maxScale&&e.visible===r.visible&&e.opacity===r.opacity}function R$r(e){return e?z$s(e).replace(/^\s*https?:/i,"").toLowerCase():""}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1z(e){return e&&"base-tile"===e.type||"tile"===e.type||"elevation"===e.type||"imagery-tile"===e.type||"base-elevation"===e.type||"open-street-map"===e.type||"wcs"===e.type||"web-tile"===e.type||"wmts"===e.type||"vector-tile"===e.type}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2o(){return [0,0,0]}function t$1p(n){return [n[0],n[1],n[2]]}function r$1j(n,t,r){return [n,t,r]}function e$1y(t){const r=n$2o(),e=Math.min(3,t.length);for(let n=0;n<e;++n)r[n]=t[n];return r}function u$1N(n,t){return new Float64Array(n,t,3)}function a$2H(){return n$2o()}function o$1q(){return r$1j(1,1,1)}function s$1R(){return r$1j(1,0,0)}function c$2Q(){return r$1j(0,1,0)}function i$2c(){return r$1j(0,0,1)}const f$1n=a$2H(),l$29=o$1q(),_$z=s$1R(),N$p=c$2Q(),O$r=i$2c();Object.freeze({__proto__:null,create:n$2o,clone:t$1p,fromValues:r$1j,fromArray:e$1y,createView:u$1N,zeros:a$2H,ones:o$1q,unitX:s$1R,unitY:c$2Q,unitZ:i$2c,ZEROS:f$1n,ONES:l$29,UNIT_X:_$z,UNIT_Y:N$p,UNIT_Z:O$r});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$2G=1e-6,t$1o=Math.random,e$1x=Math.PI/180,n$2n=180/Math.PI;function s$1Q(a){return a*e$1x}function o$1p(a){return a*n$2n}function r$1i(t,e){return Math.abs(t-e)<=a$2G*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze({__proto__:null,EPSILON:a$2G,RANDOM:t$1o,toRadian:s$1Q,toDegree:o$1p,equals:r$1i});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function s$1P(t){const n=t[0],a=t[1],s=t[2];return Math.sqrt(n*n+a*a+s*s)}function r$1h(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function o$1o(t,n,a,s){return t[0]=n,t[1]=a,t[2]=s,t}function u$1M(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t[2]=n[2]+a[2],t}function c$2P(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t[2]=n[2]-a[2],t}function e$1w(t,n,a){return t[0]=n[0]*a[0],t[1]=n[1]*a[1],t[2]=n[2]*a[2],t}function i$2b(t,n,a){return t[0]=n[0]/a[0],t[1]=n[1]/a[1],t[2]=n[2]/a[2],t}function h$1k(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t}function M$y(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t}function f$1m(t,n,a){return t[0]=Math.min(n[0],a[0]),t[1]=Math.min(n[1],a[1]),t[2]=Math.min(n[2],a[2]),t}function l$28(t,n,a){return t[0]=Math.max(n[0],a[0]),t[1]=Math.max(n[1],a[1]),t[2]=Math.max(n[2],a[2]),t}function m$1U(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t}function d$1z(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t}function b$Z(t,n,a,s){return t[0]=n[0]+a[0]*s,t[1]=n[1]+a[1]*s,t[2]=n[2]+a[2]*s,t}function q$l(t,n){const a=n[0]-t[0],s=n[1]-t[1],r=n[2]-t[2];return Math.sqrt(a*a+s*s+r*r)}function x$z(t,n){const a=n[0]-t[0],s=n[1]-t[1],r=n[2]-t[2];return a*a+s*s+r*r}function p$2T(t){const n=t[0],a=t[1],s=t[2];return n*n+a*a+s*s}function v$P(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function g$Y(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function j$J(t,n){const a=n[0],s=n[1],r=n[2];let o=a*a+s*s+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o),t}function z$l(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function _$y(t,n,a){const s=n[0],r=n[1],o=n[2],u=a[0],c=a[1],e=a[2];return t[0]=r*e-o*c,t[1]=o*u-s*e,t[2]=s*c-r*u,t}function y$1l(t,n,a,s){const r=n[0],o=n[1],u=n[2];return t[0]=r+s*(a[0]-r),t[1]=o+s*(a[1]-o),t[2]=u+s*(a[2]-u),t}function A$o(t,n,a,s,r,o){const u=o*o,c=u*(2*o-3)+1,e=u*(o-2)+o,i=u*(o-1),h=u*(3-2*o);return t[0]=n[0]*c+a[0]*e+s[0]*i+r[0]*h,t[1]=n[1]*c+a[1]*e+s[1]*i+r[1]*h,t[2]=n[2]*c+a[2]*e+s[2]*i+r[2]*h,t}function D$p(t,n,a,s,r,o){const u=1-o,c=u*u,e=o*o,i=c*u,h=3*o*c,M=3*e*u,f=e*o;return t[0]=n[0]*i+a[0]*h+s[0]*M+r[0]*f,t[1]=n[1]*i+a[1]*h+s[1]*M+r[1]*f,t[2]=n[2]*i+a[2]*h+s[2]*M+r[2]*f,t}function E$q(t,n){n=n||1;const s=2*t$1o()*Math.PI,r=2*t$1o()-1,o=Math.sqrt(1-r*r)*n;return t[0]=Math.cos(s)*o,t[1]=Math.sin(s)*o,t[2]=r*n,t}function I$y(t,n,a){const s=n[0],r=n[1],o=n[2];return t[0]=a[0]*s+a[4]*r+a[8]*o+a[12],t[1]=a[1]*s+a[5]*r+a[9]*o+a[13],t[2]=a[2]*s+a[6]*r+a[10]*o+a[14],t}function L$t(t,n,a){const s=n[0],r=n[1],o=n[2];return t[0]=s*a[0]+r*a[3]+o*a[6],t[1]=s*a[1]+r*a[4]+o*a[7],t[2]=s*a[2]+r*a[5]+o*a[8],t}function P$p(t,n,a){const s=a[0],r=a[1],o=a[2],u=a[3],c=n[0],e=n[1],i=n[2];let h=r*i-o*e,M=o*c-s*i,f=s*e-r*c,l=r*f-o*M,m=o*h-s*f,d=s*M-r*h;const b=2*u;return h*=b,M*=b,f*=b,l*=2,m*=2,d*=2,t[0]=c+h+l,t[1]=e+M+m,t[2]=i+f+d,t}function O$q(t,n,a,s){const r=[],o=[];return r[0]=n[0]-a[0],r[1]=n[1]-a[1],r[2]=n[2]-a[2],o[0]=r[0],o[1]=r[1]*Math.cos(s)-r[2]*Math.sin(s),o[2]=r[1]*Math.sin(s)+r[2]*Math.cos(s),t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t}function Q$b(t,n,a,s){const r=[],o=[];return r[0]=n[0]-a[0],r[1]=n[1]-a[1],r[2]=n[2]-a[2],o[0]=r[2]*Math.sin(s)+r[0]*Math.cos(s),o[1]=r[1],o[2]=r[2]*Math.cos(s)-r[0]*Math.sin(s),t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t}function R$q(t,n,a,s){const r=[],o=[];return r[0]=n[0]-a[0],r[1]=n[1]-a[1],r[2]=n[2]-a[2],o[0]=r[0]*Math.cos(s)-r[1]*Math.sin(s),o[1]=r[0]*Math.sin(s)+r[1]*Math.cos(s),o[2]=r[2],t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t}function k$v(t,n){r$1h(w$P,t),r$1h(B$h,n),j$J(w$P,w$P),j$J(B$h,B$h);const a=z$l(w$P,B$h);return a>1?0:a<-1?Math.PI:Math.acos(a)}const w$P=n$2o(),B$h=n$2o();function C$u(t){return "vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function F$n(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function G$h(t,a){if(t===a)return !0;const s=t[0],r=t[1],o=t[2],u=a[0],c=a[1],e=a[2];return Math.abs(s-u)<=a$2G*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(r-c)<=a$2G*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-e)<=a$2G*Math.max(1,Math.abs(o),Math.abs(e))}function H$g(t,n,a){const s=a[0]-n[0],r=a[1]-n[1],o=a[2]-n[2];let u=s*s+r*r+o*o;return u>0?(u=1/Math.sqrt(u),t[0]=s*u,t[1]=r*u,t[2]=o*u,t):(t[0]=0,t[1]=0,t[2]=0,t)}const J$c=c$2P,K$b=e$1w,N$o=i$2b,S$B=q$l,X$c=x$z,Y$c=s$1P,Z$b=p$2T;Object.freeze({__proto__:null,length:s$1P,copy:r$1h,set:o$1o,add:u$1M,subtract:c$2P,multiply:e$1w,divide:i$2b,ceil:h$1k,floor:M$y,min:f$1m,max:l$28,round:m$1U,scale:d$1z,scaleAndAdd:b$Z,distance:q$l,squaredDistance:x$z,squaredLength:p$2T,negate:v$P,inverse:g$Y,normalize:j$J,dot:z$l,cross:_$y,lerp:y$1l,hermite:A$o,bezier:D$p,random:E$q,transformMat4:I$y,transformMat3:L$t,transformQuat:P$p,rotateX:O$q,rotateY:Q$b,rotateZ:R$q,angle:k$v,str:C$u,exactEquals:F$n,equals:G$h,direction:H$g,sub:J$c,mul:K$b,div:N$o,dist:S$B,sqrDist:X$c,len:Y$c,sqrLen:Z$b});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function a$2F(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function r$1g(t,n,a,r,s){return t[0]=n,t[1]=a,t[2]=r,t[3]=s,t}function s$1O(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t[2]=n[2]+a[2],t[3]=n[3]+a[3],t}function u$1L(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t[2]=n[2]-a[2],t[3]=n[3]-a[3],t}function o$1n(t,n,a){return t[0]=n[0]*a[0],t[1]=n[1]*a[1],t[2]=n[2]*a[2],t[3]=n[3]*a[3],t}function e$1v(t,n,a){return t[0]=n[0]/a[0],t[1]=n[1]/a[1],t[2]=n[2]/a[2],t[3]=n[3]/a[3],t}function c$2O(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t}function i$2a(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t}function h$1j(t,n,a){return t[0]=Math.min(n[0],a[0]),t[1]=Math.min(n[1],a[1]),t[2]=Math.min(n[2],a[2]),t[3]=Math.min(n[3],a[3]),t}function M$x(t,n,a){return t[0]=Math.max(n[0],a[0]),t[1]=Math.max(n[1],a[1]),t[2]=Math.max(n[2],a[2]),t[3]=Math.max(n[3],a[3]),t}function f$1l(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t}function l$27(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a,t}function m$1T(t,n,a,r){return t[0]=n[0]+a[0]*r,t[1]=n[1]+a[1]*r,t[2]=n[2]+a[2]*r,t[3]=n[3]+a[3]*r,t}function d$1y(t,n){const a=n[0]-t[0],r=n[1]-t[1],s=n[2]-t[2],u=n[3]-t[3];return Math.sqrt(a*a+r*r+s*s+u*u)}function b$Y(t,n){const a=n[0]-t[0],r=n[1]-t[1],s=n[2]-t[2],u=n[3]-t[3];return a*a+r*r+s*s+u*u}function x$y(t){const n=t[0],a=t[1],r=t[2],s=t[3];return Math.sqrt(n*n+a*a+r*r+s*s)}function q$k(t){const n=t[0],a=t[1],r=t[2],s=t[3];return n*n+a*a+r*r+s*s}function p$2S(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t}function v$O(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t}function g$X(t,n){const a=n[0],r=n[1],s=n[2],u=n[3];let o=a*a+r*r+s*s+u*u;return o>0&&(o=1/Math.sqrt(o),t[0]=a*o,t[1]=r*o,t[2]=s*o,t[3]=u*o),t}function _$x(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function j$I(t,n,a,r){const s=n[0],u=n[1],o=n[2],e=n[3];return t[0]=s+r*(a[0]-s),t[1]=u+r*(a[1]-u),t[2]=o+r*(a[2]-o),t[3]=e+r*(a[3]-e),t}function w$O(t,a){let r,s,u,o,e,c;a=a||1;do{r=2*t$1o()-1,s=2*t$1o()-1,e=r*r+s*s;}while(e>=1);do{u=2*t$1o()-1,o=2*t$1o()-1,c=u*u+o*o;}while(c>=1);const i=Math.sqrt((1-e)/c);return t[0]=a*r,t[1]=a*s,t[2]=a*u*i,t[3]=a*o*i,t}function y$1k(t,n,a){const r=n[0],s=n[1],u=n[2],o=n[3];return t[0]=a[0]*r+a[4]*s+a[8]*u+a[12]*o,t[1]=a[1]*r+a[5]*s+a[9]*u+a[13]*o,t[2]=a[2]*r+a[6]*s+a[10]*u+a[14]*o,t[3]=a[3]*r+a[7]*s+a[11]*u+a[15]*o,t}function z$k(t,n,a){const r=n[0],s=n[1],u=n[2],o=a[0],e=a[1],c=a[2],i=a[3],h=i*r+e*u-c*s,M=i*s+c*r-o*u,f=i*u+o*s-e*r,l=-o*r-e*s-c*u;return t[0]=h*i+l*-o+M*-c-f*-e,t[1]=M*i+l*-e+f*-o-h*-c,t[2]=f*i+l*-c+h*-e-M*-o,t[3]=n[3],t}function A$n(t){return "vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function D$o(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function E$p(n,a){const r=n[0],s=n[1],u=n[2],o=n[3],e=a[0],c=a[1],i=a[2],h=a[3];return Math.abs(r-e)<=a$2G*Math.max(1,Math.abs(r),Math.abs(e))&&Math.abs(s-c)<=a$2G*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(u-i)<=a$2G*Math.max(1,Math.abs(u),Math.abs(i))&&Math.abs(o-h)<=a$2G*Math.max(1,Math.abs(o),Math.abs(h))}const L$s=u$1L,k$u=o$1n,B$g=e$1v,C$t=d$1y,F$m=b$Y,G$g=x$y,H$f=q$k;Object.freeze({__proto__:null,copy:a$2F,set:r$1g,add:s$1O,subtract:u$1L,multiply:o$1n,divide:e$1v,ceil:c$2O,floor:i$2a,min:h$1j,max:M$x,round:f$1l,scale:l$27,scaleAndAdd:m$1T,distance:d$1y,squaredDistance:b$Y,length:x$y,squaredLength:q$k,negate:p$2S,inverse:v$O,normalize:g$X,dot:_$x,lerp:j$I,random:w$O,transformMat4:y$1k,transformQuat:z$k,str:A$n,exactEquals:D$o,equals:E$p,sub:L$s,mul:k$u,div:B$g,dist:C$t,sqrDist:F$m,len:G$g,sqrLen:H$f});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u$1K=new Float32Array(1);function a$2E(n){--n;for(let t=1;t<32;t<<=1)n|=n>>t;return n+1}function e$1u(n,t,r){return Math.min(Math.max(n,t),r)}function o$1m(n){return 0==(n&n-1)}function c$2N(n){return n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,++n}function s$1N(n,t,r){return n+(t-n)*r}function M$w(n){return n*Math.PI/180}function m$1S(n){return 180*n/Math.PI}function l$26(n){return Math.acos(e$1u(n,-1,1))}function b$X(n){return Math.asin(e$1u(n,-1,1))}function x$x(n,t,r=1e-6){if(isNaN(n)||isNaN(t))return !1;if(n===t)return !0;const u=Math.abs(n-t),a=Math.abs(n),e=Math.abs(t);if(0===n||0===t||a<1e-12&&e<1e-12){if(u>.01*r)return !1}else if(u/(a+e)>r)return !1;return !0}function p$2R(n,t,r=1e-6){if(isNaN(n)||isNaN(t))return !1;return (n>t?n-t:t-n)<=r}function j$H(n){return k$t(Math.max(-w$N,Math.min(n,w$N)))}function k$t(n){return u$1K[0]=n,u$1K[0]}function P$o(r,u){const a=s$1P(r),e=b$X(r[2]/a),i=Math.atan2(r[1]/a,r[0]/a);return o$1o(u,a,e,i),u}const w$N=k$t(34028234663852886e22);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2m(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function s$1M(t,a,n,s,r,o,h,M,u,e,c,i,f,b,l,m,x){return t[0]=a,t[1]=n,t[2]=s,t[3]=r,t[4]=o,t[5]=h,t[6]=M,t[7]=u,t[8]=e,t[9]=c,t[10]=i,t[11]=f,t[12]=b,t[13]=l,t[14]=m,t[15]=x,t}function r$1f(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function o$1l(t,a){if(t===a){const n=a[1],s=a[2],r=a[3],o=a[6],h=a[7],M=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=n,t[6]=a[9],t[7]=a[13],t[8]=s,t[9]=o,t[11]=a[14],t[12]=r,t[13]=h,t[14]=M;}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t}function h$1i(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],h=a[4],M=a[5],u=a[6],e=a[7],c=a[8],i=a[9],f=a[10],b=a[11],l=a[12],m=a[13],x=a[14],q=a[15],p=n*M-s*h,g=n*u-r*h,d=n*e-o*h,R=s*u-r*M,S=s*e-o*M,T=r*e-o*u,y=c*m-i*l,j=c*x-f*l,v=c*q-b*l,D=i*x-f*m,I=i*q-b*m,O=f*q-b*x;let P=p*O-g*I+d*D+R*v-S*j+T*y;return P?(P=1/P,t[0]=(M*O-u*I+e*D)*P,t[1]=(r*I-s*O-o*D)*P,t[2]=(m*T-x*S+q*R)*P,t[3]=(f*S-i*T-b*R)*P,t[4]=(u*v-h*O-e*j)*P,t[5]=(n*O-r*v+o*j)*P,t[6]=(x*d-l*T-q*g)*P,t[7]=(c*T-f*d+b*g)*P,t[8]=(h*I-M*v+e*y)*P,t[9]=(s*v-n*I-o*y)*P,t[10]=(l*S-m*d+q*p)*P,t[11]=(i*d-c*S-b*p)*P,t[12]=(M*j-h*D-u*y)*P,t[13]=(n*D-s*j+r*y)*P,t[14]=(m*g-l*R-x*p)*P,t[15]=(c*R-i*g+f*p)*P,t):null}function M$v(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],h=a[4],M=a[5],u=a[6],e=a[7],c=a[8],i=a[9],f=a[10],b=a[11],l=a[12],m=a[13],x=a[14],q=a[15];return t[0]=M*(f*q-b*x)-i*(u*q-e*x)+m*(u*b-e*f),t[1]=-(s*(f*q-b*x)-i*(r*q-o*x)+m*(r*b-o*f)),t[2]=s*(u*q-e*x)-M*(r*q-o*x)+m*(r*e-o*u),t[3]=-(s*(u*b-e*f)-M*(r*b-o*f)+i*(r*e-o*u)),t[4]=-(h*(f*q-b*x)-c*(u*q-e*x)+l*(u*b-e*f)),t[5]=n*(f*q-b*x)-c*(r*q-o*x)+l*(r*b-o*f),t[6]=-(n*(u*q-e*x)-h*(r*q-o*x)+l*(r*e-o*u)),t[7]=n*(u*b-e*f)-h*(r*b-o*f)+c*(r*e-o*u),t[8]=h*(i*q-b*m)-c*(M*q-e*m)+l*(M*b-e*i),t[9]=-(n*(i*q-b*m)-c*(s*q-o*m)+l*(s*b-o*i)),t[10]=n*(M*q-e*m)-h*(s*q-o*m)+l*(s*e-o*M),t[11]=-(n*(M*b-e*i)-h*(s*b-o*i)+c*(s*e-o*M)),t[12]=-(h*(i*x-f*m)-c*(M*x-u*m)+l*(M*f-u*i)),t[13]=n*(i*x-f*m)-c*(s*x-r*m)+l*(s*f-r*i),t[14]=-(n*(M*x-u*m)-h*(s*x-r*m)+l*(s*u-r*M)),t[15]=n*(M*f-u*i)-h*(s*f-r*i)+c*(s*u-r*M),t}function u$1J(t){const a=t[0],n=t[1],s=t[2],r=t[3],o=t[4],h=t[5],M=t[6],u=t[7],e=t[8],c=t[9],i=t[10],f=t[11],b=t[12],l=t[13],m=t[14],x=t[15];return (a*h-n*o)*(i*x-f*m)-(a*M-s*o)*(c*x-f*l)+(a*u-r*o)*(c*m-i*l)+(n*M-s*h)*(e*x-f*b)-(n*u-r*h)*(e*m-i*b)+(s*u-r*M)*(e*l-c*b)}function e$1t(t,a,n){const s=a[0],r=a[1],o=a[2],h=a[3],M=a[4],u=a[5],e=a[6],c=a[7],i=a[8],f=a[9],b=a[10],l=a[11],m=a[12],x=a[13],q=a[14],p=a[15];let g=n[0],d=n[1],R=n[2],S=n[3];return t[0]=g*s+d*M+R*i+S*m,t[1]=g*r+d*u+R*f+S*x,t[2]=g*o+d*e+R*b+S*q,t[3]=g*h+d*c+R*l+S*p,g=n[4],d=n[5],R=n[6],S=n[7],t[4]=g*s+d*M+R*i+S*m,t[5]=g*r+d*u+R*f+S*x,t[6]=g*o+d*e+R*b+S*q,t[7]=g*h+d*c+R*l+S*p,g=n[8],d=n[9],R=n[10],S=n[11],t[8]=g*s+d*M+R*i+S*m,t[9]=g*r+d*u+R*f+S*x,t[10]=g*o+d*e+R*b+S*q,t[11]=g*h+d*c+R*l+S*p,g=n[12],d=n[13],R=n[14],S=n[15],t[12]=g*s+d*M+R*i+S*m,t[13]=g*r+d*u+R*f+S*x,t[14]=g*o+d*e+R*b+S*q,t[15]=g*h+d*c+R*l+S*p,t}function c$2M(t,a,n){const s=n[0],r=n[1],o=n[2];let h,M,u,e,c,i,f,b,l,m,x,q;return a===t?(t[12]=a[0]*s+a[4]*r+a[8]*o+a[12],t[13]=a[1]*s+a[5]*r+a[9]*o+a[13],t[14]=a[2]*s+a[6]*r+a[10]*o+a[14],t[15]=a[3]*s+a[7]*r+a[11]*o+a[15]):(h=a[0],M=a[1],u=a[2],e=a[3],c=a[4],i=a[5],f=a[6],b=a[7],l=a[8],m=a[9],x=a[10],q=a[11],t[0]=h,t[1]=M,t[2]=u,t[3]=e,t[4]=c,t[5]=i,t[6]=f,t[7]=b,t[8]=l,t[9]=m,t[10]=x,t[11]=q,t[12]=h*s+c*r+l*o+a[12],t[13]=M*s+i*r+m*o+a[13],t[14]=u*s+f*r+x*o+a[14],t[15]=e*s+b*r+q*o+a[15]),t}function i$29(t,a,n){const s=n[0],r=n[1],o=n[2];return t[0]=a[0]*s,t[1]=a[1]*s,t[2]=a[2]*s,t[3]=a[3]*s,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function f$1k(t,n,s,r){let o,h,M,u,e,c,i,f,b,l,m,x,q,p,g,d,R,S,T,y,j,v,D,I,O=r[0],P=r[1],A=r[2],_=Math.sqrt(O*O+P*P+A*A);return _<a$2G?null:(_=1/_,O*=_,P*=_,A*=_,o=Math.sin(s),h=Math.cos(s),M=1-h,u=n[0],e=n[1],c=n[2],i=n[3],f=n[4],b=n[5],l=n[6],m=n[7],x=n[8],q=n[9],p=n[10],g=n[11],d=O*O*M+h,R=P*O*M+A*o,S=A*O*M-P*o,T=O*P*M-A*o,y=P*P*M+h,j=A*P*M+O*o,v=O*A*M+P*o,D=P*A*M-O*o,I=A*A*M+h,t[0]=u*d+f*R+x*S,t[1]=e*d+b*R+q*S,t[2]=c*d+l*R+p*S,t[3]=i*d+m*R+g*S,t[4]=u*T+f*y+x*j,t[5]=e*T+b*y+q*j,t[6]=c*T+l*y+p*j,t[7]=i*T+m*y+g*j,t[8]=u*v+f*D+x*I,t[9]=e*v+b*D+q*I,t[10]=c*v+l*D+p*I,t[11]=i*v+m*D+g*I,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function b$W(t,a,n){const s=Math.sin(n),r=Math.cos(n),o=a[4],h=a[5],M=a[6],u=a[7],e=a[8],c=a[9],i=a[10],f=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*r+e*s,t[5]=h*r+c*s,t[6]=M*r+i*s,t[7]=u*r+f*s,t[8]=e*r-o*s,t[9]=c*r-h*s,t[10]=i*r-M*s,t[11]=f*r-u*s,t}function l$25(t,a,n){const s=Math.sin(n),r=Math.cos(n),o=a[0],h=a[1],M=a[2],u=a[3],e=a[8],c=a[9],i=a[10],f=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*r-e*s,t[1]=h*r-c*s,t[2]=M*r-i*s,t[3]=u*r-f*s,t[8]=o*s+e*r,t[9]=h*s+c*r,t[10]=M*s+i*r,t[11]=u*s+f*r,t}function m$1R(t,a,n){const s=Math.sin(n),r=Math.cos(n),o=a[0],h=a[1],M=a[2],u=a[3],e=a[4],c=a[5],i=a[6],f=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*r+e*s,t[1]=h*r+c*s,t[2]=M*r+i*s,t[3]=u*r+f*s,t[4]=e*r-o*s,t[5]=c*r-h*s,t[6]=i*r-M*s,t[7]=f*r-u*s,t}function x$w(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function q$j(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function p$2Q(t,n,s){let r,o,h,M=s[0],u=s[1],e=s[2],c=Math.sqrt(M*M+u*u+e*e);return c<a$2G?null:(c=1/c,M*=c,u*=c,e*=c,r=Math.sin(n),o=Math.cos(n),h=1-o,t[0]=M*M*h+o,t[1]=u*M*h+e*r,t[2]=e*M*h-u*r,t[3]=0,t[4]=M*u*h-e*r,t[5]=u*u*h+o,t[6]=e*u*h+M*r,t[7]=0,t[8]=M*e*h+u*r,t[9]=u*e*h-M*r,t[10]=e*e*h+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function g$W(t,a){const n=Math.sin(a),s=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function d$1x(t,a){const n=Math.sin(a),s=Math.cos(a);return t[0]=s,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R$p(t,a){const n=Math.sin(a),s=Math.cos(a);return t[0]=s,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S$A(t,a,n){const s=a[0],r=a[1],o=a[2],h=a[3],M=s+s,u=r+r,e=o+o,c=s*M,i=s*u,f=s*e,b=r*u,l=r*e,m=o*e,x=h*M,q=h*u,p=h*e;return t[0]=1-(b+m),t[1]=i+p,t[2]=f-q,t[3]=0,t[4]=i-p,t[5]=1-(c+m),t[6]=l+x,t[7]=0,t[8]=f+q,t[9]=l-x,t[10]=1-(c+b),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function T$m(t,a){const n=y$1j,s=-a[0],r=-a[1],o=-a[2],h=a[3],M=a[4],u=a[5],e=a[6],c=a[7],i=s*s+r*r+o*o+h*h;return i>0?(n[0]=2*(M*h+c*s+u*o-e*r)/i,n[1]=2*(u*h+c*r+e*s-M*o)/i,n[2]=2*(e*h+c*o+M*r-u*s)/i):(n[0]=2*(M*h+c*s+u*o-e*r),n[1]=2*(u*h+c*r+e*s-M*o),n[2]=2*(e*h+c*o+M*r-u*s)),S$A(t,a,n),t}const y$1j=n$2o();function j$G(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t}function v$N(t,a){const n=a[0],s=a[1],r=a[2],o=a[4],h=a[5],M=a[6],u=a[8],e=a[9],c=a[10];return t[0]=Math.sqrt(n*n+s*s+r*r),t[1]=Math.sqrt(o*o+h*h+M*M),t[2]=Math.sqrt(u*u+e*e+c*c),t}function D$n(t,a){const n=a[0]+a[5]+a[10];let s=0;return n>0?(s=2*Math.sqrt(n+1),t[3]=.25*s,t[0]=(a[6]-a[9])/s,t[1]=(a[8]-a[2])/s,t[2]=(a[1]-a[4])/s):a[0]>a[5]&&a[0]>a[10]?(s=2*Math.sqrt(1+a[0]-a[5]-a[10]),t[3]=(a[6]-a[9])/s,t[0]=.25*s,t[1]=(a[1]+a[4])/s,t[2]=(a[8]+a[2])/s):a[5]>a[10]?(s=2*Math.sqrt(1+a[5]-a[0]-a[10]),t[3]=(a[8]-a[2])/s,t[0]=(a[1]+a[4])/s,t[1]=.25*s,t[2]=(a[6]+a[9])/s):(s=2*Math.sqrt(1+a[10]-a[0]-a[5]),t[3]=(a[1]-a[4])/s,t[0]=(a[8]+a[2])/s,t[1]=(a[6]+a[9])/s,t[2]=.25*s),t}function I$x(t,a,n,s){const r=a[0],o=a[1],h=a[2],M=a[3],u=r+r,e=o+o,c=h+h,i=r*u,f=r*e,b=r*c,l=o*e,m=o*c,x=h*c,q=M*u,p=M*e,g=M*c,d=s[0],R=s[1],S=s[2];return t[0]=(1-(l+x))*d,t[1]=(f+g)*d,t[2]=(b-p)*d,t[3]=0,t[4]=(f-g)*R,t[5]=(1-(i+x))*R,t[6]=(m+q)*R,t[7]=0,t[8]=(b+p)*S,t[9]=(m-q)*S,t[10]=(1-(i+l))*S,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function O$p(t,a,n,s,r){const o=a[0],h=a[1],M=a[2],u=a[3],e=o+o,c=h+h,i=M+M,f=o*e,b=o*c,l=o*i,m=h*c,x=h*i,q=M*i,p=u*e,g=u*c,d=u*i,R=s[0],S=s[1],T=s[2],y=r[0],j=r[1],v=r[2],D=(1-(m+q))*R,I=(b+d)*R,O=(l-g)*R,P=(b-d)*S,A=(1-(f+q))*S,_=(x+p)*S,w=(l+g)*T,E=(x-p)*T,F=(1-(f+m))*T;return t[0]=D,t[1]=I,t[2]=O,t[3]=0,t[4]=P,t[5]=A,t[6]=_,t[7]=0,t[8]=w,t[9]=E,t[10]=F,t[11]=0,t[12]=n[0]+y-(D*y+P*j+w*v),t[13]=n[1]+j-(I*y+A*j+E*v),t[14]=n[2]+v-(O*y+_*j+F*v),t[15]=1,t}function P$n(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],h=n+n,M=s+s,u=r+r,e=n*h,c=s*h,i=s*M,f=r*h,b=r*M,l=r*u,m=o*h,x=o*M,q=o*u;return t[0]=1-i-l,t[1]=c+q,t[2]=f-x,t[3]=0,t[4]=c-q,t[5]=1-e-l,t[6]=b+m,t[7]=0,t[8]=f+x,t[9]=b-m,t[10]=1-e-i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A$m(t,a,n,s,r,o,h){const M=1/(n-a),u=1/(r-s),e=1/(o-h);return t[0]=2*o*M,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+a)*M,t[9]=(r+s)*u,t[10]=(h+o)*e,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*o*2*e,t[15]=0,t}function _$w(t,a,n,s,r){const o=1/Math.tan(a/2);let h;return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(h=1/(s-r),t[10]=(r+s)*h,t[14]=2*r*s*h):(t[10]=-1,t[14]=-2*s),t}function w$M(t,a,n,s){const r=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),h=Math.tan(a.leftDegrees*Math.PI/180),M=Math.tan(a.rightDegrees*Math.PI/180),u=2/(h+M),e=2/(r+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=-(h-M)*u*.5,t[9]=(r-o)*e*.5,t[10]=s/(n-s),t[11]=-1,t[12]=0,t[13]=0,t[14]=s*n/(n-s),t[15]=0,t}function E$o(t,a,n,s,r,o,h){const M=1/(a-n),u=1/(s-r),e=1/(o-h);return t[0]=-2*M,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*e,t[11]=0,t[12]=(a+n)*M,t[13]=(r+s)*u,t[14]=(h+o)*e,t[15]=1,t}function F$l(t,n,s,o){let h,M,u,e,c,i,f,b,l,m;const x=n[0],q=n[1],p=n[2],g=o[0],d=o[1],R=o[2],S=s[0],T=s[1],y=s[2];return Math.abs(x-S)<a$2G&&Math.abs(q-T)<a$2G&&Math.abs(p-y)<a$2G?r$1f(t):(f=x-S,b=q-T,l=p-y,m=1/Math.sqrt(f*f+b*b+l*l),f*=m,b*=m,l*=m,h=d*l-R*b,M=R*f-g*l,u=g*b-d*f,m=Math.sqrt(h*h+M*M+u*u),m?(m=1/m,h*=m,M*=m,u*=m):(h=0,M=0,u=0),e=b*u-l*M,c=l*h-f*u,i=f*M-b*h,m=Math.sqrt(e*e+c*c+i*i),m?(m=1/m,e*=m,c*=m,i*=m):(e=0,c=0,i=0),t[0]=h,t[1]=e,t[2]=f,t[3]=0,t[4]=M,t[5]=c,t[6]=b,t[7]=0,t[8]=u,t[9]=i,t[10]=l,t[11]=0,t[12]=-(h*x+M*q+u*p),t[13]=-(e*x+c*q+i*p),t[14]=-(f*x+b*q+l*p),t[15]=1,t)}function Q$a(t,a,n,s){const r=a[0],o=a[1],h=a[2],M=s[0],u=s[1],e=s[2];let c=r-n[0],i=o-n[1],f=h-n[2],b=c*c+i*i+f*f;b>0&&(b=1/Math.sqrt(b),c*=b,i*=b,f*=b);let l=u*f-e*i,m=e*c-M*f,x=M*i-u*c;return b=l*l+m*m+x*x,b>0&&(b=1/Math.sqrt(b),l*=b,m*=b,x*=b),t[0]=l,t[1]=m,t[2]=x,t[3]=0,t[4]=i*x-f*m,t[5]=f*l-c*x,t[6]=c*m-i*l,t[7]=0,t[8]=c,t[9]=i,t[10]=f,t[11]=0,t[12]=r,t[13]=o,t[14]=h,t[15]=1,t}function k$s(t){return "mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function z$j(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function N$n(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t[4]=a[4]+n[4],t[5]=a[5]+n[5],t[6]=a[6]+n[6],t[7]=a[7]+n[7],t[8]=a[8]+n[8],t[9]=a[9]+n[9],t[10]=a[10]+n[10],t[11]=a[11]+n[11],t[12]=a[12]+n[12],t[13]=a[13]+n[13],t[14]=a[14]+n[14],t[15]=a[15]+n[15],t}function X$b(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t[4]=a[4]-n[4],t[5]=a[5]-n[5],t[6]=a[6]-n[6],t[7]=a[7]-n[7],t[8]=a[8]-n[8],t[9]=a[9]-n[9],t[10]=a[10]-n[10],t[11]=a[11]-n[11],t[12]=a[12]-n[12],t[13]=a[13]-n[13],t[14]=a[14]-n[14],t[15]=a[15]-n[15],t}function Y$b(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*n,t[5]=a[5]*n,t[6]=a[6]*n,t[7]=a[7]*n,t[8]=a[8]*n,t[9]=a[9]*n,t[10]=a[10]*n,t[11]=a[11]*n,t[12]=a[12]*n,t[13]=a[13]*n,t[14]=a[14]*n,t[15]=a[15]*n,t}function Z$a(t,a,n,s){return t[0]=a[0]+n[0]*s,t[1]=a[1]+n[1]*s,t[2]=a[2]+n[2]*s,t[3]=a[3]+n[3]*s,t[4]=a[4]+n[4]*s,t[5]=a[5]+n[5]*s,t[6]=a[6]+n[6]*s,t[7]=a[7]+n[7]*s,t[8]=a[8]+n[8]*s,t[9]=a[9]+n[9]*s,t[10]=a[10]+n[10]*s,t[11]=a[11]+n[11]*s,t[12]=a[12]+n[12]*s,t[13]=a[13]+n[13]*s,t[14]=a[14]+n[14]*s,t[15]=a[15]+n[15]*s,t}function B$f(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]}function C$s(t,n){if(t===n)return !0;const s=t[0],r=t[1],o=t[2],h=t[3],M=t[4],u=t[5],e=t[6],c=t[7],i=t[8],f=t[9],b=t[10],l=t[11],m=t[12],x=t[13],q=t[14],p=t[15],g=n[0],d=n[1],R=n[2],S=n[3],T=n[4],y=n[5],j=n[6],v=n[7],D=n[8],I=n[9],O=n[10],P=n[11],A=n[12],_=n[13],w=n[14],E=n[15];return Math.abs(s-g)<=a$2G*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(r-d)<=a$2G*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(o-R)<=a$2G*Math.max(1,Math.abs(o),Math.abs(R))&&Math.abs(h-S)<=a$2G*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(M-T)<=a$2G*Math.max(1,Math.abs(M),Math.abs(T))&&Math.abs(u-y)<=a$2G*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(e-j)<=a$2G*Math.max(1,Math.abs(e),Math.abs(j))&&Math.abs(c-v)<=a$2G*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(i-D)<=a$2G*Math.max(1,Math.abs(i),Math.abs(D))&&Math.abs(f-I)<=a$2G*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(b-O)<=a$2G*Math.max(1,Math.abs(b),Math.abs(O))&&Math.abs(l-P)<=a$2G*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(m-A)<=a$2G*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(x-_)<=a$2G*Math.max(1,Math.abs(x),Math.abs(_))&&Math.abs(q-w)<=a$2G*Math.max(1,Math.abs(q),Math.abs(w))&&Math.abs(p-E)<=a$2G*Math.max(1,Math.abs(p),Math.abs(E))}function G$f(t){const n=a$2G,s=t[0],r=t[1],o=t[2],h=t[4],M=t[5],u=t[6],e=t[8],c=t[9],i=t[10];return Math.abs(1-(s*s+h*h+e*e))<=n&&Math.abs(1-(r*r+M*M+c*c))<=n&&Math.abs(1-(o*o+u*u+i*i))<=n}const H$e=e$1t,J$b=X$b;Object.freeze({__proto__:null,copy:n$2m,set:s$1M,identity:r$1f,transpose:o$1l,invert:h$1i,adjoint:M$v,determinant:u$1J,multiply:e$1t,translate:c$2M,scale:i$29,rotate:f$1k,rotateX:b$W,rotateY:l$25,rotateZ:m$1R,fromTranslation:x$w,fromScaling:q$j,fromRotation:p$2Q,fromXRotation:g$W,fromYRotation:d$1x,fromZRotation:R$p,fromRotationTranslation:S$A,fromQuat2:T$m,getTranslation:j$G,getScaling:v$N,getRotation:D$n,fromRotationTranslationScale:I$x,fromRotationTranslationScaleOrigin:O$p,fromQuat:P$n,frustum:A$m,perspective:_$w,perspectiveFromFieldOfView:w$M,ortho:E$o,lookAt:F$l,targetTo:Q$a,str:k$s,frob:z$j,add:N$n,subtract:X$b,multiplyScalar:Y$b,multiplyScalarAndAdd:Z$a,exactEquals:B$f,equals:C$s,isOrthoNormal:G$f,mul:H$e,sub:J$b});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function a$2D(t,n){return t[0]=n[0],t[1]=n[1],t}function r$1e(t,n,a){return t[0]=n,t[1]=a,t}function s$1L(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t}function o$1k(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t}function u$1I(t,n,a){return t[0]=n[0]*a[0],t[1]=n[1]*a[1],t}function c$2L(t,n,a){return t[0]=n[0]/a[0],t[1]=n[1]/a[1],t}function e$1s(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t}function i$28(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t}function f$1j(t,n,a){return t[0]=Math.min(n[0],a[0]),t[1]=Math.min(n[1],a[1]),t}function M$u(t,n,a){return t[0]=Math.max(n[0],a[0]),t[1]=Math.max(n[1],a[1]),t}function h$1h(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t}function l$24(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t}function m$1Q(t,n,a,r){return t[0]=n[0]+a[0]*r,t[1]=n[1]+a[1]*r,t}function d$1w(t,n){const a=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(a*a+r*r)}function q$i(t,n){const a=n[0]-t[0],r=n[1]-t[1];return a*a+r*r}function b$V(t){const n=t[0],a=t[1];return Math.sqrt(n*n+a*a)}function p$2P(t){const n=t[0],a=t[1];return n*n+a*a}function x$v(t,n){return t[0]=-n[0],t[1]=-n[1],t}function g$V(t,n){return t[0]=1/n[0],t[1]=1/n[1],t}function v$M(t,n){const a=n[0],r=n[1];let s=a*a+r*r;return s>0&&(s=1/Math.sqrt(s),t[0]=n[0]*s,t[1]=n[1]*s),t}function j$F(t,n){return t[0]*n[0]+t[1]*n[1]}function A$l(t,n,a){const r=n[0]*a[1]-n[1]*a[0];return t[0]=t[1]=0,t[2]=r,t}function _$v(t,n,a,r){const s=n[0],o=n[1];return t[0]=s+r*(a[0]-s),t[1]=o+r*(a[1]-o),t}function y$1i(t,a){a=a||1;const r=2*t$1o()*Math.PI;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t}function z$i(t,n,a){const r=n[0],s=n[1];return t[0]=a[0]*r+a[2]*s,t[1]=a[1]*r+a[3]*s,t}function D$m(t,n,a){const r=n[0],s=n[1];return t[0]=a[0]*r+a[2]*s+a[4],t[1]=a[1]*r+a[3]*s+a[5],t}function E$n(t,n,a){const r=n[0],s=n[1];return t[0]=a[0]*r+a[3]*s+a[6],t[1]=a[1]*r+a[4]*s+a[7],t}function I$w(t,n,a){const r=n[0],s=n[1];return t[0]=a[0]*r+a[4]*s+a[12],t[1]=a[1]*r+a[5]*s+a[13],t}function L$r(t,n,a,r){const s=n[0]-a[0],o=n[1]-a[1],u=Math.sin(r),c=Math.cos(r);return t[0]=s*c-o*u+a[0],t[1]=s*u+o*c+a[1],t}function P$m(t,n){const a=t[0],r=t[1],s=n[0],o=n[1];let u=a*a+r*r;u>0&&(u=1/Math.sqrt(u));let c=s*s+o*o;c>0&&(c=1/Math.sqrt(c));const e=(a*s+r*o)*u*c;return e>1?0:e<-1?Math.PI:Math.acos(e)}function O$o(t){return "vec2("+t[0]+", "+t[1]+")"}function k$r(t,n){return t[0]===n[0]&&t[1]===n[1]}function w$L(n,a){const r=n[0],s=n[1],o=a[0],u=a[1];return Math.abs(r-o)<=a$2G*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(s-u)<=a$2G*Math.max(1,Math.abs(s),Math.abs(u))}function B$e(t,n,a,r,s){let o=n[0]-a[0],u=n[1]-a[1];const c=(r[0]*o+r[1]*u)*(s-1);return o=r[0]*c,u=r[1]*c,t[0]=n[0]+o,t[1]=n[1]+u,t}const C$r=b$V,F$k=o$1k,G$e=u$1I,H$d=c$2L,J$a=d$1w,K$a=q$i,N$m=p$2P;Object.freeze({__proto__:null,copy:a$2D,set:r$1e,add:s$1L,subtract:o$1k,multiply:u$1I,divide:c$2L,ceil:e$1s,floor:i$28,min:f$1j,max:M$u,round:h$1h,scale:l$24,scaleAndAdd:m$1Q,distance:d$1w,squaredDistance:q$i,length:b$V,squaredLength:p$2P,negate:x$v,inverse:g$V,normalize:v$M,dot:j$F,cross:A$l,lerp:_$v,random:y$1i,transformMat2:z$i,transformMat2d:D$m,transformMat3:E$n,transformMat4:I$w,rotate:L$r,angle:P$m,str:O$o,exactEquals:k$r,equals:w$L,projectAndScale:B$e,len:C$r,sub:F$k,mul:G$e,div:H$d,dist:J$a,sqrDist:K$a,sqrLen:N$m});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2l(){return [0,0]}function r$1d(n){return [n[0],n[1]]}function t$1n(n,r){return [n,r]}function e$1r(r){const t=n$2l(),e=Math.min(2,r.length);for(let n=0;n<e;++n)t[n]=r[n];return t}function u$1H(n,r){return new Float64Array(n,r,2)}function a$2C(){return n$2l()}function o$1j(){return t$1n(1,1)}function s$1K(){return t$1n(1,0)}function c$2K(){return t$1n(0,1)}const f$1i=a$2C(),i$27=o$1j(),l$23=s$1K(),_$u=c$2K();Object.freeze({__proto__:null,create:n$2l,clone:r$1d,fromValues:t$1n,fromArray:e$1r,createView:u$1H,zeros:a$2C,ones:o$1j,unitX:s$1K,unitY:c$2K,ZEROS:f$1i,ONES:i$27,UNIT_X:l$23,UNIT_Y:_$u});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2k(){return [0,0,0,0]}function t$1m(n){return [n[0],n[1],n[2],n[3]]}function r$1c(n,t,r,e){return [n,t,r,e]}function e$1q(t){const r=n$2k(),e=Math.min(4,t.length);for(let n=0;n<e;++n)r[n]=t[n];return r}function u$1G(n,t){return new Float64Array(n,t,4)}function a$2B(){return n$2k()}function o$1i(){return r$1c(1,1,1,1)}function s$1J(){return r$1c(1,0,0,0)}function c$2J(){return r$1c(0,1,0,0)}function i$26(){return r$1c(0,0,1,0)}function f$1h(){return r$1c(0,0,0,1)}const _$t=a$2B(),l$22=o$1i(),N$l=s$1J(),U$k=c$2J(),I$v=i$26(),O$n=f$1h();Object.freeze({__proto__:null,create:n$2k,clone:t$1m,fromValues:r$1c,fromArray:e$1q,createView:u$1G,zeros:a$2B,ones:o$1i,unitX:s$1J,unitY:c$2J,unitZ:i$26,unitW:f$1h,ZEROS:_$t,ONES:l$22,UNIT_X:N$l,UNIT_Y:U$k,UNIT_Z:I$v,UNIT_W:O$n});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$1p{constructor(t){this.message=t;}toString(){return `AssertException: ${this.message}`}}function i$25(t,n){if(!t){n=n||"assert";const t=new Error(n);throw t.stack&&console.log(t.stack),new e$1p(n)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$1I{constructor(t){this.client=t,this._cancelled=!1,this.size=0,this.duration=0;}}class e$1o{constructor(t){this.typeWorkerQuota=t,this.tasks=new Array,this.numWorkers=0,this.statistics=new r$1b;}}class r$1b{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0;}}class i$24{constructor(t,s,r,i){this._workerFunc=t,this._callbackFunc=s,this._maxTotalNumWorkers=r,this._totalNumWorkers=0,this._clients=i.map((t=>new e$1o(t)));}hasQuota(t){const s=this._clients[t];return !!s&&(this._totalNumWorkers<this._maxTotalNumWorkers||s.numWorkers+s.tasks.length<s.typeWorkerQuota)}push(t){const s=this._clients[t.client];s&&(this._totalNumWorkers<this._maxTotalNumWorkers?(s.numWorkers++,this._totalNumWorkers++,this._workerFunc(t,((t,s)=>this._taskCallback(t,s)))):s.tasks.push(t));}cancel(t){this._taskFinished(t),t._cancelled=!0;}destroy(){this._clients.length=0;}_taskFinished(s){const e=this._clients[s.client];this._totalNumWorkers--,e.numWorkers--,e.statistics.requests++,e.statistics.size+=s.size||0,e.statistics.duration+=s.duration||0,e.statistics.speed=e.statistics.duration>0?e.statistics.size/e.statistics.duration:0,i$25(e.numWorkers>=0),this._next();}_next(){for(const t of this._clients)if(t&&t.numWorkers<t.typeWorkerQuota&&this._processQueue(t))return;for(const t of this._clients)if(t&&this._processQueue(t))return}_processQueue(t){for(;t.tasks.length>0;)if(this._workerFunc(t.tasks.shift(),((t,s)=>this._taskCallback(t,s))))return t.numWorkers++,this._totalNumWorkers++,!0;return !1}_taskCallback(t,s){t._cancelled||(this._callbackFunc(t,s),this._taskFinished(t));}getStatsForType(t){const s=this._clients[t];return s?{quota:s.typeWorkerQuota,workers:s.numWorkers,queueSize:s.tasks.length,requestStats:s.statistics}:null}get test(){const t=this;return {set workerFunc(s){t._workerFunc=s;}}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$1l extends s$1I{constructor(s,t,r,e,i){super(e),this.url=s,this.options=t,this.docType=r,this.key=i,this.result=null,this.status=1,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$23(n,t,o={}){return c$2I(n,t,o,l$21)}function u$1F(n,t,o={}){return c$2I(n,t,o,s$1H)}function c$2I(n,t,o={},i){let u=null;const c=o.once?(n,o)=>{i(n)&&(s$2q(u),t(n,o));}:(n,o)=>{i(n)&&t(n,o);};if(u=A$t(n,c,o.sync,o.equals),o.initial){const t=n();c(t,t);}return u}function l$21(n){return !0}function s$1H(n){return !!n}const m$1P={sync:!0};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$22=class extends p$3a{constructor(){super(...arguments),this._tasks=new Array,this.running=!1;}get length(){return this._tasks.length}destroy(){this.cancelAll();}runTask(s){for(;!s.done&&this._process(s);)s.madeProgress();}push(s,r,t){return this.running=!0,new Promise(((e,o)=>this._tasks.push(new a$2A(e,o,s,r,t))))}unshift(s,r,t){return this.running=!0,new Promise(((e,o)=>this._tasks.unshift(new a$2A(e,o,s,r,t))))}_process(s){if(0===this._tasks.length)return !1;const r=this._tasks.shift();try{const c=p$3j(r.signal);if(c&&!r.abortCallback)r.reject(m$2e());else {const t=c?r.abortCallback(m$2e()):r.callback(s);q$q(t)?t.then(r.resolve,r.reject):r.resolve(t);}}catch(c){r.reject(c);}return this.running=this._tasks.length>0,!0}cancelAll(){const s=m$2e();for(const r of this._tasks)if(r.abortCallback){const t=r.abortCallback(s);r.resolve(t);}else r.reject(s);this._tasks.length=0,this.running=!1;}};e$25([d$1T()],i$22.prototype,"running",void 0),i$22=e$25([i$2z("esri.layers.support.PromiseQueue")],i$22);class a$2A{constructor(s,r,t,e,o){this.resolve=s,this.reject=r,this.callback=t,this.signal=e,this.abortCallback=o;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$1k=class extends p$3a{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;}};e$25([d$1T()],t$1k.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),e$25([d$1T()],t$1k.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),t$1k=e$25([i$2z("esri.views.support.DebugFlags")],t$1k);const p$2O=new t$1k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const I$u=s$2n.getLogger("esri.views.support.Scheduler");var f$1g;!function(e){e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="cloud generator",e[e.TEST_PRIO=1]="TEST_PRIO";}(f$1g||(f$1g={}));const A$k=0,S$z=new Map([[f$1g.RESOURCE_CONTROLLER,A$k],[f$1g.SLIDE,A$k],[f$1g.STREAM_DATA_LOADER,A$k],[f$1g.ELEVATION_QUERY,A$k],[f$1g.TERRAIN_SURFACE,1],[f$1g.SURFACE_GEOMETRY_UPDATES,1],[f$1g.GRAPHICS_CORE,2],[f$1g.I3S_CONTROLLER,2],[f$1g.POINT_CLOUD_LAYER,2],[f$1g.FEATURE_TILE_FETCHER,2],[f$1g.OVERLAY,4],[f$1g.STAGE,4],[f$1g.GRAPHICS_DECONFLICTOR,4],[f$1g.FILTER_VISIBILITY,4],[f$1g.SCALE_VISIBILITY,4],[f$1g.FRUSTUM_VISIBILITY,4],[f$1g.POINT_OF_INTEREST_FREQUENT,6],[f$1g.POINT_OF_INTEREST_INFREQUENT,30],[f$1g.LABELER,8],[f$1g.FEATURE_QUERY_ENGINE,8],[f$1g.FEATURE_TILE_TREE,16],[f$1g.FEATURE_TILE_TREE_ACTIVE,A$k],[f$1g.ELEVATION_ALIGNMENT,12],[f$1g.TEXT_TEXTURE_ATLAS,12],[f$1g.CLOUDS_GENERATOR,12],[f$1g.TEXTURE_UNLOAD,12],[f$1g.LINE_OF_SIGHT_TOOL,16],[f$1g.LINE_OF_SIGHT_TOOL_INTERACTIVE,A$k],[f$1g.SNAPPING,A$k],[f$1g.SHADOW_ACCUMULATOR,30]]);function b$U(e){return S$z.has(e)?S$z.get(e):"number"==typeof e?e:1}const L$q=n$2I(6.5),k$q=n$2I(1),O$m=n$2I(30),U$j=n$2I(1e3/30),N$k=n$2I(100),P$l=.9;var F$j,y$1h;!function(r){let h=class extends p$3a{constructor(e){super(e),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new e$1S("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=null,this._state=1,this._tasks=new n$2J,this._runQueue=new n$2J,this._load=0,this._idleStateCallbacks=new n$2J,this._idleUpdatesStartFired=!1,this._maxReschedule=v$L,this._forceTask=!1,this._debug=!1,this._debugHandle=i$2x(p$2O,"SCHEDULER_LOG_SLOW_TASKS",(e=>this._debug=e)),this._budget=new d(e.nowFunc);for(const r of Object.keys(f$1g))this.performanceInfo.tasks.set(f$1g[r],new e$1S(f$1g[r]));let t;const s=this;this._test={get state(){return c$3o(t,s._state)},set state(e){t=e;},FRAME_SAFETY_BUDGET:L$q,INTERACTING_BUDGET:U$j,IDLE_BUDGET:N$k,get budget(){return s._budget.budget},usedBudget:0,setBudget:e=>s._budget=e,updateTask:e=>this._updateTask(e),getState:e=>this._getState(e),getRuntime:e=>this._getRuntime(e),resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()};}destroy(){this._debugHandle&&this._debugHandle.remove(),this._microTaskQueued=!1;}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=v$L,this._schedule(),this.frame()));})));}registerTask(e,t){const s=b$U(e),r=new _(this,e,t,s);return this._tasks.push(r),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new e$1S(e)),r}registerIdleStateCallbacks(e,t){const s={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(s),2===this.state&&this._idleUpdatesStartFired&&s.idleBegin();const r=this;return {remove:()=>this._removeIdleStateCallbacks(s),set idleBegin(e){r._idleUpdatesStartFired&&(s.idleEnd(),2===r._state&&e()),s.idleBegin=e;},set idleEnd(e){s.idleEnd=e;}}}get now(){return this.nowFunc()}get load(){return this._load}set state(e){this._state!==e&&(this._state=e,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((e=>e.idleEnd()))));}get state(){return t$1T(this._test.state)?this._state:this._test.state}updateBudget(e){this._test.usedBudget=0;let t=L$q,s=e.frameDuration,r=k$q;switch(this.state){case 2:t=n$2I(0),s=n$2I(Math.max(N$k,e.frameDuration)),r=O$m;break;case 1:s=n$2I(Math.max(U$j,e.frameDuration));}return s=n$2I(s-e.elapsedFrameTime-t),2!==this.state&&s<k$q&&!this._forceTask?(this._forceTask=!0,!1):(s=n$2I(Math.max(s,r)),this._budget.reset(s,this.state),this._maxReschedule=v$L,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((e=>e.idleBegin()))),this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating();}this._test.usedBudget=this._budget.elapsed;}stopFrame(){this._budget.reset(n$2I(0),this._state),this._budget.madeProgress();}_removeIdleStateCallbacks(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e);}removeTask(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e);}_updateTask(e){this._tasks.forAll((t=>{t.name===e&&t.setPriority(e);}));}_getState(e){if(this._runQueue.some((t=>t.name===e)))return y$1h.SCHEDULED;let t=y$1h.IDLE;return this._tasks.forAll((s=>{s.name===e&&s.needsUpdate&&(s.schedulePriority<=1?t=y$1h.READY:t!==y$1h.READY&&(t=y$1h.WAITING));})),t}_getRuntime(e){let t=0;return this._tasks.forAll((s=>{s.name===e&&(t+=s.runtime);})),t}_resetRuntimes(){this._tasks.forAll((e=>e.runtime=0));}_getRunning(){const e=new Map;if(this._tasks.forAll((t=>{t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1);})),0===e.size)return null;let t="";return e.forEach(((e,s)=>{t+=e>1?` ${e}x ${s}`:` ${s}`;})),t}_runIdle(){this._run();}_runInteracting(){this._run();}_runAnimating(){this._run();}_updateLoad(){const e=this._tasks.reduce(((e,t)=>t.needsUpdate?++e:e),0);this._load=this._load*P$l+e*(1-P$l);}_schedule(){if(this._maxReschedule<=0)return !1;for(this._runQueue.filterInPlace((e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1))),this._tasks.forAll((e=>{e.basePriority===A$k&&e.needsUpdate&&!this._runQueue.some((t=>t===e))&&this._runQueue.unshift(e);}));0===this._runQueue.length;){let e=!1,t=0;if(this._tasks.forAll((s=>{if(s.needsUpdate&&0!==s.schedulePriority&&s.basePriority!==A$k)if(e=!0,t=Math.max(t,s.basePriority),1===s.schedulePriority)s.schedulePriority=0,this._runQueue.push(s);else --s.schedulePriority;})),!e)return this.updating=!1,!1;this._maxReschedule===v$L&&(this._maxReschedule=t),--this._maxReschedule;}return this.updating=!0,!0}_run(){const e=this._budget.now();this._startFrameTaskTimes();do{for(;this._runQueue.length>0;){const s=this._budget.now(),r=this._runQueue.pop();this._budget.resetProgress();try{r.task.runTask(this._budget);}catch(t){I$u.error(`Exception in task "${r.name}"`,t);}r.schedulePriority=r.basePriority;const i=this._budget.now()-s;if(r.runtime+=i,this._frameTaskTimes.set(r.priority,this._frameTaskTimes.get(r.priority)+i),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",r.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return void this._recordFrameTaskTimes(this._budget.now()-e)}}while(this._schedule());this._recordFrameTaskTimes(this._budget.now()-e);}_startFrameTaskTimes(){for(const e of Object.keys(f$1g))this._frameTaskTimes.set(f$1g[e],0);}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach(((e,t)=>this.performanceInfo.tasks.get(t).record(e))),this.performanceInfo.total.record(e);}get test(){return this._test}};e$25([d$1T()],h.prototype,"updating",void 0),e$25([d$1T()],h.prototype,"nowFunc",void 0),h=e$25([i$2z("esri.views.support.Scheduler")],h),r.Scheduler=h;let _=class extends p$3a{constructor(e,t,r,i){super({}),this._scheduler=e,this.name=t,this._basePriority=i,this.runtime=0,this._queue=new i$22,this._handles=new u$25,this.schedulePriority=this._basePriority,this.task=r$1K(r)?r:this._queue,this._handles.add(u$1F((()=>this.task.running),(()=>e.activate())));}get updating(){return this._queue.running}normalizeCtorArgs(){return {}}remove(){this.processQueue(C$q),this._scheduler.removeTask(this),this.schedule=D$l.schedule,this.reschedule=D$l.reschedule,this._handles.destroy();}get basePriority(){return this._basePriority}setPriority(e){this.name=e;const t=b$U(e);this._basePriority!==A$k&&0===this.schedulePriority||(this.schedulePriority=t),this._basePriority=t;}get priority(){return this.name}set priority(e){this.setPriority(e);}get needsUpdate(){return this.updating||this.task.running}schedule(e,t,s){return this._queue.push(e,t,s)}reschedule(e,t,s){return this._queue.unshift(e,t,s)}processQueue(e){this._queue.runTask(e);}};e$25([d$1T({constructOnly:!0})],_.prototype,"task",void 0),e$25([d$1T({readOnly:!0})],_.prototype,"updating",null),_=e$25([i$2z("esri.views.support.SchedulerTask")],_);class d{constructor(e){this.now=e,this._begin=0,this._budget=0,this._state=2,this._didWork=!1,this._enabled=!0;}run(e){return !this.done&&(!0===e()&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0;}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e;}reset(e,t){this._begin=this.now(),this._budget=e,this._state=t,this._didWork=!1;}get remaining(){return Math.max(this._budget-this.elapsed,0)}get elapsed(){return this.now()-this._begin}resetProgress(){this._didWork=!1;}get hasProgressed(){return this._didWork}}r.Budget=d;}(F$j||(F$j={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i";}(y$1h||(y$1h={}));const C$q=(()=>{const e=new F$j.Budget((()=>performance.now()));return e.enabled=!1,e})();class w$K{remove(){}processQueue(){}schedule(e,t,s){try{if(p$3j(t)){const e=m$2e();return s?Promise.resolve(s(e)):Promise.reject(e)}return U$r(e(C$q))}catch(r){return Promise.reject(r)}}reschedule(e,t,s){return this.schedule(e,t,s)}}const D$l=new w$K,v$L=Number.MAX_SAFE_INTEGER;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let y$1g=class extends p$3a{constructor(){super(...arguments),this.tasks=new Map,this.onLoadQueue=new Array,this.doneQueue=new Array,this.updating=!1;}setup(e,t,s){this.loadQueue=new i$24(((e,t)=>this.startLoading(e,t)),((e,t)=>this.doneLoadingCallback(e,t)),e,t),s&&(this.taskHandle=s.registerTask(f$1g.STREAM_DATA_LOADER,this));}destroy(){this.taskHandle=s$2q(this.taskHandle),this.tasks.forEach((e=>{e.abortController&&e.abortController.abort();})),this.loadQueue.destroy(),this.loadQueue=null,this.onLoadQueue=null,this.doneQueue=null,this.tasks=null;}hasDownloadSlots(e){return this.loadQueue.hasQuota(e)}request(e,t,s,r={}){const o=B$m();o.__signal=r$1K(r)?r.signal:null;const a=this.createOrUpdateTask(e,t,s,r,o);return j$U(r,(()=>this.cancelRequest(a,o))),o.promise}createTask(e,t,s,r,o,a){const n=new t$1l(e,t,s,r,o);return this.updateTask(n,a),this.tasks.set(o,n),1===this.tasks.size&&this._set("updating",!0),this.loadQueue.push(n),n}cancelRequest(e,t){v$12(e.resolvers,t),t.reject(m$2e()),0===e.resolvers.length&&(2===e.status&&(e.status=4,this.loadQueue.cancel(e),e.abortController.abort(),e.request=null,e.abortController=null),e.status=4,this.tasks.delete(e.key),0===this.tasks.size&&this._set("updating",!1));}taskKey(e,t,s){return `${e}:${t}:${s}`}updateTask(e,t){e.resolvers.push(t);}createOrUpdateTask(e,t,s,r,o){const a=r$1K(r)&&r.uid||e,n=this.taskKey(a,t,s),u=this.tasks.get(n);return u?(this.updateTask(u,o),u):this.createTask(e,r,t,s,n,o)}doneLoadingCallback(e,t){this.loadQueue&&(i$25(2===e.status),e.status=3,this.taskHandle?this.doneQueue.push({task:e,err:t}):this.doneLoading(e,t));}get running(){return this.doneQueue.length>0||this.onLoadQueue.length>0}runTask(e){for(;!e.done&&this.onLoadQueue.length>0;){const t=this.onLoadQueue.shift();h$1E(t.task.abortController),t.task.abortController=null,t.callback(t.task),e.madeProgress();}for(;!e.done&&this.doneQueue.length>0;){const t=this.doneQueue.shift();3!==t.task.status&&(t.err=t.err||m$2e()),this.doneLoading(t.task,t.err),e.madeProgress();}}doneLoading(e,t){let s=e.result instanceof HTMLImageElement?0:e.resolvers.length;for(const r of e.resolvers)if(t)d$1Z(t)?r.reject(t):r.reject(new s$2l("stream-data-loader:request-error",`Failed to request resource at '${e.url}'. ${t}`,{url:e.url,error:t}));else {--s;const t=s<=0?e.result:l$2w(e.result);r.resolve(t);}this.tasks.delete(e.key),0===this.tasks.size&&this._set("updating",!1);}startLoading(e,s){if(4===e.status)return !1;let r,o;switch(e.startTime=performance.now(),e.status=2,e.docType){case"binary":o="array-buffer",r=0;break;case"image":o="image";break;case"image+type":o="array-buffer";break;default:o="json";}e.abortController=new AbortController;const a=e.abortController.signal;e.request=E$v(e.url,{...e.options,responseType:o,timeout:r,signal:a});let n=()=>{};const i=t=>{e.duration=performance.now()-e.startTime,e.size=t instanceof ArrayBuffer?t.byteLength:e.size||0,e.result=t,this.taskHandle?this.onLoadQueue.push({callback:s,task:e}):(e.abortController=null,s(e));},u=t=>{2===e.status&&s(e,t),n();};return "image+type"!==e.docType?(e.request.then((e=>i(e.data)),u),!0):(e.request.then((s=>{const l=s.data,d=L$p(l);if(o="image",e.size=l.byteLength,"unknown"===d)return e.request=E$v(e.url,{responseType:o,timeout:r,signal:a}),void e.request.then((e=>i(e.data)),u);const h=new Blob([l],{type:d}),c=window.URL.createObjectURL(h);n=()=>window.URL.revokeObjectURL(c),e.request=E$v(c,{responseType:o,timeout:r,signal:a}),e.request.then((e=>i(new j$E(e.data,d,n))),u);}),u),!0)}get test(){return {loadQueue:this.loadQueue}}};function L$p(e){if(e.byteLength<2)return "unknown";const t=new Uint8Array(e,0,e.byteLength);return 137===t[0]&&80===t[1]?"image/png":71===t[0]&&73===t[1]?"image/gif":66===t[0]&&77===t[1]?"image/bmp":255===t[0]&&216===t[1]?"image/jpeg":"unknown"}e$25([d$1T({readOnly:!0})],y$1g.prototype,"updating",void 0),y$1g=e$25([i$2z("esri.views.3d.support.StreamDataLoader")],y$1g);class j$E{constructor(e,t,s){this.image=e,this.type=t,this.release=s;}get isOpaque(){return "image/jpeg"===this.type}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function T$l(e){return new k$w({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const G$d=T$l(s$1V),I$t=T$l(t$1r),E$m=T$l(e$1D),R$o=new k$w({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${s$1V.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function A$j(n){return n&&n===t$1r?I$t:n&&n===e$1D?E$m:G$d}function O$l(n){return n&&(G$j(n)||n===I$t)?I$t:n&&(C$w(n)||n===E$m)?E$m:G$d}function p$2N(n){return n&&(G$j(n)||n===I$t)?t$1r:n&&(C$w(n)||n===E$m)?e$1D:s$1V}function u$1E(n){return w$U(n)?t$1r:P$q(n)?e$1D:s$1V}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$1O=39.37,f$1f=s$1V.radius*Math.PI/200,d$1v=/UNIT\[([^\]]+)\]\]$/i,U$i=r$1l,q$h=/UNIT\[([^\]]+)\]/i,B$d=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),p$2M=s$24()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),h$1g=e=>e*e,k$p=e=>e*e*e,y$1f={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:h$1g(.001)},"square-centimeters":{inBaseUnits:h$1g(.01)},"square-decimeters":{inBaseUnits:h$1g(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:h$1g(1e3)},"square-inches":{inBaseUnits:h$1g(.0254)},"square-feet":{inBaseUnits:h$1g(.3048)},"square-yards":{inBaseUnits:h$1g(.9144)},"square-miles":{inBaseUnits:h$1g(1609.344)},"square-us-feet":{inBaseUnits:h$1g(1200/3937)},acres:{inBaseUnits:.0015625*h$1g(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*k$p(.001)},"cubic-centimeters":{inBaseUnits:1e3*k$p(.01)},"cubic-decimeters":{inBaseUnits:1e3*k$p(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*k$p(1e3)},"cubic-inches":{inBaseUnits:1e3*k$p(.0254)},"cubic-feet":{inBaseUnits:1e3*k$p(.3048)},"cubic-yards":{inBaseUnits:1e3*k$p(.9144)},"cubic-miles":{inBaseUnits:1e3*k$p(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},b$T=function(){const e={};for(const s in y$1f)for(const r in y$1f[s].units)e[r]=s;return e}();function _$s(e,s,r){return e*y$1f[r].units[s].inBaseUnits}function g$U(e,s,r){return e/y$1f[r].units[s].inBaseUnits}function M$t(e){const s=b$T[e];if(s)return s;throw new Error("unknown measure")}function C$p(e,s=null){return s=s||M$t(e),y$1f[s].baseUnit===e}function D$k(e,s,r){if(s===r)return e;const t=M$t(s);if(t!==M$t(r))throw new Error("incompatible units");const i=C$p(s,t)?e:_$s(e,s,t);return C$p(r,t)?i:g$U(i,r,t)}function R$n(e,s,r){return D$k(e,s,"meters")/(r*Math.PI/180)}function A$i(e){return p$2M.fromJSON(e.toLowerCase())||null}function Y$a(e){if(e&&"object"==typeof e&&!o$1w(e))return 1;const s=H$c(e);return s>1e5?1:s}function G$c(e){return H$c(e)>=(e instanceof k$w?p$2N(e).metersPerDegree:1e5)?"meters":z$h(e)}function H$c(e,s=s$1V.metersPerDegree){return L$o(e,!0)||s}function L$o(e,s=!1){let r,t,i=null;if(null!=e&&("object"==typeof e?(r=e.wkid,t=e.wkt):"number"==typeof e?r=e:"string"==typeof e&&(t=e)),r){if(w$U(r))return t$1r.metersPerDegree;if(P$q(r))return e$1D.metersPerDegree;i=U$i.values[U$i[r]],!i&&s&&B$d.has(r)&&(i=f$1f);}else t&&(V$c(t)?i=W$9(d$1v.exec(t),i):Q$9(t)&&(i=W$9(q$h.exec(t),i)));return i}function W$9(e,s){return e&&e[1]?$$e(e[1]):s}function $$e(e){return parseFloat(e.split(",")[1])}function z$h(e){let r,t,i=null;if(null!=e&&("object"==typeof e?(r=e.wkid,t=e.wkt):"number"==typeof e?r=e:"string"==typeof e&&(t=e)),r)i=U$i.units[U$i[r]];else if(t){const e=V$c(t)?d$1v:Q$9(t)?q$h:null;if(e){const s=e.exec(t);s&&s[1]&&(i=Z$9(s[1]));}}return r$1K(i)?A$i(i):null}function Q$9(e){return /^GEOCCS/i.test(e)}function V$c(e){return /^PROJCS/i.test(e)}const X$a=1e-7;function Z$9(e){const s=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let r=s&&s[1];if(!r||-1===U$i.units.indexOf(r)){const s=$$e(e);r=null;const t=U$i.values;for(let e=0;e<t.length;++e)if(Math.abs(s-t[e])<X$a){r=U$i.units[e];break}}return r}const se$7={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},re$7={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},te$7=s$24()(se$7),ie$6=s$24()(re$7);s$24()({...se$7,...re$7});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function h$1f(h,a,s=!1){let{hasM:t,hasZ:e}=h;Array.isArray(a)?4!==a.length||t||e?3===a.length&&s&&!t?(e=!0,t=!1):3===a.length&&t&&e&&(t=!1,e=!1):(t=!0,e=!0):(e=!e&&a.hasZ&&(!t||a.hasM),t=!t&&a.hasM&&(!e||a.hasZ)),h.hasZ=e,h.hasM=t;}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var h$1e;function l$20(t){return (s,e)=>null==s?e:null==e?s:t(s,e)}function c$2H(t){return t&&("esri.geometry.SpatialReference"===t.declaredClass||null!=t.wkid)}let u$1D=h$1e=class extends p$2${constructor(...t){super(...t),this.points=[],this.type="multipoint";}normalizeCtorArgs(t,s){if(!t&&!s)return null;const e={};Array.isArray(t)?(e.points=t,e.spatialReference=s):c$2H(t)?e.spatialReference=t:(t.points&&(e.points=t.points),t.spatialReference&&(e.spatialReference=t.spatialReference),t.hasZ&&(e.hasZ=t.hasZ),t.hasM&&(e.hasM=t.hasM));const i=e.points&&e.points[0];return i&&(void 0===e.hasZ&&void 0===e.hasM?(e.hasZ=i.length>2,e.hasM=!1):void 0===e.hasZ?e.hasZ=i.length>3:void 0===e.hasM&&(e.hasM=i.length>3)),e}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const s=new M$A,e=this.hasZ,i=this.hasM,r=e?3:2,o=t[0],a=l$20(Math.min),p=l$20(Math.max);let h,c,u,m,[f,y]=o,[d,g]=o;for(let n=0,l=t.length;n<l;n++){const s=t[n],[o,l]=s;if(f=a(f,o),y=a(y,l),d=p(d,o),g=p(g,l),e&&s.length>2){const t=s[2];h=a(h,t),u=p(u,t);}if(i&&s.length>r){const t=s[r];c=a(c,t),m=p(m,t);}}return s.xmin=f,s.ymin=y,s.xmax=d,s.ymax=g,s.spatialReference=this.spatialReference,e?(s.zmin=h,s.zmax=u):(s.zmin=null,s.zmax=null),i?(s.mmin=c,s.mmax=m):(s.mmin=null,s.mmax=null),s}writePoints(t,e){e.points=l$2w(this.points);}addPoint(t){return h$1f(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:l$2w(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new h$1e(t)}getPoint(t){if(!this._validateInputs(t))return null;const s=this.points[t],e={x:s[0],y:s[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(e.z=s[2],i=3),this.hasM&&(e.m=s[i]),new b$10(e)}removePoint(t){if(!this._validateInputs(t))return null;const s=new b$10(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),s}setPoint(t,s){return this._validateInputs(t)?(h$1f(this,s),Array.isArray(s)||(s=s.toArray()),this.points[t]=s,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return null!=t&&t>=0&&t<this.points.length}};e$25([d$1T({readOnly:!0})],u$1D.prototype,"cache",null),e$25([d$1T()],u$1D.prototype,"extent",null),e$25([d$1T({type:[[Number]],json:{write:{isRequired:!0}}})],u$1D.prototype,"points",void 0),e$25([r$1m("points")],u$1D.prototype,"writePoints",null),u$1D=h$1e=e$25([i$2z("esri.geometry.Multipoint")],u$1D),u$1D.prototype.toJSON.isDefaultToJSON=!0;const m$1N=u$1D;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let o$1h,r$1a=null;function n$2j(){return !!r$1a}function _$r(){return !!s$2r("esri-wasm")}function P$k(){return o$1h||(o$1h=import('./pe-wasm.js').then((e=>e.p)).then((({default:t})=>t({locateFile:t=>a$34(`esri/geometry/support/${t}`)}))).then((e=>{N$j(e);})),o$1h)}var s$1G,E$l,i$21;!function(e){function t(e,t,o){r$1a.ensureCache.prepare();const n=A$h(o),_=o===n,P=r$1a.ensureFloat64(n),s=r$1a._pe_geog_to_proj(r$1a.getPointer(e),t,P);return s&&d$1u(o,t,P,_),s}function o(e,o,r,_){switch(_){case E$l.PE_TRANSFORM_P_TO_G:return n(e,o,r);case E$l.PE_TRANSFORM_G_TO_P:return t(e,o,r)}return 0}function n(e,t,o){return _(e,t,o,0)}function _(e,t,o,n){r$1a.ensureCache.prepare();const _=A$h(o),P=o===_,s=r$1a.ensureFloat64(_),E=r$1a._pe_proj_to_geog_center(r$1a.getPointer(e),t,s,n);return E&&d$1u(o,t,s,P),E}e.geogToProj=t,e.projGeog=o,e.projToGeog=n,e.projToGeogCenter=_;}(s$1G||(s$1G={})),function(e){function t(){e.PE_BUFFER_MAX=r$1a.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=r$1a.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=r$1a.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=r$1a.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=r$1a.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=r$1a.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=r$1a.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=r$1a.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=r$1a.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=r$1a.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=r$1a.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=r$1a.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=r$1a.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=r$1a.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=r$1a.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=r$1a.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=r$1a.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=r$1a.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=r$1a.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=r$1a.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=r$1a.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=r$1a.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=r$1a.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=r$1a.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=r$1a.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=r$1a.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=r$1a.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=r$1a.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=r$1a.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=r$1a.PeDefs.prototype.PE_HORIZON_DELTA;}e.init=t;}(E$l||(E$l={})),function(e){const t={},o={},n=e=>{if(e){const t=e.getType();switch(t){case E$l.PE_TYPE_GEOGCS:e=r$1a.castObject(e,r$1a.PeGeogcs);break;case E$l.PE_TYPE_PROJCS:e=r$1a.castObject(e,r$1a.PeProjcs);break;case E$l.PE_TYPE_GEOGTRAN:e=r$1a.castObject(e,r$1a.PeGeogtran);break;default:t&E$l.PE_TYPE_UNIT&&(e=r$1a.castObject(e,r$1a.PeUnit));}}return e};function _(){r$1a.PeFactory.prototype.initialize(null);}function P(e){return s(E$l.PE_TYPE_COORDSYS,e)}function s(e,o){let _=null,P=t[e];if(P||(P={},t[e]=P),P.hasOwnProperty(String(o)))_=P[o];else {const t=r$1a.PeFactory.prototype.factoryByType(e,o);r$1a.compare(t,r$1a.NULL)||(_=t,P[o]=_);}return _=n(_),_}function i(e,t){let _=null,P=o[e];if(P||(P={},o[e]=P),P.hasOwnProperty(t))_=P[t];else {const o=r$1a.PeFactory.prototype.fromString(e,t);r$1a.compare(o,r$1a.NULL)||(_=o,P[t]=_);}return _=n(_),_}function p(e){return s(E$l.PE_TYPE_GEOGCS,e)}function u(e){return s(E$l.PE_TYPE_GEOGTRAN,e)}function c(e){return r$1a.PeFactory.prototype.getCode(e)}function a(e){return s(E$l.PE_TYPE_PROJCS,e)}function g(e){return s(E$l.PE_TYPE_UNIT,e)}e.initialize=_,e.coordsys=P,e.factoryByType=s,e.fromString=i,e.geogcs=p,e.geogtran=u,e.getCode=c,e.projcs=a,e.unit=g;}(i$21||(i$21={}));let p$2L=null;var u$1C,c$2G,a$2z,g$T,T$k,f$1e,O$k,S$y,l$1$;function N$j(e){function t(e,t,o){e[t]=o(e[t]);}r$1a=e,E$l.init(),u$1C.init(),T$k.init(),O$k.init(),S$y.init(),p$2L=class extends r$1a.PeGCSExtent{destroy(){r$1a.destroy(this);}};const o=[r$1a.PeDatum,r$1a.PeGeogcs,r$1a.PeGeogtran,r$1a.PeObject,r$1a.PeParameter,r$1a.PePrimem,r$1a.PeProjcs,r$1a.PeSpheroid,r$1a.PeUnit];for(const r of o)t(r.prototype,"getName",(e=>function(){return e.call(this,new Array(E$l.PE_NAME_MAX))}));for(const P of [r$1a.PeGeogtran,r$1a.PeProjcs])t(P.prototype,"getParameters",(e=>function(){const t=new Array(E$l.PE_PARM_MAX);let o=e.call(this);for(let e=0;e<t.length;e++){const n=r$1a.getValue(o,"*");t[e]=n?r$1a.wrapPointer(n,r$1a.PeParameter):null,o+=Int32Array.BYTES_PER_ELEMENT;}return t}));t(r$1a.PeHorizon.prototype,"getCoord",(e=>function(){const t=this.getSize();if(!t)return null;const o=[];return d$1u(o,t,e.call(this)),o})),t(r$1a.PeGTlistExtendedEntry.prototype,"getEntries",(e=>{const t=r$1a._pe_getPeGTlistExtendedGTsSize();return function(){let o=null;const n=e.call(this);if(!r$1a.compare(n,r$1a.NULL)){o=[n];const e=this.getSteps();if(e>1){const _=r$1a.getPointer(n);for(let n=1;n<e;n++)o.push(r$1a.wrapPointer(_+t*n,r$1a.PeGTlistExtendedGTs));}}return o}}));const n=r$1a._pe_getPeHorizonSize(),_=e=>function(){let t=this._cache;if(t||(t=new Map,this._cache=t),t.has(e))return t.get(e);let o=null;const _=e.call(this);if(!r$1a.compare(_,r$1a.NULL)){o=[_];const e=_.getNump();if(e>1){const t=r$1a.getPointer(_);for(let _=1;_<e;_++)o.push(r$1a.wrapPointer(t+n*_,r$1a.PeHorizon));}}return t.set(e,o),o};t(r$1a.PeProjcs.prototype,"horizonGcsGenerate",_),t(r$1a.PeProjcs.prototype,"horizonPcsGenerate",_),r$1a.PeObject.prototype.toString=function(e=E$l.PE_STR_OPTS_NONE){r$1a.ensureCache.prepare();const t=r$1a.getPointer(this),o=r$1a.ensureInt8(new Array(E$l.PE_BUFFER_MAX));return r$1a.UTF8ToString(r$1a._pe_object_to_string_ext(t,e,o))};}function y$1e(e){if(!e)return;const t=r$1a.getClass(e);if(!t)return;const o=r$1a.getCache(t);if(!o)return;const n=r$1a.getPointer(e);n&&delete o[n];}function M$s(e,t){const o=[],n=new Array(t);for(let _=0;_<e;_++)o.push(r$1a.ensureInt8(n));return o}function A$h(e){let t;return Array.isArray(e[0])?(t=[],e.forEach((e=>{t.push(e[0],e[1]);}))):t=e,t}function d$1u(e,t,o,n=!1){if(n)for(let _=0;_<2*t;_++)e[_]=r$1a.getValue(o+_*Float64Array.BYTES_PER_ELEMENT,"double");else {const n=0===e.length;for(let _=0;_<t;_++)n&&(e[_]=new Array(2)),e[_][0]=r$1a.getValue(o,"double"),e[_][1]=r$1a.getValue(o+Float64Array.BYTES_PER_ELEMENT,"double"),o+=2*Float64Array.BYTES_PER_ELEMENT;}}!function(e){let t;function o(){e.PE_GTLIST_OPTS_COMMON=r$1a.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=r$1a._pe_getPeGTlistExtendedEntrySize();}function n(e,o,n,_,P,s){let E=null;const i=new r$1a.PeInteger(s);try{const p=r$1a.PeGTlistExtended.prototype.getGTlist(e,o,n,_,P,i);if((s=i.val)&&(E=[p],s>1)){const e=r$1a.getPointer(p);for(let o=1;o<s;o++)E.push(r$1a.wrapPointer(e+t*o,r$1a.PeGTlistExtendedEntry));}}finally{r$1a.destroy(i);}return E}e.init=o,e.getGTlist=n;}(u$1C||(u$1C={})),function(e){function t(e){if(e&&e.length){for(const t of e)y$1e(t),t.getEntries().forEach((e=>{y$1e(e);const t=e.getGeogtran();y$1e(t),t.getParameters().forEach(y$1e),[t.getGeogcs1(),t.getGeogcs2()].forEach((e=>{y$1e(e);const t=e.getDatum();y$1e(t),y$1e(t.getSpheroid()),y$1e(e.getPrimem()),y$1e(e.getUnit());}));}));r$1a.PeGTlistExtendedEntry.prototype.Delete(e[0]);}}e.destroy=t;}(c$2G||(c$2G={})),function(e){function t(e,t,o,n,_){r$1a.ensureCache.prepare();const P=A$h(o),s=o===P,E=r$1a.ensureFloat64(P);let i=0;n&&(i=r$1a.ensureFloat64(n));const p=r$1a._pe_geog_to_geog(r$1a.getPointer(e),t,E,i,_);return p&&d$1u(o,t,E,s),p}e.geogToGeog=t;}(a$2z||(a$2z={})),function(e){const t=(e,t,o,n,_,P)=>{let s,i;switch(r$1a.ensureCache.prepare(),e){case"dd":s=r$1a._pe_geog_to_dd,i=E$l.PE_DD_MAX;break;case"ddm":s=r$1a._pe_geog_to_ddm,i=E$l.PE_DDM_MAX;break;case"dms":s=r$1a._pe_geog_to_dms,i=E$l.PE_DMS_MAX;}let p=0;t&&(p=r$1a.getPointer(t));const u=A$h(n),c=r$1a.ensureFloat64(u),a=M$s(o,i),g=s(p,o,c,_,r$1a.ensureInt32(a));if(g)for(let E=0;E<o;E++)P[E]=r$1a.UTF8ToString(a[E]);return g},o=(e,t,o,n,_)=>{let P;switch(r$1a.ensureCache.prepare(),e){case"dd":P=r$1a._pe_dd_to_geog;break;case"ddm":P=r$1a._pe_ddm_to_geog;break;case"dms":P=r$1a._pe_dms_to_geog;}let s=0;t&&(s=r$1a.getPointer(t));const E=n.map((e=>r$1a.ensureString(e))),i=r$1a.ensureInt32(E),p=r$1a.ensureFloat64(new Array(2*o)),u=P(s,o,i,p);return u&&d$1u(_,o,p),u};function n(e,o,r,n,_){return t("dms",e,o,r,n,_)}function _(e,t,r,n){return o("dms",e,t,r,n)}function P(e,o,r,n,_){return t("ddm",e,o,r,n,_)}function s(e,t,r,n){return o("ddm",e,t,r,n)}function i(e,o,r,n,_){return t("dd",e,o,r,n,_)}function p(e,t,r,n){return o("dd",e,t,r,n)}e.geog_to_dms=n,e.dms_to_geog=_,e.geog_to_ddm=P,e.ddm_to_geog=s,e.geog_to_dd=i,e.dd_to_geog=p;}(g$T||(g$T={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=r$1a.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=r$1a.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=r$1a.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=r$1a.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=r$1a.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES;}function o(e,t,o,n,_,P,s){r$1a.ensureCache.prepare();let i=0;e&&(i=r$1a.getPointer(e));const p=A$h(o),u=r$1a.ensureFloat64(p),c=M$s(t,E$l.PE_MGRS_MAX),a=r$1a.ensureInt32(c),g=r$1a._pe_geog_to_mgrs_extended(i,t,u,n,_,P,a);if(g)for(let E=0;E<t;E++)s[E]=r$1a.UTF8ToString(c[E]);return g}function n(e,t,o,n,_){r$1a.ensureCache.prepare();let P=0;e&&(P=r$1a.getPointer(e));const s=o.map((e=>r$1a.ensureString(e))),E=r$1a.ensureInt32(s),i=r$1a.ensureFloat64(new Array(2*t)),p=r$1a._pe_mgrs_to_geog_extended(P,t,E,n,i);return p&&d$1u(_,t,i),p}e.init=t,e.geog_to_mgrs_extended=o,e.mgrs_to_geog_extended=n;}(T$k||(T$k={})),function(e){function t(e,t,o,n,_,P,s){r$1a.ensureCache.prepare();let i=0;e&&(i=r$1a.getPointer(e));const p=A$h(o),u=r$1a.ensureFloat64(p),c=M$s(t,E$l.PE_MGRS_MAX),a=r$1a.ensureInt32(c),g=r$1a._pe_geog_to_usng(i,t,u,n,_,P,a);if(g)for(let E=0;E<t;E++)s[E]=r$1a.UTF8ToString(c[E]);return g}function o(e,t,o,n){r$1a.ensureCache.prepare();let _=0;e&&(_=r$1a.getPointer(e));const P=o.map((e=>r$1a.ensureString(e))),s=r$1a.ensureInt32(P),E=r$1a.ensureFloat64(new Array(2*t)),i=r$1a._pe_usng_to_geog(_,t,s,E);return i&&d$1u(n,t,E),i}e.geog_to_usng=t,e.usng_to_geog=o;}(f$1e||(f$1e={})),function(e){function t(){e.PE_UTM_OPTS_NONE=r$1a.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=r$1a.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=r$1a.PeNotationUtm.prototype.PE_UTM_OPTS_NS;}function o(e,t,o,n,_){r$1a.ensureCache.prepare();let P=0;e&&(P=r$1a.getPointer(e));const s=A$h(o),i=r$1a.ensureFloat64(s),p=M$s(t,E$l.PE_UTM_MAX),u=r$1a.ensureInt32(p),c=r$1a._pe_geog_to_utm(P,t,i,n,u);if(c)for(let E=0;E<t;E++)_[E]=r$1a.UTF8ToString(p[E]);return c}function n(e,t,o,n,_){r$1a.ensureCache.prepare();let P=0;e&&(P=r$1a.getPointer(e));const s=o.map((e=>r$1a.ensureString(e))),E=r$1a.ensureInt32(s),i=r$1a.ensureFloat64(new Array(2*t)),p=r$1a._pe_utm_to_geog(P,t,E,n,i);return p&&d$1u(_,t,i),p}e.init=t,e.geog_to_utm=o,e.utm_to_geog=n;}(O$k||(O$k={})),function(e){const t=new Map;function o(){e.PE_PCSINFO_OPTION_NONE=r$1a.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=r$1a.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=r$1a.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=r$1a.PePCSInfo.prototype.PE_POLE_POINT;}function n(o,n=e.PE_PCSINFO_OPTION_DOMAIN){let _,P;return t.has(o)&&(P=t.get(o),P[n]&&(_=P[n])),_||(_=r$1a.PePCSInfo.prototype.generate(o,n),P||(P=[],t.set(o,P)),P[n]=_),_}e.init=o,e.generate=n;}(S$y||(S$y={})),function(e){function t(){return r$1a.PeVersion.prototype.version_string()}e.version_string=t;}(l$1$||(l$1$={}));const R$m=Object.freeze({__proto__:null,get _pe(){return r$1a},isLoaded:n$2j,isSupported:_$r,load:P$k,get PeCSTransformations(){return s$1G},get PeDefs(){return E$l},get PeFactory(){return i$21},get PeGCSExtent(){return p$2L},get PeGTlistExtended(){return u$1C},get PeGTlistExtendedEntry(){return c$2G},get PeGTTransformations(){return a$2z},get PeNotationDms(){return g$T},get PeNotationMgrs(){return T$k},get PeNotationUsng(){return f$1e},get PeNotationUtm(){return O$k},get PePCSInfo(){return S$y},get PeVersion(){return l$1$},_init:N$j});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1n(n,t){const e=t[0]-n[0],r=t[1]-n[1];if(n.length>2&&t.length>2){const o=n[2]-t[2];return Math.sqrt(e*e+r*r+o*o)}return Math.sqrt(e*e+r*r)}function r$19(n,t,e){const r=n[0]+e*(t[0]-n[0]),o=n[1]+e*(t[1]-n[1]);return n.length>2&&t.length>2?[r,o,n[2]+e*(t[2]-n[2])]:[r,o]}function o$1g(n,t,e,r){const[o,i]=t,[s,l]=e[r],[f,u]=e[r+1],h=f-s,c=u-l,a=h*h+c*c,g=(o-s)*h+(i-l)*c,m=Math.min(1,Math.max(0,g/a));return n[0]=s+h*m,n[1]=l+c*m,n}function i$20(n,t){return r$19(n,t,.5)}function f$1d(n,t,e){const r=n.length;let o=0,i=0,s=0;for(let l=0;l<r;l++){const f=n[l],u=n[(l+1)%r];let h=2;o+=f[0]*u[1]-u[0]*f[1],f.length>2&&u.length>2&&e&&(i+=f[0]*u[2]-u[0]*f[2],h=3),f.length>h&&u.length>h&&t&&(s+=f[0]*u[h]-u[0]*f[h]);}return o<=0&&i<=0&&s<=0}function u$1B(n){if("rings"in n){for(const t of n.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(n.rings.length>0){if(!f$1d(n.rings[0],n.hasM,n.hasZ))for(let t=0;t<n.rings.length;++t)n.rings[t]=n.rings[t].reverse();}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1m(n){return n?o$1f(n.rings,n.hasZ):null}function o$1f(n,t){if(!n||!n.length)return null;const l=[],e=[],o=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let h=0,i=n.length;h<i;h++){const l=r$18(n[h],t,o);l&&e.push(l);}if(e.sort(((n,l)=>{let e=n[2]-l[2];return 0===e&&t&&(e=n[4]-l[4]),e})),e.length&&(l[0]=e[0][0],l[1]=e[0][1],t&&(l[2]=e[0][3]),(l[0]<o[0]||l[0]>o[1]||l[1]<o[2]||l[1]>o[3]||t&&(l[2]<o[4]||l[2]>o[5]))&&(l.length=0)),!l.length){const e=n[0]&&n[0].length?h$1d(n[0],t):null;if(!e)return null;l[0]=e[0],l[1]=e[1],t&&e.length>2&&(l[2]=e[2]);}return l}function r$18(n,t,l){let e=0,o=0,r=0,h=0,i=0;const u=n.length?n[0][0]:0,g=n.length?n[0][1]:0,s=n.length&&t?n[0][2]:0;for(let f=0;f<n.length;f++){const c=n[f],m=n[(f+1)%n.length],[x,a,y]=c,d=x-u,p=a-g,v=t?y-s:void 0,[z,Z,j]=m,U=z-u,b=Z-g,k=t?j-s:void 0,q=d*b-U*p;if(h+=q,e+=(d+U)*q,o+=(p+b)*q,t&&c.length>2&&m.length>2){const n=d*k-U*v;r+=(v+k)*n,i+=n;}x<l[0]&&(l[0]=x),x>l[1]&&(l[1]=x),a<l[2]&&(l[2]=a),a>l[3]&&(l[3]=a),t&&(y<l[4]&&(l[4]=y),y>l[5]&&(l[5]=y));}if(h>0&&(h*=-1),i>0&&(i*=-1),!h)return null;h*=.5,i*=.5;const c=[e/(6*h)+u,o/(6*h)+g,h];return t&&(l[4]===l[5]||0===i?(c[3]=(l[4]+l[5])/2,c[4]=0):(c[3]=r/(6*i)+s,c[4]=i)),c}function h$1d(l,e){const o=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let h=0,i=0,u=0,g=0;for(let s=0,c=l.length;s<c-1;s++){const c=l[s],f=l[s+1];if(c&&f){o[0]=c[0],o[1]=c[1],r[0]=f[0],r[1]=f[1],e&&c.length>2&&f.length>2&&(o[2]=c[2],r[2]=f[2]);const l=e$1n(o,r);if(l){h+=l;const n=i$20(c,f);i+=l*n[0],u+=l*n[1],e&&n.length>2&&(g+=l*n[2]);}}}return h>0?e?[i/h,u/h,g/h]:[i/h,u/h]:l.length?l[0]:null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2i(n){return void 0!==n.xmin&&void 0!==n.ymin&&void 0!==n.xmax&&void 0!==n.ymax}function t$1j(n){return void 0!==n.points}function e$1l(n){return void 0!==n.x&&void 0!==n.y}function o$1e(n){return void 0!==n.paths}function i$1$(n){return void 0!==n.rings}function l$1_(n){return (t,e)=>null==t?e:null==e?t:n(t,e)}const r$17=l$1_(Math.min),u$1A=l$1_(Math.max);function c$2F(l,r){return o$1e(r)?h$1c(l,r.paths,!1,!1):i$1$(r)?h$1c(l,r.rings,!1,!1):t$1j(r)?s$1F(l,r.points,!1,!1,!1,!1):n$2i(r)?g$S(l,r):(e$1l(r)&&(l[0]=r.x,l[1]=r.y,l[2]=r.x,l[3]=r.y),l)}function f$1c(l,r){return o$1e(r)?h$1c(l,r.paths,!0,!1):i$1$(r)?h$1c(l,r.rings,!0,!1):t$1j(r)?s$1F(l,r.points,!0,!1,!0,!1):n$2i(r)?g$S(l,r,!0,!1,!0,!1):(e$1l(r)&&(l[0]=r.x,l[1]=r.y,l[2]=r.z,l[3]=r.x,l[4]=r.y,l[5]=r.z),l)}function h$1c(n,t,e,o){const i=e?3:2;if(!t.length||!t[0].length)return null;let l,c,f,h,[g,s]=t[0][0],[x,m]=t[0][0];for(let a=0;a<t.length;a++){const n=t[a];for(let t=0;t<n.length;t++){const a=n[t],[d,v]=a;if(g=r$17(g,d),s=r$17(s,v),x=u$1A(x,d),m=u$1A(m,v),e&&a.length>2){const n=a[2];l=r$17(l,n),c=u$1A(c,n);}if(o&&a.length>i){const n=a[i];f=r$17(l,n),h=u$1A(c,n);}}}return e?o?(n[0]=g,n[1]=s,n[2]=l,n[3]=f,n[4]=x,n[5]=m,n[6]=c,n[7]=h,n.length=8,n):(n[0]=g,n[1]=s,n[2]=l,n[3]=x,n[4]=m,n[5]=c,n.length=6,n):o?(n[0]=g,n[1]=s,n[2]=f,n[3]=x,n[4]=m,n[5]=h,n.length=6,n):(n[0]=g,n[1]=s,n[2]=x,n[3]=m,n.length=4,n)}function g$S(n,t,e,o,i,l){const r=t.xmin,u=t.xmax,c=t.ymin,f=t.ymax;let h=t.zmin,g=t.zmax,s=t.mmin,x=t.mmax;return i?(h=h||0,g=g||0,l?(s=s||0,x=x||0,n[0]=r,n[1]=c,n[2]=h,n[3]=s,n[4]=u,n[5]=f,n[6]=g,n[7]=x,n):(n[0]=r,n[1]=c,n[2]=h,n[3]=u,n[4]=f,n[5]=g,n)):l?(s=s||0,x=x||0,n[0]=r,n[1]=c,n[2]=s,n[3]=u,n[4]=f,n[5]=x,n):(n[0]=r,n[1]=c,n[2]=u,n[3]=f,n)}function s$1F(n,t,e,o,i,l){const c=e?3:2,f=o&&l,h=e&&i;if(!t.length||!t[0].length)return null;let g,s,x,m,[a,d]=t[0],[v,y]=t[0];for(let p=0;p<t.length;p++){const n=t[p],[e,o]=n;if(a=r$17(a,e),d=r$17(d,o),v=u$1A(v,e),y=u$1A(y,o),h&&n.length>2){const t=n[2];g=r$17(g,t),s=u$1A(s,t);}if(f&&n.length>c){const t=n[c];x=r$17(g,t),m=u$1A(s,t);}}return i?(g=g||0,s=s||0,l?(x=x||0,m=m||0,n[0]=a,n[1]=d,n[2]=g,n[3]=x,n[4]=v,n[5]=y,n[6]=s,n[7]=m,n):(n[0]=a,n[1]=d,n[2]=g,n[3]=v,n[4]=y,n[5]=s,n)):l?(x=x||0,m=m||0,n[0]=a,n[1]=d,n[2]=x,n[3]=v,n[4]=y,n[5]=m,n):(n[0]=a,n[1]=d,n[2]=v,n[3]=y,n)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$1i(n){return void 0!==n.xmin&&void 0!==n.ymin&&void 0!==n.xmax&&void 0!==n.ymax}function u$1z(n){return void 0!==n.points}function m$1M(n){return void 0!==n.x&&void 0!==n.y}function o$1d(n){return void 0!==n.paths}function r$16(n){return void 0!==n.rings}const x$u=[];function a$2y(n,i,t,u){return {xmin:n,ymin:i,xmax:t,ymax:u}}function c$2E(n,i,t,u,m,o){return {xmin:n,ymin:i,zmin:t,xmax:u,ymax:m,zmax:o}}function s$1E(n,i,t,u,m,o){return {xmin:n,ymin:i,mmin:t,xmax:u,ymax:m,mmax:o}}function e$1k(n,i,t,u,m,o,r,x){return {xmin:n,ymin:i,zmin:t,mmin:u,xmax:m,ymax:o,zmax:r,mmax:x}}function f$1b(n,i=!1,t=!1){return i?t?e$1k(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]):c$2E(n[0],n[1],n[2],n[3],n[4],n[5]):t?s$1E(n[0],n[1],n[2],n[3],n[4],n[5]):a$2y(n[0],n[1],n[2],n[3])}function l$1Z(n){return n?t$1i(n)?n:m$1M(n)?d$1t(n):r$16(n)?v$K(n):o$1d(n)?h$1b(n):u$1z(n)?y$1d(n):null:null}function y$1d(i){const{hasZ:t,hasM:u,points:m}=i;return f$1b(s$1F(x$u,m,t,u),t,u)}function d$1t(n){const{x:i,y:t,z:u,m}=n,o=null!=m;return null!=u?o?e$1k(i,t,u,m,i,t,u,m):c$2E(i,t,u,i,t,u):o?s$1E(i,t,m,i,t,m):a$2y(i,t,i,t)}function v$K(n){const{hasZ:t,hasM:u,rings:m}=n,o=h$1c(x$u,m,t,u);return o?f$1b(o,t,u):null}function h$1b(n){const{hasZ:t,hasM:u,paths:m}=n,o=h$1c(x$u,m,t,u);return o?f$1b(o,t,u):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var x$t;function j$D(t){return !Array.isArray(t[0])}let w$J=x$t=class extends p$2${constructor(...t){super(...t),this.rings=[],this.type="polygon";}static fromExtent(t){const r=t.clone().normalize(),e=t.spatialReference;let s=!1,i=!1;for(const o of r)o.hasZ&&(s=!0),o.hasM&&(i=!0);const n={rings:r.map((function(t){const r=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];if(s&&t.hasZ){const e=t.zmin+.5*(t.zmax-t.zmin);for(let t=0;t<r.length;t++)r[t].push(e);}if(i&&t.hasM){const e=t.mmin+.5*(t.mmax-t.mmin);for(let t=0;t<r.length;t++)r[t].push(e);}return r})),spatialReference:e};return s&&(n.hasZ=!0),i&&(n.hasM=!0),new x$t(n)}normalizeCtorArgs(t,r){let e,s,i=null,n=null;return t&&!Array.isArray(t)?(i=t.rings?t.rings:null,r||(t.spatialReference?r=t.spatialReference:t.rings||(r=t)),e=t.hasZ,s=t.hasM):i=t,i=i||[],r=r||k$w.WGS84,i.length&&i[0]&&null!=i[0][0]&&"number"==typeof i[0][0]&&(i=[i]),n=i[0]&&i[0][0],n&&(void 0===e&&void 0===s?(e=n.length>2,s=n.length>3):void 0===e?e=s?n.length>3:n.length>2:void 0===s&&(s=e?n.length>3:n.length>2)),{rings:i,spatialReference:r,hasZ:e,hasM:s}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=e$1m(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const r=new b$10;return r.x=t[0],r.y=t[1],r.spatialReference=this.spatialReference,this.hasZ&&(r.z=t[2]),r}get extent(){const{spatialReference:t}=this,r=v$K(this);if(!r)return null;const e=new M$A(r);return e.spatialReference=t,e}get isSelfIntersecting(){return g$_(this.rings)}writeRings(t,r){r.rings=l$2w(this.rings);}addRing(t){if(!t)return;const r=this.rings,e=r.length;if(j$D(t)){const s=[];for(let r=0,e=t.length;r<e;r++)s[r]=t[r].toArray();r[e]=s;}else r[e]=t.concat();return this.notifyChange("rings"),this}clone(){const t=new x$t;return t.spatialReference=this.spatialReference,t.rings=l$2w(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return !0;if(t$1T(t))return !1;const e=this.spatialReference,n=t.spatialReference;if(r$1K(e)!==r$1K(n))return !1;if(r$1K(e)&&r$1K(n)&&!e.equals(n))return !1;if(this.rings.length!==t.rings.length)return !1;const o=([t,r,e,s],[i,n,o,a])=>t===i&&r===n&&(null==e&&null==o||e===o)&&(null==s&&null==a||s===a);for(let s=0;s<this.rings.length;s++){const e=this.rings[s],i=t.rings[s];if(!l$2x(e,i,o))return !1}return !0}contains(t){if(!t)return !1;const r=M$B(t,this.spatialReference);return c$2W(this,r$1K(r)?r:t)}isClockwise(t){let r;return r=j$D(t)?t.map((t=>this.hasZ?this.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])):t,f$1d(r,this.hasM,this.hasZ)}getPoint(t,r){if(!this._validateInputs(t,r))return null;const e=this.rings[t][r],s=this.hasZ,i=this.hasM;return s&&!i?new b$10(e[0],e[1],e[2],void 0,this.spatialReference):i&&!s?new b$10(e[0],e[1],void 0,e[2],this.spatialReference):s&&i?new b$10(e[0],e[1],e[2],e[3],this.spatialReference):new b$10(e[0],e[1],this.spatialReference)}insertPoint(t,r,e){return this._validateInputs(t,r,!0)?(h$1f(this,e),Array.isArray(e)||(e=e.toArray()),this.rings[t].splice(r,0,e),this.notifyChange("rings"),this):this}removePoint(t,r){if(!this._validateInputs(t,r))return null;const e=new b$10(this.rings[t].splice(r,1)[0],this.spatialReference);return this.notifyChange("rings"),e}removeRing(t){if(!this._validateInputs(t,null))return null;const r=this.rings.splice(t,1)[0],e=this.spatialReference,s=r.map((t=>new b$10(t,e)));return this.notifyChange("rings"),s}setPoint(t,r,e){return this._validateInputs(t,r)?(h$1f(this,e),Array.isArray(e)||(e=e.toArray()),this.rings[t][r]=e,this.notifyChange("rings"),this):this}_validateInputs(t,r,e=!1){if(null==t||t<0||t>=this.rings.length)return !1;if(null!=r){const s=this.rings[t];if(e&&(r<0||r>s.length))return !1;if(!e&&(r<0||r>=s.length))return !1}return !0}toJSON(t){return this.write({},t)}};e$25([d$1T({readOnly:!0})],w$J.prototype,"cache",null),e$25([d$1T({readOnly:!0})],w$J.prototype,"centroid",null),e$25([d$1T({readOnly:!0})],w$J.prototype,"extent",null),e$25([d$1T({readOnly:!0})],w$J.prototype,"isSelfIntersecting",null),e$25([d$1T({type:[[[Number]]],json:{write:{isRequired:!0}}})],w$J.prototype,"rings",void 0),e$25([r$1m("rings")],w$J.prototype,"writeRings",null),w$J=x$t=e$25([i$2z("esri.geometry.Polygon")],w$J),w$J.prototype.toJSON.isDefaultToJSON=!0;const v$J=w$J;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$2D;function u$1y(t){return !Array.isArray(t[0])}let f$1a=c$2D=class extends p$2${constructor(...t){super(...t),this.paths=[],this.type="polyline";}normalizeCtorArgs(t,e){let s,r,i=null,a=null;return t&&!Array.isArray(t)?(i=t.paths?t.paths:null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),s=t.hasZ,r=t.hasM):i=t,i=i||[],e=e||k$w.WGS84,i.length&&i[0]&&null!=i[0][0]&&"number"==typeof i[0][0]&&(i=[i]),a=i[0]&&i[0][0],a&&(void 0===s&&void 0===r?(s=a.length>2,r=!1):void 0===s?s=!r&&a.length>3:void 0===r&&(r=!s&&a.length>3)),{paths:i,spatialReference:e,hasZ:s,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=h$1b(this);if(!e)return null;const s=new M$A(e);return s.spatialReference=t,s}writePaths(t,s){s.paths=l$2w(this.paths);}addPath(t){if(!t)return;const e=this.paths,s=e.length;if(u$1y(t)){const r=[];for(let e=0,s=t.length;e<s;e++)r[e]=t[e].toArray();e[s]=r;}else e[s]=t.concat();return this.notifyChange("paths"),this}clone(){const t=new c$2D;return t.spatialReference=this.spatialReference,t.paths=l$2w(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const s=this.paths[t][e],r=this.hasZ,i=this.hasM;return r&&!i?new b$10(s[0],s[1],s[2],void 0,this.spatialReference):i&&!r?new b$10(s[0],s[1],void 0,s[2],this.spatialReference):r&&i?new b$10(s[0],s[1],s[2],s[3],this.spatialReference):new b$10(s[0],s[1],this.spatialReference)}insertPoint(t,e,s){return this._validateInputs(t,e,!0)?(h$1f(this,s),Array.isArray(s)||(s=s.toArray()),this.paths[t].splice(e,0,s),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],s=this.spatialReference,r=e.map((t=>new b$10(t,s)));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const s=new b$10(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),s}setPoint(t,e,s){return this._validateInputs(t,e)?(h$1f(this,s),Array.isArray(s)||(s=s.toArray()),this.paths[t][e]=s,this.notifyChange("paths"),this):this}_validateInputs(t,e,s=!1){if(null==t||t<0||t>=this.paths.length)return !1;if(null!=e){const r=this.paths[t];if(s&&(e<0||e>r.length))return !1;if(!s&&(e<0||e>=r.length))return !1}return !0}toJSON(t){return this.write({},t)}};e$25([d$1T({readOnly:!0})],f$1a.prototype,"cache",null),e$25([d$1T({readOnly:!0})],f$1a.prototype,"extent",null),e$25([d$1T({type:[[[Number]]],json:{write:{isRequired:!0}}})],f$1a.prototype,"paths",void 0),e$25([r$1m("paths")],f$1a.prototype,"writePaths",null),f$1a=c$2D=e$25([i$2z("esri.geometry.Polyline")],f$1a),f$1a.prototype.toJSON.isDefaultToJSON=!0;const m$1L=f$1a;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$1_(n){return n}function u$1x(n=J$9){return i$1_([n[0],n[1],n[2],n[3]])}function e$1j(n){return i$1_([n[0],n[1],n[2],n[3]])}function o$1c(n,t,r,i,e=u$1x()){return e[0]=n,e[1]=t,e[2]=r,e[3]=i,e}function c$2C(n,t=u$1x()){return t[0]=n.xmin,t[1]=n.ymin,t[2]=n.xmax,t[3]=n.ymax,t}function m$1K(n,t){return new M$A({xmin:n[0],ymin:n[1],xmax:n[2],ymax:n[3],spatialReference:t})}function f$19(n,t){t[0]<n[0]&&(n[0]=t[0]),t[0]>n[2]&&(n[2]=t[0]),t[1]<n[1]&&(n[1]=t[1]),t[1]>n[3]&&(n[3]=t[1]);}function s$1D(n){return t$1T(n)||n[0]>=n[2]?0:n[2]-n[0]}function l$1Y(n){return n[1]>=n[3]?0:n[3]-n[1]}function y$1c(n){return s$1D(n)*l$1Y(n)}function b$S(n,t){return F$i(n,t[0],t[1])}function F$i(n,t,r){return t>=n[0]&&r>=n[1]&&t<=n[2]&&r<=n[3]}function w$I(n,t,r){return t[0]>=n[0]-r&&t[1]>=n[1]-r&&t[0]<=n[2]+r&&t[1]<=n[3]+r}function k$o(n,t){return Math.max(t[0],n[0])<=Math.min(t[2],n[2])&&Math.max(t[1],n[1])<=Math.min(t[3],n[3])}function q$g(n,t){return t[0]>=n[0]&&t[2]<=n[2]&&t[1]>=n[1]&&t[3]<=n[3]}const I$s=i$1_([1/0,1/0,-1/0,-1/0]),J$9=i$1_([0,0,0,0]);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$15=s$1V.radius,n$2h=s$1V.eccentricitySquared,s$1C={a1:r$15*n$2h,a2:r$15*n$2h*r$15*n$2h,a3:r$15*n$2h*n$2h/2,a4:r$15*n$2h*r$15*n$2h*2.5,a5:r$15*n$2h+r$15*n$2h*n$2h/2,a6:1-n$2h};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$1B=0;class t$1h{constructor(t=null){this.uid=s$1B++,t?(this._wkt=void 0!==t.wkt?t.wkt:null,this._wkid=void 0!==t.wkid?t.wkid:-1,this._isInverse=void 0!==t.isInverse&&!0===t.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1);}static fromGE(s){const i=new t$1h;return i._wkt=s.wkt,i._wkid=s.wkid,i._isInverse=s.isInverse,i}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=s$1B++;}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=s$1B++;}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=s$1B++;}getInverse(){const s=new t$1h;return s._wkt=this.wkt,s._wkid=this._wkid,s._isInverse=!this.isInverse,s}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$1A{constructor(s){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,s&&s.steps)for(const i of s.steps)i instanceof t$1h?this.steps.push(i):this.steps.push(new t$1h({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}));}static cacheKey(t,s){return [void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():"",void 0!==s.wkid&&null!==s.wkid?s.wkid.toString():"-1",void 0!==s.wkt&&null!==s.wkt?s.wkt.toString():""].join(",")}static fromGE(i){const e=new s$1A;let n="";for(const s of i.steps){const i=t$1h.fromGE(s);e.steps.push(i),n+=i.uid.toString()+",";}return e._cached_projection={},e._gtlistentry=null,e._chain=n,e}getInverse(){const t=new s$1A;t.steps=[];for(let s=this.steps.length-1;s>=0;s--){const i=this.steps[s];t.steps.push(i.getInverse());}return t}getGTListEntry(){let t="";for(const s of this.steps)t+=s.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,e){this._cached_projection[s$1A.cacheKey(t,i)]=e;}getCachedGeTransformation(t,i){let e="";for(const s of this.steps)e+=s.uid.toString()+",";e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e);const n=this._cached_projection[s$1A.cacheKey(t,i)];return void 0===n?null:n}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let N$i=null,V$b=null,X$9=null,D$j={};function H$b(){return !!N$i&&n$2j()}function J$8(n){return t$1T(X$9)&&(X$9=Promise.all([P$k(),import('./geometryEngineBase.js').then((n=>n.g)),import('./hydrated.js')])),X$9.then((([,e,{hydratedAdapter:t}])=>{h$1E(n),V$b=t,N$i=e.default,N$i._enableProjection(R$m);}))}function O$j(n,e,t=null){return Array.isArray(n)?0===n.length?[]:Q$8(V$b,n,n[0].spatialReference,e,t):Q$8(V$b,[n],n.spatialReference,e,t)[0]}function Q$8(n,e,t,r,l=null){if(t$1T(t)||t$1T(r))return e;if(tn$1(t,r,l))return e.map((n=>e$23(un$1(n,t,r))));if(t$1T(l)){const n=s$1A.cacheKey(t,r);void 0!==D$j[n]?l=D$j[n]:(l=Y$9(t,r,null),t$1T(l)&&(l=new s$1A),D$j[n]=l);}if(t$1T(N$i))throw new nn$1;return N$i._project(n,e,t,r,l)}function Y$9(n,e,t=null){if(t$1T(N$i))throw new nn$1;if(t$1T(n)||t$1T(e))return null;const r=N$i._getTransformation(V$b,n,e,t,null==t?void 0:t.spatialReference);return null!==r?s$1A.fromGE(r):null}class nn$1 extends s$2l{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()");}}function tn$1(n,e,t){return !t&&(!!E$r(n,e)||I$A(n)&&I$A(e)&&!!Re$3(n,e,Ee$2))}async function rn$1(n,e,t,r){if(!H$b())if(Array.isArray(n)){for(const{source:l,dest:u,geographicTransformation:o}of n)if(!tn$1(l,u,o))return J$8(r)}else if(!tn$1(n,e,t))return J$8(r)}function un$1(n,e,t){return n?"x"in n?an$1(n,e,new b$10,t,0):"xmin"in n?Mn$1(n,e,new M$A,t,0):"rings"in n?mn$1(n,e,new v$J,t,0):"paths"in n?pn$1(n,e,new m$1L,t,0):"points"in n?cn$1(n,e,new m$1N,t,0):null:null}function an$1(n,e,t,r,l){Se$2[0]=n.x,Se$2[1]=n.y;const u=n.z;return Se$2[2]=void 0!==u?u:l,xn$1(Se$2,e,0,Se$2,r,0,1)?(t.x=Se$2[0],t.y=Se$2[1],t.spatialReference=r,void 0===u?(t.z=void 0,t.hasZ=!1):(t.z=Se$2[2],t.hasZ=!0),void 0===n.m?(t.m=void 0,t.hasM=!1):(t.m=n.m,t.hasM=!0),t):null}function cn$1(n,e,t,r,l){const{points:u,hasZ:o,hasM:a}=n,s=[],i=u.length,c=[];for(const f of u)c.push(f[0],f[1],o?f[2]:l);if(!xn$1(c,e,0,c,r,0,i))return null;for(let f=0;f<i;++f){const n=3*f,e=c[n],t=c[n+1];o&&a?s.push([e,t,c[n+2],u[f][3]]):o?s.push([e,t,c[n+2]]):a?s.push([e,t,u[f][2]]):s.push([e,t]);}return t.points=s,t.spatialReference=r,t.hasZ=o,t.hasM=a,t}function pn$1(n,e,t,r,l){const{paths:u,hasZ:o,hasM:a}=n,s=[];return Cn$1(u,o,a,e,s,r,l)?(t.paths=s,t.spatialReference=r,t.hasZ=o,t.hasM=a,t):null}function hn$1(n,e,t=e.spatialReference,r=0){return r$1K(t)&&r$1K(mn$1(n,n.spatialReference,e,t,r))}function mn$1(n,e,t,r,l){const{rings:u,hasZ:o,hasM:a}=n,s=[];return Cn$1(u,o,a,e,s,r,l)?(t.rings=s,t.spatialReference=r,t.hasZ=o,t.hasM=a,t):null}function Mn$1(n,e,t,r,l){const{xmin:u,ymin:o,xmax:a,ymax:s,hasZ:i,hasM:c}=n;if(!yn$1(u,o,i?n.zmin:l,e,Se$2,r))return null;t.xmin=Se$2[0],t.ymin=Se$2[1],i&&(t.zmin=Se$2[2]);return yn$1(a,s,i?n.zmax:l,e,Se$2,r)?(t.xmax=Se$2[0],t.ymax=Se$2[1],i&&(t.zmax=Se$2[2]),c&&(t.mmin=n.mmin,t.mmax=n.mmax),t.spatialReference=r,t):null}function wn$1(n,e,t,r=0){Se$2[0]=n.x,Se$2[1]=n.y;const l=n.z;return Se$2[2]=void 0!==l?l:r,xn$1(Se$2,n.spatialReference,0,e,t,0,1)}function yn$1(n,e,t,r,l,u){return Te$2[0]=n,Te$2[1]=e,Te$2[2]=t,xn$1(Te$2,r,0,l,u,0,1)}function xn$1(n,e,t,r,l,o,a=1){const s=Re$3(e,l,Ee$2);if(t$1T(s))return !1;if(s===Gn$1){if(n===r&&t===o)return !0;const e=t+3*a;for(let l=t,u=o;l<e;l++,u++)r[u]=n[l];return !0}const i=t+3*a;for(let u=t,c=o;u<i;u+=3,c+=3)s(n,u,r,c);return !0}function Cn$1(n,e,t,r,l,u,o=0){const a=new Array;for(const i of n)for(const n of i)a.push(n[0],n[1],e?n[2]:o);if(!xn$1(a,r,0,a,u,0,a.length/3))return !1;let s=0;l.length=0;for(const i of n){const n=new Array;for(const r of i)e&&t?n.push([a[s++],a[s++],a[s++],r[3]]):e?n.push([a[s++],a[s++],a[s++]]):t?(n.push([a[s++],a[s++],r[2]]),s++):(n.push([a[s++],a[s++]]),s++);l.push(n);}return !0}function vn$1(n,e,t,r){if(t$1T(n)||t$1T(r))return !1;const l=Un$1(n,ye$3),o=Un$1(r,ge$3);if(l===o&&!qn$1(o)&&(0!==l||E$r(n,r)))return r$1f(t),c$2M(t,t,e),!0;if(qn$1(o)){const n=Me$2[l][11],r=Me$2[11][o];return !t$1T(n)&&!t$1T(r)&&(n(e,0,Ce$2,0),r(Ce$2,0,Fe$1,0),zn$1(Pe$2*Ce$2[0],Pe$2*Ce$2[1],t),t[12]=Fe$1[0],t[13]=Fe$1[1],t[14]=Fe$1[2],!0)}if(!(3!==o&&12!==o||2!==l&&1!==l&&3!==l)){const n=Me$2[l][11],r=Me$2[11][o];return !t$1T(n)&&!t$1T(r)&&(n(e,0,Ce$2,0),r(Ce$2,0,Fe$1,0),1===l?An$1(Pe$2*Ce$2[0],Pe$2*Ce$2[1],t):r$1f(t),t[12]=Fe$1[0],t[13]=Fe$1[1],t[14]=Fe$1[2],!0)}return !1}function qn$1(n){return 1===n||7===n||9===n}function zn$1(n,e,t){const r=Math.sin(n),l=Math.cos(n),u=Math.sin(e),o=Math.cos(e),a=t;return a[0]=-r,a[4]=-u*l,a[8]=o*l,a[12]=0,a[1]=l,a[5]=-u*r,a[9]=o*r,a[13]=0,a[2]=0,a[6]=o,a[10]=u,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function An$1(n,e,t){return zn$1(n,e,t),o$1l(t,t),t}function Un$1(n,e){return e.spatialReference===n?e.spatialReferenceId:(e.spatialReference=n,"metersPerUnit"in e&&(e.metersPerUnit=H$c(n,1)),n.wkt===G$d.wkt?e.spatialReferenceId=1:A$p(n)?e.spatialReferenceId=2:T$o(n)?e.spatialReferenceId=3:k$x(n)?e.spatialReferenceId=12:n.wkt===R$o.wkt?e.spatialReferenceId=4:4490===n.wkid?e.spatialReferenceId=5:n.wkt===I$t.wkt?e.spatialReferenceId=7:n.wkt===E$m.wkt?e.spatialReferenceId=9:G$j(n)?e.spatialReferenceId=8:C$w(n)?e.spatialReferenceId=10:e.spatialReferenceId=0)}function Gn$1(n,e,t,r){n!==t&&(t[r++]=n[e++],t[r++]=n[e++],t[r]=n[e]);}function Wn$1(n,e,t,r){t[r++]=xe$2*(n[e++]/s$1V.radius),t[r++]=xe$2*(Math.PI/2-2*Math.atan(Math.exp(-n[e++]/s$1V.radius))),t[r]=n[e];}function Zn$1(n,e,t,r){Wn$1(n,e,t,r),le$5(t,r,t,r);}function _n$1(n,e,t,r){Wn$1(n,e,t,r),pe$4(t,r,t,r);}function Bn$1(n,t,r,l,u){const o=.4999999*Math.PI,a=e$1u(Pe$2*n[t+1],-o,o),s=Math.sin(a);r[l++]=Pe$2*n[t]*u.radius,r[l++]=u.halfSemiMajorAxis*Math.log((1+s)/(1-s)),r[l]=n[t+2];}function Kn$1(n,e,t,r){Bn$1(n,e,t,r,s$1V);}const Ln$1=s$1V.radius*Math.PI/180,Nn$1=180/(s$1V.radius*Math.PI);function Vn$1(n,e,t,r){t[r]=n[e]*Ln$1,t[r+1]=n[e+1]*Ln$1,t[r+2]=n[e+2];}function Xn$1(n,e,t,r){t[r]=n[e]*Nn$1,t[r+1]=n[e+1]*Nn$1,t[r+2]=n[e+2];}function Dn$1(n,e,t,r){Wn$1(n,e,t,r),Vn$1(t,r,t,r);}function Hn$1(n,e,t,r){he$3(n,e,t,r),Vn$1(t,r,t,r);}function Jn$1(n,e,t,r){se$6(n,e,t,r),Vn$1(t,r,t,r);}function On$1(n,e,t,r){Xn$1(n,e,t,r),le$5(t,r,t,r);}function Qn$1(n,e,t,r){Xn$1(n,e,t,r),Kn$1(t,r,t,r);}function Yn$1(n,e,t,r){Xn$1(n,e,t,r),pe$4(t,r,t,r);}function $n$1(n){if(t$1T(n))return !1;const e=Un$1(n,ye$3);return !!Me$2[e][6]}function ee$6(n,e,t,r,l){const u=l+n[e+2],o=Pe$2*n[e+1],a=Pe$2*n[e],s=Math.cos(o);t[r++]=Math.cos(a)*s*u,t[r++]=Math.sin(a)*s*u,t[r]=Math.sin(o)*u;}function te$6(n,e,t,r){ee$6(n,e,t,r,e$1D.radius);}function re$6(n,e,t,r){ee$6(n,e,t,r,t$1r.radius);}function le$5(n,e,t,r){ee$6(n,e,t,r,s$1V.radius);}function ue$5(n,e,t,r,u){const o=n[e],a=n[e+1],s=n[e+2],i=Math.sqrt(o*o+a*a+s*s),c=b$X(s/(0===i?1:i)),f=Math.atan2(a,o);t[r++]=xe$2*f,t[r++]=xe$2*c,t[r]=i-u;}function oe$5(n,e,t,r){ue$5(n,e,t,r,e$1D.radius);}function ae$5(n,e,t,r){ue$5(n,e,t,r,t$1r.radius);}function se$6(n,e,t,r){ue$5(n,e,t,r,s$1V.radius);}function ie$5(n,e,t,r){se$6(n,e,t,r),Kn$1(t,r,t,r);}function ce$5(n,e,t,r){se$6(n,e,t,r),pe$4(t,r,t,r);}function fe$5(n,e,t,r,l){const u=Pe$2*n[e],o=Pe$2*n[e+1],a=n[e+2],s=Math.sin(o),i=Math.cos(o),c=l.radius/Math.sqrt(1-l.eccentricitySquared*s*s);t[r++]=(c+a)*i*Math.cos(u),t[r++]=(c+a)*i*Math.sin(u),t[r++]=(c*(1-l.eccentricitySquared)+a)*s;}function pe$4(n,e,t,r){fe$5(n,e,t,r,s$1V);}function he$3(n,e,t,r){const l=s$1C,u=n[e],o=n[e+1],a=n[e+2];let s,i,c,f,p,h,m,d,M,R,j,w,y,g,E,I,P,x,T,C,F;s=Math.abs(a),i=u*u+o*o,c=Math.sqrt(i),f=i+a*a,p=Math.sqrt(f),C=Math.atan2(o,u),h=a*a/f,m=i/f,g=l.a2/p,E=l.a3-l.a4/p,m>.3?(d=s/p*(1+m*(l.a1+g+h*E)/p),T=Math.asin(d),R=d*d,M=Math.sqrt(1-R)):(M=c/p*(1-h*(l.a5-g-m*E)/p),T=Math.acos(M),R=1-M*M,d=Math.sqrt(R)),j=1-s$1V.eccentricitySquared*R,w=s$1V.radius/Math.sqrt(j),y=l.a6*w,g=c-w*M,E=s-y*d,P=M*g+d*E,I=M*E-d*g,x=I/(y/j+P),T+=x,F=P+I*x/2,a<0&&(T=-T),t[r++]=xe$2*C,t[r++]=xe$2*T,t[r]=F;}function me$4(n,e,t,r){he$3(n,e,t,r),le$5(t,r,t,r);}function de$5(n,e,t,r){he$3(n,e,t,r),Kn$1(t,r,t,r);}const Me$2={2:{5:null,8:null,10:null,11:Gn$1,6:Gn$1,1:le$5,7:null,9:null,0:null,3:Kn$1,12:Vn$1,2:Gn$1,4:pe$4},5:{5:Gn$1,8:null,10:null,11:Gn$1,6:Gn$1,1:le$5,7:null,9:null,0:null,3:null,12:Vn$1,2:null,4:pe$4},8:{5:null,8:Gn$1,10:null,11:Gn$1,6:null,1:null,7:re$6,9:null,0:null,3:null,12:null,2:null,4:null},10:{5:null,8:null,10:Gn$1,11:Gn$1,6:null,1:null,7:null,9:te$6,0:null,3:null,12:null,2:null,4:null},3:{5:null,8:null,10:null,11:Wn$1,6:Wn$1,1:Zn$1,7:null,9:null,0:null,3:Gn$1,12:Dn$1,2:Wn$1,4:_n$1},4:{5:he$3,8:null,10:null,11:he$3,6:he$3,1:me$4,7:null,9:null,0:null,3:de$5,12:Hn$1,2:he$3,4:Gn$1},1:{5:se$6,8:null,10:null,11:se$6,6:se$6,1:Gn$1,7:null,9:null,0:null,3:ie$5,12:Jn$1,2:se$6,4:ce$5},7:{5:null,8:ae$5,10:null,11:ae$5,6:null,1:null,7:Gn$1,9:null,0:null,3:null,12:null,2:null,4:null},9:{5:null,8:null,10:oe$5,11:oe$5,6:null,1:null,7:null,9:Gn$1,0:null,3:null,12:null,2:null,4:null},0:{5:null,8:null,10:null,11:null,6:null,1:null,7:null,9:null,0:Gn$1,3:null,12:null,2:null,4:null},11:{5:Gn$1,8:Gn$1,10:Gn$1,11:Gn$1,6:Gn$1,1:le$5,7:re$6,9:te$6,0:null,3:Kn$1,12:Vn$1,2:Gn$1,4:pe$4},6:{5:null,8:null,10:null,11:Gn$1,6:Gn$1,1:le$5,7:null,9:null,0:null,3:null,12:Vn$1,2:Gn$1,4:pe$4},12:{5:Xn$1,8:null,10:null,11:Xn$1,6:Xn$1,1:On$1,7:null,9:null,0:null,3:Qn$1,12:Gn$1,2:Xn$1,4:Yn$1}};function Re$3(n,e,t=we$3()){return t$1T(n)||t$1T(e)?null:je$2(n,e,t).projector}function je$2(n,e,t){if(t$1T(n)||t$1T(e)||t.source.spatialReference===n&&t.dest.spatialReference===e)return t;const r=Un$1(n,t.source),l=Un$1(e,t.dest);return 0===r&&0===l?E$r(n,e)?t.projector=Gn$1:t.projector=null:t.projector=Me$2[r][l],t}function we$3(){return {source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Gn$1}}const ye$3={spatialReference:null,spatialReferenceId:0},ge$3={spatialReference:null,spatialReferenceId:0},Ee$2=we$3(),Pe$2=M$w(1),xe$2=m$1S(1),Te$2=n$2o(),Ce$2=n$2o(),Fe$1=n$2o(),Se$2=n$2o();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1Z;let l$1X=i$1Z=class extends a$2N{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.resolution=0,this.rows=null,this.scale=0;}clone(){return new i$1Z({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};e$25([d$1T({type:Number,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l$1X.prototype,"cols",void 0),e$25([d$1T({type:S$J,json:{write:!0}})],l$1X.prototype,"level",void 0),e$25([d$1T({type:String,json:{write:!0}})],l$1X.prototype,"levelValue",void 0),e$25([d$1T({type:Number,json:{write:!0}})],l$1X.prototype,"resolution",void 0),e$25([d$1T({type:Number,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l$1X.prototype,"rows",void 0),e$25([d$1T({type:Number,json:{write:!0}})],l$1X.prototype,"scale",void 0),l$1X=i$1Z=e$25([i$2z("esri.layers.support.LOD")],l$1X);const p$2K=l$1X;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var w$H;const x$s=new o$1J({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let S$x=w$H=class extends a$2N{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null;}static create(e={}){const{resolutionFactor:t=1,scales:o,size:r=256,spatialReference:i=k$w.WebMercator,numLODs:l=24}=e;if(!I$A(i)){const e=[];if(o)for(let t=0;t<o.length;t++){const r=o[t];e.push({level:t,scale:r,resolution:r});}else {let t=5e-4;for(let o=l-1;o>=0;o--)e.unshift({level:o,scale:t,resolution:t}),t*=2;}return new w$H({dpi:96,lods:e,origin:new b$10(0,0,i),size:[r,r],spatialReference:i})}const n=S$F(i),a=e.origin?new b$10({x:e.origin.x,y:e.origin.y,spatialReference:i}):new b$10(n?{x:n.origin[0],y:n.origin[1],spatialReference:i}:{x:0,y:0,spatialReference:i}),p=96,f=1/(H$c(i)*39.37*p),y=[];if(o)for(let s=0;s<o.length;s++){const e=o[s],t=e*f;y.push({level:s,scale:e,resolution:t});}else {let e=R$t(i)?512/r*591657527.5917094:256/r*591657527.591555;const o=Math.ceil(l/t);y.push({level:0,scale:e,resolution:e*f});for(let r=1;r<o;r++){const o=e/2**t,s=o*f;y.push({level:r,scale:o,resolution:s}),e=o;}}return new w$H({dpi:p,lods:y,origin:a,size:[r,r],spatialReference:i})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const o=S$F(e);return e.isWrappable&&Math.abs(o.origin[0]-t.x)<=o.dx}return !1}readOrigin(e,t){return b$10.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,o=0;const r=[];this._levelToLOD={},e&&(t=-1/0,o=1/0,e.forEach((e=>{r.push(e.scale),t=e.scale>t?e.scale:t,o=e.scale<o?e.scale:o,this._levelToLOD[e.level]=e;}))),this._set("scales",r),this._set("minScale",t),this._set("maxScale",o),this._set("lods",e),this._initializeUpsampleLevels();}readSize(e,t){return [t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1];}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const o=Math.floor(e),r=o+1;return t[o]/(t[o]/t[r])**(e-o)}}scaleToZoom(e){const t=this.scales,o=t.length-1;let r=0;for(;r<o;r++){const o=t[r],s=t[r+1];if(o<=e)return r;if(s===e)return r+1;if(o>e&&s<e)return r+Math.log(o/e)/Math.log(o/s)}return r}snapScale(e,t=.95){const o=this.scaleToZoom(e);return o%Math.floor(o)>=t?this.zoomToScale(Math.ceil(o)):this.zoomToScale(Math.floor(o))}tileAt(e,t,o,s){const i=this.lodAt(e);if(!i)return null;let l,n;if("number"==typeof t)l=t,n=o;else if(E$r(t.spatialReference,this.spatialReference))l=t.x,n=t.y,s=o;else {const e=M$B(t,this.spatialReference);if(t$1T(e))return null;l=e.x,n=e.y,s=o;}const a=i.resolution*this.size[0],p=i.resolution*this.size[1];return s||(s={id:null,level:0,row:0,col:0,extent:u$1x()}),s.level=e,s.row=Math.floor((this.origin.y-n)/p+.001),s.col=Math.floor((l-this.origin.x)/a+.001),this.updateTileInfo(s),s}updateTileInfo(e,t=0){let o=this.lodAt(e.level);if(!o&&1===t){const t=this.lods[this.lods.length-1];t.level<e.level&&(o=t);}if(!o)return;const r=e.level-o.level,s=o.resolution*this.size[0]/2**r,i=o.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=u$1x()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*i,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+i;}upsampleTile(e){const t=this._upsampleLevels[e.level];return !(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:o}=this.lodAt(t.level),r=o*this.size[0],s=o*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+r,e[3]=e[1]+s,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return w$H.fromJSON(this.write({}))}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let o=0;o<e.length;o++){const r=e[o];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r;}}};e$25([d$1T({type:Number,json:{write:!0}})],S$x.prototype,"compressionQuality",void 0),e$25([d$1T({type:Number,json:{write:!0}})],S$x.prototype,"dpi",void 0),e$25([d$1T({type:String,json:{read:x$s.read,write:x$s.write,origins:{"web-scene":{read:!1,write:!1}}}})],S$x.prototype,"format",void 0),e$25([d$1T({readOnly:!0})],S$x.prototype,"isWrappable",null),e$25([d$1T({type:b$10,json:{write:!0}})],S$x.prototype,"origin",void 0),e$25([o$1v("origin")],S$x.prototype,"readOrigin",null),e$25([d$1T({type:[p$2K],value:null,json:{write:!0}})],S$x.prototype,"lods",null),e$25([d$1T({readOnly:!0})],S$x.prototype,"minScale",void 0),e$25([d$1T({readOnly:!0})],S$x.prototype,"maxScale",void 0),e$25([d$1T({readOnly:!0})],S$x.prototype,"scales",void 0),e$25([d$1T({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],S$x.prototype,"size",void 0),e$25([o$1v("size",["rows","cols"])],S$x.prototype,"readSize",null),e$25([r$1m("size",{cols:{type:S$J},rows:{type:S$J}})],S$x.prototype,"writeSize",null),e$25([d$1T({type:k$w,json:{write:!0}})],S$x.prototype,"spatialReference",void 0),S$x=w$H=e$25([i$2z("esri.layers.support.TileInfo")],S$x);const j$C=S$x;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const v$I=12;class M$r{constructor(e){const t=M$r.checkUnsupported(e);if(r$1K(t))throw t;const i=e$23(e);this.spatialReference=i.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=$n$1(this.spatialReference)||G$j(this.spatialReference)||C$w(this.spatialReference),this.origin=[i.origin.x,i.origin.y],this.pixelSize=i.size[0],this.dpi=i.dpi;const s=i.lods.reduce((function(e,t,i){return t.level<e.min&&(e.min=t.level,e.minIndex=i),e.max=Math.max(e.max,t.level),e}),{min:1/0,minIndex:0,max:-1/0}),l=i.lods[s.minIndex],n=2**l.level;let a=l.resolution*n,h=l.scale*n;this.levels=new Array(s.max+1);for(let r=0;r<this.levels.length;r++)this.levels[r]={resolution:a,scale:h,tileSize:[a*i.size[0],a*i.size[1]]},a/=2,h/=2;}clone(){return new M$r(this.toTileInfo())}toTileInfo(){return new j$C({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map(((e,t)=>({level:t,scale:e.scale,resolution:e.resolution})))})}getExtent(e,t,i,s){const r=this.levels[e],l=r.tileSize[0],o=r.tileSize[1];s[0]=this.origin[0]+i*l,s[2]=s[0]+l,s[3]=this.origin[1]-t*o,s[1]=s[3]-o;}convertExtentToRadians(e,i){this._isWebMercator?(i[0]=f$1u(e[0]),i[1]=c$2X(e[1]),i[2]=f$1u(e[2]),i[3]=c$2X(e[3])):this._isGCS&&(i[0]=M$w(e[0]),i[1]=M$w(e[1]),i[2]=M$w(e[2]),i[3]=M$w(e[3]));}getExtentGeometry(e,t,i,s=new M$A){return this.getExtent(e,t,i,d$1s),s.spatialReference=this.spatialReference,s.xmin=d$1s[0],s.ymin=d$1s[1],s.xmax=d$1s[2],s.ymax=d$1s[3],s.zmin=void 0,s.zmax=void 0,s}ensureMaxLod(e){if(null==e)return !1;let t=!1;for(;this.levels.length<=e;){const e=this.levels[this.levels.length-1],i=e.resolution/2;this.levels.push({resolution:i,scale:e.scale/2,tileSize:[i*this.pixelSize,i*this.pixelSize]}),t=!0;}return t}capMaxLod(e){this.levels.length>e+1&&(this.levels.length=e+1);}getMaxLod(){return this.levels.length-1}scaleAtLevel(e){return this.levels[0].scale/2**e}levelAtScale(e){const t=this.levels[0].scale;return e>=t?0:Math.log(t/e)*Math.LOG2E}resolutionAtLevel(e){return this.levels[0].resolution/2**e}compatibleWith(e){if(!(e instanceof M$r)){if(M$r.checkUnsupported(e))return !1;e=new M$r(e);}if(!e.spatialReference.equals(this.spatialReference))return !1;if(e.pixelSize!==this.pixelSize)return !1;const t=Math.min(this.levels.length,e.levels.length)-1,s=this.levels[t].resolution;let r=.5*s;if(!p$2R(e.origin[0],this.origin[0],r)||!p$2R(e.origin[1],this.origin[1],r))return !1;return r=.5*s/2**t/this.pixelSize*v$I,p$2R(s,e.levels[t].resolution,r)}rootTilesInExtent(e,t=null,i=1/0){const s=new Array,o=this.levels[0].tileSize;if(t$1T(e)||0===o[0]||0===o[1])return s;M$r.computeRowColExtent(e,o,this.origin,d$1s);let n=d$1s[1],a=d$1s[3],c=d$1s[0],h=d$1s[2];const u=h-c,m=a-n;if(u*m>i){const e=Math.floor(Math.sqrt(i));m>e&&(n=n+Math.floor(.5*m)-Math.floor(.5*e),a=n+e),u>e&&(c=c+Math.floor(.5*u)-Math.floor(.5*e),h=c+e);}for(let r=n;r<a;r++)for(let e=c;e<h;e++)s.push([0,r,e]);return r$1K(t)&&(t[0]=this.origin[0]+c*o[0],t[1]=this.origin[1]-a*o[1],t[2]=this.origin[0]+h*o[0],t[3]=this.origin[1]-n*o[1]),s}static computeRowColExtent(e,t,i,s){const r=.001*(e[2]-e[0]+(e[3]-e[1]));s[0]=Math.max(0,Math.floor((e[0]+r-i[0])/t[0])),s[2]=Math.max(0,Math.ceil((e[2]-r-i[0])/t[0])),s[1]=Math.max(0,Math.floor((i[1]-e[3]+r)/t[1])),s[3]=Math.max(0,Math.ceil((i[1]-e[1]-r)/t[1]));}static isPowerOfTwo(e){const t=e.lods,i=t[0].resolution*2**t[0].level;return !t.some((function(e){return !x$x(e.resolution,i/2**e.level)}))}static hasGapInLevels(e){const t=e.lods.map((function(e){return e.level}));t.sort((function(e,t){return e-t}));for(let i=1;i<t.length;i++)if(t[i]!==t[0]+i)return !0;return !1}static tileSizeSupported(e){const t=e.size[1];return t===e.size[0]&&0==(t&t-1)&&t>=128&&t<=512}static checkUnsupported(t){return t$1T(t)?new s$2l("tilingscheme:tile-info-missing","Tiling scheme must have tiling information"):t.lods.length<1?new s$2l("tilingscheme:generic","Tiling scheme must have at least one level"):M$r.isPowerOfTwo(t)?M$r.hasGapInLevels(t)?new s$2l("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):M$r.tileSizeSupported(t)?null:new s$2l("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new s$2l("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(e,t){const i=e[2]-e[0],s=e[3]-e[1],r=H$c(t),l=1.2*Math.max(i,s),o=256,a=96,c=.0254,h=new M$r(new j$C({size:[o,o],origin:{x:e[0]-.5*(l-i),y:e[3]+.5*(l-s)},lods:[{level:0,resolution:l/o,scale:1/(o/a*c/(l*r))}],spatialReference:t}));return h.ensureMaxLod(20),h}static makeWebMercatorAuxiliarySphere(e){const t=new M$r(M$r.WebMercatorAuxiliarySphereTileInfo);return t.ensureMaxLod(e),t}static makeGCSWithTileSize(e,t=256,i=16){const s=256/t,r=new M$r(new j$C({size:[t,t],origin:{x:-180,y:90,spatialReference:e},spatialReference:e,lods:[{level:0,resolution:.703125*s,scale:295497598.570834*s}]}));return r.ensureMaxLod(i),r}get test(){return {isWebMercator:this._isWebMercator,isGCS:this._isGCS}}}M$r.WebMercatorAuxiliarySphereTileInfo=new j$C({size:[256,256],origin:{x:-20037508.342787,y:20037508.342787,spatialReference:k$w.WebMercator},spatialReference:k$w.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:591657527.591555}]}),M$r.WebMercatorAuxiliarySphere=M$r.makeWebMercatorAuxiliarySphere(19);const d$1s=u$1x();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const I$r=64;j$H(w$N/10);const s$1z=u$1x();M$r.WebMercatorAuxiliarySphere.getExtent(0,0,0,s$1z);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const d$1r=n$2o(),M$q=n$2o(),j$B=n$2o(),v$H=n$2o();function x$r(e,o,r=0){const n=e.extent;if(t$1T(n))return !1;if(0===r)return b$S(n,o);const s=Math.min(n[2]-n[0],n[3]-n[1]);return w$I(n,o,r*s)}function S$w(e,t,o,l){r$1h(d$1r,o),d$1r[l]=t[l];const c=c$2P(d$1r,d$1r,t),f=c$2P(M$q,e,t),m=z$l(f,c),u=z$l(c,c);let p;p=m<=0?t:u<=m?o:u$1M(d$1r,t,d$1z(c,c,m/u));const h=c$2P(d$1r,e,p);return Math.PI/2-Math.atan(h[2]/Math.sqrt(h[0]*h[0]+h[1]*h[1]))}function w$G(e,o,r){const n=e.extent;if(t$1T(n))return 0;j$B[0]=n[0],j$B[1]=n[1],j$B[2]=r,v$H[0]=n[2],v$H[1]=n[3],v$H[2]=r;let s=1/0,i=1/0;return o[0]<j$B[0]?s=S$w(o,j$B,v$H,0):o[0]>v$H[0]&&(s=S$w(o,v$H,j$B,0)),o[1]<j$B[1]?i=S$w(o,j$B,v$H,1):o[1]>v$H[1]&&(i=S$w(o,v$H,j$B,1)),Math.min(s,i)}function R$l(t,r,n){if(t.spatialReference.isGeographic&&!$n$1(t.spatialReference))return new s$2l("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const s=M$r.checkUnsupported(t);if(r$1K(s))return s;const i=T$j(t,n);return i||(r&&!t.spatialReference.equals(r)?new s$2l("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null)}function T$j(t,o){const r=t.lods,n=r[0].resolution*2**r[0].level,s=[n*t.size[0],n*t.size[1]],i=[t.origin.x,t.origin.y],a=c$2C(o),l=u$1x();M$r.computeRowColExtent(a,s,i,l);const c=(l[2]-l[0])*(l[3]-l[1]);if(c>I$r){const o=r[0].scale*2**r[0].level;let s=Math.max((a[3]-a[1])/t.size[1],(a[2]-a[0])/t.size[0])*o/n;const i=Math.floor(Math.log(s)/Math.log(10));return s=Math.ceil(s/10**i)*10**i,new s$2l("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(o).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+s.toLocaleString()+".",{level0Scale:o,suggestedLevel0Scale:s,requiredNumRootTiles:c,allowedNumRootTiles:I$r})}return null}const y$1b=Object.freeze({__proto__:null,isInsideExtent:x$r,tiltToExtentEdge:w$G,checkIfTileInfoSupportedForViewSR:R$l});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function l$1W(){return !0}function o$1b(){return 0}function s$1y(l,o){const s=l.lods.length-1,c=l.spatialReference,a=$n$1(c)||G$j(c)||C$w(c);if(c.isWebMercator){if(!M$r.makeWebMercatorAuxiliarySphere(s).compatibleWith(l))return new s$2l("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else {if(!a)return new s$2l("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!M$r.makeGCSWithTileSize(l.spatialReference,l.size[0],s).compatibleWith(l))return l.spatialReference.isWGS84?new s$2l("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new s$2l("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}if(o&&!l.spatialReference.equals(o))return new s$2l("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}const c$2B=Object.freeze({__proto__:null,isInsideExtent:l$1W,tiltToExtentEdge:o$1b,checkIfTileInfoSupportedForViewSR:s$1y});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$1a={1:c$2B,2:y$1b};function w$F(t,e,n,l){return o$1a[l].checkIfTileInfoSupportedForViewSR(t,n,e)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$1Y(i,d){return null!=i&&("2d"===d||("local"===d?!i.isGeographic||(i.isWGS84||4490===i.wkid):i.isWebMercator||i.isWGS84||4490===i.wkid||104971===i.wkid||104905===i.wkid||104903===i.wkid))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function o$19(e,t={}){await p$2J(e,t),h$1E(t);}async function s$1x(e,i={}){const{basemap:r,view:n}=e;if(await r.load(i),h$1E(i),0===r.baseLayers.length)return;const o=r.baseLayers.getItemAt(0);if(!e$1z(o))return;if(r.spatialReference){if(n.spatialReference.equals(r.spatialReference))return;l$1V();}await o.load(i),h$1E(i);const s=(o.get("supportedSpatialReferences")||[o.get("tileInfo.spatialReference")]).filter(Boolean);0!==s.length&&s.every((e=>!n.spatialReference.equals(e)))&&l$1V();}function l$1V(){throw new s$2l("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}async function p$2J(a,t){const{basemap:i,view:r}=a;if(await i.load(t),0===i.baseLayers.length)return;const n=c$2A(i.baseLayers.concat(i.referenceLayers));if(n.length)throw n[0];const o=i.baseLayers.getItemAt(0);try{await o.load(t);}catch(s){const a="basemap-compatibility:unknown-error",t="Unknown basemap compatibility error",{name:i=a,message:r=t,details:n}=s;throw new s$2l(i,r,n)}m$1J(o,r);}function c$2A(a){const t=["ArcGISTiledImageServiceLayer","ArcGISTiledMapServiceLayer","OpenStreetMap","VectorTileLayer","WebTiledLayer"];return a.toArray().filter((e=>-1===t.indexOf(e.operationalLayerType))).map((a=>new s$2l("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:a,operationalLayerType:a.operationalLayerType||"unknown"})))}function m$1J(a,t){const o=a.tileInfo;if(!o)return;const s=t.viewingMode;if(!s)return;if(!i$1Y(o.spatialReference,s))throw new s$2l(`basemapgalleryitem:spatial-reference-unsupported-${s}`,`Basemap spatial reference is unsupported in ${s} mode`);if("global"===s){let t=w$F(o,a.fullExtent,null,1);if(t&&a.compatibleTileInfo256&&!w$F(a.compatibleTileInfo256,a.fullExtent,null,1)&&(t=null),t){const a=o.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new s$2l(`basemapgalleryitem:tiling-scheme-unsupported-${a}-global`,"Basemap tiling scheme is unsupported in global mode",{error:t})}}else if(M$r.checkUnsupported(o))throw new s$2l("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const l=t.get("basemapTerrain.tilingScheme");if(l&&!l.compatibleWith(o)&&(!a.compatibleTileInfo256||!l.compatibleWith(a.compatibleTileInfo256)))throw new s$2l("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$1U=class extends p$3a{constructor(t){super(t),this._handles=new u$25,this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null;}initialize(){this._handles.add(i$2x(this,["basemap.loadStatus","compatibilityFunction","view.basemapTerrain?.tilingScheme","view.ready","view.spatialReference"],(()=>this.refresh())));}destroy(){this._cancelCompatibilityCheck(),this._handles.destroy(),this._handles=null,this.basemap=null,this.compatibilityFunction=null,this.view=null;}set basemap(t){const e=this._get("basemap");e&&e.cancelLoad(),t&&t.load().catch((()=>{})),this._set("basemap",t);}refresh(){this._cancelCompatibilityCheck(),this._set("state","loading");const t=this.get("basemap.loadStatus");if("loaded"!==t&&"failed"!==t)return;if(!this.compatibilityFunction)return void("loaded"===t?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const e=new AbortController,{signal:s}=e;this.compatibilityFunction(this,{signal:s}).then((()=>{this._set("state","ready"),this._set("error",null);})).catch((t=>{d$1Z(t)||(this._set("state","error"),this._set("error",t));})),this._lastCompatibilityCheckController=e;}_cancelCompatibilityCheck(){this._lastCompatibilityCheckController&&(this._lastCompatibilityCheckController.abort(),this._lastCompatibilityCheckController=null);}};e$25([d$1T()],l$1U.prototype,"basemap",null),e$25([d$1T()],l$1U.prototype,"compatibilityFunction",void 0),e$25([d$1T({readOnly:!0})],l$1U.prototype,"error",void 0),e$25([d$1T({readOnly:!0})],l$1U.prototype,"state",void 0),e$25([d$1T()],l$1U.prototype,"view",void 0),l$1U=e$25([i$2z("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],l$1U);const c$2z=l$1U;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$2x=S$I.ofType(x$B);let c$2y=class extends p$3a{constructor(r){super(r),this.basemaps=new a$2x;}get state(){return "ready"}refresh(){}};e$25([d$1T({type:a$2x})],c$2y.prototype,"basemaps",void 0),e$25([d$1T({readOnly:!0})],c$2y.prototype,"state",null),c$2y=e$25([i$2z("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],c$2y);const m$1I=c$2y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const d$1q=S$I.ofType(x$B),f$18="esri.widgets.BasemapGallery.support.PortalBasemapsSource",y$1a=s$2n.getLogger(f$18);let b$R=class extends(m$1$.LoadableMixin(n$2A(m$1I))){constructor(t){super(t),this._handles=new u$25,this.basemaps=new d$1q,this.filterFunction=null,this.portal=B$i.getDefault(),this.query=null,this.updateBasemapsCallback=null;}initialize(){this._handles.add([i$2x(this,["filterFunction","loadStatus","portal.basemapGalleryGroupQuery","portal.user","query","updateBasemapsCallback"],(()=>this.refresh()))]);}destroy(){this._handles.destroy(),this._handles=null,this.filterFunction=null,this.portal=null;}get state(){return "not-loaded"===this.loadStatus?"not-loaded":"loading"===this.loadStatus||this._lastPortalBasemapFetchController?"loading":"ready"}load(t){return this.addResolvingPromise(this.portal.load(t)),this.notifyChange("state"),Promise.resolve(this)}async refresh(){if("ready"!==this.state)return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const t=this.portal,e=new AbortController;this._lastPortalBasemapFetchController=e,this.notifyChange("state");try{const s=await t.fetchBasemaps(this._toQueryString(this.query),e);this._updateBasemaps(s);}catch(s){if(d$1Z(s))throw s;y$1a.warn(new s$2l("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:s})),this._updateBasemaps();}this._lastPortalBasemapFetchController=null,this.notifyChange("state");}_toQueryString(t){return t&&"string"!=typeof t?Object.keys(t).map((e=>`${e}:${t[e]}`)).join(" AND "):t}_updateBasemaps(t=[]){let e=this.filterFunction?t.filter(this.filterFunction):t;e=this.updateBasemapsCallback?this.updateBasemapsCallback(e):e,this.basemaps.removeAll(),this.basemaps.addMany(e);}};e$25([d$1T({readOnly:!0,type:d$1q})],b$R.prototype,"basemaps",void 0),e$25([d$1T()],b$R.prototype,"filterFunction",void 0),e$25([d$1T({type:B$i})],b$R.prototype,"portal",void 0),e$25([d$1T()],b$R.prototype,"query",void 0),e$25([d$1T({readOnly:!0})],b$R.prototype,"state",null),e$25([d$1T()],b$R.prototype,"updateBasemapsCallback",void 0),b$R=e$25([i$2z(f$18)],b$R);const j$A=b$R;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const y$19=S$I.ofType(c$2z);function b$Q(t){return t&&"esri.portal.Portal"===t.declaredClass}function f$17(t){return t&&!(t instanceof j$A)&&(!!t.portal||!!t.query)}function v$G(t){return t&&"basemaps"in t&&"state"in t&&"refresh"in t}let w$E=class extends m$1${constructor(t){super(t),this._handles=new u$25,this.activeBasemap=null,this.items=new y$19,this.source=new j$A,this.view=null;}initialize(){const t=()=>this._recreateItems();this._handles.add([f$1B(this,["compatibilityFunction","state"],(()=>this._updateItems())),$$g(this,"source.basemaps","change",t,t)]);}destroy(){this._handles.destroy(),this._handles=null;}get compatibilityFunction(){if(void 0===this._get("compatibilityFunction")){return "3d"===this.get("view.type")?o$19:s$1x}return this._get("compatibilityFunction")}set compatibilityFunction(t){this._set("compatibilityFunction",t);}castSource(t){return Array.isArray(t)||S$I.isCollection(t)?new m$1I({basemaps:t}):b$Q(t)?new j$A({portal:t}):f$17(t)?new j$A(t):v$G(t)?t:null}get state(){return this.get("view.ready")&&this.source?"ready":"disabled"}basemapEquals(t,e){return b$_(t,e)}refresh(){this._recreateItems();}load(t){return this.addResolvingPromise(m$1$.isLoadable(this.source)?this.source.load(t):Promise.resolve()),Promise.resolve(this)}_recreateItems(){const t=this.get("source.basemaps"),{view:e,compatibilityFunction:s}=this;this.items.removeAll().forEach((t=>t.destroy())),this.items.addMany(t.map((t=>new c$2z({basemap:t,compatibilityFunction:s,view:e}))));}_updateItems(){this.items.forEach((t=>{t.compatibilityFunction=this.compatibilityFunction,t.view=this.view;}));}};e$25([d$1T({aliasOf:"view.map.basemap"})],w$E.prototype,"activeBasemap",void 0),e$25([d$1T()],w$E.prototype,"compatibilityFunction",null),e$25([d$1T({readOnly:!0,type:y$19})],w$E.prototype,"items",void 0),e$25([d$1T()],w$E.prototype,"source",void 0),e$25([c$35("source")],w$E.prototype,"castSource",null),e$25([d$1T({readOnly:!0})],w$E.prototype,"state",null),e$25([d$1T()],w$E.prototype,"view",void 0),w$E=e$25([i$2z("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],w$E);const j$z=w$E;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$1i=function(r){return {vnodeSelector:"",properties:void 0,children:void 0,text:r.toString(),domNode:null}},o$18=function(r,t){for(var n=0,i=r.length;n<i;n++){var d=r[n];Array.isArray(d)?o$18(d,t):null!=d&&!1!==d&&(d.hasOwnProperty("vnodeSelector")||(d=e$1i(d)),t.push(d));}},t$1g=function(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];if(1===t.length&&"string"==typeof t[0])return {vnodeSelector:r,properties:e||void 0,children:void 0,text:t[0],domNode:null};var i=[];return o$18(t,i),{vnodeSelector:r,properties:e||void 0,children:i,text:void 0,domNode:null}};function n$2g(e,o,...n){return "function"!=typeof e||c$32(e)?t$1g(e,o,...n):e(o,...n)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$14={heading:"esri-widget__heading"};function s$1w(s,i){const c=`h${e$1u(Math.ceil(s.level),1,6)}`;return delete s.level,n$2g(c,{...s,class:l$2j(r$14.heading,s.class)},i)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$1f(){return function(n,t){if(!n[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return {value:o$17(n[t])}}}function e$1h(n){const{type:t}=n;return n instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}function o$17(t){return function(o,...r){e$1h(o)?y$1t(o.key)&&(o.preventDefault(),o.stopPropagation(),o.target.click()):t.call(this,o,...r);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1g(e){return function(s,n){s.hasOwnProperty("_messageBundleProps")||(s._messageBundleProps=s._messageBundleProps?s._messageBundleProps.slice():[]);s._messageBundleProps.push({bundlePath:e,propertyName:n});}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h$1a={base:"esri-basemap-gallery esri-widget esri-widget--panel-height-only",sourceLoading:"esri-basemap-gallery--source-loading",loader:"esri-basemap-gallery__loader",item:"esri-basemap-gallery__item",itemContainer:"esri-basemap-gallery__item-container",itemTitle:"esri-basemap-gallery__item-title",itemThumbnail:"esri-basemap-gallery__item-thumbnail",selectedItem:"esri-basemap-gallery__item--selected",itemLoading:"esri-basemap-gallery__item--loading",itemError:"esri-basemap-gallery__item--error",emptyMessage:"esri-widget__content--empty",widgetIcon:"esri-icon-basemap",disabled:"esri-disabled"};let y$18=class extends z$o{constructor(e,s){super(e,s),this._handles=new u$25,this.activeBasemap=null,this.disabled=!1,this.headingLevel=2,this.iconClass=h$1a.widgetIcon,this.label=void 0,this.messages=null,this.source=null,this.view=null,this.viewModel=new j$z;}initialize(){const e=this._handles;this.own([$$g(this,"viewModel.items","change",(s=>{const a="basemap-gallery-item-changes",{added:t,moved:i}=s;e.remove(a),e.add([...t,...i].map((e=>e.watch("state",(()=>this.scheduleRender())))),a),this.scheduleRender();})),e,a$2Y(this,"source",(()=>this.viewModel.load()))]);}render(){const e="loading"===this.get("source.state"),s=this.disabled||"disabled"===this.get("viewModel.state"),a=this.get("viewModel.items").toArray().map(this._renderBasemapGalleryItem,this),t={[h$1a.sourceLoading]:e,[h$1a.disabled]:s},i=e?n$2g("div",{class:h$1a.loader,key:"esri-basemap-gallery__loader"}):null,r=e?null:a.length>0?n$2g("ul",{class:h$1a.itemContainer,key:"esri-basemap-gallery__item-container",role:"menu"},a):n$2g("div",{class:h$1a.emptyMessage,key:"esri-basemap-gallery__empty-message"},n$2g(s$1w,{level:this.headingLevel},this.messages.noBasemaps));return n$2g("div",{class:this.classes(h$1a.base,t)},i,r)}_handleClick(e){const s=e.currentTarget["data-item"];"ready"===s.state&&(this.activeBasemap=s.basemap);}_renderBasemapGalleryItem(e){const a=e.get("basemap.thumbnailUrl")||a$34("esri/themes/base/images/basemap-toggle-64.svg"),t=e.get("basemap.title"),i=e.get("basemap.portalItem.snippet"),r=e.get("error.message")||i||t,{viewModel:o}=this,l=!this.disabled&&"ready"===o.state&&"ready"===e.state?0:-1,m=o.basemapEquals(e.basemap,this.activeBasemap),d={[h$1a.selectedItem]:m,[h$1a.itemLoading]:"loading"===e.state,[h$1a.itemError]:"error"===e.state};return n$2g("li",{"aria-selected":m.toString(),bind:this,class:this.classes(h$1a.item,d),"data-item":e,onkeydown:this._handleClick,onclick:this._handleClick,role:"menuitem",tabIndex:l,title:r},n$2g("img",{alt:"",class:h$1a.itemThumbnail,src:a}),n$2g("div",{class:h$1a.itemTitle},t))}};e$25([o$1K("viewModel.activeBasemap")],y$18.prototype,"activeBasemap",void 0),e$25([d$1T()],y$18.prototype,"disabled",void 0),e$25([d$1T()],y$18.prototype,"headingLevel",void 0),e$25([d$1T()],y$18.prototype,"iconClass",void 0),e$25([d$1T({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],y$18.prototype,"label",void 0),e$25([d$1T(),e$1g("esri/widgets/BasemapGallery/t9n/BasemapGallery")],y$18.prototype,"messages",void 0),e$25([o$1K("viewModel.source")],y$18.prototype,"source",void 0),e$25([o$1K("viewModel.view")],y$18.prototype,"view",void 0),e$25([d$1T()],y$18.prototype,"viewModel",void 0),e$25([t$1f()],y$18.prototype,"_handleClick",null),y$18=e$25([i$2z("esri.widgets.BasemapGallery")],y$18);const b$P=y$18;

const arcgisBasemapGalleryCss = "@import url('https://js.arcgis.com/next/esri/themes/light/main.css');arcgis-basemap-gallery{min-width:300px;min-height:240px}";

let ArcGISBasemapGallery = class extends HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.loaded = createEvent(this, "loaded", 7);
    this.position = 'bottom-left';
  }
  validateView(value) {
    if (value) {
      this.widget.view = value;
      if (this.el.parentElement.tagName.toLowerCase() !== 'arcgis-expand') {
        this.widget.view.ui.add(this.widget, this.position);
      }
    }
  }
  componentWillLoad() {
    const bmg = new b$P({
      container: this.el,
    });
    this.widget = bmg;
    if (this.view) {
      bmg.view = this.view;
    }
    this.loaded.emit(true);
  }
  get el() { return this; }
  static get watchers() { return {
    "view": ["validateView"]
  }; }
  static get style() { return arcgisBasemapGalleryCss; }
};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$2I=class extends p$3a{constructor(e){super(e),this._viewpointHandle=null,this._handles=new u$25,this.group=null;}initialize(){this._handles.add($$g(this,"view.ui","expand",(e=>{const{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse();})));}destroy(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null;}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint();}set expanded(e){const t=!!e;this._set("expanded",t);const s=this.get("view.ui");s&&s.emit("expand",{target:this}),this._viewpointHandleChange(t);}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&d$1Q(e,"ready",(()=>{this.view===e&&this._watchViewpoint();})));}_viewpointHandleChange(e){this._viewpointHandle&&(e?d$1Q(this.view,"stationary",(()=>this._viewpointHandle.resume())):this._viewpointHandle.pause());}_watchViewpoint(){const e="viewpoint";this._handles.remove(e),this._viewpointHandle=null;const{autoCollapse:t,view:s}=this;if(s&&t){const t="3d"===s.type?"camera":"viewpoint",i=O$s(s,t,(()=>this._collapse()));this._handles.add(i,e),this._viewpointHandle=i;}}_collapse(){this.expanded=!1;}};e$25([d$1T({value:!1})],p$2I.prototype,"autoCollapse",null),e$25([d$1T({value:!1})],p$2I.prototype,"expanded",null),e$25([d$1T()],p$2I.prototype,"group",void 0),e$25([d$1T({readOnly:!0})],p$2I.prototype,"state",null),e$25([d$1T({value:null})],p$2I.prototype,"view",null),p$2I=e$25([i$2z("esri.widgets.Expand.ExpandViewModel")],p$2I);const l$1T=p$2I;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$2f(n){return n.split(",").map((n=>n.trim()))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$1e(t){return a=>{a.hasOwnProperty("_delegatedEventNames")||(a._delegatedEventNames=a._delegatedEventNames?a._delegatedEventNames.slice():[]);const r=a._delegatedEventNames,s=Array.isArray(t)?t:n$2f(t);r.push(...s);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$1f(e){return e&&"function"==typeof e.render}function t$1d(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$2x={base:"esri-expand esri-widget",modeAuto:"esri-expand--auto",modeDrawer:"esri-expand--drawer",modeFloating:"esri-expand--floating",container:"esri-expand__container",containerExpanded:"esri-expand__container--expanded",panel:"esri-expand__panel",button:"esri-widget--button",text:"esri-icon-font-fallback-text",icon:"esri-collapse__icon",iconExpanded:"esri-expand__icon--expanded",iconNumber:"esri-expand__icon-number",iconNumberExpanded:"esri-expand__icon-number--expanded",expandIcon:"esri-icon-expand",collapseIcon:"esri-icon-collapse",content:"esri-expand__content",contentExpanded:"esri-expand__content--expanded",expandMask:"esri-expand__mask",expandMaskExpanded:"esri-expand__mask--expanded"};let u$1w=class extends z$o{constructor(e,o){super(e,o),this.autoCollapse=null,this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expanded=null,this.expandTooltip="",this.group=null,this.iconNumber=0,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.view=null,this.viewModel=new l$1T,this._handleKeyDown=e=>{const{closeOnEsc:o,_toggleButtonEl:t,expanded:n}=this;if(!n||!o||e.target===t||"Escape"!==e.key)return;("function"==typeof o?o(e):o)&&(this.expanded=!1,null==t||t.focus());};}get contentId(){return `${this.id}_controls_content`}get expandTitle(){const{expanded:e,messagesCommon:o,collapseTooltip:t,expandTooltip:n}=this;return e?t||o.collapse:n||o.expand}get collapseIconClass(){return c$2x.collapseIcon}set collapseIconClass(e){e?this._override("collapseIconClass",e):this._clearOverride("collapseIconClass");}get expandIconClass(){return e$1f(this.content)?this.content.iconClass:c$2x.expandIcon}set expandIconClass(e){e?this._override("expandIconClass",e):this._clearOverride("expandIconClass");}expand(){this.viewModel.expanded=!0;}collapse(){this.viewModel.expanded=!1;}toggle(){this.viewModel.expanded=!this.viewModel.expanded;}render(){const{mode:e}=this,o={[c$2x.modeAuto]:"auto"===e,[c$2x.modeDrawer]:"drawer"===e,[c$2x.modeFloating]:"floating"===e};return n$2g("div",{class:this.classes(c$2x.base,o),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())}renderContainer(){const{expanded:e}=this,o={[c$2x.containerExpanded]:e};return n$2g("div",{class:this.classes(c$2x.container,o)},this.renderPanel(),this.renderContent())}renderMask(){const{expanded:e}=this,o={[c$2x.expandMaskExpanded]:e};return n$2g("div",{bind:this,onclick:this._toggle,class:this.classes(c$2x.expandMask,o)})}renderBadgeNumber(){const{expanded:e,iconNumber:o}=this;return o&&!e?n$2g("span",{key:"expand__icon-number",class:c$2x.iconNumber},o):null}renderPanelNumber(){const{iconNumber:e,expanded:o}=this;return e&&o?n$2g("span",{key:"expand__expand-icon-number",class:this.classes(c$2x.iconNumber,c$2x.iconNumberExpanded)},e):null}renderIcon(){const{collapseIconClass:e,expandIconClass:o,expanded:t}=this,n={[c$2x.iconExpanded]:t,[e]:t,[o]:!t};return e===o&&(n[e]=!0),n$2g("span",{"aria-hidden":"true",class:this.classes(c$2x.icon,n)})}renderTitle(){return n$2g("span",{class:c$2x.text},this.expandTitle)}renderExpandButton(){const{expanded:e,expandTitle:o,contentId:t}=this;return n$2g("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":t,"aria-expanded":e?"true":"false",bind:this,class:c$2x.button,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:o},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}renderPanel(){return n$2g("div",{class:c$2x.panel},this.renderExpandButton(),this.renderPanelNumber())}renderContent(){const{expanded:e,contentId:o}=this,t={[c$2x.contentExpanded]:e};return n$2g("div",{id:o,role:"region",class:this.classes(c$2x.content,t)},this.renderContentContainer())}renderContentContainer(){const e=this.content;return "string"==typeof e?n$2g("div",{innerHTML:e}):e$1f(e)?e.render():e instanceof HTMLElement?n$2g("div",{bind:e,afterCreate:this._attachToNode}):t$1d(e)?n$2g("div",{bind:e.domNode,afterCreate:this._attachToNode}):null}_toggle(){this.toggle();}_attachToNode(e){const o=this;e.appendChild(o);}_storeToggleButtonEl(e){this._toggleButtonEl=e;}};e$25([d$1T({readOnly:!0})],u$1w.prototype,"contentId",null),e$25([d$1T({readOnly:!0})],u$1w.prototype,"expandTitle",null),e$25([o$1K("viewModel.autoCollapse")],u$1w.prototype,"autoCollapse",void 0),e$25([d$1T()],u$1w.prototype,"closeOnEsc",void 0),e$25([d$1T()],u$1w.prototype,"collapseIconClass",null),e$25([d$1T()],u$1w.prototype,"collapseTooltip",void 0),e$25([d$1T()],u$1w.prototype,"content",void 0),e$25([o$1K("viewModel.expanded")],u$1w.prototype,"expanded",void 0),e$25([d$1T()],u$1w.prototype,"expandIconClass",null),e$25([d$1T()],u$1w.prototype,"expandTooltip",void 0),e$25([o$1K("viewModel.group")],u$1w.prototype,"group",void 0),e$25([d$1T()],u$1w.prototype,"iconNumber",void 0),e$25([d$1T({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],u$1w.prototype,"label",void 0),e$25([d$1T(),e$1g("esri/widgets/Expand/t9n/Expand")],u$1w.prototype,"messages",void 0),e$25([d$1T(),e$1g("esri/t9n/common")],u$1w.prototype,"messagesCommon",void 0),e$25([d$1T()],u$1w.prototype,"mode",void 0),e$25([o$1K("viewModel.view")],u$1w.prototype,"view",void 0),e$25([d$1T({type:l$1T})],u$1w.prototype,"viewModel",void 0),e$25([t$1f()],u$1w.prototype,"_toggle",null),u$1w=e$25([i$2z("esri.widgets.Expand")],u$1w);const x$q=u$1w;

const arcgisExpandCss = "@import url('https://js.arcgis.com/next/esri/themes/light/main.css');.esri-expand__content--expanded{max-height:240px!important;min-height:32px!important;min-width:240px!important;overflow-y:auto!important;background-color:#fff}";

let ArcGISSearch$1 = class extends HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.loaded = createEvent(this, "loaded", 7);
  }
  validateView(value) {
    if (value) {
      this.widget.view = value;
      this.widget.view.ui.add(this.el, this.position);
    }
  }
  componentWillLoad() {
    const expand = new x$q({
      container: this.el
    });
    this.widget = expand;
    this.loaded.emit(true);
  }
  componentDidRender() {
    const elems = Array.from(this.el.children);
    for (let e of elems) {
      if (e.tagName.toLowerCase().includes('arcgis-')) {
        e.view = this.view;
        this.widget.content = e;
        this.widget.expandIconClass = e.widget.iconClass;
      }
    }
  }
  get el() { return this; }
  static get watchers() { return {
    "view": ["validateView"]
  }; }
  static get style() { return arcgisExpandCss; }
};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$1S=class extends p$3a{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new u$25,this.scheduleHandleId=0,this.pendingPromises=new Set;}destroy(){this.removeAll(),this.handles.destroy();}add(e,s,t,d=0){const r=0!=(1&d),i=++this.handleId;r||this.installSyncUpdatingWatch(e,s,i);const a=0!=(2&d)?i$2x(e,s,t,r):e.watch(s,t,r);return this.handles.add(a,i),{remove:()=>this.handles.remove(i)}}addOnCollectionPropertyChange(e,s,t,d=0){const r=0!=(2&d),i=++this.handleId;return this.handles.add([$$g(e,s,"after-changes",this.createSyncUpdatingCallback()),$$g(e,s,"change",t,r?e=>{t({added:e.items,removed:[],moved:[],target:e});}:void 0)],i),{remove:()=>{this.handles.remove(i);}}}addOnCollectionChange(e,s,t=0){const d=0!=(2&t),r=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",s)],r),d&&s({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(r);}}}addPromise(e){if(t$1T(e))return e;const s=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(m$1H)||this._set("updating",!1));}},s),this.pendingPromises.add(e),this._set("updating",!0);const t=()=>this.handles.remove(s);return e.then(t,t),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1);}installSyncUpdatingWatch(e,s,t){const d=this.createSyncUpdatingCallback(),i=i$23((()=>u$2g(e,s)),d,{sync:!0,equals:()=>!1});return this.handles.add(i,t),i}createSyncUpdatingCallback(){return ()=>{this.handles.remove(m$1H),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(v$$((()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(m$1H));})),m$1H);}}};e$25([d$1T({readOnly:!0})],l$1S.prototype,"updating",void 0),l$1S=e$25([i$2z("esri.views.support.WatchUpdatingTracking")],l$1S);const m$1H=-42;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$2w=s=>{let a=class extends s{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy());}get handles(){return this._get("handles")||new u$25}get updatingHandles(){return this._get("updatingHandles")||new l$1S}};return e$25([d$1T({readOnly:!0})],a.prototype,"handles",null),e$25([d$1T({readOnly:!0})],a.prototype,"updatingHandles",null),a=e$25([i$2z("esri.core.HandleOwner")],a),a};let d$1p=class extends(a$2w(p$3a)){};d$1p=e$25([i$2z("esri.core.HandleOwner")],d$1p);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$1X=s$24()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),t$1c=s$24()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function s$1v(o){return void 0!==o.xmin&&void 0!==o.ymin&&void 0!==o.xmax&&void 0!==o.ymax}function f$16(o){return void 0!==o.points}function l$1R(o){return void 0!==o.x&&void 0!==o.y}function y$17(o){return void 0!==o.paths}function c$2w(o){return void 0!==o.rings}function d$1o(u){return t$1T(u)?null:u instanceof p$2$?u:l$1R(u)?b$10.fromJSON(u):y$17(u)?m$1L.fromJSON(u):c$2w(u)?v$J.fromJSON(u):f$16(u)?m$1N.fromJSON(u):s$1v(u)?M$A.fromJSON(u):null}function v$F(o){return o?l$1R(o)?"esriGeometryPoint":y$17(o)?"esriGeometryPolyline":c$2w(o)?"esriGeometryPolygon":s$1v(o)?"esriGeometryEnvelope":f$16(o)?"esriGeometryMultipoint":null:null}const G$b={esriGeometryPoint:b$10,esriGeometryPolyline:m$1L,esriGeometryPolygon:v$J,esriGeometryEnvelope:M$A,esriGeometryMultipoint:m$1N};function a$2v(o){return o&&G$b[o]||null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$1W={base:p$2$,key:"type",typeMap:{extent:M$A,multipoint:m$1N,point:b$10,polyline:m$1L,polygon:v$J}};N$t(i$1W);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$1e;function a$2u(n,a){switch(n.type){case"range":{const r="range"in n?n.range[0]:n.minValue,u="range"in n?n.range[1]:n.maxValue;if(+a<r||+a>u)return e$1e.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==n.codedValues||n.codedValues.every((e=>null==e||e.code!==a)))return e$1e.INVALID_CODED_VALUE}return null}function r$13(e){if(!e||"range"!==e.type)return;return {min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}!function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";}(e$1e||(e$1e={}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$1b;function a$2t(){return t$1b||(t$1b=(async()=>{const e=await import('./arcadeUtils.js').then(function (n) { return n.as; });return {arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),t$1b}const s$1u=(e,r,t)=>o$16.create(e,r,t,null,["$feature"]),i$1V=(e,r,t)=>o$16.create(e,r,t,null,["$feature","$view"]),n$2e=(e,r,t,a)=>o$16.create(e,r,t,a,["$feature","$view"]);class o$16{constructor(e,r,t,a,s,i,c,n){this.script=e,this.evaluate=s;const o=Array.isArray(c)?c:c.fields;this.fields=o,this._syntaxTree=a,this._arcade=r,this._arcadeDictionary=t,this._arcadeFeature=i,this._spatialReference=n,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale");}static async create(t,s,i,c,n,l){const{arcade:u,Feature:p,Dictionary:f}=await a$2t(),d=k$w.fromJSON(s),y=u.parseScript(t,l),h=n.reduce(((e,r)=>({...e,[r]:null})),{});let m=null;r$1K(c)&&(m=new f(c),m.immutable=!0,h.$config=null);const _=u.scriptUsesGeometryEngine(y)&&u.enableGeometrySupport(),F=u.scriptUsesFeatureSet(y)&&u.enableFeatureSetSupport(),w=u.scriptIsAsync(y)&&u.enableAsyncSupport(),S={vars:h,spatialReference:d,useAsync:!!w},b=new f;b.immutable=!1,b.setField("scale",0);const $=u.compileScript(y,S),x=e=>("$view"in e&&e.$view&&(b.setField("scale",e.$view.scale),e.$view=b),m&&(e.$config=m),$({vars:e,spatialReference:d}));return await Promise.all([_,F,w]),new o$16(t,u,f,y,x,new p,i,d)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u$1v=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],f$15=["field","normalizationField"];function d$1n(e,n){if(null!=e&&null!=n)for(const i of Array.isArray(e)?e:[e])if(c$2v(u$1v,i,n),"visualVariables"in i&&i.visualVariables)for(const e of i.visualVariables)c$2v(f$15,e,n);}function c$2v(e,n,i){if(e)for(const l of e){const e=t$1Q(l,n),o=e&&"function"!=typeof e&&i.get(e);o&&o$1$(l,o.name,n);}}function m$1G(e,n){if(null!=e&&null!=n&&n.fields.length)if("startField"in e){const i=n.get(e.startField),t=n.get(e.endField);e.startField=i&&i.name||null,e.endField=t&&t.name||null;}else {const i=n.get(e.startTimeField),t=n.get(e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=t&&t.name||null;}}const p$2H=new Set;function y$16(e,n){return e&&n?(p$2H.clear(),g$R(p$2H,e,n),Array.from(p$2H).sort()):[]}function g$R(e,n,i){var t;if(i)if(null!=n&&null!=(t=n.fields)&&t.length)if(i.includes("*"))for(const{name:r}of n.fields)e.add(r);else for(const r of i)F$h(e,n,r);else {if(i.includes("*"))return e.clear(),void e.add("*");for(const n of i)e.add(n);}}function F$h(e,n,i){if("string"==typeof i)if(n){const t=n.get(i);t&&e.add(t.name);}else e.add(i);}function I$q(e,i){return t$1T(i)||t$1T(e)?[]:i.includes("*")?e.fields.map((e=>e.name)):i}async function b$O(e,n,i){var t;if(!i)return;const{arcadeUtils:r}=await a$2t(),l=r.extractFieldNames(i,null==n||null==(t=n.fields)?void 0:t.map((e=>e.name)));for(const o of l)F$h(e,n,o);}async function T$i(n,i,t){if(t&&"1=1"!==t){const r=(await import('./WhereClause.js')).WhereClause.create(t,i);if(!r.isStandardized)throw new s$2l("fieldUtils:collectFilterFields","Where clause is not standardized");g$R(n,i,r.fieldNames);}}function h$19({displayField:e,fields:n}){return e||(n&&n.length?w$D(n,"name-or-title")||w$D(n,"unique-identifier")||w$D(n,"type-or-category")||v$E(n):null)}function v$E(e){for(const n of e){if(!n||!n.name)continue;const e=n.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return n.name}return null}function w$D(e,n){for(const i of e)if(i&&i.valueType&&i.valueType===n)return i.name;return null}async function A$g(e,n){if(!n)return;const i=t$1Q("elevationInfo.featureExpressionInfo",n);return i?i.collectRequiredFields(e,n.fieldsIndex):void 0}async function E$k(e,n,i){i.outStatistic.onStatisticValueExpression?b$O(e,n,i.outStatistic.onStatisticValueExpression):e.add(i.outStatistic.onStatisticField);}async function N$h(e,n,i){var t;if(!n||!i||"cluster"!==i.type)return;const r=[];null!=(t=i.popupTemplate)&&t.expressionInfos&&r.push(...i.popupTemplate.expressionInfos.map((i=>b$O(e,n.fieldsIndex,i.expression)))),i.fields&&r.push(...i.fields.map((i=>E$k(e,n.fieldsIndex,i)))),await Promise.all(r);}async function V$a(e,n,t){n&&(n.timeInfo&&r$1K(t)&&t.timeExtent&&g$R(e,n.fieldsIndex,[n.timeInfo.startField,n.timeInfo.endField]),n.floorInfo&&g$R(e,n.fieldsIndex,[n.floorInfo.floorField]),r$1K(t)&&r$1K(t.where)&&await T$i(e,n.fieldsIndex,t.where));}async function _$q(e,n,i){n&&i&&await Promise.all(i.map((i=>D$i(e,n,i))));}async function D$i(e,n,i){n&&i&&(i.valueExpression?await b$O(e,n.fieldsIndex,i.valueExpression):i.field&&F$h(e,n.fieldsIndex,i.field));}function O$i(e){if(!e)return [];const n="editFieldsInfo"in e&&e.editFieldsInfo;return n?y$16(e.fieldsIndex,[n&&n.creatorField,n&&n.creationDateField,n&&n.editorField,n&&n.editDateField]):[]}function L$n(e){if(!e)return [];const n=e.geometryFieldsInfo;return n?y$16(e.fieldsIndex,[n.shapeAreaField,n.shapeLengthField]):[]}async function j$y(e,n){const{labelingInfo:i,fieldsIndex:t}=n;i&&i.length&&await Promise.all(i.map((n=>z$g(e,t,n))));}async function z$g(e,n,i){if(!i)return;const t=i.getLabelExpression(),r=i.where;if("arcade"===t.type)await b$O(e,n,t.expression);else {const i=t.expression.match(/{[^}]*}/g);i&&i.forEach((i=>{F$h(e,n,i.slice(1,-1));}));}await T$i(e,n,r);}function P$j(e){const n=e.defaultValue;return void 0!==n&&Y$8(e,n)?n:e.nullable?null:void 0}function k$n(e){return "number"==typeof e&&!isNaN(e)&&isFinite(e)}function R$k(e){return null===e||k$n(e)}const C$o="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function G$a(e){return null===e||C$o(e)}function q$f(e){return null!=e&&"string"==typeof e}function M$p(e){return null===e||q$f(e)}function W$8(){return !0}function Y$8(e,n){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?G$a:C$o;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?R$k:k$n;break;case"string":case"esriFieldTypeString":i=e.nullable?M$p:q$f;break;default:i=W$8;}return 1===arguments.length?i:i(n)}const J$7=["integer","small-integer","single","double"],X$8=new Set([...J$7,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function B$c(e){return null!=e&&X$8.has(e.type)}function H$a(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function K$9(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}var Z$8,ee$5;function ne$4(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function ie$4(e,n){return e.nullable&&null===n?null:B$c(e)&&!te$5(e.type,Number(n))?Z$8.OUT_OF_RANGE:Y$8(e,n)?e.domain?a$2u(e.domain,n):null:ee$5.INVALID_TYPE}function te$5(e,n){const i="string"==typeof e?le$4(e):e;return !!i&&(i.isInteger?C$o(n)&&n>=i.min&&n<=i.max:n>=i.min&&n<=i.max)}function re$5(e){const n=r$13(e.domain);return n||(B$c(e)?le$4(e.type):void 0)}function le$4(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return ae$4;case"esriFieldTypeInteger":case"integer":return se$5;case"esriFieldTypeSingle":case"single":return ue$4;case"esriFieldTypeDouble":case"double":return fe$4}}!function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range";}(Z$8||(Z$8={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type";}(ee$5||(ee$5={}));const ae$4={min:-32768,max:32767,isInteger:!0},se$5={min:-2147483648,max:2147483647,isInteger:!0},ue$4={min:-34e37,max:12e37,isInteger:!1},fe$4={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function de$4(e,n,i){switch(e){case e$1e.INVALID_CODED_VALUE:return `Value ${i} is not in the coded domain - field: ${n.name}, domain: ${JSON.stringify(n.domain)}`;case e$1e.VALUE_OUT_OF_RANGE:return `Value ${i} is out of the range of valid values - field: ${n.name}, domain: ${JSON.stringify(n.domain)}`;case ee$5.INVALID_TYPE:return `Value ${i} is not a valid value for the field type - field: ${n.name}, type: ${n.type}, nullable: ${n.nullable}`;case Z$8.OUT_OF_RANGE:{const{min:e,max:t}=le$4(n.type);return `Value ${i} is out of range for the number type - field: ${n.name}, type: ${n.type}, value range is ${e} to ${t}`}}}function ce$4(e,n){return !me$3(e,n,null)}function me$3(e,n,t){if(!n||!n.attributes||!e){if(r$1K(t))for(const n of e)t.add(n);return !0}const r=n.attributes;let l=!1;for(const o of e)if(!(o in r)){if(l=!0,!r$1K(t))break;t.add(o);}return l}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$1d=class extends a$2N{constructor(r){super(r),this.type=null;}};e$25([d$1T({type:["attachments","custom","fields","media","text"],readOnly:!0,json:{read:!1,write:!0}})],e$1d.prototype,"type",void 0),e$1d=e$25([i$2z("esri.popup.content.Content")],e$1d);const p$2G=e$1d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var o$15;let i$1U=o$15=class extends p$2G{constructor(t){super(t),this.description=null,this.displayType=null,this.title=null,this.type="attachments";}clone(){return new o$15({description:this.description,displayType:this.displayType,title:this.title})}};e$25([d$1T({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],i$1U.prototype,"description",void 0),e$25([d$1T({type:["auto","preview","list"],json:{write:!0}})],i$1U.prototype,"displayType",void 0),e$25([d$1T({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],i$1U.prototype,"title",void 0),e$25([d$1T({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],i$1U.prototype,"type",void 0),i$1U=o$15=e$25([i$2z("esri.popup.content.AttachmentsContent")],i$1U);const p$2F=i$1U;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$2E;let c$2u=p$2E=class extends p$2G{constructor(o){super(o),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom";}clone(){return new p$2E({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?l$2w(this.outFields):null})}};e$25([d$1T()],c$2u.prototype,"creator",void 0),e$25([d$1T()],c$2u.prototype,"destroyer",void 0),e$25([d$1T()],c$2u.prototype,"outFields",void 0),e$25([d$1T({type:["custom"],readOnly:!0})],c$2u.prototype,"type",void 0),c$2u=p$2E=e$25([i$2z("esri.popup.content.CustomContent")],c$2u);const i$1T=c$2u;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$12(r,o={}){var l;const a=r instanceof o$1J?r:new o$1J(r,o),t={type:null==(l=null==o?void 0:o.ignoreUnknown)||l?a.apiValues:String,readOnly:null==o?void 0:o.readOnly,json:{type:a.jsonValues,read:(null==o||!o.readOnly)&&{reader:a.read},write:{writer:a.write}}};return void 0!==(null==o?void 0:o.default)&&(t.json.default=o.default),void 0!==(null==o?void 0:o.name)&&(t.json.name=o.name),d$1T(t)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$2s=s$24()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});a$2s.toJSON.bind(a$2s);a$2s.fromJSON.bind(a$2s);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$2d;let l$1Q=n$2d=class extends a$2N{constructor(t){super(t),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null;}clone(){return new n$2d({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(t){return this.dateFormat?L$w(t,{...S$H(this.dateFormat),...this.dateTimeFormatOptions}):m$24(t,u$22(this))}};e$25([r$12(a$2s)],l$1Q.prototype,"dateFormat",void 0),e$25([d$1T({type:Object,json:{read:!1}})],l$1Q.prototype,"dateTimeFormatOptions",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],l$1Q.prototype,"digitSeparator",void 0),e$25([d$1T({type:S$J,json:{write:!0}})],l$1Q.prototype,"places",void 0),l$1Q=n$2d=e$25([i$2z("esri.popup.support.FieldInfoFormat")],l$1Q);const u$1u=l$1Q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$2r;let n$2c=a$2r=class extends a$2N{constructor(t){super(t),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0;}clone(){return new a$2r({fieldName:this.fieldName,format:this.format?l$2w(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};e$25([d$1T({type:String,json:{write:!0}})],n$2c.prototype,"fieldName",void 0),e$25([d$1T({type:u$1u,json:{write:!0}})],n$2c.prototype,"format",void 0),e$25([d$1T({type:Boolean,json:{write:!0,default:!1}})],n$2c.prototype,"isEditable",void 0),e$25([d$1T({type:String,json:{write:!0}})],n$2c.prototype,"label",void 0),e$25([r$12(new o$1J({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],n$2c.prototype,"stringFieldOption",void 0),e$25([d$1T({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],n$2c.prototype,"statisticType",void 0),e$25([d$1T({type:String,json:{write:!0}})],n$2c.prototype,"tooltip",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],n$2c.prototype,"visible",void 0),n$2c=a$2r=e$25([i$2z("esri.popup.FieldInfo")],n$2c);const c$2t=n$2c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$2b;let l$1P=n$2b=class extends p$2G{constructor(e){super(e),this.description=null,this.fieldInfos=null,this.title=null,this.type="fields";}writeFieldInfos(e,o){o.fieldInfos=e&&e.map((e=>e.toJSON()));}clone(){return new n$2b({description:this.description,fieldInfos:Array.isArray(this.fieldInfos)?l$2w(this.fieldInfos):null,title:this.title})}};e$25([d$1T({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],l$1P.prototype,"description",void 0),e$25([d$1T({type:[c$2t]})],l$1P.prototype,"fieldInfos",void 0),e$25([r$1m("fieldInfos")],l$1P.prototype,"writeFieldInfos",null),e$25([d$1T({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],l$1P.prototype,"title",void 0),e$25([d$1T({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],l$1P.prototype,"type",void 0),l$1P=n$2b=e$25([i$2z("esri.popup.content.FieldsContent")],l$1P);const c$2s=l$1P;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$1t=class extends a$2N{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null;}};e$25([d$1T({type:String,json:{write:!0}})],s$1t.prototype,"altText",void 0),e$25([d$1T({type:String,json:{write:!0}})],s$1t.prototype,"caption",void 0),e$25([d$1T({type:String,json:{write:!0}})],s$1t.prototype,"title",void 0),e$25([d$1T({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],s$1t.prototype,"type",void 0),s$1t=e$25([i$2z("esri.popup.content.mixins.MediaInfo")],s$1t);const p$2D=s$1t;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$1c;let p$2C=e$1c=class extends p$3a{constructor(o){super(o),this.tooltip=null,this.value=null;}clone(){return new e$1c({tooltip:this.tooltip,value:this.value})}};e$25([d$1T()],p$2C.prototype,"tooltip",void 0),e$25([d$1T()],p$2C.prototype,"value",void 0),p$2C=e$1c=e$25([i$2z("esri.popup.content.support.ChartMediaInfoValueSeries")],p$2C);const c$2r=p$2C;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$2B;let l$1O=p$2B=class extends a$2N{constructor(o){super(o),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null;}clone(){return new p$2B({fields:l$2w(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};e$25([d$1T({type:[String],json:{write:!0}})],l$1O.prototype,"fields",void 0),e$25([d$1T({type:String,json:{write:!0}})],l$1O.prototype,"normalizeField",void 0),e$25([d$1T({type:[c$2r],json:{read:!1}})],l$1O.prototype,"series",void 0),e$25([d$1T({type:String,json:{write:!0}})],l$1O.prototype,"tooltipField",void 0),l$1O=p$2B=e$25([i$2z("esri.popup.content.support.ChartMediaInfoValue")],l$1O);const n$2a=l$1O;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$2A=class extends p$2D{constructor(r){super(r),this.type=null,this.value=null;}};e$25([d$1T({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],p$2A.prototype,"type",void 0),e$25([d$1T({type:n$2a,json:{write:!0}})],p$2A.prototype,"value",void 0),p$2A=e$25([i$2z("esri.popup.content.mixins.ChartMediaInfo")],p$2A);const a$2q=p$2A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$2q=s$24()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$2p;let p$2z=a$2p=class extends a$2q{constructor(t){super(t),this.type="bar-chart";}clone(){return new a$2p({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e$25([d$1T({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:c$2q.write}})],p$2z.prototype,"type",void 0),p$2z=a$2p=e$25([i$2z("esri.popup.content.BarChartMediaInfo")],p$2z);const i$1S=p$2z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$2o;let p$2y=a$2o=class extends a$2q{constructor(t){super(t),this.type="column-chart";}clone(){return new a$2o({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e$25([d$1T({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:c$2q.write}})],p$2y.prototype,"type",void 0),p$2y=a$2o=e$25([i$2z("esri.popup.content.ColumnChartMediaInfo")],p$2y);const c$2p=p$2y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$1b;let p$2x=e$1b=class extends a$2N{constructor(r){super(r),this.linkURL=null,this.sourceURL=null;}clone(){return new e$1b({linkURL:this.linkURL,sourceURL:this.sourceURL})}};e$25([d$1T({type:String,json:{write:!0}})],p$2x.prototype,"linkURL",void 0),e$25([d$1T({type:String,json:{write:!0}})],p$2x.prototype,"sourceURL",void 0),p$2x=e$1b=e$25([i$2z("esri.popup.content.support.ImageMediaInfoValue")],p$2x);const c$2o=p$2x;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$2n;let i$1R=a$2n=class extends p$2D{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null;}clone(){return new a$2n({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};e$25([d$1T({type:Number,json:{write:!0}})],i$1R.prototype,"refreshInterval",void 0),e$25([d$1T({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],i$1R.prototype,"type",void 0),e$25([d$1T({type:c$2o,json:{write:!0}})],i$1R.prototype,"value",void 0),i$1R=a$2n=e$25([i$2z("esri.popup.content.ImageMediaInfo")],i$1R);const p$2w=i$1R;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1Q;let a$2m=i$1Q=class extends a$2q{constructor(t){super(t),this.type="line-chart";}clone(){return new i$1Q({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e$25([d$1T({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:c$2q.write}})],a$2m.prototype,"type",void 0),a$2m=i$1Q=e$25([i$2z("esri.popup.content.LineChartMediaInfo")],a$2m);const p$2v=a$2m;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$2u;let i$1P=p$2u=class extends a$2q{constructor(t){super(t),this.type="pie-chart";}clone(){return new p$2u({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e$25([d$1T({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:c$2q.write}})],i$1P.prototype,"type",void 0),i$1P=p$2u=e$25([i$2z("esri.popup.content.PieChartMediaInfo")],i$1P);const a$2l=i$1P;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$1F={base:p$2D,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":i$1S,"column-chart":c$2p,"line-chart":p$2v,"pie-chart":a$2l,image:p$2w}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$1N;let I$p=l$1N=class extends p$2G{constructor(o){super(o),this.activeMediaInfoIndex=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media";}readMediaInfos(o){return o&&o.map((o=>"image"===o.type?p$2w.fromJSON(o):"barchart"===o.type?i$1S.fromJSON(o):"columnchart"===o.type?c$2p.fromJSON(o):"linechart"===o.type?p$2v.fromJSON(o):"piechart"===o.type?a$2l.fromJSON(o):void 0)).filter(Boolean)}writeMediaInfos(o,e){e.mediaInfos=o&&o.map((o=>o.toJSON()));}clone(){return new l$1N({activeMediaInfoIndex:this.activeMediaInfoIndex,description:this.description,mediaInfos:this.mediaInfos?l$2w(this.mediaInfos):null,title:this.title})}};e$25([d$1T()],I$p.prototype,"activeMediaInfoIndex",void 0),e$25([d$1T({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],I$p.prototype,"description",void 0),e$25([d$1T({types:[m$1F]})],I$p.prototype,"mediaInfos",void 0),e$25([o$1v("mediaInfos")],I$p.prototype,"readMediaInfos",null),e$25([r$1m("mediaInfos")],I$p.prototype,"writeMediaInfos",null),e$25([d$1T({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],I$p.prototype,"title",void 0),e$25([d$1T({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],I$p.prototype,"type",void 0),I$p=l$1N=e$25([i$2z("esri.popup.content.MediaContent")],I$p);const u$1t=I$p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$1s;let p$2t=s$1s=class extends p$2G{constructor(t){super(t),this.text=null,this.type="text";}clone(){return new s$1s({text:this.text})}};e$25([d$1T({type:String,json:{write:!0}})],p$2t.prototype,"text",void 0),e$25([d$1T({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],p$2t.prototype,"type",void 0),p$2t=s$1s=e$25([i$2z("esri.popup.content.TextContent")],p$2t);const c$2n=p$2t;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$11={base:null,key:"type",typeMap:{attachment:p$2F,media:u$1t,text:c$2n,field:c$2s}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$1r;let p$2s=s$1r=class extends a$2N{constructor(r){super(r),this.name=null,this.title=null,this.expression=null,this.returnType=null;}clone(){return new s$1r({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};e$25([d$1T({type:String,json:{write:!0}})],p$2s.prototype,"name",void 0),e$25([d$1T({type:String,json:{write:!0}})],p$2s.prototype,"title",void 0),e$25([d$1T({type:String,json:{write:!0}})],p$2s.prototype,"expression",void 0),e$25([d$1T({type:["string","number"],json:{write:!0}})],p$2s.prototype,"returnType",void 0),p$2s=s$1r=e$25([i$2z("esri.popup.ExpressionInfo")],p$2s);const i$1O=p$2s;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$1a;let p$2r=e$1a=class extends a$2N{constructor(o){super(o),this.returnTopmostRaster=null,this.showNoDataRecords=null;}clone(){return new e$1a({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};e$25([d$1T({type:Boolean,json:{write:!0}})],p$2r.prototype,"returnTopmostRaster",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],p$2r.prototype,"showNoDataRecords",void 0),p$2r=e$1a=e$25([i$2z("esri.popup.LayerOptions")],p$2r);const a$2k=p$2r;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$1a;let p$2q=t$1a=class extends a$2N{constructor(r){super(r),this.field=null,this.order=null;}clone(){return new t$1a({field:this.field,order:this.order})}};e$25([d$1T({type:String,json:{write:!0}})],p$2q.prototype,"field",void 0),e$25([d$1T({type:["asc","desc"],json:{write:!0}})],p$2q.prototype,"order",void 0),p$2q=t$1a=e$25([i$2z("esri.popup.support.RelatedRecordsInfoFieldOrder")],p$2q);const c$2m=p$2q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$1m;let c$2l=d$1m=class extends a$2N{constructor(o){super(o),this.showRelatedRecords=null,this.orderByFields=null;}clone(){return new d$1m({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?l$2w(this.orderByFields):null})}};e$25([d$1T({type:Boolean,json:{write:!0}})],c$2l.prototype,"showRelatedRecords",void 0),e$25([d$1T({type:[c$2m],json:{write:!0}})],c$2l.prototype,"orderByFields",void 0),c$2l=d$1m=e$25([i$2z("esri.popup.RelatedRecordsInfo")],c$2l);const l$1M=c$2l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$19=0;const r$10=r=>{let o=class extends r{constructor(...e){super(...e),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+t$19++});}};return o=e$25([i$2z("esri.core.Identifiable")],o),o};let o$14=class extends(r$10(class{})){};o$14=e$25([i$2z("esri.core.Identifiable")],o$14);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var r$$;let p$2p=r$$=class extends(r$10(p$3a)){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0;}clone(){return new r$$({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};e$25([d$1T()],p$2p.prototype,"active",void 0),e$25([d$1T()],p$2p.prototype,"className",void 0),e$25([d$1T()],p$2p.prototype,"disabled",void 0),e$25([d$1T()],p$2p.prototype,"id",void 0),e$25([d$1T()],p$2p.prototype,"indicator",void 0),e$25([d$1T()],p$2p.prototype,"title",void 0),e$25([d$1T()],p$2p.prototype,"type",void 0),e$25([d$1T()],p$2p.prototype,"visible",void 0),p$2p=r$$=e$25([i$2z("esri.support.actions.ActionBase")],p$2p);const c$2k=p$2p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var r$_;let e$19=r$_=class extends c$2k{constructor(s){super(s),this.image=null,this.type="button";}clone(){return new r$_({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};e$25([d$1T()],e$19.prototype,"image",void 0),e$19=r$_=e$25([i$2z("esri.support.Action.ActionButton")],e$19);const a$2j=e$19;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var o$13;let r$Z=o$13=class extends c$2k{constructor(s){super(s),this.image=null,this.type="toggle",this.value=!1;}clone(){return new o$13({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};e$25([d$1T()],r$Z.prototype,"image",void 0),e$25([d$1T()],r$Z.prototype,"value",void 0),r$Z=o$13=e$25([i$2z("esri.support.Action.ActionToggle")],r$Z);const a$2i=r$Z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var O$h;const S$v=S$I.ofType({key:"type",defaultKeyValue:"button",base:c$2k,typeMap:{button:a$2j,toggle:a$2i}}),T$h={base:p$2G,key:"type",typeMap:{media:u$1t,custom:i$1T,text:c$2n,attachments:p$2F,fields:c$2s}},b$N="esri.PopupTemplate",R$j=s$2n.getLogger(b$N),L$m=["attachments","fields","media","text"];let J$6=O$h=class extends a$2N{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null;}castContent(t){return Array.isArray(t)?t.map((t=>N$t(T$h,t))):"string"==typeof t||"function"==typeof t||t instanceof HTMLElement||O$t(t)?t:(R$j.error("content error","unsupported content value",{value:t}),null)}readContent(t,e){const{popupElements:o}=e;return Array.isArray(o)&&o.length>0?this._readPopupInfoElements(e):this._readPopupInfo(e)}writeContent(t,e,o,s){"string"!=typeof t?Array.isArray(t)&&(e.popupElements=t.filter((t=>-1!==L$m.indexOf(t.type))).map((t=>t&&t.toJSON(s))),e.popupElements.forEach((t=>{"attachments"===t.type?this._writeAttachmentContent(e):"media"===t.type?this._writeMediaContent(t,e):"text"===t.type&&this._writeTextContent(t,e);}))):e.description=t;}writeFieldInfos(t,e,o,s){const{content:i}=this,r=Array.isArray(i)?i:null;if(t){const o=r?r.filter((t=>"fields"===t.type)):[],i=o.length&&o.every((t=>{var e;return null==(e=t.fieldInfos)?void 0:e.length}));e.fieldInfos=t.filter(Boolean).map((t=>{const e=t.toJSON(s);return i&&(e.visible=!1),e}));}if(r)for(const n of r)"fields"===n.type&&this._writeFieldsContent(n,e);}writeLayerOptions(t,e,o,s){e[o]=!t||null===t.showNoDataRecords&&null===t.returnTopmostRaster?null:t.toJSON(s);}writeTitle(t,e){e.title=t||"";}clone(){const{actions:t}=this,e=t?l$2w(t.toArray()):[];return new O$h({actions:e,content:Array.isArray(this.content)?l$2w(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?l$2w(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?l$2w(this.fieldInfos):null,layerOptions:this.layerOptions?l$2w(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?l$2w(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?l$2w(this.relatedRecordsInfo):null})}async collectRequiredFields(t,e){await this._collectExpressionInfoFields(t,e,this.expressionInfos),g$R(t,e,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)]);}async getRequiredFields(t){const e=new Set;return await this.collectRequiredFields(e,t),[...e].sort()}_writeFieldsContent(t,e){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const o=l$2w(t.fieldInfos);Array.isArray(e.fieldInfos)?o.forEach((t=>{const o=e.fieldInfos.find((e=>e.fieldName.toLowerCase()===t.fieldName.toLowerCase()));o?o.visible=!0:e.fieldInfos.push(t);})):e.fieldInfos=o;}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0);}_writeTextContent(t,e){!e.description&&t.text&&(e.description=t.text);}_writeMediaContent(t,e){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const o=l$2w(t.mediaInfos);Array.isArray(e.mediaInfos)?e.mediaInfos=[...e.mediaInfos,...o]:e.mediaInfos=o;}_readPopupInfoElements({description:t,mediaInfos:e,popupElements:o}){const s={description:!1,mediaInfos:!1};return o.map((o=>"media"===o.type?(o.mediaInfos||!e||s.mediaInfos||(o.mediaInfos=e,s.mediaInfos=!0),u$1t.fromJSON(o)):"text"===o.type?(o.text||!t||s.description||(o.text=t,s.description=!0),c$2n.fromJSON(o)):"attachments"===o.type?p$2F.fromJSON(o):"fields"===o.type?c$2s.fromJSON(o):void 0)).filter(Boolean)}_readPopupInfo({description:t,mediaInfos:e,showAttachments:o}){const s=[];return t?s.push(new c$2n({text:t})):s.push(new c$2s),Array.isArray(e)&&e.length&&s.push(u$1t.fromJSON({mediaInfos:e})),o&&s.push(p$2F.fromJSON({displayType:"auto"})),s.length?s:t}_getContentElementFields(t){if(!t||"attachments"===t.type)return [];if("custom"===t.type)return t.outFields||[];if("fields"===t.type)return this._getFieldInfoFields(t.fieldInfos||this.fieldInfos);if("media"===t.type){return (t.mediaInfos||[]).reduce(((t,e)=>[...t,...this._getMediaInfoFields(e)]),[])}return "text"===t.type?this._extractFieldNames(t.text):void 0}_getMediaInfoFields(t){const{caption:e,title:o,value:s}=t,i=s||{},{fields:r=[],normalizeField:n,tooltipField:p,sourceURL:l,linkURL:a}=i,d=[...this._extractFieldNames(o),...this._extractFieldNames(e),...this._extractFieldNames(l),...this._extractFieldNames(a),...r];return n&&d.push(n),p&&d.push(p),d}_getContentFields(t){return "string"==typeof t?this._extractFieldNames(t):Array.isArray(t)?t.reduce(((t,e)=>[...t,...this._getContentElementFields(e)]),[]):[]}async _collectExpressionInfoFields(t,e,o){o&&await Promise.all(o.map((o=>b$O(t,e,o.expression))));}_getFieldInfoFields(t){return t?t.filter((t=>void 0===t.visible||!!t.visible)).map((t=>t.fieldName)).filter((t=>-1===t.indexOf("relationships/")&&-1===t.indexOf("expression/"))):[]}_getActionsFields(t){return t?t.toArray().reduce(((t,e)=>[...t,...this._getActionFields(e)]),[]):[]}_getActionFields(t){const{className:e,title:o,type:s}=t,i="button"===s||"toggle"===s?t.image:"";return [...this._extractFieldNames(o),...this._extractFieldNames(e),...this._extractFieldNames(i)]}_getTitleFields(t){return "string"==typeof t?this._extractFieldNames(t):[]}_extractFieldNames(t){if(!t||"string"!=typeof t)return [];const e=/{[^}]*}/g,o=t.match(e);if(!o)return [];const s=/\{(\w+):.+\}/,i=o.filter((t=>!(0===t.indexOf("{relationships/")||0===t.indexOf("{expression/")))).map((t=>t.replace(s,"{$1}")));return i?i.map((t=>t.slice(1,-1))):[]}};e$25([d$1T({type:S$v})],J$6.prototype,"actions",void 0),e$25([d$1T()],J$6.prototype,"content",void 0),e$25([c$35("content")],J$6.prototype,"castContent",null),e$25([o$1v("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],J$6.prototype,"readContent",null),e$25([r$1m("content",{popupElements:{type:S$I.ofType(r$11)},showAttachments:{type:Boolean},mediaInfos:{type:S$I.ofType(m$1F)},description:{type:String}})],J$6.prototype,"writeContent",null),e$25([d$1T({type:[i$1O],json:{write:!0}})],J$6.prototype,"expressionInfos",void 0),e$25([d$1T({type:[c$2t]})],J$6.prototype,"fieldInfos",void 0),e$25([r$1m("fieldInfos")],J$6.prototype,"writeFieldInfos",null),e$25([d$1T({type:a$2k})],J$6.prototype,"layerOptions",void 0),e$25([r$1m("layerOptions")],J$6.prototype,"writeLayerOptions",null),e$25([d$1T({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],J$6.prototype,"lastEditInfoEnabled",void 0),e$25([d$1T()],J$6.prototype,"outFields",void 0),e$25([d$1T()],J$6.prototype,"overwriteActions",void 0),e$25([d$1T()],J$6.prototype,"returnGeometry",void 0),e$25([d$1T({json:{type:String}})],J$6.prototype,"title",void 0),e$25([r$1m("title")],J$6.prototype,"writeTitle",null),e$25([d$1T({type:l$1M,json:{write:!0}})],J$6.prototype,"relatedRecordsInfo",void 0),J$6=O$h=e$25([i$2z(b$N)],J$6);const M$o=J$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$18={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function r$Y(r){return e$18[r]||e$18[r.toLowerCase()]}function l$1L(r){var l;return null!=(l=e$18[r])?l:e$18[r.toLowerCase()]}function a$2h(e){return [...l$1L(e)]}function n$29(e,r,l){l<0&&++l,l>1&&--l;const a=6*l;return a<1?e+(r-e)*a:2*l<1?r:3*l<2?e+(r-e)*(2/3-l)*6:e}function o$12(e,r,l,a=1){const o=(e%360+360)%360/360,i=l<=.5?l*(r+1):l+r-l*r,t=2*l-i;return [Math.round(255*n$29(t,i,o+1/3)),Math.round(255*n$29(t,i,o)),Math.round(255*n$29(t,i,o-1/3)),a]}function i$1N(e){const r=e.length>5,l=r?8:4,a=(1<<l)-1,n=r?1:17,o=r?9===e.length:5===e.length;let i=Number("0x"+e.substr(1));if(isNaN(i))return null;const t=[0,0,0,1];let u;return o&&(u=i&a,i>>=l,t[3]=n*u/255),u=i&a,i>>=l,t[2]=n*u,u=i&a,i>>=l,t[1]=n*u,u=i&a,i>>=l,t[0]=n*u,t}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function a$2g(t){return e$1u(s$2a(t),0,255)}function o$11(t,r,s){return t=Number(t),isNaN(t)?s:t<r?r:t>s?s:t}class h$18{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t);}static blendColors(t,r,s,i=new h$18){return i.r=Math.round(t.r+(r.r-t.r)*s),i.g=Math.round(t.g+(r.g-t.g)*s),i.b=Math.round(t.b+(r.b-t.b)*s),i.a=t.a+(r.a-t.a)*s,i._sanitize()}static fromRgb(r,s){const i=r.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(i){const r=i[2].split(/\s*,\s*/),e=i[1];if("rgb"===e&&3===r.length||"rgba"===e&&4===r.length){const t=r[0];if("%"===t.charAt(t.length-1)){const t=r.map((t=>2.56*parseFloat(t)));return 4===r.length&&(t[3]=parseFloat(r[3])),h$18.fromArray(t,s)}return h$18.fromArray(r.map((t=>parseFloat(t))),s)}if("hsl"===e&&3===r.length||"hsla"===e&&4===r.length)return h$18.fromArray(o$12(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100,parseFloat(r[3])),s)}return null}static fromHex(t,r=new h$18){if(4!==t.length&&7!==t.length||"#"!==t[0])return null;const s=4===t.length?4:8,i=(1<<s)-1;let e=Number("0x"+t.substr(1));return isNaN(e)?null:(["b","g","r"].forEach((t=>{const n=e&i;e>>=s,r[t]=4===s?17*n:n;})),r.a=1,r)}static fromArray(t,r=new h$18){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,i){const e=r$Y(t)?l$1L(t):null;return e&&h$18.fromArray(e,i)||h$18.fromRgb(t,i)||h$18.fromHex(t,i)}static fromJSON(t){return t&&new h$18([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return r$1K(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return r$1K(t)?[t.r/255,t.g/255,t.b/255,null!=t.a?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){if("string"==typeof t)h$18.fromString(t,this);else if(Array.isArray(t))h$18.fromArray(t,this);else {var r,s,i,e;this._set(null!=(r=t.r)?r:0,null!=(s=t.g)?s:0,null!=(i=t.b)?i:0,null!=(e=t.a)?e:1),t instanceof h$18||this._sanitize();}return this}toRgb(){return [this.r,this.g,this.b]}toRgba(){return [this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),r=this.g.toString(16),s=this.b.toString(16);return `#${t.length<2?"0"+t:t}${r.length<2?"0"+r:r}${s.length<2?"0"+s:s}`}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=0){const r=a$2g(this.r),s=a$2g(this.g),i=a$2g(this.b);return 0===t||1!==this.a?[r,s,i,a$2g(255*this.a)]:[r,s,i]}clone(){return new h$18(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}_sanitize(){return this.r=Math.round(o$11(this.r,0,255)),this.g=Math.round(o$11(this.g,0,255)),this.b=Math.round(o$11(this.b,0,255)),this.a=o$11(this.a,0,1),this}_set(t,r,s,i){this.r=t,this.g=r,this.b=s,this.a=i;}}h$18.prototype.declaredClass="esri.Color";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$2o=new o$1J({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let c$2j=0,m$1E=class extends a$2N{constructor(r){super(r),this.id="sym"+c$2j++,this.type=null;}set color(r){this._set("color",r);}readColor(r){return r&&null!=r[0]?[r[0],r[1],r[2],r[3]/255]:r}async collectRequiredFields(r,o){}hash(){return JSON.stringify(this.toJSON())}clone(){}};e$25([d$1T({type:p$2o.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:p$2o.write}}})],m$1E.prototype,"type",void 0),e$25([d$1T({type:h$18,value:new h$18([0,0,0,1]),json:{write:{allowNull:!0}}})],m$1E.prototype,"color",null),e$25([o$1v("color")],m$1E.prototype,"readColor",null),m$1E=e$25([i$2z("esri.symbols.Symbol")],m$1E);const a$2f=m$1E;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$1D;let l$1K=m$1D=class extends a$2f{constructor(r){super(r),this.data=null,this.type="cim";}readData(r,o){return o}writeData(r,o){if(r)for(const t in r)o[t]=r[t];}async collectRequiredFields(r,o){if("CIMSymbolReference"===this.data.type){const t=this.data.primitiveOverrides;if(t){const e=t.map((t=>{const e=t.valueExpressionInfo;return b$O(r,o,e.expression)}));await Promise.all(e);}}}clone(){return new m$1D({data:l$2w(this.data)})}hash(){return c$3m(JSON.stringify(this.data)).toString()}};e$25([d$1T({json:{write:!1}})],l$1K.prototype,"color",void 0),e$25([d$1T({json:{write:!0}})],l$1K.prototype,"data",void 0),e$25([o$1v("data",["symbol"])],l$1K.prototype,"readData",null),e$25([r$1m("data",{})],l$1K.prototype,"writeData",null),e$25([r$12({CIMSymbolReference:"cim"},{readOnly:!0})],l$1K.prototype,"type",void 0),l$1K=m$1D=e$25([i$2z("esri.symbols.CIMSymbol")],l$1K);const d$1l=l$1K;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$2n=class extends a$2N{constructor(e){super(e),this.enabled=!0,this.type=null;}writeEnabled(e,r,o){e||(r[o]=e);}};e$25([d$1T({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],p$2n.prototype,"enabled",void 0),e$25([r$1m("enabled")],p$2n.prototype,"writeEnabled",null),e$25([d$1T({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],p$2n.prototype,"type",void 0),p$2n=e$25([i$2z("esri.symbols.Symbol3DLayer")],p$2n);const a$2e=p$2n;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$28=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,t$18="screenUtils.toPt: input not recognized!",r$X=96;function u$1s(n){return n?n/72*r$X:0}function e$17(n){return n?72*n/r$X:0}function o$10(r){if("string"==typeof r){const u=r.match(n$28);if(u){const n=Number(u[1]),t=u[3]&&u[3].toLowerCase(),o="-"===r.charAt(0),c="px"===t?e$17(n):n;return o?-c:c}return console.warn(t$18),null}return r}function c$2i(n=0,t=0){return {x:n,y:t}}function i$1M(n=0,t=0){return [n,t]}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$27(n){const r=s$2a(100*(1-n));return Math.max(0,Math.min(r,100))}function r$W(t){const n=1-t/100;return Math.max(0,Math.min(n,1))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function s$1q(o,t){const n=null!=t.transparency?r$W(t.transparency):1,s=t.color;return s&&Array.isArray(s)?new h$18([s[0]||0,s[1]||0,s[2]||0,n]):null}function c$2h(r,o){o.color=r.toJSON().slice(0,3);const t=n$27(r.a);0!==t&&(o.transparency=t);}const p$2m={type:h$18,json:{type:[S$J],default:null,read:{source:["color","transparency"],reader:s$1q},write:{target:{color:{type:[S$J]},transparency:{type:S$J}},writer:c$2h}}},a$2d={type:Number,cast:o$10,json:{write:!0}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$1J=class extends a$2N{constructor(o){super(o),this.color=new h$18([0,0,0,1]),this.extensionLength=0,this.size=e$17(1);}clone(){}cloneProperties(){return {color:l$2w(this.color),size:this.size,extensionLength:this.extensionLength}}};e$25([d$1T({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],l$1J.prototype,"type",void 0),e$25([d$1T(p$2m)],l$1J.prototype,"color",void 0),e$25([d$1T({...a$2d,json:{write:{overridePolicy:o=>({enabled:!!o})}}})],l$1J.prototype,"extensionLength",void 0),e$25([d$1T(a$2d)],l$1J.prototype,"size",void 0),l$1J=e$25([i$2z("esri.symbols.edges.Edges3D")],l$1J);const m$1C=l$1J;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$17;let c$2g=t$17=class extends m$1C{constructor(r){super(r),this.type="sketch";}clone(){return new t$17(this.cloneProperties())}};e$25([r$12({sketch:"sketch"},{readOnly:!0})],c$2g.prototype,"type",void 0),c$2g=t$17=e$25([i$2z("esri.symbols.edges.SketchEdges3D")],c$2g);const p$2l=c$2g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$16;let p$2k=t$16=class extends m$1C{constructor(o){super(o),this.type="solid";}clone(){return new t$16(this.cloneProperties())}};e$25([r$12({solid:"solid"},{readOnly:!0})],p$2k.prototype,"type",void 0),p$2k=t$16=e$25([i$2z("esri.symbols.support.SolidEdges3D")],p$2k);const c$2f=p$2k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$15={types:{key:"type",base:m$1C,typeMap:{solid:c$2f,sketch:p$2l}},json:{write:!0}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$2j;let l$1I=p$2j=class extends a$2N{constructor(o){super(o),this.color=null;}clone(){const o={color:r$1K(this.color)?this.color.clone():null};return new p$2j(o)}};e$25([d$1T(p$2m)],l$1I.prototype,"color",void 0),l$1I=p$2j=e$25([i$2z("esri.symbols.support.Symbol3DMaterial")],l$1I);const a$2c=l$1I;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$1H;let c$2e=l$1H=class extends a$2e{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null;}clone(){return new l$1H({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:r$1K(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};e$25([r$12({Extrude:"extrude"},{readOnly:!0})],c$2e.prototype,"type",void 0),e$25([d$1T({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],c$2e.prototype,"size",void 0),e$25([d$1T({type:a$2c,json:{write:!0}})],c$2e.prototype,"material",void 0),e$25([d$1T({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],c$2e.prototype,"castShadows",void 0),e$25([d$1T(t$15)],c$2e.prototype,"edges",void 0),c$2e=l$1H=e$25([i$2z("esri.symbols.ExtrudeSymbol3DLayer")],c$2e);const m$1B=c$2e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$1L=class extends a$2f{constructor(r){super(r),this.type="simple-line",this.width=.75;}hash(){return `${this.type}.${this.width}`}};e$25([r$12({esriSLS:"simple-line"},{readOnly:!0})],i$1L.prototype,"type",void 0),e$25([d$1T({type:Number,cast:o$10,json:{write:!0}})],i$1L.prototype,"width",void 0),i$1L=e$25([i$2z("esri.symbols.LineSymbol")],i$1L);const c$2d=i$1L;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$2b;let n$26=a$2b=class extends a$2N{constructor(r){super(r),this.placement="begin-end",this.type="line-marker",this.style="arrow";}writeStyle(r,o,e,t){"web-map"===(null==t?void 0:t.origin)?o[e]="arrow":o[e]=r;}set color(r){this._set("color",r);}readColor(r){return r&&null!=r[0]?[r[0],r[1],r[2],r[3]/255]:r}writeColor(r,o,e,t){"web-map"===(null==t?void 0:t.origin)||(o[e]=r);}clone(){return new a$2b({color:l$2w(this.color),placement:this.placement,style:this.style})}hash(){var r;return `${this.placement}.${null==(r=this.color)?void 0:r.hash()}.${this.style}`}};e$25([d$1T({type:["begin","end","begin-end"],json:{write:!0}})],n$26.prototype,"placement",void 0),e$25([r$12({"line-marker":"line-marker"},{readOnly:!0}),d$1T({json:{origins:{"web-map":{write:!1}}}})],n$26.prototype,"type",void 0),e$25([d$1T({type:["arrow","circle","square","diamond","cross","x"]})],n$26.prototype,"style",void 0),e$25([r$1m("style")],n$26.prototype,"writeStyle",null),e$25([d$1T({type:h$18,value:null,json:{write:{allowNull:!0}}})],n$26.prototype,"color",null),e$25([o$1v("color")],n$26.prototype,"readColor",null),e$25([r$1m("color")],n$26.prototype,"writeColor",null),n$26=a$2b=e$25([i$2z("esri.symbols.LineSymbolMarker")],n$26);const m$1A=n$26;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$2i;const h$17=new o$1J({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let d$1k=p$2i=class extends c$2d{constructor(...r){super(...r),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2;}normalizeCtorArgs(r,o,e,s,i,l){if(r&&"string"!=typeof r)return r;const n={};return null!=r&&(n.style=r),null!=o&&(n.color=o),null!=e&&(n.width=o$10(e)),null!=s&&(n.cap=s),null!=i&&(n.join=i),null!=l&&(n.miterLimit=o$10(l)),n}clone(){var r;return new p$2i({color:l$2w(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:null==(r=this.marker)?void 0:r.clone()})}hash(){var r,o;return `${super.hash()}.${null==(r=this.color)?void 0:r.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${null==(o=this.marker)?void 0:o.hash()}`}};e$25([r$12({esriSLS:"simple-line"},{readOnly:!0})],d$1k.prototype,"type",void 0),e$25([d$1T({type:h$17.apiValues,json:{read:h$17.read,write:h$17.write}})],d$1k.prototype,"style",void 0),e$25([d$1T({type:["butt","round","square"],json:{write:{overridePolicy:(r,o,e)=>({enabled:"round"!==r&&(null==e||null==e.origin)})}}})],d$1k.prototype,"cap",void 0),e$25([d$1T({type:["miter","round","bevel"],json:{write:{overridePolicy:(r,o,e)=>({enabled:"round"!==r&&(null==e||null==e.origin)})}}})],d$1k.prototype,"join",void 0),e$25([d$1T({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":m$1A}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],d$1k.prototype,"marker",void 0),e$25([d$1T({type:Number,json:{read:!1,write:!1}})],d$1k.prototype,"miterLimit",void 0),d$1k=p$2i=e$25([i$2z("esri.symbols.SimpleLineSymbol")],d$1k);const m$1z=d$1k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$1G=class extends a$2f{constructor(e){super(e),this.outline=null,this.type=null;}hash(){return `${this.type}.${this.outline&&this.outline.hash()}`}};e$25([d$1T({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":m$1z}},json:{default:null,write:!0}})],l$1G.prototype,"outline",void 0),e$25([d$1T({type:["simple-fill","picture-fill"],readOnly:!0})],l$1G.prototype,"type",void 0),l$1G=e$25([i$2z("esri.symbols.FillSymbol")],l$1G);const p$2h=l$1G;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$14=class extends a$2N{constructor(r){super(r);}clone(){}};e$25([d$1T({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],t$14.prototype,"type",void 0),t$14=e$25([i$2z("esri.symbols.patterns.LinePattern3D")],t$14);const p$2g=t$14;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$$=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$2f;const h$16=s$24()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let c$2c=p$2f=class extends p$2g{constructor(o){super(o),this.type="style",this.style="solid";}clone(){const o={style:this.style};return new p$2f(o)}};e$25([d$1T({type:["style"]})],c$2c.prototype,"type",void 0),e$25([r$12(h$16),d$1T({type:o$$})],c$2c.prototype,"style",void 0),c$2c=p$2f=e$25([i$2z("esri.symbols.patterns.LineStylePattern3D")],c$2c);const l$1F=c$2c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$13=class extends a$2N{constructor(r){super(r);}clone(){}};e$25([d$1T({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],t$13.prototype,"type",void 0),t$13=e$25([i$2z("esri.symbols.patterns.Pattern3D")],t$13);const p$2e=t$13;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$2a=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$2d;let c$2b=p$2d=class extends p$2e{constructor(s){super(s),this.type="style",this.style="solid";}clone(){const s={style:this.style};return new p$2d(s)}};e$25([d$1T({type:["style"]})],c$2b.prototype,"type",void 0),e$25([d$1T({type:a$2a,json:{read:!0,write:!0}})],c$2b.prototype,"style",void 0),c$2b=p$2d=e$25([i$2z("esri.symbols.patterns.StylePattern3D")],c$2b);const a$29=c$2b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$1p={types:{key:"type",base:p$2e,typeMap:{style:a$29}},json:{write:!0}},o$_={types:{key:"type",base:p$2g,typeMap:{style:l$1F}},json:{write:!0}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$Z=new h$18("white");new h$18("black");const e$16=new h$18([255,255,255,0]);function t$12(n){return 0===n.r&&0===n.g&&0===n.b}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$2a;let l$1E=c$2a=class extends l$1I{constructor(o){super(o),this.colorMixMode=null;}clone(){const o={color:r$1K(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new c$2a(o)}};e$25([r$12({multiply:"multiply",replace:"replace",tint:"tint"})],l$1E.prototype,"colorMixMode",void 0),l$1E=c$2a=e$25([i$2z("esri.symbols.support.Symbol3DFillMaterial")],l$1E);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$1K(n){return n}function a$28(n=H$9){return i$1K([n[0],n[1],n[2],n[3],n[4],n[5]])}function u$1r(n,t,r,i,u,e,m=a$28()){return m[0]=n,m[1]=t,m[2]=r,m[3]=i,m[4]=u,m[5]=e,m}function f$14(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.min(n[2],t[2]),n[3]=Math.max(n[3],t[3]),n[4]=Math.max(n[4],t[4]),n[5]=Math.max(n[5],t[5]);}function h$15(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.min(n[2],t[2]),n[3]=Math.max(n[3],t[0]),n[4]=Math.max(n[4],t[1]),n[5]=Math.max(n[5],t[2]);}function I$o(n){return n[0]>=n[3]?0:n[3]-n[0]}function y$15(n){return n[1]>=n[4]?0:n[4]-n[1]}function N$g(n){return n[2]>=n[5]?0:n[5]-n[2]}function F$g(n,t=[0,0,0]){return t[0]=I$o(n),t[1]=y$15(n),t[2]=N$g(n),t}function q$e(n,t,r=n){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==n&&(r[3]=n[3],r[4]=n[4],r[5]=n[5]),r}function w$C(n,t,r=n){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==n&&(r[0]=n[0],r[1]=n[1],r[2]=n[2]),n}function A$f(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function B$b(n){return n?A$f(n,D$h):a$28(D$h)}function O$g(n,t){return n[0]=t[0],n[1]=t[1],n[2]=Number.NEGATIVE_INFINITY,n[3]=t[2],n[4]=t[3],n[5]=Number.POSITIVE_INFINITY,n}function P$i(n){return 6===n.length}function k$m(t,r,i){if(t$1T(t)||t$1T(r))return t===r;if(!P$i(t)||!P$i(r))return !1;if(i){for(let n=0;n<t.length;n++)if(!i(t[n],r[n]))return !1}else for(let n=0;n<t.length;n++)if(t[n]!==r[n])return !1;return !0}const D$h=i$1K([1/0,1/0,1/0,-1/0,-1/0,-1/0]),H$9=i$1K([0,0,0,0,0,0]);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$11(r,{isPrimitive:t,width:n,depth:o,height:s}){const c=t?10:1;if(null==n&&null==s&&null==o)return [c*r[0],c*r[1],c*r[2]];const u=r$1j(n,o,s);let i;for(let e=0;e<3;e++){const t=u[e];if(null!=t){i=t/r[e];break}}for(let e=0;e<3;e++)null==u[e]&&(u[e]=r[e]*i);return u}const n$25=u$1r(-.5,-.5,-.5,.5,.5,.5),o$Y=u$1r(-.5,-.5,0,.5,.5,1),s$1o=u$1r(-.5,-.5,0,.5,.5,.5);function c$29(e){switch(e){case"sphere":case"cube":case"diamond":return n$25;case"cylinder":case"cone":case"inverted-cone":return o$Y;case"tetrahedron":return s$1o;default:return}}const u$1q=["butt","square","round"],i$1J=[...u$1q,"none"],a$27=["miter","bevel","round"];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$1y;let u$1p=m$1y=class extends a$2N{constructor(t){super(t),this.color=new h$18([0,0,0,1]),this.size=e$17(1),this.pattern=null,this.patternCap="butt";}clone(){const t={color:r$1K(this.color)?this.color.clone():null,size:this.size,pattern:r$1K(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new m$1y(t)}};e$25([d$1T(p$2m)],u$1p.prototype,"color",void 0),e$25([d$1T(a$2d)],u$1p.prototype,"size",void 0),e$25([d$1T(o$_)],u$1p.prototype,"pattern",void 0),e$25([d$1T({type:u$1q,json:{default:"butt",write:{overridePolicy(){return {enabled:r$1K(this.pattern)}}}}})],u$1p.prototype,"patternCap",void 0),u$1p=m$1y=e$25([i$2z("esri.symbols.support.Symbol3DOutline")],u$1p);const j$x=u$1p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$1j;let h$14=d$1j=class extends a$2e{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null;}clone(){const t={edges:r$1K(this.edges)?this.edges.clone():null,enabled:this.enabled,material:r$1K(this.material)?this.material.clone():null,pattern:r$1K(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:r$1K(this.outline)?this.outline.clone():null};return new d$1j(t)}static fromSimpleFillSymbol(t){var o,e,l,r,s,i;const p=t.outline&&t.outline.style&&"inside-frame"!==t.outline.style&&"solid"!==t.outline.style?new l$1F({style:t.outline.style}):null,y={size:null!=(o=null==(e=t.outline)?void 0:e.width)?o:0,color:(null!=(l=null==(r=t.outline)?void 0:r.color)?l:o$Z).clone(),pattern:p};return p&&null!=(s=t.outline)&&s.cap&&(y.patternCap=t.outline.cap),new d$1j({material:new l$1E({color:(null!=(i=t.color)?i:e$16).clone()}),pattern:t.style&&"solid"!==t.style?new a$29({style:t.style}):null,outline:y})}};e$25([r$12({Fill:"fill"},{readOnly:!0})],h$14.prototype,"type",void 0),e$25([d$1T({type:l$1E,json:{write:!0}})],h$14.prototype,"material",void 0),e$25([d$1T(s$1p)],h$14.prototype,"pattern",void 0),e$25([d$1T({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],h$14.prototype,"castShadows",void 0),e$25([d$1T({type:j$x,json:{write:!0}})],h$14.prototype,"outline",void 0),e$25([d$1T(t$15)],h$14.prototype,"edges",void 0),h$14=d$1j=e$25([i$2z("esri.symbols.FillSymbol3DLayer")],h$14);const f$13=h$14;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$26;let l$1D=a$26=class extends a$2N{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal";}castSize(t){return o$10(t)}clone(){return new a$26({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return `${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};e$25([d$1T({type:["underline","line-through","none"],json:{default:"none",write:!0}})],l$1D.prototype,"decoration",void 0),e$25([d$1T({type:String,json:{write:!0}})],l$1D.prototype,"family",void 0),e$25([d$1T({type:Number,json:{write:{overridePolicy:(t,o,e)=>({enabled:!e||!e.textSymbol3D})}}})],l$1D.prototype,"size",void 0),e$25([c$35("size")],l$1D.prototype,"castSize",null),e$25([d$1T({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],l$1D.prototype,"style",void 0),e$25([d$1T({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],l$1D.prototype,"weight",void 0),l$1D=a$26=e$25([i$2z("esri.symbols.Font")],l$1D);const n$24=l$1D;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function c$28(r,o){const s=o&&o.url&&o.url.path;if(r&&s&&(r=T$t(r,s,{preserveProtocolRelative:!0}),o.portalItem&&o.readResourcePaths)){const e=W$b(r,o.portalItem.itemUrl);h$13.test(e)&&o.readResourcePaths.push(o.portalItem.resourceFromPath(e).path);}return I$n(r,o&&o.portal)}function i$1I(r,a,u=0){if(!r)return r;!Q$e(r)&&a&&a.blockedRelativeUrls&&a.blockedRelativeUrls.push(r);let n=T$t(r);if(a){const e=a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.rootPath||a.url&&a.url.path;if(e){const o=I$n(e,a.portal);n=W$b(I$n(n,a.portal),o,o),n!==r&&a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.writtenUrls.push(n);}}return n=v$D(n,a&&a.portal),Q$e(n)&&(n=z$s(n)),null!=a&&a.resources&&null!=a&&a.portalItem&&!Q$e(n)&&!G$l(n)&&0===u&&a.resources.toKeep.push({resource:a.portalItem.resourceFromPath(n)}),n}function m$1x(r,e,t){return c$28(r,t)}function p$2c(r,e,t,o){const s=i$1I(r,o);void 0!==s&&(e[t]=s);}const f$12=/\/items\/([^\/]+)\/resources\//,h$13=/^\.\/resources\//;function U$h(e){const t=r$1K(e)?e.match(f$12):null;return r$1K(t)?t[1]:null}function v$D(r,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?xt$2(r,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):r}function I$n(r,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return r;const t=`${e.urlKey}.${e.customBaseUrl}`;return E$x(x$K,`${x$K.scheme}://${t}`)?xt$2(r,e.portalHostname,t):xt$2(r,t,e.portalHostname)}const R$i=Object.freeze({__proto__:null,fromJSON:c$28,toJSON:i$1I,read:m$1x,write:p$2c,itemIdFromResourceUrl:U$h});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$23;const d$1i=s$24()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let h$12=n$23=class extends a$2N{constructor(r){super(r);}readHref(r,e,o){return r?c$28(r,o):e.dataURI}writeHref(r,e,o,c){r&&(G$l(r)?e.dataURI=r:(e.href=i$1I(r,c),Q$e(e.href)&&(e.href=z$s(e.href))));}clone(){return new n$23({href:this.href,primitive:this.primitive})}};e$25([d$1T({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],h$12.prototype,"href",void 0),e$25([o$1v("href")],h$12.prototype,"readHref",null),e$25([r$1m("href",{href:{type:String},dataURI:{type:String}})],h$12.prototype,"writeHref",null),e$25([r$12(d$1i)],h$12.prototype,"primitive",void 0),h$12=n$23=e$25([i$2z("esri.symbols.support.IconSymbol3DLayerResource")],h$12);const j$w="circle",y$14=h$12;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$15;let p$2b=e$15=class extends p$3a{constructor(){super(...arguments),this.x=0,this.y=0;}clone(){return new e$15({x:this.x,y:this.y})}};e$25([d$1T({type:Number})],p$2b.prototype,"x",void 0),e$25([d$1T({type:Number})],p$2b.prototype,"y",void 0),p$2b=e$15=e$25([i$2z("esri.symbols.support.Symbol3DAnchorPosition2D")],p$2b);const c$27=p$2b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$1C;let a$25=l$1C=class extends a$2N{constructor(o){super(o),this.color=new h$18([0,0,0,1]),this.size=e$17(1);}clone(){const o={color:r$1K(this.color)?this.color.clone():null,size:this.size};return new l$1C(o)}};e$25([d$1T(p$2m)],a$25.prototype,"color",void 0),e$25([d$1T(a$2d)],a$25.prototype,"size",void 0),a$25=l$1C=e$25([i$2z("esri.symbols.support.Symbol3DIconOutline")],a$25);const n$22=a$25;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$1h;const f$11=s$2n.getLogger("esri.symbols.IconSymbol3DLayer");let b$M=d$1h=class extends a$2e{constructor(o){super(o),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0;}clone(){return new d$1h({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:r$1K(this.material)?this.material.clone():null,outline:r$1K(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(o){const t=o.color||o$Z,r=j$v(o),e=o.outline&&o.outline.width>0?{size:o.outline.width,color:(o.outline.color||o$Z).clone()}:null;return new d$1h({size:o.size,resource:{primitive:w$B(o.style)},material:{color:t},outline:e,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(o){const t=!o.color||t$12(o.color)?o$Z:o.color,r=j$v(o);return new d$1h({size:o.width<=o.height?o.height:o.width,resource:{href:o.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(o){return new d$1h({resource:{href:X$e({mediaType:"application/json",data:JSON.stringify(o.data)})}})}};function j$v(o){const t="width"in o?o.width:o.size,r="height"in o?o.height:o.size,e=v$C(o.xoffset),i=v$C(o.yoffset);return (e||i)&&t&&r?{x:-e/t,y:i/r}:null}function v$C(o){return isFinite(o)?o:0}e$25([d$1T({type:a$2c,json:{write:!0}})],b$M.prototype,"material",void 0),e$25([d$1T({type:y$14,json:{write:!0}})],b$M.prototype,"resource",void 0),e$25([r$12({Icon:"icon"},{readOnly:!0})],b$M.prototype,"type",void 0),e$25([d$1T(a$2d)],b$M.prototype,"size",void 0),e$25([r$12({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),d$1T({json:{default:"center"}})],b$M.prototype,"anchor",void 0),e$25([d$1T({type:p$2b,json:{type:[Number],read:{reader:o=>new p$2b({x:o[0],y:o[1]})},write:{writer:(o,t)=>{t.anchorPosition=[o.x,o.y];},overridePolicy(){return {enabled:"relative"===this.anchor}}}}})],b$M.prototype,"anchorPosition",void 0),e$25([d$1T({type:n$22,json:{write:!0}})],b$M.prototype,"outline",void 0),b$M=d$1h=e$25([i$2z("esri.symbols.IconSymbol3DLayer")],b$M);const g$Q={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function w$B(o){const t=g$Q[o];return t||(f$11.warn(`${o} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const S$u=b$M;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var j$u;let d$1g=j$u=class extends a$2e{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=e$17(1),this.pattern=null;}clone(){const t={enabled:this.enabled,material:r$1K(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:r$1K(this.pattern)?this.pattern.clone():null};return new j$u(t)}static fromSimpleLineSymbol(t){const r={enabled:!0,size:t.width||1,cap:t.cap||"butt",join:t.join||"miter",pattern:t.style&&"inside-frame"!==t.style?new l$1F({style:t.style}):null,material:new l$1I({color:(t.color||o$Z).clone()})};return new j$u(r)}};e$25([d$1T({type:l$1I,json:{write:!0}})],d$1g.prototype,"material",void 0),e$25([r$12({Line:"line"},{readOnly:!0})],d$1g.prototype,"type",void 0),e$25([d$1T({type:a$27,json:{write:!0,default:"miter"}})],d$1g.prototype,"join",void 0),e$25([d$1T({type:u$1q,json:{write:!0,default:"butt"}})],d$1g.prototype,"cap",void 0),e$25([d$1T(a$2d)],d$1g.prototype,"size",void 0),e$25([d$1T(o$_)],d$1g.prototype,"pattern",void 0),d$1g=j$u=e$25([i$2z("esri.symbols.LineSymbol3DLayer")],d$1g);const f$10=d$1g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$24;const n$21=s$24()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let m$1w=a$24=class extends a$2N{clone(){return new a$24({href:this.href,primitive:this.primitive})}};e$25([d$1T({type:String,json:{read:m$1x,write:p$2c}})],m$1w.prototype,"href",void 0),e$25([r$12(n$21)],m$1w.prototype,"primitive",void 0),m$1w=a$24=e$25([i$2z("esri.symbols.support.ObjectSymbol3DLayerResource")],m$1w);const d$1f="sphere",u$1o=m$1w;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$14;let p$2a=e$14=class extends p$3a{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0;}clone(){return new e$14({x:this.x,y:this.y,z:this.z})}};e$25([d$1T({type:Number})],p$2a.prototype,"x",void 0),e$25([d$1T({type:Number})],p$2a.prototype,"y",void 0),e$25([d$1T({type:Number})],p$2a.prototype,"z",void 0),p$2a=e$14=e$25([i$2z("esri.symbols.support.Symbol3DAnchorPosition3D")],p$2a);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$20;let c$26=n$20=class extends a$2e{constructor(o){super(o),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0;}clone(){return new n$20({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:r$1K(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return !this.resource||"string"!=typeof this.resource.href}};e$25([d$1T({type:a$2c,json:{write:!0}})],c$26.prototype,"material",void 0),e$25([d$1T({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],c$26.prototype,"castShadows",void 0),e$25([d$1T({type:u$1o,json:{write:!0}})],c$26.prototype,"resource",void 0),e$25([r$12({Object:"object"},{readOnly:!0})],c$26.prototype,"type",void 0),e$25([d$1T({type:Number,json:{write:!0}})],c$26.prototype,"width",void 0),e$25([d$1T({type:Number,json:{write:!0}})],c$26.prototype,"height",void 0),e$25([d$1T({type:Number,json:{write:!0}})],c$26.prototype,"depth",void 0),e$25([r$12({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),d$1T({json:{default:"origin"}})],c$26.prototype,"anchor",void 0),e$25([d$1T({type:p$2a,json:{type:[Number],read:{reader:o=>new p$2a({x:o[0],y:o[1],z:o[2]})},write:{writer:(o,t)=>{t.anchorPosition=[o.x,o.y,o.z];},overridePolicy(){return {enabled:"relative"===this.anchor}}}}})],c$26.prototype,"anchorPosition",void 0),e$25([d$1T({type:Number,json:{write:!0}})],c$26.prototype,"heading",void 0),e$25([d$1T({type:Number,json:{write:!0}})],c$26.prototype,"tilt",void 0),e$25([d$1T({type:Number,json:{write:!0}})],c$26.prototype,"roll",void 0),e$25([d$1T({readOnly:!0})],c$26.prototype,"isPrimitive",null),c$26=n$20=e$25([i$2z("esri.symbols.ObjectSymbol3DLayer")],c$26);const l$1B=c$26;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$1$;let d$1e=n$1$=class extends a$2e{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all";}readWidth(t,e){return null!=t?t:null==e.height&&null!=e.size?e.size:void 0}readHeight(t,e){return null!=t?t:null==e.width&&null!=e.size?e.size:void 0}clone(){return new n$1$({enabled:this.enabled,material:r$1K(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};e$25([d$1T({type:a$2c,json:{write:!0}})],d$1e.prototype,"material",void 0),e$25([d$1T({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],d$1e.prototype,"castShadows",void 0),e$25([r$12({Path:"path"},{readOnly:!0})],d$1e.prototype,"type",void 0),e$25([d$1T({type:["circle","quad"],json:{write:!0,default:"circle"}})],d$1e.prototype,"profile",void 0),e$25([d$1T({type:a$27,json:{write:!0,default:"miter"}})],d$1e.prototype,"join",void 0),e$25([d$1T({type:i$1J,json:{write:!0,default:"butt"}})],d$1e.prototype,"cap",void 0),e$25([d$1T({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],d$1e.prototype,"width",void 0),e$25([o$1v("width",["width","size","height"])],d$1e.prototype,"readWidth",null),e$25([d$1T({type:Number,json:{write:!0}})],d$1e.prototype,"height",void 0),e$25([o$1v("height",["height","size","width"])],d$1e.prototype,"readHeight",null),e$25([d$1T({type:["center","bottom","top"],json:{write:!0,default:"center"}})],d$1e.prototype,"anchor",void 0),e$25([d$1T({type:["heading","all"],json:{write:!0,default:"all"}})],d$1e.prototype,"profileRotation",void 0),d$1e=n$1$=e$25([i$2z("esri.symbols.PathSymbol3DLayer")],d$1e);const c$25=d$1e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$1v;let l$1A=m$1v=class extends a$2N{constructor(){super(...arguments),this.color=new h$18([0,0,0,1]),this.size=0;}clone(){return new m$1v({color:l$2w(this.color),size:this.size})}};e$25([d$1T(p$2m)],l$1A.prototype,"color",void 0),e$25([d$1T(a$2d)],l$1A.prototype,"size",void 0),l$1A=m$1v=e$25([i$2z("esri.symbols.support.Symbol3DHalo")],l$1A);const a$23=l$1A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$1n;let h$11=u$1n=class extends a$2e{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.material=null,this.text=void 0,this.type="text";}get font(){return this._get("font")||null}set font(t){t&&this._userSize&&(t.size=this._userSize),this._set("font",t);}writeFont(t,o,e,r){const s={...r,textSymbol3D:!0};o.font=t.write({},s),delete o.font.size;}get size(){return null!=this._userSize?this._userSize:this.font&&null!=this.font.size?this.font.size:9}set size(t){this._userSize=t,this.font&&(this.font.size=this._userSize),this.notifyChange("size");}clone(){return new u$1n({enabled:this.enabled,font:this.font&&l$2w(this.font),halo:this.halo&&l$2w(this.halo),material:r$1K(this.material)?this.material.clone():null,size:this.size,text:this.text})}static fromTextSymbol(t){const o=f$$(t.haloColor,t.haloSize),e=t.font?t.font.clone():new n$24;return new u$1n({size:e.size,font:e,halo:o,material:t.color?{color:t.color.clone()}:null,text:t.text})}};function f$$(t,e){return t&&e>0?{color:l$2w(t),size:e}:null}e$25([d$1T({type:n$24,json:{write:!0}})],h$11.prototype,"font",null),e$25([r$1m("font")],h$11.prototype,"writeFont",null),e$25([d$1T({type:a$23,json:{write:!0}})],h$11.prototype,"halo",void 0),e$25([d$1T({type:a$2c,json:{write:!0}})],h$11.prototype,"material",void 0),e$25([d$1T(a$2d),d$1T()],h$11.prototype,"size",null),e$25([d$1T({type:String,json:{write:!0}})],h$11.prototype,"text",void 0),e$25([r$12({Text:"text"},{readOnly:!0})],h$11.prototype,"type",void 0),h$11=u$1n=e$25([i$2z("esri.symbols.TextSymbol3DLayer")],h$11);const y$13=h$11;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$1z;let c$24=l$1z=class extends a$2e{constructor(e){super(e),this.color=m$1u.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate";}clone(){return new l$1z({color:l$2w(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};e$25([d$1T({type:h$18,nonNullable:!0,json:{type:[S$J],write:(e,o,r)=>o[r]=e.toArray(1),default:()=>m$1u.clone(),defaultEquals:e=>e.toCss(!0)===m$1u.toCss(!0)}})],c$24.prototype,"color",void 0),e$25([r$12({Water:"water"},{readOnly:!0})],c$24.prototype,"type",void 0),e$25([d$1T({type:["small","medium","large"],json:{write:!0,default:"medium"}})],c$24.prototype,"waterbodySize",void 0),e$25([d$1T({type:Number,json:{write:!0,default:null}})],c$24.prototype,"waveDirection",void 0),e$25([d$1T({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],c$24.prototype,"waveStrength",void 0),c$24=l$1z=e$25([i$2z("esri.symbols.WaterSymbol3DLayer")],c$24);const m$1u=new h$18([0,119,190]),n$1_=c$24;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$29;let a$22=p$29=class extends p$3a{constructor(){super(...arguments),this.portal=null;}clone(){return new p$29({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};e$25([d$1T({type:String})],a$22.prototype,"name",void 0),e$25([d$1T({type:String})],a$22.prototype,"styleUrl",void 0),e$25([d$1T({type:String})],a$22.prototype,"styleName",void 0),e$25([d$1T({type:B$i})],a$22.prototype,"portal",void 0),a$22=p$29=e$25([i$2z("esri.symbols.support.StyleOrigin")],a$22);const l$1y=a$22;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$10;let p$28=t$10=class extends p$3a{clone(){return new t$10({url:this.url})}};e$25([d$1T({type:String})],p$28.prototype,"url",void 0),p$28=t$10=e$25([i$2z("esri.symbols.support.Thumbnail")],p$28);const c$23=p$28;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const v$B={icon:S$u,object:l$1B,line:f$10,path:c$25,fill:f$13,extrude:m$1B,text:y$13,water:n$1_},C$n=S$I.ofType({base:a$2e,key:"type",typeMap:v$B,errorContext:"symbol-layer"}),T$g=s$2n.getLogger("esri.symbols.Symbol3D");let k$l=class extends a$2f{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const o=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,t=o&&o.type||S$I;this._set("symbolLayers",new t);}get color(){return null}set color(e){T$g.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.");}set symbolLayers(e){n$2t(e,this._get("symbolLayers"));}readStyleOrigin(e,r,o){if(e.styleUrl&&e.name){const r=c$28(e.styleUrl,o);return new l$1y({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new l$1y({portal:o&&o.portal||B$i.getDefault(),styleName:e.styleName,name:e.name});o&&o.messages&&o.messages.push(new t$1A("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:o,definition:e}));}writeStyleOrigin(e,r,o,t){if(e.styleUrl&&e.name){let o=i$1I(e.styleUrl,t);Q$e(o)&&(o=z$s(o)),r.styleOrigin={styleUrl:o,name:e.name};}else e.styleName&&e.name&&(e.portal&&t&&t.portal&&!P$u(e.portal.restUrl,t.portal.restUrl)?t&&t.messages&&t.messages.push(new t$1A("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:e.styleName,name:e.name});}normalizeCtorArgs(e){return e instanceof a$2e||e&&v$B[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};e$25([d$1T({json:{read:!1,write:!1}})],k$l.prototype,"color",null),e$25([d$1T({type:C$n,nonNullable:!0,json:{write:!0}}),c$35(t$1u)],k$l.prototype,"symbolLayers",null),e$25([d$1T({type:l$1y})],k$l.prototype,"styleOrigin",void 0),e$25([o$1v("styleOrigin")],k$l.prototype,"readStyleOrigin",null),e$25([r$1m("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],k$l.prototype,"writeStyleOrigin",null),e$25([d$1T({type:c$23,json:{read:!1}})],k$l.prototype,"thumbnail",void 0),e$25([d$1T({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],k$l.prototype,"type",void 0),k$l=e$25([i$2z("esri.symbols.Symbol3D")],k$l);const A$e=k$l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$$=class extends a$2N{constructor(r){super(r),this.visible=!0;}clone(){}};e$25([d$1T({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],t$$.prototype,"type",void 0),e$25([d$1T({readOnly:!0})],t$$.prototype,"visible",void 0),t$$=e$25([i$2z("esri.symbols.callouts.Callout3D")],t$$);const p$27=t$$;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$1x;let a$21=l$1x=class extends a$2N{constructor(){super(...arguments),this.color=new h$18("white");}clone(){return new l$1x({color:l$2w(this.color)})}};e$25([d$1T(p$2m)],a$21.prototype,"color",void 0),a$21=l$1x=e$25([i$2z("esri.symbols.callouts.LineCallout3DBorder")],a$21);const i$1H=a$21;Object.freeze({__proto__:null,get LineCallout3DBorder(){return a$21},default:i$1H});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$1m;let d$1d=u$1m=class extends p$27{constructor(o){super(o),this.type="line",this.color=new h$18([0,0,0,1]),this.size=e$17(1),this.border=null;}get visible(){return this.size>0&&r$1K(this.color)&&this.color.a>0}clone(){return new u$1m({color:l$2w(this.color),size:this.size,border:l$2w(this.border)})}};e$25([r$12({line:"line"},{readOnly:!0})],d$1d.prototype,"type",void 0),e$25([d$1T(p$2m)],d$1d.prototype,"color",void 0),e$25([d$1T(a$2d)],d$1d.prototype,"size",void 0),e$25([d$1T({type:i$1H,json:{write:!0}})],d$1d.prototype,"border",void 0),e$25([d$1T({readOnly:!0})],d$1d.prototype,"visible",null),d$1d=u$1m=e$25([i$2z("esri.symbols.callouts.LineCallout3D")],d$1d);const y$12=d$1d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$V(t){if(!t)return !1;const e=t.verticalOffset;return !!e&&!(e.screenLength<=0||e.maxWorldLength<=0)}function n$1Z(t){if(!t)return !1;if(!t.supportsCallout||!t.supportsCallout())return !1;const e=t.callout;return !!e&&(!!e.visible&&!!r$V(t))}const l$1w={types:{key:"type",base:p$27,typeMap:{line:y$12}},json:{write:!0}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$26;let n$1Y=p$26=class extends a$2N{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0;}clone(){return new p$26({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};e$25([d$1T(a$2d)],n$1Y.prototype,"screenLength",void 0),e$25([d$1T({type:Number,json:{write:!0,default:0}})],n$1Y.prototype,"minWorldLength",void 0),e$25([d$1T({type:Number,json:{write:!0}})],n$1Y.prototype,"maxWorldLength",void 0),n$1Y=p$26=e$25([i$2z("esri.symbols.support.Symbol3DVerticalOffset")],n$1Y);const i$1G=n$1Y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$1X;const u$1l=S$I.ofType({base:null,key:"type",typeMap:{text:y$13}});let f$_=n$1X=class extends A$e{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new u$1l,this.type="label-3d";}supportsCallout(){return !0}hasVisibleCallout(){return n$1Z(this)}hasVisibleVerticalOffset(){return r$V(this)}clone(){return new n$1X({styleOrigin:l$2w(this.styleOrigin),symbolLayers:l$2w(this.symbolLayers),thumbnail:l$2w(this.thumbnail),callout:l$2w(this.callout),verticalOffset:l$2w(this.verticalOffset)})}static fromTextSymbol(t){return new n$1X({symbolLayers:[y$13.fromTextSymbol(t)]})}};e$25([d$1T({type:i$1G,json:{write:!0}})],f$_.prototype,"verticalOffset",void 0),e$25([d$1T(l$1w)],f$_.prototype,"callout",void 0),e$25([d$1T({json:{read:!1,write:!1}})],f$_.prototype,"styleOrigin",void 0),e$25([d$1T({type:u$1l})],f$_.prototype,"symbolLayers",void 0),e$25([r$12({LabelSymbol3D:"label-3d"},{readOnly:!0})],f$_.prototype,"type",void 0),f$_=n$1X=e$25([i$2z("esri.symbols.LabelSymbol3D")],f$_);const b$L=f$_;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$1v;const a$20=S$I.ofType({base:null,key:"type",typeMap:{line:f$10,path:c$25}}),n$1W=S$I.ofType({base:null,key:"type",typeMap:{line:f$10,path:c$25}});let c$22=l$1v=class extends A$e{constructor(o){super(o),this.symbolLayers=new a$20,this.type="line-3d";}clone(){return new l$1v({styleOrigin:l$2w(this.styleOrigin),symbolLayers:l$2w(this.symbolLayers),thumbnail:l$2w(this.thumbnail)})}static fromSimpleLineSymbol(o){return new l$1v({symbolLayers:[f$10.fromSimpleLineSymbol(o)]})}};e$25([d$1T({type:a$20,json:{type:n$1W}})],c$22.prototype,"symbolLayers",void 0),e$25([r$12({LineSymbol3D:"line-3d"},{readOnly:!0})],c$22.prototype,"type",void 0),c$22=l$1v=e$25([i$2z("esri.symbols.LineSymbol3D")],c$22);const b$K=c$22;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$25=class extends a$2f{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9;}hash(){return `${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};e$25([d$1T({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],p$25.prototype,"angle",void 0),e$25([d$1T({type:["simple-marker","picture-marker"],readOnly:!0})],p$25.prototype,"type",void 0),e$25([d$1T({type:Number,cast:o$10,json:{write:!0}})],p$25.prototype,"xoffset",void 0),e$25([d$1T({type:Number,cast:o$10,json:{write:!0}})],p$25.prototype,"yoffset",void 0),e$25([d$1T({type:Number,cast:t=>"auto"===t?t:o$10(t),json:{write:!0}})],p$25.prototype,"size",void 0),p$25=e$25([i$2z("esri.symbols.MarkerSymbol")],p$25);const i$1F=p$25;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1E;const y$11=S$I.ofType({base:null,key:"type",typeMap:{fill:f$13}});let c$21=i$1E=class extends A$e{constructor(o){super(o),this.symbolLayers=new y$11,this.type="mesh-3d";}clone(){return new i$1E({styleOrigin:l$2w(this.styleOrigin),symbolLayers:l$2w(this.symbolLayers),thumbnail:l$2w(this.thumbnail)})}};e$25([d$1T({type:y$11})],c$21.prototype,"symbolLayers",void 0),e$25([r$12({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],c$21.prototype,"type",void 0),c$21=i$1E=e$25([i$2z("esri.symbols.MeshSymbol3D")],c$21);const a$1$=c$21;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function s$1n(a,r,t){return r.imageData?X$e({mediaType:r.contentType||"image/png",isBase64:!0,data:r.imageData}):l$1u(r.url,t)}function l$1u(e,t){return p$24(t)&&!Q$e(e)&&t.layer.parsedUrl?D$v(t.layer.parsedUrl.path,"images",e):c$28(e,t)}function u$1k(e,a,r,n){if(G$l(e)){const t=V$f(e);a.contentType=t.mediaType,a.imageData=t.data,r&&r.imageData===a.imageData&&r.url&&p$2c(r.url,a,"url",n);}else p$2c(e,a,"url",n);}const m$1t={json:{read:{source:["imageData","url"],reader:s$1n},write:{writer(e,a,r,t){u$1k(e,a,this.source,t);}}}},c$20={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,a,r){const t={};return a.imageData&&(t.imageData=a.imageData),a.contentType&&(t.contentType=a.contentType),a.url&&(t.url=l$1u(a.url,r)),t}}}};function p$24(e){return e&&("service"===e.origin||"portal-item"===e.origin)&&e.layer&&("feature"===e.layer.type||"stream"===e.layer.type)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$1$;let u$1j=c$1$=class extends p$2h{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null;}normalizeCtorArgs(t,s,e,r){if(t&&"string"!=typeof t&&null==t.imageData)return t;const i={};return t&&(i.url=t),s&&(i.outline=s),null!=e&&(i.width=o$10(e)),null!=r&&(i.height=o$10(r)),i}clone(){const t=new c$1$({color:l$2w(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",l$2w(this.source)),t}hash(){var t;return `${super.hash()}.${null==(t=this.color)?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};e$25([r$12({esriPFS:"picture-fill"},{readOnly:!0})],u$1j.prototype,"type",void 0),e$25([d$1T(m$1t)],u$1j.prototype,"url",void 0),e$25([d$1T({type:Number,json:{write:!0}})],u$1j.prototype,"xscale",void 0),e$25([d$1T({type:Number,json:{write:!0}})],u$1j.prototype,"yscale",void 0),e$25([d$1T({type:Number,cast:o$10,json:{write:!0}})],u$1j.prototype,"width",void 0),e$25([d$1T({type:Number,cast:o$10,json:{write:!0}})],u$1j.prototype,"height",void 0),e$25([d$1T({type:Number,cast:o$10,json:{write:!0}})],u$1j.prototype,"xoffset",void 0),e$25([d$1T({type:Number,cast:o$10,json:{write:!0}})],u$1j.prototype,"yoffset",void 0),e$25([d$1T(c$20)],u$1j.prototype,"source",void 0),u$1j=c$1$=e$25([i$2z("esri.symbols.PictureFillSymbol")],u$1j);const a$1_=u$1j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$1t;let a$1Z=l$1t=class extends i$1F{constructor(...r){super(...r),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null;}normalizeCtorArgs(r,t,o){if(r&&"string"!=typeof r&&null==r.imageData)return r;const s={};return r&&(s.url=r),null!=t&&(s.width=o$10(t)),null!=o&&(s.height=o$10(o)),s}readHeight(r,t){return t.size||r}readWidth(r,t){return t.size||r}clone(){const r=new l$1t({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return r._set("source",l$2w(this.source)),r}hash(){return `${super.hash()}.${this.height}.${this.url}.${this.width}`}};e$25([d$1T({json:{write:!1}})],a$1Z.prototype,"color",void 0),e$25([r$12({esriPMS:"picture-marker"},{readOnly:!0})],a$1Z.prototype,"type",void 0),e$25([d$1T(m$1t)],a$1Z.prototype,"url",void 0),e$25([d$1T(c$20)],a$1Z.prototype,"source",void 0),e$25([d$1T({type:Number,cast:o$10,json:{write:!0}})],a$1Z.prototype,"height",void 0),e$25([o$1v("height",["height","size"])],a$1Z.prototype,"readHeight",null),e$25([d$1T({type:Number,cast:o$10,json:{write:!0}})],a$1Z.prototype,"width",void 0),e$25([d$1T({json:{write:!1}})],a$1Z.prototype,"size",void 0),a$1Z=l$1t=e$25([i$2z("esri.symbols.PictureMarkerSymbol")],a$1Z);const n$1V=a$1Z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var S$t;const h$10=S$I.ofType({base:null,key:"type",typeMap:{icon:S$u,object:l$1B,text:y$13}}),j$t=S$I.ofType({base:null,key:"type",typeMap:{icon:S$u,object:l$1B}});let d$1c=S$t=class extends A$e{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new h$10,this.type="point-3d";}writeSymbolLayers(t,e,r,s){const l=t.filter((t=>"text"!==t.type));if(s&&s.messages&&l.length<t.length){const e=t.find((t=>"text"===t.type));s.messages.push(new s$2l("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:e}));}e[r]=l.map((t=>t.write({},s))).toArray();}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return !1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return !1}return !0}hasVisibleCallout(){return n$1Z(this)}hasVisibleVerticalOffset(){return r$V(this)}clone(){return new S$t({verticalOffset:l$2w(this.verticalOffset),callout:l$2w(this.callout),styleOrigin:l$2w(this.styleOrigin),symbolLayers:l$2w(this.symbolLayers),thumbnail:l$2w(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new S$t({symbolLayers:[S$u.fromSimpleMarkerSymbol(t)]})}static fromPictureMarkerSymbol(t){return new S$t({symbolLayers:[S$u.fromPictureMarkerSymbol(t)]})}static fromCIMSymbol(t){var e,o;if("CIMPointSymbol"!==(null==(e=t.data)||null==(o=e.symbol)?void 0:o.type))return null;return t.data.symbol.callout?new S$t({symbolLayers:[S$u.fromCIMSymbol(t)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new S$t({symbolLayers:[S$u.fromCIMSymbol(t)]})}static fromTextSymbol(t){return new S$t({symbolLayers:[y$13.fromTextSymbol(t)]})}};e$25([d$1T({type:i$1G,json:{write:!0}})],d$1c.prototype,"verticalOffset",void 0),e$25([d$1T(l$1w)],d$1c.prototype,"callout",void 0),e$25([d$1T({type:h$10,json:{type:j$t,origins:{"web-scene":{type:j$t}}}})],d$1c.prototype,"symbolLayers",void 0),e$25([r$1m("web-scene","symbolLayers")],d$1c.prototype,"writeSymbolLayers",null),e$25([r$12({PointSymbol3D:"point-3d"},{readOnly:!0})],d$1c.prototype,"type",void 0),d$1c=S$t=e$25([i$2z("esri.symbols.PointSymbol3D")],d$1c);const L$l=d$1c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var S$s;const j$s=S$I.ofType({base:null,key:"type",typeMap:{extrude:m$1B,fill:f$13,icon:S$u,line:f$10,object:l$1B,text:y$13,water:n$1_}}),d$1b=S$I.ofType({base:null,key:"type",typeMap:{extrude:m$1B,fill:f$13,icon:S$u,line:f$10,object:l$1B,water:n$1_}});let g$P=S$s=class extends A$e{constructor(e){super(e),this.symbolLayers=new j$s,this.type="polygon-3d";}writeSymbolLayers(e,o,t,s){const y=e.filter((e=>"text"!==e.type));if(s&&s.messages&&y.length<e.length){const o=e.find((e=>"text"===e.type));s.messages.push(new s$2l("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:o}));}o[t]=y.map((e=>e.write({},s))).toArray();}clone(){return new S$s({styleOrigin:l$2w(this.styleOrigin),symbolLayers:l$2w(this.symbolLayers),thumbnail:l$2w(this.thumbnail)})}static fromJSON(e){const o=new S$s;if(o.read(e),2===o.symbolLayers.length&&"fill"===o.symbolLayers.getItemAt(0).type&&"line"===o.symbolLayers.getItemAt(1).type){const r=o.symbolLayers.getItemAt(0),t=o.symbolLayers.getItemAt(1);!t.enabled||e.symbolLayers&&e.symbolLayers[1]&&!1===e.symbolLayers[1].enable||(r.outline={size:t.size,color:r$1K(t.material)?t.material.color:null}),o.symbolLayers.removeAt(1);}return o}static fromSimpleFillSymbol(e){return new S$s({symbolLayers:[f$13.fromSimpleFillSymbol(e)]})}};e$25([d$1T({type:j$s,json:{type:d$1b}})],g$P.prototype,"symbolLayers",void 0),e$25([r$1m("web-scene","symbolLayers")],g$P.prototype,"writeSymbolLayers",null),e$25([r$12({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],g$P.prototype,"type",void 0),g$P=S$s=e$25([i$2z("esri.symbols.PolygonSymbol3D")],g$P);const h$$=g$P;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$23;const c$1_=new o$1J({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let m$1s=p$23=class extends p$2h{constructor(...o){super(...o),this.color=new h$18([0,0,0,.25]),this.outline=new m$1z,this.type="simple-fill",this.style="solid";}normalizeCtorArgs(o,r,s){if(o&&"string"!=typeof o)return o;const e={};return o&&(e.style=o),r&&(e.outline=r),s&&(e.color=s),e}clone(){return new p$23({color:l$2w(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return `${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};e$25([d$1T()],m$1s.prototype,"color",void 0),e$25([d$1T()],m$1s.prototype,"outline",void 0),e$25([r$12({esriSFS:"simple-fill"},{readOnly:!0})],m$1s.prototype,"type",void 0),e$25([d$1T({type:c$1_.apiValues,json:{read:c$1_.read,write:c$1_.write}})],m$1s.prototype,"style",void 0),m$1s=p$23=e$25([i$2z("esri.symbols.SimpleFillSymbol")],m$1s);const S$r=m$1s;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var h$_;const m$1r=new o$1J({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let u$1i=h$_=class extends i$1F{constructor(...e){super(...e),this.color=new h$18([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new m$1z;}normalizeCtorArgs(e,o,r,t){if(e&&"string"!=typeof e)return e;const i={};return e&&(i.style=e),null!=o&&(i.size=o$10(o)),r&&(i.outline=r),t&&(i.color=t),i}writeColor(e,o){e&&"x"!==this.style&&"cross"!==this.style&&(o.color=e.toJSON()),null===e&&(o.color=null);}set path(e){this.style="path",this._set("path",e);}clone(){return new h$_({angle:this.angle,color:l$2w(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return `${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${null==(e=this.outline)?void 0:e.hash()}`}};e$25([d$1T()],u$1i.prototype,"color",void 0),e$25([r$1m("color")],u$1i.prototype,"writeColor",null),e$25([r$12({esriSMS:"simple-marker"},{readOnly:!0})],u$1i.prototype,"type",void 0),e$25([d$1T()],u$1i.prototype,"size",void 0),e$25([d$1T({type:m$1r.apiValues,json:{read:m$1r.read,write:m$1r.write}})],u$1i.prototype,"style",void 0),e$25([d$1T({type:String,json:{write:!0}})],u$1i.prototype,"path",null),e$25([d$1T({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":m$1z}},json:{default:null,write:!0}})],u$1i.prototype,"outline",void 0),u$1i=h$_=e$25([i$2z("esri.symbols.SimpleMarkerSymbol")],u$1i);const y$10=u$1i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$1a;let y$$=d$1a=class extends a$2f{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new n$24,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment=null,this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1;}normalizeCtorArgs(t,o,e){if(t&&"string"!=typeof t)return t;const i={};return t&&(i.text=t),o&&(i.font=o),e&&(i.color=e),i}writeLineWidth(t,o,e,i){i&&"string"!=typeof i?i.origin:o[e]=t;}castLineWidth(t){return o$10(t)}writeLineHeight(t,o,e,i){i&&"string"!=typeof i?i.origin:o[e]=t;}clone(){return new d$1a({angle:this.angle,backgroundColor:l$2w(this.backgroundColor),borderLineColor:l$2w(this.borderLineColor),borderLineSize:this.borderLineSize,color:l$2w(this.color),font:this.font&&this.font.clone(),haloColor:l$2w(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return `${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};e$25([d$1T({type:h$18,json:{write:!0}})],y$$.prototype,"backgroundColor",void 0),e$25([d$1T({type:h$18,json:{write:!0}})],y$$.prototype,"borderLineColor",void 0),e$25([d$1T({type:Number,json:{write:!0}})],y$$.prototype,"borderLineSize",void 0),e$25([d$1T({type:n$24,json:{write:!0}})],y$$.prototype,"font",void 0),e$25([d$1T({type:["left","right","center","justify"],json:{write:!0}})],y$$.prototype,"horizontalAlignment",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],y$$.prototype,"kerning",void 0),e$25([d$1T({type:h$18,json:{write:!0}})],y$$.prototype,"haloColor",void 0),e$25([d$1T({type:Number,cast:o$10,json:{write:!0}})],y$$.prototype,"haloSize",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],y$$.prototype,"rightToLeft",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],y$$.prototype,"rotated",void 0),e$25([d$1T({type:String,json:{write:!0}})],y$$.prototype,"text",void 0),e$25([r$12({esriTS:"text"},{readOnly:!0})],y$$.prototype,"type",void 0),e$25([d$1T({type:["baseline","top","middle","bottom"],json:{write:!0}})],y$$.prototype,"verticalAlignment",void 0),e$25([d$1T({type:Number,cast:o$10,json:{write:!0}})],y$$.prototype,"xoffset",void 0),e$25([d$1T({type:Number,cast:o$10,json:{write:!0}})],y$$.prototype,"yoffset",void 0),e$25([d$1T({type:Number,json:{read:t=>t&&-1*t,write:(t,o)=>o.angle=t&&-1*t}})],y$$.prototype,"angle",void 0),e$25([d$1T({type:Number,json:{write:!0}})],y$$.prototype,"width",void 0),e$25([d$1T({type:Number})],y$$.prototype,"lineWidth",void 0),e$25([r$1m("lineWidth")],y$$.prototype,"writeLineWidth",null),e$25([c$35("lineWidth")],y$$.prototype,"castLineWidth",null),e$25([d$1T({type:Number})],y$$.prototype,"lineHeight",void 0),e$25([r$1m("lineHeight")],y$$.prototype,"writeLineHeight",null),y$$=d$1a=e$25([i$2z("esri.symbols.TextSymbol")],y$$);const c$1Z=y$$;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$1Y;const n$1U=s$2n.getLogger("esri.symbols.WebStyleSymbol");let u$1h=c$1Y=class extends a$2f{constructor(t){super(t),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style";}read(t,o){this.portal=o?o.portal:void 0,super.read(t,o);}clone(){return new c$1Y({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,o){const e=await b$J();h$1E(o);const s=e.resolveWebStyleSymbol(this,{portal:this.portal},t,o);return s.catch((t=>{n$1U.error("#fetchSymbol()","Failed to create symbol from style",t);})),s}};function b$J(){return Promise.resolve().then(function () { return webStyleSymbolUtils; })}e$25([d$1T({json:{write:!1}})],u$1h.prototype,"color",void 0),e$25([d$1T({type:String,json:{write:!0}})],u$1h.prototype,"styleName",void 0),e$25([d$1T({type:B$i,json:{write:!1}})],u$1h.prototype,"portal",void 0),e$25([d$1T({type:String,json:{read:m$1x,write:p$2c}})],u$1h.prototype,"styleUrl",void 0),e$25([d$1T({type:c$23,json:{read:!1}})],u$1h.prototype,"thumbnail",void 0),e$25([d$1T({type:String,json:{write:!0}})],u$1h.prototype,"name",void 0),e$25([r$12({styleSymbolReference:"web-style"},{readOnly:!0})],u$1h.prototype,"type",void 0),u$1h=c$1Y=e$25([i$2z("esri.symbols.WebStyleSymbol")],u$1h);const h$Z=u$1h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function c$1X(e){if(!e)return !1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return !0;default:return !1}}function x$p(e){if(!e)return !1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return !0;default:return !1}}const j$r={base:a$2f,key:"type",typeMap:{"simple-fill":S$r,"picture-fill":a$1_,"picture-marker":n$1V,"simple-line":m$1z,"simple-marker":y$10,text:c$1Z,"label-3d":b$L,"line-3d":b$K,"mesh-3d":a$1$,"point-3d":L$l,"polygon-3d":h$$,"web-style":h$Z,cim:d$1l},errorContext:"symbol"},D$g={base:a$2f,key:"type",typeMap:{"picture-marker":n$1V,"simple-marker":y$10,text:c$1Z,"web-style":h$Z,cim:d$1l},errorContext:"symbol"},k$k=u$2a({types:j$r}),M$n={base:a$2f,key:"type",typeMap:{"simple-fill":S$r,"picture-fill":a$1_,"picture-marker":n$1V,"simple-line":m$1z,"simple-marker":y$10,text:c$1Z,"line-3d":b$K,"mesh-3d":a$1$,"point-3d":L$l,"polygon-3d":h$$,"web-style":h$Z,cim:d$1l},errorContext:"symbol"},P$h={base:a$2f,key:"type",typeMap:{text:c$1Z,"label-3d":b$L},errorContext:"symbol"},h$Y={base:a$2f,key:"type",typeMap:{"line-3d":b$K,"mesh-3d":a$1$,"point-3d":L$l,"polygon-3d":h$$,"web-style":h$Z,cim:d$1l},errorContext:"symbol"},F$f={base:a$2f,key:"type",typeMap:{"label-3d":b$L},errorContext:"symbol"},g$O=N$t(j$r);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$1q;let n$1T=m$1q=class extends a$2N{constructor(...t){super(...t),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:e$1Q(),configurable:!0});}normalizeCtorArgs(t,e,r,s){return t&&!t.declaredClass?t:{geometry:t,symbol:e,attributes:r,popupTemplate:s}}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t));}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),this._notifyLayer("geometry",e,t));}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t));}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t));}getEffectivePopupTemplate(t=!1){if(this.popupTemplate)return this.popupTemplate;for(const e of [this.sourceLayer,this.layer])if(e){if("popupTemplate"in e&&e.popupTemplate)return e.popupTemplate;if(t&&"defaultPopupTemplate"in e&&r$1K(e.defaultPopupTemplate))return e.defaultPopupTemplate}return null}getAttribute(t){return this.attributes&&this.attributes[t]}setAttribute(t,e){if(this.attributes){const r=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",r,e,t);}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t);}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return {geometry:r$1K(this.geometry)?this.geometry.toJSON():null,symbol:r$1K(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}clone(){return new m$1q(this.cloneProperties())}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry);}cloneProperties(){return {attributes:l$2w(this.attributes),geometry:l$2w(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:l$2w(this.symbol),visible:this.visible}}_notifyLayer(t,e,r,s){if(!this.layer||!("graphicChanged"in this.layer))return;const o={graphic:this,property:t,oldValue:e,newValue:r};"attributes"===t&&(o.attributeName=s),this.layer.graphicChanged(o);}};e$25([d$1T({value:null})],n$1T.prototype,"attributes",null),e$25([d$1T({value:null,types:i$1W,json:{read:d$1o}})],n$1T.prototype,"geometry",null),e$25([d$1T({type:Boolean})],n$1T.prototype,"isAggregate",void 0),e$25([d$1T()],n$1T.prototype,"layer",void 0),e$25([d$1T({type:M$o})],n$1T.prototype,"popupTemplate",void 0),e$25([d$1T()],n$1T.prototype,"sourceLayer",void 0),e$25([d$1T({value:null,types:j$r})],n$1T.prototype,"symbol",null),e$25([d$1T({type:Boolean,value:!0})],n$1T.prototype,"visible",null),n$1T=m$1q=e$25([i$2z("esri.Graphic")],n$1T),function(t){t.generateUID=e$1Q;}(n$1T||(n$1T={}));const h$X=n$1T;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$13(n){return n&&"function"==typeof n.highlight}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1D;let p$22=i$1D=class extends p$3a{constructor(o){super(o),this.autoCloseMenu=!1,this.iconClass=null,this.items=null,this.label=null,this.open=!1,this.selected=!1,this.selectionEnabled=!1,this.clickFunction=null;}castItems(o){return o?o.map((o=>o instanceof i$1D?o:new i$1D(o))):null}};e$25([d$1T()],p$22.prototype,"autoCloseMenu",void 0),e$25([d$1T()],p$22.prototype,"iconClass",void 0),e$25([d$1T()],p$22.prototype,"items",void 0),e$25([c$35("items")],p$22.prototype,"castItems",null),e$25([d$1T()],p$22.prototype,"label",void 0),e$25([d$1T()],p$22.prototype,"open",void 0),e$25([d$1T()],p$22.prototype,"selected",void 0),e$25([d$1T()],p$22.prototype,"selectionEnabled",void 0),e$25([d$1T()],p$22.prototype,"clickFunction",void 0),p$22=i$1D=e$25([i$2z("esri.widgets.FeatureTable.Grid.support.ButtonMenuItem")],p$22);const c$1W=p$22;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$1V=class extends p$3a{constructor(o){super(o),this.items=null,this.open=!1;}castItems(o){return o?o.map((o=>o instanceof c$1W?o:new c$1W(o))):null}};e$25([d$1T()],c$1V.prototype,"items",void 0),e$25([c$35("items")],c$1V.prototype,"castItems",null),e$25([d$1T()],c$1V.prototype,"open",void 0),c$1V=e$25([i$2z("esri.widgets.FeatureTable.Grid.support.ButtonMenuViewModel")],c$1V);const i$1C=c$1V;

// import { isHTMLElement } from './instanceOf';
function getBoundingClientRect(element, // eslint-disable-next-line unused-imports/no-unused-vars
includeScale) {

  var rect = element.getBoundingClientRect();
  var scaleX = 1;
  var scaleY = 1; // FIXME:
  // `offsetWidth` returns an integer while `getBoundingClientRect`
  // returns a float. This results in `scaleX` or `scaleY` being
  // non-1 when it should be for elements that aren't a full pixel in
  // width or height.
  // if (isHTMLElement(element) && includeScale) {
  //   const offsetHeight = element.offsetHeight;
  //   const offsetWidth = element.offsetWidth;
  //   // Do not attempt to divide by 0, otherwise we get `Infinity` as scale
  //   // Fallback to 1 in case both values are `0`
  //   if (offsetWidth > 0) {
  //     scaleX = rect.width / offsetWidth || 1;
  //   }
  //   if (offsetHeight > 0) {
  //     scaleY = rect.height / offsetHeight || 1;
  //   }
  // }

  return {
    width: rect.width / scaleX,
    height: rect.height / scaleY,
    top: rect.top / scaleY,
    right: rect.right / scaleX,
    bottom: rect.bottom / scaleY,
    left: rect.left / scaleX,
    x: rect.left / scaleX,
    y: rect.top / scaleY
  };
}

function getWindow(node) {
  if (node == null) {
    return window;
  }

  if (node.toString() !== '[object Window]') {
    var ownerDocument = node.ownerDocument;
    return ownerDocument ? ownerDocument.defaultView || window : window;
  }

  return node;
}

function getWindowScroll(node) {
  var win = getWindow(node);
  var scrollLeft = win.pageXOffset;
  var scrollTop = win.pageYOffset;
  return {
    scrollLeft: scrollLeft,
    scrollTop: scrollTop
  };
}

function isElement(node) {
  var OwnElement = getWindow(node).Element;
  return node instanceof OwnElement || node instanceof Element;
}

function isHTMLElement(node) {
  var OwnElement = getWindow(node).HTMLElement;
  return node instanceof OwnElement || node instanceof HTMLElement;
}

function isShadowRoot(node) {
  // IE 11 has no ShadowRoot
  if (typeof ShadowRoot === 'undefined') {
    return false;
  }

  var OwnElement = getWindow(node).ShadowRoot;
  return node instanceof OwnElement || node instanceof ShadowRoot;
}

function getHTMLElementScroll(element) {
  return {
    scrollLeft: element.scrollLeft,
    scrollTop: element.scrollTop
  };
}

function getNodeScroll(node) {
  if (node === getWindow(node) || !isHTMLElement(node)) {
    return getWindowScroll(node);
  } else {
    return getHTMLElementScroll(node);
  }
}

function getNodeName(element) {
  return element ? (element.nodeName || '').toLowerCase() : null;
}

function getDocumentElement(element) {
  // $FlowFixMe[incompatible-return]: assume body is always available
  return ((isElement(element) ? element.ownerDocument : // $FlowFixMe[prop-missing]
  element.document) || window.document).documentElement;
}

function getWindowScrollBarX(element) {
  // If <html> has a CSS width greater than the viewport, then this will be
  // incorrect for RTL.
  // Popper 1 is broken in this case and never had a bug report so let's assume
  // it's not an issue. I don't think anyone ever specifies width on <html>
  // anyway.
  // Browsers where the left scrollbar doesn't cause an issue report `0` for
  // this (e.g. Edge 2019, IE11, Safari)
  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;
}

function getComputedStyle$1(element) {
  return getWindow(element).getComputedStyle(element);
}

function isScrollParent(element) {
  // Firefox wants us to check `-x` and `-y` variations as well
  var _getComputedStyle = getComputedStyle$1(element),
      overflow = _getComputedStyle.overflow,
      overflowX = _getComputedStyle.overflowX,
      overflowY = _getComputedStyle.overflowY;

  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);
}

function isElementScaled(element) {
  var rect = element.getBoundingClientRect();
  var scaleX = rect.width / element.offsetWidth || 1;
  var scaleY = rect.height / element.offsetHeight || 1;
  return scaleX !== 1 || scaleY !== 1;
} // Returns the composite rect of an element relative to its offsetParent.
// Composite means it takes into account transforms as well as layout.


function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {
  if (isFixed === void 0) {
    isFixed = false;
  }

  var isOffsetParentAnElement = isHTMLElement(offsetParent);
  isHTMLElement(offsetParent) && isElementScaled(offsetParent);
  var documentElement = getDocumentElement(offsetParent);
  var rect = getBoundingClientRect(elementOrVirtualElement);
  var scroll = {
    scrollLeft: 0,
    scrollTop: 0
  };
  var offsets = {
    x: 0,
    y: 0
  };

  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {
    if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078
    isScrollParent(documentElement)) {
      scroll = getNodeScroll(offsetParent);
    }

    if (isHTMLElement(offsetParent)) {
      offsets = getBoundingClientRect(offsetParent);
      offsets.x += offsetParent.clientLeft;
      offsets.y += offsetParent.clientTop;
    } else if (documentElement) {
      offsets.x = getWindowScrollBarX(documentElement);
    }
  }

  return {
    x: rect.left + scroll.scrollLeft - offsets.x,
    y: rect.top + scroll.scrollTop - offsets.y,
    width: rect.width,
    height: rect.height
  };
}

// means it doesn't take into account transforms.

function getLayoutRect(element) {
  var clientRect = getBoundingClientRect(element); // Use the clientRect sizes if it's not been transformed.
  // Fixes https://github.com/popperjs/popper-core/issues/1223

  var width = element.offsetWidth;
  var height = element.offsetHeight;

  if (Math.abs(clientRect.width - width) <= 1) {
    width = clientRect.width;
  }

  if (Math.abs(clientRect.height - height) <= 1) {
    height = clientRect.height;
  }

  return {
    x: element.offsetLeft,
    y: element.offsetTop,
    width: width,
    height: height
  };
}

function getParentNode(element) {
  if (getNodeName(element) === 'html') {
    return element;
  }

  return (// this is a quicker (but less type safe) way to save quite some bytes from the bundle
    // $FlowFixMe[incompatible-return]
    // $FlowFixMe[prop-missing]
    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node
    element.parentNode || ( // DOM Element detected
    isShadowRoot(element) ? element.host : null) || // ShadowRoot detected
    // $FlowFixMe[incompatible-call]: HTMLElement is a Node
    getDocumentElement(element) // fallback

  );
}

function getScrollParent(node) {
  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {
    // $FlowFixMe[incompatible-return]: assume body is always available
    return node.ownerDocument.body;
  }

  if (isHTMLElement(node) && isScrollParent(node)) {
    return node;
  }

  return getScrollParent(getParentNode(node));
}

/*
given a DOM element, return the list of all scroll parents, up the list of ancesors
until we get to the top window object. This list is what we attach scroll listeners
to, because if any of these parent elements scroll, we'll need to re-calculate the
reference element's position.
*/

function listScrollParents(element, list) {
  var _element$ownerDocumen;

  if (list === void 0) {
    list = [];
  }

  var scrollParent = getScrollParent(element);
  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);
  var win = getWindow(scrollParent);
  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;
  var updatedList = list.concat(target);
  return isBody ? updatedList : // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here
  updatedList.concat(listScrollParents(getParentNode(target)));
}

function isTableElement(element) {
  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;
}

function getTrueOffsetParent(element) {
  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837
  getComputedStyle$1(element).position === 'fixed') {
    return null;
  }

  return element.offsetParent;
} // `.offsetParent` reports `null` for fixed elements, while absolute elements
// return the containing block


function getContainingBlock(element) {
  var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') !== -1;
  var isIE = navigator.userAgent.indexOf('Trident') !== -1;

  if (isIE && isHTMLElement(element)) {
    // In IE 9, 10 and 11 fixed elements containing block is always established by the viewport
    var elementCss = getComputedStyle$1(element);

    if (elementCss.position === 'fixed') {
      return null;
    }
  }

  var currentNode = getParentNode(element);

  while (isHTMLElement(currentNode) && ['html', 'body'].indexOf(getNodeName(currentNode)) < 0) {
    var css = getComputedStyle$1(currentNode); // This is non-exhaustive but covers the most common CSS properties that
    // create a containing block.
    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block

    if (css.transform !== 'none' || css.perspective !== 'none' || css.contain === 'paint' || ['transform', 'perspective'].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === 'filter' || isFirefox && css.filter && css.filter !== 'none') {
      return currentNode;
    } else {
      currentNode = currentNode.parentNode;
    }
  }

  return null;
} // Gets the closest ancestor positioned element. Handles some edge cases,
// such as table ancestors and cross browser bugs.


function getOffsetParent(element) {
  var window = getWindow(element);
  var offsetParent = getTrueOffsetParent(element);

  while (offsetParent && isTableElement(offsetParent) && getComputedStyle$1(offsetParent).position === 'static') {
    offsetParent = getTrueOffsetParent(offsetParent);
  }

  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle$1(offsetParent).position === 'static')) {
    return window;
  }

  return offsetParent || getContainingBlock(element) || window;
}

var top = 'top';
var bottom = 'bottom';
var right = 'right';
var left = 'left';
var auto = 'auto';
var basePlacements = [top, bottom, right, left];
var start = 'start';
var end = 'end';
var clippingParents = 'clippingParents';
var viewport = 'viewport';
var popper = 'popper';
var reference = 'reference';
var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {
  return acc.concat([placement + "-" + start, placement + "-" + end]);
}, []);
var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {
  return acc.concat([placement, placement + "-" + start, placement + "-" + end]);
}, []); // modifiers that need to read the DOM

var beforeRead = 'beforeRead';
var read = 'read';
var afterRead = 'afterRead'; // pure-logic modifiers

var beforeMain = 'beforeMain';
var main = 'main';
var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)

var beforeWrite = 'beforeWrite';
var write = 'write';
var afterWrite = 'afterWrite';
var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];

function order(modifiers) {
  var map = new Map();
  var visited = new Set();
  var result = [];
  modifiers.forEach(function (modifier) {
    map.set(modifier.name, modifier);
  }); // On visiting object, check for its dependencies and visit them recursively

  function sort(modifier) {
    visited.add(modifier.name);
    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);
    requires.forEach(function (dep) {
      if (!visited.has(dep)) {
        var depModifier = map.get(dep);

        if (depModifier) {
          sort(depModifier);
        }
      }
    });
    result.push(modifier);
  }

  modifiers.forEach(function (modifier) {
    if (!visited.has(modifier.name)) {
      // check for visited object
      sort(modifier);
    }
  });
  return result;
}

function orderModifiers(modifiers) {
  // order based on dependencies
  var orderedModifiers = order(modifiers); // order based on phase

  return modifierPhases.reduce(function (acc, phase) {
    return acc.concat(orderedModifiers.filter(function (modifier) {
      return modifier.phase === phase;
    }));
  }, []);
}

function debounce(fn) {
  var pending;
  return function () {
    if (!pending) {
      pending = new Promise(function (resolve) {
        Promise.resolve().then(function () {
          pending = undefined;
          resolve(fn());
        });
      });
    }

    return pending;
  };
}

function getBasePlacement(placement) {
  return placement.split('-')[0];
}

function mergeByName(modifiers) {
  var merged = modifiers.reduce(function (merged, current) {
    var existing = merged[current.name];
    merged[current.name] = existing ? Object.assign({}, existing, current, {
      options: Object.assign({}, existing.options, current.options),
      data: Object.assign({}, existing.data, current.data)
    }) : current;
    return merged;
  }, {}); // IE11 does not support Object.values

  return Object.keys(merged).map(function (key) {
    return merged[key];
  });
}

function getViewportRect(element) {
  var win = getWindow(element);
  var html = getDocumentElement(element);
  var visualViewport = win.visualViewport;
  var width = html.clientWidth;
  var height = html.clientHeight;
  var x = 0;
  var y = 0; // NB: This isn't supported on iOS <= 12. If the keyboard is open, the popper
  // can be obscured underneath it.
  // Also, `html.clientHeight` adds the bottom bar height in Safari iOS, even
  // if it isn't open, so if this isn't available, the popper will be detected
  // to overflow the bottom of the screen too early.

  if (visualViewport) {
    width = visualViewport.width;
    height = visualViewport.height; // Uses Layout Viewport (like Chrome; Safari does not currently)
    // In Chrome, it returns a value very close to 0 (+/-) but contains rounding
    // errors due to floating point numbers, so we need to check precision.
    // Safari returns a number <= 0, usually < -1 when pinch-zoomed
    // Feature detection fails in mobile emulation mode in Chrome.
    // Math.abs(win.innerWidth / visualViewport.scale - visualViewport.width) <
    // 0.001
    // Fallback here: "Not Safari" userAgent

    if (!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)) {
      x = visualViewport.offsetLeft;
      y = visualViewport.offsetTop;
    }
  }

  return {
    width: width,
    height: height,
    x: x + getWindowScrollBarX(element),
    y: y
  };
}

var max = Math.max;
var min = Math.min;
var round = Math.round;

// of the `<html>` and `<body>` rect bounds if horizontally scrollable

function getDocumentRect(element) {
  var _element$ownerDocumen;

  var html = getDocumentElement(element);
  var winScroll = getWindowScroll(element);
  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;
  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);
  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);
  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);
  var y = -winScroll.scrollTop;

  if (getComputedStyle$1(body || html).direction === 'rtl') {
    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;
  }

  return {
    width: width,
    height: height,
    x: x,
    y: y
  };
}

function contains(parent, child) {
  var rootNode = child.getRootNode && child.getRootNode(); // First, attempt with faster native method

  if (parent.contains(child)) {
    return true;
  } // then fallback to custom implementation with Shadow DOM support
  else if (rootNode && isShadowRoot(rootNode)) {
      var next = child;

      do {
        if (next && parent.isSameNode(next)) {
          return true;
        } // $FlowFixMe[prop-missing]: need a better way to handle this...


        next = next.parentNode || next.host;
      } while (next);
    } // Give up, the result is false


  return false;
}

function rectToClientRect(rect) {
  return Object.assign({}, rect, {
    left: rect.x,
    top: rect.y,
    right: rect.x + rect.width,
    bottom: rect.y + rect.height
  });
}

function getInnerBoundingClientRect(element) {
  var rect = getBoundingClientRect(element);
  rect.top = rect.top + element.clientTop;
  rect.left = rect.left + element.clientLeft;
  rect.bottom = rect.top + element.clientHeight;
  rect.right = rect.left + element.clientWidth;
  rect.width = element.clientWidth;
  rect.height = element.clientHeight;
  rect.x = rect.left;
  rect.y = rect.top;
  return rect;
}

function getClientRectFromMixedType(element, clippingParent) {
  return clippingParent === viewport ? rectToClientRect(getViewportRect(element)) : isHTMLElement(clippingParent) ? getInnerBoundingClientRect(clippingParent) : rectToClientRect(getDocumentRect(getDocumentElement(element)));
} // A "clipping parent" is an overflowable container with the characteristic of
// clipping (or hiding) overflowing elements with a position different from
// `initial`


function getClippingParents(element) {
  var clippingParents = listScrollParents(getParentNode(element));
  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle$1(element).position) >= 0;
  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;

  if (!isElement(clipperElement)) {
    return [];
  } // $FlowFixMe[incompatible-return]: https://github.com/facebook/flow/issues/1414


  return clippingParents.filter(function (clippingParent) {
    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== 'body';
  });
} // Gets the maximum area that the element is visible in due to any number of
// clipping parents


function getClippingRect(element, boundary, rootBoundary) {
  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);
  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);
  var firstClippingParent = clippingParents[0];
  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {
    var rect = getClientRectFromMixedType(element, clippingParent);
    accRect.top = max(rect.top, accRect.top);
    accRect.right = min(rect.right, accRect.right);
    accRect.bottom = min(rect.bottom, accRect.bottom);
    accRect.left = max(rect.left, accRect.left);
    return accRect;
  }, getClientRectFromMixedType(element, firstClippingParent));
  clippingRect.width = clippingRect.right - clippingRect.left;
  clippingRect.height = clippingRect.bottom - clippingRect.top;
  clippingRect.x = clippingRect.left;
  clippingRect.y = clippingRect.top;
  return clippingRect;
}

function getVariation(placement) {
  return placement.split('-')[1];
}

function getMainAxisFromPlacement(placement) {
  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';
}

function computeOffsets(_ref) {
  var reference = _ref.reference,
      element = _ref.element,
      placement = _ref.placement;
  var basePlacement = placement ? getBasePlacement(placement) : null;
  var variation = placement ? getVariation(placement) : null;
  var commonX = reference.x + reference.width / 2 - element.width / 2;
  var commonY = reference.y + reference.height / 2 - element.height / 2;
  var offsets;

  switch (basePlacement) {
    case top:
      offsets = {
        x: commonX,
        y: reference.y - element.height
      };
      break;

    case bottom:
      offsets = {
        x: commonX,
        y: reference.y + reference.height
      };
      break;

    case right:
      offsets = {
        x: reference.x + reference.width,
        y: commonY
      };
      break;

    case left:
      offsets = {
        x: reference.x - element.width,
        y: commonY
      };
      break;

    default:
      offsets = {
        x: reference.x,
        y: reference.y
      };
  }

  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;

  if (mainAxis != null) {
    var len = mainAxis === 'y' ? 'height' : 'width';

    switch (variation) {
      case start:
        offsets[mainAxis] = offsets[mainAxis] - (reference[len] / 2 - element[len] / 2);
        break;

      case end:
        offsets[mainAxis] = offsets[mainAxis] + (reference[len] / 2 - element[len] / 2);
        break;
    }
  }

  return offsets;
}

function getFreshSideObject() {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0
  };
}

function mergePaddingObject(paddingObject) {
  return Object.assign({}, getFreshSideObject(), paddingObject);
}

function expandToHashMap(value, keys) {
  return keys.reduce(function (hashMap, key) {
    hashMap[key] = value;
    return hashMap;
  }, {});
}

function detectOverflow(state, options) {
  if (options === void 0) {
    options = {};
  }

  var _options = options,
      _options$placement = _options.placement,
      placement = _options$placement === void 0 ? state.placement : _options$placement,
      _options$boundary = _options.boundary,
      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,
      _options$rootBoundary = _options.rootBoundary,
      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,
      _options$elementConte = _options.elementContext,
      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,
      _options$altBoundary = _options.altBoundary,
      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,
      _options$padding = _options.padding,
      padding = _options$padding === void 0 ? 0 : _options$padding;
  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));
  var altContext = elementContext === popper ? reference : popper;
  var popperRect = state.rects.popper;
  var element = state.elements[altBoundary ? altContext : elementContext];
  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary);
  var referenceClientRect = getBoundingClientRect(state.elements.reference);
  var popperOffsets = computeOffsets({
    reference: referenceClientRect,
    element: popperRect,
    strategy: 'absolute',
    placement: placement
  });
  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets));
  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect
  // 0 or negative = within the clipping rect

  var overflowOffsets = {
    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,
    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,
    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,
    right: elementClientRect.right - clippingClientRect.right + paddingObject.right
  };
  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element

  if (elementContext === popper && offsetData) {
    var offset = offsetData[placement];
    Object.keys(overflowOffsets).forEach(function (key) {
      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;
      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';
      overflowOffsets[key] += offset[axis] * multiply;
    });
  }

  return overflowOffsets;
}

var DEFAULT_OPTIONS = {
  placement: 'bottom',
  modifiers: [],
  strategy: 'absolute'
};

function areValidElements() {
  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  return !args.some(function (element) {
    return !(element && typeof element.getBoundingClientRect === 'function');
  });
}

function popperGenerator(generatorOptions) {
  if (generatorOptions === void 0) {
    generatorOptions = {};
  }

  var _generatorOptions = generatorOptions,
      _generatorOptions$def = _generatorOptions.defaultModifiers,
      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,
      _generatorOptions$def2 = _generatorOptions.defaultOptions,
      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;
  return function createPopper(reference, popper, options) {
    if (options === void 0) {
      options = defaultOptions;
    }

    var state = {
      placement: 'bottom',
      orderedModifiers: [],
      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),
      modifiersData: {},
      elements: {
        reference: reference,
        popper: popper
      },
      attributes: {},
      styles: {}
    };
    var effectCleanupFns = [];
    var isDestroyed = false;
    var instance = {
      state: state,
      setOptions: function setOptions(setOptionsAction) {
        var options = typeof setOptionsAction === 'function' ? setOptionsAction(state.options) : setOptionsAction;
        cleanupModifierEffects();
        state.options = Object.assign({}, defaultOptions, state.options, options);
        state.scrollParents = {
          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],
          popper: listScrollParents(popper)
        }; // Orders the modifiers based on their dependencies and `phase`
        // properties

        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers

        state.orderedModifiers = orderedModifiers.filter(function (m) {
          return m.enabled;
        }); // Validate the provided modifiers so that the consumer will get warned

        runModifierEffects();
        return instance.update();
      },
      // Sync update – it will always be executed, even if not necessary. This
      // is useful for low frequency updates where sync behavior simplifies the
      // logic.
      // For high frequency updates (e.g. `resize` and `scroll` events), always
      // prefer the async Popper#update method
      forceUpdate: function forceUpdate() {
        if (isDestroyed) {
          return;
        }

        var _state$elements = state.elements,
            reference = _state$elements.reference,
            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements
        // anymore

        if (!areValidElements(reference, popper)) {

          return;
        } // Store the reference and popper rects to be read by modifiers


        state.rects = {
          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),
          popper: getLayoutRect(popper)
        }; // Modifiers have the ability to reset the current update cycle. The
        // most common use case for this is the `flip` modifier changing the
        // placement, which then needs to re-run all the modifiers, because the
        // logic was previously ran for the previous placement and is therefore
        // stale/incorrect

        state.reset = false;
        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier
        // is filled with the initial data specified by the modifier. This means
        // it doesn't persist and is fresh on each update.
        // To ensure persistent data, use `${name}#persistent`

        state.orderedModifiers.forEach(function (modifier) {
          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);
        });

        for (var index = 0; index < state.orderedModifiers.length; index++) {

          if (state.reset === true) {
            state.reset = false;
            index = -1;
            continue;
          }

          var _state$orderedModifie = state.orderedModifiers[index],
              fn = _state$orderedModifie.fn,
              _state$orderedModifie2 = _state$orderedModifie.options,
              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,
              name = _state$orderedModifie.name;

          if (typeof fn === 'function') {
            state = fn({
              state: state,
              options: _options,
              name: name,
              instance: instance
            }) || state;
          }
        }
      },
      // Async and optimistically optimized update – it will not be executed if
      // not necessary (debounced to run at most once-per-tick)
      update: debounce(function () {
        return new Promise(function (resolve) {
          instance.forceUpdate();
          resolve(state);
        });
      }),
      destroy: function destroy() {
        cleanupModifierEffects();
        isDestroyed = true;
      }
    };

    if (!areValidElements(reference, popper)) {

      return instance;
    }

    instance.setOptions(options).then(function (state) {
      if (!isDestroyed && options.onFirstUpdate) {
        options.onFirstUpdate(state);
      }
    }); // Modifiers have the ability to execute arbitrary code before the first
    // update cycle runs. They will be executed in the same order as the update
    // cycle. This is useful when a modifier adds some persistent data that
    // other modifiers need to use, but the modifier is run after the dependent
    // one.

    function runModifierEffects() {
      state.orderedModifiers.forEach(function (_ref3) {
        var name = _ref3.name,
            _ref3$options = _ref3.options,
            options = _ref3$options === void 0 ? {} : _ref3$options,
            effect = _ref3.effect;

        if (typeof effect === 'function') {
          var cleanupFn = effect({
            state: state,
            name: name,
            instance: instance,
            options: options
          });

          var noopFn = function noopFn() {};

          effectCleanupFns.push(cleanupFn || noopFn);
        }
      });
    }

    function cleanupModifierEffects() {
      effectCleanupFns.forEach(function (fn) {
        return fn();
      });
      effectCleanupFns = [];
    }

    return instance;
  };
}

var passive = {
  passive: true
};

function effect$2(_ref) {
  var state = _ref.state,
      instance = _ref.instance,
      options = _ref.options;
  var _options$scroll = options.scroll,
      scroll = _options$scroll === void 0 ? true : _options$scroll,
      _options$resize = options.resize,
      resize = _options$resize === void 0 ? true : _options$resize;
  var window = getWindow(state.elements.popper);
  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);

  if (scroll) {
    scrollParents.forEach(function (scrollParent) {
      scrollParent.addEventListener('scroll', instance.update, passive);
    });
  }

  if (resize) {
    window.addEventListener('resize', instance.update, passive);
  }

  return function () {
    if (scroll) {
      scrollParents.forEach(function (scrollParent) {
        scrollParent.removeEventListener('scroll', instance.update, passive);
      });
    }

    if (resize) {
      window.removeEventListener('resize', instance.update, passive);
    }
  };
} // eslint-disable-next-line import/no-unused-modules


const eventListeners = {
  name: 'eventListeners',
  enabled: true,
  phase: 'write',
  fn: function fn() {},
  effect: effect$2,
  data: {}
};

function popperOffsets(_ref) {
  var state = _ref.state,
      name = _ref.name;
  // Offsets are the actual position the popper needs to have to be
  // properly positioned near its reference element
  // This is the most basic placement, and will be adjusted by
  // the modifiers in the next step
  state.modifiersData[name] = computeOffsets({
    reference: state.rects.reference,
    element: state.rects.popper,
    strategy: 'absolute',
    placement: state.placement
  });
} // eslint-disable-next-line import/no-unused-modules


const popperOffsets$1 = {
  name: 'popperOffsets',
  enabled: true,
  phase: 'read',
  fn: popperOffsets,
  data: {}
};

var unsetSides = {
  top: 'auto',
  right: 'auto',
  bottom: 'auto',
  left: 'auto'
}; // Round the offsets to the nearest suitable subpixel based on the DPR.
// Zooming can change the DPR, but it seems to report a value that will
// cleanly divide the values into the appropriate subpixels.

function roundOffsetsByDPR(_ref) {
  var x = _ref.x,
      y = _ref.y;
  var win = window;
  var dpr = win.devicePixelRatio || 1;
  return {
    x: round(round(x * dpr) / dpr) || 0,
    y: round(round(y * dpr) / dpr) || 0
  };
}

function mapToStyles(_ref2) {
  var _Object$assign2;

  var popper = _ref2.popper,
      popperRect = _ref2.popperRect,
      placement = _ref2.placement,
      variation = _ref2.variation,
      offsets = _ref2.offsets,
      position = _ref2.position,
      gpuAcceleration = _ref2.gpuAcceleration,
      adaptive = _ref2.adaptive,
      roundOffsets = _ref2.roundOffsets;

  var _ref3 = roundOffsets === true ? roundOffsetsByDPR(offsets) : typeof roundOffsets === 'function' ? roundOffsets(offsets) : offsets,
      _ref3$x = _ref3.x,
      x = _ref3$x === void 0 ? 0 : _ref3$x,
      _ref3$y = _ref3.y,
      y = _ref3$y === void 0 ? 0 : _ref3$y;

  var hasX = offsets.hasOwnProperty('x');
  var hasY = offsets.hasOwnProperty('y');
  var sideX = left;
  var sideY = top;
  var win = window;

  if (adaptive) {
    var offsetParent = getOffsetParent(popper);
    var heightProp = 'clientHeight';
    var widthProp = 'clientWidth';

    if (offsetParent === getWindow(popper)) {
      offsetParent = getDocumentElement(popper);

      if (getComputedStyle$1(offsetParent).position !== 'static' && position === 'absolute') {
        heightProp = 'scrollHeight';
        widthProp = 'scrollWidth';
      }
    } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it


    offsetParent = offsetParent;

    if (placement === top || (placement === left || placement === right) && variation === end) {
      sideY = bottom; // $FlowFixMe[prop-missing]

      y -= offsetParent[heightProp] - popperRect.height;
      y *= gpuAcceleration ? 1 : -1;
    }

    if (placement === left || (placement === top || placement === bottom) && variation === end) {
      sideX = right; // $FlowFixMe[prop-missing]

      x -= offsetParent[widthProp] - popperRect.width;
      x *= gpuAcceleration ? 1 : -1;
    }
  }

  var commonStyles = Object.assign({
    position: position
  }, adaptive && unsetSides);

  if (gpuAcceleration) {
    var _Object$assign;

    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? "translate(" + x + "px, " + y + "px)" : "translate3d(" + x + "px, " + y + "px, 0)", _Object$assign));
  }

  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + "px" : '', _Object$assign2[sideX] = hasX ? x + "px" : '', _Object$assign2.transform = '', _Object$assign2));
}

function computeStyles(_ref4) {
  var state = _ref4.state,
      options = _ref4.options;
  var _options$gpuAccelerat = options.gpuAcceleration,
      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,
      _options$adaptive = options.adaptive,
      adaptive = _options$adaptive === void 0 ? true : _options$adaptive,
      _options$roundOffsets = options.roundOffsets,
      roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;

  var commonStyles = {
    placement: getBasePlacement(state.placement),
    variation: getVariation(state.placement),
    popper: state.elements.popper,
    popperRect: state.rects.popper,
    gpuAcceleration: gpuAcceleration
  };

  if (state.modifiersData.popperOffsets != null) {
    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {
      offsets: state.modifiersData.popperOffsets,
      position: state.options.strategy,
      adaptive: adaptive,
      roundOffsets: roundOffsets
    })));
  }

  if (state.modifiersData.arrow != null) {
    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {
      offsets: state.modifiersData.arrow,
      position: 'absolute',
      adaptive: false,
      roundOffsets: roundOffsets
    })));
  }

  state.attributes.popper = Object.assign({}, state.attributes.popper, {
    'data-popper-placement': state.placement
  });
} // eslint-disable-next-line import/no-unused-modules


const computeStyles$1 = {
  name: 'computeStyles',
  enabled: true,
  phase: 'beforeWrite',
  fn: computeStyles,
  data: {}
};

// and applies them to the HTMLElements such as popper and arrow

function applyStyles(_ref) {
  var state = _ref.state;
  Object.keys(state.elements).forEach(function (name) {
    var style = state.styles[name] || {};
    var attributes = state.attributes[name] || {};
    var element = state.elements[name]; // arrow is optional + virtual elements

    if (!isHTMLElement(element) || !getNodeName(element)) {
      return;
    } // Flow doesn't support to extend this property, but it's the most
    // effective way to apply styles to an HTMLElement
    // $FlowFixMe[cannot-write]


    Object.assign(element.style, style);
    Object.keys(attributes).forEach(function (name) {
      var value = attributes[name];

      if (value === false) {
        element.removeAttribute(name);
      } else {
        element.setAttribute(name, value === true ? '' : value);
      }
    });
  });
}

function effect$1(_ref2) {
  var state = _ref2.state;
  var initialStyles = {
    popper: {
      position: state.options.strategy,
      left: '0',
      top: '0',
      margin: '0'
    },
    arrow: {
      position: 'absolute'
    },
    reference: {}
  };
  Object.assign(state.elements.popper.style, initialStyles.popper);
  state.styles = initialStyles;

  if (state.elements.arrow) {
    Object.assign(state.elements.arrow.style, initialStyles.arrow);
  }

  return function () {
    Object.keys(state.elements).forEach(function (name) {
      var element = state.elements[name];
      var attributes = state.attributes[name] || {};
      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them

      var style = styleProperties.reduce(function (style, property) {
        style[property] = '';
        return style;
      }, {}); // arrow is optional + virtual elements

      if (!isHTMLElement(element) || !getNodeName(element)) {
        return;
      }

      Object.assign(element.style, style);
      Object.keys(attributes).forEach(function (attribute) {
        element.removeAttribute(attribute);
      });
    });
  };
} // eslint-disable-next-line import/no-unused-modules


const applyStyles$1 = {
  name: 'applyStyles',
  enabled: true,
  phase: 'write',
  fn: applyStyles,
  effect: effect$1,
  requires: ['computeStyles']
};

function distanceAndSkiddingToXY(placement, rects, offset) {
  var basePlacement = getBasePlacement(placement);
  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;

  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {
    placement: placement
  })) : offset,
      skidding = _ref[0],
      distance = _ref[1];

  skidding = skidding || 0;
  distance = (distance || 0) * invertDistance;
  return [left, right].indexOf(basePlacement) >= 0 ? {
    x: distance,
    y: skidding
  } : {
    x: skidding,
    y: distance
  };
}

function offset(_ref2) {
  var state = _ref2.state,
      options = _ref2.options,
      name = _ref2.name;
  var _options$offset = options.offset,
      offset = _options$offset === void 0 ? [0, 0] : _options$offset;
  var data = placements.reduce(function (acc, placement) {
    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);
    return acc;
  }, {});
  var _data$state$placement = data[state.placement],
      x = _data$state$placement.x,
      y = _data$state$placement.y;

  if (state.modifiersData.popperOffsets != null) {
    state.modifiersData.popperOffsets.x += x;
    state.modifiersData.popperOffsets.y += y;
  }

  state.modifiersData[name] = data;
} // eslint-disable-next-line import/no-unused-modules


const offset$1 = {
  name: 'offset',
  enabled: true,
  phase: 'main',
  requires: ['popperOffsets'],
  fn: offset
};

var hash$1 = {
  left: 'right',
  right: 'left',
  bottom: 'top',
  top: 'bottom'
};
function getOppositePlacement(placement) {
  return placement.replace(/left|right|bottom|top/g, function (matched) {
    return hash$1[matched];
  });
}

var hash = {
  start: 'end',
  end: 'start'
};
function getOppositeVariationPlacement(placement) {
  return placement.replace(/start|end/g, function (matched) {
    return hash[matched];
  });
}

function computeAutoPlacement(state, options) {
  if (options === void 0) {
    options = {};
  }

  var _options = options,
      placement = _options.placement,
      boundary = _options.boundary,
      rootBoundary = _options.rootBoundary,
      padding = _options.padding,
      flipVariations = _options.flipVariations,
      _options$allowedAutoP = _options.allowedAutoPlacements,
      allowedAutoPlacements = _options$allowedAutoP === void 0 ? placements : _options$allowedAutoP;
  var variation = getVariation(placement);
  var placements$1 = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {
    return getVariation(placement) === variation;
  }) : basePlacements;
  var allowedPlacements = placements$1.filter(function (placement) {
    return allowedAutoPlacements.indexOf(placement) >= 0;
  });

  if (allowedPlacements.length === 0) {
    allowedPlacements = placements$1;
  } // $FlowFixMe[incompatible-type]: Flow seems to have problems with two array unions...


  var overflows = allowedPlacements.reduce(function (acc, placement) {
    acc[placement] = detectOverflow(state, {
      placement: placement,
      boundary: boundary,
      rootBoundary: rootBoundary,
      padding: padding
    })[getBasePlacement(placement)];
    return acc;
  }, {});
  return Object.keys(overflows).sort(function (a, b) {
    return overflows[a] - overflows[b];
  });
}

function getExpandedFallbackPlacements(placement) {
  if (getBasePlacement(placement) === auto) {
    return [];
  }

  var oppositePlacement = getOppositePlacement(placement);
  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];
}

function flip(_ref) {
  var state = _ref.state,
      options = _ref.options,
      name = _ref.name;

  if (state.modifiersData[name]._skip) {
    return;
  }

  var _options$mainAxis = options.mainAxis,
      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,
      _options$altAxis = options.altAxis,
      checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,
      specifiedFallbackPlacements = options.fallbackPlacements,
      padding = options.padding,
      boundary = options.boundary,
      rootBoundary = options.rootBoundary,
      altBoundary = options.altBoundary,
      _options$flipVariatio = options.flipVariations,
      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,
      allowedAutoPlacements = options.allowedAutoPlacements;
  var preferredPlacement = state.options.placement;
  var basePlacement = getBasePlacement(preferredPlacement);
  var isBasePlacement = basePlacement === preferredPlacement;
  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));
  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {
    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {
      placement: placement,
      boundary: boundary,
      rootBoundary: rootBoundary,
      padding: padding,
      flipVariations: flipVariations,
      allowedAutoPlacements: allowedAutoPlacements
    }) : placement);
  }, []);
  var referenceRect = state.rects.reference;
  var popperRect = state.rects.popper;
  var checksMap = new Map();
  var makeFallbackChecks = true;
  var firstFittingPlacement = placements[0];

  for (var i = 0; i < placements.length; i++) {
    var placement = placements[i];

    var _basePlacement = getBasePlacement(placement);

    var isStartVariation = getVariation(placement) === start;
    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;
    var len = isVertical ? 'width' : 'height';
    var overflow = detectOverflow(state, {
      placement: placement,
      boundary: boundary,
      rootBoundary: rootBoundary,
      altBoundary: altBoundary,
      padding: padding
    });
    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;

    if (referenceRect[len] > popperRect[len]) {
      mainVariationSide = getOppositePlacement(mainVariationSide);
    }

    var altVariationSide = getOppositePlacement(mainVariationSide);
    var checks = [];

    if (checkMainAxis) {
      checks.push(overflow[_basePlacement] <= 0);
    }

    if (checkAltAxis) {
      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);
    }

    if (checks.every(function (check) {
      return check;
    })) {
      firstFittingPlacement = placement;
      makeFallbackChecks = false;
      break;
    }

    checksMap.set(placement, checks);
  }

  if (makeFallbackChecks) {
    // `2` may be desired in some cases – research later
    var numberOfChecks = flipVariations ? 3 : 1;

    var _loop = function _loop(_i) {
      var fittingPlacement = placements.find(function (placement) {
        var checks = checksMap.get(placement);

        if (checks) {
          return checks.slice(0, _i).every(function (check) {
            return check;
          });
        }
      });

      if (fittingPlacement) {
        firstFittingPlacement = fittingPlacement;
        return "break";
      }
    };

    for (var _i = numberOfChecks; _i > 0; _i--) {
      var _ret = _loop(_i);

      if (_ret === "break") break;
    }
  }

  if (state.placement !== firstFittingPlacement) {
    state.modifiersData[name]._skip = true;
    state.placement = firstFittingPlacement;
    state.reset = true;
  }
} // eslint-disable-next-line import/no-unused-modules


const flip$1 = {
  name: 'flip',
  enabled: true,
  phase: 'main',
  fn: flip,
  requiresIfExists: ['offset'],
  data: {
    _skip: false
  }
};

function getAltAxis(axis) {
  return axis === 'x' ? 'y' : 'x';
}

function within(min$1, value, max$1) {
  return max(min$1, min(value, max$1));
}

function preventOverflow(_ref) {
  var state = _ref.state,
      options = _ref.options,
      name = _ref.name;
  var _options$mainAxis = options.mainAxis,
      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,
      _options$altAxis = options.altAxis,
      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,
      boundary = options.boundary,
      rootBoundary = options.rootBoundary,
      altBoundary = options.altBoundary,
      padding = options.padding,
      _options$tether = options.tether,
      tether = _options$tether === void 0 ? true : _options$tether,
      _options$tetherOffset = options.tetherOffset,
      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;
  var overflow = detectOverflow(state, {
    boundary: boundary,
    rootBoundary: rootBoundary,
    padding: padding,
    altBoundary: altBoundary
  });
  var basePlacement = getBasePlacement(state.placement);
  var variation = getVariation(state.placement);
  var isBasePlacement = !variation;
  var mainAxis = getMainAxisFromPlacement(basePlacement);
  var altAxis = getAltAxis(mainAxis);
  var popperOffsets = state.modifiersData.popperOffsets;
  var referenceRect = state.rects.reference;
  var popperRect = state.rects.popper;
  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {
    placement: state.placement
  })) : tetherOffset;
  var data = {
    x: 0,
    y: 0
  };

  if (!popperOffsets) {
    return;
  }

  if (checkMainAxis || checkAltAxis) {
    var mainSide = mainAxis === 'y' ? top : left;
    var altSide = mainAxis === 'y' ? bottom : right;
    var len = mainAxis === 'y' ? 'height' : 'width';
    var offset = popperOffsets[mainAxis];
    var min$1 = popperOffsets[mainAxis] + overflow[mainSide];
    var max$1 = popperOffsets[mainAxis] - overflow[altSide];
    var additive = tether ? -popperRect[len] / 2 : 0;
    var minLen = variation === start ? referenceRect[len] : popperRect[len];
    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go
    // outside the reference bounds

    var arrowElement = state.elements.arrow;
    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {
      width: 0,
      height: 0
    };
    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();
    var arrowPaddingMin = arrowPaddingObject[mainSide];
    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want
    // to include its full size in the calculation. If the reference is small
    // and near the edge of a boundary, the popper can overflow even if the
    // reference is not overflowing as well (e.g. virtual elements with no
    // width or height)

    var arrowLen = within(0, referenceRect[len], arrowRect[len]);
    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - tetherOffsetValue : minLen - arrowLen - arrowPaddingMin - tetherOffsetValue;
    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + tetherOffsetValue : maxLen + arrowLen + arrowPaddingMax + tetherOffsetValue;
    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);
    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;
    var offsetModifierValue = state.modifiersData.offset ? state.modifiersData.offset[state.placement][mainAxis] : 0;
    var tetherMin = popperOffsets[mainAxis] + minOffset - offsetModifierValue - clientOffset;
    var tetherMax = popperOffsets[mainAxis] + maxOffset - offsetModifierValue;

    if (checkMainAxis) {
      var preventedOffset = within(tether ? min(min$1, tetherMin) : min$1, offset, tether ? max(max$1, tetherMax) : max$1);
      popperOffsets[mainAxis] = preventedOffset;
      data[mainAxis] = preventedOffset - offset;
    }

    if (checkAltAxis) {
      var _mainSide = mainAxis === 'x' ? top : left;

      var _altSide = mainAxis === 'x' ? bottom : right;

      var _offset = popperOffsets[altAxis];

      var _min = _offset + overflow[_mainSide];

      var _max = _offset - overflow[_altSide];

      var _preventedOffset = within(tether ? min(_min, tetherMin) : _min, _offset, tether ? max(_max, tetherMax) : _max);

      popperOffsets[altAxis] = _preventedOffset;
      data[altAxis] = _preventedOffset - _offset;
    }
  }

  state.modifiersData[name] = data;
} // eslint-disable-next-line import/no-unused-modules


const preventOverflow$1 = {
  name: 'preventOverflow',
  enabled: true,
  phase: 'main',
  fn: preventOverflow,
  requiresIfExists: ['offset']
};

var toPaddingObject = function toPaddingObject(padding, state) {
  padding = typeof padding === 'function' ? padding(Object.assign({}, state.rects, {
    placement: state.placement
  })) : padding;
  return mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));
};

function arrow(_ref) {
  var _state$modifiersData$;

  var state = _ref.state,
      name = _ref.name,
      options = _ref.options;
  var arrowElement = state.elements.arrow;
  var popperOffsets = state.modifiersData.popperOffsets;
  var basePlacement = getBasePlacement(state.placement);
  var axis = getMainAxisFromPlacement(basePlacement);
  var isVertical = [left, right].indexOf(basePlacement) >= 0;
  var len = isVertical ? 'height' : 'width';

  if (!arrowElement || !popperOffsets) {
    return;
  }

  var paddingObject = toPaddingObject(options.padding, state);
  var arrowRect = getLayoutRect(arrowElement);
  var minProp = axis === 'y' ? top : left;
  var maxProp = axis === 'y' ? bottom : right;
  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];
  var startDiff = popperOffsets[axis] - state.rects.reference[axis];
  var arrowOffsetParent = getOffsetParent(arrowElement);
  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;
  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is
  // outside of the popper bounds

  var min = paddingObject[minProp];
  var max = clientSize - arrowRect[len] - paddingObject[maxProp];
  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;
  var offset = within(min, center, max); // Prevents breaking syntax highlighting...

  var axisProp = axis;
  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);
}

function effect(_ref2) {
  var state = _ref2.state,
      options = _ref2.options;
  var _options$element = options.element,
      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element;

  if (arrowElement == null) {
    return;
  } // CSS selector


  if (typeof arrowElement === 'string') {
    arrowElement = state.elements.popper.querySelector(arrowElement);

    if (!arrowElement) {
      return;
    }
  }

  if (!contains(state.elements.popper, arrowElement)) {

    return;
  }

  state.elements.arrow = arrowElement;
} // eslint-disable-next-line import/no-unused-modules


const arrow$1 = {
  name: 'arrow',
  enabled: true,
  phase: 'main',
  fn: arrow,
  effect: effect,
  requires: ['popperOffsets'],
  requiresIfExists: ['preventOverflow']
};

function getSideOffsets(overflow, rect, preventedOffsets) {
  if (preventedOffsets === void 0) {
    preventedOffsets = {
      x: 0,
      y: 0
    };
  }

  return {
    top: overflow.top - rect.height - preventedOffsets.y,
    right: overflow.right - rect.width + preventedOffsets.x,
    bottom: overflow.bottom - rect.height + preventedOffsets.y,
    left: overflow.left - rect.width - preventedOffsets.x
  };
}

function isAnySideFullyClipped(overflow) {
  return [top, right, bottom, left].some(function (side) {
    return overflow[side] >= 0;
  });
}

function hide(_ref) {
  var state = _ref.state,
      name = _ref.name;
  var referenceRect = state.rects.reference;
  var popperRect = state.rects.popper;
  var preventedOffsets = state.modifiersData.preventOverflow;
  var referenceOverflow = detectOverflow(state, {
    elementContext: 'reference'
  });
  var popperAltOverflow = detectOverflow(state, {
    altBoundary: true
  });
  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);
  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);
  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);
  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);
  state.modifiersData[name] = {
    referenceClippingOffsets: referenceClippingOffsets,
    popperEscapeOffsets: popperEscapeOffsets,
    isReferenceHidden: isReferenceHidden,
    hasPopperEscaped: hasPopperEscaped
  };
  state.attributes.popper = Object.assign({}, state.attributes.popper, {
    'data-popper-reference-hidden': isReferenceHidden,
    'data-popper-escaped': hasPopperEscaped
  });
} // eslint-disable-next-line import/no-unused-modules


const hide$1 = {
  name: 'hide',
  enabled: true,
  phase: 'main',
  requiresIfExists: ['preventOverflow'],
  fn: hide
};

var defaultModifiers = [eventListeners, popperOffsets$1, computeStyles$1, applyStyles$1, offset$1, flip$1, preventOverflow$1, arrow$1, hide$1];
var createPopper = /*#__PURE__*/popperGenerator({
  defaultModifiers: defaultModifiers
}); // eslint-disable-next-line import/no-unused-modules

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const d$19=["bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","top","top-start","top-end"],m$1p={base:"esri-popover",open:"esri-popover--open"},u$1g={position:"fixed","z-index":"1000"};let _$p=class extends z$o{constructor(t,e){super(t,e),this._popper=null,this._contentNode=null,this._renderAttached=!1,this._rootNode=null,this.anchorElement=null,this.offset=[0,0],this.open=!1,this.renderContentFunction=null,this._afterRootCreate=t=>{this._rootNode=t;},this._afterContentCreate=t=>{this._contentNode=t;},this._updatePosition=()=>{r$1K(this._popper)&&this._popper.update();};}initialize(){this.when((()=>{this._projector.append(document.body,this.render),this._renderAttached=!0;})),this.own(i$2x(this,["open","anchorElement"],(()=>this._buildPopper())),i$2x(this,["placement","offset"],(()=>this._setPopperOptions())));}destroy(){this.owner=null,this.anchorElement=null,this.renderContentFunction=null,this._renderAttached&&(this._projector.detach(this.render),this._renderAttached=!1),r$1K(this._rootNode)&&(i$2q(this._rootNode),this._rootNode=null),this._contentNode=null,r$1K(this._popper)&&(this._popper.destroy(),this._popper=null);}set container(t){}set owner(t){this._set("owner",t);}get placement(){return "top"}set placement(t){-1!==d$19.indexOf(t)?this._override("placement",t):this._clearOverride("placement");}render(){var t;const{open:e,owner:o,renderContentFunction:r}=this;return n$2g("div",{afterCreate:this._afterRootCreate,class:this.classes(m$1p.base,e?m$1p.open:null),styles:u$1g},n$2g("div",{dir:u$1$(null==(t=this.owner)?void 0:t.container),afterCreate:this._afterContentCreate,afterUpdate:this._updatePosition},e&&(null==r?void 0:r.call(o))))}_buildPopper(){r$1K(this._popper)&&(this._popper.destroy(),this._popper=null);const t=this._contentNode;if(t$1T(t))return;if(!this.open||!this.renderContentFunction)return;const o=this._getAnchor();o&&(this._popper=createPopper(o,t),this._setPopperOptions());}_setPopperOptions(){const{placement:t,offset:e,_popper:o}=this;t$1T(o)||(o.setOptions({placement:t,modifiers:[{name:"offset",options:{offset:e}}]}),o.forceUpdate());}_getAnchor(){const{anchorElement:t}=this;return e$1J("function"==typeof t?t():t)}};e$25([d$1T()],_$p.prototype,"anchorElement",void 0),e$25([d$1T()],_$p.prototype,"container",null),e$25([d$1T()],_$p.prototype,"offset",void 0),e$25([d$1T()],_$p.prototype,"open",void 0),e$25([d$1T()],_$p.prototype,"owner",null),e$25([d$1T()],_$p.prototype,"placement",null),e$25([d$1T()],_$p.prototype,"renderContentFunction",void 0),_$p=e$25([i$2z("esri.widgets.support.Popover")],_$p);const f$Z=_$p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h$W={base:"esri-button-menu",content:"esri-button-menu__content",contentWrapper:"esri-button-menu__content-wrapper",itemWrapper:"esri-button-menu__item-wrapper",label:"esri-button-menu__label",icon:"esri-button-menu__icon",item:"esri-button-menu__item",itemLabel:"esri-button-menu__item-label",itemLabelContent:"esri-button-menu__item-label-content",selectableMenuItem:"esri-button-menu__item--selectable",selectedMenuItem:"esri-button-menu__item--selected",checkbox:"esri-button-menu__checkbox",embeddedContentWrapper:"esri-button-menu__embedded-content-wrapper",button:"esri-button-menu__button",buttonSelected:"esri-button-menu__button--selected",defaultIconClass:"esri-icon-menu",widget:"esri-widget"};let b$I=class extends(a$2w(z$o)){constructor(e,t){super(e,t),this._menuContentNode=null,this._popover=null,this._rootNode=null,this.iconClass=null,this.items=null,this.label=null,this.open=!1,this.viewModel=new i$1C,this._handleOutsideClick=this._handleOutsideClick.bind(this);}postInitialize(){this._popover=new f$Z({owner:this,open:!!this.open,placement:d$1N(this.container)?"bottom-start":"bottom-end",renderContentFunction:this.renderMenuContent,anchorElement:this._rootNode}),this.handles.add([f$1B(this,"open",(e=>this._popover.set("open",e)))]),document.addEventListener("click",this._handleOutsideClick);}destroy(){var e;null==(e=this._popover)||e.destroy(),this._popover=null,document.removeEventListener("click",this._handleOutsideClick);}_handleOutsideClick(e){var t,n;if(!this.open||!this._rootNode||!this._menuContentNode)return;const o=e.target;null!=(t=this._menuContentNode)&&t.contains(o)||null!=(n=this._rootNode)&&n.contains(o)||(this.open=!1);}render(){return n$2g("div",{afterCreate:this._afterRootNodeCreate,bind:this,"data-node-ref":"_rootNode",class:this.classes(h$W.base,h$W.widget),key:"menu"},this.renderMenuButton())}renderMenuButton(){const{iconClass:e,id:t,label:n,open:o}=this,s=this.classes([h$W.button,e||h$W.defaultIconClass,o?h$W.buttonSelected:null]);return n$2g("button",{"aria-pressed":o.toString(),"aria-controls":`${t}-menu`,"aria-expanded":o.toString(),"aria-haspopup":"true","aria-label":n,bind:this,class:s,id:`${t}-button`,title:n,selected:o,onclick:this._toggleOpen,tabindex:"0",type:"button"})}renderMenuContent(){var e;const{id:t,open:n}=this;return n$2g("div",{afterCreate:this._afterMenuContentNodeCreate,bind:this,class:h$W.content,"data-node-ref":"_menuContentNode",key:"esri-button-menu-content",hidden:!n},n$2g("ul",{"aria-labelledby":`${t}-button`,bind:this,class:h$W.itemWrapper,id:`${t}-menu`,role:"menu"},(null==(e=this.items)?void 0:e.length)&&this.renderItems()))}renderItems(){var e;return null==(e=this.items)?void 0:e.map(((e,t)=>this.renderItem(e,t)))}renderItem(e,t,n){var s;const i=r$1K(n)?`${this.id}-menu-item-${t}-${n}`:`${this.id}-menu-item-${t}`,r=`${i}-label`,a=this.classes(h$W.item,e.selectionEnabled?h$W.selectableMenuItem:null,e.selectionEnabled&&e.selected?h$W.selectedMenuItem:null);return n$2g("li",{afterCreate:this._afterMenuItemCreate,bind:this,class:a,"data-item-index":t,"data-item-subIndex":n,for:i,key:i,onkeydown:t=>this._handleMenuItemKeydown(t,e),onclick:t=>this._handleMenuItemInteraction(t,e),role:"menuitem",tabindex:"0"},n$2g("input",{disabled:!0,checked:e.selected,class:h$W.checkbox,id:i,name:i,tabindex:"-1",type:"checkbox"}),n$2g("label",{bind:this,class:this.classes(h$W.button,h$W.itemLabel),for:i,id:r},n$2g("span",{class:this.classes(h$W.icon,e.iconClass),"aria-hidden":"true"}),n$2g("span",{class:h$W.itemLabelContent},e.label)),n$2g("ul",{"aria-labelledby":r,class:h$W.embeddedContentWrapper,id:`${this.id}-submenu`,role:"menu"},null==e||null==(s=e.items)?void 0:s.map(((e,n)=>this.renderItem(e,t,n)))))}_afterRootNodeCreate(e){var t;this._rootNode=e,null==(t=this._popover)||t.set("anchorElement",(()=>e));}_handleMenuItemInteraction(e,t){t.selected=!t.selected,t.open=!(!t.selected||!t.items),t.autoCloseMenu&&this.set("open",!1),t.clickFunction&&t.clickFunction({event:e,item:t}),e.stopPropagation();}_handleMenuItemKeydown(e,n){const o=i$2L(e);y$1t(o)&&this._handleMenuItemInteraction(e,n),"Escape"===o&&(this.open=!1,e.preventDefault(),e.stopPropagation());}_afterMenuContentNodeCreate(e){this._menuContentNode=e,e.focus();}_toggleOpen(){this.open=!this.open;}_afterMenuItemCreate(e){0===e["data-item-index"]&&e.focus();}};e$25([d$1T()],b$I.prototype,"iconClass",void 0),e$25([o$1K("viewModel.items")],b$I.prototype,"items",void 0),e$25([d$1T()],b$I.prototype,"label",void 0),e$25([o$1K("viewModel.open")],b$I.prototype,"open",void 0),e$25([d$1T()],b$I.prototype,"viewModel",void 0),b$I=e$25([i$2z("esri.widgets.FeatureTable.Grid.support.ButtonMenu")],b$I);const _$o=b$I;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const d$18={sortAscIcon:"esri-icon-arrow-up",sortDescIcon:"esri-icon-arrow-down",menuContainer:"esri-column__menu-container",menuIcon:"esri-icon-handle-horizontal",sorter:"esri-column__sorter"},a$1Y={keyboardSort1:"Enter",keyboardSort2:"Spacebar"};let u$1f=class extends(a$2w(n$2D.EventedAccessor)){constructor(t){super(t),this._menuContainer=null,this.activeRowIndex=null,this.autoWidth=!1,this.cellValueFormatFunction=({value:t})=>L$v.sanitize(t),this.flexGrow=1,this.footerRenderFunction=null,this.frozen=!1,this.grid=null,this.header=null,this.headerRenderFunction=t=>{const{root:e}=t,{header:o,headerMenuEnabled:n,path:i,sortable:r}=this;if(this.removeCellContent(e),r)return this.headerSorterRenderFunction(t),void(n&&this.headerMenuRenderFunction(t));n&&this.headerMenuRenderFunction(t);const s=o||i;e.innerHTML!==s&&(e.innerHTML=s);},this.headerMenuRenderFunction=({root:t})=>{var e,o;(null==(e=this.menu)||null==(o=e.items)?void 0:o.length)&&t.appendChild(this._menuContainer);},this.headerSorterRenderFunction=({root:t})=>{var e;const{header:o,path:n,sortElement:i}=this,r=o||n;if(!i)return void(t.innerHTML=r);i.innerHTML!==r&&i.setAttribute("innerHTML",r),t.appendChild(i);const s=null==(e=this.grid)?void 0:e.getSlotElementByName(t.slot),l=null==s?void 0:s.parentElement;l&&!l.onkeydown&&(l.onkeydown=({key:t})=>{t!==a$1Y.keyboardSort1&&t!==a$1Y.keyboardSort2||i.click();});},this.hidden=!1,this.headerMenuEnabled=!0,this.menu=null,this.menuConfig=null,this.messages=null,this.messagesCommon=null,this.renderFunction=({root:t,column:e,rowData:o})=>{const n=this.getCellValue(e,o),i=this.cellValueFormatFunction({column:e,rowData:o,value:n});t.innerHTML!==i&&(t.innerHTML=i);},this.resizable=!0,this.sortable=!0,this.sortElement=null,this.textAlign="start",this.width=200;}initialize(){const{messages:t,path:e}=this;this._set("sortElement",this.createSortElement()),this.sortElement.setAttribute("path",e),this._menuContainer=document.createElement("div"),this._menuContainer.classList.add(d$18.menuContainer),this.menu=new _$o({label:null==t?void 0:t.options,iconClass:d$18.menuIcon,...this.menuConfig}),this.menu.container=this._menuContainer,this.menu.set("items",this.getMenuItems()),this.handles.add([f$1B(this,"hidden",(()=>{var t;return null==(t=this.menu)?void 0:t.set("open",!1)}))]);}destroy(){var t;null==(t=this.menu)||t.destroy();}set direction(t){this.sortable&&(this.sortElement&&(t?this.sortElement.direction!==t&&this.sortElement.setAttribute("direction",t):this.sortElement.removeAttribute("direction")),this._set("direction",t));}get direction(){return this._get("direction")||null}set path(t){this.sortElement&&this.sortElement.path!==t&&this.sortElement.setAttribute("path",t),this._set("path",t);}getMenuItems(){const{menuConfig:t,sortable:e}=this,o=null==t?void 0:t.items,n=this.getSortMenuItems(),i=[];return e&&i.push(...n),(null==o?void 0:o.length)&&i.push(...o),i.length?i:null}getSortMenuItems(){const{messages:t}=this;return [{selected:"asc"===this.direction,iconClass:d$18.sortAscIcon,label:null==t?void 0:t.sortAsc,autoCloseMenu:!0,clickFunction:()=>this.set("direction","asc"!==this.direction?"asc":null)},{selected:"desc"===this.direction,iconClass:d$18.sortDescIcon,label:null==t?void 0:t.sortDesc,autoCloseMenu:!0,clickFunction:()=>this.set("direction","desc"!==this.direction?"desc":null)}]}getCellValue(t,e){var o;return null!=(o=null==e?void 0:e.item[null==t?void 0:t.path])?o:""}createSortElement(){const{direction:t,header:e,path:o}=this,n=e||o,i=document.createElement("vaadin-grid-sorter");return i.classList.add(d$18.sorter),i.setAttribute("path",o),i.setAttribute("title",n),i.innerHTML=n,t&&i.setAttribute("direction",t),i.addEventListener("direction-changed",(()=>{this.direction!==i.direction&&this._set("direction",i.direction);})),i}removeCellContent(t){if(t)for(;t.firstChild;)try{t.removeChild(t.firstChild);}catch(e){}}};e$25([d$1T()],u$1f.prototype,"activeRowIndex",void 0),e$25([d$1T()],u$1f.prototype,"autoWidth",void 0),e$25([d$1T()],u$1f.prototype,"cellValueFormatFunction",void 0),e$25([d$1T()],u$1f.prototype,"direction",null),e$25([d$1T()],u$1f.prototype,"flexGrow",void 0),e$25([d$1T()],u$1f.prototype,"footerRenderFunction",void 0),e$25([d$1T()],u$1f.prototype,"frozen",void 0),e$25([d$1T()],u$1f.prototype,"grid",void 0),e$25([d$1T()],u$1f.prototype,"header",void 0),e$25([d$1T()],u$1f.prototype,"headerRenderFunction",void 0),e$25([d$1T()],u$1f.prototype,"headerMenuRenderFunction",void 0),e$25([d$1T()],u$1f.prototype,"headerSorterRenderFunction",void 0),e$25([d$1T()],u$1f.prototype,"hidden",void 0),e$25([d$1T()],u$1f.prototype,"headerMenuEnabled",void 0),e$25([d$1T()],u$1f.prototype,"menu",void 0),e$25([d$1T()],u$1f.prototype,"menuConfig",void 0),e$25([d$1T()],u$1f.prototype,"messages",void 0),e$25([d$1T()],u$1f.prototype,"messagesCommon",void 0),e$25([d$1T()],u$1f.prototype,"path",null),e$25([d$1T()],u$1f.prototype,"renderFunction",void 0),e$25([d$1T()],u$1f.prototype,"resizable",void 0),e$25([d$1T()],u$1f.prototype,"sortable",void 0),e$25([d$1T({readOnly:!0})],u$1f.prototype,"sortElement",void 0),e$25([d$1T()],u$1f.prototype,"textAlign",void 0),e$25([d$1T()],u$1f.prototype,"width",void 0),u$1f=e$25([i$2z("esri.widgets.FeatureTable.Grid.Column")],u$1f);const c$1U=u$1f;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$1m={attachmentsColumn:"esri-feature-table__column--attachments"};let a$1X=class extends c$1U{constructor(t){super(t),this.header="",this.path="EsriFeatureTableAttachmentsColumn",this.renderFunction=({root:t,rowData:e})=>{const r=this._countFromItem(e.item).toString();t.innerHTML=`<div class="${s$1m.attachmentsColumn}">${r}</div>`;},this.sortable=!1,this.textAlign="center";}_countFromItem(t){return t.attachments&&t.attachments.length||0}};e$25([d$1T({constructOnly:!0})],a$1X.prototype,"header",void 0),e$25([d$1T({readOnly:!0})],a$1X.prototype,"path",void 0),e$25([d$1T()],a$1X.prototype,"renderFunction",void 0),e$25([d$1T({readOnly:!0})],a$1X.prototype,"sortable",void 0),e$25([d$1T({readOnly:!0})],a$1X.prototype,"textAlign",void 0),a$1X=e$25([i$2z("esri.widgets.FeatureTable.AttachmentsColumn")],a$1X);const n$1S=a$1X;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$_;let p$21=t$_=class extends a$2N{constructor(r){super(r),this.name=null,this.code=null;}clone(){return new t$_({name:this.name,code:this.code})}};e$25([d$1T({type:String,json:{write:!0}})],p$21.prototype,"name",void 0),e$25([d$1T({type:[String,Number],json:{write:!0}})],p$21.prototype,"code",void 0),p$21=t$_=e$25([i$2z("esri.layers.support.CodedValue")],p$21);const c$1T=p$21;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$1S=new o$1J({inherited:"inherited",codedValue:"coded-value",range:"range"});let a$1W=class extends a$2N{constructor(r){super(r),this.name=null,this.type=null;}};e$25([d$1T({type:String,json:{write:!0}})],a$1W.prototype,"name",void 0),e$25([r$12(c$1S)],a$1W.prototype,"type",void 0),a$1W=e$25([i$2z("esri.layers.support.Domain")],a$1W);const i$1B=a$1W;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$17;let p$20=d$17=class extends i$1B{constructor(e){super(e),this.codedValues=null,this.type="coded-value";}getName(e){let o=null;if(this.codedValues){const r=String(e);this.codedValues.some((e=>(String(e.code)===r&&(o=e.name),!!o)));}return o}clone(){return new d$17({codedValues:l$2w(this.codedValues),name:this.name})}};e$25([d$1T({type:[c$1T],json:{write:!0}})],p$20.prototype,"codedValues",void 0),e$25([r$12({codedValue:"coded-value"})],p$20.prototype,"type",void 0),p$20=d$17=e$25([i$2z("esri.layers.support.CodedValueDomain")],p$20);const u$1e=p$20;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$Z;let p$1$=t$Z=class extends i$1B{constructor(r){super(r),this.type="inherited";}clone(){return new t$Z}};e$25([r$12({inherited:"inherited"})],p$1$.prototype,"type",void 0),p$1$=t$Z=e$25([i$2z("esri.layers.support.InheritedDomain")],p$1$);const c$1R=p$1$;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$1l;let n$1R=s$1l=class extends i$1B{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range";}clone(){return new s$1l({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};e$25([d$1T({type:Number,json:{type:[Number],read:{source:"range",reader:(e,r)=>r.range&&r.range[1]},write:{enabled:!1,overridePolicy(){return {enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,r,a){r[a]=[this.minValue||0,e];}}}})],n$1R.prototype,"maxValue",void 0),e$25([d$1T({type:Number,json:{type:[Number],read:{source:"range",reader:(e,r)=>r.range&&r.range[0]},write:{target:"range",writer(e,r,a){r[a]=[e,this.maxValue||0];}}}})],n$1R.prototype,"minValue",void 0),e$25([r$12({range:"range"})],n$1R.prototype,"type",void 0),n$1R=s$1l=e$25([i$2z("esri.layers.support.RangeDomain")],n$1R);const i$1A=n$1R;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const g$N={type:"number"},b$H={type:"number",intlOptions:{notation:"scientific"}},_$n={type:"date",intlOptions:{day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}};let F$e=class extends p$3a{constructor(e){super(e),this.arcade=null,this.config=null,this.feature=null,this.field=null,this.initialFeature=null,this.layer=null,this.description=null,this.editorType=null,this.error=null,this.format=null,this.group=null,this.hint=null,this.messages=null,this.name=null;}get compiledFunc(){var e;const{arcade:t}=this;return t&&t.arcadeUtils.createFunction(null==(e=this.config)?void 0:e.visibilityExpression)}get compiledRequiredFunc(){var e;const{arcade:t}=this;return t&&t.arcadeUtils.createFunction(null==(e=this.config)?void 0:e.requiredExpression)}get evaluatedRequirement(){const e=this.compiledRequiredFunc;if(!e)return null;const{arcade:t}=this;return t.arcadeUtils.executeFunction(e,t.arcadeUtils.createExecContext(this.feature))}get evaluatedVisibility(){const e=this.compiledFunc;if(!e)return null;const{arcade:t}=this;return t.arcadeUtils.executeFunction(e,t.arcadeUtils.createExecContext(this.feature))}get domain(){var e,t;const{typeIdField:i}=this.layer,r=i===this.name,n=null==(e=this.field)?void 0:e.domain;if(r&&!n)return new u$1e({name:"__internal-type-based-coded-value-domain__",codedValues:this.layer.types.map((({id:e,name:t})=>({code:e,name:t})))});const{feature:l}=this,s=i&&this.layer.getFieldDomain(this.name,{feature:l})||n,a=null==(t=this.config)?void 0:t.domain;return this._isDomainCompatible(a)?a:s}get editable(){var e;return this.layer.capabilities.operations.supportsEditing&&this.field.editable&&!1!==(null==(e=this.config)?void 0:e.editable)}get errorMessage(){return this._toErrorMessage()}get includeTime(){var e;const t=null==(e=this.config)?void 0:e.includeTime;return void 0===t||t}get label(){var e;return (null==(e=this.config)?void 0:e.label)||this.field.alias||this.field.name}get maxLength(){var e,t;const i=-1;if("date"===this.type)return i;const r=null==(e=this.field)?void 0:e.length,o=null==(t=this.config)?void 0:t.maxLength;return !isNaN(o)&&o>=i&&(r===i||o<=r)?o:r}get minLength(){var e,t;const i=-1;if("date"===this.type)return i;const r=null==(e=this.field)?void 0:e.length,o=null==(t=this.config)?void 0:t.minLength;return !isNaN(o)&&o>=i&&(r===i||o<=r)?o:i}get required(){var e,t;if(!this.editable)return !1;if(!(null==(e=this.field)?void 0:e.nullable))return !0;if("boolean"==typeof this.evaluatedRequirement)return this.evaluatedRequirement;return !0===(null==(t=this.config)?void 0:t.required)}get type(){const{field:e}=this;return B$c(e)?"number":H$a(e)?"text":K$9(e)?"date":"unsupported"}get valid(){const e=this.editable?this._validate():null;return this._set("error",e),null===e}get value(){return this._get("value")}set value(e){this.notifyChange("evaluatedVisibility"),this._set("value",e);}get visible(){if(this._isEditorField())return !1;return "boolean"==typeof this.evaluatedVisibility?this.evaluatedVisibility:!!this.config||this._shownByDefault()}_isDomainCompatible(e){const{field:t}=this;if("coded-value"===(null==e?void 0:e.type)){const i=typeof e.codedValues[0].code;if("string"===i&&H$a(t)||"number"===i&&B$c(t))return !0}return !!("range"===(null==e?void 0:e.type)&&B$c(t)||K$9(t))}_validate(){const{domain:e,field:t,initialFeature:i,minLength:r,required:o,type:l,valid:s,value:a}=this,u=o&&null===a,d=void 0!==s;return !u&&i.getAttribute(t.name)===a&&d?null:"text"===l&&r>-1&&"string"==typeof a&&a.length<r?"length-validation-error::too-short":e?null!==a||o?a$2u(e,a):null:u?ee$5.INVALID_TYPE:ie$4(t,a)}_shownByDefault(){var e;const t=null==(e=this.field)?void 0:e.type;return "oid"!==t&&"global-id"!==t&&!this._isGeometryField()}_isEditorField(){return O$i(this.layer).indexOf(this.name)>-1}_isGeometryField(){return L$n(this.layer).indexOf(this.name)>-1}_toErrorMessage(){const{domain:e,field:t,messages:i,minLength:r,value:o,required:n,type:a}=this,u=this.error;if(n&&null===o)return i.validationErrors.cannotBeNull;if(u===e$1e.VALUE_OUT_OF_RANGE||u===Z$8.OUT_OF_RANGE){const r=r$13(e)||re$5(t);return s$22(i.validationErrors.outsideRange,r,{format:{max:"date"===a?_$n:r.isInteger?g$N:b$H,min:"date"===a?_$n:r.isInteger?g$N:b$H}})}return u===e$1e.INVALID_CODED_VALUE?i.validationErrors.invalidCodedValue:u===ee$5.INVALID_TYPE?i.validationErrors.invalidType:"length-validation-error::too-short"===u?s$22(i.validationErrors.tooShort,{min:r}):null}};e$25([d$1T()],F$e.prototype,"arcade",void 0),e$25([d$1T()],F$e.prototype,"compiledFunc",null),e$25([d$1T()],F$e.prototype,"compiledRequiredFunc",null),e$25([d$1T()],F$e.prototype,"config",void 0),e$25([d$1T()],F$e.prototype,"evaluatedRequirement",null),e$25([d$1T()],F$e.prototype,"evaluatedVisibility",null),e$25([d$1T()],F$e.prototype,"feature",void 0),e$25([d$1T()],F$e.prototype,"field",void 0),e$25([d$1T()],F$e.prototype,"initialFeature",void 0),e$25([d$1T()],F$e.prototype,"layer",void 0),e$25([d$1T({aliasOf:"config.description"})],F$e.prototype,"description",void 0),e$25([d$1T()],F$e.prototype,"domain",null),e$25([d$1T()],F$e.prototype,"editable",null),e$25([d$1T({aliasOf:"config.editorType"})],F$e.prototype,"editorType",void 0),e$25([d$1T({readOnly:!0})],F$e.prototype,"error",void 0),e$25([d$1T({dependsOn:["error","messages","value"]})],F$e.prototype,"errorMessage",null),e$25([d$1T({aliasOf:"config.format"})],F$e.prototype,"format",void 0),e$25([d$1T()],F$e.prototype,"group",void 0),e$25([d$1T({aliasOf:"config.hint"})],F$e.prototype,"hint",void 0),e$25([d$1T()],F$e.prototype,"includeTime",null),e$25([d$1T()],F$e.prototype,"label",null),e$25([d$1T()],F$e.prototype,"maxLength",null),e$25([d$1T()],F$e.prototype,"minLength",null),e$25([d$1T()],F$e.prototype,"messages",void 0),e$25([d$1T({aliasOf:"field.name"})],F$e.prototype,"name",void 0),e$25([d$1T()],F$e.prototype,"required",null),e$25([d$1T()],F$e.prototype,"type",null),e$25([d$1T()],F$e.prototype,"valid",null),e$25([d$1T({value:null})],F$e.prototype,"value",null),e$25([d$1T()],F$e.prototype,"visible",null),F$e=e$25([i$2z("esri.widgets.FeatureForm.InputField")],F$e);const E$j=F$e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$1z={input:"esri-editor-column__cell-input",inputContainer:"esri-editor-column__cell-input--container"},a$1V={showInput:"Enter",hideInput:"Escape"};let u$1d=class extends c$1U{constructor(t){super(t),this.activeEditInfo=null,this.cellValueValidatorFunction=({oldValue:t,value:e})=>t!==e,this.editable=!1,this.inputRenderFunction=({root:t,column:e,rowData:n})=>{var o,i;if(null!=(o=this.activeEditInfo)&&o.updating)return;if(!this.editable)return;const a=this.getCellValue(e,n),u=this.createInputElement({root:t,column:e,rowData:n,value:a});this._set("activeEditInfo",{column:e,input:u,root:t,rowData:n,updating:!0,oldValue:a});const r=this.createInputContainer();r.appendChild(u),this.removeCellContent(t),t.appendChild(r),u.focus(),u instanceof HTMLInputElement&&u.select(),null==(i=this.grid)||i.notifyResize();},this.loadingMessage="",this.inputType="text",this.maxLength=null,this.parseInputValueFunction=({input:t})=>t.value,this.renderFunction=t=>{var e;const{root:n,column:o,rowData:i}=t,{activeEditInfo:u}=this;if(u&&u.updating)return;const r=this.getCellValue(o,i),l=this.cellValueFormatFunction({column:o,rowData:i,value:r});n.onclick=()=>n.focus(),n.ondblclick=()=>this.inputRenderFunction(t),n.ontouchend=()=>this.inputRenderFunction(t);const s=null==(e=this.grid)?void 0:e.getSlotElementByName(n.slot),c=null==s?void 0:s.parentElement;c&&!c.onkeydown&&(c.onkeydown=e=>{e.key!==a$1V.showInput||this.activeEditInfo||this.inputRenderFunction(t),e.key===a$1V.hideInput&&this.activeEditInfo&&this.cancel();}),(null==l?void 0:l.toString())!==n.innerHTML&&(n.innerHTML=l);},this.required=!1,this.store=null,this.updateRowItemFunction=({rowData:t,column:e,value:n})=>{t.item[e.path]=n;},this.updateStoreItemFunction=({rowData:t,column:e,value:n})=>{var o;return null==(o=this.store)?void 0:o.updateItem({index:t.index,name:e.path,value:n})};}cancel(){var t;const{activeEditInfo:e}=this;if(!e)return;const{column:n,root:o,rowData:i,oldValue:a}=e;this._set("activeEditInfo",null);const u=this.cellValueFormatFunction({column:n,rowData:i,value:a});o.innerHTML=u,null==(t=this.grid)||t.notifyResize();}createInputContainer(){const t=document.createElement("div");return t.classList.add(i$1z.inputContainer),t}createInputElement({value:t}){const e=document.createElement("input");return e.classList.add(i$1z.input),e.maxLength=this.maxLength,e.type=this.inputType,e.value=t,e.onblur=()=>{e.onblur=null,this.submit();},e}async submit(){var t;const{activeEditInfo:e}=this;if(!e)return;const{column:n,input:o,root:i,rowData:a,oldValue:u}=e,r=this.parseInputValueFunction({input:o,column:n,rowData:a});if(!this.cellValueValidatorFunction({value:r,oldValue:u,column:n,rowData:a}))this.cancel();else {i.innerHTML=this.loadingMessage,null==(t=this.grid)||t.notifyResize();try{var l;await this.updateStoreItemFunction({rowData:a,column:n,value:r}),this.updateRowItemFunction({rowData:a,column:n,value:r});const t=this.getCellValue(n,a),e=this.cellValueFormatFunction({column:n,rowData:a,value:t});i.innerHTML=e,this.emit("value-change",{column:n,rowData:a,value:t}),this._set("activeEditInfo",null),null==(l=this.grid)||l.notifyResize();}catch(s){this.cancel();}}}};e$25([d$1T({readOnly:!0})],u$1d.prototype,"activeEditInfo",void 0),e$25([d$1T()],u$1d.prototype,"cellValueValidatorFunction",void 0),e$25([d$1T()],u$1d.prototype,"editable",void 0),e$25([d$1T()],u$1d.prototype,"inputRenderFunction",void 0),e$25([d$1T({constructOnly:!0})],u$1d.prototype,"loadingMessage",void 0),e$25([d$1T()],u$1d.prototype,"inputType",void 0),e$25([d$1T()],u$1d.prototype,"maxLength",void 0),e$25([d$1T()],u$1d.prototype,"parseInputValueFunction",void 0),e$25([d$1T()],u$1d.prototype,"renderFunction",void 0),e$25([d$1T()],u$1d.prototype,"required",void 0),e$25([d$1T()],u$1d.prototype,"store",void 0),e$25([d$1T()],u$1d.prototype,"updateRowItemFunction",void 0),e$25([d$1T()],u$1d.prototype,"updateStoreItemFunction",void 0),u$1d=e$25([i$2z("esri.widgets.FeatureTable.EditorColumn")],u$1d);const r$U=u$1d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$1o=new Map([["ar",()=>import('./ar.js').then(function (n) { return n.a; })],["ar-dz",()=>import('./ar-dz.js').then(function (n) { return n.a; })],["ar-kw",()=>import('./ar-kw.js').then(function (n) { return n.a; })],["ar-ly",()=>import('./ar-ly.js').then(function (n) { return n.a; })],["ar-ma",()=>import('./ar-ma.js').then(function (n) { return n.a; })],["ar-sa",()=>import('./ar-sa.js').then(function (n) { return n.a; })],["ar-tn",()=>import('./ar-tn.js').then(function (n) { return n.a; })],["bg",()=>import('./bg.js').then(function (n) { return n.b; })],["bs",()=>import('./bs.js').then(function (n) { return n.b; })],["ca",()=>import('./ca.js').then(function (n) { return n.c; })],["cs",()=>import('./cs.js').then(function (n) { return n.c; })],["da",()=>import('./da.js').then(function (n) { return n.d; })],["de",()=>import('./de.js').then(function (n) { return n.d; })],["de-at",()=>import('./de-at.js').then(function (n) { return n.d; })],["de-ch",()=>import('./de-ch.js').then(function (n) { return n.d; })],["el",()=>import('./el.js').then(function (n) { return n.e; })],["en-au",()=>import('./en-au.js').then(function (n) { return n.e; })],["en-ca",()=>import('./en-ca.js').then(function (n) { return n.e; })],["en-gb",()=>import('./en-gb.js').then(function (n) { return n.e; })],["en-ie",()=>import('./en-ie.js').then(function (n) { return n.e; })],["en-il",()=>import('./en-il.js').then(function (n) { return n.e; })],["en-in",()=>import('./en-in.js').then(function (n) { return n.e; })],["en-nz",()=>import('./en-nz.js').then(function (n) { return n.e; })],["en-sg",()=>import('./en-sg.js').then(function (n) { return n.e; })],["es",()=>import('./es.js').then(function (n) { return n.e; })],["es-do",()=>import('./es-do.js').then(function (n) { return n.e; })],["es-mx",()=>import('./es-mx.js').then(function (n) { return n.e; })],["es-us",()=>import('./es-us.js').then(function (n) { return n.e; })],["et",()=>import('./et.js').then(function (n) { return n.e; })],["fi",()=>import('./fi.js').then(function (n) { return n.f; })],["fr",()=>import('./fr.js').then(function (n) { return n.f; })],["fr-ca",()=>import('./fr-ca.js').then(function (n) { return n.f; })],["fr-ch",()=>import('./fr-ch.js').then(function (n) { return n.f; })],["he",()=>import('./he.js').then(function (n) { return n.h; })],["hr",()=>import('./hr.js').then(function (n) { return n.h; })],["hu",()=>import('./hu.js').then(function (n) { return n.h; })],["id",()=>import('./id.js').then(function (n) { return n.i; })],["it",()=>import('./it.js').then(function (n) { return n.i; })],["it-ch",()=>import('./it-ch.js').then(function (n) { return n.i; })],["ja",()=>import('./ja.js').then(function (n) { return n.j; })],["ko",()=>import('./ko.js').then(function (n) { return n.k; })],["lt",()=>import('./lt.js').then(function (n) { return n.l; })],["lv",()=>import('./lv.js').then(function (n) { return n.l; })],["nb",()=>import('./nb.js').then(function (n) { return n.n; })],["nl",()=>import('./nl.js').then(function (n) { return n.n; })],["nl-be",()=>import('./nl-be.js').then(function (n) { return n.n; })],["pl",()=>import('./pl.js').then(function (n) { return n.p; })],["pt",()=>import('./pt.js').then(function (n) { return n.p; })],["pt-br",()=>import('./pt-br.js').then(function (n) { return n.p; })],["ro",()=>import('./ro.js').then(function (n) { return n.r; })],["ru",()=>import('./ru.js').then(function (n) { return n.r; })],["sk",()=>import('./sk.js').then(function (n) { return n.s; })],["sl",()=>import('./sl.js').then(function (n) { return n.s; })],["sr",()=>import('./sr.js').then(function (n) { return n.s; })],["sr-cyrl",()=>import('./sr-cyrl.js').then(function (n) { return n.s; })],["sv",()=>import('./sv.js').then(function (n) { return n.s; })],["th",()=>import('./th.js').then(function (n) { return n.t; })],["tr",()=>import('./tr.js').then(function (n) { return n.t; })],["uk",()=>import('./uk.js').then(function (n) { return n.u; })],["vi",()=>import('./vi.js').then(function (n) { return n.v; })],["zh-cn",()=>import('./zh-cn.js').then(function (n) { return n.z; })],["zh-hk",()=>import('./zh-hk.js').then(function (n) { return n.z; })],["zh-mo",()=>import('./zh-mo.js').then(function (n) { return n.z; })],["zh-tw",()=>import('./zh-tw.js').then(function (n) { return n.z; })]]);async function e$12(e=i$2w()){const t=(await import('./moment.js').then(function (n) { return n.m; })).default;e=e.toLowerCase();let l=m$1o.has(e);if(!l){const o=e.split("-");o.length>1&&m$1o.has(o[0])&&(e=o[0],l=!0);}return l?await m$1o.get(e)():e="en",e!==t.locale()&&t.locale(e),t}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function o$X(t,e){const o=T$p(e),i=Date.now(),l=o.formatToParts(i),c=new Set;l.filter((({type:t})=>"literal"===t)).forEach((({value:t})=>c.add(t)));let f=0;const s={};for(;l.length>0;){const{type:r,value:e}=l.shift();for(let o=0;o<e.length;o++,f++){const e=t.charAt(f);if(c.has(e)){f++;break}if("literal"===r)break;s[r]||(s[r]=[]),s[r].push(e);}}const g={};try{g.day=n$1Q(s.day.join("")),g.month=n$1Q(s.month.join(""))-1,g.year=n$1Q((s.year||s.relatedYear).join(""));}catch(h){throw a$1U(e)}if(isNaN(g.day)||isNaN(g.month)||isNaN(g.year))throw a$1U(e);return g}function n$1Q(t){const r=[/٠/g,/١/g,/٢/g,/٣/g,/٤/g,/٥/g,/٦/g,/٧/g,/٨/g,/٩/g];for(let e=0;e<10;e++)t=t.replace(r[e],e.toString());return Number(t)}function a$1U(r){return new s$2l(`could not parse date input, expecting the following format: ${L$w(Date.now(),r)}`)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$Y=class extends p$3a{constructor(){super(...arguments),this.state="ready",this.value=new Date;}};e$25([d$1T()],t$Y.prototype,"state",void 0),e$25([d$1T()],t$Y.prototype,"value",void 0),t$Y=e$25([i$2z("esri.widgets.support.MomentElementViewModel")],t$Y);const p$1_=t$Y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$11=class extends p$1_{constructor(r){super(r);}};e$11=e$25([i$2z("esri.widgets.support.DatePickerViewModel")],e$11);const t$X=e$11;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const b$G={base:"esri-date-picker",datePicker:"esri-date-picker__calendar",monthPicker:"esri-date-picker__month-picker",dayPicker:"esri-date-picker__day-picker",week:"esri-date-picker__week-item",nearbyMonth:"esri-date-picker__day-item--nearby-month",activeDay:"esri-date-picker__day-item--active",today:"esri-date-picker__day-item--today",selectedDay:"esri-date-picker__day-item--selected",day:"esri-date-picker__day-item",dayHeader:"esri-date-picker__day-item--header",yearPicker:"esri-date-picker__year-picker",selectedYear:"esri-date-picker__year-picker-item--selected",year:"esri-date-picker__year-picker-item",monthDropdown:"esri-date-picker__month-dropdown",date:"esri-date-picker__date",datePickerToggle:"esri-date-picker__calendar-toggle",dateInput:"esri-date-picker__input",dateTextInput:"esri-date-picker__text-input",leadingIcon:"esri-date-picker__icon--leading",previousIcon:"esri-icon-left",nextIcon:"esri-icon-right",calendarIcon:"esri-icon-calendar",widget:"esri-widget",button:"esri-widget--button",input:"esri-input",select:"esri-select"},f$Y={year:"numeric",month:"2-digit",day:"2-digit"},M$m=[" ","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Home","PageDown","PageUp"],P$g="esri.widgets.support.DatePicker",O$f=s$2n.getLogger(P$g);let I$m=class extends z$o{constructor(e,t){super(e,t),this._activeDate=null,this._calendarNode=null,this._calendarPopover=new f$Z({owner:this,placement:"bottom-start",anchorElement:()=>this._rootNode,renderContentFunction:this._renderCalendar}),this._inputOrButtonNode=null,this._isOpen=!1,this._requestDayPickerFocusOnCreate=!1,this._rootNode=null,this.dateInputEnabled=!1,this.label=void 0,this.messages=null,this.value=null,this.commitOnMonthChange=!1,this.viewModel=new t$X,this._toggle=this._toggle.bind(this);}initialize(){this.own(i$23((()=>{var e;return {viewModel:this.viewModel,value:null==(e=this.viewModel)?void 0:e.value}}),(({viewModel:e,value:t})=>{this.destroyed||!e||t$1T(this.onChange)||this.onChange(t);}),m$1P));}async loadLocale(){this._moment=await e$12(),this._isOpen&&(this._activeDate=this._moment(this._activeDate.toDate()));}destroy(){this._calendarPopover.destroy();}render(){return n$2g("div",{afterCreate:g$13,bind:this,class:this.classes(b$G.base,b$G.widget),"data-node-ref":"_rootNode"},this.dateInputEnabled?this.renderInputAndButtonMode():this.renderButtonOnlyMode())}renderButtonOnlyMode(){const e=L$w(this.viewModel.value,f$Y),{_isOpen:t,messages:a}=this;return n$2g("div",{afterCreate:g$13,"aria-controls":t?this._getCalendarId():null,"aria-expanded":t.toString(),"aria-haspopup":"true","aria-label":a.setDate,"aria-pressed":t.toString(),bind:this,class:this.classes(b$G.button,b$G.select,b$G.datePickerToggle),"data-node-ref":"_inputOrButtonNode",onclick:this._toggle,onkeydown:this._handleDateButtonKeyDown,role:"button",tabIndex:0},n$2g("span",{class:b$G.date},e))}renderInputAndButtonMode(){const e=L$w(this.viewModel.value,f$Y),{_isOpen:t,messages:a}=this;return n$2g("div",{class:this.classes(b$G.dateInput)},n$2g("input",{afterCreate:g$13,"data-node-ref":"_inputOrButtonNode","aria-controls":t?this._getCalendarId():null,"aria-haspopup":"true","aria-label":a.setDate,bind:this,class:this.classes(b$G.dateTextInput,b$G.input),key:"date-input",onblur:this._handleDateInputBlur,onclick:this._handleDateInputClick,onkeydown:this._handleDateInputKeyDown,type:"text",value:e}),n$2g("span",{"aria-hidden":"true",class:this.classes(b$G.leadingIcon,b$G.calendarIcon)}))}_handleDateInputClick(){this._open(this.viewModel.value,!1);}_handleDateInputKeyDown(e){const{key:t}=e;this._isOpen?"Enter"===t?this._handleDateText(e):"Escape"===t&&this._close():"ArrowDown"===t&&(this._open(this.viewModel.value),e.preventDefault());}_handleDateButtonKeyDown(e){const{key:t,shiftKey:a}=e;this._isOpen&&"Tab"===t&&a?this._close():y$1t(t)&&this._toggle();}_handleDateInputBlur(e){this._isOpen||this._handleDateText(e);}_handleDateText(e){const t=e.currentTarget;let a;try{a=o$X(t.value,f$Y);}catch(s){return O$f.warn(s),void(t.value=L$w(this.viewModel.value,f$Y))}const i=this._moment(a);i.isValid()?(this.viewModel.value=i.toDate(),this._activeDate=i):t.value=L$w(this.viewModel.value,f$Y);}_handleDatePickerKeydown(e){"Escape"===i$2L(e)&&(this._close(),e.preventDefault(),e.stopPropagation());}_renderCalendar(){const e=this._activeDate,t=this._moment(this.viewModel.value);return n$2g("div",{afterCreate:g$13,bind:this,class:this.classes(b$G.datePicker,b$G.widget),"data-node-ref":"_calendarNode",id:this._getCalendarId(),key:"esri-date-picker__calendar",onkeydown:this._handleDatePickerKeydown},this._renderMonthPicker(e),this._renderDayPicker(e,t),this._renderYearPicker(e))}_getCalendarId(){return `date-picker__calendar--${this.id}`}_renderMonthPicker(e){const t=d$1N(this.container),a=t?b$G.nextIcon:b$G.previousIcon,i=t?b$G.previousIcon:b$G.nextIcon,s=this._moment.months().map(((t,a)=>{const i=e.month()===a;return n$2g("option",{selected:i},t)})),{messages:r}=this;return n$2g("div",{class:b$G.monthPicker},n$2g("div",{"aria-label":r.goToPreviousMonth,bind:this,class:b$G.button,onclick:this._setPreviousMonth,onkeydown:this._handlePreviousMonthKeyDown,role:"button",tabIndex:0,title:r.goToPreviousMonth},n$2g("span",{"aria-hidden":"true",class:a})),n$2g("select",{"aria-live":"assertive","aria-label":r.selectMonth,bind:this,class:this.classes(b$G.monthDropdown,b$G.select),id:`${this.id}__month-picker`,onchange:this._setMonth,onkeydown:this._setMonth,title:r.selectMonth},s),n$2g("div",{"aria-label":r.goToNextMonth,bind:this,class:b$G.button,onclick:this._setNextMonth,onkeydown:this._setNextMonth,role:"button",tabIndex:0,title:r.goToNextMonth},n$2g("span",{"aria-hidden":"true",class:i})))}_renderDayPicker(e,t){const a=e.clone().day(this._moment.localeData().firstDayOfWeek()),i=this._getWeekLabels(a),s=this._getDayId(e),r=this._renderMonth(e,t);return n$2g("div",{afterCreate:this._handleDayPickerCreate,"aria-activedescendant":s,"aria-labelledby":`${this.id}__month-picker ${this.id}__selected-year`,bind:this,class:b$G.dayPicker,id:`${this.id}__day-picker`,onkeydown:this._handleDayPickerKeydown,role:"grid",tabIndex:0},n$2g("div",{class:b$G.week,role:"row"},i.map((e=>n$2g("div",{"aria-label":e.name,class:this.classes(b$G.day,b$G.dayHeader),role:"columnheader",title:e.name},e.abbr)))),r)}_getDayId(e){return `${this.id}__${L$w(e.valueOf(),f$Y)}`}_handleDayPickerCreate(e){this._requestDayPickerFocusOnCreate&&(this._requestDayPickerFocusOnCreate=!1,e.focus());}_getWeekLabels(e){const t=[],a={weekday:"long"},i={weekday:"narrow"};for(let s=0;s<7;s++)t.push({name:L$w(e.valueOf(),a),abbr:L$w(e.valueOf(),i)}),e.add(1,"day");return t}_handleDayPickerKeydown(e){const{ctrlKey:a,shiftKey:i}=e,s=i$2L(e),r=this._activeDate;if(-1!==M$m.indexOf(s)){if("ArrowLeft"===s)r.subtract(1,"day");else if("ArrowRight"===s)r.add(1,"day");else if("ArrowUp"===s)r.subtract(1,"week");else if("ArrowDown"===s)r.add(1,"week");else if("PageUp"===s){const e=i?"year":"month";r.subtract(1,e);}else if("PageDown"===s){const e=i?"year":"month";r.add(1,e);}else if("Home"===s){const e=a?"year":"month";r.startOf(e);}else if("End"===s){const e=a?"year":"month";r.endOf(e);}else y$1t(s)&&(this.viewModel.value=r.toDate(),this._close());e.preventDefault(),e.stopPropagation();}}_renderMonth(e,t){const a=this._moment(),i=e.clone().startOf("month"),s=e.clone().endOf("month"),r=6,o=7,n=i.clone().subtract(i.weekday(),"day"),d=[];for(let l=0;l<r;l++){const r=[];for(let d=0;d<o;d++){const o=n.date(),d=n.isSame(e,"day"),l=n.isSame(t,"day"),c=this._getDayId(n),h={[b$G.nearbyMonth]:!n.isBetween(i,s,null,"[]"),[b$G.today]:n.isSame(a,"day"),[b$G.activeDay]:d,[b$G.selectedDay]:l};r.push(n$2g("div",{"aria-label":o.toString(),"aria-selected":d.toString(),bind:this,class:this.classes(b$G.day,h),"data-iso-date":n.toISOString(),id:c,onclick:this._handleSelectedDate,onkeydown:this._handleSelectedDate,role:"gridcell"},o)),n.add(1,"day");}d.push(n$2g("div",{class:b$G.week,role:"row"},r));}return d}_renderYearPicker(e){const t={year:"numeric"},a=e.clone(),i=L$w(a.valueOf(),t),s=L$w(a.add(1,"year").valueOf(),t),r=L$w(a.subtract(2,"year").valueOf(),t),{messages:o}=this;return n$2g("div",{class:b$G.yearPicker},n$2g("div",{"aria-label":o.goToPreviousYear,bind:this,class:b$G.year,onclick:this._setPreviousYear,onkeydown:this._setPreviousYear,tabIndex:0,title:o.goToPreviousYear},r),n$2g("div",{class:this.classes(b$G.year,b$G.selectedYear),id:`${this.id}__selected-year`},i),n$2g("div",{"aria-label":o.goToNextYear,bind:this,class:b$G.year,onclick:this._setNextYear,onkeydown:this._handleNextYearKeyDown,tabIndex:0,title:o.goToNextYear},s))}_toggle(){this._isOpen?this._close():this._open(this.viewModel.value);}_setMonth(e){const t=e.target.value;this._activeDate.month(t),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toDate());}_close(e=!0){this._activeDate=null,this._isOpen=!1,this._calendarPopover.open=!1,this.pageClickHandler.pause(),e&&this._inputOrButtonNode.focus();}_open(e,t=!0){this._activeDate=this._moment(e),this._isOpen=!0,this._calendarPopover.open=!0,this._requestDayPickerFocusOnCreate=t,this.pageClickHandler||(this.pageClickHandler=n$2Q(document,"click",(({target:e})=>{var t,a;(null==(t=this._calendarNode)?void 0:t.contains(e))||(null==(a=this._rootNode)?void 0:a.contains(e))||this._close();})),this.own(this.pageClickHandler)),this.pageClickHandler.resume();}_setPreviousMonth(){this._activeDate.subtract(1,"month"),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toDate());}_handlePreviousMonthKeyDown(e){if("Tab"===e.key&&e.shiftKey)return e.preventDefault(),void this._close();y$1t(e.key)&&this._setPreviousMonth();}_setNextMonth(){this._activeDate.add(1,"month"),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toDate());}_setPreviousYear(){this._activeDate.subtract(1,"year");}_setNextYear(){this._activeDate.add(1,"year");}_handleNextYearKeyDown(e){if("Tab"===e.key&&!e.shiftKey)return e.preventDefault(),void this._close();y$1t(e.key)&&this._setNextYear();}_handleSelectedDate(e){const t=e.target;this.viewModel.value=this._moment(t.getAttribute("data-iso-date")).toDate(),this._close();}};e$25([d$1T()],I$m.prototype,"dateInputEnabled",void 0),e$25([d$1T({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],I$m.prototype,"label",void 0),e$25([d$1T(),e$1g("esri/widgets/support/t9n/DatePicker")],I$m.prototype,"messages",void 0),e$25([o$1K("viewModel.value")],I$m.prototype,"value",void 0),e$25([d$1T()],I$m.prototype,"commitOnMonthChange",void 0),e$25([d$1T({type:t$X})],I$m.prototype,"viewModel",void 0),e$25([d$1T()],I$m.prototype,"onChange",void 0),e$25([t$1f()],I$m.prototype,"_setNextMonth",null),e$25([t$1f()],I$m.prototype,"_setPreviousYear",null),e$25([t$1f()],I$m.prototype,"_handleSelectedDate",null),I$m=e$25([i$2z(P$g)],I$m);const x$o=I$m;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$10=class extends p$1_{constructor(r){super(r);}};e$10=e$25([i$2z("esri.widgets.support.TimePickerViewModel")],e$10);const t$W=e$10;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$1s={base:"esri-time-picker esri-widget",timePicker:"esri-time-picker__date-picker",timePickerInput:"esri-time-picker__input",input:"esri-input",button:"esri-widget--button"},m$1n={hour:"numeric",minute:"numeric"},p$1Z="LT",d$16=["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","Tab"];function _$m(t){return L$w(t.valueOf(),m$1n).indexOf(" ")>-1}let v$A=class extends z$o{constructor(t,e){super(t,e),this._activeTime=null,this.label=void 0,this.messages=null,this.value=null,this.viewModel=new t$W;}async loadLocale(){this._moment=await e$12();}render(){const t=this._activeTime||this.viewModel.value;return n$2g("div",{class:l$1s.base},n$2g("input",{afterUpdate:this._handleInputUpdate,"aria-label":this.messages.inputTitle,bind:this,class:this.classes(l$1s.timePickerInput,l$1s.input),onblur:this._handleInputBlur,onfocus:this._handleInputFocus,onkeydown:this._handleInputKeydown,oninput:this._handleInputKeydown,onclick:this._handleInputClick,onpaste:this._handleInputPaste,onwheel:this._handleInputWheel,value:L$w(t.valueOf(),m$1n)}))}_handleInputBlur(){this._activeTime.isValid()&&(this.viewModel.value=this._activeTime.toDate()),this._activeTime=null,this._activePart=null;}_handleInputUpdate(t){this._selectPart(t,this._activePart);}_selectPart(t,e){const i=this._activeTime;if(!i)return;const s=L$w(i.valueOf(),m$1n),r=0,a=s.indexOf(":");if("hours"===e)return void t.setSelectionRange(r,a);const o=a+1,n=o+2;if("minutes"===e)return void t.setSelectionRange(o,n);const u=n+1,h=s.length;"meridiem"!==e||t.setSelectionRange(u,h);}_handleInputFocus(t){this._activePart="hours",this._activeTime=this._moment(this.viewModel.value).startOf("minute"),this._selectPart(t.target,"hours");}_caretIndexToPartName(t){const e=this._activeTime.format(p$1Z),i=e.indexOf(":"),s=e.indexOf(" ");return t<=i?"hours":t>i&&t<=s?"minutes":"meridiem"}_handleInputKeydown(t){const{ctrlKey:i,metaKey:s,shiftKey:r}=t,a=i$2L(t),o=this._activeTime,n=this._activePart,u=/\d/.test(a),h=/^a|p$/i.test(a),c=s||i;if(d$16.indexOf(a)>-1||u||"meridiem"===n&&h&&!c){if("ArrowLeft"===a)this._activePart=this._prevPart();else if("ArrowRight"===a)this._activePart=this._nextPart();else if("Tab"===a){const t=r?this._prevPart():this._nextPart();if(t===this._activePart)return;this._activePart=t;}else if("ArrowUp"===a)this._shift("up",o,n);else if("ArrowDown"===a)this._shift("down",o,n);else if(u)this._setTime(o,n,Number(a));else if(h){const t=a.toLowerCase(),e=o.hour();("a"===t&&e>=12||"p"===t&&e<12)&&this._shift("up",o,n);}t.preventDefault(),t.stopImmediatePropagation();}else c||(t.preventDefault(),t.stopImmediatePropagation());}_handleInputClick(t){const e=t.target;this._activePart=null,this.renderNow(),this._activePart=this._caretIndexToPartName(e.selectionStart);}_getOrderedParts(){return _$m(this._activeTime)?["hours","minutes","meridiem"]:["hours","minutes"]}_prevPart(){const t=this._getOrderedParts(),e=t.indexOf(this._activePart)-1;return t[Math.max(e,0)]}_nextPart(){const t=this._getOrderedParts(),e=t.indexOf(this._activePart)+1;return t[Math.min(e,t.length-1)]}_setTime(t,e,i){if("hours"===e){const e=_$m(t)?12:24,s=""+t.hour()%e,r=i,a=Number(`${s}${i}`);2===s.length||a>e?t.hour(r):a<=e&&t.hour(a);}else if("minutes"===e){const e=59,s=`${t.minute()}`,r=i,a=Number(`${s}${i}`);2===s.length||a>e?t.minute(r):a<e&&t.minute(a);}}_handleInputPaste(t){const e=t.clipboardData.getData("text/plain"),i=this._moment(e);i.isValid()&&(this._activeTime=i),t.preventDefault(),t.stopImmediatePropagation();}_handleInputWheel(t){const e=t.deltaY<0?"up":"down";this._shift(e,this._activeTime,this._activePart);}_shift(t,e,i){if(!t||!e||!i)return;const s="meridiem"===i?12:1,r="hours"===i?"hour":"minutes"===i?"minute":"hours";e["up"===t?"add":"subtract"](s,r);}};e$25([d$1T({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],v$A.prototype,"label",void 0),e$25([d$1T(),e$1g("esri/widgets/support/t9n/TimePicker")],v$A.prototype,"messages",void 0),e$25([o$1K("viewModel.value")],v$A.prototype,"value",void 0),e$25([d$1T({type:t$W})],v$A.prototype,"viewModel",void 0),v$A=e$25([i$2z("esri.widgets.support.TimePicker")],v$A);const f$X=v$A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const f$W={cancelEdit:"Escape"},v$z={headerContent:"esri-field-column__header-content",input:"esri-field-column__cell-input",inputContainer:"esri-field-column__cell__input-container",dateInputContainer:"esri-field-column__cell__date-input-container",dateInputWrapper:"esri-field-column__cell__date-input-wrapper",button:"esri-field-column__button",saveIcon:"esri-icon-save",trashIcon:"esri-icon-trash",locked:"esri-icon-locked"},g$M=S$H("short-date-short-time"),y$_=S$H("short-date"),b$F=u$22({digitSeparator:!0,places:null});function _$l(e){return "feature"===(null==e?void 0:e.type)}let F$d=class extends r$U{constructor(e){super(e),this._inputField=null,this.alias=null,this.cellValueFormatFunction=({rowData:e,value:t})=>{if(this.formatFunction){const{config:e,field:n}=this;return this.formatFunction({config:e,field:n,value:L$v.sanitize(t)})}if(null===t)return "&nbsp;";const{config:n,field:r,type:s}=this,{item:{feature:d}}=e,c=this._getDomainForFeature(d);if(c)return this._getComputedDomain(t,c);if("date"===s){var p;const e=null!=n&&null!=(p=n.format)&&p.dateFormat?S$H(n.format.dateFormat):!1===(null==n?void 0:n.includeTime)?y$_:g$M,o=_$l(this.layer)&&this.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null;return t?L$w(t,{...e,...o}):null}if(B$c(r)){const e=null!=n&&n.format?u$22(n.format):b$F;return m$24(parseFloat(t),e)}return L$v.sanitize(t)},this.cellValueValidatorFunction=({oldValue:e,value:t})=>e!==t,this.config=null,this.defaultValue=null,this.description=null,this.editingEnabled=!1,this.field=null,this.formatFunction=null,this.headerRenderFunction=e=>{const{root:t}=e,{editable:n,editingEnabled:i,headerMenuEnabled:l,sortable:o}=this;if(this.removeCellContent(t),t.classList.add(v$z.headerContent),i&&!n&&t.appendChild(this.createLockedElement()),o)this.headerSorterRenderFunction(e);else {const{header:e,path:n}=this,i=document.createElement("div");i.innerHTML=e||n,t.appendChild(i);}l&&this.headerMenuRenderFunction(e);},this.inputRenderFunction=({root:e,column:t,rowData:n})=>{var i,l;if(null!=(i=this.activeEditInfo)&&i.updating)return;if(!this.editable)return;const o=this.getCellValue(t,n),a=this.createInputElement({root:e,column:t,rowData:n,value:o});if(this._set("activeEditInfo",{column:t,input:a,root:e,rowData:n,updating:!0,oldValue:o}),"date"===this.type)return void this._renderDateEditors(o,e,a);const r=this.createInputContainer();r.appendChild(a),this.removeCellContent(e),e.appendChild(r),a.focus(),a instanceof HTMLInputElement&&a.select(),null==(l=this.grid)||l.notifyResize();},this.layer=null,this.menuConfig=null,this.name=null,this.nullable=!0,this.parseInputValueFunction=({input:e})=>{const t=this._inputField,n=e.value,{required:i,type:l}=t;return i||""!==n?"number"===l||"date"===l?parseFloat(n):n:null},this.type=null,this.updateRowItemFunction=({rowData:e,column:t,value:n})=>{e.item.feature.attributes[t.path]=n;};}get editable(){var e,t,n;return this.editingEnabled?this.config?!1!==this.config.editable&&(null==(t=this.field)?void 0:t.editable):null==(n=this.field)?void 0:n.editable:!!this.config&&(!0===this.config.editable&&(null==(e=this.field)?void 0:e.editable))}get header(){var e;return (null==(e=this.config)?void 0:e.label)||this.alias||this.path||null}get hidden(){const{config:e}=this;return !1===(null==e?void 0:e.visible)||this._get("hidden")||!1}set hidden(e){this._set("hidden",e);}get loadingMessage(){var e;return (null==(e=this.messages)?void 0:e.loading)||"..."}get maxLength(){var e,t;const n=null==(e=this.field)?void 0:e.length,i=null==(t=this.config)?void 0:t.maxLength;return !isNaN(i)&&i>=-1&&(-1===n||i<=n)?i:n}get path(){var e;return (null==(e=this.field)?void 0:e.name)||null}get required(){const e=this.get("field.nullable"),t=this.get("config.required");return this.editable&&(!e||!0===t)}get sortable(){var e;return !1!==(null==(e=this.config)?void 0:e.sortable)}createInputElement({rowData:e,value:t}){const{item:n}=e;if(!n||!n.feature)return null;this._inputField=this._setUpInputField(n.feature,t);const{field:i,maxLength:l,required:o}=this,{domain:a}=this._inputField;let r=null;"coded-value"===(null==a?void 0:a.type)?(r=this._createSelectElement(t,a.codedValues.map((({code:e,name:t})=>({value:e,name:t}))),this._inputField),r.onchange=()=>{r.onblur=null,d();}):(r=document.createElement("input"),r.type=B$c(i)?"number":"text",l>-1&&(r.maxLength=l)),r.classList.add(v$z.input),r.value=t,r.required=o;let s=!1;r.onkeydown=e=>{s=e.key===f$W.cancelEdit;},r.onblur=()=>{r.onblur=null,d();};const d=()=>{s?this.cancel():this.submit(),this._inputField=null;};return r}createInputContainer(){const e=document.createElement("div");return e.classList.add(v$z.inputContainer),e}createLockedElement(){const e=document.createElement("div");return e.classList.add(v$z.locked),e}getCellValue({path:e},{item:t}){var n,i,l;return null!=(n=null==t||null==(i=t.feature)||null==(l=i.attributes)?void 0:l[e])?n:null}_renderDateEditors(e,t,n){var i;const{config:l,messagesCommon:o}=this,a=e?new Date(e):new Date(Date.now()),r=new x$o({dateInputEnabled:!0,value:a}),u=new f$X({value:a});n.value=a.getTime().toString();let s=!e;const d=()=>{s=!0;const e=this._getCombinedDateTime(r.value,u.value);n.value=e.getTime().toString();},c=()=>{s?this.submit():this.cancel();},h=()=>{n.value=null,this.submit();};r.watch("value",(()=>d())),u.watch("value",(()=>d()));const f=document.createElement("div"),g=document.createElement("div");r.container=f,u.container=g;const y=document.createElement("button");y.classList.add(v$z.button,v$z.saveIcon),y.onclick=()=>c(),y.title=null==o?void 0:o.save;const b=document.createElement("button");b.classList.add(v$z.button,v$z.trashIcon),b.onclick=()=>h(),b.title=null==o?void 0:o.clear;const _=document.createElement("div");_.classList.add(v$z.dateInputWrapper),_.appendChild(f),!1!==l.includeTime&&_.appendChild(g);const F=document.createElement("div");F.classList.add(v$z.dateInputContainer),F.appendChild(_),F.appendChild(y),F.appendChild(b),r.when((()=>{var e;return null==(e=this.grid)?void 0:e.notifyResize()})),u.when((()=>{var e;return null==(e=this.grid)?void 0:e.notifyResize()})),this.removeCellContent(t),t.appendChild(F),null==(i=this.grid)||i.notifyResize();}_createSelectElement(e,t,n){let i=!1;const l=t.map((t=>{t.value===e&&(i=!0);const n=document.createElement("option");return n.text=t.name,n.value=t.value,n}));if(null!=e&&""!==e&&!i){const t=document.createElement("option");t.text=e,t.value=e,l.unshift(t);}if(!n.required&&null==n.value){const e=document.createElement("option");e.value="",l.unshift(e);}const o=document.createElement("select");return l.forEach((e=>o.add(e))),o.value=e,o}_setUpInputField(e,t){const{config:n,field:i,layer:l}=this,o=new E$j({config:n,feature:e,field:i,layer:l,group:null,messages:null});return o.set("value",t),o}_isDomainCompatible(e){const{field:t}=this;if(e&&"coded-value"===e.type){const n=typeof e.codedValues[0].code;if("string"===n&&H$a(t)||"number"===n&&B$c(t))return !0}return !(!e||"range"!==e.type||!B$c(t))}_getDomainForFeature(e){const{layer:t,name:n}=this;if("wfs"===t.type||"geojson"===t.type)return null;const{typeIdField:i}=t,l=i===n,o=this.get("field.domain");if(l&&!o)return new u$1e({name:"__internal-type-based-coded-value-domain__",codedValues:t.types.map((({id:e,name:t})=>({code:e,name:t})))});const a=i&&t.getFieldDomain(n,{feature:e})||o,u=this.get("config.domain");return this._isDomainCompatible(u)?u:a}_getComputedDomain(e,t){if(!t)return null;if("range"===t.type)return e;if("coded-value"===t.type){const n=t.codedValues.filter((t=>t.hasOwnProperty("code")&&t.code===e));return n&&n.length?n[0].name:e}return null}_getCombinedDateTime(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())}};e$25([d$1T({readOnly:!0,aliasOf:"field.alias"})],F$d.prototype,"alias",void 0),e$25([d$1T()],F$d.prototype,"cellValueFormatFunction",void 0),e$25([d$1T()],F$d.prototype,"cellValueValidatorFunction",void 0),e$25([d$1T()],F$d.prototype,"config",void 0),e$25([d$1T({readOnly:!0,aliasOf:"field.defaultValue"})],F$d.prototype,"defaultValue",void 0),e$25([d$1T({readOnly:!0,aliasOf:"field.description"})],F$d.prototype,"description",void 0),e$25([d$1T({readOnly:!0})],F$d.prototype,"editable",null),e$25([d$1T()],F$d.prototype,"editingEnabled",void 0),e$25([d$1T()],F$d.prototype,"field",void 0),e$25([d$1T()],F$d.prototype,"formatFunction",void 0),e$25([d$1T({readOnly:!0})],F$d.prototype,"header",null),e$25([d$1T()],F$d.prototype,"hidden",null),e$25([d$1T()],F$d.prototype,"headerRenderFunction",void 0),e$25([d$1T()],F$d.prototype,"inputRenderFunction",void 0),e$25([d$1T()],F$d.prototype,"layer",void 0),e$25([d$1T({readOnly:!0})],F$d.prototype,"loadingMessage",null),e$25([d$1T()],F$d.prototype,"maxLength",null),e$25([d$1T({readOnly:!0,aliasOf:"config.menuConfig"})],F$d.prototype,"menuConfig",void 0),e$25([d$1T({readOnly:!0,aliasOf:"field.name"})],F$d.prototype,"name",void 0),e$25([d$1T({readOnly:!0,aliasOf:"field.nullable"})],F$d.prototype,"nullable",void 0),e$25([d$1T()],F$d.prototype,"parseInputValueFunction",void 0),e$25([d$1T({readOnly:!0})],F$d.prototype,"path",null),e$25([d$1T({readOnly:!0})],F$d.prototype,"required",null),e$25([d$1T()],F$d.prototype,"sortable",null),e$25([d$1T({readOnly:!0,aliasOf:"field.type"})],F$d.prototype,"type",void 0),e$25([d$1T()],F$d.prototype,"updateRowItemFunction",void 0),F$d=e$25([i$2z("esri.widgets.FeatureTable.FieldColumn")],F$d);const C$m=F$d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$1y=class extends p$3a{constructor(e){super(e),this.cellClassNameGenerator=null,this.columnReorderingEnabled=!0,this.columns=new S$I,this.dataProvider=async({page:e,pageSize:o},t)=>{const{store:s}=this;t&&(s?t(await s.fetchItems({page:e,pageSize:o})):t&&t([]));},this.pageSize=50,this.rowDetailsRenderer=null,this.store=null;}get size(){return this.store&&this.store.count||0}get state(){const{store:e}=this;return e&&"disabled"!==e.state?"loading"===e.state?"loading":"ready":"disabled"}closeColumnMenus(){var e;null==(e=this.columns)||e.forEach((e=>{e.menu&&e.menu.open&&e.menu.set("open",!1);}));}sortColumn(e,o){const t=this.findColumn(e);t&&(t.direction=o);}hideColumn(e){const o=this.findColumn(e);o&&!1===o.hidden&&(o.hidden=!0);}showColumn(e){const o=this.findColumn(e);o&&o.hidden&&(o.hidden=!1);}showAllColumns(){var e;null==(e=this.columns)||e.forEach((e=>{e.hidden&&(e.hidden=!1);}));}findColumn(e){return this.columns.find((o=>o.path===e))}getRowItemAt(e){return this.store&&this.store.getLocalItemAt(e)}refresh(){this.store&&(this.store.reset(),this.store.load());}};e$25([d$1T()],i$1y.prototype,"cellClassNameGenerator",void 0),e$25([d$1T()],i$1y.prototype,"columnReorderingEnabled",void 0),e$25([d$1T()],i$1y.prototype,"columns",void 0),e$25([d$1T()],i$1y.prototype,"dataProvider",void 0),e$25([d$1T()],i$1y.prototype,"pageSize",void 0),e$25([d$1T()],i$1y.prototype,"rowDetailsRenderer",void 0),e$25([d$1T({readOnly:!0})],i$1y.prototype,"size",null),e$25([d$1T()],i$1y.prototype,"store",void 0),e$25([d$1T({readOnly:!0})],i$1y.prototype,"state",null),i$1y=e$25([i$2z("esri.widgets.FeatureTable.Grid.GridViewModel")],i$1y);const n$1P=i$1y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class f$V extends HTMLElement{static get version(){return "1.6.1"}}customElements.define("vaadin-lumo-styles",f$V);let g$L,y$Z=null,b$E=window.HTMLImports&&window.HTMLImports.whenReady||null;function v$y(e){requestAnimationFrame((function(){b$E?b$E(e):(y$Z||(y$Z=new Promise((e=>{g$L=e;})),"complete"===document.readyState?g$L():document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&g$L();}))),y$Z.then((function(){e&&e();})));}));}const w$A="__seenByShadyCSS",A$d="__shadyCSSCachedStyle";let C$l=null,S$q=null;class x$n{constructor(){this.customStyles=[],this.enqueued=!1,v$y((()=>{window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles();}));}enqueueDocumentValidation(){!this.enqueued&&S$q&&(this.enqueued=!0,v$y(S$q));}addCustomStyle(e){e[w$A]||(e[w$A]=!0,this.customStyles.push(e),this.enqueueDocumentValidation());}getStyleForCustomStyle(e){if(e[A$d])return e[A$d];let t;return t=e.getStyle?e.getStyle():e,t}processStyles(){const e=this.customStyles;for(let t=0;t<e.length;t++){const i=e[t];if(i[A$d])continue;const s=this.getStyleForCustomStyle(i);if(s){const e=s.__appliedElement||s;C$l&&C$l(e),i[A$d]=e;}}return e}}x$n.prototype.addCustomStyle=x$n.prototype.addCustomStyle,x$n.prototype.getStyleForCustomStyle=x$n.prototype.getStyleForCustomStyle,x$n.prototype.processStyles=x$n.prototype.processStyles,Object.defineProperties(x$n.prototype,{transformCallback:{get:()=>C$l,set(e){C$l=e;}},validateCallback:{get:()=>S$q,set(e){let t=!1;S$q||(t=!0),S$q=e,t&&this.enqueueDocumentValidation();}}});const P$f=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,E$i=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,T$f=/@media\s(.*)/;function I$l(e,t){for(let i in t)null===i?e.style.removeProperty(i):e.style.setProperty(i,t[i]);}function O$e(e,t){const i=window.getComputedStyle(e).getPropertyValue(t);return i?i.trim():""}function z$f(e){const t=E$i.test(e)||P$f.test(e);return E$i.lastIndex=0,P$f.lastIndex=0,t}const R$h=!(window.ShadyDOM&&window.ShadyDOM.inUse);let N$f,k$j;function D$f(e){N$f=(!e||!e.shimcssproperties)&&(R$h||Boolean(!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")));}window.ShadyCSS&&void 0!==window.ShadyCSS.cssBuild&&(k$j=window.ShadyCSS.cssBuild);const L$k=Boolean(window.ShadyCSS&&window.ShadyCSS.disableRuntime);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?N$f=window.ShadyCSS.nativeCss:window.ShadyCSS?(D$f(window.ShadyCSS),window.ShadyCSS=void 0):D$f(window.WebComponents&&window.WebComponents.flags);const M$l=N$f,F$c=new x$n;window.ShadyCSS||(window.ShadyCSS={prepareTemplate(e,t,i){},prepareTemplateDom(e,t){},prepareTemplateStyles(e,t,i){},styleSubtree(e,t){F$c.processStyles(),I$l(e,t);},styleElement(e){F$c.processStyles();},styleDocument(e){F$c.processStyles(),I$l(document.body,e);},getComputedStyleValue:(e,t)=>O$e(e,t),flushCustomStyles(){},nativeCss:M$l,nativeShadow:R$h,cssBuild:k$j,disableRuntime:L$k}),window.ShadyCSS.CustomStyleInterface=F$c,window.JSCompiler_renameProperty=function(e,t){return e};let H$8,B$a,$$d=/(url\()([^)]*)(\))/g,V$9=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/;function G$9(e,t){if(e&&V$9.test(e))return e;if("//"===e)return e;if(void 0===H$8){H$8=!1;try{const e=new URL("b","http://a");e.pathname="c%20d",H$8="http://a/c%20d"===e.href;}catch(i){}}if(t||(t=document.baseURI||window.location.href),H$8)try{return new URL(e,t).href}catch(i){return e}return B$a||(B$a=document.implementation.createHTMLDocument("temp"),B$a.base=B$a.createElement("base"),B$a.head.appendChild(B$a.base),B$a.anchor=B$a.createElement("a"),B$a.body.appendChild(B$a.anchor)),B$a.base.href=t,B$a.anchor.href=e,B$a.anchor.href||e}function j$q(e,t){return e.replace($$d,(function(e,i,s,r){return i+"'"+G$9(s.replace(/["']/g,""),t)+"'"+r}))}function W$7(e){return e.substring(0,e.lastIndexOf("/")+1)}const U$g=!window.ShadyDOM||!window.ShadyDOM.inUse;const Y$7=U$g&&"adoptedStyleSheets"in Document.prototype&&"replaceSync"in CSSStyleSheet.prototype&&(()=>{try{const e=new CSSStyleSheet;e.replaceSync("");const t=document.createElement("div");return t.attachShadow({mode:"open"}),t.shadowRoot.adoptedStyleSheets=[e],t.shadowRoot.adoptedStyleSheets[0]===e}catch(e){return !1}})();let q$d=window.Polymer&&window.Polymer.rootPath||W$7(document.baseURI||window.location.href),J$5=window.Polymer&&window.Polymer.sanitizeDOMValue||void 0,X$7=window.Polymer&&window.Polymer.setPassiveTouchGestures||!1,Z$7=window.Polymer&&window.Polymer.strictTemplatePolicy||!1,K$8=window.Polymer&&window.Polymer.allowTemplateFromDomModule||!1,Q$7=window.Polymer&&window.Polymer.legacyOptimizations||!1,ee$4=window.Polymer&&window.Polymer.legacyWarnings||!1,te$4=window.Polymer&&window.Polymer.syncInitialRender||!1,ie$3=window.Polymer&&window.Polymer.legacyUndefined||!1,se$4=window.Polymer&&window.Polymer.orderedComputed||!1,re$4=window.Polymer&&window.Polymer.removeNestedTemplates||!1,ne$3=window.Polymer&&window.Polymer.fastDomIf||!1,oe$4=window.Polymer&&window.Polymer.suppressTemplateNotifications||!1,ae$3=window.Polymer&&window.Polymer.legacyNoObservedAttributes||!1,le$3=window.Polymer&&window.Polymer.useAdoptedStyleSheetsWithBuiltCSS||!1,de$3={},he$2={};function ce$3(e,t){de$3[e]=he$2[e.toLowerCase()]=t;}function ue$3(e){return de$3[e]||he$2[e.toLowerCase()]}function pe$3(e){e.querySelector("style")&&console.warn("dom-module %s has style outside template",e.id);}class _e$2 extends HTMLElement{static get observedAttributes(){return ["id"]}static import(e,t){if(e){let i=ue$3(e);return i&&t?i.querySelector(t):i}return null}attributeChangedCallback(e,t,i,s){t!==i&&this.register();}get assetpath(){if(!this.__assetpath){const e=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,t=G$9(this.getAttribute("assetpath")||"",e.baseURI);this.__assetpath=W$7(t);}return this.__assetpath}register(e){if(e=e||this.id){if(Z$7&&void 0!==ue$3(e))throw ce$3(e,null),new Error(`strictTemplatePolicy: dom-module ${e} re-registered`);this.id=e,ce$3(e,this),pe$3(this);}}}_e$2.prototype.modules=de$3,customElements.define("dom-module",_e$2);const me$2="link[rel=import][type~=css]",fe$3="include",ge$2="shady-unscoped";function ye$2(e){return _e$2.import(e)}function be$1(e){const t=j$q((e.body?e.body:e).textContent,e.baseURI),i=document.createElement("style");return i.textContent=t,i}function ve$1(e){const t=e.trim().split(/\s+/),i=[];for(let s=0;s<t.length;s++)i.push(...we$2(t[s]));return i}function we$2(e){const t=ye$2(e);if(!t)return console.warn("Could not find style data in module named",e),[];if(void 0===t._styles){const e=[];e.push(...Se$1(t));const i=t.querySelector("template");i&&e.push(...Ae$1(i,t.assetpath)),t._styles=e;}return t._styles}function Ae$1(e,t){if(!e._styles){const i=[],s=e.content.querySelectorAll("style");for(let e=0;e<s.length;e++){let r=s[e],n=r.getAttribute(fe$3);n&&i.push(...ve$1(n).filter((function(e,t,i){return i.indexOf(e)===t}))),t&&(r.textContent=j$q(r.textContent,t)),i.push(r);}e._styles=i;}return e._styles}function Ce$1(e){let t=ye$2(e);return t?Se$1(t):[]}function Se$1(e){const t=[],i=e.querySelectorAll(me$2);for(let s=0;s<i.length;s++){let e=i[s];if(e.import){const i=e.import,s=e.hasAttribute(ge$2);if(s&&!i._unscopedStyle){const e=be$1(i);e.setAttribute(ge$2,""),i._unscopedStyle=e;}else i._style||(i._style=be$1(i));t.push(s?i._unscopedStyle:i._style);}}return t}function xe$1(e){let t=e.trim().split(/\s+/),i="";for(let s=0;s<t.length;s++)i+=Pe$1(t[s]);return i}function Pe$1(e){let t=ye$2(e);if(t&&void 0===t._cssText){let e=Te$1(t),i=t.querySelector("template");i&&(e+=Ee$1(i,t.assetpath)),t._cssText=e||null;}return t||console.warn("Could not find style data in module named",e),t&&t._cssText||""}function Ee$1(e,t){let i="";const s=Ae$1(e,t);for(let r=0;r<s.length;r++){let e=s[r];e.parentNode&&e.parentNode.removeChild(e),i+=e.textContent;}return i}function Te$1(e){let t="",i=Se$1(e);for(let s=0;s<i.length;s++)t+=i[s].textContent;return t}const Ie$1="include",Oe$1=window.ShadyCSS.CustomStyleInterface;class ze$1 extends HTMLElement{constructor(){super(),this._style=null,Oe$1.addCustomStyle(this);}getStyle(){if(this._style)return this._style;const e=this.querySelector("style");if(!e)return null;this._style=e;const t=e.getAttribute(Ie$1);return t&&(e.removeAttribute(Ie$1),e.textContent=xe$1(t)+e.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}window.customElements.define("custom-style",ze$1);const Re$2=document.createElement("template");Re$2.innerHTML='<custom-style>\n  <style>\n    html {\n      /* Base (background) */\n      --lumo-base-color: #FFF;\n\n      /* Tint */\n      --lumo-tint-5pct: hsla(0, 0%, 100%, 0.3);\n      --lumo-tint-10pct: hsla(0, 0%, 100%, 0.37);\n      --lumo-tint-20pct: hsla(0, 0%, 100%, 0.44);\n      --lumo-tint-30pct: hsla(0, 0%, 100%, 0.5);\n      --lumo-tint-40pct: hsla(0, 0%, 100%, 0.57);\n      --lumo-tint-50pct: hsla(0, 0%, 100%, 0.64);\n      --lumo-tint-60pct: hsla(0, 0%, 100%, 0.7);\n      --lumo-tint-70pct: hsla(0, 0%, 100%, 0.77);\n      --lumo-tint-80pct: hsla(0, 0%, 100%, 0.84);\n      --lumo-tint-90pct: hsla(0, 0%, 100%, 0.9);\n      --lumo-tint: #FFF;\n\n      /* Shade */\n      --lumo-shade-5pct: hsla(214, 61%, 25%, 0.05);\n      --lumo-shade-10pct: hsla(214, 57%, 24%, 0.1);\n      --lumo-shade-20pct: hsla(214, 53%, 23%, 0.16);\n      --lumo-shade-30pct: hsla(214, 50%, 22%, 0.26);\n      --lumo-shade-40pct: hsla(214, 47%, 21%, 0.38);\n      --lumo-shade-50pct: hsla(214, 45%, 20%, 0.5);\n      --lumo-shade-60pct: hsla(214, 43%, 19%, 0.61);\n      --lumo-shade-70pct: hsla(214, 42%, 18%, 0.72);\n      --lumo-shade-80pct: hsla(214, 41%, 17%, 0.83);\n      --lumo-shade-90pct: hsla(214, 40%, 16%, 0.94);\n      --lumo-shade: hsl(214, 35%, 15%);\n\n      /* Contrast */\n      --lumo-contrast-5pct: var(--lumo-shade-5pct);\n      --lumo-contrast-10pct: var(--lumo-shade-10pct);\n      --lumo-contrast-20pct: var(--lumo-shade-20pct);\n      --lumo-contrast-30pct: var(--lumo-shade-30pct);\n      --lumo-contrast-40pct: var(--lumo-shade-40pct);\n      --lumo-contrast-50pct: var(--lumo-shade-50pct);\n      --lumo-contrast-60pct: var(--lumo-shade-60pct);\n      --lumo-contrast-70pct: var(--lumo-shade-70pct);\n      --lumo-contrast-80pct: var(--lumo-shade-80pct);\n      --lumo-contrast-90pct: var(--lumo-shade-90pct);\n      --lumo-contrast: var(--lumo-shade);\n\n      /* Text */\n      --lumo-header-text-color: var(--lumo-contrast);\n      --lumo-body-text-color: var(--lumo-contrast-90pct);\n      --lumo-secondary-text-color: var(--lumo-contrast-70pct);\n      --lumo-tertiary-text-color: var(--lumo-contrast-50pct);\n      --lumo-disabled-text-color: var(--lumo-contrast-30pct);\n\n      /* Primary */\n      --lumo-primary-color: hsl(214, 90%, 52%);\n      --lumo-primary-color-50pct: hsla(214, 90%, 52%, 0.5);\n      --lumo-primary-color-10pct: hsla(214, 90%, 52%, 0.1);\n      --lumo-primary-text-color: var(--lumo-primary-color);\n      --lumo-primary-contrast-color: #FFF;\n\n      /* Error */\n      --lumo-error-color: hsl(3, 100%, 61%);\n      --lumo-error-color-50pct: hsla(3, 100%, 60%, 0.5);\n      --lumo-error-color-10pct: hsla(3, 100%, 60%, 0.1);\n      --lumo-error-text-color: hsl(3, 92%, 53%);\n      --lumo-error-contrast-color: #FFF;\n\n      /* Success */\n      --lumo-success-color: hsl(145, 80%, 42%); /* hsl(144,82%,37%); */\n      --lumo-success-color-50pct: hsla(145, 76%, 44%, 0.55);\n      --lumo-success-color-10pct: hsla(145, 76%, 44%, 0.12);\n      --lumo-success-text-color: hsl(145, 100%, 32%);\n      --lumo-success-contrast-color: #FFF;\n    }\n  </style>\n</custom-style><dom-module id="lumo-color">\n  <template>\n    <style>\n      [theme~="dark"] {\n        /* Base (background) */\n        --lumo-base-color: hsl(214, 35%, 21%);\n\n        /* Tint */\n        --lumo-tint-5pct: hsla(214, 65%, 85%, 0.06);\n        --lumo-tint-10pct: hsla(214, 60%, 80%, 0.14);\n        --lumo-tint-20pct: hsla(214, 64%, 82%, 0.23);\n        --lumo-tint-30pct: hsla(214, 69%, 84%, 0.32);\n        --lumo-tint-40pct: hsla(214, 73%, 86%, 0.41);\n        --lumo-tint-50pct: hsla(214, 78%, 88%, 0.5);\n        --lumo-tint-60pct: hsla(214, 82%, 90%, 0.6);\n        --lumo-tint-70pct: hsla(214, 87%, 92%, 0.7);\n        --lumo-tint-80pct: hsla(214, 91%, 94%, 0.8);\n        --lumo-tint-90pct: hsla(214, 96%, 96%, 0.9);\n        --lumo-tint: hsl(214, 100%, 98%);\n\n        /* Shade */\n        --lumo-shade-5pct: hsla(214, 0%, 0%, 0.07);\n        --lumo-shade-10pct: hsla(214, 4%, 2%, 0.15);\n        --lumo-shade-20pct: hsla(214, 8%, 4%, 0.23);\n        --lumo-shade-30pct: hsla(214, 12%, 6%, 0.32);\n        --lumo-shade-40pct: hsla(214, 16%, 8%, 0.41);\n        --lumo-shade-50pct: hsla(214, 20%, 10%, 0.5);\n        --lumo-shade-60pct: hsla(214, 24%, 12%, 0.6);\n        --lumo-shade-70pct: hsla(214, 28%, 13%, 0.7);\n        --lumo-shade-80pct: hsla(214, 32%, 13%, 0.8);\n        --lumo-shade-90pct: hsla(214, 33%, 13%, 0.9);\n        --lumo-shade: hsl(214, 33%, 13%);\n\n        /* Contrast */\n        --lumo-contrast-5pct: var(--lumo-tint-5pct);\n        --lumo-contrast-10pct: var(--lumo-tint-10pct);\n        --lumo-contrast-20pct: var(--lumo-tint-20pct);\n        --lumo-contrast-30pct: var(--lumo-tint-30pct);\n        --lumo-contrast-40pct: var(--lumo-tint-40pct);\n        --lumo-contrast-50pct: var(--lumo-tint-50pct);\n        --lumo-contrast-60pct: var(--lumo-tint-60pct);\n        --lumo-contrast-70pct: var(--lumo-tint-70pct);\n        --lumo-contrast-80pct: var(--lumo-tint-80pct);\n        --lumo-contrast-90pct: var(--lumo-tint-90pct);\n        --lumo-contrast: var(--lumo-tint);\n\n        /* Text */\n        --lumo-header-text-color: var(--lumo-contrast);\n        --lumo-body-text-color: var(--lumo-contrast-90pct);\n        --lumo-secondary-text-color: var(--lumo-contrast-70pct);\n        --lumo-tertiary-text-color: var(--lumo-contrast-50pct);\n        --lumo-disabled-text-color: var(--lumo-contrast-30pct);\n\n        /* Primary */\n        --lumo-primary-color: hsl(214, 86%, 55%);\n        --lumo-primary-color-50pct: hsla(214, 86%, 55%, 0.5);\n        --lumo-primary-color-10pct: hsla(214, 90%, 63%, 0.1);\n        --lumo-primary-text-color: hsl(214, 100%, 70%);\n        --lumo-primary-contrast-color: #FFF;\n\n        /* Error */\n        --lumo-error-color: hsl(3, 90%, 63%);\n        --lumo-error-color-50pct: hsla(3, 90%, 63%, 0.5);\n        --lumo-error-color-10pct: hsla(3, 90%, 63%, 0.1);\n        --lumo-error-text-color: hsl(3, 100%, 67%);\n\n        /* Success */\n        --lumo-success-color: hsl(145, 65%, 42%);\n        --lumo-success-color-50pct: hsla(145, 65%, 42%, 0.5);\n        --lumo-success-color-10pct: hsla(145, 65%, 42%, 0.1);\n        --lumo-success-text-color: hsl(145, 85%, 47%);\n      }\n\n      html {\n        color: var(--lumo-body-text-color);\n        background-color: var(--lumo-base-color);\n      }\n\n      [theme~="dark"] {\n        color: var(--lumo-body-text-color);\n        background-color: var(--lumo-base-color);\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        color: var(--lumo-header-text-color);\n      }\n\n      a {\n        color: var(--lumo-primary-text-color);\n      }\n\n      blockquote {\n        color: var(--lumo-secondary-text-color);\n      }\n\n      code,\n      pre {\n        background-color: var(--lumo-contrast-10pct);\n        border-radius: var(--lumo-border-radius-m);\n      }\n    </style>\n  </template>\n</dom-module><dom-module id="lumo-color-legacy">\n  <template>\n    <style include="lumo-color">\n      :host {\n        color: var(--lumo-body-text-color) !important;\n        background-color: var(--lumo-base-color) !important;\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(Re$2.content);const Ne=document.createElement("template");Ne.innerHTML='<custom-style>\n  <style>\n    @font-face {\n      font-family: \'lumo-icons\';\n      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABEcAAsAAAAAIiwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAQwAAAFZAIUuKY21hcAAAAYgAAAD4AAADrsCU8d5nbHlmAAACgAAAC2MAABd4h9To2WhlYWQAAA3kAAAAMAAAADZa/6SsaGhlYQAADhQAAAAdAAAAJAbpA35obXR4AAAONAAAABAAAACspBAAAGxvY2EAAA5EAAAAWAAAAFh55IAsbWF4cAAADpwAAAAfAAAAIAFKAXBuYW1lAAAOvAAAATEAAAIuUUJZCHBvc3QAAA/wAAABKwAAAelm8SzVeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS+yDiBgZWBgamKaQ8DA0MPhGZ8wGDIyAQUZWBlZsAKAtJcUxgcXjG+0mIO+p/FEMUcxDANKMwIkgMABn8MLQB4nO3SWW6DMABF0UtwCEnIPM/zhLK8LqhfXRybSP14XUYtHV9hGYQwQBNIo3cUIPkhQeM7rib1ekqnXg981XuC1qvy84lzojleh3puxL0hPjGjRU473teloEefAUNGjJkwZcacBUtWrNmwZceeA0dOnLlw5cadB09elPGhGf+j0NTI/65KfXerT6JhqKnpRKtgOpuqaTrtKjPUlqHmhto21I7pL6i6hlqY3q7qGWrfUAeGOjTUkaGODXViqFNDnRnq3FAXhro01JWhrg11Y6hbQ90Z6t5QD4Z6NNSToZ4N9WKoV0O9GerdUB+G+jTUl6GWRvkL24BkEXictVh9bFvVFb/nxvbz+7Rf/N6zHcd2bCfP+Wgc1Z9N0jpNnEL6kbRVS6HA2hQYGh9TGR1CbCqa2rXrWOkQE/sHNJgmtZvoVNZqE1B1DNHxzTQxCehUTYiJTQyENui0qSLezr3PduyQfgmRWOfde8+9551z7rnn/O4jLoJ/bRP0UaKQMLFJjpBAvphLZC3Dk0ok7WBzR2/upJs7Ryw/nfFbln/uuN/apCvwrKLrSvUqRufbm5pn0fs0w4gYxnGVP6qHnO4bWiDQGQgwtS6lm3lB3QoX1M2vwEmuzirF39y+Es2+DJ8d1pkyqBIqoze3D1+Zz4DrFoazxI8dWwMrDlZ2DMqQAR9AROsJU+2cmlTPazTco52F1xTa2a2+K8vvq92dVHmtLoPeQX/AZPRYGthDYOeZjBjKoFsVGulR3lWU95WeCK44qHU7MhWUGUKZDT3oKUcG2GWuh+EDDfUYA/jhAhl0TOsJNYSEu7mQmi3UzfXwZKA4BsVsHLXQYGgRW95uEtpJ1Vfn9XiLriRBlFEqxsDjA09yCNUoQxxwd7KWSTt2y3GTKiflqHRSoWZc3m11Wa/fJdFgXD4sSYfleJBKd8GMz7J8dZn/cGRCcKGDnA2Ge3fKzcvlnTDNthGWLXzX/WaXtUAmRgeLlHSr30r0G9UTXMb0AtmwzOoy73fkSlHZkduw/TYuU9cAD4YutPoxTTsA3797wVr4Z/1NC5zARHr4vtxJjxIfiZMhMkbWk+14BnJZKwqGZwDfswLyxWDSg11rFLJF7Nopxjd1h1/QOT+oezgfu3Yq+Hk+duf5x+40o1GTkaIgikK/IEnC6aYxCUBaZJSN4XTYFjU/YMNIKqJwhDGOCCI8FDXnXmXjtGhGJyShqjAOnBOkW2JG9S7GgYeMWAU5JzhnWmBOaOM+CKEPoqSfFDC2Unq+DLlUgUVUFFLZGJg6jtlojsdsa8kPObPuJdi5dnBdBsLJMGTWDa4t2JvtwuPo9s+Y86suv/W33QG1rAaOAUV+vx4K6f2D04PVKlC7WLSrZzAi45ZV6lIC7WoXqmRyvUqoVwrzUoVsIjeTXWQv+RH5GTlBXiB/In8ln0IbBCAFOajAJrgZYyOHWqOfUe/aHjI12R6OQo1jCgt215l+4f6XPb+0MNou0V+43n2F77tSfRb24d7zitgnKmvYHs69zugaPvBwv6ioXkb2LdL65Atw51uLkXlu1bhMMRcXSPcYoqKIRlh34lQP8/5JbuUFye4vxD6/6MxFF11C0uVLr9Ulgw44tS3pMViNLUExbycFgLIct+QDMibRimx1ydUz8FXZiuOIDBOMVX2nUZc+huNE5XUJ81uiJoiabwqaVF0uacKbau/pl4R2VW0XXlJra6boVrYG646TF5NYzwy4vjENVrDlcNpZPl8DH6XX8XWCx0mvWVZY6KFLrvsY66/zPict5FnxaNUR/juvZCM3TvD60E2W1tZizbXTPDuabcm0nbbzpWKpmA1ayBQ8giedLUM+A0kNjBjQjmuYz7YrgIXYvmF63ZLBwSXrpn9Tb9wwdd/U1H0PMQK3XcO8ul3WT7PyPPdpy0TemKxNRcJNauiXJnnUDpUppQWs4SnUIy0EESGYqJYQLGHxzaGWwVIaS6Y7mQFM8ZjYDQ3axjf61SWjU33JwOZA1pwaG1L9mzf71aHRdX1JHw6Fp0aXhNwbqyeGNg4NbdzGCBxoz4ZXjy4Nu69Zr6sDY6vMrLU5nA1P8JkbdWXJ6ERfMryvNh1JfQ9+T4dIhGvK9w3dxjBBzatsQ/MlOHVIDnYpDz6odAXlQ01t2Pa5Iafd8MMpxAeDKP0C6CjgVLT5osB6icUx01lWjXxzT/GyRF2welEM5Z/7jG3VjQ1SrNn5IbyzOG5dobB3/QHxyZvsXcoz8IoEwS7plCg+zxHQk424q9BfEpkESJbFHQusDBSWFkuBkoPO0kLKwRVYjxGXlHTcTDQMJ/H6TX9afkO7mnraTO1feTnZAXLu4cp7HAXMmNG1yeFk9TgS/NHhZR/4QoBTr/ZB+6hCgyl15Nq1UbN6nE1/ZnP1U2cizCBpvs8cJQZJ4LkYx5N/yZPAUZNQQ0V4f3BQllWrK3YRzl30dOT6RVn2upNur6woSa8CqpdT/aKnBM4o3jNur9d9xqtUT6veBEt9Ca9at+ERzEEhUkR8sa5mQ4aVvJoVeEA8zI4ei5mULXFGyU7z/6TAeYLVcpzSWZY8PYYF5yrTV60sT0+XV141vX++Wf16V2bFeGVPZXxFpkvyeKTWLlzfW0mnKxsY6Y3294/0998SCfX1blm5pbcvFGlq/r07MRAMhYIDiW5JFKWW3vdrEpCsZSJG+om7Zu/PSScZJhNkLbmW5Wsr12pWqW5zKtlwRS4bFOxUw17mCzy6lskCDl1WYOGWDYrADrMA7BDDweWWNd5koiJnR1dz+ytLP2q0SqPB1lnK2ccB7RYe4FSoPks3iB3t4txTSHctb2sy1ivk0pvHuCNm6w1f6wxv3+OCgN78LqdQnUVh7R0oTAp0zOf2rbW770Vu5C2dIyGdTnHo8zSji7dppj0USoVCz+lhRMTh53Teq9VbGfbjuSbAooSdXayY4PYHg374C6f7gl1B/DXuJ4/QXxOBdJFJspFsI3egpoWUUCjlTIFnNYNl+ZyZKmBeYKGHkD1QyDlhaKbKwKcIJqJ4TLJ2OmdY/JWXae4DdGBw8HZ7eXcgFF2zr2SoalDry5iKqoa0Puhe3hPQ2s3elTYM+MI+n3rK0KgL7/La3GeMLt6m7u912vGnvtORiIa0qBmhqVi+XW9XNBmqb8eVgKzIHfGI5bNoG7X0UCzeISmqIcO/nY8FH7U8avX9fx/ST+hx0sezPw9Qy8Mum3GWf2N4Uy/yIYGVBXbJHWIZp7dfTcptdMTr9Qmq7DaiK/ukqCL4kt4RUfS5XPnMtmT22/mQFqF7emSqtrlu8SVElxDRJrZODkpuwe0VfTfjdEp1f7A7v+fozNBXUJ/6WTuK2TtFlpFVZAZ3LcFvUi1Z2p2YT+EMAkGJVStOzLTAPg4IqWIAlzRSjOBkl2zxj3TKycpzT/MnvX3uaSMWM+gU0rkXjohhefVRMaps3/kLMSKv23lT23uxQrkQjyOJleMDsdhAnD6ZGElWZ5MjCXzCE/hkWX+WF4knzGhVOyK2eQZekV3eyo0zL8kuYWCnDCvjjhAkcTPOBDXVdoav3HVcFnQjLvtV9S2p0zA6JegPwMQxt+yFb3ll9zGlq/5dRKb3cEyQYoaNYpharJ7xCB7AWxsLY3jjZXY0XsZj0Wjwc9I6PP/dKABnCZaqHpaZEACxk4ZeLZSKNgZABl+lYQX1sJQOSX3n6r410evcoud5JeAGUXVP9H1tZOKejTq4Ono0z0erro1FrnOpohva1d/hTdtVsQdKN5W9RlT3NjD0nznyKNTgKAMfWNWcyodV0IGLPIHOF0o4JyqufaK4z6WIIzuGh3d8c8cwQg8ER+OVxyrjdm8vNuhts4LoOihGxIMuUdgzwiYN7xhh1+oZnJNuTG7gQZvu4XWZ9GAZZjGEubwePqYhtKDTH+9VQkl17/iGybsnJ+8+sKtyPrcll9ty65Zsdst/9iqpEKh7M5VdBxh3csOdNc6tW3I1uyM1PzOXegSOrLFsFNI2O27M+TF2ApnN9MUv5ud6LjxIvEQnHRzxIu4IsA9MLFkJn2tcZoZ7ON7dXe7ujrc8HrusPKamlqXwd77lQUuLpilau4PUMapueBb7irU4RoUXEYXuVuIGlRGmOp+2lNkaRPVziOqmlaZvaqG4dFgSj0jxEJWrv12IUWntmw+rfQarRE0Aph4ocI6nlUlGqs+u3/+T/ethW62PpHp2eHbZstnh/wOO95yDAHicY2BkYGAA4pmJ6QHx/DZfGbiZXwBFGGpUNzQi6P+vmacy3QJyORiYQKIANoULVXicY2BkYGAO+p8FJF8wAAHzVAZGBlSgDQBW9gNvAAAAeJxjYGBgYH4xNDAAzwQmjwAAAAAATgCaAOgBCgEsAU4BcAGaAcQB7gIaApwC6ASaBLwE1gTyBQ4FKgV6BdAF/gZEBmYGtgcYB5AIGAhSCGoI/glGCb4J2goECjwKggq4CvALUAuWC7x4nGNgZGBg0GZMYRBlAAEmIOYCQgaG/2A+AwAYlAG8AHicbZE9TsMwGIbf9A/RSggEYmHxAgtq+jN2ZGj3Dt3T1GlTOXHkuBW9AyfgEByCgTNwCA7BW/NJlVBtyd/jx+8XKwmAa3whwnFE6Ib1OBq44O6Pm6Qb4Rb5QbiNHh6FO/RD4S6eMRHu4RaaT4halzR3eBVu4Apvwk36d+EW+UO4jXt8Cnfov4W7WOBHuIen6MXsCtvPU1vWc73emcSdxIkW2tW5LdUoHp7kTJfaJV6v1PKg6v167H2mMmcLNbWl18ZYVTm71amPN95Xk8EgEx+ntoDBDgUs+siRspaoMef7rukNEriziXNuwS7Hmoe9wggxv+e55IzJMqQTeNYV00scuNbY8+YxrUfGfcaMZb/CNPQe04bT0lThbEuT0sfYhK6K/23Amf3Lx+H24hcj4GScAAAAeJxtjtlugzAQRbkJUEJIuu/7vqR8lGNPAcWx0YAb5e/LklR96EgenSufGY038PqKvf9rhgGG8BEgxA4ijBBjjAQTTLGLPezjAIc4wjFOcIoznOMCl7jCNW5wizvc4wGPeMIzXvCKN7zjAzN8eonQRWZSSaYmjvug6ase98hFltexMJmmVNmV2WBvdNgZUc+ujAWzXW3UDnu1w43asStHc8GpzAXX/py0jqTQZJTgkcxJLpaCF0lD32xNt+43tAsn29Dft02uDKS2cjGUNgsk26qK2lFthYoU27INPqmiDqg5goe0pqR5qSoqMdek/CUZFywL46rEsiImleqiqoMyt4baXlu/1GLdNFf5zbcNmdr1YUWCZe47o+zUmb/DoStbw3cVsef9ALjjiPQA) format(\'woff\');\n      font-weight: normal;\n      font-style: normal;\n    }\n\n    html {\n      --lumo-icons-align-center: "\\ea01";\n      --lumo-icons-align-left: "\\ea02";\n      --lumo-icons-align-right: "\\ea03";\n      --lumo-icons-angle-down: "\\ea04";\n      --lumo-icons-angle-left: "\\ea05";\n      --lumo-icons-angle-right: "\\ea06";\n      --lumo-icons-angle-up: "\\ea07";\n      --lumo-icons-arrow-down: "\\ea08";\n      --lumo-icons-arrow-left: "\\ea09";\n      --lumo-icons-arrow-right: "\\ea0a";\n      --lumo-icons-arrow-up: "\\ea0b";\n      --lumo-icons-bar-chart: "\\ea0c";\n      --lumo-icons-bell: "\\ea0d";\n      --lumo-icons-calendar: "\\ea0e";\n      --lumo-icons-checkmark: "\\ea0f";\n      --lumo-icons-chevron-down: "\\ea10";\n      --lumo-icons-chevron-left: "\\ea11";\n      --lumo-icons-chevron-right: "\\ea12";\n      --lumo-icons-chevron-up: "\\ea13";\n      --lumo-icons-clock: "\\ea14";\n      --lumo-icons-cog: "\\ea15";\n      --lumo-icons-cross: "\\ea16";\n      --lumo-icons-download: "\\ea17";\n      --lumo-icons-dropdown: "\\ea18";\n      --lumo-icons-edit: "\\ea19";\n      --lumo-icons-error: "\\ea1a";\n      --lumo-icons-eye: "\\ea1b";\n      --lumo-icons-eye-disabled: "\\ea1c";\n      --lumo-icons-menu: "\\ea1d";\n      --lumo-icons-minus: "\\ea1e";\n      --lumo-icons-ordered-list: "\\ea1f";\n      --lumo-icons-phone: "\\ea20";\n      --lumo-icons-photo: "\\ea21";\n      --lumo-icons-play: "\\ea22";\n      --lumo-icons-plus: "\\ea23";\n      --lumo-icons-redo: "\\ea24";\n      --lumo-icons-reload: "\\ea25";\n      --lumo-icons-search: "\\ea26";\n      --lumo-icons-undo: "\\ea27";\n      --lumo-icons-unordered-list: "\\ea28";\n      --lumo-icons-upload: "\\ea29";\n      --lumo-icons-user: "\\ea2a";\n    }\n  </style>\n</custom-style>',document.head.appendChild(Ne.content);const ke=document.createElement("template");ke.innerHTML="<custom-style>\n  <style>\n    html {\n      --lumo-size-xs: 1.625rem;\n      --lumo-size-s: 1.875rem;\n      --lumo-size-m: 2.25rem;\n      --lumo-size-l: 2.75rem;\n      --lumo-size-xl: 3.5rem;\n\n      /* Icons */\n      --lumo-icon-size-s: 1.25em;\n      --lumo-icon-size-m: 1.5em;\n      --lumo-icon-size-l: 2.25em;\n      /* For backwards compatibility */\n      --lumo-icon-size: var(--lumo-icon-size-m);\n    }\n  </style>\n</custom-style>",document.head.appendChild(ke.content);const De=document.createElement("template");De.innerHTML="<custom-style>\n  <style>\n    html {\n      /* Square */\n      --lumo-space-xs: 0.25rem;\n      --lumo-space-s: 0.5rem;\n      --lumo-space-m: 1rem;\n      --lumo-space-l: 1.5rem;\n      --lumo-space-xl: 2.5rem;\n\n      /* Wide */\n      --lumo-space-wide-xs: calc(var(--lumo-space-xs) / 2) var(--lumo-space-xs);\n      --lumo-space-wide-s: calc(var(--lumo-space-s) / 2) var(--lumo-space-s);\n      --lumo-space-wide-m: calc(var(--lumo-space-m) / 2) var(--lumo-space-m);\n      --lumo-space-wide-l: calc(var(--lumo-space-l) / 2) var(--lumo-space-l);\n      --lumo-space-wide-xl: calc(var(--lumo-space-xl) / 2) var(--lumo-space-xl);\n\n      /* Tall */\n      --lumo-space-tall-xs: var(--lumo-space-xs) calc(var(--lumo-space-xs) / 2);\n      --lumo-space-tall-s: var(--lumo-space-s) calc(var(--lumo-space-s) / 2);\n      --lumo-space-tall-m: var(--lumo-space-m) calc(var(--lumo-space-m) / 2);\n      --lumo-space-tall-l: var(--lumo-space-l) calc(var(--lumo-space-l) / 2);\n      --lumo-space-tall-xl: var(--lumo-space-xl) calc(var(--lumo-space-xl) / 2);\n    }\n  </style>\n</custom-style>",document.head.appendChild(De.content);const Le$2=document.createElement("template");Le$2.innerHTML="<custom-style>\n  <style>\n    html {\n      /* Border radius */\n      --lumo-border-radius-s: 0.25em; /* Checkbox, badge, date-picker year indicator, etc */\n      --lumo-border-radius-m: var(--lumo-border-radius, 0.25em); /* Button, text field, menu overlay, etc */\n      --lumo-border-radius-l: 0.5em; /* Dialog, notification, etc */\n      --lumo-border-radius: 0.25em; /* Deprecated */\n\n      /* Shadow */\n      --lumo-box-shadow-xs: 0 1px 4px -1px var(--lumo-shade-50pct);\n      --lumo-box-shadow-s: 0 2px 4px -1px var(--lumo-shade-20pct), 0 3px 12px -1px var(--lumo-shade-30pct);\n      --lumo-box-shadow-m: 0 2px 6px -1px var(--lumo-shade-20pct), 0 8px 24px -4px var(--lumo-shade-40pct);\n      --lumo-box-shadow-l: 0 3px 18px -2px var(--lumo-shade-20pct), 0 12px 48px -6px var(--lumo-shade-40pct);\n      --lumo-box-shadow-xl: 0 4px 24px -3px var(--lumo-shade-20pct), 0 18px 64px -8px var(--lumo-shade-40pct);\n\n      /* Clickable element cursor */\n      --lumo-clickable-cursor: default;\n    }\n  </style>\n</custom-style>",document.head.appendChild(Le$2.content);const Me$1=document.createElement("template");Me$1.innerHTML='<custom-style>\n  <style>\n    html {\n      /* Font families */\n      --lumo-font-family: -apple-system, BlinkMacSystemFont, "Roboto", "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n\n      /* Font sizes */\n      --lumo-font-size-xxs: .75rem;\n      --lumo-font-size-xs: .8125rem;\n      --lumo-font-size-s: .875rem;\n      --lumo-font-size-m: 1rem;\n      --lumo-font-size-l: 1.125rem;\n      --lumo-font-size-xl: 1.375rem;\n      --lumo-font-size-xxl: 1.75rem;\n      --lumo-font-size-xxxl: 2.5rem;\n\n      /* Line heights */\n      --lumo-line-height-xs: 1.25;\n      --lumo-line-height-s: 1.375;\n      --lumo-line-height-m: 1.625;\n    }\n\n  </style>\n</custom-style><dom-module id="lumo-typography">\n  <template>\n    <style>\n      html {\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size, var(--lumo-font-size-m));\n        line-height: var(--lumo-line-height-m);\n        -webkit-text-size-adjust: 100%;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      /* Can’t combine with the above selector because that doesn’t work in browsers without native shadow dom */\n      :host {\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size, var(--lumo-font-size-m));\n        line-height: var(--lumo-line-height-m);\n        -webkit-text-size-adjust: 100%;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      small,\n      [theme~="font-size-s"] {\n        font-size: var(--lumo-font-size-s);\n        line-height: var(--lumo-line-height-s);\n      }\n\n      [theme~="font-size-xs"] {\n        font-size: var(--lumo-font-size-xs);\n        line-height: var(--lumo-line-height-xs);\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        font-weight: 600;\n        line-height: var(--lumo-line-height-xs);\n        margin-top: 1.25em;\n      }\n\n      h1 {\n        font-size: var(--lumo-font-size-xxxl);\n        margin-bottom: 0.75em;\n      }\n\n      h2 {\n        font-size: var(--lumo-font-size-xxl);\n        margin-bottom: 0.5em;\n      }\n\n      h3 {\n        font-size: var(--lumo-font-size-xl);\n        margin-bottom: 0.5em;\n      }\n\n      h4 {\n        font-size: var(--lumo-font-size-l);\n        margin-bottom: 0.5em;\n      }\n\n      h5 {\n        font-size: var(--lumo-font-size-m);\n        margin-bottom: 0.25em;\n      }\n\n      h6 {\n        font-size: var(--lumo-font-size-xs);\n        margin-bottom: 0;\n        text-transform: uppercase;\n        letter-spacing: 0.03em;\n      }\n\n      p,\n      blockquote {\n        margin-top: 0.5em;\n        margin-bottom: 0.75em;\n      }\n\n      a {\n        text-decoration: none;\n      }\n\n      a:hover {\n        text-decoration: underline;\n      }\n\n      hr {\n        display: block;\n        align-self: stretch;\n        height: 1px;\n        border: 0;\n        padding: 0;\n        margin: var(--lumo-space-s) calc(var(--lumo-border-radius-m) / 2);\n        background-color: var(--lumo-contrast-10pct);\n      }\n\n      blockquote {\n        border-left: 2px solid var(--lumo-contrast-30pct);\n      }\n\n      b,\n      strong {\n        font-weight: 600;\n      }\n\n      /* RTL specific styles */\n\n      blockquote[dir="rtl"] {\n        border-left: none;\n        border-right: 2px solid var(--lumo-contrast-30pct);\n      }\n\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(Me$1.content),String(Math.random()).slice(2),window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e});(()=>{try{const e={get capture(){return !1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e);}catch(e){}})(),"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.0"),void 0===window.ShadyCSS||void 0===window.ShadyCSS.prepareTemplateDom&&console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),window.JSCompiler_renameProperty=(e,t)=>e;const He=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Be=Symbol();class $e{constructor(e,t){if(t!==Be)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e;}get styleSheet(){return void 0===this._styleSheet&&(He?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const Ve$2=e=>{if(e instanceof $e)return e.cssText;if("number"==typeof e)return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)},Ge$1=(e,...t)=>{const i=t.reduce(((t,i,s)=>t+Ve$2(i)+e[s+1]),e[0]);return new $e(i,Be)};(window.litElementVersions||(window.litElementVersions=[])).push("2.5.0");let je$1=0;const We={},Ue$1=(e,t,i)=>{const s=i&&i.moduleId||"custom-style-module-"+je$1++;Array.isArray(t)||(t=t?[t]:[]),t.forEach((e=>{if(!(e instanceof $e))throw new Error("An item in styles is not of type CSSResult. Use `unsafeCSS` or `css`.");if(!We[e]){const t=document.createElement("dom-module");t.innerHTML=`\n        <template>\n          <style>${e.toString()}</style>\n        </template>\n      `;const i="custom-style-module-"+je$1++;t.register(i),We[e]=i;}}));const r=document.createElement("dom-module");if(e){const t=window.customElements&&window.customElements.get(e);t&&t.hasOwnProperty("__finalized")&&console.warn(`The custom element definition for "${e}"\n      was finalized before a style module was registered.\n      Make sure to add component specific style modules before\n      importing the corresponding custom element.`),r.setAttribute("theme-for",e);}const n=i&&i.include||[];r.innerHTML=`\n    <template>\n      ${n.map((e=>`<style include=${e}></style>`))}\n      ${t.map((e=>`<style include=${We[e]}></style>`))}\n    </template>\n  `,r.register(s);};Ue$1("vaadin-checkbox",Ge$1`
    :host {
      -webkit-tap-highlight-color: transparent;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
      cursor: default;
      outline: none;
    }

    [part='label']:not([empty]) {
      margin: 0.1875em 0.875em 0.1875em 0.375em;
    }

    [part='checkbox'] {
      width: calc(1em + 2px);
      height: calc(1em + 2px);
      margin: 0.1875em;
      position: relative;
      border-radius: var(--lumo-border-radius-s);
      background-color: var(--lumo-contrast-20pct);
      transition: transform 0.2s cubic-bezier(0.12, 0.32, 0.54, 2), background-color 0.15s;
      pointer-events: none;
      line-height: 1.2;
    }

    :host([indeterminate]) [part='checkbox'],
    :host([checked]) [part='checkbox'] {
      background-color: var(--lumo-primary-color);
    }

    /* Needed to align the checkbox nicely on the baseline */
    [part='checkbox']::before {
      content: '\\2003';
    }

    /* Checkmark */
    [part='checkbox']::after {
      content: '';
      display: inline-block;
      width: 0;
      height: 0;
      border: 0 solid var(--lumo-primary-contrast-color);
      border-width: 0.1875em 0 0 0.1875em;
      box-sizing: border-box;
      transform-origin: 0 0;
      position: absolute;
      top: 0.8125em;
      left: 0.5em;
      transform: scale(0.55) rotate(-135deg);
      opacity: 0;
    }

    :host([checked]) [part='checkbox']::after {
      opacity: 1;
      width: 0.625em;
      height: 1.0625em;
    }

    /* Indeterminate checkmark */
    :host([indeterminate]) [part='checkbox']::after {
      transform: none;
      opacity: 1;
      top: 45%;
      height: 10%;
      left: 22%;
      right: 22%;
      width: auto;
      border: 0;
      background-color: var(--lumo-primary-contrast-color);
      transition: opacity 0.25s;
    }

    /* Focus ring */
    :host([focus-ring]) [part='checkbox'] {
      box-shadow: 0 0 0 3px var(--lumo-primary-color-50pct);
    }

    /* Disabled */
    :host([disabled]) {
      pointer-events: none;
      color: var(--lumo-disabled-text-color);
    }

    :host([disabled]) [part='label'] ::slotted(*) {
      color: inherit;
    }

    :host([disabled]) [part='checkbox'] {
      background-color: var(--lumo-contrast-10pct);
    }

    :host([disabled]) [part='checkbox']::after {
      border-color: var(--lumo-contrast-30pct);
    }

    :host([indeterminate][disabled]) [part='checkbox']::after {
      background-color: var(--lumo-contrast-30pct);
    }

    /* RTL specific styles */
    :host([dir='rtl']) [part='label']:not([empty]) {
      margin: 0.1875em 0.375em 0.1875em 0.875em;
    }

    /* Transition the checkmark if activated with the mouse (disabled for grid select-all this way) */
    :host(:hover) [part='checkbox']::after {
      transition: width 0.1s, height 0.25s;
    }

    /* Used for activation "halo" */
    [part='checkbox']::before {
      color: transparent;
      display: inline-block;
      width: 100%;
      height: 100%;
      border-radius: inherit;
      background-color: inherit;
      transform: scale(1.4);
      opacity: 0;
      transition: transform 0.1s, opacity 0.8s;
    }

    /* Hover */
    :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part='checkbox'] {
      background-color: var(--lumo-contrast-30pct);
    }

    /* Disable hover for touch devices */
    @media (pointer: coarse) {
      :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part='checkbox'] {
        background-color: var(--lumo-contrast-20pct);
      }
    }

    /* Active */
    :host([active]) [part='checkbox'] {
      transform: scale(0.9);
      transition-duration: 0.05s;
    }

    :host([active][checked]) [part='checkbox'] {
      transform: scale(1.1);
    }

    :host([active]:not([checked])) [part='checkbox']::before {
      transition-duration: 0.01s, 0.01s;
      transform: scale(0);
      opacity: 0.4;
    }
  `,{moduleId:"lumo-checkbox"});let Ye=0;const qe$1=function(e){let t=e.__mixinApplications;t||(t=new WeakMap,e.__mixinApplications=t);let i=Ye++;function s(s){let r=s.__mixinSet;if(r&&r[i])return s;let n=t,o=n.get(s);if(!o){o=e(s),n.set(s,o);let t=Object.create(o.__mixinSet||r||null);t[i]=!0,o.__mixinSet=t;}return o}return s},Je=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?e=>ShadyDOM.patch(e):e=>e;function Xe(e){return e.indexOf(".")>=0}function Ze(e){let t=e.indexOf(".");return -1===t?e:e.slice(0,t)}function Ke(e,t){return 0===e.indexOf(t+".")}function Qe$1(e,t){return 0===t.indexOf(e+".")}function et$2(e,t,i){return t+i.slice(e.length)}function tt$2(e,t){return e===t||Ke(e,t)||Qe$1(e,t)}function it$2(e){if(Array.isArray(e)){let t=[];for(let i=0;i<e.length;i++){let s=e[i].toString().split(".");for(let e=0;e<s.length;e++)t.push(s[e]);}return t.join(".")}return e}function st$2(e){return Array.isArray(e)?it$2(e).split("."):e.toString().split(".")}function rt$2(e,t,i){let s=e,r=st$2(t);for(let n=0;n<r.length;n++){if(!s)return;s=s[r[n]];}return i&&(i.path=r.join(".")),s}function nt$1(e,t,i){let s=e,r=st$2(t),n=r[r.length-1];if(r.length>1){for(let e=0;e<r.length-1;e++){if(s=s[r[e]],!s)return}s[n]=i;}else s[t]=i;return r.join(".")}const ot$2={},at$2=/-[a-z]/g,lt$2=/([A-Z])/g;function dt(e){return ot$2[e]||(ot$2[e]=e.indexOf("-")<0?e:e.replace(at$2,(e=>e[1].toUpperCase())))}function ht$2(e){return ot$2[e]||(ot$2[e]=e.replace(lt$2,"-$1").toLowerCase())}let ct$2=0,ut$2=0,pt$1=[],_t=0,mt$2=!1,ft$2=document.createTextNode("");function gt$2(){mt$2=!1;const e=pt$1.length;for(let i=0;i<e;i++){let e=pt$1[i];if(e)try{e();}catch(t){setTimeout((()=>{throw t}));}}pt$1.splice(0,e),ut$2+=e;}new window.MutationObserver(gt$2).observe(ft$2,{characterData:!0});const yt$2={after:e=>({run:t=>window.setTimeout(t,e),cancel(e){window.clearTimeout(e);}}),run:(e,t)=>window.setTimeout(e,t),cancel(e){window.clearTimeout(e);}},bt$2={run:e=>window.requestAnimationFrame(e),cancel(e){window.cancelAnimationFrame(e);}},vt$1={run:e=>window.requestIdleCallback?window.requestIdleCallback(e):window.setTimeout(e,16),cancel(e){window.cancelIdleCallback?window.cancelIdleCallback(e):window.clearTimeout(e);}},wt$2={run:e=>(mt$2||(mt$2=!0,ft$2.textContent=_t++),pt$1.push(e),ct$2++),cancel(e){const t=e-ut$2;if(t>=0){if(!pt$1[t])throw new Error("invalid async handle: "+e);pt$1[t]=null;}}},At$1=wt$2,Ct=qe$1((e=>{class t extends e{static createProperties(e){const t=this.prototype;for(let i in e)i in t||t._createPropertyAccessor(i);}static attributeNameForProperty(e){return e.toLowerCase()}static typeForProperty(e){}_createPropertyAccessor(e,t){this._addPropertyToAttributeMap(e),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[e]||(this.__dataHasAccessor[e]=!0,this._definePropertyAccessor(e,t));}_addPropertyToAttributeMap(e){this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes));let t=this.__dataAttributes[e];return t||(t=this.constructor.attributeNameForProperty(e),this.__dataAttributes[t]=e),t}_definePropertyAccessor(e,t){Object.defineProperty(this,e,{get(){return this.__data[e]},set:t?function(){}:function(t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties();}});}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__dataCounter=0,this.__serializing=!1,this._initializeProperties();}ready(){this.__dataReady=!0,this._flushProperties();}_initializeProperties(){for(let e in this.__dataHasAccessor)this.hasOwnProperty(e)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[e]=this[e],delete this[e]);}_initializeInstanceProperties(e){Object.assign(this,e);}_setProperty(e,t){this._setPendingProperty(e,t)&&this._invalidateProperties();}_getProperty(e){return this.__data[e]}_setPendingProperty(e,t,i){let s=this.__data[e],r=this._shouldPropertyChange(e,t,s);return r&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(e in this.__dataOld)&&(this.__dataOld[e]=s),this.__data[e]=t,this.__dataPending[e]=t),r}_isPropertyPending(e){return !(!this.__dataPending||!this.__dataPending.hasOwnProperty(e))}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,At$1.run((()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties());})));}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready());}_flushProperties(){this.__dataCounter++;const e=this.__data,t=this.__dataPending,i=this.__dataOld;this._shouldPropertiesChange(e,t,i)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(e,t,i)),this.__dataCounter--;}_shouldPropertiesChange(e,t,i){return Boolean(t)}_propertiesChanged(e,t,i){}_shouldPropertyChange(e,t,i){return i!==t&&(i==i||t==t)}attributeChangedCallback(e,t,i,s){t!==i&&this._attributeToProperty(e,i),super.attributeChangedCallback&&super.attributeChangedCallback(e,t,i,s);}_attributeToProperty(e,t,i){if(!this.__serializing){const s=this.__dataAttributes,r=s&&s[e]||e;this[r]=this._deserializeValue(t,i||this.constructor.typeForProperty(r));}}_propertyToAttribute(e,t,i){this.__serializing=!0,i=arguments.length<3?this[e]:i,this._valueToNodeAttribute(this,i,t||this.constructor.attributeNameForProperty(e)),this.__serializing=!1;}_valueToNodeAttribute(e,t,i){const s=this._serializeValue(t);"class"!==i&&"name"!==i&&"slot"!==i||(e=Je(e)),void 0===s?e.removeAttribute(i):e.setAttribute(i,s);}_serializeValue(e){return "boolean"==typeof e?e?"":void 0:null!=e?e.toString():void 0}_deserializeValue(e,t){switch(t){case Boolean:return null!==e;case Number:return Number(e);default:return e}}}return t})),St$1={};let xt$1=HTMLElement.prototype;for(;xt$1;){let e=Object.getOwnPropertyNames(xt$1);for(let t=0;t<e.length;t++)St$1[e[t]]=!0;xt$1=Object.getPrototypeOf(xt$1);}function Pt$1(e,t){if(!St$1[t]){let i=e[t];void 0!==i&&(e.__data?e._setPendingProperty(t,i):(e.__dataProto?e.hasOwnProperty(JSCompiler_renameProperty("__dataProto",e))||(e.__dataProto=Object.create(e.__dataProto)):e.__dataProto={},e.__dataProto[t]=i));}}const Et=qe$1((e=>{const t=Ct(e);class i extends t{static createPropertiesForAttributes(){let e=this.observedAttributes;for(let t=0;t<e.length;t++)this.prototype._createPropertyAccessor(dt(e[t]));}static attributeNameForProperty(e){return ht$2(e)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties();}_initializeProtoProperties(e){for(let t in e)this._setProperty(t,e[t]);}_ensureAttribute(e,t){const i=this;i.hasAttribute(e)||this._valueToNodeAttribute(i,t,e);}_serializeValue(e){if("object"==typeof e){if(e instanceof Date)return e.toString();if(e)try{return JSON.stringify(e)}catch(t){return ""}}return super._serializeValue(e)}_deserializeValue(e,t){let i;switch(t){case Object:try{i=JSON.parse(e);}catch(s){i=e;}break;case Array:try{i=JSON.parse(e);}catch(s){i=null,console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${e}`);}break;case Date:i=isNaN(e)?String(e):Number(e),i=new Date(i);break;default:i=super._deserializeValue(e,t);}return i}_definePropertyAccessor(e,t){Pt$1(this,e),super._definePropertyAccessor(e,t);}_hasAccessor(e){return this.__dataHasAccessor&&this.__dataHasAccessor[e]}_isPropertyPending(e){return Boolean(this.__dataPending&&e in this.__dataPending)}}return i})),Tt={"dom-if":!0,"dom-repeat":!0};let It$1=!1,Ot=!1;function zt(){if(!It$1){It$1=!0;const e=document.createElement("textarea");e.placeholder="a",Ot=e.placeholder===e.textContent;}return Ot}function Rt$1(e){zt()&&"textarea"===e.localName&&e.placeholder&&e.placeholder===e.textContent&&(e.textContent=null);}function Nt(e){let t=e.getAttribute("is");if(t&&Tt[t]){let i=e;for(i.removeAttribute("is"),e=i.ownerDocument.createElement(t),i.parentNode.replaceChild(e,i),e.appendChild(i);i.attributes.length;)e.setAttribute(i.attributes[0].name,i.attributes[0].value),i.removeAttribute(i.attributes[0].name);}return e}function kt$1(e,t){let i=t.parentInfo&&kt$1(e,t.parentInfo);if(!i)return e;for(let s=i.firstChild,r=0;s;s=s.nextSibling)if(t.parentIndex===r++)return s}function Dt(e,t,i,s){s.id&&(t[s.id]=i);}function Lt(e,t,i){if(i.events&&i.events.length)for(let s,r=0,n=i.events;r<n.length&&(s=n[r]);r++)e._addMethodEventListenerToNode(t,s.name,s.value,e);}function Mt$1(e,t,i,s){i.templateInfo&&(t._templateInfo=i.templateInfo,t._parentTemplateInfo=s);}function Ft$1(e,t,i){return e=e._methodHost||e,function(t){e[i]?e[i](t,t.detail):console.warn("listener method `"+i+"` not defined");}}const Ht=qe$1((e=>{class t extends e{static _parseTemplate(e,t){if(!e._templateInfo){let i=e._templateInfo={};i.nodeInfoList=[],i.nestedTemplate=Boolean(t),i.stripWhiteSpace=t&&t.stripWhiteSpace||e.hasAttribute("strip-whitespace"),this._parseTemplateContent(e,i,{parent:null});}return e._templateInfo}static _parseTemplateContent(e,t,i){return this._parseTemplateNode(e.content,t,i)}static _parseTemplateNode(e,t,i){let s=!1,r=e;return "template"!=r.localName||r.hasAttribute("preserve-content")?"slot"===r.localName&&(t.hasInsertionPoint=!0):s=this._parseTemplateNestedTemplate(r,t,i)||s,Rt$1(r),r.firstChild&&this._parseTemplateChildNodes(r,t,i),r.hasAttributes&&r.hasAttributes()&&(s=this._parseTemplateNodeAttributes(r,t,i)||s),s||i.noted}static _parseTemplateChildNodes(e,t,i){if("script"!==e.localName&&"style"!==e.localName)for(let s,r=e.firstChild,n=0;r;r=s){if("template"==r.localName&&(r=Nt(r)),s=r.nextSibling,r.nodeType===Node.TEXT_NODE){let i=s;for(;i&&i.nodeType===Node.TEXT_NODE;)r.textContent+=i.textContent,s=i.nextSibling,e.removeChild(i),i=s;if(t.stripWhiteSpace&&!r.textContent.trim()){e.removeChild(r);continue}}let o={parentIndex:n,parentInfo:i};this._parseTemplateNode(r,t,o)&&(o.infoIndex=t.nodeInfoList.push(o)-1),r.parentNode&&n++;}}static _parseTemplateNestedTemplate(e,t,i){let s=e,r=this._parseTemplate(s,t);return (r.content=s.content.ownerDocument.createDocumentFragment()).appendChild(s.content),i.templateInfo=r,!0}static _parseTemplateNodeAttributes(e,t,i){let s=!1,r=Array.from(e.attributes);for(let n,o=r.length-1;n=r[o];o--)s=this._parseTemplateNodeAttribute(e,t,i,n.name,n.value)||s;return s}static _parseTemplateNodeAttribute(e,t,i,s,r){return "on-"===s.slice(0,3)?(e.removeAttribute(s),i.events=i.events||[],i.events.push({name:s.slice(3),value:r}),!0):"id"===s&&(i.id=r,!0)}static _contentForTemplate(e){let t=e._templateInfo;return t&&t.content||e.content}_stampTemplate(e,t){e&&!e.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(e);let i=(t=t||this.constructor._parseTemplate(e)).nodeInfoList,s=t.content||e.content,r=document.importNode(s,!0);r.__noInsertionPoint=!t.hasInsertionPoint;let n=r.nodeList=new Array(i.length);r.$={};for(let o,a=0,l=i.length;a<l&&(o=i[a]);a++){let e=n[a]=kt$1(r,o);Dt(this,r.$,e,o),Mt$1(this,e,o,t),Lt(this,e,o);}return r=r,r}_addMethodEventListenerToNode(e,t,i,s){let r=Ft$1(s=s||e,t,i);return this._addEventListenerToNode(e,t,r),r}_addEventListenerToNode(e,t,i){e.addEventListener(t,i);}_removeEventListenerFromNode(e,t,i){e.removeEventListener(t,i);}}return t}));let Bt=0;const $t=[],Vt={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},Gt$1="__computeInfo",jt=/[A-Z]/;function Wt(e,t,i){let s=e[t];if(s){if(!e.hasOwnProperty(t)&&(s=e[t]=Object.create(e[t]),i))for(let r in s){let e=s[r],t=s[r]=Array(e.length);for(let i=0;i<e.length;i++)t[i]=e[i];}}else s=e[t]={};return s}function Ut(e,t,i,s,r,n){if(t){let o=!1;const a=Bt++;for(let l in i){let d=t[r?Ze(l):l];if(d)for(let t,h=0,c=d.length;h<c&&(t=d[h]);h++)t.info&&t.info.lastRun===a||r&&!qt$1(l,t.trigger)||(t.info&&(t.info.lastRun=a),t.fn(e,l,i,s,t.info,r,n),o=!0);}return o}return !1}function Yt(e,t,i,s,r,n,o,a){let l=!1,d=t[o?Ze(s):s];if(d)for(let h,c=0,u=d.length;c<u&&(h=d[c]);c++)h.info&&h.info.lastRun===i||o&&!qt$1(s,h.trigger)||(h.info&&(h.info.lastRun=i),h.fn(e,s,r,n,h.info,o,a),l=!0);return l}function qt$1(e,t){if(t){let i=t.name;return i==e||!(!t.structured||!Ke(i,e))||!(!t.wildcard||!Qe$1(i,e))}return !0}function Jt(e,t,i,s,r){let n="string"==typeof r.method?e[r.method]:r.method,o=r.property;n?n.call(e,e.__data[o],s[o]):r.dynamicFn||console.warn("observer method `"+r.method+"` not defined");}function Xt(e,t,i,s,r){let n,o,a=e[Vt.NOTIFY],l=Bt++;for(let d in t)t[d]&&(a&&Yt(e,a,l,d,i,s,r)||r&&Zt(e,d,i))&&(n=!0);n&&(o=e.__dataHost)&&o._invalidateProperties&&o._invalidateProperties();}function Zt(e,t,i){let s=Ze(t);if(s!==t){return Kt(e,ht$2(s)+"-changed",i[t],t),!0}return !1}function Kt(e,t,i,s){let r={value:i,queueProperty:!0};s&&(r.path=s),Je(e).dispatchEvent(new CustomEvent(t,{detail:r}));}function Qt(e,t,i,s,r,n){let o=(n?Ze(t):t)!=t?t:null,a=o?rt$2(e,o):e.__data[t];o&&void 0===a&&(a=i[t]),Kt(e,r.eventName,a,o);}function ei(e,t,i,s,r){let n,o=e.detail,a=o&&o.path;a?(s=et$2(i,s,a),n=o&&o.value):n=e.currentTarget[i],n=r?!n:n,t[Vt.READ_ONLY]&&t[Vt.READ_ONLY][s]||!t._setPendingPropertyOrPath(s,n,!0,Boolean(a))||o&&o.queueProperty||t._invalidateProperties();}function ti(e,t,i,s,r){let n=e.__data[t];J$5&&(n=J$5(n,r.attrName,"attribute",e)),e._propertyToAttribute(t,r.attrName,n);}function ii(e,t,i,s){let r=e[Vt.COMPUTE];if(r)if(se$4){Bt++;const n=ni(e),o=[];for(let e in t)ri(e,r,o,n,s);let a;for(;a=o.shift();)ai(e,"",t,i,a)&&ri(a.methodInfo,r,o,n,s);Object.assign(i,e.__dataOld),Object.assign(t,e.__dataPending),e.__dataPending=null;}else {let n=t;for(;Ut(e,r,n,i,s);)Object.assign(i,e.__dataOld),Object.assign(t,e.__dataPending),n=e.__dataPending,e.__dataPending=null;}}const si=(e,t,i)=>{let s=0,r=t.length-1,n=-1;for(;s<=r;){const o=s+r>>1,a=i.get(t[o].methodInfo)-i.get(e.methodInfo);if(a<0)s=o+1;else {if(!(a>0)){n=o;break}r=o-1;}}n<0&&(n=r+1),t.splice(n,0,e);},ri=(e,t,i,s,r)=>{const n=t[r?Ze(e):e];if(n)for(let o=0;o<n.length;o++){const t=n[o];t.info.lastRun===Bt||r&&!qt$1(e,t.trigger)||(t.info.lastRun=Bt,si(t.info,i,s));}};function ni(e){let t=e.constructor.__orderedComputedDeps;if(!t){t=new Map;const i=e[Vt.COMPUTE];let s,{counts:r,ready:n,total:o}=oi(e);for(;s=n.shift();){t.set(s,t.size);const e=i[s];e&&e.forEach((e=>{const t=e.info.methodInfo;--o,0==--r[t]&&n.push(t);}));}if(0!==o){const t=e;console.warn(`Computed graph for ${t.localName} incomplete; circular?`);}e.constructor.__orderedComputedDeps=t;}return t}function oi(e){const t=e[Gt$1],i={},s=e[Vt.COMPUTE],r=[];let n=0;for(let o in t){const e=t[o];n+=i[o]=e.args.filter((e=>!e.literal)).length+(e.dynamicFn?1:0);}for(let o in s)t[o]||r.push(o);return {counts:i,ready:r,total:n}}function ai(e,t,i,s,r){let n=bi(e,t,i,s,r);if(n===$t)return !1;let o=r.methodInfo;return e.__dataHasAccessor&&e.__dataHasAccessor[o]?e._setPendingProperty(o,n,!0):(e[o]=n,!1)}function li(e,t,i){let s=e.__dataLinkedPaths;if(s){let r;for(let n in s){let o=s[n];Qe$1(n,t)?(r=et$2(n,o,t),e._setPendingPropertyOrPath(r,i,!0,!0)):Qe$1(o,t)&&(r=et$2(o,n,t),e._setPendingPropertyOrPath(r,i,!0,!0));}}}function di(e,t,i,s,r,n,o){i.bindings=i.bindings||[];let a={kind:s,target:r,parts:n,literal:o,isCompound:1!==n.length};if(i.bindings.push(a),_i(a)){let{event:e,negate:t}=a.parts[0];a.listenerEvent=e||ht$2(r)+"-changed",a.listenerNegate=t;}let l=t.nodeInfoList.length;for(let d=0;d<a.parts.length;d++){let i=a.parts[d];i.compoundIndex=d,hi(e,t,a,i,l);}}function hi(e,t,i,s,r){if(!s.literal)if("attribute"===i.kind&&"-"===i.target[0])console.warn("Cannot set attribute "+i.target+' because "-" is not a valid attribute starting character');else {let n=s.dependencies,o={index:r,binding:i,part:s,evaluator:e};for(let i=0;i<n.length;i++){let s=n[i];"string"==typeof s&&(s=Ei(s),s.wildcard=!0),e._addTemplatePropertyEffect(t,s.rootProperty,{fn:ci,info:o,trigger:s});}}}function ci(e,t,i,s,r,n,o){let a=o[r.index],l=r.binding,d=r.part;if(n&&d.source&&t.length>d.source.length&&"property"==l.kind&&!l.isCompound&&a.__isPropertyEffectsClient&&a.__dataHasAccessor&&a.__dataHasAccessor[l.target]){let s=i[t];t=et$2(d.source,l.target,t),a._setPendingPropertyOrPath(t,s,!1,!0)&&e._enqueueClient(a);}else {let o=r.evaluator._evaluateBinding(e,d,t,i,s,n);o!==$t&&ui(e,a,l,d,o);}}function ui(e,t,i,s,r){if(r=pi(t,r,i,s),J$5&&(r=J$5(r,i.target,i.kind,t)),"attribute"==i.kind)e._valueToNodeAttribute(t,r,i.target);else {let s=i.target;t.__isPropertyEffectsClient&&t.__dataHasAccessor&&t.__dataHasAccessor[s]?t[Vt.READ_ONLY]&&t[Vt.READ_ONLY][s]||t._setPendingProperty(s,r)&&e._enqueueClient(t):e._setUnmanagedPropertyToNode(t,s,r);}}function pi(e,t,i,s){if(i.isCompound){let r=e.__dataCompoundStorage[i.target];r[s.compoundIndex]=t,t=r.join("");}return "attribute"!==i.kind&&("textContent"!==i.target&&("value"!==i.target||"input"!==e.localName&&"textarea"!==e.localName)||(t=null==t?"":t)),t}function _i(e){return Boolean(e.target)&&"attribute"!=e.kind&&"text"!=e.kind&&!e.isCompound&&"{"===e.parts[0].mode}function mi(e,t){let{nodeList:i,nodeInfoList:s}=t;if(s.length)for(let r=0;r<s.length;r++){let t=s[r],n=i[r],o=t.bindings;if(o)for(let i=0;i<o.length;i++){let t=o[i];fi(n,t),gi(n,e,t);}n.__dataHost=e;}}function fi(e,t){if(t.isCompound){let i=e.__dataCompoundStorage||(e.__dataCompoundStorage={}),s=t.parts,r=new Array(s.length);for(let e=0;e<s.length;e++)r[e]=s[e].literal;let n=t.target;i[n]=r,t.literal&&"property"==t.kind&&("className"===n&&(e=Je(e)),e[n]=t.literal);}}function gi(e,t,i){if(i.listenerEvent){let s=i.parts[0];e.addEventListener(i.listenerEvent,(function(e){ei(e,t,i.target,s.source,s.negate);}));}}function yi(e,t,i,s,r,n){n=t.static||n&&("object"!=typeof n||n[t.methodName]);let o={methodName:t.methodName,args:t.args,methodInfo:r,dynamicFn:n};for(let a,l=0;l<t.args.length&&(a=t.args[l]);l++)a.literal||e._addPropertyEffect(a.rootProperty,i,{fn:s,info:o,trigger:a});return n&&e._addPropertyEffect(t.methodName,i,{fn:s,info:o}),o}function bi(e,t,i,s,r){let n=e._methodHost||e,o=n[r.methodName];if(o){let s=e._marshalArgs(r.args,t,i);return s===$t?$t:o.apply(n,s)}r.dynamicFn||console.warn("method `"+r.methodName+"` not defined");}const vi=[],wi="(?:[a-zA-Z_$][\\w.:$\\-*]*)",Ai="(?:("+wi+"|"+"(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)"+"|"+("(?:"+"(?:'(?:[^'\\\\]|\\\\.)*')"+"|"+'(?:"(?:[^"\\\\]|\\\\.)*")'+")")+")\\s*)",Ci=new RegExp("(\\[\\[|{{)\\s*"+"(?:(!)\\s*)?"+("("+wi+"\\s*"+("(?:\\(\\s*(?:"+("(?:"+Ai+"(?:,\\s*"+Ai+")*)")+"?)\\)\\s*)")+"?)")+"(?:]]|}})","g");function Si(e){let t="";for(let i=0;i<e.length;i++){t+=e[i].literal||"";}return t}function xi(e){let t=e.match(/([^\s]+?)\(([\s\S]*)\)/);if(t){let e={methodName:t[1],static:!0,args:vi};if(t[2].trim()){return Pi(t[2].replace(/\\,/g,"&comma;").split(","),e)}return e}return null}function Pi(e,t){return t.args=e.map((function(e){let i=Ei(e);return i.literal||(t.static=!1),i}),this),t}function Ei(e){let t=e.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),i={name:t,value:"",literal:!1},s=t[0];switch("-"===s&&(s=t[1]),s>="0"&&s<="9"&&(s="#"),s){case"'":case'"':i.value=t.slice(1,-1),i.literal=!0;break;case"#":i.value=Number(t),i.literal=!0;}return i.literal||(i.rootProperty=Ze(t),i.structured=Xe(t),i.structured&&(i.wildcard=".*"==t.slice(-2),i.wildcard&&(i.name=t.slice(0,-2)))),i}function Ti(e,t,i){let s=rt$2(e,i);return void 0===s&&(s=t[i]),s}function Ii(e,t,i,s){const r={indexSplices:s};ie$3&&!e._overrideLegacyUndefined&&(t.splices=r),e.notifyPath(i+".splices",r),e.notifyPath(i+".length",t.length),ie$3&&!e._overrideLegacyUndefined&&(r.indexSplices=[]);}function Oi(e,t,i,s,r,n){Ii(e,t,i,[{index:s,addedCount:r,removed:n,object:t,type:"splice"}]);}function zi(e){return e[0].toUpperCase()+e.substring(1)}const Ri=qe$1((e=>{const t=Ht(Et(e));class i extends t{constructor(){super(),this.__isPropertyEffectsClient=!0,this._overrideLegacyUndefined;}get PROPERTY_EFFECT_TYPES(){return Vt}_initializeProperties(){super._initializeProperties(),this._registerHost(),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1;}_registerHost(){if(Ni.length){let e=Ni[Ni.length-1];e._enqueueClient(this),this.__dataHost=e;}}_initializeProtoProperties(e){this.__data=Object.create(e),this.__dataPending=Object.create(e),this.__dataOld={};}_initializeInstanceProperties(e){let t=this[Vt.READ_ONLY];for(let i in e)t&&t[i]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[i]=this.__dataPending[i]=e[i]);}_addPropertyEffect(e,t,i){this._createPropertyAccessor(e,t==Vt.READ_ONLY);let s=Wt(this,t,!0)[e];s||(s=this[t][e]=[]),s.push(i);}_removePropertyEffect(e,t,i){let s=Wt(this,t,!0)[e],r=s.indexOf(i);r>=0&&s.splice(r,1);}_hasPropertyEffect(e,t){let i=this[t];return Boolean(i&&i[e])}_hasReadOnlyEffect(e){return this._hasPropertyEffect(e,Vt.READ_ONLY)}_hasNotifyEffect(e){return this._hasPropertyEffect(e,Vt.NOTIFY)}_hasReflectEffect(e){return this._hasPropertyEffect(e,Vt.REFLECT)}_hasComputedEffect(e){return this._hasPropertyEffect(e,Vt.COMPUTE)}_setPendingPropertyOrPath(e,t,i,s){if(s||Ze(Array.isArray(e)?e[0]:e)!==e){if(!s){let i=rt$2(this,e);if(!(e=nt$1(this,e,t))||!super._shouldPropertyChange(e,t,i))return !1}if(this.__dataHasPaths=!0,this._setPendingProperty(e,t,i))return li(this,e,t),!0}else {if(this.__dataHasAccessor&&this.__dataHasAccessor[e])return this._setPendingProperty(e,t,i);this[e]=t;}return !1}_setUnmanagedPropertyToNode(e,t,i){i===e[t]&&"object"!=typeof i||("className"===t&&(e=Je(e)),e[t]=i);}_setPendingProperty(e,t,i){let s=this.__dataHasPaths&&Xe(e),r=s?this.__dataTemp:this.__data;return !!this._shouldPropertyChange(e,t,r[e])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),e in this.__dataOld||(this.__dataOld[e]=this.__data[e]),s?this.__dataTemp[e]=t:this.__data[e]=t,this.__dataPending[e]=t,(s||this[Vt.NOTIFY]&&this[Vt.NOTIFY][e])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[e]=i),!0)}_setProperty(e,t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties();}_invalidateProperties(){this.__dataReady&&this._flushProperties();}_enqueueClient(e){this.__dataPendingClients=this.__dataPendingClients||[],e!==this&&this.__dataPendingClients.push(e);}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0);}__enableOrFlushClients(){let e=this.__dataPendingClients;if(e){this.__dataPendingClients=null;for(let t=0;t<e.length;t++){let i=e[t];i.__dataEnabled?i.__dataPending&&i._flushProperties():i._enableProperties();}}}_readyClients(){this.__enableOrFlushClients();}setProperties(e,t){for(let i in e)!t&&this[Vt.READ_ONLY]&&this[Vt.READ_ONLY][i]||this._setPendingPropertyOrPath(i,e[i],!0);this._invalidateProperties();}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties();}_propertiesChanged(e,t,i){let s,r=this.__dataHasPaths;this.__dataHasPaths=!1,ii(this,t,i,r),s=this.__dataToNotify,this.__dataToNotify=null,this._propagatePropertyChanges(t,i,r),this._flushClients(),Ut(this,this[Vt.REFLECT],t,i,r),Ut(this,this[Vt.OBSERVE],t,i,r),s&&Xt(this,s,t,i,r),1==this.__dataCounter&&(this.__dataTemp={});}_propagatePropertyChanges(e,t,i){this[Vt.PROPAGATE]&&Ut(this,this[Vt.PROPAGATE],e,t,i),this.__templateInfo&&this._runEffectsForTemplate(this.__templateInfo,e,t,i);}_runEffectsForTemplate(e,t,i,s){const r=(t,s)=>{Ut(this,e.propertyEffects,t,i,s,e.nodeList);for(let r=e.firstChild;r;r=r.nextSibling)this._runEffectsForTemplate(r,t,i,s);};e.runEffects?e.runEffects(r,t,s):r(t,s);}linkPaths(e,t){e=it$2(e),t=it$2(t),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[e]=t;}unlinkPaths(e){e=it$2(e),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[e];}notifySplices(e,t){let i={path:""};Ii(this,rt$2(this,e,i),i.path,t);}get(e,t){return rt$2(t||this,e)}set(e,t,i){i?nt$1(i,e,t):this[Vt.READ_ONLY]&&this[Vt.READ_ONLY][e]||this._setPendingPropertyOrPath(e,t,!0)&&this._invalidateProperties();}push(e,...t){let i={path:""},s=rt$2(this,e,i),r=s.length,n=s.push(...t);return t.length&&Oi(this,s,i.path,r,t.length,[]),n}pop(e){let t={path:""},i=rt$2(this,e,t),s=Boolean(i.length),r=i.pop();return s&&Oi(this,i,t.path,i.length,0,[r]),r}splice(e,t,i,...s){let r,n={path:""},o=rt$2(this,e,n);return t<0?t=o.length-Math.floor(-t):t&&(t=Math.floor(t)),r=2===arguments.length?o.splice(t):o.splice(t,i,...s),(s.length||r.length)&&Oi(this,o,n.path,t,s.length,r),r}shift(e){let t={path:""},i=rt$2(this,e,t),s=Boolean(i.length),r=i.shift();return s&&Oi(this,i,t.path,0,0,[r]),r}unshift(e,...t){let i={path:""},s=rt$2(this,e,i),r=s.unshift(...t);return t.length&&Oi(this,s,i.path,0,t.length,[]),r}notifyPath(e,t){let i;if(1==arguments.length){let s={path:""};t=rt$2(this,e,s),i=s.path;}else i=Array.isArray(e)?it$2(e):e;this._setPendingPropertyOrPath(i,t,!0,!0)&&this._invalidateProperties();}_createReadOnlyProperty(e,t){this._addPropertyEffect(e,Vt.READ_ONLY),t&&(this["_set"+zi(e)]=function(t){this._setProperty(e,t);});}_createPropertyObserver(e,t,i){let s={property:e,method:t,dynamicFn:Boolean(i)};this._addPropertyEffect(e,Vt.OBSERVE,{fn:Jt,info:s,trigger:{name:e}}),i&&this._addPropertyEffect(t,Vt.OBSERVE,{fn:Jt,info:s,trigger:{name:t}});}_createMethodObserver(e,t){let i=xi(e);if(!i)throw new Error("Malformed observer expression '"+e+"'");yi(this,i,Vt.OBSERVE,bi,null,t);}_createNotifyingProperty(e){this._addPropertyEffect(e,Vt.NOTIFY,{fn:Qt,info:{eventName:ht$2(e)+"-changed",property:e}});}_createReflectedProperty(e){let t=this.constructor.attributeNameForProperty(e);"-"===t[0]?console.warn("Property "+e+" cannot be reflected to attribute "+t+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(e,Vt.REFLECT,{fn:ti,info:{attrName:t}});}_createComputedProperty(e,t,i){let s=xi(t);if(!s)throw new Error("Malformed computed expression '"+t+"'");const r=yi(this,s,Vt.COMPUTE,ai,e,i);Wt(this,Gt$1)[e]=r;}_marshalArgs(e,t,i){const s=this.__data,r=[];for(let n=0,o=e.length;n<o;n++){let{name:o,structured:a,wildcard:l,value:d,literal:h}=e[n];if(!h)if(l){const e=Qe$1(o,t),r=Ti(s,i,e?t:o);d={path:e?t:o,value:r,base:e?rt$2(s,o):r};}else d=a?Ti(s,i,o):s[o];if(ie$3&&!this._overrideLegacyUndefined&&void 0===d&&e.length>1)return $t;r[n]=d;}return r}static addPropertyEffect(e,t,i){this.prototype._addPropertyEffect(e,t,i);}static createPropertyObserver(e,t,i){this.prototype._createPropertyObserver(e,t,i);}static createMethodObserver(e,t){this.prototype._createMethodObserver(e,t);}static createNotifyingProperty(e){this.prototype._createNotifyingProperty(e);}static createReadOnlyProperty(e,t){this.prototype._createReadOnlyProperty(e,t);}static createReflectedProperty(e){this.prototype._createReflectedProperty(e);}static createComputedProperty(e,t,i){this.prototype._createComputedProperty(e,t,i);}static bindTemplate(e){return this.prototype._bindTemplate(e)}_bindTemplate(e,t){let i=this.constructor._parseTemplate(e),s=this.__preBoundTemplateInfo==i;if(!s)for(let r in i.propertyEffects)this._createPropertyAccessor(r);if(t)if(i=Object.create(i),i.wasPreBound=s,this.__templateInfo){const t=e._parentTemplateInfo||this.__templateInfo,s=t.lastChild;i.parent=t,t.lastChild=i,i.previousSibling=s,s?s.nextSibling=i:t.firstChild=i;}else this.__templateInfo=i;else this.__preBoundTemplateInfo=i;return i}static _addTemplatePropertyEffect(e,t,i){(e.hostProps=e.hostProps||{})[t]=!0;let s=e.propertyEffects=e.propertyEffects||{};(s[t]=s[t]||[]).push(i);}_stampTemplate(e,t){t=t||this._bindTemplate(e,!0),Ni.push(this);let i=super._stampTemplate(e,t);if(Ni.pop(),t.nodeList=i.nodeList,!t.wasPreBound){let e=t.childNodes=[];for(let t=i.firstChild;t;t=t.nextSibling)e.push(t);}return i.templateInfo=t,mi(this,t),this.__dataClientsReady&&(this._runEffectsForTemplate(t,this.__data,null,!1),this._flushClients()),i}_removeBoundDom(e){const t=e.templateInfo,{previousSibling:i,nextSibling:s,parent:r}=t;i?i.nextSibling=s:r&&(r.firstChild=s),s?s.previousSibling=i:r&&(r.lastChild=i),t.nextSibling=t.previousSibling=null;let n=t.childNodes;for(let o=0;o<n.length;o++){let e=n[o];Je(Je(e).parentNode).removeChild(e);}}static _parseTemplateNode(e,i,s){let r=t._parseTemplateNode.call(this,e,i,s);if(e.nodeType===Node.TEXT_NODE){let t=this._parseBindings(e.textContent,i);t&&(e.textContent=Si(t)||" ",di(this,i,s,"text","textContent",t),r=!0);}return r}static _parseTemplateNodeAttribute(e,i,s,r,n){let o=this._parseBindings(n,i);if(o){let t=r,n="property";jt.test(r)?n="attribute":"$"==r[r.length-1]&&(r=r.slice(0,-1),n="attribute");let a=Si(o);return a&&"attribute"==n&&("class"==r&&e.hasAttribute("class")&&(a+=" "+e.getAttribute(r)),e.setAttribute(r,a)),"attribute"==n&&"disable-upgrade$"==t&&e.setAttribute(r,""),"input"===e.localName&&"value"===t&&e.setAttribute(t,""),e.removeAttribute(t),"property"===n&&(r=dt(r)),di(this,i,s,n,r,o,a),!0}return t._parseTemplateNodeAttribute.call(this,e,i,s,r,n)}static _parseTemplateNestedTemplate(e,i,s){let r=t._parseTemplateNestedTemplate.call(this,e,i,s);const n=e.parentNode,o=s.templateInfo,a="dom-if"===n.localName,l="dom-repeat"===n.localName;re$4&&(a||l)&&(n.removeChild(e),(s=s.parentInfo).templateInfo=o,s.noted=!0,r=!1);let d=o.hostProps;if(ne$3&&a)d&&(i.hostProps=Object.assign(i.hostProps||{},d),re$4||(s.parentInfo.noted=!0));else {let e="{";for(let t in d){di(this,i,s,"property","_host_"+t,[{mode:e,source:t,dependencies:[t],hostProp:!0}]);}}return r}static _parseBindings(e,t){let i,s=[],r=0;for(;null!==(i=Ci.exec(e));){i.index>r&&s.push({literal:e.slice(r,i.index)});let n=i[1][0],o=Boolean(i[2]),a=i[3].trim(),l=!1,d="",h=-1;"{"==n&&(h=a.indexOf("::"))>0&&(d=a.substring(h+2),a=a.substring(0,h),l=!0);let c=xi(a),u=[];if(c){let{args:e,methodName:i}=c;for(let t=0;t<e.length;t++){let i=e[t];i.literal||u.push(i);}let s=t.dynamicFns;(s&&s[i]||c.static)&&(u.push(i),c.dynamicFn=!0);}else u.push(a);s.push({source:a,mode:n,negate:o,customEvent:l,signature:c,dependencies:u,event:d}),r=Ci.lastIndex;}if(r&&r<e.length){let t=e.substring(r);t&&s.push({literal:t});}return s.length?s:null}static _evaluateBinding(e,t,i,s,r,n){let o;return o=t.signature?bi(e,i,s,r,t.signature):i!=t.source?rt$2(e,t.source):n&&Xe(i)?rt$2(e,i):e.__data[i],t.negate&&(o=!o),o}}return i})),Ni=[];function ki(e){}function Di(e){const t={};for(let i in e){const s=e[i];t[i]="function"==typeof s?{type:s}:s;}return t}const Li=qe$1((e=>{const t=Ct(e);function i(e){const t=Object.getPrototypeOf(e);return t.prototype instanceof r?t:null}function s(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",e))){let t=null;if(e.hasOwnProperty(JSCompiler_renameProperty("properties",e))){const i=e.properties;i&&(t=Di(i));}e.__ownProperties=t;}return e.__ownProperties}class r extends t{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){const e=this._properties;this.__observedAttributes=e?Object.keys(e).map((e=>this.prototype._addPropertyToAttributeMap(e))):[];}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const e=i(this);e&&e.finalize(),this.__finalized=!0,this._finalizeClass();}}static _finalizeClass(){const e=s(this);e&&this.createProperties(e);}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const e=i(this);this.__properties=Object.assign({},e&&e._properties,s(this));}return this.__properties}static typeForProperty(e){const t=this._properties[e];return t&&t.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties();}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties();}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback();}}return r})),Mi="3.4.1",Fi=window.ShadyCSS&&window.ShadyCSS.cssBuild,Hi=qe$1((e=>{const t=Li(Ri(e));function i(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",e))){e.__propertyDefaults=null;let t=e._properties;for(let i in t){let s=t[i];"value"in s&&(e.__propertyDefaults=e.__propertyDefaults||{},e.__propertyDefaults[i]=s);}}return e.__propertyDefaults}function s(e){return e.hasOwnProperty(JSCompiler_renameProperty("__ownObservers",e))||(e.__ownObservers=e.hasOwnProperty(JSCompiler_renameProperty("observers",e))?e.observers:null),e.__ownObservers}function r(e,t,i,s){i.computed&&(i.readOnly=!0),i.computed&&(e._hasReadOnlyEffect(t)?console.warn(`Cannot redefine computed property '${t}'.`):e._createComputedProperty(t,i.computed,s)),i.readOnly&&!e._hasReadOnlyEffect(t)?e._createReadOnlyProperty(t,!i.computed):!1===i.readOnly&&e._hasReadOnlyEffect(t)&&console.warn(`Cannot make readOnly property '${t}' non-readOnly.`),i.reflectToAttribute&&!e._hasReflectEffect(t)?e._createReflectedProperty(t):!1===i.reflectToAttribute&&e._hasReflectEffect(t)&&console.warn(`Cannot make reflected property '${t}' non-reflected.`),i.notify&&!e._hasNotifyEffect(t)?e._createNotifyingProperty(t):!1===i.notify&&e._hasNotifyEffect(t)&&console.warn(`Cannot make notify property '${t}' non-notify.`),i.observer&&e._createPropertyObserver(t,i.observer,s[i.observer]),e._addPropertyToAttributeMap(t);}function n(e,t,i,s){if(!Fi){const r=t.content.querySelectorAll("style"),n=Ae$1(t),o=Ce$1(i),a=t.content.firstElementChild;for(let i=0;i<o.length;i++){let r=o[i];r.textContent=e._processStyleText(r.textContent,s),t.content.insertBefore(r,a);}let l=0;for(let t=0;t<n.length;t++){let i=n[t],o=r[l];o!==i?(i=i.cloneNode(!0),o.parentNode.insertBefore(i,o)):l++,i.textContent=e._processStyleText(i.textContent,s);}}if(window.ShadyCSS&&window.ShadyCSS.prepareTemplate(t,i),le$3&&Fi&&Y$7){const i=t.content.querySelectorAll("style");if(i){let t="";Array.from(i).forEach((e=>{t+=e.textContent,e.parentNode.removeChild(e);})),e._styleSheet=new CSSStyleSheet,e._styleSheet.replaceSync(t);}}}function o(e){let t=null;if(e&&(!Z$7||K$8)&&(t=_e$2.import(e,"template"),Z$7&&!t))throw new Error(`strictTemplatePolicy: expecting dom-module or null template for ${e}`);return t}class a extends t{static get polymerElementVersion(){return Mi}static _finalizeClass(){t._finalizeClass.call(this);const e=s(this);e&&this.createObservers(e,this._properties),this._prepareTemplate();}static _prepareTemplate(){let e=this.template;e&&("string"==typeof e?(console.error("template getter must return HTMLTemplateElement"),e=null):Q$7||(e=e.cloneNode(!0))),this.prototype._template=e;}static createProperties(e){for(let t in e)r(this.prototype,t,e[t],e);}static createObservers(e,t){const i=this.prototype;for(let s=0;s<e.length;s++)i._createMethodObserver(e[s],t);}static get template(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_template",this))){const e=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:void 0;this._template=void 0!==e?e:this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&o(this.is)||Object.getPrototypeOf(this.prototype).constructor.template;}return this._template}static set template(e){this._template=e;}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const e=this.importMeta;if(e)this._importPath=W$7(e.url);else {const e=_e$2.import(this.is);this._importPath=e&&e.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath;}}return this._importPath}constructor(){super(),this.$;}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=q$d,this.importPath=this.constructor.importPath;let e=i(this.constructor);if(e)for(let t in e){let i=e[t];if(this._canApplyPropertyDefault(t)){let e="function"==typeof i.value?i.value.call(this):i.value;this._hasAccessor(t)?this._setPendingProperty(t,e,!0):this[t]=e;}}}_canApplyPropertyDefault(e){return !this.hasOwnProperty(e)}static _processStyleText(e,t){return j$q(e,t)}static _finalizeTemplate(e){const t=this.prototype._template;if(t&&!t.__polymerFinalized){t.__polymerFinalized=!0;const i=this.importPath;n(this,t,e,i?G$9(i):""),this.prototype._bindTemplate(t);}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback();}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready();}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients();}_attachDom(e){const t=Je(this);if(t.attachShadow)return e?(t.shadowRoot||(t.attachShadow({mode:"open",shadyUpgradeFragment:e}),t.shadowRoot.appendChild(e),this.constructor._styleSheet&&(t.shadowRoot.adoptedStyleSheets=[this.constructor._styleSheet])),te$4&&window.ShadyDOM&&window.ShadyDOM.flushInitial(t.shadowRoot),t.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(e){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,e);}resolveUrl(e,t){return !t&&this.importPath&&(t=G$9(this.importPath)),G$9(e,t)}static _parseTemplateContent(e,i,s){return i.dynamicFns=i.dynamicFns||this._properties,t._parseTemplateContent.call(this,e,i,s)}static _addTemplatePropertyEffect(e,i,s){return !ee$4||i in this._properties||s.info.part.signature&&s.info.part.signature.static||s.info.part.hostProp||e.nestedTemplate||console.warn(`Property '${i}' used in template but not declared in 'properties'; attribute will not be observed.`),t._addTemplatePropertyEffect.call(this,e,i,s)}}return a}));class Bi{constructor(e){this.value=e.toString();}toString(){return this.value}}function $i(e){if(e instanceof Bi)return e.value;throw new Error(`non-literal value passed to Polymer's htmlLiteral function: ${e}`)}function Vi(e){if(e instanceof HTMLTemplateElement)return e.innerHTML;if(e instanceof Bi)return $i(e);throw new Error(`non-template value passed to Polymer's html function: ${e}`)}const Gi=function(e,...t){const i=document.createElement("template");return i.innerHTML=t.reduce(((t,i,s)=>t+Vi(i)+e[s+1]),e[0]),i},ji=Hi(HTMLElement);class Wi{constructor(){this._asyncModule=null,this._callback=null,this._timer=null;}setConfig(e,t){this._asyncModule=e,this._callback=t,this._timer=this._asyncModule.run((()=>{this._timer=null,Ui.delete(this),this._callback();}));}cancel(){this.isActive()&&(this._cancelAsync(),Ui.delete(this));}_cancelAsync(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null);}flush(){this.isActive()&&(this.cancel(),this._callback());}isActive(){return null!=this._timer}static debounce(e,t,i){return e instanceof Wi?e._cancelAsync():e=new Wi,e.setConfig(t,i),e}}let Ui=new Set;const Yi=function(e){Ui.add(e);},qi=function(){const e=Boolean(Ui.size);return Ui.forEach((e=>{try{e.flush();}catch(t){setTimeout((()=>{throw t}));}})),e};let Ji="string"==typeof document.head.style.touchAction,Xi="__polymerGestures",Zi="__polymerGesturesHandled",Ki="__polymerGesturesTouchAction",Qi=25,es=5,ts=2,is=2500,ss=["mousedown","mousemove","mouseup","click"],rs=[0,1,4,2],ns=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(e){return !1}}();function os(e){return ss.indexOf(e)>-1}let as=!1;function ls(e){if(!os(e)&&"touchend"!==e)return Ji&&as&&X$7?{passive:!0}:void 0}!function(){try{let e=Object.defineProperty({},"passive",{get(){as=!0;}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e);}catch(e){}}();let ds=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);const hs=[],cs={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0},us={button:!0,command:!0,fieldset:!0,input:!0,keygen:!0,optgroup:!0,option:!0,select:!0,textarea:!0};function ps(e){return cs[e.localName]||!1}function _s(e){let t=Array.prototype.slice.call(e.labels||[]);if(!t.length){t=[];let i=e.getRootNode();if(e.id){let s=i.querySelectorAll(`label[for = ${e.id}]`);for(let e=0;e<s.length;e++)t.push(s[e]);}}return t}let ms=function(e){let t=e.sourceCapabilities;if((!t||t.firesTouchEvents)&&(e[Zi]={skip:!0},"click"===e.type)){let t=!1,i=Ss(e);for(let e=0;e<i.length;e++){if(i[e].nodeType===Node.ELEMENT_NODE)if("label"===i[e].localName)hs.push(i[e]);else if(ps(i[e])){let s=_s(i[e]);for(let e=0;e<s.length;e++)t=t||hs.indexOf(s[e])>-1;}if(i[e]===vs.mouse.target)return}if(t)return;e.preventDefault(),e.stopPropagation();}};function fs(e){let t=ds?["click"]:ss;for(let i,s=0;s<t.length;s++)i=t[s],e?(hs.length=0,document.addEventListener(i,ms,!0)):document.removeEventListener(i,ms,!0);}function gs(e){vs.mouse.mouseIgnoreJob||fs(!0);let t=function(){fs(),vs.mouse.target=null,vs.mouse.mouseIgnoreJob=null;};vs.mouse.target=Ss(e)[0],vs.mouse.mouseIgnoreJob=Wi.debounce(vs.mouse.mouseIgnoreJob,yt$2.after(is),t);}function ys(e){let t=e.type;if(!os(t))return !1;if("mousemove"===t){let t=void 0===e.buttons?1:e.buttons;return e instanceof window.MouseEvent&&!ns&&(t=rs[e.which]||0),Boolean(1&t)}return 0===(void 0===e.button?0:e.button)}function bs(e){if("click"===e.type){if(0===e.detail)return !0;let t=Ts(e);if(!t.nodeType||t.nodeType!==Node.ELEMENT_NODE)return !0;let i=t.getBoundingClientRect(),s=e.pageX,r=e.pageY;return !(s>=i.left&&s<=i.right&&r>=i.top&&r<=i.bottom)}return !1}let vs={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function ws(e){let t="auto",i=Ss(e);for(let s,r=0;r<i.length;r++)if(s=i[r],s[Ki]){t=s[Ki];break}return t}function As(e,t,i){e.movefn=t,e.upfn=i,document.addEventListener("mousemove",t),document.addEventListener("mouseup",i);}function Cs(e){document.removeEventListener("mousemove",e.movefn),document.removeEventListener("mouseup",e.upfn),e.movefn=null,e.upfn=null;}document.addEventListener("touchend",gs,!!as&&{passive:!0});const Ss=window.ShadyDOM&&window.ShadyDOM.noPatch?window.ShadyDOM.composedPath:e=>e.composedPath&&e.composedPath()||[],xs={},Ps=[];function Es(e,t){let i=document.elementFromPoint(e,t),s=i;for(;s&&s.shadowRoot&&!window.ShadyDOM;){let r=s;if(s=s.shadowRoot.elementFromPoint(e,t),r===s)break;s&&(i=s);}return i}function Ts(e){const t=Ss(e);return t.length>0?t[0]:e.target}function Is(e){let t,i=e.type,s=e.currentTarget[Xi];if(!s)return;let r=s[i];if(r){if(!e[Zi]&&(e[Zi]={},"touch"===i.slice(0,5))){let t=(e=e).changedTouches[0];if("touchstart"===i&&1===e.touches.length&&(vs.touch.id=t.identifier),vs.touch.id!==t.identifier)return;Ji||"touchstart"!==i&&"touchmove"!==i||Os(e);}if(t=e[Zi],!t.skip){for(let i,s=0;s<Ps.length;s++)i=Ps[s],r[i.name]&&!t[i.name]&&i.flow&&i.flow.start.indexOf(e.type)>-1&&i.reset&&i.reset();for(let s,n=0;n<Ps.length;n++)s=Ps[n],r[s.name]&&!t[s.name]&&(t[s.name]=!0,s[i](e));}}}function Os(e){let t=e.changedTouches[0],i=e.type;if("touchstart"===i)vs.touch.x=t.clientX,vs.touch.y=t.clientY,vs.touch.scrollDecided=!1;else if("touchmove"===i){if(vs.touch.scrollDecided)return;vs.touch.scrollDecided=!0;let i=ws(e),s=!1,r=Math.abs(vs.touch.x-t.clientX),n=Math.abs(vs.touch.y-t.clientY);e.cancelable&&("none"===i?s=!0:"pan-x"===i?s=n>r:"pan-y"===i&&(s=r>n)),s?e.preventDefault():Hs("track");}}function zs(e,t,i){return !!xs[t]&&(Ns(e,t,i),!0)}function Rs(e,t,i){return !!xs[t]&&(ks(e,t,i),!0)}function Ns(e,t,i){let s=xs[t],r=s.deps,n=s.name,o=e[Xi];o||(e[Xi]=o={});for(let a,l,d=0;d<r.length;d++)a=r[d],ds&&os(a)&&"click"!==a||(l=o[a],l||(o[a]=l={_count:0}),0===l._count&&e.addEventListener(a,Is,ls(a)),l[n]=(l[n]||0)+1,l._count=(l._count||0)+1);e.addEventListener(t,i),s.touchAction&&Ms(e,s.touchAction);}function ks(e,t,i){let s=xs[t],r=s.deps,n=s.name,o=e[Xi];if(o)for(let a,l,d=0;d<r.length;d++)a=r[d],l=o[a],l&&l[n]&&(l[n]=(l[n]||1)-1,l._count=(l._count||1)-1,0===l._count&&e.removeEventListener(a,Is,ls(a)));e.removeEventListener(t,i);}function Ds(e){Ps.push(e);for(let t=0;t<e.emits.length;t++)xs[e.emits[t]]=e;}function Ls(e){for(let t,i=0;i<Ps.length;i++){t=Ps[i];for(let i,s=0;s<t.emits.length;s++)if(i=t.emits[s],i===e)return t}return null}function Ms(e,t){Ji&&e instanceof HTMLElement&&wt$2.run((()=>{e.style.touchAction=t;})),e[Ki]=t;}function Fs(e,t,i){let s=new Event(t,{bubbles:!0,cancelable:!0,composed:!0});if(s.detail=i,Je(e).dispatchEvent(s),s.defaultPrevented){let e=i.preventer||i.sourceEvent;e&&e.preventDefault&&e.preventDefault();}}function Hs(e){let t=Ls(e);t.info&&(t.info.prevent=!0);}function Bs(e,t,i,s){t&&Fs(t,e,{x:i.clientX,y:i.clientY,sourceEvent:i,preventer:s,prevent:function(e){return Hs(e)}});}function $s(e,t,i){if(e.prevent)return !1;if(e.started)return !0;let s=Math.abs(e.x-t),r=Math.abs(e.y-i);return s>=es||r>=es}function Vs(e,t,i){if(!t)return;let s,r=e.moves[e.moves.length-2],n=e.moves[e.moves.length-1],o=n.x-e.x,a=n.y-e.y,l=0;r&&(s=n.x-r.x,l=n.y-r.y),Fs(t,"track",{state:e.state,x:i.clientX,y:i.clientY,dx:o,dy:a,ddx:s,ddy:l,sourceEvent:i,hover:function(){return Es(i.clientX,i.clientY)}});}function Gs(e,t,i){let s=Math.abs(t.clientX-e.x),r=Math.abs(t.clientY-e.y),n=Ts(i||t);!n||us[n.localName]&&n.hasAttribute("disabled")||(isNaN(s)||isNaN(r)||s<=Qi&&r<=Qi||bs(t))&&(e.prevent||Fs(n,"tap",{x:t.clientX,y:t.clientY,sourceEvent:t,preventer:i}));}Ds({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){Cs(this.info);},mousedown:function(e){if(!ys(e))return;let t=Ts(e),i=this,s=function(e){ys(e)||(Bs("up",t,e),Cs(i.info));},r=function(e){ys(e)&&Bs("up",t,e),Cs(i.info);};As(this.info,s,r),Bs("down",t,e);},touchstart:function(e){Bs("down",Ts(e),e.changedTouches[0],e);},touchend:function(e){Bs("up",Ts(e),e.changedTouches[0],e);}}),Ds({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(e){this.moves.length>ts&&this.moves.shift(),this.moves.push(e);},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,Cs(this.info);},mousedown:function(e){if(!ys(e))return;let t=Ts(e),i=this,s=function(e){let s=e.clientX,r=e.clientY;$s(i.info,s,r)&&(i.info.state=i.info.started?"mouseup"===e.type?"end":"track":"start","start"===i.info.state&&Hs("tap"),i.info.addMove({x:s,y:r}),ys(e)||(i.info.state="end",Cs(i.info)),t&&Vs(i.info,t,e),i.info.started=!0);},r=function(e){i.info.started&&s(e),Cs(i.info);};As(this.info,s,r),this.info.x=e.clientX,this.info.y=e.clientY;},touchstart:function(e){let t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY;},touchmove:function(e){let t=Ts(e),i=e.changedTouches[0],s=i.clientX,r=i.clientY;$s(this.info,s,r)&&("start"===this.info.state&&Hs("tap"),this.info.addMove({x:s,y:r}),Vs(this.info,t,i),this.info.state="track",this.info.started=!0);},touchend:function(e){let t=Ts(e),i=e.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:i.clientX,y:i.clientY}),Vs(this.info,t,i));}}),Ds({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1;},mousedown:function(e){ys(e)&&(this.info.x=e.clientX,this.info.y=e.clientY);},click:function(e){ys(e)&&Gs(this.info,e);},touchstart:function(e){const t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY;},touchend:function(e){Gs(this.info,e.changedTouches[0],e);}});const js=qe$1((e=>{class t extends e{_addEventListenerToNode(e,t,i){zs(e,t,i)||super._addEventListenerToNode(e,t,i);}_removeEventListenerFromNode(e,t,i){Rs(e,t,i)||super._removeEventListenerFromNode(e,t,i);}}return t})),Ws=e=>class extends e{static get properties(){return {theme:{type:String,readOnly:!0}}}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),"theme"===e&&this._setTheme(i);}},Us=e=>class extends(Ws(e)){static finalize(){super.finalize();const e=this.prototype._template,t=this.template&&this.template.parentElement&&this.template.parentElement.id===this.is,i=Object.getPrototypeOf(this.prototype)._template;i&&!t&&Array.from(i.content.querySelectorAll("style[include]")).forEach((t=>{this._includeStyle(t.getAttribute("include"),e);})),this._includeMatchingThemes(e);}static _includeMatchingThemes(e){const t=_e$2.prototype.modules;let i=!1;const s=this.is+"-default-theme";Object.keys(t).sort(((e,t)=>{const i=0===e.indexOf("vaadin-"),s=0===t.indexOf("vaadin-"),r=["lumo-","material-"],n=r.filter((t=>0===e.indexOf(t))).length>0,o=r.filter((e=>0===t.indexOf(e))).length>0;return i!==s?i?-1:1:n!==o?n?-1:1:0})).forEach((r=>{if(r!==s){const s=t[r].getAttribute("theme-for");s&&s.split(" ").forEach((t=>{new RegExp("^"+t.split("*").join(".*")+"$").test(this.is)&&(i=!0,this._includeStyle(r,e));}));}})),!i&&t[s]&&this._includeStyle(s,e);}static _includeStyle(e,t){if(t&&!t.content.querySelector(`style[include="${e}"]`)){const i=document.createElement("style");i.setAttribute("include",e),t.content.appendChild(i);}}};let Ys=!1;window.addEventListener("keydown",(()=>{Ys=!0;}),{capture:!0}),window.addEventListener("mousedown",(()=>{Ys=!1;}),{capture:!0});const qs=e=>class extends e{static get properties(){var e={tabindex:{type:Number,value:0,reflectToAttribute:!0,observer:"_tabindexChanged"}};return window.ShadyDOM&&(e.tabIndex=e.tabindex),e}},Js=e=>class extends(qs(e)){static get properties(){return {autofocus:{type:Boolean},_previousTabIndex:{type:Number},disabled:{type:Boolean,observer:"_disabledChanged",reflectToAttribute:!0},_isShiftTabbing:{type:Boolean}}}ready(){this.addEventListener("focusin",(e=>{e.composedPath()[0]===this?this.contains(e.relatedTarget)||this._focus():-1===e.composedPath().indexOf(this.focusElement)||this.disabled||this._setFocused(!0);})),this.addEventListener("focusout",(e=>this._setFocused(!1))),super.ready();const e=e=>{e.composed||e.target.dispatchEvent(new CustomEvent(e.type,{bubbles:!0,composed:!0,cancelable:!1}));};this.shadowRoot.addEventListener("focusin",e),this.shadowRoot.addEventListener("focusout",e),this.addEventListener("keydown",(e=>{if(!e.defaultPrevented&&9===e.keyCode)if(e.shiftKey)this._isShiftTabbing=!0,HTMLElement.prototype.focus.apply(this),this._setFocused(!1),setTimeout((()=>this._isShiftTabbing=!1),0);else {const e=window.navigator.userAgent.match(/Firefox\/(\d\d\.\d)/);if(e&&parseFloat(e[1])>=63&&parseFloat(e[1])<66&&this.parentNode&&this.nextSibling){const e=document.createElement("input");e.style.position="absolute",e.style.opacity="0",e.tabIndex=this.tabIndex,this.parentNode.insertBefore(e,this.nextSibling),e.focus(),e.addEventListener("focusout",(()=>this.parentNode.removeChild(e)));}}})),this.autofocus&&!this.disabled&&window.requestAnimationFrame((()=>{this._focus(),this._setFocused(!0),this.setAttribute("focus-ring","");}));}disconnectedCallback(){super.disconnectedCallback(),this.hasAttribute("focused")&&this._setFocused(!1);}_setFocused(e){e?this.setAttribute("focused",""):this.removeAttribute("focused"),e&&Ys?this.setAttribute("focus-ring",""):this.removeAttribute("focus-ring");}get focusElement(){return window.console.warn(`Please implement the 'focusElement' property in <${this.localName}>`),this}_focus(){this.focusElement&&!this._isShiftTabbing&&(this.focusElement.focus(),this._setFocused(!0));}focus(){this.focusElement&&!this.disabled&&(this.focusElement.focus(),this._setFocused(!0));}blur(){this.focusElement&&(this.focusElement.blur(),this._setFocused(!1));}_disabledChanged(e){this.focusElement.disabled=e,e?(this.blur(),this._previousTabIndex=this.tabindex,this.tabindex=-1,this.setAttribute("aria-disabled","true")):(void 0!==this._previousTabIndex&&(this.tabindex=this._previousTabIndex),this.removeAttribute("aria-disabled"));}_tabindexChanged(e){void 0!==e&&(this.focusElement.tabIndex=e),this.disabled&&this.tabindex&&(-1!==this.tabindex&&(this._previousTabIndex=this.tabindex),this.tabindex=e=void 0),window.ShadyDOM&&this.setProperties({tabIndex:e,tabindex:e});}click(){this.disabled||super.click();}},Xs=function(){let e,t;do{e=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),t=qi();}while(e||t)};class Zs{static detectScrollType(){const e=document.createElement("div");e.textContent="ABCD",e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e);let t="reverse";return e.scrollLeft>0?t="default":(e.scrollLeft=2,e.scrollLeft<2&&(t="negative")),document.body.removeChild(e),t}static getNormalizedScrollLeft(e,t,i){const{scrollLeft:s}=i;if("rtl"!==t||!e)return s;switch(e){case"negative":return i.scrollWidth-i.clientWidth+s;case"reverse":return i.scrollWidth-i.clientWidth-s}return s}static setNormalizedScrollLeft(e,t,i,s){if("rtl"===t&&e)switch(e){case"negative":i.scrollLeft=i.clientWidth-i.scrollWidth+s;break;case"reverse":i.scrollLeft=i.scrollWidth-i.clientWidth-s;break;default:i.scrollLeft=s;}else i.scrollLeft=s;}}const Ks=[],Qs=function(){const e=ir();Ks.forEach((t=>{tr(t,e);}));};let er;new MutationObserver(Qs).observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]});const tr=function(e,t){t?e.setAttribute("dir",t):e.removeAttribute("dir");},ir=function(){return document.documentElement.getAttribute("dir")},sr=e=>class extends e{static get properties(){return {dir:{type:String,readOnly:!0}}}static finalize(){super.finalize(),er||(er=Zs.detectScrollType());}connectedCallback(){super.connectedCallback(),this.hasAttribute("dir")||(this.__subscribe(),tr(this,ir()));}attributeChangedCallback(e,t,i){if(super.attributeChangedCallback(e,t,i),"dir"!==e)return;const s=i===ir()&&-1===Ks.indexOf(this),r=!i&&t&&-1===Ks.indexOf(this),n=i!==ir()&&t===ir();s||r?(this.__subscribe(),tr(this,ir())):n&&this.__subscribe(!1);}disconnectedCallback(){super.disconnectedCallback(),this.__subscribe(!1),this.removeAttribute("dir");}__subscribe(e=!0){e?-1===Ks.indexOf(this)&&Ks.push(this):Ks.indexOf(this)>-1&&Ks.splice(Ks.indexOf(this),1);}__getNormalizedScrollLeft(e){return Zs.getNormalizedScrollLeft(er,this.getAttribute("dir")||"ltr",e)}__setNormalizedScrollLeft(e,t){return Zs.setNormalizedScrollLeft(er,this.getAttribute("dir")||"ltr",e,t)}},rr=/\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,nr=window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients;function or(){function e(){return !0}return cr(e)}function ar(){try{return !!lr()||!!dr()&&(nr?!hr():!or())}catch(e){return !1}}function lr(){return localStorage.getItem("vaadin.developmentmode.force")}function dr(){return ["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0}function hr(){if(nr){if(Object.keys(nr).map((e=>nr[e])).filter((e=>e.productionMode)).length>0)return !0}return !1}function cr(e,t){if("function"!=typeof e)return;const i=rr.exec(e.toString());if(i)try{e=new Function(i[1]);}catch(s){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",s);}return e(t)}window.Vaadin=window.Vaadin||{};const ur=function(e,t){if(window.Vaadin.developmentMode)return cr(e,t)};function pr(){}void 0===window.Vaadin.developmentMode&&(window.Vaadin.developmentMode=ar());const _r=function(){if("function"==typeof ur)return ur(pr)};let mr;window.Vaadin||(window.Vaadin={}),window.Vaadin.registrations=window.Vaadin.registrations||[],window.Vaadin.developmentModeCallback=window.Vaadin.developmentModeCallback||{},window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]=function(){_r&&_r();};const fr=new Set,gr=e=>class extends(sr(e)){static finalize(){super.finalize();const{is:e}=this;e&&!fr.has(e)&&(window.Vaadin.registrations.push(this),fr.add(e),window.Vaadin.developmentModeCallback&&(mr=Wi.debounce(mr,vt$1,(()=>{window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]();})),Yi(mr)));}constructor(){super(),null===document.doctype&&console.warn('Vaadin components require the "standards mode" declaration. Please add <!DOCTYPE html> to the HTML document.');}};class yr extends(gr(Js(Us(js(ji))))){static get template(){return Gi`
      <style>
        :host {
          display: inline-block;
        }

        :host([hidden]) {
          display: none !important;
        }

        label {
          display: inline-flex;
          align-items: baseline;
          outline: none;
        }

        [part='checkbox'] {
          position: relative;
          display: inline-block;
          flex: none;
        }

        input[type='checkbox'] {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          width: 100%;
          height: 100%;
          opacity: 0;
          cursor: inherit;
          margin: 0;
        }

        :host([disabled]) {
          -webkit-tap-highlight-color: transparent;
        }
      </style>

      <label>
        <span part="checkbox">
          <input
            type="checkbox"
            checked="{{checked::change}}"
            disabled$="[[disabled]]"
            indeterminate="{{indeterminate::change}}"
            role="presentation"
            tabindex="-1"
          />
        </span>

        <span part="label">
          <slot></slot>
        </span>
      </label>
    `}static get is(){return "vaadin-checkbox"}static get version(){return "3.0.0"}static get properties(){return {checked:{type:Boolean,value:!1,notify:!0,observer:"_checkedChanged",reflectToAttribute:!0},indeterminate:{type:Boolean,notify:!0,observer:"_indeterminateChanged",reflectToAttribute:!0,value:!1},value:{type:String,value:"on"},_nativeCheckbox:{type:Object}}}constructor(){super(),this.name;}get name(){return this.checked?this._storedName:""}set name(e){this._storedName=e;}ready(){super.ready(),this.setAttribute("role","checkbox"),this._nativeCheckbox=this.shadowRoot.querySelector('input[type="checkbox"]'),this.addEventListener("click",this._handleClick.bind(this)),this._addActiveListeners();const e=this.getAttribute("name");e&&(this.name=e),this.shadowRoot.querySelector('[part~="label"]').querySelector("slot").addEventListener("slotchange",this._updateLabelAttribute.bind(this)),this._updateLabelAttribute();}_updateLabelAttribute(){const e=this.shadowRoot.querySelector('[part~="label"]'),t=e.firstElementChild.assignedNodes();this._isAssignedNodesEmpty(t)?e.setAttribute("empty",""):e.removeAttribute("empty");}_isAssignedNodesEmpty(e){return 0===e.length||1==e.length&&e[0].nodeType==Node.TEXT_NODE&&""===e[0].textContent.trim()}_checkedChanged(e){this.indeterminate?this.setAttribute("aria-checked","mixed"):this.setAttribute("aria-checked",Boolean(e));}_indeterminateChanged(e){e?this.setAttribute("aria-checked","mixed"):this.setAttribute("aria-checked",this.checked);}_addActiveListeners(){this._addEventListenerToNode(this,"down",(e=>{this.__interactionsAllowed(e)&&this.setAttribute("active","");})),this._addEventListenerToNode(this,"up",(()=>this.removeAttribute("active"))),this.addEventListener("keydown",(e=>{this.__interactionsAllowed(e)&&32===e.keyCode&&(e.preventDefault(),this.setAttribute("active",""));})),this.addEventListener("keyup",(e=>{this.__interactionsAllowed(e)&&32===e.keyCode&&(e.preventDefault(),this._toggleChecked(),this.removeAttribute("active"),this.indeterminate&&(this.indeterminate=!1));}));}get focusElement(){return this.shadowRoot.querySelector("input")}__interactionsAllowed(e){return !this.disabled&&"a"!==e.target.localName}_handleClick(e){this.__interactionsAllowed(e)&&(this.indeterminate?(this.indeterminate=!1,e.preventDefault(),this._toggleChecked()):e.composedPath()[0]!==this._nativeCheckbox&&(e.preventDefault(),this._toggleChecked()));}_toggleChecked(){this.checked=!this.checked,this.dispatchEvent(new CustomEvent("change",{composed:!1,bubbles:!0}));}}customElements.define(yr.is,yr),Ue$1("vaadin-grid",Ge$1`
    :host {
      font-family: var(--lumo-font-family);
      font-size: var(--lumo-font-size-m);
      line-height: var(--lumo-line-height-s);
      color: var(--lumo-body-text-color);
      background-color: var(--lumo-base-color);
      box-sizing: border-box;
      -webkit-text-size-adjust: 100%;
      -webkit-tap-highlight-color: transparent;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;

      /* For internal use only */
      --_lumo-grid-border-color: var(--lumo-contrast-20pct);
      --_lumo-grid-secondary-border-color: var(--lumo-contrast-10pct);
      --_lumo-grid-border-width: 1px;
      --_lumo-grid-selected-row-color: var(--lumo-primary-color-10pct);
    }

    /* No (outer) border */

    :host(:not([theme~='no-border'])) {
      border: var(--_lumo-grid-border-width) solid var(--_lumo-grid-border-color);
    }

    /* Cell styles */

    [part~='cell'] {
      min-height: var(--lumo-size-m);
      background-color: var(--lumo-base-color);
    }

    [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      cursor: default;
      padding: var(--lumo-space-xs) var(--lumo-space-m);
    }

    /* Apply row borders by default and introduce the "no-row-borders" variant */
    :host(:not([theme~='no-row-borders'])) [part~='cell']:not([part~='details-cell']) {
      border-top: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    /* Hide first body row top border */
    :host(:not([theme~='no-row-borders'])) [part='row'][first] [part~='cell']:not([part~='details-cell']) {
      border-top: 0;
      min-height: calc(var(--lumo-size-m) - var(--_lumo-grid-border-width));
    }

    /* Focus-ring */

    [part~='cell']:focus {
      outline: none;
    }

    :host([navigating]) [part~='cell']:focus::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);
    }

    /* Drag and Drop styles */
    :host([dragover])::after {
      content: '';
      position: absolute;
      z-index: 100;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);
    }

    [part~='row'][dragover] {
      z-index: 100 !important;
    }

    [part~='row'][dragover] [part~='cell'] {
      overflow: visible;
    }

    [part~='row'][dragover] [part~='cell']::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      height: calc(var(--_lumo-grid-border-width) + 2px);
      pointer-events: none;
      background: var(--lumo-primary-color-50pct);
    }

    :host([theme~='no-row-borders']) [dragover] [part~='cell']::after {
      height: 2px;
    }

    [part~='row'][dragover='below'] [part~='cell']::after {
      top: 100%;
      bottom: auto;
      margin-top: -1px;
    }

    [part~='row'][dragover='above'] [part~='cell']::after {
      top: auto;
      bottom: 100%;
      margin-bottom: -1px;
    }

    [part~='row'][details-opened][dragover='below'] [part~='cell']:not([part~='details-cell'])::after,
    [part~='row'][details-opened][dragover='above'] [part~='details-cell']::after {
      display: none;
    }

    [part~='row'][dragover][dragover='on-top'] [part~='cell']::after {
      height: 100%;
    }

    [part~='row'][dragstart] {
      /* Add bottom-space to the row so the drag number doesn't get clipped. Needed for IE/Edge */
      border-bottom: 100px solid transparent;
      z-index: 100 !important;
      opacity: 0.9;
    }

    [part~='row'][dragstart] [part~='cell'] {
      border: none !important;
      box-shadow: none !important;
    }

    [part~='row'][dragstart] [part~='cell'][last-column] {
      border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;
    }

    [part~='row'][dragstart] [part~='cell'][first-column] {
      border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);
    }

    [ios] [part~='row'][dragstart] [part~='cell'] {
      background: var(--lumo-primary-color-50pct);
    }

    #scroller:not([ios]) [part~='row'][dragstart]:not([dragstart=''])::after {
      display: block;
      position: absolute;
      left: var(--_grid-drag-start-x);
      top: var(--_grid-drag-start-y);
      z-index: 100;
      content: attr(dragstart);
      align-items: center;
      justify-content: center;
      box-sizing: border-box;
      padding: calc(var(--lumo-space-xs) * 0.8);
      color: var(--lumo-error-contrast-color);
      background-color: var(--lumo-error-color);
      border-radius: var(--lumo-border-radius-m);
      font-family: var(--lumo-font-family);
      font-size: var(--lumo-font-size-xxs);
      line-height: 1;
      font-weight: 500;
      text-transform: initial;
      letter-spacing: initial;
      min-width: calc(var(--lumo-size-s) * 0.7);
      text-align: center;
    }

    /* Headers and footers */

    [part~='header-cell'] ::slotted(vaadin-grid-cell-content),
    [part~='footer-cell'] ::slotted(vaadin-grid-cell-content),
    [part~='reorder-ghost'] {
      font-size: var(--lumo-font-size-s);
      font-weight: 500;
    }

    [part~='footer-cell'] ::slotted(vaadin-grid-cell-content) {
      font-weight: 400;
    }

    [part='row']:only-child [part~='header-cell'] {
      min-height: var(--lumo-size-xl);
    }

    /* Header borders */

    /* Hide first header row top border */
    :host(:not([theme~='no-row-borders'])) [part='row']:first-child [part~='header-cell'] {
      border-top: 0;
    }

    [part='row']:last-child [part~='header-cell'] {
      border-bottom: var(--_lumo-grid-border-width) solid transparent;
    }

    :host(:not([theme~='no-row-borders'])) [part='row']:last-child [part~='header-cell'] {
      border-bottom-color: var(--_lumo-grid-secondary-border-color);
    }

    /* Overflow uses a stronger border color */
    :host([overflow~='top']) [part='row']:last-child [part~='header-cell'] {
      border-bottom-color: var(--_lumo-grid-border-color);
    }

    /* Footer borders */

    [part='row']:first-child [part~='footer-cell'] {
      border-top: var(--_lumo-grid-border-width) solid transparent;
    }

    :host(:not([theme~='no-row-borders'])) [part='row']:first-child [part~='footer-cell'] {
      border-top-color: var(--_lumo-grid-secondary-border-color);
    }

    /* Overflow uses a stronger border color */
    :host([overflow~='bottom']) [part='row']:first-child [part~='footer-cell'] {
      border-top-color: var(--_lumo-grid-border-color);
    }

    /* Column reordering */

    :host([reordering]) [part~='cell'] {
      background: linear-gradient(var(--lumo-shade-20pct), var(--lumo-shade-20pct)) var(--lumo-base-color);
    }

    :host([reordering]) [part~='cell'][reorder-status='allowed'] {
      background: var(--lumo-base-color);
    }

    :host([reordering]) [part~='cell'][reorder-status='dragging'] {
      background: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct)) var(--lumo-base-color);
    }

    [part~='reorder-ghost'] {
      opacity: 0.85;
      box-shadow: var(--lumo-box-shadow-s);
      /* TODO Use the same styles as for the cell element (reorder-ghost copies styles from the cell element) */
      padding: var(--lumo-space-s) var(--lumo-space-m) !important;
    }

    /* Column resizing */

    [part='resize-handle'] {
      width: 3px;
      background-color: var(--lumo-primary-color-50pct);
      opacity: 0;
      transition: opacity 0.2s;
    }

    :host(:not([reordering])) *:not([column-resizing]) [part~='cell']:hover [part='resize-handle'],
    [part='resize-handle']:active {
      opacity: 1;
      transition-delay: 0.15s;
    }

    /* Column borders */

    :host([theme~='column-borders']) [part~='cell']:not([last-column]):not([part~='details-cell']) {
      border-right: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    /* Frozen columns */

    [last-frozen] {
      border-right: var(--_lumo-grid-border-width) solid transparent;
      overflow: hidden;
    }

    :host([overflow~='left']) [part~='cell'][last-frozen]:not([part~='details-cell']) {
      border-right-color: var(--_lumo-grid-border-color);
    }

    /* Row stripes */

    :host([theme~='row-stripes']) [part~='row']:not([odd]) [part~='body-cell'],
    :host([theme~='row-stripes']) [part~='row']:not([odd]) [part~='details-cell'] {
      background-image: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct));
      background-repeat: repeat-x;
    }

    /* Selected row */

    /* Raise the selected rows above unselected rows (so that box-shadow can cover unselected rows) */
    :host(:not([reordering])) [part~='row'][selected] {
      z-index: 1;
    }

    :host(:not([reordering])) [part~='row'][selected] [part~='body-cell']:not([part~='details-cell']) {
      background-image: linear-gradient(var(--_lumo-grid-selected-row-color), var(--_lumo-grid-selected-row-color));
      background-repeat: repeat;
    }

    /* Cover the border of an unselected row */
    :host(:not([theme~='no-row-borders'])) [part~='row'][selected] [part~='cell']:not([part~='details-cell']) {
      box-shadow: 0 var(--_lumo-grid-border-width) 0 0 var(--_lumo-grid-selected-row-color);
    }

    /* Compact */

    :host([theme~='compact']) [part='row']:only-child [part~='header-cell'] {
      min-height: var(--lumo-size-m);
    }

    :host([theme~='compact']) [part~='cell'] {
      min-height: var(--lumo-size-s);
    }

    :host([theme~='compact']) [part='row'][first] [part~='cell']:not([part~='details-cell']) {
      min-height: calc(var(--lumo-size-s) - var(--_lumo-grid-border-width));
    }

    :host([theme~='compact']) [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      padding: var(--lumo-space-xs) var(--lumo-space-s);
    }

    /* Wrap cell contents */

    :host([theme~='wrap-cell-content']) [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      white-space: normal;
    }

    /* RTL specific styles */

    :host([dir='rtl']) [part~='row'][dragstart] [part~='cell'][last-column] {
      border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);
    }

    :host([dir='rtl']) [part~='row'][dragstart] [part~='cell'][first-column] {
      border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;
    }

    :host([dir='rtl'][theme~='column-borders']) [part~='cell']:not([last-column]):not([part~='details-cell']) {
      border-right: none;
      border-left: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    :host([dir='rtl']) [last-frozen] {
      border-right: none;
      border-left: var(--_lumo-grid-border-width) solid transparent;
    }

    :host([dir='rtl'][overflow~='right']) [part~='cell'][last-frozen]:not([part~='details-cell']) {
      border-left-color: var(--_lumo-grid-border-color);
    }
  `,{moduleId:"lumo-grid"}),Ue$1("vaadin-checkbox",Ge$1`
    :host(.vaadin-grid-select-all-checkbox) {
      font-size: var(--lumo-font-size-m);
    }
  `,{moduleId:"vaadin-grid-select-all-checkbox-lumo"});let br=!1,vr=[],wr=[];function Ar(){br=!0,requestAnimationFrame((function(){br=!1,Cr(vr),setTimeout((function(){Sr(wr);}));}));}function Cr(e){for(;e.length;)xr(e.shift());}function Sr(e){for(let t=0,i=e.length;t<i;t++)xr(e.shift());}function xr(e){const t=e[0],i=e[1],s=e[2];try{i.apply(t,s);}catch(r){setTimeout((()=>{throw r}));}}function Pr(e,t,i){br||Ar(),vr.push([e,t,i]);}function Er(e,t,i){br||Ar(),wr.push([e,t,i]);}class Tr{constructor(){this.start=0,this.end=0,this.previous=null,this.parent=null,this.rules=null,this.parsedCssText="",this.cssText="",this.atRule=!1,this.type=0,this.keyframesName="",this.selector="",this.parsedSelector="";}}function Ir(e){return Rr(zr(e=Or(e)),e)}function Or(e){return e.replace(Vr.comments,"").replace(Vr.port,"")}function zr(e){let t=new Tr;t.start=0,t.end=e.length;let i=t;for(let s=0,r=e.length;s<r;s++)if(e[s]===Br){i.rules||(i.rules=[]);let e=i,t=e.rules[e.rules.length-1]||null;i=new Tr,i.start=s+1,i.parent=e,i.previous=t,e.rules.push(i);}else e[s]===$r&&(i.end=s+1,i=i.parent||t);return t}function Rr(e,t){let i=t.substring(e.start,e.end-1);if(e.parsedCssText=e.cssText=i.trim(),e.parent){let s=e.previous?e.previous.end:e.parent.start;i=t.substring(s,e.start-1),i=Nr(i),i=i.replace(Vr.multipleSpaces," "),i=i.substring(i.lastIndexOf(";")+1);let r=e.parsedSelector=e.selector=i.trim();e.atRule=0===r.indexOf(Wr),e.atRule?0===r.indexOf(jr)?e.type=Hr.MEDIA_RULE:r.match(Vr.keyframesRule)&&(e.type=Hr.KEYFRAMES_RULE,e.keyframesName=e.selector.split(Vr.multipleSpaces).pop()):0===r.indexOf(Gr)?e.type=Hr.MIXIN_RULE:e.type=Hr.STYLE_RULE;}let s=e.rules;if(s)for(let r,n=0,o=s.length;n<o&&(r=s[n]);n++)Rr(r,t);return e}function Nr(e){return e.replace(/\\([0-9a-f]{1,6})\s/gi,(function(){let e=arguments[1],t=6-e.length;for(;t--;)e="0"+e;return "\\"+e}))}function kr(e,t,i=""){let s="";if(e.cssText||e.rules){let i=e.rules;if(i&&!Dr(i))for(let e,r=0,n=i.length;r<n&&(e=i[r]);r++)s=kr(e,t,s);else s=t?e.cssText:Lr(e.cssText),s=s.trim(),s&&(s="  "+s+"\n");}return s&&(e.selector&&(i+=e.selector+" "+Br+"\n"),i+=s,e.selector&&(i+=$r+"\n\n")),i}function Dr(e){let t=e[0];return Boolean(t)&&Boolean(t.selector)&&0===t.selector.indexOf(Gr)}function Lr(e){return Fr(e=Mr(e))}function Mr(e){return e.replace(Vr.customProp,"").replace(Vr.mixinProp,"")}function Fr(e){return e.replace(Vr.mixinApply,"").replace(Vr.varApply,"")}const Hr={STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1e3},Br="{",$r="}",Vr={comments:/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},Gr="--",jr="@media",Wr="@",Ur=new Set,Yr="shady-unscoped";function qr(e){const t=e.textContent;if(!Ur.has(t)){Ur.add(t);const e=document.createElement("style");e.setAttribute("shady-unscoped",""),e.textContent=t,document.head.appendChild(e);}}function Jr(e){return e.hasAttribute(Yr)}function Xr(e,t){return e?("string"==typeof e&&(e=Ir(e)),t&&Kr(e,t),kr(e,M$l)):""}function Zr(e){return !e.__cssRules&&e.textContent&&(e.__cssRules=Ir(e.textContent)),e.__cssRules||null}function Kr(e,t,i,s){if(!e)return;let r=!1,n=e.type;if(s&&n===Hr.MEDIA_RULE){let t=e.selector.match(T$f);t&&(window.matchMedia(t[1]).matches||(r=!0));}n===Hr.STYLE_RULE?t(e):i&&n===Hr.KEYFRAMES_RULE?i(e):n===Hr.MIXIN_RULE&&(r=!0);let o=e.rules;if(o&&!r)for(let a,l=0,d=o.length;l<d&&(a=o[l]);l++)Kr(a,t,i,s);}function Qr(e,t){let i=0;for(let s=t,r=e.length;s<r;s++)if("("===e[s])i++;else if(")"===e[s]&&0==--i)return s;return -1}function en(e,t){let i=e.indexOf("var(");if(-1===i)return t(e,"","","");let s=Qr(e,i+3),r=e.substring(i+4,s),n=e.substring(0,i),o=en(e.substring(s+1),t),a=r.indexOf(",");return -1===a?t(n,r.trim(),"",o):t(n,r.substring(0,a).trim(),r.substring(a+1).trim(),o)}function tn(e){let t=e.localName,i="",s="";return t?t.indexOf("-")>-1?i=t:(s=t,i=e.getAttribute&&e.getAttribute("is")||""):(i=e.is,s=e.extends),{is:i,typeExtension:s}}function sn(e){const t=[],i=e.querySelectorAll("style");for(let s=0;s<i.length;s++){const e=i[s];Jr(e)?R$h||(qr(e),e.parentNode.removeChild(e)):(t.push(e.textContent),e.parentNode.removeChild(e));}return t.join("").trim()}const rn="css-build";function nn(e){if(void 0!==k$j)return k$j;if(void 0===e.__cssBuild){const t=e.getAttribute(rn);if(t)e.__cssBuild=t;else {const t=an(e);""!==t&&ln(e),e.__cssBuild=t;}}return e.__cssBuild||""}function on(e){return ""!==nn(e)}function an(e){const t="template"===e.localName?e.content.firstChild:e.firstChild;if(t instanceof Comment){const e=t.textContent.trim().split(":");if(e[0]===rn)return e[1]}return ""}function ln(e){const t="template"===e.localName?e.content.firstChild:e.firstChild;t.parentNode.removeChild(t);}const dn=/;\s*/m,hn=/^\s*(initial)|(inherit)\s*$/,cn=/\s*!important/,un="_-_";class pn{constructor(){this._map={};}set(e,t){e=e.trim(),this._map[e]={properties:t,dependants:{}};}get(e){return e=e.trim(),this._map[e]||null}}let _n=null;class mn{constructor(){this._currentElement=null,this._measureElement=null,this._map=new pn;}detectMixin(e){return z$f(e)}gatherStyles(e){const t=sn(e.content);if(t){const i=document.createElement("style");return i.textContent=t,e.content.insertBefore(i,e.content.firstChild),i}return null}transformTemplate(e,t){void 0===e._gatheredStyle&&(e._gatheredStyle=this.gatherStyles(e));const i=e._gatheredStyle;return i?this.transformStyle(i,t):null}transformStyle(e,t=""){let i=Zr(e);return this.transformRules(i,t),e.textContent=Xr(i),i}transformCustomStyle(e){let t=Zr(e);return Kr(t,(e=>{":root"===e.selector&&(e.selector="html"),this.transformRule(e);})),e.textContent=Xr(t),t}transformRules(e,t){this._currentElement=t,Kr(e,(e=>{this.transformRule(e);})),this._currentElement=null;}transformRule(e){e.cssText=this.transformCssText(e.parsedCssText,e),":root"===e.selector&&(e.selector=":host > *");}transformCssText(e,t){return e=e.replace(P$f,((e,i,s,r)=>this._produceCssProperties(e,i,s,r,t))),this._consumeCssProperties(e,t)}_getInitialValueForProperty(e){return this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.setAttribute("apply-shim-measure",""),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement)),window.getComputedStyle(this._measureElement).getPropertyValue(e)}_fallbacksFromPreviousRules(e){let t=e;for(;t.parent;)t=t.parent;const i={};let s=!1;return Kr(t,(t=>{s=s||t===e,s||t.selector===e.selector&&Object.assign(i,this._cssTextToMap(t.parsedCssText));})),i}_consumeCssProperties(e,t){let i=null;for(;i=E$i.exec(e);){let s=i[0],r=i[1],n=i.index,o=n+s.indexOf("@apply"),a=n+s.length,l=e.slice(0,o),d=e.slice(a),h=t?this._fallbacksFromPreviousRules(t):{};Object.assign(h,this._cssTextToMap(l));let c=this._atApplyToCssProperties(r,h);e=`${l}${c}${d}`,E$i.lastIndex=n+c.length;}return e}_atApplyToCssProperties(e,t){e=e.replace(dn,"");let i=[],s=this._map.get(e);if(s||(this._map.set(e,{}),s=this._map.get(e)),s){let r,n,o;this._currentElement&&(s.dependants[this._currentElement]=!0);const a=s.properties;for(r in a)o=t&&t[r],n=[r,": var(",e,un,r],o&&n.push(",",o.replace(cn,"")),n.push(")"),cn.test(a[r])&&n.push(" !important"),i.push(n.join(""));}return i.join("; ")}_replaceInitialOrInherit(e,t){let i=hn.exec(t);return i&&(t=i[1]?this._getInitialValueForProperty(e):"apply-shim-inherit"),t}_cssTextToMap(e,t=!1){let i,s,r=e.split(";"),n={};for(let o,a,l=0;l<r.length;l++)o=r[l],o&&(a=o.split(":"),a.length>1&&(i=a[0].trim(),s=a.slice(1).join(":"),t&&(s=this._replaceInitialOrInherit(i,s)),n[i]=s));return n}_invalidateMixinEntry(e){if(_n)for(let t in e.dependants)t!==this._currentElement&&_n(t);}_produceCssProperties(e,t,i,s,r){if(i&&en(i,((e,t)=>{t&&this._map.get(t)&&(s=`@apply ${t};`);})),!s)return e;let n=this._consumeCssProperties(""+s,r),o=e.slice(0,e.indexOf("--")),a=this._cssTextToMap(n,!0),l=a,d=this._map.get(t),h=d&&d.properties;h?l=Object.assign(Object.create(h),a):this._map.set(t,l);let c,u,p=[],_=!1;for(c in l)u=a[c],void 0===u&&(u="initial"),h&&!(c in h)&&(_=!0),p.push(`${t}${un}${c}: ${u}`);return _&&this._invalidateMixinEntry(d),d&&(d.properties=l),i&&(o=`${e};${o}`),`${o}${p.join("; ")};`}}mn.prototype.detectMixin=mn.prototype.detectMixin,mn.prototype.transformStyle=mn.prototype.transformStyle,mn.prototype.transformCustomStyle=mn.prototype.transformCustomStyle,mn.prototype.transformRules=mn.prototype.transformRules,mn.prototype.transformRule=mn.prototype.transformRule,mn.prototype.transformTemplate=mn.prototype.transformTemplate,mn.prototype._separator=un,Object.defineProperty(mn.prototype,"invalidCallback",{get:()=>_n,set(e){_n=e;}});const fn={},gn="_applyShimCurrentVersion",yn="_applyShimNextVersion",bn="_applyShimValidatingVersion",vn=Promise.resolve();function wn(e){let t=fn[e];t&&An(t);}function An(e){e[gn]=e[gn]||0,e[bn]=e[bn]||0,e[yn]=(e[yn]||0)+1;}function Cn(e){return e[gn]===e[yn]}function Sn(e){return !Cn(e)&&e[bn]===e[yn]}function xn(e){e[bn]=e[yn],e._validating||(e._validating=!0,vn.then((function(){e[gn]=e[yn],e._validating=!1;})));}const Pn=new mn;class En{constructor(){this.customStyleInterface=null,Pn.invalidCallback=wn;}ensure(){this.customStyleInterface||window.ShadyCSS.CustomStyleInterface&&(this.customStyleInterface=window.ShadyCSS.CustomStyleInterface,this.customStyleInterface.transformCallback=e=>{Pn.transformCustomStyle(e);},this.customStyleInterface.validateCallback=()=>{requestAnimationFrame((()=>{this.customStyleInterface.enqueued&&this.flushCustomStyles();}));});}prepareTemplate(e,t){if(this.ensure(),on(e))return;fn[t]=e;let i=Pn.transformTemplate(e,t);e._styleAst=i;}flushCustomStyles(){if(this.ensure(),!this.customStyleInterface)return;let e=this.customStyleInterface.processStyles();if(this.customStyleInterface.enqueued){for(let t=0;t<e.length;t++){let i=e[t],s=this.customStyleInterface.getStyleForCustomStyle(i);s&&Pn.transformCustomStyle(s);}this.customStyleInterface.enqueued=!1;}}styleSubtree(e,t){if(this.ensure(),t&&I$l(e,t),e.shadowRoot){this.styleElement(e);let t=e.shadowRoot.children||e.shadowRoot.childNodes;for(let e=0;e<t.length;e++)this.styleSubtree(t[e]);}else {let t=e.children||e.childNodes;for(let e=0;e<t.length;e++)this.styleSubtree(t[e]);}}styleElement(e){this.ensure();let{is:t}=tn(e),i=fn[t];if((!i||!on(i))&&i&&!Cn(i)){Sn(i)||(this.prepareTemplate(i,t),xn(i));let s=e.shadowRoot;if(s){let e=s.querySelector("style");e&&(e.__cssRules=i._styleAst,e.textContent=Xr(i._styleAst));}}}styleDocument(e){this.ensure(),this.styleSubtree(document.body,e);}}if(!window.ShadyCSS||!window.ShadyCSS.ScopingShim){const e=new En;let t=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate(t,i,s){e.flushCustomStyles(),e.prepareTemplate(t,i);},prepareTemplateStyles(e,t,i){window.ShadyCSS.prepareTemplate(e,t,i);},prepareTemplateDom(e,t){},styleSubtree(t,i){e.flushCustomStyles(),e.styleSubtree(t,i);},styleElement(t){e.flushCustomStyles(),e.styleElement(t);},styleDocument(t){e.flushCustomStyles(),e.styleDocument(t);},getComputedStyleValue:(e,t)=>O$e(e,t),flushCustomStyles(){e.flushCustomStyles();},nativeCss:M$l,nativeShadow:R$h,cssBuild:k$j,disableRuntime:L$k},t&&(window.ShadyCSS.CustomStyleInterface=t);}window.ShadyCSS.ApplyShim=Pn;const Tn=/:host\(:dir\((ltr|rtl)\)\)/g,In=':host([dir="$1"])',On=/([\s\w-#\.\[\]\*]*):dir\((ltr|rtl)\)/g,zn=':host([dir="$2"]) $1',Rn=/:dir\((?:ltr|rtl)\)/,Nn=Boolean(window.ShadyDOM&&window.ShadyDOM.inUse),kn=[];let Dn=null,Ln="";function Mn(){Ln=document.documentElement.getAttribute("dir");}function Fn(e){if(!e.__autoDirOptOut){e.setAttribute("dir",Ln);}}function Hn(){Mn(),Ln=document.documentElement.getAttribute("dir");for(let e=0;e<kn.length;e++)Fn(kn[e]);}function Bn(){Dn&&Dn.takeRecords().length&&Hn();}const $n=qe$1((e=>{Nn||Dn||(Mn(),Dn=new MutationObserver(Hn),Dn.observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]}));const t=Et(e);class i extends t{static _processStyleText(e,i){return e=t._processStyleText.call(this,e,i),!Nn&&Rn.test(e)&&(e=this._replaceDirInCssText(e),this.__activateDir=!0),e}static _replaceDirInCssText(e){let t=e;return t=t.replace(Tn,In),t=t.replace(On,zn),t}constructor(){super(),this.__autoDirOptOut=!1;}ready(){super.ready(),this.__autoDirOptOut=this.hasAttribute("dir");}connectedCallback(){t.prototype.connectedCallback&&super.connectedCallback(),this.constructor.__activateDir&&(Bn(),kn.push(this),Fn(this));}disconnectedCallback(){if(t.prototype.disconnectedCallback&&super.disconnectedCallback(),this.constructor.__activateDir){const e=kn.indexOf(this);e>-1&&kn.splice(e,1);}}}return i.__activateDir=!1,i}));function Vn(){document.body.removeAttribute("unresolved");}function Gn(e,t,i){return {index:e,removed:t,addedCount:i}}"interactive"===document.readyState||"complete"===document.readyState?Vn():window.addEventListener("DOMContentLoaded",Vn);const jn=0,Wn=1,Un=2,Yn=3;function qn(e,t,i,s,r,n){let o=n-r+1,a=i-t+1,l=new Array(o);for(let d=0;d<o;d++)l[d]=new Array(a),l[d][0]=d;for(let d=0;d<a;d++)l[0][d]=d;for(let d=1;d<o;d++)for(let i=1;i<a;i++)if(eo(e[t+i-1],s[r+d-1]))l[d][i]=l[d-1][i-1];else {let e=l[d-1][i]+1,t=l[d][i-1]+1;l[d][i]=e<t?e:t;}return l}function Jn(e){let t=e.length-1,i=e[0].length-1,s=e[t][i],r=[];for(;t>0||i>0;){if(0==t){r.push(Un),i--;continue}if(0==i){r.push(Yn),t--;continue}let n,o=e[t-1][i-1],a=e[t-1][i],l=e[t][i-1];n=a<l?a<o?a:o:l<o?l:o,n==o?(o==s?r.push(jn):(r.push(Wn),s=o),t--,i--):n==a?(r.push(Yn),t--,s=a):(r.push(Un),i--,s=l);}return r.reverse(),r}function Xn(e,t,i,s,r,n){let o,a=0,l=0,d=Math.min(i-t,n-r);if(0==t&&0==r&&(a=Zn(e,s,d)),i==e.length&&n==s.length&&(l=Kn(e,s,d-a)),r+=a,n-=l,(i-=l)-(t+=a)==0&&n-r==0)return [];if(t==i){for(o=Gn(t,[],0);r<n;)o.removed.push(s[r++]);return [o]}if(r==n)return [Gn(t,[],i-t)];let h=Jn(qn(e,t,i,s,r,n));o=void 0;let c=[],u=t,p=r;for(let _=0;_<h.length;_++)switch(h[_]){case jn:o&&(c.push(o),o=void 0),u++,p++;break;case Wn:o||(o=Gn(u,[],0)),o.addedCount++,u++,o.removed.push(s[p]),p++;break;case Un:o||(o=Gn(u,[],0)),o.addedCount++,u++;break;case Yn:o||(o=Gn(u,[],0)),o.removed.push(s[p]),p++;}return o&&c.push(o),c}function Zn(e,t,i){for(let s=0;s<i;s++)if(!eo(e[s],t[s]))return s;return i}function Kn(e,t,i){let s=e.length,r=t.length,n=0;for(;n<i&&eo(e[--s],t[--r]);)n++;return n}function Qn(e,t){return Xn(e,0,e.length,t,0,t.length)}function eo(e,t){return e===t}function to(e){return "slot"===e.localName}let io=class{static getFlattenedNodes(e){const t=Je(e);return to(e)?(e=e,t.assignedNodes({flatten:!0})):Array.from(t.childNodes).map((e=>to(e)?Je(e=e).assignedNodes({flatten:!0}):[e])).reduce(((e,t)=>e.concat(t)),[])}constructor(e,t){this._shadyChildrenObserver=null,this._nativeChildrenObserver=null,this._connected=!1,this._target=e,this.callback=t,this._effectiveNodes=[],this._observer=null,this._scheduled=!1,this._boundSchedule=()=>{this._schedule();},this.connect(),this._schedule();}connect(){to(this._target)?this._listenSlots([this._target]):Je(this._target).children&&(this._listenSlots(Je(this._target).children),window.ShadyDOM?this._shadyChildrenObserver=window.ShadyDOM.observeChildren(this._target,(e=>{this._processMutations(e);})):(this._nativeChildrenObserver=new MutationObserver((e=>{this._processMutations(e);})),this._nativeChildrenObserver.observe(this._target,{childList:!0}))),this._connected=!0;}disconnect(){to(this._target)?this._unlistenSlots([this._target]):Je(this._target).children&&(this._unlistenSlots(Je(this._target).children),window.ShadyDOM&&this._shadyChildrenObserver?(window.ShadyDOM.unobserveChildren(this._shadyChildrenObserver),this._shadyChildrenObserver=null):this._nativeChildrenObserver&&(this._nativeChildrenObserver.disconnect(),this._nativeChildrenObserver=null)),this._connected=!1;}_schedule(){this._scheduled||(this._scheduled=!0,wt$2.run((()=>this.flush())));}_processMutations(e){this._processSlotMutations(e),this.flush();}_processSlotMutations(e){if(e)for(let t=0;t<e.length;t++){let i=e[t];i.addedNodes&&this._listenSlots(i.addedNodes),i.removedNodes&&this._unlistenSlots(i.removedNodes);}}flush(){if(!this._connected)return !1;window.ShadyDOM&&ShadyDOM.flush(),this._nativeChildrenObserver?this._processSlotMutations(this._nativeChildrenObserver.takeRecords()):this._shadyChildrenObserver&&this._processSlotMutations(this._shadyChildrenObserver.takeRecords()),this._scheduled=!1;let e={target:this._target,addedNodes:[],removedNodes:[]},t=this.constructor.getFlattenedNodes(this._target),i=Qn(t,this._effectiveNodes);for(let r,n=0;n<i.length&&(r=i[n]);n++)for(let t,i=0;i<r.removed.length&&(t=r.removed[i]);i++)e.removedNodes.push(t);for(let r,n=0;n<i.length&&(r=i[n]);n++)for(let i=r.index;i<r.index+r.addedCount;i++)e.addedNodes.push(t[i]);this._effectiveNodes=t;let s=!1;return (e.addedNodes.length||e.removedNodes.length)&&(s=!0,this.callback.call(this._target,e)),s}_listenSlots(e){for(let t=0;t<e.length;t++){let i=e[t];to(i)&&i.addEventListener("slotchange",this._boundSchedule);}}_unlistenSlots(e){for(let t=0;t<e.length;t++){let i=e[t];to(i)&&i.removeEventListener("slotchange",this._boundSchedule);}}};const so=Element.prototype,ro=so.matches||so.matchesSelector||so.mozMatchesSelector||so.msMatchesSelector||so.oMatchesSelector||so.webkitMatchesSelector,no=function(e,t){return ro.call(e,t)};class oo{constructor(e){window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.patch(e),this.node=e;}observeNodes(e){return new io(this.node,e)}unobserveNodes(e){e.disconnect();}notifyObserver(){}deepContains(e){if(Je(this.node).contains(e))return !0;let t=e,i=e.ownerDocument;for(;t&&t!==i&&t!==this.node;)t=Je(t).parentNode||Je(t).host;return t===this.node}getOwnerRoot(){return Je(this.node).getRootNode()}getDistributedNodes(){return "slot"===this.node.localName?Je(this.node).assignedNodes({flatten:!0}):[]}getDestinationInsertionPoints(){let e=[],t=Je(this.node).assignedSlot;for(;t;)e.push(t),t=Je(t).assignedSlot;return e}importNode(e,t){let i=this.node instanceof Document?this.node:this.node.ownerDocument;return Je(i).importNode(e,t)}getEffectiveChildNodes(){return io.getFlattenedNodes(this.node)}queryDistributedElements(e){let t=this.getEffectiveChildNodes(),i=[];for(let s,r=0,n=t.length;r<n&&(s=t[r]);r++)s.nodeType===Node.ELEMENT_NODE&&no(s,e)&&i.push(s);return i}get activeElement(){let e=this.node;return void 0!==e._activeElement?e._activeElement:e.activeElement}}function ao(e,t){for(let i=0;i<t.length;i++){let s=t[i];e[s]=function(){return this.node[s].apply(this.node,arguments)};}}function lo(e,t){for(let i=0;i<t.length;i++){let s=t[i];Object.defineProperty(e,s,{get:function(){return this.node[s]},configurable:!0});}}function ho(e,t){for(let i=0;i<t.length;i++){let s=t[i];Object.defineProperty(e,s,{get:function(){return this.node[s]},set:function(e){this.node[s]=e;},configurable:!0});}}class co{constructor(e){this.event=e;}get rootTarget(){return this.path[0]}get localTarget(){return this.event.target}get path(){return this.event.composedPath()}}let uo=oo;if(window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.noPatch&&window.ShadyDOM.Wrapper){class e extends window.ShadyDOM.Wrapper{}Object.getOwnPropertyNames(oo.prototype).forEach((t=>{"activeElement"!=t&&(e.prototype[t]=oo.prototype[t]);})),lo(e.prototype,["classList"]),uo=e,Object.defineProperties(co.prototype,{localTarget:{get(){const e=this.event.currentTarget,t=e&&po(e).getOwnerRoot(),i=this.path;for(let s=0;s<i.length;s++){const e=i[s];if(po(e).getOwnerRoot()===t)return e}},configurable:!0},path:{get(){return window.ShadyDOM.composedPath(this.event)},configurable:!0}});}else ao(oo.prototype,["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector","querySelectorAll"]),lo(oo.prototype,["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling","childNodes","children","classList"]),ho(oo.prototype,["textContent","innerHTML","className"]);const po=function(e){if((e=e||document)instanceof uo)return e;if(e instanceof co)return e;let t=e.__domApi;return t||(t=e instanceof Event?new co(e):new uo(e),e.__domApi=t),t},_o=window.ShadyDOM,mo=window.ShadyCSS;function fo(e,t){return Je(e).getRootNode()===t}function go(e,t=!1){if(!_o||!mo)return null;if(!_o.handlesDynamicScoping)return null;const i=mo.ScopingShim;if(!i)return null;const s=i.scopeForNode(e),r=Je(e).getRootNode(),n=e=>{if(!fo(e,r))return;const t=Array.from(_o.nativeMethods.querySelectorAll.call(e,"*"));t.push(e);for(let n=0;n<t.length;n++){const e=t[n];if(!fo(e,r))continue;const o=i.currentScopeForNode(e);o!==s&&(""!==o&&i.unscopeNode(e,o),i.scopeNode(e,s));}};if(n(e),t){const t=new MutationObserver((e=>{for(let t=0;t<e.length;t++){const i=e[t];for(let e=0;e<i.addedNodes.length;e++){const t=i.addedNodes[e];t.nodeType===Node.ELEMENT_NODE&&n(t);}}}));return t.observe(e,{childList:!0,subtree:!0}),t}return null}const yo="disable-upgrade",bo=e=>{for(;e;){const t=Object.getOwnPropertyDescriptor(e,"observedAttributes");if(t)return t.get;e=Object.getPrototypeOf(e.prototype).constructor;}return ()=>[]};qe$1((e=>{const t=Hi(e);let i=bo(t);class s extends t{constructor(){super(),this.__isUpgradeDisabled;}static get observedAttributes(){return i.call(this).concat(yo)}_initializeProperties(){this.hasAttribute(yo)?this.__isUpgradeDisabled=!0:super._initializeProperties();}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties();}_canApplyPropertyDefault(e){return super._canApplyPropertyDefault(e)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(e))}attributeChangedCallback(e,t,i,s){e==yo?this.__isUpgradeDisabled&&null==i&&(super._initializeProperties(),this.__isUpgradeDisabled=!1,Je(this).isConnected&&super.connectedCallback()):super.attributeChangedCallback(e,t,i,s);}connectedCallback(){this.__isUpgradeDisabled||super.connectedCallback();}disconnectedCallback(){this.__isUpgradeDisabled||super.disconnectedCallback();}}return s}));const vo="disable-upgrade";let wo=window.ShadyCSS;const Ao=qe$1((e=>{const t=js(Hi(e)),i=Fi?t:$n(t),s=bo(i),r={x:"pan-x",y:"pan-y",none:"none",all:"auto"};class n extends i{constructor(){super(),this._legacyForceObservedAttributes;}static get importMeta(){return this.prototype.importMeta}created(){}__attributeReaction(e,t,i){(this.__dataAttributes&&this.__dataAttributes[e]||e===vo)&&this.attributeChangedCallback(e,t,i,null);}setAttribute(e,t){if(ae$3&&!this._legacyForceObservedAttributes){const i=this.getAttribute(e);super.setAttribute(e,t),this.__attributeReaction(e,i,String(t));}else super.setAttribute(e,t);}removeAttribute(e){if(ae$3&&!this._legacyForceObservedAttributes){const t=this.getAttribute(e);super.removeAttribute(e),this.__attributeReaction(e,t,null);}else super.removeAttribute(e);}static get observedAttributes(){return ae$3&&!this.prototype._legacyForceObservedAttributes?(this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))||(this.__observedAttributes=[],ki()),this.__observedAttributes):s.call(this).concat(vo)}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties();}_canApplyPropertyDefault(e){return super._canApplyPropertyDefault(e)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(e))}connectedCallback(){this.__needsAttributesAtConnected&&this._takeAttributes(),this.__isUpgradeDisabled||(super.connectedCallback(),this.isAttached=!0,this.attached());}attached(){}disconnectedCallback(){this.__isUpgradeDisabled||(super.disconnectedCallback(),this.isAttached=!1,this.detached());}detached(){}attributeChangedCallback(e,t,i,s){t!==i&&(e==vo?this.__isUpgradeDisabled&&null==i&&(this._initializeProperties(),this.__isUpgradeDisabled=!1,Je(this).isConnected&&this.connectedCallback()):(super.attributeChangedCallback(e,t,i,s),this.attributeChanged(e,t,i)));}attributeChanged(e,t,i){}_initializeProperties(){if(Q$7&&this.hasAttribute(vo))this.__isUpgradeDisabled=!0;else {let e=Object.getPrototypeOf(this);e.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",e))||(this._registered(),e.__hasRegisterFinished=!0),super._initializeProperties(),this.root=this,this.created(),ae$3&&!this._legacyForceObservedAttributes&&(this.hasAttributes()?this._takeAttributes():this.parentNode||(this.__needsAttributesAtConnected=!0)),this._applyListeners();}}_takeAttributes(){const e=this.attributes;for(let t=0,i=e.length;t<i;t++){const i=e[t];this.__attributeReaction(i.name,null,i.value);}}_registered(){}ready(){this._ensureAttributes(),super.ready();}_ensureAttributes(){}_applyListeners(){}serialize(e){return this._serializeValue(e)}deserialize(e,t){return this._deserializeValue(e,t)}reflectPropertyToAttribute(e,t,i){this._propertyToAttribute(e,t,i);}serializeValueToAttribute(e,t,i){this._valueToNodeAttribute(i||this,e,t);}extend(e,t){if(!e||!t)return e||t;let i=Object.getOwnPropertyNames(t);for(let s,r=0;r<i.length&&(s=i[r]);r++){let i=Object.getOwnPropertyDescriptor(t,s);i&&Object.defineProperty(e,s,i);}return e}mixin(e,t){for(let i in t)e[i]=t[i];return e}chainObject(e,t){return e&&t&&e!==t&&(e.__proto__=t),e}instanceTemplate(e){let t=this.constructor._contentForTemplate(e);return document.importNode(t,!0)}fire(e,t,i){i=i||{},t=null==t?{}:t;let s=new Event(e,{bubbles:void 0===i.bubbles||i.bubbles,cancelable:Boolean(i.cancelable),composed:void 0===i.composed||i.composed});s.detail=t;let r=i.node||this;return Je(r).dispatchEvent(s),s}listen(e,t,i){e=e||this;let s=this.__boundListeners||(this.__boundListeners=new WeakMap),r=s.get(e);r||(r={},s.set(e,r));let n=t+i;r[n]||(r[n]=this._addMethodEventListenerToNode(e,t,i,this));}unlisten(e,t,i){e=e||this;let s=this.__boundListeners&&this.__boundListeners.get(e),r=t+i,n=s&&s[r];n&&(this._removeEventListenerFromNode(e,t,n),s[r]=null);}setScrollDirection(e,t){Ms(t||this,r[e]||"auto");}$$(e){return this.root.querySelector(e)}get domHost(){let e=Je(this).getRootNode();return e instanceof DocumentFragment?e.host:e}distributeContent(){const e=po(this);window.ShadyDOM&&e.shadowRoot&&ShadyDOM.flush();}getEffectiveChildNodes(){return po(this).getEffectiveChildNodes()}queryDistributedElements(e){return po(this).queryDistributedElements(e)}getEffectiveChildren(){return this.getEffectiveChildNodes().filter((function(e){return e.nodeType===Node.ELEMENT_NODE}))}getEffectiveTextContent(){let e=this.getEffectiveChildNodes(),t=[];for(let i,s=0;i=e[s];s++)i.nodeType!==Node.COMMENT_NODE&&t.push(i.textContent);return t.join("")}queryEffectiveChildren(e){let t=this.queryDistributedElements(e);return t&&t[0]}queryAllEffectiveChildren(e){return this.queryDistributedElements(e)}getContentChildNodes(e){let t=this.root.querySelector(e||"slot");return t?po(t).getDistributedNodes():[]}getContentChildren(e){return this.getContentChildNodes(e).filter((function(e){return e.nodeType===Node.ELEMENT_NODE}))}isLightDescendant(e){const t=this;return t!==e&&Je(t).contains(e)&&Je(t).getRootNode()===Je(e).getRootNode()}isLocalDescendant(e){return this.root===Je(e).getRootNode()}scopeSubtree(e,t=!1){return go(e,t)}getComputedStyleValue(e){return wo.getComputedStyleValue(this,e)}debounce(e,t,i){return this._debouncers=this._debouncers||{},this._debouncers[e]=Wi.debounce(this._debouncers[e],i>0?yt$2.after(i):wt$2,t.bind(this))}isDebouncerActive(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];return !(!t||!t.isActive())}flushDebouncer(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];t&&t.flush();}cancelDebouncer(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];t&&t.cancel();}async(e,t){return t>0?yt$2.run(e.bind(this),t):~wt$2.run(e.bind(this))}cancelAsync(e){e<0?wt$2.cancel(~e):yt$2.cancel(e);}create(e,t){let i=document.createElement(e);if(t)if(i.setProperties)i.setProperties(t);else for(let s in t)i[s]=t[s];return i}elementMatches(e,t){return no(t||this,e)}toggleAttribute(e,t){let i=this;return 3===arguments.length&&(i=arguments[2]),1==arguments.length&&(t=!i.hasAttribute(e)),t?(Je(i).setAttribute(e,""),!0):(Je(i).removeAttribute(e),!1)}toggleClass(e,t,i){i=i||this,1==arguments.length&&(t=!i.classList.contains(e)),t?i.classList.add(e):i.classList.remove(e);}transform(e,t){(t=t||this).style.webkitTransform=e,t.style.transform=e;}translate3d(e,t,i,s){s=s||this,this.transform("translate3d("+e+","+t+","+i+")",s);}arrayDelete(e,t){let i;if(Array.isArray(e)){if(i=e.indexOf(t),i>=0)return e.splice(i,1)}else {if(i=rt$2(this,e).indexOf(t),i>=0)return this.splice(e,i,1)}return null}_logger(e,t){switch(Array.isArray(t)&&1===t.length&&Array.isArray(t[0])&&(t=t[0]),e){case"log":case"warn":case"error":console[e](...t);}}_log(...e){this._logger("log",e);}_warn(...e){this._logger("warn",e);}_error(...e){this._logger("error",e);}_logf(e,...t){return ["[%s::%s]",this.is,e,...t]}}return n.prototype.is="",n})),Co={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,listeners:!0,hostAttributes:!0},So={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,behaviors:!0,_noAccessors:!0},xo=Object.assign({listeners:!0,hostAttributes:!0,properties:!0,observers:!0},So);function Po(e,t,i){const s=e._noAccessors,r=Object.getOwnPropertyNames(e);for(let n=0;n<r.length;n++){let o=r[n];if(!(o in i))if(s)t[o]=e[o];else {let i=Object.getOwnPropertyDescriptor(e,o);i&&(i.configurable=!0,Object.defineProperty(t,o,i));}}}function Eo(e,t,i){for(let s=0;s<t.length;s++)To(e,t[s],i,xo);}function To(e,t,i,s){Po(t,e,s);for(let r in Co)t[r]&&(i[r]=i[r]||[],i[r].push(t[r]));}function Io(e,t,i){t=t||[];for(let s=e.length-1;s>=0;s--){let r=e[s];r?Array.isArray(r)?Io(r,t):t.indexOf(r)<0&&(!i||i.indexOf(r)<0)&&t.unshift(r):console.warn("behavior is null, check for missing or 404 import");}return t}function Oo(e,t){for(const i in t){const s=e[i],r=t[i];e[i]=!("value"in r)&&s&&"value"in s?Object.assign({value:s.value},r):r;}}const zo=Ao(HTMLElement);function Ro(e,t,i){let s;const r={};class n extends t{static _finalizeClass(){if(this.hasOwnProperty(JSCompiler_renameProperty("generatedFrom",this))){if(s)for(let e,t=0;t<s.length;t++)e=s[t],e.properties&&this.createProperties(e.properties),e.observers&&this.createObservers(e.observers,e.properties);e.properties&&this.createProperties(e.properties),e.observers&&this.createObservers(e.observers,e.properties),this._prepareTemplate();}else t._finalizeClass.call(this);}static get properties(){const t={};if(s)for(let e=0;e<s.length;e++)Oo(t,s[e].properties);return Oo(t,e.properties),t}static get observers(){let t=[];if(s)for(let e,i=0;i<s.length;i++)e=s[i],e.observers&&(t=t.concat(e.observers));return e.observers&&(t=t.concat(e.observers)),t}created(){super.created();const e=r.created;if(e)for(let t=0;t<e.length;t++)e[t].call(this);}_registered(){const e=n.prototype;if(!e.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",e))){e.__hasRegisterFinished=!0,super._registered(),Q$7&&o(e);const t=Object.getPrototypeOf(this);let i=r.beforeRegister;if(i)for(let e=0;e<i.length;e++)i[e].call(t);if(i=r.registered,i)for(let e=0;e<i.length;e++)i[e].call(t);}}_applyListeners(){super._applyListeners();const e=r.listeners;if(e)for(let t=0;t<e.length;t++){const i=e[t];if(i)for(let e in i)this._addMethodEventListenerToNode(this,e,i[e]);}}_ensureAttributes(){const e=r.hostAttributes;if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];for(let e in i)this._ensureAttribute(e,i[e]);}super._ensureAttributes();}ready(){super.ready();let e=r.ready;if(e)for(let t=0;t<e.length;t++)e[t].call(this);}attached(){super.attached();let e=r.attached;if(e)for(let t=0;t<e.length;t++)e[t].call(this);}detached(){super.detached();let e=r.detached;if(e)for(let t=0;t<e.length;t++)e[t].call(this);}attributeChanged(e,t,i){super.attributeChanged();let s=r.attributeChanged;if(s)for(let r=0;r<s.length;r++)s[r].call(this,e,t,i);}}if(i){Array.isArray(i)||(i=[i]);let e=t.prototype.behaviors;s=Io(i,null,e),n.prototype.behaviors=e?e.concat(i):s;}const o=t=>{s&&Eo(t,s,r),To(t,e,r,So);};return Q$7||o(n.prototype),n.generatedFrom=e,n}const No=function(e,t){e||console.warn("Polymer.Class requires `info` argument");let i=t?t(zo):zo;return i=Ro(e,i,e.behaviors),i.is=i.prototype.is=e.is,i};function ko(e,t,i,s,r){let n;r&&(n="object"==typeof i&&null!==i,n&&(s=e.__dataTemp[t]));let o=s!==i&&(s==s||i==i);return n&&o&&(e.__dataTemp[t]=i),o}const Do=qe$1((e=>{class t extends e{_shouldPropertyChange(e,t,i){return ko(this,e,t,i,!0)}}return t})),Lo=qe$1((e=>{class t extends e{static get properties(){return {mutableData:Boolean}}_shouldPropertyChange(e,t,i){return ko(this,e,t,i,this.mutableData)}}return t}));Do._mutablePropertyChange=ko;let Mo=null;function Fo(){return Mo}Fo.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:Fo,writable:!0}});const Ho=Ri(Fo),Bo=Do(Ho);function $o(e,t){Mo=e,Object.setPrototypeOf(e,t.prototype),new t,Mo=null;}const Vo=Ri(class{});function Go(e,t){for(let i=0;i<t.length;i++){let s=t[i];if(Boolean(e)!=Boolean(s.__hideTemplateChildren__))if(s.nodeType===Node.TEXT_NODE)e?(s.__polymerTextContent__=s.textContent,s.textContent=""):s.textContent=s.__polymerTextContent__;else if("slot"===s.localName)if(e)s.__polymerReplaced__=document.createComment("hidden-slot"),Je(Je(s).parentNode).replaceChild(s.__polymerReplaced__,s);else {const e=s.__polymerReplaced__;e&&Je(Je(e).parentNode).replaceChild(s,e);}else s.style&&(e?(s.__polymerDisplay__=s.style.display,s.style.display="none"):s.style.display=s.__polymerDisplay__);s.__hideTemplateChildren__=e,s._showHideChildren&&s._showHideChildren(e);}}class jo extends Vo{constructor(e){super(),this._configureProperties(e),this.root=this._stampTemplate(this.__dataHost);let t=[];this.children=t;for(let s=this.root.firstChild;s;s=s.nextSibling)t.push(s),s.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let i=this.__templatizeOptions;(e&&i.instanceProps||!i.instanceProps)&&this._enableProperties();}_configureProperties(e){if(this.__templatizeOptions.forwardHostProp)for(let t in this.__hostProps)this._setPendingProperty(t,this.__dataHost["_host_"+t]);for(let t in e)this._setPendingProperty(t,e[t]);}forwardHostProp(e,t){this._setPendingPropertyOrPath(e,t,!1,!0)&&this.__dataHost._enqueueClient(this);}_addEventListenerToNode(e,t,i){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(e,t,(e=>{e.model=this,i(e);}));else {let s=this.__dataHost.__dataHost;s&&s._addEventListenerToNode(e,t,i);}}_showHideChildren(e){Go(e,this.children);}_setUnmanagedPropertyToNode(e,t,i){e.__hideTemplateChildren__&&e.nodeType==Node.TEXT_NODE&&"textContent"==t?e.__polymerTextContent__=i:super._setUnmanagedPropertyToNode(e,t,i);}get parentModel(){let e=this.__parentModel;if(!e){let t;e=this;do{e=e.__dataHost.__dataHost;}while((t=e.__templatizeOptions)&&!t.parentModel);this.__parentModel=e;}return e}dispatchEvent(e){return !0}}const Wo=Do(jo);function Uo(e){let t=e.__dataHost;return t&&t._methodHost||t}function Yo(e,t,i){let s=i.mutableData?Wo:jo;Qo.mixin&&(s=Qo.mixin(s));let r=class extends s{};return r.prototype.__templatizeOptions=i,r.prototype._bindTemplate(e),Xo(r,e,t,i),r}function qo(e,t,i,s){let r=i.forwardHostProp;if(r&&t.hasHostProps){const n="template"==e.localName;let o=t.templatizeTemplateClass;if(!o){if(n){let e=i.mutableData?Bo:Ho;class s extends e{}o=t.templatizeTemplateClass=s;}else {const i=e.constructor;class s extends i{}o=t.templatizeTemplateClass=s;}let a=t.hostProps;for(let e in a)o.prototype._addPropertyEffect("_host_"+e,o.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:Jo(e,r)}),o.prototype._createNotifyingProperty("_host_"+e);ee$4&&s&&ea(t,i,s);}if(e.__dataProto&&Object.assign(e.__data,e.__dataProto),n)$o(e,o),e.__dataTemp={},e.__dataPending=null,e.__dataOld=null,e._enableProperties();else {Object.setPrototypeOf(e,o.prototype);const i=t.hostProps;for(let t in i)if(t="_host_"+t,t in e){const i=e[t];delete e[t],e.__data[t]=i;}}}}function Jo(e,t){return function(e,i,s){t.call(e.__templatizeOwner,i.substring("_host_".length),s[i]);}}function Xo(e,t,i,s){let r=i.hostProps||{};for(let n in s.instanceProps){delete r[n];let t=s.notifyInstanceProp;t&&e.prototype._addPropertyEffect(n,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:Zo(n,t)});}if(s.forwardHostProp&&t.__dataHost)for(let n in r)i.hasHostProps||(i.hasHostProps=!0),e.prototype._addPropertyEffect(n,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:Ko()});}function Zo(e,t){return function(e,i,s){t.call(e.__templatizeOwner,e,i,s[i]);}}function Ko(){return function(e,t,i){e.__dataHost._setPendingPropertyOrPath("_host_"+t,i[t],!0,!0);}}function Qo(e,t,i){if(Z$7&&!Uo(e))throw new Error("strictTemplatePolicy: template owner not trusted");if(i=i||{},e.__templatizeOwner)throw new Error("A <template> can only be templatized once");e.__templatizeOwner=t;let s=(t?t.constructor:jo)._parseTemplate(e),r=s.templatizeInstanceClass;r||(r=Yo(e,s,i),s.templatizeInstanceClass=r);const n=Uo(e);qo(e,s,i,n);let o=class extends r{};return o.prototype._methodHost=n,o.prototype.__dataHost=e,o.prototype.__templatizeOwner=t,o.prototype.__hostProps=s.hostProps,o=o,o}function ea(e,t,i){const s=i.constructor._properties,{propertyEffects:r}=e,{instanceProps:n}=t;for(let o in r)if(!(s[o]||n&&n[o])){const e=r[o];for(let t=0;t<e.length;t++){const{part:i}=e[t].info;if(!i.signature||!i.signature.static){console.warn(`Property '${o}' used in template but not declared in 'properties'; attribute will not be observed.`);break}}}}function ta(e,t){let i;for(;t;)if(i=t.__dataHost?t:t.__templatizeInstance){if(i.__dataHost==e)return i;t=i.__dataHost;}else t=Je(t).parentNode;return null}let ia=!1;function sa(){if(Q$7&&!U$g){if(!ia){ia=!0;const e=document.createElement("style");e.textContent="dom-bind,dom-if,dom-repeat{display:none;}",document.head.appendChild(e);}return !0}return !1}const ra=js(Lo(Ri(HTMLElement)));class na extends ra{static get observedAttributes(){return ["mutable-data"]}constructor(){if(super(),Z$7)throw new Error("strictTemplatePolicy: dom-bind not allowed");this.root=null,this.$=null,this.__children=null;}attributeChangedCallback(e,t,i,s){this.mutableData=!0;}connectedCallback(){sa()||(this.style.display="none"),this.render();}disconnectedCallback(){this.__removeChildren();}__insertChildren(){Je(Je(this).parentNode).insertBefore(this.root,this);}__removeChildren(){if(this.__children)for(let e=0;e<this.__children.length;e++)this.root.appendChild(this.__children[e]);}render(){let e;if(!this.__children){if(e=e||this.querySelector("template"),!e){let t=new MutationObserver((()=>{if(e=this.querySelector("template"),!e)throw new Error("dom-bind requires a <template> child");t.disconnect(),this.render();}));return void t.observe(this,{childList:!0})}this.root=this._stampTemplate(e),this.$=this.root.$,this.__children=[];for(let e=this.root.firstChild;e;e=e.nextSibling)this.__children[this.__children.length]=e;this._enableProperties();}this.__insertChildren(),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}));}}customElements.define("dom-bind",na);const oa=Lo(ji);class aa extends oa{static get is(){return "dom-repeat"}static get template(){return null}static get properties(){return {items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!oe$4,readOnly:!0},initialCount:{type:Number},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"},notifyDomChange:{type:Boolean},reuseChunkedInstances:{type:Boolean}}}static get observers(){return ["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__renderStartTime=null,this.__itemsArrayChanged=!1,this.__shouldMeasureChunk=!1,this.__shouldContinueChunking=!1,this.__chunkingId=0,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null,this._templateInfo;}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let e=0;e<this.__instances.length;e++)this.__detachInstance(e);}connectedCallback(){if(super.connectedCallback(),sa()||(this.style.display="none"),this.__isDetached){this.__isDetached=!1;let e=Je(Je(this).parentNode);for(let t=0;t<this.__instances.length;t++)this.__attachInstance(t,e);}}__ensureTemplatized(){if(!this.__ctor){const e=this;let t=this.template=e._templateInfo?e:this.querySelector("template");if(!t){let e=new MutationObserver((()=>{if(!this.querySelector("template"))throw new Error("dom-repeat requires a <template> child");e.disconnect(),this.__render();}));return e.observe(this,{childList:!0}),!1}let i={};i[this.as]=!0,i[this.indexAs]=!0,i[this.itemsIndexAs]=!0,this.__ctor=Qo(t,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:i,forwardHostProp:function(e,t){let i=this.__instances;for(let s,r=0;r<i.length&&(s=i[r]);r++)s.forwardHostProp(e,t);},notifyInstanceProp:function(e,t,i){if(tt$2(this.as,t)){let s=e[this.itemsIndexAs];t==this.as&&(this.items[s]=i);let r=et$2(this.as,`${JSCompiler_renameProperty("items",this)}.${s}`,t);this.notifyPath(r,i);}}});}return !0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(e){if("string"==typeof e){let t=e,i=this.__getMethodHost();return function(){return i[t].apply(i,arguments)}}return e}__sortChanged(e){this.__sortFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render);}__filterChanged(e){this.__filterFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render);}__computeFrameTime(e){return Math.ceil(1e3/e)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ");}__handleObservedPaths(e){if(this.__sortFn||this.__filterFn)if(e){if(this.__observePaths){let t=this.__observePaths;for(let i=0;i<t.length;i++)0===e.indexOf(t[i])&&this.__debounceRender(this.__render,this.delay);}}else this.__debounceRender(this.__render,this.delay);}__itemsChanged(e){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(e.path,e.value)||("items"===e.path&&(this.__itemsArrayChanged=!0),this.__debounceRender(this.__render));}__debounceRender(e,t=0){this.__renderDebouncer=Wi.debounce(this.__renderDebouncer,t>0?yt$2.after(t):wt$2,e.bind(this)),Yi(this.__renderDebouncer);}render(){this.__debounceRender(this.__render),Xs();}__render(){if(!this.__ensureTemplatized())return;let e=this.items||[];const t=this.__sortAndFilterItems(e),i=this.__calculateLimit(t.length);this.__updateInstances(e,i,t),this.initialCount&&(this.__shouldMeasureChunk||this.__shouldContinueChunking)&&(cancelAnimationFrame(this.__chunkingId),this.__chunkingId=requestAnimationFrame((()=>this.__continueChunking()))),this._setRenderedItemCount(this.__instances.length),oe$4&&!this.notifyDomChange||this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}));}__sortAndFilterItems(e){let t=new Array(e.length);for(let i=0;i<e.length;i++)t[i]=i;return this.__filterFn&&(t=t.filter(((t,i,s)=>this.__filterFn(e[t],i,s)))),this.__sortFn&&t.sort(((t,i)=>this.__sortFn(e[t],e[i]))),t}__calculateLimit(e){let t=e;const i=this.__instances.length;if(this.initialCount){let s;!this.__chunkCount||this.__itemsArrayChanged&&!this.reuseChunkedInstances?(t=Math.min(e,this.initialCount),s=Math.max(t-i,0),this.__chunkCount=s||1):(s=Math.min(Math.max(e-i,0),this.__chunkCount),t=Math.min(i+s,e)),this.__shouldMeasureChunk=s===this.__chunkCount,this.__shouldContinueChunking=t<e,this.__renderStartTime=performance.now();}return this.__itemsArrayChanged=!1,t}__continueChunking(){if(this.__shouldMeasureChunk){const e=performance.now()-this.__renderStartTime,t=this._targetFrameTime/e;this.__chunkCount=Math.round(this.__chunkCount*t)||1;}this.__shouldContinueChunking&&this.__debounceRender(this.__render);}__updateInstances(e,t,i){const s=this.__itemsIdxToInstIdx={};let r;for(r=0;r<t;r++){let t=this.__instances[r],n=i[r],o=e[n];s[n]=r,t?(t._setPendingProperty(this.as,o),t._setPendingProperty(this.indexAs,r),t._setPendingProperty(this.itemsIndexAs,n),t._flushProperties()):this.__insertInstance(o,r,n);}for(let n=this.__instances.length-1;n>=r;n--)this.__detachAndRemoveInstance(n);}__detachInstance(e){let t=this.__instances[e];const i=Je(t.root);for(let s=0;s<t.children.length;s++){let e=t.children[s];i.appendChild(e);}return t}__attachInstance(e,t){let i=this.__instances[e];t.insertBefore(i.root,this);}__detachAndRemoveInstance(e){this.__detachInstance(e),this.__instances.splice(e,1);}__stampInstance(e,t,i){let s={};return s[this.as]=e,s[this.indexAs]=t,s[this.itemsIndexAs]=i,new this.__ctor(s)}__insertInstance(e,t,i){const s=this.__stampInstance(e,t,i);let r=this.__instances[t+1],n=r?r.children[0]:this;return Je(Je(this).parentNode).insertBefore(s.root,n),this.__instances[t]=s,s}_showHideChildren(e){for(let t=0;t<this.__instances.length;t++)this.__instances[t]._showHideChildren(e);}__handleItemPath(e,t){let i=e.slice(6),s=i.indexOf("."),r=s<0?i:i.substring(0,s);if(r==parseInt(r,10)){let e=s<0?"":i.substring(s+1);this.__handleObservedPaths(e);let n=this.__itemsIdxToInstIdx[r],o=this.__instances[n];if(o){let i=this.as+(e?"."+e:"");o._setPendingPropertyOrPath(i,t,!1,!0),o._flushProperties();}return !0}}itemForElement(e){let t=this.modelForElement(e);return t&&t[this.as]}indexForElement(e){let t=this.modelForElement(e);return t&&t[this.indexAs]}modelForElement(e){return ta(this.template,e)}}customElements.define(aa.is,aa);class la extends ji{static get is(){return "dom-if"}static get template(){return null}static get properties(){return {if:{type:Boolean,observer:"__debounceRender"},restamp:{type:Boolean,observer:"__debounceRender"},notifyDomChange:{type:Boolean}}}constructor(){super(),this.__renderDebouncer=null,this._lastIf=!1,this.__hideTemplateChildren__=!1,this._templateInfo;}__debounceRender(){this.__renderDebouncer=Wi.debounce(this.__renderDebouncer,wt$2,(()=>this.__render())),Yi(this.__renderDebouncer);}disconnectedCallback(){super.disconnectedCallback();const e=Je(this).parentNode;e&&(e.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||Je(e).host)||this.__teardownInstance();}connectedCallback(){super.connectedCallback(),sa()||(this.style.display="none"),this.if&&this.__debounceRender();}__ensureTemplate(){if(!this.__template){const e=this;let t=e._templateInfo?e:Je(e).querySelector("template");if(!t){let e=new MutationObserver((()=>{if(!Je(this).querySelector("template"))throw new Error("dom-if requires a <template> child");e.disconnect(),this.__render();}));return e.observe(this,{childList:!0}),!1}this.__template=t;}return !0}__ensureInstance(){let e=Je(this).parentNode;if(this.__hasInstance()){let t=this.__getInstanceNodes();if(t&&t.length){if(Je(this).previousSibling!==t[t.length-1])for(let i,s=0;s<t.length&&(i=t[s]);s++)Je(e).insertBefore(i,this);}}else {if(!e)return !1;if(!this.__ensureTemplate())return !1;this.__createAndInsertInstance(e);}return !0}render(){Xs();}__render(){if(this.if){if(!this.__ensureInstance())return}else this.restamp&&this.__teardownInstance();this._showHideChildren(),oe$4&&!this.notifyDomChange||this.if==this._lastIf||(this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this._lastIf=this.if);}__hasInstance(){}__getInstanceNodes(){}__createAndInsertInstance(e){}__teardownInstance(){}_showHideChildren(){}}class da extends la{constructor(){super(),this.__instance=null,this.__syncInfo=null;}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.templateInfo.childNodes}__createAndInsertInstance(e){const t=this.__dataHost||this;if(Z$7&&!this.__dataHost)throw new Error("strictTemplatePolicy: template owner not trusted");const i=t._bindTemplate(this.__template,!0);i.runEffects=(e,t,i)=>{let s=this.__syncInfo;if(this.if)s&&(this.__syncInfo=null,this._showHideChildren(),t=Object.assign(s.changedProps,t)),e(t,i);else if(this.__instance)if(s||(s=this.__syncInfo={runEffects:e,changedProps:{}}),i)for(const r in t){const e=Ze(r);s.changedProps[e]=this.__dataHost[e];}else Object.assign(s.changedProps,t);},this.__instance=t._stampTemplate(this.__template,i),Je(e).insertBefore(this.__instance,this);}__syncHostProperties(){const e=this.__syncInfo;e&&(this.__syncInfo=null,e.runEffects(e.changedProps,!1));}__teardownInstance(){const e=this.__dataHost||this;this.__instance&&(e._removeBoundDom(this.__instance),this.__instance=null,this.__syncInfo=null);}_showHideChildren(){const e=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==e&&(this.__instance.__hidden=e,Go(e,this.__instance.templateInfo.childNodes)),e||this.__syncHostProperties();}}class ha extends la{constructor(){super(),this.__ctor=null,this.__instance=null,this.__invalidProps=null;}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.children}__createAndInsertInstance(e){this.__ctor||(this.__ctor=Qo(this.__template,this,{mutableData:!0,forwardHostProp:function(e,t){this.__instance&&(this.if?this.__instance.forwardHostProp(e,t):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[Ze(e)]=!0));}})),this.__instance=new this.__ctor,Je(e).insertBefore(this.__instance.root,this);}__teardownInstance(){if(this.__instance){let e=this.__instance.children;if(e&&e.length){let t=Je(e[0]).parentNode;if(t){t=Je(t);for(let i,s=0;s<e.length&&(i=e[s]);s++)t.removeChild(i);}}this.__invalidProps=null,this.__instance=null;}}__syncHostProperties(){let e=this.__invalidProps;if(e){this.__invalidProps=null;for(let t in e)this.__instance._setPendingProperty(t,this.__dataHost[t]);this.__instance._flushProperties();}}_showHideChildren(){const e=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==e&&(this.__instance.__hidden=e,this.__instance._showHideChildren(e)),e||this.__syncHostProperties();}}const ca=ne$3?da:ha;customElements.define(ca.is,ca);let ua=qe$1((e=>{let t=Hi(e);class i extends t{static get properties(){return {items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}static get observers(){return ["__updateSelection(multi, items.*)"]}constructor(){super(),this.__lastItems=null,this.__lastMulti=null,this.__selectedMap=null;}__updateSelection(e,t){let i=t.path;if(i==JSCompiler_renameProperty("items",this)){let i=t.base||[],s=this.__lastItems;if(e!==this.__lastMulti&&this.clearSelection(),s){let e=Qn(i,s);this.__applySplices(e);}this.__lastItems=i,this.__lastMulti=e;}else if(t.path==`${JSCompiler_renameProperty("items",this)}.splices`)this.__applySplices(t.value.indexSplices);else {let e=i.slice(`${JSCompiler_renameProperty("items",this)}.`.length),t=parseInt(e,10);e.indexOf(".")<0&&e==t&&this.__deselectChangedIdx(t);}}__applySplices(e){let t=this.__selectedMap;for(let s=0;s<e.length;s++){let i=e[s];t.forEach(((e,s)=>{e<i.index||(e>=i.index+i.removed.length?t.set(s,e+i.addedCount-i.removed.length):t.set(s,-1));}));for(let e=0;e<i.addedCount;e++){let s=i.index+e;t.has(this.items[s])&&t.set(this.items[s],s);}}this.__updateLinks();let i=0;t.forEach(((e,s)=>{e<0?(this.multi?this.splice(JSCompiler_renameProperty("selected",this),i,1):this.selected=this.selectedItem=null,t.delete(s)):i++;}));}__updateLinks(){if(this.__dataLinkedPaths={},this.multi){let e=0;this.__selectedMap.forEach((t=>{t>=0&&this.linkPaths(`${JSCompiler_renameProperty("items",this)}.${t}`,`${JSCompiler_renameProperty("selected",this)}.${e++}`);}));}else this.__selectedMap.forEach((e=>{this.linkPaths(JSCompiler_renameProperty("selected",this),`${JSCompiler_renameProperty("items",this)}.${e}`),this.linkPaths(JSCompiler_renameProperty("selectedItem",this),`${JSCompiler_renameProperty("items",this)}.${e}`);}));}clearSelection(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null;}isSelected(e){return this.__selectedMap.has(e)}isIndexSelected(e){return this.isSelected(this.items[e])}__deselectChangedIdx(e){let t=this.__selectedIndexForItemIndex(e);if(t>=0){let e=0;this.__selectedMap.forEach(((i,s)=>{t==e++&&this.deselect(s);}));}}__selectedIndexForItemIndex(e){let t=this.__dataLinkedPaths[`${JSCompiler_renameProperty("items",this)}.${e}`];if(t)return parseInt(t.slice(`${JSCompiler_renameProperty("selected",this)}.`.length),10)}deselect(e){let t=this.__selectedMap.get(e);if(t>=0){let i;this.__selectedMap.delete(e),this.multi&&(i=this.__selectedIndexForItemIndex(t)),this.__updateLinks(),this.multi?this.splice(JSCompiler_renameProperty("selected",this),i,1):this.selected=this.selectedItem=null;}}deselectIndex(e){this.deselect(this.items[e]);}select(e){this.selectIndex(this.items.indexOf(e));}selectIndex(e){let t=this.items[e];this.isSelected(t)?this.toggle&&this.deselectIndex(e):(this.multi||this.__selectedMap.clear(),this.__selectedMap.set(t,e),this.__updateLinks(),this.multi?this.push(JSCompiler_renameProperty("selected",this),t):this.selected=this.selectedItem=t);}}return i}))(ji);class pa extends ua{static get is(){return "array-selector"}static get template(){return null}}customElements.define(pa.is,pa);const _a=Ao(HTMLElement).prototype;var ma=new Set;const fa={properties:{_parentResizable:{type:Object,observer:"_parentResizableChanged"},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":"_onIronRequestResizeNotifications"},created:function(){this._interestedResizables=[],this._boundNotifyResize=this.notifyResize.bind(this),this._boundOnDescendantIronResize=this._onDescendantIronResize.bind(this);},attached:function(){this._requestResizeNotifications();},detached:function(){this._parentResizable?this._parentResizable.stopResizeNotificationsFor(this):(ma.delete(this),window.removeEventListener("resize",this._boundNotifyResize)),this._parentResizable=null;},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach((function(e){this.resizerShouldNotify(e)&&this._notifyDescendant(e);}),this),this._fireResize());},assignParentResizable:function(e){this._parentResizable&&this._parentResizable.stopResizeNotificationsFor(this),this._parentResizable=e,e&&-1===e._interestedResizables.indexOf(this)&&(e._interestedResizables.push(this),e._subscribeIronResize(this));},stopResizeNotificationsFor:function(e){var t=this._interestedResizables.indexOf(e);t>-1&&(this._interestedResizables.splice(t,1),this._unsubscribeIronResize(e));},_subscribeIronResize:function(e){e.addEventListener("iron-resize",this._boundOnDescendantIronResize);},_unsubscribeIronResize:function(e){e.removeEventListener("iron-resize",this._boundOnDescendantIronResize);},resizerShouldNotify:function(e){return !0},_onDescendantIronResize:function(e){this._notifyingDescendant?e.stopPropagation():U$g||this._fireResize();},_fireResize:function(){this.fire("iron-resize",null,{node:this,bubbles:!1});},_onIronRequestResizeNotifications:function(e){var t=po(e).rootTarget;t!==this&&(t.assignParentResizable(this),this._notifyDescendant(t),e.stopPropagation());},_parentResizableChanged:function(e){e&&window.removeEventListener("resize",this._boundNotifyResize);},_notifyDescendant:function(e){this.isAttached&&(this._notifyingDescendant=!0,e.notifyResize(),this._notifyingDescendant=!1);},_requestResizeNotifications:function(){if(this.isAttached)if("loading"===document.readyState){var e=this._requestResizeNotifications.bind(this);document.addEventListener("readystatechange",(function t(){document.removeEventListener("readystatechange",t),e();}));}else this._findParent(),this._parentResizable?this._parentResizable._interestedResizables.forEach((function(e){e!==this&&e._findParent();}),this):(ma.forEach((function(e){e!==this&&e._findParent();}),this),window.addEventListener("resize",this._boundNotifyResize),this.notifyResize());},_findParent:function(){this.assignParentResizable(null),this.fire("iron-request-resize-notifications",null,{node:this,bubbles:!0,cancelable:!0}),this._parentResizable?ma.delete(this):ma.add(this);}},ga={properties:{scrollTarget:{type:HTMLElement,value:function(){return this._defaultScrollTarget}}},observers:["_scrollTargetChanged(scrollTarget, isAttached)"],_shouldHaveListener:!0,_scrollTargetChanged:function(e,t){if(this._oldScrollTarget&&(this._toggleScrollListener(!1,this._oldScrollTarget),this._oldScrollTarget=null),t)if("document"===e)this.scrollTarget=this._doc;else if("string"==typeof e){var i=this.domHost;this.scrollTarget=i&&i.$?i.$[e]:po(this.ownerDocument).querySelector("#"+e);}else this._isValidScrollTarget()&&(this._oldScrollTarget=e,this._toggleScrollListener(this._shouldHaveListener,e));},_scrollHandler:function(){},get _defaultScrollTarget(){return this._doc},get _doc(){return this.ownerDocument.documentElement},get _scrollTop(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageYOffset:this.scrollTarget.scrollTop:0},get _scrollLeft(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageXOffset:this.scrollTarget.scrollLeft:0},set _scrollTop(e){this.scrollTarget===this._doc?window.scrollTo(window.pageXOffset,e):this._isValidScrollTarget()&&(this.scrollTarget.scrollTop=e);},set _scrollLeft(e){this.scrollTarget===this._doc?window.scrollTo(e,window.pageYOffset):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=e);},scroll:function(e,t){var i;"object"==typeof e?(i=e.left,t=e.top):i=e,i=i||0,t=t||0,this.scrollTarget===this._doc?window.scrollTo(i,t):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=i,this.scrollTarget.scrollTop=t);},get _scrollTargetWidth(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerWidth:this.scrollTarget.offsetWidth:0},get _scrollTargetHeight(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerHeight:this.scrollTarget.offsetHeight:0},_isValidScrollTarget:function(){return this.scrollTarget instanceof HTMLElement},_toggleScrollListener:function(e,t){var i=t===this._doc?window:t;e?this._boundScrollHandler||(this._boundScrollHandler=this._scrollHandler.bind(this),i.addEventListener("scroll",this._boundScrollHandler)):this._boundScrollHandler&&(i.removeEventListener("scroll",this._boundScrollHandler),this._boundScrollHandler=null);},toggleScrollListener:function(e){this._shouldHaveListener=e,this._toggleScrollListener(e,this.scrollTarget);}},ya=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),ba=ya&&ya[1]>=8,va=3,wa=No({behaviors:[fa,ga],_ratio:.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_lastVisibleIndexVal:null,_maxPages:2,_focusedVirtualIndex:-1,_templateCost:0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){return this._physicalSize-this._viewportHeight},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollOffset},get _maxVirtualStart(){return Math.max(0,this._virtualCount-this._physicalCount)},set _virtualStart(e){e=this._clamp(e,0,this._maxVirtualStart),this._virtualStartVal=e;},get _virtualStart(){return this._virtualStartVal||0},set _physicalStart(e){(e%=this._physicalCount)<0&&(e=this._physicalCount+e),this._physicalStartVal=e;},get _physicalStart(){return this._physicalStartVal||0},get _physicalEnd(){return (this._physicalStart+this._physicalCount-1)%this._physicalCount},set _physicalCount(e){this._physicalCountVal=e;},get _physicalCount(){return this._physicalCountVal||0},get _optPhysicalSize(){return 0===this._viewportHeight?1/0:this._viewportHeight*this._maxPages},get _isVisible(){return Boolean(this.offsetWidth||this.offsetHeight)},get firstVisibleIndex(){let e=this._firstVisibleIndexVal;if(null==e){let t=this._physicalTop+this._scrollOffset;e=this._iterateItems((function(e,i){if(t+=this._physicalSizes[e],t>this._scrollPosition)return i}))||0,this._firstVisibleIndexVal=e;}return e},get lastVisibleIndex(){let e=this._lastVisibleIndexVal;if(null==e){let t=this._physicalTop+this._scrollOffset;this._iterateItems((function(i,s){t<this._scrollBottom&&(e=s),t+=this._physicalSizes[i];})),this._lastVisibleIndexVal=e;}return e},get _scrollOffset(){return this._scrollerPaddingTop},attached:function(){this._debounce("_render",this._render,bt$2),this.listen(this,"iron-resize","_resizeHandler");},detached:function(){this.unlisten(this,"iron-resize","_resizeHandler");},updateViewportBoundaries:function(){const e=window.getComputedStyle(this);this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(e["padding-top"],10),this._isRTL=Boolean("rtl"===e.direction),this._viewportWidth=this.$.items.offsetWidth,this._viewportHeight=this._scrollTargetHeight;},_scrollHandler:function(){const e=Math.max(0,Math.min(this._maxScrollTop,this._scrollTop));let t=e-this._scrollPosition;const i=t>=0;if(this._scrollPosition=e,this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,Math.abs(t)>this._physicalSize&&this._physicalSize>0){t-=this._scrollOffset;const e=Math.round(t/this._physicalAverage);this._virtualStart=this._virtualStart+e,this._physicalStart=this._physicalStart+e,this._physicalTop=Math.floor(this._virtualStart)*this._physicalAverage,this._update();}else if(this._physicalCount>0){const{physicalTop:e,indexes:t}=this._getReusables(i);i?(this._physicalTop=e,this._virtualStart=this._virtualStart+t.length,this._physicalStart=this._physicalStart+t.length):(this._virtualStart=this._virtualStart-t.length,this._physicalStart=this._physicalStart-t.length),this._update(t,i?null:t),this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,0),wt$2);}},_getReusables:function(e){let t,i,s;const r=[],n=this._hiddenContentSize*this._ratio,o=this._virtualStart,a=this._virtualEnd,l=this._physicalCount;let d=this._physicalTop+this._scrollOffset;const h=this._physicalBottom+this._scrollOffset,c=this._scrollTop,u=this._scrollBottom;for(e?(t=this._physicalStart,i=c-d):(t=this._physicalEnd,i=h-u);s=this._physicalSizes[t],i-=s,!(r.length>=l||i<=n);)if(e){if(a+r.length+1>=this._virtualCount)break;if(d+s>=c-this._scrollOffset)break;r.push(t),d+=s,t=(t+1)%l;}else {if(o-r.length<=0)break;if(d+this._physicalSize-s<=u)break;r.push(t),d-=s,t=0===t?l-1:t-1;}return {indexes:r,physicalTop:d-this._scrollOffset}},_update:function(e,t){if(!(e&&0===e.length||0===this._physicalCount)){if(this._assignModels(e),this._updateMetrics(e),t)for(;t.length;){const e=t.pop();this._physicalTop-=this._physicalSizes[e];}this._positionItems(),this._updateScrollerSize();}},_isClientFull:function(){return 0!=this._scrollBottom&&this._physicalBottom-1>=this._scrollBottom&&this._physicalTop<=this._scrollPosition},_increasePoolIfNeeded:function(e){const t=this._clamp(this._physicalCount+e,va,this._virtualCount-this._virtualStart)-this._physicalCount;let i=Math.round(.5*this._physicalCount);if(!(t<0)){if(t>0){const e=window.performance.now();[].push.apply(this._physicalItems,this._createPool(t));for(let i=0;i<t;i++)this._physicalSizes.push(0);this._physicalCount=this._physicalCount+t,this._physicalStart>this._physicalEnd&&this._isIndexRendered(this._focusedVirtualIndex)&&this._getPhysicalIndex(this._focusedVirtualIndex)<this._physicalEnd&&(this._physicalStart=this._physicalStart+t),this._update(),this._templateCost=(window.performance.now()-e)/t,i=Math.round(.5*this._physicalCount);}this._virtualEnd>=this._virtualCount-1||0===i||(this._isClientFull()?this._physicalSize<this._optPhysicalSize&&this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,this._clamp(Math.round(50/this._templateCost),1,i)),vt$1):this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,i),wt$2));}},_render:function(){if(this.isAttached&&this._isVisible)if(0!==this._physicalCount){const{physicalTop:e,indexes:t}=this._getReusables(!0);this._physicalTop=e,this._virtualStart=this._virtualStart+t.length,this._physicalStart=this._physicalStart+t.length,this._update(t),this._update(),this._increasePoolIfNeeded(0);}else this._virtualCount>0&&(this.updateViewportBoundaries(),this._increasePoolIfNeeded(va));},_itemsChanged:function(e){"items"===e.path&&(this._virtualStart=0,this._physicalTop=0,this._virtualCount=this.items?this.items.length:0,this._physicalIndexForKey={},this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this._physicalCount=this._physicalCount||0,this._physicalItems=this._physicalItems||[],this._physicalSizes=this._physicalSizes||[],this._physicalStart=0,this._scrollTop>this._scrollOffset&&this._resetScrollPosition(0),this._debounce("_render",this._render,bt$2));},_iterateItems:function(e,t){let i,s,r,n;if(2===arguments.length&&t){for(n=0;n<t.length;n++)if(i=t[n],s=this._computeVidx(i),null!=(r=e.call(this,i,s)))return r}else {for(i=this._physicalStart,s=this._virtualStart;i<this._physicalCount;i++,s++)if(null!=(r=e.call(this,i,s)))return r;for(i=0;i<this._physicalStart;i++,s++)if(null!=(r=e.call(this,i,s)))return r}},_computeVidx:function(e){return e>=this._physicalStart?this._virtualStart+(e-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+e},_updateMetrics:function(e){Xs();let t=0,i=0;const s=this._physicalAverageCount,r=this._physicalAverage;this._iterateItems((function(e){i+=this._physicalSizes[e],this._physicalSizes[e]=this._physicalItems[e].offsetHeight,t+=this._physicalSizes[e],this._physicalAverageCount+=this._physicalSizes[e]?1:0;}),e),this._physicalSize=this._physicalSize+t-i,this._physicalAverageCount!==s&&(this._physicalAverage=Math.round((r*s+t)/this._physicalAverageCount));},_positionItems:function(){this._adjustScrollPosition();let e=this._physicalTop;this._iterateItems((function(t){this.translate3d(0,e+"px",0,this._physicalItems[t]),e+=this._physicalSizes[t];}));},_adjustScrollPosition:function(){const e=0===this._virtualStart?this._physicalTop:Math.min(this._scrollPosition+this._physicalTop,0);if(0!==e){this._physicalTop=this._physicalTop-e;const t=this._scrollTop;!ba&&t>0&&this._resetScrollPosition(t-e);}},_resetScrollPosition:function(e){this.scrollTarget&&e>=0&&(this._scrollTop=e,this._scrollPosition=this._scrollTop);},_updateScrollerSize:function(e){this._estScrollHeight=this._physicalBottom+Math.max(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage,((e=(e=e||0===this._scrollHeight)||this._scrollPosition>=this._estScrollHeight-this._physicalSize)||Math.abs(this._estScrollHeight-this._scrollHeight)>=this._viewportHeight)&&(this.$.items.style.height=this._estScrollHeight+"px",this._scrollHeight=this._estScrollHeight);},scrollToIndex:function(e){if("number"!=typeof e||e<0||e>this.items.length-1)return;if(Xs(),0===this._physicalCount)return;e=this._clamp(e,0,this._virtualCount-1),(!this._isIndexRendered(e)||e>=this._maxVirtualStart)&&(this._virtualStart=e-1),this._assignModels(),this._updateMetrics(),this._physicalTop=Math.floor(this._virtualStart)*this._physicalAverage;let t=this._physicalStart,i=this._virtualStart,s=0;const r=this._hiddenContentSize;for(;i<e&&s<=r;)s+=this._physicalSizes[t],t=(t+1)%this._physicalCount,i++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+this._scrollOffset+s),this._increasePoolIfNeeded(0),this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null;},_resetAverage:function(){this._physicalAverage=0,this._physicalAverageCount=0;},_resizeHandler:function(){this._debounce("_render",(function(){this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this.updateViewportBoundaries(),this._isVisible?(this.toggleScrollListener(!0),this._resetAverage(),this._render()):this.toggleScrollListener(!1);}),bt$2);},_isIndexRendered:function(e){return e>=this._virtualStart&&e<=this._virtualEnd},_getPhysicalIndex:function(e){return (this._physicalStart+(e-this._virtualStart))%this._physicalCount},_clamp:function(e,t,i){return Math.min(i,Math.max(t,e))},_debounce:function(e,t,i){this._debouncers=this._debouncers||{},this._debouncers[e]=Wi.debounce(this._debouncers[e],i,t.bind(this)),Yi(this._debouncers[e]);}});class Aa extends wa{static get properties(){return {size:{type:Number,notify:!0},_vidxOffset:{type:Number,value:0}}}static get observers(){return ["_effectiveSizeChanged(_effectiveSize)"]}connectedCallback(){super.connectedCallback(),this._scrollHandler();}_updateScrollerItem(){}_afterScroll(){}_getRowTarget(){}_createScrollerRows(){}_canPopulate(){}scrollToIndex(e){this._warnPrivateAPIAccess("scrollToIndex"),this._scrollingToIndex=!0,e=Math.min(Math.max(e,0),this._effectiveSize-1),this.$.table.scrollTop=e/this._effectiveSize*(this.$.table.scrollHeight-this.$.table.offsetHeight),this._scrollHandler(),this._accessIronListAPI((()=>this._maxScrollTop))&&this._virtualCount<this._effectiveSize&&this._adjustVirtualIndexOffset(1e6),this._accessIronListAPI((()=>super.scrollToIndex(e-this._vidxOffset))),this._scrollHandler();const t=Array.from(this.$.items.children).filter((t=>t.index===e))[0];if(t){const e=t.getBoundingClientRect().top-this.$.header.getBoundingClientRect().bottom;Math.abs(e)>1&&(this.$.table.scrollTop+=e,this._scrollHandler());}this._scrollingToIndex=!1;}_effectiveSizeChanged(e){let t,i=0;if(this._iterateItems(((e,s)=>{if(s===this._firstVisibleIndex){const s=this._physicalItems[e];t=s.index,i=s.getBoundingClientRect().top;}})),this.items&&e<this.items.length&&(this._scrollTop=0),!Array.isArray(this.items)){const t=1e5;this.items={length:Math.min(e,t)};}this._accessIronListAPI((()=>super._itemsChanged({path:"items"}))),this._virtualCount=Math.min(this.items.length,e)||0,0===this._scrollTop&&(this._accessIronListAPI((()=>this._scrollToIndex(Math.min(e-1,t)))),this._iterateItems((e=>{const s=this._physicalItems[e];if(s.index===t&&(this.$.table.scrollTop+=Math.round(s.getBoundingClientRect().top-i)),s.index===this._focusedItemIndex&&this._itemsFocusable&&this.$.items.contains(this.shadowRoot.activeElement)){const e=Array.from(this._itemsFocusable.parentElement.children).indexOf(this._itemsFocusable);s.children[e].focus();}}))),this._assignModels(),requestAnimationFrame((()=>this._update())),this.__updateFooterPositioning();}_positionItems(){let e;this._adjustScrollPosition(),isNaN(this._physicalTop)&&(e=!0,this._physicalTop=0);let t=this._physicalTop;this._iterateItems((e=>{this._physicalItems[e].style.transform=`translateY(${t}px)`,t+=this._physicalSizes[e];})),e&&this._scrollToIndex(0);}_increasePoolIfNeeded(e){0===e&&this._scrollingToIndex||!this._canPopulate()||!this._effectiveSize||(this._initialPoolCreated?this._optPhysicalSize!==1/0&&(this._debounceIncreasePool=Wi.debounce(this._debounceIncreasePool,bt$2,(()=>{this._updateMetrics();const e=this._optPhysicalSize-this._physicalSize;let t=Math.ceil(e/this._physicalAverage);this._physicalCount+t>this._effectiveSize&&(t=Math.max(0,this._effectiveSize-this._physicalCount)),this._physicalSize&&t>0&&this._optPhysicalSize!==1/0&&(super._increasePoolIfNeeded(t),this.__reorderChildNodes());}))):(this._initialPoolCreated=!0,super._increasePoolIfNeeded(25)));}__reorderChildNodes(){const e=Array.from(this.$.items.childNodes);!!e.reduce(((e,t,i,s)=>{if(0===i||s[i-1].index===t.index-1)return e}),!0)||e.sort(((e,t)=>e.index-t.index)).forEach((e=>this.$.items.appendChild(e)));}_createPool(e){const t=document.createDocumentFragment(),i=this._createScrollerRows(e);i.forEach((e=>t.appendChild(e))),this._getRowTarget().appendChild(t);const s=this.querySelector("[slot]");if(s){const e=s.getAttribute("slot");s.setAttribute("slot","foo-bar"),s.setAttribute("slot",e);}return Er(this,(()=>this.notifyResize())),i}_assignModels(e){this._iterateItems(((e,t)=>{const i=this._physicalItems[e];this._toggleAttribute("hidden",t>=this._effectiveSize,i),this._updateScrollerItem(i,t+(this._vidxOffset||0));}),e);}_scrollHandler(){const e=this.$.table.scrollTop-this._scrollPosition;this._accessIronListAPI(super._scrollHandler);const t=this._vidxOffset;this._accessIronListAPI((()=>this._maxScrollTop))&&this._virtualCount<this._effectiveSize?this._adjustVirtualIndexOffset(e):this._vidxOffset=0,this._vidxOffset!==t&&this._update(),this._afterScroll();}_adjustVirtualIndexOffset(e){if(Math.abs(e)>1e4){if(this._noScale)return void(this._noScale=!1);const e=this.$.table.scrollTop/(this.$.table.scrollHeight-this.$.table.offsetHeight),t=e*this._effectiveSize;this._vidxOffset=Math.round(t-e*this._virtualCount);}else {const e=this._vidxOffset||0,t=1e3,i=100;0===this._scrollTop?(this._vidxOffset=0,e!==this._vidxOffset&&super.scrollToIndex(0)):this.firstVisibleIndex<t&&this._vidxOffset>0&&(this._vidxOffset-=Math.min(this._vidxOffset,i),e!==this._vidxOffset&&super.scrollToIndex(this.firstVisibleIndex+(e-this._vidxOffset)),this._noScale=!0);const s=this._effectiveSize-this._virtualCount;this._scrollTop>=this._maxScrollTop&&this._maxScrollTop>0?(this._vidxOffset=s,e!==this._vidxOffset&&super.scrollToIndex(this._virtualCount)):this.firstVisibleIndex>this._virtualCount-t&&this._vidxOffset<s&&(this._vidxOffset+=Math.min(s-this._vidxOffset,i),e!==this._vidxOffset&&super.scrollToIndex(this.firstVisibleIndex-(this._vidxOffset-e)),this._noScale=!0);}}_accessIronListAPI(e){this._warnPrivateAPIAccessAsyncEnabled=!1;const t=e.apply(this);return this._debouncerWarnPrivateAPIAccess=Wi.debounce(this._debouncerWarnPrivateAPIAccess,bt$2,(()=>this._warnPrivateAPIAccessAsyncEnabled=!0)),t}_debounceRender(e,t){super._debounceRender((()=>this._accessIronListAPI(e)),t);}_warnPrivateAPIAccess(e){this._warnPrivateAPIAccessAsyncEnabled&&console.warn(`Accessing private API (${e})!`);}_render(){this._accessIronListAPI(super._render);}_itemsChanged(){}get _firstVisibleIndex(){return this._accessIronListAPI((()=>super.firstVisibleIndex))}get _lastVisibleIndex(){return this._accessIronListAPI((()=>super.lastVisibleIndex))}_scrollToIndex(e){this._accessIronListAPI((()=>this.scrollToIndex(e)));}get firstVisibleIndex(){return this._warnPrivateAPIAccess("firstVisibleIndex"),super.firstVisibleIndex}set firstVisibleIndex(e){this._warnPrivateAPIAccess("firstVisibleIndex"),super.firstVisibleIndex=e;}get lastVisibleIndex(){return this._warnPrivateAPIAccess("lastVisibleIndex"),super.lastVisibleIndex}set lastVisibleIndex(e){this._warnPrivateAPIAccess("lastVisibleIndex"),super.lastVisibleIndex=e;}updateViewportBoundaries(){this._warnPrivateAPIAccess("updateViewportBoundaries"),super.updateViewportBoundaries.apply(this,arguments);}_resizeHandler(){super._resizeHandler(),Xs();}}const Ca=e=>class extends e{static get observers(){return ["_a11yUpdateGridSize(size, _columnTree, _columnTree.*)"]}_a11yGetHeaderRowCount(e){return e.filter((e=>e.some((e=>e._headerTemplate||e.headerRenderer||e.path||e.header)))).length}_a11yGetFooterRowCount(e){return e.filter((e=>e.some((e=>e._headerTemplate||e.headerRenderer)))).length}_a11yUpdateGridSize(e,t){if(void 0===e||void 0===t)return;const i=t[t.length-1];this.$.table.setAttribute("aria-rowcount",e+this._a11yGetHeaderRowCount(t)+this._a11yGetFooterRowCount(t)),this.$.table.setAttribute("aria-colcount",i&&i.length||0),this._a11yUpdateHeaderRows(),this._a11yUpdateFooterRows();}_a11yUpdateHeaderRows(){Array.from(this.$.header.children).forEach(((e,t)=>e.setAttribute("aria-rowindex",t+1)));}_a11yUpdateFooterRows(){Array.from(this.$.footer.children).forEach(((e,t)=>e.setAttribute("aria-rowindex",this._a11yGetHeaderRowCount(this._columnTree)+this.size+t+1)));}_a11yUpdateRowRowindex(e,t){e.setAttribute("aria-rowindex",t+this._a11yGetHeaderRowCount(this._columnTree)+1);}_a11yUpdateRowSelected(e,t){e.setAttribute("aria-selected",Boolean(t)),Array.from(e.children).forEach((e=>e.setAttribute("aria-selected",Boolean(t))));}_a11yUpdateRowLevel(e,t){e.setAttribute("aria-level",t+1);}_a11yUpdateRowDetailsOpened(e,t){Array.from(e.children).forEach((e=>{"boolean"==typeof t?e.setAttribute("aria-expanded",t):e.hasAttribute("aria-expanded")&&e.removeAttribute("aria-expanded");}));}_a11ySetRowDetailsCell(e,t){Array.from(e.children).forEach((e=>{e!==t&&e.setAttribute("aria-controls",t.id);}));}_a11yUpdateCellColspan(e,t){e.setAttribute("aria-colspan",Number(t));}_a11yUpdateSorters(){Array.from(this.querySelectorAll("vaadin-grid-sorter")).forEach((e=>{let t=e.parentNode;for(;t&&"vaadin-grid-cell-content"!==t.localName;)t=t.parentNode;if(t&&t.assignedSlot){t.assignedSlot.parentNode.setAttribute("aria-sort",{asc:"ascending",desc:"descending"}[String(e.direction)]||"none");}}));}},Sa=e=>class extends e{static get properties(){return {activeItem:{type:Object,notify:!0,value:null}}}ready(){super.ready(),this.$.scroller.addEventListener("click",this._onClick.bind(this)),this.addEventListener("cell-activate",this._activateItem.bind(this));}_activateItem(e){const t=e.detail.model,i=t?t.item:null;i&&(this.activeItem=this._itemsEqual(this.activeItem,i)?null:i);}_onClick(e){if(e.defaultPrevented)return;const t=e.composedPath(),i=t[t.indexOf(this.$.table)-3];if(!i||i.getAttribute("part").indexOf("details-cell")>-1)return;const s=i._content,r=this.getRootNode().activeElement;s.contains(r)||this._isFocusable(e.target)||this.dispatchEvent(new CustomEvent("cell-activate",{detail:{model:this.__getRowModel(i.parentElement)}}));}_isFocusable(e){return xa(e)}},xa=e=>{if(!e.parentNode)return !1;const t=-1!==Array.from(e.parentNode.querySelectorAll("[tabindex], button, input, select, textarea, object, iframe, label, a[href], area[href]")).filter((e=>"cell body-cell"!==e.getAttribute("part"))).indexOf(e);return !e.disabled&&t},Pa=e=>class extends e{static get properties(){return {items:Array}}static get observers(){return ["_itemsChanged(items, items.*, isAttached)"]}_itemsChanged(e,t,i){if(i){if(!Array.isArray(e))return null==e&&(this.size=0),void(this.dataProvider===this._arrayDataProvider&&(this.dataProvider=void 0));this.size=e.length,this.dataProvider=this.dataProvider||this._arrayDataProvider,this.clearCache(),this._ensureFirstPageLoaded();}}_arrayDataProvider(e,t){let i=(Array.isArray(this.items)?this.items:[]).slice(0);this._filters&&this._checkPaths(this._filters,"filtering",i)&&(i=this._filter(i)),this.size=i.length,e.sortOrders.length&&this._checkPaths(this._sorters,"sorting",i)&&(i=i.sort(this._multiSort.bind(this)));const s=e.page*e.pageSize,r=s+e.pageSize;t(i.slice(s,r),i.length);}_checkPaths(e,t,i){if(!i.length)return !1;let s=!0;for(let r in e){const n=e[r].path;if(!n||-1===n.indexOf("."))continue;const o=n.replace(/\.[^.]*$/,"");void 0===_a.get(o,i[0])&&(console.warn(`Path "${n}" used for ${t} does not exist in all of the items, ${t} is disabled.`),s=!1);}return s}_multiSort(e,t){return this._sorters.map((i=>"asc"===i.direction?this._compare(_a.get(i.path,e),_a.get(i.path,t)):"desc"===i.direction?this._compare(_a.get(i.path,t),_a.get(i.path,e)):0)).reduce(((e,t)=>e||t),0)}_normalizeEmptyValue(e){return [void 0,null].indexOf(e)>=0?"":isNaN(e)?e.toString():e}_compare(e,t){return (e=this._normalizeEmptyValue(e))<(t=this._normalizeEmptyValue(t))?-1:e>t?1:0}_filter(e){return e.filter((e=>0===this._filters.filter((t=>{const i=this._normalizeEmptyValue(_a.get(t.path,e)),s=this._normalizeEmptyValue(t.value).toString().toLowerCase();return -1===i.toString().toLowerCase().indexOf(s)})).length))}},Ea=e=>class extends(js(e)){ready(){super.ready();const e=this.$.scroller;zs(e,"track",this._onHeaderTrack.bind(this)),e.addEventListener("touchmove",(t=>e.hasAttribute("column-resizing")&&t.preventDefault())),e.addEventListener("contextmenu",(e=>"resize-handle"==e.target.getAttribute("part")&&e.preventDefault())),e.addEventListener("mousedown",(e=>"resize-handle"===e.target.getAttribute("part")&&e.preventDefault()));}_onHeaderTrack(e){const t=e.target;if("resize-handle"===t.getAttribute("part")){let i=t.parentElement._column;for(this._toggleAttribute("column-resizing",!0,this.$.scroller);"vaadin-grid-column-group"===i.localName;)i=Array.prototype.slice.call(i._childColumns,0).sort((function(e,t){return e._order-t._order})).filter((function(e){return !e.hidden})).pop();const s=Array.from(this.$.header.querySelectorAll('[part~="row"]:last-child [part~="cell"]')),r=s.filter((e=>e._column===i))[0];if(r.offsetWidth){const t=window.getComputedStyle(r),s=10+parseInt(t.paddingLeft)+parseInt(t.paddingRight)+parseInt(t.borderLeftWidth)+parseInt(t.borderRightWidth)+parseInt(t.marginLeft)+parseInt(t.marginRight),n=r.offsetWidth+(this.__isRTL?r.getBoundingClientRect().left-e.detail.x:e.detail.x-r.getBoundingClientRect().right);i.width=Math.max(s,n)+"px",i.flexGrow=0;}s.sort((function(e,t){return e._column._order-t._column._order})).forEach((function(e,t,i){t<i.indexOf(r)&&(e._column.width=e.offsetWidth+"px",e._column.flexGrow=0);})),"end"===e.detail.state&&(this._toggleAttribute("column-resizing",!1,this.$.scroller),this.dispatchEvent(new CustomEvent("column-resize",{detail:{resizedColumn:i}}))),this._resizeHandler();}}},Ta=class e{constructor(e,t,i){this.grid=e,this.parentCache=t,this.parentItem=i,this.itemCaches={},this.items={},this.effectiveSize=0,this.size=0,this.pendingRequests={};}isLoading(){return Boolean(Object.keys(this.pendingRequests).length||Object.keys(this.itemCaches).filter((e=>this.itemCaches[e].isLoading()))[0])}getItemForIndex(e){const{cache:t,scaledIndex:i}=this.getCacheAndIndex(e);return t.items[i]}updateSize(){this.effectiveSize=!this.parentItem||this.grid._isExpanded(this.parentItem)?this.size+Object.keys(this.itemCaches).reduce(((e,t)=>{const i=this.itemCaches[t];return i.updateSize(),e+i.effectiveSize}),0):0;}ensureSubCacheForScaledIndex(t){if(!this.itemCaches[t]){const i=new e(this.grid,this,this.items[t]);this.itemCaches[t]=i,this.grid._loadPage(0,i);}}getCacheAndIndex(e){let t=e;const i=Object.keys(this.itemCaches);for(let s=0;s<i.length;s++){const e=Number(i[s]),r=this.itemCaches[e];if(t<=e)return {cache:this,scaledIndex:t};if(t<=e+r.effectiveSize)return r.getCacheAndIndex(t-e-1);t-=r.effectiveSize;}return {cache:this,scaledIndex:t}}},Ia=e=>class extends e{static get properties(){return {pageSize:{type:Number,value:50,observer:"_pageSizeChanged"},dataProvider:{type:Object,notify:!0,observer:"_dataProviderChanged"},loading:{type:Boolean,notify:!0,readOnly:!0,reflectToAttribute:!0},_cache:{type:Object,value:function(){return new Ta(this)}},itemIdPath:{type:String,value:null},expandedItems:{type:Object,notify:!0,value:()=>[]}}}static get observers(){return ["_sizeChanged(size)","_itemIdPathChanged(itemIdPath)","_expandedItemsChanged(expandedItems.*)"]}_sizeChanged(e){const t=e-this._cache.size;this._cache.size+=t,this._cache.effectiveSize+=t,this._effectiveSize=this._cache.effectiveSize,this._increasePoolIfNeeded(0),this._debounceIncreasePool&&this._debounceIncreasePool.flush();}_getItem(e,t){if(e>=this._effectiveSize)return;t.index=e;const{cache:i,scaledIndex:s}=this._cache.getCacheAndIndex(e),r=i.items[s];r?(this._toggleAttribute("loading",!1,t),this._updateItem(t,r),this._isExpanded(r)&&i.ensureSubCacheForScaledIndex(s)):(this._toggleAttribute("loading",!0,t),this._loadPage(this._getPageForIndex(s),i));}_expandedInstanceChangedCallback(e,t){void 0!==e.item&&(t?this.expandItem(e.item):this.collapseItem(e.item));}getItemId(e){return this.itemIdPath?this.get(this.itemIdPath,e):e}_isExpanded(e){return this.__expandedKeys.has(this.getItemId(e))}_expandedItemsChanged(){this.__cacheExpandedKeys(),this._cache.updateSize(),this._effectiveSize=this._cache.effectiveSize,this._assignModels();}_itemIdPathChanged(){this.__cacheExpandedKeys();}__cacheExpandedKeys(){this.expandedItems&&(this.__expandedKeys=new Set,this.expandedItems.forEach((e=>{this.__expandedKeys.add(this.getItemId(e));})));}expandItem(e){this._isExpanded(e)||this.push("expandedItems",e);}collapseItem(e){this._isExpanded(e)&&this.splice("expandedItems",this._getItemIndexInArray(e,this.expandedItems),1);}_getIndexLevel(e){let{cache:t}=this._cache.getCacheAndIndex(e),i=0;for(;t.parentCache;)t=t.parentCache,i++;return i}_canPopulate(){return Boolean(this._hasData&&this._columnTree)}_loadPage(e,t){if(!t.pendingRequests[e]&&this.dataProvider){this._setLoading(!0),t.pendingRequests[e]=!0;const i={page:e,pageSize:this.pageSize,sortOrders:this._mapSorters(),filters:this._mapFilters(),parentItem:t.parentItem};this._debounceIncreasePool&&this._debounceIncreasePool.flush(),this.dataProvider(i,((s,r)=>{void 0!==r?t.size=r:i.parentItem&&(t.size=s.length);const n=Array.from(this.$.items.children).map((e=>e._item));s.forEach(((i,s)=>{const r=e*this.pageSize+s;t.items[r]=i,this._isExpanded(i)&&n.indexOf(i)>-1&&t.ensureSubCacheForScaledIndex(r);})),this._hasData=!0,delete t.pendingRequests[e],this._debouncerApplyCachedData=Wi.debounce(this._debouncerApplyCachedData,yt$2.after(0),(()=>{this._setLoading(!1),this._cache.updateSize(),this._effectiveSize=this._cache.effectiveSize,Array.from(this.$.items.children).filter((e=>!e.hidden)).forEach((e=>{this._cache.getItemForIndex(e.index)&&this._getItem(e.index,e);})),this._increasePoolIfNeeded(0),this.__scrollToPendingIndex();})),this._cache.isLoading()||this._debouncerApplyCachedData.flush(),this.__itemsReceived();}));}}_getPageForIndex(e){return Math.floor(e/this.pageSize)}clearCache(){this._cache=new Ta(this),Array.from(this.$.items.children).forEach((e=>{Array.from(e.children).forEach((e=>{e._instance&&e._instance._setPendingProperty("item",{},!1);}));})),this._cache.size=this.size||0,this._cache.updateSize(),this._hasData=!1,this._assignModels(),this._effectiveSize&&this._initialPoolCreated||this._loadPage(0,this._cache);}_pageSizeChanged(e,t){void 0!==t&&e!==t&&this.clearCache();}_checkSize(){void 0===this.size&&0===this._effectiveSize&&console.warn("The <vaadin-grid> needs the total number of items in order to display rows. Set the total number of items to the `size` property, or provide the total number of items in the second argument of the `dataProvider`’s `callback` call.");}_dataProviderChanged(e,t){void 0!==t&&this.clearCache(),e&&this.items&&this.items.length&&this._scrollToIndex(this._firstVisibleIndex),this._ensureFirstPageLoaded(),this._debouncerCheckSize=Wi.debounce(this._debouncerCheckSize,yt$2.after(2e3),this._checkSize.bind(this)),this._scrollHandler();}_ensureFirstPageLoaded(){this._hasData||this._loadPage(0,this._cache);}_itemsEqual(e,t){return this.getItemId(e)===this.getItemId(t)}_getItemIndexInArray(e,t){let i=-1;return t.forEach(((t,s)=>{this._itemsEqual(t,e)&&(i=s);})),i}scrollToIndex(e){super.scrollToIndex(e),isNaN(e)||!this._cache.isLoading()&&this.clientHeight||(this.__pendingScrollToIndex=e);}__scrollToPendingIndex(){if(this.__pendingScrollToIndex&&this.$.items.children.length){const e=this.__pendingScrollToIndex;delete this.__pendingScrollToIndex,this._debounceIncreasePool&&this._debounceIncreasePool.flush(),this.scrollToIndex(e);}}},Oa=e=>class extends e{ready(){super.ready(),this._addNodeObserver();}_hasColumnGroups(e){for(let t=0;t<e.length;t++)if("vaadin-grid-column-group"===e[t].localName)return !0;return !1}_getChildColumns(e){return io.getFlattenedNodes(e).filter(this._isColumnElement)}_flattenColumnGroups(e){return e.map((e=>"vaadin-grid-column-group"===e.localName?this._getChildColumns(e):[e])).reduce(((e,t)=>e.concat(t)),[])}_getColumnTree(){const e=[];for(let t=io.getFlattenedNodes(this).filter(this._isColumnElement);e.push(t),this._hasColumnGroups(t);)t=this._flattenColumnGroups(t);return e}_updateColumnTree(){const e=this._getColumnTree();this._arrayEquals(e,this._columnTree)||(this._columnTree=e);}_addNodeObserver(){this._observer=new io(this,(e=>{const t=e.addedNodes.filter((e=>"template"===e.localName&&e.classList.contains("row-details")))[0];t&&this._rowDetailsTemplate!==t&&(this._rowDetailsTemplate=t);const i=e=>e.filter(this._isColumnElement).length>0;if(i(e.addedNodes)||i(e.removedNodes)){const t=e.removedNodes.flatMap((e=>e._allCells)),i=e=>t.filter((t=>t._content.contains(e))).length;this.__removeSorters(this._sorters.filter(i)),this.__removeFilters(this._filters.filter(i)),this._updateColumnTree();}this._debouncerCheckImports=Wi.debounce(this._debouncerCheckImports,yt$2.after(2e3),this._checkImports.bind(this)),this._ensureFirstPageLoaded();}));}_arrayEquals(e,t){if(!e||!t||e.length!=t.length)return !1;for(let i=0,s=e.length;i<s;i++)if(e[i]instanceof Array&&t[i]instanceof Array){if(!this._arrayEquals(e[i],t[i]))return !1}else if(e[i]!=t[i])return !1;return !0}_checkImports(){["vaadin-grid-column-group","vaadin-grid-filter","vaadin-grid-filter-column","vaadin-grid-tree-toggle","vaadin-grid-selection-column","vaadin-grid-sort-column","vaadin-grid-sorter"].forEach((e=>{const t=this.querySelector(e);!t||t instanceof ji||console.warn(`Make sure you have imported the required module for <${e}> element.`);}));}_updateFirstAndLastColumn(){Array.from(this.shadowRoot.querySelectorAll("tr")).forEach((e=>this._updateFirstAndLastColumnForRow(e)));}_updateFirstAndLastColumnForRow(e){Array.from(e.querySelectorAll('[part~="cell"]:not([part~="details-cell"])')).sort(((e,t)=>e._column._order-t._column._order)).forEach(((e,t,i)=>{this._toggleAttribute("first-column",0===t,e),this._toggleAttribute("last-column",t===i.length-1,e);}));}_isColumnElement(e){return e.nodeType===Node.ELEMENT_NODE&&/\bcolumn\b/.test(e.localName)}},za=e=>class extends e{getEventContext(e){const t={},i=e.composedPath(),s=i[i.indexOf(this.$.table)-3];return s?(t.section=["body","header","footer","details"].filter((e=>s.getAttribute("part").indexOf(e)>-1))[0],s._column&&(t.column=s._column),"body"!==t.section&&"details"!==t.section||Object.assign(t,this.__getRowModel(s.parentElement)),t):t}},Ra=e=>class extends e{static get properties(){return {_filters:{type:Array,value:function(){return []}}}}ready(){super.ready(),this.addEventListener("filter-changed",this._filterChanged.bind(this));}_filterChanged(e){e.stopPropagation(),this.__addFilter(e.target),this.__applyFilters();}__removeFilters(e){0!=e.length&&(this._filters=this._filters.filter((t=>e.indexOf(t)<0)),this.__applyFilters());}__addFilter(e){-1===this._filters.indexOf(e)&&this._filters.push(e);}__applyFilters(){this.dataProvider&&this.isAttached&&this.clearCache();}_mapFilters(){return this._filters.map((e=>({path:e.path,value:e.value})))}};class Na extends ji{static get is(){return "vaadin-grid-templatizer"}static get properties(){return {dataHost:Object,template:Object,_templateInstances:{type:Array,value:function(){return []}},_parentPathValues:{value:function(){return {}}},_grid:Object}}static get observers(){return ["_templateInstancesChanged(_templateInstances.*, _parentPathValues.*)"]}constructor(){super(),this._instanceProps={detailsOpened:!0,index:!0,item:!0,selected:!0,expanded:!0,level:!0};}createInstance(){this._ensureTemplatized();const e=new this._TemplateClass({});return this.addInstance(e),e}addInstance(e){-1===this._templateInstances.indexOf(e)&&(this._templateInstances.push(e),requestAnimationFrame((()=>this.notifyPath("_templateInstances.*",this._templateInstances))));}removeInstance(e){const t=this._templateInstances.indexOf(e);this.splice("_templateInstances",t,1);}_ensureTemplatized(){this._TemplateClass||(this._TemplateClass=Qo(this.template,this,{instanceProps:this._instanceProps,parentModel:!0,forwardHostProp:function(e,t){this._forwardParentProp(e,t),this._templateInstances&&this._templateInstances.forEach((i=>i.notifyPath(e,t)));},notifyInstanceProp:function(e,t,i){if("index"===t||"item"===t)return;const s=`__${t}__`;if(e[s]===i)return;e[s]=i;const r=Array.from(this._grid.$.items.children).filter((t=>this._grid._itemsEqual(t._item,e.item)))[0];r&&Array.from(r.children).forEach((e=>{e._instance&&(e._instance[s]=i,e._instance.notifyPath(t,i));}));const n="item.";if(Array.isArray(this._grid.items)&&0===t.indexOf(n)){const s=this._grid.items.indexOf(e.item),r=t.slice(n.length);this._grid.notifyPath(`items.${s}.${r}`,i);}const o=`_${t}InstanceChangedCallback`;this._grid&&this._grid[o]&&this._grid[o](e,i);}}));}_forwardParentProp(e,t){this._parentPathValues[e]=t,this._templateInstances.forEach((i=>i.notifyPath(e,t)));}_templateInstancesChanged(e){let t,i;if("_templateInstances"===e.path)t=0,i=this._templateInstances.length;else {if("_templateInstances.splices"!==e.path)return;t=e.value.index,i=e.value.addedCount;}Object.keys(this._parentPathValues||{}).forEach((e=>{for(let s=t;s<t+i;s++)this._templateInstances[s].set(e,this._parentPathValues[e]);}));}}customElements.define(Na.is,Na);const ka=e=>class extends e{static get properties(){return {detailsOpenedItems:{type:Array,value:function(){return []}},_rowDetailsTemplate:Object,rowDetailsRenderer:Function,_detailsCells:{type:Array}}}static get observers(){return ["_detailsOpenedItemsChanged(detailsOpenedItems.*, _rowDetailsTemplate, rowDetailsRenderer)","_rowDetailsTemplateOrRendererChanged(_rowDetailsTemplate, rowDetailsRenderer)"]}_rowDetailsTemplateOrRendererChanged(e,t){if(e&&t)throw new Error("You should only use either a renderer or a template for row details");if(e||t){if(e&&!e.templatizer){const t=new Na;t._grid=this,t.dataHost=this.dataHost,t.template=e,e.templatizer=t;}this._columnTree&&Array.from(this.$.items.children).forEach((e=>{e.querySelector("[part~=details-cell]")||(this._updateRow(e,this._columnTree[this._columnTree.length-1]),this._a11yUpdateRowDetailsOpened(e,!1)),delete e.querySelector("[part~=details-cell]")._instance;})),this.detailsOpenedItems.length&&(Array.from(this.$.items.children).forEach(this._toggleDetailsCell,this),this._update());}}_detailsOpenedItemsChanged(e){"detailsOpenedItems.length"!==e.path&&e.value&&Array.from(this.$.items.children).forEach((e=>{this._toggleDetailsCell(e,e._item),this._a11yUpdateRowDetailsOpened(e,this._isDetailsOpened(e._item)),this._toggleAttribute("details-opened",this._isDetailsOpened(e._item),e);}));}_configureDetailsCell(e){e.setAttribute("part","cell details-cell"),this._toggleAttribute("frozen",!0,e);}_toggleDetailsCell(e,t){const i=e.querySelector('[part~="details-cell"]');if(!i)return;const s=!this._isDetailsOpened(t),r=!!i.hidden!==s;(i._instance||i._renderer)&&i.hidden===s||(i.hidden=s,s?e.style.removeProperty("padding-bottom"):(this.rowDetailsRenderer?(i._renderer=this.rowDetailsRenderer,i._renderer.call(this,i._content,this,{index:e.index,item:t})):this._rowDetailsTemplate&&!i._instance&&(i._instance=this._rowDetailsTemplate.templatizer.createInstance(),i._content.innerHTML="",i._content.appendChild(i._instance.root),this._updateItem(e,t)),Xs(),e.style.setProperty("padding-bottom",`${i.offsetHeight}px`),requestAnimationFrame((()=>this.notifyResize())))),r&&(this._updateMetrics(),this._positionItems());}_updateDetailsCellHeights(){Array.from(this.$.items.querySelectorAll('[part~="details-cell"]:not([hidden])')).forEach((e=>{e.parentElement.style.setProperty("padding-bottom",`${e.offsetHeight}px`);}));}_isDetailsOpened(e){return this.detailsOpenedItems&&-1!==this._getItemIndexInArray(e,this.detailsOpenedItems)}openItemDetails(e){this._isDetailsOpened(e)||this.push("detailsOpenedItems",e);}closeItemDetails(e){this._isDetailsOpened(e)&&this.splice("detailsOpenedItems",this._getItemIndexInArray(e,this.detailsOpenedItems),1);}_detailsOpenedInstanceChangedCallback(e,t){t?this.openItemDetails(e.item):this.closeItemDetails(e.item);}},Da={SCROLLING:500,IGNORE_WHEEL:500},La=e=>class extends e{static get properties(){return {_frozenCells:{type:Array,value:()=>[]},_rowWithFocusedElement:Element,_deltaYAcc:{type:Number,value:0},_useSticky:{type:Boolean,value:window.CSS&&window.CSS.supports&&(window.CSS.supports("position","sticky")||window.CSS.supports("position","-webkit-sticky"))}}}static get observers(){return ["_scrollViewportHeightUpdated(_viewportHeight)"]}set _scrollTop(e){this.$.table.scrollTop=e;}get _scrollTop(){return this.$.table.scrollTop}constructor(){super(),this._scrollLineHeight=this._getScrollLineHeight();}_getScrollLineHeight(){const e=document.createElement("div");e.style.fontSize="initial",e.style.display="none",document.body.appendChild(e);const t=window.getComputedStyle(e).fontSize;return document.body.removeChild(e),t?window.parseInt(t):void 0}_scrollViewportHeightUpdated(e){this._scrollPageHeight=e-this.$.header.clientHeight-this.$.footer.clientHeight-this._scrollLineHeight;}ready(){super.ready(),this.$.outerscroller=document.createElement("div"),this.scrollTarget=this.$.table,this.addEventListener("wheel",this._onWheel),this.$.items.addEventListener("focusin",(e=>{const t=e.composedPath().indexOf(this.$.items);this._rowWithFocusedElement=e.composedPath()[t-1];})),this.$.items.addEventListener("focusout",(()=>this._rowWithFocusedElement=void 0)),this.scrollTarget.addEventListener("mousedown",(()=>this.__mouseDown=!0)),this.scrollTarget.addEventListener("mouseup",(()=>{this.__mouseDown=!1,this.__pendingReorder&&(this.__pendingReorder=!1,setTimeout((()=>this._reorderRows()),Da.SCROLLING));}));}scrollToIndex(e){this._accessIronListAPI((()=>super.scrollToIndex(e)));}_onWheel(e){if(e.ctrlKey||this._hasScrolledAncestor(e.target,e.deltaX,e.deltaY))return;const t=this.$.table;let i=e.deltaY;if(e.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this._scrollLineHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._scrollPageHeight),this._wheelAnimationFrame)return this._deltaYAcc+=i,void e.preventDefault();i+=this._deltaYAcc,this._deltaYAcc=0,this._wheelAnimationFrame=!0,this._debouncerWheelAnimationFrame=Wi.debounce(this._debouncerWheelAnimationFrame,bt$2,(()=>this._wheelAnimationFrame=!1));const s=Math.abs(e.deltaX)+Math.abs(i);this._canScroll(t,e.deltaX,i)?(e.preventDefault(),t.scrollTop+=i,t.scrollLeft+=e.deltaX,this._scrollHandler(),this._hasResidualMomentum=!0,this._ignoreNewWheel=!0,this._debouncerIgnoreNewWheel=Wi.debounce(this._debouncerIgnoreNewWheel,yt$2.after(Da.IGNORE_WHEEL),(()=>this._ignoreNewWheel=!1))):this._hasResidualMomentum&&s<=this._previousMomentum||this._ignoreNewWheel?e.preventDefault():s>this._previousMomentum&&(this._hasResidualMomentum=!1),this._previousMomentum=s;}_hasScrolledAncestor(e,t,i){return "vaadin-grid-cell-content"!==e.localName&&(!(!this._canScroll(e,t,i)||-1===["auto","scroll"].indexOf(getComputedStyle(e).overflow))||(e!==this&&e.parentElement?this._hasScrolledAncestor(e.parentElement,t,i):void 0))}_canScroll(e,t,i){return i>0&&e.scrollTop<e.scrollHeight-e.offsetHeight||i<0&&e.scrollTop>0||t>0&&e.scrollLeft<e.scrollWidth-e.offsetWidth||t<0&&e.scrollLeft>0}_scheduleScrolling(){this._scrollingFrame||(this._scrollingFrame=requestAnimationFrame((()=>this._toggleAttribute("scrolling",!0,this.$.scroller)))),this._debounceScrolling=Wi.debounce(this._debounceScrolling,yt$2.after(Da.SCROLLING),(()=>{cancelAnimationFrame(this._scrollingFrame),delete this._scrollingFrame,this._toggleAttribute("scrolling",!1,this.$.scroller),this._reorderRows();}));}_afterScroll(){this._translateStationaryElements(),this.hasAttribute("reordering")||this._scheduleScrolling(),this._updateOverflow();}_updateOverflow(){let e="";const t=this.$.table;t.scrollTop<t.scrollHeight-t.clientHeight&&(e+=" bottom"),t.scrollTop>0&&(e+=" top"),t.scrollLeft<t.scrollWidth-t.clientWidth&&(e+=" right"),t.scrollLeft>0&&(e+=" left"),this._debounceOverflow=Wi.debounce(this._debounceOverflow,bt$2,(()=>{const t=e.trim();t.length>0&&this.getAttribute("overflow")!==t?this.setAttribute("overflow",t):0==t.length&&this.hasAttribute("overflow")&&this.removeAttribute("overflow");}));}_reorderRows(){if(this.__mouseDown)return void(this.__pendingReorder=!0);const e=this.$.items,t=e.querySelectorAll("tr");if(!t.length)return;const i=this._virtualStart+this._vidxOffset,s=this._rowWithFocusedElement||Array.from(t).filter((e=>!e.hidden))[0];if(!s)return;const r=s.index-i,n=Array.from(t).indexOf(s)-r;if(n>0)for(let o=0;o<n;o++)e.appendChild(t[o]);else if(n<0)for(let o=t.length+n;o<t.length;o++)e.insertBefore(t[o],t[0]);if(this._safari){const{transform:e}=this.$.header.style;this.$.header.style.transform="",setTimeout((()=>this.$.header.style.transform=e));}}_frozenCellsChanged(){this._debouncerCacheElements=Wi.debounce(this._debouncerCacheElements,wt$2,(()=>{Array.from(this.shadowRoot.querySelectorAll('[part~="cell"]')).forEach((function(e){e.style.transform="";})),this._frozenCells=Array.prototype.slice.call(this.$.table.querySelectorAll("[frozen]")),this._updateScrollerMeasurements(),this._translateStationaryElements();})),this._updateLastFrozen();}_updateScrollerMeasurements(){this._frozenCells.length>0&&this.__isRTL&&(this.__scrollerMetrics={scrollWidth:this.$.table.scrollWidth,clientWidth:this.$.table.clientWidth});}_updateLastFrozen(){if(!this._columnTree)return;const e=this._columnTree[this._columnTree.length-1].slice(0);e.sort(((e,t)=>e._order-t._order));const t=e.reduce(((e,t,i)=>(t._lastFrozen=!1,t.frozen&&!t.hidden?i:e)),void 0);void 0!==t&&(e[t]._lastFrozen=!0);}_translateStationaryElements(){const e=Math.max(0,this._scrollLeft),t=Math.max(0,this._scrollTop);let i=0,s=0,r=0;if(this._useSticky||(i=e,s=t,r=this.$.table.clientHeight-this.$.footer.offsetHeight-this.$.footer.offsetTop),this.$.header.style.transform=this._getTranslate(-e+i,s),this.$.footer.style.transform=this._getTranslate(-e+i,s+r),this.$.items.style.transform=this._getTranslate(-e+i,0),this._frozenCells.length>0){const e=this.__isRTL?this.__getNormalizedScrollLeft(this.$.table)+this.__scrollerMetrics.clientWidth-this.__scrollerMetrics.scrollWidth:this._scrollLeft,t=this._getTranslate(e,0);for(let i=0;i<this._frozenCells.length;i++)this._frozenCells[i].style.transform=t;}}_getTranslate(e,t){return `translate(${e}px, ${t}px)`}},Ma=e=>class extends e{static get properties(){return {selectedItems:{type:Object,notify:!0,value:()=>[]}}}static get observers(){return ["_selectedItemsChanged(selectedItems.*)"]}_isSelected(e){return this.selectedItems&&this._getItemIndexInArray(e,this.selectedItems)>-1}selectItem(e){this._isSelected(e)||this.push("selectedItems",e);}deselectItem(e){const t=this._getItemIndexInArray(e,this.selectedItems);t>-1&&this.splice("selectedItems",t,1);}_toggleItem(e){-1===this._getItemIndexInArray(e,this.selectedItems)?this.selectItem(e):this.deselectItem(e);}_selectedItemsChanged(e){!this.$.items.children.length||"selectedItems"!==e.path&&"selectedItems.splices"!==e.path||Array.from(this.$.items.children).forEach((e=>{this._updateItem(e,e._item);}));}_selectedInstanceChangedCallback(e,t){t?this.selectItem(e.item):this.deselectItem(e.item);}},Fa=e=>class extends e{static get properties(){return {multiSort:{type:Boolean,value:!1},_sorters:{type:Array,value:function(){return []}},_previousSorters:{type:Array,value:function(){return []}}}}ready(){super.ready(),this.addEventListener("sorter-changed",this._onSorterChanged);}_onSorterChanged(e){const t=e.target;e.stopPropagation(),this.__updateSorter(t),this.__applySorters();}__removeSorters(e){0!=e.length&&(this._sorters=this._sorters.filter((t=>e.indexOf(t)<0)),this.multiSort&&this.__updateSortOrders(),this.__applySorters());}__updateSortOrders(){this._sorters.forEach(((e,t)=>e._order=this._sorters.length>1?t:null),this);}__updateSorter(e){if(e.direction||-1!==this._sorters.indexOf(e))if(e._order=null,this.multiSort)this._removeArrayItem(this._sorters,e),e.direction&&this._sorters.unshift(e),this.__updateSortOrders();else if(e.direction){const t=this._sorters.filter((t=>t!=e));this._sorters=[e],t.forEach((e=>{e._order=null,e.direction=null;}));}}__applySorters(){this.dataProvider&&this.isAttached&&JSON.stringify(this._previousSorters)!==JSON.stringify(this._mapSorters())&&this.clearCache(),this._a11yUpdateSorters(),this._previousSorters=this._mapSorters();}_mapSorters(){return this._sorters.map((e=>({path:e.path,direction:e.direction})))}_removeArrayItem(e,t){const i=e.indexOf(t);i>-1&&e.splice(i,1);}},Ha=e=>class extends e{static get properties(){return {cellClassNameGenerator:Function}}static get observers(){return ["__cellClassNameGeneratorChanged(cellClassNameGenerator)"]}__cellClassNameGeneratorChanged(){this.generateCellClassNames();}generateCellClassNames(){Array.from(this.$.items.children).filter((e=>!e.hidden)).forEach((e=>this._generateCellClassNames(e,this.__getRowModel(e))));}_generateCellClassNames(e,t){Array.from(e.children).forEach((e=>{if(e.__generatedClasses&&e.__generatedClasses.forEach((t=>e.classList.remove(t))),this.cellClassNameGenerator){const i=this.cellClassNameGenerator(e._column,t);e.__generatedClasses=i&&i.split(" ").filter((e=>e.length>0)),e.__generatedClasses&&e.__generatedClasses.forEach((t=>e.classList.add(t)));}}));}},Ba={BETWEEN:"between",ON_TOP:"on-top",ON_TOP_OR_BETWEEN:"on-top-or-between",ON_GRID:"on-grid"},$a={ON_TOP:"on-top",ABOVE:"above",BELOW:"below",EMPTY:"empty"},Va=e=>class extends e{static get properties(){return {dropMode:String,rowsDraggable:Boolean,dragFilter:Function,dropFilter:Function,__dndAutoScrollThreshold:{value:50}}}static get observers(){return ["_dragDropAccessChanged(rowsDraggable, dropMode, dragFilter, dropFilter)"]}ready(){super.ready(),this.$.table.addEventListener("dragstart",this._onDragStart.bind(this)),this.$.table.addEventListener("dragend",this._onDragEnd.bind(this)),this.$.table.addEventListener("dragover",this._onDragOver.bind(this)),this.$.table.addEventListener("dragleave",this._onDragLeave.bind(this)),this.$.table.addEventListener("drop",this._onDrop.bind(this)),this.$.table.addEventListener("dragenter",(e=>{this.dropMode&&(e.preventDefault(),e.stopPropagation());}));}_onDragStart(e){if(this.rowsDraggable){let t=e.target;if("vaadin-grid-cell-content"===t.localName&&(t=t.assignedSlot.parentNode.parentNode),t.parentNode!==this.$.items)return;if(e.stopPropagation(),this._toggleAttribute("dragging-rows",!0,this),this._safari){const e=t.style.transform;t.style.top=/translateY\((.*)\)/.exec(e)[1],t.style.transform="none",requestAnimationFrame((()=>{t.style.top="",t.style.transform=e;}));}const i=t.getBoundingClientRect();this._ios?e.dataTransfer.setDragImage(t):e.dataTransfer.setDragImage(t,e.clientX-i.left,e.clientY-i.top);let s=[t];this._isSelected(t._item)&&(s=this.__getViewportRows().filter((e=>this._isSelected(e._item))).filter((e=>!this.dragFilter||this.dragFilter(this.__getRowModel(e))))),e.dataTransfer.setData("text",this.__formatDefaultTransferData(s)),t.setAttribute("dragstart",s.length>1?s.length:""),this.updateStyles({"--_grid-drag-start-x":e.clientX-i.left+20+"px","--_grid-drag-start-y":e.clientY-i.top+10+"px"}),requestAnimationFrame((()=>{t.removeAttribute("dragstart"),this.updateStyles({"--_grid-drag-start-x":"","--_grid-drag-start-y":""});}));const r=new CustomEvent("grid-dragstart",{detail:{draggedItems:s.map((e=>e._item)),setDragData:(t,i)=>e.dataTransfer.setData(t,i),setDraggedItemsCount:e=>t.setAttribute("dragstart",e)}});r.originalEvent=e,this.dispatchEvent(r);}}_onDragEnd(e){this._toggleAttribute("dragging-rows",!1,this),e.stopPropagation();const t=new CustomEvent("grid-dragend");t.originalEvent=e,this.dispatchEvent(t);}_onDragLeave(e){e.stopPropagation(),this._clearDragStyles();}_onDragOver(e){if(this.dropMode){if(this._dropLocation=void 0,this._dragOverItem=void 0,this.__dndAutoScroll(e.clientY))return void this._clearDragStyles();let t=e.composedPath().filter((e=>"tr"===e.localName))[0];if(this._effectiveSize&&this.dropMode!==Ba.ON_GRID)if(t&&t.parentNode===this.$.items){const i=t.getBoundingClientRect();if(this._dropLocation=$a.ON_TOP,this.dropMode===Ba.BETWEEN){const t=e.clientY-i.top<i.bottom-e.clientY;this._dropLocation=t?$a.ABOVE:$a.BELOW;}else this.dropMode===Ba.ON_TOP_OR_BETWEEN&&(e.clientY-i.top<i.height/3?this._dropLocation=$a.ABOVE:e.clientY-i.top>i.height/3*2&&(this._dropLocation=$a.BELOW));}else {if(t)return;if(this.dropMode!==Ba.BETWEEN&&this.dropMode!==Ba.ON_TOP_OR_BETWEEN)return;t=Array.from(this.$.items.children).filter((e=>!e.hidden)).pop(),this._dropLocation=$a.BELOW;}else this._dropLocation=$a.EMPTY;if(t&&t.hasAttribute("drop-disabled"))return void(this._dropLocation=void 0);e.stopPropagation(),e.preventDefault(),this._dropLocation===$a.EMPTY?this._toggleAttribute("dragover",!0,this):t?(this._dragOverItem=t._item,t.getAttribute("dragover")!==this._dropLocation&&t.setAttribute("dragover",this._dropLocation)):this._clearDragStyles();}}__dndAutoScroll(e){if(this.__dndAutoScrolling)return !0;const t=this.$.header.getBoundingClientRect().bottom,i=this.$.footer.getBoundingClientRect().top,s=t-e+this.__dndAutoScrollThreshold,r=e-i+this.__dndAutoScrollThreshold;let n=0;if(r>0?n=2*r:s>0&&(n=2*-s),n){const e=this.$.table.scrollTop;this.$.table.scrollTop+=n;if(e!==this.$.table.scrollTop)return this.__dndAutoScrolling=!0,setTimeout((()=>this.__dndAutoScrolling=!1),20),this._scrollHandler(),!0}}__getViewportRows(){const e=this.$.header.getBoundingClientRect().bottom,t=this.$.footer.getBoundingClientRect().top;return Array.from(this.$.items.children).filter((i=>{const s=i.getBoundingClientRect();return s.bottom>e&&s.top<t}))}_clearDragStyles(){this.removeAttribute("dragover"),Array.from(this.$.items.children).forEach((e=>e.removeAttribute("dragover")));}_onDrop(e){if(this.dropMode){e.stopPropagation(),e.preventDefault();const t=e.dataTransfer.types&&Array.from(e.dataTransfer.types).map((t=>({type:t,data:e.dataTransfer.getData(t)})));this._clearDragStyles();const i=new CustomEvent("grid-drop",{bubbles:e.bubbles,cancelable:e.cancelable,detail:{dropTargetItem:this._dragOverItem,dropLocation:this._dropLocation,dragData:t}});i.originalEvent=e,this.dispatchEvent(i);}}__formatDefaultTransferData(e){return e.map((e=>Array.from(e.children).filter((e=>!e.hidden&&-1===e.getAttribute("part").indexOf("details-cell"))).sort(((e,t)=>e._column._order>t._column._order?1:-1)).map((e=>e._content.textContent.trim())).filter((e=>e)).join("\t"))).join("\n")}_dragDropAccessChanged(){this.filterDragAndDrop();}filterDragAndDrop(){Array.from(this.$.items.children).filter((e=>!e.hidden)).forEach((e=>{this._filterDragAndDrop(e,this.__getRowModel(e));}));}_filterDragAndDrop(e,t){const i=!this.rowsDraggable||this.dragFilter&&!this.dragFilter(t),s=!this.dropMode||this.dropFilter&&!this.dropFilter(t);Array.from(e.children).map((e=>e._content)).forEach((e=>{i?e.removeAttribute("draggable"):e.setAttribute("draggable",!0);})),this._toggleAttribute("drag-disabled",i,e),this._toggleAttribute("drop-disabled",s,e);}},Ga=e=>class extends e{static get properties(){return {_headerFocusable:{type:Object,observer:"_focusableChanged"},_itemsFocusable:{type:Object,observer:"_focusableChanged"},_footerFocusable:{type:Object,observer:"_focusableChanged"},_navigatingIsHidden:Boolean,_focusedItemIndex:{type:Number,value:0},_focusedColumnOrder:Number}}ready(){super.ready(),this._ios||this._android||(this.addEventListener("keydown",this._onKeyDown),this.addEventListener("keyup",this._onKeyUp),this.addEventListener("focusin",this._onFocusIn),this.addEventListener("focusout",this._onFocusOut),this.$.table.addEventListener("focusin",this._onCellFocusIn.bind(this)),this.$.table.addEventListener("focusout",this._onCellFocusOut.bind(this)),this.addEventListener("mousedown",(()=>{this._toggleAttribute("navigating",!1,this),this._isMousedown=!0;})),this.addEventListener("mouseup",(()=>this._isMousedown=!1)));}_focusableChanged(e,t){t&&t.setAttribute("tabindex","-1"),e&&e.setAttribute("tabindex","0");}_onKeyDown(e){const t=e.key;let i;switch(t){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"PageUp":case"PageDown":case"Home":case"End":i="Navigation";break;case"Enter":case"Escape":case"F2":i="Interaction";break;case"Tab":i="Tab";break;case" ":i="Space";}this._detectInteracting(e),this.hasAttribute("interacting")&&"Interaction"!==i&&(i=void 0),i&&this[`_on${i}KeyDown`](e,t);}_ensureScrolledToIndex(e){Array.from(this.$.items.children).filter((t=>t.index===e))[0]||this._scrollToIndex(e);}_onNavigationKeyDown(e,t){function i(e){return Array.prototype.indexOf.call(e.parentNode.children,e)}this._scrollHandler(),e.preventDefault();const s=this._lastVisibleIndex-this._firstVisibleIndex-1;let r=0,n=0;switch(t){case"ArrowRight":r=this.__isRTL?-1:1;break;case"ArrowLeft":r=this.__isRTL?1:-1;break;case"Home":r=-1/0,e.ctrlKey&&(n=-1/0);break;case"End":r=1/0,e.ctrlKey&&(n=1/0);break;case"ArrowDown":n=1;break;case"ArrowUp":n=-1;break;case"PageDown":n=s;break;case"PageUp":n=-s;}const o=e.composedPath()[0],a=i(o),l=this._elementMatches(o,'[part~="details-cell"]'),d=o.parentNode,h=d.parentNode,c=(h===this.$.items?this._effectiveSize:h.children.length)-1,u=h===this.$.items?void 0!==this._focusedItemIndex?this._focusedItemIndex:d.index:i(d);let p=Math.max(0,Math.min(u+n,c)),_=!1;if(h===this.$.items){const e=d._item,t=this._cache.getItemForIndex(p);_=l?0===n:1===n&&this._isDetailsOpened(e)||-1===n&&p!==u&&this._isDetailsOpened(t),_!==l&&(1===n&&_||-1===n&&!_)&&(p=u);}if(h!==this.$.items)if(p>u)for(;p<c&&h.children[p].hidden;)p++;else if(p<u)for(;p>0&&h.children[p].hidden;)p--;void 0===this._focusedColumnOrder&&(this._focusedColumnOrder=l?0:this._getColumns(h,u).filter((e=>!e.hidden))[a]._order);const m=this._getColumns(h,p).filter((e=>!e.hidden)),f=m.map((e=>e._order)).sort(((e,t)=>e-t)),g=f.length-1,y=f.indexOf(f.slice(0).sort(((e,t)=>Math.abs(e-this._focusedColumnOrder)-Math.abs(t-this._focusedColumnOrder)))[0]),b=0===n&&l?y:Math.max(0,Math.min(y+r,g));b!==y&&(this._focusedColumnOrder=void 0),h===this.$.items&&this._ensureScrolledToIndex(p),this._toggleAttribute("navigating",!0,this);const v=m.reduce(((e,t,i)=>(e[t._order]=i,e)),{})[f[b]],w=h===this.$.items?Array.from(h.children).filter((e=>e.index===p))[0]:h.children[p];if(!w)return;const A=_?Array.from(w.children).filter((e=>this._elementMatches(e,'[part~="details-cell"]')))[0]:w.children[v];if(this._scrollHorizontallyToCell(A),h===this.$.items&&(this._focusedItemIndex=p),h===this.$.items){const e=A.getBoundingClientRect(),t=this.$.footer.getBoundingClientRect().top,i=this.$.header.getBoundingClientRect().bottom;e.bottom>t?(this.$.table.scrollTop+=e.bottom-t,this._scrollHandler()):e.top<i&&(this.$.table.scrollTop-=i-e.top,this._scrollHandler());}A.focus();}_parseEventPath(e){const t=e.indexOf(this.$.table);return {rowGroup:e[t-1],row:e[t-2],cell:e[t-3]}}_onInteractionKeyDown(e,t){const i=e.composedPath()[0],s="input"===i.localName&&!/^(button|checkbox|color|file|image|radio|range|reset|submit)$/i.test(i.type);let r;switch(t){case"Enter":r=!this.hasAttribute("interacting")||!s;break;case"Escape":r=!1;break;case"F2":r=!this.hasAttribute("interacting");}const{cell:n}=this._parseEventPath(e.composedPath());if(this.hasAttribute("interacting")!==r)if(r){const t=n._content.querySelector("[focus-target]")||n._content.firstElementChild;t&&(e.preventDefault(),t.focus(),this._toggleAttribute("interacting",!0,this),this._toggleAttribute("navigating",!1,this));}else e.preventDefault(),this._focusedColumnOrder=void 0,n.focus(),this._toggleAttribute("interacting",!1,this),this._toggleAttribute("navigating",!0,this);}_predictFocusStepTarget(e,t){const i=[this.$.table,this._headerFocusable,this._itemsFocusable,this._footerFocusable,this.$.focusexit];let s=i.indexOf(e);for(s+=t;s>=0&&s<=i.length-1&&(!i[s]||i[s].parentNode.hidden);)s+=t;return i[s]}_onTabKeyDown(e){const t=this._predictFocusStepTarget(e.composedPath()[0],e.shiftKey?-1:1);if(t===this.$.table)this.$.table.focus();else if(t===this.$.focusexit)this.$.focusexit.focus();else if(t===this._itemsFocusable){let i=t;const s=this._itemsFocusable.parentNode;if(this._ensureScrolledToIndex(this._focusedItemIndex),s.index!==this._focusedItemIndex){const e=Array.from(s.children).indexOf(this._itemsFocusable),t=Array.from(this.$.items.children).filter((e=>e.index===this._focusedItemIndex))[0];t&&(i=t.children[e]);}e.preventDefault(),i.focus();}else e.preventDefault(),t.focus();this._toggleAttribute("navigating",!0,this);}_onSpaceKeyDown(e){e.preventDefault();const t=e.composedPath()[0];t._content&&t._content.firstElementChild||this.dispatchEvent(new CustomEvent("cell-activate",{detail:{model:this.__getRowModel(t.parentElement)}}));}_onKeyUp(e){if(!/^( |SpaceBar)$/.test(e.key))return;e.preventDefault();const t=e.composedPath()[0];if(t._content&&t._content.firstElementChild){const e=this.hasAttribute("navigating");t._content.firstElementChild.click(),this._toggleAttribute("navigating",e,this);}}_onFocusIn(e){this._isMousedown||this._toggleAttribute("navigating",!0,this);const t=e.composedPath()[0];t===this.$.table||t===this.$.focusexit?(this._predictFocusStepTarget(t,t===this.$.table?1:-1).focus(),this._toggleAttribute("interacting",!1,this)):this._detectInteracting(e);}_onFocusOut(e){this._toggleAttribute("navigating",!1,this),this._detectInteracting(e);}_onCellFocusIn(e){if(this._detectInteracting(e),3===e.composedPath().indexOf(this.$.table)){const t=e.composedPath()[0];this._activeRowGroup=t.parentNode.parentNode,this._activeRowGroup===this.$.header?this._headerFocusable=t:this._activeRowGroup===this.$.items?this._itemsFocusable=t:this._activeRowGroup===this.$.footer&&(this._footerFocusable=t),t._content.dispatchEvent(new CustomEvent("cell-focusin",{bubbles:!1}));}this._detectFocusedItemIndex(e);}_onCellFocusOut(e){if(3===e.composedPath().indexOf(this.$.table)){e.composedPath()[0]._content.dispatchEvent(new CustomEvent("cell-focusout",{bubbles:!1}));}}_detectInteracting(e){this._toggleAttribute("interacting",e.composedPath().some((e=>"vaadin-grid-cell-content"===e.localName)),this);}_detectFocusedItemIndex(e){const{rowGroup:t,row:i}=this._parseEventPath(e.composedPath());t===this.$.items&&(this._focusedItemIndex=i.index);}_preventScrollerRotatingCellFocus(e,t){e.index===this._focusedItemIndex&&this.hasAttribute("navigating")&&this._activeRowGroup===this.$.items&&(this._navigatingIsHidden=!0,this._toggleAttribute("navigating",!1,this)),t===this._focusedItemIndex&&this._navigatingIsHidden&&(this._navigatingIsHidden=!1,this._toggleAttribute("navigating",!0,this));}_getColumns(e,t){let i=this._columnTree.length-1;return e===this.$.header?i=t:e===this.$.footer&&(i=this._columnTree.length-1-t),this._columnTree[i]}_resetKeyboardNavigation(){if(this.$.header.firstElementChild&&(this._headerFocusable=Array.from(this.$.header.firstElementChild.children).filter((e=>!e.hidden))[0]),this.$.items.firstElementChild){const e=this._iterateItems(((e,t)=>{if(this._firstVisibleIndex===t)return this.$.items.children[e]}));e&&(this._itemsFocusable=Array.from(e.children).filter((e=>!e.hidden))[0]);}this.$.footer.firstElementChild&&(this._footerFocusable=Array.from(this.$.footer.firstElementChild.children).filter((e=>!e.hidden))[0]);}_scrollHorizontallyToCell(e){if(e.hasAttribute("frozen")||this._elementMatches(e,'[part~="details-cell"]'))return;const t=e.getBoundingClientRect(),i=e.parentNode,s=Array.from(i.children).indexOf(e),r=this.$.table.getBoundingClientRect();let n=r.left,o=r.right;for(let a=s-1;a>=0;a--){const e=i.children[a];if(!e.hasAttribute("hidden")&&!this._elementMatches(e,'[part~="details-cell"]')&&e.hasAttribute("frozen")){n=e.getBoundingClientRect().right;break}}for(let a=s+1;a<i.children.length;a++){const e=i.children[a];if(!e.hasAttribute("hidden")&&!this._elementMatches(e,'[part~="details-cell"]')&&e.hasAttribute("frozen")){o=e.getBoundingClientRect().left;break}}t.left<n&&(this.$.table.scrollLeft+=Math.round(t.left-n)),t.right>o&&(this.$.table.scrollLeft+=Math.round(t.right-o));}_elementMatches(e,t){return e.matches?e.matches(t):-1!==Array.from(e.parentNode.querySelectorAll(t)).indexOf(e)}},ja=e=>class extends(js(e)){static get properties(){return {columnReorderingAllowed:{type:Boolean,value:!1},_orderBaseScope:{type:Number,value:1e7}}}static get observers(){return ["_updateOrders(_columnTree, _columnTree.*)"]}ready(){super.ready(),zs(this,"track",this._onTrackEvent),this._reorderGhost=this.shadowRoot.querySelector('[part="reorder-ghost"]'),this.addEventListener("touchstart",this._onTouchStart.bind(this)),this.addEventListener("touchmove",this._onTouchMove.bind(this)),this.addEventListener("touchend",this._onTouchEnd.bind(this)),this.addEventListener("contextmenu",this._onContextMenu.bind(this));}_onContextMenu(e){this.hasAttribute("reordering")&&e.preventDefault();}_onTouchStart(e){this._startTouchReorderTimeout=setTimeout((()=>{this._onTrackStart({detail:{x:e.touches[0].clientX,y:e.touches[0].clientY}});}),100);}_onTouchMove(e){this._draggedColumn&&e.preventDefault(),clearTimeout(this._startTouchReorderTimeout);}_onTouchEnd(){clearTimeout(this._startTouchReorderTimeout),this._onTrackEnd();}_onTrackEvent(e){if("start"===e.detail.state){const t=e.composedPath(),i=t[t.indexOf(this.$.header)-2];if(!i||!i._content)return;if(i._content.contains(this.getRootNode().activeElement))return;if(this.$.scroller.hasAttribute("column-resizing"))return;this._touchDevice||this._onTrackStart(e);}else "track"===e.detail.state?this._onTrack(e):"end"===e.detail.state&&this._onTrackEnd(e);}_onTrackStart(e){if(!this.columnReorderingAllowed)return;const t=e.composedPath&&e.composedPath();if(t&&t.filter((e=>e.hasAttribute&&e.hasAttribute("draggable")))[0])return;const i=this._cellFromPoint(e.detail.x,e.detail.y);if(i&&-1!==i.getAttribute("part").indexOf("header-cell")){for(this._toggleAttribute("reordering",!0,this),this._draggedColumn=i._column;1===this._draggedColumn.parentElement.childElementCount;)this._draggedColumn=this._draggedColumn.parentElement;this._setSiblingsReorderStatus(this._draggedColumn,"allowed"),this._draggedColumn._reorderStatus="dragging",this._updateGhost(i),this._reorderGhost.style.visibility="visible",this._updateGhostPosition(e.detail.x,this._touchDevice?e.detail.y-50:e.detail.y),this._autoScroller();}}_onTrack(e){if(!this._draggedColumn)return;const t=this._cellFromPoint(e.detail.x,e.detail.y);if(!t)return;const i=this._getTargetColumn(t,this._draggedColumn);this._isSwapAllowed(this._draggedColumn,i)&&this._isSwappableByPosition(i,e.detail.x)&&this._swapColumnOrders(this._draggedColumn,i),this._updateGhostPosition(e.detail.x,this._touchDevice?e.detail.y-50:e.detail.y),this._lastDragClientX=e.detail.x;}_onTrackEnd(){this._draggedColumn&&(this._toggleAttribute("reordering",!1,this),this._draggedColumn._reorderStatus="",this._setSiblingsReorderStatus(this._draggedColumn,""),this._draggedColumn=null,this._lastDragClientX=null,this._reorderGhost.style.visibility="hidden",this.dispatchEvent(new CustomEvent("column-reorder",{detail:{columns:this._getColumnsInOrder()}})));}_getColumnsInOrder(){return this._columnTree.slice(0).pop().filter((e=>!e.hidden)).sort(((e,t)=>e._order-t._order))}_cellFromPoint(e,t){e=e||0,t=t||0,this._draggedColumn||this._toggleAttribute("no-content-pointer-events",!0,this.$.scroller);const i=this.shadowRoot.elementFromPoint(e,t);if(this._toggleAttribute("no-content-pointer-events",!1,this.$.scroller),i&&i._column)return i}_updateGhostPosition(e,t){const i=this._reorderGhost.getBoundingClientRect(),s=e-i.width/2,r=t-i.height/2,n=parseInt(this._reorderGhost._left||0),o=parseInt(this._reorderGhost._top||0);this._reorderGhost._left=n-(i.left-s),this._reorderGhost._top=o-(i.top-r),this._reorderGhost.style.transform=`translate(${this._reorderGhost._left}px, ${this._reorderGhost._top}px)`;}_updateGhost(e){const t=this._reorderGhost;t.textContent=e._content.innerText;const i=window.getComputedStyle(e);return ["boxSizing","display","width","height","background","alignItems","padding","border","flex-direction","overflow"].forEach((e=>t.style[e]=i[e])),t}_updateOrders(e,t){void 0!==e&&void 0!==t&&(e[0].forEach((e=>e._order=0)),e[0].forEach(((e,t)=>e._order=(t+1)*this._orderBaseScope)));}_setSiblingsReorderStatus(e,t){Array.from(e.parentNode.children).filter((t=>/column/.test(t.localName)&&this._isSwapAllowed(t,e))).forEach((e=>e._reorderStatus=t));}_autoScroller(){if(this._lastDragClientX){const e=this._lastDragClientX-this.getBoundingClientRect().right+50,t=this.getBoundingClientRect().left-this._lastDragClientX+50;e>0?this.$.table.scrollLeft+=e/10:t>0&&(this.$.table.scrollLeft-=t/10),this._scrollHandler();}this._draggedColumn&&this.async(this._autoScroller,10);}_isSwapAllowed(e,t){if(e&&t){const i=e!==t,s=e.parentElement===t.parentElement,r=e.frozen===t.frozen;return i&&s&&r}}_isSwappableByPosition(e,t){const i=Array.from(this.$.header.querySelectorAll('tr:not([hidden]) [part~="cell"]')).filter((t=>e.contains(t._column)))[0],s=this.$.header.querySelector("tr:not([hidden]) [reorder-status=dragging]").getBoundingClientRect(),r=i.getBoundingClientRect();return r.left>s.left?t>r.right-s.width:t<r.left+s.width}_swapColumnOrders(e,t){const i=e._order;e._order=t._order,t._order=i,this._updateLastFrozen(),this._updateFirstAndLastColumn();}_getTargetColumn(e,t){if(e&&t){let i=e._column;for(;i.parentElement!==t.parentElement&&i!==this;)i=i.parentElement;return i.parentElement===t.parentElement?i:e._column}}},Wa=e=>class extends e{static get properties(){return {resizable:{type:Boolean,value:function(){if("vaadin-grid-column-group"===this.localName)return;const e=this.parentNode;return e&&"vaadin-grid-column-group"===e.localName&&e.resizable||!1}},_headerTemplate:{type:Object},_footerTemplate:{type:Object},frozen:{type:Boolean,value:!1},hidden:{type:Boolean},header:{type:String},textAlign:{type:String},_lastFrozen:{type:Boolean,value:!1},_order:Number,_reorderStatus:Boolean,_emptyCells:Array,_headerCell:Object,_footerCell:Object,_grid:Object,headerRenderer:Function,footerRenderer:Function}}static get observers(){return ["_widthChanged(width, _headerCell, _footerCell, _cells.*)","_frozenChanged(frozen, _headerCell, _footerCell, _cells.*)","_flexGrowChanged(flexGrow, _headerCell, _footerCell, _cells.*)","_pathOrHeaderChanged(path, header, _headerCell, _footerCell, _cells.*, renderer, headerRenderer, _bodyTemplate, _headerTemplate)","_textAlignChanged(textAlign, _cells.*, _headerCell, _footerCell)","_orderChanged(_order, _headerCell, _footerCell, _cells.*)","_lastFrozenChanged(_lastFrozen)","_setBodyTemplateOrRenderer(_bodyTemplate, renderer, _cells, _cells.*)","_setHeaderTemplateOrRenderer(_headerTemplate, headerRenderer, _headerCell)","_setFooterTemplateOrRenderer(_footerTemplate, footerRenderer, _footerCell)","_resizableChanged(resizable, _headerCell)","_reorderStatusChanged(_reorderStatus, _headerCell, _footerCell, _cells.*)","_hiddenChanged(hidden, _headerCell, _footerCell, _cells.*)"]}connectedCallback(){super.connectedCallback(),this._bodyTemplate&&(this._bodyTemplate.templatizer._grid=this._grid),this._headerTemplate&&(this._headerTemplate.templatizer._grid=this._grid),this._footerTemplate&&(this._footerTemplate.templatizer._grid=this._grid),this._templateObserver.flush(),this._bodyTemplate||this._templateObserver.callback(),requestAnimationFrame((()=>{this._allCells.forEach((e=>{e._content.parentNode||this._grid&&this._grid.appendChild(e._content);}));}));}disconnectedCallback(){super.disconnectedCallback(),requestAnimationFrame((()=>{this._findHostGrid()||this._allCells.forEach((e=>{e._content.parentNode&&e._content.parentNode.removeChild(e._content);}));})),this._gridValue=void 0;}_findHostGrid(){let e=this;for(;e&&!/^vaadin.*grid(-pro)?$/.test(e.localName);)e=e.assignedSlot?e.assignedSlot.parentNode:e.parentNode;return e||void 0}get _grid(){return this._gridValue||(this._gridValue=this._findHostGrid()),this._gridValue}get _allCells(){return [].concat(this._cells||[]).concat(this._emptyCells||[]).concat(this._headerCell).concat(this._footerCell).filter((e=>e))}constructor(){super(),this._templateObserver=new io(this,(()=>{this._headerTemplate=this._prepareHeaderTemplate(),this._footerTemplate=this._prepareFooterTemplate(),this._bodyTemplate=this._prepareBodyTemplate();}));}_prepareHeaderTemplate(){return this._prepareTemplatizer(this._findTemplate(!0)||null,{})}_prepareFooterTemplate(){return this._prepareTemplatizer(this._findTemplate(!1,!0)||null,{})}_prepareBodyTemplate(){return this._prepareTemplatizer(this._findTemplate()||null)}_prepareTemplatizer(e,t){if(e&&!e.templatizer){const i=new Na;i._grid=this._grid,i.dataHost=this.dataHost,i._instanceProps=t||i._instanceProps,i.template=e,e.templatizer=i;}return e}_renderHeaderAndFooter(){this.headerRenderer&&this._headerCell&&this.__runRenderer(this.headerRenderer,this._headerCell),this.footerRenderer&&this._footerCell&&this.__runRenderer(this.footerRenderer,this._footerCell);}__runRenderer(e,t,i){const s=[t._content,this];i&&i.item&&s.push(i),e.apply(this,s);}__setColumnTemplateOrRenderer(e,t,i){if(!this.hidden){if(e&&t)throw new Error("You should only use either a renderer or a template");i.forEach((i=>{const s=this._grid.__getRowModel(i.parentElement);if(t)i._renderer=t,(s.item||t===this.headerRenderer||t===this.footerRenderer)&&this.__runRenderer(t,i,s);else if(i._template!==e){i._template=e,i._content.innerHTML="",e.templatizer._grid=e.templatizer._grid||this._grid;const t=e.templatizer.createInstance();i._content.appendChild(t.root),i._instance=t,s.item&&i._instance.setProperties(s);}}));}}_setBodyTemplateOrRenderer(e,t,i){(e||t)&&i&&this.__setColumnTemplateOrRenderer(e,t,i);}_setHeaderTemplateOrRenderer(e,t,i){(e||t)&&i&&this.__setColumnTemplateOrRenderer(e,t,[i]);}_setFooterTemplateOrRenderer(e,t,i){(e||t)&&i&&(this.__setColumnTemplateOrRenderer(e,t,[i]),this._grid.__updateHeaderFooterRowVisibility(i.parentElement));}_selectFirstTemplate(e=!1,t=!1){return io.getFlattenedNodes(this).filter((i=>"template"===i.localName&&i.classList.contains("header")===e&&i.classList.contains("footer")===t))[0]}_findTemplate(e,t){const i=this._selectFirstTemplate(e,t);return i&&this.dataHost&&(i._rootDataHost=this.dataHost._rootDataHost||this.dataHost),i}_flexGrowChanged(e){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("flexGrow"),this._allCells.forEach((t=>t.style.flexGrow=e));}_orderChanged(e){this._allCells.forEach((t=>t.style.order=e));}_widthChanged(e){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("width"),this._allCells.forEach((t=>t.style.width=e)),this._grid&&this._grid.__forceReflow&&this._grid.__forceReflow();}_frozenChanged(e){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("frozen",e),this._allCells.forEach((t=>this._toggleAttribute("frozen",e,t))),this._grid&&this._grid._frozenCellsChanged&&this._grid._frozenCellsChanged();}_lastFrozenChanged(e){this._allCells.forEach((t=>this._toggleAttribute("last-frozen",e,t))),this.parentElement&&this.parentElement._columnPropChanged&&(this.parentElement._lastFrozen=e);}_pathOrHeaderChanged(e,t,i,s,r,n,o,a,l){const d=void 0!==t;if(!o&&!l&&d&&i&&this.__setTextContent(i._content,t),e&&r.value){if(!n&&!a){const t=(t,i,{item:s})=>this.__setTextContent(t,this.get(e,s));this.__setColumnTemplateOrRenderer(void 0,t,r.value);}o||l||d||!i||null===t||this.__setTextContent(i._content,this._generateHeader(e));}i&&this._grid.__updateHeaderFooterRowVisibility(i.parentElement);}__setTextContent(e,t){e.textContent!==t&&(e.textContent=t);}_generateHeader(e){return e.substr(e.lastIndexOf(".")+1).replace(/([A-Z])/g,"-$1").toLowerCase().replace(/-/g," ").replace(/^./,(e=>e.toUpperCase()))}_toggleAttribute(e,t,i){i.hasAttribute(e)===!t&&(t?i.setAttribute(e,""):i.removeAttribute(e));}_reorderStatusChanged(e){this._allCells.forEach((t=>t.setAttribute("reorder-status",e)));}_resizableChanged(e,t){void 0!==e&&void 0!==t&&t&&[t].concat(this._emptyCells).forEach((t=>{if(t){const i=t.querySelector('[part~="resize-handle"]');if(i&&t.removeChild(i),e){const e=document.createElement("div");e.setAttribute("part","resize-handle"),t.appendChild(e);}}}));}_textAlignChanged(e){if(void 0===e)return;if(-1===["start","end","center"].indexOf(e))return void console.warn('textAlign can only be set as "start", "end" or "center"');let t;"ltr"===getComputedStyle(this._grid).direction?"start"===e?t="left":"end"===e&&(t="right"):"start"===e?t="right":"end"===e&&(t="left"),this._allCells.forEach((i=>{i._content.style.textAlign=e,getComputedStyle(i._content).textAlign!==e&&(i._content.style.textAlign=t);}));}_hiddenChanged(e){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("hidden",e),!!e!=!!this._previousHidden&&this._grid&&(!0===e&&this._allCells.forEach((e=>{e._content.parentNode&&e._content.parentNode.removeChild(e._content);})),this._grid._debouncerHiddenChanged=Wi.debounce(this._grid._debouncerHiddenChanged,bt$2,(()=>{this._grid&&this._grid._renderColumnTree&&this._grid._renderColumnTree(this._grid._columnTree);})),this._grid._updateLastFrozen&&this._grid._updateLastFrozen(),this._grid.notifyResize&&this._grid.notifyResize(),this._grid._resetKeyboardNavigation&&this._grid._resetKeyboardNavigation()),this._previousHidden=e;}};class Ua extends(Wa(sr(ji))){static get is(){return "vaadin-grid-column"}static get properties(){return {width:{type:String,value:"100px"},flexGrow:{type:Number,value:1},renderer:Function,path:{type:String},autoWidth:{type:Boolean,value:!1},_bodyTemplate:{type:Object},_cells:Array}}}customElements.define(Ua.is,Ua),Ue$1("vaadin-grid",Ge$1`
    @keyframes vaadin-grid-appear {
      to {
        opacity: 1;
      }
    }

    :host {
      display: block;
      animation: 1ms vaadin-grid-appear;
      height: 400px;
      flex: 1 1 auto;
      align-self: stretch;
      position: relative;
    }

    :host([hidden]) {
      display: none !important;
    }

    #scroller {
      display: block;
      transform: translateY(0);
      width: auto;
      height: auto;
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }

    :host([height-by-rows]) {
      height: auto;
      align-self: flex-start;
      flex-grow: 0;
      width: 100%;
    }

    :host([height-by-rows]) #scroller {
      width: 100%;
      height: 100%;
      position: relative;
    }

    #table {
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
      overflow: auto;
      position: relative;
      outline: none;
      /* Workaround for a Desktop Safari bug: new stacking context here prevents the scrollbar from getting hidden */
      z-index: 0;
    }

    #header,
    #footer {
      display: block;
      position: -webkit-sticky;
      position: sticky;
      left: 0;
      overflow: visible;
      width: 100%;
      z-index: 1;
    }

    #header {
      top: 0;
    }

    th {
      text-align: inherit;
    }

    /* Safari doesn't work with "inherit" */
    [safari] th {
      text-align: initial;
    }

    #footer {
      bottom: 0;
    }

    #items {
      flex-grow: 1;
      flex-shrink: 0;
      display: block;
      position: -webkit-sticky;
      position: sticky;
      width: 100%;
      left: 0;
      overflow: visible;
    }

    [part~='row'] {
      display: flex;
      width: 100%;
      box-sizing: border-box;
      margin: 0;
    }

    [part~='row'][loading] [part~='body-cell'] ::slotted(vaadin-grid-cell-content) {
      opacity: 0;
    }

    #items [part~='row'] {
      position: absolute;
    }

    #items [part~='row']:empty {
      height: 1em;
    }

    [part~='cell']:not([part~='details-cell']) {
      flex-shrink: 0;
      flex-grow: 1;
      box-sizing: border-box;
      display: flex;
      width: 100%;
      position: relative;
      align-items: center;
      padding: 0;
      white-space: nowrap;
    }

    [part~='details-cell'] {
      position: absolute;
      bottom: 0;
      width: 100%;
      box-sizing: border-box;
      padding: 0;
    }

    [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      display: block;
      width: 100%;
      box-sizing: border-box;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    [hidden] {
      display: none !important;
    }

    [frozen] {
      z-index: 2;
      will-change: transform;
    }

    [no-scrollbars][safari] #table,
    [no-scrollbars][firefox] #table {
      overflow: hidden;
    }

    /* Reordering styles */
    :host([reordering]) [part~='cell'] ::slotted(vaadin-grid-cell-content),
    :host([reordering]) [part~='resize-handle'],
    #scroller[no-content-pointer-events] [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      pointer-events: none;
    }

    [part~='reorder-ghost'] {
      visibility: hidden;
      position: fixed;
      pointer-events: none;
      opacity: 0.5;

      /* Prevent overflowing the grid in Firefox */
      top: 0;
      left: 0;
    }

    :host([reordering]) {
      -moz-user-select: none;
      -webkit-user-select: none;
      user-select: none;
    }

    /* Resizing styles */
    [part~='resize-handle'] {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
      cursor: col-resize;
      z-index: 1;
    }

    [part~='resize-handle']::before {
      position: absolute;
      content: '';
      height: 100%;
      width: 35px;
      transform: translateX(-50%);
    }

    [last-column] [part~='resize-handle']::before,
    [last-frozen] [part~='resize-handle']::before {
      width: 18px;
      transform: none;
      right: 0;
    }

    #scroller[column-resizing] {
      -ms-user-select: none;
      -moz-user-select: none;
      -webkit-user-select: none;
      user-select: none;
    }

    /* Sizer styles */
    #sizer {
      display: flex;
      position: absolute;
      visibility: hidden;
    }

    #sizer [part~='details-cell'] {
      display: none !important;
    }

    #sizer [part~='cell'][hidden] {
      display: none !important;
    }

    #sizer [part~='cell'] {
      display: block;
      flex-shrink: 0;
      line-height: 0;
      height: 0 !important;
      min-height: 0 !important;
      max-height: 0 !important;
      padding: 0 !important;
      border: none !important;
    }

    #sizer [part~='cell']::before {
      content: '-';
    }

    #sizer [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      display: none !important;
    }

    /* RTL specific styles */

    :host([dir='rtl']) #items,
    :host([dir='rtl']) #header,
    :host([dir='rtl']) #footer {
      left: auto;
    }

    :host([dir='rtl']) [part~='reorder-ghost'] {
      left: auto;
      right: 0;
    }

    :host([dir='rtl']) [part~='resize-handle'] {
      left: 0;
      right: auto;
    }

    :host([dir='rtl']) [part~='resize-handle']::before {
      transform: translateX(50%);
    }

    :host([dir='rtl']) [last-column] [part~='resize-handle']::before,
    :host([dir='rtl']) [last-frozen] [part~='resize-handle']::before {
      left: 0;
      right: auto;
    }
  `,{moduleId:"vaadin-grid-styles"});const Ya=(()=>{try{return document.createEvent("TouchEvent"),!0}catch(e){return !1}})();class qa extends(gr(Us(Ia(Pa(Oa(Sa(La(Ma(Fa(ka(Ga(Ca(Ra(ja(Ea(za(Va(Ha(Aa))))))))))))))))))){static get template(){return Gi`
      <div
        id="scroller"
        safari$="[[_safari]]"
        ios$="[[_ios]]"
        loading$="[[loading]]"
        column-reordering-allowed$="[[columnReorderingAllowed]]"
      >
        <table id="table" role="grid" aria-multiselectable="true" tabindex="0">
          <caption id="sizer" part="row"></caption>
          <thead id="header" role="rowgroup"></thead>
          <tbody id="items" role="rowgroup"></tbody>
          <tfoot id="footer" role="rowgroup"></tfoot>
        </table>

        <div part="reorder-ghost"></div>
      </div>

      <div id="focusexit" tabindex="0"></div>
    `}static get is(){return "vaadin-grid"}static get version(){return "6.0.2"}static get observers(){return ["_columnTreeChanged(_columnTree, _columnTree.*)"]}static get properties(){return {_safari:{type:Boolean,value:/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},_ios:{type:Boolean,value:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1},_firefox:{type:Boolean,value:navigator.userAgent.toLowerCase().indexOf("firefox")>-1},_android:{type:Boolean,value:/android/i.test(navigator.userAgent)},_touchDevice:{type:Boolean,value:Ya},heightByRows:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_heightByRowsChanged"},_recalculateColumnWidthOnceLoadingFinished:{type:Boolean,value:!0}}}constructor(){super(),this.addEventListener("animationend",this._onAnimationEnd);}connectedCallback(){super.connectedCallback(),this.recalculateColumnWidths();}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),"dir"===e&&(this.__isRTL="rtl"===i,this._updateScrollerMeasurements());}__hasRowsWithClientHeight(){return !!Array.from(this.$.items.children).filter((e=>e.clientHeight)).length}__itemsReceived(){this._recalculateColumnWidthOnceLoadingFinished&&!this._cache.isLoading()&&this.__hasRowsWithClientHeight()&&(this._recalculateColumnWidthOnceLoadingFinished=!1,this.recalculateColumnWidths());}_recalculateColumnWidths(e){e.forEach((e=>{e.width="auto",e._origFlexGrow=e.flexGrow,e.flexGrow=0;})),e.forEach((e=>{e._currentWidth=0,e._allCells.forEach((t=>{const i=t.offsetWidth+1;e._currentWidth=Math.max(e._currentWidth,i);}));})),e.forEach((e=>{e.width=`${e._currentWidth}px`,e.flexGrow=e._origFlexGrow,e._currentWidth=void 0,e._origFlexGrow=void 0;}));}recalculateColumnWidths(){if(this._columnTree)if(this._cache.isLoading())this._recalculateColumnWidthOnceLoadingFinished=!0;else {const e=this._getColumns().filter((e=>!e.hidden&&e.autoWidth));this._recalculateColumnWidths(e);}}_createScrollerRows(e){const t=[];for(let i=0;i<e;i++){const e=document.createElement("tr");e.setAttribute("part","row"),e.setAttribute("role","row"),this._columnTree&&this._updateRow(e,this._columnTree[this._columnTree.length-1],"body",!1,!0),t.push(e);}return this._columnTree&&this._columnTree[this._columnTree.length-1].forEach((e=>e.isConnected&&e.notifyPath&&e.notifyPath("_cells.*",e._cells))),Pr(this,(()=>{this._updateFirstAndLastColumn(),this._resetKeyboardNavigation();})),t}_getRowTarget(){return this.$.items}_createCell(e){const t="vaadin-grid-cell-content-"+(this._contentIndex=this._contentIndex+1||0),i=document.createElement("vaadin-grid-cell-content");i.setAttribute("slot",t);const s=document.createElement(e);s.id=t.replace("-content-","-"),s.setAttribute("tabindex","-1"),s.setAttribute("role","td"===e?"gridcell":"columnheader");const r=document.createElement("slot");return r.setAttribute("name",t),s.appendChild(r),s._content=i,i.addEventListener("mousedown",(()=>{if(window.chrome){const e=()=>{i.contains(this.getRootNode().activeElement)||s.focus(),document.removeEventListener("mouseup",e,!0);};document.addEventListener("mouseup",e,!0);}else setTimeout((()=>{i.contains(this.getRootNode().activeElement)||s.focus();}));})),s}_updateRow(e,t,i,s,r){i=i||"body";const n=document.createDocumentFragment();Array.from(e.children).forEach((e=>e._vacant=!0)),e.innerHTML="","sizer"!==e.id&&(e.hidden=!0),t.filter((e=>!e.hidden)).forEach(((t,o,a)=>{let l;if("body"===i){if(t._cells=t._cells||[],l=t._cells.filter((e=>e._vacant))[0],l||(l=this._createCell("td"),t._cells.push(l)),l.setAttribute("part","cell body-cell"),e.appendChild(l),o===a.length-1&&(this._rowDetailsTemplate||this.rowDetailsRenderer)){this._detailsCells=this._detailsCells||[];const t=this._detailsCells.filter((e=>e._vacant))[0]||this._createCell("td");-1===this._detailsCells.indexOf(t)&&this._detailsCells.push(t),t._content.parentElement||n.appendChild(t._content),this._configureDetailsCell(t),e.appendChild(t),this._a11ySetRowDetailsCell(e,t),t._vacant=!1;}t.notifyPath&&!r&&t.notifyPath("_cells.*",t._cells);}else {const r="header"===i?"th":"td";s||"vaadin-grid-column-group"===t.localName?(l=t[`_${i}Cell`]||this._createCell(r),l._column=t,e.appendChild(l),t[`_${i}Cell`]=l):(t._emptyCells=t._emptyCells||[],l=t._emptyCells.filter((e=>e._vacant))[0]||this._createCell(r),l._column=t,e.appendChild(l),-1===t._emptyCells.indexOf(l)&&t._emptyCells.push(l)),l.setAttribute("part",`cell ${i}-cell`),this.__updateHeaderFooterRowVisibility(e);}l._content.parentElement||n.appendChild(l._content),l._vacant=!1,l._column=t;})),this.appendChild(n),this._frozenCellsChanged(),this._updateFirstAndLastColumnForRow(e);}__updateHeaderFooterRowVisibility(e){if(!e)return;const t=Array.from(e.children).filter((t=>{const i=t._column;if(i._emptyCells&&i._emptyCells.indexOf(t)>-1)return !1;if(e.parentElement===this.$.header){if(i.headerRenderer||i._headerTemplate)return !0;if(null===i.header)return !1;if(i.path||void 0!==i.header)return !0}else if(i.footerRenderer||i._footerTemplate)return !0}));e.hidden!==!t.length&&(e.hidden=!t.length,this.notifyResize());}_updateScrollerItem(e,t){this._preventScrollerRotatingCellFocus(e,t),this._columnTree&&(this._toggleAttribute("first",0===t,e),this._toggleAttribute("odd",t%2,e),this._a11yUpdateRowRowindex(e,t),this._getItem(t,e));}_columnTreeChanged(e){this._renderColumnTree(e),this.recalculateColumnWidths();}_renderColumnTree(e){for(Array.from(this.$.items.children).forEach((t=>this._updateRow(t,e[e.length-1],null,!1,!0)));this.$.header.children.length<e.length;){const e=document.createElement("tr");e.setAttribute("part","row"),e.setAttribute("role","row"),this.$.header.appendChild(e);const t=document.createElement("tr");t.setAttribute("part","row"),t.setAttribute("role","row"),this.$.footer.appendChild(t);}for(;this.$.header.children.length>e.length;)this.$.header.removeChild(this.$.header.firstElementChild),this.$.footer.removeChild(this.$.footer.firstElementChild);Array.from(this.$.header.children).forEach(((t,i)=>this._updateRow(t,e[i],"header",i===e.length-1))),Array.from(this.$.footer.children).forEach(((t,i)=>this._updateRow(t,e[e.length-1-i],"footer",0===i))),this._updateRow(this.$.sizer,e[e.length-1]),this._resizeHandler(),this._frozenCellsChanged(),this._updateFirstAndLastColumn(),this._resetKeyboardNavigation(),this._a11yUpdateHeaderRows(),this._a11yUpdateFooterRows(),this.__updateFooterPositioning();}__updateFooterPositioning(){if(this._firefox&&(this.$.items.style.paddingBottom=0,this.heightByRows||(this.$.items.style.paddingBottom=`${this.$.footer.offsetHeight}px`)),this._ios){!window.CSS.supports("position","sticky")&&(this.$.table.style.height="",this.$.table.style.minHeight="100%",this.$.table.style.maxHeight="100%",setTimeout((()=>this.$.table.style.height=`${this.$.scroller.offsetHeight}px`)));}}_updateItem(e,t){e._item=t;const i=this.__getRowModel(e);this._toggleAttribute("selected",i.selected,e),this._a11yUpdateRowSelected(e,i.selected),this._a11yUpdateRowLevel(e,i.level),this._toggleAttribute("expanded",i.expanded,e),this._toggleAttribute("details-opened",this._isDetailsOpened(t),e),(this._rowDetailsTemplate||this.rowDetailsRenderer)&&this._toggleDetailsCell(e,t),this._generateCellClassNames(e,i),this._filterDragAndDrop(e,i),Array.from(e.children).forEach((e=>{if(e._renderer){const t=e._column||this;e._renderer.call(t,e._content,t,i);}else e._instance&&(e._instance.__detailsOpened__=i.detailsOpened,e._instance.__selected__=i.selected,e._instance.__level__=i.level,e._instance.__expanded__=i.expanded,e._instance.setProperties(i));})),this._debouncerUpdateHeights=Wi.debounce(this._debouncerUpdateHeights,yt$2.after(1),(()=>{this._updateMetrics(),this._positionItems(),this._updateScrollerSize();}));}_resizeHandler(){this._updateDetailsCellHeights(),this._accessIronListAPI(super._resizeHandler,!0),this._updateScrollerMeasurements(),this.__updateFooterPositioning();}_onAnimationEnd(e){0===e.animationName.indexOf("vaadin-grid-appear")&&(this._render(),e.stopPropagation(),this.notifyResize(),this.__itemsReceived(),requestAnimationFrame((()=>{this.__scrollToPendingIndex(),this.$.table.style.webkitOverflowScrolling="touch";})));}_toggleAttribute(e,t,i){i.hasAttribute(e)===!t&&(t?i.setAttribute(e,""):i.removeAttribute(e));}__getRowModel(e){return {index:e.index,item:e._item,level:this._getIndexLevel(e.index),expanded:this._isExpanded(e._item),selected:this._isSelected(e._item),detailsOpened:!(!this._rowDetailsTemplate&&!this.rowDetailsRenderer)&&this._isDetailsOpened(e._item)}}render(){this._columnTree&&(this._columnTree.forEach((e=>{e.forEach((e=>e._renderHeaderAndFooter()));})),this._update());}notifyResize(){super.notifyResize();}_heightByRowsChanged(e,t){(e||t)&&this.notifyResize();}__forceReflow(){this._debouncerForceReflow=Wi.debounce(this._debouncerForceReflow,bt$2,(()=>{this.$.scroller.style.overflow="hidden",setTimeout((()=>this.$.scroller.style.overflow=""));}));}}customElements.define(qa.is,qa);class Ja extends Ua{static get template(){return Gi`
      <template class="header" id="defaultHeaderTemplate">
        <vaadin-checkbox
          class="vaadin-grid-select-all-checkbox"
          aria-label="Select All"
          hidden$="[[_selectAllHidden]]"
          on-checked-changed="_onSelectAllCheckedChanged"
          checked="[[_isChecked(selectAll, _indeterminate)]]"
          indeterminate="[[_indeterminate]]"
        ></vaadin-checkbox>
      </template>
      <template id="defaultBodyTemplate">
        <vaadin-checkbox aria-label="Select Row" checked="{{selected}}"></vaadin-checkbox>
      </template>
    `}static get is(){return "vaadin-grid-selection-column"}static get properties(){return {width:{type:String,value:"58px"},flexGrow:{type:Number,value:0},selectAll:{type:Boolean,value:!1,notify:!0},autoSelect:{type:Boolean,value:!1},_indeterminate:Boolean,_previousActiveItem:Object,_selectAllHidden:Boolean}}static get observers(){return ["_onSelectAllChanged(selectAll)"]}_pathOrHeaderChanged(e,t,i,s,r,n,o,a,l){!r.value||void 0===e&&void 0===n||(this._bodyTemplate=a=void 0,this.__cleanCellsOfTemplateProperties(r.value)),!i||void 0===t&&void 0===o||(this._headerTemplate=l=void 0,this.__cleanCellsOfTemplateProperties([i])),super._pathOrHeaderChanged(e,t,i,s,r,n,o,a,l);}__cleanCellsOfTemplateProperties(e){e.forEach((e=>{e._content.innerHTML="",delete e._instance,delete e._template;}));}_prepareHeaderTemplate(){const e=this._prepareTemplatizer(this._findTemplate(!0)||this.$.defaultHeaderTemplate);return e.templatizer.dataHost=e===this.$.defaultHeaderTemplate?this:this.dataHost,e}_prepareBodyTemplate(){const e=this._prepareTemplatizer(this._findTemplate()||this.$.defaultBodyTemplate);return e.templatizer.dataHost=e===this.$.defaultBodyTemplate?this:this.dataHost,e}constructor(){super(),this._boundOnActiveItemChanged=this._onActiveItemChanged.bind(this),this._boundOnDataProviderChanged=this._onDataProviderChanged.bind(this),this._boundOnSelectedItemsChanged=this._onSelectedItemsChanged.bind(this);}disconnectedCallback(){this._grid.removeEventListener("active-item-changed",this._boundOnActiveItemChanged),this._grid.removeEventListener("data-provider-changed",this._boundOnDataProviderChanged),this._grid.removeEventListener("filter-changed",this._boundOnSelectedItemsChanged),this._grid.removeEventListener("selected-items-changed",this._boundOnSelectedItemsChanged),super.disconnectedCallback();}connectedCallback(){super.connectedCallback(),this._grid&&(this._grid.addEventListener("active-item-changed",this._boundOnActiveItemChanged),this._grid.addEventListener("data-provider-changed",this._boundOnDataProviderChanged),this._grid.addEventListener("filter-changed",this._boundOnSelectedItemsChanged),this._grid.addEventListener("selected-items-changed",this._boundOnSelectedItemsChanged));}_onSelectAllChanged(e){void 0!==e&&this._grid&&(this._selectAllChangeLock||(this._grid.selectedItems=e&&Array.isArray(this._grid.items)?this._grid._filter(this._grid.items):[]));}_arrayContains(e,t){for(var i=0;e&&t&&t[i]&&e.indexOf(t[i])>=0;i++);return i==t.length}_onSelectAllCheckedChanged(e){this.selectAll=this._indeterminate||e.target.checked;}_isChecked(e,t){return t||e}_onActiveItemChanged(e){const t=e.detail.value;if(this.autoSelect){const e=t||this._previousActiveItem;e&&this._grid._toggleItem(e);}this._previousActiveItem=t;}_onSelectedItemsChanged(){this._selectAllChangeLock=!0,Array.isArray(this._grid.items)&&(this._grid.selectedItems.length?this._arrayContains(this._grid.selectedItems,this._grid._filter(this._grid.items))?(this.selectAll=!0,this._indeterminate=!1):(this.selectAll=!1,this._indeterminate=!0):(this.selectAll=!1,this._indeterminate=!1)),this._selectAllChangeLock=!1;}_onDataProviderChanged(){this._selectAllHidden=!Array.isArray(this._grid.items);}}customElements.define(Ja.is,Ja),Ue$1("vaadin-grid-sorter",Ge$1`
    :host {
      justify-content: flex-start;
      align-items: baseline;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    [part='content'] {
      display: inline-block;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    [part='indicators'] {
      margin-left: var(--lumo-space-s);
    }

    :host(:not([direction])) [part='indicators']::before {
      opacity: 0.2;
    }

    :host([direction]) {
      color: var(--lumo-primary-text-color);
    }

    [part='order'] {
      font-size: var(--lumo-font-size-xxs);
      line-height: 1;
    }

    /* RTL specific styles */

    :host([dir='rtl']) [part='indicators'] {
      margin-right: var(--lumo-space-s);
      margin-left: 0;
    }
  `,{moduleId:"lumo-grid-sorter"});const Xa=document.createElement("template");Xa.innerHTML="\n  <style>\n    @font-face {\n      font-family: 'vaadin-grid-sorter-icons';\n      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAQwAA0AAAAABuwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAEFAAAABkAAAAcfep+mUdERUYAAAP4AAAAHAAAAB4AJwAOT1MvMgAAAZgAAAA/AAAAYA8TBPpjbWFwAAAB7AAAAFUAAAFeF1fZ4mdhc3AAAAPwAAAACAAAAAgAAAAQZ2x5ZgAAAlgAAABcAAAAnMvguMloZWFkAAABMAAAAC8AAAA2C5Ap72hoZWEAAAFgAAAAHQAAACQGbQPHaG10eAAAAdgAAAAUAAAAHAoAAABsb2NhAAACRAAAABIAAAASAIwAYG1heHAAAAGAAAAAFgAAACAACwAKbmFtZQAAArQAAAECAAACZxWCgKhwb3N0AAADuAAAADUAAABZCrApUXicY2BkYGAA4rDECVrx/DZfGbhZGEDgyqNPOxH0/wNMq5kPALkcDEwgUQBWRA0dAHicY2BkYGA+8P8AAwMLAwgwrWZgZEAFbABY4QM8AAAAeJxjYGRgYOAAQiYGEICQSAAAAi8AFgAAeJxjYGY6yziBgZWBgWkm0xkGBoZ+CM34msGYkZMBFTAKoAkwODAwvmRiPvD/AIMDMxCD1CDJKjAwAgBktQsXAHicY2GAAMZQCM0EwqshbAALxAEKeJxjYGBgZoBgGQZGBhCIAPIYwXwWBhsgzcXAwcAEhIwMCi+Z/v/9/x+sSuElA4T9/4k4K1gHFwMMMILMY2QDYmaoABOQYGJABUA7WBiGNwAAJd4NIQAAAAAAAAAACAAIABAAGAAmAEAATgAAeJyNjLENgDAMBP9tIURJwQCMQccSZgk2i5fIYBDAidJjycXr7x5EPwE2wY8si7jmyBNXGo/bNBerxJNrpxhbO3/fEFpx8ZICpV+ghxJ74fAMe+h7Ox14AbrsHB14nK2QQWrDMBRER4mTkhQK3ZRQKOgCNk7oGQqhhEIX2WSlWEI1BAlkJ5CDdNsj5Ey9Rncdi38ES+jzNJo/HwTgATcoDEthhY3wBHc4CE+pfwsX5F/hGe7Vo/AcK/UhvMSz+mGXKhZU6pww8ISz3oWn1BvhgnwTnuEJf8Jz1OpFeIlX9YULDLdFi4ASHolkSR0iuYdjLak1vAequBhj21D61Nqyi6l3qWybGPjySbPHGScGJl6dP58MYcQRI0bts7mjebBqrFENH7t3qWtj0OuqHnXcW7b0HOTZFnKryRGW2hFX1m0O2vEM3opNMfTau+CS6Z3Vx6veNnEXY6jwDxhsc2gAAHicY2BiwA84GBgYmRiYGJkZmBlZGFkZ2djScyoLMgzZS/MyDQwMwLSrpYEBlIbxjQDrzgsuAAAAAAEAAf//AA94nGNgZGBg4AFiMSBmYmAEQnYgZgHzGAAD6wA2eJxjYGBgZACCKyoz1cD0o087YTQATOcIewAAAA==) format('woff');\n      font-weight: normal;\n      font-style: normal;\n    }\n  </style>\n",document.head.appendChild(Xa.content);class Za extends(Us(sr(ji))){static get template(){return Gi`
      <style>
        :host {
          display: inline-flex;
          cursor: pointer;
          max-width: 100%;
        }

        [part='content'] {
          flex: 1 1 auto;
        }

        [part='indicators'] {
          position: relative;
          align-self: center;
          flex: none;
        }

        [part='order'] {
          display: inline;
          vertical-align: super;
        }

        [part='indicators']::before {
          font-family: 'vaadin-grid-sorter-icons';
          display: inline-block;
        }

        :host(:not([direction])) [part='indicators']::before {
          content: '\\e901';
        }

        :host([direction='asc']) [part='indicators']::before {
          content: '\\e900';
        }

        :host([direction='desc']) [part='indicators']::before {
          content: '\\e902';
        }
      </style>

      <div part="content">
        <slot></slot>
      </div>
      <div part="indicators">
        <span part="order">[[_getDisplayOrder(_order)]]</span>
      </div>
    `}static get is(){return "vaadin-grid-sorter"}static get properties(){return {path:String,direction:{type:String,reflectToAttribute:!0,notify:!0,value:null},_order:{type:Number,value:null},_isConnected:{type:Boolean,observer:"__isConnectedChanged"}}}static get observers(){return ["_pathOrDirectionChanged(path, direction)"]}ready(){super.ready(),this.addEventListener("click",this._onClick.bind(this));}connectedCallback(){super.connectedCallback(),this._isConnected=!0;}disconnectedCallback(){super.disconnectedCallback(),this._isConnected=!1;}_pathOrDirectionChanged(){this.__dispatchSorterChangedEvenIfPossible();}__isConnectedChanged(e,t){!1!==t&&this.__dispatchSorterChangedEvenIfPossible();}__dispatchSorterChangedEvenIfPossible(){void 0!==this.path&&void 0!==this.direction&&this._isConnected&&this.dispatchEvent(new CustomEvent("sorter-changed",{bubbles:!0,composed:!0}));}_getDisplayOrder(e){return null===e?"":e+1}_onClick(e){const t=this.getRootNode().activeElement;this!==t&&this.contains(t)||(e.preventDefault(),"asc"===this.direction?this.direction="desc":"desc"===this.direction?this.direction=null:this.direction="asc");}}customElements.define(Za.is,Za);class Ka extends Ua{static get template(){return Gi`
      <template class="header" id="headerTemplate">
        <vaadin-grid-sorter path="[[path]]" direction="{{direction}}">[[_getHeader(header, path)]]</vaadin-grid-sorter>
      </template>
    `}static get is(){return "vaadin-grid-sort-column"}static get properties(){return {path:String,direction:{type:String,notify:!0}}}_prepareHeaderTemplate(){const e=this._prepareTemplatizer(this.$.headerTemplate);return e.templatizer.dataHost=this,e}_getHeader(e,t){return e||this._generateHeader(t)}}customElements.define(Ka.is,Ka);const Qa={selectionColumn:!0},el={base:"esri-grid",content:"esri-grid__content",grid:"esri-grid__grid",widget:"esri-widget"};let tl=class extends(a$2w(z$o)){constructor(e,i){super(e,i),this._grid=null,this._headerStyles="display: flex; font-weight: 400;",this._hostStyles='font-family: "Avenir Next", "Helvetica Neue", Helvetica, Arial, sans-serif; font-size: 1em; background-color: inherit; color: inherit;',this._rowHoverStyles="background-color: var(--lumo-row-background-hover);",this._columnElements=[],this.cellClassNameGenerator=null,this.columnReorderingEnabled=!0,this.dataProvider=null,this.itemIdPath=null,this.label=void 0,this.messages=null,this.pageSize=50,this.selectedItems=new S$I,this.size=null,this.rowDetailsRenderer=null,this.store=null,this.viewModel=new n$1P,this.visibleElements={...Qa};}initialize(){this.handles.add([this.columns.on("change",(()=>this._syncColumnRenderers())),f$1B(this,"viewModel.size",(()=>this._updateGridSize())),f$1B(this,"store.state",((e,t)=>{"ready"!==e||"loaded"!==t&&"error"!==t||this.refreshCache();})),$$g(this,"_grid.$.table","scroll",(()=>{var e;null==(e=this.viewModel)||e.closeColumnMenus();}))]);}destroy(){var e;this.handles.removeAll(),this.resetColumns(),null==(e=this.columns)||e.destroy();}resetColumns(){this.columns.items.forEach((e=>e.destroy())),this.columns.removeAll();}castVisibleElements(e){return {...Qa,...e}}render(){return n$2g("div",{bind:this,class:this.classes(el.base,el.widget)},n$2g("div",{bind:this,class:el.content},this.renderGrid()))}renderGrid(){return n$2g("vaadin-grid",{...this.getGridProps()},this.renderAllColumns())}renderAllColumns(){if("disabled"!==this.viewModel.state&&this.columns&&this.columns.length)return [this.renderSelectionColumn(),this.renderColumns()]}renderSelectionColumn(){return n$2g("vaadin-grid-selection-column",{_selectAllHidden:!0,selectAll:!1,bind:this,hidden:!this.visibleElements.selectionColumn,sortable:!1,frozen:!d$1N(this.container)})}renderColumns(){return this.columns.items.map(((e,t)=>n$2g("vaadin-grid-column",{...this.getColumnProps(e,t)})))}getGridProps(){const{columnReorderingEnabled:e,id:t,pageSize:i,size:s}=this;return {_safari:!1,class:el.grid,id:`${t}_grid`,theme:"compact column-borders",ref:"grid",bind:this,afterCreate:this._afterGridCreate,afterUpdate:this._afterGridUpdate,columnReorderingAllowed:e,pageSize:i,size:s}}getColumnProps(e,t){const{id:i}=this,{autoWidth:s,direction:n,flexGrow:o,frozen:a,header:l,hidden:d,path:h,resizable:c,textAlign:u,width:p}=e;return {autoWidth:s,direction:n,flexGrow:o,frozen:a,header:l,hidden:d,key:`${i}_${l}_${r$1K(t)?t:h}`,path:h,resizable:c,"text-align":u,width:"number"==typeof p?`${p}px`:p,bind:this,afterCreate:this._afterColumnCreate,afterRemoved:this._afterColumnRemoved}}clearSelection(){this._clearSelection(),this.scheduleRender();}clearSort(){let e=!1;if(this._grid&&this._grid._sorters&&this._grid._sorters.length&&(this._grid._sorters=[],e=!0),this.columns&&this.columns.length){!!this.columns.find((e=>!!e.direction))&&(this.columns.forEach((e=>e.direction=null)),e=!0);}e&&this.scheduleRender();}deselectItem(e){this._deselectRowByItem(e);}deselectRow(e){const t=this.viewModel.getRowItemAt(e);t&&this._deselectRowByItem(t);}findColumn(){}generateCellClassNames(){var e;null==(e=this._grid)||e.generateCellClassNames();}getSlotElementByName(e){var t,i;return null==(t=this._grid)||null==(i=t.shadowRoot)?void 0:i.querySelector(`slot[name='${e}']`)}hideColumn(e){var t;null==(t=this.viewModel)||t.hideColumn(e),this.scheduleRender();}notifyResize(){var e;null==(e=this._grid)||e.notifyResize();}recalculateColumnWidths(){var e;null==(e=this._grid)||e.recalculateColumnWidths();}async refresh(){var e;this._clearSelection(),await(null==(e=this.store)?void 0:e.reset()),this.scrollToTop();}refreshCache(){var e;null==(e=this._grid)||e.clearCache();}selectRows(e){const t=this._grid.selectedItems.slice();e.forEach((e=>{t.findIndex((t=>t.objectId===e.objectId))<0&&this._grid.selectedItems.push(e);})),this._updateSelectionProps(),this._grid.render();}deselectRows(e){const t=this._grid.selectedItems.slice();e.forEach((e=>{const i=t.findIndex((t=>t.objectId===e.objectId));i>-1&&t.splice(i,1);})),this._grid.selectedItems=t,this._updateSelectionProps(),this._grid.render();}selectItem(e){this._selectRowByItem(e);}selectRow(e){const t=this.viewModel.getRowItemAt(e);t&&this._selectRowByItem(t);}showColumn(e){var t;null==(t=this.viewModel)||t.showColumn(e),this.scheduleRender();}sort({path:e,direction:t}){var i;null==(i=this.viewModel)||i.sortColumn(e,t);}scrollToIndex(e){var t;null==(t=this._grid)||t.scrollToIndex(e);}scrollToTop(){var e;null==(e=this._grid)||e.scrollToIndex(0);}_afterGridCreate(e){const{cellClassNameGenerator:t,dataProvider:i,itemIdPath:s,rowDetailsRenderer:r}=this;e.cellClassNameGenerator=t,e.dataProvider=i,e.rowDetailsRenderer=r,e.itemIdPath=s,this._grid=e,customElements.whenDefined("vaadin-grid").then((()=>{this._appendStyles(),this._addGridEventListeners();}));}_afterGridUpdate(e){this._grid||(this._grid=e);}_afterColumnCreate(e){this._applyRenderersToColumnElement(e),this._columnElements.push(e);}_afterColumnRemoved(e){const t=this._columnElements.indexOf(e,0);t>-1&&this._columnElements.splice(t,1);}_syncColumnRenderers(){this._columnElements.forEach((e=>this._applyRenderersToColumnElement(e)));}_appendStyles(){var e;const t=null==(e=this._grid)?void 0:e.shadowRoot,i=document.createElement("style");i.textContent=`\n      :host { ${this._hostStyles} }\n      [part~="header-cell"] ::slotted(vaadin-grid-cell-content) { ${this._headerStyles} }\n      [part~="row"]:hover [part~="body-cell"] { ${this._rowHoverStyles} }\n    `,null==t||t.appendChild(i);}_updateGridSize(){this._grid&&(this._grid.size=this.size||0,this.scheduleRender());}_addGridEventListeners(){const{_grid:e}=this;this.handles.add([r$1I(e,"click",(e=>this._onRowClick(e))),r$1I(e,"selected-items-changed",(e=>this._onSelectionChange(e)))]);}_onRowClick(e){const{_grid:t}=this,i=t.getEventContext(e),{item:s,section:r}=i;s&&r&&"details"!==r&&"header"!==r&&this.emit("row-click",{context:i,native:e});}_selectRowByItem(e){var t;null==(t=this._grid)||t.selectItem(e);}_deselectRowByItem(e){var t;null==(t=this._grid)||t.deselectItem(e);}_clearSelection(){var e,t;null!=(e=this._grid)&&null!=(t=e.selectedItems)&&t.length&&(this._grid.selectedItems=[],this._updateSelectionProps(),this._grid.render());}_onSelectionChange(e){const t=e;if("selectedItems.splices"===t.detail.path){const{removed:e,index:i,object:s}=t.detail.value.indexSplices[0];this._updateSelectionProps(),this.emit("selection-change",{index:i,added:s,removed:e});}}_updateSelectionProps(){this.selectedItems.length&&this.selectedItems.removeAll(),this._grid&&this.selectedItems.addMany(this._grid.selectedItems);}_applyRenderersToColumnElement(e){const t=e.getAttribute("path"),i=this.viewModel.findColumn(t);if(i)try{i.renderFunction&&(e.renderer=(e,t,s)=>i.renderFunction({root:e,column:t,rowData:s})),i.footerRenderFunction&&(e.footerRenderer=(e,t)=>i.footerRenderFunction({root:e,column:t})),i.headerRenderFunction&&(e.headerRenderer=(e,t)=>i.headerRenderFunction({root:e,column:t}));}catch(s){}}};e$25([d$1T()],tl.prototype,"_grid",void 0),e$25([o$1K("viewModel.cellClassNameGenerator")],tl.prototype,"cellClassNameGenerator",void 0),e$25([o$1K("viewModel.columns")],tl.prototype,"columns",void 0),e$25([o$1K("viewModel.columnReorderingEnabled")],tl.prototype,"columnReorderingEnabled",void 0),e$25([o$1K("viewModel.dataProvider")],tl.prototype,"dataProvider",void 0),e$25([d$1T()],tl.prototype,"itemIdPath",void 0),e$25([d$1T({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],tl.prototype,"label",void 0),e$25([d$1T(),e$1g("esri/widgets/FeatureTable/t9n/FeatureTable")],tl.prototype,"messages",void 0),e$25([o$1K("viewModel.pageSize")],tl.prototype,"pageSize",void 0),e$25([d$1T({readOnly:!0})],tl.prototype,"selectedItems",void 0),e$25([o$1K("viewModel.size")],tl.prototype,"size",void 0),e$25([o$1K("viewModel.rowDetailsRenderer")],tl.prototype,"rowDetailsRenderer",void 0),e$25([o$1K("viewModel.store")],tl.prototype,"store",void 0),e$25([d$1T()],tl.prototype,"viewModel",void 0),e$25([d$1T()],tl.prototype,"visibleElements",void 0),e$25([c$35("visibleElements")],tl.prototype,"castVisibleElements",null),e$25([o$1K("viewModel.findColumn")],tl.prototype,"findColumn",null),tl=e$25([i$2z("esri.widgets.FeatureTable.Grid.Grid")],tl);const il=tl;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$1T;let p$1Y=a$1T=class extends a$2N{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null;}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10;}clone(){return new a$1T(l$2w({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};e$25([d$1T({type:[String],json:{write:!0}})],p$1Y.prototype,"attachmentTypes",void 0),e$25([d$1T({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],p$1Y.prototype,"attachmentsWhere",void 0),e$25([d$1T({type:[String],json:{write:!0}})],p$1Y.prototype,"keywords",void 0),e$25([d$1T({type:[Number],json:{write:!0}})],p$1Y.prototype,"globalIds",void 0),e$25([d$1T({json:{write:!0}})],p$1Y.prototype,"name",void 0),e$25([d$1T({type:Number,json:{read:{source:"resultRecordCount"}}})],p$1Y.prototype,"num",void 0),e$25([d$1T({type:[Number],json:{write:!0}})],p$1Y.prototype,"objectIds",void 0),e$25([d$1T({type:Boolean,json:{default:!1,write:!0}})],p$1Y.prototype,"returnMetadata",void 0),e$25([d$1T({type:[Number],json:{write:!0}})],p$1Y.prototype,"size",void 0),e$25([d$1T({type:Number,json:{read:{source:"resultOffset"}}})],p$1Y.prototype,"start",void 0),e$25([r$1m("start"),r$1m("num")],p$1Y.prototype,"writeStart",null),e$25([d$1T({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],p$1Y.prototype,"where",void 0),p$1Y=a$1T=e$25([i$2z("esri.rest.support.AttachmentQuery")],p$1Y),p$1Y.from=b$14(p$1Y);const u$1c=p$1Y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const d$15="esri.widgets.FeatureTable.support.FeatureStore",c$1Q=s$2n.getLogger(d$15);function p$1X(e,t,r){c$1Q.error(new s$2l(e,t,r));}let m$1m=class extends p$3a{constructor(e){super(e),this._loaded=!1,this._loadError=!1,this._loading=!1,this._editOperationQueue=[],this._queryOperationQueue=[],this._objectIds=new S$I,this._hasStaleCache=!1,this.count=0,this.failures=new S$I,this.itemCache=new S$I,this.relatedRecordsEnabled=!1;}destroy(){this.layer=null,this.itemCache&&this.itemCache.destroy(),this.failures&&this.failures.destroy(),this._set("itemCache",null);}set attachmentsEnabled(e){this._reset(),this._set("attachmentsEnabled",e),this.notifyChange("state");}set filterGeometry(e){this._reset(),this._set("filterGeometry",e),this.notifyChange("state");}set layer(e){this._reset(),this._set("layer",e),this.notifyChange("state");}get orderByFields(){return this._get("orderByFields")||[]}set orderByFields(e){const t=this.orderByFields;l$2x(e,t)||(this.itemCache.removeAll(),this._hasStaleCache=!0,this._set("orderByFields",e));}get querying(){return this._queryOperationQueue.length>0}set returnGeometry(e){this._reset(),this._set("returnGeometry",e),this.notifyChange("state");}get state(){const{layer:e,_loaded:t,_loadError:r,_loading:s}=this;return r?"error":!e||this.get("layer.loadError")?"disabled":s?"loading":"loaded"===this.get("layer.loadStatus")&&t?"loaded":"ready"}get syncing(){return this._editOperationQueue.length>0}get where(){return this._get("where")||null}set where(e){this._reset(),this._set("where",e),this.notifyChange("state");}async load(){this._reset();const{layer:e}=this;if(!e)return Promise.resolve();this._loading=!0,this.notifyChange("state");try{await e.when(),await this._syncLayerInfo(),this._loading=!1,this._loaded=!0,this.notifyChange("state");}catch(t){throw this._reset(),this._loadError=!0,this.notifyChange("state"),p$1X("store:load-error","An error ocurred.",{error:t}),t}}async addItems(e){}async fetchItems(e){const{page:t,pageSize:r}=e,s=t*r,i=s+r,{layer:a,state:o}=this;if(!a||"loaded"!==o)return Promise.resolve([]);this.notifyChange("querying");const n=await this._query({start:s,num:i,page:t,pageSize:r});return this.notifyChange("state"),n}async query(e){const{layer:t,state:r}=this;if(!t||"loaded"!==r)return [];this.notifyChange("querying");const s=await this._query(e);return this.notifyChange("state"),s}async removeItemAt(e){}async reset(){this._reset();}async updateItem(e){return this._update(e)}getItemByObjectId(e){const{itemCache:t,layer:{objectIdField:r}}=this;return t.find((t=>t.feature.attributes[r]===e))}getLocalItemAt(e){return this.itemCache.getItemAt(e)}getItemAt(e){return Promise.resolve(this.itemCache.getItemAt(e))}getObjectIdIndex(e){const{itemCache:t,layer:{objectIdField:r}}=this;return t.findIndex((t=>t.feature.attributes[r]===e))}_reset(){this.itemCache.removeAll(),this.failures.removeAll(),this._editOperationQueue=[],this._queryOperationQueue=[],this._hasStaleCache=!1,this._loading=!1,this._loaded=!1,this._loadError=!1,this._set("count",0),this._objectIds.removeAll(),this.notifyChange("querying"),this.notifyChange("syncing"),this.notifyChange("state");}_getIdsFromFeatures(e){return e.map((e=>e.attributes[this.layer.objectIdField]))}_toFeatureData(e,t){const{layer:{objectIdField:r}}=this;return e.map((e=>{const{attributes:s}=e,i=s[r];return {objectId:i,feature:e,attachments:t?t[i]:null,relatedRecords:null}}))}async _update(e){const{layer:r}=this,{operations:s}=r.capabilities;if(!s.supportsUpdate||"wfs"===r.type||"imagery"===r.type)throw new s$2l("store:update-error","Update is not supported.");const{index:i,name:a,value:u}=e,h=await this.getItemAt(i);if(!h||!h.feature)throw new s$2l("store:update-error","Feature with provided 'objectId' not found.");const{feature:y}=h,l=l$2w(y.attributes);l[a]=u;const d=new h$X({attributes:l}),c=r.applyEdits({updateFeatures:[d]}).then((e=>{const{updateFeatureResults:t}=e,r=t.find((e=>!!e.error));if(r)throw r.error;return this._editOperationQueue.indexOf((()=>c))>-1&&t&&t.length&&(y.attributes=l),e}));return this._queueEditOperation((()=>c))}async _query(e){const{refresh:t}=e;return !0===t?(this.itemCache.removeAll(),this._syncLayerInfo().then((()=>this._queryFeatureData(e)))):(this._hasStaleCache&&(await this._updateIds(),this._hasStaleCache=!1),this._queryFeatureData(e))}async _queryFeatureData(e){return this._queueQueryOperation((async()=>{const{features:t}=await this._queryFeatures(e),r=this._getIdsFromFeatures(t),s=await this._queryAttachments(r);return this._toFeatureData(t,s)||[]}))}async _syncLayerInfo(){await this._updateCount(),await this._updateIds();}async _updateCount(){await this._queryCount().then((e=>this._set("count",e)));}async _updateIds(){var e,t,r;null!=(e=this.layer)&&null!=(t=e.capabilities)&&null!=(r=t.query)&&r.supportsPagination||(this._objectIds.removeAll(),await this._queryObjectIds().then((e=>this._objectIds.addMany(e))));}_queryCount(){const{filterGeometry:e,layer:t,returnGeometry:r}=this,s=t.createQuery();return s.geometry=e,s.returnGeometry=r,s.where=this._getWhere(),t.queryFeatureCount(s)}_queryObjectIds(){const{filterGeometry:e,layer:t,orderByFields:r,returnGeometry:s}=this,{capabilities:{query:{supportsCacheHint:i,supportsOrderBy:a}}}=t;if("geojson"===t.type||"wfs"===t.type||"imagery"===t.type)return Promise.resolve([]);const o=t.createQuery();return o.geometry=e,o.outFields=[t.objectIdField],o.returnGeometry=s,o.where=this._getWhere(),a&&(o.orderByFields=r),i&&(o.cacheHint=!0),t.queryObjectIds(o)}async _queryFeatures(e){const{layer:t}=this;if(!t.capabilities.operations.supportsQuery)return Promise.reject(new s$2l("store:query-error","Layer does not support query operation."));const{filterGeometry:r,layer:{capabilities:{query:{supportsCacheHint:s,supportsOrderBy:i,supportsPagination:a}}},orderByFields:n,returnGeometry:u}=this,{start:h,pageSize:y}=e,l=t.createQuery();return l.returnGeometry=u,a?(l.start=h,l.num=y,l.where=this._getWhere()):l.objectIds=this._getObjectIdsForPage(h,y),i&&(l.orderByFields=n),r&&(l.geometry=r),s&&(l.cacheHint=!0),t.queryFeatures(l)}_getObjectIdsForPage(e,t){const r=this._objectIds.toArray();return r.length>=e+t?r.slice(e,e+t):r.slice(e)}_queryAttachments(e){const{attachmentsEnabled:t,layer:r}=this,{capabilities:{data:{supportsAttachment:s},operations:{supportsQueryAttachments:i}}}=r;return t&&s&&i&&"geojson"!==r.type&&"wfs"!==r.type&&"imagery"!==r.type?r.queryAttachments(new u$1c({objectIds:e,where:this._getWhere()})):Promise.resolve(null)}_queueQueryOperation(e){return this._queryOperationQueue.push(e),this.notifyChange("querying"),e().then((t=>this._queryOperationQueue.indexOf(e)>-1?(this.itemCache.addMany(t),t):[])).catch((t=>{p$1X("store:query-error","An error ocurred.",{error:t});const r={error:t,retry:()=>{this.failures.remove(r),this._queueQueryOperation(e);},cancel:()=>this.failures.remove(r)};return this.failures.add(r),[]})).then((t=>(C$B(this._queryOperationQueue,e),this.notifyChange("querying"),t)))}_queueEditOperation(e){return this._editOperationQueue.push(e),this.notifyChange("syncing"),e().then((()=>{C$B(this._editOperationQueue,e),this.notifyChange("syncing");})).catch((t=>{p$1X("store:edit-error","An error ocurred.",{error:t});const r={error:t,retry:()=>{this.failures.remove(r),this._queueEditOperation(e);},cancel:()=>this.failures.remove(r)};throw this.failures.add(r),C$B(this._editOperationQueue,e),this.notifyChange("syncing"),t}))}_getWhere(){return this.where||this.layer.definitionExpression||"1=1"}};e$25([d$1T()],m$1m.prototype,"attachmentsEnabled",null),e$25([d$1T({readOnly:!0})],m$1m.prototype,"count",void 0),e$25([d$1T({readOnly:!0})],m$1m.prototype,"failures",void 0),e$25([d$1T()],m$1m.prototype,"filterGeometry",null),e$25([d$1T({readOnly:!0})],m$1m.prototype,"itemCache",void 0),e$25([d$1T({value:null})],m$1m.prototype,"layer",null),e$25([d$1T()],m$1m.prototype,"orderByFields",null),e$25([d$1T({readOnly:!0})],m$1m.prototype,"querying",null),e$25([d$1T()],m$1m.prototype,"relatedRecordsEnabled",void 0),e$25([d$1T({value:!1})],m$1m.prototype,"returnGeometry",null),e$25([d$1T({readOnly:!0})],m$1m.prototype,"state",null),e$25([d$1T({readOnly:!0})],m$1m.prototype,"syncing",null),e$25([d$1T()],m$1m.prototype,"where",null),m$1m=e$25([i$2z(d$15)],m$1m);const _$k=m$1m;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let y$Y=class extends(a$2w(n$1P)){constructor(e){super(e),this._defaultHiddenFields=["CreationDate","Creator","EditDate","Editor","GlobalID"],this._highlights=new u$25,this.cellClassNameGenerator=(e,t)=>e.path||null,this.dataProvider=async(e,t)=>{const{store:s}=this,{page:i,pageSize:r,sortOrders:o}=e,l=this._sortOrdersToLayerOrderByFields(o);t&&(s?(await s.set({orderByFields:l}),"loaded"!==s.state&&"loading"!==s.state&&await s.load(),t&&t(await s.fetchItems({page:i,pageSize:r}))):t&&t([]));},this.editingEnabled=!1,this.grid=null,this.hiddenFields=new S$I,this.highlightOnRowSelectEnabled=!0,this.itemIdPath="objectId",this.messagesCommon=null,this.relatedRecordsEnabled=!1,this.store=null,this.view=null;const{hiddenFields:t,itemIdPath:i}=this;t.addMany(this._defaultHiddenFields),this._set("store",new _$k),this._set("grid",new il({itemIdPath:i,viewModel:this}));}initialize(){const e=async()=>{this.messages=await u$20("esri/widgets/FeatureTable/t9n/FeatureTable"),this.messagesCommon=await u$20("esri/t9n/common");};e(),this.handles.add([g$14(e),$$g(this,"grid.selectedItems","change",(e=>this._onSelectionChange(e))),f$1B(this,"relatedRecordsEnabled",(e=>this.store.relatedRecordsEnabled=e)),f$1B(this,["layer.loaded"],(()=>{var e;null!=(e=this.layer)&&e.loaded&&this._onLayerLoad();})),f$1B(this.store,"state",(e=>{var t;"loaded"===e&&(null==(t=this.grid)||t.scrollToTop());})),f$1B(this,["editingEnabled","messages"],(()=>{var e;return (null==(e=this.layer)?void 0:e.loaded)&&this._generateColumns()})),f$1B(this,"layer.definitionExpression",((e,t)=>(e||t)&&"loaded"===this.store.state&&this.refresh()))]);}destroy(){var e,t;this._resetColumns(),this.handles.removeAll(),this._highlights.removeAll(),this._highlights.destroy(),null==(e=this.grid)||e.destroy(),null==(t=this.columns)||t.destroy(),this.layer=null,this.view=null;}set attachmentsEnabled(e){this.attachmentsEnabled!==e&&(this._set("attachmentsEnabled",e),this._generateColumns(),this.store.attachmentsEnabled=e);}set fieldConfigs(e){var t;this._set("fieldConfigs",e),(null==(t=this.layer)?void 0:t.loaded)&&this._generateColumns();}set filterGeometry(e){(this.filterGeometry||e)&&(this.clearSelection(),this._set("filterGeometry",e),this.store.filterGeometry=e);}set layer(e){var t;this._set("layer",e),null==(t=this.grid)||t.clearSort(),this._resetColumns(),this.store.layer=e,e&&(e.loaded?this._onLayerLoad():e.load()),this.notifyChange("state");}set messages(e){var t;null==(t=this.grid)||t.set("messages",e),this._set("messages",e);}clearHighlights(){this._highlights.removeAll();}clearSelection(){var e;null==(e=this.grid)||e.clearSelection();}deselectRows(e){const t=this._getStoreItemsFromSelectionParams(e);this.grid.deselectRows(t);}getObjectIdIndex(e){var t;return null==(t=this.store)?void 0:t.getObjectIdIndex(e)}getValue(e,t){var s;const i=this.store.getItemByObjectId(e);return null==i||null==(s=i.feature)?void 0:s.attributes[t]}refresh(){var e;null==(e=this.grid)||e.refresh();}selectRows(e){const t=this._getStoreItemsFromSelectionParams(e);this.grid.selectRows(t);}scrollToIndex(e){var t;null==(t=this.grid)||t.scrollToIndex(e);}_onLayerLoad(){const e=this.layer.capabilities.query.maxRecordCount;e&&e<this.pageSize&&this.grid&&(this.grid.pageSize=e),this._generateColumns();}_generateColumns(){this._resetColumns(),this.columns.addMany([...this._createFieldColumns()]),this.attachmentsEnabled&&this.columns.push(this._createAttachmentsColumn());}_createFieldColumns(){return this.fieldConfigs&&this.fieldConfigs.length?this._createColumnsFromConfigs():this._createColumnsFromFields()}_createColumnsFromConfigs(){var e,t;const{editingEnabled:s,fieldConfigs:i,grid:r,hiddenFields:o,layer:l,messages:a,messagesCommon:n,store:d}=this,h=null!=(e=null==(t=this.layer)?void 0:t.fields)?e:[];return i.filter((e=>(h||[]).find((t=>e.name===t.name)))).map((e=>{const t=e.direction||null,i=e.formatFunction||null,c=(h||[]).find((t=>e.name===t.name)),g=!1===e.visible||!0!==e.visible&&o.indexOf(c.name)>-1;return new C$m({config:e,direction:t,editingEnabled:s,field:c,formatFunction:i,grid:r,hidden:g,layer:l,store:d,messages:a,messagesCommon:n})}))}_createColumnsFromFields(){var e,t;const{editingEnabled:s,grid:i,hiddenFields:r,layer:o,messages:l,messagesCommon:a,store:n}=this;return (null!=(e=null==(t=this.layer)?void 0:t.fields)?e:[]).map((e=>{const t=r.indexOf(e.name)>-1;return new C$m({editingEnabled:s,field:e,grid:i,hidden:t,layer:o,store:n,messages:l,messagesCommon:a})}))}_createAttachmentsColumn(){var e;return new n$1S({header:null==(e=this.messages)?void 0:e.attachments})}_sortOrdersToLayerOrderByFields(e){return e&&e.length?e.filter(((e,t,s)=>s.map((e=>e.path)).indexOf(e.path)===t)).map((({direction:e,path:t})=>e?t+" "+e.toUpperCase():"")):[]}_highlight(e){const{view:t}=this,s=t&&e&&t.allLayerViews.items.find((({layer:t})=>t===e.layer));e$13(s)&&this._highlights.add(s.highlight(e),`feature-${e.getObjectId()}`);}_unhighlight(e){e&&this._highlights.remove(`feature-${e.getObjectId()}`);}_getStoreItemsFromSelectionParams(e){const s=[];return (e=e instanceof Array?e:[e]).forEach((e=>{let i=e instanceof h$X?e:null;const r=i?i.getObjectId():e;if("number"==typeof r||"string"==typeof r){if(!i){const e=this.store.getItemByObjectId(r);e&&(i=e.feature);}s.push({objectId:r,feature:i});}})),s}_onSelectionChange(e){const{highlightOnRowSelectEnabled:t}=this,{added:s,removed:i}=e;t&&s.forEach((e=>this._highlight(e.feature))),t&&i.forEach((e=>this._unhighlight(e.feature)));}_resetColumns(){this.columns.items.forEach((e=>e.destroy())),this.columns.removeAll();}};e$25([d$1T()],y$Y.prototype,"attachmentsEnabled",null),e$25([d$1T()],y$Y.prototype,"cellClassNameGenerator",void 0),e$25([d$1T()],y$Y.prototype,"dataProvider",void 0),e$25([d$1T()],y$Y.prototype,"editingEnabled",void 0),e$25([d$1T()],y$Y.prototype,"fieldConfigs",null),e$25([d$1T()],y$Y.prototype,"filterGeometry",null),e$25([d$1T({readOnly:!0})],y$Y.prototype,"grid",void 0),e$25([d$1T()],y$Y.prototype,"hiddenFields",void 0),e$25([d$1T()],y$Y.prototype,"highlightOnRowSelectEnabled",void 0),e$25([d$1T({readOnly:!0})],y$Y.prototype,"itemIdPath",void 0),e$25([d$1T()],y$Y.prototype,"layer",null),e$25([d$1T()],y$Y.prototype,"messages",null),e$25([d$1T()],y$Y.prototype,"messagesCommon",void 0),e$25([d$1T()],y$Y.prototype,"relatedRecordsEnabled",void 0),e$25([d$1T({readOnly:!0,type:_$k})],y$Y.prototype,"store",void 0),e$25([d$1T()],y$Y.prototype,"view",void 0),y$Y=e$25([i$2z("esri.widgets.FeatureTable.FeatureTableViewModel")],y$Y);const v$x=y$Y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const b$D={header:!0,menu:!0,menuItems:{clearSelection:!0,refreshData:!0,toggleColumns:!0},selectionColumn:!0},f$U={base:"esri-feature-table",header:"esri-feature-table__header",title:"esri-feature-table__title",content:"esri-feature-table__content",loader:"esri-feature-table__loader",loaderContainer:"esri-feature-table__loader-container",menuContainer:"esri-feature-table__menu",menuIcon:"esri-icon-handle-horizontal",menuItemGroupOpenedIcon:"esri-icon-down",menuItemGroupClosedIcon:"esri-icon-right",checkmarkIcon:"esri-icon-check-mark",widget:"esri-widget"};let M$k=class extends(a$2w(z$o)){constructor(e,l){super(e,l),this.attachmentsEnabled=null,this.columns=new S$I,this.editingEnabled=null,this.fieldConfigs=null,this.filterGeometry=null,this.grid=null,this.highlightOnRowSelectEnabled=!0,this.label=void 0,this.layer=null,this.messages=null,this.menu=null,this.menuConfig=null,this.pageSize=50,this.view=null,this.viewModel=new v$x,this.visibleElements={...b$D};}initialize(){var e,t,l;const i=async()=>this.messages=await u$20("esri/widgets/FeatureTable/t9n/FeatureTable");i(),this.handles.add([g$14(i),$$g(this,"grid.selectedItems","change",(e=>this._onSelectionChange(e))),f$1B(this,["viewModel.store.querying","viewModel.store.syncing","grid.size"],(()=>this.scheduleRender())),$$g(this,"viewModel.columns","change",(()=>this._updateMenuItems())),f$1B(this,"menuConfig",(()=>this._syncMenuConfig())),f$1B(this,"messages",(()=>{var e;this.menu.label=null==(e=this.messages)?void 0:e.options,this._updateMenuItems();}))]),this._set("menu",new _$o({label:null==(e=this.messages)?void 0:e.options,iconClass:f$U.menuIcon,...this.menuConfig}));const{attachmentsEnabled:n,relatedRecordsEnabled:r}=this;null==(t=this.viewModel)||null==(l=t.store)||l.set({attachmentsEnabled:n,relatedRecordsEnabled:r});}destroy(){var e;this.clearSelection(),this.handles.removeAll(),null==(e=this.menu)||e.destroy();}castVisibleElements(e){var t;const l={...b$D,...e};return null==(t=this.grid)||t.set("visibleElements",{...this.grid.visibleElements,selectionColumn:l.selectionColumn}),l}clearHighlights(){}clearSelection(){}deselectRows(){}hideColumn(e){var t;null==(t=this.grid)||t.hideColumn(e),this._updateMenuItems();}refresh(){}showColumn(e){var t;null==(t=this.grid)||t.showColumn(e),this._updateMenuItems();}sortColumn(){}selectRows(){}scrollToIndex(){}render(){var e;return n$2g("div",{bind:this,class:this.classes(f$U.base,f$U.widget)},this.visibleElements.header?this._renderHeader():null,n$2g("div",{class:f$U.content},"disabled"!==this.state&&(null==(e=this.grid)?void 0:e.render())))}_renderHeader(){return n$2g("div",{key:"header",class:f$U.header},this._renderLoader(),this._renderTitle(),this.visibleElements.menu?this._renderMenu():null)}_renderTitle(){return n$2g("div",{class:f$U.title,key:"title"},this._getTitle())}_getTitle(){const{grid:e,layer:{title:t},messages:l,viewModel:{size:o}}=this;return e?s$22(l.header,{title:t,count:o,selected:e.selectedItems.length||0}):""}_renderLoader(){const{state:e,store:t}=this.viewModel,l="loading"===e||t.syncing||t.querying;return n$2g("div",{class:f$U.loaderContainer},l?n$2g("div",{class:f$U.loader,key:"loader"}):null)}_renderMenu(){return n$2g("div",{class:f$U.menuContainer},this.menu.render())}_onSelectionChange(e){const{added:t,removed:l}=e;this.emit("selection-change",{added:[...t],removed:[...l]});}_syncMenuConfig(){var e;null==(e=this.menu)||e.set({...this.menuConfig,items:this._getMenuItems()});}_updateMenuItems(){var e;null==(e=this.menu)||e.set("items",this._getMenuItems());}_getMenuItems(){var e;const t=null==(e=this.menuConfig)?void 0:e.items,l=this._getDefaultMenuItems(),o=[];return (null==l?void 0:l.length)&&o.push(...l),(null==t?void 0:t.length)&&o.push(...t),o}_getDefaultMenuItems(){var e;const{messages:t,viewModel:l,visibleElements:o}=this,{menuItems:s}=o,i=[];return (null==s?void 0:s.clearSelection)&&i.push(new c$1W({selectionEnabled:!1,label:null==t?void 0:t.clearSelection,clickFunction:()=>this.clearSelection()})),(null==s?void 0:s.refreshData)&&i.push(new c$1W({selectionEnabled:!1,label:null==t?void 0:t.refreshData,clickFunction:()=>this.refresh()})),(null==s?void 0:s.toggleColumns)&&i.push(new c$1W({iconClass:f$U.menuItemGroupClosedIcon,label:null==t?void 0:t.toggleColumns,clickFunction:this._toggleMenuItemSelectedIcon,items:null==l||null==(e=l.columns)?void 0:e.items.map((({header:e,hidden:t,path:l})=>new c$1W({label:e||l,selected:!t,selectionEnabled:!0,iconClass:f$U.checkmarkIcon,clickFunction:()=>this._toggleColumnFromMenuItem(l)})))})),i.length?i:null}_toggleMenuItemSelectedIcon({item:e}){null==e||e.set("iconClass",null!=e&&e.selected?f$U.menuItemGroupOpenedIcon:f$U.menuItemGroupClosedIcon);}_toggleColumnFromMenuItem(e){const{grid:t,viewModel:l}=this,o=l.findColumn(e);null!=o&&o.hidden?t.showColumn(e):t.hideColumn(e);}};e$25([o$1K("viewModel.attachmentsEnabled")],M$k.prototype,"attachmentsEnabled",void 0),e$25([o$1K("viewModel.columns")],M$k.prototype,"columns",void 0),e$25([o$1K("viewModel.editingEnabled")],M$k.prototype,"editingEnabled",void 0),e$25([o$1K("viewModel.fieldConfigs")],M$k.prototype,"fieldConfigs",void 0),e$25([o$1K("viewModel.filterGeometry")],M$k.prototype,"filterGeometry",void 0),e$25([o$1K("viewModel.grid")],M$k.prototype,"grid",void 0),e$25([o$1K("viewModel.highlightOnRowSelectEnabled")],M$k.prototype,"highlightOnRowSelectEnabled",void 0),e$25([d$1T({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],M$k.prototype,"label",void 0),e$25([o$1K("viewModel.layer")],M$k.prototype,"layer",void 0),e$25([d$1T(),e$1g("esri/widgets/FeatureTable/t9n/FeatureTable")],M$k.prototype,"messages",void 0),e$25([d$1T({readOnly:!0})],M$k.prototype,"menu",void 0),e$25([d$1T()],M$k.prototype,"menuConfig",void 0),e$25([o$1K("viewModel.pageSize")],M$k.prototype,"pageSize",void 0),e$25([o$1K("viewModel.relatedRecordsEnabled")],M$k.prototype,"relatedRecordsEnabled",void 0),e$25([o$1K("viewModel.state")],M$k.prototype,"state",void 0),e$25([o$1K("viewModel.view")],M$k.prototype,"view",void 0),e$25([d$1T()],M$k.prototype,"viewModel",void 0),e$25([d$1T()],M$k.prototype,"visibleElements",void 0),e$25([c$35("visibleElements")],M$k.prototype,"castVisibleElements",null),e$25([o$1K("viewModel.clearHighlights")],M$k.prototype,"clearHighlights",null),e$25([o$1K("viewModel.clearSelection")],M$k.prototype,"clearSelection",null),e$25([o$1K("viewModel.deselectRows")],M$k.prototype,"deselectRows",null),e$25([o$1K("viewModel.refresh")],M$k.prototype,"refresh",null),e$25([o$1K("viewModel.sortColumn")],M$k.prototype,"sortColumn",null),e$25([o$1K("viewModel.selectRows")],M$k.prototype,"selectRows",null),e$25([o$1K("viewModel.scrollToIndex")],M$k.prototype,"scrollToIndex",null),M$k=e$25([i$2z("esri.widgets.FeatureTable")],M$k);const y$X=M$k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$V;let a$1S=t$V=class extends a$2N{constructor(r){super(r),this.minValue=0,this.maxValue=0;}clone(){return new t$V({minValue:this.minValue,maxValue:this.maxValue})}};e$25([d$1T({type:Number,json:{write:!0}})],a$1S.prototype,"minValue",void 0),e$25([d$1T({type:Number,json:{write:!0}})],a$1S.prototype,"maxValue",void 0),a$1S=t$V=e$25([i$2z("esri.renderer.support.AuthoringInfoClassBreakInfo")],a$1S);const p$1W=a$1S;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$1O;let a$1R=n$1O=class extends a$2N{constructor(o){super(o),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[];}clone(){return new n$1O({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:l$2w(this.classBreakInfos)})}};e$25([d$1T({type:String,json:{write:!0}})],a$1R.prototype,"field",void 0),e$25([d$1T({type:String,json:{write:!0}})],a$1R.prototype,"normalizationField",void 0),e$25([d$1T({type:String,json:{write:!0}})],a$1R.prototype,"label",void 0),e$25([d$1T({type:[p$1W],json:{write:!0}})],a$1R.prototype,"classBreakInfos",void 0),a$1R=n$1O=e$25([i$2z("esri.renderers.support.AuthoringInfoFieldInfo")],a$1R);const p$1V=a$1R;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$1N;const l$1r=new o$1J({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),p$1U=new o$1J({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),a$1Q={key:e=>"number"==typeof e?"number":"string",typeMap:{number:Number,string:String},base:null},u$1b=["high-to-low","above-and-below","centered-on","extremes"],m$1l=[...new Set([...["high-to-low","above-and-below","centered-on","extremes","90-10","above","below"],...["high-to-low","above-and-below","90-10","above","below"]])],y$W=["seconds","minutes","hours","days","months","years"];let d$14=n$1N=class extends a$2N{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null;}castEndTime(e){return "string"==typeof e||"number"==typeof e?e:null}castStartTime(e){return "string"==typeof e||"number"==typeof e?e:null}get style(){return "color"===this.type?this._get("style"):null}set style(e){this._set("style",e);}get theme(){return "color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e);}clone(){return new n$1N({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};e$25([d$1T({types:a$1Q,json:{write:!0}})],d$14.prototype,"endTime",void 0),e$25([c$35("endTime")],d$14.prototype,"castEndTime",null),e$25([d$1T({type:String,json:{write:!0}})],d$14.prototype,"field",void 0),e$25([d$1T({type:Number,json:{write:!0}})],d$14.prototype,"maxSliderValue",void 0),e$25([d$1T({type:Number,json:{write:!0}})],d$14.prototype,"minSliderValue",void 0),e$25([d$1T({types:a$1Q,json:{write:!0}})],d$14.prototype,"startTime",void 0),e$25([c$35("startTime")],d$14.prototype,"castStartTime",null),e$25([d$1T({type:l$1r.apiValues,value:null,json:{type:l$1r.jsonValues,read:l$1r.read,write:l$1r.write}})],d$14.prototype,"style",null),e$25([d$1T({type:m$1l,value:null,json:{type:m$1l,origins:{"web-scene":{type:u$1b,write:{writer:(e,t)=>{u$1b.indexOf(e)>-1&&(t.theme=e);}}}},write:!0}})],d$14.prototype,"theme",null),e$25([d$1T({type:p$1U.apiValues,json:{type:p$1U.jsonValues,read:p$1U.read,write:p$1U.write}})],d$14.prototype,"type",void 0),e$25([d$1T({type:y$W,json:{type:y$W,write:!0}})],d$14.prototype,"units",void 0),d$14=n$1N=e$25([i$2z("esri.renderers.support.AuthoringInfoVisualVariable")],d$14);const h$V=d$14;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$$=class extends a$2N{constructor(r){super(r),this.type=null;}};e$25([d$1T({readOnly:!0,json:{read:!1,write:!0}})],e$$.prototype,"type",void 0),e$$=e$25([i$2z("esri.rest.support.ColorRamp")],e$$);const p$1T=e$$;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$1k;let c$1P=m$1k=class extends p$1T{constructor(o){super(o),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic";}clone(){return new m$1k({fromColor:l$2w(this.fromColor),toColor:l$2w(this.toColor),algorithm:this.algorithm})}};e$25([r$12({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],c$1P.prototype,"algorithm",void 0),e$25([d$1T({type:h$18,json:{type:[S$J],write:!0}})],c$1P.prototype,"fromColor",void 0),e$25([d$1T({type:h$18,json:{type:[S$J],write:!0}})],c$1P.prototype,"toColor",void 0),e$25([d$1T({type:["algorithmic"]})],c$1P.prototype,"type",void 0),c$1P=m$1k=e$25([i$2z("esri.rest.support.AlgorithmicColorRamp")],c$1P);const a$1P=c$1P;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$1O;let m$1j=c$1O=class extends p$1T{constructor(o){super(o),this.colorRamps=null,this.type="multipart";}clone(){return new c$1O({colorRamps:l$2w(this.colorRamps)})}};e$25([d$1T({type:[a$1P],json:{write:!0}})],m$1j.prototype,"colorRamps",void 0),e$25([d$1T({type:["multipart"]})],m$1j.prototype,"type",void 0),m$1j=c$1O=e$25([i$2z("esri.rest.support.MultipartColorRamp")],m$1j);const a$1O=m$1j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$1i={key:"type",base:p$1T,typeMap:{algorithmic:a$1P,multipart:a$1O}};function p$1S(o){return o&&o.type?"algorithmic"===o.type?a$1P.fromJSON(o):"multipart"===o.type?a$1O.fromJSON(o):null:null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$13;const h$U=new o$1J({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),y$V=new o$1J({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),m$1h=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],v$w=["high-to-low","above-and-below","above","below","90-10"],f$T=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let b$C=d$13=class extends a$2N{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null;}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e);}readColorRamp(e){if(e)return p$1S(e)}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(e){this._set("fields",e);}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(e){this._set("field1",e);}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(e){this._set("field2",e);}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(e){this._set("focus",e);}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e);}get statistics(){return "univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null}set statistics(e){this._set("statistics",e);}get standardDeviationInterval(){const e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e);}get type(){return this._get("type")}set type(e){let t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t);}get univariateSymbolStyle(){return "univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e);}get univariateTheme(){return "univariate-color-size"===this.type?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e);}clone(){return new d$13({classificationMethod:this.classificationMethod,colorRamp:l$2w(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:l$2w(this.field1),field2:l$2w(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((e=>e.clone())),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme})}};e$25([d$1T({type:h$U.apiValues,value:null,json:{type:h$U.jsonValues,read:h$U.read,write:h$U.write,origins:{"web-document":{default:"manual",type:h$U.jsonValues,read:h$U.read,write:h$U.write}}}})],b$C.prototype,"classificationMethod",null),e$25([d$1T({types:m$1i,json:{write:!0}})],b$C.prototype,"colorRamp",void 0),e$25([o$1v("colorRamp")],b$C.prototype,"readColorRamp",null),e$25([d$1T({type:[String],value:null,json:{write:!0}})],b$C.prototype,"fields",null),e$25([d$1T({type:p$1V,value:null,json:{write:!0}})],b$C.prototype,"field1",null),e$25([d$1T({type:p$1V,value:null,json:{write:!0}})],b$C.prototype,"field2",null),e$25([d$1T({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],b$C.prototype,"focus",null),e$25([d$1T({type:Number,value:null,json:{type:S$J,write:!0}})],b$C.prototype,"numClasses",null),e$25([d$1T({type:m$1h,json:{type:m$1h,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],b$C.prototype,"lengthUnit",void 0),e$25([d$1T({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],b$C.prototype,"maxSliderValue",void 0),e$25([d$1T({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],b$C.prototype,"minSliderValue",void 0),e$25([d$1T({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],b$C.prototype,"statistics",null),e$25([d$1T({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],b$C.prototype,"standardDeviationInterval",null),e$25([d$1T({type:y$V.apiValues,value:null,json:{type:y$V.jsonValues,read:y$V.read,write:y$V.write}})],b$C.prototype,"type",null),e$25([d$1T({type:[h$V],json:{write:!0}})],b$C.prototype,"visualVariables",void 0),e$25([d$1T({type:f$T,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],b$C.prototype,"univariateSymbolStyle",null),e$25([d$1T({type:v$w,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],b$C.prototype,"univariateTheme",null),b$C=d$13=e$25([i$2z("esri.renderers.support.AuthoringInfo")],b$C);const w$z=b$C;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$1M=new o$1J({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});let a$1N=class extends a$2N{constructor(r){super(r),this.authoringInfo=null,this.type=null;}async getRequiredFields(r){if(!this.collectRequiredFields)return [];const e=new Set;return await this.collectRequiredFields(e,r),Array.from(e).sort()}getSymbol(r,e){}async getSymbolAsync(r,e){}getSymbols(){return []}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};e$25([d$1T({type:w$z,json:{write:!0}})],a$1N.prototype,"authoringInfo",void 0),e$25([d$1T({type:n$1M.apiValues,readOnly:!0,json:{type:n$1M.jsonValues,read:!1,write:{writer:n$1M.write,ignoreOrigin:!0}}})],a$1N.prototype,"type",void 0),a$1N=e$25([i$2z("esri.renderers.Renderer")],a$1N);const p$1R=a$1N;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$_;let p$1Q=e$_=class extends a$2N{constructor(){super(...arguments),this.title=null;}clone(){return new e$_({title:this.title})}};e$25([d$1T({type:String,json:{write:!0}})],p$1Q.prototype,"title",void 0),p$1Q=e$_=e$25([i$2z("esri.renderers.support.LegendOptions")],p$1Q);const c$1N=p$1Q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$U;let p$1P=t$U=class extends c$1N{constructor(){super(...arguments),this.showLegend=null;}clone(){return new t$U({title:this.title,showLegend:this.showLegend})}};e$25([d$1T({type:Boolean,json:{write:!0}})],p$1P.prototype,"showLegend",void 0),p$1P=t$U=e$25([i$2z("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],p$1P);const i$1x=p$1P;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$1M=s$2n.getLogger("esri.renderers.visualVariables.VisualVariable"),u$1a=new o$1J({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let c$1M=class extends a$2N{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null;}castField(e){return null==e?e:"function"==typeof e?(a$1M.error(".field: field must be a string value"),null):u$2b(e)}get arcadeRequired(){return !!this.valueExpression}clone(){}getAttributeHash(){return `${this.type}-${this.field}-${this.valueExpression}`}};e$25([d$1T()],c$1M.prototype,"index",void 0),e$25([d$1T({type:u$1a.apiValues,readOnly:!0,json:{read:u$1a.read,write:u$1a.write}})],c$1M.prototype,"type",void 0),e$25([d$1T({type:String,json:{write:!0}})],c$1M.prototype,"field",void 0),e$25([c$35("field")],c$1M.prototype,"castField",null),e$25([d$1T({type:String,json:{write:!0}})],c$1M.prototype,"valueExpression",void 0),e$25([d$1T({type:String,json:{write:!0}})],c$1M.prototype,"valueExpressionTitle",void 0),e$25([d$1T({readOnly:!0})],c$1M.prototype,"arcadeRequired",null),e$25([d$1T({type:i$1x,json:{write:!0}})],c$1M.prototype,"legendOptions",void 0),c$1M=e$25([i$2z("esri.renderers.visualVariables.VisualVariable")],c$1M);const d$12=c$1M;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1w;let c$1L=i$1w=class extends a$2N{constructor(r){super(r),this.color=null,this.label=null,this.value=null;}writeValue(r,o,e){o[e]=null==r?0:r;}clone(){return new i$1w({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};e$25([d$1T({type:h$18,json:{type:[S$J],write:!0}})],c$1L.prototype,"color",void 0),e$25([d$1T({type:String,json:{write:!0}})],c$1L.prototype,"label",void 0),e$25([d$1T({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],c$1L.prototype,"value",void 0),e$25([r$1m("value")],c$1L.prototype,"writeValue",null),c$1L=i$1w=e$25([i$2z("esri.renderers.visualVariables.support.ColorStop")],c$1L);const a$1L=c$1L;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1v;let p$1O=i$1v=class extends d$12{constructor(t){super(t),this.type="color",this.normalizationField=null;}get cache(){return {ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter((t=>!!t))).sort(((t,s)=>t.value-s.value)),this._set("stops",t);}clone(){return new i$1v({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((t=>t.clone())),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return `${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((t=>t.value||0))}};e$25([d$1T({readOnly:!0})],p$1O.prototype,"cache",null),e$25([d$1T({type:["color"],json:{type:["colorInfo"]}})],p$1O.prototype,"type",void 0),e$25([d$1T({type:String,json:{write:!0}})],p$1O.prototype,"normalizationField",void 0),e$25([d$1T({type:[a$1L],json:{write:!0}})],p$1O.prototype,"stops",null),p$1O=i$1v=e$25([i$2z("esri.renderers.visualVariables.ColorVariable")],p$1O);const a$1K=p$1O;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$1q;let u$19=l$1q=class extends a$2N{constructor(r){super(r),this.label=null,this.opacity=null,this.value=null;}readOpacity(r,t){return r$W(t.transparency)}writeOpacity(r,t,o){t[o]=n$27(r);}clone(){return new l$1q({label:this.label,opacity:this.opacity,value:this.value})}};e$25([d$1T({type:String,json:{write:!0}})],u$19.prototype,"label",void 0),e$25([d$1T({type:Number,json:{type:S$J,write:{target:"transparency"}}})],u$19.prototype,"opacity",void 0),e$25([o$1v("opacity",["transparency"])],u$19.prototype,"readOpacity",null),e$25([r$1m("opacity")],u$19.prototype,"writeOpacity",null),e$25([d$1T({type:Number,json:{write:!0}})],u$19.prototype,"value",void 0),u$19=l$1q=e$25([i$2z("esri.renderers.visualVariables.support.OpacityStop")],u$19);const y$U=u$19;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1u;let p$1N=i$1u=class extends d$12{constructor(t){super(t),this.type="opacity",this.normalizationField=null;}get cache(){return {ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter((t=>!!t))).sort(((t,s)=>t.value-s.value)),this._set("stops",t);}clone(){return new i$1u({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((t=>t.clone())),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return `${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((t=>t.value||0))}};e$25([d$1T({readOnly:!0})],p$1N.prototype,"cache",null),e$25([d$1T({type:["opacity"],json:{type:["transparencyInfo"]}})],p$1N.prototype,"type",void 0),e$25([d$1T({type:String,json:{write:!0}})],p$1N.prototype,"normalizationField",void 0),e$25([d$1T({type:[y$U],json:{write:!0}})],p$1N.prototype,"stops",null),p$1N=i$1u=e$25([i$2z("esri.renderers.visualVariables.OpacityVariable")],p$1N);const a$1J=p$1N;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$1M;let a$1I=p$1M=class extends d$12{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null;}get cache(){return {hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,s,o,r){if(r&&r.messages){const e=`visualVariables[${this.index}]`;r.messages.push(new s$2l("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:e+".valueExpressionTitle",context:r}));}}clone(){return new p$1M({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};e$25([d$1T({readOnly:!0})],a$1I.prototype,"cache",null),e$25([d$1T({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],a$1I.prototype,"axis",void 0),e$25([d$1T({type:["rotation"],json:{type:["rotationInfo"]}})],a$1I.prototype,"type",void 0),e$25([d$1T({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],a$1I.prototype,"rotationType",void 0),e$25([d$1T({type:String,json:{write:!0}})],a$1I.prototype,"valueExpressionTitle",void 0),e$25([r$1m("web-scene","valueExpressionTitle")],a$1I.prototype,"writeValueExpressionTitleWebScene",null),a$1I=p$1M=e$25([i$2z("esri.renderers.visualVariables.RotationVariable")],a$1I);const n$1L=a$1I;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$1L;let i$1t=p$1L=class extends a$2N{constructor(r){super(r),this.label=null,this.size=null,this.value=null;}clone(){return new p$1L({label:this.label,size:this.size,value:this.value})}};e$25([d$1T({type:String,json:{write:!0}})],i$1t.prototype,"label",void 0),e$25([d$1T({type:Number,cast:o$10,json:{write:!0}})],i$1t.prototype,"size",void 0),e$25([d$1T({type:Number,json:{write:!0}})],i$1t.prototype,"value",void 0),i$1t=p$1L=e$25([i$2z("esri.renderers.visualVariables.support.SizeStop")],i$1t);const l$1p=i$1t;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$T;let i$1s=t$T=class extends i$1x{constructor(){super(...arguments),this.customValues=null;}clone(){return new t$T({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};e$25([d$1T({type:[Number],json:{write:!0}})],i$1s.prototype,"customValues",void 0),i$1s=t$T=e$25([i$2z("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],i$1s);const a$1H=i$1s;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1K(n){return n&&"esri.renderers.visualVariables.SizeVariable"===n.declaredClass}function e$Z(n){return null!=n&&!isNaN(n)&&isFinite(n)}function i$1r(n){return n.valueExpression?"expression":n.field&&"string"==typeof n.field?"field":"unknown"}function l$1o(n,e){const l=e||i$1r(n),a=n.valueUnit||"unknown";return "unknown"===l?"constant":n.stops?"stops":null!=n.minSize&&null!=n.maxSize&&null!=n.minDataValue&&null!=n.maxDataValue?"clamped-linear":"unknown"===a?null!=n.minSize&&null!=n.minDataValue?n.minSize&&n.minDataValue?"proportional":"additive":"identity":"real-world-size"}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1J(n){}function o$W(n){return ()=>n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$1g={inches:D$k(1,"meters","inches"),feet:D$k(1,"meters","feet"),"us-feet":D$k(1,"meters","us-feet"),yards:D$k(1,"meters","yards"),miles:D$k(1,"meters","miles"),"nautical-miles":D$k(1,"meters","nautical-miles"),millimeters:D$k(1,"meters","millimeters"),centimeters:D$k(1,"meters","centimeters"),decimeters:D$k(1,"meters","decimeters"),meters:D$k(1,"meters","meters"),kilometers:D$k(1,"meters","kilometers"),"decimal-degrees":1/R$n(1,"meters",s$1V.radius)};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$1K=s$2n.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),u$18=new h$X,f$S=Math.PI,p$1K=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function d$11(a,r,i){const t="visualVariables"in a&&a.visualVariables?a.visualVariables.filter((e=>"color"===e.type))[0]:a;if(!t)return;if("esri.renderers.visualVariables.ColorVariable"!==t.declaredClass)return void c$1K.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const s="number"==typeof r,o=s?null:r,l=o&&o.attributes;let u=s?r:null;const f=t.field,{ipData:p,hasExpression:d}=t.cache;let v=t.cache.compiledFunc;if(!f&&!d){const e=t.stops;return e&&e[0]&&e[0].color}if("number"!=typeof u)if(d){if(!r$1K(i)||!r$1K(i.arcade))return void c$1K.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},a=i.arcade.arcadeUtils,r=a.getViewInfo(e),s=a.createExecContext(o,r);if(!v){const e=a.createSyntaxTree(t.valueExpression);v=a.createFunction(e),t.cache.compiledFunc=v;}u=a.executeFunction(v,s);}else l&&(u=l[f]);const b=t.normalizationField,h=l?parseFloat(l[b]):void 0;if(null!=u&&(!b||s||!isNaN(h)&&0!==h)){isNaN(h)||s||(u/=h);const a=C$k(u,p);if(a){const r=a[0],s=a[1],o=r===s?t.stops[r].color:h$18.blendColors(t.stops[r].color,t.stops[s].color,a[2],r$1K(i)?i.color:void 0);return new h$18(o)}}}function v$v(e,a,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"opacity"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.OpacityVariable"!==i.declaredClass)return void c$1K.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n="number"==typeof a,s=n?null:a,o=s&&s.attributes;let l=n?a:null;const u=i.field,{ipData:f,hasExpression:p}=i.cache;let d=i.cache.compiledFunc;if(!u&&!p){const e=i.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof l)if(p){if(t$1T(r)||t$1T(r.arcade))return void c$1K.error("Use of arcade expressions requires an arcade context");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},a=r.arcade.arcadeUtils,n=a.getViewInfo(e),o=a.createExecContext(s,n);if(!d){const e=a.createSyntaxTree(i.valueExpression);d=a.createFunction(e),i.cache.compiledFunc=d;}l=a.executeFunction(d,o);}else o&&(l=o[u]);const v=i.normalizationField,b=o?parseFloat(o[v]):void 0;if(null!=l&&(!v||n||!isNaN(b)&&0!==b)){isNaN(b)||n||(l/=b);const e=C$k(l,f);if(e){const a=e[0],r=e[1];if(a===r)return i.stops[a].opacity;{const n=i.stops[a].opacity;return n+(i.stops[r].opacity-n)*e[2]}}}}function b$B(e,a,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"rotation"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.RotationVariable"!==i.declaredClass)return void c$1K.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=i.axis||"heading",s="heading"===n&&"arithmetic"===i.rotationType?90:0,o="heading"===n&&"arithmetic"===i.rotationType?-1:1,l="number"==typeof a?null:a,u=l&&l.attributes,f=i.field,{hasExpression:p}=i.cache;let d=i.cache.compiledFunc,v=0;if(!f&&!p)return v;if(p){if(t$1T(r)||t$1T(r.arcade))return void c$1K.error("Use of arcade expressions requires an arcade context");const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},a=r.arcade.arcadeUtils,n=a.getViewInfo(e),s=a.createExecContext(l,n);if(!d){const e=a.createSyntaxTree(i.valueExpression);d=a.createFunction(e),i.cache.compiledFunc=d;}v=a.executeFunction(d,s);}else u&&(v=u[f]||0);return v="number"!=typeof v||isNaN(v)?null:s+o*v,v}function h$T(e,a,r){const i="number"==typeof a,s=i?null:a,o=s&&s.attributes;let u=i?a:null;const{isScaleDriven:f}=e.cache;let p=e.cache.compiledFunc;if(f){const a=r$1K(r)?r.scale:void 0,i=r$1K(r)?r.view:void 0;u=null==a||"3d"===i?m$1f(e):a;}else if(!i)switch(e.inputValueType){case"expression":{if(t$1T(r)||t$1T(r.arcade))return void c$1K.error("Use of arcade expressions requires an arcade context");const a={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},i=r.arcade.arcadeUtils,n=i.getViewInfo(a),o=i.createExecContext(s,n);if(!p){const a=i.createSyntaxTree(e.valueExpression);p=i.createFunction(a),e.cache.compiledFunc=p;}u=i.executeFunction(p,o);break}case"field":o&&(u=o[e.field]);break;case"unknown":u=null;}if(!e$Z(u))return null;if(i||!e.normalizationField)return u;const d=o?parseFloat(o[e.normalizationField]):null;return e$Z(d)&&0!==d?u/d:null}function m$1f(e){let a=null,r=null;const i=e.stops;return i?(a=i[0].value,r=i[i.length-1].value):(a=e.minDataValue||0,r=e.maxDataValue||0),(a+r)/2}function V$8(e,a,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((e=>"size"===e.type))[0]:e;if(!i)return;if("esri.renderers.visualVariables.SizeVariable"!==i.declaredClass)return void c$1K.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const n=M$j(h$T(i,a,r),i,a,r,i.cache.ipData);return null==n||isNaN(n)?0:n}function x$m(e,a,r){return null==e?null:n$1K(e)?V$8(e,a,r):e$Z(e)?e:null}function y$T(e,a,r){return e$Z(r)&&e>r?r:e$Z(a)&&e<a?a:e}function w$y(e,a,r,i){return e+(x$m(a.minSize,r,i)||a.minDataValue)}function g$K(e,a,r){const i=e.stops;let n=i&&i.length&&i[0].size;return null==n&&(n=e.minSize),x$m(n,a,r)}function z$e(e,a,r,i){const t=(e-a.minDataValue)/(a.maxDataValue-a.minDataValue),s=x$m(a.minSize,r,i),o=x$m(a.maxSize,r,i),l=r$1K(i)?i.shape:void 0;if(e<=a.minDataValue)return s;if(e>=a.maxDataValue)return o;if("area"===a.scaleBy&&l){const e="circle"===l,a=e?f$S*(s/2)**2:s*s,r=a+t*((e?f$S*(o/2)**2:o*o)-a);return e?2*Math.sqrt(r/f$S):Math.sqrt(r)}return s+t*(o-s)}function F$b(e,a,r,i){const t=r$1K(i)?i.shape:void 0,s=e/a.minDataValue,o=x$m(a.minSize,r,i),l=x$m(a.maxSize,r,i);let c=null;return c="circle"===t?2*Math.sqrt(s*(o/2)**2):"square"===t||"diamond"===t||"image"===t?Math.sqrt(s*o**2):s*o,y$T(c,o,l)}function S$p(e,a,r,i,n){const[t,s,o]=C$k(e,n);if(t===s)return x$m(a.stops[t].size,r,i);{const e=x$m(a.stops[t].size,r,i);return e+(x$m(a.stops[s].size,r,i)-e)*o}}function E$h(e,a,r,i){const t=(r$1K(i)&&i.resolution?i.resolution:1)*m$1g[a.valueUnit],o=x$m(a.minSize,r,i),l=x$m(a.maxSize,r,i),{valueRepresentation:c}=a;let u=null;return u="area"===c?2*Math.sqrt(e/f$S)/t:"radius"===c||"distance"===c?2*e/t:e/t,y$T(u,o,l)}function D$e(e){return e}function M$j(e,a,r,i,n){switch(a.transformationType){case"additive":return w$y(e,a,r,i);case"constant":return g$K(a,r,i);case"clamped-linear":return z$e(e,a,r,i);case"proportional":return F$b(e,a,r,i);case"stops":return S$p(e,a,r,i,n);case"real-world-size":return E$h(e,a,r,i);case"identity":return D$e(e);case"unknown":return null}}function U$f(e,a,r){const{isScaleDriven:i}=e.cache;if(!(i&&"3d"===r||a))return null;const n={scale:a,view:r};let t=x$m(e.minSize,u$18,n),s=x$m(e.maxSize,u$18,n);if(null!=t||null!=s){if(t>s){const e=s;s=t,t=e;}return {minSize:t,maxSize:s}}}function k$i(e,a,r){if(!e.visualVariables)return;const i=[],n=[],t=[],s=[],o=[];for(const l of e.visualVariables)switch(l.type){case"color":n.push(l);break;case"opacity":t.push(l);break;case"rotation":o.push(l);break;case"size":s.push(l);}return n.forEach((e=>{const n=d$11(e,a,r);i.push({variable:e,value:n});})),t.forEach((e=>{const n=v$v(e,a,r);i.push({variable:e,value:n});})),o.forEach((e=>{const n=b$B(e,a,r);i.push({variable:e,value:n});})),s.forEach((e=>{const n=V$8(e,a,r);i.push({variable:e,value:n});})),i.filter((e=>null!=e.value))}function C$k(e,a){if(!a)return;let r=0,i=a.length-1;return a.some(((a,n)=>e<a?(i=n,!0):(r=n,!1))),[r,i,(e-a[r])/(a[i]-a[r])]}function N$e(e,a,i){const n=["proportional","proportional","proportional"];for(const t of e){const e=t.useSymbolValue?"symbol-value":V$8(t,a,i);switch(t.axis){case"width":n[0]=e;break;case"depth":n[1]=e;break;case"height":n[2]=e;break;case"width-and-depth":n[0]=e,n[1]=e;break;case"all":case void 0:case null:n[0]=e,n[1]=e,n[2]=e;break;}}return n}

const visualVariableUtils = /*#__PURE__*/Object.freeze({
  __proto__: null,
  getAllSizes: N$e,
  getColor: d$11,
  getOpacity: v$v,
  getRotationAngle: b$B,
  getSize: V$8,
  getSizeForValue: M$j,
  getSizeFromNumberOrVariable: x$m,
  getSizeRangeAtScale: U$f,
  getVisualVariableValues: k$i,
  viewScaleRE: p$1K
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var S$o;const z$d=s$2n.getLogger("esri.renderers.visualVariables.SizeVariable"),v$u=new o$1J({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),w$x=new o$1J({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function V$7(e){if(null!=e)return "string"==typeof e||"number"==typeof e?o$10(e):"size"===e.type?n$1K(e)?e:(delete(e={...e}).type,new g$J(e)):void 0}function f$R(e,t,i){if("object"!=typeof e)return e;const s=new g$J;return s.read(e,i),s}let g$J=S$o=class extends d$12{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null;}get cache(){return {ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:p$1K.test(this.valueExpression)}}set expression(e){z$d.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===e?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null);}set index(e){n$1K(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),n$1K(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e);}get inputValueType(){return i$1r(this)}set maxDataValue(e){e&&this.stops&&(z$d.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e);}set maxSize(e){e&&this.stops&&(z$d.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e);}castMaxSize(e){return V$7(e)}readMaxSize(e,t,i){return f$R(e,t,i)}set minDataValue(e){e&&this.stops&&(z$d.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e);}set minSize(e){e&&this.stops&&(z$d.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e);}castMinSize(e){return V$7(e)}readMinSize(e,t,i){return f$R(e,t,i)}get arcadeRequired(){return !!this.valueExpression||(this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired)}set stops(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)):e&&(z$d.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e);}get transformationType(){return l$1o(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,i,s,r){if("$view.scale"===e){if(r&&r.messages){const e=this.index,i="string"==typeof e?e:`visualVariables[${e}]`;r.messages.push(new s$2l("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:i+".valueExpression",context:r}));}}else i[s]=e;}readValueUnit(e){return e?w$x.read(e):null}clone(){return new S$o({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:n$1K(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:n$1K(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map((e=>e.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if("clamped-linear"===this.transformationType){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if("stops"===this.transformationType){const e=this.stops,t=e.map((e=>e.size)).reverse(),i=e.length;for(let s=0;s<i;s++)e[s].size=t[s];return this}return this}getAttributeHash(){return `${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};e$25([d$1T({readOnly:!0})],g$J.prototype,"cache",null),e$25([d$1T({type:v$u.apiValues,json:{type:v$u.jsonValues,origins:{"web-map":{read:!1}},read:v$u.read,write:v$u.write}})],g$J.prototype,"axis",void 0),e$25([d$1T({type:String,value:null,json:{read:!1}})],g$J.prototype,"expression",null),e$25([d$1T()],g$J.prototype,"index",null),e$25([d$1T({type:String,readOnly:!0})],g$J.prototype,"inputValueType",null),e$25([d$1T({type:a$1H,json:{write:!0}})],g$J.prototype,"legendOptions",void 0),e$25([d$1T({type:Number,value:null,json:{write:!0}})],g$J.prototype,"maxDataValue",null),e$25([d$1T({type:Number,value:null,json:{write:!0}})],g$J.prototype,"maxSize",null),e$25([c$35("maxSize")],g$J.prototype,"castMaxSize",null),e$25([o$1v("maxSize")],g$J.prototype,"readMaxSize",null),e$25([d$1T({type:Number,value:null,json:{write:!0}})],g$J.prototype,"minDataValue",null),e$25([d$1T({type:Number,value:null,json:{write:!0}})],g$J.prototype,"minSize",null),e$25([c$35("minSize")],g$J.prototype,"castMinSize",null),e$25([o$1v("minSize")],g$J.prototype,"readMinSize",null),e$25([d$1T({type:String,json:{write:!0}})],g$J.prototype,"normalizationField",void 0),e$25([d$1T({readOnly:!0})],g$J.prototype,"arcadeRequired",null),e$25([d$1T({type:String})],g$J.prototype,"scaleBy",void 0),e$25([d$1T({type:[l$1p],value:null,json:{write:!0}})],g$J.prototype,"stops",null),e$25([d$1T({type:["outline"],json:{write:!0}})],g$J.prototype,"target",void 0),e$25([d$1T({type:String,readOnly:!0})],g$J.prototype,"transformationType",null),e$25([d$1T({type:["size"],json:{type:["sizeInfo"]}})],g$J.prototype,"type",void 0),e$25([d$1T({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],g$J.prototype,"useSymbolValue",void 0),e$25([d$1T({type:String,json:{write:!0}})],g$J.prototype,"valueExpression",void 0),e$25([o$1v("valueExpression",["valueExpression","expression"])],g$J.prototype,"readValueExpression",null),e$25([r$1m("web-scene","valueExpression")],g$J.prototype,"writeValueExpressionWebScene",null),e$25([d$1T({type:["radius","diameter","area","width","distance"],json:{write:!0}})],g$J.prototype,"valueRepresentation",void 0),e$25([d$1T({type:w$x.apiValues,json:{write:w$x.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],g$J.prototype,"valueUnit",void 0),e$25([o$1v("valueUnit")],g$J.prototype,"readValueUnit",null),g$J=S$o=e$25([i$2z("esri.renderers.visualVariables.SizeVariable")],g$J);const b$A=g$J;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u$17=s$2n.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),b$z={color:a$1K,size:b$A,opacity:a$1J,rotation:n$1L},V$6=new o$1J({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),h$S=/^\[([^\]]+)\]$/i;let m$1e=class extends p$3a{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null;}set visualVariables(r){if(this._resetVariables(),(r=r&&r.filter((r=>!!r)))&&r.length){for(const s of r)switch(s.type){case"color":this.colorVariables.push(s);break;case"opacity":this.opacityVariables.push(s);break;case"rotation":this.rotationVariables.push(s);break;case"size":this.sizeVariables.push(s);}if(this.sizeVariables.length){this.sizeVariables.some((r=>!!r.target))&&r.sort(((r,s)=>{let e=null;return e=r.target===s.target?0:r.target?1:-1,e}));}for(let s=0;s<r.length;s++){r[s].index=s;}this._set("visualVariables",r);}else this._set("visualVariables",r);}readVariables(r,s,e){const{rotationExpression:a,rotationType:t}=s,i=a&&a.match(h$S),l=i&&i[1];if(l&&(r||(r=[]),r.push({type:"rotationInfo",rotationType:t,field:l})),r)return r.map((r=>{const s=V$6.read(r.type),a=b$z[s];a||(u$17.warn(`Unknown variable type: ${s}`),e&&e.messages&&e.messages.push(new t$1A("visual-variable:unsupported",`visualVariable of type '${s}' is not supported`,{definition:r,context:e})));const t=new a;return t.read(r,e),t}))}writeVariables(r,s){const e=[];for(const a of r){const r=a.toJSON(s);r&&e.push(r);}return e}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[];}};e$25([d$1T()],m$1e.prototype,"visualVariables",null),m$1e=e$25([i$2z("esri.renderers.visualVariables.VisualVariableFactory")],m$1e);const f$Q=m$1e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const b$y={base:d$12,key:"type",typeMap:{opacity:a$1J,color:a$1K,rotation:n$1L,size:b$A}},v$t=l=>{let u=class extends l{constructor(){super(...arguments),this._vvFactory=new f$Q;}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables);}readVisualVariables(r,a,s){return this._vvFactory.readVariables(r,a,s)}writeVisualVariables(r,a,s,i){a[s]=this._vvFactory.writeVariables(r,i);}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return !1;for(const r of this.visualVariables)if(r.arcadeRequired)return !0;return !1}hasVisualVariables(r,a){return r?this.getVisualVariablesForType(r,a).length>0:this.getVisualVariablesForType("size",a).length>0||this.getVisualVariablesForType("color",a).length>0||this.getVisualVariablesForType("opacity",a).length>0||this.getVisualVariablesForType("rotation",a).length>0}getVisualVariablesForType(r,a){const s=this.visualVariables;return s?s.filter((s=>s.type===r&&("string"==typeof a?s.target===a:!1!==a||!s.target))):[]}async collectVVRequiredFields(r,a){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const i of s)i&&(i.field&&F$h(r,a,i.field),i.normalizationField&&F$h(r,a,i.normalizationField),i.valueExpression&&await b$O(r,a,i.valueExpression));}};return e$25([d$1T({types:[b$y],value:null,json:{write:!0}})],u.prototype,"visualVariables",null),e$25([o$1v("visualVariables",["visualVariables","rotationType","rotationExpression"])],u.prototype,"readVisualVariables",null),e$25([r$1m("visualVariables")],u.prototype,"writeVisualVariables",null),u=e$25([i$2z("esri.renderers.mixins.VisualVariablesMixin")],u),u};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$1J={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function a$1G(a,S=p$1J){if(!a)return {symbol:null};const{retainId:c=p$1J.retainId,ignoreDrivers:u=p$1J.ignoreDrivers,hasLabelingContext:d=p$1J.hasLabelingContext,retainCIM:j=p$1J.retainCIM}=S;let D;if(x$p(a)||a instanceof h$Z)D=a.clone();else if("cim"===a.type){var g,C;const o=null==(g=a.data)||null==(C=g.symbol)?void 0:C.type;if("CIMPointSymbol"!==o)return {error:new s$2l("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${o||"unknown"}' is unsupported in 3D`,{symbol:a})};D=j?a.clone():L$l.fromCIMSymbol(a);}else if(a instanceof m$1z)D=b$K.fromSimpleLineSymbol(a);else if(a instanceof y$10)D=L$l.fromSimpleMarkerSymbol(a);else if(a instanceof n$1V)D=L$l.fromPictureMarkerSymbol(a);else if(a instanceof S$r)D=h$$.fromSimpleFillSymbol(a);else {if(!(a instanceof c$1Z))return {error:new s$2l("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${a.type||a.declaredClass}' is unsupported in 3D`,{symbol:a})};D=d?b$L.fromTextSymbol(a):L$l.fromTextSymbol(a);}if(c&&"cim"!==D.type&&(D.id=a.id),u&&x$p(D))for(let o=0;o<D.symbolLayers.length;++o)D.symbolLayers.getItemAt(o)._ignoreDrivers=!0;return {symbol:D}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function m$1d(e,o,s,r){const n=i$1q(e,{},r);n&&(o[s]=n);}function i$1q(e,m,i){if(!e)return null;if(i&&"web-scene"===i.origin&&!(e instanceof A$e)&&!(e instanceof h$Z)){const r=a$1G(e,{retainCIM:!0});return r$1K(r.symbol)?r.symbol.write(m,i):(i.messages&&i.messages.push(new s$2l("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:i,error:r.error})),null)}return i&&"web-map"===i.origin&&"web-style"===e.type?(i.messages&&i.messages.push(new s$2l("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:e,context:i})),null):e.write(m,i)}function l$1n(o,s){return k$k(o,null,s)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$1m={types:M$n,json:{write:{writer:m$1d},origins:{"web-scene":{types:h$Y,write:{writer:m$1d},read:{reader:u$2a({types:h$Y})}}}}},y$S={types:{base:a$2f,key:"type",typeMap:{"simple-fill":j$r.typeMap["simple-fill"],"picture-fill":j$r.typeMap["picture-fill"],"polygon-3d":j$r.typeMap["polygon-3d"]}},json:{write:{writer:m$1d},origins:{"web-scene":{type:h$$,write:{writer:m$1d}}}}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1p;let l$1l=i$1p=class extends a$2N{constructor(s){super(s),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null;}clone(){return new i$1p({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const s=JSON.stringify(this.symbol);return `${this.minValue}.${this.maxValue}.${s}`}};e$25([d$1T({type:String,json:{write:!0}})],l$1l.prototype,"description",void 0),e$25([d$1T({type:String,json:{write:!0}})],l$1l.prototype,"label",void 0),e$25([d$1T({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],l$1l.prototype,"minValue",void 0),e$25([d$1T({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],l$1l.prototype,"maxValue",void 0),e$25([d$1T(l$1m)],l$1l.prototype,"symbol",void 0),l$1l=i$1p=e$25([i$2z("esri.renderers.support.ClassBreakInfo")],l$1l);const a$1F=l$1l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var F$a;const E$g=s$2n.getLogger("esri.renderers.ClassBreaksRenderer"),j$p="log",w$w="percent-of-total",z$c="field",T$e=new o$1J({esriNormalizeByLog:j$p,esriNormalizeByPercentOfTotal:w$w,esriNormalizeByField:z$c}),_$j=b$14(a$1F);let C$j=F$a=class extends(v$t(p$1R)){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[]);}readClassBreakInfos(e,s,t){if(!Array.isArray(e))return;let o=s.minValue;return e.map((e=>{const s=new a$1F;return s.read(e,t),null==s.minValue&&(s.minValue=o),null==s.maxValue&&(s.maxValue=s.minValue),o=s.maxValue,s}))}writeClassBreakInfos(e,s,t,o){const r=e.map((e=>e.write({},o)));this._areClassBreaksConsecutive()&&r.forEach((e=>delete e.classMinValue)),s[t]=r;}castField(e){return null==e?e:"function"==typeof e?(E$g.error(".field: field must be a string value"),null):u$2b(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const s=!!this.normalizationField,t=null!=this.normalizationTotal;return s||t?(e=s&&z$c||t&&w$w||null,s&&t&&E$g.warn("warning: both normalizationField and normalizationTotal are set!")):e!==z$c&&e!==w$w||(e=null),e}set normalizationType(e){this._set("normalizationType",e);}addClassBreakInfo(e,t,r){let i=null;i="number"==typeof e?new a$1F({minValue:e,maxValue:t,symbol:g$O(r)}):_$j(l$2w(e)),this.classBreakInfos.push(i),1===this.classBreakInfos.length&&this.notifyChange("minValue");}removeClassBreakInfo(e,s){const t=this.classBreakInfos.length;for(let o=0;o<t;o++){const t=[this.classBreakInfos[o].minValue,this.classBreakInfos[o].maxValue];if(t[0]===e&&t[1]===s){this.classBreakInfos.splice(o,1);break}}}getBreakIndex(e,s){return this.valueExpression&&(t$1T(s)||t$1T(s.arcade))&&E$g.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,s):this._getBreakIndexForField(e)}async getClassBreakInfo(e,s){let t=s;this.valueExpression&&(t$1T(s)||t$1T(s.arcade))&&(t={...t,arcade:await a$2t()});const o=this.getBreakIndex(e,t);return -1!==o?this.classBreakInfos[o]:null}getSymbol(e,s){if(this.valueExpression&&(t$1T(s)||t$1T(s.arcade)))return void E$g.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const t=this.getBreakIndex(e,s);return t>-1?this.classBreakInfos[t].symbol:this.defaultSymbol}async getSymbolAsync(e,s){let t=s;if(this.valueExpression&&(t$1T(s)||t$1T(s.arcade))){const e=await a$2t(),{arcadeUtils:s}=e;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),t={...t,arcade:e};}const o=this.getBreakIndex(e,t);return o>-1?this.classBreakInfos[o].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach((s=>{s.symbol&&e.push(s.symbol);})),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,s)=>e+s.getAttributeHash()),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),s=JSON.stringify(this.defaultSymbol),t=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return `${e}.${s}.${this.classBreakInfos.reduce(((e,s)=>e+s.getMeshHash()),"")}.${t}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new F$a({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:l$2w(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:l$2w(this.visualVariables),legendOptions:l$2w(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,s){const t=[this.collectVVRequiredFields(e,s),this.collectSymbolFields(e,s)];await Promise.all(t);}async collectSymbolFields(e,s){const t=[...this.getSymbols().map((t=>t.collectRequiredFields(e,s))),b$O(e,s,this.valueExpression)];F$h(e,s,this.field),F$h(e,s,this.normalizationField),await Promise.all(t);}_getBreakIndexForExpression(e,s){const{viewingMode:t,scale:o,spatialReference:r,arcade:i}=c$3o(s,{});let n=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const u=e$23(i).arcadeUtils;if(!n){const e=u.createSyntaxTree(this.valueExpression);n=u.createFunction(e),this._compiledValueExpression.compiledFunction=n;}this._compiledValueExpression.valueExpression=this.valueExpression;const c=u.executeFunction(n,u.createExecContext(e,u.getViewInfo({viewingMode:t,scale:o,spatialReference:r})));return this._getBreakIndexfromInfos(c)}_getBreakIndexForField(e){const s=this.field,t=e.attributes,o=this.normalizationType;let r=parseFloat(t[s]);if(o){const e=this.normalizationTotal,s=parseFloat(t[this.normalizationField]);if(o===j$p)r=Math.log(r)*Math.LOG10E;else if(o!==w$w||isNaN(e)){if(o===z$c&&!isNaN(s)){if(isNaN(r)||isNaN(s))return -1;r/=s;}}else r=r/e*100;}return this._getBreakIndexfromInfos(r)}_getBreakIndexfromInfos(e){const s=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let t=0;t<this.classBreakInfos.length;t++){const o=[this.classBreakInfos[t].minValue,this.classBreakInfos[t].maxValue];if(o[0]<=e&&(s?e<=o[1]:e<o[1]))return t}return -1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,s=e.length;for(let t=1;t<s;t++)if(e[t-1].maxValue!==e[t].minValue)return !1;return !0}};e$25([d$1T(y$S)],C$j.prototype,"backgroundFillSymbol",void 0),e$25([d$1T({type:[a$1F]})],C$j.prototype,"classBreakInfos",void 0),e$25([o$1v("classBreakInfos")],C$j.prototype,"readClassBreakInfos",null),e$25([r$1m("classBreakInfos")],C$j.prototype,"writeClassBreakInfos",null),e$25([d$1T({type:String,json:{write:!0}})],C$j.prototype,"defaultLabel",void 0),e$25([d$1T(l$1m)],C$j.prototype,"defaultSymbol",void 0),e$25([d$1T({type:String,json:{write:!0}})],C$j.prototype,"field",void 0),e$25([c$35("field")],C$j.prototype,"castField",null),e$25([d$1T({type:Boolean})],C$j.prototype,"isMaxInclusive",void 0),e$25([d$1T({type:c$1N,json:{write:!0}})],C$j.prototype,"legendOptions",void 0),e$25([d$1T({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],C$j.prototype,"minValue",null),e$25([d$1T({type:String,json:{write:!0}})],C$j.prototype,"normalizationField",void 0),e$25([d$1T({type:Number,cast:e=>a$31(e),json:{write:!0}})],C$j.prototype,"normalizationTotal",void 0),e$25([d$1T({type:T$e.apiValues,value:null,json:{type:T$e.jsonValues,read:T$e.read,write:T$e.write}})],C$j.prototype,"normalizationType",null),e$25([r$12({classBreaks:"class-breaks"})],C$j.prototype,"type",void 0),e$25([d$1T({type:String,json:{write:!0}})],C$j.prototype,"valueExpression",void 0),e$25([d$1T({type:String,json:{write:!0}})],C$j.prototype,"valueExpressionTitle",void 0),C$j=F$a=e$25([i$2z("esri.renderers.ClassBreaksRenderer")],C$j);const N$d=C$j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$1k=-3;class i$1o{constructor(t,e,s){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",s&&(this._storage.registerRemoveFunc(this._namespace,s),this._removeFunc=!0);}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null;}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0;}put(t,e,s,i=0){this._storage.put(this._namespace+t,e,s,i);}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,s){this._storage.updateSize(this._namespace+t,e,s);}clear(){this._storage.clear(this._namespace);}clearAll(){this._storage.clearAll();}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats();}}class h$R{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new n$2J,this._users=new n$2J;}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null;}register(t){this._users.push(t);}deregister(t){this._users.removeUnordered(t);}registerRemoveFunc(t,e){this._removeFuncs.push([t,e]);}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t));}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit();}put(t,e,i,h){const r=this._db.get(t);if(r&&(this._size-=r.size,this._db.delete(t),r.entry!==e&&this._notifyRemove(t,r.entry,0)),i>this._maxSize)return void this._notifyRemove(t,e,0);if(void 0===e)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return void console.warn("Refusing to cache entry with invalid size "+i);const _=1+Math.max(h,s$1k)-s$1k;this._db.set(t,{entry:e,size:i,lifetime:_,lives:_}),this._size+=i,this._checkSizeLimit();}updateSize(e,s,i){const h=this._db.get(e);if(h&&h.entry===s){for(this._size-=h.size;i>this._maxSize;){const h=this._notifyRemove(e,s,1);if(!(r$1K(h)&&h>0))return void this._db.delete(e);i=h;}h.size=i,this._size+=i,this._checkSizeLimit();}}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss;}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss;}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},i=new Array;this._db.forEach(((t,s)=>{const h=t.lifetime;i[h]=(i[h]||0)+t.size,this._users.forAll((i=>{const h=i.namespace;if(s.startsWith(h)){const s=e[h]||0;e[h]=s+t.size;}}));}));const h={};this._users.forAll((t=>{const s=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){const i=e[s]||0;e[s]=i,h[s]=Math.round(100*t.hitRate)+"%";}else h[s]="0%";}));const r=Object.keys(e);r.sort(((t,s)=>e[s]-e[t])),r.forEach((s=>t[s]=Math.round(e[s]/2**20)+"MB / "+h[s]));for(let _=i.length-1;_>=0;--_){const e=i[_];e&&(t["Priority "+(_+s$1k-1)]=Math.round(e/this.size*100)+"%");}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()));}clear(t){this._db.forEach(((e,s)=>{s.startsWith(t)&&(this._size-=e.size,this._db.delete(s),this._notifyRemove(s,e.entry,0));}));}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,0))),this._size=0,this._db.clear();}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,s){let i;return this._removeFuncs.some((h=>{if(t.startsWith(h[0])){const t=h[1](e,s);return "number"==typeof t&&(i=t),!0}return !1})),i}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,s]of this._db){if(this._db.delete(e),s.lives<=1){this._size-=s.size;const i=this._notifyRemove(e,s.entry,1);r$1K(i)&&i>0&&(this._size+=i,s.lives=s.lifetime,s.size=i,this._db.set(e,s));}else --s.lives,this._db.set(e,s);if(this._size<=.9*this.maxSize)return}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$Y{constructor(e,s){this._storage=new h$R,this._storage.maxSize=e,s&&this._storage.registerRemoveFunc("",s);}put(t,e,s){this._storage.put(t,e,s,1);}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll();}destroy(){this._storage.destroy();}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var _$i;const j$o=s$2n.getLogger("esri.renderers.DictionaryRenderer"),w$v={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let S$n=_$i=class extends(v$t(p$1R)){constructor(e){super(e),this._ongoingRequests=new Map,this._symbolCache=new e$Y(100),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary";}writeData(e,s){e&&(s.scalingExpressionInfo={expression:e,returnType:"number"});}writeVisualVariables(e,s,t,r){null!=r&&r.origin||super.writeVisualVariables(e,s,t,r);}clone(){return new _$i({config:l$2w(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:l$2w(this.fieldMap),url:l$2w(this.url),visualVariables:l$2w(this.visualVariables)})}async getSymbolAsync(e,t){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(t));try{r=await this._dictionaryPromise;}catch(d){if(d$1Z(d))return this._dictionaryPromise=null,null}const i={};if(this.fieldMap)for(const s of this._symbolFields){const t=this.fieldMap[s];if(t&&null!==e.attributes[t]&&void 0!==e.attributes[t]){const r=""+e.attributes[t];i[s]=r;}else i[s]="";}const o=r(i,t);if(!o||"string"!=typeof o)return null;const n=c$3m(o).toString(),p=this._symbolCache.get(n);if(p)return p.catch((()=>{this._symbolCache.pop(n);})),p;const m=o.split(";"),u=[],f=[];for(const a of m)if(a&&0!==a.length)if(-1===a.indexOf("po:"))if(-1!==a.indexOf("|")){for(const e of a.split("|"))if(this._itemNames.has(e)){u.push(e);break}}else this._itemNames.has(a)&&u.push(a);else {const e=a.substr(3).split("|");if(3===e.length){const t=e[0],r=e[1];let i=e[2];if("DashTemplate"===r)i=i.split(" ").map((e=>Number(e)));else if("Color"===r){const e=new h$18(i).toRgba();i=[e[0],e[1],e[2],255*e[3]];}else i=Number(i);f.push({primitiveName:t,propertyName:r,value:i});}}const h=!r$1K(e.geometry)||!e.geometry.hasZ&&"point"===e.geometry.type,y=this._cimPartsToCIMSymbol(u,f,h,t);return this._symbolCache.put(n,y,1),y}async collectRequiredFields(e,s){await this.collectVVRequiredFields(e,s),this.scaleExpression&&await b$O(e,s,this.scaleExpression);for(const t in this.fieldMap){const r=this.fieldMap[t];s.has(r)&&e.add(r);}}get arcadeRequired(){return !0}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void j$o.error("no valid URL!");const s=r$1K(e)?e.abortOptions:null,i=E$v(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},...s}),[{data:o}]=await Promise.all([i,a$2t()]);if(!o)throw this._dictionaryPromise=null,new s$2l("esri.renderers.DictionaryRenderer","Bad dictionary data!");const n=o.expression,l=o.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+o.cimRefTemplateUrl,this._itemNames=new Set(o.itemsNames),this._symbolFields=l.symbol;const c={};if(this.config){const e=this.config;for(const s in e)c[s]=e[s];}if(l.configuration)for(const t of l.configuration)c.hasOwnProperty(t.name)||(c[t.name]=t.value);const p=[];if(r$1K(e)&&e.fields&&this.fieldMap)for(const t of this._symbolFields){const s=this.fieldMap[t],r=e.fields.filter((e=>e.name===s));r.length>0&&p.push({...r[0],name:t});}return this._dictionaryPromise=n$2e(n,r$1K(e)?e.spatialReference:null,p,c).then((e=>{const s={scale:0};return (t,r)=>{const i=e.repurposeFeature({geometry:null,attributes:t});return s.scale=r$1K(r)?r.scale:void 0,e.evaluate({$feature:i,$view:s})}})).catch((e=>(j$o.error("Creating dictinoary expression failed:",e),null))),this._dictionaryPromise}getSymbol(){return null}getSymbols(){return []}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,s)=>e+s.getAttributeHash()),"")}getMeshHash(){return `${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._symbolFields}async _getSymbolPart(e,s){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then((e=>e.data));const r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,e),i=E$v(r,{responseType:"json",query:{f:"json"},...s});this._ongoingRequests.set(e,i);try{return (await i).data}catch(o){return this._ongoingRequests.delete(e),Promise.reject(o)}}_combineSymbolParts(e,s,t){if(!e||0===e.length)return null;const r={...e[0]};if(e.length>1){r.symbolLayers=[];for(const s of e){const e=s;r.symbolLayers.unshift(...e.symbolLayers);}}return t&&(r.callout=w$v),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:s}}async _cimPartsToCIMSymbol(e,s,t,r){const i=new Array(e.length);for(let n=0;n<e.length;n++)i[n]=this._getSymbolPart(e[n],r);const o=await Promise.all(i);return new d$1l({data:this._combineSymbolParts(o,s,t)})}};e$25([d$1T({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],S$n.prototype,"config",void 0),e$25([d$1T({type:Object,json:{write:!0}})],S$n.prototype,"fieldMap",void 0),e$25([d$1T({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],S$n.prototype,"scaleExpression",void 0),e$25([r$1m("scaleExpression")],S$n.prototype,"writeData",null),e$25([d$1T({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return {enabled:!!e&&!!this.scaleExpression}}}}})],S$n.prototype,"scaleExpressionTitle",void 0),e$25([d$1T({type:String,json:{write:!0}})],S$n.prototype,"url",void 0),e$25([r$1m("visualVariables")],S$n.prototype,"writeVisualVariables",null),S$n=_$i=e$25([i$2z("esri.renderers.DictionaryRenderer")],S$n);const x$l=S$n;

const DictionaryRenderer = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': x$l
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$1I;const u$16=s$2n.getLogger("esri.renderers.support.AttributeColorInfo");let c$1J=n$1I=class extends a$2N{constructor(r){super(r),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null;}castField(r){return null==r?r:"function"==typeof r?(u$16.error(".field: field must be a string value"),null):u$2b(r)}getAttributeHash(){return `${this.field}-${this.valueExpression}`}clone(){return new n$1I({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};e$25([d$1T({type:h$18,json:{type:[Number],write:!0}})],c$1J.prototype,"color",void 0),e$25([d$1T({type:String,json:{write:!0}})],c$1J.prototype,"field",void 0),e$25([c$35("field")],c$1J.prototype,"castField",null),e$25([d$1T({type:String,json:{write:!0}})],c$1J.prototype,"label",void 0),e$25([d$1T({type:String,json:{write:!0}})],c$1J.prototype,"valueExpression",void 0),e$25([d$1T({type:String,json:{write:!0}})],c$1J.prototype,"valueExpressionTitle",void 0),c$1J=n$1I=e$25([i$2z("esri.renderers.support.AttributeColorInfo")],c$1J);const a$1E=c$1J;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$X;let p$1I=e$X=class extends a$2N{constructor(){super(...arguments),this.unit=null;}clone(){return new e$X({unit:this.unit})}};e$25([d$1T({type:String,json:{write:!0}})],p$1I.prototype,"unit",void 0),p$1I=e$X=e$25([i$2z("esri.renderers.support.DotDensityLegendOptions")],p$1I);const c$1I=p$1I;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var y$R;let m$1c=y$R=class extends(v$t(p$1R)){constructor(e){super(e),this.attributes=null,this.backgroundColor=new h$18([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new m$1z,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density";}calculateDotValue(e){if(null==this.referenceScale)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new S$r({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return [this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new y$R({attributes:l$2w(this.attributes),backgroundColor:l$2w(this.backgroundColor),dotBlendingEnabled:l$2w(this.dotBlendingEnabled),dotShape:l$2w(this.dotShape),dotSize:l$2w(this.dotSize),dotValue:l$2w(this.dotValue),legendOptions:l$2w(this.legendOptions),outline:l$2w(this.outline),referenceScale:l$2w(this.referenceScale),visualVariables:l$2w(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return `${this.attributes.map((e=>e.field||e.valueExpression||""))}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const o of this.attributes)o.valueExpression&&await b$O(e,t,o.valueExpression),o.field&&e.add(o.field);}};e$25([d$1T({type:[a$1E],json:{write:!0}})],m$1c.prototype,"attributes",void 0),e$25([d$1T({type:h$18,json:{write:!0}})],m$1c.prototype,"backgroundColor",void 0),e$25([d$1T({type:Boolean}),o$1K("dotBlendingEnabled")],m$1c.prototype,"blendDots",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],m$1c.prototype,"dotBlendingEnabled",void 0),e$25([d$1T({type:String,json:{write:!1}})],m$1c.prototype,"dotShape",void 0),e$25([d$1T({type:Number,json:{write:!1}})],m$1c.prototype,"dotSize",void 0),e$25([d$1T({type:c$1I,json:{write:!0}})],m$1c.prototype,"legendOptions",void 0),e$25([d$1T({type:m$1z,json:{default:null,write:!0}})],m$1c.prototype,"outline",void 0),e$25([d$1T({type:Number,json:{write:!0}})],m$1c.prototype,"dotValue",void 0),e$25([d$1T({type:Number}),o$1K("dotValue")],m$1c.prototype,"referenceDotValue",void 0),e$25([d$1T({type:Number,json:{write:!0}})],m$1c.prototype,"referenceScale",void 0),e$25([d$1T({type:Number,json:{write:!0}})],m$1c.prototype,"seed",void 0),e$25([r$12({dotDensity:"dot-density"})],m$1c.prototype,"type",void 0),m$1c=y$R=e$25([i$2z("esri.renderers.DotDensityRenderer")],m$1c);const b$x=m$1c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$1H;let c$1H=p$1H=class extends a$2N{constructor(o){super(o),this.color=null,this.ratio=null;}clone(){return new p$1H({color:this.color,ratio:this.ratio})}};e$25([d$1T({type:h$18,json:{write:!0}})],c$1H.prototype,"color",void 0),e$25([d$1T({type:Number,json:{write:!0}})],c$1H.prototype,"ratio",void 0),c$1H=p$1H=e$25([i$2z("esri.renderers.support.HeatmapColorStop")],c$1H);const i$1n=c$1H;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$1D;let m$1b=a$1D=class extends p$1R{constructor(t){super(t),this.blurRadius=10,this.colorStops=[new i$1n({ratio:0,color:new h$18("rgba(255, 140, 0, 0)")}),new i$1n({ratio:.75,color:new h$18("rgba(255, 140, 0, 1)")}),new i$1n({ratio:.9,color:new h$18("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.maxPixelIntensity=100,this.minPixelIntensity=0,this.type="heatmap";}async collectRequiredFields(t,e){const r=this.field;r&&"string"==typeof r&&F$h(t,e,r);}getAttributeHash(){return null}getMeshHash(){return `${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new a$1D({blurRadius:this.blurRadius,colorStops:l$2w(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}};e$25([d$1T({type:Number,json:{write:!0}})],m$1b.prototype,"blurRadius",void 0),e$25([d$1T({type:[i$1n],json:{write:!0}})],m$1b.prototype,"colorStops",void 0),e$25([d$1T({type:String,json:{write:!0}})],m$1b.prototype,"field",void 0),e$25([d$1T({type:Number,json:{write:{overridePolicy:(t,e,r)=>({enabled:null==r})}}})],m$1b.prototype,"fieldOffset",void 0),e$25([d$1T({type:Number,json:{write:!0}})],m$1b.prototype,"maxPixelIntensity",void 0),e$25([d$1T({type:Number,json:{write:!0}})],m$1b.prototype,"minPixelIntensity",void 0),e$25([r$12({heatmap:"heatmap"})],m$1b.prototype,"type",void 0),m$1b=a$1D=e$25([i$2z("esri.renderers.HeatmapRenderer")],m$1b);const c$1G=m$1b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$1F;let n$1H=c$1F=class extends(v$t(p$1R)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple";}async collectRequiredFields(e,s){await Promise.all([this.collectSymbolFields(e,s),this.collectVVRequiredFields(e,s)]);}async collectSymbolFields(e,s){await Promise.all(this.getSymbols().map((r=>r.collectRequiredFields(e,s))));}getSymbol(e,s){return this.symbol}async getSymbolAsync(e,s){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,s)=>e+s.getAttributeHash()),"")}getMeshHash(){return this.getSymbols().reduce(((e,s)=>e+JSON.stringify(s)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new c$1F({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:l$2w(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};e$25([d$1T({type:String,json:{write:!0}})],n$1H.prototype,"description",void 0),e$25([d$1T({type:String,json:{write:!0}})],n$1H.prototype,"label",void 0),e$25([d$1T(l$1m)],n$1H.prototype,"symbol",void 0),e$25([r$12({simple:"simple"})],n$1H.prototype,"type",void 0),n$1H=c$1F=e$25([i$2z("esri.renderers.SimpleRenderer")],n$1H);const p$1G=n$1H;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const f$P=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function i$1m(e){return e instanceof p$3a}function c$1E(t){return t instanceof S$I?Object.keys(t.items):i$1m(t)?e$1W(t).keys():t?Object.keys(t):[]}function u$15(t,n){return t instanceof S$I?t.items[n]:t[n]}function l$1k(t,e){return !(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function s$1j(t){return t?t.declaredClass:null}function p$1F(t,e){const n=t.diff;if(n&&"function"==typeof n)return n(t,e);const r=c$1E(t),a=c$1E(e);if(0===r.length&&0===a.length)return;if(!r.length||!a.length||l$1k(t,e))return {type:"complete",oldValue:t,newValue:e};const y=a.filter((t=>-1===r.indexOf(t))),m=r.filter((t=>-1===a.indexOf(t))),d=r.filter((n=>a.indexOf(n)>-1&&u$15(t,n)!==u$15(e,n))).concat(y,m).sort(),b=s$1j(t);if(b&&f$P.indexOf(b)>-1&&d.length)return {type:"complete",oldValue:t,newValue:e};let h;const j=i$1m(t)&&i$1m(e);for(const f of d){const r=u$15(t,f),i=u$15(e,f);let c;(j||"function"!=typeof r&&"function"!=typeof i)&&(r!==i&&(null==r&&null==i||(c=n&&n[f]&&"function"==typeof n[f]?n[f](r,i):"object"==typeof r&&"object"==typeof i&&s$1j(r)===s$1j(i)?p$1F(r,i):{type:"complete",oldValue:r,newValue:i},r$1K(c)&&(r$1K(h)?h.diff[f]=c:h={type:"partial",diff:{[f]:c}}))));}return h}function a$1C(t,e){if(t$1T(t))return !1;const o=e.split(".");let r=t;for(const n of o){if("complete"===r.type)return !0;if("partial"!==r.type)return !1;{const t=r.diff[n];if(!t)return !1;r=t;}}return !0}function y$Q(t,e){for(const n of e)if(a$1C(t,n))return !0;return !1}function m$1a(t,e){if(!("function"==typeof t||"function"==typeof e||t$1T(t)&&t$1T(e)))return t$1T(t)||t$1T(e)||"object"==typeof t&&"object"==typeof e&&s$1j(t)!==s$1j(e)?{type:"complete",oldValue:t,newValue:e}:p$1F(t,e)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1l;let l$1j=i$1l=class extends a$2N{constructor(o){super(o),this.description=null,this.label=null,this.symbol=null,this.value=null;}clone(){return new i$1l({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const o=JSON.stringify(this.symbol&&this.symbol.toJSON());return `${this.value}.${o}`}};e$25([d$1T({type:String,json:{write:!0}})],l$1j.prototype,"description",void 0),e$25([d$1T({type:String,json:{write:!0}})],l$1j.prototype,"label",void 0),e$25([d$1T(l$1m)],l$1j.prototype,"symbol",void 0),e$25([d$1T({type:[String,Number],json:{type:String,write:{writer:(o,r)=>{r.value=null==o?void 0:o.toString();}}}})],l$1j.prototype,"value",void 0),l$1j=i$1l=e$25([i$2z("esri.renderers.support.UniqueValueInfo")],l$1j);const p$1E=l$1j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$1B=()=>!!s$2r("enable-feature:force-wosr");

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const f$O={};async function u$14(e,t){try{return {data:(await b$w(e,t)).data,baseUrl:ht$3(e),styleUrl:e}}catch(o){return b$17(o),null}}function i$1k(e,t,r){const o=t&&t.portal||B$i.getDefault();let s;const l=`${o.url} - ${o.user&&o.user.username} - ${e}`;return f$O[l]||(f$O[l]=y$P(e,o,r).then((e=>(s=e,e.fetchData()))).then((t=>({data:t,baseUrl:s.itemUrl,styleName:e})))),f$O[l]}function y$P(e,r,o){return r.load(o).then((()=>{const t=new d$1C({disableExtraQuery:!0,query:`owner:${w$u} AND type:${h$Q} AND typekeywords:"${e}"`});return r.queryItems(t,o)})).then((({results:r})=>{let s=null;const n=e.toLowerCase();if(r&&Array.isArray(r))for(const e of r){if(e.typeKeywords.some((e=>e.toLowerCase()===n))&&e.type===h$Q&&e.owner===w$u){s=e;break}}if(!s)throw new s$2l("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(o)}))}function m$19(e,r,o){return e.styleUrl?u$14(e.styleUrl,o):e.styleName?i$1k(e.styleName,r,o):Promise.reject(new s$2l("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function c$1D(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function p$1D(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!a$1B())for(const r of e.formatInfos)if("gltf"===r.type)return r.href;return e.webRef}function b$w(t,r){const s={responseType:"json",query:{f:"json"},...r};return E$v(z$s(t),s)}const w$u="esri_en",h$Q="Style",j$n="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var E$f;const M$i=s$2n.getLogger("esri.renderers.UniqueValueRenderer"),N$c=b$14(p$1E);let R$g=E$f=class extends(v$t(p$1R)){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,t){if(!e&&!t)return;if(!e||!t)return {type:"complete",oldValue:e,newValue:t};let i=!1;const r={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<t.length;s++){const l=e.find((e=>e.value===t[s].value));l?m$1a(l,t[s])?(r.changed.push({type:"complete",oldValue:l,newValue:t[s]}),i=!0):r.unchanged.push({oldValue:l,newValue:t[s]}):(r.added.push(t[s]),i=!0);}for(let s=0;s<e.length;s++){t.find((t=>t.value===e[s].value))||(r.removed.push(e[s]),i=!0);}return i?r:void 0}},this._set("uniqueValueInfos",[]);}get _cache(){return {compiledFunc:null}}castField(e){return null==e||"function"==typeof e?e:u$2b(e)}writeField(e,t,r,s){"string"==typeof e?t[r]=e:s&&s.messages?s.messages.push(new s$2l("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):M$i.error(".field: cannot write field to JSON since it's not a string value");}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e);}readPortal(e,t,i){return i.portal||B$i.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const e=c$28(t.styleUrl,i);return Object.freeze({styleUrl:e})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=i$1I(e.styleUrl,r));}set uniqueValueInfos(e){this.styleOrigin?M$i.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap());}addUniqueValueInfo(e,i){if(this.styleOrigin)return void M$i.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r="object"==typeof e?N$c(e):new p$1E({value:e,symbol:g$O(i)}),this.uniqueValueInfos.push(r),this._valueInfoMap[r.value]=r;}removeUniqueValueInfo(e){if(this.styleOrigin)M$i.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++){if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(t$1T(t)||t$1T(t.arcade))&&(i={...i,arcade:await a$2t()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(t$1T(t)||t$1T(t.arcade)))return void M$i.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(t$1T(i)||t$1T(i.arcade))){const e=await a$2t(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),i={...i,arcade:e};}const r=this._getUniqueValueInfo(e,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return `${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce(((e,t)=>e+t.getMeshHash()),"")}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new E$f({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:l$2w(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:l$2w(this.visualVariables),legendOptions:l$2w(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:l$2w(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=l$2w(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(l$2w(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i);}async collectSymbolFields(e,t){const i=[...this.getSymbols().map((i=>i.collectRequiredFields(e,t))),b$O(e,t,this.valueExpression)];F$h(e,t,this.field),F$h(e,t,this.field2),F$h(e,t,this.field3),await Promise.all(i);}populateFromStyle(){return m$19(this.styleOrigin,{portal:this.portal}).then((e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach((i=>{const r=new h$Z({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const s=new p$1E({value:i.name,symbol:r});t.push(s),this._valueInfoMap[i.name]=s;})),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this}))}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach((e=>this._valueInfoMap[e.value+""]=e));}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:l}=c$3o(t,{});let a=this._cache.compiledFunc;const u=e$23(l).arcadeUtils;if(!a){const e=u.createSyntaxTree(this.valueExpression);a=u.createFunction(e),this._cache.compiledFunc=a;}const p=u.executeFunction(a,u.createExecContext(e,u.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._valueInfoMap[p+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if("function"!=typeof t&&this.field2){const e=this.field2,s=this.field3,l=[];t&&l.push(i[t]),e&&l.push(i[e]),s&&l.push(i[s]),r=l.join(this.fieldDelimiter||"");}else "function"==typeof t?r=t(e):t&&(r=i[t]);return this._valueInfoMap[r+""]}static fromPortalStyle(e,t){const i=new E$f(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||B$i.getDefault());const r=i.populateFromStyle();return r.catch((t=>{M$i.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",t);})),r}static fromStyleUrl(e,t){const i=new E$f(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch((t=>{M$i.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",t);})),r}};e$25([d$1T({readOnly:!0})],R$g.prototype,"_cache",null),e$25([r$12({uniqueValue:"unique-value"})],R$g.prototype,"type",void 0),e$25([d$1T(y$S)],R$g.prototype,"backgroundFillSymbol",void 0),e$25([d$1T({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],R$g.prototype,"field",void 0),e$25([c$35("field")],R$g.prototype,"castField",null),e$25([r$1m("field")],R$g.prototype,"writeField",null),e$25([d$1T({type:String,json:{write:!0}})],R$g.prototype,"field2",void 0),e$25([d$1T({type:String,json:{write:!0}})],R$g.prototype,"field3",void 0),e$25([d$1T({type:String,json:{write:!0}})],R$g.prototype,"valueExpression",void 0),e$25([d$1T({type:String,json:{write:!0}})],R$g.prototype,"valueExpressionTitle",void 0),e$25([d$1T({type:c$1N,json:{write:!0}})],R$g.prototype,"legendOptions",void 0),e$25([d$1T({type:String,json:{write:!0}})],R$g.prototype,"defaultLabel",void 0),e$25([d$1T(n$2T({...l$1m},{json:{write:{overridePolicy(){return {enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return {enabled:!this._isDefaultSymbolDerived}}}}}}}))],R$g.prototype,"defaultSymbol",null),e$25([d$1T({type:String,json:{write:!0}})],R$g.prototype,"fieldDelimiter",void 0),e$25([d$1T({type:B$i,readOnly:!0})],R$g.prototype,"portal",void 0),e$25([o$1v("portal",["styleName"])],R$g.prototype,"readPortal",null),e$25([d$1T({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],R$g.prototype,"styleOrigin",void 0),e$25([o$1v("styleOrigin",["styleName","styleUrl"])],R$g.prototype,"readStyleOrigin",null),e$25([r$1m("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],R$g.prototype,"writeStyleOrigin",null),e$25([d$1T({type:[p$1E],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],R$g.prototype,"uniqueValueInfos",null),R$g=E$f=e$25([i$2z("esri.renderers.UniqueValueRenderer")],R$g);const P$e=R$g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$18={key:"type",base:p$1R,typeMap:{heatmap:c$1G,simple:p$1G,"unique-value":P$e,"class-breaks":N$d,"dot-density":b$x,dictionary:x$l},errorContext:"renderer"},n$1G={key:"type",base:p$1R,typeMap:{simple:p$1G,"unique-value":P$e,"class-breaks":N$d},errorContext:"renderer"};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$S(e,r){return o$V(e,null,r)}const s$1i=u$2a({types:m$18});function o$V(r,n,t){return r?r&&(r.styleName||r.styleUrl)&&"uniqueValue"!==r.type?(t&&t.messages&&t.messages.push(new t$1A("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+r.type+"'",{definition:r,context:t})),null):s$1i(r,n,t):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class r$T{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(r$1D),this._values=new Map;}clone(s){const i=new r$T,o=this._originStores[0];o&&o.forEach(((s,e)=>{i.set(e,l$2w(s),0);}));for(let r=2;r<r$1D;r++){const e=this._originStores[r];e&&e.forEach(((e,o)=>{s&&s.has(o)||i.set(o,l$2w(e),r);}));}return i}get(t,s){const e=void 0===s?this._values:this._originStores[s];return e?e.get(t):void 0}keys(t){const s=null==t?this._values:this._originStores[t];return s?[...s.keys()]:[]}set(t,e,r=6){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(t,e),!this._values.has(t)||q$s(this._propertyOriginMap.get(t))<=r){const s=this._values.get(t);return this._values.set(t,e),this._propertyOriginMap.set(t,r),s!==e}return !1}delete(t,s=6){const e=this._originStores[s];if(!e)return;const r=e.get(t);if(e.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===s){this._values.delete(t);for(let e=s-1;e>=0;e--){const s=this._originStores[e];if(s&&s.has(t)){this._values.set(t,s.get(t)),this._propertyOriginMap.set(t,e);break}}}return r}has(t,s){const e=void 0===s?this._values:this._originStores[s];return !!e&&e.has(t)}revert(t,s){for(;s>0&&!this.has(t,s);)--s;const e=this._originStores[s],r=e&&e.get(t),i=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,s),i!==r}originOf(t){return this._propertyOriginMap.get(t)||0}forEach(t){this._values.forEach(t);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$1A=t=>{let a=class extends t{constructor(...r){super(...r);const t=q$s(e$1W(this)),o=t.metadatas,i=t.store,n=new r$T;t.store=n,i.keys().forEach((r=>{n.set(r,i.get(r),0);})),Object.keys(o).forEach((r=>{t.internalGet(r)&&n.set(r,t.internalGet(r),0);}));}read(r,t){u$1Y(this,r,t);}getAtOrigin(r,t){const s=u$13(this),e=t$1J(t);if("string"==typeof r)return s.get(r,e);const o={};return r.forEach((r=>{o[r]=s.get(r,e);})),o}originOf(r){return n$2L(this.originIdOf(r))}originIdOf(r){return u$13(this).originOf(r)}revert(r,t){const s=u$13(this),e=t$1J(t),o=e$1W(this);let n;n="string"==typeof r?"*"===r?s.keys(e):[r]:r,n.forEach((r=>{o.invalidate(r),s.revert(r,e),o.commit(r);}));}};return a=e$25([i$2z("esri.core.ReadOnlyMultiOriginJSONSupport")],a),a};function u$13(r){return e$1W(r).store}let f$N=class extends(a$1A(p$3a)){};f$N=e$25([i$2z("esri.core.ReadOnlyMultiOriginJSONSupport")],f$N);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$1C=t=>{let s=class extends t{constructor(...r){super(...r);}clear(r,t="user"){return u$12(this).delete(r,t$1J(t))}write(r={},t){return p$32(this,r=r||{},t),r}setAtOrigin(r,t,s){e$1W(this).setAtOrigin(r,t,t$1J(s));}removeOrigin(r){const t=u$12(this),s=t$1J(r),o=t.keys(s);for(const e of o)t.originOf(e)===s&&t.set(e,t.get(e,s),6);}updateOrigin(r,t){const s=u$12(this),i=t$1J(t),c=this.get(r);for(let e=i+1;e<r$1D;++e)s.delete(r,e);s.set(r,c,i);}toJSON(r){return this.write({},r)}};return s=e$25([i$2z("esri.core.WriteableMultiOriginJSONSupport")],s),s.prototype.toJSON.isDefaultToJSON=!0,s};function u$12(r){return e$1W(r).store}const l$1i=t=>{let e=class extends(p$1C(a$1A(t))){constructor(...r){super(...r);}};return e=e$25([i$2z("esri.core.MultiOriginJSONSupport")],e),e};let O$d=class extends(l$1i(p$3a)){};O$d=e$25([i$2z("esri.core.MultiOriginJSONSupport")],O$d);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function e$W(e,r){const{WhereClause:t}=await import('./WhereClause.js');return t.create(e,r)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$1h;let p$1B=s$1h=class extends a$2N{constructor(r){super(r),this.expression=null,this.name=null,this.returnType="boolean",this.title=null;}clone(){return new s$1h({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};e$25([d$1T({type:String,json:{write:!0}})],p$1B.prototype,"expression",void 0),e$25([d$1T({type:String,json:{write:!0}})],p$1B.prototype,"name",void 0),e$25([d$1T({type:["boolean"],json:{write:!0}})],p$1B.prototype,"returnType",void 0),e$25([d$1T({type:String,json:{write:!0}})],p$1B.prototype,"title",void 0),p$1B=s$1h=e$25([i$2z("esri.form.ExpressionInfo")],p$1B);const i$1j=p$1B;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$V=class extends a$2N{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null;}};e$25([d$1T({type:String,json:{write:!0}})],e$V.prototype,"description",void 0),e$25([d$1T({type:String,json:{write:!0}})],e$V.prototype,"label",void 0),e$25([d$1T()],e$V.prototype,"type",void 0),e$25([d$1T({type:String,json:{write:!0}})],e$V.prototype,"visibilityExpression",void 0),e$V=e$25([i$2z("esri.form.elements.Element")],e$V);const i$1i=e$V;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$1g;let p$1A=s$1g=class extends a$2N{constructor(r){super(r),this.type=null;}clone(){return new s$1g({type:this.type})}};e$25([d$1T({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],p$1A.prototype,"type",void 0),p$1A=s$1g=e$25([i$2z("esri.form.elements.inputs.AttachmentInput")],p$1A);const c$1C=p$1A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$1h;let p$1z=i$1h=class extends i$1i{constructor(t){super(t),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment";}clone(){return new i$1h({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};e$25([d$1T({type:String,json:{write:!0}})],p$1z.prototype,"attachmentKeyword",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],p$1z.prototype,"editable",void 0),e$25([d$1T({type:c$1C,json:{read:{source:"inputType"},write:{target:"inputType"}}})],p$1z.prototype,"input",void 0),e$25([d$1T({type:["attachment"],json:{read:!1,write:!0}})],p$1z.prototype,"type",void 0),p$1z=i$1h=e$25([i$2z("esri.form.elements.AttachmentElement")],p$1z);const n$1F=p$1z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$U=class extends a$2N{constructor(r){super(r),this.type=null;}};e$25([d$1T()],e$U.prototype,"type",void 0),e$U=e$25([i$2z("esri.form.elements.inputs.Input")],e$U);const p$1y=e$U;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$T=class extends p$1y{constructor(r){super(r),this.maxLength=null,this.minLength=0;}};e$25([d$1T({type:Number,json:{write:!0}})],e$T.prototype,"maxLength",void 0),e$25([d$1T({type:Number,json:{write:!0}})],e$T.prototype,"minLength",void 0),e$T=e$25([i$2z("esri.form.elements.inputs.TextInput")],e$T);const p$1x=e$T;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var o$U;let c$1B=o$U=class extends p$1x{constructor(r){super(r),this.type="barcode-scanner";}clone(){return new o$U({maxLength:this.maxLength,minLength:this.minLength})}};e$25([d$1T({type:["barcode-scanner"],json:{read:!1,write:!0}})],c$1B.prototype,"type",void 0),c$1B=o$U=e$25([i$2z("esri.form.elements.inputs.BarcodeScannerInput")],c$1B);const p$1w=c$1B;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$1f;let p$1v=s$1f=class extends p$1y{constructor(o){super(o),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box";}clone(){return new s$1f({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};e$25([d$1T({type:String,json:{write:!0}})],p$1v.prototype,"noValueOptionLabel",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],p$1v.prototype,"showNoValueOption",void 0),e$25([d$1T({type:["combo-box"],json:{read:!1,write:!0}})],p$1v.prototype,"type",void 0),p$1v=s$1f=e$25([i$2z("esri.form.elements.inputs.ComboBoxInput")],p$1v);const i$1g=p$1v;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$1e;function n$1E(e){return null!=e?new Date(e):null}function a$1z(e){return e?e.getTime():null}let m$17=s$1e=class extends p$1y{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker";}readMax(e,r){return n$1E(r.max)}writeMax(e,r){r.max=a$1z(e);}readMin(e,r){return n$1E(r.min)}writeMin(e,r){r.min=a$1z(e);}clone(){return new s$1e({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};e$25([d$1T({type:Boolean,json:{write:!0}})],m$17.prototype,"includeTime",void 0),e$25([d$1T({type:Date,json:{type:Number,write:!0}})],m$17.prototype,"max",void 0),e$25([o$1v("max")],m$17.prototype,"readMax",null),e$25([r$1m("max")],m$17.prototype,"writeMax",null),e$25([d$1T({type:Date,json:{type:Number,write:!0}})],m$17.prototype,"min",void 0),e$25([o$1v("min")],m$17.prototype,"readMin",null),e$25([r$1m("min")],m$17.prototype,"writeMin",null),e$25([d$1T({type:["datetime-picker"],json:{read:!1,write:!0}})],m$17.prototype,"type",void 0),m$17=s$1e=e$25([i$2z("esri.form.elements.inputs.DateTimePickerInput")],m$17);const c$1A=m$17;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$1d;let p$1u=s$1d=class extends p$1y{constructor(o){super(o),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons";}clone(){return new s$1d({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};e$25([d$1T({type:String,json:{write:!0}})],p$1u.prototype,"noValueOptionLabel",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],p$1u.prototype,"showNoValueOption",void 0),e$25([d$1T({type:["radio-buttons"],json:{read:!1,write:!0}})],p$1u.prototype,"type",void 0),p$1u=s$1d=e$25([i$2z("esri.form.elements.inputs.RadioButtonsInput")],p$1u);const i$1f=p$1u;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$1c;let p$1t=s$1c=class extends p$1y{constructor(o){super(o),this.offValue=null,this.onValue=null,this.type="switch";}clone(){return new s$1c({offValue:this.offValue,onValue:this.onValue})}};e$25([d$1T({type:[String,Number],json:{write:!0}})],p$1t.prototype,"offValue",void 0),e$25([d$1T({type:[String,Number],json:{write:!0}})],p$1t.prototype,"onValue",void 0),e$25([d$1T({type:["switch"],json:{read:!1,write:!0}})],p$1t.prototype,"type",void 0),p$1t=s$1c=e$25([i$2z("esri.form.elements.inputs.SwitchInput")],p$1t);const i$1e=p$1t;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var o$T;let p$1s=o$T=class extends p$1x{constructor(r){super(r),this.type="text-area";}clone(){return new o$T({maxLength:this.maxLength,minLength:this.minLength})}};e$25([d$1T({type:["text-area"],json:{read:!1,write:!0}})],p$1s.prototype,"type",void 0),p$1s=o$T=e$25([i$2z("esri.form.elements.inputs.TextAreaInput")],p$1s);const a$1y=p$1s;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$1b;let p$1r=s$1b=class extends p$1x{constructor(t){super(t),this.type="text-box";}clone(){return new s$1b({maxLength:this.maxLength,minLength:this.minLength})}};e$25([d$1T({type:["text-box"],json:{read:!1,write:!0}})],p$1r.prototype,"type",void 0),p$1r=s$1b=e$25([i$2z("esri.form.elements.inputs.TextBoxInput")],p$1r);const c$1z=p$1r;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$16={base:p$1y,key:"type",typeMap:{"barcode-scanner":p$1w,"combo-box":i$1g,"datetime-picker":c$1A,"radio-buttons":i$1f,switch:i$1e,"text-area":a$1y,"text-box":c$1z}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$1D={key:"type",base:i$1B,typeMap:{range:i$1A,"coded-value":u$1e,inherited:c$1R}};function t$R(o){if(!o||!o.type)return null;switch(o.type){case"range":return i$1A.fromJSON(o);case"codedValue":return u$1e.fromJSON(o);case"inherited":return c$1R.fromJSON(o)}return null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$1C;let l$1h=n$1C=class extends i$1i{constructor(e){super(e),this.domain=null,this.editable=!0,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field";}clone(){return new n$1C({description:this.description,domain:this.domain,editable:this.editable,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,visibilityExpression:this.visibilityExpression})}};e$25([d$1T({types:n$1D,json:{read:{reader:t$R},write:!0}})],l$1h.prototype,"domain",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],l$1h.prototype,"editable",void 0),e$25([d$1T({type:String,json:{write:!0}})],l$1h.prototype,"fieldName",void 0),e$25([d$1T({type:String,json:{write:!0}})],l$1h.prototype,"hint",void 0),e$25([d$1T({types:m$16,json:{read:{source:"inputType"},write:{target:"inputType"}}})],l$1h.prototype,"input",void 0),e$25([d$1T({type:String,json:{write:!0}})],l$1h.prototype,"requiredExpression",void 0),e$25([d$1T({type:String,json:{read:!1,write:!0}})],l$1h.prototype,"type",void 0),l$1h=n$1C=e$25([i$2z("esri.form.elements.FieldElement")],l$1h);const a$1x=l$1h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$1q;let l$1g=p$1q=class extends i$1i{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship";}clone(){return new p$1q({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:l$2w(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};e$25([d$1T({type:Number,json:{write:!0}})],l$1g.prototype,"displayCount",void 0),e$25([d$1T({type:["list"],json:{write:!0}})],l$1g.prototype,"displayType",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],l$1g.prototype,"editable",void 0),e$25([d$1T({type:[c$2m],json:{write:!0}})],l$1g.prototype,"orderByFields",void 0),e$25([d$1T({type:Number,json:{write:!0}})],l$1g.prototype,"relationshipId",void 0),e$25([d$1T({type:["relationship"],json:{read:!1,write:!0}})],l$1g.prototype,"type",void 0),l$1g=p$1q=e$25([i$2z("esri.form.elements.RelationshipElement")],l$1g);const d$10=l$1g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1B(t){return {typesWithGroup:{base:i$1i,key:"type",typeMap:{attachment:n$1F,field:a$1x,group:t,relationship:d$10}},typesWithoutGroup:{base:i$1i,key:"type",typeMap:{attachment:n$1F,field:a$1x,relationship:d$10}}}}function i$1d(t,e,p=!0){if(!t)return null;const r=p?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter((t=>r[t.type])).map((t=>r[t.type].fromJSON(t)))}function u$11(t,e,p=!0){if(!t)return null;const r=p?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter((t=>r[t.type])).map((t=>t.toJSON()))}function s$1a(e,p,r=!0){return e?e.map((e=>N$t(r?p.typesWithGroup:p.typesWithoutGroup,e))):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$$;let u$10=d$$=class extends i$1i{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group";}castElements(e){return s$1a(e,f$M,!1)}readElements(e,t){return i$1d(t.formElements,f$M,!1)}writeElements(e,t){t.formElements=u$11(e,f$M,!1);}clone(){return new d$$({description:this.description,elements:l$2w(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};e$25([d$1T({json:{write:!0}})],u$10.prototype,"elements",void 0),e$25([c$35("elements")],u$10.prototype,"castElements",null),e$25([o$1v("elements",["formElements"])],u$10.prototype,"readElements",null),e$25([r$1m("elements")],u$10.prototype,"writeElements",null),e$25([d$1T({type:["collapsed","expanded"],json:{write:!0}})],u$10.prototype,"initialState",void 0),e$25([d$1T({type:String,json:{read:!1,write:!0}})],u$10.prototype,"type",void 0),u$10=d$$=e$25([i$2z("esri.form.elements.GroupElement")],u$10);const f$M=n$1B(u$10),y$O=u$10;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$_;const j$m=n$1B(y$O);let y$N=d$_=class extends a$2N{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null;}castElements(e){return s$1a(e,j$m)}readElements(e,t){return i$1d(t.formElements,j$m)}writeElements(e,t){t.formElements=u$11(e,j$m);}clone(){return new d$_({description:this.description,expressionInfos:l$2w(this.expressionInfos),elements:l$2w(this.elements),title:this.title})}};e$25([d$1T({type:String,json:{write:!0}})],y$N.prototype,"description",void 0),e$25([d$1T({json:{write:!0}})],y$N.prototype,"elements",void 0),e$25([c$35("elements")],y$N.prototype,"castElements",null),e$25([o$1v("elements",["formElements"])],y$N.prototype,"readElements",null),e$25([r$1m("elements")],y$N.prototype,"writeElements",null),e$25([d$1T({type:[i$1j],json:{write:!0}})],y$N.prototype,"expressionInfos",void 0),e$25([d$1T({type:String,json:{write:!0}})],y$N.prototype,"title",void 0),y$N=d$_=e$25([i$2z("esri.form.FormTemplate")],y$N);const E$e=y$N;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$Z;const p$1p=s$24()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),u$$=p$1p.jsonValues.slice();v$12(u$$,"orthometric");const g$I=s$24()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let m$15=d$Z=class extends a$2N{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null;}writeHeightModel(e,t,r){return p$1p.write(e,t,r)}readHeightModel(e,t,r){const o=p$1p.read(e);return o||(r&&r.messages&&r.messages.push(f$L(e,{context:r})),null)}readHeightUnit(e,t,r){const o=g$I.read(e);return o||(r&&r.messages&&r.messages.push(y$M(e,{context:r})),null)}readHeightUnitService(e,t,r){const o=A$i(e)||g$I.read(e);return o||(r&&r.messages&&r.messages.push(y$M(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new d$Z({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return !!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=G$c(t);return new d$Z({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new d$Z;return t.read(e,{origin:"web-scene"}),t}};function y$M(e,t){return new t$1A("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function f$L(e,t){return new t$1A("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}e$25([d$1T({type:p$1p.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:u$$,default:"ellipsoidal"}}}})],m$15.prototype,"heightModel",void 0),e$25([r$1m("web-scene","heightModel")],m$15.prototype,"writeHeightModel",null),e$25([o$1v(["web-scene","service"],"heightModel")],m$15.prototype,"readHeightModel",null),e$25([d$1T({type:g$I.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:g$I.jsonValues,write:g$I.write}}}})],m$15.prototype,"heightUnit",void 0),e$25([o$1v("web-scene","heightUnit")],m$15.prototype,"readHeightUnit",null),e$25([o$1v("service","heightUnit")],m$15.prototype,"readHeightUnitService",null),e$25([d$1T({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],m$15.prototype,"vertCRS",void 0),e$25([o$1v("service","vertCRS",["vertCRS","ellipsoid","geoid"])],m$15.prototype,"readVertCRS",null),m$15=d$Z=e$25([i$2z("esri.geometry.HeightModelInfo")],m$15);const v$s=m$15;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let m$14=0;const h$P=s$2n.getLogger("esri.layers.Layer");let f$K=class extends(n$2D.EventedMixin(r$10(m$1$))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new M$A(-180,-90,180,90,k$w.WGS84),this.id=Date.now().toString(16)+"-layer-"+m$14++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=k$w.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0;}static async fromArcGISServerUrl(t){const r="string"==typeof t?{url:t}:t,e=await import('./arcgisLayers.js');try{return await e.fromUrl(r)}catch(o){throw h$P.error("#fromArcGISServerUrl({ url: '"+r.url+"'})","Failed to create layer from arcgis server url",o),o}}static async fromPortalItem(t){const e="portalItem"in t?t:{portalItem:t},o=await import('./portalLayers.js');try{return await o.fromItem(e)}catch(i){const t=e&&e.portalItem,o=t&&t.id||"unset",a=t&&t.portal&&t.portal.url||t$1P.portalUrl;throw h$P.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+o+"')",i),i}}initialize(){this.when().catch((t=>{var r,e;d$1Z(t)||s$2n.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${null!=(r=this.title)?r:"no title"}', id: '${null!=(e=this.id)?e:"no id"}')`,{error:t});}));}destroy(){if(this.parent){const t=this,r=this.parent;"layers"in r&&r.layers.includes(t)?r.layers.remove(t):"tables"in r&&r.tables.includes(t)?r.tables.remove(t):"baseLayers"in r&&r.baseLayers.includes(t)?r.baseLayers.remove(t):"baseLayers"in r&&r.referenceLayers.includes(t)&&r.referenceLayers.remove(t);}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const t=this.url;return t?U$s(t):null}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t){return (await E$v(t,{query:{f:"json"},responseType:"json"})).data}throw new s$2l("layer:no-attribution-data","Layer does not have attribution data")}};e$25([d$1T({type:String})],f$K.prototype,"attributionDataUrl",void 0),e$25([d$1T({type:M$A})],f$K.prototype,"fullExtent",void 0),e$25([d$1T({readOnly:!0})],f$K.prototype,"hasAttributionData",null),e$25([d$1T({type:String})],f$K.prototype,"id",void 0),e$25([d$1T({type:Boolean,nonNullable:!0})],f$K.prototype,"legendEnabled",void 0),e$25([d$1T({type:["show","hide","hide-children"]})],f$K.prototype,"listMode",void 0),e$25([d$1T({type:Number,range:{min:0,max:1},nonNullable:!0})],f$K.prototype,"opacity",void 0),e$25([d$1T()],f$K.prototype,"parent",void 0),e$25([d$1T({readOnly:!0})],f$K.prototype,"parsedUrl",null),e$25([d$1T({type:Boolean})],f$K.prototype,"popupEnabled",void 0),e$25([d$1T({type:Boolean})],f$K.prototype,"attributionVisible",void 0),e$25([d$1T({type:k$w})],f$K.prototype,"spatialReference",void 0),e$25([d$1T({type:String})],f$K.prototype,"title",void 0),e$25([d$1T({type:String,readOnly:!0,json:{read:!1}})],f$K.prototype,"type",void 0),e$25([d$1T()],f$K.prototype,"url",void 0),e$25([d$1T({type:Boolean,nonNullable:!0})],f$K.prototype,"visible",void 0),f$K=e$25([i$2z("esri.layers.Layer")],f$K);const b$v=f$K;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$S;!function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON";}(e$S||(e$S={}));let r$S=0;function n$1A(){return r$S++}function s$19(t){return t&&"object"==typeof t&&("result"in t||"transferList"in t)}function a$1w(t){return t?"string"==typeof t?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function i$1c(t,r,n,a){if(r.type===e$S.OPEN_PORT)return void t.postMessage(r,[r.port]);if(r.type!==e$S.INVOKE&&r.type!==e$S.RESPONSE)return void t.postMessage(r);let i;s$19(n)?(i=o$S(n.transferList),r.data=n.result):(i=o$S(a),r.data=n),i?t.postMessage(r,i):t.postMessage(r);}function f$J(t){if(!t)return null;const e=t.data;return e?"string"==typeof e?JSON.parse(e):e:null}function o$S(e){if(!e||!e.length)return null;if(s$2r("esri-workers-arraybuffer-transfer"))return e;const r=e.filter((t=>!u$_(t)));return r.length?r:null}function u$_(t){return t instanceof ArrayBuffer||t&&t.constructor&&"ArrayBuffer"===t.constructor.name}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$13={statsWorker:()=>import('./statsWorker.js'),geometryEngineWorker:()=>import('./geometryEngineWorker.js'),CSVSourceWorker:()=>import('./CSVSourceWorker.js'),EdgeProcessingWorker:()=>import('./EdgeProcessingWorker.js'),ElevationSamplerWorker:()=>import('./ElevationSamplerWorker.js'),FeatureServiceSnappingSourceWorker:()=>import('./FeatureServiceSnappingSourceWorker.js'),GeoJSONSourceWorker:()=>import('./GeoJSONSourceWorker.js'),LercWorker:()=>import('./LercWorker.js'),MemorySourceWorker:()=>import('./MemorySourceWorker.js'),PBFDecoderWorker:()=>import('./PBFDecoderWorker.js'),Pipeline:()=>import('./Pipeline.js'),PointCloudWorker:()=>import('./PointCloudWorker.js'),RasterWorker:()=>import('./RasterWorker.js'),SceneLayerWorker:()=>import('./SceneLayerWorker.js'),WFSSourceWorker:()=>import('./WFSSourceWorker.js'),WorkerTileHandler:()=>import('./WorkerTileHandler.js')},{CLOSE:g$H,ABORT:b$u,INVOKE:k$h,RESPONSE:v$r,OPEN_PORT:y$L,ON:j$l}=e$S;class f$I{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this);}push(e){e.type===e$S.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)));}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null;}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0;}}class M$h{constructor(e,s){this._port=e,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new f$I((e=>this._onInvokeMessage(e))),this._client=s.client,this._onMessage=this._onMessage.bind(this),this._channel=s.channel,this._schedule=s.schedule,this._port.addEventListener("message",this._onMessage),this._port.start();}static connect(e){const s=new MessageChannel;let t;t="function"==typeof e?new e:"default"in e&&"function"==typeof e.default?new e.default:e;const o=new M$h(s.port1,{channel:s,client:t});return "object"==typeof t&&"remoteClient"in t&&(t.remoteClient=o),M$h.clients.set(o,t),s.port2}static loadWorker(e){const s=m$13[e];return s?s():Promise.resolve(null)}close(){this._post({type:g$H}),this._close();}isBusy(){return this._outJobs.size>0}invoke(e,t,o){const n=o&&o.signal,a=o&&o.transferList;if(!this._port)return Promise.reject(new s$2l("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:t}));const c=n$1A();return new Promise(((s,o)=>{const l=v$10(n,(()=>{var e;const s=this._outJobs.get(c);s&&(this._outJobs.delete(c),null==(e=s.abortHandle)||e.remove(),this._post({type:b$u,jobId:c}),o(m$2e()));})),p={resolve:s,reject:o,abortHandle:l,debugInfo:e};this._outJobs.set(c,p),this._post({type:k$h,jobId:c,methodName:e,abortable:null!=n},t,a);}))}on(e,s){const t=new MessageChannel;function o(e){s(e.data);}return this._port.postMessage({type:e$S.ON,eventType:e,port:t.port2},[t.port2]),t.port1.addEventListener("message",o),t.port1.start(),{remove(){t.port1.postMessage({type:e$S.CLOSE}),t.port1.close(),t.port1.removeEventListener("message",o);}}}openPort(){const e=new MessageChannel;return this._post({type:y$L,port:e.port2}),e.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((e=>{var s;null==(s=e.abortHandle)||s.remove(),e.reject(m$2e(`Worker closing, aborting job calling '${e.debugInfo}'`));})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null;}_onMessage(e){r$1K(this._schedule)?this._schedule((()=>this._processMessage(e))):this._processMessage(e);}_processMessage(e){const s=f$J(e);if(s)switch(s.type){case v$r:this._onResponseMessage(s);break;case k$h:this._invokeQueue.push(s);break;case b$u:this._onAbortMessage(s);break;case g$H:this._onCloseMessage();break;case y$L:this._onOpenPortMessage(s);break;case j$l:this._onOnMessage(s);}}_onAbortMessage(e){const s=this._inJobs,t=e.jobId,o=s.get(t);this._invokeQueue.push(e),o&&(o.controller&&o.controller.abort(),s.delete(t));}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&M$h.clients.get(this)===e&&e.destroy(),M$h.clients.delete(this),e&&e.remoteClient&&(e.remoteClient=null);}_onInvokeMessage(e){const{methodName:s,jobId:t,data:o,abortable:r}=e,i=r?new AbortController:null,l=this._inJobs;let c,p=this._client,u=p[s];try{if(!u&&s&&-1!==s.indexOf(".")){const e=s.split(".");for(let s=0;s<e.length-1;s++)p=p[e[s]],u=p[e[s+1]];}if("function"!=typeof u)throw new TypeError(`${s} is not a function`);c=u.call(p,o,{client:this,signal:i?i.signal:null});}catch(_){return void this._post({type:v$r,jobId:t,error:a$1w(_)})}O$t(c)?(l.set(t,{controller:i,promise:c}),c.then((e=>{l.has(t)&&(l.delete(t),this._post({type:v$r,jobId:t},e));}),(e=>{l.has(t)&&(l.delete(t),d$1Z(e)||this._post({type:v$r,jobId:t,error:a$1w(e||{message:`Error encountered at method ${s}`})}));}))):this._post({type:v$r,jobId:t},c);}_onOpenPortMessage(e){new M$h(e.port,{client:this._client});}_onOnMessage(e){const{port:s}=e,o=this._client.on(e.eventType,(e=>{s.postMessage(e);})),r=r$1I(e.port,"message",(e=>{f$J(e).type===e$S.CLOSE&&(r.remove(),o.remove(),s.close());}));}_onResponseMessage(e){var t;const{jobId:o,error:r,data:i}=e,n=this._outJobs;if(!n.has(o))return;const a=n.get(o);n.delete(o),null==(t=a.abortHandle)||t.remove(),r?a.reject(s$2l.fromJSON(JSON.parse(r))):a.resolve(i);}_post(e,s,t){return i$1c(this._port,e,s,t)}}M$h.kernelInfo={revision:e$20,version:a$36,buildDate:d$1$},M$h.clients=new Map;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$R=s$2n.getLogger("esri.core.workers.Connection");class l$1f{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0;}destroy(){this.close();}get closed(){return !this._clients||!this._clients.length}open(e,t){return new Promise(((r,l)=>{let o=!0;const h=e=>{h$1E(t.signal),o&&(o=!1,e());};this._clients.length=e.length,this._clientPromises.length=e.length;for(let i=0;i<e.length;++i){const o=e[i];O$t(o)?this._clientPromises[i]=o.then((e=>(this._clients[i]=new M$h(e,t),h(r),this._clients[i])),(()=>(h(l),null))):(this._clients[i]=new M$h(o,t),this._clientPromises[i]=Promise.resolve(this._clients[i]),h(r));}}))}broadcast(e,t,s){const i=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const r=this._clientPromises[n];i[n]=r.then((i=>i.invoke(e,t,s)));}return i}close(){for(const e of this._clientPromises)e.then((e=>e.close()));this._clients.length=0,this._clientPromises.length=0;}getAvailableClient(){let e;for(let t=0;t<this._clients.length;++t){const s=this._clients[t];if(s){if(!s.isBusy())return Promise.resolve(s)}else e=e||[],e.push(this._clientPromises[t]);}return e?Promise.race(e):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(e,t,s){let i=null;if(Array.isArray(s)?(r$R.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),i={transferList:s}):i=s,this.closed)return Promise.reject(new Error("Connection closed"));return this.getAvailableClient().then((s=>s.invoke(e,t,i)))}on(t,s){return Promise.all(this._clientPromises).then((()=>r$1F(this._clients.map((e=>e.on(t,s))))))}openPorts(){return new Promise((e=>{const t=new Array(this._clientPromises.length);let s=t.length;for(let i=0;i<this._clientPromises.length;++i){this._clientPromises[i].then((n=>{t[i]=n.openPort(),0==--s&&e(t);}));}}))}get test(){return {numClients:this._clients.length}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$18={};function e$R(a,s){for(const e of a)if(e.name===s.name)return;a.push(s);}function r$Q(a){var r;const n={async:a.async,isDebug:a.isDebug,locale:a.locale,baseUrl:a.baseUrl,has:{...a.has},map:{...a.map},packages:a.packages&&a.packages.concat()||[],paths:{...a.paths}};return a.hasOwnProperty("async")||(n.async=!0),a.hasOwnProperty("isDebug")||(n.isDebug=!1),a.baseUrl||(n.baseUrl=s$18.baseUrl),null==(r=s$18.packages)||r.forEach((a=>{e$R(n.packages,a);})),n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class n$1z{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((t=>{this[t]=(...s)=>e[t](...s);}));}}const o$R=e$24.MutationObserver||e$24.WebKitMutationObserver,a$1v=function(){let t;if(e$24.process&&e$24.process.nextTick)t=t=>{e$24.process.nextTick(t);};else if(e$24.Promise)t=t=>{e$24.Promise.resolve().then(t);};else if(o$R){const e=[],s=document.createElement("div");new o$R((()=>{for(;e.length>0;)e.shift()();})).observe(s,{attributes:!0}),t=t=>{e.push(t),s.setAttribute("queueStatus","1");};}return t}(),i$1b=(()=>{const t=e$24.MessageEvent;try{new t("message",{data:null});}catch{return (e,t={})=>{const{data:s,bubbles:r=!1,cancelable:n=!1}=t,o=document.createEvent("Event");return o.initEvent(e,r,n),o.data=s,o}}return (e,s)=>new t(e,s)})();class d$Y{constructor(){this._dispatcher=new n$1z,this._workerPostMessage({type:e$S.HANDSHAKE});}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e);}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e);}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e);}postMessage(e){a$1v((()=>{this._workerMessageHandler(i$1b("message",{data:e}));}));}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,s){this._dispatcher.addEventListener(e,t,s);}removeEventListener(e,t,s){this._dispatcher.removeEventListener(e,t,s);}_workerPostMessage(e){a$1v((()=>{this.dispatchEvent(i$1b("message",{data:e}));}));}async _workerMessageHandler(e){const n=f$J(e);if(n&&n.type===e$S.OPEN){const{modulePath:e,jobId:r}=n;let o=await M$h.loadWorker(e);o||(o=await import(
/* @vite-ignore */
/* webpackIgnore: true */
e));const a=M$h.connect(o);this._workerPostMessage({type:e$S.OPENED,jobId:r,data:a});}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$12=s$2n.getLogger("esri.core.workers"),{HANDSHAKE:g$G}=e$S,p$1o='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let k$g,h$O;const w$t="Failed to create Worker. Fallback to execute module in main thread";async function v$q(){if(!s$2r("esri-workers"))return b$t(new d$Y);if(!k$g&&!h$O)try{const e=p$1o.replace('"{CONFIGURATION}"',`'${y$K()}'`);k$g=URL.createObjectURL(new Blob([e],{type:"text/javascript"}));}catch(r){h$O=r||{};}let e;if(k$g)try{e=new Worker(k$g,{name:"esri-worker-"+P$d++});}catch(r){m$12.warn(w$t,h$O),e=new d$Y;}else m$12.warn(w$t,h$O),e=new d$Y;return b$t(e)}async function b$t(e){return new Promise((r=>{function o(s){const i=f$J(s);i&&i.type===g$G&&(e.removeEventListener("message",o),e.removeEventListener("error",t),r(e));}function t(r){r.preventDefault(),e.removeEventListener("message",o),e.removeEventListener("error",t),m$12.warn("Failed to create Worker. Fallback to execute module in main thread",r),(e=new d$Y).addEventListener("message",o),e.addEventListener("error",t);}e.addEventListener("message",o),e.addEventListener("error",t);}))}function y$K(){let s;if(null!=t$1P.default){const e={...t$1P};delete e.default,s=JSON.parse(JSON.stringify(e));}else s=JSON.parse(JSON.stringify(t$1P));s.assetsPath=T$t(s.assetsPath),s.request.interceptors=[],s.log.interceptors=[],s.locale=i$2w(),s.has={"esri-csp-restrictions":s$2r("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":s$2r("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":s$2r("esri-2d-query-centroid-enabled"),"featurelayer-pbf":s$2r("featurelayer-pbf"),"featurelayer-simplify-thresholds":s$2r("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":s$2r("featurelayer-simplify-payload-size-factors"),"esri-atomics":s$2r("esri-atomics"),"esri-shared-array-buffer":s$2r("esri-shared-array-buffer"),"esri-tiles-debug":s$2r("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":s$2r("esri-workers-arraybuffer-transfer"),"host-webworker":1},s.workers.loaderUrl&&(s.workers.loaderUrl=T$t(s.workers.loaderUrl)),s.workers.workerPath?s.workers.workerPath=T$t(s.workers.workerPath):s.workers.workerPath=T$t(a$34("esri/core/workers/RemoteClient.js"));const a=t$1P.workers.loaderConfig,l=r$Q({baseUrl:null==a?void 0:a.baseUrl,locale:i$2w(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...null==a?void 0:a.has},map:{...null==a?void 0:a.map},paths:{...null==a?void 0:a.paths},packages:(null==a?void 0:a.packages)||[]}),f={version:a$36,buildDate:d$1$,revision:e$20};return JSON.stringify({esriConfig:s,loaderConfig:l,kernelInfo:f})}let P$d=0;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$1n=s$2n.getLogger("esri.core.workers"),{ABORT:b$s,INVOKE:m$11,OPEN:_$h,OPENED:u$Z,RESPONSE:g$F}=e$S;class j$k{constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",(e=>{e.preventDefault(),p$1n.error(e);}));}static async create(e){const t=await v$q();return new j$k(t,e)}terminate(){this.worker.terminate();}async open(e,t={}){const{signal:o}=t,r=n$1A();return new Promise(((t,n)=>{const a={resolve:t,reject:n,abortHandle:v$10(o,(()=>{this._outJobs.delete(r),this._post({type:b$s,jobId:r});}))};this._outJobs.set(r,a),this._post({type:_$h,jobId:r,modulePath:e});}))}_onMessage(e){const t=f$J(e);if(t)switch(t.type){case u$Z:this._onOpenedMessage(t);break;case g$F:this._onResponseMessage(t);break;case b$s:this._onAbortMessage(t);break;case m$11:this._onInvokeMessage(t);}}_onAbortMessage(e){const t=this._inJobs,o=e.jobId,s=t.get(o);s&&(s.controller&&s.controller.abort(),t.delete(o));}_onInvokeMessage(t){const{methodName:o,jobId:s,data:a,abortable:i}=t,d=i?new AbortController:null,h=this._inJobs,c=s$2k[o];let p;try{if("function"!=typeof c)throw new TypeError(`${o} is not a function`);p=c.call(null,a,{signal:d?d.signal:null});}catch(b){return void this._post({type:g$F,jobId:s,error:a$1w(b)})}O$t(p)?(h.set(s,{controller:d,promise:p}),p.then((e=>{h.has(s)&&(h.delete(s),this._post({type:g$F,jobId:s},e));}),(e=>{h.has(s)&&(h.delete(s),e||(e={message:"Error encountered at method"+o}),d$1Z(e)||this._post({type:g$F,jobId:s,error:a$1w(e||{message:`Error encountered at method ${o}`})}));}))):this._post({type:g$F,jobId:s},p);}_onOpenedMessage(e){var t;const{jobId:o,data:s}=e,r=this._outJobs.get(o);r&&(this._outJobs.delete(o),null==(t=r.abortHandle)||t.remove(),r.resolve(s));}_onResponseMessage(e){var o;const{jobId:s,error:r,data:n}=e,a=this._outJobs.get(s);a&&(this._outJobs.delete(s),null==(o=a.abortHandle)||o.remove(),r?a.reject(s$2l.fromJSON(JSON.parse(r))):a.resolve(n));}_post(e,t,o){return i$1c(this.worker,e,t,o)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$17=s$2r("esri-workers-debug")?1:s$2r("host-browser")?navigator.hardwareConcurrency-1:0;s$17||(s$17=s$2r("safari")&&s$2r("mac")||s$2r("trident")?7:2);let a$1u=0;const l$1e=[];function c$1y(){h$N();}async function f$H(t,r){const e=new l$1f;return await e.open(t,r),e}async function u$Y(o,i={}){if("string"!=typeof o)throw new s$2l("workers:undefined-module","modulePath is missing");let c=i.strategy||"distributed";if(s$2r("host-webworker")&&!s$2r("esri-workers")&&(c="local"),"local"===c){let t=await M$h.loadWorker(o);t||(t=await import(
/* @vite-ignore */
/* webpackIgnore: true */
o)),h$1E(i.signal);const r=i.client||t;return f$H([M$h.connect(t)],{...i,client:r})}if(await h$N(),h$1E(i.signal),"dedicated"===c){const t=a$1u++%s$17;return f$H([await l$1e[t].open(o,i)],i)}if(i.maxNumWorkers&&i.maxNumWorkers>0){const t=Math.min(i.maxNumWorkers,s$17);if(t<s$17){const r=new Array(t);for(let e=0;e<t;++e){const t=a$1u++%s$17;r[e]=l$1e[t].open(o,i);}return f$H(r,i)}}return f$H(l$1e.map((t=>t.open(o,i))),i)}let d$X=null;async function h$N(){if(d$X)return d$X;new AbortController;const t=[];for(let r=0;r<s$17;r++){const e=j$k.create(r).then((t=>(l$1e[r]=t,t)));t.push(e);}return d$X=Promise.all(t),d$X}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$Q(t,c,l){if(t$1T(c)||t$1T(l)||l.vcsWkid||E$r(c,l))return null;const u=Y$a(c)/Y$a(l);if(1===u)return null;switch(t){case"point":case"esriGeometryPoint":return n=>i$1a(n,u);case"polyline":case"esriGeometryPolyline":return n=>s$16(n,u);case"polygon":case"esriGeometryPolygon":return n=>r$P(n,u);case"multipoint":case"esriGeometryMultipoint":return n=>f$G(n,u);default:return null}}function i$1a(n,o){n&&null!=n.z&&(n.z*=o);}function r$P(n,o){if(n)for(const e of n.rings)for(const n of e)n.length>2&&(n[2]*=o);}function s$16(n,o){if(n)for(const e of n.paths)for(const n of e)n.length>2&&(n[2]*=o);}function f$G(n,o){if(n)for(const e of n.points)e.length>2&&(e[2]*=o);}function c$1x(n,o,e){if(null==n.hasM||n.hasZ)for(const t of o)for(const n of t)n.length>2&&(n[2]*=e);}function l$1d(n,e,t){if(!n&&!e||!t)return;const i=Y$a(t);u$X(n,t,i),u$X(e,t,i);}function u$X(n,o,e){if(n)for(const t of n)a$1t(t.geometry,o,e);}function a$1t(t,i,r){if(t$1T(t)||!t.spatialReference||E$r(t.spatialReference,i))return;const s=Y$a(t.spatialReference)/r;if(1!==s)if("x"in t)null!=t.z&&(t.z*=s);else if("rings"in t)c$1x(t,t.rings,s);else if("paths"in t)c$1x(t,t.paths,s);else if("points"in t&&(null==t.hasM||t.hasZ))for(const n of t.points)n.length>2&&(n[2]*=s);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$O(r,t,f){if(!f||!f.features||!f.hasZ)return;const s=t$Q(f.geometryType,t,r.outSpatialReference);if(!t$1T(s))for(const e of f.features)s(e.geometry);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$19=new o$1J({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$W;const c$1w=new o$1J({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let m$10=u$W=class extends a$2N{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null;}readDescription(e,{description:t}){let o;try{o=JSON.parse(t);}catch(r){}return o?o.value:null}readValueType(e,{description:t}){let o;try{o=JSON.parse(t);}catch(r){}return o?c$1w.fromJSON(o.fieldValueType):null}clone(){return new u$W({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};e$25([d$1T({type:String,json:{write:!0}})],m$10.prototype,"alias",void 0),e$25([d$1T({type:[String,Number],json:{write:{allowNull:!0}}})],m$10.prototype,"defaultValue",void 0),e$25([d$1T()],m$10.prototype,"description",void 0),e$25([o$1v("description")],m$10.prototype,"readDescription",null),e$25([d$1T({types:n$1D,json:{read:{reader:t$R},write:!0}})],m$10.prototype,"domain",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],m$10.prototype,"editable",void 0),e$25([d$1T({type:S$J,json:{write:!0}})],m$10.prototype,"length",void 0),e$25([d$1T({type:String,json:{write:!0}})],m$10.prototype,"name",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],m$10.prototype,"nullable",void 0),e$25([r$12(i$19)],m$10.prototype,"type",void 0),e$25([d$1T()],m$10.prototype,"valueType",void 0),e$25([o$1v("valueType",["description"])],m$10.prototype,"readValueType",null),m$10=u$W=e$25([i$2z("esri.layers.support.Field")],m$10);const y$J=m$10;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h$M=new o$1J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let d$W=class extends a$2N{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null;}readFeatures(e,t){const o=k$w.fromJSON(t.spatialReference),s=[];for(let i=0;i<e.length;i++){const t=e[i],p=h$X.fromJSON(t),a=t.geometry&&t.geometry.spatialReference;r$1K(p.geometry)&&!a&&(p.geometry.spatialReference=o),s.push(p);}return s}writeGeometryType(e,t,r,o){if(e)return void h$M.write(e,t,r,o);const{features:s}=this;if(s)for(const i of s)if(i&&r$1K(i.geometry))return void h$M.write(i.geometry.type,t,r,o)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=d$1o(e);return !r&&t.spatialReference&&(o.spatialReference=k$w.fromJSON(t.spatialReference)),o}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const o of r)if(o&&r$1K(o.geometry)&&o.geometry.spatialReference)return void(t.spatialReference=o.geometry.spatialReference.toJSON())}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e&&e[r];o.geometry=t&&t.toJSON()||o.geometry;}}return t}quantize(e){const{scale:[t,r],translate:[o,s]}=e,n=e=>Math.round((e-o)/t),p=e=>Math.round((s-e)/r),a=this.features,l=this._getQuantizationFunction(this.geometryType,n,p);for(let y=0,m=a.length;y<m;y++)l(e$23(a[y].geometry))||(a.splice(y,1),y--,m--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[o,s],scale:[i,p]}=r,a=e=>e*i+o,l=e=>s-e*p,y=this._getHydrationFunction(e,a,l);for(const{geometry:m}of t)r$1K(m)&&y(m);return this.transform=null,this}_quantizePoints(e,t,r){let o,s;const n=[];for(let i=0,p=e.length;i<p;i++){const p=e[i];if(i>0){const e=t(p[0]),i=r(p[1]);e===o&&i===s||(n.push([e-o,i-s]),o=e,s=i);}else o=t(p[0]),s=r(p[1]),n.push([o,s]);}return n.length>0?n:null}_getQuantizationFunction(e,t,r){return "point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const o=c$2w(e)?e.rings:e.paths,s=[];for(let n=0,i=o.length;n<i;n++){const e=o[n],i=this._quantizePoints(e,t,r);i&&s.push(i);}return s.length>0?(c$2w(e)?e.rings=s:e.paths=s,e):null}:"multipoint"===e?e=>{const o=this._quantizePoints(e.points,t,r);return o.length>0?(e.points=o,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r){return "point"===e?e=>{e.x=t(e.x),e.y=r(e.y);}:"polyline"===e||"polygon"===e?e=>{const o=c$2w(e)?e.rings:e.paths;let s,n;for(let i=0,p=o.length;i<p;i++){const e=o[i];for(let o=0,i=e.length;o<i;o++){const i=e[o];o>0?(s+=i[0],n+=i[1]):(s=i[0],n=i[1]),i[0]=t(s),i[1]=r(n);}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax);}:"multipoint"===e?e=>{const o=e.points;let s,n;for(let i=0,p=o.length;i<p;i++){const e=o[i];i>0?(s+=e[0],n+=e[1]):(s=e[0],n=e[1]),e[0]=t(s),e[1]=r(n);}}:void 0}};e$25([d$1T({type:String,json:{write:!0}})],d$W.prototype,"displayFieldName",void 0),e$25([d$1T({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d$W.prototype,"exceededTransferLimit",void 0),e$25([d$1T({type:[h$X],json:{write:!0}})],d$W.prototype,"features",void 0),e$25([o$1v("features")],d$W.prototype,"readFeatures",null),e$25([d$1T({type:[y$J],json:{write:!0}})],d$W.prototype,"fields",void 0),e$25([d$1T({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:h$M.read}}})],d$W.prototype,"geometryType",void 0),e$25([r$1m("geometryType")],d$W.prototype,"writeGeometryType",null),e$25([d$1T({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d$W.prototype,"hasM",void 0),e$25([d$1T({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d$W.prototype,"hasZ",void 0),e$25([d$1T({types:i$1W,json:{write:!0}})],d$W.prototype,"queryGeometry",void 0),e$25([o$1v("queryGeometry")],d$W.prototype,"readQueryGeometry",null),e$25([d$1T({type:k$w,json:{write:!0}})],d$W.prototype,"spatialReference",void 0),e$25([r$1m("spatialReference")],d$W.prototype,"writeSpatialReference",null),e$25([d$1T({json:{write:!0}})],d$W.prototype,"transform",void 0),d$W=e$25([i$2z("esri.rest.support.FeatureSet")],d$W),d$W.prototype.toJSON.isDefaultToJSON=!0;const g$E=d$W;

const FeatureSet = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': g$E
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let T$d=0;const F$9=s$2n.getLogger("esri.layers.graphics.sources.MemorySource");let G$8=class extends(m$1$.LoadableMixin(n$2A(a$2w(S$I)))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory";}load(e){const t=r$1K(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;null==(e=this._connection)||e.close(),this._connection=null;}get workerGeometryType(){var e;const t=null==(e=this.layer)?void 0:e.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(e){return this.load().then((()=>this._applyEdits(e)))}openPorts(){return this.load().then((()=>this._connection.openPorts()))}async queryFeatures(e,t={}){await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);r$O(e,this.layer.spatialReference,r);const s=g$E.fromJSON(r);if(!this._requiresClientGraphicMapping())return s;const o=this.layer.objectIdField;for(const i of s.features){const e=i.attributes[o],t=this._idToClientGraphic.get(e);t&&(i.geometry=t.geometry);}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new s$2l("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return r$O(e,this.layer.spatialReference,r),r}queryFeatureCount(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t)))}queryObjectIds(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t)))}queryExtent(e,t={}){return this.load(t).then((()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t))).then((e=>({count:e.count,extent:M$A.fromJSON(e.extent)})))}querySnapping(e,t={}){return this.load(t).then((()=>this._connection.invoke("querySnapping",e,t)))}async _applyEdits(e){if(!this._connection)throw new s$2l("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let r=null;const o=[],i=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const n=e=>"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[t]?e.attributes[t]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const s of e.deleteFeatures){const e=n(s);null!=e&&o.push(e);}const a=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures)for(const s of e.updateFeatures)if(i.push(this._serializeFeature(s)),a){const e=n(s);null!=e&&a.set(e,s);}l$1d(r?r.features:null,i,this.layer.spatialReference);const{fullExtent:l,featureEditResults:u}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:i,deletes:o});return this.fullExtent=l,r&&r.finish(u.uidToObjectId),this._updateClientGraphicIds(a,u),this._createEditsResult(u)}async _prepareClientMapping(e,t){if("mesh"!==this.layerOrSourceGeometryType||t$1T(e))return;const r=[];for(const{geometry:s}of e)!r$1K(s)||"mesh"!==s.type||s.hasExtent||s.loaded||r.push(s.load({signal:t}));r.length&&await Promise.all(r);}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const r of t.updateResults){if(!r.success)continue;const t=e.get(r.objectId);null!=t&&this._addIdToClientGraphic(t);}for(const e of t.deleteResults)e.success&&this._idToClientGraphic.delete(e.objectId);}}_createEditsResult(e){return {addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=!0===e.success?null:e.error||{code:void 0,description:void 0};return {objectId:e.objectId,globalId:e.globalId,error:t?new s$2l("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,r=new Array(e.length);let s=null;for(let i=0;i<e.length;i++){const o=e[i],n=this._serializeFeature(o);!s&&r$1K(o.geometry)&&(s=o.geometry.type),r[i]=n,t.set(`${n.uid}`,o);}const o=this;return {features:r,inferredGeometryType:s,finish(e){const r=o.sourceJSON.objectIdField;for(const s in e){const i=e[s],n=t.get(s);n&&(n.attributes||(n.attributes={}),-1===i?delete n.attributes[r]:n.attributes[r]=i,o._addIdToClientGraphic(n));}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];null!=r&&this._idToClientGraphic.set(r,e);}get layerOrSourceGeometryType(){var e,t,r;return null!=(e=null==(t=this.layer)?void 0:t.geometryType)?e:null==(r=this.sourceJSON)?void 0:r.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return "mesh"===e||"multipatch"===e||"extent"===e}_serializeFeature(e){const{attributes:t}=e,r=this._geometryForSerialization(e),s=(T$d++).toString();return r?{uid:s,geometry:r.toJSON(),attributes:t}:{uid:s,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;if(t$1T(t))return null;if(this._geometryRequiresClientGraphicMapping(t)){return t.extent?v$J.fromExtent(t.extent):null}return t}async _startWorker(e){this._connection=await u$Y("MemorySourceWorker",{strategy:s$2r("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:r,objectIdField:s,hasM:o,hasZ:n,timeInfo:a}=this.layer,l="defaults"===this.layer.originOf("spatialReference");await this._prepareClientMapping(this.items,e);const u=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",(e=>{F$9.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault();})));const p={features:u.features,fields:t&&t.map((e=>e.toJSON())),geometryType:t$1c.toJSON(this.workerGeometryType),hasM:"mesh"!==this.layerOrSourceGeometryType&&o,hasZ:"mesh"===this.layerOrSourceGeometryType||n,objectIdField:s,spatialReference:l?null:r&&r.toJSON(),timeInfo:a?a.toJSON():null},d=await this._connection.invoke("load",p,{signal:e});for(const i of d.warnings)F$9.warn(i.message,{layer:this.layer,warning:i});d.featureErrors.length&&F$9.warn(`Encountered ${d.featureErrors.length} validation errors while loading features`,d.featureErrors);const h=d.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(u.inferredGeometryType)&&(h.geometryType=t$1c.toJSON(u.inferredGeometryType)),this.sourceJSON=h,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),u.finish(d.assignedObjectIds);}};e$25([n$2C({Type:h$X,ensureType:b$14(h$X)})],G$8.prototype,"itemType",void 0),e$25([d$1T()],G$8.prototype,"type",void 0),e$25([d$1T({constructOnly:!0})],G$8.prototype,"layer",void 0),e$25([d$1T({readOnly:!0})],G$8.prototype,"workerGeometryType",null),e$25([d$1T()],G$8.prototype,"sourceJSON",void 0),G$8=e$25([i$2z("esri.layers.graphics.sources.MemorySource")],G$8);const R$f=G$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$P(r){return "portalItem"in r}const i$18=i=>{let o=class extends i{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):t$P(this)?null==(r=this.portalItem)?void 0:r.apiKey:null}set apiKey(r){null!=r?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"));}};return e$25([d$1T({type:String})],o.prototype,"apiKey",null),o=e$25([i$2z("esri.layers.mixins.APIKeyMixin")],o),o};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$1c={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},a$1s=Object.values(l$1c),c$1v=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${a$1s.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),f$F=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${a$1s.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),v$p=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function p$1m(e){return !!c$1v.test(e)}function d$V(e){const t=U$s(e),n=t.path.match(c$1v)||t.path.match(f$F);if(!n)return null;const[,s,i,o,u]=n,a=i.indexOf("/");return {title:w$s(-1!==a?i.slice(a+1):i),serverType:l$1c[o.toLowerCase()],sublayer:null!=u&&""!==u?parseInt(u,10):null,url:{path:s}}}function m$$(e){const t=U$s(e).path.match(v$p);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function w$s(e){return (e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function h$L(r,t){const n=[];if(r){const t=d$V(r);r$1K(t)&&t.title&&n.push(t.title);}if(t){const e=w$s(t);n.push(e);}if(2===n.length){if(-1!==n[0].toLowerCase().indexOf(n[1].toLowerCase()))return n[0];if(-1!==n[1].toLowerCase().indexOf(n[0].toLowerCase()))return n[1]}return n.join(" - ")}function y$I(e){if(!e)return !1;const r=".arcgis.com/",t="//services",n="//tiles",s="//features",i=-1!==(e=e.toLowerCase()).indexOf(r),o=-1!==e.indexOf(t)||-1!==e.indexOf(n)||-1!==e.indexOf(s);return i&&o}function g$D(e,r){return e?gt$3(Ut$1(e,r)):e}function O$c(s){let{url:i}=s;if(!i)return {url:i};i=Ut$1(i,s.logger);const o=U$s(i),u=d$V(o.path);let l;if(r$1K(u))null!=u.sublayer&&null==s.layer.layerId&&(l=u.sublayer),i=u.url.path;else if(s.nonStandardUrlAllowed){const r=m$$(o.path);r$1K(r)&&(i=r.serviceUrl,l=r.sublayerId);}return {url:gt$3(i),layerId:l}}function C$i(e,r,t,n,i){p$2c(r,n,"url",i),n.url&&null!=e.layerId&&(n.url=D$v(n.url,t,e.layerId.toString()));}function S$m(e){if(!e)return !1;const r=e.toLowerCase(),t=-1!==r.indexOf("/services/"),n=-1!==r.indexOf("/mapserver/wmsserver"),s=-1!==r.indexOf("/imageserver/wmsserver"),i=-1!==r.indexOf("/wmsserver");return t&&(n||s||i)}function L$j(e){if(!e)return !1;const r=new $$j(T$t(e)).authority.toLowerCase();return "server.arcgisonline.com"===r||"services.arcgisonline.com"===r}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$1l=p=>{let c=class extends p{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const t=d$V(this.url);if(r$1K(t)&&t.title)return t.title}return this._get("title")||""}set title(t){this._set("title",t);}set url(t){this._set("url",g$D(t,s$2n.getLogger(this.declaredClass)));}};return e$25([d$1T()],c.prototype,"title",null),e$25([d$1T({type:String})],c.prototype,"url",null),c=e$25([i$2z("esri.layers.mixins.ArcGISService")],c),c};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1y(){const n=new Float32Array(16);return n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function r$N(n){const r=new Float32Array(16);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}function t$O(n,r,t,e,a,o,c,s,u,l,f,i,w,y,A,F){const _=new Float32Array(16);return _[0]=n,_[1]=r,_[2]=t,_[3]=e,_[4]=a,_[5]=o,_[6]=c,_[7]=s,_[8]=u,_[9]=l,_[10]=f,_[11]=i,_[12]=w,_[13]=y,_[14]=A,_[15]=F,_}function e$Q(n,r){return new Float32Array(n,r,16)}const a$1r=n$1y();Object.freeze({__proto__:null,create:n$1y,clone:r$N,fromValues:t$O,createView:e$Q,IDENTITY:a$1r});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$M=(r,s)=>{const o=s$1M(r,s,0,0,0,0,s,0,0,0,0,s,0,0,0,0,1);return o$1l(o,o)},s$15=(r,s)=>{const o=s$1M(r,s,0,0,.5-.5*s,0,s,0,.5-.5*s,0,0,s,.5-.5*s,0,0,0,1);return o$1l(o,o)},o$Q=(r,s)=>{const o=1-s,c=s$1M(r,.2126+.7874*o,.7152-.7152*o,.0722-.0722*o,0,.2126-.2126*o,.7152+.2848*o,.0722-.0722*o,0,.2126-.2126*o,.7152-.7152*o,.0722+.9278*o,0,0,0,0,1);return o$1l(c,c)},c$1u=(r,s)=>{const o=Math.sin(s*Math.PI/180),c=Math.cos(s*Math.PI/180),a=s$1M(r,.213+.787*c-.213*o,.715-.715*c-.715*o,.072-.072*c+.928*o,0,.213-.213*c+.143*o,.715+.285*c+.14*o,.072-.072*c-.283*o,0,.213-.213*c-.787*o,.715-.715*c+.715*o,.072+.928*c+.072*o,0,0,0,0,1);return o$1l(a,a)},a$1q=(r,s)=>{const o=1-2*s,c=s$1M(r,o,0,0,s,0,o,0,s,0,0,o,s,0,0,0,1);return o$1l(c,c)},e$P=(r,s)=>{const o=s$1M(r,.213+.787*s,.715-.715*s,.072-.072*s,0,.213-.213*s,.715+.285*s,.072-.072*s,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,1);return o$1l(o,o)},u$V=(r,s)=>{const o=1-s,c=s$1M(r,.393+.607*o,.769-.769*o,.189-.189*o,0,.349-.349*o,.686+.314*o,.168-.168*o,0,.272-.272*o,.534-.534*o,.131+.869*o,0,0,0,0,1);return o$1l(c,c)};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class l$1b{constructor(t,s,r){this.strength=t,this.radius=s,this.threshold=r,this.type="bloom";}interpolate(t,s,r){this.strength=y$H(t.strength,s.strength,r),this.radius=y$H(t.radius,s.radius,r),this.threshold=y$H(t.threshold,s.threshold,r);}clone(){return new l$1b(this.strength,this.radius,this.threshold)}toJSON(){return {type:"bloom",radius:x$k(this.radius),strength:this.strength,threshold:this.threshold}}}class p$1k{constructor(t){this.radius=t,this.type="blur";}interpolate(t,s,r){this.radius=Math.round(y$H(t.radius,s.radius,r));}clone(){return new p$1k(this.radius)}toJSON(){return {type:"blur",radius:x$k(this.radius)}}}class d$U{constructor(t,s){this.type=t,this.amount=s,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1));}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,s,r){this.amount=y$H(t.amount,s.amount,r),this._updateMatrix();}clone(){return new d$U(this.type,this.amount)}toJSON(){return {type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||n$1y();switch(this.type){case"brightness":this._colorMatrix=r$M(t,this.amount);break;case"contrast":this._colorMatrix=s$15(t,this.amount);break;case"grayscale":this._colorMatrix=o$Q(t,this.amount);break;case"invert":this._colorMatrix=a$1q(t,this.amount);break;case"saturate":this._colorMatrix=e$P(t,this.amount);break;case"sepia":this._colorMatrix=u$V(t,this.amount);}}}class m$_{constructor(t,s,r,o){this.offsetX=t,this.offsetY=s,this.blurRadius=r,this.color=o,this.type="drop-shadow";}interpolate(t,s,r){this.offsetX=y$H(t.offsetX,s.offsetX,r),this.offsetY=y$H(t.offsetY,s.offsetY,r),this.blurRadius=y$H(t.blurRadius,s.blurRadius,r),this.color[0]=Math.round(y$H(t.color[0],s.color[0],r)),this.color[1]=Math.round(y$H(t.color[1],s.color[1],r)),this.color[2]=Math.round(y$H(t.color[2],s.color[2],r)),this.color[3]=y$H(t.color[3],s.color[3],r);}clone(){return new m$_(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:x$k(this.offsetX),yoffset:x$k(this.offsetY),blurRadius:x$k(this.blurRadius),color:t}}}class f$E{constructor(t){this.angle=t,this.type="hue-rotate";}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,s,r){this.angle=y$H(t.angle,s.angle,r),this._updateMatrix();}clone(){return new f$E(this.angle)}toJSON(){return {type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||n$1y();this._colorMatrix=c$1u(t,this.angle);}}class M$g{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1);}interpolate(t,s,r){this.amount=y$H(t.amount,s.amount,r);}clone(){return new M$g(this.amount)}toJSON(){return {type:"opacity",amount:this.amount}}}function y$H(t,s,r){return t+(s-t)*r}function x$k(t){return Math.round(1e3*e$17(t))/1e3}function g$C(s){switch(s.type){case"grayscale":case"sepia":case"invert":return new d$U(s.type,0);case"saturate":case"brightness":case"contrast":return new d$U(s.type,1);case"opacity":return new M$g(1);case"hue-rotate":return new f$E(0);case"blur":return new p$1k(0);case"drop-shadow":return new m$_(0,0,0,[...l$1L("transparent")]);case"bloom":return new l$1b(0,0,0)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1x(t,n){const e=t.length>n.length?t:n;return (t.length>n.length?n:t).every(((t,n)=>t.type===e[n].type))}function e$O(n,e){const h=n.length>e.length?n:e,l=n.length>e.length?e:n;for(let g=l.length;g<h.length;g++)l.push(g$C(h[g]));}function h$K(t){const n=t[0];return !!n&&"type"in n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$Z,g$B,v$o={exports:{}};function d$T(t){if(!t||0===t.length)return null;if("string"==typeof t){const e=y$G(t);return e&&0!==e.length?e:null}const e=t.map((t=>{if(!Number.isFinite(t.scale)||t.scale<=0)throw new s$2l("effect:invalid-scale","scale must be finite and greater than 0",{stop:t});return {scale:t.scale,effects:y$G(t.value)}}));e.sort(((t,e)=>e.effects.length-t.effects.length));for(let r=0;r<e.length-1;r++){if(!n$1x(e[r].effects,e[r+1].effects))throw new s$2l("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[r].effects,b:e[r+1].effects});e$O(e[r].effects,e[r+1].effects);}return e.sort(((t,e)=>e.scale-t.scale)),e}function y$G(t){let e;if(!t)return [];try{e=v$o.exports.parse(t);}catch(r){throw new s$2l("effect:invalid-syntax","Invalid effect syntax",{value:t,error:r})}return e.map((t=>A$c(t)))}function A$c(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return w$r(t);case"opacity":return x$j(t);case"hue-rotate":return b$r(t);case"blur":return C$h(t);case"drop-shadow":return F$8(t);case"bloom":return E$d(t)}}catch(e){throw e.details.filter=t,e}throw new s$2l("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function w$r(t){let e=1;return j$j(t.parameters,1),1===t.parameters.length&&(e=M$f(t.parameters[0])),new d$U(t.name,e)}function x$j(t){let e=1;return j$j(t.parameters,1),1===t.parameters.length&&(e=M$f(t.parameters[0])),new M$g(e)}function b$r(t){let e=0;return j$j(t.parameters,1),1===t.parameters.length&&(e=N$b(t.parameters[0])),new f$E(e)}function C$h(t){let e=0;return j$j(t.parameters,1),1===t.parameters.length&&(e=T$c(t.parameters[0]),O$b(e,t.parameters[0])),new p$1k(e)}function F$8(t){const e=[];let r=null;for(const n of t.parameters)if("color"===n.type){if(e.length&&Object.freeze(e),r)throw new s$2l("effect:type-error","Accepts only one color",{});r=U$e(n);}else {const t=T$c(n);if(Object.isFrozen(e))throw new s$2l("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(t),3===e.length&&O$b(t,n);}if(e.length<2||e.length>3)throw new s$2l("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new m$_(e[0],e[1],e[2]||0,r||H$7("black"))}function E$d(t){let e=1,r=0,n=0;return j$j(t.parameters,3),t.parameters[0]&&(e=M$f(t.parameters[0])),t.parameters[1]&&(r=T$c(t.parameters[1]),O$b(r,t.parameters[1])),t.parameters[2]&&(n=M$f(t.parameters[2])),new l$1b(e,r,n)}function j$j(t,e){if(t.length>e)throw new s$2l("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function $$c(t){if("color"===t.type)return "<color>";if(t.unit){if(R$e[t.unit])return "<length>";if(S$l[t.unit])return "<angle>";if("%"===t.unit)return "<percentage>"}return "<double>"}function O$b(t,e){if(t<0)throw new s$2l("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function k$f(t){if("quantity"!==t.type||null!==t.unit)throw new s$2l("effect:type-error",`Expected <double>, Actual: ${$$c(t)}`,{term:t})}function q$c(t){if("quantity"!==t.type||null!==t.unit&&"%"!==t.unit)throw new s$2l("effect:type-error",`Expected <double> or <percentage>, Actual: ${$$c(t)}`,{term:t})}g$B=function(){function t(t,e){function r(){this.constructor=t;}r.prototype=e.prototype,t.prototype=new r;}function e(t,r,n,u){var a=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(a,e.prototype),a.expected=r,a.found=n,a.location=u,a.name="SyntaxError",a}function r(t,e,r){return r=r||" ",t.length>e?t:(e-=t.length,t+(r+=r.repeat(e)).slice(0,e))}function n(t,r){var n,u={},a=(r=void 0!==r?r:{}).grammarSource,c={start:Lt},o=Lt,i="none",l=")",s=",",f="(",p="%",h="px",m="cm",g="mm",v="in",d="pt",y="pc",A="deg",w="rad",x="grad",b="turn",C="#",F=".",E="e",j=/^[ \t\n\r]/,$=/^[a-z\-]/,O=/^[0-9a-fA-F]/,k=/^[+\-]/,q=/^[0-9]/,S=Bt("none"),z=Ut("none",!1),R=Ut(")",!1),I=Ut(",",!1),M=Bt("whitespace"),P=Ht([" ","\t","\n","\r"],!1,!1),N=Bt("function"),T=Ut("(",!1),U=Bt("identifier"),H=Ht([["a","z"],"-"],!1,!1),_=Bt("percentage"),B=Ut("%",!1),D=Bt("length"),G=Ut("px",!1),J=Ut("cm",!1),K=Ut("mm",!1),L=Ut("in",!1),Q=Ut("pt",!1),V=Ut("pc",!1),W=Bt("angle"),X=Ut("deg",!1),Y=Ut("rad",!1),Z=Ut("grad",!1),tt=Ut("turn",!1),et=Bt("number"),rt=Bt("color"),nt=Ut("#",!1),ut=Ht([["0","9"],["a","f"],["A","F"]],!1,!1),at=Ht(["+","-"],!1,!1),ct=Ht([["0","9"]],!1,!1),ot=Ut(".",!1),it=Ut("e",!1),lt=function(){return []},st=function(t,e){return {type:"function",name:t,parameters:e||[]}},ft=function(t,e){return e.length>0?le(t,e,3):[t]},pt=function(t){return {type:"quantity",value:t.value,unit:t.unit}},ht=function(t){return {type:"color",colorType:t.type,value:t.value}},mt=function(t){return t},gt=function(){return Tt()},vt=function(t){return {value:t,unit:"%"}},dt=function(t){return {value:t,unit:"px"}},yt=function(t){return {value:t,unit:"cm"}},At=function(t){return {value:t,unit:"mm"}},wt=function(t){return {value:t,unit:"in"}},xt=function(t){return {value:t,unit:"pt"}},bt=function(t){return {value:t,unit:"pc"}},Ct=function(t){return {value:t,unit:"deg"}},Ft=function(t){return {value:t,unit:"rad"}},Et=function(t){return {value:t,unit:"grad"}},jt=function(t){return {value:t,unit:"turn"}},$t=function(t){return {value:t,unit:null}},Ot=function(){return {type:"hex",value:Tt()}},kt=function(t){return {type:"function",value:t}},qt=function(){return {type:"named",value:Tt()}},St=function(){return parseFloat(Tt())},zt=0,Rt=0,It=[{line:1,column:1}],Mt=0,Pt=[],Nt=0;if("startRule"in r){if(!(r.startRule in c))throw new Error("Can't start parsing from rule \""+r.startRule+'".');o=c[r.startRule];}function Tt(){return t.substring(Rt,zt)}function Ut(t,e){return {type:"literal",text:t,ignoreCase:e}}function Ht(t,e,r){return {type:"class",parts:t,inverted:e,ignoreCase:r}}function _t(){return {type:"end"}}function Bt(t){return {type:"other",description:t}}function Dt(e){var r,n=It[e];if(n)return n;for(r=e-1;!It[r];)r--;for(n={line:(n=It[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return It[e]=n,n}function Gt(t,e){var r=Dt(t),n=Dt(e);return {source:a,start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function Jt(t){zt<Mt||(zt>Mt&&(Mt=zt,Pt=[]),Pt.push(t));}function Kt(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}function Lt(){var t;return (t=Qt())===u&&(t=Vt()),t}function Qt(){var e,r;return Nt++,e=zt,Zt(),t.substr(zt,4)===i?(r=i,zt+=4):(r=u,0===Nt&&Jt(z)),r!==u?(Zt(),Rt=e,e=lt()):(zt=e,e=u),Nt--,e===u&&0===Nt&&Jt(S),e}function Vt(){var t,e;if(t=[],(e=Wt())!==u)for(;e!==u;)t.push(e),e=Wt();else t=u;return t}function Wt(){var e,r,n,a;return e=zt,Zt(),(r=te())!==u?(Zt(),(n=Xt())===u&&(n=null),Zt(),41===t.charCodeAt(zt)?(a=l,zt++):(a=u,0===Nt&&Jt(R)),a!==u?(Zt(),Rt=e,e=st(r,n)):(zt=e,e=u)):(zt=e,e=u),e}function Xt(){var e,r,n,a,c,o,i,l;if(e=zt,(r=Yt())!==u){for(n=[],a=zt,c=Zt(),44===t.charCodeAt(zt)?(o=s,zt++):(o=u,0===Nt&&Jt(I)),o===u&&(o=null),i=Zt(),(l=Yt())!==u?a=c=[c,o,i,l]:(zt=a,a=u);a!==u;)n.push(a),a=zt,c=Zt(),44===t.charCodeAt(zt)?(o=s,zt++):(o=u,0===Nt&&Jt(I)),o===u&&(o=null),i=Zt(),(l=Yt())!==u?a=c=[c,o,i,l]:(zt=a,a=u);Rt=e,e=ft(r,n);}else zt=e,e=u;return e}function Yt(){var t,e;return t=zt,(e=re())===u&&(e=ne())===u&&(e=ue())===u&&(e=ae()),e!==u&&(Rt=t,e=pt(e)),(t=e)===u&&(t=zt,(e=ce())!==u&&(Rt=t,e=ht(e)),t=e),t}function Zt(){var e,r;for(Nt++,e=[],j.test(t.charAt(zt))?(r=t.charAt(zt),zt++):(r=u,0===Nt&&Jt(P));r!==u;)e.push(r),j.test(t.charAt(zt))?(r=t.charAt(zt),zt++):(r=u,0===Nt&&Jt(P));return Nt--,r=u,0===Nt&&Jt(M),e}function te(){var e,r,n;return Nt++,e=zt,(r=ee())!==u?(40===t.charCodeAt(zt)?(n=f,zt++):(n=u,0===Nt&&Jt(T)),n!==u?(Rt=e,e=mt(r)):(zt=e,e=u)):(zt=e,e=u),Nt--,e===u&&(r=u,0===Nt&&Jt(N)),e}function ee(){var e,r,n;if(Nt++,e=zt,r=[],$.test(t.charAt(zt))?(n=t.charAt(zt),zt++):(n=u,0===Nt&&Jt(H)),n!==u)for(;n!==u;)r.push(n),$.test(t.charAt(zt))?(n=t.charAt(zt),zt++):(n=u,0===Nt&&Jt(H));else r=u;return r!==u&&(Rt=e,r=gt()),Nt--,(e=r)===u&&(r=u,0===Nt&&Jt(U)),e}function re(){var e,r,n;return Nt++,e=zt,Zt(),(r=oe())!==u?(37===t.charCodeAt(zt)?(n=p,zt++):(n=u,0===Nt&&Jt(B)),n!==u?(Rt=e,e=vt(r)):(zt=e,e=u)):(zt=e,e=u),Nt--,e===u&&0===Nt&&Jt(_),e}function ne(){var e,r,n;return Nt++,e=zt,Zt(),(r=oe())!==u?(t.substr(zt,2)===h?(n=h,zt+=2):(n=u,0===Nt&&Jt(G)),n!==u?(Rt=e,e=dt(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,Zt(),(r=oe())!==u?(t.substr(zt,2)===m?(n=m,zt+=2):(n=u,0===Nt&&Jt(J)),n!==u?(Rt=e,e=yt(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,Zt(),(r=oe())!==u?(t.substr(zt,2)===g?(n=g,zt+=2):(n=u,0===Nt&&Jt(K)),n!==u?(Rt=e,e=At(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,Zt(),(r=oe())!==u?(t.substr(zt,2)===v?(n=v,zt+=2):(n=u,0===Nt&&Jt(L)),n!==u?(Rt=e,e=wt(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,Zt(),(r=oe())!==u?(t.substr(zt,2)===d?(n=d,zt+=2):(n=u,0===Nt&&Jt(Q)),n!==u?(Rt=e,e=xt(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,Zt(),(r=oe())!==u?(t.substr(zt,2)===y?(n=y,zt+=2):(n=u,0===Nt&&Jt(V)),n!==u?(Rt=e,e=bt(r)):(zt=e,e=u)):(zt=e,e=u)))))),Nt--,e===u&&0===Nt&&Jt(D),e}function ue(){var e,r,n;return Nt++,e=zt,(r=oe())!==u?(t.substr(zt,3)===A?(n=A,zt+=3):(n=u,0===Nt&&Jt(X)),n!==u?(Rt=e,e=Ct(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,(r=oe())!==u?(t.substr(zt,3)===w?(n=w,zt+=3):(n=u,0===Nt&&Jt(Y)),n!==u?(Rt=e,e=Ft(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,(r=oe())!==u?(t.substr(zt,4)===x?(n=x,zt+=4):(n=u,0===Nt&&Jt(Z)),n!==u?(Rt=e,e=Et(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,(r=oe())!==u?(t.substr(zt,4)===b?(n=b,zt+=4):(n=u,0===Nt&&Jt(tt)),n!==u?(Rt=e,e=jt(r)):(zt=e,e=u)):(zt=e,e=u)))),Nt--,e===u&&(r=u,0===Nt&&Jt(W)),e}function ae(){var t,e;return Nt++,t=zt,Zt(),(e=oe())!==u?(Rt=t,t=$t(e)):(zt=t,t=u),Nt--,t===u&&0===Nt&&Jt(et),t}function ce(){var e,r,n,a;if(Nt++,e=zt,35===t.charCodeAt(zt)?(r=C,zt++):(r=u,0===Nt&&Jt(nt)),r!==u){if(n=[],O.test(t.charAt(zt))?(a=t.charAt(zt),zt++):(a=u,0===Nt&&Jt(ut)),a!==u)for(;a!==u;)n.push(a),O.test(t.charAt(zt))?(a=t.charAt(zt),zt++):(a=u,0===Nt&&Jt(ut));else n=u;n!==u?(Rt=e,e=Ot()):(zt=e,e=u);}else zt=e,e=u;return e===u&&(e=zt,(r=Wt())!==u&&(Rt=e,r=kt(r)),(e=r)===u&&(e=zt,(r=ee())!==u&&(Rt=e,r=qt()),e=r)),Nt--,e===u&&(r=u,0===Nt&&Jt(rt)),e}function oe(){var e,r,n,a,c,o,i;for(e=zt,k.test(t.charAt(zt))?(t.charAt(zt),zt++):0===Nt&&Jt(at),r=zt,n=[],q.test(t.charAt(zt))?(a=t.charAt(zt),zt++):(a=u,0===Nt&&Jt(ct));a!==u;)n.push(a),q.test(t.charAt(zt))?(a=t.charAt(zt),zt++):(a=u,0===Nt&&Jt(ct));if(46===t.charCodeAt(zt)?(a=F,zt++):(a=u,0===Nt&&Jt(ot)),a!==u){if(c=[],q.test(t.charAt(zt))?(o=t.charAt(zt),zt++):(o=u,0===Nt&&Jt(ct)),o!==u)for(;o!==u;)c.push(o),q.test(t.charAt(zt))?(o=t.charAt(zt),zt++):(o=u,0===Nt&&Jt(ct));else c=u;c!==u?r=n=[n,a,c]:(zt=r,r=u);}else zt=r,r=u;if(r===u)if(r=[],q.test(t.charAt(zt))?(n=t.charAt(zt),zt++):(n=u,0===Nt&&Jt(ct)),n!==u)for(;n!==u;)r.push(n),q.test(t.charAt(zt))?(n=t.charAt(zt),zt++):(n=u,0===Nt&&Jt(ct));else r=u;if(r!==u){if(n=zt,101===t.charCodeAt(zt)?(a=E,zt++):(a=u,0===Nt&&Jt(it)),a!==u){if(k.test(t.charAt(zt))?(c=t.charAt(zt),zt++):(c=u,0===Nt&&Jt(at)),c===u&&(c=null),o=[],q.test(t.charAt(zt))?(i=t.charAt(zt),zt++):(i=u,0===Nt&&Jt(ct)),i!==u)for(;i!==u;)o.push(i),q.test(t.charAt(zt))?(i=t.charAt(zt),zt++):(i=u,0===Nt&&Jt(ct));else o=u;o!==u?n=a=[a,c,o]:(zt=n,n=u);}else zt=n,n=u;n===u&&(n=null),Rt=e,e=St();}else zt=e,e=u;return e}function ie(t,e){return t.map((function(t){return t[e]}))}function le(t,e,r){return [t].concat(ie(e,r))}if((n=o())!==u&&zt===t.length)return n;throw n!==u&&zt<t.length&&Jt(_t()),Kt(Pt,Mt<t.length?t.charAt(Mt):null,Mt<t.length?Gt(Mt,Mt+1):Gt(Mt,Mt))}return t(e,Error),e.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var n,u=null;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){u=t[n].text.split(/\r\n|\n|\r/g);break}var a=this.location.start,c=this.location.source+":"+a.line+":"+a.column;if(u){var o=this.location.end,i=r("",a.line.toString().length),l=u[a.line-1],s=a.line===o.line?o.column:l.length+1;e+="\n --\x3e "+c+"\n"+i+" |\n"+a.line+" | "+l+"\n"+i+" | "+r("",a.column-1)+r("",s-a.column,"^");}else e+="\n at "+c;}return e},e.buildMessage=function(t,e){var r={literal:function(t){return '"'+u(t.text)+'"'},class:function(t){var e=t.parts.map((function(t){return Array.isArray(t)?a(t[0])+"-"+a(t[1]):a(t)}));return "["+(t.inverted?"^":"")+e+"]"},any:function(){return "any character"},end:function(){return "end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function u(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return "\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return "\\x"+n(t)}))}function a(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return "\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return "\\x"+n(t)}))}function c(t){return r[t.type](t)}function o(t){var e,r,n=t.map(c);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r;}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}function i(t){return t?'"'+u(t)+'"':"end of input"}return "Expected "+o(t)+" but "+i(e)+" found."},{SyntaxError:e,parse:n}},(m$Z=v$o).exports&&(m$Z.exports=g$B());const S$l={deg:1,grad:.9,rad:180/Math.PI,turn:360};function z$b(t){if("quantity"!==t.type||!(0===t.value&&null===t.unit||t.unit&&null!=S$l[t.unit]))throw new s$2l("effect:type-error",`Expected <angle>, Actual: ${$$c(t)}`,{term:t})}const R$e={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function I$k(t){if("quantity"!==t.type||!(0===t.value&&null===t.unit||t.unit&&null!=R$e[t.unit]))throw new s$2l("effect:type-error",`Expected <length>, Actual: ${$$c(t)}`,{term:t})}function M$f(t){q$c(t);const e=t.value;return O$b(e,t),"%"===t.unit?.01*e:e}function P$c(t){return k$f(t),O$b(t.value,t),t.value}function N$b(t){return z$b(t),t.value*S$l[t.unit]||0}function T$c(t){return I$k(t),t.value*R$e[t.unit]||0}function U$e(t){switch(t.colorType){case"hex":return i$1N(t.value);case"named":return H$7(t.value);case"function":return D$d(t.value)}}function H$7(e){if(!r$Y(e))throw new s$2l("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return a$2h(e)}const _$g=/^rgba?/i,B$9=/^hsla?/i;function D$d(t){if(j$j(t.parameters,4),_$g.test(t.name))return [M$f(t.parameters[0]),M$f(t.parameters[1]),M$f(t.parameters[2]),t.parameters[3]?M$f(t.parameters[3]):1];if(B$9.test(t.name))return o$12(P$c(t.parameters[0]),M$f(t.parameters[1]),M$f(t.parameters[2]),t.parameters[3]?M$f(t.parameters[3]):1);throw new s$2l("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1w(e,t,r){try{return c$1t(e)}catch(n){var s;null==r||null==(s=r.messages)||s.push(n);}return null}function a$1p(e,r,s,n){try{const n=o$P(e);o$1$(s,n,r);}catch(a){n.messages&&n.messages.push(a);}}function o$P(e){const t=d$T(e);return t?h$K(t)?t.map((e=>e.toJSON())):t.map((({scale:e,effects:t})=>({scale:e,value:t.map((e=>e.toJSON()))}))):null}function c$1t(e){if(!e||0===e.length)return null;if(u$U(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:f$D(r.value)});return t}return f$D(e)}function u$U(e){const t=e[0];return !!t&&"scale"in t}function f$D(e){if(!e||!e.length)return "";const t=[];for(const s of e){let e=[];switch(s.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[i$17(s,"amount")];break;case"blur":e=[i$17(s,"radius","pt")];break;case"hue-rotate":e=[i$17(s,"angle","deg")];break;case"drop-shadow":e=[i$17(s,"xoffset","pt"),i$17(s,"yoffset","pt"),i$17(s,"blurRadius","pt"),l$1a(s,"color")];break;case"bloom":e=[i$17(s,"strength"),i$17(s,"radius","pt"),i$17(s,"threshold")];}const n=`${s.type}(${e.filter(Boolean).join(" ")})`;d$T(n),t.push(n);}return t.join(" ")}function i$17(t,r,s){if(null==t[r])throw new s$2l("effect:missing-parameter",`Missing parameter '${r}' in ${t.type} effect`,{effect:t});return s?t[r]+s:""+t[r]}function l$1a(t,r){if(null==t[r])throw new s$2l("effect:missing-parameter",`Missing parameter '${r}' in ${t.type} effect`,{effect:t});const s=t[r];return `rgba(${s[0]||0}, ${s[1]||0}, ${s[2]||0}, ${s[3]/255||0})`}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$16=i=>{let n=class extends i{constructor(){super(...arguments),this.blendMode="normal",this.effect=null;}};return e$25([d$1T({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0}}}})],n.prototype,"blendMode",void 0),e$25([d$1T({json:{read:!1,write:!1,origins:{"web-map":{read:{reader:n$1w},write:{allowNull:!0,writer:a$1p}}}}})],n.prototype,"effect",void 0),n=e$25([i$2z("esri.layers.mixins.BlendLayer")],n),n};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$O=o=>{let t=class extends o{constructor(){super(...arguments),this.customParameters=null;}};return e$25([d$1T({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=e$25([i$2z("esri.layers.mixins.CustomParametersMixin")],t),t};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$N={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},t$N={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function s$14(e,s,r){const n=new Date(e.getTime());if(s&&r){const e=t$N[r],{getter:l,setter:u,multiplier:i}=e;n[u](n[l]()+s*i);}return n}function n$1v(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function o$N(t,s,r){if(0===t)return 0;return t*e$N[s]/e$N[r]}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$T;let d$S=u$T=class extends a$2N{constructor(t){super(t),this.end=null,this.start=null;}static get allTime(){return c$1s}static get empty(){return h$J}readEnd(t,e){return null!=e.end?new Date(e.end):null}writeEnd(t,e){e.end=t?t.getTime():null;}get isAllTime(){return this.equals(u$T.allTime)}get isEmpty(){return this.equals(u$T.empty)}readStart(t,e){return null!=e.start?new Date(e.start):null}writeStart(t,e){e.start=t?t.getTime():null;}clone(){return new u$T({end:this.end,start:this.start})}equals(t){if(!t)return !1;const e=r$1K(this.start)?this.start.getTime():this.start,s=r$1K(this.end)?this.end.getTime():this.end,i=r$1K(t.start)?t.start.getTime():t.start,n=r$1K(t.end)?t.end.getTime():t.end;return e===i&&s===n}expandTo(t){if(this.isEmpty||this.isAllTime)return this.clone();const e=E$y(this.start,(e=>n$1v(e,t))),r=E$y(this.end,(e=>s$14(n$1v(e,t),1,t)));return new u$T({start:e,end:r})}intersection(t){if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return u$T.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=A$B(this.start,-1/0,(t=>t.getTime())),r=A$B(this.end,1/0,(t=>t.getTime())),s=A$B(t.start,-1/0,(t=>t.getTime())),n=A$B(t.end,1/0,(t=>t.getTime()));let o,l;if(s>=e&&s<=r?o=s:e>=s&&e<=n&&(o=e),r>=s&&r<=n?l=r:n>=e&&n<=r&&(l=n),!isNaN(o)&&!isNaN(l)){const t=new u$T;return t.start=o===-1/0?null:new Date(o),t.end=l===1/0?null:new Date(l),t}return u$T.empty}offset(t,e){if(this.isEmpty||this.isAllTime)return this.clone();const s=new u$T,{start:i,end:n}=this;return r$1K(i)&&(s.start=s$14(i,t,e)),r$1K(n)&&(s.end=s$14(n,t,e)),s}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return c$1s.clone();const e=r$1K(this.start)&&r$1K(t.start)?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,s=r$1K(this.end)&&r$1K(t.end)?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new u$T({start:e,end:s})}};e$25([d$1T({type:Date,json:{write:{allowNull:!0}}})],d$S.prototype,"end",void 0),e$25([o$1v("end")],d$S.prototype,"readEnd",null),e$25([r$1m("end")],d$S.prototype,"writeEnd",null),e$25([d$1T({readOnly:!0,json:{read:!1}})],d$S.prototype,"isAllTime",null),e$25([d$1T({readOnly:!0,json:{read:!1}})],d$S.prototype,"isEmpty",null),e$25([d$1T({type:Date,json:{write:{allowNull:!0}}})],d$S.prototype,"start",void 0),e$25([o$1v("start")],d$S.prototype,"readStart",null),e$25([r$1m("start")],d$S.prototype,"writeStart",null),d$S=u$T=e$25([i$2z("esri.TimeExtent")],d$S);const c$1s=new d$S,h$J=new d$S({start:void 0,end:void 0}),y$F=d$S;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$1o;let c$1r=a$1o=class extends a$2N{constructor(r){super(r),this.type="map-layer";}clone(){const{mapLayerId:r,gdbVersion:o}=this;return new a$1o({mapLayerId:r,gdbVersion:o})}};e$25([r$12({mapLayer:"map-layer"})],c$1r.prototype,"type",void 0),e$25([d$1T({type:S$J,json:{write:!0}})],c$1r.prototype,"mapLayerId",void 0),e$25([d$1T({type:String,json:{write:!0}})],c$1r.prototype,"gdbVersion",void 0),c$1r=a$1o=e$25([i$2z("esri.layers.support.source.MapLayerSource")],c$1r);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$1q;let a$1n=c$1q=class extends a$2N{constructor(e){super(e),this.type="query-table";}clone(){var e;const{workspaceId:r,query:o,oidFields:t,spatialReference:p,geometryType:s}=this,i={workspaceId:r,query:o,oidFields:t,spatialReference:null!=(e=null==p?void 0:p.clone())?e:void 0,geometryType:s};return new c$1q(i)}};e$25([r$12({queryTable:"query-table"})],a$1n.prototype,"type",void 0),e$25([d$1T({type:String,json:{write:!0}})],a$1n.prototype,"workspaceId",void 0),e$25([d$1T({type:String,json:{write:!0}})],a$1n.prototype,"query",void 0),e$25([d$1T({type:String,json:{write:!0}})],a$1n.prototype,"oidFields",void 0),e$25([d$1T({type:k$w,json:{write:!0}})],a$1n.prototype,"spatialReference",void 0),e$25([r$12(i$1X)],a$1n.prototype,"geometryType",void 0),a$1n=c$1q=e$25([i$2z("esri.layers.support.source.QueryTableDataSource")],a$1n);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$1j;let a$1m=p$1j=class extends a$2N{constructor(r){super(r),this.type="raster";}clone(){const{workspaceId:r,dataSourceName:o}=this;return new p$1j({workspaceId:r,dataSourceName:o})}};e$25([r$12({raster:"raster"})],a$1m.prototype,"type",void 0),e$25([d$1T({type:String,json:{write:!0}})],a$1m.prototype,"dataSourceName",void 0),e$25([d$1T({type:String,json:{write:!0}})],a$1m.prototype,"workspaceId",void 0),a$1m=p$1j=e$25([i$2z("esri.layers.support.source.RasterDataSource")],a$1m);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$1i;let a$1l=p$1i=class extends a$2N{constructor(r){super(r),this.type="table";}clone(){const{workspaceId:r,gdbVersion:o,dataSourceName:e}=this;return new p$1i({workspaceId:r,gdbVersion:o,dataSourceName:e})}};e$25([r$12({table:"table"})],a$1l.prototype,"type",void 0),e$25([d$1T({type:String,json:{write:!0}})],a$1l.prototype,"workspaceId",void 0),e$25([d$1T({type:String,json:{write:!0}})],a$1l.prototype,"gdbVersion",void 0),e$25([d$1T({type:String,json:{write:!0}})],a$1l.prototype,"dataSourceName",void 0),a$1l=p$1i=e$25([i$2z("esri.layers.support.source.TableDataSource")],a$1l);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var f$C,m$Y;const j$i=s$24()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let T$b=f$C=class extends a$2N{constructor(e){super(e),this.type="join-table";}readLeftTableSource(e,r,o){return v$n()(e,r,o)}castLeftTableSource(e){return N$t(L$i(),e)}readRightTableSource(e,r,o){return v$n()(e,r,o)}castRightTableSource(e){return N$t(L$i(),e)}clone(){var e,r;const{leftTableKey:o,rightTableKey:t,leftTableSource:a,rightTableSource:s,joinType:l}=this,p={leftTableKey:o,rightTableKey:t,leftTableSource:null!=(e=null==a?void 0:a.clone())?e:void 0,rightTableSource:null!=(r=null==s?void 0:s.clone())?r:void 0,joinType:l};return new f$C(p)}};e$25([r$12({joinTable:"join-table"})],T$b.prototype,"type",void 0),e$25([d$1T({type:String,json:{write:!0}})],T$b.prototype,"leftTableKey",void 0),e$25([d$1T({type:String,json:{write:!0}})],T$b.prototype,"rightTableKey",void 0),e$25([d$1T({json:{write:!0}})],T$b.prototype,"leftTableSource",void 0),e$25([o$1v("leftTableSource")],T$b.prototype,"readLeftTableSource",null),e$25([c$35("leftTableSource")],T$b.prototype,"castLeftTableSource",null),e$25([d$1T({json:{write:!0}})],T$b.prototype,"rightTableSource",void 0),e$25([o$1v("rightTableSource")],T$b.prototype,"readRightTableSource",null),e$25([c$35("rightTableSource")],T$b.prototype,"castRightTableSource",null),e$25([r$12(j$i)],T$b.prototype,"joinType",void 0),T$b=f$C=e$25([i$2z("esri.layers.support.source.JoinTableDataSource")],T$b);let h$I=null;function v$n(){return h$I||(h$I=u$2a({types:L$i()})),h$I}let g$A=null;function L$i(){return g$A||(g$A={key:"type",base:null,typeMap:{"data-layer":K$7,"map-layer":c$1r}}),g$A}const w$q={key:"type",base:null,typeMap:{"join-table":T$b,"query-table":a$1n,raster:a$1m,table:a$1l}};let K$7=m$Y=class extends a$2N{constructor(e){super(e),this.type="data-layer";}clone(){const{fields:e,dataSource:r}=this;return new m$Y({fields:e,dataSource:r})}};e$25([r$12({dataLayer:"data-layer"})],K$7.prototype,"type",void 0),e$25([d$1T({type:[y$J],json:{write:!0}})],K$7.prototype,"fields",void 0),e$25([d$1T({types:w$q,json:{write:!0}})],K$7.prototype,"dataSource",void 0),K$7=m$Y=e$25([i$2z("esri.layers.support.source.DataLayerSource")],K$7),K$7.from=b$14(K$7);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$1u;const c$1p=new o$1J({upperLeft:"upper-left",lowerLeft:"lower-left"});let m$X=n$1u=class extends a$2N{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1;}clone(){return new n$1u(l$2w({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};e$25([d$1T({type:M$A,json:{write:{overridePolicy(){return {enabled:"view"===this.mode}}}}})],m$X.prototype,"extent",void 0),e$25([d$1T({type:["view","edit"],json:{write:!0}})],m$X.prototype,"mode",void 0),e$25([d$1T({type:String,json:{read:c$1p.read,write:c$1p.write}})],m$X.prototype,"originPosition",void 0),e$25([d$1T({type:Number,json:{write:{overridePolicy(){return {enabled:"view"===this.mode}}}}})],m$X.prototype,"tolerance",void 0),m$X=n$1u=e$25([i$2z("esri.rest.support.QuantizationParameters")],m$X);const a$1k=m$X;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$1o;const n$1t=new o$1J({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});let p$1h=c$1o=class extends a$2N{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null;}writeStatisticParameters(t,e){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(e.statisticParameters=l$2w(t));}clone(){return new c$1o({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:l$2w(this.statisticParameters)})}};e$25([d$1T({type:Number,json:{write:!0}})],p$1h.prototype,"maxPointCount",void 0),e$25([d$1T({type:Number,json:{write:!0}})],p$1h.prototype,"maxRecordCount",void 0),e$25([d$1T({type:Number,json:{write:!0}})],p$1h.prototype,"maxVertexCount",void 0),e$25([d$1T({type:String,json:{write:!0}})],p$1h.prototype,"onStatisticField",void 0),e$25([d$1T({type:String,json:{write:!0}})],p$1h.prototype,"outStatisticFieldName",void 0),e$25([d$1T({type:String,json:{read:{source:"statisticType",reader:n$1t.read},write:{target:"statisticType",writer:n$1t.write}}})],p$1h.prototype,"statisticType",void 0),e$25([d$1T({type:Object})],p$1h.prototype,"statisticParameters",void 0),e$25([r$1m("statisticParameters")],p$1h.prototype,"writeStatisticParameters",null),p$1h=c$1o=e$25([i$2z("esri.rest.support.StatisticDefinition")],p$1h);const m$W=p$1h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var S$k;const v$m=new o$1J({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),g$z=new o$1J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let R$d=S$k=class extends a$2N{constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.datumTransformation=null,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null;}static from(t){return v$Z(S$k,t)}castDatumTransformation(t){return "number"==typeof t||"object"==typeof t?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime();}writeParameterValues(t,e){if(t){const r={};for(const e in t){const i=t[e];Array.isArray(i)?r[e]=i.map((t=>t instanceof Date?t.getTime():t)):i instanceof Date?r[e]=i.getTime():r[e]=i;}e.parameterValues=r;}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1";}writeWhere(t,e){e.where=t||"1=1";}clone(){return new S$k(l$2w({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:r$1K(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};R$d.MAX_MAX_RECORD_COUNT_FACTOR=5,e$25([d$1T({json:{write:!0}})],R$d.prototype,"aggregateIds",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],R$d.prototype,"cacheHint",void 0),e$25([d$1T({json:{write:!0}})],R$d.prototype,"datumTransformation",void 0),e$25([c$35("datumTransformation")],R$d.prototype,"castDatumTransformation",null),e$25([d$1T({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],R$d.prototype,"distance",void 0),e$25([d$1T({type:K$7,json:{write:!0}})],R$d.prototype,"dynamicDataSource",void 0),e$25([d$1T({type:String,json:{write:!0}})],R$d.prototype,"formatOf3DObjects",void 0),e$25([d$1T({type:String,json:{write:!0}})],R$d.prototype,"gdbVersion",void 0),e$25([d$1T({types:i$1W,json:{read:d$1o,write:!0}})],R$d.prototype,"geometry",void 0),e$25([d$1T({type:Number,json:{write:!0}})],R$d.prototype,"geometryPrecision",void 0),e$25([d$1T({type:[String],json:{write:!0}})],R$d.prototype,"groupByFieldsForStatistics",void 0),e$25([d$1T({type:String,json:{write:!0}})],R$d.prototype,"having",void 0),e$25([d$1T({type:Date})],R$d.prototype,"historicMoment",void 0),e$25([r$1m("historicMoment")],R$d.prototype,"writeHistoricMoment",null),e$25([d$1T({type:Number,json:{write:!0}})],R$d.prototype,"maxAllowableOffset",void 0),e$25([d$1T({type:Number,cast:t=>t<1?1:t>S$k.MAX_MAX_RECORD_COUNT_FACTOR?S$k.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],R$d.prototype,"maxRecordCountFactor",void 0),e$25([d$1T({type:["xyFootprint"],json:{write:!0}})],R$d.prototype,"multipatchOption",void 0),e$25([d$1T({type:Number,json:{read:{source:"resultRecordCount"}}})],R$d.prototype,"num",void 0),e$25([d$1T({json:{write:!0}})],R$d.prototype,"objectIds",void 0),e$25([d$1T({type:[String],json:{write:!0}})],R$d.prototype,"orderByFields",void 0),e$25([d$1T({type:[String],json:{write:!0}})],R$d.prototype,"outFields",void 0),e$25([d$1T({type:k$w,json:{name:"outSR",write:!0}})],R$d.prototype,"outSpatialReference",void 0),e$25([d$1T({type:[m$W],json:{write:{enabled:!0,overridePolicy(){return {enabled:r$1K(this.outStatistics)&&this.outStatistics.length>0}}}}})],R$d.prototype,"outStatistics",void 0),e$25([d$1T({json:{write:!0}})],R$d.prototype,"parameterValues",void 0),e$25([r$1m("parameterValues")],R$d.prototype,"writeParameterValues",null),e$25([d$1T({type:b$10,json:{write:!0}})],R$d.prototype,"pixelSize",void 0),e$25([d$1T({type:a$1k,json:{write:!0}})],R$d.prototype,"quantizationParameters",void 0),e$25([d$1T({type:[Object],json:{write:!0}})],R$d.prototype,"rangeValues",void 0),e$25([d$1T({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return {enabled:"relation"===this.spatialRelationship}}}}})],R$d.prototype,"relationParameter",void 0),e$25([d$1T({type:String,json:{write:!0}})],R$d.prototype,"resultType",void 0),e$25([d$1T({type:Boolean,json:{default:!1,write:!0}})],R$d.prototype,"returnCentroid",void 0),e$25([d$1T({type:Boolean,json:{default:!1,write:!0}})],R$d.prototype,"returnDistinctValues",void 0),e$25([d$1T({type:Boolean,json:{default:!0,write:!0}})],R$d.prototype,"returnExceededLimitFeatures",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],R$d.prototype,"returnGeometry",void 0),e$25([d$1T({type:Boolean,json:{default:!1,write:!0}})],R$d.prototype,"returnQueryGeometry",void 0),e$25([d$1T({type:Boolean,json:{default:!1,write:!0}})],R$d.prototype,"returnM",void 0),e$25([d$1T({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],R$d.prototype,"returnZ",void 0),e$25([d$1T({type:k$w,json:{write:!0}})],R$d.prototype,"sourceSpatialReference",void 0),e$25([r$12(v$m,{ignoreUnknown:!1,name:"spatialRel"})],R$d.prototype,"spatialRelationship",void 0),e$25([d$1T({type:Number,json:{read:{source:"resultOffset"}}})],R$d.prototype,"start",void 0),e$25([r$1m("start"),r$1m("num")],R$d.prototype,"writeStart",null),e$25([d$1T({type:String,json:{write:!0}})],R$d.prototype,"sqlFormat",void 0),e$25([d$1T({type:String,json:{write:!0}})],R$d.prototype,"text",void 0),e$25([d$1T({type:y$F,json:{write:!0}})],R$d.prototype,"timeExtent",void 0),e$25([d$1T({type:Boolean,json:{default:!1,write:!0}})],R$d.prototype,"timeReferenceUnknownClient",void 0),e$25([r$12(g$z,{ignoreUnknown:!1}),d$1T({json:{write:{overridePolicy(t){return {enabled:t&&this.distance>0}}}}})],R$d.prototype,"units",void 0),e$25([d$1T({type:String,json:{write:{overridePolicy(t){return {enabled:null!=t||this.start>0}}}}})],R$d.prototype,"where",void 0),e$25([r$1m("where")],R$d.prototype,"writeWhere",null),R$d=S$k=e$25([i$2z("esri.rest.support.Query")],R$d);const b$q=R$d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$1n;const m$V=new o$1J({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),u$S=new o$1J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let d$R=c$1n=class extends a$2N{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null;}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:s,objectIds:n,units:a,distance:l}=this;return new b$q({geometry:l$2w(i),objectIds:l$2w(n),spatialRelationship:r,timeExtent:l$2w(s),where:t,units:a,distance:l,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:s,units:n,distance:a}=this;return new c$1n({geometry:l$2w(t),objectIds:l$2w(s),spatialRelationship:i,timeExtent:l$2w(r),where:e,units:n,distance:a})}};e$25([d$1T({type:String,json:{write:!0}})],d$R.prototype,"where",void 0),e$25([d$1T({types:i$1W,json:{write:!0}})],d$R.prototype,"geometry",void 0),e$25([d$1T({type:m$V.apiValues,json:{name:"spatialRel",read:{reader:m$V.read},write:{allowNull:!1,writer:m$V.write,overridePolicy(){return {enabled:r$1K(this.geometry)}}}}})],d$R.prototype,"spatialRelationship",void 0),e$25([d$1T({type:Number,json:{write:{overridePolicy(e){return {enabled:null!=e&&null!=this.geometry}}}}})],d$R.prototype,"distance",void 0),e$25([d$1T({type:[Number],json:{write:!0}})],d$R.prototype,"objectIds",void 0),e$25([d$1T({type:u$S.apiValues,json:{read:u$S.read,write:{writer:u$S.write,overridePolicy(e){return {enabled:null!=e&&null!=this.geometry}}}}})],d$R.prototype,"units",void 0),e$25([d$1T({type:y$F,json:{write:!0}})],d$R.prototype,"timeExtent",void 0),d$R=c$1n=e$25([i$2z("esri.layers.support.FeatureFilter")],d$R);const y$E=d$R;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$Q;let p$1g=d$Q=class extends a$2N{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1;}clone(){return new d$Q({filter:r$1K(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};e$25([d$1T({type:y$E,json:{write:!0,origins:{"web-map":{write:{allowNull:!0,writer(e,r,t,o){if(!e)return void(r[t]=e);const s=e.write({},o),i=Object.keys(s);1===i.length&&"where"===i[0]?r[t]=s:r[t]=null;}}}}}})],p$1g.prototype,"filter",void 0),e$25([d$1T({json:{write:!0,origins:{"web-map":{read:{reader:n$1w},write:{allowNull:!0,writer:a$1p}}}}})],p$1g.prototype,"includedEffect",void 0),e$25([d$1T({json:{write:!0,origins:{"web-map":{read:{reader:n$1w},write:{allowNull:!0,writer:a$1p}}}}})],p$1g.prototype,"excludedEffect",void 0),e$25([d$1T({type:Boolean,json:{write:!0,name:"showExcludedLabels",default:!1}})],p$1g.prototype,"excludedLabelsVisible",void 0),p$1g=d$Q=e$25([i$2z("esri.layers.support.FeatureEffect")],p$1g);const a$1j=p$1g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$M=t=>{let p=class extends t{constructor(){super(...arguments),this.featureEffect=null;}};return e$25([d$1T({type:a$1j,json:{origins:{"web-map":{write:{allowNull:!0}}}}})],p.prototype,"featureEffect",void 0),p=e$25([i$2z("esri.layers.mixins.FeatureEffectLayer")],p),p};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$M={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function a$1i(e){if(!e)return e;const{start:i,end:o}=e;return new y$F({start:r$1K(i)?s$14(i,-i.getTimezoneOffset(),"minutes"):i,end:r$1K(o)?s$14(o,-o.getTimezoneOffset(),"minutes"):o})}function l$19(e){if(!e)return e;const{start:i,end:o}=e;return new y$F({start:r$1K(i)?s$14(i,i.getTimezoneOffset(),"minutes"):i,end:r$1K(o)?s$14(o,o.getTimezoneOffset(),"minutes"):o})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$1f;let i$15=p$1f=class extends a$2N{async collectRequiredFields(r,s){return b$O(r,s,this.expression)}clone(){return new p$1f({expression:this.expression,title:this.title})}};e$25([d$1T({type:String,json:{write:!0}})],i$15.prototype,"expression",void 0),e$25([d$1T({type:String,json:{write:!0}})],i$15.prototype,"title",void 0),i$15=p$1f=e$25([i$2z("esri.layers.support.FeatureExpressionInfo")],i$15);const c$1m=i$15;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$L(){const n=Object.keys(m$1g);return n.sort(),n}const o$M=e$L();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$18;const m$U=s$24()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),d$P=new o$1J({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let c$1l=l$18=class extends a$2N{constructor(){super(...arguments),this.offset=null;}readFeatureExpressionInfo(e,r){return null!=e?e:r.featureExpression&&0===r.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,r,o,t){r[o]=e.write({},t),"0"===e.expression&&(r.featureExpression={value:0});}get mode(){const{offset:e,featureExpressionInfo:r}=this;return this._isOverridden("mode")?this._get("mode"):r$1K(e)||r?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e);}set unit(e){this._set("unit",e);}write(e,r){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,r):null}clone(){return new l$18({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};e$25([d$1T({type:c$1m,json:{write:!0}})],c$1l.prototype,"featureExpressionInfo",void 0),e$25([o$1v("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],c$1l.prototype,"readFeatureExpressionInfo",null),e$25([r$1m("featureExpressionInfo",{featureExpressionInfo:{type:c$1m},"featureExpression.value":{type:[0]}})],c$1l.prototype,"writeFeatureExpressionInfo",null),e$25([d$1T({type:m$U.apiValues,nonNullable:!0,json:{type:m$U.jsonValues,read:m$U.read,write:{writer:m$U.write,isRequired:!0}}})],c$1l.prototype,"mode",null),e$25([d$1T({type:Number,json:{write:!0}})],c$1l.prototype,"offset",void 0),e$25([d$1T({type:o$M,json:{type:String,read:d$P.read,write:d$P.write}})],c$1l.prototype,"unit",null),c$1l=l$18=e$25([i$2z("esri.layers.support.ElevationInfo")],c$1l);const x$i=c$1l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$17={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},p$1e={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,r)=>!r.disablePopup},write:{enabled:!0,writer(e,r,i){r[i]=!e;}}}},m$T={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},f$B={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:p$2c}}},c$1k={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},d$O={value:null,type:x$i,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function y$D(e){return {type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const u$R={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},w$p={...u$R,json:{...u$R.json,origins:{"web-document":{...u$R.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,r,i)=>i&&"service"!==i.origin||!r.drawingInfo||void 0===r.drawingInfo.transparency?r.layerDefinition&&r.layerDefinition.drawingInfo&&void 0!==r.layerDefinition.drawingInfo.transparency?r$W(r.layerDefinition.drawingInfo.transparency):void 0:r$W(r.drawingInfo.transparency)}}},g$y={type:y$F,readOnly:!0,get(){var e,r;if(null==(e=this.layer)||!e.timeInfo)return null;const{datesInUnknownTimezone:i,timeOffset:n,useViewTime:a}=this.layer,s=null==(r=this.view)?void 0:r.timeExtent;let l=this.layer.timeExtent;i&&(l=l$19(l));let p=a?s&&l?s.intersection(l):s||l:l;if(!p||p.isEmpty||p.isAllTime)return p;n&&(p=p.offset(-n.value,n.unit)),i&&(p=a$1i(p));const m=this._get("timeExtent");return p.equals(m)?m:p}},v$l={type:M$A,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,n)=>{const t=M$A.fromJSON(e);return null!=n.spatialReference&&"object"==typeof n.spatialReference&&(t.spatialReference=k$w.fromJSON(n.spatialReference)),t}}}},read:!1}},j$h={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},b$p={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},I$j={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const y$C=y=>{let u=class extends y{constructor(){super(...arguments),this.title=null;}writeListMode(e,r,i,t){(t&&"ground"===t.layerContainerType||e&&g$11(this,i,{},t))&&(r[i]=e);}writeOperationalLayerType(e,r,i,t){!e||t&&"tables"===t.layerContainerType||(r.layerType=e);}writeTitle(e,r){r.title=e||"Layer";}read(e,r){r&&(r.layer=this),d$1G(this,e,(r=>super.read(e,r)),r);}write(e,t){if(null!=t&&t.origin){const e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,i=e$M[e];let s=i&&i[this.operationalLayerType];var o;if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(s=!1),!s)return null==(o=t.messages)||o.push(new s$2l("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const s=super.write(e,{...t,layer:this}),a=!!t&&!!t.messages&&!!t.messages.filter((e=>e instanceof s$2l&&"web-document-write:property-required"===e.name)).length;var n;return F$s(null==s?void 0:s.url)?(null==t||null==(n=t.messages)||n.push(new s$2l("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&a?null:s}beforeSave(){}};return e$25([d$1T({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],u.prototype,"id",void 0),e$25([d$1T({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],u.prototype,"listMode",void 0),e$25([r$1m("listMode")],u.prototype,"writeListMode",null),e$25([d$1T({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],u.prototype,"operationalLayerType",void 0),e$25([r$1m("operationalLayerType")],u.prototype,"writeOperationalLayerType",null),e$25([d$1T(u$R)],u.prototype,"opacity",void 0),e$25([d$1T({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],u.prototype,"title",void 0),e$25([r$1m("title")],u.prototype,"writeTitle",null),e$25([d$1T({type:Boolean,json:{name:"visibility",origins:{"web-document":{name:"visibility",default:!0},"portal-item":{name:"visibility",read:{source:["visible","visibility"]}}}}})],u.prototype,"visible",void 0),u=e$25([i$2z("esri.layers.mixins.OperationalLayer")],u),u};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$14;const p$1d=new o$1J({asc:"ascending",desc:"descending"});let n$1s=i$14=class extends a$2N{constructor(r){super(r),this.field=null,this.valueExpression=null,this.order="ascending";}clone(){return new i$14({field:this.field,valueExpression:this.valueExpression,order:this.order})}};e$25([d$1T({type:String,json:{write:!0}})],n$1s.prototype,"field",void 0),e$25([d$1T({type:String,json:{write:!0}})],n$1s.prototype,"valueExpression",void 0),e$25([d$1T({type:p$1d.apiValues,json:{read:p$1d.read,write:p$1d.write}})],n$1s.prototype,"order",void 0),n$1s=i$14=e$25([i$2z("esri.layers.support.OrderByInfo")],n$1s);const c$1j=n$1s;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1r(r,e,o){if(!r)return null;const t=r.find((r=>!!r.field));if(!t)return null;const i=new c$1j;return i.read(t,o),[i]}function c$1i(r,o,t,s){const i=r.find((r=>!!r.field));i&&o$1$(t,[i.toJSON()],o);}const p$1c=e=>{let i=class extends e{constructor(){super(...arguments),this.orderBy=null;}};return e$25([d$1T({type:[c$1j],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:n$1r},write:{target:"layerDefinition.orderBy",writer:c$1i}}})],i.prototype,"orderBy",void 0),i=e$25([i$2z("esri.layers.mixins.OrderedLayer")],i),i};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const v$k=s$2n.getLogger("esri.layers.mixins.PortalLayer"),w$o=i=>{let w=class extends i{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0;}destroy(){var t;null==(t=this.portalItem)||t.destroy(),this.portalItem=null;}set portalItem(t){t!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",t));}readPortalItem(t,r,e){if(r.itemId)return new b$$({id:r.itemId,portal:e&&e.portal})}writePortalItem(t,r){t&&t.id&&(r.itemId=t.id);}async loadFromPortal(t,r){if(this.portalItem&&this.portalItem.id)try{const e=await import('./layersLoader.js').then(function (n) { return n.l; });return h$1E(r),await e.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},r)}catch(e){throw d$1Z(e)||v$k.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(t){this._set("userHasEditingPrivileges",await this.fetchUserHasEditingPrivileges(t).catch((t=>(b$17(t),!0))));}async fetchUserHasEditingPrivileges(t){const e=this.url?null==n$2R?void 0:n$2R.findCredential(this.url):null;if(!e)return !0;const s=P$b.credential===e?P$b.user:await this.fetchEditingUser(t);return P$b.credential=e,P$b.user=s,t$1T(s)||null==s.privileges||s.privileges.includes("features:user:edit")}async fetchEditingUser(t){var o,i;const a=null==(o=this.portalItem)||null==(i=o.portal)?void 0:i.user;if(a)return a;const p=n$2R.findServerInfo(this.url);if(null==p||!p.owningSystemUrl)return null;const n=`${p.owningSystemUrl}/sharing/rest`,m=B$i.getDefault();if(m&&m.loaded&&z$s(m.restUrl)===z$s(n))return m.user;const c=`${n}/community/self`,d=r$1K(t)?t.signal:null,h=await a$2M(E$v(c,{authMode:"no-prompt",query:{f:"json"},signal:d}));return h.ok?p$2V.fromJSON(h.value.data):null}read(t,r){r&&(r.layer=this),super.read(t,r);}write(t,r){const e=r&&r.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||B$i.getDefault());return e&&s&&!P$u(s.restUrl,e.restUrl)?(r.messages&&r.messages.push(new s$2l("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...r,layer:this})}};return e$25([d$1T({type:b$$})],w.prototype,"portalItem",null),e$25([o$1v("web-document","portalItem",["itemId"])],w.prototype,"readPortalItem",null),e$25([r$1m("web-document","portalItem",{itemId:{type:String}})],w.prototype,"writePortalItem",null),e$25([d$1T()],w.prototype,"resourceReferences",void 0),e$25([d$1T({readOnly:!0})],w.prototype,"userHasEditingPrivileges",void 0),w=e$25([i$2z("esri.layers.mixins.PortalLayer")],w),w},P$b={credential:null,user:null};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$L=new S$I,n$1q=new WeakMap;function o$L(e){c$1h(e)&&t$L.push(e);}function s$13(e){c$1h(e)&&t$L.includes(e)&&t$L.remove(e);}function c$1h(e){return e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function f$A(e,r){return Number.isFinite(e)&&Number.isFinite(r)?r<=0?e:f$A(r,e%r):0}let i$13=0,a$1h=0;function l$16(){const e=Date.now();for(const o of t$L)if(o.refreshInterval){var r;e-(null!=(r=n$1q.get(o))?r:0)+5>=6e4*o.refreshInterval&&(n$1q.set(o,e),o.refresh(e));}}l$2r((()=>{const e=Date.now();let r=0;for(const o of t$L)r=f$A(Math.round(6e4*o.refreshInterval),r),o.refreshInterval?n$1q.get(o)||n$1q.set(o,e):n$1q.delete(o);if(r!==a$1h){if(a$1h=r,clearInterval(i$13),0===a$1h)return void(i$13=0);i$13=setInterval(l$16,a$1h);}}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$1p=p=>{let n=class extends p{constructor(...e){super(...e),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=z$r((()=>this.hasDataChanged())),this.when().then((()=>{o$L(this);}),(()=>{}));}destroy(){s$13(this);}get refreshParameters(){return {_ts:this.refreshTimestamp||null}}refresh(e=Date.now()){g$1c(this._debounceHasDataChanged()).then((r=>{r&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:r});}),(e=>{s$2n.getLogger(this.declaredClass).error(e),this.emit("refresh",{dataChanged:!1,error:e});}));}async hasDataChanged(){return !0}};return e$25([d$1T({type:Number,cast:e=>e>=.1?e:e<=0?0:.1,json:{write:!0}})],n.prototype,"refreshInterval",void 0),e$25([d$1T({readOnly:!0})],n.prototype,"refreshTimestamp",void 0),e$25([d$1T()],n.prototype,"refreshParameters",null),n=e$25([i$2z("esri.layers.mixins.RefreshableLayer")],n),n};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$12=s=>{let t=class extends s{constructor(){super(...arguments),this.minScale=0,this.maxScale=0;}get scaleRangeId(){return `${this.minScale},${this.maxScale}`}};return e$25([d$1T({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),e$25([d$1T({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),e$25([d$1T({readOnly:!0})],t.prototype,"scaleRangeId",null),t=e$25([i$2z("esri.layers.mixins.ScaleRangeLayer")],t),t};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$K=s$24()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$1b;let a$1g=p$1b=class extends a$2N{constructor(r){super(r),this.value=0,this.unit="milliseconds";}toMilliseconds(){return o$N(this.value,this.unit,"milliseconds")}clone(){return new p$1b({value:this.value,unit:this.unit})}};e$25([d$1T({type:Number,json:{write:!0},nonNullable:!0})],a$1g.prototype,"value",void 0),e$25([d$1T({type:e$K.apiValues,json:{type:e$K.jsonValues,read:e$K.read,write:e$K.write},nonNullable:!0})],a$1g.prototype,"unit",void 0),a$1g=p$1b=e$25([i$2z("esri.TimeInterval")],a$1g);const l$15=a$1g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$12;let a$1f=i$12=class extends a$2N{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null;}readRespectsDaylightSaving(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new i$12({respectsDaylightSaving:e,timezone:t})}};e$25([d$1T({type:Boolean,json:{write:!0}})],a$1f.prototype,"respectsDaylightSaving",void 0),e$25([o$1v("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],a$1f.prototype,"readRespectsDaylightSaving",null),e$25([d$1T({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],a$1f.prototype,"timezone",void 0),a$1f=i$12=e$25([i$2z("esri.layers.support.TimeReference")],a$1f);const p$1a=a$1f;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$N;let c$1g=d$N=class extends a$2N{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0;}readFullTimeExtent(e,r){if(!r.timeExtent||!Array.isArray(r.timeExtent)||2!==r.timeExtent.length)return null;const i=new Date(r.timeExtent[0]),l=new Date(r.timeExtent[1]);return new y$F({start:i,end:l})}writeFullTimeExtent(e,t){e&&r$1K(e.start)&&r$1K(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null;}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new l$15({value:t.timeInterval,unit:e$K.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new l$15({value:t.defaultTimeInterval,unit:e$K.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit;}else t.timeInterval=null,t.timeIntervalUnits=null;}clone(){const{cumulative:e,endField:t,hasLiveData:r,interval:i,startField:o,timeReference:n,fullTimeExtent:a,trackIdField:s,useTime:m}=this;return new d$N({cumulative:e,endField:t,hasLiveData:r,interval:i,startField:o,timeReference:l$2w(n),fullTimeExtent:l$2w(a),trackIdField:s,useTime:m})}};e$25([d$1T({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],c$1g.prototype,"cumulative",void 0),e$25([d$1T({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],c$1g.prototype,"endField",void 0),e$25([d$1T({type:y$F,json:{write:{enabled:!0,allowNull:!0}}})],c$1g.prototype,"fullTimeExtent",void 0),e$25([o$1v("fullTimeExtent",["timeExtent"])],c$1g.prototype,"readFullTimeExtent",null),e$25([r$1m("fullTimeExtent")],c$1g.prototype,"writeFullTimeExtent",null),e$25([d$1T({type:Boolean,json:{write:!0}})],c$1g.prototype,"hasLiveData",void 0),e$25([d$1T({type:l$15,json:{write:{enabled:!0,allowNull:!0}}})],c$1g.prototype,"interval",void 0),e$25([o$1v("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],c$1g.prototype,"readInterval",null),e$25([r$1m("interval")],c$1g.prototype,"writeInterval",null),e$25([d$1T({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],c$1g.prototype,"startField",void 0),e$25([d$1T({type:p$1a,json:{write:{enabled:!0,allowNull:!0}}})],c$1g.prototype,"timeReference",void 0),e$25([d$1T({type:String,json:{write:{enabled:!0,allowNull:!0}}})],c$1g.prototype,"trackIdField",void 0),e$25([d$1T({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],c$1g.prototype,"useTime",void 0),c$1g=d$N=e$25([i$2z("esri.layers.support.TimeInfo")],c$1g);const v$j=c$1g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$1e=f=>{let a=class extends f{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0;}readOffset(e,t){const o=t.timeInfo.exportOptions;if(!o)return null;const i=o.timeOffset,s=e$K.fromJSON(o.timeOffsetUnits);return i&&s?new l$15({value:i,unit:s}):null}set timeInfo(e){m$1G(e,this.fieldsIndex),this._set("timeInfo",e);}};return e$25([d$1T({type:y$F,json:{write:!1}})],a.prototype,"timeExtent",void 0),e$25([d$1T({type:l$15})],a.prototype,"timeOffset",void 0),e$25([o$1v("service","timeOffset",["timeInfo.exportOptions"])],a.prototype,"readOffset",null),e$25([d$1T({value:null,type:v$j,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],a.prototype,"timeInfo",null),e$25([d$1T({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"useViewTime",void 0),a=e$25([i$2z("esri.layers.mixins.TemporalLayer")],a),a};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$J;let c$1f=e$J=class extends a$2N{constructor(o){super(o);}clone(){const{name:o,fields:r,isAscending:s,isUnique:t,description:c}=this;return new e$J({name:o,fields:r,isAscending:s,isUnique:t,description:c})}};e$25([d$1T({constructOnly:!0})],c$1f.prototype,"name",void 0),e$25([d$1T({constructOnly:!0})],c$1f.prototype,"fields",void 0),e$25([d$1T({constructOnly:!0})],c$1f.prototype,"isAscending",void 0),e$25([d$1T({constructOnly:!0})],c$1f.prototype,"isUnique",void 0),e$25([d$1T({constructOnly:!0})],c$1f.prototype,"description",void 0),c$1f=e$J=e$25([i$2z("esri.layers.support.FeatureIndex")],c$1f);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let t$K=class extends a$2N{constructor(){super(...arguments),this.type=null;}};e$25([d$1T({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],t$K.prototype,"type",void 0),t$K=e$25([i$2z("esri.layers.support.FeatureReduction")],t$K);const p$19=t$K;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var r$L;let e$I=r$L=class extends a$2N{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null;}clone(){return new r$L({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};e$25([d$1T({type:String,json:{write:!0}})],e$I.prototype,"statisticType",void 0),e$25([d$1T({type:String,json:{write:!0}})],e$I.prototype,"onStatisticField",void 0),e$25([d$1T({type:String,json:{write:!0}})],e$I.prototype,"onStatisticValueExpression",void 0),e$I=r$L=e$25([i$2z("esri.layers.support.OutStatistic")],e$I);const p$18=e$I;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$17;let i$11=p$17=class extends a$2N{constructor(){super(...arguments),this.name=null;}clone(){return new p$17({name:this.name,outStatistic:this.outStatistic.clone()})}};e$25([d$1T({type:String,json:{write:!0}})],i$11.prototype,"name",void 0),e$25([d$1T({type:p$18,json:{write:!0}})],i$11.prototype,"outStatistic",void 0),i$11=p$17=e$25([i$2z("esri.layers.support.AggregateField")],i$11);const c$1e=i$11;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$1o="__begin__",r$K="__end__",s$11=new RegExp(n$1o,"ig"),t$J=new RegExp(r$K,"ig"),o$K=new RegExp("^"+n$1o,"i"),i$10=new RegExp(r$K+"$","i"),l$14='"',a$1d=l$14+" + ",c$1d=" + "+l$14;function p$16(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function u$Q(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function x$h(e){const n={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(n.expression=e.labelExpressionInfo.value,n.type="conventional"):e.labelExpressionInfo.expression&&(n.expression=e.labelExpressionInfo.expression,n.type="arcade"):null!=e.labelExpression&&(n.expression=p$16(e.labelExpression),n.type="conventional"),n}function f$z(e){const n=x$h(e);if(!n)return null;switch(n.type){case"conventional":return w$n(n.expression);case"arcade":return n.expression}return null}function g$x(e){const n=x$h(e);if(!n)return null;switch(n.type){case"conventional":return $$b(n.expression);case"arcade":return _$f(n.expression)}return null}function w$n(p){let u;return p?(u=r$1J(p,(e=>n$1o+'$feature["'+e+'"]'+r$K)),u=o$K.test(u)?u.replace(o$K,""):l$14+u,u=i$10.test(u)?u.replace(i$10,""):u+l$14,u=u.replace(s$11,a$1d).replace(t$J,c$1d)):u='""',u}const E$c=/^\s*\{([^}]+)\}\s*$/i;function $$b(e){const n=e.match(E$c);return n&&n[1].trim()||null}const b$o=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,m$S=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,R$c=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function _$f(e){if(!e)return null;let n=b$o.exec(e)||m$S.exec(e);return n?n[1]||n[3]:(n=R$c.exec(e),n?n[2]:null)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$13;let n$1n=l$13=class extends a$2N{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null;}readExpression(r,e){return e.value?w$n(e.value):r}writeExpression(r,e,s){null!=this.value&&(r=w$n(this.value)),null!=r&&(e[s]=r);}clone(){return new l$13({expression:this.expression,title:this.title,value:this.value})}};e$25([d$1T({type:String,json:{write:{writerEnsuresNonNull:!0}}})],n$1n.prototype,"expression",void 0),e$25([o$1v("expression",["expression","value"])],n$1n.prototype,"readExpression",null),e$25([r$1m("expression")],n$1n.prototype,"writeExpression",null),e$25([d$1T({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],n$1n.prototype,"title",void 0),e$25([d$1T({json:{read:!1,write:!1}})],n$1n.prototype,"value",void 0),n$1n=l$13=e$25([i$2z("esri.layers.support.LabelExpressionInfo")],n$1n);const a$1c=n$1n;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$H=[252,146,31,255],l$12={type:"esriSMS",style:"esriSMSCircle",size:6,color:e$H,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o$J={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e$H},S$j={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},t$I={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},r$J={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},s$10={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},y$B={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
y$10.fromJSON(l$12);m$1z.fromJSON(o$J);S$r.fromJSON(S$j);const y$A=c$1Z.fromJSON(t$I);const N$a=y$10.fromJSON(r$J),O$a=m$1z.fromJSON(s$10),j$g=S$r.fromJSON(y$B);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var d$M;const y$z=new o$1J({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function w$m(e){return !e||"service"!==e.origin&&!x$g(e.layer)}function x$g(e){return "map-image"===(null==e?void 0:e.type)}function P$a(e){var r,t;return !!x$g(e)&&!(null==(r=e.capabilities)||null==(t=r.exportMap)||!t.supportsArcadeExpressionForLabeling)}function L$h(e){return w$m(e)||P$a(e.layer)}let g$w=d$M=class extends a$2N{constructor(e){super(e),this.type="label",this.name=null,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.maxScale=0,this.minScale=0,this.symbol=y$A,this.useCodedValues=void 0,this.where=null;}static evaluateWhere(e,r){const t=function(e,r,t){switch(r){case"=":return e==t;case"<>":return e!=t;case">":return e>t;case">=":return e>=t;case"<":return e<t;case"<=":return e<=t}return !1};try{if(null==e)return !0;const o=e.split(" ");if(3===o.length)return t(r[o[0]],o[1],o[2]);if(7===o.length){const e=t(r[o[0]],o[1],o[2]),n=o[3],s=t(r[o[4]],o[5],o[6]);switch(n){case"AND":return e&&s;case"OR":return e||s}}return !1}catch(o){console.log("Error.: can't parse = "+e);}}readLabelExpression(e,r){const t=r.labelExpressionInfo;if(!t||!t.value&&!t.expression)return e}writeLabelExpression(e,r,t){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=u$Q(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const r=_$f(this.labelExpressionInfo.expression);r&&(e="["+r+"]");}null!=e&&(r[t]=e);}writeLabelExpressionInfo(e,r,t,o){if(null==e&&null!=this.labelExpression&&w$m(o))e=new a$1c({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(o);n.expression&&(r[t]=n);}writeMaxScale(e,r){(e||this.minScale)&&(r.maxScale=e);}writeMinScale(e,r){(e||this.maxScale)&&(r.minScale=e);}getLabelExpression(){return x$h(this)}getLabelExpressionArcade(){return f$z(this)}getLabelExpressionSingleField(){return g$x(this)}hash(){return JSON.stringify(this)}clone(){return new d$M({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:l$2w(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:l$2w(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};e$25([d$1T({type:String,json:{write:!0}})],g$w.prototype,"name",void 0),e$25([d$1T({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],g$w.prototype,"deconflictionStrategy",void 0),e$25([d$1T({type:String,json:{write:{overridePolicy(e,r,t){return this.labelExpressionInfo&&"service"===(null==t?void 0:t.origin)&&P$a(t.layer)?{enabled:!1}:{allowNull:!0}}}}})],g$w.prototype,"labelExpression",void 0),e$25([o$1v("labelExpression")],g$w.prototype,"readLabelExpression",null),e$25([r$1m("labelExpression")],g$w.prototype,"writeLabelExpression",null),e$25([d$1T({type:a$1c,json:{write:{overridePolicy:(e,r,t)=>L$h(t)?{allowNull:!0}:{enabled:!1}}}})],g$w.prototype,"labelExpressionInfo",void 0),e$25([r$1m("labelExpressionInfo")],g$w.prototype,"writeLabelExpressionInfo",null),e$25([d$1T({type:y$z.apiValues,json:{type:y$z.jsonValues,read:y$z.read,write:y$z.write}})],g$w.prototype,"labelPlacement",void 0),e$25([d$1T({type:Number})],g$w.prototype,"maxScale",void 0),e$25([r$1m("maxScale")],g$w.prototype,"writeMaxScale",null),e$25([d$1T({type:Number})],g$w.prototype,"minScale",void 0),e$25([r$1m("minScale")],g$w.prototype,"writeMinScale",null),e$25([d$1T({types:P$h,json:{origins:{"web-scene":{types:F$f,write:m$1d,default:null}},write:m$1d,default:null}})],g$w.prototype,"symbol",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],g$w.prototype,"useCodedValues",void 0),e$25([d$1T({type:String,json:{write:!0}})],g$w.prototype,"where",void 0),g$w=d$M=e$25([i$2z("esri.layers.support.LabelClass")],g$w);const E$b=g$w;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$R;let d$L=m$R=class extends a$2N{constructor(e){super(e),this.type="cluster",this.clusterRadius=o$10("80px"),this.clusterMinSize=o$10("12px"),this.clusterMaxSize=o$10("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null;}clone(){return new m$R({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:l$2w(this.labelingInfo),labelsVisible:this.labelsVisible,fields:l$2w(this.fields),popupEnabled:this.popupEnabled,popupTemplate:l$2w(this.popupTemplate)})}};e$25([d$1T({type:["cluster"],readOnly:!0,json:{write:!0}})],d$L.prototype,"type",void 0),e$25([d$1T({type:Number,cast:e=>"auto"===e?e:o$10(e),json:{write:!0}})],d$L.prototype,"clusterRadius",void 0),e$25([d$1T({type:Number,cast:o$10,json:{write:!0}})],d$L.prototype,"clusterMinSize",void 0),e$25([d$1T({type:Number,cast:o$10,json:{write:!0}})],d$L.prototype,"clusterMaxSize",void 0),e$25([d$1T(p$1e)],d$L.prototype,"popupEnabled",void 0),e$25([d$1T({type:M$o,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],d$L.prototype,"popupTemplate",void 0),e$25([d$1T({types:D$g})],d$L.prototype,"symbol",void 0),e$25([d$1T({type:[E$b],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],d$L.prototype,"labelingInfo",void 0),e$25([d$1T(m$T)],d$L.prototype,"labelsVisible",void 0),e$25([d$1T({type:[c$1e],json:{write:!0}})],d$L.prototype,"fields",void 0),d$L=m$R=e$25([i$2z("esri.layers.support.FeatureReductionCluster")],d$L);const b$n=d$L;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$H;let c$1c=t$H=class extends p$19{constructor(r){super(r),this.type="selection";}clone(){return new t$H}};e$25([d$1T({type:["selection"]})],c$1c.prototype,"type",void 0),c$1c=t$H=e$25([i$2z("esri.layers.support.FeatureReductionSelection")],c$1c);const p$15=c$1c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$$={types:{key:"type",base:p$19,typeMap:{selection:p$15,cluster:b$n}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:{key:"type",base:p$19,typeMap:{selection:b$n}}},"web-scene":{types:{key:"type",base:p$19,typeMap:{selection:p$15}}}}}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$_=new o$1J({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let l$11=class extends a$2N{constructor(o){super(o),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null;}};e$25([d$1T({json:{write:!0}})],l$11.prototype,"name",void 0),e$25([d$1T({json:{write:!0}})],l$11.prototype,"description",void 0),e$25([d$1T({json:{read:s$_.read,write:s$_.write}})],l$11.prototype,"drawingTool",void 0),e$25([d$1T({json:{write:!0}})],l$11.prototype,"prototype",void 0),e$25([d$1T({json:{write:!0}})],l$11.prototype,"thumbnail",void 0),l$11=e$25([i$2z("esri.layers.support.FeatureTemplate")],l$11);const a$1b=l$11;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$1b=class extends a$2N{constructor(o){super(o),this.id=null,this.name=null,this.domains=null,this.templates=null;}readDomains(o){const r={};for(const s of Object.keys(o))r[s]=t$R(o[s]);return r}writeDomains(o,r){const s={};for(const e of Object.keys(o)){var t;if(o[e])s[e]=null==(t=o[e])?void 0:t.toJSON();}r.domains=s;}};e$25([d$1T({json:{write:!0}})],c$1b.prototype,"id",void 0),e$25([d$1T({json:{write:!0}})],c$1b.prototype,"name",void 0),e$25([d$1T({json:{write:!0}})],c$1b.prototype,"domains",void 0),e$25([o$1v("domains")],c$1b.prototype,"readDomains",null),e$25([r$1m("domains")],c$1b.prototype,"writeDomains",null),e$25([d$1T({type:[a$1b],json:{write:!0}})],c$1b.prototype,"templates",void 0),c$1b=e$25([i$2z("esri.layers.support.FeatureType")],c$1b);const m$Q=c$1b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$G(e){return "date"===e.type||"esriFieldTypeDate"===e.type}function s$Z(e){return "oid"===e.type||"esriFieldTypeOID"===e.type}function l$10(e){return "global-id"===e.type||"esriFieldTypeGlobalID"===e.type}class d$K{constructor(i){if(this.fields=i,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!i)return;const d=[];for(const n of i){const i=n&&n.name;if(i){const u=r$I(i);this._fieldsMap.set(i,n),this._fieldsMap.set(u,n),d.push(u),t$G(n)?(this.dateFields.push(n),this._dateFieldsSet.add(n)):B$c(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n)),s$Z(n)||l$10(n)||(n.editable=null==n.editable||!!n.editable,n.nullable=null==n.nullable||!!n.nullable);}}d.sort(),this.uid=d.join(",");}destroy(){this._fieldsMap.clear();}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)s$Z(e)||l$10(e)||e.nullable||void 0!==P$j(e)||this._requiredFields.push(e);}return this._requiredFields}has(e){return null!=this.get(e)}get(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(r$I(e)):void 0}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){const i=this.get(e);if(i)return i.name}}function r$I(e){return e.toLowerCase().trim()}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$Y=s$2n.getLogger("esri.layers.support.fieldProperties");function l$$(){return {fields:{type:[y$J],value:null},fieldsIndex:{readOnly:!0,get(){return new d$K(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields");},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return ["*"];if(!this.fields)return e;for(const i of e){this.fieldsIndex.has(i)||s$Y.error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:e});}return y$16(this.fieldsIndex,e)}}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$$=class extends a$2N{constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null;}};e$25([d$1T({type:String,json:{read:{source:"shapeAreaFieldName"}}})],i$$.prototype,"shapeAreaField",void 0),e$25([d$1T({type:String,json:{read:{source:"shapeLengthFieldName"}}})],i$$.prototype,"shapeLengthField",void 0),e$25([d$1T({type:String,json:{read:e=>te$7.read(e)||ie$6.read(e)}})],i$$.prototype,"units",void 0),i$$=e$25([i$2z("esri.layers.support.GeometryFieldsInfo")],i$$);const a$1a=i$$;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$1m=/\[([^\[\]]+)\]/gi;function r$H(r,i,o){return r?r.map((r=>{const s=new E$b;if(s.read(r,o),s.labelExpression){const e=i.fields||i.layerDefinition&&i.layerDefinition.fields||this.fields;s.labelExpression=s.labelExpression.replace(n$1m,((n,r)=>`[${t$F(r,e)}]`));}return s})):null}function t$F(e,n){if(!n)return e;const r=e.toLowerCase();for(let t=0;t<n.length;t++){const e=n[t].name;if(e.toLowerCase()===r)return e}return e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var l$_;let i$_=l$_=class extends a$2N{constructor(o){super(o),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new S$I;}clone(){return new l$_({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};e$25([d$1T({type:String,json:{write:!0}})],i$_.prototype,"floorField",void 0),e$25([d$1T({json:{read:!1,write:!1}})],i$_.prototype,"viewAllMode",void 0),e$25([d$1T({json:{read:!1,write:!1}})],i$_.prototype,"viewAllLevelIds",void 0),i$_=l$_=e$25([i$2z("esri.layers.support.LayerFloorInfo")],i$_);const p$14=i$_;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$X=new o$1J({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),a$19=new o$1J({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let n$1l=class extends a$2N{constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null;}};e$25([d$1T({json:{read:s$X.read,write:s$X.write}})],n$1l.prototype,"cardinality",void 0),e$25([d$1T({json:{read:!0,write:!0}})],n$1l.prototype,"composite",void 0),e$25([d$1T({json:{read:!0,write:!0}})],n$1l.prototype,"id",void 0),e$25([d$1T({json:{read:!0,write:!0}})],n$1l.prototype,"keyField",void 0),e$25([d$1T({json:{read:!0,write:!0}})],n$1l.prototype,"keyFieldInRelationshipTable",void 0),e$25([d$1T({json:{read:!0,write:!0}})],n$1l.prototype,"name",void 0),e$25([d$1T({json:{read:!0,write:!0}})],n$1l.prototype,"relatedTableId",void 0),e$25([d$1T({json:{read:!0,write:!0}})],n$1l.prototype,"relationshipTableId",void 0),e$25([d$1T({json:{read:a$19.read,write:a$19.write}})],n$1l.prototype,"role",void 0),n$1l=e$25([i$2z("esri.layers.support.Relationship")],n$1l);const l$Z=n$1l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function t$E(t,i,n){const s=t&&t.getAtOrigin&&t.getAtOrigin("renderer",i.origin);if(s&&"unique-value"===s.type&&s.styleOrigin){const a=await a$2M(s.populateFromStyle());if(h$1E(n),!1===a.ok){const e=a.error;i&&i.messages&&i.messages.push(new t$1A("renderer:style-reference",`Failed to create unique value renderer from style reference: ${e.message}`,{error:e,context:i})),t.clear("renderer",i.origin);}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$P;let d$J=u$P=class extends a$2N{constructor(t){super(t),this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null;}_writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime();}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(e.definitionExpression="1=1");}clone(){return new u$P(l$2w({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};e$25([d$1T({type:K$7,json:{write:!0}})],d$J.prototype,"dynamicDataSource",void 0),e$25([d$1T({type:String,json:{write:!0}})],d$J.prototype,"gdbVersion",void 0),e$25([d$1T({type:Number,json:{write:!0}})],d$J.prototype,"geometryPrecision",void 0),e$25([d$1T({type:Date})],d$J.prototype,"historicMoment",void 0),e$25([r$1m("historicMoment")],d$J.prototype,"_writeHistoricMoment",null),e$25([d$1T({type:Number,json:{write:!0}})],d$J.prototype,"maxAllowableOffset",void 0),e$25([d$1T({type:[Number],json:{write:!0}})],d$J.prototype,"objectIds",void 0),e$25([d$1T({type:[String],json:{write:!0}})],d$J.prototype,"orderByFields",void 0),e$25([d$1T({type:[String],json:{write:!0}})],d$J.prototype,"outFields",void 0),e$25([d$1T({type:k$w,json:{read:{source:"outSR"},write:{target:"outSR"}}})],d$J.prototype,"outSpatialReference",void 0),e$25([d$1T({json:{write:!0}})],d$J.prototype,"relationshipId",void 0),e$25([d$1T({type:Number,json:{read:{source:"resultOffset"}}})],d$J.prototype,"start",void 0),e$25([r$1m("start"),r$1m("num")],d$J.prototype,"writeStart",null),e$25([d$1T({type:Number,json:{read:{source:"resultRecordCount"}}})],d$J.prototype,"num",void 0),e$25([d$1T({json:{write:!0}})],d$J.prototype,"returnGeometry",void 0),e$25([d$1T({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],d$J.prototype,"returnM",void 0),e$25([d$1T({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],d$J.prototype,"returnZ",void 0),e$25([d$1T({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],d$J.prototype,"where",void 0),d$J=u$P=e$25([i$2z("esri.rest.support.RelationshipQuery")],d$J),d$J.from=b$14(d$J);const l$Y=d$J;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$G;let p$13=e$G=class extends a$2N{constructor(o){super(o),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0;}clone(){return new e$G({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};e$25([d$1T({type:[String],json:{write:!0}})],p$13.prototype,"groupByFields",void 0),e$25([d$1T({type:Number,json:{write:!0}})],p$13.prototype,"topCount",void 0),e$25([d$1T({type:[String],json:{write:!0}})],p$13.prototype,"orderByFields",void 0),p$13=e$G=e$25([i$2z("esri.rest.support.TopFilter")],p$13);const i$Z=p$13;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var y$y;const m$P=new o$1J({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),h$H=new o$1J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let j$f=y$y=class extends a$2N{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1";}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10;}clone(){return new y$y(l$2w({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};e$25([d$1T({type:Boolean,json:{write:!0}})],j$f.prototype,"cacheHint",void 0),e$25([d$1T({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],j$f.prototype,"distance",void 0),e$25([d$1T({types:i$1W,json:{read:d$1o,write:!0}})],j$f.prototype,"geometry",void 0),e$25([d$1T({type:Number,json:{write:!0}})],j$f.prototype,"geometryPrecision",void 0),e$25([d$1T({type:Number,json:{write:!0}})],j$f.prototype,"maxAllowableOffset",void 0),e$25([d$1T({type:Number,json:{read:{source:"resultRecordCount"}}})],j$f.prototype,"num",void 0),e$25([d$1T({json:{write:!0}})],j$f.prototype,"objectIds",void 0),e$25([d$1T({type:[String],json:{write:!0}})],j$f.prototype,"orderByFields",void 0),e$25([d$1T({type:[String],json:{write:!0}})],j$f.prototype,"outFields",void 0),e$25([d$1T({type:k$w,json:{read:{source:"outSR"},write:{target:"outSR"}}})],j$f.prototype,"outSpatialReference",void 0),e$25([d$1T({type:String,json:{write:!0}})],j$f.prototype,"resultType",void 0),e$25([d$1T({json:{write:!0}})],j$f.prototype,"returnGeometry",void 0),e$25([d$1T({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],j$f.prototype,"returnM",void 0),e$25([d$1T({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],j$f.prototype,"returnZ",void 0),e$25([d$1T({type:Number,json:{read:{source:"resultOffset"}}})],j$f.prototype,"start",void 0),e$25([r$1m("start"),r$1m("num")],j$f.prototype,"writeStart",null),e$25([d$1T({type:String,json:{read:{source:"spatialRel",reader:m$P.read},write:{target:"spatialRel",writer:m$P.write}}})],j$f.prototype,"spatialRelationship",void 0),e$25([d$1T({type:y$F,json:{write:!0}})],j$f.prototype,"timeExtent",void 0),e$25([d$1T({type:i$Z,json:{write:!0}})],j$f.prototype,"topFilter",void 0),e$25([d$1T({type:String,json:{read:h$H.read,write:{writer:h$H.write,overridePolicy(e){return {enabled:e&&this.distance>0}}}}})],j$f.prototype,"units",void 0),e$25([d$1T({type:String,json:{write:!0}})],j$f.prototype,"where",void 0),j$f=y$y=e$25([i$2z("esri.rest.support.TopFeaturesQuery")],j$f),j$f.from=b$14(j$f);const S$i=j$f;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$X=["oid","global-id"],s$W=["oid","global-id","guid"];function a$18({displayField:t,editFieldsInfo:i,fields:o,objectIdField:n,title:r},l){if(!o)return null;const s=b$m({editFieldsInfo:i,fields:o,objectIdField:n},l);if(!s.length)return null;const a=j$e({titleBase:r,fields:o,displayField:t}),d=C$g();return new M$o({title:a,content:d,fieldInfos:s})}const d$I=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],p$12=(e,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:o})=>o?o.has(e.name):!f$y(e.name,t)&&((!i||e.name!==i)&&(!(l$X.indexOf(e.type)>-1)&&!d$I.some((t=>t.test(e.name)))));function u$O(e,t){const i=e;return t&&(e=e.filter((e=>-1===t.indexOf(e.type)))),e===i&&(e=e.slice()),e.sort(c$1a),e}function c$1a(e,t){return "oid"===e.type?-1:"oid"===t.type?1:y$x(e)?-1:y$x(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function f$y(e,t){if(!e||!t)return !1;const{creationDateField:i,creatorField:o,editDateField:n,editorField:r}=t;return -1!==[i&&i.toLowerCase(),o&&o.toLowerCase(),n&&n.toLowerCase(),r&&r.toLowerCase()].indexOf(e.toLowerCase())}function m$O(e,t){return e.editable&&-1===s$W.indexOf(e.type)&&!f$y(e.name,t)}function b$m({editFieldsInfo:e,fields:t,objectIdField:i},o){return u$O(t,(null==o?void 0:o.ignoreFieldTypes)||g$v).map((t=>new c$2t({fieldName:t.name,isEditable:m$O(t,e),label:t.alias,format:w$l(t),visible:p$12(t,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:null==o?void 0:o.visibleFieldNames})})))}function w$l(e){switch(e.type){case"small-integer":case"integer":case"single":return new u$1u({digitSeparator:!0,places:0});case"double":return new u$1u({digitSeparator:!0,places:2});case"date":return new u$1u({dateFormat:"long-month-day-year"});default:return null}}function C$g(){return [new c$2s,new p$2F]}function j$e(e){const i=h$19(e),{titleBase:o}=e;return i?`${o}: {${i.trim()}}`:o}function y$x(e){if("name"===(e.name&&e.name.toLowerCase()))return !0;return "name"===(e.alias&&e.alias.toLowerCase())||void 0}const g$v=["geometry","blob","raster","guid","xml"];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const Me=new o$1J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Le$1={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},Oe="FeatureLayer",Pe=s$2n.getLogger("esri.layers.FeatureLayer");function _e$1(e){return e&&e instanceof S$I}function Re$1(e,t,r){return !!(e&&e.hasOwnProperty(t)?e[t]:r)}function Ae(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const qe=l$$();function Qe(e,t,r){const i=!(null==r||!r.writeLayerSchema);return {enabled:i,ignoreOrigin:i}}let Ue=class extends(t$M(i$16(p$1c(a$1e(s$12(n$1p(p$1l(y$C(w$o(l$1i(o$O(i$18(b$v))))))))))))){constructor(...e){super(...e),this._handles=new u$25,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=k$w.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(S$I.ofType(c$1f)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0;}destroy(){var e;null==(e=this.source)||e.destroy(),this._handles=l$2y(this._handles);}normalizeCtorArgs(e,t){return "string"==typeof e?{url:e,...t}:e}load(e){const t=r$1K(e)?e.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(t).then((e=>this._initLayerProperties(e))));const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(b$17).then((async()=>{if(this.url&&null==this.layerId&&/FeatureServer|MapServer\/*$/i.test(this.url)){const e=await this._fetchFirstLayerId(t);null!=e&&(this.layerId=e);}if(!this.url&&!this._hasMemorySource())throw new s$2l("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(t))})).then((()=>this.finishLoadEditablePortalLayer(e)));return this.addResolvingPromise(r),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return !(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){null!=e?this._override("editingEnabled",e):this._clearOverride("editingEnabled");}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1);}writeEditingEnabledToWebMap(e,t,r,i){this._writeEditingEnabled(e,t,!0,i);}readEditingInfo(e,t){const{editingInfo:r}=t;return r?{lastEditDate:null!=r.lastEditDate?new Date(r.lastEditDate):null}:null}readIsTable(e,t){return "Table"===(t=t&&t.layerDefinition||t).type||!t.geometryType}writeIsTable(e,t,r,i){null!=i&&i.writeLayerSchema&&o$1$(r,e?"Table":"Feature Layer",t);}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields)for(const r of t.fields)if("esriFieldTypeGlobalID"===r.type)return r.name}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields)for(const r of t.fields)if("esriFieldTypeOID"===r.type)return r.name}get parsedUrl(){const e=this.url?U$s(this.url):null;return null!=e&&(null!=this.dynamicDataSource?e.path=D$v(e.path,"dynamicLayer"):null!=this.layerId&&(e.path=D$v(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){d$1n(e,this.fieldsIndex),this._set("renderer",e);}readRenderer(e,t,s){const n=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(n){const e=o$V(n,t,s)||void 0;return e||Pe.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:s}),e}if(t.defaultSymbol)return t.types&&t.types.length?new P$e({defaultSymbol:Ve$1(t.defaultSymbol,t,s),field:t.typeIdField,uniqueValueInfos:t.types.map((e=>({id:e.id,symbol:Ve$1(e.symbol,e,s)})))}):new p$1G({symbol:Ve$1(t.defaultSymbol,t,s)})}set source(e){const t=this._get("source");t!==e&&(_e$1(t)&&this._resetMemorySource(t),_e$1(e)&&this._initMemorySource(e),this._set("source",e));}castSource(e){return e?Array.isArray(e)||e instanceof S$I?new R$f({layer:this,items:e}):e:null}readSource(e,t){const r=g$E.fromJSON(t.featureSet);return new R$f({layer:this,items:r&&r.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){const r=t.editFieldsInfo,i=r&&r.creatorField,o=r&&r.editorField;return e=e&&e.map((e=>a$1b.fromJSON(e))),this._fixTemplates(e,i),this._fixTemplates(e,o),e}readTitle(e,t){const r=t.layerDefinition&&t.layerDefinition.name||t.name,i=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){const e=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?h$L(this.url,r):r;let t=r;if(!t&&this.url){const e=d$V(this.url);r$1K(e)&&(t=e.title);}if(!t)return;return "item-title-and-service-name"===this.sublayerTitleMode&&e&&e!==t&&(t=e+" - "+t),w$s(t)}if("item-title"===this.sublayerTitleMode&&i)return i}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const e=t.fields.find((e=>e.name.toLowerCase()===r));e&&(r=e.name);}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,i=r&&r.creatorField,o=r&&r.editorField;return e&&e.map((e=>(e=m$Q.fromJSON(e),this._fixTemplates(e.templates,i),this._fixTemplates(e.templates,o),e)))}set url(e){const t=O$c({layer:this,url:e,nonStandardUrlAllowed:!0,logger:Pe});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId);}writeUrl(e,t,r,i){C$i(this,e,null,t,i);}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0}addAttachment(e,t){return this.load().then((()=>this._checkAttachmentSupport(e))).then((()=>{if(!("addAttachment"in this.source))throw new s$2l(Oe,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)}))}updateAttachment(e,t,r){return this.load().then((()=>this._checkAttachmentSupport(e))).then((()=>{if(!("updateAttachment"in this.source))throw new s$2l(Oe,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,r)}))}async applyEdits(e,t){const r=await import('./editingSupport.js');return await this.load(),r.applyEdits(this,this.source,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return a$18(this,e)}async createGraphicsSource(e){if(this._hasMemorySource())return this.source.load({signal:e});const{default:t}=await P$t(import('./FeatureLayerSource.js'),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=new b$q,t=this.get("capabilities.data");e.dynamicDataSource=this.dynamicDataSource,e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:r,timeExtent:i}=this;return e.timeExtent=null!=r&&null!=i?i.offset(-r.value,r.unit):i||null,e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then((()=>this._checkAttachmentSupport(e))).then((()=>{if(!("deleteAttachments"in this.source))throw new s$2l(Oe,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)}))}fetchRecomputedExtents(e){return this.load({signal:null==e?void 0:e.signal}).then((()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new s$2l(Oe,"Layer source does not support fetchUpdates capability")}))}getFeatureType(e){const{typeIdField:t,types:r}=this;if(!t||!e)return null;const i=e.attributes?e.attributes[t]:void 0;if(null==i)return null;let o=null;return r.some((e=>{const{id:t}=e;return null!=t&&(t.toString()===i.toString()&&(o=e),!!o)})),o}getFieldDomain(e,t){const r=t&&t.feature,i=this.getFeatureType(r);if(i){const t=i.domains&&i.domains[e];if(t&&"inherited"!==t.type)return t}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=u$1c.from(e),this.load().then((()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new s$2l(Oe,"this layer doesn't support attachments");const{attachmentTypes:t,objectIds:r,globalIds:i,num:o,size:s,start:n,where:a}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){const p=r&&r.length>1,l=t&&t.length,u=i&&i.length,y=s&&s.length;if(p||l||u||y||o||n||a)throw new s$2l(Oe,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(r&&r.length||a))throw new s$2l(Oe,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new s$2l(Oe,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)}))}queryFeatures(e,t){return this.load().then((()=>this.source.queryFeatures(b$q.from(e)||this.createQuery(),t))).then((e=>{if(null!=e&&e.features)for(const t of e.features)t.layer=t.sourceLayer=this;return e}))}queryObjectIds(e,t){return this.load().then((()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(b$q.from(e)||this.createQuery(),t);throw new s$2l(Oe,"Layer source does not support queryObjectIds capability")}))}queryFeatureCount(e,t){return this.load().then((()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(b$q.from(e)||this.createQuery(),t);throw new s$2l(Oe,"Layer source does not support queryFeatureCount capability")}))}queryExtent(e,t){return this.load().then((()=>{if(this.source.queryExtent)return this.source.queryExtent(b$q.from(e)||this.createQuery(),t);throw new s$2l(Oe,"Layer source does not support queryExtent capability")}))}queryRelatedFeatures(e,t){return this.load().then((()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(l$Y.from(e),t);throw new s$2l(Oe,"Layer source does not support queryRelatedFeatures capability")}))}queryRelatedFeaturesCount(e,t){return this.load().then((()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(l$Y.from(e),t);throw new s$2l(Oe,"Layer source does not support queryRelatedFeaturesCount capability")}))}queryTopFeatures(e,t){return this.load().then((()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(S$i.from(e),t).then((e=>{if(null!=e&&e.features)for(const t of e.features)t.layer=t.sourceLayer=this;return e}));throw new s$2l(Oe,"Layer source does not support queryTopFeatures capability")}))}queryTopObjectIds(e,t){return this.load().then((()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(S$i.from(e),t);throw new s$2l(Oe,"Layer source does not support queryTopObjectIds capability")}))}queryTopFeaturesExtent(e,t){return this.load().then((()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(S$i.from(e),t);throw new s$2l(Oe,"Layer source does not support queryTopExtents capability")}))}queryTopFeatureCount(e,t){return this.load().then((()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(S$i.from(e),t);throw new s$2l(Oe,"Layer source does not support queryFeatureCount capability")}))}read(e,t){const r=e.featureCollection;if(r){const e=r.layers;e&&1===e.length&&(super.read(e[0],t),null!=r.showLegend&&super.read({showLegend:r.showLegend},t));}super.read(e,t),t&&"service"===t.origin&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service");}write(e,t){var r,i;const o=(t={...t,writeLayerSchema:null!=(r=null==(i=t)?void 0:i.writeLayerSchema)?r:this._hasMemorySource()}).origin,s=t.layerContainerType,n=t.messages;if(this.isTable){if("web-scene"===o||"web-map"===o&&"tables"!==s)return n&&n.push(new s$2l("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Table source cannot be written to web scenes and web maps`,{layer:this})),null;if(this._hasMemorySource())return n&&n.push(new s$2l("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using an in-memory Table source cannot be written to web scenes and web maps`,{layer:this})),null}else if(this.loaded&&"web-map"===o&&"tables"===s)return n&&n.push(new s$2l("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a non-table source cannot be written to tables in web maps`,{layer:this})),null;return super.write(e,t)}_readEditingEnabled(e,t,r){var i;let o=null==(i=e.layerDefinition)?void 0:i.capabilities;return o?this._hasEditingCapability(o):(o=e.capabilities,t&&"web-map"===(null==r?void 0:r.origin)&&!this._hasMemorySource()&&o?this._hasEditingCapability(o):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map((e=>e.trim())).includes("editing")}_writeEditingEnabled(e,t,r,i){if(!e){var o,s;const e=null!=(o=this.capabilities)&&null!=(s=o.operations)&&s.supportsSync?"Query,Sync":"Query";o$1$("layerDefinition.capabilities",e,t),!r||null!=i&&i.writeLayerSchema||(t.capabilities=e);}}_checkAttachmentSupport(e){const{attributes:t}=e,{objectIdField:r}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:Promise.reject(new s$2l(Oe,`feature is missing the identifying attribute ${r}`)):Promise.reject(new s$2l(Oe,"'attributes' are required on a feature to query attachments")):Promise.reject(new s$2l(Oe,"A feature is required to add/delete/update attachments")):Promise.reject(new s$2l(Oe,"this layer doesn't support attachments"))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return E$v(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then((e=>{const t=e.data;if(t)return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}))}async _initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),d$1n(this.renderer,this.fieldsIndex),m$1G(this.timeInfo,this.fieldsIndex),t$E(this,{origin:"service"})}async hasDataChanged(){var e;if(null!=(e=this.source)&&e.refresh)try{var t;const{dataChanged:e,updates:r}=await(null==(t=this.source)?void 0:t.refresh());if(r$1K(r)&&(this.sourceJSON={...this.sourceJSON,...r},this.read(r,{origin:"service",url:this.parsedUrl})),e)return !0}catch{}if(this.definitionExpression)try{return (await e$W(this.definitionExpression,this.fieldsIndex)).hasDateFunctions}catch{}return !1}_verifyFields(){const e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some((function(e){return "geometry"===e.type}))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")");}_fixTemplates(e,t){e&&e.forEach((e=>{const r=e.prototype&&e.prototype.attributes;r&&t&&delete r[t];}));}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new s$2l("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new s$2l("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach((e=>{e.layer=this,e.sourceLayer=this;})),this._handles.add([e.on("after-add",(e=>{e.item.layer=this,e.item.sourceLayer=this;})),e.on("after-remove",(e=>{e.item.layer=null,e.item.sourceLayer=null;}))],"fl-source");}_resetMemorySource(e){e.forEach((e=>{e.layer=null,e.sourceLayer=null;})),this._handles.remove("fl-source");}_hasMemorySource(){return !(this.url||!this.source)}_readAttachmentCapabilities(e){const t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach((e=>{const r=Le$1[e.name];r&&(t[r]=!!e.isEnabled);})),t}_readDataCapabilities(e){return {isVersioned:Re$1(e,"isDataVersioned",!1),supportsAttachment:Re$1(e,"hasAttachments",!1),supportsM:Re$1(e,"hasM",!1),supportsZ:Re$1(e,"hasZ",!1)}}_readMetadataCapabilities(e){return {supportsAdvancedFieldProperties:Re$1(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){const r=e?e.toLowerCase().split(",").map((e=>e.trim())):[],i=r.includes("editing")&&!t.datesInUnknownTimezone;let o=i&&r.includes("create"),s=i&&r.includes("delete"),n=i&&r.includes("update");const a=r.includes("changetracking");return i&&!(o||s||n)&&(o=s=n=!0),{supportsCalculate:Re$1(t,"supportsCalculate",!1),supportsTruncate:Re$1(t,"supportsTruncate",!1),supportsValidateSql:Re$1(t,"supportsValidateSql",!1),supportsAdd:o,supportsDelete:s,supportsEditing:i,supportsChangeTracking:a,supportsQuery:r.includes("query"),supportsQueryAttachments:Re$1(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:Re$1(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:n,supportsExceedsLimitStatistics:Re$1(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){var t;const r=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,o=e.archivingInfo,s=null==(t=this.url)?void 0:t.includes("MapServer"),n=!s$2r("mapserver-pbf-enabled")&&s&&this.version<10.81,a=(e.supportedQueryFormats||"").split(",").reduce(((e,t)=>{const r=t.toLowerCase().trim();return r&&e.add(r),e}),new Set);return {supportsStatistics:Re$1(r,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Re$1(r,"supportsPercentileStatistics",!1),supportsCentroid:Re$1(r,"supportsReturningGeometryCentroid",!1),supportsDistance:Re$1(r,"supportsQueryWithDistance",!1),supportsDistinct:Re$1(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Re$1(r,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Re$1(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:Re$1(r,"supportsHavingClause",!1),supportsOrderBy:Re$1(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Re$1(r,"supportsPagination",!1),supportsQuantization:Re$1(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Re$1(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Re$1(e,"supportsReturningQueryGeometry",!1),supportsResultType:Re$1(r,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Re$1(r,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Re$1(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Re$1(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Re$1(r,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Re$1(i,"allowOthersToQuery",!0),supportsHistoricMoment:Re$1(o,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!n&&a.has("pbf"),supportsDisjointSpatialRelationship:Re$1(r,"supportsDisjointSpatialRel",!1),supportsCacheHint:Re$1(r,"supportsQueryWithCacheHint",!1),maxRecordCountFactor:Ae(e,"maxRecordCountFactor",void 0),maxRecordCount:Ae(e,"maxRecordCount",void 0),standardMaxRecordCount:Ae(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:Ae(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){const t=e.advancedQueryCapabilities,r=Re$1(t,"supportsAdvancedQueryRelated",!1);return {supportsPagination:Re$1(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r}}_readEditingCapabilities(e){const t=e.ownershipBasedAccessControlForFeatures;return {supportsGeometryUpdate:Re$1(e,"allowGeometryUpdates",!0),supportsGlobalId:Re$1(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Re$1(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Re$1(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Re$1(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Re$1(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Re$1(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Re$1(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Re$1(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Re$1(t,"allowOthersToUpdate",!0)}}};e$25([d$1T({readOnly:!0,json:{read:!1}})],Ue.prototype,"capabilities",void 0),e$25([o$1v("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],Ue.prototype,"readCapabilities",null),e$25([d$1T({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ue.prototype,"charts",void 0),e$25([d$1T({readOnly:!0})],Ue.prototype,"createQueryVersion",null),e$25([d$1T({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],Ue.prototype,"copyright",void 0),e$25([d$1T({type:Boolean})],Ue.prototype,"datesInUnknownTimezone",void 0),e$25([d$1T({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],Ue.prototype,"displayField",void 0),e$25([d$1T({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],Ue.prototype,"definitionExpression",void 0),e$25([d$1T({types:j$r,readOnly:!0})],Ue.prototype,"defaultSymbol",void 0),e$25([d$1T({type:K$7})],Ue.prototype,"dynamicDataSource",void 0),e$25([d$1T({readOnly:!0})],Ue.prototype,"editFieldsInfo",void 0),e$25([d$1T({type:Boolean})],Ue.prototype,"editingEnabled",null),e$25([o$1v(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ue.prototype,"readEditingEnabled",null),e$25([o$1v("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ue.prototype,"readEditingEnabledFromWebMap",null),e$25([r$1m(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ue.prototype,"writeEditingEnabled",null),e$25([r$1m("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ue.prototype,"writeEditingEnabledToWebMap",null),e$25([d$1T({readOnly:!0})],Ue.prototype,"editingInfo",void 0),e$25([o$1v("editingInfo")],Ue.prototype,"readEditingInfo",null),e$25([d$1T(d$O)],Ue.prototype,"elevationInfo",void 0),e$25([d$1T(s$$)],Ue.prototype,"featureReduction",void 0),e$25([d$1T({...qe.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Qe}}}}})],Ue.prototype,"fields",void 0),e$25([d$1T(qe.fieldsIndex)],Ue.prototype,"fieldsIndex",void 0),e$25([d$1T({type:p$14,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],Ue.prototype,"floorInfo",void 0),e$25([d$1T({type:E$e,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ue.prototype,"formTemplate",void 0),e$25([d$1T({type:M$A,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],Ue.prototype,"fullExtent",void 0),e$25([d$1T()],Ue.prototype,"gdbVersion",void 0),e$25([d$1T({readOnly:!0,type:a$1a,json:{read:{source:"geometryProperties"}}})],Ue.prototype,"geometryFieldsInfo",void 0),e$25([d$1T({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Me.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Qe,writer(e,t,r){const i=e?Me.toJSON(e):null;i&&o$1$(r,i,t);}}}},read:{source:"layerDefinition.geometryType",reader:Me.read}}})],Ue.prototype,"geometryType",void 0),e$25([d$1T({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],Ue.prototype,"hasM",void 0),e$25([d$1T({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],Ue.prototype,"hasZ",void 0),e$25([d$1T({readOnly:!0,type:v$s})],Ue.prototype,"heightModelInfo",void 0),e$25([d$1T({type:Date})],Ue.prototype,"historicMoment",void 0),e$25([d$1T(j$h)],Ue.prototype,"id",void 0),e$25([d$1T({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ue.prototype,"infoFor3D",void 0),e$25([d$1T({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ue.prototype,"isTable",void 0),e$25([o$1v("service","isTable",["type","geometryType"]),o$1v("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ue.prototype,"readIsTable",null),e$25([r$1m("web-map","isTable")],Ue.prototype,"writeIsTable",null),e$25([d$1T(m$T)],Ue.prototype,"labelsVisible",void 0),e$25([d$1T({type:[E$b],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:r$H},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:r$H},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Ue.prototype,"labelingInfo",void 0),e$25([d$1T(w$p)],Ue.prototype,"opacity",void 0),e$25([d$1T({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],Ue.prototype,"layerId",void 0),e$25([d$1T(c$1k)],Ue.prototype,"legendEnabled",void 0),e$25([d$1T({type:["show","hide"]})],Ue.prototype,"listMode",void 0),e$25([d$1T(b$p)],Ue.prototype,"minScale",void 0),e$25([o$1v("service","minScale",["minScale","effectiveMinScale"])],Ue.prototype,"readMinScale",null),e$25([d$1T(I$j)],Ue.prototype,"maxScale",void 0),e$25([o$1v("service","maxScale",["maxScale","effectiveMaxScale"])],Ue.prototype,"readMaxScale",null),e$25([d$1T({type:String})],Ue.prototype,"globalIdField",void 0),e$25([o$1v("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),o$1v("service","globalIdField",["globalIdField","fields"])],Ue.prototype,"readGlobalIdFieldFromService",null),e$25([d$1T({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Qe}}}}})],Ue.prototype,"objectIdField",void 0),e$25([o$1v("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),o$1v("service","objectIdField",["objectIdField","fields"])],Ue.prototype,"readObjectIdFieldFromService",null),e$25([d$1T({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Ue.prototype,"operationalLayerType",void 0),e$25([d$1T(qe.outFields)],Ue.prototype,"outFields",void 0),e$25([d$1T({readOnly:!0})],Ue.prototype,"parsedUrl",null),e$25([d$1T({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ue.prototype,"path",void 0),e$25([d$1T(p$1e)],Ue.prototype,"popupEnabled",void 0),e$25([d$1T({type:M$o,json:{name:"popupInfo",write:!0}})],Ue.prototype,"popupTemplate",void 0),e$25([d$1T({readOnly:!0})],Ue.prototype,"defaultPopupTemplate",null),e$25([d$1T({type:[l$Z],readOnly:!0})],Ue.prototype,"relationships",void 0),e$25([d$1T({types:m$18,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:n$1G,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,r)=>({ignoreOrigin:null==r?void 0:r.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:null==r?void 0:r.writeLayerSchema})}}})],Ue.prototype,"renderer",null),e$25([o$1v("service","renderer",["drawingInfo.renderer","defaultSymbol"]),o$1v("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ue.prototype,"readRenderer",null),e$25([d$1T()],Ue.prototype,"sourceJSON",void 0),e$25([d$1T({type:Boolean})],Ue.prototype,"returnM",void 0),e$25([d$1T({type:Boolean})],Ue.prototype,"returnZ",void 0),e$25([d$1T(l$17)],Ue.prototype,"screenSizePerspectiveEnabled",void 0),e$25([d$1T()],Ue.prototype,"source",null),e$25([c$35("source")],Ue.prototype,"castSource",null),e$25([o$1v("portal-item","source",["featureSet"]),o$1v("web-map","source",["featureSet"])],Ue.prototype,"readSource",null),e$25([d$1T({readOnly:!0})],Ue.prototype,"serviceDefinitionExpression",void 0),e$25([o$1v("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],Ue.prototype,"readServiceDefinitionExpression",null),e$25([d$1T({type:k$w,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],Ue.prototype,"spatialReference",void 0),e$25([d$1T({type:Number})],Ue.prototype,"subtypeCode",void 0),e$25([d$1T({type:[a$1b]})],Ue.prototype,"templates",void 0),e$25([o$1v("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ue.prototype,"readTemplates",null),e$25([d$1T({type:v$j})],Ue.prototype,"timeInfo",void 0),e$25([d$1T()],Ue.prototype,"title",void 0),e$25([o$1v("service","title",["name"]),o$1v("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ue.prototype,"readTitle",null),e$25([o$1v("web-map","title",["layerDefinition.name","title"])],Ue.prototype,"readTitleFromWebMap",null),e$25([d$1T({type:String})],Ue.prototype,"sublayerTitleMode",void 0),e$25([d$1T({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],Ue.prototype,"trackIdField",void 0),e$25([d$1T({json:{read:!1}})],Ue.prototype,"type",void 0),e$25([d$1T({type:String})],Ue.prototype,"typeIdField",void 0),e$25([o$1v("service","typeIdField"),o$1v("typeIdField",["layerDefinition.typeIdField"])],Ue.prototype,"readTypeIdField",null),e$25([d$1T({type:[m$Q]})],Ue.prototype,"types",void 0),e$25([o$1v("service","types",["types"]),o$1v("types",["layerDefinition.types"])],Ue.prototype,"readTypes",null),e$25([d$1T({readOnly:!0,json:{write:!1}})],Ue.prototype,"serverGens",void 0),e$25([d$1T({type:S$I.ofType(c$1f),readOnly:!0})],Ue.prototype,"indexes",void 0),e$25([d$1T(f$B)],Ue.prototype,"url",null),e$25([r$1m("url")],Ue.prototype,"writeUrl",null),e$25([d$1T({readOnly:!0})],Ue.prototype,"userIsAdmin",void 0),e$25([d$1T({json:{origins:{service:{read:!0}},read:!1}})],Ue.prototype,"version",void 0),e$25([o$1v("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],Ue.prototype,"readVersion",null),e$25([d$1T({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ue.prototype,"visible",void 0),e$25([o$1v("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ue.prototype,"readVisible",null),Ue=e$25([i$2z("esri.layers.FeatureLayer")],Ue);const Ve$1=u$2a({types:M$n}),Ge=Ue;

const FeatureLayer = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': Ge
});

const arcgisFeatureTableCss = "@import url('https://js.arcgis.com/next/esri/themes/light/main.css');";

let ArcGISFeatureTable = class extends HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.loaded = createEvent(this, "loaded", 7);
    this.rowSelectionChange = createEvent(this, "rowSelectionChange", 7);
    this.layer = null;
    this.position = 'bottom-left';
  }
  fieldConfigsWatcher(newValue) {
    if (typeof newValue === 'string') {
      this._fieldConfigs = JSON.parse(newValue);
    }
    else {
      this._fieldConfigs = newValue;
    }
    if (this.widget) {
      this.widget.fieldConfigs = this._fieldConfigs;
    }
  }
  validateItemId(value, old) {
    if (value && value !== old) {
      const layer = new Ge({
        portalItem: {
          id: value
        }
      });
      this.layer = layer;
    }
  }
  validateLayer(value) {
    if (value && this.widget) {
      this.widget.layer = value;
    }
  }
  validateUrl(value, old) {
    if (value && value !== old) {
      const layer = new Ge({ url: value });
      this.layer = layer;
    }
  }
  validateView(value) {
    if (value) {
      this.widget.view = value;
      if (this.el.parentElement.tagName.toLowerCase() !== 'arcgis-expand') {
        this.widget.view.ui.add(this.widget, this.position);
      }
    }
  }
  componentWillLoad() {
    if (this.fieldConfigs) {
      this.fieldConfigsWatcher(this.fieldConfigs);
    }
    const table = new y$X({
      container: this.el,
    });
    this.widget = table;
    // proxy events
    table.on('selection-change', (e) => this.rowSelectionChange.emit(e));
    if (this.view) {
      table.view = this.view;
    }
    if (this.layer) {
      table.layer = this.layer;
    }
    else if (this.itemId) {
      const layer = new Ge({
        portalItem: {
          id: this.itemId
        }
      });
      this.layer = layer;
    }
    else if (this.url) {
      const layer = new Ge({ url: this.url });
      this.layer = layer;
    }
    this.loaded.emit(true);
  }
  get el() { return this; }
  static get watchers() { return {
    "fieldConfigs": ["fieldConfigsWatcher"],
    "itemId": ["validateItemId"],
    "layer": ["validateLayer"],
    "url": ["validateUrl"],
    "view": ["validateView"]
  }; }
  static get style() { return arcgisFeatureTableCss; }
};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const f$x=-1;class r$G{constructor(t=200){this.duration=t,this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this._effect="",this._effects=[],this._scale=0;}get effect(){return this._effect}set effect(t){if(t=t||"",this._effect!==t){this._effect=t;try{this._transitionTo(c$19(t));}catch(s){this._transitionTo([]),s$2n.getLogger("esri.views.layers.effects.EffectList").warn("Invalid Effect",{effect:t,error:s});}}}get hasEffects(){return this.transitioning||!!this._effects.length}get effects(){return this._effects}get scale(){return this._scale}get transitioning(){return null!==this._to}transitionStep(t,e){this._applyTimeTransition(t),this._updateForScale(e);}_transitionTo(e){this.scale>0&&l$W(this._current,e,this.scale)?(this._final=e,this._to=l$2w(e),h$G(this._current,this._to,this.scale),this._from=l$2w(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._effects=this._current[0]?l$2w(this._current[0].effects):[];}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const s=Math.min(1,this._time/this.duration);for(let t=0;t<this._current.length;t++){const e=this._current[t],i=this._from[t],n=this._to[t];e.scale=o$I(i.scale,n.scale,s);for(let t=0;t<e.effects.length;t++){const f=e.effects[t],r=i.effects[t],c=n.effects[t];f.interpolate(r,c,s);}}1===s&&(this._current=this._final,this._effects=this._current[0]?l$2w(this._current[0].effects):[],this._from=this._to=this._final=null);}_updateForScale(t){if(0===this._current.length)return;this._scale=t;const e=this._current,s=this._current.length-1;let i,n,f=1;if(1===e.length||t>=e[0].scale)n=i=e[0].effects;else if(t<=e[s].scale)n=i=e[s].effects;else for(let r=0;r<s;r++){const s=e[r],c=e[r+1];if(s.scale>=t&&c.scale<=t){f=(t-s.scale)/(c.scale-s.scale),i=s.effects,n=c.effects;break}}for(let r=0;r<this._effects.length;r++){this._effects[r].interpolate(i[r],n[r],f);}}}function c$19(t){const e=d$T(t)||[];return a$17(e)?[{scale:f$x,effects:e}]:e}function l$W(t,e,s){var n,r,c,l;if(null==(n=t[0])||!n.effects||null==(r=e[0])||!r.effects)return !0;return !(((null==(c=t[0])?void 0:c.scale)===f$x||(null==(l=e[0])?void 0:l.scale)===f$x)&&(t.length>1||e.length>1)&&s<=0)&&n$1x(t[0].effects,e[0].effects)}function h$G(t,e,s){var i,r;const c=t.length>e.length?t:e,l=t.length>e.length?e:t,h=l[l.length-1],o=null!=(i=null==h?void 0:h.scale)?i:s,a=null!=(r=null==h?void 0:h.effects)?r:[];for(let n=l.length;n<c.length;n++)l.push({scale:o,effects:[...a]});for(let _=0;_<c.length;_++)l[_].scale=l[_].scale===f$x?s:l[_].scale,c[_].scale=c[_].scale===f$x?s:c[_].scale,e$O(l[_].effects,c[_].effects);}function o$I(t,e,s){return t+(e-t)*s}function a$17(t){const e=t[0];return !!e&&"type"in e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$F(e,n,i){const o=n.flatten((({sublayers:e})=>e)).length;if(o!==e.length)return !0;return !!e.some((e=>e.originIdOf("minScale")>i||e.originIdOf("maxScale")>i||e.originIdOf("renderer")>i||e.originIdOf("labelingInfo")>i||e.originIdOf("opacity")>i||e.originIdOf("labelsVisible")>i||e.originIdOf("source")>i))||!r$F(e,n)}function n$1k(e,n,i){return !!e.some((e=>{const n=e.source;return !(!n||"map-layer"===n.type&&n.mapLayerId===e.id&&(!n.gdbVersion||n.gdbVersion===i.gdbVersion))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("opacity")>2||e.originIdOf("labelsVisible")>2}))||!r$F(e,n)}function r$F(e,n){if(!e||!e.length)return !0;const r=n.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).map((e=>e.id)).toArray();if(e.length>r.length)return !1;let i=0;const o=r.length;for(const{id:t}of e){for(;i<o&&r[i]!==t;)i++;if(i>=o)return !1}return !0}function i$Y(e){return !!e&&e.some((e=>null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function o$H(o){var n;const l=o.layer;if("floorInfo"in l&&null!=(n=l.floorInfo)&&n.floorField&&"floors"in o.view){return r$E(o.view.floors,l.floorInfo.floorField)}return null}function n$1j(o,n){var l;return "floorInfo"in n&&null!=(l=n.floorInfo)&&l.floorField?r$E(o,n.floorInfo.floorField):null}function l$V(o,n){const{definitionExpression:l}=n;return o?l?`(${l}) AND (${o})`:o:l}function r$E(o,n){if(null==o||!o.length)return null;const l=o.filter((o=>""!==o)).map((o=>`'${o}'`));return l.push("''"),`${n} IN (${l.join(",")}) OR ${n} IS NULL`}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$N={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let c$18=class extends(a$2w(p$3a)){constructor(e){super(e),this.floors=null,this.scale=0;}destroy(){this.layer=null;}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((e=>{const r=n$1j(this.floors,e);return e.toExportImageJSON(r)}));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&n$1k(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",(()=>this.notifyChange("visibleSublayers"))),e.on("sublayer-update",(e=>this.notifyChange(m$N[e.propertyName])))],"layer"));}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map((e=>e.id)).join(","):"show:-1":null}get layerDefs(){var e;const r=!(null==(e=this.floors)||!e.length),s=this.visibleSublayers.filter((e=>null!=e.definitionExpression||r&&null!=e.floorInfo));return s.length?JSON.stringify(s.reduce(((e,r)=>{const s=n$1j(this.floors,r),i=r$1K(s)?l$V(s,r):r.definitionExpression;return e[r.id]=i,e}),{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const r=this.layer.sublayers,s=r=>{const t=this.scale,i=0===t,o=0===r.minScale||t<=r.minScale,a=0===r.maxScale||t>=r.maxScale;r.visible&&(i||o&&a)&&(r.sublayers?r.sublayers.forEach(s):e.unshift(r));};r&&r.forEach(s);const t=this._get("visibleSublayers");return !t||t.length!==e.length||t.some(((r,s)=>e[s]!==r))?e:t}toJSON(){const e=this.layer;let r={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?r.dynamicLayers=this.dynamicLayers:r={...r,layers:this.layers,layerDefs:this.layerDefs},r}};e$25([d$1T({readOnly:!0})],c$18.prototype,"dynamicLayers",null),e$25([d$1T()],c$18.prototype,"floors",void 0),e$25([d$1T({readOnly:!0})],c$18.prototype,"hasDynamicLayers",null),e$25([d$1T()],c$18.prototype,"layer",null),e$25([d$1T({readOnly:!0})],c$18.prototype,"layers",null),e$25([d$1T({readOnly:!0})],c$18.prototype,"layerDefs",null),e$25([d$1T({type:Number})],c$18.prototype,"scale",void 0),e$25([d$1T(g$y)],c$18.prototype,"timeExtent",void 0),e$25([d$1T({readOnly:!0})],c$18.prototype,"version",null),e$25([d$1T({readOnly:!0})],c$18.prototype,"visibleSublayers",null),c$18=e$25([i$2z("esri.layers.mixins.ExportImageParameters")],c$18);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function o$G(r){return t$1T(r)||"simple"===r.type||"unique-value"===r.type||"class-breaks"===r.type||"dictionary"===r.type}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$D(t){return "function"==typeof t}function e$E(e,r,n,a){return t$D(e)?e(r,n,a):e}function r$D(t){return [t.r,t.g,t.b,t.a]}function n$1i(t,e,r){const n=" /-,\n",i=t=>{let e=t.length;for(;e--;)if(-1===n.indexOf(t.charAt(e)))return !1;return !0},l=[];let o=0,c=-1;do{if(c=e.indexOf("[",o),c>=o){if(c>o){const t=e.substr(o,c-o);l.push([t,null,i(t)]);}if(o=c+1,c=e.indexOf("]",o),c>=o){if(c>o){const r=t[e.substr(o,c-o)];r&&l.push([null,r,!1]);}o=c+1;}}}while(-1!==c);if(o<e.length-1){const t=e.substr(o);l.push([t,null,i(t)]);}return t=>{let e="",n=null;for(const r of l){const[a,i,l]=r;if(a)l?n=a:(n&&(e+=n,n=null),e+=a);else {const r=t.attributes[i];r&&(n&&(e+=n,n=null),e+=r);}}return a$16(e,r)}}function a$16(t,e){switch("string"!=typeof t&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function i$X(t,e,r,n,a,i,l=!0){const o=e/a,c=r/i,u=Math.ceil(o/2),M=Math.ceil(c/2);for(let s=0;s<i;s++)for(let r=0;r<a;r++){const f=4*(r+(l?i-s-1:s)*a);let p=0,C=0,y=0,I=0,h=0,k=0,d=0;const P=(s+.5)*c;for(let n=Math.floor(s*c);n<(s+1)*c;n++){const a=Math.abs(P-(n+.5))/M,i=(r+.5)*o,l=a*a;for(let c=Math.floor(r*o);c<(r+1)*o;c++){let r=Math.abs(i-(c+.5))/u;const a=Math.sqrt(l+r*r);a>=-1&&a<=1&&(p=2*a*a*a-3*a*a+1,p>0&&(r=4*(c+n*e),d+=p*t[r+3],y+=p,t[r+3]<255&&(p=p*t[r+3]/250),I+=p*t[r],h+=p*t[r+1],k+=p*t[r+2],C+=p));}}n[f]=I/C,n[f+1]=h/C,n[f+2]=k/C,n[f+3]=d/y;}}function l$U(t){return t?{r:t[0],g:t[1],b:t[2],a:t[3]/255}:{r:0,g:0,b:0,a:0}}function o$F(t){var e;return null==(e=t.data)?void 0:e.symbol}function c$17(t){return "CIMVectorMarker"===t.type||"CIMPictureMarker"===t.type||"CIMBarChartMarker"===t.type||"CIMCharacterMarker"===t.type||"CIMPieChartMarker"===t.type||"CIMStackedBarChartMarker"===t.type}function u$N(t){return "CIMGradientStroke"===t.type||"CIMPictureStroke"===t.type||"CIMSolidStroke"===t.type}function M$e(t){return "CIMGradientFill"===t.type||"CIMHatchFill"===t.type||"CIMPictureFill"===t.type||"CIMSolidFill"===t.type||"CIMWaterFill"===t.type}function s$V(t){return "CIMMarkerPlacementAlongLineRandomSize"===t.type||"CIMMarkerPlacementAlongLineSameSize"===t.type||"CIMMarkerPlacementAlongLineVariableSize"===t.type||"CIMMarkerPlacementAtExtremities"===t.type||"CIMMarkerPlacementAtMeasuredUnits"===t.type||"CIMMarkerPlacementAtRatioPositions"===t.type||"CIMMarkerPlacementOnLine"===t.type||"CIMMarkerPlacementOnVertices"===t.type}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1h(e){const c=o$F(e);if("CIMTextSymbol"===c.type)return c.height;let s=0;if(c.symbolLayers)for(const t of c.symbolLayers)c$17(t)&&t.size>s?s=t.size:u$N(t)&&t.width>s?s=t.width:M$e(t);return s}function i$W(e,o,a){const r=o$F(e),c=n$1h(e);if(0===c)return void l$T(r,o);f$w(r,o/c,!1,a);}function l$T(e,t){if("CIMTextSymbol"!==e.type){if(e.symbolLayers)for(const o of e.symbolLayers)switch(o.type){case"CIMPictureMarker":case"CIMVectorMarker":o.size=t;break;case"CIMPictureStroke":case"CIMSolidStroke":o.width=t;}}else e.height=t;}function f$w(e,t,o,a){if("CIMTextSymbol"!==e.type){if(o&&e.effects)for(const o of e.effects)y$w(o,t);if(e.symbolLayers)for(const o of e.symbolLayers)switch(o.type){case"CIMPictureMarker":case"CIMVectorMarker":m$M(o,t,a);break;case"CIMPictureStroke":case"CIMSolidStroke":null!=a&&a.preserveOutlineWidth||(o.width*=t);break;case"CIMPictureFill":o.height*=t,o.offsetX*=t,o.offsetY*=t;break;case"CIMHatchFill":f$w(o.lineSymbol,t,!0,{...a,preserveOutlineWidth:!1}),o.offsetX*=t,o.offsetY*=t,o.separation*=t;}}else e.height*=t;}function m$M(e,t,o){if(e.markerPlacement&&M$d(e.markerPlacement,t),e.offsetX*=t,e.offsetY*=t,e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size*=t,"CIMVectorMarker"===e.type&&e.markerGraphics)for(const a of e.markerGraphics)e.scaleSymbolsProportionally||f$w(a.symbol,t,!0,o);}function M$d(e,t){switch(s$V(e)&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset*=t,e.offsetAlongLine*=t,e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map((e=>e*t));e.placementTemplate=o;}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset*=t,e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map((e=>e*t));e.placementTemplate=o;}break;case"CIMMarkerPlacementOnLine":e.startPointOffset*=t;break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine*=t;break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition*=t,e.endPosition*=t;break;case"CIMMarkerPlacementPolygonCenter":e.offsetX*=t,e.offsetY*=t;break;case"CIMMarkerPlacementInsidePolygon":e.offsetX*=t,e.offsetY*=t,e.stepX*=t,e.stepY*=t;}}function y$w(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width*=t;break;case"CIMGeometricEffectBuffer":e.size*=t;break;case"CIMGeometricEffectCut":e.beginCut*=t,e.endCut*=t,e.middleCut*=t;break;case"CIMGeometricEffectDashes":if(e.customEndingOffset*=t,e.offsetAlongLine*=t,e.dashTemplate&&e.dashTemplate.length){const o=e.dashTemplate.map((e=>e*t));e.dashTemplate=o;}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length*=t;break;case"CIMGeometricEffectMove":e.offsetX*=t,e.offsetY*=t;break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset*=t;break;case"CIMGeometricEffectRegularPolygon":e.radius*=t;break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth*=t,e.length*=t,e.toWidth*=t;break;case"CIMGeometricEffectWave":e.amplitude*=t,e.period*=t;}}function C$f(o){const a=[];return k$e(o$F(o),a),a.length?new h$18(l$U(a[0])):null}function k$e(e,t){let r;r="CIMTextSymbol"===e.type?e.symbol:e;const s="CIMPolygonSymbol"===e.type;if(r.symbolLayers)for(const n of r.symbolLayers)if(!(n.colorLocked||s&&(u$N(n)||c$17(n)&&n.markerPlacement&&s$V(n.markerPlacement))))switch(n.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":break;case"CIMVectorMarker":n.markerGraphics.forEach((e=>{k$e(e.symbol,t);}));break;case"CIMSolidStroke":case"CIMSolidFill":b$l(t,n.color);break;case"CIMHatchFill":k$e(n.lineSymbol,t);}}function b$l(e,t){for(const o of e)if(o.join(".")===t.join("."))return;e.push(t);}function I$i(o,a){a instanceof h$18||(a=new h$18(a));p$11(o$F(o),a);}function p$11(e,t){let r;r="CIMTextSymbol"===e.type?e.symbol:e;const s="CIMPolygonSymbol"===e.type;if(r.symbolLayers)for(const n of r.symbolLayers){if(n.colorLocked)continue;if(s&&(u$N(n)||c$17(n)&&n.markerPlacement&&s$V(n.markerPlacement)))continue;const e=t.toArray(0);switch(n.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":break;case"CIMVectorMarker":n.markerGraphics.forEach((e=>{p$11(e.symbol,t);}));break;case"CIMSolidStroke":case"CIMSolidFill":n.color=e;break;case"CIMHatchFill":p$11(n.lineSymbol,t);}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$D{constructor(e,s){this._storage=new h$R,this._storage.maxSize=e,s&&this._storage.registerRemoveFunc("",s);}put(t,e){this._storage.put(t,e,1,1);}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll();}destroy(){this._storage.destroy();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$U="picture-fill",l$S="simple-fill",c$16="simple-line",a$15="simple-marker",m$L="text",u$M="cim",d$H=new e$D(1e3);function b$k(e){const r=e.style;let o=null;if(e)switch(e.type){case a$15:"cross"!==r&&"x"!==r&&(o=e.color);break;case l$S:"solid"===r?o=e.color:"none"!==r&&(o={type:"pattern",x:0,y:0,src:a$34(`esri/symbols/patterns/${r}.png`),width:5,height:5});break;case s$U:o={type:"pattern",src:e.url,width:u$1s(e.width)*e.xscale,height:u$1s(e.height)*e.yscale,x:u$1s(e.xoffset),y:u$1s(e.yoffset)};break;case m$L:o=e.color;break;case u$M:o=C$f(e);}return o}function w$k(t,e){const o=t+"-"+e;return void 0!==d$H.get(o)?Promise.resolve(d$H.get(o)):E$v(t,{responseType:"image"}).then((t=>{const r=t.data,n=r.naturalWidth,i=r.naturalHeight,s=document.createElement("canvas");s.width=n,s.height=i;const l=s.getContext("2d");l.fillStyle=e,l.fillRect(0,0,n,i),l.globalCompositeOperation="destination-in",l.drawImage(r,0,0);const c=s.toDataURL();return d$H.put(o,c),c}))}function j$d(t){if(!t)return null;let e;switch(t.type){case l$S:case s$U:case a$15:e=j$d(t.outline);break;case c$16:{const r=u$1s(t.width);"none"!==t.style&&0!==r&&(e={color:t.color,style:x$f(t.style),width:r,cap:t.cap,join:"miter"===t.join?u$1s(t.miterLimit):t.join});break}default:e=null;}return e}const x$f=function(){const t={};return function(e){if(t[e])return t[e];const r=e.replace(/-/g,"");return t[e]=r,r}}(),k$d=new h$18([128,128,128]);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const y$v=/\/resource\/(.*?)\.svg$/,p$10=new h$18("white");function h$F(e){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const r=e.symbolLayers.getItemAt(t-1);return "outline"in r?m$2i(r,"outline","size"):void 0}function b$j(e){if(!e)return 0;if(x$p(e)){const t=h$F(e);return r$1K(t)?t:0}const r=j$d(e);return r&&e$17(r.width)||0}function w$j(e){if(t$1T(e)||!("symbolLayers"in e)||t$1T(e.symbolLayers))return !1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return !1}}function d$G(e,t){const r=t.resource.href;return !s$2r("esri-canvas-svg-support")&&e.styleOrigin&&y$v.test(r)?r.replace(y$v,"/resource/png/$1.png"):r}function k$c(t,r){if(null==r)return t;const o=t.toRgba();return o[3]=o[3]*r,new h$18(o)}function L$g(e,t,r){const o=e.symbolLayers;if(!o)return;const n=e=>{const o=r$1K(e)?e:null;return k$c(t=t||o||null!=r&&p$10,r)};o.forEach((e=>{if("object"!==e.type||null==e.resource.href||t)if("water"===e.type)e.color=n(e.color);else {const t=r$1K(e.material)?e.material.color:null,o=n(t);t$1T(e.material)?e.material=new a$2c({color:o}):e.material.color=o,null!=r&&"outline"in e&&r$1K(e.outline)&&r$1K(e.outline.color)&&(e.outline.color=k$c(e.outline.color,r));}}));}function z$a(e,t,r){(t=t||e.color)&&(e.color=k$c(t,r)),null!=r&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=k$c(e.outline.color,r));}function v$i(o,n,i){o&&(n||null!=i)&&(n&&(n=new h$18(n)),x$p(o)?L$g(o,n,i):c$1X(o)&&z$a(o,n,i));}async function x$e(e,t){const r=e.symbolLayers;r&&await n$2s(r,(async e=>S$h(e,t)));}async function S$h(e,t){switch(e.type){case"extrude":O$9(e,t);break;case"icon":case"line":case"text":U$d(e,t);break;case"path":$$a(e,t);break;case"object":await R$b(e,t);}}function U$d(e,t){const r=E$a(t);r$1K(r)&&(e.size=r);}function E$a(e){for(const t of e)if("number"==typeof t)return t;return null}function O$9(e,t){e.size="number"==typeof t[2]?t[2]:0;}async function R$b(e,t){const{resourceSize:r,symbolSize:o}=await C$e(e),n=A$b(t,r,o);e.width=D$c(t[0],o[0],r[0],n),e.depth=D$c(t[1],o[1],r[1],n),e.height=D$c(t[2],o[2],r[2],n);}function $$a(e,t){const r=A$b(t,l$29,[e.width,void 0,e.height]);e.width=D$c(t[0],e.width,1,r),e.height=D$c(t[2],e.height,1,r);}function A$b(e,t,r){for(let o=0;o<3;o++){const n=e[o];switch(n){case"symbol-value":return null!=r[o]?r[o]/t[o]:1;case"proportional":break;default:if(n&&t[o])return n/t[o]}}return 1}async function C$e(e){const t=await import('./symbolLayerUtils.js'),r=await t.computeObjectLayerResourceSize(e,10),{width:o,height:n,depth:i}=e,l=[o,i,n];let s=1;for(let c=0;c<3;c++)if(null!=l[c]){s=l[c]/r[c];break}for(let c=0;c<3;c++)null==l[c]&&(l[c]=r[c]*s);return {resourceSize:r,symbolSize:l}}function D$c(e,t,r,o){switch(e){case"proportional":return r*o;case"symbol-value":return null!=t?t:r;default:return e}}function I$h(e,t){const r=E$a(t);if(!t$1T(r))switch(e.type){case"simple-marker":e.size=r;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=r,e.height=r*t):(e.width=r*t,e.height=r);break}case"simple-line":e.width=r;break;case"text":e.font.size=r;}}async function M$c(e,o){if(e&&o)return x$p(e)?x$e(e,o):void(c$1X(e)&&I$h(e,o))}function q$b(e,o,n){if(e&&null!=o)if(x$p(e)){const t=e.symbolLayers;t&&t.forEach((e=>{if(e&&"object"===e.type)switch(n){case"tilt":e.tilt=o;break;case"roll":e.roll=o;break;default:e.heading=o;}}));}else c$1X(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=o));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$15=null;function u$L(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function y$u(e,t,l){const{backgroundColor:r,outline:i,dotSize:a}=e,n=l&&l.swatchSize||22,o=.8,s=Math.round(n*n/a**2*o),y=window.devicePixelRatio,p=document.createElement("canvas"),h=n*y;p.width=h,p.height=h,p.style.width=p.width/y+"px",p.style.height=p.height/y+"px";const b=p.getContext("2d");if(r&&(b.fillStyle=r.toCss(!0),b.fillRect(0,0,h,h),b.fill()),b.fillStyle=t.toCss(!0),c$15&&c$15.length/2===s)for(let u=0;u<2*s;u+=2){const e=c$15[u],t=c$15[u+1];b.fillRect(e,t,a*y,a*y),b.fill();}else {c$15=[];for(let e=0;e<2*s;e+=2){const e=u$L(0,h),t=u$L(0,h);c$15.push(e,t),b.fillRect(e,t,a*y,a*y),b.fill();}}i&&(i.color&&(b.strokeStyle=i.color.toCss(!0)),b.lineWidth=i.width,b.strokeRect(0,0,h,h));const f=new Image(n,n);return f.src=p.toDataURL(),f.style.filter=l.effect,f}function p$$(e,t={}){const l=24,r=75,i="horizontal"===t.align,a=i?r:l,n=i?l:r,{width:o=a,height:s=n,gradient:c=!0}=t,u=window.devicePixelRatio,y=o*u,p=s*u,h=document.createElement("canvas");h.width=y,h.height=p,h.style.width=`${o}px`,h.style.height=`${s}px`;const b=h.getContext("2d"),f=i?y:0,d=i?0:p;if(c){const t=b.createLinearGradient(0,0,f,d),l=e.length,r=1===l?0:1/(l-1);e.forEach(((e,l)=>t.addColorStop(l*r,e.toString()))),b.fillStyle=t,b.fillRect(0,0,y,p);}else {const t=i?y/e.length:y,l=i?p:p/e.length;let r=0,a=0;for(const n of e)b.fillStyle=n.toString(),b.fillRect(r,a,t,l),r=i?r+t:0,a=i?0:a+l;}const m=document.createElement("div");return m.style.width=`${o}px`,m.style.height=`${s}px`,m.style.filter=null==t?void 0:t.effect,m.appendChild(h),m}async function h$E(e,t){switch(e.type){case"web-style":{const{previewWebStyleSymbol:l}=await import('./previewWebStyleSymbol.js');return l(e,h$E,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:l}=await Promise.resolve().then(function () { return previewSymbol3D; });return l(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:l}=await import('./previewSymbol2D.js');return l(e,t)}case"cim":{const{previewCIMSymbol:l}=await import('./previewCIMSymbol.js');return l(e,t)}default:return}}function b$i(e){return e&&"opacity"in e?e.opacity*b$i(e.parent):1}async function f$v(o,s){var c,u;if(!o)return;const y=o.sourceLayer,p=null!=(c=r$1K(s)&&null!=(u=s.useSourceLayer)&&u?y:o.layer)?c:y,h=b$i(p);if(r$1K(o.symbol)&&(!r$1K(s)||!0!==s.ignoreGraphicSymbol)){const t="web-style"===o.symbol.type?await o.symbol.fetchSymbol(r$1K(s)?s.abortOptions:null):o.symbol.clone();return v$i(t,null,h),t}const f=r$1K(s)&&s.renderer||p&&"renderer"in p&&p.renderer;let d=f&&"getSymbolAsync"in f?await f.getSymbolAsync(o,s):null;if(!d)return;if(d="web-style"===d.type?await d.fetchSymbol(r$1K(s)?s.abortOptions:null):d.clone(),!("visualVariables"in f)||!f.visualVariables||!f.visualVariables.length)return v$i(d,null,h),d;if("arcadeRequiredForVisualVariables"in f&&f.arcadeRequiredForVisualVariables&&(t$1T(s)||t$1T(s.arcade))){const e={...e$23(s)};e.arcade=await a$2t(),s=e;}const m=await Promise.resolve().then(function () { return visualVariableUtils; }),g=[],w=[],S=[],v=[];for(const e of f.visualVariables)switch(e.type){case"color":g.push(e);break;case"opacity":w.push(e);break;case"rotation":v.push(e);break;case"size":e.target||S.push(e);}const V=!!g.length&&g[g.length-1],x=V?m.getColor(V,o,s):null,R=!!w.length&&w[w.length-1];let C=R?m.getOpacity(R,o,s):null;if(null!=h&&(C=null!=C?C*h:h),v$i(d,x,C),S.length){const e=m.getAllSizes(S,o,s);await M$c(d,e);}for(const e of v)q$b(d,m.getRotationAngle(e,o,s),e.axis);return d}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$R=(e,l)=>{const a=e.featuresTilingScheme.getClosestInfoForScale(e.scale).level;return null!=l&&l.levels?l.levels[a]:null};function a$14(a,i){if(!a||!("visualVariables"in a)||!a.visualVariables)return null;const s=a.visualVariables.find((e=>"size"===e.type)),n=l$R(i,s);return n?new b$A({field:s.field,minSize:n[2].size,minDataValue:n[2].value,maxSize:n[3].size,maxDataValue:n[3].value}):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$1g=/^-?(\d+)(\.(\d+))?$/i;function e$C(t,n){return t-n}function r$C(t,n){let e,r;return e=Number(t.toFixed(n)),e<t?r=e+1/10**n:(r=e,e-=1/10**n),e=Number(e.toFixed(n)),r=Number(r.toFixed(n)),[e,r]}function o$E(t,n,e,r,o){const i=l$Q(t,n,e,r),u=null==i.previous||i.previous<=o,s=null==i.next||i.next<=o;return u&&s||i.previous+i.next<=2*o}function i$V(t){const e=String(t),r=e.match(n$1g);if(r&&r[1])return {integer:r[1].split("").length,fractional:r[3]?r[3].split("").length:0};if(e.toLowerCase().indexOf("e")>-1){const t=e.split("e"),n=t[0],r=t[1];if(n&&r){const t=Number(n);let e=Number(r);const o=e>0;o||(e=Math.abs(e));const l=i$V(t);return o?(l.integer+=e,e>l.fractional?l.fractional=0:l.fractional-=e):(l.fractional+=e,e>l.integer?l.integer=1:l.integer-=e),l}}return {integer:0,fractional:0}}function l$Q(t,n,e,r){const o={previous:null,next:null};if(null!=e){const r=t-e,i=n-e-r;o.previous=Math.floor(Math.abs(100*i/r));}if(null!=r){const e=r-t,i=r-n-e;o.next=Math.floor(Math.abs(100*i/e));}return o}function u$K(t,n={}){const l=t.slice(0),{tolerance:u=2,strictBounds:s=!1,indexes:c=l.map(((t,n)=>n))}=n;c.sort(e$C);for(let e=0;e<c.length;e++){const t=c[e],n=l[t],a=0===t?null:l[t-1],f=t===l.length-1?null:l[t+1],m=i$V(n).fractional;if(m){let i,c=0,g=!1;for(;c<=m&&!g;){const t=r$C(n,c);i=s&&0===e?t[1]:t[0],g=o$E(n,i,a,f,u),c++;}g&&(l[t]=i);}}return l}const s$T={maximumFractionDigits:20};function c$14(n){return m$24(n,s$T)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const g$u="<",w$i=">",I$g=S$H("short-date");function U$c(a,U,e,i){let o="";0===U?o=`${g$u} `:U===e&&(o=`${w$i} `);let r=null;return r=i?L$w(a,I$g):c$14(a),o+r}const e$B=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$D=new h$18([64,64,64]);function n$1f(l,o){const n=[],r=l.length-1;return 5===l.length?n.push(0,2,4):n.push(0,r),l.map(((l,t)=>n.indexOf(t)>-1?U$c(l,t,r,o):null))}async function r$B(l,e,o){let r=!1,a=[],u=[];if(l.stops){const e=l.stops;a=e.map((l=>l.value)),r=e.some((l=>!!l.label)),r&&(u=e.map((l=>l.label)));}const s=a[0],i=a[a.length-1];if(null==s&&null==i)return null;const c=r?null:n$1f(a,o);return (await Promise.all(a.map((async(o,n)=>({value:o,color:"opacity"===l.type?await t$C(o,l,e):(await Promise.resolve().then(function () { return visualVariableUtils; })).getColor(l,o),label:r?u[n]:c[n]}))))).reverse()}async function t$C(e,n,r=o$D){const t=new h$18(r),a=(await Promise.resolve().then(function () { return visualVariableUtils; })).getOpacity(n,e);return null!=a&&(t.a=a),t}function a$13(l){let e=!1,o=[],r=[];o=l.map((l=>l.value)),e=l.some((l=>!!l.label)),e&&(r=l.map((l=>l.label)));const t=o[0],a=o[o.length-1];if(null==t&&null==a)return null;const s=e?null:n$1f(o,!1);return o.map(((o,n)=>({value:o,color:u$J(o,l),label:e?r[n]:s[n]}))).reverse()}function u$J(e,o){const{startIndex:n,endIndex:r,weight:t}=s$S(e,o);if(n===r)return o[n].color;const a=h$18.blendColors(o[n].color,o[r].color,t);return new h$18(a)}function s$S(l,e){let o=0,n=e.length-1;return e.some(((e,r)=>l<e.value?(n=r,!0):(o=r,!1))),{startIndex:o,endIndex:n,weight:(l-e[o].value)/(e[n].value-e[o].value)}}function i$U(e,o){let n=[];if(e&&"multipart"===e.type)e.colorRamps.reverse().forEach((function(r,t){0===t?n.push({value:o.max,color:new h$18(r.toColor),label:"high"}):n.push({value:null,color:new h$18(r.toColor),label:""}),t===e.colorRamps.length-1?n.push({value:o.min,color:new h$18(r.fromColor),label:"low"}):n.push({value:null,color:new h$18(r.fromColor),label:""});}));else {let r,t;e&&"algorithmic"===e.type?(r=e.fromColor,t=e.toColor):(r=[0,0,0,1],t=[255,255,255,1]),n=[{value:o.max,color:new h$18(t),label:"high"},{value:o.min,color:new h$18(r),label:"low"}];}return n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$A(r){let t=r.colorStops,e=t.length-1;if(t&&t[0]){const r=t[e];r&&1!==r.ratio&&(t=t.slice(0),t.push(new i$1n({ratio:1,color:r.color})),e++);}return t.map(((o,r)=>{let t="";return 0===r?t="low":r===e&&(t="high"),{color:o.color,label:t,ratio:o.ratio}})).reverse()}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1e(n){return "r"in n&&"g"in n&&"b"in n}function t$B(n){return "h"in n&&"s"in n&&"v"in n}function r$z(n){return "l"in n&&"a"in n&&"b"in n}function u$I(n){return "l"in n&&"c"in n&&"h"in n}function o$C(n){return "x"in n&&"y"in n&&"z"in n}const e$A=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],c$13=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function i$T(n,t){const r=[];let u,o;if(n[0].length!==t.length)throw "dimensions do not match";const e=n.length,c=n[0].length;let i=0;for(u=0;u<e;u++){for(i=0,o=0;o<c;o++)i+=n[u][o]*t[o];r.push(i);}return r}function a$12(n){const t=[n.r/255,n.g/255,n.b/255].map((n=>n<=.04045?n/12.92:((n+.055)/1.055)**2.4)),r=i$T(e$A,t);return {x:100*r[0],y:100*r[1],z:100*r[2]}}function h$D(n){const t=i$T(c$13,[n.x/100,n.y/100,n.z/100]).map((n=>{const t=n<=.0031308?12.92*n:1.055*n**(1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return {r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function s$R(n){const t=[n.x/95.047,n.y/100,n.z/108.883].map((n=>n>(6/29)**3?n**(1/3):1/3*(29/6)**2*n+4/29));return {l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function f$u(n){const t=n.l,r=[(t+16)/116+n.a/500,(t+16)/116,(t+16)/116-n.b/200].map((n=>n>6/29?n**3:3*(6/29)**2*(n-4/29)));return {x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function b$h(n){const t=n.l,r=n.a,u=n.b,o=Math.sqrt(r*r+u*u);let e=Math.atan2(u,r);return e=e>0?e:e+2*Math.PI,{l:t,c:o,h:e}}function l$P(n){const t=n.l,r=n.c,u=n.h;return {l:t,a:r*Math.cos(u),b:r*Math.sin(u)}}function g$t(n){return s$R(a$12(n))}function M$b(n){return h$D(f$u(n))}function m$K(n){return b$h(s$R(a$12(n)))}function d$F(n){return h$D(f$u(l$P(n)))}function x$d(n){const t=n.r,r=n.g,u=n.b,o=Math.max(t,r,u),e=o-Math.min(t,r,u);let c=o,i=0===e?0:o===t?(r-u)/e%6:o===r?(u-t)/e+2:(t-r)/e+4,a=0===e?0:e/c;return i<0&&(i+=6),i*=60,a*=100,c*=100/255,{h:i,s:a,v:c}}function k$b(n){const t=(n.h+360)%360/60,r=n.s/100,u=n.v/100*255,o=u*r,e=o*(1-Math.abs(t%2-1));let c;switch(Math.floor(t)){case 0:c={r:o,g:e,b:0};break;case 1:c={r:e,g:o,b:0};break;case 2:c={r:0,g:o,b:e};break;case 3:c={r:0,g:e,b:o};break;case 4:c={r:e,g:0,b:o};break;case 5:case 6:c={r:o,g:0,b:e};break;default:c={r:0,g:0,b:0};}return c.r=Math.round(c.r+u-o),c.g=Math.round(c.g+u-o),c.b=Math.round(c.b+u-o),c}function p$_(e){return n$1e(e)?e:u$I(e)?d$F(e):r$z(e)?M$b(e):o$C(e)?h$D(e):t$B(e)?k$b(e):e}function y$t(n){if(t$B(n))return n;return x$d(p$_(n))}function z$9(n){return r$z(n)?n:g$t(p$_(n))}function v$h(n){return u$I(n)?n:m$K(p$_(n))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$A={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function e$z(a,t,e){const m=22;let c=m,p=m;a<1?c*=.75:a>1&&(p*=1.25);const L=0,n=0;let o=m,s=m;t&&e&&(c=p=o=s=0);return [{type:"path",path:[{command:"M",values:[o,L]},{command:"L",values:[e?o:.875*o,L]},{command:"L",values:[e?c-.5*o:n,p-.5*s]},{command:"L",values:[c-.5*o,p-.5*s]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,L]},{command:"L",values:[o,t?L:.125*s]},{command:"L",values:[c-.5*o,t?p-.5*s:s]},{command:"L",values:[c-.5*o,p-.5*s]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[c-.5*o,p-.5*s]},{command:"L",values:[e?c-.5*o:n,p-.5*s]},{command:"L",values:[e?c-.5*o:n,t?p-.5*s:s]},{command:"L",values:[c-.5*o,t?p-.5*s:s]},{command:"Z",values:[]}]}]}function m$J(a){const t=22,e=.5*a,m=0,c=0;return [{type:"path",path:[{command:"M",values:[c,.7*t*.5]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+e]},{command:"L",values:[c,.7*t+e-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+e]},{command:"L",values:[t,e]},{command:"L",values:[t,m]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,m]},{command:"L",values:[t,m]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[c,.7*t*.5]},{command:"Z",values:[]}]}]}function c$12(){return [{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function p$Z(a,t){let e=t?20:a;const m=t?4:6;e-=e<=22?.5*m:m;const c=0,p=0,L=t?.35*e:.5*e;return [{type:"path",path:[{command:"M",values:[.5*e,c]},{command:"L",values:[e,.5*L]},{command:"L",values:[.5*e,L]},{command:"L",values:[p,.5*L]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[c,.5*L]},{command:"L",values:[.5*e,L]},{command:"L",values:[.5*e,a]},{command:"L",values:[p,a-.5*L]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*e,L]},{command:"L",values:[.5*e,a]},{command:"L",values:[e,a-.5*L]},{command:"L",values:[e,.5*L]},{command:"Z",values:[]}]}]}function L$f(a,t){let e=t?20:a;const m=t?4:6;e-=e<=22?.5*m:m;const c=.5*e,p=.15*e,L=0,n=a-p;return [{type:"ellipse",cx:.5*e,cy:n,rx:c,ry:p},{type:"path",path:[{command:"M",values:[L,p]},{command:"L",values:[L,n]},{command:"L",values:[e,n]},{command:"L",values:[e,p]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:p,rx:c,ry:p}]}function n$1d(a,t){let e=t?20:a;const m=t?4:6;e-=e<=22?.5*m:m;const c=.15*e,p=a-c;return [{type:"ellipse",cx:.5*e,cy:p,rx:.5*e,ry:c},{type:"path",path:[{command:"M",values:[.5*e,0]},{command:"L",values:[e,p]},{command:"L",values:[0,p]},{command:"Z",values:[]}]}]}function o$B(a){let t=a;const e=6;t-=t<22?.5*e:e;const m=.15*t,c=0;return [{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[t,c]},{command:"L",values:[.5*t,a-m]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:c,rx:.5*t,ry:m}]}function s$Q(a){let t=a;const e=a,m=4;t-=t<22?.5*m:m;const c=0,p=0,L=t,n=e,o=Math.floor(a/10)-1||1;return [{type:"path",path:[{command:"M",values:[.45*L,c]},{command:"L",values:[L,.5*n-o]},{command:"L",values:[.45*L-o,.5*n+o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*L,c]},{command:"L",values:[.45*L-o,.5*n+o]},{command:"L",values:[p,.5*n-o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[p,.5*n-o]},{command:"L",values:[.45*L-o,.5*n+o]},{command:"L",values:[.45*L,e]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*L,e]},{command:"L",values:[L,.5*n-o]},{command:"L",values:[.45*L-o,.5*n+o]},{command:"Z",values:[]}]}]}function l$O(a){const t=2;let e=a;e-=e<22?.5*t:t;const m=0,c=0;return [{type:"path",path:[{command:"M",values:[.45*a,m]},{command:"L",values:[a,e]},{command:"L",values:[.45*a,.6*e]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*a,m]},{command:"L",values:[.45*a,.6*e]},{command:"L",values:[c,e]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[c,e]},{command:"L",values:[.45*a,.6*e]},{command:"L",values:[a,e]},{command:"Z",values:[]}]}]}function u$H(a,t){const e=.75;return Math.round(Math.min(Math.max(a+255*t*e,0),255))}function h$C(t,e){if("type"in t&&("linear"===t.type||"pattern"===t.type))return t;const m=new h$18(t);return new h$18([u$H(m.r,e),u$H(m.g,e),u$H(m.b,e),m.a])}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1c(){const n=new Float32Array(6);return n[0]=1,n[3]=1,n}function t$z(n){const t=new Float32Array(6);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function r$y(n,t,r,o,a,e){const c=new Float32Array(6);return c[0]=n,c[1]=t,c[2]=r,c[3]=o,c[4]=a,c[5]=e,c}function o$A(n,t){return new Float32Array(n,t,6)}function a$11(n,t,r,o){const a=t[o],e=t[o+1];n[o]=r[0]*a+r[2]*e+r[4],n[o+1]=r[1]*a+r[3]*e+r[5];}function e$y(n,t,r,o=0,e=0,c=2){const s=e||t.length/c;for(let f=o;f<s;f++){a$11(n,t,r,f*c);}}Object.freeze({__proto__:null,create:n$1c,clone:t$z,fromValues:r$y,createView:o$A,transform:a$11,transformMany:e$y});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function a$10(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t}function n$1b(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function s$P(t,a,n,s,r,u,o){return t[0]=a,t[1]=n,t[2]=s,t[3]=r,t[4]=u,t[5]=o,t}function r$x(t,a){const n=a[0],s=a[1],r=a[2],u=a[3],o=a[4],c=a[5];let e=n*u-s*r;return e?(e=1/e,t[0]=u*e,t[1]=-s*e,t[2]=-r*e,t[3]=n*e,t[4]=(r*c-u*o)*e,t[5]=(s*o-n*c)*e,t):null}function u$G(t){return t[0]*t[3]-t[1]*t[2]}function o$z(t,a,n){const s=a[0],r=a[1],u=a[2],o=a[3],c=a[4],e=a[5],i=n[0],h=n[1],M=n[2],f=n[3],b=n[4],l=n[5];return t[0]=s*i+u*h,t[1]=r*i+o*h,t[2]=s*M+u*f,t[3]=r*M+o*f,t[4]=s*b+u*l+c,t[5]=r*b+o*l+e,t}function c$11(t,a,n){const s=a[0],r=a[1],u=a[2],o=a[3],c=a[4],e=a[5],i=Math.sin(n),h=Math.cos(n);return t[0]=s*h+u*i,t[1]=r*h+o*i,t[2]=s*-i+u*h,t[3]=r*-i+o*h,t[4]=c,t[5]=e,t}function e$x(t,a,n){const s=a[0],r=a[1],u=a[2],o=a[3],c=a[4],e=a[5],i=n[0],h=n[1];return t[0]=s*i,t[1]=r*i,t[2]=u*h,t[3]=o*h,t[4]=c,t[5]=e,t}function i$S(t,a,n){const s=a[0],r=a[1],u=a[2],o=a[3],c=a[4],e=a[5],i=n[0],h=n[1];return t[0]=s,t[1]=r,t[2]=u,t[3]=o,t[4]=s*i+u*h+c,t[5]=r*i+o*h+e,t}function h$B(t,a){const n=Math.sin(a),s=Math.cos(a);return t[0]=s,t[1]=n,t[2]=-n,t[3]=s,t[4]=0,t[5]=0,t}function M$a(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t[4]=0,t[5]=0,t}function f$t(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=a[0],t[5]=a[1],t}function b$g(t){return "mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function l$N(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function m$I(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t[4]=a[4]+n[4],t[5]=a[5]+n[5],t}function d$E(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t[4]=a[4]-n[4],t[5]=a[5]-n[5],t}function p$Y(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*n,t[5]=a[5]*n,t}function x$c(t,a,n,s){return t[0]=a[0]+n[0]*s,t[1]=a[1]+n[1]*s,t[2]=a[2]+n[2]*s,t[3]=a[3]+n[3]*s,t[4]=a[4]+n[4]*s,t[5]=a[5]+n[5]*s,t}function y$s(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]}function q$a(a,n){const s=a[0],r=a[1],u=a[2],o=a[3],c=a[4],e=a[5],i=n[0],h=n[1],M=n[2],f=n[3],b=n[4],l=n[5];return Math.abs(s-i)<=a$2G*Math.max(1,Math.abs(s),Math.abs(i))&&Math.abs(r-h)<=a$2G*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(u-M)<=a$2G*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(o-f)<=a$2G*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(c-b)<=a$2G*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(e-l)<=a$2G*Math.max(1,Math.abs(e),Math.abs(l))}const _$e=o$z,j$c=d$E;Object.freeze({__proto__:null,copy:a$10,identity:n$1b,set:s$P,invert:r$x,determinant:u$G,multiply:o$z,rotate:c$11,scale:e$x,translate:i$S,fromRotation:h$B,fromScaling:M$a,fromTranslation:f$t,str:b$g,frob:l$N,add:m$I,subtract:d$E,multiplyScalar:p$Y,multiplyScalarAndAdd:x$c,exactEquals:y$s,equals:q$a,mul:_$e,sub:j$c});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h$A="http://www.w3.org/2000/svg";let c$10=0,f$s=0;const d$D=s$2r("android"),y$r=s$2r("chrome")||d$D&&d$D>=4?"auto":"optimizeLegibility",u$F={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},p$X=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let g$s={},x$b={};const m$H={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},w$h=Math.PI;function k$a(t,e){const i=t*(w$h/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function j$b(t){return t.map((t=>`${t.command} ${t.values.join(" ")}`)).join(" ").trim()}function b$f(t,e,i,o){if(t){if("circle"===t.type)return n$2g("circle",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,r:t.r});if("ellipse"===t.type)return n$2g("ellipse",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,rx:t.rx,ry:t.ry});if("rect"===t.type)return n$2g("rect",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",x:t.x,y:t.y,width:t.width,height:t.height});if("image"===t.type)return n$2g("image",{href:t.src,x:t.x,y:t.y,width:t.width,height:t.height,preserveAspectRatio:"none"});if("path"===t.type){const o="string"!=typeof t.path?j$b(t.path):t.path;return n$2g("path",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",d:o})}if("text"===t.type)return n$2g("text",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4","text-anchor":o.align,"text-decoration":o.decoration,kerning:o.kerning,rotate:o.rotate,"text-rendering":y$r,"font-style":o.font.style,"font-variant":o.font.variant,"font-weight":o.font.weight,"font-size":o.font.size,"font-family":o.font.family,x:t.x,y:t.y},t.text)}return null}function v$g(e){const i={fill:"none",pattern:null,linearGradient:null};if(e)if("type"in e&&"pattern"===e.type){const t="patternId-"+ ++c$10;i.fill=`url(#${t})`,i.pattern={id:t,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}};}else if("type"in e&&"linear"===e.type){const o="linearGradientId-"+ ++f$s;i.fill=`url(#${o})`,i.linearGradient={id:o,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map((e=>({offset:e.offset,color:e.color&&new h$18(e.color).toString()})))};}else if(e){const o=new h$18(e);i.fill=o.toString();}return i}function A$a(e){const i={color:"none",width:1,cap:"butt",join:"4",dashArray:"none"};if(e&&(null!=e.width&&(i.width=e.width),e.cap&&(i.cap=e.cap),e.join&&(i.join=e.join.toString()),e.color&&(i.color=new h$18(e.color).toString()),e.style)){let t=null;if(e.style in m$H&&(t=m$H[e.style]),Array.isArray(t)){t=t.slice(0);for(let i=0;i<t.length;++i)t[i]*=e.width;if("butt"!==e.cap){for(let i=0;i<t.length;i+=2)t[i]-=e.width,t[i]<1&&(t[i]=1);for(let i=1;i<t.length;i+=2)t[i]+=e.width;}t=t.join(",");}i.dashArray=t;}return i}function M$9(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};return t&&(i.align=t.align,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"),i}function I$f(t){const{pattern:e,linearGradient:i}=t;if(e)return n$2g("pattern",{id:e.id,patternUnits:"userSpaceOnUse",x:e.x,y:e.y,width:e.width,height:e.height},n$2g("image",{x:e.image.x,y:e.image.y,width:e.image.width,height:e.image.height,href:e.image.href}));if(i){const t=i.stops.map(((t,e)=>n$2g("stop",{key:`${e}-stop`,offset:t.offset,"stop-color":t.color})));return n$2g("linearGradient",{id:i.id,gradientUnits:"userSpaceOnUse",x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},t)}return null}function N$9(t,e,i){return i$S(t,n$1b(t),[e,i])}function z$8(t,e,i,o,r){return e$x(t,n$1b(t),[e,i]),t[4]=t[4]*e-o*e+o,t[5]=t[5]*i-r*i+r,t}function $$9(t,e,i,o){const r=e%360*Math.PI/180;c$11(t,n$1b(t),r);const s=Math.cos(r),l=Math.sin(r),h=t[4],c=t[5];return t[4]=h*s-c*l+o*l-i*s+i,t[5]=c*s+h*l-i*l-o*s+o,t}function S$g(t,e){g$s&&"left"in g$s?(g$s.left>t&&(g$s.left=t),g$s.right<t&&(g$s.right=t),g$s.top>e&&(g$s.top=e),g$s.bottom<e&&(g$s.bottom=e)):g$s={left:t,bottom:e,right:t,top:e};}function G$7(t){const e=t.args,i=e.length;let o;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(o=0;o<i;o+=2)S$g(e[o],e[o+1]);x$b.x=e[i-2],x$b.y=e[i-1];break;case"H":for(o=0;o<i;++o)S$g(e[o],x$b.y);x$b.x=e[i-1];break;case"V":for(o=0;o<i;++o)S$g(x$b.x,e[o]);x$b.y=e[i-1];break;case"m":{let t=0;"x"in x$b||(S$g(x$b.x=e[0],x$b.y=e[1]),t=2);for(o=t;o<i;o+=2)S$g(x$b.x+=e[o],x$b.y+=e[o+1]);break}case"l":case"t":for(o=0;o<i;o+=2)S$g(x$b.x+=e[o],x$b.y+=e[o+1]);break;case"h":for(o=0;o<i;++o)S$g(x$b.x+=e[o],x$b.y);break;case"v":for(o=0;o<i;++o)S$g(x$b.x,x$b.y+=e[o]);break;case"c":for(o=0;o<i;o+=6)S$g(x$b.x+e[o],x$b.y+e[o+1]),S$g(x$b.x+e[o+2],x$b.y+e[o+3]),S$g(x$b.x+=e[o+4],x$b.y+=e[o+5]);break;case"s":case"q":for(o=0;o<i;o+=4)S$g(x$b.x+e[o],x$b.y+e[o+1]),S$g(x$b.x+=e[o+2],x$b.y+=e[o+3]);break;case"A":for(o=0;o<i;o+=7)S$g(e[o+5],e[o+6]);x$b.x=e[i-2],x$b.y=e[i-1];break;case"a":for(o=0;o<i;o+=7)S$g(x$b.x+=e[o+5],x$b.y+=e[o+6]);}}function E$9(t,e,i){const o=u$F[t.toLowerCase()];let r;"number"==typeof o&&(o?e.length>=o&&(r={action:t,args:e.slice(0,e.length-e.length%o)},i.push(r),G$7(r)):(r={action:t,args:[]},i.push(r),G$7(r)));}function F$7(t){const e=("string"!=typeof t.path?j$b(t.path):t.path).match(p$X),i=[];if(g$s={},x$b={},!e)return null;let o="",r=[];const n=e.length;for(let a=0;a<n;++a){const t=e[a],n=parseFloat(t);isNaN(n)?(o&&E$9(o,r,i),r=[],o=t):r.push(n);}E$9(o,r,i);const s={x:0,y:0,width:0,height:0};return g$s&&"left"in g$s&&(s.x=g$s.left,s.y=g$s.top,s.width=g$s.right-g$s.left,s.height=g$s.bottom-g$s.top),s}function T$a(t){const e={x:0,y:0,width:0,height:0};if("circle"===t.type)e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if("ellipse"===t.type)e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if("image"===t.type||"rect"===t.type)e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if("path"===t.type){const i=F$7(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height;}return e}function U$b(t){const e={x:0,y:0,width:0,height:0};let i=null,o=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY;for(const n of t)i?(i.x=Math.min(i.x,n.x),i.y=Math.min(i.y,n.y),o=Math.max(o,n.x+n.width),r=Math.max(r,n.y+n.height)):(i=e,i.x=n.x,i.y=n.y,o=n.x+n.width,r=n.y+n.height);return i&&(i.width=o-i.x,i.height=r-i.y),i}function L$e(t,e,r,n,s,a,l,h){const c=(l&&a?k$a(a,e):e)/2,f=(l&&a?k$a(a,r):r)/2,d=t.width+n,y=t.height+n,u=n$1c(),p=n$1c();let g=!1;if(s&&0!==d&&0!==y){const t=d/y,i=e>r?e:r;let n=1,s=1;isNaN(i)||(t>1?(n=i/d,s=i/t/y):(s=i/y,n=i*t/d)),o$z(p,p,z$8(u,n,s,c,f)),g=!0;}const x=t.x+(d-n)/2,m=t.y+(y-n)/2;if(o$z(p,p,N$9(u,c-x,f-m)),!g&&(d>e||y>r)){const t=d/e>y/r,i=(t?e:r)/(t?d:y);o$z(p,p,z$8(u,i,i,x,m));}return a&&o$z(p,p,$$9(u,a,x,m)),h&&o$z(p,p,N$9(u,h[0],h[1])),`matrix(${p[0]},${p[1]},${p[2]},${p[3]},${p[4]},${p[5]})`}function C$d(t,e,i,o){const r=[],n=[];for(const s of t){const t=[],a=[];let h=0,c=0,f=0;for(const e of s){const{shape:i,fill:o,stroke:n,font:s,offset:l}=e;h+=n&&n.width||0;const d=v$g(o),y=A$a(n),u="text"===i.type?M$9(i,s):null;r.push(I$f(d)),t.push(b$f(i,d.fill,y,u)),a.push(T$a(i)),l&&(c+=l[0],f+=l[1]);}const d=L$e(U$b(a),e,i,h,null==o?void 0:o.scale,null==o?void 0:o.rotation,null==o?void 0:o.useRotationSize,[c,f]);n.push(n$2g("g",{transform:d},t));}return null!=o&&o.useRotationSize&&null!=o&&o.rotation&&(e=k$a(null==o?void 0:o.rotation,e),i=k$a(null==o?void 0:o.rotation,i)),n$2g("svg",{xmlns:h$A,width:e,height:i},n$2g("defs",null,r),n)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$O=i$2m();function h$z(t,e,i){const n=Math.ceil(e[0]),r=Math.ceil(e[1]);if(!t.some((t=>!!t.length)))return null;const o=i&&i.node||document.createElement("div");return null!=i.opacity&&(o.style.opacity=i.opacity.toString()),null!=i.effect&&(o.style.filter=i.effect),s$O.append(o,C$d.bind(null,t,n,r,i)),o}function l$M(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const n=i.getContext("2d");return n.clearRect(0,0,t,e),n}function m$G(t,i,n){return t?E$v(t,{responseType:"image"}).then((t=>{const e=t.data,r=e.width,o=e.height,a=r/o;let c=i;if(n){const t=Math.max(r,o);c=Math.min(c,t);}return {image:e,width:a<=1?Math.ceil(c*a):c,height:a<=1?c:Math.ceil(c/a)}})):Promise.reject(new s$2l("renderUtils: imageDataSize","href not provided."))}function g$r(t,e){return !(!t||"ignore"===e)&&("multiply"!==e||255!==t.r||255!==t.g||255!==t.b||1!==t.a)}function u$E(t,e,r,o,a){switch(a){case"multiply":t[e+0]*=r[0],t[e+1]*=r[1],t[e+2]*=r[2],t[e+3]*=r[3];break;default:{const a=y$t({r:t[e+0],g:t[e+1],b:t[e+2]});a.h=o.h,a.s=o.s,a.v=a.v/100*o.v;const c=p$_(a);t[e+0]=c.r,t[e+1]=c.g,t[e+2]=c.b,t[e+3]*=r[3];break}}}function d$C(e,n,r,a,c){return m$G(e,n,c).then((c=>{const s=c.width?c.width:n,h=c.height?c.height:n;if(c.image&&g$r(r,a)){let t=c.image.width,n=c.image.height;s$2r("edge")&&/\.svg$/i.test(e)&&(t-=1,n-=1);const m=l$M(s,h);m.drawImage(c.image,0,0,t,n,0,0,s,h);const g=m.getImageData(0,0,s,h),d=[r.r/255,r.g/255,r.b/255,r.a],f=y$t(r);for(let e=0;e<g.data.length;e+=4)u$E(g.data,e,d,f,a);m.putImageData(g,0,0),e=m.canvas.toDataURL("image/png");}else {const i=n$2R&&n$2R.findCredential(e);if(i&&i.token){const t=-1===e.indexOf("?")?"?":"&";e=`${e}${t}token=${i.token}`;}}return {url:e,width:s,height:h}})).catch((function(){return {url:e,width:n,height:n}}))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function a$$(a){return a=a||e$24.location.hostname,e$w.some((c=>{var t;return null!=(null==(t=a)?void 0:t.match(c))}))}function t$y(a,t){return a&&(t=t||e$24.location.hostname)?null!=t.match(r$w)||null!=t.match(m$F)?a.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(n$1a)||null!=t.match(s$N)?a.replace("static.arcgis.com","staticqa.arcgis.com"):a:a}const r$w=/^devext.arcgis.com$/,n$1a=/^qaext.arcgis.com$/,m$F=/^[\w-]*\.mapsdevext.arcgis.com$/,s$N=/^[\w-]*\.mapsqa.arcgis.com$/,e$w=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,r$w,n$1a,/^jsapps.esri.com$/,m$F,s$N];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function g$q(t,e,r,l){return t.name?t.styleName&&"Esri2DPointSymbolsStyle"===t.styleName?j$a(t,e,l):m$19(t,e,l).then((o=>h$y(o,t.name,e,r,l))):Promise.reject(new s$2l("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function h$y(y,c,g,h,j){const d=y.data,U={portal:g&&g.portal||B$i.getDefault(),url:U$s(y.baseUrl),origin:"portal-item"},N=d.items.find((t=>t.name===c));if(!N){const t=`The symbol name '${c}' could not be found`;return Promise.reject(new s$2l("symbolstyleutils:symbol-name-not-found",t,{symbolName:c}))}let w=c$28(p$1D(N,h),U),P=N.thumbnail&&N.thumbnail.href;const S=N.thumbnail&&N.thumbnail.imageData;a$$()&&(w=t$y(w),P=t$y(P));const D={portal:g.portal,url:U$s(ht$3(w)),origin:"portal-item"};return b$w(w,j).then((e=>{const r="cimRef"===h?c$1D(e.data):e.data,o=l$1n(r,D);if(o&&x$p(o)){if(P){const t=c$28(P,U);o.thumbnail=new c$23({url:t});}else S&&(o.thumbnail=new c$23({url:`data:image/png;base64,${S}`}));y.styleUrl?o.styleOrigin=new l$1y({portal:g.portal,styleUrl:y.styleUrl,name:c}):y.styleName&&(o.styleOrigin=new l$1y({portal:g.portal,styleName:y.styleName,name:c}));}return o}))}function j$a(t,e,r){const o=j$n.replace(/\{SymbolName\}/gi,t.name);return b$w(o,r).then((t=>{const r=c$1D(t.data);return l$1n(r,{portal:e.portal,url:U$s(ht$3(o)),origin:"portal-item"})}))}

const webStyleSymbolUtils = /*#__PURE__*/Object.freeze({
  __proto__: null,
  fetchSymbolFromStyle: h$y,
  resolveWebStyleSymbol: g$q
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const D$b=22,O$8=120,C$c=80,I$e=40,R$a=20,E$8=s$2n.getLogger("esri.symbols.support.previewSymbol3D");function Z$6(e){const t=e.outline,s=r$1K(e.material)?e.material.color:null,r=r$1K(s)?s.toHex():null;if(t$1T(t)||"pattern"in t&&r$1K(t.pattern)&&"style"===t.pattern.type&&"none"===t.pattern.style)return "fill"===e.type&&"#ffffff"===r?{color:"#bdc3c7",width:.75}:null;const o=u$1s(t.size)||0;return {color:"rgba("+(r$1K(t.color)?t.color.toRgba():"255,255,255,1")+")",width:Math.min(o,C$c),style:"pattern"in t&&r$1K(t.pattern)&&"style"===t.pattern.type?x$f(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}function q$9(t,s){const r=s&&s.resource,o=r&&r.href;if(t.thumbnail&&t.thumbnail.url)return Promise.resolve(t.thumbnail.url);if(o&&"object"!==s.type)return Promise.resolve(d$G(t,s));const a=a$34("esri/images/Legend/legend3dsymboldefault.png");return t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)?g$q(t.styleOrigin,{portal:t.styleOrigin.portal},"webRef").catch((e=>e)).then((e=>{var t;return (null==e||null==(t=e.thumbnail)?void 0:t.url)||a})):Promise.resolve(a)}function A$9(e,r=1){const o=e.a,a=y$t(e),n=a.h,l=a.s/r,i=100-(100-a.v)/r,{r:c,g:p,b:u}=p$_({h:n,s:l,v:i});return [c,p,u,o]}function H$6(e){return "water"===e.type?t$1T(e.color)?null:e.color:t$1T(e.material)||t$1T(e.material.color)?null:e.material.color}function N$8(e,t=0){const s=H$6(e);if(!s){if("fill"===e.type)return null;const s=k$d.r,r=u$H(s,t);return [r,r,r,100]}const r=s.toRgba();for(let o=0;o<3;o++)r[o]=u$H(r[o],t);return r}async function T$9(t,s){const r=t.style;if("none"===r)return null;return {type:"pattern",x:0,y:0,src:await w$k(a$34(`esri/symbols/patterns/${r}.png`),s.toCss(!0)),width:5,height:5}}function $$8(e){return e.outline?Z$6(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function B$8(e,t){const s=H$6(e);if(!s)return null;let r="rgba(";return r+=u$H(s.r,t)+",",r+=u$H(s.g,t)+",",r+=u$H(s.b,t)+",",r+s.a+");"}function F$6(e,t){const s=B$8(e,t);if(!s)return {};if("pattern"in e&&r$1K(e.pattern)&&"style"===e.pattern.type&&"none"===e.pattern.style)return null;return {color:s,width:Math.min(e.size?u$1s(e.size):.75,C$c),style:"pattern"in e&&r$1K(e.pattern)&&"style"===e.pattern.type?x$f(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?"miter"===e.join?u$1s(2):e.join:null}}function G$6(e,t,s){const r=.75*s;return {type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function J$4(e){const t=e.depth,s=e.height,r=e.width;return r&&t&&s&&r===t&&r<s}function K$6(e,t,s){const r=[];if(!e)return r;switch(e.type){case"icon":{const s=0,o=0,a=t,n=t;switch(e.resource&&e.resource.primitive||j$w){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:N$8(e,0),stroke:Z$6(e)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[s,n]},{command:"L",values:[s,o]},{command:"L",values:[a,o]},{command:"L",values:[a,n]},{command:"Z",values:[]}]},fill:N$8(e,0),stroke:Z$6(e)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[s,n]},{command:"L",values:[.5*a,o]},{command:"L",values:[a,n]},{command:"Z",values:[]}]},fill:N$8(e,0),stroke:Z$6(e)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*a,o]},{command:"L",values:[.5*a,n]},{command:"M",values:[s,.5*n]},{command:"L",values:[a,.5*n]}]},stroke:$$8(e)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[s,o]},{command:"L",values:[a,n]},{command:"M",values:[a,o]},{command:"L",values:[s,n]}]},stroke:$$8(e)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[s,.5*n]},{command:"L",values:[.5*a,o]},{command:"L",values:[a,.5*n]},{command:"L",values:[.5*a,n]},{command:"Z",values:[]}]},fill:N$8(e,0),stroke:Z$6(e)});}break}case"object":switch(e.resource&&e.resource.primitive||d$1f){case"cone":{const o=G$6(N$8(e,0),N$8(e,-.6),s?R$a:t),a=n$1d(t,s);r.push({shape:a[0],fill:o}),r.push({shape:a[1],fill:o});break}case"inverted-cone":{const s=N$8(e,0),o=G$6(s,N$8(e,-.6),t),a=o$B(t);r.push({shape:a[0],fill:o}),r.push({shape:a[1],fill:s});break}case"cube":{const o=p$Z(t,s);r.push({shape:o[0],fill:N$8(e,0)}),r.push({shape:o[1],fill:N$8(e,-.3)}),r.push({shape:o[2],fill:N$8(e,-.5)});break}case"cylinder":{const o=G$6(N$8(e,0),N$8(e,-.6),s?R$a:t),a=L$f(t,s);r.push({shape:a[0],fill:o}),r.push({shape:a[1],fill:o}),r.push({shape:a[2],fill:N$8(e,0)});break}case"diamond":{const s=s$Q(t);r.push({shape:s[0],fill:N$8(e,-.3)}),r.push({shape:s[1],fill:N$8(e,0)}),r.push({shape:s[2],fill:N$8(e,-.3)}),r.push({shape:s[3],fill:N$8(e,-.7)});break}case"sphere":{const s=G$6(N$8(e,0),N$8(e,-.6));s.x1=0,s.y1=0,s.x2=.25*t,s.y2=.25*t,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:s});break}case"tetrahedron":{const s=l$O(t);r.push({shape:s[0],fill:N$8(e,-.3)}),r.push({shape:s[1],fill:N$8(e,0)}),r.push({shape:s[2],fill:N$8(e,-.6)});break}}break}return r}function Q$6(e){return "icon"===e.type?"multiply":"tint"}function V$5(e,t){const s=t&&t.size?u$1s(t.size):null,r=t&&t.maxSize?u$1s(t.maxSize):null,o=t&&t.disableUpsampling,a=e.symbolLayers,n=[];let c=0,p=0;const u=a.getItemAt(a.length-1);let h;return u&&"icon"===u.type&&(h=u.size&&u$1s(u.size)),a.forEach((a=>{if("icon"!==a.type&&"object"!==a.type)return;const l="icon"===a.type?a.size&&u$1s(a.size):0,u=s||l?Math.ceil(Math.min(s||l,r||O$8)):D$b;if(a&&a.resource&&a.resource.href){const t=q$9(e,a).then((function(e){const t=a.get("material.color"),s=Q$6(a);return d$C(e,u,t,s,o)})).then((function(e){const t=e.width,s=e.height;return c=Math.max(c,t),p=Math.max(p,s),[{shape:{type:"image",x:0,y:0,width:t,height:s,src:e.url},fill:null,stroke:null}]}));n.push(t);}else {var m;let e=u;"icon"===a.type&&h&&s&&(e=u*(l/h));const r="tall"===(null==t?void 0:t.symbolConfig)||(null==t||null==(m=t.symbolConfig)?void 0:m.isTall)||"object"===a.type&&J$4(a);c=Math.max(c,r?R$a:e),p=Math.max(p,e),n.push(Promise.resolve(K$6(a,e,r)));}})),T$s(n).then((function(e){const s=[];return e.forEach((function(e){e.value?s.push(e.value):e.error&&E$8.warn("error while building swatchInfo!",e.error);})),h$z(s,[c,p],{node:t&&t.node,scale:!1,opacity:t&&t.opacity})}))}function W$6(e,t){const s=e.symbolLayers,r=[],o=w$j(e),n=t&&t.size?u$1s(t.size):null,l=(t&&t.maxSize?u$1s(t.maxSize):null)||C$c;let c,p=0,u=0;return s.forEach(((e,t)=>{if(!e)return;if("line"!==e.type&&"path"!==e.type)return;const s=[];switch(e.type){case"line":{const r=F$6(e,0);if(t$1T(r))break;const o=r&&r.width||0;0===t&&(c=o);const i=Math.min(n||o,l),h=0===t?i:n?i*(o/c):i,m=h>I$e/2?2*h:I$e;u=Math.max(u,h),p=Math.max(p,m),r.width=h,s.push({shape:{type:"path",path:[{command:"M",values:[0,.5*u]},{command:"L",values:[p,.5*u]}]},stroke:r});break}case"path":{const t=Math.min(n||D$b,l),r=N$8(e,0),o=N$8(e,-.2),a=B$8(e,-.4),i=a?{color:a,width:1}:{};if("quad"===e.profile){const t=e.width,a=e.height,n=e$z(t&&a?t/a:1,0===a,0===t),l={...i,join:"bevel"};s.push({shape:n[0],fill:o,stroke:l}),s.push({shape:n[1],fill:o,stroke:l}),s.push({shape:n[2],fill:r,stroke:l});}else s.push({shape:t$A.pathSymbol3DLayer[0],fill:o,stroke:i}),s.push({shape:t$A.pathSymbol3DLayer[1],fill:r,stroke:i});u=Math.max(u,t),p=u;}}r.push(s);})),Promise.resolve(h$z(r,[p,u],{node:t&&t.node,scale:o,opacity:t&&t.opacity}))}async function X$6(e,t){const s="mesh-3d"===e.type,r=e.symbolLayers,o=t&&t.size?u$1s(t.size):null,l=t&&t.maxSize?u$1s(t.maxSize):null,c=o||D$b,p=[];let u=0,h=0,m=!1;for(let i=0;i<r.length;i++){const e=r.getItemAt(i),t=[];if(s&&"fill"!==e.type)continue;const o=t$A.fill[0];switch(e.type){case"fill":{const r=Z$6(e),a=Math.min(c,l||O$8);u=Math.max(u,a),h=Math.max(h,a),m=!0;let i=N$8(e,0);const p="pattern"in e&&e.pattern,f=H$6(e);!s&&r$1K(p)&&"style"===p.type&&"solid"!==p.style&&f&&(i=await T$9(p,f)),t.push({shape:o,fill:i,stroke:r});break}case"line":{const s=F$6(e,0);if(t$1T(s))break;const r={stroke:s,shape:o};u=Math.max(u,D$b),h=Math.max(h,D$b),t.push(r);break}case"extrude":{const s={join:"round",width:1,...F$6(e,-.4)},r=N$8(e,0),o=N$8(e,-.2),a=Math.min(c,l||O$8),n=m$J(a);s.width=1,t.push({shape:n[0],fill:o,stroke:s}),t.push({shape:n[1],fill:o,stroke:s}),t.push({shape:n[2],fill:r,stroke:s});const i=D$b,p=.7*D$b+.5*a;u=Math.max(u,i),h=Math.max(h,p);break}case"water":{const s=H$6(e),r=A$9(s),o=A$9(s,2),a=A$9(s,3),n=c$12();m=!0,t.push({shape:n[0],fill:r}),t.push({shape:n[1],fill:o}),t.push({shape:n[2],fill:a});const i=Math.min(c,l||O$8);u=Math.max(u,i),h=Math.max(h,i);break}}p.push(t);}return Promise.resolve(h$z(p,[u,h],{node:t&&t.node,scale:m,opacity:t&&t.opacity}))}function Y$6(e,t){if(0===e.symbolLayers.length)return Promise.reject(new s$2l("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return V$5(e,t);case"line-3d":return W$6(e,t);case"polygon-3d":case"mesh-3d":return X$6(e,t)}return Promise.reject(new s$2l("symbolPreview: swatchInfo3D","symbol not supported."))}

const previewSymbol3D = /*#__PURE__*/Object.freeze({
  __proto__: null,
  getPatternDescriptor: T$9,
  getSymbolLayerFill: N$8,
  previewSymbol3D: Y$6
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$M={HH:315,HL:45,LL:135,LH:225},l$L={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function n$19(t){if(!t)return;const{type:s}=t;if(s.indexOf("3d")>-1)return N$8(t.symbolLayers.getItemAt(0));if("simple-line"===s){const e=j$d(t);return e&&e.color}if("simple-marker"===t.type&&("x"===t.style||"cross"===t.style)){const e=j$d(t);return e&&e.color}return b$k(t)}function H$5(t,o){const e=o.HH.label,r=o.LL.label,s=o.HL.label,l=o.LH.label;switch(t){default:return {top:e,bottom:r,left:s,right:l};case"HL":return {top:s,bottom:l,left:r,right:e};case"LL":return {top:r,bottom:e,left:l,right:s};case"LH":return {top:l,bottom:s,left:e,right:r}}}function i$R(t){const{focus:o,infos:e,numClasses:r}=t,s=l$L[r],L={};e.forEach((t=>{L[t.value]={label:t.label,fill:n$19(t.symbol)};}));const i=[];for(let l=0;l<r;l++){const t=[];for(let o=0;o<r;o++){const e=L[s[l][o]];t.push(e.fill);}i.push(t);}return {type:"relationship-ramp",numClasses:r,focus:o,colors:i,labels:H$5(o,L),rotation:f$r(o)}}function f$r(t){let o=s$M[t];return t&&null==o&&(o=s$M.HH),o||0}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u$D=30,c$$=12,m$E=[255,255,255],f$q=[200,200,200],p$W=[128,128,128],y$q=20,b$e=5;function d$B(e){return "esri.symbols.SimpleMarkerSymbol"===e.declaredClass}function h$x(e){return "esri.symbols.PictureMarkerSymbol"===e.declaredClass}function v$f(e){return "esri.symbols.SimpleLineSymbol"===e.declaredClass}function g$p(e){return "esri.symbols.TextSymbol"===e.declaredClass}function w$g(e,l){const t=e.length-1;return e.map(((e,n)=>U$c(e,n,t,l)))}async function S$f(e,l,n,i,o,a){var u,c;const m=l.legendOptions,f=m&&m.customValues,p=V$4(e,n),y=!!p,b=!!f,d=null!=l.minSize&&null!=l.maxSize,h=l.stops&&l.stops.length>1,v=!!l.target;if(!y||!b&&!(d||h&&!v))return;const g=w$j(p);let S=null,k=null,j=null;k=g&&!h?u$K([l.minDataValue,l.maxDataValue]):f||await C$b(l,p,i,o);const L=null==e?void 0:e.authoringInfo,O="univariate-color-size"===(null==L?void 0:L.type),D=O&&"above-and-below"===(null==L?void 0:L.univariateTheme);if(!k&&h&&(k=l.stops.map((e=>e.value)),S=l.stops.some((e=>!!e.label)),S&&(j=l.stops.map((e=>e.label)))),g&&(null==(u=k)?void 0:u.length)>2&&!D&&(k=[k[0],k[k.length-1]]),!k)return null;O&&5!==(null==(c=k)?void 0:c.length)&&(k=I$d({minSize:k[0],maxSize:k[k.length-1]}));const E=g?z$7(e,k):null,T=b$j(p),q=S?null:w$g(k,a);return (await Promise.all(k.map((async(t,n)=>{const s=g?E[n]:await M$8(l,p,t,i,o);return {value:t,symbol:U$a(D&&"class-breaks"===e.type?x$a(e,n):p,s),label:S?j[n]:q[n],size:s,outlineSize:T}})))).reverse()}function z$7(e,l){const t=null==e?void 0:e.authoringInfo,n="univariate-color-size"===(null==t?void 0:t.type);let i=[c$$,u$D];if(n){const e=l[0],t=l[l.length-1],n=c$$,o=u$D;i=l.map((l=>n+(l-e)/(t-e)*(o-n)));}return n&&"below"===(null==t?void 0:t.univariateTheme)&&i.reverse(),i}function x$a(e,l){const t=e.classBreakInfos,n=t.length,i=n<2||!(l>=2)?t[0].symbol.clone():t[n-1].symbol.clone();return e.visualVariables.some((e=>"color"===e.type))&&(i.type.indexOf("3d")>-1?j$9(i):L$d(i)),i}function V$4(e,l){let t=null,n=null;if("simple"===e.type)t=e.symbol;else if("class-breaks"===e.type){const l=e.classBreakInfos;t=l&&l[0]&&l[0].symbol,n=l.length>1;}else if("unique-value"===e.type){const l=e.uniqueValueInfos;t=l&&l[0]&&l[0].symbol,n=l.length>1;}return !t||k$9(t)?null:(t=t.clone(),(l||n)&&(t.type.indexOf("3d")>-1?j$9(t):L$d(t)),t)}function k$9(e){if(e){if(x$p(e)){return !!e.symbolLayers&&e.symbolLayers.some((e=>e&&"fill"===e.type))}return -1!==e.type.indexOf("fill")}return !1}function j$9(e){"line-3d"===e.type?e.symbolLayers.forEach((e=>{e.material={color:p$W};})):e.symbolLayers.forEach((e=>{"icon"!==e.type||e.resource&&e.resource.href?e.material={color:f$q}:(e.material={color:m$E},e.outline={color:p$W,size:1.5});}));}function L$d(l){"cim"===l.type?I$i(l,new h$18(f$q)):-1!==l.type.indexOf("line")?l.color=p$W:(l.color=m$E,"simple-marker"===l.type&&(l.outline={color:p$W,width:1.5}));}async function C$b(e,l,n,i){const o=(await Promise.resolve().then(function () { return visualVariableUtils; })).getSizeRangeAtScale(e,n,i),s=o&&I$d(o);if(!o&&!s)return;let r=s.map((l=>O$7(l,e,o)));r=u$K(r);for(let t=1;t<r.length-1;t++){const o=await D$a(e,l,r[t],r[t-1],n,i);o&&(r[t]=o[0],s[t]=o[1]);}return r}function I$d(e){const l=e.minSize,t=e.maxSize,n=b$e,i=(t-l)/(n-1),o=[];for(let s=0;s<n;s++)o.push(l+i*s);return o}function O$7(e,l,t){const n=t.minSize,i=t.maxSize,o=l.minDataValue,s=l.maxDataValue;let r=null;if(e<=n)r=o;else if(e>=i)r=s;else {r=(e-n)/(i-n)*(s-o)+o;}return r}async function D$a(e,l,o,s,r,a){const u=await M$8(e,l,o,r,a),c=await M$8(e,l,s,r,a),m=i$V(o),f=m.fractional,p=y$q;let b=m.integer,d=null,h=null;o>0&&o<1&&(d=10**f,b=i$V(o*=d).integer);for(let n=b-1;n>=0;n--){const s=10**n;let m=Math.floor(o/s)*s,f=Math.ceil(o/s)*s;null!=d&&(m/=d,f/=d);let y=(m+f)/2;[,y]=u$K([m,y,f],{indexes:[1]});const b=await M$8(e,l,m,r,a),v=await M$8(e,l,f,r,a),g=await M$8(e,l,y,r,a),w=l$Q(u,b,c,null),S=l$Q(u,v,c,null),z=l$Q(u,g,c,null);let x=w.previous<=p,V=S.previous<=p;if(x&&V&&(w.previous<=S.previous?(x=!0,V=!1):(V=!0,x=!1)),x?h=[m,b]:V?h=[f,v]:z.previous<=p&&(h=[y,g]),h)break}return h}async function M$8(e,l,t,n,i){const{getSize:o}=await Promise.resolve().then(function () { return visualVariableUtils; });return o(e,t,{scale:n,view:i,shape:"simple-marker"===l.type?l.style:null})}function U$a(e,t){const n=e.clone();if(x$p(n))w$j(n)||n.symbolLayers.forEach((e=>{"fill"!==e.type&&(e.size=t);}));else if(d$B(n))n.size=t;else if(h$x(n)){const e=n.width,l=n.height;n.height=t,n.width=t*(e/l);}else v$f(n)?n.width=t:g$p(n)&&n.font&&(n.font.size=t);return n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const J$3=s$2n.getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),Q$5="https://utility.arcgis.com/sharing/tools/legend",H$4="esri.layers.ImageryLayer",X$5="esri.layers.ImageryTileLayer",K$5="esri.layers.WCSLayer",Y$5=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,Z$5=new o$1J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),ee$3={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},te$3=new y$10({size:6,outline:{color:[128,128,128,.5],width:.5}}),se$3=new S$r({style:"solid"});function le$2(e){return "vector-field"===e.type}function re$3(e){return "raster-colormap"===e.type}function ie$2(e){return "raster-stretch"===e.type}function ne$2(e){return "raster-shaded-relief"===e.type}function ae$2(e){return "esri.renderers.SimpleRenderer"===e.declaredClass}function oe$3(e){return "esri.renderers.ClassBreaksRenderer"===e.declaredClass}function ue$2(e){return "esri.renderers.UniqueValueRenderer"===e.declaredClass}function ce$2(e){return "esri.renderers.HeatmapRenderer"===e.declaredClass}function de$2(e){return he$1(e)||me$1(e)||pe$2(e)||ye$1(e)}function ye$1(e){return "esri.renderers.PointCloudRGBRenderer"===e.declaredClass}function he$1(e){return "esri.renderers.PointCloudClassBreaksRenderer"===e.declaredClass}function me$1(e){return "esri.renderers.PointCloudStretchRenderer"===e.declaredClass}function pe$2(e){return "esri.renderers.PointCloudUniqueValueRenderer"===e.declaredClass}function fe$2(e){return "esri.renderers.DotDensityRenderer"===e.declaredClass}function ge$1(e,t){return ae$2(e)||oe$3(e)||ue$2(e)||ce$2(e)||fe$2(e)?"2d"===t.type||o$G(e):ie$2(e)||re$3(e)||ne$2(e)||he$1(e)||me$1(e)||pe$2(e)||le$2(e)}function be(e){return "esri.layers.BuildingSceneLayer"===e.declaredClass}function Se(e){return "esri.layers.WMSLayer"===e.declaredClass}function _e(e){return "esri.layers.WMTSLayer"===e.declaredClass}function ve(e){return "esri.layers.MapImageLayer"===e.declaredClass}function we$1(e){return "esri.layers.TileLayer"===e.declaredClass}function Le(e){return "esri.layers.FeatureLayer"===e.declaredClass}function Ee(e){return e.declaredClass===H$4}function Ie(e){return e.declaredClass===X$5}function Ce(e){return e.declaredClass===K$5}function Re(e){return "stretch-ramp"===e.type}function Fe(e){const t="authoringInfo"in e&&(null==e?void 0:e.authoringInfo);return "univariate-color-size"===(null==t?void 0:t.type)}function Ve(e){const t="authoringInfo"in e&&(null==e?void 0:e.authoringInfo);return "univariate-color-size"===(null==t?void 0:t.type)&&"above-and-below"===(null==t?void 0:t.univariateTheme)}const Te=new y$10({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let ze={},xe=class extends p$3a{constructor(e){super(e),this._handles=new u$25,this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this.children=new S$I,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null;}initialize(){const e=()=>this.notifyChange("ready");this._handles.add([$$g(this,"children","change",(t=>{const{added:s,removed:l}=t,r=this._handles;s.forEach((t=>{const s=`activeLayerInfo-ready-watcher-${t.layer.uid}`;r.add(i$2x(t,"ready",e),s);})),l.forEach((e=>r.remove(e.layer.uid))),e();}))]),this.keepCacheOnDestroy||(ze={});}destroy(){this._handles.destroy(),this._handles=null,this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(ze=null);}get effect(){const e=this.layer;let t=null;if("effect"in e&&e.effect){const s=new r$G(0);s.effect=e.effect,s.transitionStep(0,this.scale);const l=s.effects.filter((e=>"bloom"!==e.type)),r=l.map((e=>e.toJSON()));t=f$D(r);}return t}get opacity(){var e;const t=this.layer.opacity,s=null==(e=this.parent)?void 0:e.opacity,l=this.layer.parent,r=l&&"uid"in l?this._getParentLayerOpacity(l):null;return null!=s?s*t:null!=r?r*t:t}get ready(){return null===this.layer||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view&&this.view.scale}get isScaleDriven(){const e=this.layer;if(null===e)return !1;if("effect"in e&&e.effect&&Array.isArray(e.effect))return !0;if("featureReduction"in e&&e.featureReduction&&"cluster"===e.featureReduction.type)return !0;if("renderer"in e&&e.renderer){if("dot-density"===e.renderer.type)return !0;const t=e.get("renderer.valueExpression");if(Y$5.test(t))return !0;const s=e.get("renderer.visualVariables");if(s)return s.some((e=>this._isScaleDrivenSizeVariable(e)))}return this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(e){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const t=Array.from(e,(e=>{if(Le(e))return this._getRendererLegendElements(e.renderer,{title:e.title});if(e.featureSet&&e.featureSet.features.length){const t=e.layerDefinition,s=t&&t.drawingInfo,l=s&&t$S(s.renderer),r=Z$5.read(t.geometryType);return l?this._getRendererLegendElements(l,{title:e.name,geometryType:r}):(J$3.warn("drawingInfo not available!"),null)}return null}));try{const e=[];await T$s(t).then((t=>{t.forEach((({value:t})=>t&&e.push(...t)));})),this.legendElements=e,this.notifyChange("ready");}catch(s){J$3.warn("error while building legend for layer!",s);}}async buildLegendElementsForRenderer(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getRendererLegendElements(e):[],this.notifyChange("ready");}catch(t){J$3.warn("error while building legend for layer!",t);}}async buildLegendElementsForTools(){const e=this.layer;if(_e(e))this._constructLegendElementsForWMTSlayer();else if(Se(e))await this._constructLegendElementsForWMSSublayers();else if(be(e))await this._constructLegendElementsForBuildingSceneLayer();else if(ve(e)||we$1(e)||be(e))await this._constructLegendElementsForSublayers();else {this._handles.remove("imageryLayers-watcher");let l="default";if(Ee(e)){var t,s;const r=e;l=((null==r||null==(t=r.renderingRule)?void 0:t.functionName)||"default")+"_"+(null!=(s=e.bandIds)&&s.length?e.bandIds.join(""):"###");}await this._getLegendLayers(`${e.uid}-${l}`).then((async t=>{this.legendElements=[],this.notifyChange("ready");const s=t.map((async t=>{if(Ee(e)||Ie(e)){const t=e.watch(["renderingRule","bandIds"],(()=>z$r((async()=>{ze.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools();}))()));this._handles.add(t,"imageryLayers-watcher");}const s=this._generateSymbolTableElementForLegendLayer(t);s&&s.infos.length&&(Ee(e)&&(s.title=e.title),this.legendElements.push(s)),this.notifyChange("ready");}));await T$s(s);})).catch((e=>{J$3.warn("Request to server for legend has failed!",e);}));}}async _isLayerInCurrentView(){const e=this.layer,t=this.layerView,s=t&&"createQuery"in t&&"queryFeatureCount"in t;if(!s&&!(t&&"createQuery"in e&&"queryFeatureCount"in e))return !0;await g$15(t,"updating");const l=s?"createQuery"in t&&t.createQuery():"createQuery"in e&&e.createQuery();l.geometry=this.view.extent;return 0!==(s?"queryFeatureCount"in t&&await t.queryFeatureCount(l):"queryFeatureCount"in e&&await e.queryFeatureCount(l))}_getParentLayerOpacity(e){let t=1;const s=e.parent;return s&&"uid"in s&&(t=this._getParentLayerOpacity(s)),e.opacity*t}_isGroupActive(){const e=this.children;return !!e.length&&e.some((e=>e.ready))}_isScaleDrivenSizeVariable(e){if(e&&"size"!==e.type)return !1;const t=e,s=t.minSize,l=t.maxSize;return "object"==typeof s&&s?this._isScaleDrivenSizeVariable(s):"object"==typeof l&&l?this._isScaleDrivenSizeVariable(l):!!t.expression||Y$5.test(t.valueExpression)}_isLayerScaleDriven(e){if("minScale"in e&&e.minScale>0||"maxScale"in e&&e.maxScale>0)return !0;if("sublayers"in e&&e.sublayers)return e.sublayers.some((e=>this._isLayerScaleDriven(e)));const t=e.parent;if(!1===e.loaded&&t&&ve(t)&&"source"in e&&e.source&&"map-layer"===e.source.type)for(const s of t.sourceJSON.layers)if(s.id===e.source.mapLayerId&&(s.minScale>0||s.maxScale>0))return !0;return !1}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this._handles.remove("wmts-activeLayer-watcher");const e=this.layer.activeLayer;if(this._handles.add(f$1B(this.layer,"activeLayer",(()=>this._constructLegendElementsForWMTSlayer())),"wmts-activeLayer-watcher"),e.styleId&&e.styles){let t=null;e.styles.some((s=>e.styleId===s.id&&(t=s.legendUrl,!0))),t&&(this.legendElements=[{type:"symbol-table",title:e.title,infos:[{src:t,opacity:this.opacity}]}]);}this.notifyChange("ready");}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this._handles.remove("wms-sublayers-watcher");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t={...e.customParameters,...e.customLayerParameters}),this._handles.add(f$1B(this.layer,"sublayers",(()=>this._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange("ready");}async _generateLegendElementsForWMSSublayers(e,t){const s=[];this._handles.add(e.on("change",(()=>this._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher");const l=e.toArray();for(const r of l){const e=r.watch(["title","visible","legendEnabled"],(()=>this._constructLegendElementsForWMSSublayers()));if(this._handles.add(e,"wms-sublayers-watcher"),!this.respectLayerVisibility||r.visible&&r.legendEnabled){const e=await this._generateSymbolTableElementForWMSSublayer(r,t);e&&e.infos.length&&s.unshift(e);}}return s}async _generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const s=(await this._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter((e=>e));return {type:"symbol-table",title:e.title,infos:s}}return this._generateSymbolTableElementForLegendUrl(e,t)}async _generateSymbolTableElementForLegendUrl(e,t){var s;let r=e.legendUrl;if(!r)return;const i={type:"symbol-table",title:e.title||e.name||e.id&&e.id+"",infos:[]};t&&(r=Rt$2(r,t));let n=null;const a=null==(s=e.layer)?void 0:s.opacity;try{n=(await E$v(r,{responseType:"image"})).data,n&&(n.style.opacity=a);}catch{}return i.infos.push({src:r,preview:n,opacity:a}),i}_getLegendLayers(e,t){const s=ze&&ze[e];return s?Promise.resolve(s):this._legendRequest(t).then((t=>{const s=t.layers;return ze[e]=s,s}))}_legendRequest(e){const t=this.layer;let s={f:"json",dynamicLayers:e};if(Ee(t)){const e=t.exportImageServiceParameters.renderingRule;if(e&&(s.renderingRule=JSON.stringify(e.toJSON())),t.bandIds&&(s.bandIds=t.bandIds.join()),t.raster||t.viewId||t.customParameters){const{raster:e,viewId:l,customParameters:r}=t;s={raster:e,viewId:l,...s,...r};}}let r=t.url.replace(/(\/)+$/,"");if("version"in t&&t.version>=10.01){const e=r.indexOf("?");e>-1?r=r.substring(0,e)+"/legend"+r.substring(e):r+="/legend";}else {const e=r.toLowerCase().indexOf("/rest/"),t=r.substring(0,e)+r.substring(e+5,r.length);r=Q$5+"?soapUrl="+encodeURI(t)+"&returnbytes=true";}return E$v(r,{query:s}).then((e=>e.data))}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this._handles.remove("sublayers-watcher");const e=this.layer;this._handles.add(f$1B(e,"sublayers",(()=>this._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity),this.notifyChange("ready");}catch(t){J$3.warn("Request to server for legend has failed!",t);}}async _generateLegendElementsForBuildingSublayers(e,t){let s=[];this._handles.add(e.on("change",(()=>this._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");const l=e.toArray();for(const r of l){const e=r.watch(["renderer","opacity","title","visible"],(()=>this._constructLegendElementsForBuildingSceneLayer()));if(this._handles.add(e,"sublayers-watcher"),!this.respectLayerVisibility||r.visible){const e=r&&null!=r.opacity?r.opacity:null,l=null!=e?e*t:t;if("building-group"===r.type){const e={type:"symbol-table",title:r.title,infos:[]},t=await this._generateLegendElementsForBuildingSublayers(r.sublayers,l);e.infos.push(...t),s=[e,...s];}else if(r.renderer){s=[...await this._getRendererLegendElements(r.renderer,{title:r.title,opacity:l,sublayer:r}),...s];}}}return s.filter((e=>!!e&&(!("infos"in e)||e.infos.length>0)))}async _constructLegendElementsForSublayers(){this.legendElements=[],this._handles.remove("sublayers-watcher");const e=this.layer;this._handles.add(f$1B(e,"sublayers",(()=>this._constructLegendElementsForSublayers)),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity),this.notifyChange("ready");}catch(t){J$3.warn("Request to server for legend has failed!",t);}}async _generateLegendElementsForSublayers(e,t,s){const l=this.layer;let r=[];this._handles.add(e.on("change",(()=>this._constructLegendElementsForSublayers())),"sublayers-watcher");let i=e.toArray();!s&&this.sublayerIds&&this.sublayerIds.length&&(i=this.sublayerIds.map((e=>l.findSublayerById(e))).filter(Boolean));for(const n of i){const e=n.watch("renderer, opacity, title, visible, legendEnabled",(()=>this._constructLegendElementsForSublayers()));if(this._handles.add(e,"sublayers-watcher"),!this.respectLayerVisibility||n.visible&&n.legendEnabled&&this._isSublayerInScale(n)){const e=n&&null!=n.opacity?n.opacity:null,l=null!=e?e*t:t;if(n.renderer&&!n.sublayers&&n.originIdOf("renderer")>2){await n.load();r=[...await this._getRendererLegendElements(n.renderer,{title:n.title,opacity:l,sublayer:n}),...r];}else {const e=await this._generateSymbolTableElementForSublayer(n,l,s);e&&r.unshift(e);}}}return r.filter((e=>!!e&&(!("infos"in e)||e.infos.length>0)))}async _generateSymbolTableElementForSublayer(e,t,s){if(!s){s=new Map;const t=this.layer,l=e.source;let r=null;if(!(!l||"map-layer"===l.type&&l.mapLayerId===e.id&&(!l.gdbVersion||l.gdbVersion===("gdbVersion"in t&&t.gdbVersion)))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("labelsVisible")>2){const e=new c$18({layer:this.layer});r=e.hasDynamicLayers?e.dynamicLayers:null,e.destroy();}const i=r||`${t.uid}-default`;(await this._getLegendLayers(i,r)).forEach((e=>s.set(e.layerId,e)));}const l=s.get(e.id);if(!l&&e.sublayers){const l=await this._generateLegendElementsForSublayers(e.sublayers,t,s);return {type:"symbol-table",title:e.title,infos:l}}return this._generateSymbolTableElementForLegendLayer(l,e,t)}_generateSymbolTableElementForLegendLayer(e,t,s){var l;if(!e||!e.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const r=null==t?void 0:t.renderer;let i=(null==t?void 0:t.title)||e.layerName;if(r&&(!t||(null==t?void 0:t.originIdOf("renderer"))>2)){const e=(null==t?void 0:t.title)||this._getRendererTitle(r,t);e&&(i&&"string"!=typeof e&&"title"in e&&(e.title=i),i=e);}const n={type:"symbol-table",title:i,legendType:e.legendType?e.legendType:null,infos:[]},a=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return (null==(l=e.legendGroups)?void 0:l.length)>0?e.legendGroups.forEach((t=>{var l;const r={type:"symbol-table",title:t.heading,legendType:e.legendType?e.legendType:null,infos:this._generateSymbolTableElementInfosForLegendLayer(a.filter((e=>e.groupId===t.id)),e.layerId,s)};(null==(l=r.infos)?void 0:l.length)>0&&n.infos.push(r);})):n.infos=this._generateSymbolTableElementInfosForLegendLayer(a,e.layerId,s),n.infos.length>0?n:null}_generateSymbolTableElementInfosForLegendLayer(e,t,l){return e.map((e=>{let r=e.url;if(e.imageData&&e.imageData.length>0)r=`data:image/png;base64,${e.imageData}`;else {if(0===r.indexOf("http"))return null;r=i$2M(`${this.layer.url}/${t}/images/${r}`);}return {label:e.label,src:r,opacity:null==l?this.opacity:l,width:e.width,height:e.height}})).filter((e=>!!e))}_isSublayerInScale(e){const t=e.minScale||0,s=e.maxScale||0;return !(t>0&&t<this.scale||s>this.scale)}_isLegendLayerInScale(e,t){const s=t||this.layer;let l=null,r=null,i=!0;return !s.minScale&&0!==s.minScale||!s.maxScale&&0!==s.maxScale?(0===e.minScale&&s.tileInfo&&(l=s.tileInfo.lods[0].scale),0===e.maxScale&&s.tileInfo&&(r=s.tileInfo.lods[s.tileInfo.lods.length-1].scale)):(l=Math.min(s.minScale,e.minScale)||s.minScale||e.minScale,r=Math.max(s.maxScale,e.maxScale)),(l>0&&l<this.scale||r>this.scale)&&(i=!1),i}_sanitizeLegendForSublayer(e,t){if("version"in this.layer&&this.layer.version<10.1||0===e.length)return e;const s=t.renderer,l=e.some((e=>e.values));let r=null,i=null;return l&&e.some(((e,t)=>(e.values||(r=t,i=e,i.label||(i.label="others")),null!=i))),s?"unique-value"===s.type?i&&(e.splice(r,1),e.push(i)):"class-breaks"===s.type&&(i&&e.splice(r,1),e.reverse(),i&&e.push(i)):i&&(e.splice(r,1),e.push(i)),e}async _getRendererLegendElements(e,t={}){return ge$1(e,this.view)?de$2(e)?this._constructPointCloudRendererLegendElements(e,t):fe$2(e)?this._constructDotDensityRendererLegendElements(e):this._constructRendererLegendElements(e,t):(J$3.warn(`Renderer of type '${e.type}' not supported!`),[])}_getPointCloudRendererTitle(e){return e.legendOptions&&e.legendOptions.title||e.field}_constructPointCloudRendererLegendElements(e,t={}){const s=t.title,l=[];let r=null,i=null;if(he$1(e))r={type:"symbol-table",title:s||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach((e=>{r.infos.unshift({label:e.label||e.minValue+" - "+e.maxValue,value:[e.minValue,e.maxValue],symbol:this._getAppliedCloneSymbol(te$3,e.color)});}));else if(me$1(e)){const t=e.stops;let l=null;if(t.length&&(1===t.length&&(l=t[0].color),!l)){const e=t[0].value,s=t[t.length-1].value;if(null!=e&&null!=s){l=u$J(e+(s-e)/2,t);}}r={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(te$3,l||te$3.color)}]};const n=a$13(e.stops);i={type:"color-ramp",title:s||this._getPointCloudRendererTitle(e),infos:n,preview:p$$(n.map((e=>e.color)))};}else pe$2(e)&&(r={type:"symbol-table",title:s||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos.forEach((e=>{r.infos.push({label:e.label||e.values.join(", "),value:e.values.join(", "),symbol:this._getAppliedCloneSymbol(te$3,e.color)});})));r&&r.infos.length&&l.push(r),i&&i.infos.length&&l.push(i);const n=l.reduce(((e,t)=>e.concat(t.infos)),[]).filter((e=>!!e.symbol)).map((t=>this._getSymbolPreview(t,this.opacity,{symbolConfig:{applyColorModulation:!!e.colorModulation}})));return T$s(n).then((()=>l))}_getElementInfoForDotDensity(e,t){const{backgroundColor:s,outline:l,dotSize:r}=e,i=this.effect,n=r+"-"+t+"-"+s+"-"+(l&&JSON.stringify(l.toJSON()))+"-"+i,a=this._dotDensityUrlCache,o=a.has(n)?a.get(n):y$u(e,t,{effect:i});return a.set(n,o),{opacity:1,src:o.src,preview:o,width:o.width,height:o.height}}_constructDotDensityRendererLegendElements(e){const t=e.calculateDotValue(this.view.scale),s=e.legendOptions&&e.legendOptions.unit,l={type:"symbol-table",title:{value:t&&Math.round(t),unit:s||""},infos:[]};return e.attributes.forEach((t=>{const s=this._getElementInfoForDotDensity(e,t.color);s.label=t.label||t.valueExpressionTitle||t.field,l.infos.push(s);})),Promise.resolve([l])}async _constructRendererLegendElements(e,t={}){const{title:s,sublayer:l}=t,r=l||this.layer;let i=await this._loadRenderer(e);this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const n=await this._getVisualVariableLegendElements(i,r)||[],a={type:"symbol-table",title:s||this._getRendererTitle(i,r),infos:[]};let o=null,c=!1;const y=new Set;if(Fe(i)){let e=s;const t=Ve(i)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",l=n.findIndex((e=>"color-ramp"===e.type)),r=-1!==l?n.splice(l,1)[0]:null,a=n.findIndex((e=>"size-ramp"===e.type)),o=-1!==a?n.splice(a,1)[0]:null,u=[];r&&(e=r.title,u.push(r)),o&&(e=o.title,u.push(o)),u.length>0&&n.push({type:t,title:e,infos:u});}else if(ce$2(i)){const e=r$A(i);n.push({type:"heatmap-ramp",title:s,infos:e,preview:p$$(e.map((e=>e.color)),{effect:this.effect})});}else if(ue$2(i)){const e=i&&i.authoringInfo;if(e&&"relationship"===e.type){const{focus:t,numClasses:s,field1:l,field2:o}=e;if(s&&l&&o){const e=[l,o];let u=f$r(t)||0;for(const t of e){const{field:e,normalizationField:s,label:l}=t,i=l||{field:this._getFieldAlias(e,r),normField:s&&this._getFieldAlias(s,r)},n=Te.clone();n.angle=u,a.infos.push({label:i,symbol:n}),y.add(n),u+=90;}const c=i$R({focus:t,numClasses:s,infos:i.uniqueValueInfos});n.unshift(c);}}else {const e=i.field;i.uniqueValueInfos.forEach((t=>{t.symbol&&a.infos.push({label:t.label||this._getDomainName(e,t.value,r)||t.value,value:t.value,symbol:t.symbol});}));}i.defaultSymbol&&(a.infos.push({label:i.defaultLabel||"others",symbol:i.defaultSymbol}),c=!0);}else if(oe$3(i)){o=this._isUnclassedRenderer(i);(!o||!this._hasSizeRamp)&&(i.classBreakInfos.forEach((e=>{e.symbol&&a.infos.unshift({label:e.label||(o?null:e.minValue+" - "+e.maxValue),value:[e.minValue,e.maxValue],symbol:e.symbol});})),o&&(a.title=null),this._updateInfosforClassedSizeRenderer(i,a.infos)),i.defaultSymbol&&!o&&(a.infos.push({label:i.defaultLabel||"others",symbol:i.defaultSymbol}),c=!0);}else if(ie$2(i)){var h,m;if(Ie(this.layer)&&"Map"===(null==(h=this.layer)||null==(m=h.raster)?void 0:m.tileType))this._getServerSideLegend();else if(Ie(this.layer)||Ce(this.layer)){const e=this._constructTileImageryStretchRendererElements(i);Re(e)?n.push(e):a.infos=e;}else {const e=this.layer;let t,s;var p,f;if(i.statistics&&i.statistics.length)t=null!=i.statistics[0].min?i.statistics[0].min:i.statistics[0][0],s=null!=i.statistics[0].max?i.statistics[0].max:i.statistics[0][1];else t=null==(p=i)?void 0:p.outputMin,s=null==(f=i)?void 0:f.outputMax;let l=[];const r=e$23(e.renderingRule?await e.generateRasterInfo(e.renderingRule):e.serviceRasterInfo),o=r.keyProperties.BandProperties;1===r.bandCount?(t=null!=t?t:r.statistics&&r.statistics[0].min,s=null!=s?s:r.statistics&&r.statistics[0].max,t||s?n.push(this._getStretchLegendElements(i,{min:t,max:s})):this._getServerSideLegend()):e.bandIds&&1===e.bandIds.length?(t=null!=t?t:r.statistics&&r.statistics[e.bandIds[0]].min,s=null!=s?s:r.statistics&&r.statistics[e.bandIds[0]].max,t||s?n.push(this._getStretchLegendElements(i,{min:t,max:s})):this._getServerSideLegend()):r.bandCount>=3?o&&o.length>=r.bandCount?e.bandIds&&3===e.bandIds.length?(l=e.bandIds.map((e=>o[e].BandName)),a.infos=this._createSymbolTableElementMultiBand(l)):"lerc"===e.format?(l=[0,1,2].map((e=>o[e].BandName)),a.infos=this._createSymbolTableElementMultiBand(l)):this._getServerSideLegend():"lerc"===e.format?(l=["band1","band2","band3"],a.infos=this._createSymbolTableElementMultiBand(l)):this._getServerSideLegend():this._getServerSideLegend();}}else if(re$3(i))i.colormapInfos.forEach((e=>{a.infos.push({label:e.label,value:e.value,symbol:this._getAppliedCloneSymbol(se$3,e.color)});}));else if(ae$2(i)){let e=i.symbol;switch(t.geometryType){case"point":e="pointSymbol"in r&&r.pointSymbol;break;case"polyline":e="lineSymbol"in r&&r.lineSymbol;break;case"polygon":e="polygonSymbol"in r&&r.polygonSymbol;}i.symbol&&!this._hasSizeRamp&&a.infos.push({label:i.label,symbol:e});}else if(le$2(i)){i.outputUnit&&(this.title="("+i.toJSON().outputUnit+")"),a.title=i.attributeField;const e=i.getClassBreakInfos();null!=e&&e.length?e.forEach((e=>{a.infos.push({label:e.minValue+" - "+e.maxValue,symbol:e.symbol});})):a.infos.push({label:i.attributeField,symbol:i.getDefaultSymbol()});}else ne$2(i)&&n.push(this._getStretchLegendElements(i,{min:0,max:255}));const g=i.defaultSymbol;!g||c||ae$2(i)||o&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||n.push({type:"symbol-table",infos:[{label:i.defaultLabel||"others",symbol:g}]}),a.infos.length&&n.unshift(a);const b=null==t.opacity?this.opacity:t.opacity,S=this._isTallSymbol("visualVariables"in i&&i.visualVariables),_=Ee(this.layer)||Ie(this.layer),v=n.reduce(((e,t)=>e.concat(this._getAllInfos(t))),[]).filter((e=>!(null==e||!e.symbol))).map((e=>this._getSymbolPreview(e,b,{isDefault:e.symbol===g,applyScaleDrivenSize:!y.has(e.symbol),symbolConfig:{isTall:S,isSquareFill:_},effect:y.has(e.symbol)?null:this.effect})));return i=null,await T$s(v),n}_getServerSideLegend(){setTimeout((()=>this.buildLegendElementsForTools()),0);}_getAllInfos(e){const t=null==e?void 0:e.infos;return t?t.reduce(((e,t)=>e.concat(this._getAllInfos(t))),[]):[e]}_constructTileImageryStretchRendererElements(e){var t,s;const l=this.layer,r=l.rasterInfo,i=r.bandCount||e.statistics.length;let n,a,o=[];const u=r.keyProperties&&r.keyProperties.BandProperties,c=null!=e&&null!=(t=e.statistics)&&t.length?e.statistics:null==r?void 0:r.statistics;if(c)n=void 0!==c[0].min?c[0].min:c[0][0],a=c[0].max||c[0][1];else {const e=ee$3[l.rasterInfo.pixelType.toLowerCase()];n=e[0],a=e[1];}if(l.hasStandardTime()&&(n=l.getStandardTimeValue(n),a=l.getStandardTimeValue(a)),1===r.bandCount||1===(null==(s=l.bandIds)?void 0:s.length))return this._getStretchLegendElements(e,{min:n,max:a});function d(e){var t;const s=(null!=l&&null!=(t=l.bandIds)&&t.length?l.bandIds:Array.from(Array(Math.min(r.bandCount,3)).keys())).map((t=>e&&e[t]&&e[t].BandName||"band"+(t+1)));return s.length<3?s.push(s[1]):s.length>3&&s.splice(3),s}return o=u&&u.length>=i?d(u):d(),this._createSymbolTableElementMultiBand(o)}_getStretchLegendElements(e,t){const s=e.colorRamp,l=i$U(s,t);return {type:"stretch-ramp",title:"",infos:l,preview:p$$(l.map((e=>e.color)))}}_createSymbolTableElementMultiBand(e){const t=[],s=["red","green","blue"];return e.forEach(((e,l)=>{t.push({label:{colorName:s[l],bandName:e},src:e$B[l],opacity:1});})),t}_updateInfosforClassedSizeRenderer(e,t){const s=e.authoringInfo&&"class-breaks-size"===e.authoringInfo.type,l=e.classBreakInfos.some((e=>w$j(e.symbol)));if(s&&l){const s=u$D,l=c$$,r=e.classBreakInfos.length,i=(s-l)/(r>1?r-1:r);t.forEach(((e,t)=>{e.size=s-i*t;}));}}_isTallSymbol(e){let t=!1,s=!1;if(e)for(let l=0;l<e.length&&(!t||!s);l++){const r=e[l];"size"===r.type&&("height"===r.axis&&(t=!0),"width-and-depth"===r.axis&&(s=!0));}return t&&s}async _getSymbolPreview(e,t,s){let l=null!=s&&s.isDefault||null!=e.size||!this._hasSizeRamp?e.size:e$17(22);if(this._scaleDrivenSizeVariable&&null!=s&&s.applyScaleDrivenSize){const{getSize:t}=await Promise.resolve().then(function () { return visualVariableUtils; });l=t(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:"simple-marker"===e.symbol.type?e.symbol.style:null});}return h$E(e.symbol,{size:l,opacity:t,scale:!1,symbolConfig:null==s?void 0:s.symbolConfig,effect:null==s?void 0:s.effect}).then((t=>(e.preview=t,e))).catch((()=>(e.preview=null,e)))}async _loadRenderer(e){var t,s;const l=[],r=this.layer;e=e.clone(),this._hasClusterSizeVariable=!1;const i="visualVariables"in e&&(null==(t=e.visualVariables)?void 0:t.some((e=>"size"===e.type&&"outline"!==e.target&&!Y$5.test(e.valueExpression))));if(e&&"visualVariables"in e&&!i&&"featureReduction"in r&&"cluster"===(null==(s=r.featureReduction)?void 0:s.type)){const t=this.layerView._effectiveRenderer,s=e$23(a$14(t,this.view));if(s){const t=r.featureReduction;if("clusterMinSize"in t&&"clusterMaxSize"in t){const{clusterMinSize:e,clusterMaxSize:l}=t;s.legendOptions=new a$1H({showLegend:e!==l});}const l=e.visualVariables||[];e.visualVariables=l.concat([s]),this._hasClusterSizeVariable=!0;}}const n=await this._getMedianColor(e);if(oe$3(e)||ue$2(e)){const t=(e.classBreakInfos||e.uniqueValueInfos).map((e=>this._fetchSymbol(e.symbol,n).then((t=>{e.symbol=t;})).catch((()=>{e.symbol=null;}))));Array.prototype.push.apply(l,t);}return l.push(this._fetchSymbol(e.symbol||e.defaultSymbol,e.defaultSymbol?null:n).then((t=>{this._applySymbolToRenderer(e,t,ae$2(e));})).catch((()=>{this._applySymbolToRenderer(e,null,ae$2(e));}))),T$s(l).then((()=>e))}_applySymbolToRenderer(e,t,s){s?e.symbol=t:e.defaultSymbol=t;}async _getMedianColor(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find((e=>"color"===e.type));if(!t)return null;let s=null,l=null;if(t.stops){if(1===t.stops.length)return t.stops[0].color;s=t.stops[0].value,l=t.stops[t.stops.length-1].value;}const r=s+(l-s)/2,{getColor:i}=await Promise.resolve().then(function () { return visualVariableUtils; });return i(t,r)}_fetchSymbol(e,t){if(!e)return Promise.reject();if("web-style"===e.type){const s=e.portal,l=s&&s.url,r=s&&s.user&&s.user.username,i=e.name+"-"+e.styleName+"-"+e.styleUrl+"-"+l+"-"+r,n=this._webStyleSymbolCache;return n.has(i)||("2d"===this.view.type?n.set(i,e.fetchCIMSymbol()):n.set(i,e.fetchSymbol())),n.get(i).then((e=>this._getAppliedCloneSymbol(e,t))).catch((()=>(J$3.warn("Fetching web-style failed!"),Promise.reject())))}return Promise.resolve(this._getAppliedCloneSymbol(e,t))}_getAppliedCloneSymbol(e,s){if(!e||!s)return e;const l=e.clone(),r=s&&s.toRgba();return l.type.indexOf("3d")>-1?this._applyColorTo3dSymbol(l,r):"cim"===l.type?I$i(l,s):l.color&&(l.color=new h$18(r||l.color)),l}_applyColorTo3dSymbol(e,s){s&&e.symbolLayers.forEach((e=>{e&&(e.material||(e.material={}),e.material.color=new h$18(s));}));}async _getVisualVariableLegendElements(e,t){if(!("visualVariables"in e)||!e.visualVariables||"vector-field"===e.type)return null;const s=e.visualVariables,l=[],r=[],i=[];for(const c of s)"color"===c.type?l.push(c):"size"===c.type?r.push(c):"opacity"===c.type&&i.push(c);const n=[...l,...r,...i];let a,o;if(0===l.length&&oe$3(e)&&e.classBreakInfos&&1===e.classBreakInfos.length){const t=e.classBreakInfos[0];a=t&&t.symbol;}if(0===l.length&&ae$2(e)&&(a=e.symbol),a)if(a.type.indexOf("3d")>-1){const e=a.symbolLayers.getItemAt(0);"water"===e.type?r$1K(e.color)&&(o=e.color):r$1K(e.material)&&r$1K(e.material.color)&&(o=e.material.color);}else a.url||(o=a.color);const u=this.effect;return (await Promise.all(n.map((async s=>{if(!s.legendOptions||!1!==s.legendOptions.showLegend){const l=this._getRampTitle(s,t);let r=null;const i="getField"in t&&t.getField&&t.getField(s.field),n=i&&K$9(i);if("color"===s.type){const e=await r$B(s,null,n);r={type:"color-ramp",title:l,infos:e,preview:p$$(e.map((e=>e.color)),{effect:u})},this._hasColorRamp||(this._hasColorRamp=!(null==r.infos||!r.infos.length));}else if("size"===s.type&&"outline"!==s.target)Y$5.test(s.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=s):(r={type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(s):l,infos:await S$f(e,s,await this._getMedianColor(e),this.scale,this.view.type,n)},this._hasSizeRamp||(this._hasSizeRamp=!(null==r.infos||!r.infos.length)));else if("opacity"===s.type){const e=await r$B(s,o,n);r={type:"opacity-ramp",title:l,infos:e,preview:p$$(e.map((e=>e.color)),{effect:u})},this._hasOpacityRamp||(this._hasOpacityRamp=!(null==r.infos||!r.infos.length));}return r&&r.infos?r:null}})))).filter((e=>!!e))}_getDomainName(e,t,s){if(e&&"function"!=typeof e){const l="getField"in s&&s.getField&&s.getField(e),r=l&&"getFieldDomain"in s&&s.getFieldDomain?s.getFieldDomain(l.name):null;return r&&"coded-value"===r.type?r.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,s=e.field;if("featureReduction"in t&&t.featureReduction&&"cluster"===t.featureReduction.type){const e=t.featureReduction,l="popupTemplate"in e&&e.popupTemplate,r=l&&l.fieldInfos;if(r)for(const t of r)if(t.fieldName===s)return "cluster_count"===s?t.label||{showCount:!0}:t.label}return {showCount:!0}}_getRampTitle(e,t){let s=e.field,l=e.normalizationField,r=!1,i=!1,n=!1,a=null;s="function"==typeof s?null:s,l="function"==typeof l?null:l;const o=e.legendOptions&&e.legendOptions.title;if(null!=o)a=o;else if(e.valueExpressionTitle)a=e.valueExpressionTitle;else {if("renderer"in t&&t.renderer&&"authoringInfo"in t.renderer&&t.renderer.authoringInfo&&t.renderer.authoringInfo.visualVariables){const e=t.renderer.authoringInfo.visualVariables;for(let t=0;t<e.length;t++){const s=e[t];if("color"===s.type){if("ratio"===s.style){r=!0;break}if("percent"===s.style){i=!0;break}if("percent-of-total"===s.style){n=!0;break}}}}a={field:s&&this._getFieldAlias(s,t),normField:l&&this._getFieldAlias(l,t),ratio:r,ratioPercent:i,ratioPercentTotal:n};}return a}_getRendererTitle(e,t){const s=e;if(s.legendOptions&&s.legendOptions.title)return s.legendOptions.title;if(s.valueExpressionTitle)return s.valueExpressionTitle;let l=s.field,r=null,i=null;oe$3(s)&&(r=s.normalizationField,i="percent-of-total"===s.normalizationType),l="function"==typeof l?null:l,r="function"==typeof r?null:r;let n=null;return (l||r)&&(n={field:l&&this._getFieldAlias(l,t),normField:r&&this._getFieldAlias(r,t),normByPct:i}),n}_getFieldAlias(e,t){const s="popupTemplate"in t&&t.popupTemplate,l=s&&s.fieldInfos;let r=null;l&&l.some((t=>e===t.fieldName&&(r=t,!0)));let i=null;"getField"in t&&t.getField?i=t.getField(e):"fieldsIndex"in t&&t.fieldsIndex&&(i=t.fieldsIndex.get(e));const n=r||i;let a=null;return n&&(a=r&&r.label||i&&i.alias||"name"in n&&n.name||"fieldName"in n&&n.fieldName),a}_isUnclassedRenderer(e){const t=e.visualVariables;let s=!1;return oe$3(e)&&e.classBreakInfos&&1===e.classBreakInfos.length&&t&&(s=e.field?t.some((t=>!(!t||e.field!==t.field||(e.normalizationField||t.normalizationField)&&e.normalizationField!==t.normalizationField))):!!t.length),s}};e$25([d$1T()],xe.prototype,"children",void 0),e$25([d$1T({readOnly:!0})],xe.prototype,"effect",null),e$25([d$1T()],xe.prototype,"layerView",void 0),e$25([d$1T()],xe.prototype,"layer",void 0),e$25([d$1T()],xe.prototype,"legendElements",void 0),e$25([d$1T({readOnly:!0})],xe.prototype,"opacity",null),e$25([d$1T()],xe.prototype,"parent",void 0),e$25([d$1T({readOnly:!0,dependsOn:[]})],xe.prototype,"ready",null),e$25([d$1T()],xe.prototype,"hideLayersNotInCurrentView",void 0),e$25([d$1T()],xe.prototype,"keepCacheOnDestroy",void 0),e$25([d$1T()],xe.prototype,"respectLayerVisibility",void 0),e$25([d$1T({readOnly:!0})],xe.prototype,"scale",null),e$25([d$1T()],xe.prototype,"sublayerIds",void 0),e$25([d$1T({readOnly:!0})],xe.prototype,"isScaleDriven",null),e$25([d$1T()],xe.prototype,"title",void 0),e$25([d$1T({readOnly:!0,dependsOn:["ready"],value:0})],xe.prototype,"version",null),e$25([d$1T()],xe.prototype,"view",void 0),xe=e$25([i$2z("esri.widgets.Legend.support.ActiveLayerInfo")],xe);const je=xe;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h$w={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},c$_=S$I.ofType(je),L$c=["esri.layers.BuildingSceneLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.TileLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer"],_$d="view.basemapView.baseLayerViews",f$p="view.groundView.layerViews",v$e="view.basemapView.referenceLayerViews",p$V=[_$d,f$p,"view.layerViews",v$e];let u$C=class extends p$3a{constructor(e){super(e),this._handles=new u$25,this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new S$I,this.activeLayerInfos=new c$_,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null;}initialize(){this._handles.add(i$2x(this,"view",this._viewHandles),h$w.view),this._handles.add(g$14((()=>this._refresh())));}destroy(){this._destroyViewActiveLayerInfos(),this._handles.destroy(),this._handles=null,this.view=null;}get state(){return this.get("view.ready")?"ready":"disabled"}_viewHandles(){this._handles.remove(h$w.state),this.view&&this._handles.add(i$2x(this,"state",this._stateHandles),h$w.state);}_stateHandles(){this._resetAll(),"ready"===this.state&&this._watchPropertiesAndAllLayerViews();}_resetAll(){this._handles.remove([h$w.allLayerViews,h$w.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll();}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this);}_destroyViewActiveLayerInfo(e){this._handles.remove(e);const i=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],i&&i.parent&&i.parent.children.remove(i);}_watchPropertiesAndAllLayerViews(){const{allLayerViews:e}=this.view;e.length&&this._refresh(),this._handles.add(e.on("change",this._allLayerViewsChangeHandle.bind(this)),h$w.allLayerViews),this._handles.add(f$1B(this,"layerInfos, basemapLegendVisible, groundLegendVisible",this._propertiesChangeHandle.bind(this)),h$w.legendProperties);}_allLayerViewsChangeHandle(e){e.removed.forEach((e=>this._destroyViewActiveLayerInfo(e.uid))),this._refresh();}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh();}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos);}_sortActiveLayerInfos(e){if(e.length<2)return;const i=[];e.forEach((r=>{if(!r.parent){const t=r.layer.parent,s=t&&"uid"in t&&this._layerViewByLayerId[t.uid],a=s&&this._activeLayerInfosByLayerViewId[s.uid];a&&-1!==e.indexOf(a)&&(i.push(r),r.parent=a,a.children.add(r),this._sortActiveLayerInfos(a.children));}})),e.removeMany(i);const r={};this.view.allLayerViews.forEach(((e,i)=>r[e.layer.uid]=i)),e.sort(((e,i)=>{const t=r[e.layer.uid]||0;return (r[i.layer.uid]||0)-t}));}_generateLayerViews(){const e=[];return p$V.filter(this._filterLayerViews,this).map(this.get,this).filter((e=>null!=e)).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===_$d||e===v$e),r=!this.groundLegendVisible&&e===f$p;return !i&&!r}_collectLayerViews(e,i){const r=t=>(t&&t.forEach((t=>{i.push(t),r(t[e]);})),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return !i||!i.length||i.some((i=>this._hasLayerInfo(i,e)))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some((e=>this._isLayerUIDMatching(e,i)))}_isLayerViewSupported(e){return !!L$c.includes(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this._handles.remove(e.uid),this._handles.add(f$1B(e,"legendEnabled, layer.legendEnabled",(()=>this._layerActiveHandle(e))),e.uid));}_layerActiveHandle(e){this._isLayerActive(e)&&(this._handles.remove(e.uid),this._buildActiveLayerInfo(e));}_isLayerActive(e){return !this.respectLayerVisibility||e.legendEnabled&&e.get("layer.legendEnabled")}_buildActiveLayerInfo(e){var i;const r=e.layer,t=e.uid,s=this._layerInfosByLayerViewId[t];let o=this._activeLayerInfosByLayerViewId[t];if(!o){const i=s&&void 0!==s.title&&s.layer.uid===r.uid;o=new je({layer:r,layerView:e,title:i?s.title:r.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:s&&s.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[t]=o;}const l=r.parent&&"uid"in r.parent&&this._layerViewByLayerId[null==(i=r.parent)?void 0:i.uid];if(o.parent=this._activeLayerInfosByLayerViewId[null==l?void 0:l.uid],!this._handles.has(t)){const i=[f$1B(r,"title",(e=>this._titleHandle(e,o))),f$1B(r,"renderer?, opacity, pointSymbol?, lineSymbol?, polygonSymbol?",(()=>this._constructLegendElements(o))),v$V(this.view,"stationary",(()=>this._scaleHandle(o))),f$1B(e,"_effectiveRenderer",(()=>this._constructLegendElements(o))),f$1B(r,"effect",(()=>this._constructLegendElements(o)))];if(this.respectLayerVisibility){const t=f$1B(e,"legendEnabled",(e=>this._legendEnabledHandle(e,o))),s=f$1B(r,"legendEnabled",(e=>this._legendEnabledHandle(e,o)));i.push(t,s);}this._handles.add(i,t);}o.isScaleDriven||this._constructLegendElements(o),this._addActiveLayerInfo(o);}_titleHandle(e,i){i.title=e,this._constructLegendElements(i);}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i);}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e);}_addActiveLayerInfo(e){const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&-1===this.activeLayerInfos.indexOf(e)){const i=e.parent;if(i)-1===i.children.indexOf(e)&&i.children.push(e),this._sortActiveLayerInfos(i.children);else {var t;const i=null==(t=this.layerInfos)?void 0:t.some((e=>e.layer.uid===r.uid));r.parent&&"uid"in r.parent&&!i?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos));}if(this._activeLayerInfosWithNoParent.length){const e=[];this._activeLayerInfosWithNoParent.forEach((i=>{const r=i.layer.parent,t=r&&"uid"in r&&this._layerViewByLayerId[null==r?void 0:r.uid],s=this._activeLayerInfosByLayerViewId[null==t?void 0:t.uid];s&&(e.push(i),i.parent=s);})),e.length&&(this._activeLayerInfosWithNoParent.removeMany(e),e.forEach((e=>this._addActiveLayerInfo(e))));}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e);}_constructLegendElements(e){const i=e.layer;"featureCollections"in i&&i.featureCollections?e.buildLegendElementsForFeatureCollections(i.featureCollections):"renderer"in i&&i.renderer?e.buildLegendElementsForRenderer(i.renderer):"url"in i&&i.url?e.buildLegendElementsForTools():e.children.forEach((e=>this._constructLegendElements(e)));}};e$25([d$1T({type:c$_})],u$C.prototype,"activeLayerInfos",void 0),e$25([d$1T()],u$C.prototype,"basemapLegendVisible",void 0),e$25([d$1T()],u$C.prototype,"groundLegendVisible",void 0),e$25([d$1T()],u$C.prototype,"hideLayersNotInCurrentView",void 0),e$25([d$1T()],u$C.prototype,"keepCacheOnDestroy",void 0),e$25([d$1T()],u$C.prototype,"respectLayerVisibility",void 0),e$25([d$1T()],u$C.prototype,"layerInfos",void 0),e$25([d$1T({readOnly:!0})],u$C.prototype,"state",null),e$25([d$1T()],u$C.prototype,"view",void 0),u$C=e$25([i$2z("esri.widgets.Legend.LegendViewModel")],u$C);const I$c=u$C;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const d$A="http://www.w3.org/2000/svg",m$D={diamondContainer:"esri-relationship-ramp--diamond__container",diamondLeftCol:"esri-relationship-ramp--diamond__left-column",diamondRightCol:"esri-relationship-ramp--diamond__right-column",diamondMidCol:"esri-relationship-ramp--diamond__middle-column",diamondMidColLabel:"esri-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"esri-relationship-ramp--diamond__middle-column--ramp",squareTable:"esri-relationship-ramp--square__table",squareTableRow:"esri-relationship-ramp--square__table-row",squareTableCell:"esri-relationship-ramp--square__table-cell",squareTableLabel:"esri-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"esri-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"esri-relationship-ramp--square__table-label--right-bottom",squareTableLabelLeftTop:"esri-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"esri-relationship-ramp--square__table-label--right-top"};function u$B(e,a,r,l){const{focus:t,labels:s}=e,i=!!t,d=p$U(e,a,r,l);return i?n$2g("div",{class:m$D.diamondContainer},n$2g("div",{class:m$D.diamondLeftCol},s.left),n$2g("div",{class:m$D.diamondMidCol},n$2g("div",{class:m$D.diamondMidColLabel},s.top),d,n$2g("div",{class:m$D.diamondMidColLabel},s.bottom)),n$2g("div",{class:m$D.diamondRightCol},s.right)):n$2g("div",{class:m$D.squareTable},n$2g("div",{class:m$D.squareTableRow},n$2g("div",{class:l$2j(m$D.squareTableCell,m$D.squareTableLabel,m$D.squareTableLabelRightBottom)},s.left),n$2g("div",{class:m$D.squareTableCell}),n$2g("div",{class:l$2j(m$D.squareTableCell,m$D.squareTableLabel,m$D.squareTableLabelLeftBottom)},s.top)),n$2g("div",{class:m$D.squareTableRow},n$2g("div",{class:m$D.squareTableCell}),d,n$2g("div",{class:m$D.squareTableCell})),n$2g("div",{class:m$D.squareTableRow},n$2g("div",{class:l$2j(m$D.squareTableCell,m$D.squareTableLabel,m$D.squareTableLabelRightTop)},s.bottom),n$2g("div",{class:m$D.squareTableCell}),n$2g("div",{class:l$2j(m$D.squareTableCell,m$D.squareTableLabel,m$D.squareTableLabelLeftTop)},s.right)))}function b$d(e,a,r){const l=`${r}_arrowStart`,t=`${r}_arrowEnd`,s="left"===e,i={markerStart:null,markerEnd:null};switch(a){case"HL":s?i.markerStart=`url(#${t})`:i.markerEnd=`url(#${l})`;break;case"LL":i.markerStart=`url(#${t})`;break;case"LH":s?i.markerEnd=`url(#${l})`:i.markerStart=`url(#${t})`;break;default:i.markerEnd=`url(#${l})`;}return i}function p$U(o,u,p,c,h=60){const{focus:q,numClasses:f,colors:k,rotation:T}=o,_=!!q,L=Math.sqrt(h**2+h**2)+(_?0:5),g=[],C=[],v=[],w=(h||75)/f;for(let s=0;s<f;s++){const i=s*w;for(let o=0;o<f;o++){const n=o*w,d=v$g(k[s][o]),m=A$a(null),u={type:"rect",x:n,y:i,width:w,height:w};g.push(I$f(d)),C.push(b$f(u,d.fill,m,null)),v.push(T$a(u));}}const y=10,x=15,R=15,$=10;let E=null;_||(E="margin: -15px -15px -18px -15px");const M=b$d("left",q,u),S=b$d("right",q,u),j=U$b(v),B=L$e(j,L,L,0,!1,T,!1),H=L$e(j,L,L,0,!1,_?-45:null,!1);return n$2g("div",{styles:{filter:c,opacity:null==p?null:`${p}`},class:_?m$D.diamondMidColRamp:m$D.squareTableCell},n$2g("svg",{xmlns:d$A,width:L,height:L,style:E},n$2g("defs",null,n$2g("marker",{id:`${u}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},n$2g("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),n$2g("marker",{id:`${u}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},n$2g("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),g),n$2g("g",{transform:B},C),n$2g("g",{transform:H},n$2g("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":M.markerStart,"marker-end":M.markerEnd,x1:-y,y1:h-x,x2:-y,y2:x}),n$2g("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":S.markerStart,"marker-end":S.markerEnd,x1:R,y1:h+$,x2:h-R,y2:h+$}))))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$K=i$2m(),r$v=10,n$18=20,s$L=10,a$_=20,c$Z={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function f$o(e="vertical"){const t="stroke:rgb(200, 200, 200);stroke-width:1";return "vertical"===e?n$2g("svg",{height:"4",width:"10"},n$2g("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:t})):n$2g("svg",{height:"10",width:"10"},n$2g("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:t}))}function p$T(e,t="vertical"){const o=document.createElement("div");return o.style.height=`${n$18}px`,o.className=c$Z.univariateAboveAndBelowSymbol,null!=e&&(o.style.opacity=e.toString()),l$K.append(o,f$o.bind(null,t)),o}function m$C(t,o,i="vertical",l){t.infos.forEach(((t,r)=>{if(l&&2===r)t.preview=p$T(o,i);else {const o=u$1s(t.size)+("horizontal"===i?a$_:s$L),l="div"===t.preview.tagName.toLowerCase(),r=l?t.preview:document.createElement("div");r.className=c$Z.univariateAboveAndBelowSymbol,"horizontal"===i?r.style.width=`${o}px`:r.style.height=`${o}px`,l||r.appendChild(t.preview),t.preview=r;}}));}function u$A(t,o="classic"){const i=t.infos;return "classic"===o?(u$1s(i[0].size)+s$L)/2:(u$1s(i[0].size)-u$1s(i[i.length-1].size))/2}function v$d(e,t){if(!e)return null;const i=e.infos.map((e=>e.color)),l=p$$("full"===t.type?i:"above"===t.type?i.slice(0,3):i.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,effect:t.effect});return l.className=c$Z.colorRamp,null!=t.opacity&&(l.style.opacity=t.opacity.toString()),l}function h$v(t,o,i,l="vertical"){let c=0;const f=t.infos,p=Math.floor(f.length/2),m="full"===o||"above"===o?0:p,u="full"===o||"below"===o?f.length-1:p;for(let v=m;v<=u;v++)if(i&&v===p)c+="horizontal"===l?r$v:n$18;else {c+=u$1s(f[v].size)+("horizontal"===l?a$_:s$L);}return Math.round(c)}function y$p(t,o,i,l="vertical"){const c=h$v(t,o,i,l),f=t.infos,p=Math.floor(f.length/2),m="full"===o||"above"===o?0:p,u="full"===o||"below"===o?f.length-1:p,v="full"===o?f[m].size+f[u].size:"above"===o?f[m].size:f[u].size,y=i?"vertical"===l?n$18:r$v:0,d="vertical"===l?s$L*("full"===o?2:1):a$_*("full"===o?2:1);return Math.round(c-(u$1s(v)/2+y/2+d/2))}function d$z(e,t,o="vertical"){const i=e.infos;let l=i.filter((({type:e})=>"size-ramp"===e))[0],r=i.filter((({type:e})=>"color-ramp"===e))[0];var n;(l&&(l={...l},l.infos=[...l.infos]),r&&(r={...r},r.infos=[...r.infos]),m$C(l,t,o,!0),"horizontal"===o)&&(l.infos.reverse(),null==(n=r)||n.infos.reverse());return {sizeRampElement:l,colorRampElement:r}}function g$o(e,t="vertical"){const o=e.infos;let i=o.filter((({type:e})=>"size-ramp"===e))[0],l=o.filter((({type:e})=>"color-ramp"===e))[0];var r;(i&&(i={...i},i.infos=[...i.infos]),l&&(l={...l},l.infos=[...l.infos]),m$C(i,null,t,!1),"horizontal"===t)&&(i.infos.reverse(),null==(r=l)||r.infos.reverse());return {sizeRampElement:i,colorRampElement:l}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$17(e,n){return n}function t$x(e){const n=this;e.appendChild(n);}function r$u(t,r,i){if(!r)return;if("string"==typeof r||"number"==typeof r)return r;if("value"in r||"unit"in r)return s$22(t.dotValue,r);if("colorName"in r||"bandName"in r)return t[r.colorName]+": "+(t[r.bandName]||r.bandName);if("showCount"in r)return r.showCount?t.clusterCountTitle:null;let l=null;return n$17(r,i)?l=r.ratioPercentTotal?"showRatioPercentTotal":r.ratioPercent?"showRatioPercent":r.ratio?"showRatio":r.normField?"showNormField":r.field?"showField":null:o$y(r,i)&&(l=r.normField?"showNormField":r.normByPct?"showNormPct":r.field?"showField":null),l?s$22("showField"===l?"{field}":t[l],{field:r.field,normField:r.normField}):null}function o$y(e,n){return !n}function i$Q(e,n){return !!(n&&"Stretched"===n&&e.version>=10.3&&"esri.layers.ImageryLayer"===e.declaredClass)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const L$b={activated:"esri-legend--card__carousel-indicator--activated",base:"esri-legend--card",stacked:"esri-legend--stacked",carouselTitle:"esri-legend--card__carousel-title",indicator:"esri-legend--card__carousel-indicator",intervalSeparator:"esri-legend--card__interval-separator",imageryLayerStretchedImage:"esri-legend--card__imagery-layer-image--stretched",imageLabel:"esri-legend--card__image-label",layerCaption:"esri-legend--card__layer-caption",labelElement:"esri-legend--card__label-element",layerRow:"esri-legend--card__layer-row",labelCell:"esri-legend--card__label-cell",message:"esri-legend--card__message",rampLabel:"esri-legend--card__ramp-label",section:"esri-legend--card__section",relationshipSection:"esri-legend--card__relationship-section",serviceCaptionText:"esri-legend--card__service-caption-text",serviceContent:"esri-legend--card__service-content",service:"esri-legend--card__service",groupLayer:"esri-legend--card__group-layer",groupLayerChild:"esri-legend--card__group-layer-child",symbol:"esri-legend--card__symbol",sizeRampRow:"esri-legend--card__size-ramp-row",symbolRow:"esri-legend--card__symbol-row",symbolCell:"esri-legend--card__symbol-cell",indicatorContainer:"esri-legend--card__carousel-indicator-container",intervalSeparatorsContainer:"esri-legend--card__interval-separators-container",relationshipLabelContainer:"esri-legend--card__relationship-label-container",labelContainer:"esri-legend--card__label-container",serviceCaptionContainer:"esri-legend--card__service-caption-container",symbolContainer:"esri-legend--card__symbol-container",sizeRampContainer:"esri-legend--card__size-ramp-container",sizeRampPreview:"esri-legend--card__size-ramp-preview",rampContainer:"esri-legend__ramps",sizeRampHorizontal:"esri-legend__size-ramp--horizontal",rampLabelsContainer:"esri-legend__ramp-labels",layerInfo:"esri-legend__layer-cell esri-legend__layer-cell--info",univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card",hidden:"esri-hidden"},C$a=25,x$9=25,S$e=768,z$6=100,R$9="#ddd",$$7=window.devicePixelRatio;function I$b(e){if(e){if(e.type.indexOf("3d")>-1){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const s=e.symbolLayers.getItemAt(t-1),i=s.resource&&s.resource.primitive;return "circle"===i||"cross"===i||"kite"===i||"sphere"===i||"cube"===i||"diamond"===i}{const t=e.style;return "circle"===t||"diamond"===t||"cross"===t}}}function k$8(e){if(e){if(e.type.indexOf("3d")>-1){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const s=e.symbolLayers.getItemAt(t-1).get("resource.primitive");return "triangle"===s||"cone"===s||"tetrahedron"===s}return "triangle"===e.style}}let N$7=class extends z$o{constructor(e,s){super(e,s),this._handles=new u$25,this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null;}initialize(){this.own([this.watch("activeLayerInfos",(e=>{this._handles.removeAll(),this._watchForSectionChanges(e);}))]);}destroy(){this._handles.destroy(),this._handles=null;}render(){this._hasIndicators="auto"===this.layout&&this.view.container.clientWidth<=S$e||"stack"===this.layout;const e=this.activeLayerInfos,t=e&&e.toArray().map((e=>this._renderLegendForLayer(e))).filter((e=>!!e));this._hasIndicators?this._selectedSectionName&&-1!==this._sectionNames.indexOf(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const s=this._sectionNames.length,i=this._sectionNames.map(((e,t)=>{const i=s$22(this.messagesCommon.pagination.pageText,{index:t+1,total:s});return n$2g("div",{key:e,role:"tab",id:e,"aria-label":i,"aria-controls":`${e}-panel`,"aria-selected":(this._selectedSectionName===e).toString(),tabIndex:this._selectedSectionName===e?0:-1,title:i,onclick:this._selectSection,onkeydown:this._focusSection,bind:this,class:this.classes(L$b.indicator,{[L$b.activated]:this._selectedSectionName===e}),"data-section-name":e})})),r=this._hasIndicators&&s>1?n$2g("div",{class:L$b.indicatorContainer,key:"carousel-navigation",role:"tablist"},i):null,a=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):t&&t.length?t:null,o={[L$b.stacked]:this._hasIndicators};return n$2g("div",{class:this.classes(L$b.base,o)},a||n$2g("div",{class:L$b.message},this.messages.noLegend),r)}_selectSection(e){const t=e.target.getAttribute("data-section-name");t&&(this._selectedSectionName=t);}_focusSection(e){switch(e.key){case"ArrowLeft":case"ArrowRight":this._switchSectionOnArrowPress(e);break;case"Enter":case" ":this._selectSection(e);}}_switchSectionOnArrowPress(e){const t=e.key,s="ArrowLeft"===t?-1:1,i=e.target.getAttribute("data-section-name"),r=this._sectionNames.indexOf(i),a=this._sectionNames;let o=null;-1!==r&&(a[r+s]?o=document.getElementById(a[r+s]):"ArrowLeft"===t?o=document.getElementById(a[a.length-1]):"ArrowRight"===t&&(o=document.getElementById(a[0])),o&&o.focus());}_watchForSectionChanges(e){if(this._generateSectionNames(),e){e.forEach((e=>{const t=`activeLayerInfo-${e.layer.uid}-version-change`;this._handles.remove(t),this._watchForSectionChanges(e.children),this._handles.add(e.watch("version",(()=>this._generateSectionNames())),t);}));const t="activeLayerInfos-collection-change";this._handles.remove(t),this._handles.add(e.on("change",(()=>this._watchForSectionChanges(e))),t);}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this);}_getSectionName(e,t,s){return `${this.id}${e.uid}-type-${t.type}-${s}`}_generateSectionNamesForActiveLayerInfo(e){e.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),e.legendElements&&e.legendElements.forEach(((t,s)=>{this._sectionNames.push(this._getSectionName(e.layer,t,s));}));}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const t=e.children.map((e=>this._renderLegendForLayer(e))).toArray();return n$2g("div",{key:e.layer.uid,class:this.classes(L$b.service,L$b.groupLayer)},n$2g("div",{class:L$b.serviceCaptionContainer},e.title),t)}{const t=e.legendElements;if(t&&!t.length)return null;const s=t.some((e=>"relationship-ramp"===e.type)),i=t.map(((t,i)=>this._renderLegendForElement(t,e,i,s))).filter((e=>!!e));if(!i.length)return null;const r={[L$b.groupLayerChild]:!!e.parent};return n$2g("div",{key:e.layer.uid,class:this.classes(L$b.service,r)},n$2g("div",{class:L$b.serviceCaptionContainer},n$2g("div",{class:L$b.serviceCaptionText},e.title)),n$2g("div",{class:L$b.serviceContent},i))}}_renderLegendForElement(e,t,s,i=!1){const r="color-ramp"===e.type,a="opacity-ramp"===e.type,o="size-ramp"===e.type,n=t.layer;let c=null;if("string"==typeof e.title)c=e.title;else if(e.title){const t=e.title,s=r$u(this.messages,t,r||a);c=t.title?`${t.title} (${s})`:s;}const d=this._getSectionName(n,e,s),p=this._hasIndicators?n$2g("div",null,n$2g(s$1w,{level:this.headingLevel,class:L$b.carouselTitle},t.title),n$2g(s$1w,{level:this.headingLevel+1,class:L$b.layerCaption},c)):c?n$2g(s$1w,{level:this.headingLevel,class:L$b.layerCaption},c):null,m=t.effect;let h=null;if("symbol-table"===e.type){const s=e.infos.map(((s,i)=>this._renderLegendForElementInfo(s,t,e.legendType,i))).filter((e=>!!e));if(s.length){const e=s[0].properties.classes&&s[0].properties.classes[L$b.symbolRow],t={[L$b.labelContainer]:!e&&!i,[L$b.relationshipLabelContainer]:i};h=n$2g("div",{class:this.classes(t)},s);}}else "color-ramp"===e.type||"opacity-ramp"===e.type||"heatmap-ramp"===e.type?h=this._renderLegendForRamp(e,n.opacity,m):o?h=this._renderSizeRamp(e,n.opacity):"relationship-ramp"===e.type?h=u$B(e,this.id,n.opacity,m):"univariate-above-and-below-ramp"===e.type?h=this._renderUnivariateAboveAndBelowRamp(e,n.opacity,m):"univariate-color-size-ramp"===e.type&&(h=this._renderUnivariateColorSizeRamp(e,n.opacity,m));if(!h)return null;const g=n$2g("div",{key:d,class:L$b.section,id:`${d}-panel`,role:"tabpanel","aria-labelledby":d,tabIndex:0},[p,h]);return this._sectionMap.set(d,g),g}_renderUnivariateAboveAndBelowRamp(e,t,s){const{sizeRampElement:i,colorRampElement:r}=d$z(e,t,"horizontal"),a=h$v(i,"full",!0,"horizontal"),o=y$p(i,"above",!0,"horizontal"),l=y$p(i,"below",!0,"horizontal"),h=12,y=v$d(r,{width:o,height:h,rampAlignment:"horizontal",opacity:t,type:"above",effect:s}),_=v$d(r,{width:l,height:h,rampAlignment:"horizontal",opacity:t,type:"below",effect:s}),v=u$A(i,"card"),f=i.infos.map((e=>e.label)),u=f.length-1,w=f.map(((e,t)=>0===t||t===u?n$2g("div",{key:t},e):null)),C={display:"flex",flexDirection:"column"},x={display:"flex",flexDirection:"row"},S={marginTop:"3px",marginLeft:`${v}px`,display:"flex"},z={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return n$2g("div",{class:L$b.layerRow,key:"size-ramp-preview",styles:C},n$2g("div",{class:this.classes(L$b.symbolContainer,L$b.sizeRampHorizontal),styles:x},i.infos.map(((e,t)=>n$2g("div",{key:t,class:L$b.symbol,bind:e.preview,afterCreate:t$x})))),y?n$2g("div",{class:L$b.univariateAboveAndBelowColorRamp,styles:S,key:"color-ramp-preview"},n$2g("div",{bind:y,afterCreate:t$x}),n$2g("div",{bind:_,afterCreate:t$x})):null,n$2g("div",{class:L$b.layerInfo},n$2g("div",{class:L$b.rampLabelsContainer,styles:z},w)))}_renderUnivariateColorSizeRamp(e,t,s){const{sizeRampElement:i,colorRampElement:r}=g$o(e,"horizontal"),a=h$v(i,"full",!1,"horizontal"),o=y$p(i,"full",!1,"horizontal"),l=v$d(r,{width:o,height:12,rampAlignment:"horizontal",opacity:t,type:"full",effect:s}),n=u$A(i,"card"),y=i.infos.length-1,_=i.infos.map(((e,t)=>0===t||t===y?n$2g("div",{key:t},e.label):null)),v={display:"flex",flexDirection:"column"},f={display:"flex",flexDirection:"row"},u={marginTop:"3px",marginLeft:`${n}px`,display:"flex"},w={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return n$2g("div",{class:L$b.layerRow,key:"size-ramp-preview",styles:v},n$2g("div",{class:this.classes(L$b.symbolContainer,L$b.sizeRampHorizontal),styles:f},i.infos.map(((e,t)=>n$2g("div",{key:t,class:L$b.symbol,bind:e.preview,afterCreate:t$x})))),n$2g("div",{class:L$b.univariateAboveAndBelowColorRamp,styles:u,key:"color-ramp-preview"},n$2g("div",{bind:l,afterCreate:t$x})),n$2g("div",{class:L$b.layerInfo},n$2g("div",{class:L$b.rampLabelsContainer,styles:w},_)))}_renderLegendForElementInfo(e,t,s,i){const r=t.layer;if(e.type)return this._renderLegendForElement(e,t,i);const a=i$Q(r,s);if(e.preview){var o,l;if(!e.symbol||-1===e.symbol.type.indexOf("simple-fill")){if(!e.label)return n$2g("div",{key:i,bind:e.preview,afterCreate:t$x});const t={[L$b.symbolCell]:this._hasIndicators};return n$2g("div",{key:i,class:this.classes(L$b.layerRow,{[L$b.symbolRow]:this._hasIndicators})},n$2g("div",{class:this.classes(t),bind:e.preview,afterCreate:t$x}),n$2g("div",{class:this.classes(L$b.imageLabel,{[L$b.labelCell]:this._hasIndicators})},r$u(this.messages,e.label,!1)||""))}let s=255,a=255,n=255,c=0,d=255,p=255,m=255,h=0;const _=e.symbol.color&&e.symbol.color.a,v=e.symbol.outline&&e.symbol.outline.color&&e.symbol.outline.color.a;_&&(s=e.symbol.color.r,a=e.symbol.color.g,n=e.symbol.color.b,c=e.symbol.color.a*r.opacity),v&&(d=e.symbol.outline.color.r,p=e.symbol.outline.color.g,m=e.symbol.outline.color.b,h=e.symbol.outline.color.a*r.opacity);const f=null==(o=null==(l=e.symbol.color)?void 0:l.isBright)||o,u=f?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)",w={background:_?`rgba(${s}, ${a}, ${n}, ${c})`:"none",color:f?"black":"white",textShadow:`-1px -1px 0 ${u},\n                                              1px -1px 0 ${u},\n                                              -1px 1px 0 ${u},\n                                              1px 1px 0 ${u}`,border:v?`1px solid rgba(${d}, ${p}, ${m}, ${h})`:"none",filter:t.effect};return n$2g("div",{key:i,class:L$b.layerRow},n$2g("div",{class:L$b.labelElement,styles:w}," ",e.label," "))}if(e.src){const t=this._renderImage(e,r,a);return n$2g("div",{key:i,class:L$b.layerRow},t,n$2g("div",{class:L$b.imageLabel},e.label||""))}}_renderImage(e,t,s){const{label:i,src:r,opacity:a}=e,o={[L$b.imageryLayerStretchedImage]:s,[L$b.symbol]:!s},l={opacity:`${null!=a?a:t.opacity}`};return n$2g("img",{alt:r$u(this.messages,i,!1),src:r,border:0,width:e.width,height:e.height,class:this.classes(o),styles:l})}_renderSizeRampLines(e){const t=e.infos,i=t[0],r=t[t.length-1],a=i.symbol,o=this._hasIndicators,l=u$1s(i.size+i.outlineSize)*$$7,n=u$1s(r.size+r.outlineSize)*$$7,c=o?l:l+50*$$7,d=o?l/2+50*$$7:l,p=k$8(a),m=I$b(a),h=document.createElement("canvas");h.width=c,h.height=d,h.style.width=h.width/$$7+"px",h.style.height=h.height/$$7+"px";const y=h.getContext("2d");if(o){y.beginPath();const e=0,t=0,s=c/2-n/2,i=d;y.moveTo(e,t),y.lineTo(s,i);const r=c,a=0,o=c/2+n/2,l=d;y.moveTo(r,a),y.lineTo(o,l);}else {y.beginPath();const e=0,t=d/2-n/2,s=c,i=0;y.moveTo(e,t),y.lineTo(s,i);const r=0,a=d/2+n/2,o=c,l=d;y.moveTo(r,a),y.lineTo(o,l);}return y.strokeStyle=R$9,y.stroke(),n$2g("div",{bind:h,afterCreate:t$x,styles:o?{display:"flex",marginTop:`-${p?0:m?l/2:0}px`,marginBottom:`-${p?n:m?n/2:0}px`}:{display:"flex",marginRight:`-${p?0:m?l/2:0}px`,marginLeft:`-${p?0:m?n/2:0}px`}})}_renderSizeRamp(e,t){const s=e.infos,i=s[0].label,r=s[s.length-1].label;let a=s[0].preview,o=s[s.length-1].preview;const l=this._hasIndicators,n={"flex-direction":l?"column":"row-reverse"};a&&(a=a.cloneNode(!0),a.style.display="flex"),o&&(o=o.cloneNode(!0),o.style.display="flex");const c={opacity:null!=t?`${t}`:""};return n$2g("div",{class:this.classes(L$b.layerRow,{[L$b.sizeRampRow]:l})},n$2g("div",{class:L$b.rampLabel},l?i:r),n$2g("div",{class:L$b.sizeRampContainer,styles:n},n$2g("div",{bind:a,afterCreate:t$x,class:L$b.sizeRampPreview,styles:c}),this._renderSizeRampLines(e),n$2g("div",{bind:o,afterCreate:t$x,class:L$b.sizeRampContainer,styles:c})),n$2g("div",{class:L$b.rampLabel},l?r:i))}_renderLegendForRamp(e,t,s){const i=e.infos,r="heatmap-ramp"===e.type,o=i.length-1,l=x$9,n=o>2&&!r?C$a*o:z$6,c=n+20,d=10,p=i.slice(0).reverse();p.forEach(((e,t)=>{e.offset=r?e.ratio:t/o;}));const m=p.length-1,h=p.length%2!=0&&p[p.length/2|0],y=h&&n$2g("div",{class:L$b.intervalSeparatorsContainer},n$2g("div",{class:L$b.intervalSeparator},"|"),n$2g("div",{class:L$b.rampLabel},h.label)),g=i[i.length-1].label,_=i[0].label,v=[[{shape:{type:"path",path:`M0 ${l/2} L${d} 0 L${d} ${l} Z`},fill:p[0].color,stroke:{width:0}},{shape:{type:"rect",x:d,y:0,width:n,height:l},fill:{type:"linear",x1:d,y1:0,x2:n+d,y2:0,colors:p},stroke:{width:0}},{shape:{type:"path",path:`M${n+d} 0 L${c} ${l/2} L${n+d} ${l} Z`},fill:p[m].color,stroke:{width:0}}]],f=C$d(v,c,l),{messages:u}=this,w={filter:s,opacity:null==t?null:`${t}`};return n$2g("div",{class:L$b.layerRow},n$2g("div",{class:L$b.rampLabel},r?u[g]:g),n$2g("div",{class:L$b.symbolContainer},n$2g("div",{styles:w},f),y),n$2g("div",{class:L$b.rampLabel},r?u[_]:_))}};e$25([d$1T()],N$7.prototype,"activeLayerInfos",void 0),e$25([d$1T()],N$7.prototype,"headingLevel",void 0),e$25([d$1T()],N$7.prototype,"layout",void 0),e$25([d$1T(),e$1g("esri/widgets/Legend/t9n/Legend")],N$7.prototype,"messages",void 0),e$25([d$1T(),e$1g("esri/t9n/common")],N$7.prototype,"messagesCommon",void 0),e$25([d$1T({readOnly:!0})],N$7.prototype,"type",void 0),e$25([d$1T()],N$7.prototype,"view",void 0),e$25([t$1f()],N$7.prototype,"_selectSection",null),N$7=e$25([i$2z("esri.widgets.Legend.styles.Card")],N$7);const A$8=N$7;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const _$c={service:"esri-legend__service",label:"esri-legend__service-label",layer:"esri-legend__layer",groupLayer:"esri-legend__group-layer",groupLayerChild:"esri-legend__group-layer-child",layerTable:"esri-legend__layer-table",layerTableSizeRamp:"esri-legend__layer-table--size-ramp",layerChildTable:"esri-legend__layer-child-table",layerCaption:"esri-legend__layer-caption",layerBody:"esri-legend__layer-body",layerRow:"esri-legend__layer-row",layerCell:"esri-legend__layer-cell",layerInfo:"esri-legend__layer-cell esri-legend__layer-cell--info",imageryLayerStretchedImage:"esri-legend__imagery-layer-image--stretched",imageryLayerCellStretched:"esri-legend__imagery-layer-cell--stretched",imageryLayerInfoStretched:"esri-legend__imagery-layer-info--stretched",symbolContainer:"esri-legend__layer-cell esri-legend__layer-cell--symbols",symbol:"esri-legend__symbol",rampContainer:"esri-legend__ramps",sizeRamp:"esri-legend__size-ramp",colorRamp:"esri-legend__color-ramp",opacityRamp:"esri-legend__opacity-ramp",borderlessRamp:"esri-legend__borderless-ramp",rampTick:"esri-legend__ramp-tick",rampFirstTick:"esri-legend__ramp-tick-first",rampLastTick:"esri-legend__ramp-tick-last",rampLabelsContainer:"esri-legend__ramp-labels",rampLabel:"esri-legend__ramp-label",univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label",message:"esri-legend__message",header:"esri-widget__heading",hidden:"esri-hidden"},u$z="esri-legend__",f$n=24,L$a={display:"flex",alignItems:"flex-start"},w$f={marginLeft:"3px"},C$9={display:"table-cell",verticalAlign:"middle"};let R$8=class extends z$o{constructor(e,r){super(e,r),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic";}render(){const e=this.activeLayerInfos,r=e&&e.toArray().map((e=>this._renderLegendForLayer(e))).filter((e=>!!e));return n$2g("div",null,r&&r.length?r:n$2g("div",{class:_$c.message},this.messages.noLegend))}_renderLegendForLayer(e){if(!e.ready)return null;const r=!!e.children.length,l=`${u$z}${e.layer.uid}-version-${e.version}`,a=e.title?s$1w({level:this.headingLevel,class:this.classes(_$c.header,_$c.label)},e.title):null;if(r){const r=e.children.map((e=>this._renderLegendForLayer(e))).toArray();return n$2g("div",{key:l,class:this.classes(_$c.service,_$c.groupLayer)},a,r)}{const r=e.legendElements;if(r&&!r.length)return null;const s=r.map((r=>this._renderLegendForElement(r,e.layer,e.effect))).filter((e=>!!e));if(!s.length)return null;const i={[_$c.groupLayerChild]:!!e.parent};return n$2g("div",{key:l,class:this.classes(_$c.service,i),tabIndex:0},a,n$2g("div",{class:_$c.layer},s))}}_renderLegendForElement(e,r,l,a){const i="color-ramp"===e.type,t="opacity-ramp"===e.type,n="size-ramp"===e.type;let o=null;if("symbol-table"===e.type||n){const a=e.infos.map((a=>this._renderLegendForElementInfo(a,r,l,n,e.legendType))).filter((e=>!!e));a.length&&(o=n$2g("div",{class:_$c.layerBody},a));}else "color-ramp"===e.type||"opacity-ramp"===e.type||"heatmap-ramp"===e.type||"stretch-ramp"===e.type?o=this._renderLegendForRamp(e,r.opacity):"relationship-ramp"===e.type?o=u$B(e,this.id,r.opacity,l):"univariate-above-and-below-ramp"===e.type?o=this._renderUnivariateAboveAndBelowRamp(e,r.opacity,l):"univariate-color-size-ramp"===e.type&&(o=this._renderUnivariateColorSizeRamp(e,r.opacity,l));if(!o)return null;const p=e.title;let m=null;if("string"==typeof p)m=p;else if(p){const e=r$u(this.messages,p,i||t);m=o$y(p,i||t)&&p.title?`${p.title} (${e})`:e;}const c=a?_$c.layerChildTable:_$c.layerTable,g=m?n$2g("div",{class:_$c.layerCaption},m):null,v={[_$c.layerTableSizeRamp]:n||!a};return n$2g("div",{class:this.classes(c,v)},g,o)}_renderUnivariateAboveAndBelowRamp(e,r,l){const{sizeRampElement:a,colorRampElement:s}=d$z(e,r),p=y$p(a,"above",!0),d=y$p(a,"below",!0),y=12,c=v$d(s,{width:y,height:p,rampAlignment:"vertical",opacity:r,type:"above",effect:l}),g=v$d(s,{width:y,height:d,rampAlignment:"vertical",opacity:r,type:"below",effect:l}),v=u$A(a),b=a.infos.map((e=>e.label)),u=b.map(((e,r)=>{const l=2===r;return 0===r?n$2g("div",{key:r,class:e?c?_$c.univariateAboveAndBelowLabel:_$c.rampLabel:null},e):l?n$2g("div",null):null})),f=b.length-1,R=Math.floor(b.length/2),A=b.map(((e,r)=>r===R||r===f?n$2g("div",{key:r,class:e?c?_$c.univariateAboveAndBelowLabel:_$c.rampLabel:null},e):null)),S={display:"table-cell",verticalAlign:"middle"},j={marginTop:`${v}px`},I={height:`${p}px`},k={height:`${d}px`};return n$2g("div",{key:"univariate-above-and-below-ramp-preview",styles:L$a},n$2g("div",{class:_$c.layerBody},a.infos.map(((e,r)=>n$2g("div",{class:this.classes(_$c.layerRow,_$c.sizeRamp)},n$2g("div",{class:_$c.symbol,styles:S,bind:e.preview,afterCreate:t$x}),c||r%2!=0?null:n$2g("div",{class:_$c.layerInfo},b[r]))))),c?n$2g("div",{styles:j,key:"color-ramp-preview"},n$2g("div",{styles:w$f},n$2g("div",{styles:C$9},n$2g("div",{class:_$c.rampContainer,bind:c,afterCreate:t$x})),n$2g("div",{styles:C$9},n$2g("div",{class:_$c.rampLabelsContainer,styles:I},u))),n$2g("div",{styles:w$f},n$2g("div",{styles:C$9},n$2g("div",{class:_$c.rampContainer,bind:g,afterCreate:t$x})),n$2g("div",{styles:C$9},n$2g("div",{class:_$c.rampLabelsContainer,styles:k},A)))):null)}_renderUnivariateColorSizeRamp(e,r,l){const{sizeRampElement:a,colorRampElement:s}=g$o(e),i=u$A(a),d=12,y=y$p(a,"full",!1),c=v$d(s,{width:d,height:y,rampAlignment:"vertical",opacity:r,type:"full",effect:l}),g=a.infos.length-1,v=a.infos.map(((e,r)=>0===r||r===g?n$2g("div",{key:r,class:e.label?s?_$c.univariateAboveAndBelowLabel:_$c.rampLabel:null},e.label):null)),b={display:"table-cell",verticalAlign:"middle"},u={marginTop:`${i}px`},f={height:`${y}px`};return n$2g("div",{key:"univariate-above-and-below-ramp-preview",styles:L$a},n$2g("div",{class:_$c.layerBody},a.infos.map((e=>n$2g("div",{class:this.classes(_$c.layerRow,_$c.sizeRamp)},n$2g("div",{class:_$c.symbol,styles:b,bind:e.preview,afterCreate:t$x}))))),n$2g("div",{styles:u,key:"color-ramp-preview"},n$2g("div",{styles:w$f},n$2g("div",{styles:C$9},n$2g("div",{class:_$c.rampContainer,bind:c,afterCreate:t$x})),n$2g("div",{styles:C$9},n$2g("div",{class:_$c.rampLabelsContainer,styles:f},v)))))}_renderLegendForRamp(e,r){const l=e.infos,a="opacity-ramp"===e.type,s="heatmap-ramp"===e.type,i="stretch-ramp"===e.type,t=e.preview,n=a?_$c.opacityRamp:"";t.className=`${_$c.colorRamp} ${n}`,null!=r&&(t.style.opacity=r.toString());const o=l.map((e=>n$2g("div",{class:e.label?_$c.rampLabel:null},s?this.messages[e.label]:i?this._getStretchStopLabel(e):e.label))),p={width:`${f$n}px`},d={height:t.style.height};return n$2g("div",{class:_$c.layerRow},n$2g("div",{class:_$c.symbolContainer,styles:p},n$2g("div",{class:_$c.rampContainer,bind:t,afterCreate:t$x})),n$2g("div",{class:_$c.layerInfo},n$2g("div",{class:_$c.rampLabelsContainer,styles:d},o)))}_getStretchStopLabel(e){return e.label?this.messages[e.label]+": "+("string"==typeof e.value?e.value:m$24(e.value,{style:"decimal",notation:e.value.toString().indexOf("e")>-1?"scientific":"standard"})):""}_renderLegendForElementInfo(e,r,l,a,s){if(e.type)return this._renderLegendForElement(e,r,l,!0);let i=null;const t=i$Q(r,s);if(e.preview?i=n$2g("div",{class:_$c.symbol,bind:e.preview,afterCreate:t$x}):e.src&&(i=this._renderImage(e,r,t)),!i)return null;const n={[_$c.imageryLayerInfoStretched]:t},o={[_$c.imageryLayerInfoStretched]:t,[_$c.sizeRamp]:!t&&a};return n$2g("div",{class:_$c.layerRow},n$2g("div",{class:this.classes(_$c.symbolContainer,o)},i),n$2g("div",{class:this.classes(_$c.layerInfo,n)},r$u(this.messages,e.label,!1)||""))}_renderImage(e,r,l){const{label:a,src:s,opacity:i}=e,t={[_$c.imageryLayerStretchedImage]:l,[_$c.symbol]:!l},n={opacity:`${null!=i?i:r.opacity}`};return n$2g("img",{alt:r$u(this.messages,a,!1),src:s,border:0,width:e.width,height:e.height,class:this.classes(t),styles:n})}};e$25([d$1T()],R$8.prototype,"activeLayerInfos",void 0),e$25([d$1T()],R$8.prototype,"headingLevel",void 0),e$25([d$1T(),e$1g("esri/widgets/Legend/t9n/Legend")],R$8.prototype,"messages",void 0),e$25([d$1T({readOnly:!0})],R$8.prototype,"type",void 0),R$8=e$25([i$2z("esri.widgets.Legend.styles.Classic")],R$8);const A$7=R$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const g$n={base:"esri-legend",widget:"esri-widget",panel:"esri-widget--panel",widgetIcon:"esri-icon-layer-list"};let f$m=class extends z$o{constructor(e,t){super(e,t),this._handles=new u$25,this.activeLayerInfos=null,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.headingLevel=3,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.iconClass=g$n.widgetIcon,this.label=void 0,this.layerInfos=null,this.messages=null,this.style=new A$7,this.view=null,this.viewModel=new I$c;}initialize(){this.own($$g(this,"view","resize",(()=>this.scheduleRender())),$$g(this,"activeLayerInfos","change",(()=>this._refreshActiveLayerInfos(this.activeLayerInfos))),f$1B(this,"headingLevel",(e=>{const{style:s}=this;s&&(s.headingLevel=e);})),i$2x(this,"style",((e,s)=>{s&&e!==s&&s.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,"card"===e.type&&(e.view=this.view),e.headingLevel=this.headingLevel);})));}destroy(){this._handles.destroy(),this._handles=null;}castStyle(e){if(e instanceof A$8||e instanceof A$7)return e;if("string"==typeof e)return "card"===e?new A$8:new A$7;if(e&&"string"==typeof e.type){const s={...e};delete s.type;return new("card"===e.type?A$8:A$7)(s)}return new A$7}render(){return n$2g("div",{class:this.classes(g$n.base,g$n.widget,this.style instanceof A$7?g$n.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){this._handles.removeAll(),e.forEach((e=>this._renderOnActiveLayerInfoChange(e))),this.scheduleRender();}_renderOnActiveLayerInfoChange(e){const s=i$2x(e,"version",(()=>this.scheduleRender()));this._handles.add(s,`version_${e.layer.uid}`);const i=$$g(e,"children","change",(()=>{e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)));}));this._handles.add(i,`children_${e.layer.uid}`),e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)));}};e$25([o$1K("viewModel.activeLayerInfos")],f$m.prototype,"activeLayerInfos",void 0),e$25([o$1K("viewModel.basemapLegendVisible")],f$m.prototype,"basemapLegendVisible",void 0),e$25([o$1K("viewModel.groundLegendVisible")],f$m.prototype,"groundLegendVisible",void 0),e$25([d$1T()],f$m.prototype,"headingLevel",void 0),e$25([o$1K("viewModel.hideLayersNotInCurrentView")],f$m.prototype,"hideLayersNotInCurrentView",void 0),e$25([o$1K("viewModel.keepCacheOnDestroy")],f$m.prototype,"keepCacheOnDestroy",void 0),e$25([o$1K("viewModel.respectLayerVisibility")],f$m.prototype,"respectLayerVisibility",void 0),e$25([d$1T()],f$m.prototype,"iconClass",void 0),e$25([d$1T({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],f$m.prototype,"label",void 0),e$25([o$1K("viewModel.layerInfos")],f$m.prototype,"layerInfos",void 0),e$25([d$1T(),e$1g("esri/widgets/Legend/t9n/Legend")],f$m.prototype,"messages",void 0),e$25([d$1T()],f$m.prototype,"style",void 0),e$25([c$35("style")],f$m.prototype,"castStyle",null),e$25([o$1K("viewModel.view")],f$m.prototype,"view",void 0),e$25([d$1T()],f$m.prototype,"viewModel",void 0),f$m=e$25([i$2z("esri.widgets.Legend")],f$m);const L$9=f$m;

const arcgisLegendCss = "@import url('https://js.arcgis.com/next/esri/themes/light/main.css');";

let ArcGISLegend = class extends HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.loaded = createEvent(this, "loaded", 7);
    this.position = 'bottom-left';
  }
  validateView(value) {
    if (value) {
      this.widget.view = value;
      if (this.el.parentElement.tagName.toLowerCase() !== 'arcgis-expand') {
        this.widget.view.ui.add(this.widget, this.position);
      }
    }
  }
  componentWillLoad() {
    const legend = new L$9({
      container: this.el
    });
    if (this.view) {
      legend.view = this.view;
    }
    this.widget = legend;
    this.loaded.emit(true);
  }
  get el() { return this; }
  static get watchers() { return {
    "view": ["validateView"]
  }; }
  static get style() { return arcgisLegendCss; }
};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$w;let p$S=t$w=class extends a$2N{constructor(o){super(o),this.type="none";}clone(){return new t$w({type:this.type})}};e$25([r$12({none:"none",stayAbove:"stay-above"})],p$S.prototype,"type",void 0),p$S=t$w=e$25([i$2z("esri.ground.NavigationConstraint")],p$S);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var w$e;const C$8=s$2n.getLogger("esri.Ground");let S$d=w$e=class extends(i$2i(m$1$)){constructor(r){super(r),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new S$I;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,"elevation"!==r.type&&"base-elevation"!==r.type&&C$8.error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`);},t=r=>{r.parent=null;};this.layers.on("after-add",(r=>e(r.item))),this.layers.on("after-remove",(r=>t(r.item)));}initialize(){this.when().catch((r=>{C$8.error("#load()","Failed to load ground",r);})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context);}destroy(){const r=this.layers.removeAll();for(const e of r)e.destroy();this.layers.destroy();}normalizeCtorArgs(r){return r&&"resourceInfo"in r&&(this._set("resourceInfo",r.resourceInfo),delete(r={...r}).resourceInfo),r}set layers(r){this._set("layers",n$2t(r,this._get("layers")));}writeLayers(r,e,o,t){const i=[];r?(t={...t,layerContainerType:"ground"},r.forEach((r=>{if("write"in r){const e={};o$W(r)().write(e,t)&&i.push(e);}else t&&t.messages&&t.messages.push(new s$2l("layer:unsupported",`Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted in the ground`,{layer:r}));})),e.layers=i):e.layers=i;}load(r){return this.addResolvingPromise(this._loadFromSource(r)),Promise.resolve(this)}loadAll(){return n$2r(this,(r=>{r(this.layers);}))}async queryElevation(r,e){await this.load({signal:null==e?void 0:e.signal});const{ElevationQuery:o}=await import('./ElevationQuery.js');h$1E(e);const t=new o,s=this.layers.filter(L$8).toArray();return t.queryAll(s,r,e)}async createElevationSampler(r,e){await this.load({signal:null==e?void 0:e.signal});const{ElevationQuery:o}=await import('./ElevationQuery.js');h$1E(e);const t=new o,s=this.layers.filter(L$8).toArray();return t.createSamplerAll(s,r,e)}clone(){const r={opacity:this.opacity,surfaceColor:l$2w(this.surfaceColor),navigationConstraint:l$2w(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(r.loadStatus="loaded"),new w$e({resourceInfo:this.resourceInfo}).set(r)}read(r,e){this.resourceInfo||this._set("resourceInfo",{data:r,context:e}),super.read(r,e);}_loadFromSource(r){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,r):Promise.resolve(null)}_loadLayersFromJSON(r,e,o){const t=e&&e.origin||"web-scene",s=e&&e.portal||null,a=e&&e.url||null;return import('./layersCreator.js').then((({populateOperationalLayers:e})=>{h$1E(o);const i=[];if(r.layers&&Array.isArray(r.layers)){const o={context:{origin:t,url:a,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};i.push(e(this.layers,r.layers,o));}return T$s(i)})).then((()=>{}))}};function I$a(r){return r&&"createElevationSampler"in r}function L$8(r){return "elevation"===r.type||I$a(r)}e$25([d$1T({json:{read:!1}})],S$d.prototype,"layers",null),e$25([r$1m("layers")],S$d.prototype,"writeLayers",null),e$25([d$1T({readOnly:!0})],S$d.prototype,"resourceInfo",void 0),e$25([d$1T({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:S$J,read:{reader:r$W,source:"transparency"},write:{writer:(r,e)=>{e.transparency=n$27(r);},target:"transparency"}}})],S$d.prototype,"opacity",void 0),e$25([d$1T({type:h$18,json:{type:[S$J],write:(r,e)=>{e.surfaceColor=r.toJSON().slice(0,3);}}})],S$d.prototype,"surfaceColor",void 0),e$25([d$1T({type:p$S,json:{write:!0}})],S$d.prototype,"navigationConstraint",void 0),S$d=w$e=e$25([i$2z("esri.Ground")],S$d);const A$6=S$d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$J=class extends(a$2w(S$I)){constructor(t){super(t),this.getCollections=null;}initialize(){this.handles.add(l$2r((()=>this.refresh())));}destroy(){this.getCollections=null;}refresh(){const t=r$1K(this.getCollections)?this.getCollections():null;if(t$1T(t))return void this.removeAll();let o=0;for(const s of t)r$1K(s)&&(o=this._processCollection(o,s));this.splice(o,this.length);}_createNewInstance(t){return new S$I(t)}_processCollection(t,o){if(!o)return t;const s=this.itemFilterFunction?this.itemFilterFunction:t=>!!t;for(const e of o)if(e){if(s(e)){const o=this.indexOf(e,t);o>=0?o!==t&&this.reorder(e,t):this.add(e,t),++t;}if(this.getChildrenFunction){const o=this.getChildrenFunction(e);if(Array.isArray(o))for(const s of o)t=this._processCollection(t,s);else t=this._processCollection(t,o);}}return t}};e$25([d$1T()],l$J.prototype,"getCollections",void 0),e$25([d$1T()],l$J.prototype,"getChildrenFunction",void 0),e$25([d$1T()],l$J.prototype,"itemFilterFunction",void 0),l$J=e$25([i$2z("esri.core.CollectionFlattener")],l$J);const p$R=l$J;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$P(i){var n;return !!(i&&i.loaded&&"capabilities"in i&&null!=i&&null!=(n=i.capabilities)&&n.operations&&"supportsEditing"in i.capabilities.operations&&!0===i.capabilities.operations.supportsEditing)&&!("editingEnabled"in i&&!i.editingEnabled)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$O=s$2n.getLogger("esri.support.groundUtils"),t$v={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function a$Z(r){let a=null;if("string"==typeof r)if(r in t$v){const o=t$v[r];a=new A$6({resourceInfo:{data:{layers:[o]}}});}else i$O.warn(`Unable to find ground definition for: ${r}. Try "world-elevation"`);else a=b$14(A$6,r);return a}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function l$I(e){return e&&"group"===e.type}function d$y(e,r,t){let s,o;if(e)for(let i=0,a=e.length;i<a;i++){if(s=e.getItemAt(i),s[r]===t)return s;if(l$I(s)&&(o=d$y(s.layers,r,t),o))return o}}const y$o=s$2n.getLogger("esri.support.LayersMixin"),p$Q=s=>{let l=class extends s{constructor(...e){super(...e),this.layers=new S$I;const t=e=>{e.parent&&"remove"in e.parent&&e.parent.remove(e);},s=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||y$o.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`);},o=e=>{e.parent=null,this.layerRemoved(e);};this.layers.on("before-add",(e=>t(e.item))),this.layers.on("after-add",(e=>s(e.item))),this.layers.on("after-remove",(e=>o(e.item)));}destroy(){const e=this.layers.removeAll();for(const r of e)this.layerRemoved(r),r.destroy();this.layers.destroy();}set layers(e){this._set("layers",n$2t(e,this._get("layers")));}add(e,r){const t=this.layers;if(r=t.getNextIndex(r),e instanceof b$v){const s=e;s.parent===this?this.reorder(s,r):t.add(s,r);}else O$t(e)?e.then((e=>{this.destroyed||this.add(e,r);})):y$o.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.");}addMany(e,r){const t=this.layers;r=t.getNextIndex(r),e.slice().forEach((e=>{e.parent!==this?(t.add(e,r),r+=1):this.reorder(e,r);}));}findLayerById(e){return d$y(this.layers,"id",e)}findLayerByUid(e){return d$y(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,r){return this.layers.reorder(e,r)}layerAdded(e){}layerRemoved(e){}};return e$25([d$1T()],l.prototype,"layers",null),l=e$25([i$2z("esri.support.LayersMixin")],l),l};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$Y="esri.support.TablesMixin",n$16=s$2n.getLogger(a$Y);function l$H(t){return t&&"group"===t.type}function p$P(t,e,r){if(t)for(let s=0,o=t.length;s<o;s++){const o=t.getItemAt(s);if(o[e]===r)return o;if(l$H(o)){const t=p$P(o.tables,e,r);if(t)return t}}}const c$Y=s=>{let l=class extends s{constructor(...t){super(...t),this.tables=new S$I,this.tables.on("after-add",(t=>{const e=t.item;e.parent&&e.parent!==this&&"tables"in e.parent&&e.parent.tables.remove(e),e.parent=this,"feature"!==e.type&&n$16.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as a table and will therefore be ignored.`);})),this.tables.on("after-remove",(t=>{t.item.parent=null;}));}destroy(){const t=this.tables.removeAll();for(const e of t)e.destroy();this.tables.destroy();}set tables(t){this._set("tables",n$2t(t,this._get("tables")));}findTableById(t){return p$P(this.tables,"id",t)}findTableByUid(t){return p$P(this.tables,"uid",t)}};return e$25([d$1T()],l.prototype,"tables",null),l=e$25([i$2z(a$Y)],l),l};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let f$l=class extends(c$Y(p$Q(n$2D.EventedMixin(p$3a)))){constructor(e){super(e),this.allLayers=new p$R({getCollections:()=>{var e,s,r;return [null==(e=this.basemap)?void 0:e.baseLayers,null==(s=this.ground)?void 0:s.layers,this.layers,null==(r=this.basemap)?void 0:r.referenceLayers]},getChildrenFunction:e=>"layers"in e?e.layers:null}),this.allTables=new p$R({getCollections:()=>[this.tables,this.layers],getChildrenFunction:e=>{const s=[];return "tables"in e&&s.push(e.tables),"layers"in e&&s.push(e.layers),s},itemFilterFunction:e=>{const s=e.parent;return s&&"tables"in s&&s.tables.includes(e)}}),this.basemap=null,this.editableLayers=new p$R({getCollections:()=>[this.allLayers],itemFilterFunction:i$P}),this.ground=new A$6,this._basemapCache=u$1O();}destroy(){var e,s;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),null==(e=this.ground)||e.destroy(),null==(s=this.basemap)||s.destroy(),f$1o(this._basemapCache),this._basemapCache=null;}castBasemap(e){return y$1m(e,this._basemapCache)}castGround(e){const s=a$Z(e);return t$1T(s)?this._get("ground"):s}findLayerById(e){return this.allLayers.find((s=>s.id===e))}findTableById(e){return this.allTables.find((s=>s.id===e))}};e$25([d$1T({readOnly:!0,dependsOn:[]})],f$l.prototype,"allLayers",void 0),e$25([d$1T({readOnly:!0})],f$l.prototype,"allTables",void 0),e$25([d$1T({type:x$B})],f$l.prototype,"basemap",void 0),e$25([c$35("basemap")],f$l.prototype,"castBasemap",null),e$25([d$1T({readOnly:!0})],f$l.prototype,"editableLayers",void 0),e$25([d$1T({type:A$6,nonNullable:!0})],f$l.prototype,"ground",void 0),e$25([c$35("ground")],f$l.prototype,"castGround",null),f$l=e$25([i$2z("esri.Map")],f$l);const j$8=f$l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$G={widthBreakpoint:{getValue(e){const i=e.viewSize[0],s=e.breakpoints,a=this.values;return i<=s.xsmall?a.xsmall:i<=s.small?a.small:i<=s.medium?a.medium:i<=s.large?a.large:a.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const i=e.viewSize[1],s=e.breakpoints,a=this.values;return i<=s.xsmall?a.xsmall:i<=s.small?a.small:i<=s.medium?a.medium:i<=s.large?a.large:a.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const i=e.viewSize,s=i[0],a=i[1],t=this.values;return a>=s?t.portrait:t.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},h$u={xsmall:544,small:768,medium:992,large:1200};function n$15(e){const i=e;return i&&i.xsmall<i.small&&i.small<i.medium&&i.medium<i.large}function o$x(e,i){return i?l$G[e].valueToClassName[i].split(" "):[]}const m$B=m=>{let g=class extends m{constructor(...e){super(...e),this._breakpointsHandles=new u$25,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=h$u;}initialize(){this._breakpointsHandles.add(i$2x(this,["breakpoints","size"],this._updateClassNames));}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null);}set breakpoints(e){if(e===this._get("breakpoints"))return;const i=n$15(e);if(!i){const e=JSON.stringify(h$u,null,2);console.warn("provided breakpoints are not valid, using defaults:"+e);}e=i?e:h$u,this._set("breakpoints",{...e});}_updateClassNames(){if(!this.container)return;const e=t$1H.acquire(),s=t$1H.acquire();let a,t=!1;for(a in l$G){const i=this[a],r=l$G[a].getValue({viewSize:this.size,breakpoints:this.breakpoints});i!==r&&(t=!0,this[a]=r,o$x(a,i).forEach((e=>s.push(e))),o$x(a,r).forEach((i=>e.push(i))));}t&&(this._applyClassNameChanges(e,s),t$1H.release(e),t$1H.release(s));}_applyClassNameChanges(e,i){const s=this.container;s&&(i.forEach((e=>s.classList.remove(e))),e.forEach((e=>s.classList.add(e))));}_removeActiveClassNames(){const e=this.container;if(!e)return;let i;for(i in l$G)o$x(i,this[i]).forEach((i=>e.classList.remove(i)));}};return e$25([d$1T()],g.prototype,"breakpoints",null),e$25([d$1T()],g.prototype,"orientation",void 0),e$25([d$1T()],g.prototype,"widthBreakpoint",void 0),e$25([d$1T()],g.prototype,"heightBreakpoint",void 0),g=e$25([i$2z("esri.views.BreakpointsOwner")],g),g};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$X=class extends p$3a{constructor(){super(...arguments),this.items=new S$I,this._watchUpdatingTracking=new l$1S,this._callbacks=new Map,this._projector=i$2m(),this._hiddenProjector=i$2m();}get needsRender(){return this.items.length>0}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(this.items,(t=>{for(const e of t.added){const t=()=>e.render();this._callbacks.set(e,t),this._projector.append(this.surface,t);}for(const e of t.removed){const t=this._projector.detach(this._callbacks.get(e));this.surface.removeChild(t.domNode),this._callbacks.delete(e);}}));}addItem(t){this.items.add(t);}removeItem(t){this.items.remove(t);}destroy(){this.items.removeAll(),this._callbacks.forEach((t=>this._projector.detach(t))),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy();}render(){this._projector.renderNow();}computeBoundingRect(t){const e=this._hiddenSurface,r=this._hiddenProjector;let o=null;const s=()=>(o=t.render(),o);r.append(e,s),r.renderNow();const i={left:0,top:0,right:0,bottom:0};if(o&&o.domNode){const t=o.domNode.getBoundingClientRect();i.left=t.left,i.top=t.top,i.right=t.right,i.bottom=t.bottom;}for(r.detach(s);e.firstChild;)e.removeChild(e.firstChild);return i}overlaps(t,e){const r=this.computeBoundingRect(t),o=this.computeBoundingRect(e);return Math.max(r.left,o.left)<=Math.min(r.right,o.right)&&Math.max(r.top,o.top)<=Math.min(r.bottom,o.bottom)}get hasVisibleItems(){return this.items.some((t=>t.visible))}renderCanvas(t){if(!this.items.some((t=>t.visible)))return;const e=t.getContext("2d");e.save(),e.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach((t=>{e.save(),t.renderCanvas(e),e.restore();})),e.restore();}};e$25([d$1T({readOnly:!0})],c$X.prototype,"surface",void 0),e$25([d$1T({readOnly:!0})],c$X.prototype,"items",void 0),e$25([d$1T({readOnly:!0})],c$X.prototype,"needsRender",null),e$25([d$1T({readOnly:!0})],c$X.prototype,"_watchUpdatingTracking",void 0),e$25([d$1T({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],c$X.prototype,"updating",void 0),c$X=e$25([i$2z("esri.views.overlay.ViewOverlay")],c$X);const n$14=c$X;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$v(e,t,l,n){let u=null,a=1e3;"number"==typeof t?(a=t,n=l):(u=null!=t?t:null,a=l);let o,p=0;const r=()=>{p=0,e.apply(n,o);},c=(...e)=>{u&&u.apply(n,e),o=e,a?p||(p=setTimeout(r,a)):r();};return c.remove=()=>{p&&(clearTimeout(p),p=0);},c.forceUpdate=()=>{p&&(clearTimeout(p),r());},c.hasPendingUpdates=()=>!!p,c}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const D$9=["B","kB","MB","GB","TB"];function M$7(i,r){let o=0===r?0:Math.floor(Math.log(r)/Math.log(1024));o=e$1u(o,0,D$9.length-1);const u=m$24(r/1024**o,{maximumFractionDigits:2});return r$1J(i.units.bytes[D$9[o]],{fileSize:u})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$13(n){const{exifInfo:e,exifName:a,tagName:u}=n;if(!e||!a||!u)return null;const f=e.find((n=>n.name===a));return f?t$u({tagName:u,tags:f.tags}):null}function t$u(n){const{tagName:t,tags:e}=n;if(!e||!t)return null;const a=e.find((n=>n.name===t));return a&&a.value||null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$K;const p$O={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let a$X=s$K=class extends a$2N{constructor(t){super(t),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null;}get orientationInfo(){const{exifInfo:t}=this,o=n$13({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:t});return p$O[o]||null}clone(){return new s$K({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};e$25([d$1T({type:String})],a$X.prototype,"contentType",void 0),e$25([d$1T()],a$X.prototype,"exifInfo",void 0),e$25([d$1T({readOnly:!0})],a$X.prototype,"orientationInfo",null),e$25([d$1T({type:S$J})],a$X.prototype,"id",void 0),e$25([d$1T({type:String})],a$X.prototype,"globalId",void 0),e$25([d$1T({type:String})],a$X.prototype,"keywords",void 0),e$25([d$1T({type:String})],a$X.prototype,"name",void 0),e$25([d$1T({json:{read:!1}})],a$X.prototype,"parentGlobalId",void 0),e$25([d$1T({json:{read:!1}})],a$X.prototype,"parentObjectId",void 0),e$25([d$1T({type:S$J})],a$X.prototype,"size",void 0),e$25([d$1T({json:{read:!1}})],a$X.prototype,"url",void 0),a$X=s$K=e$25([i$2z("esri.layers.support.AttachmentInfo")],a$X);const l$F=a$X;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$W="esri.widgets.Feature.support.featureUtils",d$x=s$2n.getLogger(c$W),p$N=/href=(""|'')/gi,m$A=/(\{([^\{\r\n]+)\})/g,y$n=/\'/g,g$m=/^\s*expression\//i,h$t=/(\n)/gi,b$c=/[\u00A0-\u9999<>\&]/gim,F$5=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,I$9=/^(?:mailto:|tel:)/,w$d="relationships/",N$6=S$H("short-date-short-time");function x$8(e){if(!t$1T(e))return e.get("sourceLayer")||e.get("layer")}async function E$7(e,t){return "function"==typeof e?e.call(null,t):e}function v$c(e=""){if(e)return !I$9.test(e.trim().toLowerCase())}function j$7(e){return !!e&&g$m.test(e)}function T$8(e,t){if(!j$7(t)||!e)return null;const r=t.replace(g$m,"").toLowerCase();let n;return e.some((e=>e.name.toLowerCase()===r&&(n=e,!0))),n}function C$7(e,t){const r=T$8(t,null==e?void 0:e.fieldName);return r?r.title||null:e?e.label||e.fieldName:null}function q$8(e,t){const r=t.get(e.toLowerCase());return `{${r&&r.fieldName||e}}`}function D$8(e){return e.replace(p$N,"")}function R$7(e,t){const r=M$6(t,e);return r?r.name:e}function L$7(e,t){return e&&e.map((e=>R$7(e,t)))}function M$6(e,t){return e&&"function"==typeof e.getField?e.getField(t):null}function U$9(e){return `${e}`.trim()}function $$6({attributes:e,globalAttributes:t,layer:r,text:n,expressionAttributes:i,fieldInfoMap:o}){return n?A$5({formattedAttributes:t,template:P$9(n,{...t,...i,...e},r),fieldInfoMap:o}):""}function A$5({formattedAttributes:e,template:t,fieldInfoMap:r}){return U$9(D$8(r$1J(r$1J(t,(e=>q$8(e,r))),e)))}function O$6(e,t,r=!1){const n=t[e];if("string"==typeof n){const i="%27",o=(r?encodeURIComponent(n):n).replace(y$n,i);t[e]=o;}}function S$c(e,t=!1){const r={...e};return Object.keys(r).forEach((e=>O$6(e,r,t))),r}function G$5(e,t,r){const i=(t=U$9(t))&&"{"!==t[0];return r$1J(e,S$c(r,i))}function k$7(e,t){return e.replace(m$A,((e,r,n)=>{const i=M$6(t,n);return i?`{${i.name}}`:r}))}function P$9(e,t,r){const n=k$7(e,r);return n?n.replace(F$5,((e,r,n)=>G$5(e,r||n,t))):n}function _$b(e,t){if("string"==typeof e&&t&&null==t.dateFormat&&(null!=t.places||null!=t.digitSeparator)){const t=Number(e);if(!isNaN(t))return t}return e}function z$5(e){return "feature"===(null==e?void 0:e.type)}function H$3(e){return "map-image"===(null==e?void 0:e.type)}function Q$4(e){return !(null==e||!e.layer)}function Z$4(e,t){const r=t.fieldInfos,n=t.fieldName,i=B$7(r,n),o=null==i?void 0:i.clone(),l=t.preventPlacesFormatting,f=t.layer,c=M$6(f,n);if(o&&"date"===(null==c?void 0:c.type)){const e=o.format||new u$1u;e.dateFormat=e.dateFormat||"short-date-short-time",e.dateTimeFormatOptions=z$5(f)&&f.datesInUnknownTimezone||Q$4(f)&&H$3(f.layer)&&f.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,o.format=e;}const d=o&&o.format;return "string"==typeof(e=_$b(e,d))||null==e||null==d?e:l?m$24(e,{...u$22(d),minimumFractionDigits:0,maximumFractionDigits:20}):d.format(e)}function B$7(e,t){if(!e||!e.length||!t)return;const r=t.toLowerCase();let n;return e.some((e=>!(!e.fieldName||e.fieldName.toLowerCase()!==r)&&(n=e,!0))),n}function J$2({fieldName:e,graphic:t,layer:r}){if(ae$1(e))return null;if(!r||"function"!=typeof r.getFeatureType)return null;const{typeIdField:n}=r;if(!n||e!==n)return null;const i=r.getFeatureType(t);return i?i.name:null}function K$4({fieldName:e,value:t,graphic:r,layer:n}){if(ae$1(e))return null;if(!n||"function"!=typeof n.getFieldDomain)return null;const i=n.getFieldDomain(e,{feature:r});return i&&"coded-value"===i.type?i.getName(t):null}function V$3(e,t){const{creatorField:r,creationDateField:n,editorField:o,editDateField:a}=e;if(!t)return;const u=t[a];if("number"==typeof u){const e=t[o];return {type:"edit",date:L$w(u,N$6),user:e}}const l=t[n];if("number"==typeof l){const e=t[r];return {type:"create",date:L$w(l,N$6),user:e}}return null}function W$5(e,t){const r=new Map;return e&&e.forEach((e=>{const n=R$7(e.fieldName,t);e.fieldName=n,r.set(n.toLowerCase(),e);})),r}function X$4(e){const t=[];if(!e)return t;const{fieldInfos:r,content:n}=e;return r&&t.push(...r),n&&Array.isArray(n)?(n.forEach((e=>{if("fields"===e.type){const r=e&&e.fieldInfos;r&&t.push(...r);}})),t):t}function Y$4(e){return e.replace(b$c,(e=>`&#${e.charCodeAt(0)};`))}function ee$2(e){return "string"==typeof e?e.replace(h$t,'<br class="esri-text-new-line" />'):e}function te$2(e){const{value:t,fieldName:r,fieldInfos:n,fieldInfoMap:o,layer:a,graphic:u}=e;if(null==t)return "";const l=K$4({fieldName:r,value:t,graphic:u,layer:a});if(l)return l;const s=J$2({fieldName:r,graphic:u,layer:a});if(s)return s;if(o.get(r.toLowerCase()))return Z$4(t,{fieldInfos:n,fieldName:r,layer:a});const f=a&&a.fieldsIndex;return f&&f.isDateField(r)?L$w(t,N$6):ee$2(t)}function re$2({fieldInfos:e,attributes:t,layer:r,graphic:n,fieldInfoMap:i,relatedInfos:o}){const a={};return null==o||o.forEach((e=>se$2(a,e))),Object.keys(t).forEach((o=>{const u=t[o];a[o]=te$2({fieldName:o,fieldInfos:e,fieldInfoMap:i,layer:r,value:u,graphic:n});})),a}async function ne$1(e,t){var r,n;const{layer:i,graphic:o,outFields:a,objectIds:u,returnGeometry:l,spatialReference:s}=e,f=u[0];if("number"!=typeof f&&"string"!=typeof f){const e="Could not query required fields for the specified feature. The feature's ID is invalid.",t={layer:i,graphic:o,objectId:f,requiredFields:a};return d$x.warn(e,t),null}if(null==(r=i.capabilities)||null==(n=r.operations)||!n.supportsQuery){const e="The specified layer cannot be queried. The following fields will not be available.",t={layer:i,graphic:o,requiredFields:a,returnGeometry:l};return d$x.warn(e,t),null}const c=i.createQuery();c.objectIds=u,c.outFields=null!=a&&a.length?a:[i.objectIdField],c.returnGeometry=!!l,c.returnZ=!!l,c.returnM=!!l,c.outSpatialReference=s;return (await i.queryFeatures(c,t)).features[0]}async function ie$1(e){var t;if(null==(t=e.expressionInfos)||!t.length)return !1;const r=await a$2t(),{arcadeUtils:{hasGeometryFunctions:n}}=r;return n(e)}async function oe$2({graphic:e,popupTemplate:t,layer:r,spatialReference:n},i){if(!r||!t)return;if("function"==typeof r.load&&await r.load(i),!e.attributes)return;const o=e.attributes[r.objectIdField];if(null==o)return;const a=[o],u=await t.getRequiredFields(r.fieldsIndex),s=ce$4(u,e),f=s?[]:u,c=t.returnGeometry||await ie$1(t);if(s&&!c)return;const d=await ne$1({layer:r,graphic:e,outFields:f,objectIds:a,returnGeometry:c,spatialReference:n},i);d&&(d.geometry&&(e.geometry=d.geometry),d.attributes&&(e.attributes={...e.attributes,...d.attributes}));}function ae$1(e=""){return !!e&&-1!==e.indexOf(w$d)}function ue$1(e){return e?`${w$d}${e.layerId}/${e.fieldName}`:""}function le$1({attributes:e,graphic:t,relatedInfo:r}){e&&t&&r&&Object.keys(t.attributes).forEach((n=>{const i=ue$1({layerId:r.relation.id.toString(),fieldName:n});e[i]=t.attributes[n];}));}function se$2(e,t){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach((r=>le$1({attributes:e,graphic:r,relatedInfo:t}))),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach((r=>le$1({attributes:e,graphic:r,relatedInfo:t}))));}const fe$1=e=>{if(!e)return !1;const t=e.toUpperCase();return t.indexOf("CURRENT_TIMESTAMP")>-1||t.indexOf("CURRENT_DATE")>-1||t.indexOf("CURRENT_TIME")>-1},ce$1=({layer:e,method:t,query:n,definitionExpression:i})=>{var o,a;if(null==(o=e.capabilities)||null==(a=o.query)||!a.supportsCacheHint||"attachments"===t)return;const u=r$1K(n.where)&&n.where,l=r$1K(n.geometry)&&n.geometry;fe$1(i)||fe$1(u)||"extent"===(null==l?void 0:l.type)||"tile"===n.resultType||(n.cacheHint=!0);},de$1=({query:e,layer:t,method:r})=>{ce$1({layer:t,method:r,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`});},pe$1=({queryPayload:e,layer:t,method:r})=>{ce$1({layer:t,method:r,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`});};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$M={editing:!1,operations:{add:!0,update:!0,delete:!0}},u$y=S$I.ofType(l$F),y$m="graphic.layer.capabilities.operations.supportsResizeAttachments";let f$k=class extends d$1p{constructor(t){super(t),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...p$M},this.activeAttachmentInfo=null,this.attachmentInfos=new u$y,this.graphic=null,this.mode="view",this.handles.add([i$2x(this,"graphic",(()=>this._graphicChanged()))]);}destroy(){this._attachmentLayer=null,this.graphic=null;}castAbilities(t){return {...p$M,...t}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get(y$m)||!1}async getAttachments(){const{_attachmentLayer:t,attachmentInfos:e}=this;if(!t||"function"!=typeof t.queryAttachments)throw new s$2l("invalid-layer","getAttachments(): A valid layer is required.");const a=this._getFeatureId(),n=new u$1c({objectIds:[a],returnMetadata:!0}),r=[],s=t.queryAttachments(n).then((t=>t[a]||r)).catch((()=>r));this._getAttachmentsPromise=s,this.notifyChange("state");const o=await s;return e.removeAll(),o.length&&e.addMany(o),this._getAttachmentsPromise=null,this.notifyChange("state"),o}async addAttachment(t){const{_attachmentLayer:e,attachmentInfos:a,graphic:n,abilities:r}=this;if(!t)throw new s$2l("invalid-attachment","addAttachment(): An attachment is required.",{attachment:t});if(!r.operations.add)throw new s$2l("invalid-abilities","addAttachment(): add abilities are required.");if(!e||"function"!=typeof e.addAttachment)throw new s$2l("invalid-layer","addAttachment(): A valid layer is required.");const s=e.addAttachment(n,t).then((t=>this._queryAttachment(t.objectId))),o=await s;return a.add(o),o}async deleteAttachment(t){const{_attachmentLayer:e,attachmentInfos:a,graphic:n,abilities:r}=this;if(!t)throw new s$2l("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!r.operations.delete)throw new s$2l("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!e||"function"!=typeof e.deleteAttachments)throw new s$2l("invalid-layer","deleteAttachment(): A valid layer is required.");const s=e.deleteAttachments(n,[t.id]).then((()=>t)),o=await s;return a.remove(o),o}async updateAttachment(t,e=this.activeAttachmentInfo){const{_attachmentLayer:a,attachmentInfos:n,graphic:r,abilities:s}=this;if(!t)throw new s$2l("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:t});if(!e)throw new s$2l("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!s.operations.update)throw new s$2l("invalid-abilities","updateAttachment(): Update abilities are required.");const o=n.findIndex((t=>t===e));if(!a||"function"!=typeof a.updateAttachment)throw new s$2l("invalid-layer","updateAttachment(): A valid layer is required.");const c=a.updateAttachment(r,e.id,t).then((t=>this._queryAttachment(t.objectId))),h=await c;return n.splice(o,1,h),h}async _queryAttachment(t){if(!t)throw new s$2l("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:e}=this,a=this._getFeatureId(),n=new u$1c({objectIds:[a],attachmentsWhere:`AttachmentId=${t}`,returnMetadata:!0});return e.queryAttachments(n).then((t=>t[a][0]))}_getFeatureId(){const{_attachmentLayer:t,graphic:e}=this;if(!t||!e)return null;const{objectIdField:a}=t,{attributes:i}=e;return i&&i[a]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch((()=>{})));}_setAttachmentLayer(){const{graphic:t}=this,e=x$8(t);this._attachmentLayer=e?"scene"===e.type&&r$1K(e.associatedLayer)?e.associatedLayer:e:null;}};e$25([d$1T()],f$k.prototype,"abilities",void 0),e$25([c$35("abilities")],f$k.prototype,"castAbilities",null),e$25([d$1T()],f$k.prototype,"activeAttachmentInfo",void 0),e$25([d$1T({readOnly:!0,type:u$y})],f$k.prototype,"attachmentInfos",void 0),e$25([d$1T({type:h$X})],f$k.prototype,"graphic",void 0),e$25([d$1T()],f$k.prototype,"mode",void 0),e$25([d$1T({readOnly:!0})],f$k.prototype,"state",null),e$25([d$1T({readOnly:!0})],f$k.prototype,"supportsResizeAttachments",null),f$k=e$25([i$2z("esri.widgets.Attachments.AttachmentsViewModel")],f$k);const A$4=f$k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$u(i){const e=i.toLowerCase();return "image/bmp"===e||"image/emf"===e||"image/exif"===e||"image/gif"===e||"image/x-icon"===e||"image/jpeg"===e||"image/png"===e||"image/tiff"===e||"image/x-wmf"===e}function p$L(e){const p=a$34("esri/themes/base/images/files/");return e?"text/plain"===e?`${p}text-32.svg`:"application/pdf"===e?`${p}pdf-32.svg`:"text/csv"===e?`${p}csv-32.svg`:"application/gpx+xml"===e?`${p}gpx-32.svg`:"application/x-dwf"===e?`${p}cad-32.svg`:"application/postscript"===e||"application/json"===e||"text/xml"===e||"model/vrml"===e?`${p}code-32.svg`:"application/x-zip-compressed"===e||"application/x-7z-compressed"===e||"application/x-gzip"===e||"application/x-tar"===e||"application/x-gtar"===e||"application/x-bzip2"===e||"application/gzip"===e||"application/x-compress"===e||"application/x-apple-diskimage"===e||"application/x-rar-compressed"===e||"application/zip"===e?`${p}zip-32.svg`:-1!==e.indexOf("image/")?`${p}image-32.svg`:-1!==e.indexOf("audio/")?`${p}sound-32.svg`:-1!==e.indexOf("video/")?`${p}video-32.svg`:-1!==e.indexOf("msexcel")||-1!==e.indexOf("ms-excel")||-1!==e.indexOf("spreadsheetml")?`${p}excel-32.svg`:-1!==e.indexOf("msword")||-1!==e.indexOf("ms-word")||-1!==e.indexOf("wordprocessingml")?`${p}word-32.svg`:-1!==e.indexOf("powerpoint")||-1!==e.indexOf("presentationml")?`${p}report-32.svg`:`${p}generic-32.svg`:`${p}generic-32.svg`}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const f$j={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},v$b={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},y$l=window.CSS;let B$6=class extends z$o{constructor(t,e){super(t,e),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new A$4,this.visibleElements={...f$j},this._supportsImageOrientation=y$l&&y$l.supports&&y$l.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null;}initialize(){this.own($$g(this,"viewModel.attachmentInfos","change",(()=>this.scheduleRender())),i$2x(this,"viewModel.mode",(()=>this._modeChanged())));}get effectiveDisplayType(){return "auto"===this.displayType?this.viewModel.supportsResizeAttachments?"preview":"list":this.displayType}castVisibleElements(t){return {...f$j,...t}}addAttachment(){const{_addAttachmentForm:t,viewModel:s}=this;return this._set("submitting",!0),this._set("error",null),s.addAttachment(t).then((t=>(this._set("submitting",!1),this._set("error",null),s.mode="view",t))).catch((t=>{throw this._set("submitting",!1),this._set("error",new s$2l("attachments:add-attachment",this.messages.addErrorMessage,t)),t}))}deleteAttachment(t){const{viewModel:s}=this;return this._set("submitting",!0),this._set("error",null),s.deleteAttachment(t).then((t=>(this._set("submitting",!1),this._set("error",null),s.mode="view",t))).catch((t=>{throw this._set("submitting",!1),this._set("error",new s$2l("attachments:delete-attachment",this.messages.deleteErrorMessage,t)),t}))}updateAttachment(){const{viewModel:t}=this,{_updateAttachmentForm:s}=this;return this._set("submitting",!0),this._set("error",null),t.updateAttachment(s).then((e=>(this._set("submitting",!1),this._set("error",null),t.mode="view",e))).catch((t=>{throw this._set("submitting",!1),this._set("error",new s$2l("attachments:update-attachment",this.messages.updateErrorMessage,t)),t}))}render(){const{submitting:t,viewModel:e}=this,{state:s}=e;return n$2g("div",{class:this.classes(v$b.base,v$b.esriWidget)},t?this.renderProgressBar():null,"loading"===s?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:t,visibleElements:e}=this;return t&&e.errorMessage?n$2g("div",{key:"error-message",class:v$b.errorMessage},t.message):null}renderAttachments(){const{mode:t,activeAttachmentInfo:e}=this.viewModel;return "add"===t?this.renderAddForm():"edit"===t?this.renderDetailsForm(e):this.renderAttachmentContainer()}renderLoading(){return n$2g("div",{class:v$b.loaderContainer,key:"loader"},n$2g("div",{class:v$b.loader}))}renderProgressBar(){return this.visibleElements.progressBar?n$2g("div",{class:v$b.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:t,selectedFile:e}=this,s=t||!e,i=this.visibleElements.cancelAddButton?n$2g("button",{type:"button",bind:this,disabled:t,onclick:this._cancelForm,class:this.classes(v$b.esriButton,v$b.esriButtonTertiary,v$b.esriButtonSmall,v$b.esriButtonHalf,t&&v$b.buttonDisabled)},this.messages.cancel):null,a=this.visibleElements.addSubmitButton?n$2g("button",{type:"submit",disabled:s,class:this.classes(v$b.esriButton,v$b.esriButtonSecondary,v$b.esriButtonSmall,v$b.esriButtonHalf,{[v$b.buttonDisabled]:s})},this.messages.add):null,n=e?n$2g("span",{key:"file-name",class:v$b.fileName},e.name):null,r=n$2g("form",{bind:this,afterCreate:g$13,afterRemoved:p$36,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},n$2g("fieldset",{class:v$b.fileFieldset},n,n$2g("label",{class:this.classes(v$b.fileLabel,v$b.esriButton,v$b.esriButtonSecondary)},e?this.messages.changeFile:this.messages.selectFile,n$2g("input",{class:v$b.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),a,i);return n$2g("div",{key:"add-form-container",class:v$b.formNode},r)}renderDetailsForm(t){const{visibleElements:e,viewModel:i,selectedFile:a,submitting:n}=this,{contentType:r,size:o,url:l}=t,{abilities:m}=i,d=n||!a,c=m.editing&&m.operations.delete&&e.deleteButton?n$2g("button",{key:"delete-button",type:"button",disabled:n,bind:this,onclick:e=>this._submitDeleteAttachment(e,t),class:this.classes(v$b.esriButton,v$b.esriButtonSmall,v$b.esriButtonTertiary,v$b.deleteButton,{[v$b.buttonDisabled]:n})},this.messages.delete):null,h=m.editing&&m.operations.update&&e.updateButton?n$2g("button",{disabled:d,key:"update-button",type:"submit",class:this.classes(v$b.esriButton,v$b.esriButtonSmall,v$b.esriButtonThird,{[v$b.buttonDisabled]:d})},this.messages.update):null,b=this.visibleElements.cancelUpdateButton?n$2g("button",{disabled:n,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(v$b.esriButton,v$b.esriButtonSmall,v$b.esriButtonTertiary,v$b.esriButtonThird,{[v$b.buttonDisabled]:n})},this.messages.cancel):null,g=a?n$2g("span",{key:"file-name",class:v$b.fileName},a.name):null,f=m.editing&&m.operations.update?n$2g("fieldset",{key:"file",class:v$b.fileFieldset},g,n$2g("label",{class:this.classes(v$b.fileLabel,v$b.esriButton,v$b.esriButtonSecondary)},this.messages.changeFile,n$2g("input",{class:v$b.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,y=n$2g("fieldset",{key:"size",class:v$b.metadataFieldset},n$2g("label",null,M$7(this.messagesUnits,o))),B=n$2g("fieldset",{key:"content-type",class:v$b.metadataFieldset},n$2g("label",null,r)),A=n$2g("form",{bind:this,afterCreate:g$13,afterRemoved:p$36,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},n$2g("div",{class:v$b.metadata},y,B),f,n$2g("div",{class:v$b.actions},c,b,h));return n$2g("div",{key:"edit-form-container",class:v$b.formNode},n$2g("a",{class:v$b.itemLink,href:l,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:t,size:400}),n$2g("div",{class:v$b.itemLinkOverlay},n$2g("span",{class:v$b.itemLinkOverlayIcon},n$2g("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},n$2g("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),n$2g("path",{fill:"none",d:"M0 0h32v32H0z"}))))),A)}renderImageMask({attachmentInfo:t,size:e}){const{supportsResizeAttachments:s}=this.viewModel,{contentType:i,name:a,url:n}=t,r=s&&e$u(i),o=this._getCSSTransform(t,r),l=o?{transform:o,"image-orientation":"none"}:{},m=-1===n.indexOf("?")?"?":"&",d=r?`${n}${m}w=${e}`:p$L(i),u={[v$b.itemMaskIcon]:!r},p={[v$b.itemImageResizable]:s};return n$2g("div",{class:this.classes(u,v$b.itemMask)},n$2g("img",{styles:l,alt:a,src:d,class:this.classes(p,v$b.itemImage)}))}renderAttachmentInfo({attachmentInfo:t,displayType:e}){const{viewModel:s}=this,{abilities:i}=s,{name:a,url:n}=t,r=this.renderImageMask({attachmentInfo:t,size:"list"===e?48:400}),o=i.editing?n$2g("span",{"aria-hidden":"true",class:this.classes(v$b.itemChevronIcon,d$1N(this.container)?v$b.iconLeft:v$b.iconRight)}):null,l=[r,n$2g("label",{class:v$b.itemLabel},n$2g("span",{class:v$b.itemFilename},a||this.messages.noTitle),o)],m=i.editing?n$2g("button",{key:"details-button",bind:this,class:v$b.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":t.id,onclick:()=>this._startEditAttachment(t),type:"button"},l):n$2g("a",{key:"details-link",class:v$b.itemButton,href:n,target:"_blank"},l);return n$2g("li",{class:v$b.item,key:t},m)}renderAttachmentContainer(){const{effectiveDisplayType:t,viewModel:e,visibleElements:s}=this,{attachmentInfos:i,abilities:a}=e,n=i&&i.length,r={[v$b.containerList]:"preview"!==t,[v$b.containerPreview]:"preview"===t},o=a.editing&&a.operations.add&&s.addButton?n$2g("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(v$b.esriButton,v$b.esriButtonTertiary,v$b.addAttachmentButton),type:"button"},n$2g("span",{"aria-hidden":"true",class:this.classes(v$b.itemAddIcon,v$b.iconPlus)}),this.messages.add):null,l=n?n$2g("ul",{class:v$b.items},i.toArray().map((e=>this.renderAttachmentInfo({attachmentInfo:e,displayType:t})))):n$2g("div",{class:v$b.empty},this.messages.noAttachments);return n$2g("div",{key:"attachments-container",class:this.classes(v$b.container,r)},l,o)}_modeChanged(){this._set("error",null),this._set("selectedFile",null);}_handleFileInputChange(t){const e=t.target,s=e&&e.files&&e.files.item(0);this._set("selectedFile",s);}_submitDeleteAttachment(t,e){t.preventDefault(),this.deleteAttachment(e);}_submitAddAttachment(t){t.preventDefault(),this.addAttachment();}_submitUpdateAttachment(t){t.preventDefault(),this.updateAttachment();}_startEditAttachment(t){const{viewModel:e}=this;e.activeAttachmentInfo=t,e.mode="edit";}_startAddAttachment(){this.viewModel.mode="add";}_cancelForm(t){t.preventDefault(),this.viewModel.mode="view";}_getCSSTransform(t,e){const{orientationInfo:s}=t;return !this._supportsImageOrientation&&e&&s?[s.rotation?`rotate(${s.rotation}deg)`:"",s.mirrored?"scaleX(-1)":""].join(" "):""}};e$25([o$1K("viewModel.abilities")],B$6.prototype,"abilities",void 0),e$25([d$1T()],B$6.prototype,"displayType",void 0),e$25([d$1T({readOnly:!0})],B$6.prototype,"effectiveDisplayType",null),e$25([o$1K("viewModel.graphic")],B$6.prototype,"graphic",void 0),e$25([d$1T({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],B$6.prototype,"label",void 0),e$25([d$1T(),e$1g("esri/widgets/Attachments/t9n/Attachments")],B$6.prototype,"messages",void 0),e$25([d$1T(),e$1g("esri/core/t9n/Units")],B$6.prototype,"messagesUnits",void 0),e$25([d$1T({readOnly:!0})],B$6.prototype,"selectedFile",void 0),e$25([d$1T({readOnly:!0})],B$6.prototype,"submitting",void 0),e$25([d$1T({readOnly:!0})],B$6.prototype,"error",void 0),e$25([d$1T({type:A$4})],B$6.prototype,"viewModel",void 0),e$25([d$1T()],B$6.prototype,"visibleElements",void 0),e$25([c$35("visibleElements")],B$6.prototype,"castVisibleElements",null),B$6=e$25([i$2z("esri.widgets.Attachments")],B$6);const A$3=B$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let o$w=class extends A$4{constructor(t){super(t),this.description=null,this.title=null;}};e$25([d$1T()],o$w.prototype,"description",void 0),e$25([d$1T()],o$w.prototype,"title",void 0),o$w=e$25([i$2z("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],o$w);const c$V=o$w;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$K={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let n$12=class extends z$o{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null;}render(){return n$2g("div",{class:p$K.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?n$2g(s$1w,{level:this.headingLevel,class:p$K.title},e):null}renderDescription(){const{description:e}=this;return e?n$2g("div",{key:"description",class:p$K.description},e):null}};e$25([d$1T()],n$12.prototype,"description",void 0),e$25([d$1T()],n$12.prototype,"headingLevel",void 0),e$25([d$1T()],n$12.prototype,"title",void 0),n$12=e$25([i$2z("esri.widgets.Feature.support.FeatureElementInfo")],n$12);const c$U=n$12;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const d$w={base:"esri-feature-attachments"};let c$T=class extends z$o{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new A$3,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new c$V;}initialize(){this._featureElementInfo=new c$U,i$2x(this,["viewModel.description","viewModel.title","headingLevel"],(()=>this._setupFeatureElementInfo())),i$2x(this,"viewModel.graphic",(e=>this.attachmentsWidget.graphic=e));}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy();}render(){var e;const{attachmentsWidget:t}=this;return n$2g("div",{class:d$w.base},null==(e=this._featureElementInfo)?void 0:e.render(),null==t?void 0:t.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:o}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:o});}};e$25([d$1T({readOnly:!0})],c$T.prototype,"attachmentsWidget",void 0),e$25([o$1K("viewModel.description")],c$T.prototype,"description",void 0),e$25([o$1K("attachmentsWidget.displayType")],c$T.prototype,"displayType",void 0),e$25([o$1K("viewModel.graphic")],c$T.prototype,"graphic",void 0),e$25([d$1T()],c$T.prototype,"headingLevel",void 0),e$25([o$1K("viewModel.title")],c$T.prototype,"title",void 0),e$25([d$1T({type:c$V})],c$T.prototype,"viewModel",void 0),c$T=e$25([i$2z("esri.widgets.Feature.FeatureAttachments")],c$T);const m$z=c$T;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let n$11=class extends(a$2w(p$3a)){constructor(t){super(t),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(i$2x(this,"creator",(t=>{this._destroyContent(),this._createContent(t);})));}destroy(){this._destroyContent();}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:t,graphic:r,destroyer:e}=this;t&&(E$7(e,{graphic:r}).catch((()=>null)),this._set("created",null));}async _createContent(t){const{graphic:r}=this,e=E$7(t,{graphic:r}).catch((()=>null));this._loadingPromise=e,this.notifyChange("state");const o=await e;e===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",o));}};e$25([d$1T({readOnly:!0})],n$11.prototype,"created",void 0),e$25([d$1T()],n$11.prototype,"creator",void 0),e$25([d$1T()],n$11.prototype,"destroyer",void 0),e$25([d$1T({type:h$X})],n$11.prototype,"graphic",void 0),e$25([d$1T({readOnly:!0})],n$11.prototype,"state",null),n$11=e$25([i$2z("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],n$11);const p$J=n$11;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$S={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let l$E=class extends z$o{constructor(e,r){super(e,r),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=e=>{Array.from(e.querySelectorAll("a")).forEach((e=>{v$c(e.href)&&!e.hasAttribute("target")&&e.setAttribute("target","_blank");}));};}renderLoading(){return n$2g("div",{class:c$S.loaderContainer,key:"loader"},n$2g("div",{class:c$S.loader}))}renderCreated(){var e;const r=null==(e=this.viewModel)?void 0:e.created;return r?r instanceof HTMLElement?n$2g("div",{key:r,bind:r,afterCreate:this._attachToNode}):e$1f(r)?n$2g("div",{key:r},!r.destroyed&&r.render()):n$2g("div",{key:r,innerHTML:r,afterCreate:this._addTargetToAnchors}):null}render(){var e;const r=null==(e=this.viewModel)?void 0:e.state;return n$2g("div",{class:c$S.base},"loading"===r?this.renderLoading():this.renderCreated())}_attachToNode(e){const r=this;e.appendChild(r);}};e$25([o$1K("viewModel.creator")],l$E.prototype,"creator",void 0),e$25([o$1K("viewModel.graphic")],l$E.prototype,"graphic",void 0),e$25([d$1T({type:p$J})],l$E.prototype,"viewModel",void 0),l$E=e$25([i$2z("esri.widgets.Feature.FeatureContent")],l$E);const p$I=l$E;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$D=class extends p$3a{constructor(o){super(o),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null;}get formattedFieldInfos(){const{expressionInfos:o,fieldInfos:e}=this,s=[];return null==e||e.forEach((e=>{if(!(!e.hasOwnProperty("visible")||e.visible))return;const t=e.clone();t.label=C$7(t,o),s.push(t);})),s}};e$25([d$1T()],l$D.prototype,"attributes",void 0),e$25([d$1T({type:[i$1O]})],l$D.prototype,"expressionInfos",void 0),e$25([d$1T()],l$D.prototype,"description",void 0),e$25([d$1T({type:[c$2t]})],l$D.prototype,"fieldInfos",void 0),e$25([d$1T({readOnly:!0})],l$D.prototype,"formattedFieldInfos",null),e$25([d$1T()],l$D.prototype,"title",void 0),l$D=e$25([i$2z("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],l$D);const n$10=l$D;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$J=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function a$W(e){let a=null;return s$J.some((s=>(s.pattern.test(e)&&(a=s),!!a))),a}function p$H(s,p){if("string"!=typeof p||!p)return p;const r=a$W(p);if(!r)return p;const t=p.match(r.pattern),n=t&&t[2],l=r$1J(r$1J(r.label,{messages:s,hierPart:n}),{appName:r.appName}),i=r.target?` target="${r.target}"`:"",o="_blank"===r.target?' rel="noreferrer"':"";return p.replace(r.pattern,`<a${i} href="$1"${o}>${l}</a>`)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const f$i={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let u$x=class extends z$o{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new n$10,this.messages=null,this.messagesURIUtils=null;}initialize(){this._featureElementInfo=new c$U,i$2x(this,["viewModel.description","viewModel.title"],(()=>this._setupFeatureElementInfo()));}destroy(){this._featureElementInfo.destroy();}renderFieldInfo(e,t){const{attributes:s}=this.viewModel,r=e.fieldName,i=e.label||r,o=s?null==s[r]?"":s[r]:"",l=!(!e.format||!e.format.dateFormat),a="number"==typeof o&&!l?this._forceLTR(o):p$H(this.messagesURIUtils,o),n={[f$i.fieldDataDate]:l};return n$2g("tr",{key:`fields-element-info-row-${r}-${t}`},n$2g("th",{key:`fields-element-info-row-header-${r}-${t}`,class:f$i.fieldHeader,innerHTML:i}),n$2g("td",{key:`fields-element-info-row-data-${r}-${t}`,class:this.classes(f$i.fieldData,n),innerHTML:a}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return null!=e&&e.length?n$2g("table",{class:f$i.esriTable,summary:this.messages.fieldsSummary},n$2g("tbody",null,e.map(((e,t)=>this.renderFieldInfo(e,t))))):null}render(){var e;return n$2g("div",{class:f$i.base},null==(e=this._featureElementInfo)?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t});}_forceLTR(e){return `&lrm;${e}`}};e$25([o$1K("viewModel.attributes")],u$x.prototype,"attributes",void 0),e$25([o$1K("viewModel.description")],u$x.prototype,"description",void 0),e$25([o$1K("viewModel.expressionInfos")],u$x.prototype,"expressionInfos",void 0),e$25([o$1K("viewModel.fieldInfos")],u$x.prototype,"fieldInfos",void 0),e$25([o$1K("viewModel.title")],u$x.prototype,"title",void 0),e$25([d$1T({type:n$10})],u$x.prototype,"viewModel",void 0),e$25([d$1T(),e$1g("esri/widgets/Feature/t9n/Feature")],u$x.prototype,"messages",void 0),e$25([d$1T(),e$1g("esri/widgets/support/t9n/uriUtils")],u$x.prototype,"messagesURIUtils",void 0),u$x=e$25([i$2z("esri.widgets.Feature.FeatureFields")],u$x);const m$y=u$x;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$t(t,r){return r?{...r,query:{...t,...r.query}}:{query:t}}function e$t(r){return "string"==typeof r?U$s(r):r}function n$$(t,r,e){const o={};for(const i in t){if("declaredClass"===i)continue;const f=t[i];if(null!=f&&"function"!=typeof f)if(Array.isArray(f)){o[i]=[];for(let t=0;t<f.length;t++)o[i][t]=n$$(f[t]);}else if("object"==typeof f)if(f.toJSON){const t=f.toJSON(e&&e[i]);o[i]=r?t:JSON.stringify(t);}else o[i]=r?f:JSON.stringify(f);else o[i]=f;}return o}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$t(n){const o={};for(const e in n){if("declaredClass"===e)continue;const r=n[e];if(null!=r&&"function"!=typeof r)if(Array.isArray(r)){o[e]=[];for(let n=0;n<r.length;n++)o[e][n]=t$t(r[n]);}else "object"==typeof r?r.toJSON&&(o[e]=JSON.stringify(r)):o[e]=r;}return o}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$_(t){const o=t.toJSON();return o.attachmentTypes&&(o.attachmentTypes=o.attachmentTypes.join(",")),o.keywords&&(o.keywords=o.keywords.join(",")),o.globalIds&&(o.globalIds=o.globalIds.join(",")),o.objectIds&&(o.objectIds=o.objectIds.join(",")),o.size&&(o.size=o.size.join(",")),o}function a$V(o,s){const n={};for(const a of o){const{parentObjectId:o,parentGlobalId:c,attachmentInfos:i}=a;for(const a of i){const{id:i}=a,m=j$V(i$2M(`${s}/${o}/attachments/${i}`)),p=l$F.fromJSON(a);p.set({url:m,parentObjectId:o,parentGlobalId:c}),n[o]?n[o].push(p):n[o]=[p];}}return n}function c$R(t,e,r){let a={query:t$t({...t.query,f:"json",...n$_(e)})};return r&&(a={...r,...a,query:{...r.query,...a.query}}),E$v(t.path+"/queryAttachments",a)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function a$U(a,m,n){const s=e$t(a);return c$R(s,u$1c.from(m),{...n}).then((t=>a$V(t.data.attachmentGroups,s.path)))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$s={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new m$1L({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:k$w.WebMercator}),minus180Line:new m$1L({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:k$w.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new m$1L({paths:[[[180,-180],[180,180]]],spatialReference:k$w.WGS84}),minus180Line:new m$1L({paths:[[[-180,-180],[-180,180]]],spatialReference:k$w.WGS84})}};function i$N(e,n){return Math.ceil((e-n)/(2*n))}function o$v(e,n){const t=s$I(e);for(const r of t)for(const e of r)e[0]+=n;return e}function s$I(e){return c$2w(e)?e.rings:e.paths}function a$T(e){const n=(null==e?void 0:e.isWebMercator)?102100:4326;return [r$s[n].minX,r$s[n].maxX]}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function o$u(o,i,n,m){const p="string"==typeof o?U$s(o):o,a=i[0].spatialReference,u={...m,query:{...p.query,f:"json",sr:JSON.stringify(a),target:JSON.stringify({geometryType:v$F(i[0]),geometries:i}),cutter:JSON.stringify(n)}},c=await E$v(p.path+"/cut",u),{cutIndexes:f,geometries:g=[]}=c.data;return {cutIndexes:f,geometries:g.map((e=>{const t=d$1o(e);return t.spatialReference=a,t}))}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function i$M(o,i,f){const m="string"==typeof o?U$s(o):o,p=i[0].spatialReference,a=v$F(i[0]),u={...f,query:{...m.query,f:"json",sr:p.wkid?p.wkid:JSON.stringify(p),geometries:JSON.stringify(s$H(i))}};return n$Z((await E$v(m.path+"/simplify",u)).data,a,p)}function s$H(r){return {geometryType:v$F(r[0]),geometries:r.map((r=>r.toJSON()))}}function n$Z(r,t,e){const i=a$2v(t);return r.map((r=>{const t=i.fromJSON(r);return t.spatialReference=e,t}))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const y$k=s$2n.getLogger("esri.geometry.support.normalizeUtils");function x$7(t){return "polygon"===t.type}function d$v(t){return "polygon"===t[0].type}function w$c(t){return "polyline"===t[0].type}function R$6(t,n){if(!(t instanceof m$1L||t instanceof v$J)){const t="straightLineDensify: the input geometry is neither polyline nor polygon";throw y$k.error(t),new s$2l(t)}const o=s$I(t),s=[];for(const e of o){const t=[];s.push(t),t.push([e[0][0],e[0][1]]);for(let o=0;o<e.length-1;o++){const s=e[o][0],r=e[o][1],i=e[o+1][0],l=e[o+1][1],f=Math.sqrt((i-s)*(i-s)+(l-r)*(l-r)),c=(l-r)/f,p=(i-s)/f,u=f/n;if(u>1){for(let l=1;l<=u-1;l++){const e=l*n,o=p*e+s,i=c*e+r;t.push([o,i]);}const e=(f+Math.floor(u-1)*n)/2,o=p*e+s,i=c*e+r;t.push([o,i]);}t.push([i,l]);}}return x$7(t)?new v$J({rings:s,spatialReference:t.spatialReference}):new m$1L({paths:s,spatialReference:t.spatialReference})}function M$5(t,e,n){if(e){const e=R$6(t,1e6);t=j$M(e,!0);}return n&&(t=o$v(t,n)),t}function P$8(t,e,n){if(Array.isArray(t)){const o=t[0];if(o>e){const n=i$N(o,e);t[0]=o+n*(-2*e);}else if(o<n){const e=i$N(o,n);t[0]=o+e*(-2*n);}}else {const o=t.x;if(o>e){const n=i$N(o,e);t=t.clone().offset(n*(-2*e),0);}else if(o<n){const e=i$N(o,n);t=t.clone().offset(e*(-2*n),0);}}return t}function b$b(t,e){let n=-1;for(let o=0;o<e.cutIndexes.length;o++){const s=e.cutIndexes[o],r=e.geometries[o],i=s$I(r);for(let t=0;t<i.length;t++){const e=i[t];e.some((n=>{if(n[0]<180)return !0;{let n=0;for(let t=0;t<e.length;t++){const o=e[t][0];n=o>n?o:n;}n=Number(n.toFixed(9));const o=-360*i$N(n,180);for(let s=0;s<e.length;s++){const e=r.getPoint(t,s);r.setPoint(t,s,e.clone().offset(o,0));}return !0}}));}if(s===n){if(d$v(t))for(const e of s$I(r))t[s]=t[s].addRing(e);else if(w$c(t))for(const e of s$I(r))t[s]=t[s].addPath(e);}else n=s,t[s]=r;}return t}async function v$a(e,n,l){var h;if(!Array.isArray(e))return v$a([e],n);const y=null!=(h=null==n?void 0:n.url)?h:t$1P.geometryServiceUrl;let x,d,w,j,R,L,U,k,A=0;const z=[],I=[];for(const t of e)if(t$1T(t))I.push(t);else if(x||(x=t.spatialReference,d=S$F(x),w=x.isWebMercator,L=w?102100:4326,j=r$s[L].maxX,R=r$s[L].minX,U=r$s[L].plus180Line,k=r$s[L].minus180Line),d)if("mesh"===t.type)I.push(t);else if("point"===t.type)I.push(P$8(t.clone(),j,R));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map((t=>P$8(t,j,R))),I.push(e);}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,d);I.push(e.rings?new v$J(e):e);}else if(t.extent){const e=t.extent,n=i$N(e.xmin,R)*(2*j);let o=0===n?t.clone():o$v(t.clone(),n);e.offset(n,0),e.intersects(U)&&e.xmax!==j?(A=e.xmax>A?e.xmax:A,o=M$5(o,w),z.push(o),I.push("cut")):e.intersects(k)&&e.xmin!==R?(A=e.xmax*(2*j)>A?e.xmax*(2*j):A,o=M$5(o,w,360),z.push(o),I.push("cut")):I.push(o);}else I.push(t.clone());else I.push(t);let X=i$N(A,j),q=-90;const C=X,D=new m$1L;for(;X>0;){const t=360*X-180;D.addPath([[t,q],[t,-1*q]]),q*=-1,X--;}if(z.length>0&&C>0){const t=b$b(z,await o$u(y,z,D,l)),n=[],o=[];for(let l=0;l<I.length;l++){const r=I[l];if("cut"!==r)o.push(r);else {const r=t.shift(),i=e[l];r$1K(i)&&"polygon"===i.type&&i.rings&&i.rings.length>1&&r.rings.length>=i.rings.length?(n.push(r),o.push("simplify")):o.push(w?R$s(r):r);}}if(!n.length)return o;const r=await i$M(y,n,l),i=[];for(let e=0;e<o.length;e++){const t=o[e];"simplify"!==t?i.push(t):i.push(w?R$s(r.shift()):r.shift());}return i}const E=[];for(let t=0;t<I.length;t++){const e=I[t];if("cut"!==e)E.push(e);else {const t=z.shift();E.push(!0===w?R$s(t):t);}}return Promise.resolve(E)}function U$8(t,e){const n=S$F(e);if(n){const[e,o]=n.valid,s=o-e;if(t<e)for(;t<e;)t+=s;if(t>o)for(;t>o;)t-=s;}return t}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$G=4294967296,i$L=s$2r("esri-text-decoder")?new TextDecoder("utf-8"):null,r$r=s$2r("safari")||s$2r("ios")?6:s$2r("ff")?12:32;class a$S{constructor(t,e,s=0,i=(t?t.byteLength:0)){this._tag=0,this._dataType=99,this.init(t,e,s,i);}init(t,e,s,i){this._data=t,this._dataView=e,this._pos=s,this._end=i;}clone(){return new a$S(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t;}nextTag(t){for(;;){if(this._pos===this._end)return !1;const e=this._decodeVarint();if(this._tag=e>>3,this._dataType=7&e,!t||t===this._tag)break;this.skip();}return !0}next(){if(this._pos===this._end)return !1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=0!==this._data[this._pos];return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,e=this._pos,i=t.getUint32(e,!0)+t.getUint32(e+4,!0)*s$G;return this._skip(8),i}getSFixed64(){const t=this._dataView,e=this._pos,i=t.getUint32(e,!0)+t.getInt32(e+4,!0)*s$G;return this._skip(8),i}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),e=this._pos,s=this._toString(this._data,e,e+t);return this._skip(t),s}getBytes(){const t=this._getLength(),e=this._pos,s=this._toBytes(this._data,e,e+t);return this._skip(t),s}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,e,s,i){const r=this.getMessage(),a=t(r,e,s,i);return r.release(),a}processMessage(t){const e=this.getMessage(),s=t(e);return e.release(),s}getMessage(){const t=this._getLength(),e=a$S.pool.acquire();return e.init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),e}release(){a$S.pool.release(this);}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t);}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t;}_decodeVarint(){const t=this._data;let e,s=this._pos,i=0;if(this._end-s>=10)do{if(e=t[s++],i|=127&e,0==(128&e))break;if(e=t[s++],i|=(127&e)<<7,0==(128&e))break;if(e=t[s++],i|=(127&e)<<14,0==(128&e))break;if(e=t[s++],i|=(127&e)<<21,0==(128&e))break;if(e=t[s++],i+=268435456*(127&e),0==(128&e))break;if(e=t[s++],i+=34359738368*(127&e),0==(128&e))break;if(e=t[s++],i+=4398046511104*(127&e),0==(128&e))break;if(e=t[s++],i+=562949953421312*(127&e),0==(128&e))break;if(e=t[s++],i+=72057594037927940*(127&e),0==(128&e))break;if(e=t[s++],i+=0x8000000000000000*(127&e),0==(128&e))break;throw new Error("Varint too long!")}while(0);else {let r=1;for(;s!==this._end&&(e=t[s],0!=(128&e));)++s,i+=(127&e)*r,r*=128;if(s===this._end)throw new Error("Varint overrun!");++s,i+=e*r;}return this._pos=s,i}_decodeSVarint(){const t=this._decodeVarint();return t%2?-(t+1)/2:t/2}_getLength(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,e,s){if((s=Math.min(this._end,s))-e>r$r&&i$L){const r=t.subarray(e,s);return i$L.decode(r)}let a="",n="";for(let i=e;i<s;++i){const e=t[i];128&e?n+="%"+e.toString(16):(a+=decodeURIComponent(n)+String.fromCharCode(e),n="");}return n.length&&(a+=decodeURIComponent(n)),a}_toBytes(t,e,s){return s=Math.min(this._end,s),new Uint8Array(t.buffer,e,s-e)}}a$S.pool=new e$1U(a$S,null,(t=>{t._data=null,t._dataView=null;}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$s{constructor(t=[],e=[],s=!1){this.lengths=null!=t?t:[],this.coords=null!=e?e:[],this.hasIndeterminateRingOrder=s;}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((t,e)=>t+e))}forEachVertex(t){let e=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let s=0;s<this.lengths.length;s++){const h=this.lengths[s];for(let s=0;s<h;s++){t(this.coords[2*(s+e)],this.coords[2*(s+e)+1]);}e+=h;}}clone(e){return e?(e.set(this.coords),new t$s(this.lengths.slice(),e,this.hasIndeterminateRingOrder)):new t$s(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$F{constructor(t=null,s={},e,o){this.geometry=t,this.attributes=s,this.centroid=e,this.objectId=o,this.displayId=0,this.geohashX=0,this.geohashY=0;}weakClone(){const t=new s$F(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function e$s(s){return !(t$1T(s.geometry)||!s.geometry.coords||!s.geometry.coords.length)}class o$t extends s$F{}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$r{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null;}weakClone(){const t=new e$r;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$Y=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class a$R{constructor(e){this.options=e,this.geometryTypes=n$Y,this._coordinatePtr=0,this._vertexDimension=0;}createFeatureResult(){return new e$r}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++;}finishFeatureResult(r){if(!r||!r.features||!r.hasZ||!this.options.sourceSpatialReference||!r.spatialReference||E$r(r.spatialReference,this.options.sourceSpatialReference)||r.spatialReference.vcsWkid)return;const i=Y$a(this.options.sourceSpatialReference)/Y$a(r.spatialReference);if(1!==i)for(const e of r.features){if(!e$s(e))continue;const t=e.geometry.coords;for(let e=2;e<t.length;e+=3)t[e]*=i;}}addFeature(e,t){e.features.push(t);}createFeature(){return new s$F}createSpatialReference(){return {wkid:0}}createGeometry(){return new t$s}addField(e,t){e.fields.push(t);}allocateCoordinates(e){e.coords.length=e.lengths.reduce(((e,t)=>e+t),0)*this._vertexDimension,this._coordinatePtr=0;}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t;}addCoordinatePoint(e,t){e.coords.push(t);}addLength(e,t){e.lengths.push(t);}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType;}createPointGeometry(){return new t$s}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$X=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],o$s=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],i$K=["upperLeft","lowerLeft"];function c$Q(e){return e>=n$X.length?null:n$X[e]}function l$C(e){return e>=o$s.length?null:o$s[e]}function g$l(e){return e>=i$K.length?null:i$K[e]}function p$G(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function u$w(e,t,r){const s=3,a=t.createPointGeometry(r);for(;e.next();)switch(e.tag()){case s:{const r=e.getUInt32(),s=e.pos()+r;let n=0;for(;e.pos()<s;)t.addCoordinatePoint(a,e.getSInt64(),n++);break}default:e.skip();}return a}function y$j(e,t,r){const s=2,a=3,n=t.createGeometry(r),o=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;e.next();)switch(e.tag()){case s:{const r=e.getUInt32(),s=e.pos()+r;let a=0;for(;e.pos()<s;)t.addLength(n,e.getUInt32(),a++);break}case a:{const r=e.getUInt32(),s=e.pos()+r;let a=0;for(t.allocateCoordinates(n);e.pos()<s;)t.addCoordinate(n,e.getSInt64(),a),a++,a===o&&(a=0);break}default:e.skip();}return n}function f$h(e){const t=1,r=2,n=3,o=new t$s;let i="esriGeometryPoint";for(;e.next();)switch(e.tag()){case r:{const t=e.getUInt32(),r=e.pos()+t;for(;e.pos()<r;)o.lengths.push(e.getUInt32());break}case n:{const t=e.getUInt32(),r=e.pos()+t;for(;e.pos()<r;)o.coords.push(e.getSInt64());break}case t:i=n$Y[e.getEnum()];break;default:e.skip();}return {queryGeometry:o,queryGeometryType:i}}function b$a(e){const t=1,r=2,s=3,a=4,n=5,o=6,i=7,c=8,l=9;for(;e.next();)switch(e.tag()){case t:return e.getString();case r:return e.getFloat();case s:return e.getDouble();case a:return e.getSInt32();case n:return e.getUInt32();case o:return e.getInt64();case i:return e.getUInt64();case c:return e.getSInt64();case l:return e.getBool();default:return e.skip(),null}return null}function k$6(e){const t=1,r=2,s=3,a=4,n=6,o={type:c$Q(0)};for(;e.next();)switch(e.tag()){case t:o.name=e.getString();break;case r:o.type=c$Q(e.getEnum());break;case s:o.alias=e.getString();break;case a:o.sqlType=l$C(e.getEnum());break;default:e.skip();break;case n:o.defaultValue=e.getString();}return o}function d$u(e){const t=1,r=2,s={};for(;e.next();)switch(e.tag()){case t:s.name=e.getString();break;case r:s.isSystemMaintained=e.getBool();break;default:e.skip();}return s}function m$x(e,t,r,s){const a=1,n=2,o=4,i=t.createFeature(r);let c=0;for(;e.next();)switch(e.tag()){case a:{const t=s[c++].name;i.attributes[t]=e.processMessage(b$a);break}case n:i.geometry=e.processMessageWithArgs(y$j,t,r);break;case o:i.centroid=e.processMessageWithArgs(u$w,t,r);break;default:e.skip();}return i}function h$s(e){const t=1,r=2,s=3,a=4,n=[1,1,1,1];for(;e.next();)switch(e.tag()){case t:n[0]=e.getDouble();break;case r:n[1]=e.getDouble();break;case a:n[2]=e.getDouble();break;case s:n[3]=e.getDouble();break;default:e.skip();}return n}function T$7(e){const t=1,r=2,s=3,a=4,n=[0,0,0,0];for(;e.next();)switch(e.tag()){case t:n[0]=e.getDouble();break;case r:n[1]=e.getDouble();break;case a:n[2]=e.getDouble();break;case s:n[3]=e.getDouble();break;default:e.skip();}return n}function q$7(e){const t=1,r=2,s=3,a={originPosition:g$l(0)};for(;e.next();)switch(e.tag()){case t:a.originPosition=g$l(e.getEnum());break;case r:a.scale=e.processMessage(h$s);break;case s:a.translate=e.processMessage(T$7);break;default:e.skip();}return a}function I$8(e){const t=1,r=2,s=3,a={};for(;e.next();)switch(e.tag()){case t:a.shapeAreaFieldName=e.getString();break;case r:a.shapeLengthFieldName=e.getString();break;case s:a.units=e.getString();break;default:e.skip();}return a}function F$4(e,t){const r=1,s=2,a=3,n=4,o=5,i=t.createSpatialReference();for(;e.next();)switch(e.tag()){case r:i.wkid=e.getUInt32();break;case o:i.wkt=e.getString();break;case s:i.latestWkid=e.getUInt32();break;case a:i.vcsWkid=e.getUInt32();break;case n:i.latestVcsWkid=e.getUInt32();break;default:e.skip();}return i}function S$b(e,t){const r=1,s=2,a=3,n=4,o=5,i=7,c=8,l=9,g=10,u=11,y=12,f=13,b=15,h=t.createFeatureResult();h.geometryType=p$G(t,0);let T=!1;for(;e.next();)switch(e.tag()){case r:h.objectIdFieldName=e.getString();break;case a:h.globalIdFieldName=e.getString();break;case n:h.geohashFieldName=e.getString();break;case o:h.geometryProperties=e.processMessage(I$8);break;case i:h.geometryType=p$G(t,e.getEnum());break;case c:h.spatialReference=e.processMessageWithArgs(F$4,t);break;case g:h.hasZ=e.getBool();break;case u:h.hasM=e.getBool();break;case y:h.transform=e.processMessage(q$7);break;case l:{const t=e.getBool();h.exceededTransferLimit=t;break}case f:t.addField(h,e.processMessage(k$6));break;case b:T||(t.prepareFeatures(h),T=!0),t.addFeature(h,e.processMessageWithArgs(m$x,t,h,h.fields));break;case s:h.uniqueIdField=e.processMessage(d$u);break;default:e.skip();}return t.finishFeatureResult(h),h}function w$b(e,r){const s=1,a=4,n={};let o=null;for(;e.next();)switch(e.tag()){case a:o=e.processMessageWithArgs(f$h);break;case s:n.featureResult=e.processMessageWithArgs(S$b,r);break;default:e.skip();}return r$1K(o)&&n.featureResult&&r.addQueryGeometry(n,o),n}function D$7(t,s){try{const e=2,a=new a$S(new Uint8Array(t),new DataView(t)),n={};for(;a.next();)if(a.tag()===e)n.queryResult=a.processMessageWithArgs(w$b,s);else a.skip();return n}catch(a){throw new s$2l("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:a})}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$r(t,r){const u=D$7(t,r),o=u.queryResult.featureResult,s=u.queryResult.queryGeometry,y=u.queryResult.queryGeometryType;if(o&&o.features&&o.features.length&&o.objectIdFieldName){const e=o.objectIdFieldName;for(const t of o.features)t.attributes&&(t.objectId=t.attributes[e]);}return o&&(o.queryGeometry=s,o.queryGeometryType=y),o}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$B="Layer does not support extent calculation.";function m$w(t,r){const n=t.geometry,o=t.toJSON(),s=o;if(r$1K(n)&&(s.geometry=JSON.stringify(n),s.geometryType=v$F(n),s.inSR=n.spatialReference.wkid||JSON.stringify(n.spatialReference)),o.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=o.groupByFieldsForStatistics.join(",")),o.objectIds&&(s.objectIds=o.objectIds.join(",")),o.orderByFields&&(s.orderByFields=o.orderByFields.join(",")),!o.outFields||!o.returnDistinctValues&&(null!=r&&r.returnCountOnly||null!=r&&r.returnExtentOnly||null!=r&&r.returnIdsOnly)?delete s.outFields:-1!==o.outFields.indexOf("*")?s.outFields="*":s.outFields=o.outFields.join(","),o.outSR?s.outSR=o.outSR.wkid||JSON.stringify(o.outSR):n&&(o.returnGeometry||o.returnCentroid)&&(s.outSR=s.inSR),o.returnGeometry&&delete o.returnGeometry,o.outStatistics&&(s.outStatistics=JSON.stringify(o.outStatistics)),o.pixelSize&&(s.pixelSize=JSON.stringify(o.pixelSize)),o.quantizationParameters&&(s.quantizationParameters=JSON.stringify(o.quantizationParameters)),o.parameterValues&&(s.parameterValues=JSON.stringify(o.parameterValues)),o.rangeValues&&(s.rangeValues=JSON.stringify(o.rangeValues)),o.dynamicDataSource&&(s.layer=JSON.stringify({source:o.dynamicDataSource}),delete o.dynamicDataSource),o.timeExtent){const t=o.timeExtent,{start:e,end:r}=t;null==e&&null==r||(s.time=e===r?e:`${null==e?"null":e},${null==r?"null":r}`),delete o.timeExtent;}return s}async function y$i(t,r,n,i){const o=r$1K(r.timeExtent)&&r.timeExtent.isEmpty?{data:{features:[]}}:await g$k(t,r,"json",i);return r$O(r,n,o.data),o}async function c$P(t,r,n,i){if(r$1K(r.timeExtent)&&r.timeExtent.isEmpty)return Promise.resolve({data:n.createFeatureResult()});const o=await d$t(t,r,i),u=o;return u.data=t$r(o.data,n),u}function d$t(t,e,r){return g$k(t,e,"pbf",r)}function f$g(t,r,n){return r$1K(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):g$k(t,r,"json",n,{returnIdsOnly:!0})}function p$F(t,r,n){return r$1K(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):g$k(t,r,"json",n,{returnIdsOnly:!0,returnCountOnly:!0})}function S$a(t,r,n){return r$1K(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):g$k(t,r,"json",n,{returnExtentOnly:!0,returnCountOnly:!0}).then((t=>{const e=t.data;if(e.hasOwnProperty("extent"))return t;if(e.features)throw new Error(l$B);if(e.hasOwnProperty("count"))throw new Error(l$B);return t}))}function g$k(i,s,u,l={},y={}){const c="string"==typeof i?U$s(i):i,d=s.geometry?[s.geometry]:[];return l.responseType="pbf"===u?"array-buffer":"json",v$a(d,null,l).then((n=>{const i=n&&n[0];r$1K(i)&&((s=s.clone()).geometry=i);const o=t$t({...c.query,f:u,...y,...m$w(s,y)});return E$v(D$v(c.path,"query"),{...l,query:{...o,...l.query}})}))}

const query = /*#__PURE__*/Object.freeze({
  __proto__: null,
  executeQuery: y$i,
  executeQueryForCount: p$F,
  executeQueryForExtent: S$a,
  executeQueryForIds: f$g,
  executeQueryPBF: c$P,
  executeQueryPBFBuffer: d$t,
  queryToQueryStringParameters: m$w,
  runQuery: g$k
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function n$W(n,s,m){const p=e$t(n);return p$F(p,b$q.from(s),{...m}).then((o=>o.data.count))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function m$v(m,n,s){const p=e$t(m);return S$a(p,b$q.from(n),{...s}).then((t=>({count:t.data.count,extent:M$A.fromJSON(t.data.extent)})))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function s$E(s,e,m){const n=e$t(s);return f$g(n,b$q.from(e),{...m}).then((o=>o.data.objectIds))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function s$D(r,t,e){const s=await a$Q(r,t,e);return g$E.fromJSON(s)}async function a$Q(o,s,a){const n=e$t(o),i={...a},p=b$q.from(s),{data:u}=await y$i(n,p,p.sourceSpatialReference,i);return u}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function h$r(t,e){return t?e?4:3:e?3:2}const a$P=s$2n.getLogger("esri.tasks.support.optimizedFeatureSet"),g$j={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},d$s=(t,e,n,o,r,s)=>{t[n]=r,t[n+1]=s;},m$u=(t,e,n,o,r,s)=>{t[n]=r,t[n+1]=s,t[n+2]=e[o+2];},y$h=(t,e,n,o,r,s)=>{t[n]=r,t[n+1]=s,t[n+2]=e[o+3];},p$E=(t,e,n,o,r,s)=>{t[n]=r,t[n+1]=s,t[n+2]=e[o+2],t[n+3]=e[o+3];};function I$7(t,e,n,o){if(t){if(n)return e&&o?p$E:m$u;if(e&&o)return y$h}else if(e&&o)return m$u;return d$s}function b$9({scale:t,translate:e},n){return Math.round((n-e[0])/t[0])}function M$4({scale:t,translate:e},n){return Math.round((e[1]-n)/t[1])}function w$a({scale:t,translate:e},n){return n*t[0]+e[0]}function N$5({scale:t,translate:e},n){return e[1]-n*t[1]}function G$4(t,e,n){return t?e?n?k$5(t):P$7(t):n?Z$3(t):T$6(t):null}function T$6(t){const e=t.coords;return {x:e[0],y:e[1]}}function F$3(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function P$7(t){const e=t.coords;return {x:e[0],y:e[1],z:e[2]}}function x$6(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function Z$3(t){const e=t.coords;return {x:e[0],y:e[1],m:e[2]}}function j$6(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function k$5(t){const e=t.coords;return {x:e[0],y:e[1],z:e[2],m:e[3]}}function E$6(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function z$4(t,e,n,r){let s=T$6;n&&r?s=k$5:n?s=P$7:r&&(s=Z$3);for(const c of e){const{geometry:e,attributes:n}=c,r=r$1K(e)?s(e):null;t.push({attributes:n,geometry:r});}return t}function S$9(t,e){return t&&e?E$6:t?x$6:e?j$6:F$3}function v$9(t,e,n,o,r){const s=S$9(n,o);for(const c of e){const{geometry:e,attributes:n}=c;let o;e&&(o=s(new t$s,e)),t.push(new s$F(o,n,null,n[r]));}return t}function Y$3(t,e,n,o){for(const r of e){const{geometry:e,attributes:s}=r;let c;e&&(c=_$a(e,n,o)),t.push({attributes:s,geometry:c});}return t}function _$a(t,e,o){if(t$1T(t))return null;const r=h$r(e,o),s=[];for(let n=0;n<t.coords.length;n+=r){const e=[];for(let o=0;o<r;o++)e.push(t.coords[n+o]);s.push(e);}return e?o?{points:s,hasZ:e,hasM:o}:{points:s,hasZ:e}:o?{points:s,hasM:o}:{points:s}}function O$5(t,e,n,o,r){const s=h$r(n,o);for(const c of e){const e=c.geometry,n=c.attributes;let o;e&&(o=A$2(new t$s,e,s)),t.push(new s$F(o,n,null,n[r]));}return t}function A$2(t,e,n=h$r(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const o=t.coords;let r=0;for(const s of e.points)for(let t=0;t<n;t++)o[r++]=s[t];return t}function L$6(t,e,n,r){for(const s of e){const{geometry:e,attributes:c}=s;let l;r$1K(e)&&(l=U$7(e,n,r)),t.push({attributes:c,geometry:l});}return t}function U$7(t,e,n){if(!t)return null;const o=h$r(e,n),{coords:r,lengths:s}=t,c=[];let l=0;for(const u of s){const t=[];for(let e=0;e<u;e++){const e=[];for(let t=0;t<o;t++)e.push(r[l++]);t.push(e);}c.push(t);}return e?n?{paths:c,hasZ:e,hasM:n}:{paths:c,hasZ:e}:n?{paths:c,hasM:n}:{paths:c}}function q$6(t,e,n,o,r){const s=h$r(n,o);for(const c of e){const e=c.geometry,n=c.attributes;let o;e&&(o=$$5(new t$s,e,s)),t.push(new s$F(o,n,null,n[r]));}return t}function $$5(t,e,n=h$r(e.hasZ,e.hasM)){const{lengths:o,coords:r}=t;let s=0;for(const c of e.paths){for(const t of c)for(let e=0;e<n;e++)r[s++]=t[e];o.push(c.length);}return t}function R$5(t,e,n,r){for(const s of e){const{geometry:e,attributes:c,centroid:l}=s;let u;if(r$1K(e)&&(u=C$6(e,n,r)),l){const e=T$6(l);t.push({attributes:c,centroid:e,geometry:u});}else t.push({attributes:c,geometry:u});}return t}function C$6(t,e,n){if(!t)return null;const o=h$r(e,n),{coords:r,lengths:s}=t,c=[];let l=0;for(const u of s){const t=[];for(let e=0;e<u;e++){const e=[];for(let t=0;t<o;t++)e.push(r[l++]);t.push(e);}c.push(t);}return e?n?{rings:c,hasZ:e,hasM:n}:{rings:c,hasZ:e}:n?{rings:c,hasM:n}:{rings:c}}function B$5(t,e,n,r,s){for(const c of e){const e=c.geometry,l=c.centroid,i=c.attributes;let h;e&&(h=D$6(new t$s,e,n,r)),r$1K(l)?t.push(new s$F(h,i,F$3(new t$s,l),i[s])):t.push(new s$F(h,i,null,i[s]));}return t}function D$6(t,e,n=e.hasZ,o=e.hasM){return H$2(t,e.rings,n,o),t}function H$2(t,e,n,o){const r=h$r(n,o),{lengths:s,coords:c}=t;let l=0;s.length=c.length=0;for(const u of e){for(const t of u)for(let e=0;e<r;e++)c[l++]=t[e];s.push(u.length);}return t}const J$1=[],K$3=[];function Q$3(t,e,n,o,r){J$1[0]=t;const[s]=W$4(K$3,J$1,e,n,o,r);return J$1.length=K$3.length=0,s}function W$4(e,n,o,r,s,c){if(e.length=0,!o){for(const t of n){const n=t.attributes[c];e.push(new s$F(null,t.attributes,null,n));}return e}switch(o){case"esriGeometryPoint":return v$9(e,n,r,s,c);case"esriGeometryMultipoint":return O$5(e,n,r,s,c);case"esriGeometryPolyline":return q$6(e,n,r,s,c);case"esriGeometryPolygon":return B$5(e,n,r,s,c);default:a$P.error("convertToFeatureSet:unknown-geometry",new s$2l(`Unable to parse unknown geometry type '${o}'`)),e.length=0;}return e}function X$3(e,n,o,r,s,c){const l=e.length;switch(o){case"esriGeometryPoint":v$9(e,n,r,s,c);break;case"esriGeometryMultipoint":O$5(e,n,r,s,c);break;case"esriGeometryPolyline":q$6(e,n,r,s,c);break;case"esriGeometryPolygon":B$5(e,n,r,s,c);break;default:a$P.error("convertToFeatureSet:unknown-geometry",new s$2l(`Unable to parse unknown geometry type '${o}'`));}for(let t=0;t<n.length;t++)e[t+l].geometryType=o,e[t+l].insertAfter=n[t].insertAfter,e[t+l].groupId=n[t].groupId;return e}function tt$1(t,e,n,o){K$3[0]=t,rt$1(J$1,K$3,e,n,o);const r=J$1[0];return J$1.length=K$3.length=0,r}function et$1(e,o,u){if(t$1T(e))return null;const i=new t$s;if("hasZ"in e&&null==o&&(o=e.hasZ),"hasM"in e&&null==u&&(u=e.hasM),l$1R(e)){return S$9(null!=o?o:null!=e.z,null!=u?u:null!=e.m)(i,e)}return c$2w(e)?D$6(i,e,o,u):y$17(e)?$$5(i,e,h$r(o,u)):f$16(e)?A$2(i,e,h$r(o,u)):void a$P.error("convertFromGeometry:unknown-geometry",new s$2l(`Unable to parse unknown geometry type '${e}'`))}function nt(e,o,r,s){const c=e&&("coords"in e?e:e.geometry);if(t$1T(c))return null;switch(o){case"esriGeometryPoint":{let t=T$6;return r&&s?t=k$5:r?t=P$7:s&&(t=Z$3),t(c)}case"esriGeometryMultipoint":return _$a(c,r,s);case"esriGeometryPolyline":return U$7(c,r,s);case"esriGeometryPolygon":return C$6(c,r,s);default:return void a$P.error("convertToGeometry:unknown-geometry",new s$2l(`Unable to parse unknown geometry type '${o}'`))}}function ot$1(t,e){for(const n of e)t.push({attributes:n.attributes});return t}function rt$1(e,o,r,s,c){if(e.length=0,t$1T(r))return ot$1(e,o);switch(r){case"esriGeometryPoint":return z$4(e,o,s,c);case"esriGeometryMultipoint":return Y$3(e,o,s,c);case"esriGeometryPolyline":return L$6(e,o,s,c);case"esriGeometryPolygon":return R$5(e,o,s,c);default:a$P.error("convertToFeatureSet:unknown-geometry",new s$2l(`Unable to parse unknown geometry type '${r}'`));}return e}function st$1(t){const{objectIdFieldName:e,spatialReference:n,transform:o,fields:r,hasM:s,hasZ:c,features:l,geometryType:u,exceededTransferLimit:i,uniqueIdField:f,queryGeometry:h,queryGeometryType:a}=t,g={features:rt$1([],l,u,c,s),fields:r,geometryType:u,objectIdFieldName:e,spatialReference:n,uniqueIdField:f,queryGeometry:nt(h,a,!1,!1)};return o&&(g.transform=o),i&&(g.exceededTransferLimit=i),s&&(g.hasM=s),c&&(g.hasZ=c),g}function ct$1(e,n){const o=new e$r,{hasM:r,hasZ:s,features:c,objectIdFieldName:l,spatialReference:u,geometryType:f,exceededTransferLimit:h,transform:g,fields:d}=e;return d&&(o.fields=d),o.geometryType=f,o.objectIdFieldName=l||n,o.spatialReference=u,o.objectIdFieldName?(c&&W$4(o.features,c,f,s,r,o.objectIdFieldName),h&&(o.exceededTransferLimit=h),r&&(o.hasM=r),s&&(o.hasZ=s),g&&(o.transform=g),o):(a$P.error(new s$2l("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),o)}function lt$1(t){const{transform:e,features:n,hasM:r,hasZ:s}=t;if(!e)return t;for(const c of n)r$1K(c.geometry)&&mt$1(c.geometry,c.geometry,r,s,e),c.centroid&&mt$1(c.centroid,c.centroid,r,s,e);return t.transform=null,t}function ut$1(t,e){const{geometryType:n,features:o,hasM:r,hasZ:s}=e;if(!t)return e;for(let c=0;c<o.length;c++){const e=o[c],l=e.weakClone();l.geometry=new t$s,it$1(l.geometry,e.geometry,r,s,n,t),e.centroid&&(l.centroid=new t$s,it$1(l.centroid,e.centroid,r,s,"esriGeometryPoint",t)),o[c]=l;}return e.transform=t,e}function it$1(t,e,o,r,s,c,l=o,u=r){if(t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0),t$1T(e)||!e.coords.length)return null;const i=g$j[s],{coords:f,lengths:a}=e,d=h$r(o,r),m=h$r(o&&l,r&&u),y=I$7(o,r,l,u);if(!a.length)return y(t.coords,f,0,0,b$9(c,f[0]),M$4(c,f[1])),t.lengths.length&&(t.lengths.length=0),t.coords.length=d,t;let p,w,N,G,T=0,F=0,P=F;for(const n of a){if(n<i)continue;let e=0;F=P,N=p=b$9(c,f[T]),G=w=M$4(c,f[T+1]),y(t.coords,f,F,T,N,G),e++,T+=d,F+=m;for(let o=1;o<n;o++,T+=d)N=b$9(c,f[T]),G=M$4(c,f[T+1]),N===p&&G===w||(y(t.coords,f,F,T,N-p,G-w),F+=m,e++,p=N,w=G);e>=i&&(t.lengths.push(e),P=F);}return t.coords.length=P,t.coords.length?t:null}function ft$1(t,e,n,o,r,s,c=n,l=o){if(t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0),!e||!e.coords.length)return null;const u=g$j[r],{coords:i,lengths:f}=e,a=h$r(n,o),d=h$r(n&&c,o&&l),m=I$7(n,o,c,l);if(!f.length)return m(t.coords,i,0,0,i[0],i[1]),t.lengths.length&&(t.lengths.length=0),t.coords.length=a,t;let y=0;const p=s*s;for(const h of f){if(h<u){y+=h*a;continue}const e=t.coords.length/d,n=y,o=y+(h-1)*a;m(t.coords,i,t.coords.length,n,i[n],i[n+1]),at$1(t.coords,i,a,p,m,n,o),m(t.coords,i,t.coords.length,o,i[o],i[o+1]);const r=t.coords.length/d-e;r>=u?t.lengths.push(r):t.coords.length=e*d,y+=h*a;}return t.coords.length?t:null}function ht$1(t,e,n,o){const r=t[e],s=t[e+1],c=t[n],l=t[n+1],u=t[o],i=t[o+1];let f=c,h=l,a=u-f,g=i-h;if(0!==a||0!==g){const t=((r-f)*a+(s-h)*g)/(a*a+g*g);t>1?(f=u,h=i):t>0&&(f+=a*t,h+=g*t);}return a=r-f,g=s-h,a*a+g*g}function at$1(t,e,n,o,r,s,c){let l,u=o,i=0;for(let f=s+n;f<c;f+=n)l=ht$1(e,f,s,c),l>u&&(i=f,u=l);u>o&&(i-s>n&&at$1(t,e,n,o,r,s,i),r(t,e,t.length,i,e[i],e[i+1]),c-i>n&&at$1(t,e,n,o,r,i,c));}function gt$1(t,e,o,r){if(t$1T(e)||!e.coords||!e.coords.length)return null;const s=h$r(o,r);let c=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(e&&e.coords){const t=e.coords;for(let e=0;e<t.length;e+=s){const n=t[e],o=t[e+1];c=Math.min(c,n),u=Math.max(u,n),l=Math.min(l,o),i=Math.max(i,o);}}return t[0]=c,t[1]=l,t[2]=u,t[3]=i,t}function mt$1(t,e,n,o,r){const{coords:s,lengths:c}=e,l=n?o?p$E:m$u:o?m$u:d$s,u=h$r(n,o);if(!s.length)return t!==e&&(t.lengths.length=0,t.coords.length=0),t;if(!c.length)return l(t.coords,s,0,0,w$a(r,s[0]),N$5(r,s[1])),t!==e&&(t.lengths.length=0,t.coords.length=u),t;const[i,f]=r.scale;let a=0;for(let h=0;h<c.length;h++){const e=c[h];t.lengths[h]=e;let n=w$a(r,s[a]),o=N$5(r,s[a+1]);l(t.coords,s,a,a,n,o),a+=u;for(let r=1;r<e;r++,a+=u)n+=s[a]*i,o-=s[a+1]*f,l(t.coords,s,a,a,n,o);}return t!==e&&(t.lengths.length=c.length,t.coords.length=s.length),t}function yt$1(t,e,n,o,r,s){const c=h$r(n,o),l=I$7(n,o,r,s),u=e.coords;t.coords.length=0,t.lengths.length=0,t.lengths.push(...e.lengths);for(let i=0;i<u.length;i+=c)l(t.coords,u,t.coords.length,i,u[i],u[i+1]);return t}function It(t,e,n,o){let r=0,s=t[o*e],c=t[o*(e+1)];for(let l=1;l<n;l++){const n=s+t[o*(e+l)],u=c+t[o*(e+l)+1],i=(n-s)*(u+c);s=n,c=u,r+=i;}return .5*r}function bt$1(t,e){const{coords:n,lengths:o}=t;let r=0,s=0;for(let c=0;c<o.length;c++){s+=It(n,r,o[c],e),r+=c;}return Math.abs(s)}function wt$1(t,e){if(t$1T(t))return null;const o=t.clone(),r=t.coords,s=t.lengths;let c=0;for(let n=0;n<s.length;n++){const t=s[n];let l=r[e*c],u=r[e*c+1];for(let n=1;n<t;n++){const t=l+r[e*(c+n)],s=u+r[e*(c+n)+1];o.coords[e*(c+n)]=t,o.coords[e*(c+n)+1]=s,l=t,u=s;}c+=t;}return o}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$J(e,t){return t}function n$V(e,t,r,s){switch(r){case 0:return d$r(e,t+s,0);case 1:return "lowerLeft"===e.originPosition?d$r(e,t+s,1):l$A(e,t+s,1)}}function a$O(e,t,r,s){return 2===r?d$r(e,t,2):n$V(e,t,r,s)}function h$q(e,t,r,s){return 2===r?d$r(e,t,3):n$V(e,t,r,s)}function u$v(e,t,r,s){return 3===r?d$r(e,t,3):a$O(e,t,r,s)}function d$r({translate:e,scale:t},r,s){return e[s]+r*t[s]}function l$A({translate:e,scale:t},r,s){return e[s]-r*t[s]}class c$O{constructor(e){this.options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=i$J,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){};}createFeatureResult(){return {fields:[],features:[]}}finishFeatureResult(e){if(this.options.applyTransform&&(e.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,!e.hasZ)return;const r=t$Q(e.geometryType,this.options.sourceSpatialReference,e.spatialReference);if(!t$1T(r))for(const t of e.features)r(t.geometry);}createSpatialReference(){return {}}addField(e,t){e.fields.push(t);const r=e.fields.map((e=>e.name));this.AttributesConstructor=function(){for(const e of r)this[e]=null;};}addFeature(e,t){e.features.push(t);}prepareFeatures(t){switch(this.transform=t.transform,this.options.applyTransform&&t.transform&&(this.applyTransform=this.deriveApplyTransform(t)),this.vertexDimension=2,t.hasZ&&this.vertexDimension++,t.hasM&&this.vertexDimension++,t.geometryType){case"esriGeometryPoint":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case"esriGeometryPolygon":this.addCoordinate=(e,t,r)=>this.addCoordinatePolygon(e,t,r),this.createGeometry=e=>this.createPolygonGeometry(e);break;case"esriGeometryPolyline":this.addCoordinate=(e,t,r)=>this.addCoordinatePolyline(e,t,r),this.createGeometry=e=>this.createPolylineGeometry(e);break;case"esriGeometryMultipoint":this.addCoordinate=(e,t,r)=>this.addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this.createMultipointGeometry(e);break;}}createFeature(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this.AttributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t);}addQueryGeometry(e,t){const{queryGeometry:o,queryGeometryType:i}=t,n=mt$1(o.clone(),o,!1,!1,this.transform),a=nt(n,i,!1,!1);e.queryGeometryType=i,e.queryGeometry={...a};}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){switch(t=this.applyTransform(this.transform,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:"z"in e?e.z=t:e.m=t;break;case 3:e.m=t;}}transformPathLikeValue(e,t){let r=0;return t<=1&&(r=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,r)}addCoordinatePolyline(e,t,r){this.dehydratedAddPointsCoordinate(e.paths,t,r);}addCoordinatePolygon(e,t,r){this.dehydratedAddPointsCoordinate(e.rings,t,r);}addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const s=this.transformPathLikeValue(t,r);e.points[e.points.length-1].push(s);}createPolygonGeometry(e){return {rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}createPolylineGeometry(e){return {paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}createMultipointGeometry(e){return {points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}dehydratedAddPointsCoordinate(e,t,r){0===r&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);const s=this.transformPathLikeValue(t,r),o=e[e.length-1];0===r&&(this.coordinateBufferPtr=0,this.coordinateBuffer=new Array(this.vertexDimension),o.push(this.coordinateBuffer)),this.coordinateBuffer[this.coordinateBufferPtr++]=s;}deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?u$v:t?a$O:r?h$q:n$V}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function n$U(o,s,n){const p=e$t(o),i={...n},u=b$q.from(s),m=!u.quantizationParameters,{data:f}=await c$P(p,u,new c$O({sourceSpatialReference:u.sourceSpatialReference,applyTransform:m}),i);return f}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function o$r(e,t){const o=e.toJSON();return o.objectIds&&(o.objectIds=o.objectIds.join(",")),o.orderByFields&&(o.orderByFields=o.orderByFields.join(",")),!o.outFields||null!=t&&t.returnCountOnly?delete o.outFields:-1!==o.outFields.indexOf("*")?o.outFields="*":o.outFields=o.outFields.join(","),o.outSpatialReference&&(o.outSR=o.outSR.wkid||JSON.stringify(o.outSR.toJSON()),delete o.outSpatialReference),o.dynamicDataSource&&(o.layer=JSON.stringify({source:o.dynamicDataSource}),delete o.dynamicDataSource),o}async function r$q(e,t,o){const r=await s$C(e,t,o),n=r.data,a=n.geometryType,d=n.spatialReference,i={};for(const s of n.relatedRecordGroups){const e={fields:void 0,objectIdFieldName:void 0,geometryType:a,spatialReference:d,hasZ:!!n.hasZ,hasM:!!n.hasM,features:s.relatedRecords};if(null!=s.objectId)i[s.objectId]=e;else for(const t in s)s.hasOwnProperty(t)&&"relatedRecords"!==t&&(i[s[t]]=e);}return {...r,data:i}}async function n$T(e,t,o){const r=await s$C(e,t,o,{returnCountOnly:!0}),n=r.data,a={};for(const s of n.relatedRecordGroups)null!=s.objectId&&(a[s.objectId]=s.count);return {...r,data:a}}async function s$C(r,n,s={},a){const d=t$t({...r.query,f:"json",...a,...o$r(n,a)});return E$v(r.path+"/queryRelatedRecords",{...s,query:{...s.query,...d}})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function n$S(e,n,u){n=l$Y.from(n);const a=e$t(e);return r$q(a,n,u).then((t=>{const r=t.data,e={};return Object.keys(r).forEach((t=>e[t]=g$E.fromJSON(r[t]))),e}))}async function u$u(r,o,n){o=l$Y.from(o);const u=e$t(r);return n$T(u,o,{...n}).then((t=>t.data))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u$t="Layer does not support extent calculation.";function y$g(t,r){var n,i;const s=t.geometry,l=t.toJSON(),u=l;if(r$1K(s)&&(u.geometry=JSON.stringify(s),u.geometryType=v$F(s),u.inSR=s.spatialReference.wkid||JSON.stringify(s.spatialReference)),null!=(n=l.topFilter)&&n.groupByFields&&(u.topFilter.groupByFields=l.topFilter.groupByFields.join(",")),null!=(i=l.topFilter)&&i.orderByFields&&(u.topFilter.orderByFields=l.topFilter.orderByFields.join(",")),l.topFilter&&(u.topFilter=JSON.stringify(u.topFilter)),l.objectIds&&(u.objectIds=l.objectIds.join(",")),l.orderByFields&&(u.orderByFields=l.orderByFields.join(",")),l.outFields&&!(null!=r&&r.returnCountOnly||null!=r&&r.returnExtentOnly||null!=r&&r.returnIdsOnly)?-1!==l.outFields.indexOf("*")?u.outFields="*":u.outFields=l.outFields.join(","):delete u.outFields,l.outSR?u.outSR=l.outSR.wkid||JSON.stringify(l.outSR):s&&l.returnGeometry&&(u.outSR=u.inSR),l.returnGeometry&&delete l.returnGeometry,l.timeExtent){const t=l.timeExtent,{start:e,end:r}=t;null==e&&null==r||(u.time=e===r?e:`${null==e?"null":e},${null==r?"null":r}`),delete l.timeExtent;}return u}async function m$t(t,e,r,n){const o=await c$N(t,e,"json",n);return r$O(e,r,o.data),o}async function d$q(t,r,n){return r$1K(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):c$N(t,r,"json",n,{returnIdsOnly:!0})}async function p$D(t,r,n){return r$1K(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):c$N(t,r,"json",n,{returnExtentOnly:!0,returnCountOnly:!0}).then((t=>{const e=t.data;if(e.hasOwnProperty("extent"))return t;if(e.features)throw new Error(u$t);if(e.hasOwnProperty("count"))throw new Error(u$t);return t}))}function a$N(t,r,n){return r$1K(r.timeExtent)&&r.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):c$N(t,r,"json",n,{returnIdsOnly:!0,returnCountOnly:!0})}function c$N(o,s,u,m={},d={}){const p="string"==typeof o?U$s(o):o,a=s.geometry?[s.geometry]:[];return m.responseType="pbf"===u?"array-buffer":"json",v$a(a,null,m).then((n=>{const o=n&&n[0];r$1K(o)&&((s=s.clone()).geometry=o);const i=t$t({...p.query,f:u,...d,...y$g(s,d)});return E$v(D$v(p.path,"queryTopFeatures"),{...m,query:{...i,...m.query}})}))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function s$B(s,p,u,a){const m=e$t(s),i={...a},{data:f}=await m$t(m,S$i.from(p),u,i);return g$E.fromJSON(f)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function s$A(s,e,p){const a=e$t(s);return (await d$q(a,S$i.from(e),{...p})).data.objectIds}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function m$s(m,s,n){const p=e$t(m),a=await p$D(p,S$i.from(s),{...n});return {count:a.data.count,extent:M$A.fromJSON(a.data.extent)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function s$z(s,e,p){const u=e$t(s);return (await a$N(u,S$i.from(e),{...p})).data.count}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$I=class extends p$3a{constructor(...r){super(...r),this.requestOptions=null,this.url=null;}normalizeCtorArgs(r,s){return "string"!=typeof r?r:{url:r,...s}}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(r){return r?U$s(r):null}_encode(r,s,t){const o={};for(const e in r){if("declaredClass"===e)continue;const i=r[e];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){o[e]=[];for(let r=0;r<i.length;r++)o[e][r]=this._encode(i[r]);}else if("object"==typeof i)if(i.toJSON){const r=i.toJSON(t&&t[e]);o[e]=s?r:JSON.stringify(r);}else o[e]=s?i:JSON.stringify(i);else o[e]=i;}return o}};e$25([d$1T({readOnly:!0})],i$I.prototype,"parsedUrl",null),e$25([d$1T()],i$I.prototype,"requestOptions",void 0),e$25([d$1T({type:String})],i$I.prototype,"url",void 0),i$I=e$25([i$2z("esri.tasks.Task")],i$I);const l$z=i$I;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let g$i=class extends l$z{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.format="json",this.gdbVersion=null,this.infoFor3D=null,this.sourceSpatialReference=null;}execute(e,t){return this.executeJSON(e,t).then((r=>this.featureSetFromJSON(e,r,t)))}async executeJSON(e,t){var o;const s={...this.requestOptions,...t},i=this._normalizeQuery(e),u=null!=(null==(o=e.outStatistics)?void 0:o[0]),n=s$2r("featurelayer-pbf-statistics"),a=!u||n;let c;if("pbf"===this.format&&a)try{c=await n$U(this.url,i,s);}catch(p){if("query:parsing-pbf"!==p.name)throw p;this.format="json";}return "json"!==this.format&&a||(c=await a$Q(this.url,i,s)),this._normalizeFields(c.fields),c}async featureSetFromJSON(e,t,r){if(!(this._queryIs3DObjectFormat(e)&&r$1K(this.infoFor3D)&&t.features&&t.features.length))return g$E.fromJSON(t);const{meshFeatureSetFromJSON:s}=await P$t(import('./meshFeatureSet.js').then(function (n) { return n.a; }),r);return s(e,this.infoFor3D,t)}executeForCount(e,t){const r={...this.requestOptions,...t},o=this._normalizeQuery(e);return n$W(this.url,o,r)}executeForExtent(e,t){const r={...this.requestOptions,...t},o=this._normalizeQuery(e);return m$v(this.url,o,r)}executeForIds(e,t){const r={...this.requestOptions,...t},o=this._normalizeQuery(e);return s$E(this.url,o,r)}executeRelationshipQuery(e,t){e=l$Y.from(e);const r={...this.requestOptions,...t};return (this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),n$S(this.url,e,r)}executeRelationshipQueryForCount(e,t){e=l$Y.from(e);const r={...this.requestOptions,...t};return (this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),u$u(this.url,e,r)}executeAttachmentQuery(e,t){const r={...this.requestOptions,...t};return a$U(this.url,e,r)}executeTopFeaturesQuery(e,t){const r={...this.requestOptions,...t};return s$B(this.parsedUrl,e,this.sourceSpatialReference,r)}executeForTopIds(e,t){const r={...this.requestOptions,...t};return s$A(this.parsedUrl,e,r)}executeForTopExtents(e,t){const r={...this.requestOptions,...t};return m$s(this.parsedUrl,e,r)}executeForTopCount(e,t){const r={...this.requestOptions,...t};return s$z(this.parsedUrl,e,r)}_normalizeQuery(e){let r=b$q.from(e);if(r.sourceSpatialReference=r.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(r=r===e?r.clone():r,r.gdbVersion=e.gdbVersion||this.gdbVersion,r.dynamicDataSource=e.dynamicDataSource?K$7.from(e.dynamicDataSource):this.dynamicDataSource),r$1K(this.infoFor3D)&&this._queryIs3DObjectFormat(e)){r=r===e?r.clone():r,r.formatOf3DObjects=null;for(const e of this.infoFor3D.queryFormats){if("3D_glb"===e.id){r.formatOf3DObjects=e.id;break}"3D_gltf"!==e.id||r.formatOf3DObjects||(r.formatOf3DObjects=e.id);}if(!r.formatOf3DObjects)throw new s$2l("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(t$1T(r.outFields)||!r.outFields.includes("*")){r=r===e?r.clone():r,t$1T(r.outFields)&&(r.outFields=[]);const{originX:t,originY:o,originZ:i,translationX:u,translationY:n,translationZ:a,scaleX:c,scaleY:p,scaleZ:m,rotationX:f,rotationY:l,rotationZ:h,rotationDeg:d}=this.infoFor3D.transformFieldRoles;r.outFields.push(t,o,i,u,n,a,c,p,m,f,l,h,d);}}return r}_normalizeFields(e){if(r$1K(this.fieldsIndex)&&r$1K(e))for(const t of e){const e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON());}}_queryIs3DObjectFormat(e){return r$1K(this.infoFor3D)&&e.returnGeometry&&"xyFootprint"!==e.multipatchOption&&!e.outStatistics}};e$25([d$1T({type:K$7})],g$i.prototype,"dynamicDataSource",void 0),e$25([d$1T()],g$i.prototype,"fieldsIndex",void 0),e$25([d$1T()],g$i.prototype,"format",void 0),e$25([d$1T()],g$i.prototype,"gdbVersion",void 0),e$25([d$1T()],g$i.prototype,"infoFor3D",void 0),e$25([d$1T()],g$i.prototype,"sourceSpatialReference",void 0),g$i=e$25([i$2z("esri.tasks.QueryTask")],g$i);const Q$2=g$i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$M="esri.widgets.Feature.support.relatedFeatureUtils",d$p=s$2n.getLogger(c$M),f$f=new Map;function p$C(e){if(!ae$1(e))return null;const[t,r]=e.split("/").slice(1);return {layerId:t,fieldName:r}}function m$r(e,t){if(!t.relationships)return null;let r=null;const{relationships:s}=t;return s.some((t=>t.id===parseInt(e,10)&&(r=t,!0))),r}function y$f({originRelationship:e,relationships:t,layerId:r}){let s;return t&&t.some((t=>(`${t.relatedTableId}`===r&&t.id===e.id&&(s=t),!!s))),s}function F$2(e,t){const r=t.toLowerCase();for(const s in e)if(s.toLowerCase()===r)return e[s];return null}function h$p(e,t){const r=m$r(e,t);if(!r)return;const s=`${t.url}/${r.relatedTableId}`;return {url:s,queryTask:new Q$2({url:s,sourceSpatialReference:t.spatialReference}),relation:r,relatedFields:[],outStatistics:[]}}function I$6(e,t){if(!t)return;if(!e)return;const{features:r,statsFeatures:s}=e,i=r&&r.value;t.relatedFeatures=i?i.features:[];const o=s&&s.value;t.relatedStatsFeatures=o?o.features:[];}function w$9(e,t,r,s){const i=new l$Y;return i.outFields=["*"],i.relationshipId="number"==typeof t.id?t.id:parseInt(t.id,10),i.objectIds=[e.attributes[r.objectIdField]],r.queryRelatedFeatures(i,s)}function b$8(e,t,r){let s=0;const i=[];for(;s<t.length;)i.push(`${e} IN (${t.slice(s,r+s)})`),s+=r;return i.join(" OR ")}async function j$5(e,t,r,n){const a=r.layerId.toString(),{layerInfo:l,queryTask:u,relation:c,relatedFields:d,outStatistics:f}=t,p=y$f({originRelationship:c,relationships:l.relationships,layerId:a});if(p.relationshipTableId&&p.keyFieldInRelationshipTable){const t=(await w$9(e,p,r,n))[e.attributes[r.objectIdField]];if(!t)return null;const i=t.features.map((e=>e.attributes[l.objectIdField]));if((null==f?void 0:f.length)>0&&l.supportsStatistics){const e=new b$q;e.where=b$8(l.objectIdField,i,1e3),e.outFields=d,e.outStatistics=f;const r={features:Promise.resolve(t),statsFeatures:u.execute(e)};return T$s(r)}}const m=null==p?void 0:p.keyField;if(m){const r=B$c(q$5(l.fields,m)),a=F$2(e.attributes,c.keyField),d=r?`${m}=${a}`:`${m}='${a}'`,f=u.execute(new b$q({where:d,outFields:t.relatedFields}),n),p=t.outStatistics&&t.outStatistics.length>0&&l.supportsStatistics?u.execute(new b$q({where:d,outFields:t.relatedFields,outStatistics:t.outStatistics}),n):null,y={features:f};return p&&(y.statsFeatures=p),T$s(y)}return null}function g$h(t,r){return E$v(t,{query:{f:"json"},signal:r&&r.signal})}function S$8({relatedInfos:e,layer:r},i){const o={};return e.forEach(((e,s)=>{const{relation:n}=e;if(!n){const e=new s$2l("relation-required","A relation is required on a layer to retrieve related records.");throw d$p.error(e),e}const{relatedTableId:a}=n;if("number"!=typeof a){const e=new s$2l("A related table ID is required on a layer to retrieve related records.");throw d$p.error(e),e}const l=`${r.url}/${a}`,u=f$f.get(l),c=u||g$h(l,i);u||f$f.set(l,c),o[s]=c;})),T$s(o)}function T$5({graphic:e,relatedInfos:t,layer:r},i){const o={};return t.forEach(((t,s)=>{t.layerInfo&&(o[s]=j$5(e,t,r,i));})),T$s(o)}function $$4({relatedInfo:e,fieldName:t,fieldInfo:r}){if(e.relatedFields.push(t),r.statisticType){const s=new m$W({statisticType:r.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(s);}}function q$5(e,t){if(null!=e){t=t.toLowerCase();for(const r of e)if(r&&r.name.toLowerCase()===t)return r}return null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let y$e=class extends p$3a{constructor(t){super(t),this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null;}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(t){this._setContentElementMedia(t);}next(){this._pageContentElementMedia(1);}previous(){this._pageContentElementMedia(-1);}_setContentElementMedia(t){const{formattedMediaInfoCount:e}=this,o=(t+e)%e;this.activeMediaInfoIndex=o;}_pageContentElementMedia(t){const{activeMediaInfoIndex:e}=this,o=e+t;this._setContentElementMedia(o);}_formatMediaInfos(){const{attributes:t,mediaInfos:e,formattedAttributes:o,expressionAttributes:i,fieldInfoMap:r,layer:a}=this;return null==e?void 0:e.map((e=>{if(!e)return null;if(e.title=$$6({attributes:t,fieldInfoMap:r,globalAttributes:o,expressionAttributes:i,layer:a,text:e.title}),e.caption=$$6({attributes:t,fieldInfoMap:r,globalAttributes:o,expressionAttributes:i,layer:a,text:e.caption}),e.altText=$$6({attributes:t,fieldInfoMap:r,globalAttributes:o,expressionAttributes:i,layer:a,text:e.altText}),"image"===e.type){const{value:t}=e;return this._setImageValue({value:t,formattedAttributes:o,layer:a}),e.value.sourceURL?e:void 0}if("pie-chart"===e.type||"line-chart"===e.type||"column-chart"===e.type||"bar-chart"===e.type){const{value:i}=e;return this._setChartValue({value:i,chartType:e.type,attributes:t,formattedAttributes:o,layer:a}),e}return null})).filter(Boolean)}_setImageValue(t){const{fieldInfoMap:e}=this,{value:o,formattedAttributes:i,layer:r}=t,{linkURL:a,sourceURL:s}=o;if(s){const t=k$7(s,r);o.sourceURL=A$5({formattedAttributes:i,template:t,fieldInfoMap:e});}if(a){const t=k$7(a,r);o.linkURL=A$5({formattedAttributes:i,template:t,fieldInfoMap:e});}}_setChartValue(t){const{value:e,attributes:o,formattedAttributes:i,chartType:r,layer:a}=t,{popupTemplate:s,relatedInfos:l}=this,{fields:n,normalizeField:f}=e;e.fields=L$7(n,a),f&&(e.normalizeField=R$7(f,a));if(!n.some((t=>!!(null!=i[t]||ae$1(t)&&l.size))))return;const m=null==s?void 0:s.fieldInfos;n.forEach((t=>{if(ae$1(t))return void(e.series=[...e.series,...this._getRelatedChartInfos({fieldInfos:m,fieldName:t,formattedAttributes:i,chartType:r,value:e})]);const a=this._getChartOption({value:e,attributes:o,chartType:r,formattedAttributes:i,fieldName:t,fieldInfos:m});e.series.push(a);}));}_getRelatedChartInfos(t){var e;const{fieldInfos:o,fieldName:i,formattedAttributes:r,chartType:a,value:s}=t,l=[],n=p$C(i),{layerId:d,fieldName:p}=n,u=null==(e=this.relatedInfos)?void 0:e.get(d.toString());if(!u)return l;const{relatedFeatures:f,relation:m}=u;if(!m||!f)return l;const{cardinality:c}=m;f.forEach((t=>{const{attributes:e}=t;e&&Object.keys(e).forEach((t=>{t===p&&l.push(this._getChartOption({value:s,attributes:e,formattedAttributes:r,fieldName:i,chartType:a,relatedFieldName:t,fieldInfos:o}));}));}));return "one-to-many"===c||"many-to-many"===c?l:[l[0]]}_getTooltip({label:t,value:e,chartType:o}){return "pie-chart"===o?t:`${t}: ${e}`}_getChartOption(t){var e;const{value:o,attributes:i,formattedAttributes:s,fieldName:l,relatedFieldName:n,fieldInfos:d,chartType:y}=t,{layer:I}=this,{normalizeField:v,tooltipField:b}=o,M=v?ae$1(v)?i[p$C(v).fieldName]:i[v]:null,g=n&&void 0!==i[n]?i[n]:void 0!==i[l]?i[l]:s[l],A=void 0===g?null:g&&M?g/M:g,_=new c$2r({value:A});if(ae$1(l)){const t=p$C(l),e=p$C(b),o=e?e.fieldName:null,r=Z$4(A,{fieldInfos:d,fieldName:n,layer:I,preventPlacesFormatting:!!M}),a=t?t.label||t.fieldName:n,s=o&&void 0!==i[o]?i[o]:a;return _.tooltip=this._getTooltip({label:s,value:r,chartType:y}),_}const x=B$7(d,l),T=R$7(l,I),C=b&&void 0!==s[b]?s[b]:C$7(x||new c$2t({fieldName:T}),null==(e=this.popupTemplate)?void 0:e.expressionInfos),F=s[T];return _.tooltip=this._getTooltip({label:C,value:F,chartType:y}),_}};e$25([d$1T()],y$e.prototype,"activeMediaInfoIndex",void 0),e$25([d$1T({readOnly:!0})],y$e.prototype,"activeMediaInfo",null),e$25([d$1T()],y$e.prototype,"attributes",void 0),e$25([d$1T()],y$e.prototype,"description",void 0),e$25([d$1T()],y$e.prototype,"fieldInfoMap",void 0),e$25([d$1T()],y$e.prototype,"formattedAttributes",void 0),e$25([d$1T()],y$e.prototype,"expressionAttributes",void 0),e$25([d$1T({readOnly:!0})],y$e.prototype,"formattedMediaInfos",null),e$25([d$1T()],y$e.prototype,"layer",void 0),e$25([d$1T({readOnly:!0})],y$e.prototype,"formattedMediaInfoCount",null),e$25([d$1T()],y$e.prototype,"mediaInfos",void 0),e$25([d$1T()],y$e.prototype,"popupTemplate",void 0),e$25([d$1T()],y$e.prototype,"relatedInfos",void 0),e$25([d$1T()],y$e.prototype,"title",void 0),y$e=e$25([i$2z("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],y$e);const I$5=y$e;

var f$e=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],b$7=[].concat(f$e.slice(30,39),f$e.slice(28,30).reverse()),e$q=[{name:"default",colors:b$7},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$R="en-us",h$o=new Map([["ar",()=>import('./ar2.js').then((t=>t.a))],["bs-ba",()=>import('./bs_BA.js').then((t=>t.b))],["ca-es",()=>import('./ca_ES.js').then((t=>t.c))],["cs-cz",()=>import('./cs_CZ.js').then((t=>t.c))],["da-dk",()=>import('./da_DK.js').then((t=>t.d))],["de-de",()=>import('./de_DE.js').then((t=>t.d))],["de-ch",()=>import('./de_CH.js').then((t=>t.d))],["el-gr",()=>import('./el_GR.js').then((t=>t.e))],["en-us",()=>import('./en_US.js').then((t=>t.e))],["en-ca",()=>import('./en_CA.js').then((t=>t.e))],["es-es",()=>import('./es_ES.js').then((t=>t.e))],["et-ee",()=>import('./et_EE.js').then((t=>t.e))],["fi-fi",()=>import('./fi_FI.js').then((t=>t.f))],["fr-fr",()=>import('./fr_FR.js').then((t=>t.f))],["he-il",()=>import('./he_IL.js').then((t=>t.h))],["hr-hr",()=>import('./hr_HR.js').then((t=>t.h))],["hu-hu",()=>import('./hu_HU.js').then((t=>t.h))],["id-id",()=>import('./id_ID.js').then((t=>t.i))],["it-it",()=>import('./it_IT.js').then((t=>t.i))],["ja-jp",()=>import('./ja_JP.js').then((t=>t.j))],["ko-kr",()=>import('./ko_KR.js').then((t=>t.k))],["lt-lt",()=>import('./lt_LT.js').then((t=>t.l))],["lv-lv",()=>import('./lv_LV.js').then((t=>t.l))],["nb-no",()=>import('./nb_NO.js').then((t=>t.n))],["nl-nl",()=>import('./nl_NL.js').then((t=>t.n))],["pl-pl",()=>import('./pl_PL.js').then((t=>t.p))],["pt-br",()=>import('./pt_BR.js').then((t=>t.p))],["pt-pt",()=>import('./pt_PT.js').then((t=>t.p))],["ro-ro",()=>import('./ro_RO.js').then((t=>t.r))],["ru-ru",()=>import('./ru_RU.js').then((t=>t.r))],["sk-sk",()=>import('./sk_SK.js').then((t=>t.s))],["sl-sl",()=>import('./sl_SL.js').then((t=>t.s))],["sr-rs",()=>import('./sr_RS.js').then((t=>t.s))],["sv-se",()=>import('./sv_SE.js').then((t=>t.s))],["th-th",()=>import('./th_TH.js').then((t=>t.t))],["tr-tr",()=>import('./tr_TR.js').then((t=>t.t))],["uk-ua",()=>import('./uk_UA.js').then((t=>t.u))],["vi-vn",()=>import('./vi_VN.js').then((t=>t.v))],["zh-cn",()=>import('./zh_Hans.js').then((t=>t.z))],["zh-hk",()=>import('./zh_Hant.js').then((t=>t.z))],["zh-tw",()=>import('./zh_Hant.js').then((t=>t.z))]]);function e$p(t){const s=t.split("-")[0].toLowerCase();let n=null;for(const e of h$o.keys())if(e.startsWith(s)){n=e;break}return n}function r$p(t){return t?h$o.has(t.toLowerCase())?t.toLowerCase():e$p(t)||n$R:n$R}let o$q,i$H;async function c$L(t=i$2w()){if(t=r$p(t),o$q&&t===i$H)return o$q;o$q=import('./index2.js').then((t=>t.i)),i$H=t;try{const[s,n]=await Promise.all([o$q,h$o.get(i$H)()]);i$H===t&&(s.am4core.options.defaultLocale=n.default),s.am4core.options.suppressWarnings=!0,s.am4core.options.autoDispose=!0;}catch{return o$q=null,i$H=null,null}return o$q}function u$s(s,n="default"){const h=e$q.find((t=>t.name===n));return h?h.colors.map((t=>s.color(t))):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const v$8={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},_$9=.05,I$4=.95,M$3=15;let w$8=class extends z$o{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new I$5,this.messages=null;}initialize(){this._featureElementInfo=new c$U,this.own(i$2x(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],(()=>this._setupMediaRefreshTimer())),i$2x(this,["viewModel.description","viewModel.title"],(()=>this._setupFeatureElementInfo())));}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy();}render(){var e;return n$2g("div",{bind:this,class:v$8.base,onkeyup:this._handleMediaKeyup},null==(e=this._featureElementInfo)?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?n$2g("div",{key:"media-element-container",class:v$8.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel,{value:a,refreshInterval:o,altText:s,title:n,type:l}=e,{sourceURL:c,linkURL:m}=a,u=v$c(m)?"_blank":"_self",h="_blank"===u?"noreferrer":"",p=o?t:null,v=p?p.timestamp:0,_=p?p.sourceURL:c,I=n$2g("img",{alt:s||n,key:`media-${l}-${i}-${r}-${v}`,src:_}),M=m?n$2g("a",{title:n,href:m,rel:h,target:u},I):null;return M||I}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return n$2g("div",{key:`media-${e.type}-${t}-${i}`,bind:this,class:v$8.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?"image"===e.type?this.renderImageMediaInfo(e):-1!==e.type.indexOf("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?n$2g("div",{key:"media-title",class:v$8.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?n$2g("div",{key:"media-caption",class:v$8.mediaItemCaption,innerHTML:e.caption}):null;return n$2g("div",{key:"media-container",class:v$8.mediaItemContainer},n$2g("div",{key:"media-item-container",class:v$8.mediaItem},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t="previous"===e,i=t?this.messages.previous:this.messages.next,r=t?this.classes(v$8.mediaButton,v$8.mediaPrevious):this.classes(v$8.mediaButton,v$8.mediaNext),a=t?this.classes(v$8.mediaIcon,v$8.mediaPreviousIconLTR,v$8.iconLeftTriangleArrow):this.classes(v$8.mediaIcon,v$8.mediaNextIconLTR,v$8.iconRightTriangleArrow),o=t?this.classes(v$8.mediaIcon,v$8.mediaPreviousIconRTL,v$8.iconRightTriangleArrow):this.classes(v$8.mediaIcon,v$8.mediaNextIconRTL,v$8.iconLeftTriangleArrow),s=t?"media-previous":"media-next",n=t?this._previous:this._next;return n$2g("button",{type:"button",key:s,title:i,"aria-label":i,tabIndex:0,class:r,bind:this,onclick:n},n$2g("span",{"aria-hidden":"true",class:a}),n$2g("span",{"aria-hidden":"true",class:o}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t});}_next(){this.viewModel.next();}_previous(){this.viewModel.previous();}async _getChartDependencies(e){const t=await c$L(),{activeMediaInfo:i}=this.viewModel;this._renderChart({chartDiv:e,mediaInfo:i,chartsModule:t});}_handleMediaKeyup(e){const i=i$2L(e);"ArrowLeft"===i&&(e.stopPropagation(),this.viewModel.previous()),"ArrowRight"===i&&(e.stopPropagation(),this.viewModel.next());}_renderChart(e){const{chartsModule:t,chartDiv:i,mediaInfo:r}=e,{value:a,type:o}=r,{am4core:s}=t,n=u$s(s);function l(e){e instanceof s.ColorSet&&n&&(e.list=n);}E$t()&&s.useTheme(t.am4themes_dark),s.useTheme(t.am4themes_animated),s.useTheme(l);const d="pie-chart"===o?this._createPieChart(e):this._createXYChart(e);i.setAttribute("aria-label",r.altText||r.title),d.data=a.series.map((e=>({tooltip:e.tooltip,value:e.value}))).filter((e=>"pie-chart"!==o||e.value>0));}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7});}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:r,am4charts:a}=i,o=r.create(t,a.PieChart);o.rtl=d$1N(this.container);const s=o.series.push(new a.PieSeries);return s.labels.template.disabled=!0,s.ticks.template.disabled=!0,s.dataFields.value="value",s.dataFields.category="tooltip",this._customizeChartTooltip(s.tooltip,r),o}_getMinSeriesValue(e){let t=0;return e.forEach((e=>t=Math.min(e.value,t))),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:a}=r,{am4core:o,am4charts:s}=i,n=e.xAxes.push(new s.CategoryAxis);n.dataFields.category="tooltip",n.renderer.labels.template.disabled=!0,this._customizeChartTooltip(n.tooltip,o),n.tooltip.events.on("sizechanged",(()=>{n.tooltip.dy=-n.tooltip.contentHeight;}));const l=e.yAxes.push(new s.ValueAxis),d=l.renderer.labels.template;l.renderer.minLabelPosition=_$9,l.renderer.maxLabelPosition=I$4,l.min=this._getMinSeriesValue(a.series),this._customizeChartTooltip(l.tooltip,o),d.wrap=!0;const c=e.series.push(new s.ColumnSeries);c.dataFields.valueY="value",c.dataFields.categoryX="tooltip",e.cursor=new s.XYCursor,a.series.length>M$3&&(e.scrollbarX=new o.Scrollbar);}_createBarChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:a}=r,{am4core:o,am4charts:s}=i,n=e.yAxes.push(new s.CategoryAxis);n.dataFields.category="tooltip",n.renderer.inversed=!0,n.renderer.labels.template.disabled=!0,this._customizeChartTooltip(n.tooltip,o),n.tooltip.events.on("sizechanged",(()=>{n.tooltip.dx=n.tooltip.contentWidth;}));const l=e.xAxes.push(new s.ValueAxis),d=l.renderer.labels.template;l.renderer.minLabelPosition=_$9,l.renderer.maxLabelPosition=I$4,l.min=this._getMinSeriesValue(a.series),this._customizeChartTooltip(l.tooltip,o),d.wrap=!0;const c=e.series.push(new s.ColumnSeries);c.dataFields.valueX="value",c.dataFields.categoryY="tooltip",e.cursor=new s.XYCursor,a.series.length>M$3&&(e.scrollbarY=new o.Scrollbar);}_createLineChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:a}=r,{am4core:o,am4charts:s}=i,n=e.xAxes.push(new s.CategoryAxis);n.dataFields.category="tooltip",n.renderer.labels.template.disabled=!0,this._customizeChartTooltip(n.tooltip,o),n.tooltip.events.on("sizechanged",(()=>{n.tooltip.dy=-n.tooltip.contentHeight;}));const l=e.yAxes.push(new s.ValueAxis),d=l.renderer.labels.template;l.renderer.minLabelPosition=_$9,l.renderer.maxLabelPosition=I$4,l.min=this._getMinSeriesValue(a.series),this._customizeChartTooltip(l.tooltip,o),d.wrap=!0;const c=e.series.push(new s.LineSeries);c.dataFields.categoryX="tooltip",c.dataFields.valueY="value",e.cursor=new s.XYCursor,a.series.length>M$3&&(e.scrollbarX=new o.Scrollbar);}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:r}=e,{type:a}=r,{am4core:o,am4charts:s}=i,n=o.create(t,s.XYChart);return n.rtl=d$1N(this.container),"column-chart"===a&&this._createColumnChart(n,e),"bar-chart"===a&&this._createBarChart(n,e),"line-chart"===a&&this._createLineChart(n,e),n}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null);}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender();}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&"image"===e.type&&e.refreshInterval&&this._setRefreshTimeout(e);}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const r=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const a=setInterval((()=>{this._updateMediaInfoTimestamp(i.sourceURL);}),r);this._refreshTimer=a;}_getImageSource(e,t){const i=-1!==e.indexOf("?")?"&":"?",[r,a=""]=e.split("#");return `${r}${i}timestamp=${t}${a?"#":""}${a}`}};e$25([o$1K("viewModel.attributes")],w$8.prototype,"attributes",void 0),e$25([o$1K("viewModel.activeMediaInfoIndex")],w$8.prototype,"activeMediaInfoIndex",void 0),e$25([o$1K("viewModel.description")],w$8.prototype,"description",void 0),e$25([o$1K("viewModel.fieldInfoMap")],w$8.prototype,"fieldInfoMap",void 0),e$25([o$1K("viewModel.layer")],w$8.prototype,"layer",void 0),e$25([o$1K("viewModel.mediaInfos")],w$8.prototype,"mediaInfos",void 0),e$25([o$1K("viewModel.popupTemplate")],w$8.prototype,"popupTemplate",void 0),e$25([o$1K("viewModel.relatedInfos")],w$8.prototype,"relatedInfos",void 0),e$25([o$1K("viewModel.title")],w$8.prototype,"title",void 0),e$25([d$1T({type:I$5})],w$8.prototype,"viewModel",void 0),e$25([d$1T(),e$1g("esri/widgets/Feature/t9n/Feature")],w$8.prototype,"messages",void 0),w$8=e$25([i$2z("esri.widgets.Feature.FeatureMedia")],w$8);const g$g=w$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$o{constructor(e,a){this.preLayerQueryCallback=e,this.preRequestCallback=a,this.preLayerQueryCallback||(this.preLayerQueryCallback=e=>{}),this.preRequestCallback||(this.preLayerQueryCallback=e=>{});}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$p=["$datastore","$map","$layer","$aggregatedfeatures"],n$Q="esri.widgets.Feature.support.arcadeFeatureUtils",c$K=s$2n.getLogger(n$Q);function p$B(e){return `<ul class="esri-widget__list">${e.map((e=>`<li>${"string"==typeof e?ee$2(Y$4(e)):e}</li>`)).join("")}</ul>`}function l$y(e){return `<table class="esri-widget__table">${e.keys().map((r=>{const t=e.field(r);return `<tr><th>${r}</th><td>${"string"==typeof t?ee$2(Y$4(t)):t}</td></tr>`})).join("")}</table>`}function u$r({aggregatedFeatures:e,arcadeUtils:r,featureSetVars:t,context:i,viewInfo:s,map:o,graphic:n,interceptor:c}){t.forEach((t=>{const p=t.toLowerCase(),l={map:o,spatialReference:s.sr,interceptor:c};if("$map"===p&&(i.vars[p]=r.convertMapToFeatureSetCollection(l)),"$layer"===p&&(i.vars[p]=r.convertFeatureLayerToFeatureSet({layer:n.sourceLayer,spatialReference:s.sr,interceptor:c})),"$datastore"===p&&(i.vars[p]=r.convertServiceUrlToWorkspace({url:n.sourceLayer.url,spatialReference:s.sr,interceptor:c})),"$aggregatedfeatures"===p){const t=n.layer,{fields:o,objectIdField:l,geometryType:u,spatialReference:f,displayField:d}=t,g=new Ge({fields:o,objectIdField:l,geometryType:u,spatialReference:f,displayField:d,..."feature"===t.type?{templates:t.templates,typeIdField:t.typeIdField,types:t.types}:null,source:e});i.vars[p]=r.convertFeatureLayerToFeatureSet({layer:g,spatialReference:s.sr,interceptor:c});}}));}function f$d(){return import('./arcadeUtils.js').then(function (n) { return n.as; })}async function d$o({graphic:e,view:r}){const{isAggregate:t,layer:a}=e;if(!t||!a||"2d"!==(null==r?void 0:r.type))return [];const i=await r.whenLayerView(a);if(!i.createQuery||!i.queryFeatures)return [];const s=i.createQuery();s.aggregateIds=[e.getObjectId()];const{features:o}=await i.queryFeatures(s);return o}async function g$f({expressionAttributes:e,info:r,arcadeUtils:a,interceptor:n,spatialReference:f,map:g,graphic:y,view:m}){const w=`expression/${r.name}`,F=a.createSyntaxTree(r.expression),v=o$p.filter((e=>a.hasVariable(F,e))),[h]=await s$2j([d$o({graphic:y,view:m}),a.loadScriptDependencies(F,!0,v)]),x=a.getViewInfo({spatialReference:f}),$=a.createExecContext(y,x);$.interceptor=n,$.useAsync=!0,u$r({aggregatedFeatures:h,arcadeUtils:a,featureSetVars:v,context:$,viewInfo:x,map:g,graphic:y,interceptor:n});const I=a.createFunction(F,$),j=await a.executeAsyncFunction(I,$).catch((e=>c$K.error("arcade-execution-error",{error:e,graphic:y,expressionInfo:r})));e[w]="string"==typeof j?ee$2(Y$4(j)):Array.isArray(j)?p$B(j):j&&"esri.arcade.Dictionary"===j.declaredClass?l$y(j):j;}async function y$d({popupTemplate:e,spatialReference:t,graphic:a,interceptor:i,map:s,view:o}){const n=e.expressionInfos,c=[],p={};if(!n||!n.length)return p;const l=await f$d();for(const r of n)c.push(g$f({expressionAttributes:p,info:r,arcadeUtils:l,interceptor:i,spatialReference:t,map:s,graphic:a,view:o}));return await T$s(c),p}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var U$6;const N$4=1,q$4="esri.widgets.FeatureViewModel",D$5=s$2n.getLogger(q$4),Q$1={attachmentsContent:!0,customContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let B$4=U$6=class extends p$3a{constructor(e){super(e),this._handles=new u$25,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=e$v(this.graphicChanged,N$4,this),this._expressionAttributes=null,this.abilities={...Q$1},this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=e=>{const{abilities:t}=this;return "attachments"===e.type&&t.attachmentsContent||"custom"===e.type&&t.customContent||"fields"===e.type&&t.fieldsContent||"media"===e.type&&t.mediaContent||"text"===e.type&&t.textContent},this._handles.add(i$2x(this,["graphic","_effectivePopupTemplate","abilities"],(()=>this.graphicChangedThrottled())));}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear();}get _effectivePopupTemplate(){return r$1K(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return W$5(X$4(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return x$8(this.graphic)}castAbilities(e){return {...Q$1,...e}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null);}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(e){void 0!==e?this._override("spatialReference",e):this._clearOverride("spatialReference");}get map(){return this.get("view.map")||null}set map(e){void 0!==e?this._override("map",e):this._clearOverride("map");}get waitingForContent(){return !!this._featureAbortController}setActiveMedia(e,t){const r=this.contentViewModels[e];r instanceof I$5&&r.setActiveMedia(t);}nextMedia(e){const t=this.contentViewModels[e];t instanceof I$5&&t.next();}previousMedia(e){const t=this.contentViewModels[e];t instanceof I$5&&t.previous();}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null);}async graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal});}catch(r){d$1Z(r)||(this._error=r,D$5.error("error","The popupTemplate could not be displayed for this feature.",{error:r,graphic:e,popupTemplate:this._effectivePopupTemplate}));}this._featureAbortController===t&&(this._featureAbortController=null);}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null;}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map(((e,t)=>"attachments"===e.type?this._compileAttachments(e,t):"custom"===e.type?this._compileCustom(e,t):"fields"===e.type?this._compileFields(e,t):"media"===e.type?this._compileMedia(e,t):"text"===e.type?this._compileText(e,t):void 0)):"string"==typeof e?this._compileText(new c$2n({text:e}),0).text:e}_destroyContentViewModels(){this.contentViewModels.forEach((e=>e&&!e.destroyed&&e.destroy())),this._set("contentViewModels",[]);}_compileAttachments(e,t){const{graphic:r}=this,{description:i,title:o}=e;return this.contentViewModels[t]=new c$V({graphic:r,...this._compileTitleAndDesc({title:o,description:i})}),e}_compileCustom(e,t){const{graphic:r}=this,{creator:i,destroyer:o}=e;return this.contentViewModels[t]=new p$J({graphic:r,creator:i,destroyer:o}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:r,_sourceLayer:i,graphic:o,formattedAttributes:s,_expressionAttributes:a}=this,{attributes:n}=o,l=s.global;return {title:$$6({attributes:n,fieldInfoMap:r,globalAttributes:l,expressionAttributes:a,layer:i,text:e}),description:$$6({attributes:n,fieldInfoMap:r,globalAttributes:l,expressionAttributes:a,layer:i,text:t})}}_compileFields(e,t){const{_effectivePopupTemplate:r,formattedAttributes:i}=this,o=e.clone(),s={...i.global,...i.content[t]},a=(null==e?void 0:e.fieldInfos)||(null==r?void 0:r.fieldInfos),n=null==a?void 0:a.filter((({fieldName:e})=>j$7(e)||ae$1(e)||s.hasOwnProperty(e))),l=null==r?void 0:r.expressionInfos,{description:p,title:c}=o,d=new n$10({attributes:s,expressionInfos:l,fieldInfos:n,...this._compileTitleAndDesc({title:c,description:p})});return this.contentViewModels[t]=d,o.fieldInfos=d.formattedFieldInfos.slice(0),o}_compileMedia(e,t){const{graphic:r,_fieldInfoMap:i,_effectivePopupTemplate:o,relatedInfos:s,_sourceLayer:a,_expressionAttributes:n}=this,{attributes:l}=r,p=this.formattedAttributes.global,c=e.clone(),{description:d,mediaInfos:u,title:f}=c,h=new I$5({activeMediaInfoIndex:c.activeMediaInfoIndex||0,attributes:l,layer:a,fieldInfoMap:i,formattedAttributes:p,expressionAttributes:n,mediaInfos:u,popupTemplate:o,relatedInfos:s,...this._compileTitleAndDesc({title:f,description:d})});return c.mediaInfos=h.formattedMediaInfos.slice(0),this.contentViewModels[t]=h,c}_compileText(e,t){const r=e.clone(),{graphic:i,_fieldInfoMap:o,_sourceLayer:s,_expressionAttributes:a}=this;if(r&&r.text){const{attributes:e}=i,t=this.formattedAttributes.global;r.text=$$6({attributes:e,fieldInfoMap:o,globalAttributes:t,expressionAttributes:a,layer:s,text:r.text});}return this.contentViewModels[t]=new p$J({graphic:i,creator:r.text}),r}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:r}=this;if(!e)return;const{lastEditInfoEnabled:i}=e,o=null==t?void 0:t.editFieldsInfo;return i&&o?V$3(o,r.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:r,graphic:i,_expressionAttributes:o}=this,{attributes:s}=i,a=this.formattedAttributes.global;return $$6({attributes:s,fieldInfoMap:t,globalAttributes:a,expressionAttributes:o,layer:r,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this,r=null==e?void 0:e.title;return E$7(r,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this,r=null==e?void 0:e.content;return E$7(r,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:r,graphic:i,_effectivePopupTemplate:o,spatialReference:s,map:a,view:n}=this,{content:{value:p},title:{value:c}}=await T$s({content:this._getContent(),title:this._getTitle()});if(t!==this._featureAbortController||!i)return;await oe$2({graphic:i,popupTemplate:o,layer:r,spatialReference:s},e);const{expressionAttributes:{value:d}}=await T$s({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:y$d({popupTemplate:this._effectivePopupTemplate,spatialReference:s,graphic:i,map:a,interceptor:U$6.interceptor,view:n})});t===this._featureAbortController&&i&&(this._expressionAttributes=d,this._set("formattedAttributes",this._createFormattedAttributes(p,d)),this._set("title",this._compileTitle(c)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(p)||null));}_createFormattedAttributes(e,t){const{_effectivePopupTemplate:r,graphic:i,relatedInfos:o,_sourceLayer:s,_fieldInfoMap:a}=this,n=null==r?void 0:r.fieldInfos,l={...i.attributes,...t},p={global:re$2({fieldInfos:n,graphic:i,attributes:l,layer:s,fieldInfoMap:a,relatedInfos:o}),content:[]};return Array.isArray(e)&&e.forEach(((e,t)=>{"fields"===e.type&&e.fieldInfos&&(p.content[t]=re$2({fieldInfos:e.fieldInfos,graphic:i,attributes:l,layer:s,fieldInfoMap:a,relatedInfos:o}));})),p}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:r}=this;return this._queryRelatedInfos(t,X$4(r),e)}async _queryRelatedInfos(e,t,r){const{relatedInfos:i,_sourceLayer:o}=this;i.clear();const s=r$1K(o.associatedLayer)?await o.associatedLayer.load(r):o;if(!s)return;const n=t.filter((e=>e&&ae$1(e.fieldName)));if(!n||!n.length)return;t.forEach((e=>this._configureRelatedInfo(e,s)));const l=await S$8({relatedInfos:i,layer:s},r);Object.keys(l).forEach((e=>{var t;const r=i.get(e.toString()),o=null==(t=l[e])?void 0:t.value;r&&o&&(r.layerInfo=o.data);}));const p=await T$5({graphic:e,relatedInfos:i,layer:s},r);Object.keys(p).forEach((e=>{var t;I$6(null==(t=p[e])?void 0:t.value,i.get(e.toString()));}));}_configureRelatedInfo(e,t){const{relatedInfos:r}=this,i=p$C(e.fieldName);if(!i)return;const{layerId:o,fieldName:s}=i;if(!o)return;const a=r.get(o.toString())||h$p(o,t);a&&($$4({relatedInfo:a,fieldName:s,fieldInfo:e}),this.relatedInfos.set(o,a));}};B$4.interceptor=new e$o(de$1,pe$1),e$25([d$1T()],B$4.prototype,"_error",void 0),e$25([d$1T()],B$4.prototype,"_featureAbortController",void 0),e$25([d$1T({readOnly:!0})],B$4.prototype,"_effectivePopupTemplate",null),e$25([d$1T({readOnly:!0})],B$4.prototype,"_fieldInfoMap",null),e$25([d$1T({readOnly:!0})],B$4.prototype,"_sourceLayer",null),e$25([d$1T()],B$4.prototype,"abilities",void 0),e$25([c$35("abilities")],B$4.prototype,"castAbilities",null),e$25([d$1T({readOnly:!0})],B$4.prototype,"content",void 0),e$25([d$1T({readOnly:!0})],B$4.prototype,"contentViewModels",void 0),e$25([d$1T({type:Boolean})],B$4.prototype,"defaultPopupTemplateEnabled",void 0),e$25([d$1T({readOnly:!0})],B$4.prototype,"state",null),e$25([d$1T({readOnly:!0})],B$4.prototype,"formattedAttributes",void 0),e$25([d$1T({type:h$X,value:null})],B$4.prototype,"graphic",null),e$25([d$1T({readOnly:!0})],B$4.prototype,"lastEditInfo",void 0),e$25([d$1T()],B$4.prototype,"relatedInfos",void 0),e$25([d$1T()],B$4.prototype,"spatialReference",null),e$25([d$1T({readOnly:!0})],B$4.prototype,"title",void 0),e$25([d$1T()],B$4.prototype,"map",null),e$25([d$1T({readOnly:!0})],B$4.prototype,"waitingForContent",null),e$25([d$1T()],B$4.prototype,"view",void 0),B$4=U$6=e$25([i$2z(q$4)],B$4);const G$3=B$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$G=i=>{let c=class extends i{constructor(){super(...arguments),this.renderNodeContent=e=>e$1f(e)&&!e.destroyed?n$2g("div",{key:e},e.render()):e instanceof HTMLElement?n$2g("div",{key:e,bind:e,afterCreate:this._attachToNode}):t$1d(e)?n$2g("div",{key:e,bind:e.domNode,afterCreate:this._attachToNode}):null;}_attachToNode(e){const r=this;e.appendChild(r);}};return c=e$25([i$2z("esri.widgets.Feature.ContentMixin")],c),c};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const g$e={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},y$c={title:!0,content:!0,lastEditedInfo:!0};let _$8=class extends(i$G(z$o)){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements={...y$c},this.map=null,this.view=null,this.viewModel=new G$3;}initialize(){this.own(i$2x(this,"viewModel.contentViewModels",(()=>this._setupContentWidgets())));}loadDependencies(){return import('./calcite-notice.js')}destroy(){this._destroyContentWidgets();}castVisibleElements(e){return {...y$c,...e}}render(){const{state:e}=this.viewModel,t=n$2g("div",{class:g$e.container,key:"container"},this.renderTitle(),"error"===e?this.renderError():"loading"===e?this.renderLoading():this.renderContentContainer());return n$2g("div",{class:this.classes(g$e.base,g$e.esriWidget)},t)}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t);}nextMedia(e){this.viewModel.nextMedia(e);}previousMedia(e){this.viewModel.previousMedia(e);}renderError(){const{messagesCommon:e,messages:t,visibleElements:i}=this;return n$2g("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},i.title?n$2g("div",{key:"error-title",slot:"title"},e.errorMessage):null,n$2g("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return n$2g("div",{key:"loading-container",class:g$e.loadingSpinnerContainer},n$2g("span",{class:this.classes(g$e.iconLoading,g$e.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?n$2g("div",{class:g$e.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?n$2g(s$1w,{level:this.headingLevel,class:g$e.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?n$2g("div",{key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if("string"==typeof e){const e=this._contentWidgets[0];return !e||e.destroyed?null:n$2g("div",{key:`${t}-content`},e.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:i}=this;if("boolean"!=typeof i.content&&!i.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:i,attachmentInfos:s}=t.viewModel;return "loading"===i||s.length>0?n$2g("div",{key:this._buildKey("attachments-element",e),class:this.classes(g$e.contentElement)},t.render()):null}renderCustom(e,t){const{creator:i}=e,s=this._contentWidgets[t];return !s||s.destroyed?null:i?n$2g("div",{key:this._buildKey("custom-element",t),class:g$e.contentElement},s.render()):null}renderFields(e){const t=this._contentWidgets[e];return !t||t.destroyed?null:n$2g("div",{key:this._buildKey("fields-element",e),class:g$e.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return !t||t.destroyed?null:n$2g("div",{key:this._buildKey("media-element",e),class:g$e.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:i}=this.viewModel;if(!i||!e.lastEditedInfo)return null;const{date:s,user:n}=i,r="edit"===i.type?n?t.lastEditedByUser:t.lastEdited:n?t.lastCreatedByUser:t.lastCreated,o=s$22(r,{date:s,user:n});return n$2g("div",{key:"edit-info-element",class:this.classes(g$e.lastEditedInfo,g$e.contentElement)},o)}renderText(e,t){const i=e.text,s=this._contentWidgets[t];return !s||s.destroyed?null:i?n$2g("div",{key:this._buildKey("text-element",t),class:this.classes(g$e.contentElement,g$e.text)},s.render()):null}_buildKey(e,...t){return `${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidgets(){this._contentWidgets.forEach((e=>{e.viewModel=null,e&&!e.destroyed&&e.destroy();})),this._contentWidgets=[];}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,i=this.get("viewModel.content"),{contentViewModels:s}=this.viewModel;if(Array.isArray(i))i.forEach(((i,n)=>{"attachments"===i.type&&(this._contentWidgets[n]=new m$z({displayType:i.displayType,headingLevel:t.title?e+1:e,viewModel:s[n]})),"fields"===i.type&&(this._contentWidgets[n]=new m$y({viewModel:s[n]})),"media"===i.type&&(this._contentWidgets[n]=new g$g({viewModel:s[n]})),"text"===i.type&&(this._contentWidgets[n]=new p$I({viewModel:s[n]})),"custom"===i.type&&(this._contentWidgets[n]=new p$I({viewModel:s[n]}));}),this);else {const e=s[0];e&&!e.destroyed&&(this._contentWidgets[0]=new p$I({viewModel:e}));}this.scheduleRender();}};e$25([o$1K("viewModel.graphic")],_$8.prototype,"graphic",void 0),e$25([o$1K("viewModel.defaultPopupTemplateEnabled")],_$8.prototype,"defaultPopupTemplateEnabled",void 0),e$25([d$1T()],_$8.prototype,"headingLevel",void 0),e$25([d$1T({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],_$8.prototype,"label",void 0),e$25([d$1T(),e$1g("esri/widgets/Feature/t9n/Feature")],_$8.prototype,"messages",void 0),e$25([d$1T(),e$1g("esri/t9n/common")],_$8.prototype,"messagesCommon",void 0),e$25([d$1T(),e$1g("esri/widgets/support/t9n/uriUtils")],_$8.prototype,"messagesURIUtils",void 0),e$25([o$1K("viewModel.spatialReference")],_$8.prototype,"spatialReference",void 0),e$25([o$1K("viewModel.title")],_$8.prototype,"title",void 0),e$25([d$1T()],_$8.prototype,"visibleElements",void 0),e$25([c$35("visibleElements")],_$8.prototype,"castVisibleElements",null),e$25([o$1K("viewModel.map")],_$8.prototype,"map",void 0),e$25([o$1K("viewModel.view")],_$8.prototype,"view",void 0),e$25([d$1T({type:G$3})],_$8.prototype,"viewModel",void 0),_$8=e$25([i$2z("esri.widgets.Feature")],_$8);const w$7=_$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$J=class extends n$2D.EventedAccessor{constructor(e){super(e),this._anchorHandles=new u$25,this.location=null,this.screenLocation=null,this.screenLocationEnabled=!1,this.view=null,this._anchorHandles.add([f$1B(this,["screenLocationEnabled","location","view.size","view.stationary"],(()=>this._updateScreenPointAndHandle())),f$1B(this,["view","view.ready"],(()=>this._wireUpView()))]);}destroy(){this.view=null,this._anchorHandles&&this._anchorHandles.destroy(),this._anchorHandles=null,this._viewpointHandle=null;}_wireUpView(){const e="view";this._anchorHandles.remove(e),this._viewpointHandle=null;if(!this.get("view.ready"))return;this._setScreenLocation();const{view:t}=this,o="3d"===t.type?"camera":"viewpoint",i=O$s(t,o,(()=>this._viewpointChange()));this._anchorHandles.add(i,e),this._viewpointHandle=i,this._toggleWatchingViewpoint();}_viewpointChange(){this._setScreenLocation(),this.emit("view-change");}_updateScreenPointAndHandle(){this._setScreenLocation(),this._toggleWatchingViewpoint();}_toggleWatchingViewpoint(){const{_viewpointHandle:e,location:t,screenLocationEnabled:o}=this;if(!e)return;t&&o?e.resume():e.pause();}_setScreenLocation(){const{location:e,view:t,screenLocationEnabled:o}=this,n=this.get("view.ready"),s=o&&n&&r$1K(e)?t.toScreen(e):null;this._set("screenLocation",s);}};e$25([d$1T()],c$J.prototype,"location",void 0),e$25([d$1T({readOnly:!0})],c$J.prototype,"screenLocation",void 0),e$25([d$1T()],c$J.prototype,"screenLocationEnabled",void 0),e$25([d$1T()],c$J.prototype,"view",void 0),c$J=e$25([i$2z("esri.widgets.support.AnchorElementViewModel")],c$J);const l$x=c$J;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$q="esri.widgets.CompassViewModel";let p$A=class extends l$x{constructor(s){super(s),this.visible=!1;}};e$25([d$1T()],p$A.prototype,"visible",void 0),p$A=e$25([i$2z(t$q)],p$A);const c$I=p$A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$H={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let h$n=class extends z$o{constructor(i,s){super(i,s),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new c$I,this.visible=!1;}initialize(){this.own([f$1B(this,"visible",(i=>this._visibleChange(i)))]);}destroy(){this._animationPromise=null;}show(i){const{location:s,promise:e}=i;s&&(this.viewModel.location=s),this.visible=!0;const o=()=>this.hide();e&&e.catch((()=>{})).then(o);}hide(){this.visible=!1;}render(){const{visible:i}=this,{screenLocation:s}=this.viewModel,e=!!s,o=i&&e,t=!i&&e,r={[c$H.spinnerStart]:o,[c$H.spinnerFinish]:t},n=this._getPositionStyles();return n$2g("div",{class:this.classes(c$H.base,r),styles:n})}_visibleChange(i){if(i)return void(this.viewModel.screenLocationEnabled=!0);const s=L$z(this._animationDelay);this._animationPromise=s,s.catch((()=>{})).then((()=>{this._animationPromise===s&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null);}));}_getPositionStyles(){const{screenLocation:i,view:e}=this.viewModel;if(!e||t$1T(i))return {};const{padding:o}=e;return {left:i.x-o.left+"px",top:i.y-o.top+"px"}}};e$25([o$1K("viewModel.location")],h$n.prototype,"location",void 0),e$25([o$1K("viewModel.view")],h$n.prototype,"view",void 0),e$25([d$1T({type:c$I})],h$n.prototype,"viewModel",void 0),e$25([o$1K("viewModel.visible")],h$n.prototype,"visible",void 0),h$n=e$25([i$2z("esri.widgets.Spinner")],h$n);const m$q=h$n;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$n{constructor(t=(t=>t.values().next().value)){this._peeker=t,this._items=new Set;}get length(){return this._items.size}clear(){this._items.clear();}last(){if(0===this._items.size)return;let t;for(t of this._items);return t}peek(){if(0!==this._items.size)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t);}contains(t){return this._items.has(t)}pop(){if(0===this.length)return;const e=this.peek();return this._items.delete(q$s(e)),e}popLast(){if(0===this.length)return;const e=this.last();return this._items.delete(q$s(e)),e}remove(t){this._items.delete(t);}filter(t){return this._items.forEach((e=>{t(e)||this._items.delete(e);})),this}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$p=s$2r("mac")?"Meta":"Ctrl",o$o={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let s=48;s<58;s++)o$o[s]=String.fromCharCode(s);for(let s=1;s<25;s++)o$o[111+s]=`F${s}`;for(let s=65;s<91;s++)o$o[s]=[String.fromCharCode(s+32),String.fromCharCode(s)];function a$M(e){if(void 0!==e.key)return i$2L(e);const t=o$o[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function n$P(r){switch(r){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return !0}return !1}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$m{constructor(e,t=[]){this.eventType=e,this.keyModifiers=t;}matches(e){if(e.type!==this.eventType)return !1;if(0===this.keyModifiers.length)return !0;const t=e.modifiers;for(const i of this.keyModifiers)if(!t.has(i))return !1;return !0}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$O=s$2n.getLogger("esri.views.input.InputHandler");class i$F{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e;}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const t=this._incoming[e];for(const e of t)this._incomingEventMatches.push(e.match);}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map((e=>e.eventType))),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return !1}onInstall(e){this._manager?n$O.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback((e=>this._handleEvent(e))),e.setUninstallCallback((()=>this._onUninstall())),this._manager=e);}onUninstall(){}registerIncoming(e,n,i){let a;"function"==typeof n?(i=n,a=[]):a=n||[];const o="string"==typeof e?new e$m(e,a):e,h=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null;},r=e=>{const t=this._incoming[e.match.eventType];if(t){const n=t.indexOf(e);t.splice(n,1),h(),this._manager&&this._manager.updateDependencies();}},g=new s$y(o,i,{onPause:r,onRemove:r,onResume:e=>{const t=this._incoming[e.match.eventType];t&&-1===t.indexOf(e)&&(t.push(e),h(),this._manager&&this._manager.updateDependencies());}});let c=this._incoming[o.eventType];return c||(c=[],this._incoming[o.eventType]=c),c.push(g),h(),this._manager&&this._manager.updateDependencies(),g}registerOutgoing(e){if(this._outgoing[e])throw Error("There is already a callback registered for this outgoing InputEvent: "+e);const t=new a$L(e,{onEmit:(e,t,n,i)=>{this._manager.emit(e.eventType,t,n,i);},onRemove:e=>{delete this._outgoing[e.eventType],this._manager.updateDependencies();}});return this._outgoing[e]=t,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),t}startCapturingPointer(e){this._manager.setPointerCapture(e,!0);}stopCapturingPointer(e){this._manager.setPointerCapture(e,!1);}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs();}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):n$O.error("This InputHandler is not registered with an InputManager");}_handleEvent(e){const t=this._incoming[e.type];if(t)for(const n of t)if(n.match.matches(e)&&(n.callback(e),e.shouldStopPropagation()))break}}class s$y{constructor(e,t,n){this.match=e,this._callback=t,this._handler=n;}pause(){this._handler.onPause(this);}resume(){this._handler.onResume(this);}remove(){this._handler.onRemove(this);}get callback(){return this._callback}}class a$L{constructor(e,t){this.eventType=e,this._removed=!1,this._handler=t;}emit(e,t,n){this._removed||this._handler.onEmit(this,e,t,n);}remove(){this._removed=!0,this._handler.onRemove(this);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$o extends i$F{constructor(e){super(!0),this._onChange=e,this._value="mouse",this.registerIncoming("pointer-down",(e=>{const t="touch"===e.data.native.pointerType;this._setValue(t?"touch":"mouse");})),this._moveHandler=this.registerIncoming("pointer-move",(e=>{const t="touch"===e.data.native.pointerType;this._setValue(t?"touch":"mouse");})),this._moveHandler.pause();}_setValue(e){e!==this._value&&("touch"===e?this._moveHandler.resume():this._moveHandler.pause(),this._value=e,this._onChange(e));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h$m=s$2n.getLogger("esri.views.input.InputManager");let d$n=class extends p$3a{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=t$p,this.latestPointerType="mouse",this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation};}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers();}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource=null,this._currentPropagation=null;}get hasPendingInputs(){return this._handlers.some((e=>e.handler.hasPendingInputs))}installHandlers(e,t,r=u$q.INTERNAL){if(this._nameToGroup[e])return void h$m.error("There is already an InputHandler group registered under the name `"+e+"`");if(0===t.length)return void h$m.error("Can't register a group of zero handlers");const i={name:e,handlers:t.map((e=>({handler:e,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null})))};this._nameToGroup[e]=i;for(let n=i.handlers.length-1;n>=0;n--){const e=i.handlers[n];this._handlers.push(e),e.handler.onInstall({updateDependencies:()=>{this.updateDependencies();},emit:(t,r,i,n,s)=>{this._emitInputEvent(e.priorityIndex+1,t,r,i,s,n);},setPointerCapture:(t,r)=>{this._setPointerCapture(i,e,t,r);},setEventCallback:t=>{e.eventCallback=t;},setUninstallCallback:t=>{e.uninstallCallback=t;},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs");}});}this.updateDependencies();}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach((e=>{e.removed=!0,e.uninstallCallback();})),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):h$m.error("There is no InputHandler group registered under the name `"+e+"`");}hasHandlers(e){return void 0!==this._nameToGroup[e]}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const e=this._handlers[r];e.priorityIndex=r,this._handlersPriority.push(e);}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const i=this._handlersPriority[r];i.priorityIndex=r;let n=i.handler.hasSideEffects;if(!n)for(const t of i.handler.outgoingEventTypes)if(e.has(t)){n=!0;break}if(n)for(const r of i.handler.incomingEventMatches){e.add(r.eventType);for(const e of r.keyModifiers)n$P(e)||t.add(e);}i.active=n;}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents);}_setLatestPointerType(e){this._set("latestPointerType",e);}_onEventReceived(e,t){if("pointer-capture-lost"===e){const e=t;this._pointerCaptures.delete(e.native.pointerId);}this._updateKeyModifiers(e,t);const r=null!=this.test.timestamp?this.test.timestamp:t.native?t.native.timestamp:void 0,i=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,r,i);}_updateKeyModifiers(e,t){if(!t)return;let r=!1;const i=()=>{if(!r){const e=new Set;this._activeKeyModifiers.forEach((t=>{e.add(t);})),this._activeKeyModifiers=e,r=!0;}},n=(e,t)=>{t&&!this._activeKeyModifiers.has(e)?(i(),this._activeKeyModifiers.add(e)):!t&&this._activeKeyModifiers.has(e)&&(i(),this._activeKeyModifiers.delete(e));};if("key-down"===e||"key-up"===e){const r=t.key;this._keyModifiers.has(r)&&n(r,"key-down"===e);}const s=t.native;n("Alt",!(!s||!s.altKey)),n("Ctrl",!(!s||!s.ctrlKey)),n("Shift",!(!s||!s.shiftKey)),n("Meta",!(!s||!s.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey));}_installRecognizers(){this._latestPointerTypeHandler=new t$o((e=>this._setLatestPointerType(e))),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,u$q.INTERNAL),this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler],u$q.INTERNAL);}_setPointerCapture(e,t,r,i){const n=e.name+"-"+t.priorityIndex,s=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,s),i?(s.add(n),1===s.size&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):s.has(n)&&(s.delete(n),0===s.size&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)));}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter((e=>!e.removed)),this.updateDependencies();}_emitInputEventFromSource(e,t,r,i){this._emitInputEvent(0,e,t,r,i);}_emitInputEvent(e,t,r,i,n,s){const o=void 0!==i?i:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),a=void 0!==n&&n,p={event:new l$w(t,r,o,s||this._activeKeyModifiers,a),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(p):this._doNewPropagation(p);}_doNewPropagation(e){this._currentPropagation={events:new e$n,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation();}_continuePropagation(){const e=this._currentPropagation;if(e){for(;this._currentPropagation.events.length>0;){const{event:t,priorityIndex:r}=this._currentPropagation.events.pop(),i=t.data&&t.data.eventId;if(!(null!=i&&this._stoppedPropagationEventIds.has(i)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else {if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback(t),t.shouldStopPropagation()){null!=i&&this._stoppedPropagationEventIds.add(i);break}if(t.shouldPausePropagation((()=>this._continuePropagation())))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1];}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies();}}_pausePropagation(e){const t=new e$n;for(t.push(e);this._currentPropagation.events.length;)t.push(this._currentPropagation.events.pop());this._currentPropagation.events=t,this._currentPropagation.currentHandler=null;}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const e of t.handler.incomingEventMatches){if(r.eventType!==e.eventType)continue;const t=r.keyModifiers.filter((t=>-1!==e.keyModifiers.indexOf(t)));if(t.length===r.keyModifiers.length!==(t.length===e.keyModifiers.length))return r.keyModifiers.length>e.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const r of e){let e=0;for(;e<t.length&&this._compareHandlerPriority(r,t[e])>=0;)e++;t.splice(e,0,r);}return t}get debug(){const e=e=>{const t=this._setPointerCapture;this._setPointerCapture=()=>{},e(),this._setPointerCapture=t;};return {injectEvent:(t,r)=>{e((()=>{this._onEventReceived(t,r);}));},disablePointerCapture:e}}};e$25([d$1T({readOnly:!0})],d$n.prototype,"hasPendingInputs",null),e$25([d$1T()],d$n.prototype,"eventSource",void 0),e$25([d$1T()],d$n.prototype,"recognizers",void 0),e$25([d$1T({readOnly:!0})],d$n.prototype,"latestPointerType",void 0),d$n=e$25([i$2z("esri.views.input.InputManager")],d$n);class l$w{constructor(e,t,r,i,n){this.type=e,this.data=t,this.timestamp=r,this.modifiers=i,this.cancelable=n,this._propagationState=0,this._resumeCallback=null;}stopPropagation(){this._propagationState|=1;}shouldStopPropagation(){return 0!=(1&this._propagationState)}async(e){this._propagationState|=2;const t=(e,t)=>{this._propagationState&=-3;const r=this._resumeCallback;if(this._resumeCallback=null,r&&r(),t)throw e;return e};return ("function"==typeof e?e():e).then((e=>t(e,!1)),(e=>t(e,!0)))}shouldPausePropagation(e){return !!(2&this._propagationState)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault();}}const u$q={DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$x={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},o$n=new a$2j({id:"zoom-to-feature",title:"{messages.zoom}",className:s$x.iconZoom}),t$n=new a$2j({id:"remove-selected-feature",title:"{messages.remove}",className:s$x.iconTrash}),r$o=new a$2j({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:s$x.iconZoom}),i$E=new a$2j({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:s$x.iconBrowseClusteredFeatures});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$K="esri.widgets.Popup.PopupViewModel",s$w=s$2n.getLogger(a$K),c$G=function(t){const{event:a,view:s}=t,{action:c}=a,u=s&&s.popup;if(!c)return Promise.reject(new s$2l("trigger-action:missing-arguments","Event has no action"));if(!u)return Promise.reject(new s$2l("trigger-action:missing-arguments","view.popup is missing"));const{disabled:d,id:w}=c;if(!w)return Promise.reject(new s$2l("trigger-action:invalid-action","action.id is missing"));if(d)return Promise.reject(new s$2l("trigger-action:invalid-action","Action is disabled"));if(w===o$n.id)return l$v(u.viewModel);if(w===r$o.id)return g$d(u.viewModel);if(w===i$E.id)return u.featureMenuOpen=!u.featureMenuOpen,u.viewModel.browseClusterEnabled=!u.viewModel.browseClusterEnabled,Promise.resolve();if(u.viewModel.browseClusterEnabled=!1,w===t$n.id){u.close();const{selectedFeature:t}=u;if(!t)return Promise.reject(new s$2l(`trigger-action:${t$n.id}`,"selectedFeature is required",{selectedFeature:t}));const{sourceLayer:r}=t;return r?r.remove(t):s.graphics.remove(t),Promise.resolve()}return Promise.resolve()};function u$p(e){const{selectedFeature:t,location:r,view:i}=e;if(!i)return null;if("3d"===i.type)return t||r;return e.get("selectedFeature.geometry")||r}function d$m(t,r){if("3d"!==(null==r?void 0:r.type)||!t||"esri.Graphic"!==t.declaredClass)return !0;const i=r.getViewForGraphic(t);if(i&&"whenGraphicBounds"in i){let r=!1;return i.whenGraphicBounds(t,{useViewElevation:!0}).then((e=>{r=!e||!e.boundingBox||e.boundingBox[0]===e.boundingBox[3]&&e.boundingBox[1]===e.boundingBox[4]&&e.boundingBox[2]===e.boundingBox[5];})).catch((()=>{const r=new s$2l("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:t});s$w.error(r);})),r}return !0}async function l$v(t){const{location:i,selectedFeature:o,view:n,zoomFactor:a}=t,c=u$p(t);if(!c){const t=new s$2l("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:c,view:n});return s$w.error(t),Promise.reject(t)}const l=n.scale/a,g=t.get("selectedFeature.geometry")||i,w=g&&"point"===g.type&&d$m(o,n);o$n.active=!0,o$n.disabled=!0,await t.view.goTo({target:c,scale:w?l:void 0}),o$n.active=!1,o$n.disabled=!1,t.zoomToLocation=null,w&&(t.location=g);}async function g$d(t){const{selectedFeature:r,view:o}=t;if("2d"!==(null==o?void 0:o.type)){const t=new s$2l("zoomToCluster:invalid-view","View must be 2d MapView.",{view:o});throw s$w.error(t),t}if(!r.isAggregate){const t=new s$2l("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:r});throw s$w.error(t),t}const n=r.sourceLayer,a=await o.whenLayerView(n),c=a.createQuery();c.aggregateIds=[r.getObjectId()],r$o.active=!0,r$o.disabled=!0;const{extent:u}=await a.queryExtent(c);await o.goTo({target:u}),r$o.active=!1,r$o.disabled=!1;}async function w$6(t){const{selectedFeature:r,view:i}=t;if("2d"!==(null==i?void 0:i.type)){const t=new s$2l("displayClusterExtent:invalid-view","View must be 2d MapView.",{view:i});throw s$w.error(t),t}if(!r.isAggregate){const t=new s$2l("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:r});throw s$w.error(t),t}const o=r.sourceLayer,n=await i.whenLayerView(o),a=n.createQuery();a.aggregateIds=[r.getObjectId()];const{extent:c}=await n.queryExtent(a);t.selectedClusterBoundaryFeature.geometry=c,i.graphics.add(t.selectedClusterBoundaryFeature);}async function v$7(t){const{selectedFeature:r,view:i}=t;if("2d"!==(null==i?void 0:i.type)){const t=new s$2l("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:i});throw s$w.error(t),t}if(!r.isAggregate){const t=new s$2l("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:r});throw s$w.error(t),t}const n=r.sourceLayer,a=await i.whenLayerView(n),c=a.createQuery();c.aggregateIds=[r.getObjectId()],i$E.active=!0,i$E.disabled=!0;const{features:u}=await a.queryFeatures(c);i$E.active=!1,i$E.disabled=!1,i.popup.open({features:[r].concat(u),featureMenuOpen:!0});}function p$z(e){e.features=e.features.filter((e=>e.isAggregate));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$l=e=>{let t=class extends e{constructor(...o){super(...o),this.goToOverride=null,this.view=null;}callGoTo(o){const{view:r}=this;return this.goToOverride?this.goToOverride(r,o):r.goTo(o.target,o.options)}};return e$25([d$1T()],t.prototype,"goToOverride",void 0),e$25([d$1T()],t.prototype,"view",void 0),t=e$25([i$2z("esri.widgets.support.GoTo")],t),t};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const T$4=S$I.ofType({key:"type",defaultKeyValue:"button",base:c$2k,typeMap:{button:a$2j,toggle:a$2i}}),S$7=()=>[o$n.clone()],B$3=()=>[r$o.clone(),i$E.clone()],R$4="esri.widgets.Popup.PopupViewModel",G$2=s$2n.getLogger(R$4);let z$3=class extends(e$l(l$x)){constructor(e){super(e),this._handles=new u$25,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new T$4,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new h$X({symbol:new S$r({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null;}get isLoadingFeature(){return this.featureViewModels.some((e=>e.waitingForContent))}initialize(){this._handles.add([i$2x(this,["autoOpenEnabled","view"],(()=>this._autoOpenEnabledChange())),this.on("view-change",(()=>this._autoClose())),f$1B(this,["highlightEnabled","selectedFeature","visible","view"],(()=>this._highlightFeature())),f$1B(this,"view.animation.state",(e=>this._animationStateChange(e))),f$1B(this,"location",(e=>this._locationChange(e))),f$1B(this,"selectedFeature",(e=>this._selectedFeatureChange(e))),f$1B(this,["selectedFeatureIndex","featureCount","featuresPerPage"],(()=>this._selectedFeatureIndexChange())),f$1B(this,["featurePage","selectedFeatureIndex","featureCount","featuresPerPage, featureViewModels"],(()=>this._setGraphicOnFeatureViewModels())),f$1B(this,"featureViewModels",(()=>this._featureViewModelsChange())),this.on("trigger-action",(e=>c$G({event:e,view:this.view}))),h$1w(this,"waitingForResult",(()=>this._waitingForResultChange()),!0),f$1B(this,["features","view","view.map","view.spatialReference"],(()=>this._updateFeatureVMs())),f$1B(this,["view.scale"],this._viewScaleChange),h$1w(this,"visible",(()=>this.browseClusterEnabled=!1)),f$1B(this,"browseClusterEnabled",(e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing()))]);}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null;}get active(){return !(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new T$4;e.removeAll();const{actions:t,defaultActions:s,defaultPopupTemplateEnabled:i,includeDefaultActions:o,selectedFeature:r}=this,n=o?s.concat(t):t,a=r&&("function"==typeof r.getEffectivePopupTemplate&&r.getEffectivePopupTemplate(i)||r.popupTemplate),l=a&&a.actions,u=a&&a.overwriteActions?l:l?l.concat(n):n;return u&&u.filter(Boolean).forEach((t=>e.add(t))),e}get defaultActions(){var e;const t=this._get("defaultActions")||new T$4;return t.removeAll(),t.addMany(null!=(e=this.selectedFeature)&&e.isAggregate?B$3():S$7()),t}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:s,promiseCount:i,selectedFeatureIndex:o}=this,r=i&&t.length;r&&s&&-1===o?this.selectedFeatureIndex=0:r&&-1!==o||(this.selectedFeatureIndex=t.length?0:-1);}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=R$s(e)),this._set("location",e);}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return !(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||0!==this.featureCount)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach((e=>{this._pendingPromises.add(e);const t=t=>{this._pendingPromises.has(e)&&this._updateFeatures(t),this._updatePendingPromises(e);},s=()=>this._updatePendingPromises(e);e.then(t,s);})),this.notifyChange("pendingPromisesCount");}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;if(-1===t)return null;return e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return "number"==typeof e?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this._set("selectedFeatureIndex",e);}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=u$p(this);if(!t){const s=new s$2l("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return G$2.error(s),Promise.reject(s)}return this.callGoTo({target:{target:t,scale:e.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null});}fetchFeatures(e,t){const{view:s}=this;if(!s||!e){const t=new s$2l("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:s});return G$2.error(t),Promise.reject(t)}return s.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:s}=t;delete t.fetchFeatures,s&&this._setFetchFeaturesPromises(t.location),this.set(t);}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t});}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){p$z(this),this._clearBrowsedClusterGraphics();}async enableClusterBrowsing(){await w$6(this),await v$7(this);}_animationStateChange(e){this.zoomToLocation||(o$n.disabled="waiting-for-target"===e);}_clearBrowsedClusterGraphics(){var e;const t=null==(e=this.view)?void 0:e.graphics;t&&(t.remove(this.selectedClusterBoundaryFeature),t.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null;}_viewScaleChange(){var e;(null!=(e=this.selectedFeature)&&e.isAggregate||this.browseClusterEnabled)&&(this.browseClusterEnabled=!1,this.visible=!1);}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:s}=this;s&&e&&(!t||t.geometry)&&this.centerAtLocation();}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null;}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null;}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:s,featuresPerPage:i,featureViewModels:o}=this;if(null===s)return;const r=((s-1)*i+t)%t,n=r+i;o.slice(r,n).forEach(((t,s)=>{t&&!t.graphic&&(t.graphic=e[r+s]);}));}async _selectedFeatureChange(e){if(!e)return;const{location:t,updateLocationEnabled:s,view:i}=this;if(this.browseClusterEnabled){if(this._selectedClusterFeature&&(i.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),e.isAggregate)return;return e.symbol=await f$v(e),this._selectedClusterFeature=e,void i.graphics.add(this._selectedClusterFeature)}!s&&t||!e.geometry?s&&!e.geometry&&this.centerAtLocation().then((()=>{this.location=i.center.clone();})):this.location=e$23(this._getPointFromGeometry(e.geometry));}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1);}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then((e=>{const{clientOnlyGraphics:t,promisesPerLayerView:s}=e,i=Promise.resolve(t),o=s.map((e=>e.promise));this.promises=[i,...o];}))}_destroyFeatureVMs(){this.featureViewModels.forEach((e=>e&&!e.destroyed&&e.destroy())),this._set("featureViewModels",[]);}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:s}=this;if(null!=e&&e.isAggregate||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const i=s.slice(0),o=[];t.forEach(((t,s)=>{if(!t)return;let r=null;if(i.some(((e,s)=>(e&&e.graphic===t&&(r=e,i.splice(s,1)),!!r))),r)o[s]=r;else {var n,a;const i=new G$3({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(n=this.view)?void 0:n.spatialReference,graphic:t===e?t:null,map:null==(a=this.view)?void 0:a.map,view:this.view});o[s]=i;}})),i.forEach((e=>e&&!e.destroyed&&e.destroy())),this._set("featureViewModels",o);}_getScreenPoint(e){const{view:t}=this;return t&&e&&"function"==typeof t.toScreen?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:s}=this;if(t.remove(e),s&&this.view){const s=this.view.on("click",(e=>{"mouse"===e.pointerType&&0!==e.button||this._fetchFeaturesAndOpen(e);}),u$q.WIDGET);t.add(s,e);}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult");}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const s=new AbortController,{signal:i}=s;this._fetchFeaturesController=s,this.notifyChange("waitingForResult");const o=this.fetchFeatures(e,{signal:i,event:t});return o.catch((()=>{})).then((()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult");})),o}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:s}=e,{view:i}=this;this._fetchFeaturesWithController(t,e).then((e=>{const{clientOnlyGraphics:t,promisesPerLayerView:o,location:r}=e,n=[Promise.resolve(t),...o.map((e=>e.promise))];return i.popup.open({location:r||s,promises:n}),e}));}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"));}_autoClose(){this.autoCloseEnabled&&(this.visible=!1);}_getPointFromGeometry(e){return t$1T(e)?null:"point"===e.type?e:"extent"===e.type?e.center:"polygon"===e.type?e.centroid:"multipoint"===e.type||"polyline"===e.type?e.extent.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}async _highlightFeature(){const e="highlight";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:s,view:i,visible:o}=this;if(!(t&&i&&s&&o))return;let{layer:r,sourceLayer:n}=t;if("map-notes"!==(null==n?void 0:n.type)&&"subtype-group"!==(null==n?void 0:n.type)||(r=n),!(r&&r instanceof b$v))return;const a=this._getLayerView(i,r);this._highlightPromise=a;const l=await a;if(!(l&&e$13(l)&&this._highlightPromise===a&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const u="objectIdField"in r&&r.objectIdField,h=t.attributes,c=h&&u&&h[u],p=l.highlight(c||t);this._handles.add(p,e);}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const s=e.filter((e=>-1===t.indexOf(e)));this.features=t.concat(s);}};e$25([d$1T()],z$3.prototype,"featurePage",void 0),e$25([d$1T()],z$3.prototype,"isLoadingFeature",null),e$25([d$1T({type:T$4})],z$3.prototype,"actions",void 0),e$25([d$1T({readOnly:!0})],z$3.prototype,"active",null),e$25([d$1T({readOnly:!0})],z$3.prototype,"allActions",null),e$25([d$1T({type:Boolean})],z$3.prototype,"defaultPopupTemplateEnabled",void 0),e$25([d$1T()],z$3.prototype,"autoCloseEnabled",void 0),e$25([d$1T()],z$3.prototype,"autoOpenEnabled",void 0),e$25([d$1T()],z$3.prototype,"browseClusterEnabled",void 0),e$25([d$1T()],z$3.prototype,"content",void 0),e$25([d$1T({type:T$4,readOnly:!0})],z$3.prototype,"defaultActions",null),e$25([d$1T({readOnly:!0})],z$3.prototype,"featureCount",null),e$25([d$1T()],z$3.prototype,"features",null),e$25([d$1T()],z$3.prototype,"featuresPerPage",void 0),e$25([d$1T()],z$3.prototype,"featureViewModelAbilities",void 0),e$25([d$1T({readOnly:!0})],z$3.prototype,"featureViewModels",void 0),e$25([d$1T()],z$3.prototype,"highlightEnabled",void 0),e$25([d$1T()],z$3.prototype,"includeDefaultActions",void 0),e$25([d$1T({type:b$10})],z$3.prototype,"location",null),e$25([d$1T({readOnly:!0})],z$3.prototype,"pendingPromisesCount",null),e$25([d$1T({readOnly:!0})],z$3.prototype,"selectedClusterBoundaryFeature",void 0),e$25([d$1T({readOnly:!0})],z$3.prototype,"waitingForResult",null),e$25([d$1T({readOnly:!0})],z$3.prototype,"promiseCount",null),e$25([d$1T()],z$3.prototype,"promises",null),e$25([d$1T({value:null,readOnly:!0})],z$3.prototype,"selectedFeature",null),e$25([d$1T({value:-1})],z$3.prototype,"selectedFeatureIndex",null),e$25([d$1T({readOnly:!0})],z$3.prototype,"selectedFeatureViewModel",null),e$25([d$1T({readOnly:!0})],z$3.prototype,"state",null),e$25([d$1T()],z$3.prototype,"title",void 0),e$25([d$1T()],z$3.prototype,"updateLocationEnabled",void 0),e$25([d$1T()],z$3.prototype,"view",void 0),e$25([d$1T()],z$3.prototype,"visible",void 0),e$25([d$1T()],z$3.prototype,"zoomFactor",void 0),e$25([d$1T()],z$3.prototype,"zoomToLocation",void 0),e$25([d$1T()],z$3.prototype,"centerAtLocation",null),z$3=e$25([i$2z(R$4)],z$3);const U$5=z$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const O$4="selected-index",N$3=0,B$2="popup-spinner",T$3={iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button"},D$4={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},E$5="esri-popup";function P$6(e,t){return void 0===t?`${E$5}__${e}`:`${E$5}__${e}-${t}`}const L$5="esri.widgets.Popup",S$6=s$2n.getLogger(L$5),V$2={closeButton:!0,featureNavigation:!0};let R$3=class extends(i$G(z$o)){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new u$25,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([e])=>{null!=e&&e.isIntersecting&&this.viewModel.featurePage++;},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback),this._displaySpinnerThrottled=e$v((()=>this._displaySpinner()),N$3),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new U$5,this.visible=null,this.visibleElements={...V$2},this._addSelectedFeatureIndexHandle(),this.own([f$1B(this,"viewModel.screenLocation",(()=>this._positionContainer())),f$1B(this,["viewModel.active","dockEnabled"],(()=>this._toggleScreenLocationEnabled())),f$1B(this,"viewModel.screenLocation",((e,t)=>{!!e!=!!t&&this.reposition();})),f$1B(this,["viewModel.view.padding","viewModel.view.size","viewModel.active","viewModel.location","alignment"],(()=>this.reposition())),f$1B(this,"spinnerEnabled",(e=>this._spinnerEnabledChange(e))),f$1B(this,"viewModel.view.size",((e,t)=>this._updateDockEnabledForViewSize(e,t))),f$1B(this,"viewModel.view",((e,t)=>this._viewChange(e,t))),f$1B(this,"viewModel.view.ready",((e,t)=>this._viewReadyChange(e,t))),f$1B(this,["viewModel.waitingForResult","viewModel.location"],(()=>{this._hideSpinner(),this._displaySpinnerThrottled();})),f$1B(this,["selectedFeatureWidget.viewModel.title","selectedFeatureWidget.viewModel.state"],(()=>this._setTitleFromFeatureWidget())),f$1B(this,["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.state"],(()=>this._setContentFromFeatureWidget())),h$1w(this,"collapsed",(()=>{var e,t;"xsmall"===(null==(e=this.viewModel)||null==(t=e.view)?void 0:t.widthBreakpoint)&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation();})),$$g(this,"viewModel.allActions","change",(()=>this._watchActions())),i$2x(this,"viewModel.allActions",(()=>this._watchActions())),f$1B(this,"viewModel.featureViewModels",(()=>this._featureMenuViewportScrollTop()))]);}destroy(){var e,t;this._destroySelectedFeatureWidget(),this._destroySpinner(),null==(e=this._handles)||e.destroy(),this._unobserveFeatureMenuObserver(),null==(t=this._featureMenuIntersectionObserver)||t.disconnect(),this._handles=null;}get actionsMenuId(){return `${this.id}-actions-menu`}get actionsMenuButtonId(){return `${this.id}-actions-menu-button`}get featureMenuId(){return `${this.id}-feature-menu`}get titleId(){return `${this.id}-popup-title`}get contentId(){return `${this.id}-popup-content`}get hasContent(){var e,t,i,o,n,s,r;return !!(this.selectedFeatureWidget?(null==(e=this.selectedFeatureWidget)||null==(t=e.viewModel)?void 0:t.waitingForContent)||"error"===(null==(i=this.selectedFeatureWidget)||null==(o=i.viewModel)?void 0:o.state)||(null==(n=this.selectedFeatureWidget)||null==(s=n.viewModel)?void 0:s.content):null==(r=this.viewModel)?void 0:r.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return !!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e);}get actionsMenuOpen(){return !!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||D$4}set dockOptions(e){const t={...D$4},i=this.get("viewModel.view.breakpoints"),o={};i&&(o.width=i.xsmall,o.height=i.xsmall);const n={...t,...e},s={...t.breakpoint,...o},{breakpoint:r}=n;!0===r?n.breakpoint=s:"object"==typeof r&&(n.breakpoint={...s,...r}),this._set("dockOptions",n),this._setCurrentDockPosition(),this.reposition();}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:i}=this,{selectedFeatureViewModel:o}=this.viewModel,n={...t,title:!1};return o?(e?(e.viewModel=o,e.visibleElements=n):this._feature=new w$7({headingLevel:i+1,viewModel:o,visibleElements:n}),this._feature):null}castVisibleElements(e){return {...V$2,...e}}blur(){const{active:e}=this.viewModel;e||S$6.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender();}clear(){this.viewModel.clear();}close(){this.visible=!1;}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||S$6.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender();}next(){return this.viewModel.next()}open(e){var t,i;this._handles.remove(O$4);const o=!!e&&!!e.featureMenuOpen,n=!!e&&!!e.actionsMenuOpen,s={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:n,featureMenuOpen:o};"xsmall"===(null==(t=this.viewModel)||null==(i=t.view)?void 0:i.widthBreakpoint)&&(s.collapsed=!0),this.set(s),this.viewModel.open(e),this._addSelectedFeatureIndexHandle();}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment();}triggerAction(e){this.viewModel.triggerAction(e);}render(){var e,t,i,o;const{actionsMenuOpen:n,dockEnabled:s,featureMenuVisible:r,dividedActions:a,currentAlignment:l,currentDockPosition:u}=this,{active:c}=this.viewModel,{menuActions:d}=a,p=c&&d.length>1&&n,h=c&&s,g=c&&!s,_=null==(e=this.selectedFeature)||null==(t=e.layer)?void 0:t.title,f=null==(i=this.selectedFeature)||null==(o=i.layer)?void 0:o.id,v={[T$3.alignTopCenter]:"top-center"===l,[T$3.alignBottomCenter]:"bottom-center"===l,[T$3.alignTopLeft]:"top-left"===l,[T$3.alignBottomLeft]:"bottom-left"===l,[T$3.alignTopRight]:"top-right"===l,[T$3.alignBottomRight]:"bottom-right"===l,[T$3.isDocked]:h,[T$3.shadow]:g,[T$3.isDockedTopLeft]:"top-left"===u,[T$3.isDockedTopCenter]:"top-center"===u,[T$3.isDockedTopRight]:"top-right"===u,[T$3.isDockedBottomLeft]:"bottom-left"===u,[T$3.isDockedBottomCenter]:"bottom-center"===u,[T$3.isDockedBottomRight]:"bottom-right"===u,[T$3.isFeatureMenuOpen]:r,[T$3.isActionsMenuOpen]:p};return n$2g("div",{class:this.classes(T$3.base,v),role:"presentation","data-layer-title":_,"data-layer-id":f,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},c?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return n$2g("span",{"aria-hidden":"true",class:this.classes(T$3.icon,T$3.iconLoading,T$3.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?n$2g("div",{key:P$6("loading-container"),role:"presentation",class:T$3.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=d$1N(this.container),t={[T$3.iconRightTriangleArrow]:e,[T$3.paginationPreviousIconRTL]:e,[T$3.iconLeftTriangleArrow]:!e,[T$3.paginationPreviousIconLTR]:!e};return n$2g("span",{"aria-hidden":"true",class:this.classes(T$3.icon,t)})}renderPreviousButton(){const{messages:e}=this;return n$2g("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(T$3.button,T$3.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=d$1N(this.container),t={[T$3.iconLeftTriangleArrow]:e,[T$3.paginationNextIconRTL]:e,[T$3.iconRightTriangleArrow]:!e,[T$3.paginationNextIconLTR]:!e};return n$2g("span",{"aria-hidden":"true",class:this.classes(T$3.icon,t)})}renderNextButton(){const{messages:e}=this;return n$2g("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(T$3.button,T$3.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:i}=this,{featureCount:o,selectedFeatureIndex:n}=this.viewModel;return n$2g("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(T$3.button,T$3.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":i.menu,title:i.menu},this._getPageText(o,n))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),i={[T$3.iconUndock]:e,[T$3.iconDock]:!e,[T$3.iconDockToRight]:!e&&("top-right"===t||"bottom-right"===t),[T$3.iconDockToLeft]:!e&&("top-left"===t||"bottom-left"===t),[T$3.iconDockToTop]:!e&&"top-center"===t,[T$3.iconDockToBottom]:!e&&"bottom-center"===t};return n$2g("span",{"aria-hidden":"true",class:this.classes(i,T$3.icon)})}renderDockButton(){var e,t,i;const{dockEnabled:o,messages:n}=this,s=null==(e=this.viewModel)||null==(t=e.view)?void 0:t.widthBreakpoint,r=o?n.undock:n.dock;return "xsmall"!==s&&null!=(i=this.dockOptions)&&i.buttonEnabled?n$2g("div",{role:"button","aria-label":r,title:r,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(T$3.button,T$3.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:i,contentCollapsed:o,messagesCommon:n}=this,s={[T$3.headerContainerButton]:i},r=n$2g(s$1w,{level:this.headingLevel,class:T$3.headerTitle,innerHTML:e}),a=i?n$2g("button",{key:`${e}--collapsible`,id:t,title:o?n.expand:n.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(T$3.headerContainer,s),"aria-expanded":o?"false":"true",onclick:this._toggleCollapsed},r):n$2g("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(T$3.headerContainer,s)},r);return e?a:null}renderCloseIcon(){return n$2g("span",{"aria-hidden":"true",class:this.classes(T$3.icon,T$3.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?n$2g("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:T$3.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return n$2g("header",{class:T$3.header},this.renderTitle(),n$2g("div",{class:T$3.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:i}=this,{content:o}=this.viewModel;return t&&!i?n$2g("article",{key:o,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:T$3.content},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:o,messagesCommon:n}=this,s=i?n.close:n.open,{menuActions:r}=o;return r.length?n$2g("div",{key:P$6("actions-menu-button"),class:this.classes(T$3.button,T$3.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":i?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":s,title:s},n$2g("span",{"aria-hidden":"true",class:T$3.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:o}=this,{menuActions:n,inlineActions:s}=o;return n.length&&i?n$2g("ul",{id:e,role:"menu","aria-labelledby":t,key:P$6("actions"),class:T$3.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},n.toArray().map(((e,t)=>this.renderAction({action:e,index:t+s.length,type:"menu-item"})))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return !!e.length&&e.toArray().map(((e,t)=>this.renderAction({action:e,index:t,type:"inline"})))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,i=!!e.length,o=!!t.length;return i||o?n$2g("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":o.toString(),class:T$3.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?n$2g("section",{key:P$6("navigation"),class:this.classes(T$3.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:i,menuActions:o}=t,n=!!i.length,s=!!o.length,r={[T$3.footerHasPagination]:e,[T$3.footerHasActions]:n,[T$3.footerHasActionsMenu]:s};return e||n?n$2g("div",{key:P$6("feature-buttons"),class:this.classes(T$3.footer,r)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:i}=this.viewModel,o=s$22(e.selectedFeatures,{total:t.length});return n$2g("section",{key:P$6("menu"),class:T$3.featureMenu},n$2g("strong",{class:T$3.featureMenuHeader},o),n$2g("nav",{bind:this,class:T$3.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:g$13},this.renderFeatureMenu(),n$2g("div",{class:T$3.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?n$2g("div",{class:T$3.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:n$2g("div",{key:P$6("pointer"),class:T$3.pointer,role:"presentation"},n$2g("div",{class:this.classes(T$3.pointerDirection,T$3.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:i,titleId:o,contentId:n,collapsible:s,hasContent:r,contentCollapsed:a,visibleElements:l}=this,{title:u}=this.viewModel,c="bottom-left"===t||"bottom-center"===t||"bottom-right"===t||"top-left"===i||"top-center"===i||"top-right"===i,d="top-left"===t||"top-center"===t||"top-right"===t||"bottom-left"===i||"bottom-center"===i||"bottom-right"===i,p={[T$3.shadow]:e,[T$3.isCollapsible]:s,[T$3.isCollapsed]:a};return n$2g("div",{class:this.classes(T$3.main,T$3.widget,p),tabIndex:l.closeButton?null:-1,role:"dialog","aria-labelledby":u?o:"","aria-describedby":r&&!a?n:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},c?this.renderFooter():null,c?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),d?this.renderFooter():null,d?this.renderFeatureMenuContainer():null)}renderContent(){var e;const t=null==(e=this.viewModel)?void 0:e.content;return t?"string"==typeof t?n$2g("div",{key:t,innerHTML:t}):this.renderNodeContent(t):null}renderActionText(e){return n$2g("span",{key:"text",class:T$3.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),i=this._getActionImage(e),o={[T$3.iconLoading]:e.active,[T$3.rotating]:e.active,[T$3.icon]:!!t,[T$3.actionImage]:!e.active&&!!i};return t&&(o[t]=!e.active),n$2g("span",{key:"icon","aria-hidden":"true",class:this.classes(T$3.icon,o),styles:this._getIconStyles(i)})}renderAction(e){const{action:t,index:i,type:o}=e,n=this._getActionTitle(t),s={[T$3.action]:"toggle"!==t.type,[T$3.actionToggle]:"toggle"===t.type,[T$3.actionToggleOn]:"toggle"===t.type&&t.value,[T$3.buttonDisabled]:t.disabled},r=[this.renderActionIcon(t),this.renderActionText(n)],a="menu-item"===o?n$2g("li",{key:t.uid,role:"menuitem",tabIndex:0,title:n,"aria-label":n,class:this.classes(T$3.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":i,onclick:this._triggerAction,onkeydown:this._triggerAction},r):n$2g("div",{key:t.uid,role:"button",tabIndex:0,title:n,"aria-label":n,class:this.classes(T$3.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":i,onclick:this._triggerAction,onkeydown:this._triggerAction},r);return t.visible?a:null}renderFeatureMenuItem(e,t){const{messages:i,messagesCommon:o}=this,{selectedFeatureIndex:n,selectedFeatureViewModel:s}=this.viewModel,r=e===s,a={[T$3.featureMenuSelected]:r},l=r?n$2g("span",{key:P$6(`feature-menu-selected-feature-${n}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:T$3.iconCheckMark}):null,u=n$2g("span",{innerHTML:e.title||o.untitled});return n$2g("li",{role:"menuitem",tabIndex:-1,key:P$6(`feature-menu-feature-${n}`),class:this.classes(a,T$3.featureMenuItem),bind:this,"data-feature-index":t,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},n$2g("span",{class:T$3.featureMenuTitle},u,l))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?n$2g("ol",{class:T$3.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter((e=>!!e.graphic)).map(((e,t)=>this.renderFeatureMenuItem(e,t)))):null}_getActionTitle(e){const{messages:t,selectedFeature:i,messagesCommon:o}=this,{id:n}=e,s=null==i?void 0:i.attributes,r="zoom-to-feature"===n?s$22(e.title,{messages:t}):"remove-selected-feature"===n?s$22(e.title,{messages:o}):"zoom-to-clustered-features"===n||"browse-clustered-features"===n?s$22(e.title,{messages:t}):e.title;return r&&s?s$22(r,s):r}_getActionClass(e){const{selectedFeature:t}=this,i=null==t?void 0:t.attributes,{className:o,image:n}=e,s=n||o?o:T$3.iconDefaultAction;return s&&i?s$22(s,i):s}_getActionImage(e){const{selectedFeature:t}=this,i=null==t?void 0:t.attributes,{image:o}=e;return o&&i?s$22(o,i):o}_createFeatureUpdatedAnimation(){return f$1y("enter",T$3.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if("number"!=typeof e)return null;const i=Math.round(e);return Math.max(t?i-1:i,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach((e=>{this._handles.add(f$1B(e,["active","className","disabled","id","title","image","visible"],(()=>this.scheduleRender())),t);}));}_divideActions(){const{allActions:e}=this.viewModel,i=this._getInlineActionCount(),o=null===i,n=0===i;return {inlineActions:o?e.slice(0):n?new S$I:e.slice(0,i),menuActions:o?new S$I:n?e.slice(0):e.slice(i)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0;}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0;}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:e,messagesCommon:t}=this;var i,o;e&&(this.viewModel.title="error"===(null==(i=e.viewModel)?void 0:i.state)?t.errorMessage:(null==(o=e.viewModel)?void 0:o.title)||"");}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e);}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode);}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e;}_handleFeatureMenuKeyup(e){"Escape"===i$2L(e)&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender());}_handleActionMenuKeyup(e){"Escape"===i$2L(e)&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender());}_handleFeatureMenuItemKeyup(e){const t=i$2L(e),{_featureMenuNode:o}=this,n=e.currentTarget["data-feature-index"];if(!o)return;const s=o.querySelectorAll("li"),r=s.length;if("ArrowUp"!==t)if("ArrowDown"!==t)if("Home"!==t)if("End"!==t);else {e.stopPropagation();s[s.length-1].focus();}else {e.stopPropagation();s[0].focus();}else {e.stopPropagation();s[(n+1+r)%r].focus();}else {e.stopPropagation();s[(n-1+r)%r].focus();}}_handleActionMenuItemKeyup(e){const t=i$2L(e),{_actionsMenuNode:o}=this,n=e.currentTarget["data-action-index"];if(!o)return;const s=o.querySelectorAll("li"),r=s.length;if("ArrowUp"!==t)if("ArrowDown"!==t)if("Home"!==t)if("End"!==t);else {e.stopPropagation();s[s.length-1].focus();}else {e.stopPropagation();s[0].focus();}else {e.stopPropagation();s[(n+1+r)%r].focus();}else {e.stopPropagation();s[(n-1+r)%r].focus();}}_handleMainKeyup(e){const t=i$2L(e);"ArrowLeft"===t&&(e.stopPropagation(),this.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.next());}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t);}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide());}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:i}=this.viewModel;i?e.show({location:t}):e.hide();}_getIconStyles(e){return {"background-image":e?`url(${e})`:""}}_addSelectedFeatureIndexHandle(){const e=f$1B(this,"viewModel.selectedFeatureIndex",((e,t)=>this._selectedFeatureIndexUpdated(e,t)));this._handles.add(e,O$4);}_selectedFeatureIndexUpdated(e,t){const{featureCount:i}=this;i&&e!==t&&-1!==e&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1);}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null;}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:i,screenLocation:o,side:n,view:s}=e;if(isNaN(i)||isNaN(t)||!s||!o)return !1;const r=s.padding;return "right"===n&&o.x+i/2>s.width-r.right||("left"===n&&o.x-i/2<r.left||("top"===n&&o.y-t<r.top||"bottom"===n&&o.y+t>s.height-r.bottom))}_calculateAutoAlignment(e){if("auto"!==e)return e;const{_pointerOffsetInPx:t,_containerNode:i,_mainContainerNode:o,viewModel:n}=this,{screenLocation:r,view:a}=n;if(t$1T(r)||!a||!i)return "top-center";if(!this._isScreenLocationWithinView(r,a))return this._get("currentAlignment")||"top-center";function l(e){return parseInt(e.replace(/[^-\d\.]/g,""),10)}const u=o?window.getComputedStyle(o,null):null,c=u?l(u.getPropertyValue("max-height")):0,d=u?l(u.getPropertyValue("height")):0,{height:p,width:h}=i.getBoundingClientRect(),g=h+t,_=Math.max(p,c,d)+t,f=this._isOutsideView({popupHeight:_,popupWidth:g,screenLocation:r,side:"right",view:a}),v=this._isOutsideView({popupHeight:_,popupWidth:g,screenLocation:r,side:"left",view:a}),m=this._isOutsideView({popupHeight:_,popupWidth:g,screenLocation:r,side:"top",view:a}),b=this._isOutsideView({popupHeight:_,popupWidth:g,screenLocation:r,side:"bottom",view:a});return v?m?"bottom-right":"top-right":f?m?"bottom-left":"top-left":m?b?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return "function"==typeof e?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment());}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition());}_calculatePositionResult(e){const t=["left","right"];return d$1N(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return "function"==typeof e?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(e=this.dockOptions)?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var t;if("auto"!==e)return e;const i=null==(t=this.viewModel)?void 0:t.view,o=d$1N(this.container)?"top-left":"top-right";if(!i)return o;const n=i.padding||{left:0,right:0,top:0,bottom:0},s=i.width-n.left-n.right,{breakpoints:r}=i;return r&&s<=r.xsmall?"bottom-center":o}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:i}=e.getBoundingClientRect(),o=this._calculatePositionStyle(t,i);o&&(e.style.top=o.top,e.style.left=o.left,e.style.bottom=o.bottom,e.style.right=o.right);}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:i}=this;return "top-left"===t||"bottom-left"===t||"top-right"===t||"bottom-right"===t?e+i:e}_calculateAlignmentPosition(e,t,i,o){const{currentAlignment:n,_pointerOffsetInPx:s}=this,r=o/2,a=i.height-t,l=i.width-e,{padding:u}=this.view;return "bottom-center"===n?{top:t+s-u.top,left:e-r-u.left}:"top-left"===n?{bottom:a+s-u.bottom,right:l+s-u.right}:"bottom-left"===n?{top:t+s-u.top,right:l+s-u.right}:"top-right"===n?{bottom:a+s-u.bottom,left:e+s-u.left}:"bottom-right"===n?{top:t+s-u.top,left:e+s-u.left}:"top-center"===n?{bottom:a+s-u.bottom,left:e-r-u.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:i,view:o}=this;if(!o)return;if(i)return {left:"",top:"",right:"",bottom:""};if(t$1T(e)||!t)return;const n=this._calculateFullWidth(t),r=this._calculateAlignmentPosition(e.x,e.y,o,n);return r?{top:void 0!==r.top?`${r.top}px`:"auto",left:void 0!==r.left?`${r.left}px`:"auto",bottom:void 0!==r.bottom?`${r.bottom}px`:"auto",right:void 0!==r.right?`${r.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear());}_viewReadyChange(e,t){if(e){const e=this.get("viewModel.view");this._wireUpView(e);}else t&&(this.close(),this.clear());}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions);}_dockingThresholdCrossed(e,t,i){const[o,n]=e,[s,r]=t,{width:a,height:l}=i;return o<=a&&s>a||o>a&&s<=a||n<=l&&r>l||n>l&&r<=l}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},o=i.left+i.right,n=i.top+i.bottom,s=[],r=[];s[0]=e[0]-o,s[1]=e[1]-n,r[0]=t[0]-o,r[1]=t[1]-n;const{dockOptions:a}=this,l=a.breakpoint;this._dockingThresholdCrossed(s,r,l)&&this._setDockEnabledForViewSize(a),this._setCurrentDockPosition();}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus());}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");if(t.length){t[0].focus();}}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");if(t.length){t[0].focus();}}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus());}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus());}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0);}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const i=t.active&&!e;t.screenLocationEnabled=i;}_shouldDockAtCurrentViewSize(e){var t,i;const o=e.breakpoint,n=null==(t=this.viewModel)||null==(i=t.view)?void 0:i.ui;if(!n)return !1;const{width:s,height:r}=n;if(isNaN(s)||isNaN(r))return !1;const a=o.hasOwnProperty("width")&&s<=o.width,l=o.hasOwnProperty("height")&&r<=o.height;return a||l}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e));}_getPageText(e,t){return this.featureNavigationVisible?s$22(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,B$2),e.destroy(),this._spinner=null);}_createSpinner(e){e&&(this._spinner=new m$q({view:e}),e.ui.add(this._spinner,{key:B$2,position:"manual"}));}_toggleCollapsed(){this.collapsed=!this.collapsed;}_close(){this.close(),this.view&&this.view.focus();}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender();}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e;}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e;}_triggerAction(e){const t=e.currentTarget["data-action-index"],i=this.viewModel.allActions.getItemAt(t);i&&"toggle"===i.type&&(i.value=!i.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(t);}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender();}_next(){this.next();}_previous(){this.previous();}};e$25([d$1T({readOnly:!0})],R$3.prototype,"actionsMenuId",null),e$25([d$1T({readOnly:!0})],R$3.prototype,"actionsMenuButtonId",null),e$25([d$1T({readOnly:!0})],R$3.prototype,"featureMenuId",null),e$25([d$1T({readOnly:!0})],R$3.prototype,"titleId",null),e$25([d$1T({readOnly:!0})],R$3.prototype,"contentId",null),e$25([d$1T({readOnly:!0})],R$3.prototype,"hasContent",null),e$25([d$1T({readOnly:!0})],R$3.prototype,"featureNavigationVisible",null),e$25([d$1T({readOnly:!0})],R$3.prototype,"collapsible",null),e$25([d$1T({readOnly:!0})],R$3.prototype,"featureMenuVisible",null),e$25([d$1T({readOnly:!0})],R$3.prototype,"contentCollapsed",null),e$25([d$1T({readOnly:!0})],R$3.prototype,"dividedActions",null),e$25([o$1K("viewModel.actions")],R$3.prototype,"actions",void 0),e$25([d$1T()],R$3.prototype,"actionsMenuOpen",null),e$25([d$1T()],R$3.prototype,"alignment",void 0),e$25([o$1K("viewModel.autoCloseEnabled")],R$3.prototype,"autoCloseEnabled",void 0),e$25([o$1K("viewModel.autoOpenEnabled")],R$3.prototype,"autoOpenEnabled",void 0),e$25([o$1K("viewModel.defaultPopupTemplateEnabled")],R$3.prototype,"defaultPopupTemplateEnabled",void 0),e$25([o$1K("viewModel.content")],R$3.prototype,"content",void 0),e$25([d$1T()],R$3.prototype,"collapsed",void 0),e$25([d$1T()],R$3.prototype,"collapseEnabled",void 0),e$25([d$1T({readOnly:!0})],R$3.prototype,"currentAlignment",null),e$25([d$1T({readOnly:!0})],R$3.prototype,"currentDockPosition",null),e$25([d$1T()],R$3.prototype,"dockOptions",null),e$25([d$1T()],R$3.prototype,"dockEnabled",void 0),e$25([o$1K("viewModel.featureCount")],R$3.prototype,"featureCount",void 0),e$25([d$1T()],R$3.prototype,"featureMenuOpen",void 0),e$25([o$1K("viewModel.features")],R$3.prototype,"features",void 0),e$25([o$1K("viewModel.goToOverride")],R$3.prototype,"goToOverride",void 0),e$25([d$1T()],R$3.prototype,"headingLevel",void 0),e$25([o$1K("viewModel.highlightEnabled")],R$3.prototype,"highlightEnabled",void 0),e$25([o$1K("viewModel.location")],R$3.prototype,"location",void 0),e$25([d$1T({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],R$3.prototype,"label",void 0),e$25([d$1T()],R$3.prototype,"maxInlineActions",void 0),e$25([d$1T(),e$1g("esri/widgets/Popup/t9n/Popup")],R$3.prototype,"messages",void 0),e$25([d$1T(),e$1g("esri/t9n/common")],R$3.prototype,"messagesCommon",void 0),e$25([o$1K("viewModel.promises")],R$3.prototype,"promises",void 0),e$25([o$1K("viewModel.selectedFeature")],R$3.prototype,"selectedFeature",void 0),e$25([o$1K("viewModel.selectedFeatureIndex")],R$3.prototype,"selectedFeatureIndex",void 0),e$25([d$1T({readOnly:!0})],R$3.prototype,"selectedFeatureWidget",null),e$25([d$1T()],R$3.prototype,"spinnerEnabled",void 0),e$25([o$1K("viewModel.title")],R$3.prototype,"title",void 0),e$25([o$1K("viewModel.updateLocationEnabled")],R$3.prototype,"updateLocationEnabled",void 0),e$25([o$1K("viewModel.view")],R$3.prototype,"view",void 0),e$25([d$1T({type:U$5}),t$1e(["triggerAction","trigger-action"])],R$3.prototype,"viewModel",void 0),e$25([o$1K("viewModel.visible")],R$3.prototype,"visible",void 0),e$25([d$1T()],R$3.prototype,"visibleElements",void 0),e$25([c$35("visibleElements")],R$3.prototype,"castVisibleElements",null),e$25([t$1f()],R$3.prototype,"_close",null),e$25([t$1f()],R$3.prototype,"_toggleDockEnabled",null),e$25([t$1f()],R$3.prototype,"_toggleFeatureMenu",null),e$25([t$1f()],R$3.prototype,"_toggleActionsMenu",null),e$25([t$1f()],R$3.prototype,"_triggerAction",null),e$25([t$1f()],R$3.prototype,"_selectFeature",null),e$25([t$1f()],R$3.prototype,"_next",null),e$25([t$1f()],R$3.prototype,"_previous",null),R$3=e$25([i$2z(L$5)],R$3);const U$4=R$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u$o=[0,0];function l$u(e){const t=(e.ownerDocument||window.document).defaultView,s=e.getBoundingClientRect();return u$o[0]=s.left+t.pageXOffset,u$o[1]=s.top+t.pageYOffset,u$o}function p$y(e){e&&(t$1y(e),e.parentNode&&e.parentNode.removeChild(e));}function c$F(e){const t=document.createElement("div");return e.appendChild(t),t}const m$p=16,f$c=750,y$b=512,v$6=2,_$7=i=>{let u=class extends i{constructor(...e){super(...e),this._freqInfo={freq:m$p,time:f$c},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([this.watch("cursor",(e=>{const t=this.surface;t&&t.setAttribute("data-cursor",e);})),this.watch("interacting",(e=>{const t=this.surface;t&&t.setAttribute("data-interacting",e.toString());}))]);}initialize(){this.handles.add(this.watch("ui",((e,t)=>this._handleUIChange(e,t)))),this._wireUI(this.ui),this.handles.add([this.on("focus",(()=>this.notifyChange("focused"))),this.on("blur",(()=>this.notifyChange("focused")))]);}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null);}set container(e){const s=this._get("container");if(s===e)return;const i="dom-size";if(this.handles.remove(i),this._stopMeasuring(),s&&(s.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),p$y(this.root),this._set("root",null),r$1t(this.userContent,s),p$y(this.userContent),this._set("userContent",null)),e){e.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",r$1t(e,s),e.appendChild(s),this._set("userContent",s);const n=document.createElement("div");n.className="esri-view-root",e.insertBefore(n,e.firstChild),this._set("root",n);const h=document.createElement("div");h.className="esri-view-surface",h.setAttribute("role","application"),h.tabIndex=0,n.appendChild(h),this._set("surface",h);const d=new n$14;n.appendChild(d.surface),this._set("overlay",d),d.watch("needsRender",(e=>{e&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=A$u({render:()=>{this.overlay.render();}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null);})),this.forceDOMReadyCycle(),this.handles.add(i$2x(this,"size",(e=>{const[t,s]=e,i="esri-view-surface--inset-outline";t>=document.body.clientWidth||s>=document.body.clientHeight?h.classList.add(i):h.classList.remove(i);})),i),this._set("container",e),this._startMeasuring();}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null);}get focused(){const e=document.activeElement===this.surface;return document.hasFocus()&&e}get popup(){return this._get("popup")||new U$4({view:this})}set popup(e){const t=this._get("popup");t&&t!==e&&t.destroy(),this._set("popup",e);}get size(){return [this.width,this.height]}blur(){this.surface&&this.surface.blur();}focus(){this.surface&&this.surface.focus();}pageToContainer(e,t,s){const i=this.position;return e-=i[0],t-=i[1],s?(s[0]=e,s[1]=t):s=[e,t],s}containerToPage(e,t,s){const i=this.position;return e+=i[0],t+=i[1],s?(s[0]=e,s[1]=t):s=[e,t],s}_handleUIChange(e,t){t&&(this.handles.remove("ui"),t.destroy()),e&&this._wireUI(e),this._set("ui",e);}_wireUI(e){this.handles.remove("ui"),e&&(e.view=this,this.handles.add([i$2x(this,"root",(t=>{e.container=t?c$F(t):null;})),i$2x(this,"popup",((t,s)=>{const i="popup",o="manual";s&&e.remove(s,i),t&&(t.view=e.view,e.add(t,{key:i,position:o}));}))],"ui"));}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1);}_startMeasuring(){const e=this._freqInfo;e.freq=m$p,e.time=f$c,this.handles.add([(()=>{const t=()=>{e.freq=m$p,e.time=f$c;};return window.addEventListener("resize",t),{remove(){window.removeEventListener("resize",t);}}})(),A$u({prepare:e=>{const t=this._measure(),s=this._freqInfo;if(s.time+=e.deltaTime,t&&(s.freq=m$p,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const i=this._position();s.freq=i||t?m$p:Math.min(f$c,s.freq*v$6),!t&&s.freq>=y$b&&this._get("resizing")&&this._set("resizing",!1);}})],"measuring"),this._measure(),this._position();}_measure(){const e=this.container,t=e?e.clientWidth:0,s=e?e.clientHeight:0;if(0===t||0===s)return this.suspended||this._set("suspended",!0),!1;const i=this.width,o=this.height;return t===i&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",t),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:i,oldHeight:o,width:t,height:s}),!0)}_position(){const e=this.container,t=this.position,s=l$u(e);return (!t||s[0]!==t[0]||s[1]!==t[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return e$25([d$1T({value:null,cast:e=>e$1J(e)})],u.prototype,"container",null),e$25([d$1T({readOnly:!0})],u.prototype,"focused",null),e$25([d$1T({readOnly:!0})],u.prototype,"height",void 0),e$25([d$1T({type:U$4})],u.prototype,"popup",null),e$25([d$1T({type:n$14})],u.prototype,"overlay",void 0),e$25([d$1T({readOnly:!0})],u.prototype,"position",void 0),e$25([d$1T({readOnly:!0})],u.prototype,"resizing",void 0),e$25([d$1T({readOnly:!0})],u.prototype,"root",void 0),e$25([d$1T({value:null,readOnly:!0})],u.prototype,"size",null),e$25([d$1T({readOnly:!0})],u.prototype,"surface",void 0),e$25([d$1T({readOnly:!0})],u.prototype,"suspended",void 0),e$25([d$1T()],u.prototype,"ui",void 0),e$25([d$1T({readOnly:!0})],u.prototype,"userContent",void 0),e$25([d$1T({readOnly:!0})],u.prototype,"width",void 0),e$25([d$1T()],u.prototype,"widthBreakpoint",void 0),u=e$25([i$2z("esri.views.DOMContainer")],u),u};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function d$l(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],i=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],o=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(n,i,o))}class P$5{constructor(t,n){this.min=t,this.max=n,this.range=n-t;}ndiff(t,n=0){return Math.ceil((t-n)/this.range)*this.range+n}_normalize(t,n,i,o=0,s=!1){return (i-=o)<t?i+=this.ndiff(t-i):i>n&&(i-=this.ndiff(i-n)),s&&i===n&&(i=t),i+o}normalize(t,n=0,i=!1){return this._normalize(this.min,this.max,t,n,i)}clamp(t,i=0){return e$1u(t-i,this.min,this.max)+i}monotonic(t,n,i){return t<n?n:n+this.ndiff(t-n,i)}minimalMonotonic(t,n,i){return this._normalize(t,t+this.range,n,i)}center(t,n,i){return n=this.monotonic(t,n,i),this.normalize((t+n)/2,i)}diff(t,n,i){return this.monotonic(t,n,i)-t}shortestSignedDiff(t,n){t=this.normalize(t);const i=(n=this.normalize(n))-t,o=n<t?this.minimalMonotonic(t,n)-t:n-this.minimalMonotonic(n,t);return Math.abs(i)<Math.abs(o)?i:o}contains(t,n,i){return n=this.minimalMonotonic(t,n),(i=this.minimalMonotonic(t,i))>t&&i<n}}function D$3(t){for(const n in t){const i=t[n];i instanceof Function&&(t[n]=i.bind(t));}return t}D$3(new P$5(0,2*Math.PI));D$3(new P$5(-Math.PI,Math.PI));const U$3=D$3(new P$5(0,360));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$n;let m$o=u$n=class extends a$2N{constructor(...o){super(...o),this.position=new b$10([0,0,0]),this.heading=0,this.tilt=0,this.fov=55;}normalizeCtorArgs(o,t,r,e){if(o&&"object"==typeof o&&("x"in o||Array.isArray(o))){const i={position:o};return null!=t&&(i.heading=t),null!=r&&(i.tilt=r),null!=e&&(i.fov=e),i}return o}writePosition(o,t,r,e){const i=o.clone();i.x=a$31(o.x||0),i.y=a$31(o.y||0),i.z=o.hasZ?a$31(o.z||0):o.z,t[r]=i.write({},e);}readPosition(o,t){const r=new b$10;return r.read(o,t),r.x=a$31(r.x||0),r.y=a$31(r.y||0),r.z=r.hasZ?a$31(r.z||0):r.z,r}equals(o){return !!o&&(this.tilt===o.tilt&&this.heading===o.heading&&this.fov===o.fov&&this.position.equals(o.position))}clone(){return new u$n({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})}};e$25([d$1T({type:b$10,json:{write:{isRequired:!0}}})],m$o.prototype,"position",void 0),e$25([r$1m("position")],m$o.prototype,"writePosition",null),e$25([o$1v("position")],m$o.prototype,"readPosition",null),e$25([d$1T({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),c$35((o=>U$3.normalize(a$31(o))))],m$o.prototype,"heading",void 0),e$25([d$1T({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),c$35((o=>e$1u(a$31(o),-180,180)))],m$o.prototype,"tilt",void 0),e$25([d$1T({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],m$o.prototype,"fov",void 0),m$o=u$n=e$25([i$2z("esri.Camera")],m$o);const d$k=m$o;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$n;let n$N=m$n=class extends a$2N{constructor(r){super(r),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null;}castRotation(r){return (r%=360)<0&&(r+=360),r}clone(){return new m$n({rotation:this.rotation,scale:this.scale,targetGeometry:r$1K(this.targetGeometry)?this.targetGeometry.clone():null,camera:r$1K(this.camera)?this.camera.clone():null})}};function l$t(){return {enabled:!this.camera}}e$25([d$1T({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:l$t}}}}})],n$N.prototype,"rotation",void 0),e$25([c$35("rotation")],n$N.prototype,"castRotation",null),e$25([d$1T({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:l$t}}}}})],n$N.prototype,"scale",void 0),e$25([d$1T({types:i$1W,json:{read:d$1o,write:!0,origins:{"web-scene":{read:d$1o,write:{overridePolicy:l$t}}}}})],n$N.prototype,"targetGeometry",void 0),e$25([d$1T({type:d$k,json:{write:!0}})],n$N.prototype,"camera",void 0),n$N=m$n=e$25([i$2z("esri.Viewpoint")],n$N);const u$m=n$N;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$J=a=>{let t=class extends a{async fetchPopupFeatures(e,s){await this.when();const{location:p,queryArea:a,layerViewsAndGraphics:t,clientOnlyGraphics:o}=await this._prepareFetchPopupFeatures(e,s),c=Promise.resolve(o),n=this._queryLayerPopupFeatures(a,t,s),l=n.map((e=>e.promise));return {location:p,clientOnlyGraphics:o,allGraphicsPromise:E$w([c,...l]).then(M$H),promisesPerLayerView:n}}_queryLayerPopupFeatures(e,r,i){return r.map((({layerView:r,graphics:p})=>{const a={clientGraphics:p,event:r$1K(i)?i.event:null,signal:r$1K(i)?i.signal:null,defaultPopupTemplateEnabled:!!r$1K(i)&&!!i.defaultPopupTemplateEnabled},t=r.fetchPopupFeatures(e,a);return {layerView:r,promise:t}}))}_isValidPopupGraphic(e,r){return e&&!!e.getEffectivePopupTemplate(r$1K(r)&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(e,r){const{clientGraphics:s,queryArea:i,location:p}=await this._popupHitTestGraphics(e,r),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:t,clientOnlyGraphics:o}=this._graphicsPerFetchPopupLayerView(s,a);return {clientOnlyGraphics:o,layerViewsAndGraphics:t,queryArea:i,location:p}}async _popupHitTestGraphics(e,r){const{results:s,mapPoint:i}=await this.popupHitTest(e),p=s.filter((e=>this._isValidPopupGraphic(e.graphic,r))),a=p.length?p[0].mapPoint:null;return {clientGraphics:p.map((e=>e.graphic)),queryArea:i,location:i||a}}_getFetchPopupLayerViews(){const e=[];return this.allLayerViews.forEach((r=>{this._isValidPopupLayerView(r)&&e.push(r);})),r$1K(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&e.push(this.graphicsView),e.reverse()}_isValidPopupLayerView(e){return r$1K(e)&&(!("layer"in e)||!e.suspended)&&"fetchPopupFeatures"in e}_graphicsPerFetchPopupLayerView(e,r){const s=[],i=new Map,p=r.map((e=>{const r=[];return "layer"in e?i.set(e.layer,r):i.set(e.graphics,r),{layerView:e,graphics:r}}));for(const a of e){const e=i.get(a.layer)||i.get(a.sourceLayer)||null;e?e.push(a):s.push(a);}return {layerViewsAndGraphics:p,clientOnlyGraphics:s}}};return t=e$25([i$2z("esri.views.PopupView")],t),t};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
s$2n.getLogger("esri.core.support.OwningCollection");let m$m=class extends(a$2w(S$I)){constructor(e){super(e),this.handles.add([this.on("before-add",(e=>{t$1T(e.item)&&e.preventDefault();})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(e=>this._release(e.item)))]);}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll());}_ownAll(){for(const e of this.items)this._own(e);}_releaseAll(){for(const e of this.items)this._release(e);}_createNewInstance(e){return this.itemType?new(S$I.ofType(this.itemType.Type))(e):new S$I(e)}};function a$I(e,t){return {type:e,cast:t$1u,set(s){const r=n$2t(s,this._get(t),e);r.owner=this,this._set(t,r);}}}e$25([d$1T()],m$m.prototype,"owner",null),m$m=e$25([i$2z("esri.core.support.OwningCollection")],m$m);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$E=class extends m$m{_own(r){r.layer&&"remove"in r.layer&&r.layer!==this.owner&&r.layer.remove(r),r.layer=this.owner;}_release(r){r.layer===this.owner&&(r.layer=null);}};e$25([n$2C({Type:h$X,ensureType:b$14(h$X)})],c$E.prototype,"itemType",void 0),c$E=e$25([i$2z("esri.support.GraphicsCollection")],c$E);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let a$H=class extends p$3a{constructor(e){super(e),this.view=null,this.baseLayerViews=new S$I,this.referenceLayerViews=new S$I,this._loadingHandle=i$2x(this,"view.map.basemap",(e=>{e&&e.load().catch((()=>{}));}));}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);}get suspended(){return !this.view||this.view.suspended}get updating(){return (!this.view||!this.view.suspended)&&!(!(this.view&&this.view.map&&this.view.map.basemap)||this.view.map.basemap.loaded)}};e$25([d$1T({constructOnly:!0})],a$H.prototype,"view",void 0),e$25([d$1T({readOnly:!0})],a$H.prototype,"baseLayerViews",void 0),e$25([d$1T({readOnly:!0})],a$H.prototype,"referenceLayerViews",void 0),e$25([d$1T({readOnly:!0})],a$H.prototype,"suspended",null),e$25([d$1T({type:Boolean,readOnly:!0})],a$H.prototype,"updating",null),a$H=e$25([i$2z("esri.views.BasemapView")],a$H);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const _$6=s$2n.getLogger("esri.views.LayerViewManager");class g$c{constructor(e,r,t){this.layer=e,this.view=r,this.layerViewImporter=t,this._controller=new AbortController,this._deferred=A$x(),this._started=!1,this.done=!1,j$U(this._controller.signal,(()=>{const r=new s$2l("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(r);}));}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:e}=this;if(!e)return;const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:e}),i.emit("layerview-destroy",{layer:r,layerView:e}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null;}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:r,view:t}=this;this._map=t.map;try{var a,s;let l,y;if(await r.load({signal:e}),"prefetchResources"in r&&await r.prefetchResources({signal:e}),r.createLayerView)l=await r.createLayerView(t,{signal:e});else {if(!this.layerViewImporter.hasLayerViewModule(r))throw new s$2l("layer:view-not-supported","No layerview implementation was found");const a=await this.layerViewImporter.importLayerView(r);h$1E(e),l="default"in a?new a.default({layer:r,view:t}):new a({layer:r,view:t});}const h=()=>{y=s$2q(y),l.destroyed||l.destroy(),l.layer=null,l.parent=null,l.view=null,this.done=!0;};y=j$U(e,h),h$1E(e);try{await l.when();}catch(o){throw h(),o}if(!(null==(a=this._map)||null==(s=a.allLayers)?void 0:s.includes(r)))return h(),void this._deferred.reject(new s$2l("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=l,r.emit("layerview-create",{view:t,layerView:l}),t.emit("layerview-create",{layer:r,layerView:l}),this.done=!0,this._deferred.resolve(l);}catch(o){r.emit("layerview-create-error",{view:t,error:o}),t.emit("layerview-create-error",{layer:r,error:o}),this.done=!0,this._deferred.reject(new s$2l("layerview:create-error","layerview creation failed",{layer:r,error:o}));}}}let V$1=class extends d$1p{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new l$1S,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var e;const r=null==(e=this.view.map)?void 0:e.allLayers;if(r)for(const i of r)this.layerViewImporter.hasLayerViewModule(i)&&this.layerViewImporter.importLayerView(i);},this._reschedule=()=>(t$1T(this._workPromise)&&(this._workPromise=A$x()),this.handles.remove("reschedule"),this.handles.add(v$$(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var e,i,t;const a=this.view.map;if(this._map!==a&&(this.clear(),this._map=a),t$1T(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const s=new p$R({getCollections:()=>this._rootCollectionNames.map((e=>this.get(e))),getChildrenFunction:e=>e&&"layers"in e?e.layers:null});if(!s)return this._workPromise.resolve(),void(this._workPromise=null);for(const r of s)this._createLayerView(r);this._refreshCollections();for(const[r,o]of this._layerLayerViewInfoMap)s.includes(r)||(this._layerLayerViewInfoMap.delete(o.layer),o.destroy());const l=s.filter((e=>"group"===e.type)).map((e=>e.layers)),n=[null==a||null==(e=a.ground)?void 0:e.layers,null==a||null==(i=a.basemap)?void 0:i.baseLayers,null==a||null==(t=a.basemap)?void 0:t.referenceLayers,null==a?void 0:a.layers,...l].filter((e=>!!e));this.handles.add(n.map((e=>this._watchUpdatingTracking.addOnCollectionChange(e,this._reschedule))),"collection-change"),this._workPromise.resolve(),this._workPromise=null;};}initialize(){this.handles.add([$$g(this,"view.map.allLayers","change",this._preloadLayerViewModules,this._preloadLayerViewModules),i$2x(this.view,["map.basemap","map.ground","map.layers","ready"],this._reschedule,!0)]),this._preloadLayerViewModules(),this._reschedule();}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null;}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return r$1K(this._workPromise)||this._watchUpdatingTracking.updating||n$2H(this._layerLayerViewInfoMap,(e=>!e.done))}get updatingRemaining(){let e=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections();}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new s$2l("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,r]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining");}_populateLayerViewsOwners(e,r,i){if(!e||!r)return void(r&&r.removeAll());let t=0;for(const a of e){const e=this._layerLayerViewInfoMap.get(a);if(!e||!e.layerView)continue;const s=e.layerView;s.layer=a,s.parent=i,r.getItemAt(t)!==s&&r.splice(t,0,s),a.layers&&this._populateLayerViewsOwners(a.layers,s.layerViews,s),t+=1;}t<r.length&&r.splice(t,r.length);}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch((()=>{})),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const r=new g$c(e,this.view,this.layerViewImporter);r.promise.then((()=>this._refreshCollections()),(r=>{var i,t;r&&(d$1Z(r)||"cancelled:layerview-create"===r.name)||_$6.error(`Failed to create layerview for layer title:'${null!=(i=e.title)?i:"no title"}', id:'${null!=(t=e.id)?t:"no id"}' of type '${e.type}'.`,{layer:e,error:r});this._refreshCollections();})),this._layerLayerViewInfoMap.set(e,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining");}};e$25([d$1T()],V$1.prototype,"_workPromise",void 0),e$25([d$1T({readOnly:!0})],V$1.prototype,"_watchUpdatingTracking",void 0),e$25([d$1T({readOnly:!0})],V$1.prototype,"_layersToLayerViews",null),e$25([d$1T({readOnly:!0})],V$1.prototype,"_rootCollectionNames",null),e$25([d$1T()],V$1.prototype,"layerViewImporter",void 0),e$25([d$1T()],V$1.prototype,"supportsGround",void 0),e$25([d$1T({readOnly:!0})],V$1.prototype,"updating",null),e$25([d$1T({readOnly:!0})],V$1.prototype,"updatingRemaining",null),e$25([d$1T({constructOnly:!0})],V$1.prototype,"view",void 0),V$1=e$25([i$2z("esri.views.LayerViewManager")],V$1);const L$4=V$1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$D=class extends p$3a{constructor(o){super(o),this.factor=1.5,this.offset=c$2i(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0;}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};e$25([d$1T({type:Number})],i$D.prototype,"factor",void 0),e$25([d$1T({nonNullable:!0})],i$D.prototype,"offset",void 0),e$25([d$1T()],i$D.prototype,"position",void 0),e$25([d$1T({type:Number,range:{min:0}})],i$D.prototype,"size",void 0),e$25([d$1T()],i$D.prototype,"maskUrl",void 0),e$25([d$1T()],i$D.prototype,"maskEnabled",void 0),e$25([d$1T()],i$D.prototype,"overlayUrl",void 0),e$25([d$1T()],i$D.prototype,"overlayEnabled",void 0),e$25([d$1T({readOnly:!0})],i$D.prototype,"version",null),e$25([d$1T({type:Boolean})],i$D.prototype,"visible",void 0),i$D=e$25([i$2z("esri.views.Magnifier")],i$D);const p$x=i$D;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$v{constructor(s,u){this._stage=s,this._textureRequests=new Map,this._frameTask=r$1K(u)?u.registerTask(f$1g.TEXTURE_UNLOAD):D$l;}destroy(){this._frameTask.remove(),this._textureRequests.forEach((e=>this._releaseTextureRequest(e))),this._textureRequests.clear();}fromData(e,t){const r=this.makeUid(e);let s=this._textureRequests.get(r);return s||(s={referenceCount:0,texture:t(),textureAsync:null,abortController:null},this._stage&&(this._stage.add(s.texture),this._stage.loadSynchronous(s.texture)),this._textureRequests.set(r,s)),s.referenceCount++,{uid:r,texture:s.texture,release:()=>this._release(r)}}_release(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule((()=>this._releaseNow(e)))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`);}get test(){return {textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e));}_releaseTextureRequest(e){var t;e.texture?null==(t=this._stage)||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null);}makeUid(t,r=null){return r$1K(r)?`${t}.${r}px`:t}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r$n=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],i$C={};function o$m(t){return !!i$C[t]}function s$u(t){for(const e of t)if(!o$m(e))return !1;return !0}r$n.forEach((t=>{i$C[t]=!0;}));class p$w{constructor(t){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null;}connect(t){t&&this.disconnect(),this.inputManager=t,this.handlers.forEach((({handler:t,priority:e},a)=>this.inputManager.installHandlers(a,[t],e)));}disconnect(){this.inputManager&&this.handlers.forEach(((t,e)=>this.inputManager.uninstallHandlers(e))),this.inputManager=null;}destroy(){this.disconnect(),this.handlers.clear(),this.view=null;}on(t,e,a,r){const i=Array.isArray(t)?t:t.split(",");if(!s$u(i))return i.some(o$m)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let p,l;Array.isArray(e)?l=e:(p=e,l=[]),"function"==typeof a?p=a:r=a,r=null!=r?r:u$q.DEFAULT;const u=this.createUniqueGroupName(),m=new c$D(this.view,i,l,p);this.handlers.set(u,{handler:m,priority:r});for(const n of i){const t=this.handlerCounts.get(n)||0;this.handlerCounts.set(n,t+1);}return this.inputManager&&this.inputManager.installHandlers(u,[m],r),{remove:()=>this.removeHandler(u,i)}}hasHandler(t){return !!this.handlerCounts.get(t)}removeHandler(t,e){if(this.handlers.has(t)){this.handlers.delete(t);for(const t of e){const e=this.handlerCounts.get(t);void 0===e?console.error("Trying to remove handler for event that has no handlers registered: ",t):1===e?this.handlerCounts.delete(t):this.handlerCounts.set(t,e-1);}}this.inputManager&&this.inputManager.uninstallHandlers(t);}createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class c$D extends i$F{constructor(t,e,a,n){super(!0),this.view=t;for(const r of e)switch(r){case"click":this.registerIncoming("click",a,(t=>n(this.wrapClick(t))));break;case"double-click":this.registerIncoming("double-click",a,(t=>n(this.wrapDoubleClick(t))));break;case"immediate-click":this.registerIncoming("immediate-click",a,(t=>n(this.wrapImmediateClick(t))));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",a,(t=>n(this.wrapImmediateDoubleClick(t))));break;case"hold":this.registerIncoming("hold",a,(t=>n(this.wrapHold(t))));break;case"drag":this.registerIncoming("drag",a,(t=>{const e=this.wrapDrag(t);e&&n(e);}));break;case"key-down":this.registerIncoming("key-down",a,(t=>n(this.wrapKeyDown(t))));break;case"key-up":this.registerIncoming("key-up",a,(t=>n(this.wrapKeyUp(t))));break;case"pointer-down":this.registerIncoming("pointer-down",a,(t=>n(this.wrapPointer(t,"pointer-down"))));break;case"pointer-move":this.registerIncoming("pointer-move",a,(t=>n(this.wrapPointer(t,"pointer-move"))));break;case"pointer-up":this.registerIncoming("pointer-up",a,(t=>n(this.wrapPointer(t,"pointer-up"))));break;case"pointer-drag":this.registerIncoming("pointer-drag",a,(t=>n(this.wrapPointerDrag(t))));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",a,(t=>n(this.wrapMouseWheel(t))));break;case"pointer-enter":this.registerIncoming("pointer-enter",a,(t=>n(this.wrapPointer(t,"pointer-enter"))));break;case"pointer-leave":this.registerIncoming("pointer-leave",a,(t=>n(this.wrapPointer(t,"pointer-leave"))));break;case"gamepad":this.registerIncoming("gamepad",a,(t=>{n(this.wrapGamepad(t));}));break;case"focus":this.registerIncoming("focus",a,(t=>{n(this.wrapFocus(t));}));break;case"blur":this.registerIncoming("blur",a,(t=>{n(this.wrapBlur(t));}));}}wrapFocus(t){return {type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapBlur(t){return {type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapClick(t){const{pointerType:a,button:n,buttons:r,x:i,y:o,native:s,eventId:p}=t.data,{cancelable:c,timestamp:l}=t;return {type:"click",pointerType:a,button:n,buttons:r,x:i,y:o,native:s,timestamp:l,screenPoint:c$2i(i,o),mapPoint:this.getMapPoint(i,o),eventId:p,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapDoubleClick(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o,eventId:s}=t.data,{cancelable:p,timestamp:c}=t;return {type:"double-click",pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:c,mapPoint:this.getMapPoint(r,i),eventId:s,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapImmediateClick(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o,eventId:s}=t.data,p=o.pointerId,{cancelable:c,timestamp:l}=t;return {type:"immediate-click",pointerId:p,pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:l,mapPoint:this.getMapPoint(r,i),eventId:s,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapImmediateDoubleClick(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o,eventId:s}=t.data,p=o.pointerId,{cancelable:c,timestamp:l}=t;return {type:"immediate-double-click",pointerId:p,pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:l,mapPoint:this.getMapPoint(r,i),eventId:s,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapHold(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o}=t.data,{cancelable:s,timestamp:p}=t;return {type:"hold",pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:p,mapPoint:this.getMapPoint(r,i),cancelable:s,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}getMapPoint(t,a){return this.view.toMap(c$2i(t,a),{exclude:[]})}wrapDrag(e){const a=e.data,{x:n,y:r}=a.center,{action:i,pointerType:o,button:s}=a;if("start"===i&&(this.latestDragStart=a),!this.latestDragStart)return;const p=a.pointer.native,c=a.buttons,{cancelable:l,timestamp:u}=e,m={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return "end"===i&&(this.latestDragStart=void 0),{type:"drag",action:i,x:n,y:r,origin:m,pointerType:o,button:s,buttons:c,radius:a.radius,angle:m$1S(a.angle),native:p,timestamp:u,cancelable:l,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}wrapKeyDown(t){const{key:e,repeat:a,native:n}=t.data,{cancelable:r,timestamp:i}=t;return {type:"key-down",key:e,repeat:a,native:n,timestamp:i,cancelable:r,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapKeyUp(t){const{key:e,native:a}=t.data,{cancelable:n,timestamp:r}=t;return {type:"key-up",key:e,native:a,timestamp:r,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapPointer(t,e){const{x:a,y:n,button:r,buttons:i,native:o,eventId:s}=t.data,p=o.pointerId,c=o.pointerType,{cancelable:l,timestamp:u}=t;return {type:e,x:a,y:n,pointerId:p,pointerType:c,button:r,buttons:i,native:o,timestamp:u,eventId:s,cancelable:l,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapPointerDrag(t){const{x:e,y:a,buttons:n,native:r,eventId:i}=t.data.currentEvent,{button:o}=t.data.startEvent,s=t.data.startEvent.native.pointerId,p=t.data.startEvent.native.pointerType,c=t.data.action,l={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:u,timestamp:m}=t;return {type:"pointer-drag",x:e,y:a,pointerId:s,pointerType:p,button:o,buttons:n,action:c,origin:l,native:r,timestamp:m,eventId:i,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapMouseWheel(t){const{cancelable:e,data:a,timestamp:n}=t,{x:r,y:i,deltaY:o,native:s}=a;return {type:"mouse-wheel",x:r,y:i,deltaY:o,native:s,timestamp:n,cancelable:e,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapGamepad(t){const{action:e,state:a,device:n}=t.data,{cancelable:r,timestamp:i}=t,{buttons:o,axes:s}=a;return {type:"gamepad",device:n,timestamp:i,action:e,buttons:o,axes:s,cancelable:r,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$k(t){return [t.on("after-add",(t=>{const e=t.item;e.view&&e.view.ready&&!e.attached&&e.attach();})),t.on("after-remove",(t=>{const e=t.item;e.active&&(e.view.activeTool=null),e.attached&&e.detach();}))]}function a$G(t){return t.visible&&t.getEditableFlag(0)&&t.getEditableFlag(1)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$m(t){return c$2i(t.x,t.y)}function n$M(t,n){const c=(t instanceof HTMLElement?t:t.surface).getBoundingClientRect();return c$2i(n.clientX-c.left,n.clientY-c.top)}function c$C(e,c){return c instanceof Event?n$M(e,c):t$m(c)}function i$B(e){if(e instanceof Event)return !0;if("object"==typeof e&&"type"in e){switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return !0;default:return !1}}return !1}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class p$v{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null;}get cursor(){return this._cursor}handleInputEvent(t,a){const s=()=>t.stopPropagation();switch(t.type){case"pointer-move":c$B(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(s(),"end"===t.action&&(this._stopDrag=!1));break;case"pointer-down":{if(!u$l(t))break;const e=t$m(t),n=this._intersect(e,t.pointerType,a.forEachTool);if(t$1T(n))break;const p=this._findToolAndManipulatorByKey(n,a.forEachTool,h$l),c=o$21(p,(t=>t.manipulator)),d=o$21(p,(t=>t.tool));!(r$1K(c)&&r$1K(d)&&c.interactive)||c.grabbable&&c.grabbableForEvent(t)||!c.grabbing||c.dragging||this._ungrabManipulatorBeforeDragging(c,d,t),r$1K(c)&&c.interactive&&c.grabbable&&c.grabbableForEvent(t)&&!c.grabbing&&(this._grabbedManipulators.set(t.pointerId,{key:n,start:e,pointerType:t.pointerType}),1===this._grabbedManipulators.size&&a.activeTool!==n.tool&&(this._currentlyActiveTool=a.activeTool,this._revertToActiveTool=!0,a.setActiveTool(n.tool)),c.grabbing=!0,c.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:e}),s());break}case"pointer-up":this._handlePointerEnd(t,a);break;case"pointer-drag":{if(!u$l(t))break;const o=this._grabbedManipulators.get(t.pointerId),p=this._draggedManipulators.get(t.pointerId),c=o$21(o||p,(({key:t})=>t)),d=this._findManipulatorByKey(c,a.forEachTool);if(t$1T(d))break;const h=t$m(t);h.x=e$1u(h.x,0,a.view.width),h.y=e$1u(h.y,0,a.view.height);const g=e$23(o||p).start;switch(t.action){case"start":case"update":"update"!==t.action&&1!==this._grabbedManipulators.size||(d.dragging=!0,p?d.events.emit("drag",{action:"update",start:g,screenPoint:h}):d.events.emit("drag",{action:"start",start:g,screenPoint:h,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{key:e$23(c),start:g}));break;case"end":d.dragging=!1,p&&d.events.emit("drag",{action:"end",start:g,screenPoint:h}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,a);}s();break}case"immediate-click":{const e=t$m(t),r=this._intersect(e,t.pointerType,a.forEachTool),n=this._findToolAndManipulatorByKey(r,a.forEachTool,h$l);if(d$j(t)||a.forEachTool((t=>{if((!r$1K(n)||n.tool!==t||t.automaticManipulatorSelection)&&t.manipulators){let e=!1;t.manipulators.forEach((({manipulator:t})=>{t.selected&&(t.selected=!1,e=!0);})),e&&t.manipulatorSelectionChanged&&t.manipulatorSelectionChanged();}})),t$1T(n))break;const{manipulator:p,tool:c}=n;if(!p.interactive)break;p.selectable&&c.automaticManipulatorSelection&&(p.selected=!p.selected,c.manipulatorSelectionChanged&&c.manipulatorSelectionChanged());const u=t.native.shiftKey;p.events.emit("immediate-click",{screenPoint:e,button:t.button,pointerType:t.pointerType,shiftKey:u,stopPropagation:s});break}case"click":{const e=t$m(t),o=this._intersect(e,t.pointerType,a.forEachTool),r=this._findManipulatorByKey(o,a.forEachTool);if(t$1T(r)||!r.interactive)break;const n=t.native.shiftKey;r.events.emit(t.type,{screenPoint:e,button:t.button,pointerType:t.pointerType,shiftKey:n}),s();break}case"double-click":{const e=t$m(t),o=this._intersect(e,t.pointerType,a.forEachTool),r=this._findManipulatorByKey(o,a.forEachTool);if(t$1T(r)||!r.interactive)break;const n=t.native.shiftKey;r.events.emit("double-click",{screenPoint:e,button:t.button,pointerType:t.pointerType,shiftKey:n,stopPropagation:s});break}case"immediate-double-click":{const e=t$m(t),o=this._intersect(e,t.pointerType,a.forEachTool),r=this._findManipulatorByKey(o,a.forEachTool);if(t$1T(r)||!r.interactive)break;const n=t.native.shiftKey;r.events.emit("immediate-double-click",{screenPoint:e,button:t.button,pointerType:t.pointerType,shiftKey:n,stopPropagation:s});break}}this._updateCursor(a.forEachTool);}_ungrabManipulatorBeforeDragging(t,e,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:t$m(i)}),this._grabbedManipulators.forEach((({key:i},o)=>{i.tool===e&&e.manipulators.findById(i.manipulatorId)===t&&this._grabbedManipulators.delete(o);}));}_handlePointerEnd(t,e){const i=o$21(this._grabbedManipulators.get(t.pointerId),(({key:t})=>t)),n=this._findManipulatorByKey(i,e.forEachTool);r$1K(n)&&!n.dragging&&(1===this._grabbedManipulators.size&&0===this._draggedManipulators.size&&this._revertToActiveTool&&(e.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),n.grabbing&&(n.grabbing=!1,n.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:t$m(t)})),this._grabbedManipulators.delete(t.pointerId));}_cursorFromMap(e,i){let r=null;return n$2H(e,(({key:t})=>{const e=this._findManipulatorByKey(t,i);return !!(r$1K(e)&&e.interactive&&"cursor"in e&&e.cursor)&&(r=e.cursor,!0)})),r}_updateCursor(t){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,t)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,t)||"pointer":this._cursor=null;}clearPointers(t,e,r=!0,n){const a=e=>e.tool===t&&(t$1T(n)||e.manipulatorId===n);this._grabbedManipulators.forEach((({key:t,pointerType:i},r)=>{if(a(t)){this._grabbedManipulators.delete(r);const n=this._findManipulatorByKey(t,e);r$1K(n)&&(n.grabbing=!1,n.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:i}));}})),this._draggedManipulators.forEach((({key:t},i)=>{if(a(t)){this._draggedManipulators.delete(i);const r=this._findManipulatorByKey(t,e);r$1K(r)&&(r.dragging=!1,r.events.emit("drag",{action:"cancel"}));}})),r&&this._hoveredManipulators.forEach((({key:t},i)=>{if(a(t)){this._hoveredManipulators.delete(i);const r=this._findManipulatorByKey(t,e);r$1K(r)&&(r.hovering=!1);}})),this._updateCursor(e);}_intersect(t,e,o){let r=null;return o((o=>{if(null==o.manipulators||!a$G(o))return !1;const n=o.manipulators.intersect(t,e);return !t$1T(n)&&(r={manipulatorId:n.id,tool:o},!0)})),r}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach(((e,i)=>{this._updateHoveredStateForPointerAtScreenPosition(c$2i(e.x,e.y),i,e.pointerType,t);}));}handleHoverEvent(t,e){"pointer-up"!==t.type&&"immediate-click"!==t.type&&"pointer-move"!==t.type||!c$B(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(t$m(t),t.pointerId,t.pointerType,e);}_updateHoveredStateForPointerAtScreenPosition(t,e,i,a){const s=this._intersect(t,i,a);let l=this._findManipulatorByKey(s,a);const p=o$21(this._hoveredManipulators.get(e),(({key:t})=>t)),c=this._findManipulatorByKey(p,a);r$1K(l)&&!l.interactive&&(l=null),c!==l&&(r$1K(c)&&(c.hovering=!1),r$1K(l)?(l.hovering=!0,this._hoveredManipulators.set(e,{key:e$23(s)})):this._hoveredManipulators.delete(e),this._updateCursor(a));}_findManipulatorByKey(t,e){return this._findToolAndManipulatorByKey(t,e,h$l)?h$l.manipulator:null}_findToolAndManipulatorByKey(t,e,r){return t$1T(t)?null:(r.tool=null,r.manipulator=null,e((e=>{if(e!==t.tool||null==e.manipulators||!a$G(e))return !1;const i=e.manipulators.findById(t.manipulatorId);return !!r$1K(i)&&(r.manipulator=i,r.tool=e,!0)})),r.manipulator?r:null)}}function c$B(t){return "mouse"===t}function u$l(t){return "mouse"!==t.pointerType||0===t.button}function d$j(t){return !!t.native.shiftKey}const h$l={manipulator:null,tool:null};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const f$b=s$2n.getLogger("esri.views.ToolViewManager"),T$2="manipulators",_$5="tools";let E$4=class extends d$1p{constructor(t){super(t),this._manipulatorState=new p$v,this.tools=new S$I,this.cursor=null,this._forEachTool=t=>{for(const o of this.tools.items)if(t(o))return};}initialize(){this.handles.add([this.view.on(r$n,(t=>{this._handleInputEvent(t);}),u$q.TOOL),...e$k(this.tools),this.tools.on("before-add",(t=>{const o=t.item;if(null==o||this.tools.includes(o))return f$b.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault()})),this.tools.on("before-remove",(({item:t})=>{this._manipulatorState.clearPointers(t,this._forEachTool);})),this.tools.on("change",(()=>{this._refreshToolWatchers();}))]);}destroy(){this._forEachTool((t=>t.destroy()));}set activeTool(t){if(r$1K(t)&&!this.view.ready)return void f$b.error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return void(r$1K(t)&&f$b.warn("Tool is already active - ignoring activation request."));r$1K(this.activeTool)&&this.activeTool.deactivate(),r$1K(t)&&t.activate(),this._set("activeTool",t),this._removeIncompleteTools(t);const o=t$1T(this.activeTool);for(const e of this.tools){e.setEditableFlag(1,o||e===this.activeTool);const t=a$G(e);!o&&t||this._manipulatorState.clearPointers(e,this._forEachTool,!t);}this._updateCursor();}get updating(){return this.updatingHandles.updating||this.tools.some((t=>t.updating))}attach(){this._forEachTool((t=>t.attach())),"3d"===this.view.type?(this._set("textures",new s$v(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([this.view.state.watch("camera",(()=>{this._forEachManipulator((t=>{null!=t.onViewChange&&t.onViewChange();}));})),this.view.elevationProvider.on("elevation-change",(t=>{this._forEachManipulator((o=>{null!=o.onElevationChange&&o.onElevationChange(t);}));}))],T$2)):this.handles.add(this.view.watch("extent",(()=>{this._forEachManipulator((t=>{null!=t.onViewChange&&t.onViewChange();}));})));}detach(){r$1K(this.activeTool)&&(this.activeTool=null),this._forEachTool((t=>{t.detach(),t.destroy();})),this.tools.removeAll(),this.handles.remove(T$2);}_forEachManipulator(t){this._forEachTool((o=>{o.manipulators&&o.manipulators.forEach((({manipulator:e})=>t(e,o)));}));}_handleInputEvent(t){let o=!1;const e={...t,stopPropagation:()=>{o=!0,t.stopPropagation();}};r$1K(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(e):this._forEachTool((t=>{!o&&t.attached&&t.visible&&t.handleInputEvent(e);})),!o&&"key-down"===t.type&&"Escape"===t.key&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(e,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t;},view:this.view}),!o&&r$1K(this.activeTool)&&this.activeTool.handleInputEventAfter(e),this._manipulatorState.handleHoverEvent(e,this._forEachTool),this._updateCursor();}_refreshToolWatchers(){this.handles.remove(_$5),this._forEachTool((t=>{if(t instanceof p$3a){const o=f$1B(t,["cursor","visible","editable"],(()=>{a$G(t)||this._manipulatorState.clearPointers(t,this._forEachTool),this._updateCursor();}));this.handles.add(o,_$5);}t.manipulators&&this.handles.add(t.manipulators.on("change",(o=>{o.removed.forEach((({id:o})=>{this._manipulatorState.clearPointers(t,this._forEachTool,!0,o);})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor();})),_$5);})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor();}_updateCursor(){let t=this._manipulatorState.cursor;this._forEachTool((o=>!(!r$1K(o.cursor)||!o.visible)&&(t=o.cursor,!0))),this._get("cursor")!==t&&this._set("cursor",t);}_removeIncompleteTools(t){this.tools.filter((o=>(t$1T(t)||o!==t)&&!o.completed)).forEach((t=>{this.tools.remove(t),t.destroy();}));}};e$25([d$1T({constructOnly:!0,nonNullable:!0})],E$4.prototype,"view",void 0),e$25([d$1T({readOnly:!0,nonNullable:!0})],E$4.prototype,"textures",void 0),e$25([d$1T({value:null})],E$4.prototype,"activeTool",null),e$25([d$1T({readOnly:!0,type:S$I})],E$4.prototype,"tools",void 0),e$25([d$1T({readOnly:!0})],E$4.prototype,"cursor",void 0),e$25([d$1T({readOnly:!0})],E$4.prototype,"updating",null),E$4=e$25([i$2z("esri.views.ToolViewManager")],E$4);const w$5=E$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let o$l=class extends p$3a{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown","standard"===e.mapping?this._detectedDeviceType="standard":n$L.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index;}get native(){return (navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return a$F[this.deviceType]}};e$25([d$1T({nonNullable:!0,readOnly:!0})],o$l.prototype,"nativeIndex",void 0),e$25([d$1T({type:String,readOnly:!0})],o$l.prototype,"deviceType",null),e$25([d$1T({type:Number,readOnly:!0})],o$l.prototype,"axisThreshold",null),o$l=e$25([i$2z("esri.views.input.gamepad.GamepadInputDevice")],o$l);const n$L=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),a$F={standard:.15,spacemouse:.025,unknown:0},i$A=o$l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$A=class extends p$3a{constructor(...e){super(...e),this.devices=new S$I,this.enabledFocusMode="document";}};e$25([d$1T({type:S$I.ofType(i$A),readOnly:!0})],c$A.prototype,"devices",void 0),e$25([d$1T({type:["document","view","none"]})],c$A.prototype,"enabledFocusMode",void 0),c$A=e$25([i$2z("esri.views.input.gamepad.GamepadSettings")],c$A);const i$z=c$A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$u=class extends p$3a{constructor(){super(...arguments),this.gamepad=new i$z;}};e$25([d$1T({readOnly:!0})],p$u.prototype,"gamepad",void 0),p$u=e$25([i$2z("esri.views.input.Input")],p$u);const a$E=p$u;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$t=class extends p$3a{constructor(o){super(o),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1;}};e$25([d$1T({type:Boolean,nonNullable:!0})],s$t.prototype,"enabled",void 0),e$25([d$1T({type:i$A})],s$t.prototype,"device",void 0),e$25([d$1T({type:["pan","zoom"],nonNullable:!0})],s$t.prototype,"mode",void 0),e$25([d$1T({type:["forward-down","forward-up"],nonNullable:!0})],s$t.prototype,"tiltDirection",void 0),e$25([d$1T({type:Number,nonNullable:!0})],s$t.prototype,"velocityFactor",void 0),s$t=e$25([i$2z("esri.views.navigation.gamepad.GamepadSettings")],s$t);const a$D=s$t;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let a$C=class extends p$3a{constructor(o){super(o),this.browserTouchPanEnabled=!0,this.gamepad=new a$D,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0;}};e$25([d$1T({type:Boolean})],a$C.prototype,"browserTouchPanEnabled",void 0),e$25([d$1T({type:a$D,nonNullable:!0})],a$C.prototype,"gamepad",void 0),e$25([d$1T({type:Boolean})],a$C.prototype,"momentumEnabled",void 0),e$25([d$1T({type:Boolean})],a$C.prototype,"mouseWheelZoomEnabled",void 0),a$C=e$25([i$2z("esri.views.navigation.Navigation")],a$C);const p$t=a$C;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function l$s(e){const r=e.url&&d$V(e.url);return !(null==(e.spatialReference&&e.spatialReference.vcsWkid)&&r$1K(r)&&"ImageServer"===r.serverType)&&h$k(e)&&e.heightModelInfo?e.heightModelInfo:f$a(e)?v$s.deriveUnitFromSR(d$i,e.spatialReference):null}function h$k(e){return "heightModelInfo"in e}function u$k(e){if("unknown"===e.type||!("capabilities"in e))return !1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return !0;default:return !1}}function f$a(e){return u$k(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):m$l(e)}function g$b(e){return null!=e.layers||m$l(e)||u$k(e)||h$k(e)}function m$l(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return !0;case"analysis":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return !1}return !1}const d$i=new v$s({heightModel:"gravity-related-height"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var _$4;const m$k=s$2n.getLogger("esri.views.support.DefaultsFromMap"),S$5=10;let y$a=_$4=class extends p$3a{constructor(){super(...arguments),this._handles=new u$25,this._waitTask=null,this._extentProjectController=null,this._spatialReferenceCandidates=null,this._extentCandidates=null,this.logDebugInformation=!1,this.isSpatialReferenceDone=!1,this.isTileInfoDone=!1,this.isHeightModelInfoSearching=!1,this.spatialReference=null,this.extent=null,this.heightModelInfo=null,this.vcsWkid=null,this.latestVcsWkid=null,this.mapCollectionPaths=_$4.DefaultMapCollectionPaths.slice(),this.tileInfo=null;}initialize(){this.watch("mapCollectionPaths",(()=>{this._running&&(this.reset(),this.start());}));}destroy(){this._set("view",null),this._handles=l$2y(this._handles),this._cancelLoading();}get _running(){return !!(this._handles&&this._handles.size>0)}reset(){this._handles.removeAll(),this._set("isSpatialReferenceDone",!1),this._set("isTileInfoDone",!1),this._set("isHeightModelInfoSearching",!1),this._set("spatialReference",null),this._set("extent",null),this._set("heightModelInfo",null),this._set("vcsWkid",null),this._set("latestVcsWkid",null),this._set("tileInfo",null),this._spatialReferenceCandidates=null,this._extentCandidates=null;}start(){this._handles.removeAll();const e=this._updateLayerChange.bind(this);for(const t of this.mapCollectionPaths)this._handles.add($$g(this.view,`map.${t}`,"change",e,e,e,!0));this._handles.add(s$25(this,"isSpatialReferenceDone",(()=>this._updateTileInfo()),!0));}_ownerNameFromCollectionName(e){const t=e.lastIndexOf(".");return -1===t?"view":"view."+e.slice(0,t)}_ensureLoadedOwnersFromCollectionName(e){const t=this._ownerNameFromCollectionName(e).split(".");let i;for(let s=0;s<t.length&&(i=this.get(t.slice(0,s+1).join(".")),i);s++)if(i.load&&!i.isFulfilled())return {collectionName:e,owner:null,loading:i.load().catch((()=>{}))};return {collectionName:e,owner:i}}_cancelLoading(){this._waitTask=null,this._extentProjectController&&(this._extentProjectController.abort(),this._extentProjectController=null);}_updateWhen(e){let t=!0,i=!1;const s=e.catch((()=>{})).then((()=>{t?i=!0:s===this._waitTask&&this._update();}));return t=!1,i||(this._waitTask=s),i}_updateLayerChange(){this.isSpatialReferenceDone&&!this.spatialReference&&this._set("isSpatialReferenceDone",!1),this._update();}_update(){if(this._cancelLoading(),this.view){if(!this.isSpatialReferenceDone){this._debugLog("Starting search for spatial reference...");const e=this._processMapCollections((e=>this._processSpatialReferenceSource(e)));if(this._debugLog(`Search ended with status '${b$6(e)}'`),0!==e){let e=null,t=this._spatialReferenceCandidates;if(!t||t.length<1?(e=this.defaultSpatialReference,this._debugLog(`No spatial reference found, locking to default (${I$3(e)})`)):(this.defaultSpatialReference&&t.length>1&&t.findIndex((e=>e.equals(this.defaultSpatialReference)))>-1&&(t=[this.defaultSpatialReference]),e=t[0],this._debugLog(`Locking to ${I$3(e)}`)),this._set("spatialReference",e),e)if(this.extent)this._set("isSpatialReferenceDone",!0);else {const t=this.logDebugInformation;this.logDebugInformation=!1,this._processMapCollections((t=>this._findExtent(t,e))),this.logDebugInformation=t,this._projectExtentCandidate().catch((()=>{})).then((()=>this._set("isSpatialReferenceDone",!0)));}else this._set("isSpatialReferenceDone",!0);}}if(null==this.heightModelInfo&&this.view.isHeightModelInfoRequired){this._debugLog("Starting search for height model info...");const e=this._processMapCollections((e=>this._processHeightModelInfoSource(e)),(e=>g$b(e)));this._debugLog(`Search ended with status ${b$6(e)}`),this._set("isHeightModelInfoSearching",0===e);}this._updateTileInfo();}}_processMapCollections(e,t){this._preloadMapCollections(t);let i=2;return this._forAllMapCollectionSources((e=>{if(2!==i)return !1;const{collectionName:t}=e;return this._debugLog(`Processing collection ${t}...`),!(e.loading&&!this._updateWhen(e.loading))||(this._debugLog(`Collection ${e.collectionName} owner is loading -> wait`),i=0,!1)}),(s=>{if(2!==i)return !1;return null!=t&&!t(s)?(this._debugLog(`Source ${s.id} is skipped due to predicate`),!1):!s.load||s.isFulfilled()||this._updateWhen(s.load())?!((!s.load||s.isResolved())&&e(s))||(i=1,!1):(this._debugLog(`Source ${s.id} is loading -> wait`),i=0,!1)})),i}_preloadMapCollections(e){let t=S$5;const i=this.logDebugInformation;this.logDebugInformation=!1,this._forAllMapCollectionSources((()=>!0),(s=>{if(0===t)return !1;return !(null!=e&&!e(s))&&(s.load&&!s.isFulfilled()&&(this.logDebugInformation=i,this._debugLog(`Pre-loading source ${s.id}`),this.logDebugInformation=!1,s.load().catch((()=>{})),t--),!0)})),this.logDebugInformation=i;}_forAllMapCollectionSources(e,t){for(const i of this.mapCollectionPaths){const s=`map.${i}`,o=this._ensureLoadedOwnersFromCollectionName(s);if(!1===e(o))continue;const n=o.owner;if(!n||n.isRejected&&n.isRejected()){this._debugLog(`Collection ${s} owner is invalid or rejected -> skip`);continue}const a=this.view.get(s);a?this._forEachSource(a,t):this._debugLog(`Collection ${s} does not exist -> skip`);}}_forEachSource(e,t){for(const i of e.items)!1!==t(i)&&"layers"in i&&i.layers&&this._forEachSource(i.layers,t);}_processSpatialReferenceSource(e){let t=this._getSupportedSpatialReferences(e);return 0!==t.length&&(this._spatialReferenceCandidates?(t=s$2p(t,this._spatialReferenceCandidates,((e,t)=>e.equals(t))),t.length>0?this._spatialReferenceCandidates=t:this._debugLog(`Layer ${e.id} is ignored because its supported spatial\n          references are not compatible with the previous candidates`)):this._spatialReferenceCandidates=t,1===this._spatialReferenceCandidates.length)}_findExtent(e,t){const i="fullExtents"in e&&e.fullExtents||(r$1K(e.fullExtent)?[e.fullExtent]:[]),s=i.find((e=>e.spatialReference.equals(t)));if(s)return this._set("extent",s),!0;if(this._getSupportedSpatialReferences(e).length>0){const t=i.map((t=>({extent:t,layer:e}))),s=this._extentCandidates||[];this._extentCandidates=s.concat(t);}return !1}async _projectExtentCandidate(){if(!this._extentCandidates||!this._extentCandidates.length)return;const e=this.spatialReference,t=this._extentCandidates.find((t=>g$10(t.extent.spatialReference,e)));if(r$1K(t))this._set("extent",e$23(M$B(t.extent,e)));else {const t=this._extentCandidates[0];this._extentProjectController=new AbortController;const i=await import('./geometryServiceUtils.js');try{const s=await i.projectGeometry(t.extent,e,t.layer.portalItem,this._extentProjectController.signal);this._set("extent",s);}catch{}this._extentProjectController=null;}}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(0===t.length)return this._debugLog(`Layer ${e.id} is ignored because it does not have any spatial references`),[];const i=t.filter((t=>this.view.isSpatialReferenceSupported(t,e,(e=>this._debugLog(e)))));return 0===i.length?this._debugLog(`Layer ${e.id} has spatial references but none of them are supported (or layer doesn't require locking)`):this._debugLog(`Layer ${e.id} has spatial references. Resulting candidate set: ${i.map(I$3).join(", ")}`),i}_processHeightModelInfoSource(e){const t=l$s(e);return !!t&&(this._set("heightModelInfo",t),this._set("isHeightModelInfoSearching",!1),e.spatialReference&&(this._set("vcsWkid",e.spatialReference.vcsWkid),this._set("latestVcsWkid",e.spatialReference.latestVcsWkid)),!0)}_updateTileInfo(){if(null!=this.tileInfo)return;if(!this.view.isTileInfoRequired())return void this._set("isTileInfoDone",!0);if(!this.isSpatialReferenceDone)return;const e=this.get("view.map");if(!e)return void this._debugLog("updateTileInfo: no map");const t=e.basemap,i=e.get("layers.0");let s=null;if(t&&"failed"!==t.loadStatus){if(!t.loaded)return this._updateWhen(t.load()),void this._debugLog("updateTileInfo: basemap still loading");const e=t&&t.get("baseLayers.0");if(e&&"failed"!==e.loadStatus){if(!e.loaded)return this._updateWhen(e.load()),void this._debugLog("updateTileInfo: first basemap layer still loading");s="tileInfo"in e&&e.tileInfo;}else {if(!i||"failed"===i.loadStatus)return this._debugLog("updateTileInfo: no tileInfo"),void this._set("isTileInfoDone",!0);if(!i.loaded)return this._updateWhen(i.load()),void this._debugLog("updateTileInfo: first operational layer still loading");s="tileInfo"in i&&i.tileInfo;}}else if(i&&"failed"!==i.loadStatus){if(!i.loaded)return this._updateWhen(i.load()),void this._debugLog("updateTileInfo: first operational layer still loading");s="tileInfo"in i&&i.tileInfo;}s&&!s.spatialReference.equals(this.spatialReference)&&(s=null),this._debugLog(`updateTileInfo: setting ${s}`),this._set("tileInfo",s),this._set("isTileInfoDone",!0);}_debugLog(e){this.logDebugInformation&&m$k.info(e);}};function I$3(e){return e?JSON.stringify(e.toJSON()):"undefined"}function b$6(e){switch(e){case 0:return "Waiting";case 1:return "Found";case 2:return "Exhausted"}}y$a.DefaultMapCollectionPaths=["basemap.baseLayers","layers","ground.layers","basemap.referenceLayers"],e$25([d$1T()],y$a.prototype,"logDebugInformation",void 0),e$25([d$1T({readOnly:!0})],y$a.prototype,"isSpatialReferenceDone",void 0),e$25([d$1T({readOnly:!0})],y$a.prototype,"isTileInfoDone",void 0),e$25([d$1T({readOnly:!0})],y$a.prototype,"isHeightModelInfoSearching",void 0),e$25([d$1T({constructOnly:!0})],y$a.prototype,"view",void 0),e$25([d$1T({readOnly:!0})],y$a.prototype,"spatialReference",void 0),e$25([d$1T({readOnly:!0})],y$a.prototype,"extent",void 0),e$25([d$1T({readOnly:!0})],y$a.prototype,"heightModelInfo",void 0),e$25([d$1T({readOnly:!0})],y$a.prototype,"vcsWkid",void 0),e$25([d$1T({readOnly:!0})],y$a.prototype,"latestVcsWkid",void 0),e$25([d$1T()],y$a.prototype,"mapCollectionPaths",void 0),e$25([d$1T()],y$a.prototype,"defaultSpatialReference",void 0),e$25([d$1T({readOnly:!0})],y$a.prototype,"tileInfo",void 0),y$a=_$4=e$25([i$2z("esri.views.support.DefaultsFromMap")],y$a);const R$2=y$a;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var z$2;const H$1=s$2n.getLogger("esri.views.View");let W$3=z$2=class extends(a$2w(n$2D.EventedMixin(n$2A(p$3a)))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new p$R({getCollections:()=>{var e,t,i;return [null==(e=this.basemapView)?void 0:e.baseLayerViews,null==(t=this.groundView)?void 0:t.layerViews,this.layerViews,null==(i=this.basemapView)?void 0:i.referenceLayerViews]},getChildrenFunction:e=>e.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.defaultsFromMap=new R$2({view:this}),this.fatalError=null,this.extent=null,this.graphics=new c$E,this.navigating=!1,this.layerViews=new S$I,this.magnifier=new p$x,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new a$E,this.navigation=new p$t,this.layerViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new p$w(this),this.persistableViewModels=new S$I,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(this.watch("preconditionsReady",(e=>{e?(this._currentSpatialReference=this.spatialReference,z$2.views.add(this)):(this._currentSpatialReference=null,z$2.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?(this.layerViewManager.clear(),this.toolViewManager.detach(),this._teardown()):e&&!this.ready&&(this._startup(),this.toolViewManager.attach());}),!0));}initialize(){let e;this.addResolvingPromise(this.validate().then((()=>(this._isValid=!0,a$2Y(this,"ready"))))),this.basemapView=new a$H({view:this}),this.layerViewManager=new L$4({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new w$5({view:this}),this._resetInitialViewPropertiesFromContent(),i$2x(this.defaultsFromMap,"isSpatialReferenceDone",(t=>{const i=!!(this.map&&this.map.allLayers.length>0);if(t&&!this.spatialReference&&i||!e){if(t&&!this.spatialReference&&i&&!e){const t=e=L$z(this.spatialReferenceWarningDelay);e.then((()=>{t===e&&H$1.warn("#spatialReference","no spatial reference could be derived from the currently added map layers");})).catch((()=>{}));}}else e=null;}),!0);}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=l$2y(this.graphics),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.toolViewManager=l$2y(this.toolViewManager),this.layerViewManager=l$2y(this.layerViewManager),this.basemapView=l$2y(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,null==e||e.destroy();}_startup(){this._set("ready",!0);}_teardown(){this._set("ready",!1);}whenReady(){return Promise.resolve(this)}toMap(){return H$1.error("#toMap()","Not implemented on this instance of View"),null}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){return !!(!this.fatalError&&this._isValid&&!this._readyCycleForced&&this.map&&(!m$1$.isLoadable(this.map)||this.map.loaded)&&0!==this.width&&0!==this.height&&this.spatialReference&&this.isSpatialReferenceSupported(this.spatialReference)&&(this._currentSpatialReference||!this.initialExtentRequired||this.initialExtent||this.defaultsFromMap&&this.defaultsFromMap.isSpatialReferenceDone)&&this.defaultsFromMap&&this.defaultsFromMap.isTileInfoDone)}set map(e){var t;e!==this._get("map")&&(null!=(t=e)&&t.destroyed&&(H$1.warn("#map","The provided map is already destroyed",{map:e}),e=null),m$1$.isLoadable(e)&&e.load().catch((()=>{})),this.initialized&&(this.forceReadyCycle(),this._resetInitialViewPropertiesFromContent()),this._set("map",e));}get spatialReference(){let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&this.isHeightModelInfoRequired&&this.defaultsFromMap&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){this._userSpatialReference=e,this._set("spatialReference",e);}get stationary(){return !this.animation&&!this.navigating&&!this.resizing}get initialExtent(){return this.defaultsFromMap&&this.defaultsFromMap.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return r$1K(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor");}get size(){return [this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){return this.get("defaultsFromMap.spatialReference")}getDefaultHeightModelInfo(){return this.get("map.supportsHeightModelInfo")&&this.get("map.heightModelInfo")||this.get("defaultsFromMap.heightModelInfo")||null}importLayerView(e){throw new s$2l("importLayerView() not implemented")}hasLayerViewModule(e){return !1}async validate(){}invalidate(){this._isValid=!1;}isSpatialReferenceSupported(e,t,i){return !0}isTileInfoRequired(){return !1}when(e,t){return this.isResolved()&&!this.ready&&H$1.warn("#when()",'Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use watchUtils.whenOnce(view, "ready").then(...) instead.'),super.when(e,t)}forceReadyCycle(){this.ready&&(this._readyCycleForced=!0,g$15(this,"preconditionsReady",(()=>this._readyCycleForced=!1)));}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e;}tryFatalErrorRecovery(){this.fatalError=null;}_resetInitialViewPropertiesFromContent(){if(!this.defaultsFromMap)return;const e=()=>this.defaultsFromMap&&this.defaultsFromMap.start();this.defaultsFromMap.reset(),this._currentSpatialReference=null,this.notifyChange("spatialReference"),this.handles.remove("defaultsFromMap"),this.handles.add([f$1B(this,"spatialReference",((t,i)=>{E$r(t,i)||e();})),f$1B(this,"initialExtentRequired",e),v$$(e)],"defaultsFromMap");}};W$3.views=new S$I,e$25([o$1K("toolViewManager.activeTool")],W$3.prototype,"activeTool",void 0),e$25([d$1T({readOnly:!0})],W$3.prototype,"allLayerViews",void 0),e$25([d$1T()],W$3.prototype,"groundView",void 0),e$25([d$1T()],W$3.prototype,"animation",void 0),e$25([d$1T()],W$3.prototype,"basemapView",void 0),e$25([d$1T()],W$3.prototype,"defaultsFromMap",void 0),e$25([d$1T()],W$3.prototype,"fatalError",void 0),e$25([d$1T({type:M$A})],W$3.prototype,"extent",void 0),e$25([d$1T(a$I(c$E,"graphics"))],W$3.prototype,"graphics",void 0),e$25([d$1T({readOnly:!0,type:v$s,dependsOn:["map.heightModelInfo?","defaultsFromMap.heightModelInfo"]})],W$3.prototype,"heightModelInfo",null),e$25([d$1T({readOnly:!0})],W$3.prototype,"interacting",null),e$25([d$1T({readOnly:!0})],W$3.prototype,"navigating",void 0),e$25([d$1T({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","initialExtentRequired","initialExtent","defaultsFromMap.isSpatialReferenceDone","defaultsFromMap.isTileInfoDone"]})],W$3.prototype,"preconditionsReady",null),e$25([d$1T({type:S$I,readOnly:!0})],W$3.prototype,"layerViews",void 0),e$25([d$1T({type:p$x})],W$3.prototype,"magnifier",void 0),e$25([d$1T({value:null,type:j$8})],W$3.prototype,"map",null),e$25([d$1T()],W$3.prototype,"padding",void 0),e$25([d$1T({readOnly:!0})],W$3.prototype,"ready",void 0),e$25([d$1T({type:k$w})],W$3.prototype,"spatialReference",null),e$25([d$1T()],W$3.prototype,"spatialReferenceWarningDelay",void 0),e$25([d$1T()],W$3.prototype,"stationary",null),e$25([d$1T({readOnly:!0})],W$3.prototype,"supportsGround",void 0),e$25([d$1T({type:y$F})],W$3.prototype,"timeExtent",void 0),e$25([o$1K("toolViewManager.tools")],W$3.prototype,"tools",void 0),e$25([d$1T()],W$3.prototype,"toolViewManager",void 0),e$25([d$1T({readOnly:!0})],W$3.prototype,"type",void 0),e$25([d$1T({type:Number})],W$3.prototype,"scale",void 0),e$25([d$1T({readOnly:!0})],W$3.prototype,"updating",void 0),e$25([d$1T({readOnly:!0})],W$3.prototype,"initialExtentRequired",void 0),e$25([d$1T({readOnly:!0,type:M$A})],W$3.prototype,"initialExtent",null),e$25([d$1T()],W$3.prototype,"cursor",null),e$25([d$1T({readOnly:!0})],W$3.prototype,"input",void 0),e$25([d$1T({type:p$t,nonNullable:!0})],W$3.prototype,"navigation",void 0),e$25([d$1T()],W$3.prototype,"layerViewManager",void 0),e$25([d$1T()],W$3.prototype,"width",void 0),e$25([d$1T()],W$3.prototype,"height",void 0),e$25([d$1T({readOnly:!0})],W$3.prototype,"resizing",void 0),e$25([d$1T({value:null,readOnly:!0})],W$3.prototype,"size",null),e$25([d$1T({readOnly:!0})],W$3.prototype,"suspended",void 0),e$25([d$1T({readOnly:!0})],W$3.prototype,"viewEvents",void 0),e$25([d$1T({readOnly:!0})],W$3.prototype,"persistableViewModels",void 0),e$25([d$1T()],W$3.prototype,"_isValid",void 0),e$25([d$1T()],W$3.prototype,"_readyCycleForced",void 0),e$25([d$1T()],W$3.prototype,"_currentSpatialReference",void 0),W$3=z$2=e$25([i$2z("esri.views.View")],W$3);const P$4=W$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$s=class extends m$22{constructor(t){super(t),this.state="running",this.target=null;}initialize(){this.addResolvingPromise(new Promise(((t,s)=>this._dfd={resolve:t,reject:s})));}get done(){return "finished"===this.state||"stopped"===this.state}stop(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._dfd.reject(new s$2l("ViewAnimation stopped")));}finish(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._dfd.resolve());}update(t,s){s||(s=O$t(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",s);}};e$25([d$1T({readOnly:!0})],p$s.prototype,"done",null),e$25([d$1T({readOnly:!0,type:String})],p$s.prototype,"state",void 0),e$25([d$1T()],p$s.prototype,"target",void 0),p$s=e$25([i$2z("esri.views.ViewAnimation")],p$s),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"};}(p$s||(p$s={}));const n$K=p$s;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$j(e,n,t,r){const u=3*e,i=3*(t-e)-u,a=1-u-i,o=3*n,s=3*(r-n)-o,f=1-o-s;function c(e){return ((a*e+i)*e+u)*e}function l(e){return ((f*e+s)*e+o)*e}function b(e){return (3*a*e+2*i)*e+u}function p(e,n){let t,r,u,i,a,o;for(u=e,o=0;o<8;o++){if(i=c(u)-e,Math.abs(i)<n)return u;if(a=b(u),Math.abs(a)<1e-6)break;u-=i/a;}if(t=0,r=1,u=e,u<t)return t;if(u>r)return r;for(;t<r;){if(i=c(u),Math.abs(i-e)<n)return u;e>i?t=u:r=u,u=.5*(r-t)+t;}return u}return function(e,n=1e-6){return l(p(e,n))}}const n$J=/^cubic-bezier\((.*)\)/,t$l={};function r$m(r){let u=t$l[r]||null;if(!u){const t=n$J.exec(r);if(t){const n=t[1].split(",").map((e=>parseFloat(e.trim())));4!==n.length||n.some((e=>isNaN(e)))||(u=e$j.apply(e$j,n));}}return u}t$l.ease=e$j(.25,.1,.25,1),t$l.linear=e$j(0,0,1,1),t$l.easeIn=t$l["ease-in"]=e$j(.42,0,1,1),t$l.easeOut=t$l["ease-out"]=e$j(0,0,.58,1),t$l.easeInOut=t$l["ease-in-out"]=e$j(.42,0,.58,1);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$i(){return [1,0,0,1,0,0]}function n$I(e){return [e[0],e[1],e[2],e[3],e[4],e[5]]}function r$l(e,n,r,t,a,o){return [e,n,r,t,a,o]}function t$k(e,n){return new Float64Array(e,n,6)}Object.freeze({__proto__:null,create:e$i,clone:n$I,fromValues:r$l,createView:t$k});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const W$2=39.37,C$5=180/Math.PI;function U$2(t,e,n){const r=o$1p(e[0]/s$1V.radius);return r$1e(t,n?r:r-360*Math.floor((r+180)/360),o$1p(.5*Math.PI-2*Math.atan(Math.exp(-e[1]/s$1V.radius))))}function Q(t,e){let n=e[1];return n>89.99999?n=89.99999:n<-89.99999&&(n=-89.99999),n=Math.sin(s$1Q(n)),r$1e(t,s$1Q(e[0])*s$1V.radius,.5*s$1V.radius*Math.log((1+n)/(1-n)))}function B$1(t,e,n,r){return r&&n&&!r.equals(n)&&g$10(r,n)&&r.isWebMercator?r.isWebMercator?Q(t,e):U$2(t,e):a$2D(t,e)}function D$2(t){return t.wkid?t:t.spatialReference||k$w.WGS84}function T$1(t,e){return e.type?r$1e(t,e.x,e.y):a$2D(t,e)}function H(t){return H$c(t)}function J(t,e){return Math.max(t.width/e[0],t.height/e[1])*ct(t.spatialReference)}async function K$2(t,a,i,s){let c,u;if(!t)return null;if(Array.isArray(t)&&!t.length)return null;if(S$I.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&"object"==typeof t[0]){const e=t.every((t=>"attributes"in t)),r=t.some((t=>!t.geometry));let o=t;if(e&&r&&a&&a.allLayerViews){const e=new Map;for(const n of t){const t=n.layer,r=e.get(t)||[],o=n.attributes[t.objectIdField];null!=o&&r.push(o),e.set(t,r);}const r=[];e.forEach(((t,e)=>{const n=a.allLayerViews.find((t=>t.layer.id===e.id));if("queryFeatures"in n){const o=e.createQuery();o.objectIds=t,o.returnGeometry=!0,r.push(n.queryFeatures(o));}}));const i=await Promise.all(r),s=[];for(const t of i)if(t&&t.features&&t.features.length)for(const e of t.features)r$1K(e.geometry)&&s.push(e.geometry);o=s;}for(const t of o)s=await K$2(t,a,i,s);return s}if(Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1])c=new b$10(t);else if(t instanceof p$2$)c=t;else if("geometry"in t)if(t.geometry)c=t.geometry;else if(t.layer){const e=t.layer,n=a.allLayerViews.find((t=>t.layer.id===e.id));if("queryFeatures"in n){const o=e.createQuery();o.objectIds=[t.attributes[e.objectIdField]],o.returnGeometry=!0;const a=await n.queryFeatures(o);c=m$2i(a,"features",0,"geometry");}}if(t$1T(c))return null;if(u="point"===c.type?new M$A({xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y,spatialReference:c.spatialReference}):c.extent,!u)return null;const f=M$B(u,i);return t$1T(f)?null:s=s?s.union(f):f}function X$2(t){if(t&&(!Array.isArray(t)||"number"!=typeof t[0])&&("object"==typeof t||Array.isArray(t)&&"object"==typeof t[0])){if("layer"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return {min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every((t=>"layer"in t))){let e=0,n=0;for(const r of t){const t=r.layer;t&&t.minScale&&t.maxScale&&(e=t.minScale<e?t.minScale:e,n=t.maxScale>n?t.maxScale:n);}return e&&n?{min:e,max:n}:null}}}async function Y$2(e,r){if(!e||!r)return new u$m({targetGeometry:new b$10,scale:0,rotation:0});let o=r.spatialReference;const{constraints:a,padding:i,viewpoint:s,size:c}=r,u=[i?c[0]-i.left-i.right:c[0],i?c[1]-i.top-i.bottom:c[1]];let f=null;e instanceof u$m?f=e:e.viewpoint?f=e.viewpoint:e.target&&"esri.Viewpoint"===e.target.declaredClass&&(f=e.target);let l=null;f&&f.targetGeometry?l=f.targetGeometry:e instanceof M$A?l=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(l=await K$2(e.center,r,o)||await K$2(e.extent,r,o)||await K$2(e.target,r,o)||await K$2(e,r,o)),!l&&s&&s.targetGeometry?l=s.targetGeometry:!l&&r.extent&&(l=r.extent);const m=D$2(l);if(o||(o=D$2(r.spatialReference||r.extent||l)),!g$10(l,o)&&m&&!m.equals(o))return null;const y=T$1(n$2l(),l.center?l.center:l),p=new b$10(B$1(y,y,m,o),o);let g=null;if(f&&r$1K(f.targetGeometry)&&"point"===f.targetGeometry.type)g=f.scale;else if(e.hasOwnProperty("scale")&&e.scale)g=e.scale;else if(e.hasOwnProperty("zoom")&&-1!==e.zoom&&a&&a.effectiveLODs)g=a.zoomToScale(e.zoom);else if(Array.isArray(l)||"point"===l.type||"extent"===l.type&&0===l.width&&0===l.height){const t=M$B(r.extent,o);g=r$1K(t)?J(t,u):r.extent?J(r.extent,u):s.scale;}else g=g$10(l.extent,o)?J(M$B(l.extent,o),u):J(l.extent,u);const h=X$2(e);h&&(h.min&&h.min>g?g=h.min:h.max&&h.max<g&&(g=h.max));let x=0;f?x=f.rotation:e.hasOwnProperty("rotation")?x=e.rotation:s&&(x=s.rotation);let b=new u$m({targetGeometry:p,scale:g,rotation:x});return a&&(b=a.fit(b),a.constrainByGeometry(b),a.rotationEnabled||(b.rotation=x)),b}function Z$2(t,e){const n=t.targetGeometry,r=e.targetGeometry;return n.x=r.x,n.y=r.y,n.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function $$3(t,e,n){return n?r$1e(t,.5*(e[0]-n.right+n.left),.5*(e[1]-n.bottom+n.top)):l$24(t,e,.5)}const _$3=function(){const t=n$2l();return function(e,n,r){const o=n.targetGeometry;T$1(t,o);const a=.5*at(n);return e.xmin=t[0]-a*r[0],e.ymin=t[1]-a*r[1],e.xmax=t[0]+a*r[0],e.ymax=t[1]+a*r[1],e.spatialReference=o.spatialReference,e}}();function tt(t,e,n,r,o){return wt(t,e,n.center),t.scale=J(n,r),o&&o.constraints&&o.constraints.constrain(t),t}function et(t,e,n,r){return mt(t,e,n,r),r$x(t,t)}const rt=function(){const t=n$2l();return function(e,n,r){return F$k(e,ut(e,n),$$3(t,n,r))}}(),ot=function(){const t=e$i(),e=n$2l();return function(n,r,o,a){const i=at(r),s=st(r);return r$1e(e,i,i),M$a(t,e),c$11(t,t,s),i$S(t,t,rt(e,o,a)),i$S(t,t,[0,a.top-a.bottom]),r$1e(n,t[4],t[5])}}();function at(t){return t.scale*it(t.targetGeometry)}function it(t){return r$1K(t)&&I$A(t.spatialReference)?1/(H(t.spatialReference)*W$2*ft()):1}function st(t){return s$1Q(t.rotation)||0}function ct(t){return I$A(t)?H(t)*W$2*ft():1}function ut(t,e){return l$24(t,e,.5)}function ft(){return 96}const lt=function(){const t=n$2l(),e=n$2l(),n=n$2l();return function(r,o,a,i,s,c){return x$v(t,o),l$24(e,a,.5*c),r$1e(n,1/i*c,-1/i*c),n$1b(r),i$S(r,r,e),s&&c$11(r,r,s),e$x(r,r,n),i$S(r,r,t),r}}(),mt=function(){const t=n$2l();return function(e,n,r,o){const a=at(n),i=st(n);return T$1(t,n.targetGeometry),lt(e,t,r,a,i,o)}}(),yt=function(){const t=n$2l();return function(e,n,r,o){const a=at(n);return T$1(t,n.targetGeometry),lt(e,t,r,a,0,o)}}();function pt(t){if(t.isWrappable){const e=S$F(t);return e.valid[1]-e.valid[0]}return 0}function gt(t,e){return Math.round(pt(t)/e)}function ht(t,e){return Y$2(t,e)}const xt=function(){const t=n$2l(),e=n$2l(),n=[0,0,0];return function(r,o,a){o$1k(t,r,o),v$M(t,t),o$1k(e,r,a),v$M(e,e),A$l(n,t,e);let i=Math.acos(j$F(t,e)/(b$V(t)*b$V(e)))*C$5;return n[2]<0&&(i=-i),isNaN(i)&&(i=0),i}}(),bt=function(){const t=n$2l();return function(e,n,r,o){const a=e.targetGeometry;return Z$2(e,n),ot(t,n,r,o),a.x+=t[0],a.y+=t[1],e}}(),wt=function(){const t=n$2l();return function(e,n,r){Z$2(e,n);const o=e.targetGeometry,a=D$2(r),i=D$2(o);return T$1(t,r),B$1(t,t,a,i),o.x=t[0],o.y=t[1],e}}();const Gt=function(){const t=n$2l();return function(e,n,r,o,a){a||(a="center"),F$k(t,r,o),l$24(t,t,.5);const i=t[0],s=t[1];switch(a){case"center":r$1e(t,0,0);break;case"left":r$1e(t,-i,0);break;case"top":r$1e(t,0,s);break;case"right":r$1e(t,i,0);break;case"bottom":r$1e(t,0,-s);break;case"top-left":r$1e(t,-i,s);break;case"bottom-left":r$1e(t,-i,-s);break;case"top-right":r$1e(t,i,s);break;case"bottom-right":r$1e(t,i,-s);}return Ft(e,n,t),e}}();function Mt(t,e,n){return Z$2(t,e),t.rotation+=n,t}function kt(t,e,n){return Z$2(t,e),t.rotation=n,t}const At=function(){const t=n$2l();return function(e,n,r,o,a){return Z$2(e,n),isNaN(r)||0===r||(Pt(t,o,n,a),e.scale=n.scale*r,qt(t,t,e,a),Ft(e,e,r$1e(t,t[0]-o[0],o[1]-t[1]))),e}}();function Rt(t,e,n){return Z$2(t,e),t.scale=n,t}const St=function(){const t=n$2l();return function(e,n,r,o,a,i){return Z$2(e,n),isNaN(r)||0===r||(Pt(t,a,n,i),e.scale=n.scale*r,e.rotation+=o,qt(t,t,e,i),Ft(e,e,r$1e(t,t[0]-a[0],a[1]-t[1]))),e}}(),vt=function(){const t=n$2l(),e=n$2l();return function(n,r,o,a,i,s,c){return rt(e,s,c),s$1L(t,i,e),a?St(n,r,o,a,t,s):At(n,r,o,t,s)}}(),Pt=function(){const t=e$i();return function(e,n,r,o){return D$m(e,n,et(t,r,o,1))}}(),qt=function(){const t=e$i();return function(e,n,r,o){return D$m(e,n,mt(t,r,o,1))}}(),Ft=function(){const t=n$2l(),e=e$i();return function(n,r,o){Z$2(n,r);const a=at(r),i=n.targetGeometry;return h$B(e,st(r)),e$x(e,e,t$1n(a,a)),D$m(t,o,e),i.x+=t[0],i.y+=t[1],n}}();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class m$j{constructor(t,i,s,e){const o=t.targetGeometry,n=i.targetGeometry;e?"string"==typeof e&&(e=r$m(e)||t$l.ease):e=t$l.ease,this.easing=e,this.duration=s,this.sCenterX=o.x,this.sCenterY=o.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=n.x,this.tCenterY=n.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360);}applyRatio(t,i){const s=this.easing(i);let e,o,n,a;i>=1?(e=this.tCenterX,o=this.tCenterY,n=this.tRotation,a=this.tScale):(e=this.sCenterX+s*this.dCenterX,o=this.sCenterY+s*this.dCenterY,n=this.sRotation+s*this.dRotation,a=this.sScale+s*this.dScale),t.targetGeometry.x=e,t.targetGeometry.y=o,t.scale=a,t.rotation=n;}}let u$j=class extends p$3a{constructor(t){super(t),this.duration=200,this.transition=null,this.easing=t$l.ease,this.view=null,this.viewpoint=null,this.viewpoint=new u$m({targetGeometry:new b$10,scale:0,rotation:0}),this._updateTask=A$u({postRender:this._postRender.bind(this)}),this._updateTask.pause();}destroy(){this._updateTask.remove(),this._updateTask=null;}animate(t,i,s){this.stop();const e=this.viewpoint;Z$2(e,i),this.transition=new m$j(this.viewpoint,t.target,s&&s.duration||this.duration,s&&s.easing||this.easing);const o=()=>{this.animation===t&&this._updateTask&&("finished"===t.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null);};return t.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinous(t,i){this.stop(),this.updateFunction=i,this.viewpoint=t;const s=new n$K({target:t.clone()}),e=()=>{this.animation===s&&this._updateTask&&(this.animation=null,this.updateFunction=null);};return s.when(e,e),this._startTime=performance.now(),this._updateTask.resume(),this.animation=s,s}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null);}_postRender(t){const i=this.animation;if(i&&i.state!==n$K.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime);else {const t=(performance.now()-this._startTime)/this.transition.duration,i=t>=1;this.transition.applyRatio(this.viewpoint,t),i&&this.animation.finish();}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone());}else this._updateTask.pause();}};e$25([d$1T()],u$j.prototype,"animation",void 0),e$25([d$1T()],u$j.prototype,"duration",void 0),e$25([d$1T()],u$j.prototype,"transition",void 0),e$25([d$1T()],u$j.prototype,"easing",void 0),e$25([d$1T()],u$j.prototype,"view",void 0),e$25([d$1T()],u$j.prototype,"viewpoint",void 0),u$j=e$25([i$2z("esri.views.2d.AnimationManager")],u$j);const d$h=u$j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class a$B{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.updateEnabled=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions;},this.update=()=>{if(this._updateRequested=!1,!this.updateEnabled)return;const{basemapView:t,graphicsView:a,labelManager:s,layerViews:i,state:{id:r}}=this.view;t.baseLayerViews.forEach(this._updateLayerView,this),i.forEach(this._updateLayerView,this),t.referenceLayerViews.forEach(this._updateLayerView,this),r$1K(s)&&(s.lastUpdateId!==r&&(s.viewChange(),s.lastUpdateId=r),s.updateRequested&&s.processUpdate(this._updateParameters)),r$1K(a)&&(a.lastUpdateId!==r&&(a.viewChange(),a.lastUpdateId=r),a.updateRequested&&a.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause();};}destroy(){this.stop();}start(){this.stationary=this.view.stationary,this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions},this._stationaryHandle=this.view.watch("stationary",(e=>{this.stationary=e,this.requestFrame();})),this._frameTaskHandle=A$u(this);}stop(){this._frameTaskHandle&&(this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1);}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame());}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume();}_updateLayerView(e){const t=this.view.state,a=e.lastUpdateId;null!=a&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),a!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$j(){return Promise.all([import('./webgl.js'),import('./mapViewDeps.js')])}const s$s=()=>t$j().then((()=>import('./TileLayerView2D.js'))),a$A=()=>t$j().then((()=>import('./FeatureLayerView2D.js'))),i$y={"base-dynamic":()=>t$j().then((()=>import('./BaseDynamicLayerView2D.js'))),"base-tile":s$s,"bing-maps":s$s,csv:a$A,"geo-rss":()=>t$j().then((()=>import('./GeoRSSLayerView2D.js'))),feature:a$A,geojson:a$A,graphics:()=>t$j().then((()=>import('./GraphicsLayerView2D.js'))),group:()=>t$j().then((()=>import('./GroupLayerView2D.js'))),imagery:()=>t$j().then((()=>import('./ImageryLayerView2D.js'))),"imagery-tile":()=>t$j().then((()=>import('./ImageryTileLayerView2D.js'))),kml:()=>t$j().then((()=>import('./KMLLayerView2D.js'))),"map-image":()=>t$j().then((()=>import('./MapImageLayerView2D.js'))),"map-notes":()=>t$j().then((()=>import('./MapNotesLayerView2D.js'))),"ogc-feature":()=>t$j().then((()=>import('./OGCFeatureLayerView2D.js'))),"open-street-map":s$s,route:()=>t$j().then((()=>import('./RouteLayerView2D.js'))),stream:()=>t$j().then((()=>import('./StreamLayerView2D.js'))),"subtype-group":()=>t$j().then((()=>import('./SubtypeGroupLayerView2D.js'))),tile:s$s,"vector-tile":()=>t$j().then((()=>import('./VectorTileLayerView2D.js'))),wcs:()=>t$j().then((()=>import('./ImageryTileLayerView2D.js'))),"web-tile":s$s,wfs:a$A,wms:()=>t$j().then((()=>import('./WMSLayerView2D.js'))),wmts:()=>t$j().then((()=>import('./WMTSLayerView2D.js'))),analysis:null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function o$k(r){const t=r.declaredClass?r.declaredClass.slice(r.declaredClass.lastIndexOf(".")+1):"Unknown",s=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new s$2l(`${s}:view-not-supported`,`${t} is not supported in 2D`)}const l$r={hasLayerViewModule:e=>r$1K(i$y[e.type]),importLayerView:e=>{const t=i$y[e.type];if(!r$1K(t))throw o$k(e);return t(e)}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function o$j(o,m){const{spatialReference:r}=m,i=[m.x,m.y];let s=Number.POSITIVE_INFINITY,x=0,c=0;const a=[0,0],f="extent"===o.type?[[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]]]:o.rings;for(const n of f)for(let o=0;o<n.length-1;o++){o$1g(a,i,n,o);const m=d$1w(i,a);m<s&&(s=m,x=a[0],c=a[1]);}return {coordinate:new b$10({x,y:c,spatialReference:r}),distance:s}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u$i;const g$a=s$2n.getLogger("esri.views.MapView");let h$j=u$i=class extends p$3a{constructor(e){super(e),this.geometry=null,this.spatialReference=null;}get normalizedGeometry(){return t$1T(this.geometry)||!this.spatialReference?null:this.spatialReference.equals(this.geometry.spatialReference)?this.geometry:g$10(this.geometry,this.spatialReference)?M$B(this.geometry,this.spatialReference):H$b()?O$j(this.geometry,this.spatialReference):(g$a.error("#constraints.geometry","unsupported coordinate system. The source geometry cannot be projected to the view's coordinate system. The projection engine cannot be loaded.",{geometry:this.geometry}),null)}constrain(e,r){if(t$1T(this.normalizedGeometry))return e;const t=e.targetGeometry;if("extent"===this.normalizedGeometry.type?r$1k(this.normalizedGeometry,t):c$2W(this.normalizedGeometry,t))return e;const{coordinate:s}=o$j(this.normalizedGeometry,t);return s?(e.targetGeometry=s,e):e}clone(){var e,r;return new u$i({geometry:null==(e=this.geometry)?void 0:e.clone(),spatialReference:null==(r=this.spatialReference)?void 0:r.clone()})}};e$25([d$1T({constructOnly:!0})],h$j.prototype,"geometry",void 0),e$25([d$1T({readOnly:!0})],h$j.prototype,"normalizedGeometry",null),e$25([d$1T({constructOnly:!0})],h$j.prototype,"spatialReference",void 0),h$j=u$i=e$25([i$2z("esri.views.2d.constraints.GeometryConstraint")],h$j);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$r;let a$z=s$r=class extends p$3a{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0;}constrain(o,r){return this.enabled&&r?(this.rotationEnabled||(o.rotation=r.rotation),o):o}clone(){return new s$r({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};e$25([d$1T()],a$z.prototype,"enabled",void 0),e$25([d$1T()],a$z.prototype,"rotationEnabled",void 0),a$z=s$r=e$25([i$2z("esri.views.2d.constraints.RotationConstraint")],a$z);const n$H=a$z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var a$y;let c$z=a$y=class extends p$3a{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0;}initialize(){let e,{lods:t,minScale:o,maxScale:s,minZoom:i,maxZoom:a}=this,c=-1,r=-1,l=!1,n=!1;if(0!==o&&0!==s&&o<s&&([o,s]=[s,o]),!t||!t.length)return this._set("effectiveMinScale",o),void this._set("effectiveMaxScale",s);t=t.map((e=>e.clone())),t.sort(((e,t)=>t.scale-e.scale)),t.forEach(((e,t)=>e.level=t));for(const f of t)!l&&o>0&&o>=f.scale&&(c=f.level,l=!0),!n&&s>0&&s>=f.scale&&(r=e?e.level:-1,n=!0),e=f;-1===i&&(i=0===o?0:c),-1===a&&(a=0===s?t.length-1:r),i=Math.max(i,0),i=Math.min(i,t.length-1),a=Math.max(a,0),a=Math.min(a,t.length-1),i>a&&([i,a]=[a,i]),o=t[i].scale,s=t[a].scale,t.splice(0,i),t.splice(a-i+1,t.length),t.forEach(((e,t)=>{this._lodByScale[e.scale]=e,this._scales[t]=e.scale;})),this._set("effectiveLODs",t),this._set("effectiveMinZoom",i),this._set("effectiveMaxZoom",a),this._set("effectiveMinScale",o),this._set("effectiveMaxScale",s);}constrain(e,t){if(t&&e.scale===t.scale)return e;const o=this.effectiveMinScale,s=this.effectiveMaxScale,i=e.targetGeometry,a=t&&t.targetGeometry,c=0!==s&&e.scale<s,r=0!==o&&e.scale>o;if(c||r){const c=r?o:s;if(a){const o=(c-t.scale)/(e.scale-t.scale);i.x=a.x+(i.x-a.x)*o,i.y=a.y+(i.y-a.y)*o;}e.scale=c;}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),o=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(o>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const o=Math.round(e-.5),s=Math.round(e);return t[s]+(s-e)*(t[o]-t[s])}scaleToZoom(e){if(!this.effectiveLODs)return -1;const t=this._scales;let o,s;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let i=0;i<t.length-1;i++){if(o=t[i],s=t[i+1],s===e){return i+this.effectiveMinZoom+1}if(o>e&&s<e){return i+this.effectiveMinZoom+1-(e-s)/(o-s)}}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const o=Math.round(this.scaleToZoom(e));return this.zoomToScale(o+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const o=Math.round(this.scaleToZoom(e));return this.zoomToScale(o-1)}clone(){return new a$y({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce(((t,o)=>Math.abs(o-e)<=Math.abs(t-e)?o:t),this._scales[0])),this._lodByScale[e].scale}};e$25([d$1T({readOnly:!0})],c$z.prototype,"effectiveLODs",void 0),e$25([d$1T({readOnly:!0})],c$z.prototype,"effectiveMinZoom",void 0),e$25([d$1T({readOnly:!0})],c$z.prototype,"effectiveMaxZoom",void 0),e$25([d$1T({readOnly:!0})],c$z.prototype,"effectiveMinScale",void 0),e$25([d$1T({readOnly:!0})],c$z.prototype,"effectiveMaxScale",void 0),e$25([d$1T({type:[p$2K]})],c$z.prototype,"lods",void 0),e$25([d$1T()],c$z.prototype,"minZoom",void 0),e$25([d$1T()],c$z.prototype,"maxZoom",void 0),e$25([d$1T()],c$z.prototype,"minScale",void 0),e$25([d$1T()],c$z.prototype,"maxScale",void 0),e$25([d$1T()],c$z.prototype,"snapToZoom",void 0),c$z=a$y=e$25([i$2z("esri.views.2d.constraints.ZoomConstraint")],c$z);const r$k=c$z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const p$r={base:null,key:"type",typeMap:{extent:M$A,polygon:v$J}};let c$y=class extends n$2D.EventedAccessor{constructor(){super(...arguments),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0;}initialize(){this.watch(["_zoom","_rotation"],this.emit.bind(this,"update"),!0);}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null);}set geometry(o){o?this._set("geometry",o):this._set("geometry",null);}get _defaultLODs(){const o=this.get("view.defaultsFromMap.tileInfo"),t=this.get("view.spatialReference");return o&&t&&o.spatialReference.equals(t)?o.lods:null}get _geometry(){return new h$j({geometry:this.geometry,spatialReference:this.view.spatialReference})}get _rotation(){return new n$H({rotationEnabled:this.rotationEnabled})}get _zoom(){return new r$k({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})}canZoomInTo(o){const t=this.effectiveMaxScale;return 0===t||o>=t}canZoomOutTo(o){const t=this.effectiveMinScale;return 0===t||o<=t}constrain(o,t){return this._zoom.constrain(o,t),this._rotation.constrain(o,t),this._geometry.constrain(o,t),o}constrainByGeometry(o){return this._geometry.constrain(o)}fit(o){return this._zoom.fit(o)}zoomToScale(o){return this._zoom.zoomToScale(o)}scaleToZoom(o){return this._zoom.scaleToZoom(o)}snapScale(o){return this._zoom.snapToClosestScale(o)}snapToNextScale(o){return this._zoom.snapToNextScale(o)}snapToPreviousScale(o){return this._zoom.snapToPreviousScale(o)}};e$25([d$1T({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],c$y.prototype,"effectiveLODs",void 0),e$25([d$1T({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],c$y.prototype,"effectiveMinScale",void 0),e$25([d$1T({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],c$y.prototype,"effectiveMaxScale",void 0),e$25([d$1T({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],c$y.prototype,"effectiveMinZoom",void 0),e$25([d$1T({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],c$y.prototype,"effectiveMaxZoom",void 0),e$25([d$1T({types:p$r,value:null})],c$y.prototype,"geometry",null),e$25([d$1T({type:[p$2K]})],c$y.prototype,"lods",void 0),e$25([d$1T()],c$y.prototype,"minScale",void 0),e$25([d$1T()],c$y.prototype,"maxScale",void 0),e$25([d$1T()],c$y.prototype,"minZoom",void 0),e$25([d$1T()],c$y.prototype,"maxZoom",void 0),e$25([d$1T()],c$y.prototype,"rotationEnabled",void 0),e$25([d$1T()],c$y.prototype,"snapToZoom",void 0),e$25([d$1T()],c$y.prototype,"view",void 0),e$25([d$1T()],c$y.prototype,"_defaultLODs",null),e$25([d$1T({type:h$j})],c$y.prototype,"_geometry",null),e$25([d$1T({type:n$H})],c$y.prototype,"_rotation",null),e$25([d$1T({readOnly:!0,type:r$k})],c$y.prototype,"_zoom",null),c$y=e$25([i$2z("esri.views.2d.MapViewConstraints")],c$y);const y$9=c$y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function a$x(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t}function n$G(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t}function s$q(t,a,n,s,r,o,u,c,e,i){return t[0]=a,t[1]=n,t[2]=s,t[3]=r,t[4]=o,t[5]=u,t[6]=c,t[7]=e,t[8]=i,t}function r$j(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function o$i(t,a){if(t===a){const n=a[1],s=a[2],r=a[5];t[1]=a[3],t[2]=a[6],t[3]=n,t[5]=a[7],t[6]=s,t[7]=r;}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t}function u$h(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],u=a[4],c=a[5],e=a[6],i=a[7],M=a[8],h=M*u-c*i,f=-M*o+c*e,b=i*o-u*e;let l=n*h+s*f+r*b;return l?(l=1/l,t[0]=h*l,t[1]=(-M*s+r*i)*l,t[2]=(c*s-r*u)*l,t[3]=f*l,t[4]=(M*n-r*e)*l,t[5]=(-c*n+r*o)*l,t[6]=b*l,t[7]=(-i*n+s*e)*l,t[8]=(u*n-s*o)*l,t):null}function c$x(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],u=a[4],c=a[5],e=a[6],i=a[7],M=a[8];return t[0]=u*M-c*i,t[1]=r*i-s*M,t[2]=s*c-r*u,t[3]=c*e-o*M,t[4]=n*M-r*e,t[5]=r*o-n*c,t[6]=o*i-u*e,t[7]=s*e-n*i,t[8]=n*u-s*o,t}function e$h(t){const a=t[0],n=t[1],s=t[2],r=t[3],o=t[4],u=t[5],c=t[6],e=t[7],i=t[8];return a*(i*o-u*e)+n*(-i*r+u*c)+s*(e*r-o*c)}function i$x(t,a,n){const s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],i=a[6],M=a[7],h=a[8],f=n[0],b=n[1],l=n[2],m=n[3],x=n[4],d=n[5],p=n[6],y=n[7],j=n[8];return t[0]=f*s+b*u+l*i,t[1]=f*r+b*c+l*M,t[2]=f*o+b*e+l*h,t[3]=m*s+x*u+d*i,t[4]=m*r+x*c+d*M,t[5]=m*o+x*e+d*h,t[6]=p*s+y*u+j*i,t[7]=p*r+y*c+j*M,t[8]=p*o+y*e+j*h,t}function M$2(t,a,n){const s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],i=a[6],M=a[7],h=a[8],f=n[0],b=n[1];return t[0]=s,t[1]=r,t[2]=o,t[3]=u,t[4]=c,t[5]=e,t[6]=f*s+b*u+i,t[7]=f*r+b*c+M,t[8]=f*o+b*e+h,t}function h$i(t,a,n){const s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],i=a[6],M=a[7],h=a[8],f=Math.sin(n),b=Math.cos(n);return t[0]=b*s+f*u,t[1]=b*r+f*c,t[2]=b*o+f*e,t[3]=b*u-f*s,t[4]=b*c-f*r,t[5]=b*e-f*o,t[6]=i,t[7]=M,t[8]=h,t}function f$9(t,a,n){const s=n[0],r=n[1],o=n[2];return t[0]=s*a[0],t[1]=s*a[1],t[2]=s*a[2],t[3]=r*a[3],t[4]=r*a[4],t[5]=r*a[5],t[6]=o*a[6],t[7]=o*a[7],t[8]=o*a[8],t}function b$5(t,a,n){const s=n[0],r=n[1];return t[0]=s*a[0],t[1]=s*a[1],t[2]=s*a[2],t[3]=r*a[3],t[4]=r*a[4],t[5]=r*a[5],t}function l$q(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a[0],t[7]=a[1],t[8]=1,t}function m$i(t,a){const n=Math.sin(a),s=Math.cos(a);return t[0]=s,t[1]=n,t[2]=0,t[3]=-n,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function x$5(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=a[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function d$g(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t}function p$q(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],u=n+n,c=s+s,e=r+r,i=n*u,M=s*u,h=s*c,f=r*u,b=r*c,l=r*e,m=o*u,x=o*c,d=o*e;return t[0]=1-h-l,t[3]=M-d,t[6]=f+x,t[1]=M+d,t[4]=1-i-l,t[7]=b-m,t[2]=f-x,t[5]=b+m,t[8]=1-i-h,t}function y$8(t,a){const n=a[0],s=a[1],r=a[2],o=a[4],u=a[5],c=a[6],e=a[8],i=a[9],M=a[10],h=M*u-c*i,f=-M*o+c*e,b=i*o-u*e,l=n*h+s*f+r*b;if(!l)return null;const m=1/l;return t[0]=h*m,t[1]=(-M*s+r*i)*m,t[2]=(c*s-r*u)*m,t[3]=f*m,t[4]=(M*n-r*e)*m,t[5]=(-c*n+r*o)*m,t[6]=b*m,t[7]=(-i*n+s*e)*m,t[8]=(u*n-s*o)*m,t}function j$4(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],u=a[4],c=a[5],e=a[6],i=a[7],M=a[8],h=a[9],f=a[10],b=a[11],l=a[12],m=a[13],x=a[14],d=a[15],p=n*c-s*u,y=n*e-r*u,j=n*i-o*u,q=s*e-r*c,_=s*i-o*c,g=r*i-o*e,A=M*m-h*l,E=M*x-f*l,F=M*d-b*l,S=h*x-f*m,v=h*d-b*m,z=f*d-b*x;let B=p*z-y*v+j*S+q*F-_*E+g*A;return B?(B=1/B,t[0]=(c*z-e*v+i*S)*B,t[1]=(e*F-u*z-i*E)*B,t[2]=(u*v-c*F+i*A)*B,t[3]=(r*v-s*z-o*S)*B,t[4]=(n*z-r*F+o*E)*B,t[5]=(s*F-n*v-o*A)*B,t[6]=(m*g-x*_+d*q)*B,t[7]=(x*j-l*g-d*y)*B,t[8]=(l*_-m*j+d*p)*B,t):null}function q$3(t,a,n){return t[0]=2/a,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function _$2(t){return "mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function g$9(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function A$1(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t[4]=a[4]+n[4],t[5]=a[5]+n[5],t[6]=a[6]+n[6],t[7]=a[7]+n[7],t[8]=a[8]+n[8],t}function E$3(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t[4]=a[4]-n[4],t[5]=a[5]-n[5],t[6]=a[6]-n[6],t[7]=a[7]-n[7],t[8]=a[8]-n[8],t}function F$1(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*n,t[5]=a[5]*n,t[6]=a[6]*n,t[7]=a[7]*n,t[8]=a[8]*n,t}function S$4(t,a,n,s){return t[0]=a[0]+n[0]*s,t[1]=a[1]+n[1]*s,t[2]=a[2]+n[2]*s,t[3]=a[3]+n[3]*s,t[4]=a[4]+n[4]*s,t[5]=a[5]+n[5]*s,t[6]=a[6]+n[6]*s,t[7]=a[7]+n[7]*s,t[8]=a[8]+n[8]*s,t}function v$5(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]}function z$1(a,n){const s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],i=a[6],M=a[7],h=a[8],f=n[0],b=n[1],l=n[2],m=n[3],x=n[4],d=n[5],p=n[6],y=n[7],j=n[8];return Math.abs(s-f)<=a$2G*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(r-b)<=a$2G*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-l)<=a$2G*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(u-m)<=a$2G*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-x)<=a$2G*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(e-d)<=a$2G*Math.max(1,Math.abs(e),Math.abs(d))&&Math.abs(i-p)<=a$2G*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(M-y)<=a$2G*Math.max(1,Math.abs(M),Math.abs(y))&&Math.abs(h-j)<=a$2G*Math.max(1,Math.abs(h),Math.abs(j))}function B(a){const n=a$2G,s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],i=a[6],M=a[7],h=a[8];return Math.abs(1-(s*s+u*u+i*i))<=n&&Math.abs(1-(r*r+c*c+M*M))<=n&&Math.abs(1-(o*o+e*e+h*h))<=n}const O$3=i$x,k$4=E$3;Object.freeze({__proto__:null,fromMat4:a$x,copy:n$G,set:s$q,identity:r$j,transpose:o$i,invert:u$h,adjoint:c$x,determinant:e$h,multiply:i$x,translate:M$2,rotate:h$i,scale:f$9,scaleByVec2:b$5,fromTranslation:l$q,fromRotation:m$i,fromScaling:x$5,fromMat2d:d$g,fromQuat:p$q,normalFromMat4Legacy:y$8,normalFromMat4:j$4,projection:q$3,str:_$2,frob:g$9,add:A$1,subtract:E$3,multiplyScalar:F$1,multiplyScalarAndAdd:S$4,exactEquals:v$5,equals:z$1,isOrthoNormal:B,mul:O$3,sub:k$4});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$F(){const n=new Float32Array(9);return n[0]=1,n[4]=1,n[8]=1,n}function r$i(n){const r=new Float32Array(9);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r}function t$i(n,r,t,e,a,o,c,s,u){const l=new Float32Array(9);return l[0]=n,l[1]=r,l[2]=t,l[3]=e,l[4]=a,l[5]=o,l[6]=c,l[7]=s,l[8]=u,l}function e$g(n,r){return new Float32Array(n,r,9)}Object.freeze({__proto__:null,create:n$F,clone:r$i,fromValues:t$i,createView:e$g});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$E(){return new Float32Array(2)}function r$h(n){const r=new Float32Array(2);return r[0]=n[0],r[1]=n[1],r}function t$h(n,r){const t=new Float32Array(2);return t[0]=n,t[1]=r,t}function e$f(n,r){return new Float32Array(n,r,2)}function a$w(){return n$E()}function o$h(){return t$h(1,1)}function u$g(){return t$h(1,0)}function s$p(){return t$h(0,1)}const c$w=a$w(),f$8=o$h(),i$w=u$g(),l$p=s$p();Object.freeze({__proto__:null,create:n$E,clone:r$h,fromValues:t$h,createView:e$f,zeros:a$w,ones:o$h,unitX:u$g,unitY:s$p,ZEROS:c$w,ONES:f$8,UNIT_X:i$w,UNIT_Y:l$p});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$D(n){return n instanceof Float32Array&&n.length>=2}function r$g(n){return Array.isArray(n)&&n.length>=2}function t$g(t){return n$D(t)||r$g(t)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var V;const G$1=[0,0];let O$2=V=class extends a$2N{constructor(t){super(t),this._viewpoint2D={center:n$2l(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new M$A,this.id=0,this.inverseTransform=e$i(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=e$i(),this.transformNoRotation=e$i(),this.displayMat3=n$F(),this.displayViewMat3=n$F(),this.viewMat3=n$F(),this.viewMat2d=n$1c(),this.worldScreenWidth=0,this.size=[0,0];}set pixelRatio(t){this._set("pixelRatio",t),this._update();}set size(t){this._set("size",t),this._update();}set viewpoint(t){if(t){const s=this._viewpoint2D,i=t.targetGeometry;s.center[0]=i.x,s.center[1]=i.y,s.rotation=t.rotation,s.scale=t.scale,s.spatialReference=i.spatialReference;}this._update();}copy(t){const s=this.size,i=this.viewpoint;return i&&s?(this.viewpoint=Z$2(i,t.viewpoint),this._set("size",a$2D(s,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new V({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,s,i){return t$g(s)?D$m(t,s,this.inverseTransform):(G$1[0]=s,G$1[1]=i,D$m(t,G$1,this.inverseTransform))}toScreen(t,s,i){return t$g(s)?D$m(t,s,this.transform):(G$1[0]=s,G$1[1]=i,D$m(t,G$1,this.transform))}toScreenNoRotation(t,s,i){return t$g(s)?D$m(t,s,this.transformNoRotation):(G$1[0]=s,G$1[1]=i,D$m(t,G$1,this.transformNoRotation))}getScreenTransform(t,s){const{center:i}=this._viewpoint2D,e=this._get("pixelRatio")||1,o=this._get("size");return lt(t,i,o,s,0,e),t}_update(){const{center:t,spatialReference:i,scale:e,rotation:o}=this._viewpoint2D,c=this._get("pixelRatio")||1,m=this._get("size"),d=new u$m({targetGeometry:new b$10(t[0],t[1],i),scale:e,rotation:o});if(this._set("viewpoint",d),!m||!i||!e)return;this.resolution=at(d),this.rotation=o,this.scale=e,this.spatialReference=i,a$2D(this.center,t);const y=0!==m[0]?2/m[0]:0,_=0!==m[1]?-2/m[1]:0;s$q(this.displayMat3,y,0,0,0,_,0,-1,1,1);const x=r$j(this.viewMat3),z=t$h(m[0]/2,m[1]/2),g=t$h(-m[0]/2,-m[1]/2),b=s$1Q(o);M$2(x,x,z),h$i(x,x,b),M$2(x,x,g),i$x(this.displayViewMat3,this.displayMat3,x);const V=n$1b(this.viewMat2d);return i$S(V,V,z),c$11(V,V,b),i$S(V,V,g),_$3(this.extent,d,m),mt(this.transform,d,m,c),r$x(this.inverseTransform,this.transform),yt(this.transformNoRotation,d,m,c),this.worldScreenWidth=gt(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};e$25([d$1T({readOnly:!0})],O$2.prototype,"id",void 0),e$25([d$1T({value:1,json:{write:!0}})],O$2.prototype,"pixelRatio",null),e$25([d$1T({json:{write:!0}})],O$2.prototype,"size",null),e$25([d$1T({type:u$m,json:{write:!0}})],O$2.prototype,"viewpoint",null),O$2=V=e$25([i$2z("esri.views.2d.ViewState")],O$2);const U$1=O$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$v=class extends p$3a{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0;}};e$25([d$1T()],c$v.prototype,"left",void 0),e$25([d$1T()],c$v.prototype,"top",void 0),e$25([d$1T()],c$v.prototype,"right",void 0),e$25([d$1T()],c$v.prototype,"bottom",void 0),c$v=e$25([i$2z("esri.views.2d.PaddedViewState.Padding")],c$v);let h$h=class extends U$1{constructor(...t){super(...t),this.paddedViewState=new U$1,this._updateContent=(()=>{const t=n$2l();return ()=>{const e=this._get("size"),s=this._get("padding");if(!e||!s)return;const o=this.paddedViewState;r$1e(t,s.left+s.right,s.top+s.bottom),o$1k(t,e,t),a$2D(o.size,t);const a=o.viewpoint;a&&(this.viewpoint=a);}})(),this.watch(["size","padding"],this._updateContent,!0),this.padding=new c$v,this.size=[0,0];}set padding(t){this._set("padding",t||new c$v);}set viewpoint(t){if(t){const e=t.clone();this.paddedViewState.viewpoint=t,bt(e,t,this._get("size"),this._get("padding"));const s=this._viewpoint2D,o=e.targetGeometry;s.center[0]=o.x,s.center[1]=o.y,s.rotation=e.rotation,s.scale=e.scale,s.spatialReference=o.spatialReference,this._update();}}};e$25([d$1T()],h$h.prototype,"paddedViewState",void 0),e$25([d$1T({type:c$v})],h$h.prototype,"padding",null),e$25([d$1T()],h$h.prototype,"viewpoint",null),h$h=e$25([i$2z("esri.views.2d.PaddedViewState")],h$h);const m$h=h$h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class u$f{constructor(e,s){this.item=e,this.controller=s,this.promise=null;}}class l$o{constructor(s){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,s.concurrency&&(this.concurrency=s.concurrency),this._queue=new e$n(s.peeker),this.process=s.process;const t=s.scheduler;s.priority&&r$1K(t)&&(this._task=t.registerTask(s.priority,this));}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null);}get length(){return this._processingItems.size+this._queue.length}abort(e){const s=this._controllers.get(e);s&&s.abort();}clear(){this._queue.clear();const e=[];this._controllers.forEach((s=>e.push(s))),this._controllers.clear(),e.forEach((e=>e.abort())),this._processingItems.clear(),this._cancelNext();}forEach(e){this._deferreds.forEach(((s,t)=>e(t)));}get(e){const s=this._deferreds.get(e);return s?s.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext());}push(s,h){const c=this.get(s);if(c)return c;const n=new AbortController;let u=null;h&&(u=j$U(h,(()=>n.abort())));const l=()=>{const e=this._processingItems.get(s);e&&e.controller.abort(),_(),a.reject(m$2e());},_=()=>{p.remove(),r$1K(u)&&u.remove(),this._deferreds.delete(s),this._controllers.delete(s),this._queue.remove(s),this._processingItems.delete(s),this._scheduleNext();},p=v$10(n.signal,l),a=A$x();return this._deferreds.set(s,a),this._controllers.set(s,n),a.promise.then(_,_),this._queue.push(s),this._scheduleNext(),a.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const e=[];this._processingItems.forEach((s=>e.push(s))),this._processingItems.clear();for(const s of e)this._queue.push(s.item),s.controller.abort();this._scheduleNext();}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext());}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return !this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress();}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=v$$((()=>{this._schedule=null,this._next();})));}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop());}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null);}_processResult(e,s){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(s));}_processError(e,s){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(s));}_canProcessFulfillment(e){return !!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(t$1T(e))return;let t;const r=new AbortController,i=new u$f(e,r);this._processingItems.set(e,i);try{t=this.process(e,r.signal);}catch(o){this._processError(i,o);}O$t(t)?(i.promise=t,t.then((e=>this._processResult(i,e)),(e=>this._processError(i,e)))):this._processResult(i,t);}get test(){return {update:e=>this.runTask(e)}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$C(e,t){return e.length=0,t.forEach((t=>e.push(t))),e}const u$e=new Set,a$v=[],c$u=new Map,h$g=[0,0];let l$n=class extends p$3a{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null;}initialize(){const{concurrency:e,process:t}=this;this._queue=new l$o({concurrency:e,process:(e,s)=>{const r=this._keyToItem.get(e);return t(r,{signal:s})},peeker:e=>e.values().next().value});}destroy(){this.clear(),this._queue.destroy(),this._queue=null;}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t);}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating");}has(e){return "string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause();}push(e,t){const s=e.key.id+"-"+t;if(this.has(s))return this.get(s);const r=this._queue.push(s),o=()=>{this._keyToItem.delete(s),this.notifyChange("updating");};return this._keyToItem.set(s,e),r.then(o,o),this.notifyChange("updating"),r}reset(){this._queue.reset(),this.notifyChange("updating");}resume(){this._queue.resume();}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let s=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach((e=>{const t=this._keyToItem.get(e),o=this.tileInfoView.getTileScale(t.key);c$u.has(o)||(c$u.set(o,[]),s=Math.max(o,s),r=Math.min(o,r)),c$u.get(o).push(t.key),u$e.add(o);}));let o=this.state.scale;c$u.has(o)||(n$C(a$v,u$e),a$v.sort(((e,t)=>e-t)),o=a$v.reduce(((e,t)=>Math.abs(t-o)<Math.abs(e-o)?t:e),a$v[0])),o=Math.min(o,s),o=Math.max(o,r);const i=c$u.get(o),h=t.getClosestInfoForScale(o),l=h.getColumnForX(this.state.center[0]),p=h.getRowForY(this.state.center[1]);return i.sort(((e,t)=>{const s=h.denormalizeCol(e.col,e.world),r=h.denormalizeCol(t.col,t.world);return Math.sqrt((l-s)*(l-s)+(p-e.row)*(p-e.row))-Math.sqrt((l-r)*(l-r)+(p-t.row)*(p-t.row))})),u$e.clear(),c$u.clear(),i[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,s=this.state.center;let r=Number.POSITIVE_INFINITY,i=null;return e.forEach((e=>{const n=this._keyToItem.get(e);t.getTileCoords(h$g,n.key);const u=d$1w(h$g,s);u<r&&(r=u,i=n.key);})),i.id}};e$25([d$1T({constructOnly:!0})],l$n.prototype,"concurrency",void 0),e$25([d$1T({constructOnly:!0})],l$n.prototype,"process",void 0),e$25([d$1T()],l$n.prototype,"state",void 0),e$25([d$1T({constructOnly:!0})],l$n.prototype,"strategy",void 0),e$25([d$1T({constructOnly:!0})],l$n.prototype,"tileInfoView",void 0),e$25([d$1T({readOnly:!0})],l$n.prototype,"updating",null),l$n=e$25([i$2z("esri.views.2d.tiling.PagedTileQueue")],l$n);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$e{constructor(t,e,l,s){this.set(t,e,l,s);}static getId(t,e,l,s){return "object"==typeof t?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${e}/${l}/${s}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t);}get hash(){const t=4095&this.row,e=4095&this.col,l=63&this.level;return (3&this.world)<<30|e<<22|t<<8|l}acquire(t,e,l,s){this.set(t,e,l,s);}contains(t){const e=t.level-this.level;return this.row===t.row>>e&&this.col===t.col>>e&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new e$e(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0;}set(t,e,l,s){if(null==t)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof t)this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if("string"==typeof t){const[e,l,s,o]=t.split("/");this.level=parseFloat(e),this.row=parseFloat(l),this.col=parseFloat(s),this.world=parseFloat(o);}else this.level=+t,this.row=+e,this.col=+l,this.world=+s||0;return this}toString(){return `${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new e$e(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,l=this.row<<1,s=this.col<<1,o=this.world;return [new e$e(t,l,s,o),new e$e(t,l,s+1,o),new e$e(t,l+1,s,o),new e$e(t,l+1,s+1,o)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}e$e.pool=new e$1U(e$e,null,null,25,50);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$v(t,r){return [t,r]}function e$d(t,r,o){return t[0]=r,t[1]=o,t}function s$o(t,r,o,i,e){return t[0]=r,t[1]=o,t[2]=i,t[3]=e,t}const n$B=new e$e("0/0/0/0");class l$m{constructor(t,r,o,i,e,s,n,l,h,a,u,m){this.level=t,this.resolution=r,this.scale=o,this.origin=i,this.first=e,this.last=s,this.size=n,this.norm=l,this.worldStart=h,this.worldEnd=a,this.worldSize=u,this.wrap=m;}static create(o,s,n=null){const h=S$F(o.spatialReference),a=i$v(o.origin.x,o.origin.y),u=i$v(o.size[0]*s.resolution,o.size[1]*s.resolution),m=i$v(-1/0,-1/0),g=i$v(1/0,1/0),w=i$v(1/0,1/0);r$1K(n)&&(e$d(m,Math.max(0,Math.floor((n.xmin-a[0])/u[0])),Math.max(0,Math.floor((a[1]-n.ymax)/u[1]))),e$d(g,Math.max(0,Math.floor((n.xmax-a[0])/u[0])),Math.max(0,Math.floor((a[1]-n.ymin)/u[1]))),e$d(w,g[0]-m[0]+1,g[1]-m[1]+1));const{cols:c,rows:d}=s;let f,F,z,p;return !n&&c&&d&&(e$d(m,0,0),e$d(g,c-1,d-1),e$d(w,c,d)),o.isWrappable?(f=i$v(Math.ceil(Math.round((h.valid[1]-h.valid[0])/s.resolution)/o.size[0]),w[1]),F=i$v(Math.floor((h.origin[0]-a[0])/u[0]),m[1]),z=i$v(f[0]+F[0]-1,g[1]),p=!0):(F=m,z=g,f=w,p=!1),new l$m(s.level,s.resolution,s.scale,a,m,g,w,u,F,z,f,p)}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return (t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return (this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,o=!1){n$B.set(r);const i=o?n$B.col:this.denormalizeCol(n$B.col,n$B.world),e=n$B.row;return s$o(t,this.getXForColumn(i),this.getYForRow(e+1),this.getXForColumn(i+1),this.getYForRow(e)),t}getTileCoords(t,r,o=!1){n$B.set(r);const i=o?n$B.col:this.denormalizeCol(n$B.col,n$B.world);return Array.isArray(t)?e$d(t,this.getXForColumn(i),this.getYForRow(n$B.row)):(t.x=this.getXForColumn(i),t.y=this.getYForRow(n$B.row)),t}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class l$l{constructor(){this.spans=[];}acquire(o){this.lodInfo=o;}release(){this.lodInfo=null,this.spans.length=0;}forEach(o,l){const{spans:s,lodInfo:t}=this,{level:e}=t;if(0!==s.length)for(const{row:r,colFrom:n,colTo:c}of s)for(let s=n;s<=c;s++)o.call(l,e,r,t.normalizeCol(s),t.getWorldForColumn(s));}}l$l.pool=new e$1U(l$l);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class o$g{constructor(o,s,t){this.row=o,this.colFrom=s,this.colTo=t;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$u=new e$e("0/0/0/0");class n$A{constructor(e,t,o,l,s,i,n,r){this.x=e,this.ymin=t,this.ymax=o,this.invM=l,this.leftAdjust=s,this.rightAdjust=i,this.leftBound=n,this.rightBound=r;}static create(e,t){e[1]>t[1]&&([e,t]=[t,e]);const[o,l]=e,[s,i]=t,r=s-o,a=i-l,h=0!==a?r/a:0,c=(Math.ceil(l)-l)*h,f=(Math.floor(l)-l)*h;return new n$A(o,Math.floor(l),Math.ceil(i),h,r<0?c:f,r<0?f:c,r<0?s:o,r<0?o:s)}incrRow(){this.x+=this.invM;}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const r$f=[[0,0],[0,0],[0,0],[0,0]],a$u=1e-6;class h$f{constructor(e,o=null){this.tileInfo=e,this.fullExtent=o,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const l=e.lods.slice();l.sort((function(e,t){return t.scale-e.scale}));const s=this._lodInfos=l.map((l=>l$m.create(e,l,o)));l.forEach(((e,t)=>{this._infoByLevel[e.level]=s[t],this._infoByScale[e.scale]=s[t],this.scales[t]=e.scale;}),this),this._wrap=e.isWrappable;}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel["number"==typeof e?e:e.level]}getTileBounds(e,t,o=!1){i$u.set(t);const l=this._infoByLevel[i$u.level];return l?l.getTileBounds(e,i$u,o):e}getTileCoords(e,t,o=!1){i$u.set(t);const l=this._infoByLevel[i$u.level];return l?l.getTileCoords(e,i$u,o):e}getTileCoverage(e,t=192,l="closest"){const i="closest"===l?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),a=l$l.pool.acquire(i),h=this._wrap;let c,f,u,m=1/0,g=-1/0;const d=a.spans;r$f[0][0]=r$f[0][1]=r$f[1][1]=r$f[3][0]=-t,r$f[1][0]=r$f[2][0]=e.size[0]+t,r$f[2][1]=r$f[3][1]=e.size[1]+t;for(const o of r$f)e.toMap(o,o),o[0]=i.getColumnForX(o[0]),o[1]=i.getRowForY(o[1]);const y=[];let _=3;for(let o=0;o<4;o++){if(r$f[o][1]===r$f[_][1]){_=o;continue}const e=n$A.create(r$f[o],r$f[_]);m=Math.min(e.ymin,m),g=Math.max(e.ymax,g),void 0===y[e.ymin]&&(y[e.ymin]=[]),y[e.ymin].push(e),_=o;}if(null==m||null==g||g-m>100)return null;let v=[];for(c=m;c<g;){null!=y[c]&&(v=v.concat(y[c])),f=1/0,u=-1/0;for(let e=v.length-1;e>=0;e--){const t=v[e];f=Math.min(f,t.getLeftCol()),u=Math.max(u,t.getRightCol());}if(f=Math.floor(f),u=Math.floor(u),c>=i.first[1]&&c<=i.last[1])if(h)if(i.size[0]<i.worldSize[0]){const e=Math.floor(u/i.worldSize[0]);for(let t=Math.floor(f/i.worldSize[0]);t<=e;t++)d.push(new o$g(c,Math.max(i.getFirstColumnForWorld(t),f),Math.min(i.getLastColumnForWorld(t),u)));}else d.push(new o$g(c,f,u));else f>i.last[0]||u<i.first[0]||(f=Math.max(f,i.first[0]),u=Math.min(u,i.last[0]),d.push(new o$g(c,f,u)));c+=1;for(let e=v.length-1;e>=0;e--){const t=v[e];t.ymax>=c?t.incrRow():v.splice(e,1);}}return a}getTileParentId(e){i$u.set(e);const t=this._infoByLevel[i$u.level],o=this._lodInfos.indexOf(t)-1;return o<0?null:(this._getTileIdAtLOD(i$u,this._lodInfos[o],i$u),i$u.id)}getTileResolution(e){const t=this._infoByLevel["object"==typeof e?e.level:e];return t?t.resolution:-1}getTileScale(e){const t=this._infoByLevel[e.level];return t?t.scale:-1}intersects(e,t){i$u.set(t);const o=this._infoByLevel[i$u.level],l=e.lodInfo;if(l.resolution>o.resolution){this._getTileIdAtLOD(i$u,l,i$u);const t=l.denormalizeCol(i$u.col,i$u.world);for(const o of e.spans)if(o.row===i$u.row&&o.colFrom<=t&&o.colTo>=t)return !0}if(l.resolution<o.resolution){const[t,s,n,r]=e.spans.reduce(((e,t)=>(e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e)),[1/0,-1/0,1/0,-1/0]),a=o.denormalizeCol(i$u.col,i$u.world),h=l.getColumnForX(o.getXForColumn(a)),c=l.getRowForY(o.getYForRow(i$u.row)),f=l.getColumnForX(o.getXForColumn(a+1))-1,u=l.getRowForY(o.getYForRow(i$u.row+1))-1;return !(h>r||f<n||c>s||u<t)}const s=l.denormalizeCol(i$u.col,i$u.world);return e.spans.some((e=>e.row===i$u.row&&e.colFrom<=s&&e.colTo>=s))}normalizeBounds(t,o,l){if(t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],this._wrap){const o=S$F(this.tileInfo.spatialReference),s=-l*(o.valid[1]-o.valid[0]);t[0]+=s,t[2]+=s;}return t}getSmallestInfoForScale(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>t[0])return this._infoByScale[t[0]];for(let o=1;o<t.length-1;o++)if(e>t[o]+a$u)return this._infoByScale[t[o-1]];return this._infoByScale[t[t.length-1]]}getClosestInfoForScale(e){const t=this.scales;return this._infoByScale[e]||(e=t.reduce(((t,o)=>Math.abs(o-e)<Math.abs(t-e)?o:t),t[0])),this._infoByScale[e]}scaleToLevel(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let o=t.length-1;o>=0;o--)if(e<t[o]){if(o===t.length-1)return this._infoByScale[t[t.length-1]].level;return this._infoByScale[t[o]].level+(t[o]-e)/(t[o]-t[o+1])}return this._infoByScale[t[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,t,o){const l=this._infoByLevel[o.level];return e.set(o),t.resolution<l.resolution?null:(t.resolution===l.resolution||(e.level=t.level,e.col=Math.floor(o.col*l.resolution/t.resolution+.01),e.row=Math.floor(o.row*l.resolution/t.resolution+.01)),e)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$z(e,t){return e.length=0,t.forEach((t=>e.push(t))),e}const u$d=new Set,c$t=[],a$t=new Map,h$e=[0,0];let l$k=class extends p$3a{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null;}initialize(){const{concurrency:e,process:t,strategy:s}=this;this._queue=new l$o({concurrency:e,process:(e,s)=>{const r=this._keyToItem.get(e);return t(r,{signal:s})},peeker:"scale-first"===s?e=>this._peekByScaleFirst(e):e=>this._peekByCenterFirst(e)});}destroy(){this.clear(),this._queue.destroy(),this._queue=null;}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t="string"==typeof e?e:e.id;this._queue.abort(t);}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating");}has(e){return "string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause();}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const s=this._queue.push(t),r=()=>{this._keyToItem.delete(t),this.notifyChange("updating");};return this._keyToItem.set(t,e),s.then(r,r),this.notifyChange("updating"),s}reset(){this._queue.reset();}resume(){this._queue.resume();}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let s=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach((e=>{const t=this._keyToItem.get(e),o=this.tileInfoView.getTileScale(t.key);a$t.has(o)||(a$t.set(o,[]),s=Math.max(o,s),r=Math.min(o,r)),a$t.get(o).push(t.key),u$d.add(o);}));let o=this.state.scale;a$t.has(o)||(n$z(c$t,u$d),c$t.sort(((e,t)=>e-t)),o=c$t.reduce(((e,t)=>Math.abs(t-o)<Math.abs(e-o)?t:e),c$t[0])),o=Math.min(o,s),o=Math.max(o,r);const i=a$t.get(o),h=t.getClosestInfoForScale(o),l=h.getColumnForX(this.state.center[0]),p=h.getRowForY(this.state.center[1]);return i.sort(((e,t)=>{const s=h.denormalizeCol(e.col,e.world),r=h.denormalizeCol(t.col,t.world);return Math.sqrt((l-s)*(l-s)+(p-e.row)*(p-e.row))-Math.sqrt((l-r)*(l-r)+(p-t.row)*(p-t.row))})),u$d.clear(),a$t.clear(),i[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,s=this.state.center;let r=Number.POSITIVE_INFINITY,i=null;return e.forEach((e=>{const n=this._keyToItem.get(e);t.getTileCoords(h$e,n.key);const u=d$1w(h$e,s);u<r&&(r=u,i=n.key);})),i.id}};e$25([d$1T({constructOnly:!0})],l$k.prototype,"concurrency",void 0),e$25([d$1T({constructOnly:!0})],l$k.prototype,"process",void 0),e$25([d$1T()],l$k.prototype,"state",void 0),e$25([d$1T({constructOnly:!0})],l$k.prototype,"strategy",void 0),e$25([d$1T({constructOnly:!0})],l$k.prototype,"tileInfoView",void 0),e$25([d$1T({readOnly:!0})],l$k.prototype,"updating",null),l$k=e$25([i$2z("esri.views.2d.tiling.TileQueue")],l$k);const p$p=l$k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$f{constructor(e,t,i){this.maxSize=e,this.tileInfoView=t,this.removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[];}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const t=this._tilePerId.get(e);if(!t)return null;const s=t.key.level,r=this._tileKeysPerLevel[s];i$t(this._tilePerId,e);for(let i=0;i<r.length;i++)if(r[i].id===e){r.splice(i,1);break}return t.visible=!0,t}add(e){e.visible=!1;const t=e.key,i=t.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,e);const s=t.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(t);}prune(e,t,i){let s=this._tilePerId.size;if(s<=this.maxSize)return;let r=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&r>=0;)r!==e&&(s=this._pruneAroundCenterTile(s,t,i,r)),r--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,t,i,e));}_pruneAroundCenterTile(t,i,s,r){const l=this._tileKeysPerLevel[r];if(!l||0===l.length)return t;const{size:n,origin:h}=this.tileInfoView.tileInfo,o=s*n[0],u=s*n[1],d=[0,0],_=[0,0];for(l.sort(((t,s)=>(d[0]=h.x+o*(t.col+.5),d[1]=h.y-u*(t.row+.5),_[0]=h.x+o*(s.col+.5),_[1]=h.y-u*(s.row+.5),q$i(d,i)-q$i(_,i))));l.length>0;){const e=l.pop();if(this._removeTile(e.id),--t===this.maxSize)break}return t}_removeTile(e){const t=this._tilePerId.get(e);this.removedFunc&&this.removedFunc(t),i$t(this._tilePerId,e);}}function i$t(e,t){e.delete(t);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$s=new e$e(0,0,0,0),h$d=new Map,o$f=[],c$s=[];class r$e{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.resampling=null==e.resampling||!!e.resampling,e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),null!=e.buffer&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new t$f(e.cacheSize,this.tileInfoView,(e=>{this.releaseTile(e);})));}destroy(){this.tileIndex.clear();}update(e){const{resampling:i,tileIndex:t}=this,l=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(c$s.length=0,o$f.length=0,h$d.clear(),!l)return;const{minScale:r,maxScale:n}=this.tileInfoView.tileInfo,{spans:f,lodInfo:d}=l,{level:u}=d,{scale:p,center:g,resolution:y}=e.state,I=!e.stationary&&p>this._previousScale;if(this._previousScale=p,this.tiles.length=0,!i&&(p>r||p<n))return this.tiles.length=0,h$d.clear(),t.forEach((e=>{this.releaseTile(e);})),t.clear(),c$s.length=0,o$f.length=0,h$d.clear(),l$l.pool.release(l),!0;t.forEach((e=>e.visible=!0));let T=0,_=0;if(f.length>0)for(const{row:s,colFrom:o,colTo:c}of f)for(let e=o;e<=c;e++){T++;const i=a$s.set(u,s,d.normalizeCol(e),d.getWorldForColumn(e)).id;if(t.has(i)){const e=t.get(i);e.isReady?(h$d.set(i,e),_++):I||this._addParentTile(i,h$d);}else {let e;if(this._tileCache&&this._tileCache.has(i)){if(e=this._tileCache.pop(i),this.tileIndex.set(i,e),e.isReady){h$d.set(i,e),_++;continue}}else e=this.acquireTile(a$s),this.tileIndex.set(i,e);I||this._addParentTile(i,h$d);}}const m=_===T;t.forEach(((e,i)=>{if(a$s.set(i),h$d.has(i))return;const t=this.tileInfoView.intersects(l,a$s),s="purge"===this.cachePolicy?a$s.level!==u:a$s.level>u;!t||!I&&m?!s&&t||o$f.push(i):e.isReady?s&&"purge"===this.cachePolicy&&this._hasReadyAncestor(a$s,u)?o$f.push(i):c$s.push(i):s&&o$f.push(i);}));for(const s of c$s){const e=t.get(s);e&&e.isReady&&h$d.set(s,e);}for(const s of o$f){const e=t.get(s);this._tileCache?this._tileCache.add(e):this.releaseTile(e),t.delete(s);}return h$d.forEach((e=>this.tiles.push(e))),t.forEach((e=>{h$d.has(e.key.id)||(e.visible=!1);})),this._tileCache&&this._tileCache.prune(u,g,y),l$l.pool.release(l),h$d.clear(),m}clear(e=!0){const{tileIndex:i}=this;e&&i.forEach((e=>{this.releaseTile(e);})),i.clear();}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e);}_addParentTile(e,i){let t=e,s=null;for(;t=this.tileInfoView.getTileParentId(t),t;)if(this.tileIndex.has(t)){if(s=this.tileIndex.get(t),s&&s.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if(this._tileCache&&this._tileCache.has(t)&&(s=this._tileCache.pop(t),this.tileIndex.set(t,s),s&&s.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(t,s){const l=u$1x();this.tileInfoView.getTileBounds(l,t,!0);for(const a of this.tileIndex.values())if(a.isReady&&a.key.level>=s&&a.key.level<t.level){const t=u$1x();if(this.tileInfoView.getTileBounds(t,a.key,!0),q$g(t,l))return !0}return !1}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var t$e,o$e,r$d,n$y={exports:{}};t$e=n$y,o$e=function(){function t(t,r,a,f,e){o(t,r,a||0,f||t.length-1,e||n);}function o(t,n,a,f,e){for(;f>a;){if(f-a>600){var h=f-a+1,i=n-a+1,u=Math.log(h),M=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*M*(h-M)/h)*(i-h/2<0?-1:1);o(t,n,Math.max(a,Math.floor(n-i*M/h+c)),Math.min(f,Math.floor(n+(h-i)*M/h+c)),e);}var s=t[n],x=a,p=f;for(r(t,a,n),e(t[f],s)>0&&r(t,a,f);x<p;){for(r(t,x,p),x++,p--;e(t[x],s)<0;)x++;for(;e(t[p],s)>0;)p--;}0===e(t[a],s)?r(t,a,p):r(t,++p,f),p<=n&&(a=p+1),n<=p&&(f=p-1);}}function r(t,o,r){var n=t[o];t[o]=t[r],t[r]=n;}function n(t,o){return t<o?-1:t>o?1:0}return t},void 0!==(r$d=o$e())&&(t$e.exports=r$d);const a$r=n$y.exports;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$s(t,n){if(!(this instanceof i$s))return new i$s(t,n);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&("function"==typeof n?this.toBBox=n:this._initFormat(n)),this.clear();}function n$x(t,i,n){if(!n)return i.indexOf(t);for(var h=0;h<i.length;h++)if(n(t,i[h]))return h;return -1}function h$c(t,i){a$q(t,0,t.children.length,i,t);}function a$q(t,i,n,h,a){a||(a=x$4(null)),a.minX=1/0,a.minY=1/0,a.maxX=-1/0,a.maxY=-1/0;for(var e,o=i;o<n;o++)e=t.children[o],r$c(a,t.leaf?h(e):e);return a}function r$c(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function e$c(t,i){return t.minX-i.minX}function o$d(t,i){return t.minY-i.minY}function s$n(t){return (t.maxX-t.minX)*(t.maxY-t.minY)}function l$j(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m$g(t,i){return (Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function c$r(t,i){var n=Math.max(t.minX,i.minX),h=Math.max(t.minY,i.minY),a=Math.min(t.maxX,i.maxX),r=Math.min(t.maxY,i.maxY);return Math.max(0,a-n)*Math.max(0,r-h)}function u$c(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function f$7(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function x$4(t){return {children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d$f(i,n,h,a,r){for(var e,o=[n,h];o.length;)(h=o.pop())-(n=o.pop())<=a||(e=n+Math.ceil((h-n)/a/2)*a,a$r(i,e,n,h,r),o.push(n,e,e,h));}i$s.prototype={all:function(){return this._all(this.data,[])},search:function(t){var i=this.data,n=[],h=this.toBBox;if(!f$7(t,i))return n;for(var a,r,e,o,s=[];i;){for(a=0,r=i.children.length;a<r;a++)e=i.children[a],f$7(t,o=i.leaf?h(e):e)&&(i.leaf?n.push(e):u$c(t,o)?this._all(e,n):s.push(e));i=s.pop();}return n},collides:function(t){var i=this.data,n=this.toBBox;if(!f$7(t,i))return !1;for(var h,a,r,e,o=[];i;){for(h=0,a=i.children.length;h<a;h++)if(r=i.children[h],f$7(t,e=i.leaf?n(r):r)){if(i.leaf||u$c(t,e))return !0;o.push(r);}i=o.pop();}return !1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}var h=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===h.height)this._splitRoot(this.data,h);else {if(this.data.height<h.height){var a=this.data;this.data=h,h=a;}this._insert(h,this.data.height-h.height-1,!0);}else this.data=h;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=x$4([]),this},remove:function(t,i){if(!t)return this;for(var h,a,r,e,o=this.data,s=this.toBBox(t),l=[],m=[];o||l.length;){if(o||(o=l.pop(),a=l[l.length-1],h=m.pop(),e=!0),o.leaf&&-1!==(r=n$x(t,o.children,i)))return o.children.splice(r,1),l.push(o),this._condense(l),this;e||o.leaf||!u$c(o,s)?a?(h++,o=a.children[h],e=!1):o=null:(l.push(o),m.push(h),h=0,a=o,o=o.children[0]);}return this},toBBox:function(t){return t},compareMinX:e$c,compareMinY:o$d,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},_build:function(t,i,n,a){var r,e=n-i+1,o=this._maxEntries;if(e<=o)return h$c(r=x$4(t.slice(i,n+1)),this.toBBox),r;a||(a=Math.ceil(Math.log(e)/Math.log(o)),o=Math.ceil(e/Math.pow(o,a-1))),(r=x$4([])).leaf=!1,r.height=a;var s,l,m,c,u=Math.ceil(e/o),f=u*Math.ceil(Math.sqrt(o));for(d$f(t,i,n,f,this.compareMinX),s=i;s<=n;s+=f)for(d$f(t,s,m=Math.min(s+f-1,n),u,this.compareMinY),l=s;l<=m;l+=u)c=Math.min(l+u-1,m),r.children.push(this._build(t,l,c,a-1));return h$c(r,this.toBBox),r},_chooseSubtree:function(t,i,n,h){for(var a,r,e,o,l,c,u,f;h.push(i),!i.leaf&&h.length-1!==n;){for(u=f=1/0,a=0,r=i.children.length;a<r;a++)l=s$n(e=i.children[a]),(c=m$g(t,e)-l)<f?(f=c,u=l<u?l:u,o=e):c===f&&l<u&&(u=l,o=e);i=o||i.children[0];}return i},_insert:function(t,i,n){var h=this.toBBox,a=n?t:h(t),e=[],o=this._chooseSubtree(a,this.data,i,e);for(o.children.push(t),r$c(o,a);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(a,e,i);},_split:function(t,i){var n=t[i],a=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,a);var e=this._chooseSplitIndex(n,r,a),o=x$4(n.children.splice(e,n.children.length-e));o.height=n.height,o.leaf=n.leaf,h$c(n,this.toBBox),h$c(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o);},_splitRoot:function(t,i){this.data=x$4([t,i]),this.data.height=t.height+1,this.data.leaf=!1,h$c(this.data,this.toBBox);},_chooseSplitIndex:function(t,i,n){var h,r,e,o,l,m,u,f;for(m=u=1/0,h=i;h<=n-i;h++)o=c$r(r=a$q(t,0,h,this.toBBox),e=a$q(t,h,n,this.toBBox)),l=s$n(r)+s$n(e),o<m?(m=o,f=h,u=l<u?l:u):o===m&&l<u&&(u=l,f=h);return f},_chooseSplitAxis:function(t,i,n){var h=t.leaf?this.compareMinX:e$c,a=t.leaf?this.compareMinY:o$d;this._allDistMargin(t,i,n,h)<this._allDistMargin(t,i,n,a)&&t.children.sort(h);},_allDistMargin:function(t,i,n,h){t.children.sort(h);var e,o,s=this.toBBox,m=a$q(t,0,i,s),c=a$q(t,n-i,n,s),u=l$j(m)+l$j(c);for(e=i;e<n-i;e++)o=t.children[e],r$c(m,t.leaf?s(o):o),u+=l$j(m);for(e=n-i-1;e>=i;e--)o=t.children[e],r$c(c,t.leaf?s(o):o),u+=l$j(c);return u},_adjustParentBBoxes:function(t,i,n){for(var h=n;h>=0;h--)r$c(i[h],t);},_condense:function(t){for(var i,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():h$c(t[n],this.toBBox);},_initFormat:function(t){var i=["return a"," - b",";"];this.compareMinX=new Function("a","b",i.join(t[0])),this.compareMinY=new Function("a","b",i.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};");}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class n$w{constructor(t,e){this.key=new e$e(0,0,0,0),this.bounds=u$1x(),this.objectIds=new Set,this.key.set(e);const s=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=s.resolution,this.scale=s.scale,this.level=s.level;}get id(){return this.key.id}get extent(){return M$A.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return {originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const e=this.key.getChildKeys(),i=t$1H.acquire();for(let t=0;t<e.length;t++)i[t]=new n$w(this.tileInfoView,e[t]);return i}getQuantizationParameters(){return a$1k.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$v={added:[],removed:[]},r$b=new Set,d$e=new e$e(0,0,0,0);class l$i extends n$2D{constructor(e){super(),this._tiles=new Map,this._index=i$s(9,s$2r("esri-csp-restrictions")?e=>({minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e;}destroy(){this.clear();}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear();}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const t={added:[],removed:[]};for(const s of e.added)if(!this.has(s)){const e=new n$w(this.tileScheme,s);this._tiles.set(s,e),this._index.insert(e),t.added.push(e);}for(const s of e.removed)if(this.has(s)){const e=this.get(s);this._tiles.delete(s),this._index.remove(e),t.removed.push(e);}this.tiles.length=0,this._tiles.forEach((e=>this.tiles.push(e))),(t.added.length||t.removed.length)&&this.emit("update",t);}setViewState(e){const t=this.tileScheme.getTileCoverage(e,0);if(!t)return;const{spans:s,lodInfo:h}=t,{level:l}=h;if(s.length>0)for(const{row:o,colFrom:a,colTo:m}of s)for(let e=a;e<=m;e++){const t=d$e.set(l,o,h.normalizeCol(e),h.getWorldForColumn(e)).id;if(r$b.add(t),!this.has(t)){const e=new n$w(this.tileScheme,t);this._tiles.set(t,e),this._index.insert(e),this.tiles.push(e),n$v.added.push(e);}}for(let i=this.tiles.length-1;i>=0;i--){const e=this.tiles[i];r$b.has(e.id)||(this._tiles.delete(e.id),this.tiles.splice(i,1),this._index.remove(e),n$v.removed.push(e));}(n$v.added.length||n$v.removed.length)&&this.emit("update",n$v),l$l.pool.release(t),r$b.clear(),n$v.added.length=0,n$v.removed.length=0;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s$m=s=>-1!==s.indexOf("Brush");class e$b{constructor(){this._names=new Map;}begin(e){this._names.has(e)||(this._names.set(e,!1),s$m(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`));}end(s){this._names.has(s)&&!this._names.get(s)&&(this._names.set(s,!0),performance.mark(`Esri.${s}.End`));}record(s){this._names.has(s)||(this._names.set(s,!0),performance.mark(`Esri.${s}`));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const N$2=s$2n.getLogger("esri.views.MapView");function q$2(t){return t&&"esri.Viewpoint"===t.declaredClass}const L$3=160;let A=class extends(a$J(P$4)){constructor(t){super(t),this._stationaryTimer=null,this.frameTask=new a$B(this),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.initialExtent=null,this.labelManager=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.resizeAlign="center",this.supportsGround=!1,this.timeline=new e$b,this.type="2d",this.constraints=new y$9,this.padding={top:0,right:0,bottom:0,left:0};const e=this.handles,i=()=>this.notifyChange("updating");e.add([this.watch("viewpoint",(()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(L$3);}),!0),this.on("resize",(t=>this._resizeHandler(t))),this.watch("animationManager.animation",(t=>{this.animation=t;})),this.allLayerViews.on("change",(()=>{i(),e.remove("map-view-base-layerViewsUpdating"),e.add(this.allLayerViews.map((t=>t.watch("updating",i))),"map-view-base-layerViewsUpdating");}))],"map-view-base");}destroy(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null);}set animation(t){const e=this._get("animation");if(t===e)return;if(e&&e.stop(),!t||t.isFulfilled())return void this._set("animation",null);this._set("animation",t),this.frameTask.animationInProgress=!0;const i=()=>{t===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1;};t.when(i,i);}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:e}=this.state.paddedViewState;return new b$10({x:t[0],y:t[1],spatialReference:e})}set center(t){if(null==t)return;if(!this._normalizeInput(t))return void N$2.error("#center",`incompatible spatialReference ${JSON.stringify(t.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!this.ready)return this._set("center",t),void this.notifyChange("initialExtentRequired");const e=this.viewpoint;wt(e,e,t),this.viewpoint=e;}set constraints(t){const e=this._get("constraints");e&&(this.handles.remove("map-view-base-constraints"),e.destroy()),this._set("constraints",t),t&&(t.view=this,this.ready&&(this.state.viewpoint=t.fit(this.state.paddedViewState.viewpoint)),this.handles.add(t.on("update",(()=>{this.ready&&this.state&&(this.state.viewpoint=t.fit(this.state.paddedViewState.viewpoint));})),"map-view-base-constraints"));}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(t){if(null==t)return;const e=this._normalizeInput(t);if(!e)return void N$2.error("#center",`incompatible spatialReference ${JSON.stringify(t.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!e.width||!e.height)return void N$2.error("#extent","invalid extent size");if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");const i=this.viewpoint;tt(i,i,e,this.size,{constraints:this.constraints}),this.viewpoint=i;}get graphicsTileStore(){return new l$i(this.featuresTilingScheme)}get initialExtentRequired(){const{extent:t,center:e,scale:i,viewpoint:s,zoom:n}=this;return !this.get("map.initialViewProperties.viewpoint")&&(!t&&((!e||0===i&&-1===n)&&!s))}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t);}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const e=this.viewpoint;kt(e,e,t),this.viewpoint=e;}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",-1);const e=this._get("extent");return e&&(this._set("extent",null),this._set("center",e.center)),void this.notifyChange("initialExtentRequired")}const e=this.viewpoint;Rt(e,e,t),this.viewpoint=e;}get stationary(){return !(this.animation||this.navigating||this._get("resizing")||this._stationaryTimer)}get updating(){return !this.destroyed&&(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some((t=>!t.destroyed&&!("layerViews"in t)&&!0===t.updating)))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const t=this.state.paddedViewState;return t&&t.viewpoint.clone()}set viewpoint(t){if(null==t)return;const i=this._normalizeInput(t);if(!i)return void(!t.scale||isNaN(t.scale)?N$2.error("#viewpoint",`invalid scale value of ${t.scale}`):t$1T(t.targetGeometry)?N$2.error("#viewpoint","geometry not defined"):N$2.error("#viewpoint",`incompatible spatialReference ${JSON.stringify(t.targetGeometry.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`));if(!this.ready)return this._set("viewpoint",i),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");const s=new u$m({targetGeometry:new b$10,scale:0,rotation:0});Z$2(s,i),this.constraints.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this.frameTask.requestFrame(),this._set("viewpoint",s);}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(t){if(null==t)return;if(!this.ready){this.notifyChange("initialExtentRequired"),this._set("zoom",t),this._set("scale",0);const e=this._get("extent");e&&(this._set("extent",null),this._set("center",e.center));}if(!this.constraints.effectiveLODs)return;const e=this.viewpoint;Rt(e,e,this.constraints.zoomToScale(t)),this.viewpoint=e,this._set("zoom",this.constraints.scaleToZoom(this.scale));}goTo(t,e){if(t)return this.animation&&(this.animation=null),this._createAnimation(),d$1Q(this,"ready",e&&e.signal).then((()=>{const i={animate:!0,...e},s=ht(t,this);return this.animation.update(s),this._gotoTask={},i.animate?this._gotoAnimated(s,i):this._gotoImmediate(s,i)}));N$2.error("#goTo()","target cannot be null or undefined");}hitTest(t){return Promise.reject("Should be implemented by subclasses")}popupHitTest(t){return this.hitTest(t).then((e=>({...e,mapPoint:this.toMap(t)})))}toMap(t){if(!this.ready)return null;const e=[0,0],[i,s]=this.state.toMap(e,[t.x,t.y]),n=this.spatialReference;return new b$10({x:i,y:s,spatialReference:n})}isTileInfoRequired(){return !0}toScreen(t){if(!this.ready)return null;const e=this._normalizeInput(t),i=[e.x,e.y];return this.state.toScreen(i,i),c$2i(i[0],i[1])}pixelSizeAt(){return this.ready?this.state.resolution:(N$2.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}requestUpdate(){this.ready&&this.frameTask.requestUpdate();}getDefaultSpatialReference(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null}isSpatialReferenceSupported(t,e){return !(!e&&!this._get("ready"))||null!==this._getDefaultViewpoint()}importLayerView(t){return l$r.importLayerView(t)}hasLayerViewModule(t){return l$r.hasLayerViewModule(t)}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new n$K),this.animation}_cancellableGoTo(t,e,i){const s=()=>t===this._gotoTask,n=i.then((()=>{s()&&(this.animation=null);})).catch((t=>{throw s()&&(this.animation=null,e.done||(e.stop(),this.frameTask.animationInProgress=!1)),t})),a=new Promise((t=>t(n)));return e.when().catch((()=>{s()&&a.cancel&&a.cancel();})),a}_gotoImmediate(t,e){const s=this._gotoTask,n=this.animation,a=t.then((t=>{if(h$1E(e),s!==this._gotoTask)throw new s$2l("view:goto-interrupted","Goto was interrupted");this.viewpoint=n.target=t,n.finish();}));return this._cancellableGoTo(s,n,a)}_gotoAnimated(t,e){const s=this._gotoTask,n=this.animation,a=t.then((t=>{if(h$1E(e),s!==this._gotoTask)throw new s$2l("view:goto-interrupted","Goto was interrupted");return n.update(t),this.animationManager.animate(n,this.viewpoint,e),n.when().then((()=>{}),(()=>{}))}));return this._cancellableGoTo(s,n,a)}_resizeHandler(t){const e=this.state;if(!e)return;let i=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();e.size=[t.width,t.height],Gt(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i;}_startup(){const t=this._getDefaultViewpoint();this.constraints.view=this,this.constraints.fit(t),this._set("animationManager",new d$h({view:this})),this._set("state",new m$h({padding:this._get("padding"),size:this.size,viewpoint:t})),this._set("featuresTilingScheme",new h$f(j$C.create({spatialReference:this.spatialReference,size:512,numLODs:36}))),this._set("ready",!0),this.frameTask&&this.frameTask.start();}_teardown(){this.frameTask&&this.frameTask.stop(),this._set("ready",!1),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);const{center:[t,e],spatialReference:i,rotation:s,scale:n}=this.state.paddedViewState,a=new b$10({x:t,y:e,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",a),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("spatialReference",i),this.constraints.view=null,this.animationManager.destroy(),this._set("animationManager",null),this._set("state",null),this.animation=null;}_flipStationary(t){return null!==this._stationaryTimer||(this._stationaryTimer=setTimeout((()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<L$3&&(this._stationaryTimer=this._flipStationary(t));}),t)),this._stationaryTimer}_normalizeInput(t,e=this.spatialReference){const i=t&&t.targetGeometry||t;return e?i?e.equals(i.spatialReference)?t:g$10(i,e)?q$2(t)?(t.targetGeometry=M$B(i,e),t):M$B(i,e):null:null:t}_getDefaultViewpoint(){const t=this.constraints,i={zoom:this._get("zoom"),scale:this._get("scale"),center:this._normalizeInput(this._get("center")),extent:this._normalizeInput(this._get("extent")),rotation:this._get("rotation"),viewpoint:this._normalizeInput(this._get("viewpoint")),spatialReference:this._userSpatialReference};t.effectiveLODs?-1!==i.zoom&&(i.scale=t.zoomToScale(i.zoom)):i.zoom=-1;let s=null,n=null,r=0;const o=i.viewpoint&&i.viewpoint.rotation,l=i.viewpoint&&i.viewpoint.targetGeometry;r$1K(l)&&("extent"===l.type?s=l:"point"===l.type&&(n=l,r=i.viewpoint.scale));const p=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent")),h=this._normalizeInput(this.initialExtent),d=i.extent||s||p||h,m=i.center||n||d&&d.center,c=this.get("map.initialViewProperties.viewpoint.scale"),u=i.scale||r||c||d&&J(d,this.size),g=this.get("map.initialViewProperties.viewpoint.rotation"),y=i.rotation||o||g||0;return m&&u?new u$m({targetGeometry:m,scale:u,rotation:y}):null}};e$25([d$1T()],A.prototype,"_stationaryTimer",void 0),e$25([d$1T()],A.prototype,"animation",null),e$25([d$1T({readOnly:!0})],A.prototype,"animationManager",void 0),e$25([d$1T({value:null,type:b$10,dependsOn:["state.id","ready"]})],A.prototype,"center",null),e$25([d$1T({type:y$9})],A.prototype,"constraints",null),e$25([d$1T({value:null,type:M$A,dependsOn:["state.id","ready"]})],A.prototype,"extent",null),e$25([d$1T({readOnly:!0})],A.prototype,"featuresTilingScheme",void 0),e$25([d$1T()],A.prototype,"fullOpacity",void 0),e$25([d$1T({readOnly:!0})],A.prototype,"graphicsTileStore",null),e$25([d$1T()],A.prototype,"graphicsView",void 0),e$25([d$1T({type:M$A})],A.prototype,"initialExtent",void 0),e$25([d$1T({dependsOn:["map.initialViewProperties?.viewpoint"]})],A.prototype,"initialExtentRequired",null),e$25([d$1T()],A.prototype,"labelManager",void 0),e$25([d$1T({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],A.prototype,"padding",null),e$25([d$1T({type:Object})],A.prototype,"renderingOptions",void 0),e$25([d$1T()],A.prototype,"resizeAlign",void 0),e$25([d$1T({readOnly:!0,dependsOn:["state.id"]})],A.prototype,"resolution",null),e$25([d$1T({value:0,type:Number,dependsOn:["state.id","ready"]})],A.prototype,"rotation",null),e$25([d$1T({value:0,type:Number,dependsOn:["state.id","ready"]})],A.prototype,"scale",null),e$25([d$1T({type:k$w,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],A.prototype,"spatialReference",void 0),e$25([d$1T({readOnly:!0})],A.prototype,"state",void 0),e$25([d$1T({dependsOn:["animation","navigating","resizing","_stationaryTimer"]})],A.prototype,"stationary",null),e$25([d$1T({readOnly:!0})],A.prototype,"supportsGround",void 0),e$25([d$1T({type:e$b,readOnly:!0})],A.prototype,"timeline",void 0),e$25([d$1T({readOnly:!0})],A.prototype,"type",void 0),e$25([d$1T({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],A.prototype,"updating",null),e$25([d$1T({value:null,type:u$m,dependsOn:["state.id","ready"]})],A.prototype,"viewpoint",null),e$25([d$1T({value:-1,dependsOn:["state.id"]})],A.prototype,"zoom",null),A=e$25([i$2z("esri.views.MapViewBase")],A);const U=A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$d(t,r){switch(r){case"primary":return "touch"===t.pointerType||0===t.button;case"secondary":return "touch"!==t.pointerType&&2===t.button;case"tertiary":return "touch"!==t.pointerType&&1===t.button}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class a$p extends i$F{constructor(t,i){super(!0),this.view=t,this.registerIncoming("double-click",i,(t=>this._handleDoubleClick(t,i)));}_handleDoubleClick(t,a){t$d(t.data,"primary")&&(t.stopPropagation(),a?this.view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this.view.mapViewNavigation.zoomIn([t.data.x,t.data.y]));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$a extends i$F{constructor(t,e,a){super(!0),this.view=t,this.pointerType=e,this.registerIncoming("double-tap-drag",a,(t=>this._handleDoubleTapDrag(t)));}_handleDoubleTapDrag(t){const{data:e}=t,{pointerType:a}=e;if(a!==this.pointerType)return;t.stopPropagation();const{action:s,delta:i}=e,{view:r}=this,{mapViewNavigation:n}=r;switch(s){case"begin":{const{scale:t}=r;this._startScale=t,this._currentScale=t,this._previousDelta=i,n.begin();break}case"update":{if(this._previousDelta.y===i.y)return;this._previousDelta=i;const t=1.015**i.y,e=this._startScale*t,a=e/this._currentScale;n.setViewpointImmediate(a),this._currentScale=e;break}case"end":{const{constraints:t}=r,{effectiveLODs:e,snapToZoom:a}=t;if(!a||!e)return void n.end();const s=t.snapScale(this._currentScale),o=(i.y>0?Math.max(s,t.snapToPreviousScale(this._startScale)):Math.min(s,t.snapToNextScale(this._startScale)))/this._currentScale;n.zoom(o);break}}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$c{constructor(t){this.callbacks=t,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0);}handle(t){const s=t.data,i=s.pointers.size;switch(s.action){case"start":this.currentCount=i,this.emitStart(t);break;case"added":this.emitEnd(this.previousEvent),this.currentCount=i,this.emitStart(t);break;case"update":this.emitUpdate(t);break;case"removed":this.startEvent&&this.emitEnd(this.previousEvent),this.currentCount=i,this.emitStart(t);break;case"end":this.emitEnd(t),this.currentCount=0;}this.previousEvent=t;}emitStart(t){this.startEvent=t,this.callbacks.condition(this.currentCount,t)&&this.callbacks.start(this.currentCount,t,this.startEvent);}emitUpdate(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.update(this.currentCount,t,this.startEvent);}emitEnd(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.end(this.currentCount,t,this.startEvent),this.startEvent=null;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class n$u extends i$F{constructor(i,n,o){super(!0),this.view=i,this.pointerAction=n,this.registerIncoming("drag",o,(t=>this._handleDrag(t))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()));const e=this.view.mapViewNavigation;this.dragEventSeparator=new t$c({start:(t,i)=>{e.pan.begin(this.view,i.data),i.stopPropagation();},update:(t,i)=>{e.pan.update(this.view,i.data),i.stopPropagation();},end:(t,i)=>{e.pan.end(this.view,i.data),i.stopPropagation();},condition:(t,i)=>1===t&&t$d(i.data,this.pointerAction)});}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(t);}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class o$c extends i$F{constructor(a,o,r){super(!0),this.view=a,this.pointerAction=o;const e=this.view.mapViewNavigation;this.dragEventSeparator=new t$c({start:(t,a)=>{e.rotate.begin(this.view,a.data),a.stopPropagation();},update:(t,a)=>{e.rotate.update(this.view,a.data),a.stopPropagation();},end:(t,a)=>{e.rotate.end(),a.stopPropagation();},condition:(t,a)=>1===t&&t$d(a.data,this.pointerAction)}),this.registerIncoming("drag",r,(t=>this.dragEventSeparator.handle(t)));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$t(t){let n=t*t;return t<0&&(n*=-1),n}function a$o(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function i$r(a,i,o){const s=o,e=a.state,r=a.device,l="forward-down"===i.tiltDirection?1:-1,c=1;return "standard"===r.deviceType?(s.translation[0]=n$t(e.axes[0]),s.translation[1]=n$t(e.axes[1]),s.translation[2]=n$t(e.buttons[7])-n$t(e.buttons[6]),s.heading=n$t(e.axes[2]),s.tilt=n$t(e.axes[3])):"spacemouse"===r.deviceType&&(s.translation[0]=1.2*n$t(e.axes[0]),s.translation[1]=1.2*n$t(e.axes[1]),s.translation[2]=2*-n$t(e.axes[2]),s.heading=1.2*n$t(e.axes[5]),s.tilt=1.2*n$t(e.axes[3])),s.tilt*=l,d$1z(s.translation,s.translation,c),s}function s$l(t){return 0===t.translation[0]&&0===t.translation[1]&&0===t.translation[2]&&0===t.heading&&0===t.tilt&&0===t.zoom}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class l$h extends i$F{constructor(i){super(!0),this.view=i,this.frameTask=null,this.watchHandles=new u$25,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",(t=>this.handleEvent(t))),this.handle.pause();}onInstall(t){super.onInstall(t),this.watchHandles.add([i$2x(this.view.navigation.gamepad,"enabled",(t=>{t?(this.handle.resume(),this.frameTask||(this.frameTask=A$u({update:t=>this.frameUpdate(t.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null));}))]);}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall();}handleEvent(t){const i=this.view.navigation.gamepad.device;i&&t.data.device!==i||this.currentDevice&&this.currentDevice!==t.data.device||("end"===t.data.action?(this.currentDevice=null,a$o(this.transformation)):(this.currentDevice=t.data.device,i$r(t.data,this.view.navigation.gamepad,this.transformation)));}frameUpdate(t){const i=this.transformation;if(s$l(i))return;const e=this.view.viewpoint.clone(),n=this.view.navigation.gamepad.velocityFactor,r=m$f*n*t;Ft(e,e,[i.translation[0]*r,-i.translation[1]*r]);const o=1+i.translation[2]*c$q*t,l=this.view.constraints.rotationEnabled?-i.heading*d$d*t:0,v=this.view.size,p=[v[0]/2,v[1]];St(e,e,o,l,p,v);const f=this.view.constraints.constrain(e,this.view.viewpoint);this.view.viewpoint=f;}}const d$d=.06,m$f=.7,c$q=6e-4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class i$q extends i$F{constructor(e,i,t){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",t,(e=>this._handleKeyDown(e))),this.registerIncoming("key-up",t,(e=>this._handleKeyUp(e))),this.registerIncoming("blur",t,(()=>this._handleBlur()));}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0);}_handleKeyUp(e){this._handleKey(e,!1);}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop());}_handleKey(e,i){const t=this._keyMap[e.data.key];if(this._pressed=null!=t,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),t){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown();}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation();}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class i$p extends i$F{constructor(e,i,t){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",t,(e=>this._handleKeyDown(e))),this.registerIncoming("key-up",t,(e=>this._handleKeyUp(e))),this.registerIncoming("blur",t,(()=>this._handleBlur()));}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0);}_handleKeyUp(e){this._handleKey(e,!1);}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop());}_handleKey(e,i){const t=e.modifiers;if(t.size>0&&!t.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[e.data.key];if(this._pressed=null!=s,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation();}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation();}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class t$b extends i$F{constructor(o,t,e){super(!0),this.view=o,this.keys=t,this._keysToZoomAction={},this.registerIncoming("key-down",e,(o=>this._handleKeyDown(o))),t.zoomIn.forEach((o=>this._keysToZoomAction[o]=0)),t.zoomOut.forEach((o=>this._keysToZoomAction[o]=1));}_handleKeyDown(o){this._handleKey(o);}_handleKey(o){const t=o.modifiers;if(t.size>0&&!t.has("Shift"))return;const{key:e}=o.data;if(!(e in this._keysToZoomAction))return;const i=this._keysToZoomAction[e],{mapViewNavigation:s}=this.view;let n=null;switch(i){case 0:n=s.zoomIn();break;case 1:n=s.zoomOut();break;default:return}s.begin(),n.then((()=>s.end())),o.stopPropagation();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$a=.6;class o$b extends i$F{constructor(e,t){super(!0),this.view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",t,(e=>this._handleMouseWheel(e)));}_handleMouseWheel(e){if(!this.view.navigation.mouseWheelZoomEnabled)return;if(e.preventDefault(),e.stopPropagation(),!this._canZoom)return;const o=this.view.mapViewNavigation,{x:n,y:i,deltaY:s}=e.data,a=1/t$a**(1/60*s),h=o.zoom(a,[n,i]);h&&(this._canZoom=!1,h.catch((()=>{})).then((()=>{this._canZoom=!0,o.end();})));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class a$n extends i$F{constructor(i){super(!0),this.view=i,this.registerIncoming("drag",(t=>this._handleDrag(t))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()));const a=this.view.mapViewNavigation;this.dragEventSeparator=new t$c({start:(t,i)=>{a.pinch.begin(this.view,i.data),i.stopPropagation();},update:(t,i)=>{a.pinch.update(this.view,i.data),i.stopPropagation();},end:(t,i)=>{a.pinch.end(this.view),i.stopPropagation();},condition:t=>t>=2});}_handleDrag(t){this.dragEventSeparator.handle(t);}stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$9(t){const n=t.native;return n?{buttons:n.buttons.map((t=>t.pressed?t.value?t.value:1:0)),axes:n.axes.map((n=>s$k(n,t.axisThreshold)))}:{buttons:[],axes:[]}}function n$s(t,n){if(t.axes.length!==n.axes.length)return !1;if(t.buttons.length!==n.buttons.length)return !1;for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==n.axes[e])return !1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==n.buttons[e])return !1;return !0}function e$9(t){for(let n=0;n<t.axes.length;n++)if(0!==t.axes[n])return !1;for(let n=0;n<t.buttons.length;n++)if(0!==t.buttons[n])return !1;return !0}function s$k(t,n){const e=Math.abs(t);return e<n?0:Math.sign(t)*(e-n)/(1-n)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class a$m{constructor(e,t){this.element=e,this.input=t,this._hasEventListeners=!1,this.onConnectGamepad=e=>{this.connectGamepad(e.gamepad);},this.onDisconnectGamepad=e=>{const t=e.gamepad,i=t.index,n=this.inputDevices[i];n&&(this.emitGamepadEvent(t,t$9(n),!1),this.inputDevices.splice(i,1),this.latestUpdate.splice(i,1),this.input.gamepad.devices.remove(n),this.ensurePollingState());},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const i="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=i&&n,this.supported&&(this.forEachGamepad((e=>this.connectGamepad(e))),window.addEventListener("gamepadconnected",this.onConnectGamepad),window.addEventListener("gamepaddisconnected",this.onDisconnectGamepad),this.ensurePollingState());}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this.onConnectGamepad),window.removeEventListener("gamepaddisconnected",this.onDisconnectGamepad));}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState());}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this.callback=e;}connectGamepad(e){const s=new i$A(e);"unknown"!==s.deviceType&&(this.inputDevices[e.index]=s,this.input.gamepad.devices.add(s)),this.ensurePollingState();}ensurePollingState(){this.eventsEnabled?this.startPolling():this.stopPolling();}startPolling(){null==this.frameTask&&(this.frameTask=A$u({update:()=>this.readGamepadState()}));}stopPolling(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array);}readGamepadState(){const e=document.hasFocus(),t=this.element.contains(document.activeElement),a="document"===this.input.gamepad.enabledFocusMode&&!e||"view"===this.input.gamepad.enabledFocusMode&&!t;this.forEachGamepad((e=>{const t=this.inputDevices[e.index];if(!t)return;const d=this.latestUpdate[e.index],o=t$9(t),r=a||e$9(o);if(d){if(d.timestamp===e.timestamp)return;if(!d.active&&r)return;if(n$s(d.state,o))return}this.emitGamepadEvent(e,o,!r);}));}forEachGamepad(e){const t=window.navigator.getGamepads();for(let s=0;s<t.length;s++){const i=t[s];this.validate(i)&&e(i);}}emitGamepadEvent(e,t,s){const i=this.latestUpdate[e.index],n=i&&i.active;if(!n&&!s)return;const a=!n&&s?"start":n&&s?"update":"end";this.latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:s},this.callback&&this.callback({device:this.inputDevices[e.index],state:t,action:a});}validate(e){if(!e)return !1;if(!e.connected)return !1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return !1;return !0}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$a=s$2r("trident"),a$l=s$2r("edge"),s$j=s$2r("chrome"),r$a=s$2r("ff"),h$b=s$2r("safari"),l$g={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};class u$b{constructor(e,t){this.input=t,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new a$m(e,this.input),this._gamepadSource.onEvent=e=>this._callback("gamepad",e);}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach((e=>{this._releasePointerCaptureSafe(e);})),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault);}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling();}set onEventReceived(e){this._callback=e;}set activeEvents(e){for(const t in this._active)if(!e||!e.has(t)){const e=this._active[t];this._element.removeEventListener(c$p[t],e),delete this._active[t];}e&&e.forEach((e=>{if(!this._active[e]&&c$p[e]){const t=(this._eventHandlers[e]||this._handleDefault).bind(this,e);this._element.addEventListener(c$p[e],t),this._active[e]=t;}})),this._gamepadSource.hasEventListeners=e&&e.has("gamepad");}setPointerCapture(e,t){t?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId));}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?l$g.touchNone:l$g.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?l$g.touchPan:l$g.touchNone);}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning);}_removeTouchAction(){this._element.classList.remove(l$g.touchNone),this._element.classList.remove(l$g.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning);}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e);}catch(t){}}_updateNormalizedPointerLikeEvent(e,t){const n=n$M(this._element,e);return u$b.test.disableSubpixelCoordinates&&(n.x=Math.round(n.x),n.y=Math.round(n.y)),t.x=n.x,t.y=n.y,t}_handleKey(e,n){const i=a$M(n);i&&"key-up"===e&&this._keyDownState.delete(i);const o={native:n,key:i,repeat:i&&this._keyDownState.has(i)};i&&"key-down"===e&&this._keyDownState.add(o.key),this._callback(e,o);}_handlePointer(e,t){const n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});this._callback(e,n);}_handlePointerPreventDefault(e,t){const n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});t.preventDefault(),this._callback(e,n);}_handleMouseWheel(e,t){let n=t.deltaY;switch(t.deltaMode){case 0:(o$a||a$l)&&(n=n/document.documentElement.clientHeight*600);break;case 1:n*=30;break;case 2:n*=900;}o$a||a$l?n*=.7:s$j||h$b?n*=.6:r$a&&(n*=1.375);const i=100,l=Math.abs(n);if(l>i){const e=.02;n=n/l*200/(1+Math.exp(-e*(l-i)));}const u=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,deltaY:n});this._callback(e,u);}_handlePointerCaptureLost(e,t){this._activePointerCaptures.delete(t.pointerId),this._handleDefault(e,t);}_handleDefault(e,t){const n={native:t};t.preventDefault(),this._callback(e,n);}_preventAltKeyDefault(e){"Alt"===e.key&&e.preventDefault();}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault();}}u$b.test={disableSubpixelCoordinates:!1};const c$p={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e$8 extends i$F{constructor(){super(!0),this.registerIncoming("context-menu",(t=>{t.data.native.preventDefault();}));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$7(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function n$r(t,e){const n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function r$9(e,n){if(n?(n.radius=0,n.center.x=0,n.center.y=0):n={radius:0,center:c$2i()},0===e.length)return n;if(1===e.length)return n.center.x=e[0].x,n.center.y=e[0].y,n;if(2===e.length){const[t,r]=e,[c,s]=[r.x-t.x,r.y-t.y];return n.radius=Math.sqrt(c*c+s*s)/2,n.center.x=(t.x+r.x)/2,n.center.y=(t.y+r.y)/2,n}let r=0,c=0;for(let t=0;t<e.length;t++)r+=e[t].x,c+=e[t].y;r/=e.length,c/=e.length;const s=e.map((t=>t.x-r)),x=e.map((t=>t.y-c));let o=0,y=0,a=0,h=0,l=0,u=0,i=0;for(let t=0;t<s.length;t++){const e=s[t],n=x[t],r=e*e,c=n*n;o+=r,y+=c,a+=e*n,h+=r*e,l+=c*n,u+=e*c,i+=n*r;}const f=.5*(h+u),g=.5*(l+i),M=o*y-a*a,d=(f*y-g*a)/M,m=(o*g-a*f)/M,p=c$2i(d+r,m+c);return {radius:Math.sqrt(d*d+m*m+(o+y)/e.length),center:p}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$f={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class s$i extends i$F{constructor(t=l$f.maximumDoubleClickDelay,i=l$f.maximumDoubleClickDistance,o=l$f.maximumDoubleTouchDelay,s=l$f.maximumDoubleTouchDistance,u=o$1X){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=o,this.maximumDoubleTouchDistance=s,this._clock=u,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this));}onUninstall(){this._pointerState.forEach((e=>{null!=e.doubleClickTimeout&&(e.doubleClickTimeout.remove(),e.doubleClickTimeout=null);}));}get hasPendingInputs(){return n$2H(this._pointerState,(e=>null!=e.doubleClickTimeout))}_pointerId(e){const t=e.native;return "mouse"===t.pointerType?`${t.pointerId}:${t.button}`:`${t.pointerType}`}_handleImmediateClick(e){const t=e.data,i=this._pointerId(t),l=this._pointerState.get(i);if(l){const s="touch"===t.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;e$7(l.event.data,t)>s?(this._clearDoubleClickTimeout(i,!0),this._startClick(e)):(this._clearDoubleClickTimeout(i,!1),this._doubleClick.emit(l.event.data,void 0,l.event.modifiers));}else this._startClick(e);}_startClick(e){const t=this._pointerId(e.data),i="touch"===e.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(t,{event:e,doubleClickTimeout:this._clock.setTimeout((()=>this._doubleClickTimeoutExceeded(t)),i)}),this.refreshHasPendingInputs();}_handlePointerDrag(e){const t=this._pointerId(e.data.currentEvent);this._clearDoubleClickTimeout(t,!0);}_handleDrag(e){const t=this._pointerId(e.data.pointer);this._clearDoubleClickTimeout(t,!0);}_clearDoubleClickTimeout(e,t){const i=this._pointerState.get(e);i&&(i.doubleClickTimeout.remove(),i.doubleClickTimeout=null,t&&this._doubleClickTimeoutExceeded(e),this._pointerState.delete(e),this.refreshHasPendingInputs());}_doubleClickTimeoutExceeded(e){const t=this._pointerState.get(e);this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimeout=null,this._pointerState.delete(e),this.refreshHasPendingInputs();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$h extends i$F{constructor(e=l$f.maximumDoubleClickDelay,o=l$f.maximumDoubleClickDistance,n=l$f.maximumDoubleTouchDelay,s=l$f.maximumDoubleTouchDistance,u=o$1X){super(!1),this.maximumDoubleClickDelay=e,this.maximumDoubleClickDistance=o,this.maximumDoubleTouchDelay=n,this.maximumDoubleTouchDistance=s,this._clock=u,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=c$2i(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new t$c({start:(t,e)=>this._dragStart(t,e),update:(t,e)=>this._dragUpdate(e),end:(t,e)=>this._dragEnd(e)}),this.registerIncoming("drag",(t=>this._dragEventSeparator.handle(t))),this.registerIncoming("pointer-down",(t=>this._handlePointerDown(t))),this.registerIncoming("pointer-up",(()=>this._handlePointerUp()));}onUninstall(){this._pointerState.forEach((t=>{null!=t.doubleTapTimeout&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null);}));}get hasPendingInputs(){return n$2H(this._pointerState,(t=>null!=t.doubleTapTimeout))}_clearPointerDown(t){const e=this._pointerState.get(t);e&&(e.doubleTapTimeout.remove(),e.doubleTapTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs());}_createDoubleTapDragData(t,e,i){const{button:a,buttons:o,pointer:r,pointers:n,pointerType:s,timestamp:u}=i;return {action:t,delta:e,button:a,buttons:o,pointer:r,pointers:n,pointerType:s,timestamp:u}}_dragStart(t,e){if(!this._doubleTapDragReady||1!==t)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:a,modifiers:o}=e,{center:r}=a;this._dragStartCenter=r;const n=this._createDoubleTapDragData("begin",c$2i(0,0),a);this._doubleTapDrag.emit(n,void 0,o),e.stopPropagation();}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:e,modifiers:a}=t,{center:o}=e,r=c$2i(o.x-this._dragStartCenter.x,o.y-this._dragStartCenter.y),n=this._createDoubleTapDragData("update",r,e);this._doubleTapDrag.emit(n,void 0,a),t.stopPropagation();}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:e,modifiers:a}=t,{center:o}=e,r=c$2i(o.x-this._dragStartCenter.x,o.y-this._dragStartCenter.y),n=this._createDoubleTapDragData("end",r,e);this._doubleTapDrag.emit(n,void 0,a),this._doubleTapDragActive=!1,t.stopPropagation();}_handlePointerDown(t){const{data:e}=t,i=this._pointerId(e),a=this._pointerState.get(i),{pointerType:o}=e.native;if(a){const r="touch"===o?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(i),e$7(a.event.data,e)>r?this._storePointerDown(t):this._doubleTapDragReady=!0;}else this._storePointerDown(t);}_handlePointerUp(){this._doubleTapDragReady=!1;}_pointerId(t){const{native:e}=t,{pointerId:i,button:a,pointerType:o}=e;return "mouse"===o?`${i}:${a}`:`${o}`}_storePointerDown(t){const{data:e}=t,{pointerType:i}=e.native,a=this._pointerId(e),o="touch"===i?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,r=this._clock.setTimeout((()=>this._clearPointerDown(a)),o);this._pointerState.set(a,{event:t,doubleTapTimeout:r}),this.refreshHasPendingInputs();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class s$g extends i$F{constructor(t){super(!1),this.navigationTouch=t,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this.handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this.handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this.handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this.handlePointerUpAndPointerLost.bind(this));}createPayload(t,e,i,n){return {action:t,pointerType:this.pointerType,button:this.mouseButton,buttons:e.buttons,timestamp:n,pointers:o$9(this.activePointerMap),pointer:e,angle:i.angle,radius:i.radius,center:i.center}}addPointer(t){const e=t.native.pointerId,i=a$k(this.activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this.activePointerMap.set(e,n);const s=h$a(n,r$8(this.activePointerMap));n.initialAngle=s,n.lastAngle=s,this.updatePointerAngles(i);}updatePointer(t){if(t&&null==t.x&&null==t.y)return;const e=t.native.pointerId,i=this.activePointerMap.get(e);i?i.event=t:this.addPointer(t);}removePointer(t){const e=a$k(this.activePointerMap).angle;this.activePointerMap.delete(t),this.updatePointerAngles(e);}updatePointerAngles(t){const e=a$k(this.activePointerMap);this.activePointerMap.forEach((i=>{i.initialAngle=h$a(i,e)-t,i.lastAngle=h$a(i,e)-t;}));}emitEvent(t,e,i){const n=a$k(this.activePointerMap);this.drag.emit(this.createPayload(t,e,n,i),void 0,this.startStateModifiers);}handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,n=n$2I(t.timestamp);this.activePointerMap.get(i)&&(1===this.activePointerMap.size?(this.updatePointer(t.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",t.data,n),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.removePointer(i)):(this.removePointer(i),this.emitEvent("removed",t.data,n$2I(t.timestamp))));}handlePointerDrag(t){const i=t.data,n=i.currentEvent,s=n$2I(t.timestamp);switch(i.action){case"start":case"update":this.isDragging?this.activePointerMap.has(n.native.pointerId)?(this.updatePointer(n),!this.isCurrentDragSuppressed&&this.emitEvent("update",n,s)):(this.addPointer(n),this.emitEvent("added",n,s),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(n),this.pointerType=t.data.startEvent.pointerType,this.mouseButton=t.data.startEvent.button,this.startStateModifiers=t.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",n,s));}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}function r$8(e){const i=[];return e.forEach((e=>{i.push(c$2i(e.event.x,e.event.y));})),r$9(i)}function a$k(t){const e=r$8(t);let i=0;return t.forEach((t=>{let n=h$a(t,e),s=n-t.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=t.lastAngle+s,t.lastAngle=n;const r=n-t.initialAngle;i+=r;})),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function o$9(t){const e=new Map;return t.forEach(((t,i)=>e.set(i,t.event))),e}function h$a(t,e){const i=t.event,n=i.x-e.center.x,s=i.y-e.center.y;return Math.atan2(s,n)}var p$o;!function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined";}(p$o||(p$o={}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class n$q extends i$F{constructor(e=l$f.maximumDoubleClickDelay,o=l$f.maximumDoubleClickDistance,n=l$f.maximumDoubleTouchDelay,a=l$f.maximumDoubleTouchDistance,s=o$1X){super(!1),this.maximumDoubleClickDelay=e,this.maximumDoubleClickDistance=o,this.maximumDoubleTouchDelay=n,this.maximumDoubleTouchDistance=a,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",(t=>{this._handlePointerLoss(t,"pointer-up");})),this.registerIncoming("pointer-capture-lost",(t=>{this._handlePointerLoss(t,"pointer-capture-lost");})),this.registerIncoming("pointer-cancel",(t=>{this._handlePointerLoss(t,"pointer-cancel");}));}onUninstall(){this._pointerState.forEach((t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove();})),super.onUninstall();}_handlePointerDown(t){const e=t.data,i=this._pointerId(e);if(!this._pointerState.has(i)){const t={downButton:e.native.button,immediateDoubleClick:null};this._pointerState.set(i,t),this.startCapturingPointer(e.native);}}_handlePointerLoss(t,e){const i=t.data,n=this._pointerId(i),a=this._pointerState.get(n);if(a&&"pointer-up"===e&&a.downButton===i.native.button){const e=a.immediateDoubleClick;if(e){e.timeoutHandle.remove();const n="touch"===t.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;e$7(e,t.data)>n?this._startImmediateDoubleClick(t,a):(this._immediateDoubleClick.emit(t.data,void 0,e.modifiers),this._removeState(i));}else this._startImmediateDoubleClick(t,a);}}_startImmediateDoubleClick(t,e){const i="touch"===t.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;e.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout((()=>this._removeState(t.data)),i)};}_pointerId(t){const e=t.native;return "mouse"===e.pointerType?`${e.pointerId}:${e.button}`:`${e.pointerType}`}_removeState(t){const e=this._pointerId(t);this._pointerState.delete(e),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$p={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class o$8 extends i$F{constructor(e=n$p.maximumClickDelay,i=n$p.movementUntilMouseDrag,o=n$p.movementUntilPenDrag,r=n$p.movementUntilTouchDrag,s=n$p.holdDelay,a=o$1X){super(!1),this.maximumClickDelay=e,this.movementUntilMouseDrag=i,this.movementUntilPenDrag=o,this.movementUntilTouchDrag=r,this.holdDelay=s,this._clock=a,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",(t=>{this._handlePointerLoss(t,"pointer-up");})),this.registerIncoming("pointer-capture-lost",(t=>{this._handlePointerLoss(t,"pointer-capture-lost");})),this.registerIncoming("pointer-cancel",(t=>{this._handlePointerLoss(t,"pointer-cancel");})),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause();}onUninstall(){this._pointerState.forEach((t=>{null!=t.holdTimeout&&(t.holdTimeout.remove(),t.holdTimeout=null);})),super.onUninstall();}_handlePointerDown(t){const e=t.data,i=e.native.pointerId;let n=null;0===this._pointerState.size&&(n=this._clock.setTimeout((()=>{const e=this._pointerState.get(i);if(e){if(!e.isDragging){const i=e.previousEvent;this._pointerHold.emit(i,void 0,t.modifiers),e.holdEmitted=!0;}e.holdTimeout=null;}}),this.holdDelay));const o={startEvent:e,previousEvent:e,startTimestamp:t.timestamp,isDragging:!1,downButton:e.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(i,o),this.startCapturingPointer(e.native),this._moveHandle.resume(),this._pointerState.size>1&&this.startDragging(t);}_createPointerDragData(t,e,i){return {action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}_handlePointerMove(t){const e=t.data,n=e.native.pointerId,o=this._pointerState.get(n);if(o){if(o.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",o,e),void 0,o.modifiers);else {n$r(e,o.startEvent)>this._getDragThreshold(e.native.pointerType)&&this.startDragging(t);}o.previousEvent=e;}}_getDragThreshold(t){switch(t){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}startDragging(t){const e=t.data,i=e.native.pointerId;this._pointerState.forEach((n=>{null!=n.holdTimeout&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,i===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,e)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),t.timestamp));}));}_handlePointerLoss(t,e){const i=t.data,n=i.native.pointerId,o=this._pointerState.get(n);if(o){if(null!=o.holdTimeout&&(o.holdTimeout.remove(),o.holdTimeout=null),o.isDragging)this._pointerDrag.emit(this._createPointerDragData("end",o,"pointer-up"===e?i:o.previousEvent),void 0,o.modifiers);else if("pointer-up"===e&&o.downButton===i.native.button){t.timestamp-o.startTimestamp<=this.maximumClickDelay&&!o.holdEmitted&&this._immediateClick.emit(i);}this._pointerState.delete(n),this.stopCapturingPointer(i.native),0===this._pointerState.size&&this._moveHandle.pause();}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const k$3={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let C$4=class extends p$3a{constructor(){super(...arguments),this._handles=new u$25;}initialize(){this._handles.add([m$27(this.view,"ready",(()=>this._disconnect())),s$25(this.view,"ready",(()=>this._connect()))]);}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect();}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null);}_connect(){const e=this.view.surface,o=new u$b(e,this.view.input),r=[new n$q,new o$8,new s$i,new s$g(this.view.navigation),new s$h],t=new d$n({eventSource:o,recognizers:r});t.installHandlers("prevent-context-menu",[new e$8],u$q.INTERNAL),t.installHandlers("navigation",[new a$n(this.view),new l$h(this.view),new o$b(this.view),new a$p(this.view),new a$p(this.view,[k$3.counter]),new n$u(this.view,"primary"),new i$q(this.view,k$3.pan),new t$b(this.view,k$3.zoom),new i$p(this.view,k$3.rotate),new o$c(this.view,"secondary"),new e$a(this.view,"touch")],u$q.INTERNAL),this.view.viewEvents.connect(t),this._source=o,this._inputManager=t,i$2x(this.view.navigation,"browserTouchPanEnabled",(e=>{this._source.browserTouchPanningEnabled=!e;}));}get test(){return {inputManager:this._inputManager}}};e$25([d$1T()],C$4.prototype,"view",void 0),C$4=e$25([i$2z("esri.views.2d.input.MapViewInputManager")],C$4);const E$2=C$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$n=0,i$o=class extends p$3a{constructor(){super(...arguments),this.color=new h$18([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25;}get version(){return p$n++}};e$25([d$1T({readOnly:!0})],i$o.prototype,"version",null),e$25([d$1T({type:h$18})],i$o.prototype,"color",void 0),e$25([d$1T({type:h$18})],i$o.prototype,"haloColor",void 0),e$25([d$1T()],i$o.prototype,"haloOpacity",void 0),e$25([d$1T()],i$o.prototype,"fillOpacity",void 0),i$o=e$25([i$2z("esri.views.2d.support.HighlightOptions")],i$o);const c$o=i$o;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$8(t,h,i,e,d,l,n,o){let u;t.ignorePadding&&(e={left:0,right:0,top:0,bottom:0}),null!=t.width&&null!=t.height?u=[t.width,t.height]:null==t.width&&null!=t.height?u=[t.height,t.height]:null!=t.width&&null==t.height?u=[t.width,t.width]:null==t.width&&null==t.height&&(u=null);const r=i[0]-(e.left+e.right),a=i[1]-(e.top+e.bottom);let g,w,c=t.area||{x:0,y:0,width:r,height:a};if(u){const t=r/a,h=u[0]/u[1];if(h>t){const t=c.width/h;c={x:c.x,y:Math.round(c.y+(c.height-t)/2),width:c.width,height:Math.round(t)};}else {const t=c.height*h;c={x:Math.round(c.x+(c.width-t)/2),y:c.y,width:Math.round(t),height:c.height};}}else u=[c.width,c.height];u[0]>c.width?(g=Math.min(u[0]/c.width,h),w=u[0]/c.width/g):(g=1,w=u[0]/c.width);return {resolutionScale:g,cropArea:{x:Math.round((c.x+e.left)*g),y:Math.round((c.y+e.top)*g),width:Math.round(c.width*g),height:Math.round(c.height*g)},outputScale:w,format:d,quality:l,children:n,rotation:o}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function a$j(t,i,h,e){e.premultipliedAlpha&&I$2(t),h.width=t.width,h.height=t.height;const n=h.getContext("2d");n.putImageData(t,0,0),e.flipY&&q$1(n);const o=n.getImageData(0,0,t.width,t.height),a=r$7(h,i);return h.width=0,h.height=0,{dataUrl:a,data:o}}function r$7(t,i){const h=C$3[i.format],e=i.quality/100;return t.toDataURL(h,e)}function l$e(i,h){const e=D$1(i),n=v$4[e];return {format:e,quality:e$1u(null!=h?h:n,0,100)}}function g$8(t,i){return i/Math.max(t[0],t[1])}function f$6(t,i,h){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(m$e)try{return new ImageData(t,i)}catch(e){m$e=!1;}return s$f(t,i,h)}function u$a(t,i,h,e){if(!i||!h)throw new Error("Cannot construct image data without dimensions");if(m$e)try{return new ImageData(t,i,h)}catch(o){m$e=!1;}const n=s$f(i,h,e);return n.data.set(t,0),n}function d$c(t,i,h,e=0,n=0,o=t.width-e,a=t.height-n,r=!1){const{data:l}=t,{width:g,height:f,data:u}=i,d=o/g,c=a/f,s=Math.ceil(d/2),w=Math.ceil(c/2),m=t.width;for(let M=0;M<f;M++)for(let t=0;t<g;t++){const i=4*(t+(r?f-M-1:M)*g);let o=0,a=0,p=0,y=0,x=0,b=0;const j=(M+.5)*c;for(let r=Math.floor(M*c);r<(M+1)*c;r++){const i=Math.abs(j-(r+.5))/w,g=(t+.5)*d,f=i*i;for(let u=Math.floor(t*d);u<(t+1)*d;u++){const t=Math.abs(g-(u+.5))/s,i=Math.sqrt(f+t*t);if(i>=1)continue;let d=2*i*i*i-3*i*i+1;const c=4*(e+u+(n+r)*m);b+=d*l[c+3],a+=d,!h&&l[c+3]<255&&(d=d*l[c+3]/255),p+=d*l[c],y+=d*l[c+1],x+=d*l[c+2],o+=d;}}u[i]=p/o,u[i+1]=y/o,u[i+2]=x/o,u[i+3]=b/a;}return i}function s$f(t,i,h){return h||(h=M$1()),h.getContext("2d").createImageData(t,i)}let w$4=null,m$e=!0;function M$1(){return w$4||(w$4=document.createElement("canvas"),w$4.width=1,w$4.height=1),w$4}function D$1(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return k$2}}function q$1(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore();}function I$2(t){const i=t.data,h=i.length;for(let e=0;e<h;e+=4){const t=i[e+3];if(t>0){const h=t/255;i[e+0]=i[e+0]/h,i[e+1]=i[e+1]/h,i[e+2]=i[e+2]/h;}}}const C$3={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},P$3=98,k$2="png",v$4={png:100,jpg:P$3,jpeg:P$3};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function t$7(t,l,a={}){if(!window.WebGLRenderingContext)return o$7(t,n$o),null;const b=r$6(t,l,a);return t$1T(b)&&o$7(t,i$n),b}function r$6(e,t,r={}){const o=1===t?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let n=null;for(const l of o){try{n=e.getContext(l,r);}catch(i){}if(n)break}return n}function o$7(e,t){const r=e.parentNode;r&&(r.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>");}const n$o='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',i$n='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let n$n;function o$6(){return n$n||(n$n=a$i()),n$n}function a$i(){const n={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};if(void 0===typeof WebGLRenderingContext)return n;const o=document.createElement("canvas");if(!o)return n;let a=r$6(o,1,{failIfMajorPerformanceCaveat:!0});if(t$1T(a)&&(a=r$6(o,1),r$1K(a)&&(n.majorPerformanceCaveat=!0)),t$1T(a))return n;const i=a.getParameter(a.VERSION);if(!i)return n;const u=i.match(/^WebGL\s+([\d.]*)/);if(u){const e=parseFloat(u[1]);n.available=e>=.94;const t=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT);t&&(n.supportsHighPrecisionFragment=t.precision>0),n.supportsVertexShaderSamplers=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0,n.supportsElementIndexUint=null!==a.getExtension("OES_element_index_uint"),n.supportsStandardDerivatives=null!==a.getExtension("OES_standard_derivatives"),n.supportsInstancedArrays=null!==a.getExtension("ANGLE_instanced_arrays"),n.supportsTextureFloat=null!==a.getExtension("OES_texture_float"),n.supportsColorBufferFloat=null!==a.getExtension("WEBGL_color_buffer_float")&&null!==a.getExtension("EXT_float_blend");}return n.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),n.version=s$e()?2:1,n}function s$e(){if(void 0===typeof WebGL2RenderingContext)return !1;const e=document.createElement("canvas");if(!e)return !1;const n=r$6(e,2);return !!r$1K(n)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$6={checkMajorWebPerformanceCaveat:!0};function s$d(s){s={...t$6,...s};const o=o$6();return o.available?s.checkMajorWebPerformanceCaveat&&o.majorPerformanceCaveat?new s$2l("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):o.supportsHighPrecisionFragment?o.supportsVertexShaderSamplers?o.supportsElementIndexUint?o.supportsStandardDerivatives?o.supportsInstancedArrays?null:new s$2l("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new s$2l("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new s$2l("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new s$2l("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new s$2l("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new s$2l("webgl:required","WebGL is required but not supported.")}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$m(t){return t&&"nodeType"in t}function d$b(t){return t&&"function"==typeof t.render}const c$n={component:"esri-component"};let p$m=class extends p$3a{constructor(){super(...arguments),this.widget=null;}destroy(){this.widget&&this.widget.destroy(),this.node=null;}get id(){return this.get("widget.id")||this.get("node.id")}set node(t){const o=this._get("node");t!==o&&(t&&t.classList.add(c$n.component),o&&o.classList.remove(c$n.component),this._set("node",t));}castNode(t){return t?"string"==typeof t||i$m(t)?(this._set("widget",null),e$1J(t)):(d$b(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};e$25([d$1T({dependsOn:[]})],p$m.prototype,"id",null),e$25([d$1T()],p$m.prototype,"node",null),e$25([c$35("node")],p$m.prototype,"castNode",null),e$25([d$1T({readOnly:!0})],p$m.prototype,"widget",void 0),p$m=e$25([i$2z("esri.views.ui.Component")],p$m);const l$d=p$m;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h$9={left:0,top:0,bottom:0,right:0},m$d={bottom:30,top:15,right:15,left:15},u$9="manual",f$5={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function _$1(t){return t&&!t._started&&"function"==typeof t.postMixInProperties&&"function"==typeof t.buildRendering&&"function"==typeof t.postCreate&&"function"==typeof t.startup}function g$7(t){const o=t,i="object"==typeof o&&null!==o&&Object.getPrototypeOf(o);return (null===i||i===Object.prototype)&&("component"in o||"index"in o||"position"in o)?t:null}function y$7(t,{top:o,bottom:i,left:e,right:n}){t.style.top=o,t.style.bottom=i,t.style.left=e,t.style.right=n;}let C$2=class extends n$2D.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new u$25,this.view=null,this._initContainers();}initialize(){this._handles.add([i$2x(this,"view.padding, container",this._applyViewPadding.bind(this)),i$2x(this,"padding",this._applyUIPadding.bind(this))]);}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear();}set container(t){const i=this._get("container");t!==i&&(t&&(t.classList.add(f$5.ui),t.classList.add(k$z()),this._attachContainers(t)),i&&(i.classList.remove(f$5.ui),y$7(i,{top:"",bottom:"",left:"",right:""}),t$1y(i)),this._set("container",t));}get height(){const t=this.get("view.height")||0;if(0===t)return t;const o=this._getViewPadding(),i=o.top+o.bottom;return Math.max(t-i,0)}get padding(){return this._get("padding")}set padding(t){t?this._override("padding",t):this._clearOverride("padding");}castPadding(t){return "number"==typeof t?{bottom:t,top:t,right:t,left:t}:{...m$d,...t}}get width(){const t=this.get("view.width")||0;if(0===t)return t;const o=this._getViewPadding(),i=o.left+o.right;return Math.max(t-i,0)}add(t,o){let i,e;if(Array.isArray(t))return void t.forEach((t=>this.add(t,o)));const n=g$7(t);n&&({index:i,position:o,component:t,key:e}=n),o&&"object"==typeof o&&({index:i,key:e,position:o}=o),!t||o&&!this._isValidPosition(o)||this._add(t,o,i,e);}remove(t,o){if(!t)return;if(Array.isArray(t))return t.map((t=>this.remove(t,o)));const i=this._find(t);if(i){const e=this._componentToKey;if(e.has(t)&&e.get(t)!==o)return;const n=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(t),this._components.splice(n,1)[0]}}empty(t){if(Array.isArray(t))return t.map((t=>this.empty(t))).reduce(((t,o)=>t.concat(o)));if((t=t||u$9)===u$9){return Array.prototype.slice.call(this._manualContainer.children).filter((t=>!t.classList.contains(f$5.corner))).map((t=>this.remove(t)))}return this._isValidPosition(t)?Array.prototype.slice.call(this._cornerNameToContainerLookup[t].children).map(this.remove,this):null}move(t,o){if(Array.isArray(t)&&t.forEach((t=>this.move(t,o))),!t)return;let i;const e=g$7(t)||g$7(o);if(e&&(i=e.index,o=e.position,t=e.component||t),o&&!this._isValidPosition(o))return;const n=this.remove(t);n&&this.add(n,{position:o,index:i});}find(t){if(!t)return null;const o=this._findById(t);return o&&(o.widget||o.node)}getPosition(t){for(const o in this._positionNameToContainerLookup){if(this._positionNameToContainerLookup[o].contains(t))return o}return null}_add(t,o,i,e){t instanceof l$d||(t=new l$d({node:t})),this._place({component:t,position:o,index:i}),this._components.push(t),e&&this._componentToKey.set(t,e);}_find(t){return t?t instanceof l$d?this._findByComponent(t):"string"==typeof t?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){return this.get("view.padding")||h$9}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer);}_initContainers(){const t=document.createElement("div");t.classList.add(f$5.innerContainer),t.classList.add(f$5.cornerContainer);const o=document.createElement("div");o.classList.add(f$5.innerContainer),o.classList.add(f$5.manualContainer);const i=document.createElement("div");i.classList.add(f$5.topLeft),i.classList.add(f$5.corner),t.appendChild(i);const e=document.createElement("div");e.classList.add(f$5.topRight),e.classList.add(f$5.corner),t.appendChild(e);const n=document.createElement("div");n.classList.add(f$5.bottomLeft),n.classList.add(f$5.corner),t.appendChild(n);const r=document.createElement("div");r.classList.add(f$5.bottomRight),r.classList.add(f$5.corner),t.appendChild(r),this._innerContainer=t,this._manualContainer=o;const s=d$1N();this._cornerNameToContainerLookup={"top-left":i,"top-right":e,"bottom-left":n,"bottom-right":r,"top-leading":s?e:i,"top-trailing":s?i:e,"bottom-leading":s?r:n,"bottom-trailing":s?n:r},this._positionNameToContainerLookup={manual:o,...this._cornerNameToContainerLookup};}_isValidPosition(t){return !!this._positionNameToContainerLookup[t]}_place(t){const o=t.component,e=t.position||u$9,n=t.index,r=this._positionNameToContainerLookup[e],s=n>-1;if(_$1(o.widget)&&o.widget.startup(),!s)return void r.appendChild(o.node);const a=Array.prototype.slice.call(r.children);if(0===n)return void(r.firstChild?o$1F(o.node,r.firstChild):r.appendChild(o.node));n>=a.length?r.appendChild(o.node):o$1F(o.node,a[n]);}_applyViewPadding(){const t=this.container;t&&y$7(t,this._toPxPosition(this._getViewPadding()));}_applyUIPadding(){const t=this._innerContainer;t&&y$7(t,this._toPxPosition(this.padding));}_toPxPosition(t){return {top:this._toPxUnit(t.top),left:this._toPxUnit(t.left),right:this._toPxUnit(t.right),bottom:this._toPxUnit(t.bottom)}}_toPxUnit(t){return 0===t?"0":t+"px"}_findByComponent(t){let o,i=null;return this._components.some((e=>(o=e===t,o&&(i=e),o))),i}_findById(t){let o,i=null;return this._components.some((e=>(o=e.id===t,o&&(i=e),o))),i}_findByNode(t){let o,i=null;return this._components.some((e=>(o=e.node===t,o&&(i=e),o))),i}};e$25([d$1T()],C$2.prototype,"container",null),e$25([d$1T()],C$2.prototype,"height",null),e$25([d$1T({value:m$d})],C$2.prototype,"padding",null),e$25([c$35("padding")],C$2.prototype,"castPadding",null),e$25([d$1T()],C$2.prototype,"view",void 0),e$25([d$1T()],C$2.prototype,"width",null),C$2=e$25([i$2z("esri.views.ui.UI")],C$2);const v$3=C$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function p$l(t,e){return t&&"copyright"in t&&(!e||"function"==typeof t.originOf&&"user"===t.originOf("copyright"))}function d$a(t,e){return t.length!==e.length||t.some(((t,i)=>t.text!==e[i].text))}function m$c(t,e,i){if(!i||!e)return;t.find((t=>t.layerView===e&&t.text===i))||t.push({text:i,layerView:e});}function f$4(t){return "bing-maps"===t.type}const b$4=[];let y$6=class extends d$1p{constructor(t){super(t),this.clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state");},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new S$I,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const e=this.get("view.allLayerViews");e&&this.handles.add(e.map((t=>t.watch(["suspended","attributionVisible"],this._updateAttributionItems))),"suspension"),t&&t.removed&&t.removed.forEach((t=>{this._pendingAttributions.delete(t),this._fetchedAttributionData.delete(t);})),this._updateAttributionItems();},this._updateAttributionItems=()=>{const t=this.get("view.allLayerViews");b$4.length=0,t?(t.forEach((t=>{if(t.suspended||!t.get("layer.attributionVisible"))return;const e=t.layer;if(p$l(e,"user"))return void m$c(b$4,t,e.copyright);if(e.hasAttributionData){if(this._fetchedAttributionData.has(t)){const i=this._fetchedAttributionData.get(t);return void(i?m$c(b$4,t,this._getDynamicAttribution(i,this.view,e)):p$l(e)&&m$c(b$4,t,e.copyright))}return void this._fetchAttributionData(t)}const i=e.get("portalItem.accessInformation");m$c(b$4,t,i||e.copyright);})),d$a(this.items,b$4)&&(this.items.removeAll(),this.items.addMany(b$4)),b$4.length=0,this.notifyChange("state")):this.clear();},this.handles.add([$$g(this,"view.allLayerViews","change",this._allLayerViewsChange,this._allLayerViewsChange,this.clear),v$V(this,"view.stationary",(()=>this._updateAttributionItems()))]);}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll();}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const i=await a$2M(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const e=i.ok?this._createContributionIndex(i.value,f$4(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,e);}this._updateAttributionItems();}_createContributionIndex(t,e){const i=t.contributors,r={};if(!i)return r;for(let s=0;s<i.length;s++){const t=i[s],o=t.coverageAreas;if(!o)return;for(const i of o){const o=i.bbox,n=i.zoomMin-(e&&i.zoomMin?1:0),a=i.zoomMax-(e&&i.zoomMax?1:0),c={xmin:o[1],ymin:o[0],xmax:o[3],ymax:o[2],spatialReference:k$w.WGS84},u={extent:R$s(c),attribution:t.attribution||"",score:null!=i.score?i.score:100,id:s};for(let t=n;t<=a;t++)r[t]=r[t]||[],r[t].push(u);}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(t,e,i){const{extent:r,scale:s}=e;let o=i.tileInfo.scaleToZoom(s);if(o=Math.min(t.maxKey,Math.round(o)),!r||null==o||o<=-1)return "";const n=t[o],a=M$B(r.center.clone().normalize(),e.spatialReference),h={};return n?n.filter((t=>{const e=!h[t.id]&&a&&r$1k(t.extent,a);return e&&(h[t.id]=!0),e})).sort(((t,e)=>e.score-t.score||t.objectId-e.objectId)).map((t=>t.attribution)).join(", "):""}};e$25([d$1T({readOnly:!0,type:S$I})],y$6.prototype,"items",void 0),e$25([d$1T({readOnly:!0})],y$6.prototype,"state",null),e$25([d$1T()],y$6.prototype,"view",void 0),y$6=e$25([i$2z("esri.widgets.Attribution.AttributionViewModel")],y$6);const g$6=y$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$m={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let l$c=class extends z$o{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this.iconClass=c$m.widgetIcon,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new g$6;}initialize(){this.own($$g(this,"viewModel.items","change",(()=>this.scheduleRender())));}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce(((e,t)=>(-1===e.indexOf(t.text)&&e.push(t.text),e)),[]).join(this.itemDelimiter)}render(){const e={[c$m.open]:this._isOpen};return n$2g("div",{bind:this,class:this.classes(c$m.base,e),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return n$2g("div",{class:c$m.poweredBy},"Powered by"," ",n$2g("a",{class:c$m.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?0:-1,{attributionText:r}=this,o=t?"button":void 0,s={[c$m.sourcesOpen]:e,[c$m.interactive]:t};return n$2g("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes(c$m.sources,s),innerHTML:r,role:o,tabIndex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth;}_afterSourcesNodeUpdate(e){let t=!1;const{clientHeight:i,clientWidth:r,scrollWidth:o}=e,s=o>=r,n=this._attributionTextOverflowed!==s;if(this._attributionTextOverflowed=s,n&&(t=!0),this._isOpen){const e=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,e&&(this._isOpen=!1,t=!0);}t&&this.scheduleRender();}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen);}};e$25([d$1T()],l$c.prototype,"_isOpen",void 0),e$25([d$1T()],l$c.prototype,"_isInteractive",null),e$25([d$1T()],l$c.prototype,"_attributionTextOverflowed",void 0),e$25([d$1T()],l$c.prototype,"_prevSourceNodeHeight",void 0),e$25([d$1T({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],l$c.prototype,"attributionText",null),e$25([d$1T()],l$c.prototype,"iconClass",void 0),e$25([d$1T()],l$c.prototype,"itemDelimiter",void 0),e$25([d$1T({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],l$c.prototype,"label",void 0),e$25([d$1T(),e$1g("esri/widgets/Attribution/t9n/Attribution")],l$c.prototype,"messages",void 0),e$25([o$1K("viewModel.view")],l$c.prototype,"view",void 0),e$25([d$1T({type:g$6})],l$c.prototype,"viewModel",void 0),e$25([t$1f()],l$c.prototype,"_toggleState",null),l$c=e$25([i$2z("esri.widgets.Attribution")],l$c);const u$8=l$c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$m="esri.widgets.CompassViewModel";let h$8=class extends(e$l(p$3a)){constructor(t){super(t),this._handles=new u$25,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this);}initialize(){this._handles.add(i$2x(this,"view",this._updateRotationWatcher));}destroy(){this._handles.destroy(),this._handles=null,this.view=null;}get canShowNorth(){const t=this.get("view.spatialReference");return !(!t||!t.isWebMercator&&!t.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const t={};"2d"===this.view.type?t.rotation=0:t.heading=0,this.callGoTo({target:t});}_updateForRotation(t){null!=t&&(this.orientation={z:t});}_updateForCamera(t){if(!t)return;const e=-t.heading;this.orientation={x:0,y:0,z:e};}_updateRotationWatcher(t){this._handles.removeAll(),t&&("2d"===t.type?this._handles.add(i$2x(this,"view.rotation",this._updateForRotation)):this._handles.add(i$2x(this,"view.camera",this._updateForCamera)));}};e$25([d$1T({readOnly:!0})],h$8.prototype,"canShowNorth",null),e$25([d$1T()],h$8.prototype,"orientation",void 0),e$25([d$1T({readOnly:!0})],h$8.prototype,"state",null),e$25([d$1T()],h$8.prototype,"view",void 0),h$8=e$25([i$2z(n$m)],h$8);const d$9=h$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$l={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let l$b=class extends z$o{constructor(s,e){super(s,e),this.goToOverride=null,this.iconClass=n$l.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new d$9;}reset(){return this.viewModel.reset()}render(){const{orientation:s,state:e}=this.viewModel,o="disabled"===e,t="compass"===("rotation"===e?"rotation":"compass"),r=o?-1:0,i={[n$l.disabled]:o,[n$l.interactive]:!o},a={[n$l.northIcon]:t,[n$l.rotationIcon]:!t},{messages:c}=this;return n$2g("div",{bind:this,class:this.classes(n$l.base,i),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:r,"aria-label":c.reset,title:c.reset},n$2g("span",{"aria-hidden":"true",class:this.classes(n$l.icon,a),styles:this._toRotationTransform(s)}),n$2g("span",{class:n$l.text},c.reset))}_reset(){this.viewModel.reset();}_toRotationTransform(s){return {transform:`rotateZ(${s.z}deg)`}}};e$25([o$1K("viewModel.goToOverride")],l$b.prototype,"goToOverride",void 0),e$25([d$1T()],l$b.prototype,"iconClass",void 0),e$25([d$1T({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],l$b.prototype,"label",void 0),e$25([d$1T(),e$1g("esri/widgets/Compass/t9n/Compass")],l$b.prototype,"messages",void 0),e$25([o$1K("viewModel.view")],l$b.prototype,"view",void 0),e$25([d$1T({type:d$9})],l$b.prototype,"viewModel",void 0),e$25([t$1f()],l$b.prototype,"_reset",null),l$b=e$25([i$2z("esri.widgets.Compass")],l$b);const d$8=l$b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let a$h=class extends p$3a{constructor(t){super(t),this._handles=new u$25,this.navigationMode="pan",this.view=null;}initialize(){this._handles.add(s$25(this,"view.inputManager",this._setNavigationMode.bind(this)));}destroy(){this._handles.destroy(),this._handles=null,this.view=null;}get state(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode());}_setNavigationMode(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate";}};e$25([d$1T({readOnly:!0})],a$h.prototype,"state",null),e$25([d$1T()],a$h.prototype,"navigationMode",void 0),e$25([d$1T()],a$h.prototype,"view",void 0),a$h=e$25([i$2z("esri.widgets.NavigationToggleViewModel")],a$h);const n$k=a$h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const g$5={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let p$k=class extends z$o{constructor(t,o){super(t,o),this.iconClass=g$5.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new n$k;}set layout(t){"horizontal"!==t&&(t="vertical"),this._set("layout",t);}toggle(){return this.viewModel.toggle()}render(){const t="disabled"===this.get("viewModel.state"),o="pan"===this.get("viewModel.navigationMode"),e={[g$5.disabled]:t,[g$5.isLayoutHorizontal]:"horizontal"===this.layout},s={[g$5.activeButton]:o},i={[g$5.activeButton]:!o},a=t?-1:0,r=this.messages.toggle;return n$2g("div",{bind:this,class:this.classes(g$5.base,e),onclick:this._toggle,onkeydown:this._toggle,tabIndex:a,"aria-label":r,title:r},n$2g("div",{class:this.classes(g$5.button,g$5.panButton,s)},n$2g("span",{class:g$5.panIcon})),n$2g("div",{class:this.classes(g$5.button,g$5.rotateButton,i)},n$2g("span",{class:g$5.rotationIcon})))}_toggle(){this.toggle();}};e$25([d$1T()],p$k.prototype,"iconClass",void 0),e$25([d$1T({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],p$k.prototype,"label",void 0),e$25([d$1T({value:"vertical"})],p$k.prototype,"layout",null),e$25([d$1T(),e$1g("esri/widgets/NavigationToggle/t9n/NavigationToggle")],p$k.prototype,"messages",void 0),e$25([o$1K("viewModel.view")],p$k.prototype,"view",void 0),e$25([d$1T({type:n$k})],p$k.prototype,"viewModel",void 0),e$25([t$1f()],p$k.prototype,"_toggle",null),p$k=e$25([i$2z("esri.widgets.NavigationToggle")],p$k);const c$l=p$k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$k={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let n$j=class extends z$o{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title="";}render(){const t=this.enabled?0:-1,s={[c$k.disabled]:!this.enabled,[c$k.interactive]:this.enabled},o={[this.iconClass]:!!this.iconClass};return n$2g("div",{bind:this,class:this.classes(c$k.button,s),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:t,title:this.title},n$2g("span",{"aria-hidden":"true",role:"presentation",class:this.classes(c$k.icon,o)}),n$2g("span",{class:c$k.iconText},this.title))}_triggerAction(){this.action.call(this);}};e$25([d$1T()],n$j.prototype,"action",void 0),e$25([d$1T()],n$j.prototype,"enabled",void 0),e$25([d$1T()],n$j.prototype,"iconClass",void 0),e$25([d$1T()],n$j.prototype,"title",void 0),e$25([t$1f()],n$j.prototype,"_triggerAction",null),n$j=e$25([i$2z("esri.widgets.IconButton")],n$j);const a$g=n$j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$c=class extends p$3a{get canZoomIn(){if(!this.get("view.ready"))return !1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return 0===t||e>t}get canZoomOut(){if(!this.get("view.ready"))return !1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return 0===t||e<t}};e$25([d$1T({readOnly:!0})],s$c.prototype,"canZoomIn",null),e$25([d$1T({readOnly:!0})],s$c.prototype,"canZoomOut",null),e$25([d$1T()],s$c.prototype,"view",void 0),s$c=e$25([i$2z("esri.widgets.Zoom.ZoomConditions2D")],s$c);const i$l=s$c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$b=class extends p$3a{get canZoomIn(){return !!this.get("view.ready")}get canZoomOut(){return !!this.get("view.ready")}};e$25([d$1T({readOnly:!0})],s$b.prototype,"canZoomIn",null),e$25([d$1T({readOnly:!0})],s$b.prototype,"canZoomOut",null),e$25([d$1T()],s$b.prototype,"view",void 0),s$b=e$25([i$2z("esri.widgets.Zoom.ZoomConditions3D")],s$b);const c$j=s$b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let m$b=class extends p$3a{constructor(o){super(o),this.canZoomIn=!1,this.canZoomOut=!1;}destroy(){this.view=null;}get state(){return this.get("view.ready")?"ready":"disabled"}set view(o){o?"2d"===o.type?this._zoomConditions=new i$l({view:o}):"3d"===o.type&&(this._zoomConditions=new c$j({view:o})):this._zoomConditions=null,this._set("view",o);}zoomIn(){if(!this.canZoomIn)return;const o=this.view;"2d"===o.type?o.mapViewNavigation.zoomIn():g$1c(o.goTo({zoomFactor:2}));}zoomOut(){if(!this.canZoomOut)return;const o=this.view;"2d"===o.type?o.mapViewNavigation.zoomOut():g$1c(o.goTo({zoomFactor:.5}));}};e$25([d$1T()],m$b.prototype,"_zoomConditions",void 0),e$25([d$1T({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],m$b.prototype,"canZoomIn",void 0),e$25([d$1T({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],m$b.prototype,"canZoomOut",void 0),e$25([d$1T({readOnly:!0})],m$b.prototype,"state",null),e$25([d$1T()],m$b.prototype,"view",null),m$b=e$25([i$2z("esri.widgets.Zoom.ZoomViewModel")],m$b);const a$f=m$b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l$a={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let u$7=class extends z$o{constructor(o,t){super(o,t),this.iconClass=l$a.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new a$f;}initialize(){this._zoomInButton=new a$g({action:this.zoomIn.bind(this),iconClass:l$a.zoomInIcon}),this._zoomOutButton=new a$g({action:this.zoomOut.bind(this),iconClass:l$a.zoomOutIcon});}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null;}set layout(o){"horizontal"!==o&&(o="vertical"),this._set("layout",o);}render(){const o=this.viewModel,t={[l$a.horizontalLayout]:"horizontal"===this.layout};return this._zoomInButton.enabled="ready"===o.state&&o.canZoomIn,this._zoomOutButton.enabled="ready"===o.state&&o.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,n$2g("div",{class:this.classes(l$a.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};e$25([d$1T()],u$7.prototype,"iconClass",void 0),e$25([d$1T({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],u$7.prototype,"label",void 0),e$25([d$1T({value:"vertical"})],u$7.prototype,"layout",null),e$25([d$1T(),e$1g("esri/widgets/Zoom/t9n/Zoom")],u$7.prototype,"messages",void 0),e$25([o$1K("viewModel.view")],u$7.prototype,"view",void 0),e$25([d$1T({type:a$f})],u$7.prototype,"viewModel",void 0),u$7=e$25([i$2z("esri.widgets.Zoom")],u$7);const c$i=u$7;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m$a="esri.views.ui.DefaultUI";function h$7(t){return t&&void 0!==t.view}s$2n.getLogger(m$a);let g$4=class extends v$3{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"},this.components=[];}initialize(){this._handles.add([i$2x(this,"components",this._componentsWatcher.bind(this)),i$2x(this,"view",this._updateViewAwareWidgets.bind(this))]);}_add(t,o,i,e){if("string"==typeof t&&this._defaultPositionLookup[t]){if(this._find(t))return;t=this._createComponent(t);}super._add(t,o,i,e);}_removeComponents(t){t.forEach((t=>{const o=this._find(t);o&&(this.remove(o),o.destroy());}));}_updateViewAwareWidgets(t){this.components.forEach((o=>{const i=this._find(o),e=i&&i.widget;h$7(e)&&(e.view=t);}));}_componentsWatcher(t,o){this._removeComponents(o),this._addComponents(t),this._adjustPadding(t);}_adjustPadding(t){if(-1===t.indexOf("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t;}}_addComponents(t){this.initialized&&t.forEach((t=>this.add(this._createComponent(t),this._defaultPositionLookup[t])));}_createComponent(t){const o=this._createWidget(t);if(o)return new l$d({id:t,node:o})}_createWidget(t){return "attribution"===t?this._createAttribution():"compass"===t?this._createCompass():"navigation-toggle"===t?this._createNavigationToggle():"zoom"===t?this._createZoom():void 0}_createAttribution(){return new u$8({view:this.view})}_createCompass(){return new d$8({view:this.view})}_createNavigationToggle(){return new c$l({view:this.view})}_createZoom(){return new c$i({view:this.view})}};e$25([d$1T()],g$4.prototype,"components",void 0),g$4=e$25([i$2z(m$a)],g$4);const u$6=g$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$6=class extends u$6{constructor(o){super(o),this.components=["attribution","zoom"];}};e$25([d$1T()],e$6.prototype,"components",void 0),e$6=e$25([i$2z("esri.views.ui.2d.DefaultUI2D")],e$6);const p$j=e$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$i;let a$e=p$i=class extends a$2N{constructor(o){super(o),this.color=new h$18([0,0,0,1]);}clone(){return new p$i(l$2w({color:this.color}))}};e$25([d$1T({type:h$18,json:{write:!0}})],a$e.prototype,"color",void 0),a$e=p$i=e$25([i$2z("esri.webmap.background.ColorBackground")],a$e);const m$9=a$e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const S$3=s$2n.getLogger("esri.views.MapView");let O$1,C$1,L$2,k$1,E$1,x$3;async function N$1(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,Stage:a}]=await Promise.all([import('./webgl.js'),import('./mapViewDeps.js')]);C$1=e,L$2=t,k$1=i,E$1=r,x$3=s,O$1=a;}function P$2(e){return e instanceof h$X}function W$1(e,t,r){if(e)if(Array.isArray(e)||S$I.isCollection(e)){if(0===e.length)return;e.forEach((e=>W$1(e,t,r)));}else P$2(e)?t.add(e):r.add(e);}let R$1=class extends(m$B(_$7(U))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new p$R({getCollections:()=>{var e,t;return [null==(e=this.basemapView)?void 0:e.baseLayerViews,this.layerViews,null==(t=this.basemapView)?void 0:t.referenceLayerViews]},getChildrenFunction:()=>null}),this.floors=new S$I,this.graphicsView=null,this.highlightOptions=new c$o,this.inputManager=new E$2({view:this}),this.mapViewNavigation=null,this.supersampleScreenshotsEnabled=!1,this.ui=new p$j,this.rendering=!1,c$1y();}destroy(){this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null);}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){void 0===e?this._clearOverride("background"):this._override("background",e);}get textureManager(){return this._stage.painter.textureManager}get navigating(){return !(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}toMap(e){if(i$B(e)){const t=c$C(this,e);return super.toMap(t)}return super.toMap(e)}hitTest(e,t){const i=i$B(e)?c$C(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return Promise.resolve({screenPoint:i,results:[]});const r=this.toMap(i),s=[this.graphicsView];s.push.apply(s,this.allLayerViews.toArray().reverse());const a=new Set,n=new Set,o=new Set,h=new Set;return t&&(W$1(t&&t.include,a,o),W$1(t&&t.exclude,n,h)),Promise.all(s.map((e=>!e||!e.hitTest||o.size>0&&!e.layer||o.size>0&&e.layer&&!o.has(e.layer)||h.size>0&&e.layer&&h.has(e.layer)?null:e.hitTest(i.x,i.y)))).then((e=>({screenPoint:i,results:e.filter((e=>null!=e&&(!(a.size>0)||a.has(e))&&(!(n.size>0)||!n.has(e)))).map((e=>({mapPoint:r,graphic:e})))})))}takeScreenshot(e){if(e=e||{},!this.ready)return Promise.reject("Map view cannot be used before it is ready");const t=this.supersampleScreenshotsEnabled?Math.min(4,g$8(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach((e=>{const t=this.allLayerViews.find((t=>t.layer.id===e.id));t&&"container"in t&&t.container&&i.push(t.container);}))):i=this._stage.children;const{format:r,quality:s}=l$e(e.format,e.quality),a=t$8(e,t,this.size,this.padding,r,s,i,e.rotation);return this._stage.takeScreenshot(a)}on(e,t,i,r){const s=this.inputManager&&this.viewEvents.on(e,t,i,r);return s||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){if(this.graphicsView){this.graphicsView.graphicUpdateHandler(e);}}whenReady(){return new Promise((e=>{this.ready?e(this):this._resolveWhenReady.push(e);}))}forceDOMReadyCycle(){this.forceReadyCycle();}validate(){let e=s$d({checkMajorWebPerformanceCaveat:!1});return s$2r("safari")&&s$2r("safari")<9&&(e=new s$2l("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:s$2r("safari")})),r$1K(e)?(S$3.warn("#validate()",e.message),Promise.reject(e)):N$1()}_startup(){this.timeline.begin("MapView Startup"),super._startup(),this.graphics.owner=this;const e={disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},t=new O$1(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:e,renderingOptions:this.renderingOptions,timeline:this.timeline}),i=new C$1({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new L$2(this.featuresTilingScheme)}),r=new E$1({view:this,animationManager:this.animationManager}),s=new k$1({view:this});this._magnifierView=new x$3,this._magnifierView.magnifier=this.magnifier,this._stage=t,this.frameTask.graphicsView=i,this._set("graphicsView",i),this._set("mapViewNavigation",r),this._set("labelManager",s),this.handles.add([this.rootLayerViews.on("change",(()=>this._updateStageChildren())),t.on("post-render",(()=>this._set("rendering",t.renderRequested))),t.on("will-render",(()=>this._set("rendering",t.renderRequested))),t.on("webgl-error",(e=>this.fatalError=e.error)),i$2x(this,"stationary",(e=>t.stationary=e),!0),i$2x(this,"state.id",(()=>t.state=this.state),!0),i$2x(this,"background",(e=>{t.background=e,this._magnifierView.background=e;}),!0),i$2x(this,"magnifier",(e=>this._magnifierView.magnifier=e),!0),i$2x(this,"renderingOptions",(e=>t.renderingOptions=e),!0),i$2x(this,"highlightOptions",(()=>t.highlightOptions=this.highlightOptions),!0)],"map-view"),t.state=this.state,this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach((e=>e(this))),this.timeline.end("MapView Startup");}_teardown(){this.handles.remove("map-view"),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy();this.graphicsView.destroy(),this.mapViewNavigation.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,super._teardown();}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach((e=>{this._stage.addChild(e.container);}));const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView);}};e$25([d$1T({type:m$9})],R$1.prototype,"background",null),e$25([d$1T()],R$1.prototype,"floors",void 0),e$25([d$1T()],R$1.prototype,"graphicsView",void 0),e$25([d$1T({type:c$o})],R$1.prototype,"highlightOptions",void 0),e$25([d$1T({readOnly:!0})],R$1.prototype,"inputManager",void 0),e$25([d$1T({readOnly:!0})],R$1.prototype,"textureManager",null),e$25([d$1T({readOnly:!0})],R$1.prototype,"mapViewNavigation",void 0),e$25([d$1T({type:Boolean})],R$1.prototype,"navigating",null),e$25([d$1T({type:Boolean,constructOnly:!0})],R$1.prototype,"supersampleScreenshotsEnabled",void 0),e$25([d$1T({type:p$j})],R$1.prototype,"ui",void 0),e$25([d$1T({readOnly:!0})],R$1.prototype,"rendering",void 0),e$25([d$1T({constructOnly:!0})],R$1.prototype,"renderCanvas",void 0),e$25([d$1T({constructOnly:!0})],R$1.prototype,"deactivatedWebGLExtensions",void 0),e$25([d$1T({constructOnly:!0})],R$1.prototype,"debugWebGLExtensions",void 0),R$1=e$25([i$2z("esri.views.MapView")],R$1);const G=R$1;

const arcgisMapCss = "@import url('https://js.arcgis.com/next/esri/themes/light/main.css');.map-view{padding:0;margin:0}";

let ArcGISMap = class extends HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.loaded = createEvent(this, "loaded", 7);
  }
  validateApiKey(value) {
    t$1P.apiKey = value;
  }
  componentWillLoad() {
    if (this.apiKey) {
      t$1P.apiKey = this.apiKey;
    }
    const map = new j$8({
      basemap: this.basemap || 'streets-vector'
    });
    const params = {};
    if (this.zoom) {
      params.zoom = this.zoom;
    }
    if (this.center) {
      if (typeof this.center === 'string') {
        params.center = this.center.split(',').map((x) => Number(x));
      }
      else {
        params.center = this.center;
      }
    }
    const view = new G(Object.assign({ container: this.el, map }, params));
    this.view = view;
    view.when(() => this.loaded.emit(true));
  }
  componentDidRender() {
    const elem = this.el.querySelector('.esri-view-user-storage');
    if (elem) {
      const elems = Array.from(elem.children);
      for (let e of elems) {
        if (e.tagName.toLowerCase().includes('arcgis-')) {
          e.view = this.view;
        }
      }
    }
  }
  render() {
    return (h$1H("div", { class: "map-view" }));
  }
  get el() { return this; }
  static get watchers() { return {
    "apiKey": ["validateApiKey"]
  }; }
  static get style() { return arcgisMapCss; }
};

const arcgisPortalCss = "@import url('https://js.arcgis.com/next/esri/themes/light/main.css');";

let ArcGISPortal = class extends HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.loaded = createEvent(this, "loaded", 7);
  }
  async componentWillLoad() {
    const portal = new B$i({ url: this.url });
    await portal.load();
    this.portal = portal;
    this.loaded.emit(true);
  }
  static get style() { return arcgisPortalCss; }
};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$h=class extends(r$10(a$2N)){constructor(t){super(t),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null;}};e$25([d$1T()],p$h.prototype,"autoNavigate",void 0),e$25([d$1T()],p$h.prototype,"filter",void 0),e$25([d$1T()],p$h.prototype,"getResults",void 0),e$25([d$1T()],p$h.prototype,"getSuggestions",void 0),e$25([d$1T()],p$h.prototype,"maxResults",void 0),e$25([d$1T()],p$h.prototype,"maxSuggestions",void 0),e$25([d$1T()],p$h.prototype,"minSuggestCharacters",void 0),e$25([d$1T()],p$h.prototype,"outFields",void 0),e$25([d$1T()],p$h.prototype,"placeholder",void 0),e$25([d$1T()],p$h.prototype,"popupEnabled",void 0),e$25([d$1T()],p$h.prototype,"popupTemplate",void 0),e$25([d$1T()],p$h.prototype,"prefix",void 0),e$25([d$1T()],p$h.prototype,"resultGraphicEnabled",void 0),e$25([d$1T()],p$h.prototype,"resultSymbol",void 0),e$25([d$1T()],p$h.prototype,"suggestionsEnabled",void 0),e$25([d$1T()],p$h.prototype,"suffix",void 0),e$25([d$1T()],p$h.prototype,"withinViewEnabled",void 0),e$25([d$1T()],p$h.prototype,"zoomScale",void 0),p$h=e$25([i$2z("esri.widgets.Search.SearchSource")],p$h);const i$k=p$h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const e$5=96;function r$5(r,i){const o=i||r.extent,c=r.width,u=H$c(o&&o.spatialReference);return o&&c?o.width/c*u*m$1O*e$5:0}function i$j(r,i){return r/(H$c(i)*m$1O*e$5)}function c$h(t,n){const e=t.extent,r=t.width,o=i$j(n,e.spatialReference);return e.clone().expand(o*r/e.width)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$5=s$2n.getLogger("esri.widgets.Search.support.geometryUtils");function s$a(r,t){var n,i;if(!t)return o$5.error("missing-parameter: view is missing."),Promise.reject(new s$2l("searchgeometryutils:missing-parameter","view is missing."));if(!r)return o$5.error("missing-parameter: point is missing."),Promise.reject(new s$2l("searchgeometryutils:missing-parameter","point is missing."));if(r.hasZ||"2d"===t.type)return Promise.resolve(r);const s=null==t||null==(n=t.map)?void 0:n.ground;return s&&s.layers.length?s.queryElevation(r,{cache:null==(i=t.basemapTerrain)?void 0:i.elevationQueryCache}).then((e=>e.geometry)):Promise.resolve(r)}function m$8(e){if(t$1T(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function a$d(e,r,n){return t$1T(e)?null:"extent"===e.type?e:"multipoint"===e.type||"polygon"===e.type||"polyline"===e.type?e.extent:"point"===e.type?l$9(e,r,n):void 0}function p$g(e,r,n){return t$1T(e)||t$1T(r)?null:l$9(e.center,r,n)}function l$9(e,r,t){const o=e.hasZ?e.z:void 0;if(r&&r.map){return (t?c$h(r,t):r.extent).clone().centerAt(e).set({zmax:o,zmin:o})}return new M$A({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:o,zmax:o})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const c$g=/https?:\/\/services.*\.arcgis\.com/i,d$7=/(?:\{([^}]+)\})/g,f$3=s$2n.getLogger("esri.widgets.Search.support.layerSearchUtils");function m$7(t,r){const{exactMatch:i=!1,location:l,maxResults:o,spatialReference:s,source:u,sourceIndex:a,suggestResult:c,view:d}=t,{layer:m,filter:g,zoomScale:F}=u,b=d&&d.scale,j=p$f(u,d),T=r&&r.signal;return h$6(m).then((()=>{const e=m.popupTemplate;return e?e.getRequiredFields(m.fieldsIndex):null})).then((t=>{var r,p;const{objectIdField:h,returnZ:R}=m,S=x$2(u);if(!$$2(m,S))throw f$3.error("invalid-field: displayField is invalid."),new s$2l("getResults():invalid-field","displayField is invalid.");const D=t&&t.length?t:[S],E=u.outFields||D,M=y$5(E);-1!==E.indexOf(h)||M||E.push(h);if(!(M||w$3(m,E)))throw f$3.error("invalid-field: outField is invalid."),new s$2l("getResults():invalid-field","outField is invalid.");const O=m.createQuery(),{orderByFields:C}=u;if(C&&(O.orderByFields=C),s){O.outSpatialReference=s;const e=1/H$c(s);e&&(O.maxAllowableOffset=e);}const N="mesh"===m.geometryType||"multipatch"===m.geometryType,U=(null==(r=m.capabilities)||null==(p=r.data)?void 0:p.supportsZ)&&!N;if(O.returnZ=U&&!1!==R,O.returnGeometry=!0,O.multipatchOption=N?"xyFootprint":null,E&&(O.outFields=E),l)O.geometry=l;else if(c.key)O.objectIds=[c.key];else {const t=u.searchFields||[S];if(!w$3(m,t))throw f$3.error("invalid-field: search field is invalid."),new s$2l("getResults():invalid-field","search field is invalid.");v$2(m)&&(O.num=o),j&&(O.geometry=j);if(!c.text.trim())return [];const{prefix:r="",suffix:n=""}=u,l=L$1({searchTerm:I$1(`${r}${c.text}${n}`),layer:m,searchFields:t,filter:g,exactMatch:i,type:"search"});if(!l)return [];O.where=l;}return m.queryFeatures(O,{signal:T}).then((e=>k(e,d,u,a,S,b,F)))}))}function g$3(t,r){const{source:i,spatialReference:n,view:l,suggestTerm:o,maxSuggestions:s,sourceIndex:u,exactMatch:a}=t,{layer:c,filter:m}=i,g=r&&r.signal,F=p$f(i,l);return h$6(c).then((()=>{if(!v$2(c))return [];const t=x$2(i),r=i.searchFields||[t],l=[];i.suggestionTemplate?i.suggestionTemplate.replace(d$7,((e,t)=>(l.push(t),e))):l.push(t);const p=y$5(l);-1!==l.indexOf(c.objectIdField)||p||l.push(c.objectIdField);const h=$$2(c,t),b=p||w$3(c,l),j=w$3(c,r);if(!h)throw f$3.error("invalid-field: displayField is invalid."),new s$2l("getSuggestions():invalid-field","displayField is invalid.");if(!b)throw f$3.error("invalid-field: outField is invalid."),new s$2l("getSuggestions():invalid-field","outField is invalid.");if(!j)throw f$3.error("invalid-field: search field is invalid."),new s$2l("getSuggestions():invalid-field","search field is invalid.");const T=c.createQuery(),{orderByFields:R}=i;R&&(T.orderByFields=R),T.outSpatialReference=n,T.returnGeometry=!1,T.num=s,T.outFields=l,F&&(T.geometry=F);if(!o.trim())return [];const{prefix:S="",suffix:D=""}=i,E=L$1({searchTerm:I$1(`${S}${o}${D}`),layer:c,searchFields:r,filter:m,exactMatch:a,type:"suggest"});return E?(T.where=E,c.queryFeatures(T,{signal:g}).then((e=>C(e,i,u,t)))):[]}))}function p$f(e,t){const{filter:r,withinViewEnabled:i}=e,n=t&&t.extent;return r&&r.geometry||(i&&n?n:void 0)}function y$5(e){return e&&-1!==e.indexOf("*")}async function h$6(e){e&&await e.load();}function v$2(e){var t,r,i;return null!=(t=null==e||null==(r=e.capabilities)||null==(i=r.query)?void 0:i.supportsPagination)&&t}function F(e){var t,r,i,n;return null!=(t=null==e||null==(r=e.fieldsIndex)||null==(i=r.fields)||null==(n=i.find((e=>"string"===e.type)))?void 0:n.name)?t:""}function x$2(e){return e.displayField||e.layer.displayField||F(e.layer)}function w$3(e,t){return !(!e||!t)&&t.every((t=>$$2(e,t)))}function $$2(e,t){return !!e.getField(t)}function b$3(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return !0;return !1}function j$3(e,t,r){let i=null;const{codedValues:n}=e;return n&&n.some((e=>{const n=e.name,l=r?n:n.toLowerCase();return (r?t:t.toLowerCase())===l&&(i=e.code.toString(),!0)})),i}function I$1(e){return e.replace(/\'/g,"''")}function T(e,t){const r=t&&t.where;return r?`(${e}) AND (${r})`:e}function R({currentTerm:e,field:t,filter:r,exactMatch:i,url:n,type:l}){const o=t.type,s=t.name;if("string"===o||"date"===o||"global-id"===o){const t=c$g.test(n),o=t&&b$3(e)?"N":"";if(i&&"search"===l)return T(`${s} = ${o}'${e}'`,r);const u=t?s:`UPPER(${s})`,a=t?e:e.toUpperCase();return T(`${u} LIKE ${o}${i?`'${a}%'`:`'%${a}%'`}`,r)}if("oid"===o||"small-integer"===o||"integer"===o||"single"===o||"double"===o){const t=Number(e);return isNaN(t)?null:T(`${s} = ${t}`,r)}return T(`${s} = ${e}`,r)}function S$2(e,t){return e?` OR (${t})`:`(${t})`}function L$1({searchTerm:e,layer:t,searchFields:r,filter:i,exactMatch:n,type:l}){const{definitionExpression:o,url:s}=t;let u="";return e&&r&&r.forEach((r=>{const o=t.getField(r),a="function"==typeof t.getFieldDomain&&t.getFieldDomain(r),c=(a&&"coded-value"===a.type?j$3(a,e,n):null)||e||null;if(null!==c){const e=R({currentTerm:c,field:o,filter:i,exactMatch:n,url:s,type:l});e&&(u+=S$2(u,e));}})),o?`(${o}) AND (${u})`:u}function D(e,t){let r=null;const{codedValues:i}=e;return i&&i.length&&i.some((e=>e.code===t&&(r=e.name,!0))),r}function E(e,t){return e[Object.keys(e).find((e=>e.toLowerCase()===t.toLowerCase()))]}function M(e,t,r){const i=e.sourceLayer,{attributes:n}=e,l="function"==typeof i.getFieldDomain&&i.getFieldDomain(r);if(t)return s$22(t,n);if(r&&n){const e=i.getField(r),t=E(n,r);return null==t?"":l&&"coded-value"===l.type?D(l,t):"date"===(null==e?void 0:e.type)?L$w(new Date(t)):"number"==typeof t?t.toString():"string"!=typeof t?"":t.trim()}return ""}function O(e,t,r,i){const n=e.sourceLayer,{attributes:l}=e,{objectIdField:o}=n,s=l[o];return {text:M(e,t.suggestionTemplate,i),key:s,sourceIndex:r}}function C(e,t,r,i){return e.features.map((e=>O(e,t,r,i)))}function N(e,r,n,u,a,c,d){const f=e.clone(),m=e.sourceLayer,g=m&&m.objectIdField,p=g&&e.attributes[g],y=M(e,n.searchTemplate,a),h=a$d(f.geometry,r,c),v="number"==typeof d?p$g(l$2w(h),r,d):h,F=e.clone();return r$1K(v)&&(F.geometry=v$J.fromExtent(v)),{extent:v,target:F,feature:f,key:p,name:y,sourceIndex:u}}function k(e,t,r,i,n,l,o){return e.features.map((e=>N(e,t,r,i,n,l,o)))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var o$4;let n$i=o$4=class extends i$k{constructor(e){super(e),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,t)=>m$7({source:this,...e},t),this.getSuggestions=(e,t)=>g$3({source:this,...e},t);}set layer(e){this._set("layer",e),e&&e.load().catch((()=>{}));}get name(){return this._getLayerTitle()||""}set name(e){void 0!==e?this._override("name",e):this._clearOverride("name");}clone(){return new o$4({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?l$2w(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?l$2w(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var e,t;return null!=(e=null==(t=this.layer.fieldsIndex.fields.find((e=>"string"===e.type)))?void 0:t.name)?e:""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;if(!e.loaded)return "";return `: ${(t||[this._getDisplayField()]).map((t=>{const s=e.getField(t);return s&&s.alias||t})).join(", ")}`}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?`${t}${this._getSearchFieldsString()}`:void 0}};e$25([d$1T({json:{read:{source:"field.name"},write:{target:"field.name"}}})],n$i.prototype,"displayField",void 0),e$25([d$1T({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],n$i.prototype,"exactMatch",void 0),e$25([d$1T({value:null})],n$i.prototype,"layer",null),e$25([d$1T()],n$i.prototype,"name",null),e$25([d$1T({type:[String],json:{write:!0}})],n$i.prototype,"orderByFields",void 0),e$25([d$1T()],n$i.prototype,"searchFields",void 0),e$25([d$1T()],n$i.prototype,"searchTemplate",void 0),e$25([d$1T()],n$i.prototype,"suggestionTemplate",void 0),n$i=o$4=e$25([i$2z("esri.widgets.Search.LayerSearchSource")],n$i);const h$5=n$i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$h(n){return n&&"number"==typeof n.x&&"number"==typeof n.y}function e$4(n){return n&&"number"==typeof n.xmin&&"number"==typeof n.ymin&&"number"==typeof n.xmax&&"number"==typeof n.ymax}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$i=class extends a$2N{constructor(t){super(t),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null;}};e$25([d$1T({type:String,json:{write:!0}})],i$i.prototype,"address",void 0),e$25([d$1T({type:Object,json:{write:!0}})],i$i.prototype,"attributes",void 0),e$25([d$1T({type:M$A,json:{write:!0}})],i$i.prototype,"extent",void 0),e$25([d$1T({type:b$10,json:{write:!0}})],i$i.prototype,"location",void 0),e$25([d$1T({type:Number,json:{write:!0}})],i$i.prototype,"score",void 0),i$i=e$25([i$2z("esri.rest.support.AddressCandidate")],i$i);const c$f=i$i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$5={type:String,json:{read:{source:"token"},write:{target:"token"}}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$8=class extends a$2N{constructor(t){super(t),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null;}};e$25([d$1T({type:Object,json:{write:!0}})],l$8.prototype,"address",void 0),e$25([d$1T(t$5)],l$8.prototype,"apiKey",void 0),e$25([d$1T({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,o)=>{o.category=t?t.join(","):null;}}}})],l$8.prototype,"categories",void 0),e$25([d$1T({type:String,json:{write:!0}})],l$8.prototype,"countryCode",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],l$8.prototype,"forStorage",void 0),e$25([d$1T({type:b$10,json:{write:{writer:(t,o)=>{o.location=t?t.clone().normalize():null;}}}})],l$8.prototype,"location",void 0),e$25([d$1T({type:String,json:{write:!0}})],l$8.prototype,"locationType",void 0),e$25([d$1T({type:String,json:{write:!0}})],l$8.prototype,"magicKey",void 0),e$25([d$1T({type:Number,json:{write:!0}})],l$8.prototype,"maxLocations",void 0),e$25([d$1T({type:[String],json:{write:{writer:(t,o)=>{o.outFields=t?t.join(","):null;}}}})],l$8.prototype,"outFields",void 0),e$25([d$1T({type:k$w,json:{read:{source:"outSR"},write:{target:"outSR"}}})],l$8.prototype,"outSpatialReference",void 0),e$25([d$1T({type:M$A,json:{write:{writer:(t,o)=>{const e=t?t.shiftCentralMeridian():null;o.searchExtent=e;}}}})],l$8.prototype,"searchExtent",void 0),l$8=e$25([i$2z("esri.rest.support.AddressToLocationsParameters")],l$8),l$8.from=b$14(l$8);const c$e=l$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function d$6(o,n,a){n=c$e.from(n);const d=e$t(o),{address:p,...m}=n.toJSON(),u={...p,...m,f:"json"},c=n$$({...d.query,...u}),j=r$t(c,a),l=`${d.path}/findAddressCandidates`;return E$v(l,j).then(f$2)}function f$2({data:r}){if(!r)return [];const{candidates:t,spatialReference:e}=r;return t?t.map((r=>{if(!r)return;const{extent:t,location:s}=r,i=!t||e$4(t);return n$h(s)&&i?(t&&(t.spatialReference=e),s.spatialReference=e,c$f.fromJSON(r)):void 0})):[]}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$e=class extends a$2N{constructor(r){super(r),this.addresses=null,this.categories=null,this.countryCode=null,this.locationType=null,this.outSpatialReference=null;}};e$25([d$1T({type:[Object],json:{read:{reader:r=>r&&r.records?r.records.map((r=>r.attributes)):null},write:{writer:(r,e)=>{const o=[];Array.isArray(r)&&r.forEach((r=>{o.push({attributes:r});})),e.addresses={records:o};}}}})],p$e.prototype,"addresses",void 0),e$25([d$1T({type:[String],json:{read:{source:"category",reader:r=>r?r.split(","):null},write:{target:"category",writer:(r,e)=>{e.category=r?r.join(","):null;}}}})],p$e.prototype,"categories",void 0),e$25([d$1T({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],p$e.prototype,"countryCode",void 0),e$25([d$1T({type:String,json:{write:!0}})],p$e.prototype,"locationType",void 0),e$25([d$1T({type:k$w,json:{read:{source:"outSR"},write:{target:"outSR"}}})],p$e.prototype,"outSpatialReference",void 0),p$e=e$25([i$2z("esri.rest.support.AddressesToLocationsParameters")],p$e),p$e.from=b$14(p$e);const i$h=p$e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function a$c(s,a,c){a=i$h.from(a);const p=e$t(s),f={...a.toJSON(),f:"json"},m=n$$({...p.query,...f}),u=r$t(m,c),d=`${p.path}/geocodeAddresses`;return E$v(d,u).then(i$g)}function i$g(o){const{data:r}=o;if(!r)return [];const{locations:t,spatialReference:e}=r;return t?t.map((o=>{const{location:r}=o;return r&&(r.spatialReference=e),c$f.fromJSON(o)})):[]}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let a$b=class extends a$2N{constructor(o){super(o),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null;}};e$25([d$1T(t$5)],a$b.prototype,"apiKey",void 0),e$25([d$1T({type:b$10,json:{write:{writer:(o,r)=>{const t=o?o.clone().normalize():null,e=void 0!==t;r.location=e?t:null;}}}})],a$b.prototype,"location",void 0),e$25([d$1T({type:String,json:{write:!0}})],a$b.prototype,"locationType",void 0),e$25([d$1T({type:k$w,json:{read:{source:"outSR"},write:{target:"outSR"}}})],a$b.prototype,"outSpatialReference",void 0),a$b=e$25([i$2z("esri.rest.support.LocationToAddressParameters")],a$b),a$b.from=b$14(a$b);const n$g=a$b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function n$f(e,n,i){n=n$g.from(n);const c=e$t(e),m={...n.toJSON(),f:"json"},u=n$$({...c.query,...m}),f=r$t(u,i),p=`${c.path}/reverseGeocode`;return E$v(p,f).then(d$5)}function d$5({data:r}){if(!r)return;const{address:o,location:t}=r,s=o&&o.Match_addr||"";return c$f.fromJSON({address:s,attributes:o||{},location:t,score:100})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let e$3=class extends a$2N{constructor(o){super(o),this.isCollection=null,this.magicKey=null,this.text=null;}};e$25([d$1T({type:Boolean,json:{write:!0}})],e$3.prototype,"isCollection",void 0),e$25([d$1T({type:String,json:{write:!0}})],e$3.prototype,"magicKey",void 0),e$25([d$1T({type:String,json:{write:!0}})],e$3.prototype,"text",void 0),e$3=e$25([i$2z("esri.rest.support.SuggestionCandidate")],e$3);const p$d=e$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let c$d=class extends a$2N{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null;}};e$25([d$1T(t$5)],c$d.prototype,"apiKey",void 0),e$25([d$1T({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,o)=>{o.category=t?t.join(","):null;}}}})],c$d.prototype,"categories",void 0),e$25([d$1T({type:String,json:{write:!0}})],c$d.prototype,"countryCode",void 0),e$25([d$1T({type:b$10,json:{write:{writer:(t,o)=>{o.location=t?t.clone().normalize():null;}}}})],c$d.prototype,"location",void 0),e$25([d$1T({type:Number,json:{write:!0}})],c$d.prototype,"maxSuggestions",void 0),e$25([d$1T({type:k$w,json:{read:{source:"outSR"},write:{target:"outSR"}}})],c$d.prototype,"outSpatialReference",void 0),e$25([d$1T({type:M$A,json:{write:{writer:(t,o)=>{const e=t?t.shiftCentralMeridian():null;o.searchExtent=JSON.stringify(e);}}}})],c$d.prototype,"searchExtent",void 0),e$25([d$1T({type:String,json:{write:!0}})],c$d.prototype,"text",void 0),c$d=e$25([i$2z("esri.rest.support.SuggestLocationsParameters")],c$d),c$d.from=b$14(c$d);const l$7=c$d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
async function u$5(n,u,m){const p=e$t(n),a={...(u=l$7.from(u)).toJSON(),f:"json"},f=n$$({...p.query,...a}),g=r$t(f,m),c=`${p.path}/suggest`;return E$v(c,g).then(i$f)}function i$f(t){const{data:o}=t;if(!o)return [];const{suggestions:r}=o;return r?r.map((t=>new p$d(t))):[]}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let n$e=class extends l$z{constructor(t){super(t),this.outSpatialReference=null,this.url=null;}addressToLocations(t,e){!t.outSpatialReference&&this.outSpatialReference&&(t.outSpatialReference=this.outSpatialReference);const o={...this.requestOptions,...e};return d$6(this.url,t,o)}suggestLocations(t,e){const o={...this.requestOptions,...e};return u$5(this.url,t,o)}addressesToLocations(t,e){!t.outSpatialReference&&this.outSpatialReference&&(t.outSpatialReference=this.outSpatialReference);const o={...this.requestOptions,...e};return a$c(this.url,t,o)}locationToAddress(t,e){!t.outSpatialReference&&this.outSpatialReference&&(t.outSpatialReference=this.outSpatialReference);const o={...this.requestOptions,...e};return n$f(this.url,t,o)}};e$25([d$1T({type:k$w})],n$e.prototype,"outSpatialReference",void 0),e$25([d$1T()],n$e.prototype,"url",void 0),n$e=e$25([i$2z("esri.tasks.Locator")],n$e);const u$4=n$e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const f$1="Single Line Input",d$4=3e5;function g$2(e,o){return e.location?j$2(e,o):$$1(e,o)}function p$c(e){const o=null==e?void 0:e.scale;return "number"==typeof o&&o<=d$4?e.get("extent.center"):null}function y$4(e,t){const{source:r,spatialReference:s,view:n,suggestTerm:c,maxSuggestions:a,sourceIndex:l}=e,m=new l$7,{apiKey:f,url:d}=r,g=I(r,n),y=t&&t.signal;if(!d)return Promise.resolve(null);f&&(m.apiKey=f),r.categories&&(m.categories=r.categories),s&&(m.outSpatialReference=s);const x=p$c(n);x&&(m.location=x);if(!c.trim())return Promise.resolve(null);const{prefix:v="",suffix:S=""}=r,w=`${v}${c}${S}`;return m.text=w,g&&(m.searchExtent=e$23(g)),m.maxSuggestions=a,r.countryCode&&(m.countryCode=r.countryCode),u$5(d,m,{signal:y}).then((e=>K$1(e,l)))}function x$1(e){return !!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function v$1(e){return !!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(e)}function S$1(e){return !!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(e)}const w$2="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";function j$2(e,o){const{source:t,spatialReference:r,location:s,sourceIndex:i,view:c}=e,{apiKey:u,url:l,zoomScale:m,defaultZoomScale:f}=t,d=c&&c.scale,g=o&&o.signal,p=new n$g;return p.location=s,u&&(p.apiKey=u),r&&(p.outSpatialReference=r),n$f(l,p,{signal:g}).then((e=>P$1([e],{sourceIndex:i,scale:d,view:c,zoomScale:m,defaultZoomScale:f})))}function I(e,o){const{filter:t,withinViewEnabled:r}=e,s=o&&o.scale,n=o&&o.extent,i=t&&t.geometry;return a$d(i,o,s)||(r&&n?n:void 0)}function $$1(e,t){const{source:r,suggestResult:n,spatialReference:i,view:a,maxResults:u,sourceIndex:l}=e,m=r&&r.zoomScale,d=r&&r.defaultZoomScale;if(!n.text.trim())return Promise.resolve(null);const g=!n.key&&r.prefix?r.prefix:"",y=!n.key&&r.suffix?r.suffix:"",x=`${g}${n.text}${y}`,v=new c$e,{apiKey:S,url:w}=r,j=a&&a.scale,$=I(r,a),h=t&&t.signal;if(S&&(v.apiKey=S),!w)return Promise.resolve(null);r.categories&&(v.categories=r.categories),r.locationType&&(v.locationType=r.locationType),i&&(v.outSpatialReference=i);const K=p$c(a);K&&(v.location=K),v.maxLocations=u,$&&(v.searchExtent=e$23($)),r.countryCode&&(v.countryCode=r.countryCode);const{key:L}=n,R=`${L}`;return L&&(v.magicKey=R),v.address={},v.address[r.singleLineFieldName||f$1]=x,r.outFields&&(v.outFields=r.outFields),d$6(w,v,{signal:h}).then((e=>P$1(e,{key:R,scale:j,sourceIndex:l,view:a,zoomScale:m,defaultZoomScale:d})))}function h$4(e,o){return {text:e.text,key:e.magicKey,sourceIndex:o}}function K$1(e,o){return e.map((e=>h$4(e,o)))}function L(o,s){const{key:n,scale:i,sourceIndex:c,view:a,zoomScale:u,defaultZoomScale:f}=s,{attributes:d,extent:g,location:p,address:y}=o,x=new h$X({geometry:p,attributes:d}),v=g||p,S=a$d(v,a,i),w="number"==typeof u?p$g(S,a,u):"number"==typeof f&&"point"===v.type?p$g(S,a,f):S,j=p?`${p.x},${p.y}`:"",I=y||j,$=x.clone();return r$1K(w)&&($.geometry=v$J.fromExtent(w)),{extent:w,feature:x,target:$,key:n,name:I,sourceIndex:c}}function P$1(e,o){return e.filter(Boolean).map((e=>L(e,o)))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var n$d;const u$3="esri.widgets.Search.LocatorSearchSource",h$3=s$2n.getLogger(u$3);let d$3=n$d=class extends i$k{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(e,t)=>g$2({source:this,...e},t),this.getSuggestions=(e,t)=>y$4({source:this,...e},t);}set locator(e){r$1G(h$3,"locator",{replacement:"url",version:"4.22"}),this._set("url",e.url),this._set("locator",e);}get locator(){return r$1G(h$3,"locator",{replacement:"url",version:"4.22"}),this._get("locator")}clone(){return new n$d({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?l$2w(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?l$2w(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};e$25([d$1T()],d$3.prototype,"apiKey",void 0),e$25([d$1T()],d$3.prototype,"categories",void 0),e$25([d$1T()],d$3.prototype,"countryCode",void 0),e$25([d$1T({json:{write:!0}})],d$3.prototype,"defaultZoomScale",void 0),e$25([d$1T({type:u$4,json:{read:!1,write:!1}})],d$3.prototype,"locator",null),e$25([d$1T()],d$3.prototype,"locationType",void 0),e$25([d$1T({json:{write:!0}})],d$3.prototype,"name",void 0),e$25([d$1T({json:{write:!0}})],d$3.prototype,"placeholder",void 0),e$25([d$1T()],d$3.prototype,"searchTemplate",void 0),e$25([d$1T({json:{write:!0}})],d$3.prototype,"singleLineFieldName",void 0),e$25([d$1T({json:{read:{source:"suggest"},write:{target:"suggest"}}})],d$3.prototype,"suggestionsEnabled",void 0),e$25([d$1T({json:{write:!0}})],d$3.prototype,"url",void 0),e$25([d$1T({json:{write:!0}})],d$3.prototype,"zoomScale",void 0),d$3=n$d=e$25([i$2z(u$3)],d$3);const m$6=d$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const _=new o$1J({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$b=class extends a$2N{constructor(r){super(r),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null;}};e$25([d$1T({type:String,json:{write:!0}})],p$b.prototype,"deviationUnit",void 0),e$25([d$1T({json:{read:{reader:r=>r?r.map((r=>d$1o(r))):null},write:{writer:(r,o)=>{o.geometries=r.map((r=>r.toJSON()));}}}})],p$b.prototype,"geometries",void 0),e$25([d$1T({type:Number,json:{write:!0}})],p$b.prototype,"maxDeviation",void 0),p$b=e$25([i$2z("esri.rest.support.GeneralizeParameters")],p$b),p$b.from=b$14(p$b);const a$a=p$b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$e=new o$1J({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});function r$4(e){const{geometries:r,deviationUnit:s,maxDeviation:o}=e.toJSON(),n={maxDeviation:o};return r&&r.length&&(n.geometries=JSON.stringify({geometryType:v$F(r[0]),geometries:r}),n.sr=JSON.stringify(r[0].spatialReference)),i$e.write(s,n,"deviationUnit"),n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let l$6=class extends a$2N{constructor(o){super(o),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null;}};e$25([d$1T({type:String,json:{write:!0}})],l$6.prototype,"calculationType",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],l$6.prototype,"geodesic",void 0),e$25([d$1T({json:{write:!0}})],l$6.prototype,"lengthUnit",void 0),e$25([d$1T({type:[m$1L],json:{read:{reader:o=>o?o.map((o=>d$1o(o))):null},write:{writer:(o,r)=>{r.polylines=o.map((o=>o.toJSON()));}}}})],l$6.prototype,"polylines",void 0),l$6=e$25([i$2z("esri.rest.support.LengthsParameters")],l$6),l$6.from=b$14(l$6);const n$c=l$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$b=new o$1J({preserveShape:"preserve-shape"});function o$3(e){const{polylines:o,lengthUnit:t,geodesic:i,calculationType:s}=e.toJSON(),r={};r.polylines=JSON.stringify(o);const l=e.polylines[0].spatialReference;return r.sr=l.wkid?l.wkid:JSON.stringify(l.toJSON()),t&&(r.lengthUnit=t),i&&(r.geodesic=i),s&&(r.calculationType=n$b.toJSON(s)),r}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$d=class extends a$2N{constructor(o){super(o),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null;}};e$25([d$1T({type:Number,json:{write:!0}})],i$d.prototype,"bevelRatio",void 0),e$25([d$1T({json:{read:{reader:o=>o?o.map((o=>d$1o(o))):null},write:{writer:(o,t)=>{t.geometries=o.map((o=>o.toJSON()));}}}})],i$d.prototype,"geometries",void 0),e$25([d$1T({type:Number,json:{write:!0}})],i$d.prototype,"offsetDistance",void 0),e$25([d$1T({type:String,json:{write:!0}})],i$d.prototype,"offsetHow",void 0),e$25([d$1T({type:String,json:{write:!0}})],i$d.prototype,"offsetUnit",void 0),i$d=e$25([i$2z("esri.rest.support.OffsetParameters")],i$d),i$d.from=b$14(i$d);const m$5=i$d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o$2=new o$1J({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),s$9=new o$1J({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});function r$3(e){const{geometries:r,bevelRatio:i,offsetDistance:f,offsetHow:n,offsetUnit:m}=e.toJSON(),l={bevelRatio:i,offsetDistance:f};return r&&r.length&&(l.geometries=JSON.stringify({geometryType:v$F(r[0]),geometries:r}),l.sr=JSON.stringify(r[0].spatialReference)),n&&(l.offsetHow=o$2.toJSON(n)),m&&(l.offsetUnit=s$9.toJSON(m)),l}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$2(t){return {geometryType:v$F(t[0]),geometries:t.map((e=>e.toJSON()))}}function o$1(e,r,o){const n=a$2v(r);return e.map((e=>{const t=n.fromJSON(e);return t.spatialReference=o,t}))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$c=class extends a$2N{constructor(r){super(r),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null;}toJSON(){const r=this.geometries.map((function(r){return r.toJSON()})),t=this.geometries[0],o={};return o.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),o.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),o.geometries=JSON.stringify({geometryType:v$F(t),geometries:r}),this.transformation&&(o.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(o.transformForward=this.transformForward),o}};e$25([d$1T()],i$c.prototype,"geometries",void 0),e$25([d$1T({json:{read:{source:"outSR"}}})],i$c.prototype,"outSpatialReference",void 0),e$25([d$1T()],i$c.prototype,"transformation",void 0),e$25([d$1T()],i$c.prototype,"transformForward",void 0),i$c=e$25([i$2z("esri.rest.support.ProjectParameters")],i$c);const a$9=i$c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const i$b=b$14(a$9);async function n$a(o,m,n){m=i$b(m);const u=e$t(o),c={...u.query,f:"json",...m.toJSON()},j=m.outSpatialReference,a=v$F(m.geometries[0]),f=r$t(c,n);return E$v(u.path+"/project",f).then((({data:{geometries:r}})=>o$1(r,a,j)))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$a=class extends a$2N{constructor(r){super(r),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null;}};e$25([d$1T({json:{read:{reader:r=>r?r.map((r=>d$1o(r))):null},write:{writer:(r,e)=>{e.geometries1=r.map((r=>r.toJSON()));}}}})],p$a.prototype,"geometries1",void 0),e$25([d$1T({json:{read:{reader:r=>r?r.map((r=>d$1o(r))):null},write:{writer:(r,e)=>{e.geometries2=r.map((r=>r.toJSON()));}}}})],p$a.prototype,"geometries2",void 0),e$25([d$1T({type:String,json:{write:!0}})],p$a.prototype,"relation",void 0),e$25([d$1T({type:String,json:{write:!0}})],p$a.prototype,"relationParameter",void 0),p$a=e$25([i$2z("esri.rest.support.RelationParameters")],p$a),p$a.from=b$14(p$a);const a$8=p$a;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$4=new o$1J({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});function o(e){const{geometries1:o,geometries2:r,relation:n,relationParameter:s}=e.toJSON(),a={};if(o&&o.length){a.geometries1=JSON.stringify({geometryType:v$F(o[0]),geometries:o});const e=o[0].spatialReference;a.sr=e.wkid?e.wkid:JSON.stringify(e);}return r&&r.length>0&&(a.geometries2=JSON.stringify({geometryType:v$F(r[0]),geometries:r})),n&&(a.relation=t$4.toJSON(n)),s&&(a.relationParam=s),a}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let m$4=class extends a$2N{constructor(r){super(r),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null;}};e$25([d$1T({type:String,json:{write:!0}})],m$4.prototype,"extendHow",void 0),e$25([d$1T({type:[m$1L],json:{read:{reader:r=>r?r.map((r=>d$1o(r))):null},write:{writer:(r,o)=>{o.polylines=r.map((r=>r.toJSON()));}}}})],m$4.prototype,"polylines",void 0),e$25([d$1T({json:{read:{reader:r=>r?d$1o(r):null},write:{writer:(r,o)=>{o.trimExtendTo=r.toJSON();}}}})],m$4.prototype,"trimExtendTo",void 0),m$4=e$25([i$2z("esri.rest.support.TrimExtendParameters")],m$4),m$4.from=b$14(m$4);const n$9=m$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$3=new o$1J({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});function n$8(e){const{extendHow:n,polylines:o,trimExtendTo:r}=e.toJSON(),i={};return i.extendHow=t$3.toJSON(n),o&&o.length&&(i.polylines=JSON.stringify(o),i.sr=JSON.stringify(o[0].spatialReference)),r&&(i.trimExtendTo=JSON.stringify(r)),i}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u$2=s$2n.getLogger("esri.widgets.support.geolocationUtils"),c$c={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function p$9(){const e=s$2r("esri-geolocation");return e||u$2.warn("geolocation-unsupported","Geolocation unsupported."),e}function l$5(){const e=window.isSecureContext;return e||u$2.warn("insecure-context","Geolocation requires a secure origin."),e}function g$1(){return p$9()&&l$5()}function f(e){const r=15e3;return e||(e=c$c),new Promise(((o,i)=>{setTimeout((()=>i(new s$2l("geolocation:timeout","getting the current geolocation position timed out"))),r),navigator.geolocation.getCurrentPosition(o,i,e);}))}function j$1(e,t){const{position:r,view:o}=e;return P(y$3(d$2(r)),o,t)}function d$2(e){const t=e&&e.coords||{},r={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e?{coords:r,timestamp:e.timestamp}:e}function y$3(e){const t=e&&e.coords;return t?new b$10({longitude:t.longitude,latitude:t.latitude,z:t.altitude||null,spatialReference:{wkid:4326}}):null}function P(e,r,o){if(!r)return Promise.resolve(e);const i=r.spatialReference;return i.isWGS84?Promise.resolve(e):i.isWebMercator?Promise.resolve(R$s(e)):w$1(o).then((r=>{if(!r)throw new s$2l("geometry-service:missing-url","Geometry service URL is missing");const s=new a$9({geometries:[e],outSpatialReference:i});return n$a(r,s,o).then((e=>e[0]))}))}function w$1(t){if(t$1P.geometryServiceUrl)return Promise.resolve(t$1P.geometryServiceUrl);const r=B$i.getDefault();return r.load(t).catch((()=>{})).then((()=>r.get("helperServices.geometry.url")))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function Z$1(e,t){return e.hasOwnProperty(t)&&null!=e[t]&&""!==e[t]}const q=()=>u$20("esri/widgets/Search/t9n/Search"),z="esri.widgets.Search.SearchViewModel",K=s$2n.getLogger(z),W="highlight",X$1=S$I.ofType({key:e=>e.layer?"layer":"locator",base:i$k,typeMap:{layer:h$5,locator:m$6}}),Y$1=k$w.WGS84,$="esri/images/search/search-symbol-32.svg",ee$1="esri/images/search/search-symbol-32.png",te$1=/<(?:.|\s)*?>/g,se$1=-1;let re$1=class extends(e$l(n$2D.EventedMixin(p$3a))){constructor(e){super(e),this._handles=new u$25,this._gotoController=null,this._searching=null,this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new X$1,this.defaultSymbols={point:new n$1V({url:a$34(s$2r("trident")?ee$1:$),size:24,width:24,height:24}),polyline:new m$1z({color:[130,130,130,1],width:2}),polygon:new S$r({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=B$i.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new X$1,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null;}initialize(){const e=async()=>{const e=await q();this.messages=e,this.defaultPopupTemplate=new M$o({title:e.searchResult,content:"{Match_addr}"});};e(),this._handles.add([$$g(this,["defaultSources","sources"],"change",(()=>this.notifyChange("allSources"))),i$2x(this,["includeDefaultSources","view","portal"],(()=>this._update())),g$14(e)]);}destroy(){this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null;}get activeSource(){return this.allSources.getItemAt(this.activeSourceIndex)||null}get activeSourceIndex(){return 1===this.allSources.length||!this.searchAllEnabled?0:se$1}set activeSourceIndex(e){void 0!==e?this._override("activeSourceIndex",e):this._clearOverride("activeSourceIndex");}get allPlaceholder(){var e;return null==(e=this.messages)?void 0:e.allPlaceholder}set allPlaceholder(e){e?this._override("allPlaceholder",e):this._clearOverride("allPlaceholder");}get allSources(){const{sources:e,defaultSources:t,includeDefaultSources:s}=this,r="function"==typeof s?s.call(null,{sources:e,defaultSources:t}):s?t.concat(e):e,o=this._get("allSources")||new X$1;return o.removeAll(),o.addMany(r.filter(Boolean)),o}get defaultSymbol(){return r$1G(K,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._get("defaultSymbol")}set defaultSymbol(e){r$1G(K,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._set("defaultSymbol",e);}get locationEnabled(){return this._get("locationEnabled")||g$1()}set locationEnabled(e){if(void 0===e)return void this._clearOverride("locationEnabled");const t=g$1();if(e&&!t){const e=new s$2l("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});K.error(e);}this._override("locationEnabled",e&&t);}get placeholder(){const{allSources:e,activeSourceIndex:t,allPlaceholder:s}=this;if(t===se$1)return s;const r=e.getItemAt(t);return r?r.placeholder:""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),""===e&&this._clear();}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}get updating(){return null!=this._updatingPromise}clear(){this.searchTerm="";}clearGraphics(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null);}search(e,t){this.emit("search-start"),this.clearGraphics();const s=this._createSuggestionForSearch(e),r=this.when().then((()=>this._getResultsFromSources(s,t).then((e=>{var r;if(null!=(r=e$23(null==t?void 0:t.signal))&&r.aborted)return null;const o={activeSourceIndex:this.activeSourceIndex,searchTerm:s.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(o,e,s);const l=this._getFirstResult(o.results),i=(s.location&&l?l.name:s.text).replace(te$1,"");return this._set("searchTerm",i),(s.key&&"number"==typeof s.sourceIndex||s.location)&&this._set("selectedSuggestion",s),this._set("results",o.results),this._set("resultCount",o.results.reduce(((e,t)=>e+t.results.length),0)),this.emit("search-complete",o),this._selectFirstResult(l).then((()=>o))})))).then((e=>(this._clearSearching(),e)),(e=>{throw this._clearSearching(),e}));return this._searching=r,this.notifyChange("state"),r}searchNearby(e){if(!this.locationEnabled){const e=new s$2l("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return K.error(e),Promise.reject(e)}const t=f().then((t=>j$1({position:t,view:this.view},e))).then((t=>this.search(t,e)));return this._searching=t,this.notifyChange("state"),t.catch((()=>{})).then((()=>this._clearSearching())),t}select(e){if(this.clearGraphics(),!e){const t=new s$2l("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});return K.error(t),Promise.reject(t)}const{view:t}=this,s=Z$1(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),o=this.allSources.getItemAt(s);if(!o){const e=new s$2l("select:missing-source","Cannot select without a source.",{source:o});return K.error(e),Promise.reject(e)}const l=o instanceof h$5?this._getLayerSourcePopupTemplate(o):o.popupTemplate,i=o.resultSymbol||this._getDefaultSymbol(e),a=Z$1(o,"resultGraphicEnabled")?o.resultGraphicEnabled:this.resultGraphicEnabled,u=Z$1(o,"autoNavigate")?o.autoNavigate:this.autoNavigate,c=Z$1(o,"popupEnabled")?o.popupEnabled:this.popupEnabled,h=c?l||this.popupTemplate||this.defaultPopupTemplate:null,{feature:p}=e;if(!p){const e=new s$2l("select:missing-feature","Cannot select without a feature.",{feature:p});return K.error(e),Promise.reject(e)}const{attributes:d,geometry:y,layer:f,sourceLayer:S}=p,v=m$8(y),_={layerViewQuery:this._getLayerView(p),elevationQuery:t&&r$1K(v)?s$a(v,t).catch((()=>v)):Promise.resolve(v)};return T$s(_).then((l=>{const n=l.layerViewQuery.value,m=l.elevationQuery.value;i instanceof c$1Z&&(i.text=e.name);const v=t&&u?e.target||e.extent:null;return (r$1K(v)?this._goToSearchResult(v):Promise.resolve()).then((()=>{var l;const u=n?p:new h$X({geometry:y,symbol:i,attributes:d,layer:f,sourceLayer:S,popupTemplate:h}),g=c&&(null==(l=this.view)?void 0:l.popup),v=g&&u.getEffectivePopupTemplate(g.defaultPopupTemplateEnabled);return v&&t.popup.open({features:[u],location:m}),n&&e$13(n)&&!v&&this._highlightFeature({graphic:u,layerView:n}),!n&&a&&t&&t.graphics.push(u),this._set("selectedResult",e),this._set("resultGraphic",u),this.emit("select-result",{result:e,source:o,sourceIndex:s}),e}))}))}suggest(e,t,s){const r=e||this.searchTerm;return this.emit("suggest-start",{searchTerm:r}),this._suggestTimer(t,s).then((()=>this._suggestImmediate(r,s).then((e=>(this._set("suggestions",e.results),this._set("suggestionCount",e.results.reduce(((e,t)=>e+t.results.length),0)),this.emit("suggest-complete",e),e)))))}async when(){await g$15(this,"updating");}async _update(){const{portal:e,view:t}=this;if(this.includeDefaultSources){const s=this._updatingPromise=T$s([null==e?void 0:e.load(),null==t?void 0:t.when()]);if(this.destroyed)return;if(this.notifyChange("updating"),await s,s!==this._updatingPromise)return}this._updatingPromise=null,this.notifyChange("updating");const s=a$2Y(this,"messages");this.destroyed||(this._handles.add(s),await s,this._updateDefaultSources());}_clearSearching(){this._searching=null,this.notifyChange("state");}_convertHelperServices(){var e,t;const r=null==(e=this.portal)||null==(t=e.helperServices)?void 0:t.geocode;if(!r)return [];return r.map((e=>{if(!1===e.placefinding)return;const t=t$1P.apiKey&&S$1(e.url)?{url:w$2}:null,r=m$6.fromJSON({...e,...t}),o=r.url;if(S$1(o)||v$1(o)||x$1(o)){const e=r.outFields||["Addr_type","Match_addr","StAddr","City"],t=r.placeholder||this.messages.placeholder,s="number"==typeof r.defaultZoomScale?r.defaultZoomScale:2500;r.set({singleLineFieldName:"SingleLine",outFields:e,placeholder:t,defaultZoomScale:s});}return r.singleLineFieldName?r:void 0})).filter(Boolean)}_getLayerSources(e,t){var s;const r=null==(s=this.view)?void 0:s.map;return e.map((e=>{const s=r.findLayerById(e.id);if(!s)return;const o=this._getLayerJSON(e),l=h$5.fromJSON(o);return l.placeholder=t,this._getLayer(s,o).then((e=>{l.layer=e;})),l})).filter(Boolean).toArray()}_getTableSources(e,t){var s;const r=null==(s=this.view)?void 0:s.map;return e.map((e=>{const s=r.findTableById(e.id);if(!s)return;const o=this._getLayerJSON(e),l=h$5.fromJSON(o);return l.placeholder=t,this._getLayer(s,o).then((e=>{l.layer=e;})),l})).filter(Boolean).toArray()}_convertApplicationProperties(){var e,t,s;const r=null==(e=this.view)?void 0:e.map,o=null==r||null==(t=r.applicationProperties)||null==(s=t.viewing)?void 0:s.search;if(!o)return [];const{enabled:l,hintText:i,layers:a,tables:n}=o;if(!l)return [];return [...this._getLayerSources(a,i),...this._getTableSources(n,i)]}_getSubLayer(e,t){return e.load().then((()=>{if(!e.allSublayers)return Promise.reject();const s=e.allSublayers.find((e=>e.id===t.subLayer));return s?s.createFeatureLayer():Promise.reject()}))}async _getBuildingSubLayer(e,t){await e.load();const s=e.allSublayers.find((e=>e.id===t.subLayer));return "building-component"!==(null==s?void 0:s.type)?Promise.reject():(await s.load(),null==s.associatedLayer?Promise.reject():(await s.associatedLayer.load(),s))}_getLayer(e,t){return "feature"===e.type||"scene"===e.type||"csv"===e.type||"geojson"===e.type||"ogc-feature"===e.type?Promise.resolve(e):"map-image"===e.type?this._getSubLayer(e,t).catch((()=>{const t=new s$2l("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return K.error(t),null})):"building-scene"===e.type?this._getBuildingSubLayer(e,t):Promise.resolve(null)}_getLayerJSON(e){return "function"==typeof e.toJSON?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:t}=this;e.removeAll(),t&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()]),this.notifyChange("allSources");}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null;}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear");}_closePopup(){var e;const t=null==(e=this.view)?void 0:e.popup,{resultGraphic:s}=this;if(!t||!s)return;const{selectedFeature:r}=t;r&&r===s&&t.close();}_suggestTimer(e,t){const s=null!=e?e:this.suggestionDelay;return L$z(s,null,t&&t.signal)}_createLocationForSearch(e){return e instanceof h$X?m$8(e.geometry):e instanceof b$10?e:Array.isArray(e)&&2===e.length?new b$10({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&Z$1(e,"key")&&Z$1(e,"text")&&Z$1(e,"sourceIndex"))return e;const t=this._createLocationForSearch(e),s="string"==typeof e?e:this.searchTerm,{selectedSuggestion:r,selectedResult:o}=this,l=!e&&r&&o,i=l&&r.key===o.key&&r.sourceIndex===o.sourceIndex,a=l&&r.location;return i||a?r:{location:e$23(t),text:t?"":s,sourceIndex:null,key:null}}_getFirstResult(e){let t=null;return e&&e.some((e=>{const{results:s}=e,r=s[0],o=!!r;return o&&(t=r),o})),t}_selectFirstResult(e){return this.autoSelect&&e?this.select(e):Promise.resolve(null)}_suggestImmediate(e,t){return this.when().then((()=>this._getSuggestionsFromSources(e,t))).then((s=>{var r;if(null!=(r=e$23(null==t?void 0:t.signal))&&r.aborted)return null;const o={activeSourceIndex:this.activeSourceIndex,searchTerm:e,numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(o,s),o}))}_formatSourceResponse(e,t,s){const r=t&&t.value||[],o=t&&t.error,l=this.allSources.getItemAt(s);if(o){const t={sourceIndex:s,source:l,error:o};e.errors.push(t),K.error(o),e.numErrors++;}else {const t={sourceIndex:s,source:l,results:r};e.results.push(t),e.numResults+=r.length;}}_formatResponse(e,t,s){if(t)if(e.activeSourceIndex===se$1){const r=s&&Z$1(s,"sourceIndex")&&-1!==s.sourceIndex?s.sourceIndex:void 0;t.forEach(((t,s)=>{const o=void 0!==r?r:s;this._formatSourceResponse(e,t,o);}));}else this._formatSourceResponse(e,t[0],e.activeSourceIndex);}_getResultsFromSources(e,t){const{allSources:s}=this,r=!e.location&&Z$1(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,o=[];if(!s.length){const e=new s$2l("search:no-sources-defined","At least one source is required.",{allSources:s});return K.error(e),Promise.reject(e)}return r===se$1?s.forEach(((s,r)=>{o.push(this._getResultsFromSource(e,r,t));})):o.push(this._getResultsFromSource(e,r,t)),T$s(o)}_getSuggestionsFromSources(e,t){const{allSources:s,activeSourceIndex:r}=this,o=[];if(!s.length){const e=new s$2l("suggest:no-sources-defined","At least one source is required.",{allSources:s});return K.error(e),Promise.reject(e)}return r===se$1?s.forEach(((s,r)=>{o.push(this._getSuggestionsFromSource(e,r,t));})):o.push(this._getSuggestionsFromSource(e,r,t)),T$s(o)}_getResultsFromSource(e,t,s){var r;const o=this.allSources.getItemAt(t),{location:l=null}=e,i=(null==(r=this.view)?void 0:r.spatialReference)||Y$1,a=Z$1(o,"maxResults")?o.maxResults:this.maxResults,n=!!(o instanceof h$5&&Z$1(o,"exactMatch"))&&o.exactMatch,{view:u}=this;return o.getResults({view:u,sourceIndex:t,location:l,suggestResult:e,spatialReference:i,exactMatch:n,maxResults:a},s)}_getSuggestionsFromSource(e,t,s){const r=this.allSources.getItemAt(t),o=Z$1(r,"suggestionsEnabled")?r.suggestionsEnabled:this.suggestionsEnabled,l=e.length,i=Z$1(r,"minSuggestCharacters")?r.minSuggestCharacters:this.minSuggestCharacters;if(o&&e.trim()&&l>=i){var a;const o=(null==(a=this.view)?void 0:a.spatialReference)||Y$1,l=Z$1(r,"maxSuggestions")?r.maxSuggestions:this.maxSuggestions,{view:i}=this,n=!!(r instanceof h$5&&Z$1(r,"exactMatch"))&&r.exactMatch;return r.getSuggestions({view:i,sourceIndex:t,suggestTerm:e,spatialReference:o,maxSuggestions:l,exactMatch:n},s)}return Promise.resolve(null)}_getLayerSourcePopupTemplate(e){const{layer:t}=e;if(t)return Z$1(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}_getSourceIndexOfResult(e){const t=this.results;let s=null;return t.some((t=>t.results.some((r=>r===e&&(s=t.sourceIndex,!0))))),s}async _goToSearchResult(e){const t=!!e;this._abortGoTo();const s=new AbortController;this._gotoController=s;const r={target:{target:e},options:{animate:t,signal:s.signal}};await this.callGoTo(r),this._gotoController=null;}_getDefaultSymbol(e){var t;const{defaultSymbols:s}=this,r=null==(t=e.feature)?void 0:t.geometry;if(!r$1K(r))return null;const o=this._get("defaultSymbol");if(o&&("point"===r.type||"multipoint"===r.type))return o;switch(r.type){case"point":case"multipoint":return s.point;case"polyline":return s.polyline;case"extent":case"polygon":return s.polygon;default:return null}}_removeHighlight(){this._handles.remove(W);}async _getLayerView(e){const{view:t}=this;if(!e||!t||"building-component"===e.layer.type||"subtype-sublayer"===e.layer.type)return Promise.resolve(null);const{layer:s}=e;return await t.when(),t.whenLayerView(s)}_highlightFeature(e){const{graphic:t,layerView:s}=e,{attributes:r,layer:o}=t,{objectIdField:l}=o,i=r&&r[l],a=s.highlight(i||t);this._handles.add(a,W);}};re$1.ALL_INDEX=se$1,e$25([d$1T({readOnly:!0,value:null})],re$1.prototype,"activeSource",null),e$25([d$1T()],re$1.prototype,"activeSourceIndex",null),e$25([d$1T()],re$1.prototype,"allPlaceholder",null),e$25([d$1T({readOnly:!0,dependsOn:["defaultSources.length","sources.length","includeDefaultSources"]})],re$1.prototype,"allSources",null),e$25([d$1T()],re$1.prototype,"autoNavigate",void 0),e$25([d$1T()],re$1.prototype,"autoSelect",void 0),e$25([d$1T()],re$1.prototype,"defaultPopupTemplate",void 0),e$25([d$1T({readOnly:!0})],re$1.prototype,"defaultSources",void 0),e$25([d$1T()],re$1.prototype,"defaultSymbol",null),e$25([d$1T()],re$1.prototype,"defaultSymbols",void 0),e$25([d$1T()],re$1.prototype,"includeDefaultSources",void 0),e$25([d$1T()],re$1.prototype,"locationEnabled",null),e$25([d$1T()],re$1.prototype,"maxInputLength",void 0),e$25([d$1T()],re$1.prototype,"maxResults",void 0),e$25([d$1T()],re$1.prototype,"maxSuggestions",void 0),e$25([d$1T()],re$1.prototype,"messages",void 0),e$25([d$1T()],re$1.prototype,"minSuggestCharacters",void 0),e$25([d$1T({readOnly:!0})],re$1.prototype,"placeholder",null),e$25([d$1T()],re$1.prototype,"popupEnabled",void 0),e$25([d$1T({type:M$o})],re$1.prototype,"popupTemplate",void 0),e$25([d$1T({type:B$i})],re$1.prototype,"portal",void 0),e$25([d$1T()],re$1.prototype,"resultCount",void 0),e$25([d$1T()],re$1.prototype,"resultGraphicEnabled",void 0),e$25([d$1T({readOnly:!0})],re$1.prototype,"resultGraphic",void 0),e$25([d$1T({readOnly:!0})],re$1.prototype,"results",void 0),e$25([d$1T({readOnly:!0})],re$1.prototype,"selectedSuggestion",void 0),e$25([d$1T()],re$1.prototype,"searchAllEnabled",void 0),e$25([d$1T({readOnly:!0})],re$1.prototype,"selectedResult",void 0),e$25([d$1T()],re$1.prototype,"searchTerm",null),e$25([d$1T({type:X$1})],re$1.prototype,"sources",void 0),e$25([d$1T({readOnly:!0,dependsOn:["allSources.length","updating"]})],re$1.prototype,"state",null),e$25([d$1T()],re$1.prototype,"suggestionDelay",void 0),e$25([d$1T()],re$1.prototype,"suggestionCount",void 0),e$25([d$1T({readOnly:!0})],re$1.prototype,"suggestions",void 0),e$25([d$1T()],re$1.prototype,"suggestionsEnabled",void 0),e$25([d$1T({readOnly:!0})],re$1.prototype,"updating",null),e$25([d$1T()],re$1.prototype,"view",void 0),e$25([d$1T()],re$1.prototype,"clear",null),re$1=e$25([i$2z(z)],re$1);const oe$1=re$1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n$7={base:"esri-search-result-renderer esri-widget",anchor:"esri-widget__anchor",showMoreResults:"esri-search-result-renderer__more-results--show-more-results",moreResults:"esri-search-result-renderer__more-results",moreResultsList:"esri-search-result-renderer__more-results-list",moreResultsHeader:"esri-search-result-renderer__more-results-header",moreResultsItem:"esri-search-result-renderer__more-results-item",moreResultsListHeader:"esri-search-result-renderer__more-results-list-header"};let c$b=class extends z$o{constructor(e,s){super(e,s),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null;}render(){const e={[n$7.showMoreResults]:this.showMoreResultsOpen};return n$2g("div",{class:n$7.base},n$2g("div",{key:"esri-search-renderer__container",class:this.classes(n$7.moreResults,e)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return n$2g("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var e;const s=null==(e=this.viewModel)?void 0:e.selectedResult,r=s&&s.name||"";return n$2g("div",{key:"esri-search-renderer__result-name",class:n$7.moreResultsItem},r)}renderMoreResultsLists(){var e;const s=null==(e=this.viewModel)?void 0:e.results,{resultCount:r}=this.viewModel;if(r<2)return null;const t=s.map((e=>this.renderMoreResultsList(e)));return n$2g("div",{key:"esri-search-renderer__more-results-container",class:n$7.moreResultsList},t)}renderMoreResultsButton(){const{messages:e}=this,{resultCount:s}=this.viewModel;return s<2?null:n$2g("div",{key:"esri-search-renderer__more-results-button",class:n$7.moreResultsItem},n$2g("a",{class:n$7.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults))}renderMoreResultsHeader(e,s){return n$2g("div",{key:`esri-search-result-renderer__header-${s}`,class:n$7.moreResultsListHeader},e)}renderMoreResultsList(e){var s,r;const{results:t}=e,o=t.length,l=!!o,i=null==(s=this.viewModel)?void 0:s.selectedResult,n=1===o&&t[0]===i,c=this._getSourceName(e.source,e.sourceIndex),d=(null==(r=this.viewModel)?void 0:r.results.length)>1&&!n?this.renderMoreResultsHeader(c,e.sourceIndex):null,a=l&&t.map(((e,s)=>this.renderMoreResultsListItem(e,s))),h=l&&!n?n$2g("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},a):null;return l?n$2g("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},d,h):null}renderMoreResultsListItem(e,s){return e!==this.get("viewModel.selectedResult")?n$2g("li",{key:`esri-search-result-renderer__list-item-${s}`},n$2g("a",{class:n$7.anchor,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}_showMoreResultsClick(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const s=this.get("viewModel.view.popup");s&&s.reposition();}_selectResultClick(e){e.preventDefault();const s=e.currentTarget["data-result"];this.viewModel&&this.viewModel.select(s);}_getSourceName(e,s){return s===oe$1.ALL_INDEX?this.messages.all:e.name}};e$25([d$1T(),e$1g("esri/widgets/Search/t9n/Search")],c$b.prototype,"messages",void 0),e$25([d$1T()],c$b.prototype,"showMoreResultsOpen",void 0),e$25([d$1T()],c$b.prototype,"viewModel",void 0),e$25([t$1f()],c$b.prototype,"_showMoreResultsClick",null),e$25([t$1f()],c$b.prototype,"_selectResultClick",null),c$b=e$25([i$2z("esri.widgets.Search.SearchResultRenderer")],c$b);const d$1=c$b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const w={base:"esri-search esri-widget",loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:"esri-search--multiple-sources",isLoading:"esri-search--loading",isSearching:"esri-search--searching",showSuggestions:"esri-search--show-suggestions",showSources:"esri-search--sources",showWarning:"esri-search--warning",container:"esri-search__container",input:"esri-search__input",inputContainer:"esri-search__input-container",form:"esri-search__form",submitButton:"esri-search__submit-button",sourcesButton:"esri-search__sources-button",clearButton:"esri-search__clear-button",sourceName:"esri-search__source-name",suggestionsMenu:"esri-search__suggestions-menu",suggestionList:"esri-search__suggestions-list",suggestionListCurrentLocation:"esri-search__suggestions-list--current-location",sourcesMenu:"esri-search__sources-menu",source:"esri-search__source",warningMenu:"esri-search__warning-menu",warningMenuBody:"esri-search__warning-body",warningMenuHeader:"esri-search__warning-header",warningMenuText:"esri-search__warning-text",noValueText:"esri-search__no-value-text",esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"},S=/<[a-z/][\s\S]*>/i;let b$2=class extends z$o{constructor(e,t){super(e,t),this._activeMenuItemIndex=-1,this._handles=new u$25,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new d$1,this._locateFailed=null,this._container=null,this.activeMenu="none",this.activeSource=null,this.activeSourceIndex=null,this.allPlaceholder=null,this.allSources=null,this.autoNavigate=null,this.autoSelect=null,this.defaultSources=null,this.disabled=!1,this.goToOverride=null,this.iconClass=w.widgetIcon,this.includeDefaultSources=null,this.label=void 0,this.locationEnabled=null,this.maxResults=null,this.maxSuggestions=null,this.messages=null,this.messagesCommon=null,this.minSuggestCharacters=null,this.popupEnabled=null,this.popupTemplate=null,this.portal=null,this.resultGraphic=null,this.resultGraphicEnabled=null,this.results=null,this.searchAllEnabled=null,this.searchTerm=null,this.selectedResult=null,this.sources=null,this.suggestions=null,this.suggestionsEnabled=null,this.view=null,this.viewModel=new oe$1,this._clearActiveMenu=()=>{this.activeMenu="none";},this._removeActiveMenu=e=>{var t;const s=e.relatedTarget;s&&null!=(t=this._container)&&t.contains(s)||this._clearActiveMenu();},this.own(f$1B(this,"searchTerm",(e=>{(e&&"warning"===this.activeMenu||!e&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu();})),$$g(this,"viewModel.allSources","change",(()=>this._watchSourceChanges())),i$2x(this,"activeMenu",(()=>this._resetActiveMenuItemIndex())),i$2x(this,"viewModel.defaultPopupTemplate",(e=>{e&&(e.content=this._renderSearchResultsContent.bind(this));})));}destroy(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null);}get displayedSearchTerm(){return `${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}clear(){}focus(){var e;null==(e=this._inputNode)||e.focus(),this.emit("search-focus");}blur(){var e;null==(e=this._inputNode)||e.blur(),this.emit("search-blur");}search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const t=new AbortController,{signal:s}=t;return this._searchController=t,this.viewModel.search(e,{signal:s}).catch((e=>{if(this._searchController===t)return this._clearActiveMenu(),this._searchController=null,e})).then((e=>{if(this._searchController===t)return this.activeMenu=e.numResults?"none":"warning",this._searchController=null,e}))}suggest(e){this._cancelSuggest();const t=new AbortController,{signal:s}=t;return this._suggestController=t,this.viewModel.suggest(e,null,{signal:s}).then((e=>{if(this._suggestController===t)return this._suggestController=null,e.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),e})).catch((()=>{if(this._suggestController===t)return this._suggestController=null,null}))}render(){const{state:e}=this.viewModel,t={[w.disabled]:"disabled"===e,[w.esriWidgetDisabled]:this.disabled};return n$2g("div",{class:this.classes(w.base,t)},"loading"===e?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:e}=this;return n$2g("button",{"aria-label":e.searchButtonTitle,bind:this,class:this.classes(w.submitButton,w.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle},n$2g("span",{"aria-hidden":"true",class:w.searchIcon}))}renderWarningMenu(){return n$2g("div",{key:"esri-search__error-menu",class:this.classes(w.menu,w.warningMenu)},n$2g("div",{class:w.warningMenuBody},this.renderWarning()))}renderSourceMenuButton(){const{messages:e,activeMenu:t,sourceMenuId:s,sourceMenuButtonId:i}=this,{activeSourceIndex:r,allSources:n}=this.viewModel;return n.length>1?n$2g("button",{id:i,key:"esri-search__source-menu-button",bind:this,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":("source"===t).toString(),"aria-controls":s,class:this.classes(w.sourcesButton,w.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._clearActiveMenu,afterCreate:g$13,"data-node-ref":"_sourceMenuButtonNode"},n$2g("span",{"aria-hidden":"true",class:w.dropdownIcon}),n$2g("span",{"aria-hidden":"true",class:w.dropupIcon}),n$2g("span",{class:w.sourceName},this._getSourceName(r))):null}renderSourcesList(){const{allSources:e,searchAllEnabled:t}=this.viewModel,{_activeMenuItemIndex:s,activeMenu:i,sourceMenuId:r,sourceMenuButtonId:n}=this,o="source"===i&&s>-1?this._buildId("source-item",s):null;return e.length>1?n$2g("ul",{"aria-activedescendant":o,"aria-labelledby":n,id:r,role:"menu",bind:this,afterCreate:g$13,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:w.menuList,tabIndex:-1},t?this.renderSource(oe$1.ALL_INDEX):null,e.map(((e,t)=>this.renderSource(t))).toArray()):null}renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?n$2g("div",{key:"esri-search__source-menu",class:this.classes(w.menu,w.sourcesMenu)},this.renderSourcesList()):null}renderLoader(){const{messages:e,messagesCommon:t}=this;return n$2g("div",{class:w.loader,key:"base-loader"},n$2g("span",{"aria-hidden":"true",class:w.loaderAnimation}),n$2g("span",{class:w.fallbackText},e.searchButtonTitle),n$2g("span",{class:w.loaderText},t.loading))}renderContainer(){const{allSources:e,state:t}=this.viewModel,{activeMenu:s}=this,i={[w.hasMultipleSources]:e.length>1,[w.isLoading]:"loading"===t,[w.isSearching]:"searching"===t,[w.showWarning]:"warning"===s,[w.showSources]:"source"===s,[w.showSuggestions]:"suggestion"===s};return n$2g("div",{tabIndex:-1,afterCreate:e=>{this._container=e,e.addEventListener("focusout",this._removeActiveMenu);},afterRemoved:e=>{e.removeEventListener("focusout",this._removeActiveMenu);},class:this.classes(i,w.container),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?n$2g("button",{bind:this,class:this.classes(w.clearButton,w.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle},n$2g("span",{"aria-hidden":"true",class:w.clearIcon})):null}renderLocationGroup(){const{messages:e,locationEnabled:t,displayedSearchTerm:s}=this,i=t&&!s,r="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return i?n$2g("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(w.menuList,w.suggestionList,w.suggestionListCurrentLocation)},n$2g("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes(w.menuItem,r?w.menuItemFocus:null)},n$2g("span",{"aria-hidden":"true",class:w.locate})," ",e.useCurrentLocation)):null}renderInput(){const{activeMenu:e,locationEnabled:t,displayedSearchTerm:s,messages:i,suggestionsMenuId:r,inputId:n,_activeMenuItemIndex:o}=this,{maxInputLength:a,placeholder:u,searchTerm:l,suggestionCount:c}=this.viewModel,d=!(!(t&&!s)&&!c),h="suggestion"===e&&o>-1?this._buildId("suggestion-item",o):null;return n$2g("input",{"aria-activedescendant":h,"aria-autocomplete":"list","aria-expanded":(d&&"suggestion"===e).toString(),"aria-controls":d?r:null,"aria-haspopup":"listbox","aria-label":i.searchButtonTitle,bind:this,placeholder:u,maxlength:a,autocomplete:"off",type:"text",class:this.classes(w.esriInput,w.input),value:l,id:n,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:g$13,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:l?"":u})}renderForm(){return n$2g("form",{key:"esri-search__form",bind:this,class:w.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(e){const{sourceIndex:t}=e,s=e.results.length,i=e.results;return s?n$2g("ul",{role:"group",key:`esri-search__suggestion-list-${t}`,class:this.classes(w.menuList,w.suggestionList)},i.map((e=>this.renderSuggestion(e,this._menuItemCount++)))):null}renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map((e=>[this.renderSuggestionHeader(e),this.renderSuggestList(e)])):null}renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:t,suggestionsMenuId:s,inputId:i}=this,{suggestionCount:r}=this.viewModel,n=t&&!e||r;return this._menuItemCount=0,n?n$2g("div",{id:s,key:"esri-search__suggestions-menu",class:this.classes(w.menu,w.suggestionsMenu),role:"listbox","aria-labelledby":i,bind:this,afterCreate:g$13,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return n$2g("div",{key:"esri-search__input-container",class:w.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(e){const{allSources:t,activeSourceIndex:s}=this.viewModel,{sourceIndex:i}=e,r=e.results.length,n=t.length>1&&s===oe$1.ALL_INDEX;return r&&n?n$2g("div",{key:`esri-search__suggestion-header-${i}`,class:w.menuHeader},this._getSourceName(i)):null}renderSuggestion(e,t){const{_activeMenuItemIndex:s,messages:i}=this,{searchTerm:r}=this.viewModel;if(r){const{text:n}=e,o=n||i.untitledResult,a=S.test(o),u=[];if(a)u.push(n$2g("div",{innerHTML:o}));else {const e=this._splitResult(o,r),t=r.toLowerCase();e.forEach(((e,s)=>{e&&e.length&&(e.toLowerCase()===t?u.push(n$2g("strong",{key:s},e)):u.push(e));}));}const l="suggestion"===this.activeMenu&&s===t;return n$2g("li",{bind:this,id:this._buildId("suggestion-item",t),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===t).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${t}`,"data-suggestion":e,role:"option",class:this.classes(w.menuItem,l?w.menuItemFocus:null)},u)}}renderSource(e){const{activeSourceIndex:t,searchAllEnabled:s}=this.viewModel,i={[w.menuItemActive]:e===t,[w.menuItemFocus]:"source"===this.activeMenu&&e===(s?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},r=s?e+1:e;return n$2g("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",r),"aria-checked":(e===t).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes(w.source,w.menuItem,i)},this._getSourceName(e))}renderNoResultsWarning(e){const{messages:t}=this,s=e?s$22(t.noResultsFoundForValue,{value:`"${e}"`}):t.noResultsFound;return n$2g("div",{key:"esri-search__no_results"},n$2g("div",{class:w.warningMenuHeader},t.noResults),n$2g("div",{class:w.warningMenuText},s))}renderEmptySearchWarning(){const{messages:e}=this;return n$2g("div",{key:"esri-search__empty-search"},n$2g("span",{"aria-hidden":"true",class:w.noticeIcon}),n$2g("span",{class:w.noValueText},e.emptyValue))}renderLocateWarning(){const{messages:e}=this;return n$2g("div",{key:"esri-search__locate-error"},n$2g("span",{"aria-hidden":"true",class:w.noticeIcon}),n$2g("span",{class:w.noValueText},e.locateError))}renderWarning(){var e;const{displayedSearchTerm:t,_locateFailed:s}=this,{viewModel:i}=this;return s?this.renderLocateWarning():null!=(e=i.selectedSuggestion)&&e.location||t?this.renderNoResultsWarning(t):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1;}_buildId(e,t){return `${this.id}-${e}${void 0===t?"":`-${t}`}`}_watchSourceChanges(){const{_handles:e,viewModel:{allSources:t}}=this,s="sources";e.remove(s),t.forEach((t=>e.add(f$1B(t,"name",(()=>this.scheduleRender())),s)));}_handleSourcesMenuToggleClick(){const e="source"===this.activeMenu;var t;(this.activeMenu=e?"none":"source",this.renderNow(),"source"===this.activeMenu)&&(null==(t=this._sourceListNode)||t.focus());}_handleClearButtonClick(){this.viewModel.clear(),this._focus();}_handleSearchButtonClick(){this.search();}_handleSuggestionClick(e){const t=e.currentTarget["data-suggestion"];t&&(this._focus(),this.search(t));}_handleUseCurrentLocationClick(){this._useCurrentLocation();}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:t}=e;this._searchController=e,this.viewModel.searchNearby({signal:t}).catch((()=>{this._locateFailed=!0,this.activeMenu="warning";})).then((()=>{this._searchController=null;}));}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget);}_setSourceFromMenuItem(e){var t;if(!e)return;const s=e["data-source-index"];this.viewModel.activeSourceIndex=s,this._clearActiveMenu(),null==(t=this._sourceMenuButtonNode)||t.focus();}_cancelSuggest(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null);}_cancelSearch(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1;}_handleInputKeyup(e){var s;const i=i$2L(e);if(e.ctrlKey||e.metaKey||"Copy"===i||"ArrowLeft"===i||"ArrowRight"===i||"Shift"===i)return;if("Tab"===i||"Escape"===i||e.shiftKey&&"Tab"===i)return this._cancelSuggest(),void("Escape"===i&&this._clearActiveMenu());const r="Home"===i||"End"===i||"ArrowUp"===i||"ArrowDown"===i;if("Enter"===i&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const n=null==(s=this._suggestionListNode)?void 0:s.getElementsByTagName("li");if(null!=n&&n.length){if("suggestion"!==this.activeMenu&&this._openSuggestionMenu(),r)return e.preventDefault(),this._cancelSuggest(),void this.handleItemNavigation(i,n,this._suggestionListNode);const t=n[this._activeMenuItemIndex];if("Enter"===i&&t){const e=t["data-suggestion"];return void(e?(this._focus(),this.search(e)):t["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest();}handleItemNavigation(e,t,s){const i=this._activeMenuItemIndex;"Home"===e&&(this._activeMenuItemIndex=0),"End"===e&&(this._activeMenuItemIndex=t.length-1),"ArrowUp"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?t.length-1:this._activeMenuItemIndex-1),"ArrowDown"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex===t.length-1?0:this._activeMenuItemIndex+1),i!==this._activeMenuItemIndex&&w$W(t[this._activeMenuItemIndex],s);}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0);}_openSuggestionMenu(){this.activeMenu="suggestion";}_handleInputPaste(e){const t=e.target;this.viewModel.searchTerm!==t.value&&(this.viewModel.searchTerm=t.value),this.viewModel.searchTerm&&this.suggest();}_handleSourceMenuKeydown(e){const s=i$2L(e);if(y$1t(s)){e.preventDefault();const t=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(t);}else "ArrowUp"!==s&&"ArrowDown"!==s&&"End"!==s&&"Home"!==s||e.preventDefault();}_handleSourceMenuKeyup(e){var s;const i=i$2L(e),r="ArrowUp"===i||"ArrowDown"===i||"End"===i||"Home"===i;var n;if(r&&e.preventDefault(),"Escape"===i)return this._clearActiveMenu(),void(null==(n=this._sourceMenuButtonNode)||n.focus());const o=null==(s=this._sourceListNode)?void 0:s.getElementsByTagName("li");return o&&0!==o.length&&r?("source"!==this.activeMenu&&(this.activeMenu="source"),void this.handleItemNavigation(i,o,this._sourceListNode.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e);}_formSubmit(e){e.preventDefault(),-1===this._activeMenuItemIndex&&this.search();}_getSourceName(e){const{messages:t}=this,s=this.viewModel,{allSources:i}=s,r=i.getItemAt(e);return e===oe$1.ALL_INDEX?t.all:r&&r.name||t.untitledSource}_splitResult(e,t){const s=o$1_(t);return e.replace(new RegExp(`(^|)(${s})(|$)`,"ig"),"$1|$2|$3").split("|")}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};e$25([d$1T()],b$2.prototype,"_activeMenuItemIndex",void 0),e$25([d$1T()],b$2.prototype,"displayedSearchTerm",null),e$25([d$1T({readOnly:!0})],b$2.prototype,"inputId",null),e$25([d$1T({readOnly:!0})],b$2.prototype,"suggestionsMenuId",null),e$25([d$1T({readOnly:!0})],b$2.prototype,"sourceMenuId",null),e$25([d$1T({readOnly:!0})],b$2.prototype,"sourceMenuButtonId",null),e$25([d$1T()],b$2.prototype,"activeMenu",void 0),e$25([o$1K("viewModel.activeSource")],b$2.prototype,"activeSource",void 0),e$25([o$1K("viewModel.activeSourceIndex")],b$2.prototype,"activeSourceIndex",void 0),e$25([o$1K("viewModel.allPlaceholder")],b$2.prototype,"allPlaceholder",void 0),e$25([o$1K("viewModel.allSources")],b$2.prototype,"allSources",void 0),e$25([o$1K("viewModel.autoNavigate")],b$2.prototype,"autoNavigate",void 0),e$25([o$1K("viewModel.autoSelect")],b$2.prototype,"autoSelect",void 0),e$25([o$1K("viewModel.defaultSources")],b$2.prototype,"defaultSources",void 0),e$25([d$1T()],b$2.prototype,"disabled",void 0),e$25([o$1K("viewModel.goToOverride")],b$2.prototype,"goToOverride",void 0),e$25([d$1T()],b$2.prototype,"iconClass",void 0),e$25([o$1K("viewModel.includeDefaultSources")],b$2.prototype,"includeDefaultSources",void 0),e$25([d$1T({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b$2.prototype,"label",void 0),e$25([o$1K("viewModel.locationEnabled")],b$2.prototype,"locationEnabled",void 0),e$25([o$1K("viewModel.maxResults")],b$2.prototype,"maxResults",void 0),e$25([o$1K("viewModel.maxSuggestions")],b$2.prototype,"maxSuggestions",void 0),e$25([d$1T(),e$1g("esri/widgets/Search/t9n/Search")],b$2.prototype,"messages",void 0),e$25([d$1T(),e$1g("esri/t9n/common")],b$2.prototype,"messagesCommon",void 0),e$25([o$1K("viewModel.minSuggestCharacters")],b$2.prototype,"minSuggestCharacters",void 0),e$25([o$1K("viewModel.popupEnabled")],b$2.prototype,"popupEnabled",void 0),e$25([o$1K("viewModel.popupTemplate")],b$2.prototype,"popupTemplate",void 0),e$25([o$1K("viewModel.portal")],b$2.prototype,"portal",void 0),e$25([o$1K("viewModel.resultGraphic")],b$2.prototype,"resultGraphic",void 0),e$25([o$1K("viewModel.resultGraphicEnabled")],b$2.prototype,"resultGraphicEnabled",void 0),e$25([o$1K("viewModel.results")],b$2.prototype,"results",void 0),e$25([o$1K("viewModel.searchAllEnabled")],b$2.prototype,"searchAllEnabled",void 0),e$25([o$1K("viewModel.searchTerm")],b$2.prototype,"searchTerm",void 0),e$25([o$1K("viewModel.selectedResult")],b$2.prototype,"selectedResult",void 0),e$25([o$1K("viewModel.sources")],b$2.prototype,"sources",void 0),e$25([o$1K("viewModel.suggestions")],b$2.prototype,"suggestions",void 0),e$25([o$1K("viewModel.suggestionsEnabled")],b$2.prototype,"suggestionsEnabled",void 0),e$25([o$1K("viewModel.view")],b$2.prototype,"view",void 0),e$25([t$1e(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),d$1T({type:oe$1})],b$2.prototype,"viewModel",void 0),e$25([o$1K("viewModel.clear")],b$2.prototype,"clear",null),b$2=e$25([i$2z("esri.widgets.Search")],b$2);const y$2=b$2;

const arcgisSearchCss = "@import url('https://js.arcgis.com/next/esri/themes/light/main.css');";

let ArcGISSearch = class extends HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.searchBlur = createEvent(this, "searchBlur", 7);
    this.searchClear = createEvent(this, "searchClear", 7);
    this.searchComplete = createEvent(this, "searchComplete", 7);
    this.searchFocus = createEvent(this, "searchFocus", 7);
    this.searchStart = createEvent(this, "searchStart", 7);
    this.selectResult = createEvent(this, "selectResult", 7);
    this.suggestComplete = createEvent(this, "suggestComplete", 7);
    this.suggestStart = createEvent(this, "suggestStart", 7);
  }
  validateView(newValue) {
    if (newValue) {
      this.widget.view = newValue;
      if (this.el.parentElement.tagName.toLowerCase() !== 'arcgis-expand') {
        this.widget.view.ui.add(this.widget, this.position);
      }
    }
  }
  componentWillLoad() {
    const search = new y$2({
      container: this.el
    });
    // proxy events
    search.on('search-blur', (e) => this.searchBlur.emit(e));
    search.on('search-clear', (e) => this.searchClear.emit(e));
    search.on('search-complete', (e) => this.searchComplete.emit(e));
    search.on('search-focus', (e) => this.searchFocus.emit(e));
    search.on('search-start', (e) => this.searchStart.emit(e));
    search.on('select-result', (e) => this.selectResult.emit(e));
    search.on('suggest-complete', (e) => this.suggestComplete.emit(e));
    search.on('suggest-start', (e) => this.suggestStart.emit(e));
    this.widget = search;
  }
  get el() { return this; }
  static get watchers() { return {
    "view": ["validateView"]
  }; }
  static get style() { return arcgisSearchCss; }
};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function i$a(i){return i&&"getAtOrigin"in i&&"originOf"in i}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r$1(r){r&&r.writtenProperties&&r.writtenProperties.forEach((r=>{const t=r.target;r.newOrigin&&r.oldOrigin!==r.newOrigin&&i$a(t)&&t.updateOrigin(r.propName,r.newOrigin);}));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const y$1=s$2n.getLogger("esri.networks.Network");let m$3=class extends(l$1i(m$1$)){constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null;}initialize(){this.when().catch((e=>{var r,t;d$1Z(e)||y$1.error("#load()",`Failed to load layer (title: '${null!=(r=this.title)?r:"no title"}', id: '${null!=(t=this.id)?t:"no id"}')`,{error:e});}));}get datasetName(){var e;return null==(e=this.dataElement)?void 0:e.name}get owner(){var e;return null==(e=this.dataElement)?void 0:e.userIdentity}get schemaGeneration(){var e;return null==(e=this.dataElement)?void 0:e.schemaGeneration}get parsedUrl(){const e=this.layerUrl;return e?U$s(e):null}get featureServiceUrl(){const e=this.parsedUrl&&d$V(this.parsedUrl.path);return r$1K(e)?e.url.path:null}get networkServiceUrl(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}get layerId(){const e=this.parsedUrl&&d$V(this.parsedUrl.path);return r$1K(e)?e.sublayer:null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(this.dataElement){const r=this.dataElement.domainNetworks;for(const t of r){for(const r of t.edgeSources?t.edgeSources:[])if(r.sourceId===e)return r.layerId;for(const r of t.junctionSources?t.junctionSources:[])if(r.sourceId===e)return r.layerId}return null}return null}async _fetchLayerMetaData(e,t){const o=await E$v(e,{responseType:"json",query:{f:"json"},...t});this.read(o.data,{origin:"service"});}async _fetchDataElement(e,t,o){if(this.dataElement)return;const s=await E$v(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([t]),f:"json"},...o}).then((e=>{var r;return null==(r=e.data.layerDataElements)?void 0:r[0]}));s&&this.read(s,{origin:"service"});}};e$25([d$1T({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],m$3.prototype,"id",void 0),e$25([d$1T({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],m$3.prototype,"title",void 0),e$25([d$1T({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],m$3.prototype,"layerUrl",void 0),e$25([d$1T({type:Object,json:{origins:{service:{read:!0}},read:!1}})],m$3.prototype,"dataElement",void 0),e$25([d$1T({type:M$A,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],m$3.prototype,"fullExtent",void 0),e$25([d$1T({type:k$w,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],m$3.prototype,"spatialReference",void 0),e$25([d$1T({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],m$3.prototype,"type",void 0),e$25([d$1T({readOnly:!0})],m$3.prototype,"datasetName",null),e$25([d$1T({readOnly:!0})],m$3.prototype,"owner",null),e$25([d$1T({readOnly:!0})],m$3.prototype,"schemaGeneration",null),e$25([d$1T({readOnly:!0})],m$3.prototype,"parsedUrl",null),e$25([d$1T({readOnly:!0})],m$3.prototype,"featureServiceUrl",null),e$25([d$1T({readOnly:!0})],m$3.prototype,"networkServiceUrl",null),e$25([d$1T({readOnly:!0})],m$3.prototype,"layerId",null),m$3=e$25([i$2z("esri.networks.Network")],m$3);const h$2=m$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$8=class extends a$2N{constructor(t){super(t),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null;}};e$25([d$1T({type:[Object],json:{write:!0}})],s$8.prototype,"conditionBarriers",void 0),e$25([d$1T({type:[Object],json:{write:!0}})],s$8.prototype,"outputConditions",void 0),e$25([d$1T({type:[Object],json:{write:!0}})],s$8.prototype,"functions",void 0),e$25([d$1T({type:[Object],json:{write:!0}})],s$8.prototype,"functionBarriers",void 0),e$25([d$1T({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],s$8.prototype,"traversabilityScope",void 0),e$25([d$1T({type:String,json:{write:!0}})],s$8.prototype,"shortestPathNetworkAttributeName",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],s$8.prototype,"includeBarriers",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],s$8.prototype,"validateConsistency",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],s$8.prototype,"ignoreBarriersAtStartingPoints",void 0),s$8=e$25([i$2z("esri.networks.support.TraceConfiguration")],s$8);const i$9=s$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const t$2=new o$1J({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork","subnetwork controllers":"subnetwork-controllers",loops:"loops",isolation:"isolation"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$8=class extends i$9{constructor(t){super(t),this.filterBarriers=[],this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.tierName=null,this.validateLocatability=null;}};e$25([d$1T({type:[Object],json:{write:!0}})],i$8.prototype,"filterBarriers",void 0),e$25([d$1T({type:String,json:{write:!0}})],i$8.prototype,"domainNetworkName",void 0),e$25([d$1T({type:String,json:{write:!0}})],i$8.prototype,"filterBitsetNetworkAttributeName",void 0),e$25([d$1T({type:[Object],json:{write:!0}})],i$8.prototype,"filterFunctionBarriers",void 0),e$25([d$1T({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],i$8.prototype,"filterScope",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],i$8.prototype,"includeContainers",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],i$8.prototype,"includeContent",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],i$8.prototype,"includeIsolated",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],i$8.prototype,"includeStructures",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],i$8.prototype,"includeUpToFirstSpatialContainer",void 0),e$25([d$1T({type:Object,json:{write:!0}})],i$8.prototype,"nearestNeighbor",void 0),e$25([d$1T({type:[Object],json:{write:!0}})],i$8.prototype,"outputFilterCategories",void 0),e$25([d$1T({type:[Object],json:{write:!0}})],i$8.prototype,"outputFilters",void 0),e$25([d$1T({type:[Object],json:{write:!0}})],i$8.prototype,"propagators",void 0),e$25([d$1T({type:String,json:{write:!0}})],i$8.prototype,"subnetworkName",void 0),e$25([d$1T({type:String,json:{write:!0}})],i$8.prototype,"targetTierName",void 0),e$25([d$1T({type:String,json:{write:!0}})],i$8.prototype,"tierName",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],i$8.prototype,"validateLocatability",void 0),i$8=e$25([i$2z("esri.networks.support.UNTraceConfiguration")],i$8);const s$7=i$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let p$8=class extends O$d{constructor(r){super(r),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null;}readTraceConfiguration(r,e){return void 0!==r.tierName?s$7.fromJSON(r):i$9.fromJSON(r)}};e$25([d$1T({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"}}},read:!1}})],p$8.prototype,"globalId",void 0),e$25([d$1T({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],p$8.prototype,"title",void 0),e$25([d$1T({type:i$9,json:{origins:{service:{read:!0}},read:!1}})],p$8.prototype,"traceConfiguration",void 0),e$25([o$1v("service","traceConfiguration")],p$8.prototype,"readTraceConfiguration",null),e$25([d$1T({type:Date,json:{origins:{service:{read:!0}},read:!1}})],p$8.prototype,"creationDate",void 0),e$25([d$1T({type:String,json:{origins:{service:{read:!0}},read:!1}})],p$8.prototype,"creator",void 0),e$25([d$1T({type:String,json:{origins:{service:{read:!0}},read:!1}})],p$8.prototype,"description",void 0),e$25([d$1T({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"}}},read:!1}})],p$8.prototype,"minStartingPoints",void 0),e$25([d$1T({type:[Object],json:{origins:{service:{read:!0}},read:!1}})],p$8.prototype,"resultTypes",void 0),e$25([d$1T({type:[String],json:{origins:{service:{read:!0}},read:!1}})],p$8.prototype,"tags",void 0),e$25([d$1T({type:t$2.apiValues,json:{type:t$2.jsonValues,origins:{service:{read:t$2.read}},read:!1}})],p$8.prototype,"traceType",void 0),p$8=e$25([i$2z("esri.networks.support.NamedTraceConfiguration")],p$8);const c$a=p$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$6=class extends a$2N{constructor(r){super(r),this.id=null,this.name=null;}};e$25([d$1T({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],s$6.prototype,"id",void 0),e$25([d$1T({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],s$6.prototype,"name",void 0),e$25([d$1T({type:Boolean,json:{write:!0}})],s$6.prototype,"isUpstreamTerminal",void 0),s$6=e$25([i$2z("esri.networks.support.Terminal")],s$6);const p$7=s$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a$7=new o$1J({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let n$6=class extends a$2N{constructor(r){super(r),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null;}};e$25([d$1T({type:String,json:{write:!0}})],n$6.prototype,"defaultConfiguration",void 0),e$25([d$1T({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],n$6.prototype,"id",void 0),e$25([d$1T({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],n$6.prototype,"name",void 0),e$25([d$1T({type:[p$7],json:{write:!0}})],n$6.prototype,"terminals",void 0),e$25([d$1T({type:a$7.apiValues,json:{type:a$7.jsonValues,read:a$7.read,write:a$7.write}})],n$6.prototype,"traversabilityModel",void 0),n$6=e$25([i$2z("esri.networks.support.TerminalConfiguration")],n$6);const p$6=n$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$5=class extends h$2{constructor(r){super(r),this.sharedNamedTraceConfigurations=[],this.type="utility";}get serviceTerritoryFeatureLayerId(){var r;return null==(r=this.dataElement)?void 0:r.serviceTerritoryFeatureLayerId}get terminalConfigurations(){var r;return (null==(r=this.dataElement)?void 0:r.terminalConfigurations.map((r=>p$6.fromJSON(r))))||[]}get domainNetworkNames(){var r;return (null==(r=this.dataElement)?void 0:r.domainNetworks.map((r=>r.domainNetworkName)))||[]}async load(r){return this.addResolvingPromise(super.load(r)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(r)),this}getTerminalConfiguration(r){let e=null,t=null;const o=r.layer;let a=null;if("feature"!==(null==o?void 0:o.type))return null;if(a=o.layerId,null===a)return null;const n=r.attributes;if(null==n)return null;for(const i of Object.keys(n))"ASSETGROUP"===i.toUpperCase()&&(e=r.getAttribute(i)),"ASSETTYPE"===i.toUpperCase()&&(t=r.getAttribute(i));if(!this.dataElement)return null;let s=null;const l=this.dataElement.domainNetworks;for(const i of l){var u;const r=null==(u=i.junctionSources)?void 0:u.find((r=>r.layerId===a));if(r){var d;const o=null==(d=r.assetGroups)?void 0:d.find((r=>r.assetGroupCode===e));if(o){var m;const r=null==(m=o.assetTypes)?void 0:m.find((r=>r.assetTypeCode===t));if(r){s=r.terminalConfigurationId;break}}}}if(null!=s){const r=this.dataElement.terminalConfigurations,e=null==r?void 0:r.find((r=>r.terminalConfigurationId===s));return e?p$6.fromJSON(e):null}return null}getTierNames(r){var e;const t=null==(e=this.dataElement)?void 0:e.domainNetworks.find((e=>e.domainNetworkName===r));return (null==t?void 0:t.tiers.map((r=>r.name)))||[]}async _loadNamedTraceConfigurationsFromNetwork(r){var e;if(0===(null==(e=this.sharedNamedTraceConfigurations)?void 0:e.length))return;const t=this.sharedNamedTraceConfigurations.map((r=>r.globalId)),o=await this._fetchTraceConfigData(this.networkServiceUrl,t,r);for(const a of this.sharedNamedTraceConfigurations){const r=null==o?void 0:o.find((r=>r.globalId===a.globalId));r&&a.read(r,{origin:"service"});}}_fetchTraceConfigData(r,t,o){return E$v(`${r}/traceConfigurations/query`,{responseType:"json",query:{globalIds:JSON.stringify(t),f:"json"},...o}).then((r=>r.data.traceConfigurations))}};e$25([d$1T({type:[c$a],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],s$5.prototype,"sharedNamedTraceConfigurations",void 0),e$25([d$1T({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],s$5.prototype,"type",void 0),e$25([d$1T({readOnly:!0})],s$5.prototype,"serviceTerritoryFeatureLayerId",null),e$25([d$1T({readOnly:!0})],s$5.prototype,"terminalConfigurations",null),e$25([d$1T({readOnly:!0})],s$5.prototype,"domainNetworkNames",null),s$5=e$25([i$2z("esri.networks.UtilityNetwork")],s$5);const l$4=s$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e$2(e,n){if(!t$1(e,n)){const t=e.typeKeywords;t?t.push(n):e.typeKeywords=[n];}}function t$1(e,t){return !!e.typeKeywords&&e.typeKeywords.indexOf(t)>-1}function n$5(e,t){const n=e.typeKeywords;if(n){const e=n.indexOf(t);e>-1&&n.splice(e,1);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$4=class extends a$2N{constructor(r){super(r),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null;}};e$25([d$1T({type:String,json:{write:!0}})],s$4.prototype,"facilityIdField",void 0),e$25([d$1T({type:String,json:{write:!0}})],s$4.prototype,"layerId",void 0),e$25([d$1T({type:String,json:{write:!0}})],s$4.prototype,"nameField",void 0),e$25([d$1T({type:String,json:{write:!0}})],s$4.prototype,"siteIdField",void 0),e$25([d$1T({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],s$4.prototype,"sublayerId",void 0),s$4=e$25([i$2z("esri.layers.support.FacilityLayerInfo")],s$4);const i$7=s$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let i$6=class extends a$2N{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null;}};e$25([d$1T({type:String,json:{write:!0}})],i$6.prototype,"facilityIdField",void 0),e$25([d$1T({type:String,json:{write:!0}})],i$6.prototype,"layerId",void 0),e$25([d$1T({type:String,json:{write:!0}})],i$6.prototype,"levelIdField",void 0),e$25([d$1T({type:String,json:{write:!0}})],i$6.prototype,"levelNumberField",void 0),e$25([d$1T({type:String,json:{write:!0}})],i$6.prototype,"longNameField",void 0),e$25([d$1T({type:String,json:{write:!0}})],i$6.prototype,"shortNameField",void 0),e$25([d$1T({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],i$6.prototype,"sublayerId",void 0),e$25([d$1T({type:String,json:{write:!0}})],i$6.prototype,"verticalOrderField",void 0),i$6=e$25([i$2z("esri.layers.support.LevelLayerInfo")],i$6);const s$3=i$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let s$2=class extends a$2N{constructor(r){super(r),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null;}};e$25([d$1T({type:String,json:{write:!0}})],s$2.prototype,"layerId",void 0),e$25([d$1T({type:String,json:{write:!0}})],s$2.prototype,"nameField",void 0),e$25([d$1T({type:String,json:{write:!0}})],s$2.prototype,"siteIdField",void 0),e$25([d$1T({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],s$2.prototype,"sublayerId",void 0),s$2=e$25([i$2z("esri.layers.support.SiteLayerInfo")],s$2);const i$5=s$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
let a$6=class extends a$2N{constructor(r){super(r),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null;}};e$25([d$1T({type:s$3,json:{write:!0}})],a$6.prototype,"levelLayer",void 0),e$25([d$1T({type:i$7,json:{write:!0}})],a$6.prototype,"facilityLayer",void 0),e$25([d$1T({type:i$5,json:{write:!0}})],a$6.prototype,"siteLayer",void 0),a$6=e$25([i$2z("esri.support.MapFloorInfo")],a$6);const l$3=a$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s$1;let a$5=s$1=class extends a$2N{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null;}clone(){return new s$1(l$2w({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};e$25([d$1T({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],a$5.prototype,"activeRange",void 0),e$25([d$1T({type:[Number],json:{write:!0}})],a$5.prototype,"currentRangeExtent",void 0),e$25([d$1T({type:[Number],json:{write:!0}})],a$5.prototype,"fullRangeExtent",void 0),a$5=s$1=e$25([i$2z("esri.webdoc.RangeInfo")],a$5);const c$9=a$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var s;let n$4=s=class extends a$2N{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null;}clone(){return new s(l$2w({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};e$25([d$1T({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],n$4.prototype,"enabled",void 0),e$25([d$1T({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],n$4.prototype,"longNames",void 0),e$25([d$1T({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],n$4.prototype,"minimized",void 0),e$25([d$1T({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],n$4.prototype,"pinnedLevels",void 0),e$25([d$1T({type:String,json:{read:{source:"site"},write:{target:"site"}}})],n$4.prototype,"site",void 0),e$25([d$1T({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],n$4.prototype,"facility",void 0),e$25([d$1T({type:String,json:{read:{source:"level"},write:{target:"level"}}})],n$4.prototype,"level",void 0),n$4=s=e$25([i$2z("esri.webdoc.widgets.FloorFilter")],n$4);const l$2=n$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var i$4;const n$3=new o$1J({slider:"slider",picker:"picker"});let p$5=i$4=class extends a$2N{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null;}clone(){return new i$4({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};e$25([d$1T({type:n$3.apiValues,nonNullable:!0,json:{type:n$3.jsonValues,default:null,read:{reader:n$3.read},write:{isRequired:!0,writer:n$3.write}}})],p$5.prototype,"interactionMode",void 0),e$25([d$1T({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=null!=this.stopInterval;return {enabled:!e,isRequired:!e}}}}})],p$5.prototype,"numStops",void 0),e$25([d$1T({type:Number,json:{write:{overridePolicy(){return {isRequired:null==this.numStops}}}}})],p$5.prototype,"stopInterval",void 0),p$5=i$4=e$25([i$2z("esri.webdoc.widgets.Range")],p$5);const a$4=p$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$2;let c$8=m$2=class extends a$2N{constructor(t){super(t),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null;}readCurrentTimeExtent(t){if(!t)return;const r=null!=t[0]?new Date(t[0]):null,o=null!=t[1]?new Date(t[1]):null;return new y$F({start:r,end:o})}writeCurrentTimeExtent(t,e,r){t&&o$1$(r,[r$1K(t.start)?t.start.getTime():null,r$1K(t.end)?t.end.getTime():null],e);}readFullTimeExtent(t,r){const o=r.properties;if(!o)return;const s=null!=o.endTime?new Date(o.endTime):null,n=null!=o.startTime?new Date(o.startTime):null;return new y$F({start:n,end:s})}writeFullTimeExtent(t,e){if(!t)return;const r=e.properties=e.properties||{},o=t.end,s=t.start;o&&(r.endTime=r$1K(o)?o.getTime():null),s&&(r.startTime=r$1K(s)?s.getTime():null);}readStopInterval(t,e,o){return t?l$15.fromJSON({value:t.interval,unit:t.units},o):null}writeStopInterval(t,e,r,o){if(!t)return;const s=t.toJSON(o);o$1$(r,{interval:s.value,units:s.unit},e);}readStops(t){return t&&t.length?t.map((t=>new Date(t))):null}writeStops(t,e,r){t&&t.length&&o$1$(r,t.map((t=>t.getTime())),e);}clone(){return new m$2(l$2w({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};e$25([d$1T({type:y$F,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],c$8.prototype,"currentTimeExtent",void 0),e$25([o$1v("currentTimeExtent")],c$8.prototype,"readCurrentTimeExtent",null),e$25([r$1m("currentTimeExtent")],c$8.prototype,"writeCurrentTimeExtent",null),e$25([d$1T({type:y$F,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],c$8.prototype,"fullTimeExtent",void 0),e$25([o$1v("fullTimeExtent")],c$8.prototype,"readFullTimeExtent",null),e$25([r$1m("fullTimeExtent")],c$8.prototype,"writeFullTimeExtent",null),e$25([d$1T({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],c$8.prototype,"loop",void 0),e$25([d$1T({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var t;const e=!!this.stopInterval,r=!(null==(t=this.stops)||!t.length),o=!(e||r);return {enabled:o,isRequired:o}}}}})],c$8.prototype,"numStops",void 0),e$25([d$1T({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],c$8.prototype,"numThumbs",void 0),e$25([d$1T({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],c$8.prototype,"stopDelay",void 0),e$25([d$1T({type:l$15,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){var t;const e=null!=this.numStops,r=!(null==(t=this.stops)||!t.length);return {enabled:!r,isRequired:!(e||r)}}}}})],c$8.prototype,"stopInterval",void 0),e$25([o$1v("stopInterval")],c$8.prototype,"readStopInterval",null),e$25([r$1m("stopInterval")],c$8.prototype,"writeStopInterval",null),e$25([d$1T({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return {isRequired:null==this.numStops&&!this.stopInterval}}}}})],c$8.prototype,"stops",void 0),e$25([o$1v("stops")],c$8.prototype,"readStops",null),e$25([r$1m("stops")],c$8.prototype,"writeStops",null),c$8=m$2=e$25([i$2z("esri.webdoc.widgets.TimeSlider")],c$8);const d=c$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var m$1;let c$7=m$1=class extends a$2N{constructor(r){super(r),this.range=null,this.timeSlider=null,this.floorFilter=null;}clone(){return new m$1(l$2w({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};e$25([d$1T({type:a$4,json:{write:!0}})],c$7.prototype,"range",void 0),e$25([d$1T({type:d,json:{write:!0}})],c$7.prototype,"timeSlider",void 0),e$25([d$1T({type:l$2,json:{write:!0}})],c$7.prototype,"floorFilter",void 0),c$7=m$1=e$25([i$2z("esri.webdoc.Widgets")],c$7);const n$2=c$7;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h$1={width:600,height:400},t=1.5;function i$3(i,e){e=e||h$1;let{width:d,height:n}=e;const g=d/n;return g<t?n=d/t:g>t&&(d=n*t),d>i.width&&(n*=i.width/d,d=i.width),n>i.height&&(d*=i.height/n,n=i.height),{width:Math.round(d),height:Math.round(n)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n$1(n){return {enabled:!(null==n||!n.length)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$6;let a$3=c$6=class extends a$2N{constructor(r){super(r),this.exactMatch=!1,this.name=null,this.type=null;}clone(){return new c$6({exactMatch:this.exactMatch,type:this.type,name:this.name})}};e$25([d$1T({type:Boolean,json:{write:!0}})],a$3.prototype,"exactMatch",void 0),e$25([d$1T({type:String,json:{write:!0}})],a$3.prototype,"name",void 0),e$25([r$12(i$19)],a$3.prototype,"type",void 0),a$3=c$6=e$25([i$2z("esri.webdoc.applicationProperties.SearchLayerField")],a$3);const i$2=a$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$5;let a$2=c$5=class extends a$2N{constructor(r){super(r),this.field=null,this.id=null,this.subLayer=null;}clone(){return new c$5(l$2w({field:this.field,id:this.id,subLayer:this.subLayer}))}};e$25([d$1T({type:i$2,json:{write:{isRequired:!0}}})],a$2.prototype,"field",void 0),e$25([d$1T({type:String,json:{write:{isRequired:!0}}})],a$2.prototype,"id",void 0),e$25([d$1T({type:S$J,json:{write:!0}})],a$2.prototype,"subLayer",void 0),a$2=c$5=e$25([i$2z("esri.webdoc.applicationProperties.SearchLayer")],a$2);const u$1=a$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c$4;let a$1=c$4=class extends a$2N{constructor(r){super(r),this.exactMatch=!1,this.name=null,this.type=null;}clone(){return new c$4({exactMatch:this.exactMatch,type:this.type,name:this.name})}};e$25([d$1T({type:Boolean,json:{write:!0}})],a$1.prototype,"exactMatch",void 0),e$25([d$1T({type:String,json:{write:!0}})],a$1.prototype,"name",void 0),e$25([r$12(i$19)],a$1.prototype,"type",void 0),a$1=c$4=e$25([i$2z("esri.webdoc.applicationProperties.SearchTableField")],a$1);const i$1=a$1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$4;let c$3=p$4=class extends a$2N{constructor(r){super(r),this.field=null,this.id=null;}clone(){return new p$4(l$2w({field:this.field,id:this.id}))}};e$25([d$1T({type:i$1,json:{write:{isRequired:!0}}})],c$3.prototype,"field",void 0),e$25([d$1T({type:String,json:{write:{isRequired:!0}}})],c$3.prototype,"id",void 0),c$3=p$4=e$25([i$2z("esri.webdoc.applicationProperties.SearchTable")],c$3);const l$1=c$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$3;const b$1=S$I.ofType(u$1),h=S$I.ofType(l$1);let u=p$3=class extends a$2N{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new b$1,this.tables=new h;}readAddressSearchEnabled(e){return !e}writeAddressSearchEnabled(e,r,o){r[o]=!e;}clone(){return new p$3(l$2w({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};e$25([d$1T({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],u.prototype,"addressSearchEnabled",void 0),e$25([o$1v("addressSearchEnabled")],u.prototype,"readAddressSearchEnabled",null),e$25([r$1m("addressSearchEnabled")],u.prototype,"writeAddressSearchEnabled",null),e$25([d$1T({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],u.prototype,"enabled",void 0),e$25([d$1T({type:String,json:{write:!0}})],u.prototype,"hintText",void 0),e$25([d$1T({type:b$1,json:{write:{overridePolicy:n$1},origins:{"web-scene":{write:{isRequired:!0}}}}})],u.prototype,"layers",void 0),e$25([d$1T({type:h,json:{read:!0,write:{overridePolicy:n$1}}})],u.prototype,"tables",void 0),u=p$3=e$25([i$2z("esri.webdoc.applicationProperties.Search")],u);const y=u;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$2;let a=p$2=class extends a$2N{constructor(r){super(r),this.search=null;}clone(){return new p$2(l$2w({search:this.search}))}};e$25([d$1T({type:y,json:{write:!0}})],a.prototype,"search",void 0),a=p$2=e$25([i$2z("esri.webdoc.applicationProperties.Viewing")],a);const i=a;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var p$1;let n=p$1=class extends a$2N{constructor(o){super(o),this.editing=null,this.offline=null,this.viewing=null;}clone(){return new p$1(l$2w({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};e$25([d$1T({json:{write:!0}})],n.prototype,"editing",void 0),e$25([d$1T({json:{write:!0}})],n.prototype,"offline",void 0),e$25([d$1T({type:i,json:{write:!0}})],n.prototype,"viewing",void 0),n=p$1=e$25([i$2z("esri.webmap.ApplicationProperties")],n);const c$2=n;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var e$1;let p=e$1=class extends a$2N{constructor(){super(...arguments),this.url="";}destroy(){this.url="";}clone(){return new e$1({url:this.url})}};e$25([d$1T({type:String,json:{write:{isRequired:!0}}})],p.prototype,"url",void 0),p=e$1=e$25([i$2z("esri.webdoc.support.Thumbnail")],p);const c$1=p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var j;const b="esri.webmap.Bookmark",v=s$2n.getLogger(b);let g=j=class extends(r$10(a$2N)){constructor(e){super(e),this.name=null,this.thumbnail=new c$1;}set extent(e){r$1G(v,"extent",{replacement:"viewpoint",version:"4.17"}),this._set("viewpoint",new u$m({targetGeometry:e.clone()})),this._set("extent",e);}castThumbnail(e){return "string"==typeof e?new c$1({url:e}):b$14(c$1,e)}set viewpoint(e){const{targetGeometry:t,scale:o}=e;r$1K(t)&&("extent"===t.type?this._set("extent",t.clone()):"point"===t.type&&t$1T(o)&&v.warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e)),this._set("viewpoint",e);}readViewpoint(e,o){const{extent:r,viewpoint:i}=o;return u$m.fromJSON(i||{targetGeometry:r})}writeViewpoint(e,t,o,i){if(!e)return;const{targetGeometry:n}=e;if(r$1K(n)&&"extent"!==n.type){const e="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";null!=i&&i.messages?i.messages.push(new s$2l("property:unsupported",e)):v.error(e);}else t[o]=e.toJSON();}clone(){return new j(l$2w({name:this.name,thumbnail:this.thumbnail,viewpoint:this.viewpoint}))}};e$25([d$1T({type:M$A,nonNullable:!0,json:{read:!1,write:{isRequired:!0}}})],g.prototype,"extent",null),e$25([d$1T({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],g.prototype,"name",void 0),e$25([d$1T({type:c$1,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],g.prototype,"thumbnail",void 0),e$25([c$35("thumbnail")],g.prototype,"castThumbnail",null),e$25([d$1T({type:u$m,nonNullable:!0,json:{write:!0}})],g.prototype,"viewpoint",null),e$25([o$1v("viewpoint",["extent","viewpoint"])],g.prototype,"readViewpoint",null),e$25([r$1m("viewpoint")],g.prototype,"writeViewpoint",null),g=j=e$25([i$2z(b)],g);const x=g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var c;let l=c=class extends p$3a{constructor(o){super(o),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.viewpoint=null;}clone(){return new c(l$2w({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))}};e$25([d$1T({type:m$9})],l.prototype,"background",void 0),e$25([d$1T({type:c$9})],l.prototype,"rangeInfo",void 0),e$25([d$1T({type:k$w})],l.prototype,"spatialReference",void 0),e$25([d$1T({type:u$m})],l.prototype,"viewpoint",void 0),l=c=e$25([i$2z("esri.webmap.InitialViewProperties")],l);const m=l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class r{constructor(t,r,o=""){this.major=t,this.minor=r,this._context=o;}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}since(t,r){return !this.lessThan(t,r)}validate(r){if(this.major!==r.major){const o=this._context&&this._context+":",s=this._context&&this._context+" ";throw new s$2l(o+"unsupported-version",`Required major ${s}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:r})}}clone(){return new r(this.major,this.minor,this._context)}static parse(o,s=""){const[e,i]=o.split("."),n=/^\s*\d+\s*$/;if(!e||!e.match||!e.match(n)){throw new s$2l((s&&s+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:o})}if(!i||!i.match||!i.match(n)){throw new s$2l((s&&s+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:o})}const a=parseInt(e,10),h=parseInt(i,10);return new r(a,h,s)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e extends r{constructor(s,e){super(s,e,"webmap");}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const X=new e(2,23),Y="Web Map",Z=S$I.ofType(x),ee=S$I.ofType(l$4),te=s$2n.getLogger("esri.WebMap"),re=new Map;re.set("image/jpeg","jpeg"),re.set("image/jpg","jpg"),re.set("image/png","png"),re.set("image/gif","gif");const ie="ArcGIS Pro",oe="ArcGIS API for JavaScript",ae="CollectorDisabled",se="Collector",ne="Data Editing",le="OfflineDisabled",pe="Offline",me="Workforce Project",ue="Workforce Worker",he="Workforce Dispatcher",de="Offline Map Areas",ce="FieldMapsDisabled",ye="DeveloperBasemap",we=["NatGeo_World_Map","Ocean_Basemap","USA_Topo_Maps","World_Imagery","World_Street_Map","World_Terrain_Base","World_Topo_Map","World_Hillshade","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Reference/World_Boundaries_and_Places","Reference/World_Reference_Overlay","Reference/World_Transportation"].map((e=>e.toLowerCase()));let fe=class extends(l$1i(m$1$.LoadableMixin(n$2A(j$8)))){constructor(e){super(e),this.applicationProperties=null,this.bookmarks=new Z,this.floorInfo=null,this.initialViewProperties=new m,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.utilityNetworks=null,this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1;}destroy(){const e=this.portalItem;this.portalItem=null,null==e||e.destroy();}initialize(){if(this.when().catch((e=>{te.error("#load()","Failed to load web map",e);})),this.resourceInfo){let t;try{t=this._validateJSON(this.resourceInfo);}catch(e){return void this.addResolvingPromise(Promise.reject(e))}this.read(t);}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e);}writeAuthoringApp(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp=oe;}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e);}writeAuthoringAppVersion(e,r){e&&this._isAuthoringAppVersionSetByUser?r.authoringAppVersion=e:r.authoringAppVersion=a$36;}readInitialViewProperties(e$1,t){var r;const o=new m;t.background&&(o.background=m$9.fromJSON(t.background));const a=null==(r=t.initialState)?void 0:r.viewpoint;if(a){if(a.rotation){e.parse(t.version||"","webmap").lessThan(2,20)&&t.authoringApp===ie&&(a.rotation*=-1);}o.viewpoint=u$m.fromJSON(a);}return t.mapRangeInfo&&(o.rangeInfo=c$9.fromJSON(t.mapRangeInfo)),t.spatialReference&&(o.spatialReference=k$w.fromJSON(t.spatialReference)),o}writeInitialViewProperties(e,t,r,i){if(!e)return;const o=e.background;o&&o.color&&(t.background=o.write({},i)),e.viewpoint&&(t.initialState={viewpoint:e.viewpoint.write({},i)}),e.rangeInfo&&(t.mapRangeInfo=e.rangeInfo.toJSON(i)),e.spatialReference&&(t.spatialReference=e.spatialReference.write({},i));}writeLayers(e,t,r,i){t[r]=this._writeLayers(e,i,"operational-layers");}readSourceVersion(e$1,t){const[r,i]=t.version.split(".");return new e(parseInt(r,10),parseInt(i,10))}writeSourceVersion(e,t,r){t[r]=`${X.major}.${X.minor}`;}writeTables(e,t,r,i){const o=this._writeLayers(e,i,"tables");o.length&&(t[r]=o);}get thumbnailUrl(){return this.portalItem&&this.portalItem.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride();}load(e){return this.addResolvingPromise(this._loadFromSource()),Promise.resolve(this)}loadAll(){return n$2r(this,(e=>{e(this.ground,this.basemap,this.layers,this.tables);}))}read(e,t){t={...t,origin:"web-map"};const r=this._getAuthoringPropsState();d$1G(this,e,(t=>super.read(e,t)),t),this._restoreAuthoringPropsFromState(r);}write(e,t){if("loaded"!==this.loadStatus){const e=new s$2l("webmap:not-loaded","Web map must be loaded before it can be serialized");throw te.error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),e}return this._removeDanglingLayerRefs(),t={...t,origin:"web-map",restrictedWebMapWriting:!0,webmap:this},super.write(e,t)}async save(e){e=e||{},this._validateItem(),await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),this._validateMap();const t=this.portalItem,r={origin:"web-map",messages:[],writtenProperties:[],url:t.itemUrl&&U$s(t.itemUrl),portal:t.portal||B$i.getDefault()},i=this.write({},r);return this._validateJSONForWriting(r,e),await this._updateItemProperties(t),await this._updateItem(t,i,r),await this._updateItemThumbnail(),t}async saveAs(e,t){t=t||{};const r=this._getPortalItem(e);await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),this._validateMap();const i={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:r.portal},o=this.write({},i);this._validateJSONForWriting(i,t),await this._updateItemPropertiesForSaveAs(r);const a=this._getThumbnailState();return await this._createItem(r,o,i,t),this._restoreThumbnailFromState(a),await this._updateItemThumbnail(),r}async updateFrom(e,t){const r=this._updateFromInternal(e,t);this._updateFromPromise=r,await r;r===this._updateFromPromise&&(this._updateFromPromise=null);}getLayerJSONFromResourceInfo(e){var t,r,i,a;const s=this.resourceInfo;return this._collectAllLayersJSON(M$H([null==s||null==(t=s.baseMap)?void 0:t.baseMapLayers,null==s?void 0:s.operationalLayers,null==(r=this.basemap)||null==(i=r.resourceInfo)||null==(a=i.data)?void 0:a.baseMapLayers])).find((t=>t.id===e.id))}_collectAllLayersJSON(e){return e.reduce(((e,t)=>(e.push(t),"GroupLayer"===t.layerType&&(e=e.concat(this._collectAllLayersJSON(t.layers||[]))),e)),[])}_writeLayers(e,t,r){t={...t,layerContainerType:r};return e.map((e=>e$23(y$1n(e,"tables"===r?null:this.getLayerJSONFromResourceInfo(e),t)))).filter(Boolean).toArray()}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve(null)}_loadFromItem(e){return e.load().catch((e=>{throw new s$2l("webmap:load-portal-item","Failed to load portal item",{error:e})})).then((()=>{if("Web Map"!==e.type)throw new s$2l("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:e.type})})).then((()=>e.fetchData())).then((t=>(this.resourceInfo=t,this._readAndLoadFromJSON(t,{origin:"web-map",portal:e.portal||B$i.getDefault()})))).then((()=>this._computeInitialViewpoint()))}_readAndLoadFromJSON(e,t){const r=this._validateJSON(e);return this.read(r,t),this._loadFromJSON(r,t)}_validateJSON(e$1){const t=e.parse(e$1.version||"","webmap");return X.validate(t),e$1.version=`${t.major}.${t.minor}`,e$1}_loadFromJSON(e,t){const r={context:{...t,layerContainerType:"operational-layers"}};return this.portalItem&&(r.context.portal=this.portalItem.portal||B$i.getDefault()),import('./layersCreator.js').then((({populateOperationalLayers:t})=>{const i=[],o=e.operationalLayers;o&&o.length&&i.push(t(this.layers,o,r));const a={...r,context:{...r.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},s=e.tables;return s&&s.length&&i.push(t(this.tables,s,a)),T$s(i).then((()=>{}))}))}async _computeInitialViewpoint(){var e,t;let r=this.initialViewProperties;if(null==(e=r)||null==(t=e.viewpoint)?void 0:t.targetGeometry)return;const o=await this._getExtentFromItem();o&&(r=r?r.clone():new m,r.viewpoint=new u$m,r.viewpoint.targetGeometry=o,this.initialViewProperties=r);}async _getExtentFromItem(){var e,t;const r=null==(e=this.initialViewProperties)?void 0:e.spatialReference,i=null==(t=this.portalItem)?void 0:t.extent;if(r&&i){if(r.isWGS84)return i.clone();if(r.isWebMercator)return R$s(i);return (await import('./geometryServiceUtils.js')).getGeometryServiceURL(this.portalItem).then((e=>{const t=new a$9;return t.geometries=[i],t.outSpatialReference=r,n$a(e,t)})).then((e=>e[0])).catch((e=>(te.error("Error projecting item's extent:",e),null)))}return null}_removeDanglingLayerRefs(){const e=this.applicationProperties,t=e&&e.viewing&&e.viewing.search,r=e=>!!this.allLayers.find((t=>t.id===e));t&&t.layers&&(t.layers=t.layers.filter((e=>r(e.id)))),t&&t.tables&&(t.tables=t.tables.filter((e=>!!this.tables.find((t=>t.id===e.id)))));const i=e&&e.editing&&e.editing.locationTracking;i&&i.info&&!r(i.info.layerId)&&(e.editing=null);const o=this.presentation&&this.presentation.slides;o&&o.forEach((e=>{e.visibleLayers&&(e.visibleLayers=e.visibleLayers.filter((e=>r(e.id))));}));}_validateMap(){if(!this.basemap||!this.basemap.baseLayers.length)throw new s$2l("webmap:save","Map does not have a valid basemap with a base layer.")}_validateItem(){if(!this.portalItem)throw te.error("save: requires the portalItem property to be set"),new s$2l("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem);}_validateItemType(e){if(e.type!==Y)throw new s$2l("webmap:portal-item-wrong-type",`Portal item needs to have type "${Y}"`)}_loadLayerContainers(){const e=[];return this.basemap&&e.push(this.basemap.load()),this.ground&&e.push(this.ground.load()),T$s(e).then((()=>{}))}async _beforeSave(){const e=[];for(const t of this.allLayers)if("beforeSave"in t&&"function"==typeof t.beforeSave){const r=t.beforeSave();r&&e.push(r);}await T$s(e);}_loadAllLayers(){const e=this._getAllLayersAndTables().map((e=>e.load()));return T$s(e).then((()=>{}))}_getAllLayersAndTables(){return this.allLayers.concat(this.allTables)}_validateJSONForWriting(e,t){let r=e.messages.filter((e=>"error"===e.type)).map((e=>new s$2l(e.name,e.message,e.details)));if(t.ignoreUnsupported&&(r=r.filter((e=>"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name))),r.length>0)throw new s$2l("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:r})}async _updateItemProperties(e){e.extent=await this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry),await this._updateTypeKeywords(e);}async _updateItemPropertiesForSaveAs(e){n$5(e,ae),n$5(e,le),n$5(e,me),n$5(e,ue),n$5(e,he),n$5(e,de),n$5(e,ce),await this._updateItemProperties(e);}async _getWGS84Extent(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return this._projectToWGS84(r)}async _projectToWGS84(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return j$M(e);const r=await import('./geometryServiceUtils.js'),i=await r.getGeometryServiceURL(this.portalItem),o=new a$9;o.geometries=[e],o.outSpatialReference=k$w.WGS84;return (await n$a(i,o))[0]}async _updateTypeKeywords(e){e$2(e,oe),await this._loadAllLayers(),this._evalCollectorKeyword(e),this._evalDataEditingKeyword(e),this._evalOfflineKeyword(e),this._evalDeveloperBasemapKeyword(e),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)));}_evalCollectorKeyword(e){t$1(e,ae)||t$1(e,me)||t$1(e,ue)||t$1(e,he)||!this._hasEditableFeatureLayer()?n$5(e,se):e$2(e,se);}_evalDataEditingKeyword(e){this._hasEditableFeatureLayer()?e$2(e,ne):n$5(e,ne);}_evalOfflineKeyword(e){!t$1(e,le)&&this._isOfflineCapableMap()?e$2(e,pe):n$5(e,pe);}_evalDeveloperBasemapKeyword(e){d$1A(this.basemap)?e$2(e,ye):n$5(e,ye);}_hasEditableFeatureLayer(){return this._getAllLayersAndTables().some((e=>e.loaded&&this._isFeatureServiceLayer(e)&&e.capabilities.operations.supportsEditing&&e.editingEnabled))}_isFeatureServiceLayer(e){return !("feature"!==e.type||!e.source||"feature-layer"!==e.source.type)}_isOfflineCapableMap(){return this._getAllLayersAndTables().filter((e=>"group"!==e.type)).every((e=>e.loaded&&this._isOfflineCapableLayer(e)))}_isOfflineCapableLayer(e){return this._isFeatureServiceLayer(e)&&e.capabilities.operations.supportsSync||("tile"===e.type||"vector-tile"===e.type)&&(e.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(e)||S$C(e))&&e.spatialReference.equals(this.initialViewProperties.spatialReference)}_isExportableAGOLTileLayer(e){return "tile"===e.type&&(L$j(e.url)&&we.some((t=>e.url.toLowerCase().indexOf("/"+t+"/")>-1)))}async _updateItem(e,t,r){await e.update({data:t}),this._syncUpInstanceWithItem(e,t,r);}async _createItem(e,t,r,i){const o=this.portalItem,a=!!(o&&o.id&&o.portal.user),n=e.portal;if(await n._signIn(),!await this._canCopyItem(o,a,n))throw new s$2l("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");await n.user.addItem({item:e,folder:i.folder,data:t}),this.portalItem=e,this._syncUpInstanceWithItem(e,t,r);}async _canCopyItem(e,t,r){return !(r$1K(e)&&e.id&&e.typeKeywords&&e.typeKeywords.indexOf("useOnly")>-1)||e.portal.portalHostname===r.portalHostname&&(t||await e.reload(),"admin"===e.itemControl||"update"===e.itemControl)}_syncUpInstanceWithItem(e,t,r){O$d.prototype.read.call(this,{version:t.version,authoringApp:t.authoringApp,authoringAppVersion:t.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:e.itemUrl&&U$s(e.itemUrl)}),r$1(r),this.resourceInfo=t;}async _updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride());}_getPortalItem(e){let t=b$$.from(e);return t.id&&(t=t.clone(),t.id=null),t.type||(t.type=Y),t.portal||(t.portal=B$i.getDefault()),this._validateItemType(t),t}async _updateFromInternal(e,t){if(t=t||{},await d$1Q(e,"ready"),this._updateInitialViewProperties(e,t),e.map===this)for(const r of e.allLayerViews)for(const e of ["visible","featureEffect"])e in r&&e in r.layer&&r._isOverridden(e)&&(r.layer[e]=r[e]);await this._updateThumbnailUrl(e,t);}_updateInitialViewProperties(e,t){var r;t.backgroundExcluded||(this.initialViewProperties.background=null==(r=e.background)?void 0:r.clone());if(this.initialViewProperties.spatialReference=e.spatialReference.clone(),t.viewpointExcluded||(this.initialViewProperties.viewpoint=new u$m({rotation:e.rotation,scale:t.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!t.widgetsExcluded)for(const i of e.persistableViewModels)i.updateWebDocument(this);}_getViewExtent(e){const t=e.center.clone().normalize(),r=e.extent.clone(),i=r.width/2;return r.xmin=t.x-i,r.xmax=t.x+i,r}async _updateThumbnailUrl(e,t){if(t.thumbnailExcluded)return;const r=i$3(e,t.thumbnailSize),i=await e.takeScreenshot({format:"png",width:r.width,height:r.height});this._setAutoGeneratedThumbnail(i.dataUrl);}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null;}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null;}_generateCustomThumbnailFilename(e){if(G$l(e)){const t=V$f(e),r=t&&t.mediaType,i=r&&re.get(r.toLowerCase())||null,o=`thumbnail${Date.now()}`;return i?`${o}.${i}`:o}return null}_getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:bt$3(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}_restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename;}_getAuthoringPropsState(){return {authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1;}static fromJSON(e){const t=e;if(!t)throw new s$2l("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:t})}};fe.VERSION=X,e$25([d$1T({type:c$2,json:{write:!0}})],fe.prototype,"applicationProperties",void 0),e$25([d$1T({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],fe.prototype,"authoringApp",null),e$25([r$1m("authoringApp")],fe.prototype,"writeAuthoringApp",null),e$25([d$1T({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],fe.prototype,"authoringAppVersion",null),e$25([r$1m("authoringAppVersion")],fe.prototype,"writeAuthoringAppVersion",null),e$25([d$1T({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],fe.prototype,"basemap",void 0),e$25([d$1T({type:Z,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],fe.prototype,"bookmarks",void 0),e$25([d$1T({type:l$3,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],fe.prototype,"floorInfo",void 0),e$25([d$1T({type:m,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:m$9},"initialState.viewpoint":{type:u$m},mapRangeInfo:{type:c$9},spatialReference:{type:k$w}}}}})],fe.prototype,"initialViewProperties",void 0),e$25([o$1v("initialViewProperties")],fe.prototype,"readInitialViewProperties",null),e$25([r$1m("initialViewProperties")],fe.prototype,"writeInitialViewProperties",null),e$25([d$1T({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],fe.prototype,"layers",void 0),e$25([r$1m("layers")],fe.prototype,"writeLayers",null),e$25([d$1T({type:b$$})],fe.prototype,"portalItem",void 0),e$25([d$1T({json:{write:!0}})],fe.prototype,"presentation",void 0),e$25([d$1T()],fe.prototype,"resourceInfo",void 0),e$25([d$1T({readOnly:!0,type:e,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],fe.prototype,"sourceVersion",void 0),e$25([o$1v("sourceVersion")],fe.prototype,"readSourceVersion",null),e$25([r$1m("sourceVersion")],fe.prototype,"writeSourceVersion",null),e$25([d$1T({json:{read:!1,write:{ignoreOrigin:!0}}})],fe.prototype,"tables",void 0),e$25([r$1m("tables")],fe.prototype,"writeTables",null),e$25([d$1T()],fe.prototype,"thumbnailUrl",null),e$25([d$1T({type:n$2,json:{write:!0}})],fe.prototype,"widgets",void 0),e$25([d$1T({type:ee,json:{read:!0,write:!0}})],fe.prototype,"utilityNetworks",void 0),fe=e$25([i$2z("esri.WebMap")],fe);const ge=fe;

const arcgisWebmapCss = "@import url('https://js.arcgis.com/next/esri/themes/light/main.css');.map-view{padding:0;margin:0}";

let ArcGISWebMap = class extends HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.loaded = createEvent(this, "loaded", 7);
  }
  validateApiKey(value) {
    t$1P.apiKey = value;
  }
  validateItemId(value, old) {
    if (value && value !== old) {
      this.loadMap();
    }
  }
  componentWillLoad() {
    if (this.apiKey) {
      t$1P.apiKey = this.apiKey;
    }
    if (this.itemId) {
      this.loadMap();
    }
  }
  componentDidRender() {
    // Find any arcgis-* components in View DOM
    const elem = this.el.querySelector('.esri-view-user-storage');
    if (elem) {
      const elems = Array.from(elem.children);
      for (let e of elems) {
        if (e.tagName.toLowerCase().includes('arcgis-')) {
          e.view = this.view;
        }
      }
    }
  }
  loadMap() {
    const map = new ge({
      portalItem: {
        id: this.itemId
      }
    });
    const params = {};
    if (this.zoom) {
      params.zoom = this.zoom;
    }
    if (this.center) {
      if (typeof this.center === 'string') {
        params.center = this.center.split(',').map((x) => Number(x));
      }
      else {
        params.center = this.center;
      }
    }
    const view = new G(Object.assign({ container: this.el, map }, params));
    this.view = view;
    view.when(() => this.loaded.emit(true));
  }
  render() {
    return (h$1H("div", { class: "map-view" }));
  }
  get el() { return this; }
  static get watchers() { return {
    "apiKey": ["validateApiKey"],
    "itemId": ["validateItemId"]
  }; }
  static get style() { return arcgisWebmapCss; }
};

const ArcgisBasemapGallery = /*@__PURE__*/proxyCustomElement(ArcGISBasemapGallery, [0,"arcgis-basemap-gallery",{"position":[1],"view":[16],"widget":[1032]}]);
const ArcgisExpand = /*@__PURE__*/proxyCustomElement(ArcGISSearch$1, [0,"arcgis-expand",{"position":[1],"view":[16]}]);
const ArcgisFeatureTable = /*@__PURE__*/proxyCustomElement(ArcGISFeatureTable, [0,"arcgis-feature-table",{"itemId":[1,"item-id"],"layer":[1032],"position":[1],"url":[1],"view":[16],"widget":[1032],"fieldConfigs":[8,"field-configs"]}]);
const ArcgisLegend = /*@__PURE__*/proxyCustomElement(ArcGISLegend, [0,"arcgis-legend",{"position":[1],"view":[16],"widget":[8]}]);
const ArcgisMap = /*@__PURE__*/proxyCustomElement(ArcGISMap, [0,"arcgis-map",{"apiKey":[1,"api-key"],"basemap":[1],"zoom":[2],"center":[1]}]);
const ArcgisPortal = /*@__PURE__*/proxyCustomElement(ArcGISPortal, [0,"arcgis-portal",{"portal":[1032],"url":[1]}]);
const ArcgisSearch = /*@__PURE__*/proxyCustomElement(ArcGISSearch, [0,"arcgis-search",{"position":[1],"view":[16],"widget":[8]}]);
const ArcgisWebmap = /*@__PURE__*/proxyCustomElement(ArcGISWebMap, [0,"arcgis-webmap",{"apiKey":[1,"api-key"],"itemId":[1,"item-id"],"zoom":[2],"center":[1]}]);
const defineCustomElements = (opts) => {
  if (typeof customElements !== 'undefined') {
    [
      ArcgisBasemapGallery,
  ArcgisExpand,
  ArcgisFeatureTable,
  ArcgisLegend,
  ArcgisMap,
  ArcgisPortal,
  ArcgisSearch,
  ArcgisWebmap
    ].forEach(cmp => {
      if (!customElements.get(cmp.is)) {
        customElements.define(cmp.is, cmp, opts);
      }
    });
  }
};

export { e$b as $, i$2P as A, ArcgisBasemapGallery, ArcgisExpand, ArcgisFeatureTable, ArcgisLegend, ArcgisMap, ArcgisPortal, ArcgisSearch, ArcgisWebmap, o$1m as B, lt as C, D$m as D, E$v as E, t$1n as F, w$$ as G, a$S as H, j$U as I, m$2e as J, d$1Z as K, p$3j as L, M$A as M, l$o as N, h$1E as O, t$1P as P, Q$2 as Q, r$1e as R, S$I as S, u$1s as T, n$E as U, V$f as V, a$39 as W, n$2D as X, r$1j as Y, n$2l as Z, e$i as _, s$2r as a, e$1j as a$, A$u as a0, r$1I as a1, i$2x as a2, n$F as a3, n$1b as a4, i$S as a5, c$11 as a6, d$c as a7, a$j as a8, f$6 as a9, wt$3 as aA, l$1R as aB, f$16 as aC, s$1v as aD, c$2w as aE, y$17 as aF, c$2F as aG, y$1p as aH, S$F as aI, r$s as aJ, i$N as aK, s$I as aL, T$o as aM, u$1x as aN, X$3 as aO, v$F as aP, e$1m as aQ, $$5 as aR, ft$1 as aS, it$1 as aT, U$7 as aU, w$I as aV, t$s as aW, a$T as aX, i$s as aY, k$o as aZ, U$8 as a_, s$1Q as aa, e$1u as ab, m$1g as ac, a$2w as ad, p$3a as ae, e$v as af, u$q as ag, c$2i as ah, n$2o as ai, o$1o as aj, d$1z as ak, s$1P as al, u$m as am, b$10 as an, Ft as ao, i$1M as ap, rt as aq, s$1L as ar, St as as, $$3 as at, Mt as au, xt as av, a$2D as aw, vt as ax, u$25 as ay, F$r as az, l$1d as b, d$21 as b$, r$10 as b0, o$6 as b1, s$1D as b2, l$1Y as b3, b$17 as b4, u$1B as b5, O$a as b6, j$g as b7, N$a as b8, r$j as b9, wt$1 as bA, et$1 as bB, e$23 as bC, o$10 as bD, c$3o as bE, e$E as bF, r$J as bG, s$10 as bH, y$B as bI, e$Y as bJ, n$1i as bK, i$1V as bL, v$J as bM, r$1m as bN, b$A as bO, n$1K as bP, l$1p as bQ, p$1G as bR, l$1n as bS, W$4 as bT, ct$1 as bU, tt$1 as bV, nt as bW, e$s as bX, bt$1 as bY, mt$1 as bZ, m$1a as b_, i$x as ba, M$2 as bb, t$h as bc, f$9 as bd, h$i as be, h$B as bf, n$1c as bg, o$z as bh, e$y as bi, o$1c as bj, e$1U as bk, f$19 as bl, e$17 as bm, c$2N as bn, h$18 as bo, B$m as bp, r$G as bq, y$1q as br, d$1E as bs, I$A as bt, E$r as bu, g$10 as bv, Q$8 as bw, rn$1 as bx, e$e as by, E$y as bz, a$V as c, o as c$, v$13 as c0, d$K as c1, m$19 as c2, j$n as c3, b$w as c4, c$1D as c5, B$i as c6, U$s as c7, c$28 as c8, p$1D as c9, t$1Q as cA, r$t as cB, u$Y as cC, n$2O as cD, C$B as cE, p$1l as cF, y$C as cG, w$o as cH, l$1i as cI, h$1G as cJ, C$A as cK, v$s as cL, f$B as cM, b$v as cN, j$C as cO, g$1e as cP, y$1A as cQ, n$2J as cR, r$2 as cS, _ as cT, a$a as cU, r$4 as cV, n$c as cW, o$3 as cX, m$5 as cY, r$3 as cZ, a$8 as c_, a$$ as ca, t$y as cb, t$1S as cc, b$5 as cd, H$2 as ce, D$6 as cf, s$q as cg, A$B as ch, H$c as ci, e$n as cj, a$34 as ck, c$3m as cl, l$U as cm, o$16 as cn, a$16 as co, i$X as cp, c$35 as cq, a$2N as cr, o$1v as cs, m$1L as ct, g$E as cu, e$t as cv, l$z as cw, s$24 as cx, r$12 as cy, gt$3 as cz, d$1T as d, a$2t as d$, o$1 as d0, n$9 as d1, n$8 as d2, n$a as d3, b$14 as d4, n$$ as d5, y$J as d6, V$8 as d7, d$11 as d8, v$v as d9, o$1Y as dA, o$1_ as dB, d$V as dC, m$$ as dD, pt$2 as dE, m$1K as dF, r$1k as dG, M$B as dH, O$j as dI, c$2C as dJ, P$t as dK, a$2M as dL, m$1N as dM, q$g as dN, D$v as dO, m$2i as dP, qt$2 as dQ, i$2w as dR, p$2$ as dS, f$1d as dT, f$1L as dU, C$z as dV, k$E as dW, z$n as dX, a$36 as dY, s$2j as dZ, O$t as d_, b$B as da, z$s as db, U$f as dc, o$H as dd, n$2R as de, defineCustomElements, r$1H as df, g$1f as dg, b$$ as dh, t$1 as di, t$E as dj, T$s as dk, a$9 as dl, e$24 as dm, e$1g as dn, z$o as dp, n$2g as dq, s$22 as dr, g$13 as ds, e$1f as dt, y$1D as du, $$j as dv, E$x as dw, b$18 as dx, A$y as dy, T$t as dz, e$25 as e, p$2N as e$, a$2f as e0, m$1i as e1, p$1S as e2, P$j as e3, s$F as e4, c$2Z as e5, O$g as e6, gt$1 as e7, I$s as e8, e$D as e9, j$J as eA, m$2h as eB, n$2U as eC, r$1h as eD, z$l as eE, _$y as eF, l$26 as eG, H$g as eH, c$2P as eI, q$l as eJ, M$w as eK, a$2E as eL, r$1g as eM, m$1S as eN, i$29 as eO, f$1k as eP, c$2M as eQ, h$1i as eR, I$y as eS, vn$1 as eT, e$1t as eU, xn$1 as eV, C$s as eW, F$n as eX, B$f as eY, A$j as eZ, t$1p as e_, H$a as ea, h$R as eb, i$1o as ec, s$2q as ed, l$2y as ee, A$f as ef, D$h as eg, f$14 as eh, C$q as ei, u$2l as ej, a$28 as ek, l$1Z as el, z$h as em, R$t as en, yt$1 as eo, G$4 as ep, C$6 as eq, _$a as er, o$1s as es, G$i as et, i$2f as eu, q$s as ev, b$19 as ew, a$r as ex, w$11 as ey, u$1M as ez, o$1$ as f, y$I as f$, O$l as f0, u$1W as f1, G$j as f2, C$w as f3, a$x as f4, o$i as f5, L$t as f6, c$2X as f7, j$4 as f8, B as f9, y$1c as fA, A$x as fB, l$1S as fC, v$j as fD, p$38 as fE, i$19 as fF, Q$3 as fG, B$c as fH, ne$4 as fI, ie$4 as fJ, de$4 as fK, j$H as fL, t$Q as fM, e$1Q as fN, t$r as fO, q$7 as fP, c$Q as fQ, d$t as fR, ut$1 as fS, l$1f as fT, a$1C as fU, y$Q as fV, E$w as fW, Rt$2 as fX, L$z as fY, b$9 as fZ, M$4 as f_, L$o as fa, Y$a as fb, D$k as fc, a$2G as fd, a$2F as fe, s$1O as ff, l$27 as fg, _$x as fh, j$I as fi, x$y as fj, q$k as fk, g$X as fl, D$o as fm, E$p as fn, Y$c as fo, t$1o as fp, p$31 as fq, d$1p as fr, l$2x as fs, S$a as ft, b$q as fu, c$P as fv, a$R as fw, lt$1 as fx, y$i as fy, p$F as fz, d$1o as g, w$k as g$, o$t as g0, s$1V as g1, g$1c as g2, g$15 as g3, h$f as g4, l$i as g5, st$1 as g6, e$r as g7, o$20 as g8, P$p as g9, y$E as gA, g$y as gB, y$16 as gC, I$q as gD, r$1G as gE, j$y as gF, A$g as gG, V$a as gH, N$h as gI, _$q as gJ, g$R as gK, F$h as gL, ce$4 as gM, M$H as gN, O$i as gO, M$o as gP, t$S as gQ, t$1u as gR, c$E as gS, f$1B as gT, pt as gU, k$m as gV, f$1c as gW, c$18 as gX, r$i as gY, b$k as gZ, j$d as g_, S$J as ga, c$1N as gb, a$1L as gc, s$1A as gd, p$_ as ge, z$9 as gf, y$t as gg, H$b as gh, J$8 as gi, tn$1 as gj, Y$9 as gk, t$1R as gl, rt$3 as gm, ut$3 as gn, i$1X as go, t$1H as gp, v$h as gq, e$j as gr, p$p as gs, r$e as gt, n$2t as gu, n$2A as gv, $$g as gw, m$22 as gx, l$l as gy, a$1j as gz, h$X as h, r$1 as h$, h$C as h0, h$z as h1, t$A as h2, c$27 as h3, m$M as h4, r$D as h5, n$1h as h6, i$W as h7, F$g as h8, t$11 as h9, e$1W as hA, a$18 as hB, p$14 as hC, E$b as hD, m$18 as hE, n$1G as hF, K$7 as hG, m$Q as hH, l$V as hI, p$R as hJ, i$Y as hK, n$2L as hL, O$d as hM, y$D as hN, Ge as hO, x$i as hP, l$$ as hQ, t$1A as hR, i$2h as hS, t$15 as hT, o$1E as hU, v$l as hV, d$O as hW, h$L as hX, w$s as hY, O$c as hZ, C$i as h_, c$29 as ha, p$2c as hb, i$1I as hc, u$a as hd, v$Z as he, wn$1 as hf, W$b as hg, ht$3 as hh, f$1n as hi, r$1f as hj, i$16 as hk, a$1e as hl, s$12 as hm, n$1p as hn, i$18 as ho, o$O as hp, e$F as hq, r$5 as hr, n$2r as hs, t$1J as ht, j$h as hu, p$1e as hv, r as hw, s$2a as hx, x$p as hy, c$1r as hz, i$2z as i, p$19 as i$, m$1x as i0, c$Y as i1, p$Q as i2, y$1n as i3, A$p as i4, c$1k as i5, m$1z as i6, n$1V as i7, y$10 as i8, S$r as i9, a$1F as iA, P$e as iB, T$q as iC, a$1O as iD, w$z as iE, p$1E as iF, g$D as iG, y$1y as iH, i$a as iI, Q$e as iJ, U$h as iK, F$s as iL, s$2f as iM, R$i as iN, hn$1 as iO, i$2i as iP, a$2Y as iQ, d$1Q as iR, u$2j as iS, a$I as iT, c$1Z as iU, t$1c as iV, p$2K as iW, r$1J as iX, et$3 as iY, i$1O as iZ, N$s as i_, p$1c as ia, t$M as ib, d$1n as ic, m$1G as id, s$$ as ie, m$T as ig, r$H as ih, u$R as ii, l$17 as ij, a$1b as ik, o$1K as il, i$1W as im, U$r as io, s$D as ip, s$E as iq, n$W as ir, v$Y as is, a$31 as it, v$t as iu, n$1L as iv, M$c as iw, N$e as ix, q$b as iy, N$d as iz, l$12 as j, FeatureLayer as j$, p$15 as j0, r$W as j1, o$V as j2, I$j as j3, b$p as j4, u$2a as j5, M$n as j6, p$1m as j7, v$$ as j8, M$G as j9, s$1u as jA, L$w as jB, S$H as jC, m$24 as jD, _$f as jE, x$z as jF, G$l as jG, e$22 as jH, t$1M as jI, s$1N as jJ, q$e as jK, w$C as jL, G$f as jM, n$1y as jN, h$15 as jO, e$1y as jP, B$b as jQ, i$2b as jR, H$i as jS, g$W as jT, r$1y as jU, n$1J as jV, l$29 as jW, o$21 as jX, request as jY, DictionaryRenderer as jZ, FeatureSet as j_, w$10 as ja, o$1l as jb, p$2T as jc, i$25 as jd, n$2m as je, y$1l as jf, d$l as jg, y$1k as jh, n$2k as ji, i$23 as jj, J$c as jk, r$1c as jl, P$o as jm, r$1B as jn, u$1H as jo, u$1N as jp, u$1G as jq, w$p as jr, S$m as js, g$11 as jt, r$1l as ju, u$1E as jv, m$W as jw, l$Y as jx, f$1O as jy, x$h as jz, k$w as k, query as k0, l$2w as l, m$1$ as m, o$J as n, o$1J as o, S$j as p, t$7 as q, r$1K as r, s$2l as s, t$1T as t, s$2n as u, v$a as v, i$2O as w, s$2o as x, y$F as y, z$r as z };
