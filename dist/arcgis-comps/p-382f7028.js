import{t}from"./p-2f398ed1.js";function n(n,f,i){var u;const c=n.byteLength/(4*f),s=new Uint32Array(n,0,c*f);let a=new Uint32Array(c);const w=null!=(u=null==i?void 0:i.minReduction)?u:0,y=(null==i?void 0:i.originalIndices)||null,A=y?y.length:0,U=(null==i?void 0:i.componentOffsets)||null;let d=0;if(U)for(let t=0;t<U.length-1;t++){const n=U[t+1]-U[t];n>d&&(d=n)}else d=c;const v=Math.floor(1.1*d)+1;(null==o||o.length<2*v)&&(o=new Uint32Array(t(2*v)));for(let t=0;t<2*v;t++)o[t]=0;let h=0;const p=!!U&&!!y,M=p?A:c,b=p?new Uint32Array(A):null,m=1.96;let j=0!==w?Math.ceil(4*m*m/(w*w)*w*(1-w)):M,k=1,q=U?U[1]:M;for(let t=0;t<M;t++){if(t===j){const n=1-h/t;if(n+m*Math.sqrt(n*(1-n)/t)<w)return null;j*=2}if(t===q){for(let t=0;t<2*v;t++)o[t]=0;if(y)for(let t=U[k-1];t<U[k];t++)b[t]=a[y[t]];q=U[++k]}const n=p?y[t]:t,l=n*f,i=e(s,l,f);let u=i%v,c=h;for(;0!==o[2*u+1];){if(o[2*u]===i){const t=o[2*u+1]-1;if(r(s,l,t*f,f)){c=a[t];break}}u++,u>=v&&(u-=v)}c===h&&(o[2*u]=i,o[2*u+1]=n+1,h++),a[n]=c}if(0!==w&&1-h/c<w)return null;if(p){for(let t=U[k-1];t<b.length;t++)b[t]=a[y[t]];a=b}const x=new Uint32Array(f*h);h=0;for(let t=0;t<M;t++)a[t]===h&&(l(s,(p?y[t]:t)*f,x,h*f,f),h++);if(y&&!p){const t=new Uint32Array(A);for(let n=0;n<t.length;n++)t[n]=a[y[n]];a=t}return{buffer:x.buffer,indices:a,uniqueCount:h}}function r(t,n,r,l){for(let e=0;e<l;e++)if(t[n+e]!==t[r+e])return!1;return!0}function l(t,n,r,l,e){for(let o=0;o<e;o++)r[l+o]=t[n+o]}function e(t,n,r){let l=0;for(let e=0;e<r;e++)l=t[n+e]+l|0,l=l+(l<<11)+(l>>>2)|0;return l>>>0}let o=null;export{n}