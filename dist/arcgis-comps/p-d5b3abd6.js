import{e as r,d as e,bl as s,bH as t,ck as a,bk as i,aL as n,i as l,bj as o,da as u,r as c,cj as p,k as d,w as y,bn as f,cC as v,E as B,bq as b}from"./p-5420851c.js";import{a as m,u as P,d as g,b as A,p as h,o as S}from"./p-743dec27.js";import"./p-53bb6ab4.js";import"./p-48fed6fe.js";function j(r){return r.features.map((e=>{const s=d.fromJSON(r.spatialReference),t=n.fromJSON(e);return y(t.geometry).spatialReference=s,t}))}function k(r){return u(r.features.map((e=>(c(e.geometry)&&(e.geometry.spatialReference=r.spatialReference),p(e.geometry)))))}let w=class extends o{constructor(r){super(r),this.facilities=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.serviceAreaPolylines=null,this.serviceAreaPolygons=null}readFacilities(r){return k(r)}readPointBarriers(r,e){return k(e.barriers)}readPolylineBarriers(r){return k(r)}readPolygonBarriers(r){return k(r)}readIncidents(r,e){return j(e.saPolylines)}readServiceAreaPolygons(r,e){return j(e.saPolygons)}};r([e({type:[s]})],w.prototype,"facilities",void 0),r([t("facilities")],w.prototype,"readFacilities",null),r([e({type:[m]})],w.prototype,"messages",void 0),r([e({type:[s]})],w.prototype,"pointBarriers",void 0),r([t("pointBarriers",["barriers"])],w.prototype,"readPointBarriers",null),r([e({type:[a]})],w.prototype,"polylineBarriers",void 0),r([t("polylineBarriers")],w.prototype,"readPolylineBarriers",null),r([e({type:[i]})],w.prototype,"polygonBarriers",void 0),r([t("polygonBarriers")],w.prototype,"readPolygonBarriers",null),r([e({type:[n]})],w.prototype,"serviceAreaPolylines",void 0),r([t("serviceAreaPolylines",["saPolylines"])],w.prototype,"readIncidents",null),r([e({type:[n]})],w.prototype,"serviceAreaPolygons",void 0),r([t("serviceAreaPolygons",["saPolygons"])],w.prototype,"readServiceAreaPolygons",null),w=r([l("esri.rest.support.ServiceAreaSolveResult")],w);const x=w,R=S({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:"outSR",getter:r=>r.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},travelMode:!0});let q=class extends b{constructor(r){super(r),this.url=null}solve(r,e){return async function(r,e,s){const t=[],a=[],i={},n={},l=f(r),{path:o}=l;e.facilities&&e.facilities.features&&P(e.facilities.features,a,"facilities.features",i),e.pointBarriers&&e.pointBarriers.features&&P(e.pointBarriers.features,a,"pointBarriers.features",i),e.polylineBarriers&&e.polylineBarriers.features&&P(e.polylineBarriers.features,a,"polylineBarriers.features",i),e.polygonBarriers&&e.polygonBarriers.features&&P(e.polygonBarriers.features,a,"polygonBarriers.features",i);const u=await v(a);for(const r in i){const e=i[r];t.push(r),n[r]=u.slice(e[0],e[1])}if(g(n,t)){let r=null;try{r=await A(o,e.apiKey,s)}catch{}r&&!r.hasZ&&h(n,t)}for(const r in n)n[r].forEach(((s,t)=>{e.get(r)[t].geometry=s}));const c={...s,query:{...l.query,...R.toQueryParams(e),f:"json"}},{data:p}=await B(`${o}/solveServiceArea`,c);return x.fromJSON(p)}(this.url,r,e)}};r([e()],q.prototype,"url",void 0),q=r([l("esri.tasks.ServiceAreaTask")],q);const F=q;export default F;