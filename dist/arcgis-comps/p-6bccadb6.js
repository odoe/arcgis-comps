import{W as t,ho as n,he as e}from"./p-7b6f6c18.js";async function i(i,o=i.popupTemplate){if(!t(o))return[];const a=await o.getRequiredFields(i.fieldsIndex),{lastEditInfoEnabled:r}=o,{objectIdField:l,typeIdField:s,globalIdField:d,relationships:c}=i;if(a.includes("*"))return["*"];const f=r?await n(i):[],u=e(i.fieldsIndex,[...a,...f]);return s&&u.push(s),u&&l&&i.fieldsIndex.has(l)&&-1===u.indexOf(l)&&u.push(l),u&&d&&i.fieldsIndex.has(d)&&-1===u.indexOf(d)&&u.push(d),c&&c.forEach((t=>{const{keyField:n}=t;u&&n&&i.fieldsIndex.has(n)&&-1===u.indexOf(n)&&u.push(n)})),u}function o(n,e){return n.popupTemplate?n.popupTemplate:t(e)&&e.defaultPopupTemplateEnabled&&t(n.defaultPopupTemplate)?n.defaultPopupTemplate:null}export{o as d,i as t}