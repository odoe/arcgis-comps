import{z as r,A as n,a as t,Z as e,J as i,al as u,V as o}from"./p-4ddfade5.js";import{bE as f,ao as s,cg as c}from"./p-9ae46e68.js";import{WhereClause as p}from"./p-b74f39e0.js";import"./p-566b0715.js";import"./p-fe01b82b.js";import"./p-a184d75f.js";import"./p-023ccb69.js";import"./p-8e03c038.js";import"./p-32462343.js";import"./p-4003c7ae.js";import"./p-b2d0e2de.js";import"./p-db87794e.js";import"./p-9dcf03f7.js";import"./p-2a252a78.js";import"./p-dfc6337f.js";import"./p-84bf99cb.js";function a(r,e,s,c,a,j){if(1===c.length){if(t(c[0]))return f(u(r,c[0],o(c[1],-1)));if(i(c[0]))return f(u(r,c[0].toArray(),o(c[1],-1)))}else if(2===c.length){if(t(c[0]))return f(u(r,c[0],o(c[1],-1)));if(i(c[0]))return f(u(r,c[0].toArray(),o(c[1],-1)));if(n(c[0]))return c[0].load().then((n=>m(p.create(c[1],n.getFieldsIndex()),j,a).then((n=>c[0].calculateStatistic(r,n,o(c[2],1e3),e.abortSignal)))))}else if(3===c.length&&n(c[0]))return c[0].load().then((n=>m(p.create(c[1],n.getFieldsIndex()),j,a).then((n=>c[0].calculateStatistic(r,n,o(c[2],1e3),e.abortSignal)))));return f(u(r,c,-1))}function m(r,n,t){try{const e=r.getVariables();if(e.length>0){const i=[];for(let r=0;r<e.length;r++)i.push(n.evaluateIdentifier(t,{name:e[r]}));return s(i).then((n=>{const t={};for(let r=0;r<e.length;r++)t[e[r]]=n[r];return r.parameters=t,r}))}return f(r)}catch(r){return c(r)}}function j(u){"async"===u.mode&&(u.functions.stdev=function(r,n){return u.standardFunctionAsync(r,n,(function(n,t,e){return a("stdev",n,0,e,r,u)}))},u.functions.variance=function(r,n){return u.standardFunctionAsync(r,n,(function(n,t,e){return a("variance",n,0,e,r,u)}))},u.functions.average=function(r,n){return u.standardFunctionAsync(r,n,(function(n,t,e){return a("mean",n,0,e,r,u)}))},u.functions.mean=function(r,n){return u.standardFunctionAsync(r,n,(function(n,t,e){return a("mean",n,0,e,r,u)}))},u.functions.sum=function(r,n){return u.standardFunctionAsync(r,n,(function(n,t,e){return a("sum",n,0,e,r,u)}))},u.functions.min=function(r,n){return u.standardFunctionAsync(r,n,(function(n,t,e){return a("min",n,0,e,r,u)}))},u.functions.max=function(r,n){return u.standardFunctionAsync(r,n,(function(n,t,e){return a("max",n,0,e,r,u)}))},u.functions.count=function(o,f){return u.standardFunctionAsync(o,f,(function(u,o,f){if(r(f,1,1),n(f[0]))return f[0].count(u.abortSignal);if(t(f[0])||e(f[0]))return f[0].length;if(i(f[0]))return f[0].length();throw new Error("Invalid Parameters for Count")}))})}export{j as registerFunctions}