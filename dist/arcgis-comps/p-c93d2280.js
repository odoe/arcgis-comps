import{m as n,K as t,af as r,h as e,br as u,bt as o,V as l,aE as s,_ as i,s as c,ch as a,ci as f,cj as h,bF as d,bG as p,A as M,bs as m,c2 as w,c1 as g}from"./p-e58503d5.js";import{m as y,b as E,M as b,r as P,u as T,c as C,a as F,s as v,e as A}from"./p-2f398ed1.js";import{H as G,a as j,R as S,I as k,b as x}from"./p-01e5a461.js";import{r as I,c as R,o as W}from"./p-ccdb8e80.js";import{n as _}from"./p-d3105731.js";import{v as N,m as U,b as Z}from"./p-b79fcce3.js";import{a as z}from"./p-ea916a39.js";import{s as D}from"./p-fea9512d.js";let K,L=null;function V(){return!!L}function $(){return K||(K=import("./p-80d464d6.js").then((n=>n.p)).then((({default:t})=>t({locateFile:t=>n(`esri/geometry/support/${t}`)}))).then((n=>{on(n)})),K)}var B,H,O;!function(n){function t(n,t,r){L.ensureCache.prepare();const e=cn(r),u=r===e,o=L.ensureFloat64(e),l=L._pe_geog_to_proj(L.getPointer(n),t,o);return l&&an(r,t,o,u),l}function r(n,t,r){return e(n,t,r,0)}function e(n,t,r,e){L.ensureCache.prepare();const u=cn(r),o=r===u,l=L.ensureFloat64(u),s=L._pe_proj_to_geog_center(L.getPointer(n),t,l,e);return s&&an(r,t,l,o),s}n.geogToProj=t,n.projGeog=function(n,e,u,o){switch(o){case H.PE_TRANSFORM_P_TO_G:return r(n,e,u);case H.PE_TRANSFORM_G_TO_P:return t(n,e,u)}return 0},n.projToGeog=r,n.projToGeogCenter=e}(B||(B={})),function(n){n.init=function(){n.PE_BUFFER_MAX=L.PeDefs.prototype.PE_BUFFER_MAX,n.PE_NAME_MAX=L.PeDefs.prototype.PE_NAME_MAX,n.PE_MGRS_MAX=L.PeDefs.prototype.PE_MGRS_MAX,n.PE_USNG_MAX=L.PeDefs.prototype.PE_USNG_MAX,n.PE_DD_MAX=L.PeDefs.prototype.PE_DD_MAX,n.PE_DDM_MAX=L.PeDefs.prototype.PE_DDM_MAX,n.PE_DMS_MAX=L.PeDefs.prototype.PE_DMS_MAX,n.PE_UTM_MAX=L.PeDefs.prototype.PE_UTM_MAX,n.PE_PARM_MAX=L.PeDefs.prototype.PE_PARM_MAX,n.PE_TYPE_NONE=L.PeDefs.prototype.PE_TYPE_NONE,n.PE_TYPE_GEOGCS=L.PeDefs.prototype.PE_TYPE_GEOGCS,n.PE_TYPE_PROJCS=L.PeDefs.prototype.PE_TYPE_PROJCS,n.PE_TYPE_GEOGTRAN=L.PeDefs.prototype.PE_TYPE_GEOGTRAN,n.PE_TYPE_COORDSYS=L.PeDefs.prototype.PE_TYPE_COORDSYS,n.PE_TYPE_UNIT=L.PeDefs.prototype.PE_TYPE_UNIT,n.PE_TYPE_LINUNIT=L.PeDefs.prototype.PE_TYPE_LINUNIT,n.PE_STR_OPTS_NONE=L.PeDefs.prototype.PE_STR_OPTS_NONE,n.PE_STR_AUTH_NONE=L.PeDefs.prototype.PE_STR_AUTH_NONE,n.PE_STR_AUTH_TOP=L.PeDefs.prototype.PE_STR_AUTH_TOP,n.PE_STR_NAME_CANON=L.PeDefs.prototype.PE_STR_NAME_CANON,n.PE_PARM_X0=L.PeDefs.prototype.PE_PARM_X0,n.PE_PARM_ND=L.PeDefs.prototype.PE_PARM_ND,n.PE_TRANSFORM_1_TO_2=L.PeDefs.prototype.PE_TRANSFORM_1_TO_2,n.PE_TRANSFORM_2_TO_1=L.PeDefs.prototype.PE_TRANSFORM_2_TO_1,n.PE_TRANSFORM_P_TO_G=L.PeDefs.prototype.PE_TRANSFORM_P_TO_G,n.PE_TRANSFORM_G_TO_P=L.PeDefs.prototype.PE_TRANSFORM_G_TO_P,n.PE_HORIZON_RECT=L.PeDefs.prototype.PE_HORIZON_RECT,n.PE_HORIZON_POLY=L.PeDefs.prototype.PE_HORIZON_POLY,n.PE_HORIZON_LINE=L.PeDefs.prototype.PE_HORIZON_LINE,n.PE_HORIZON_DELTA=L.PeDefs.prototype.PE_HORIZON_DELTA}}(H||(H={})),function(n){const t={},r={},e=n=>{if(n){const t=n.getType();switch(t){case H.PE_TYPE_GEOGCS:n=L.castObject(n,L.PeGeogcs);break;case H.PE_TYPE_PROJCS:n=L.castObject(n,L.PeProjcs);break;case H.PE_TYPE_GEOGTRAN:n=L.castObject(n,L.PeGeogtran);break;default:t&H.PE_TYPE_UNIT&&(n=L.castObject(n,L.PeUnit))}}return n};function u(n,r){let u=null,o=t[n];if(o||(o={},t[n]=o),o.hasOwnProperty(String(r)))u=o[r];else{const t=L.PeFactory.prototype.factoryByType(n,r);L.compare(t,L.NULL)||(u=t,o[r]=u)}return u=e(u),u}n.initialize=function(){L.PeFactory.prototype.initialize(null)},n.coordsys=function(n){return u(H.PE_TYPE_COORDSYS,n)},n.factoryByType=u,n.fromString=function(n,t){let u=null,o=r[n];if(o||(o={},r[n]=o),o.hasOwnProperty(t))u=o[t];else{const r=L.PeFactory.prototype.fromString(n,t);L.compare(r,L.NULL)||(u=r,o[t]=u)}return u=e(u),u},n.geogcs=function(n){return u(H.PE_TYPE_GEOGCS,n)},n.geogtran=function(n){return u(H.PE_TYPE_GEOGTRAN,n)},n.getCode=function(n){return L.PeFactory.prototype.getCode(n)},n.projcs=function(n){return u(H.PE_TYPE_PROJCS,n)},n.unit=function(n){return u(H.PE_TYPE_UNIT,n)}}(O||(O={}));let q=null;var J,Q,X,Y,nn,tn,rn,en,un;function on(n){function t(n,t,r){n[t]=r(n[t])}L=n,H.init(),J.init(),nn.init(),rn.init(),en.init(),q=class extends L.PeGCSExtent{destroy(){L.destroy(this)}};const r=[L.PeDatum,L.PeGeogcs,L.PeGeogtran,L.PeObject,L.PeParameter,L.PePrimem,L.PeProjcs,L.PeSpheroid,L.PeUnit];for(const n of r)t(n.prototype,"getName",(n=>function(){return n.call(this,new Array(H.PE_NAME_MAX))}));for(const n of[L.PeGeogtran,L.PeProjcs])t(n.prototype,"getParameters",(n=>function(){const t=new Array(H.PE_PARM_MAX);let r=n.call(this);for(let n=0;n<t.length;n++){const e=L.getValue(r,"*");t[n]=e?L.wrapPointer(e,L.PeParameter):null,r+=Int32Array.BYTES_PER_ELEMENT}return t}));t(L.PeHorizon.prototype,"getCoord",(n=>function(){const t=this.getSize();if(!t)return null;const r=[];return an(r,t,n.call(this)),r})),t(L.PeGTlistExtendedEntry.prototype,"getEntries",(n=>{const t=L._pe_getPeGTlistExtendedGTsSize();return function(){let r=null;const e=n.call(this);if(!L.compare(e,L.NULL)){r=[e];const n=this.getSteps();if(n>1){const u=L.getPointer(e);for(let e=1;e<n;e++)r.push(L.wrapPointer(u+t*e,L.PeGTlistExtendedGTs))}}return r}}));const e=L._pe_getPeHorizonSize(),u=n=>function(){let t=this._cache;if(t||(t=new Map,this._cache=t),t.has(n))return t.get(n);let r=null;const u=n.call(this);if(!L.compare(u,L.NULL)){r=[u];const n=u.getNump();if(n>1){const t=L.getPointer(u);for(let u=1;u<n;u++)r.push(L.wrapPointer(t+e*u,L.PeHorizon))}}return t.set(n,r),r};t(L.PeProjcs.prototype,"horizonGcsGenerate",u),t(L.PeProjcs.prototype,"horizonPcsGenerate",u),L.PeObject.prototype.toString=function(n=H.PE_STR_OPTS_NONE){L.ensureCache.prepare();const t=L.getPointer(this),r=L.ensureInt8(new Array(H.PE_BUFFER_MAX));return L.UTF8ToString(L._pe_object_to_string_ext(t,n,r))}}function ln(n){if(!n)return;const t=L.getClass(n);if(!t)return;const r=L.getCache(t);if(!r)return;const e=L.getPointer(n);e&&delete r[e]}function sn(n,t){const r=[],e=new Array(t);for(let t=0;t<n;t++)r.push(L.ensureInt8(e));return r}function cn(n){let t;return Array.isArray(n[0])?(t=[],n.forEach((n=>{t.push(n[0],n[1])}))):t=n,t}function an(n,t,r,e=!1){if(e)for(let e=0;e<2*t;e++)n[e]=L.getValue(r+e*Float64Array.BYTES_PER_ELEMENT,"double");else{const e=0===n.length;for(let u=0;u<t;u++)e&&(n[u]=new Array(2)),n[u][0]=L.getValue(r,"double"),n[u][1]=L.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}!function(n){let t;n.init=function(){n.PE_GTLIST_OPTS_COMMON=L.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=L._pe_getPeGTlistExtendedEntrySize()},n.getGTlist=function(n,r,e,u,o,l){let s=null;const i=new L.PeInteger(l);try{const c=L.PeGTlistExtended.prototype.getGTlist(n,r,e,u,o,i);if((l=i.val)&&(s=[c],l>1)){const n=L.getPointer(c);for(let r=1;r<l;r++)s.push(L.wrapPointer(n+t*r,L.PeGTlistExtendedEntry))}}finally{L.destroy(i)}return s}}(J||(J={})),(Q||(Q={})).destroy=function(n){if(n&&n.length){for(const t of n)ln(t),t.getEntries().forEach((n=>{ln(n);const t=n.getGeogtran();ln(t),t.getParameters().forEach(ln),[t.getGeogcs1(),t.getGeogcs2()].forEach((n=>{ln(n);const t=n.getDatum();ln(t),ln(t.getSpheroid()),ln(n.getPrimem()),ln(n.getUnit())}))}));L.PeGTlistExtendedEntry.prototype.Delete(n[0])}},(X||(X={})).geogToGeog=function(n,t,r,e,u){L.ensureCache.prepare();const o=cn(r),l=r===o,s=L.ensureFloat64(o);let i=0;e&&(i=L.ensureFloat64(e));const c=L._pe_geog_to_geog(L.getPointer(n),t,s,i,u);return c&&an(r,t,s,l),c},function(n){const t=(n,t,r,e,u,o)=>{let l,s;switch(L.ensureCache.prepare(),n){case"dd":l=L._pe_geog_to_dd,s=H.PE_DD_MAX;break;case"ddm":l=L._pe_geog_to_ddm,s=H.PE_DDM_MAX;break;case"dms":l=L._pe_geog_to_dms,s=H.PE_DMS_MAX}let i=0;t&&(i=L.getPointer(t));const c=cn(e),a=L.ensureFloat64(c),f=sn(r,s),h=l(i,r,a,u,L.ensureInt32(f));if(h)for(let n=0;n<r;n++)o[n]=L.UTF8ToString(f[n]);return h},r=(n,t,r,e,u)=>{let o;switch(L.ensureCache.prepare(),n){case"dd":o=L._pe_dd_to_geog;break;case"ddm":o=L._pe_ddm_to_geog;break;case"dms":o=L._pe_dms_to_geog}let l=0;t&&(l=L.getPointer(t));const s=e.map((n=>L.ensureString(n))),i=L.ensureInt32(s),c=L.ensureFloat64(new Array(2*r)),a=o(l,r,i,c);return a&&an(u,r,c),a};n.geog_to_dms=function(n,r,e,u,o){return t("dms",n,r,e,u,o)},n.dms_to_geog=function(n,t,e,u){return r("dms",n,t,e,u)},n.geog_to_ddm=function(n,r,e,u,o){return t("ddm",n,r,e,u,o)},n.ddm_to_geog=function(n,t,e,u){return r("ddm",n,t,e,u)},n.geog_to_dd=function(n,r,e,u,o){return t("dd",n,r,e,u,o)},n.dd_to_geog=function(n,t,e,u){return r("dd",n,t,e,u)}}(Y||(Y={})),function(n){n.init=function(){n.PE_MGRS_STYLE_NEW=L.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,n.PE_MGRS_STYLE_OLD=L.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,n.PE_MGRS_STYLE_AUTO=L.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,n.PE_MGRS_180_ZONE_1_PLUS=L.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,n.PE_MGRS_ADD_SPACES=L.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},n.geog_to_mgrs_extended=function(n,t,r,e,u,o,l){L.ensureCache.prepare();let s=0;n&&(s=L.getPointer(n));const i=cn(r),c=L.ensureFloat64(i),a=sn(t,H.PE_MGRS_MAX),f=L.ensureInt32(a),h=L._pe_geog_to_mgrs_extended(s,t,c,e,u,o,f);if(h)for(let n=0;n<t;n++)l[n]=L.UTF8ToString(a[n]);return h},n.mgrs_to_geog_extended=function(n,t,r,e,u){L.ensureCache.prepare();let o=0;n&&(o=L.getPointer(n));const l=r.map((n=>L.ensureString(n))),s=L.ensureInt32(l),i=L.ensureFloat64(new Array(2*t)),c=L._pe_mgrs_to_geog_extended(o,t,s,e,i);return c&&an(u,t,i),c}}(nn||(nn={})),function(n){n.geog_to_usng=function(n,t,r,e,u,o,l){L.ensureCache.prepare();let s=0;n&&(s=L.getPointer(n));const i=cn(r),c=L.ensureFloat64(i),a=sn(t,H.PE_MGRS_MAX),f=L.ensureInt32(a),h=L._pe_geog_to_usng(s,t,c,e,u,o,f);if(h)for(let n=0;n<t;n++)l[n]=L.UTF8ToString(a[n]);return h},n.usng_to_geog=function(n,t,r,e){L.ensureCache.prepare();let u=0;n&&(u=L.getPointer(n));const o=r.map((n=>L.ensureString(n))),l=L.ensureInt32(o),s=L.ensureFloat64(new Array(2*t)),i=L._pe_usng_to_geog(u,t,l,s);return i&&an(e,t,s),i}}(tn||(tn={})),function(n){n.init=function(){n.PE_UTM_OPTS_NONE=L.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,n.PE_UTM_OPTS_ADD_SPACES=L.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,n.PE_UTM_OPTS_NS=L.PeNotationUtm.prototype.PE_UTM_OPTS_NS},n.geog_to_utm=function(n,t,r,e,u){L.ensureCache.prepare();let o=0;n&&(o=L.getPointer(n));const l=cn(r),s=L.ensureFloat64(l),i=sn(t,H.PE_UTM_MAX),c=L.ensureInt32(i),a=L._pe_geog_to_utm(o,t,s,e,c);if(a)for(let n=0;n<t;n++)u[n]=L.UTF8ToString(i[n]);return a},n.utm_to_geog=function(n,t,r,e,u){L.ensureCache.prepare();let o=0;n&&(o=L.getPointer(n));const l=r.map((n=>L.ensureString(n))),s=L.ensureInt32(l),i=L.ensureFloat64(new Array(2*t)),c=L._pe_utm_to_geog(o,t,s,e,i);return c&&an(u,t,i),c}}(rn||(rn={})),function(n){const t=new Map;n.init=function(){n.PE_PCSINFO_OPTION_NONE=L.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,n.PE_PCSINFO_OPTION_DOMAIN=L.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,n.PE_POLE_OUTSIDE_BOUNDARY=L.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,n.PE_POLE_POINT=L.PePCSInfo.prototype.PE_POLE_POINT},n.generate=function(r,e=n.PE_PCSINFO_OPTION_DOMAIN){let u,o;return t.has(r)&&(o=t.get(r),o[e]&&(u=o[e])),u||(u=L.PePCSInfo.prototype.generate(r,e),o||(o=[],t.set(r,o)),o[e]=u),u}}(en||(en={})),(un||(un={})).version_string=function(){return L.PeVersion.prototype.version_string()};const fn=Object.freeze({__proto__:null,get _pe(){return L},isLoaded:V,isSupported:function(){return!!t("esri-wasm")},load:$,get PeCSTransformations(){return B},get PeDefs(){return H},get PeFactory(){return O},get PeGCSExtent(){return q},get PeGTlistExtended(){return J},get PeGTlistExtendedEntry(){return Q},get PeGTTransformations(){return X},get PeNotationDms(){return Y},get PeNotationMgrs(){return nn},get PeNotationUsng(){return tn},get PeNotationUtm(){return rn},get PePCSInfo(){return en},get PeVersion(){return un},_init:on});let hn=0;class dn{constructor(n=null){this.uid=hn++,n?(this._wkt=void 0!==n.wkt?n.wkt:null,this._wkid=void 0!==n.wkid?n.wkid:-1,this._isInverse=void 0!==n.isInverse&&!0===n.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(n){const t=new dn;return t._wkt=n.wkt,t._wkid=n.wkid,t._isInverse=n.isInverse,t}get wkt(){return this._wkt}set wkt(n){this._wkt=n,this.uid=hn++}get wkid(){return this._wkid}set wkid(n){this._wkid=n,this.uid=hn++}get isInverse(){return this._isInverse}set isInverse(n){this._isInverse=n,this.uid=hn++}getInverse(){const n=new dn;return n._wkt=this.wkt,n._wkid=this._wkid,n._isInverse=!this.isInverse,n}}class pn{constructor(n){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,n&&n.steps)for(const t of n.steps)this.steps.push(t instanceof dn?t:new dn({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}static cacheKey(n,t){return[null!=n.wkid?n.wkid.toString():"-1",null!=n.wkt?n.wkt.toString():"",null!=t.wkid?t.wkid.toString():"-1",null!=t.wkt?t.wkt.toString():""].join(",")}static fromGE(n){const t=new pn;let r="";for(const e of n.steps){const n=dn.fromGE(e);t.steps.push(n),r+=n.uid.toString()+","}return t._cached_projection={},t._gtlistentry=null,t._chain=r,t}getInverse(){const n=new pn;n.steps=[];for(let t=this.steps.length-1;t>=0;t--)n.steps.push(this.steps[t].getInverse());return n}getGTListEntry(){let n="";for(const t of this.steps)n+=t.uid.toString()+",";return n!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=n),this._gtlistentry}assignCachedGe(n,t,r){this._cached_projection[pn.cacheKey(n,t)]=r}getCachedGeTransformation(n,t){let r="";for(const n of this.steps)r+=n.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=r);const e=this._cached_projection[pn.cacheKey(n,t)];return void 0===e?null:e}}let Mn=null,mn=null,wn=null,gn={};function yn(){return!!Mn&&V()}function En(n){return r(wn)&&(wn=Promise.all([$(),import("./p-27823887.js").then((n=>n.g)),import("./p-724d84bd.js")])),wn.then((([,t,{hydratedAdapter:r}])=>{e(n),mn=r,Mn=t.default,Mn._enableProjection(fn)}))}function bn(n,t,r=null){return Array.isArray(n)?0===n.length?[]:Pn(mn,n,n[0].spatialReference,t,r):Pn(mn,[n],n.spatialReference,t,r)[0]}function Pn(n,t,e,u,o=null){if(r(e)||r(u))return t;if(Fn(e,u,o))return t.map((n=>l(Gn(n,e,u))));if(r(o)){const n=pn.cacheKey(e,u);void 0!==gn[n]?o=gn[n]:(o=Tn(e,u,null),r(o)&&(o=new pn),gn[n]=o)}if(r(Mn))throw new Cn;return Mn._project(n,t,e,u,o)}function Tn(n,t,e=null){if(r(Mn))throw new Cn;if(r(n)||r(t))return null;const u=Mn._getTransformation(mn,n,t,e,null==e?void 0:e.spatialReference);return null!==u?pn.fromGE(u):null}class Cn extends c{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function Fn(n,t,r){return!r&&(!!u(n,t)||o(n)&&o(t)&&!!Ft(n,t,St))}async function vn(n,t,r,e){if(!yn())if(Array.isArray(n)){for(const{source:t,dest:r,geographicTransformation:u}of n)if(!Fn(t,r,u))return En(e)}else if(!Fn(n,t,r))return En(e)}function An(n,t){switch(Ft(n,t,St)){case Qn:return"copy3";case dt:return"wgs84ToSphericalECEF";case rt:return"wgs84ToWebMercator";case ot:return"wgs84ToPlateCarree";case Et:return"wgs84ToWGS84ECEF";case Xn:return"webMercatorToWGS84";case Yn:return"webMercatorToSphericalECEF";case nt:return"webMercatorToWGS84ECEF";case st:return"webMercatorToPlateCarree";case bt:return"wgs84ECEFToWGS84";case Pt:return"wgs84ECEFToSphericalECEF";case Tt:return"wgs84ECEFToWebMercator";case wt:return"sphericalECEFToWGS84";case gt:return"sphericalECEFToWebMercator";case mt:return"sphericalMarsPCPFToMars2000";case Mt:return"sphericalMoonPCPFToMoon2000";case yt:return"sphericalECEFToWGS84ECEF";case ht:return"mars2000ToSphericalPCPF";case ft:return"moon2000ToSphericalPCPF";default:return null}}function Gn(n,t,r){return n?"x"in n?Sn(n,t,new s,r,0):"xmin"in n?function(n,t,r,e){const{xmin:u,ymin:o,xmax:l,ymax:s,hasZ:i,hasM:c}=n;return _n(u,o,i?n.zmin:0,t,Nt,e)?(r.xmin=Nt[0],r.ymin=Nt[1],i&&(r.zmin=Nt[2]),_n(l,s,i?n.zmax:0,t,Nt,e)?(r.xmax=Nt[0],r.ymax=Nt[1],i&&(r.zmax=Nt[2]),c&&(r.mmin=n.mmin,r.mmax=n.mmax),r.spatialReference=e,r):null):null}(n,t,new i,r):"rings"in n?xn(n,t,new N,r,0):"paths"in n?function(n,t,r,e){const{paths:u,hasZ:o,hasM:l}=n,s=[];return Kn(u,o,l,t,s,e,0)?(r.paths=s,r.spatialReference=e,r.hasZ=o,r.hasM=l,r):null}(n,t,new U,r):"points"in n?function(n,t,r,e){const{points:u,hasZ:o,hasM:l}=n,s=[],i=u.length,c=[];for(const n of u)c.push(n[0],n[1],o?n[2]:0);if(!zn(c,t,0,c,e,0,i))return null;for(let n=0;n<i;++n){const t=3*n,r=c[t],e=c[t+1];s.push(o&&l?[r,e,c[t+2],u[n][3]]:o?[r,e,c[t+2]]:l?[r,e,u[n][2]]:[r,e])}return r.points=s,r.spatialReference=e,r.hasZ=o,r.hasM=l,r}(n,t,new Z,r):null:null}function jn(n,t,e=t.spatialReference,u=0){return!r(e)&&M(Sn(n,n.spatialReference,t,e,u))}function Sn(n,t,r,e,u){Nt[0]=n.x,Nt[1]=n.y;const o=n.z;return Nt[2]=void 0!==o?o:u,zn(Nt,t,0,Nt,e,0,1)?(r.x=Nt[0],r.y=Nt[1],r.spatialReference=e,void 0===o?(r.z=void 0,r.hasZ=!1):(r.z=Nt[2],r.hasZ=!0),void 0===n.m?(r.m=void 0,r.hasM=!1):(r.m=n.m,r.hasM=!0),r):null}function kn(n,t,r=t.spatialReference,e=0){return M(r)&&M(xn(n,n.spatialReference,t,r,e))}function xn(n,t,r,e,u){const{rings:o,hasZ:l,hasM:s}=n,i=[];return Kn(o,l,s,t,i,e,u)?(r.rings=i,r.spatialReference=e,r.hasZ=l,r.hasM=s,r):null}function In(n,t,e){if(r(t)||r(e))return null;const u=new s({spatialReference:e});return zn(n,t,0,Nt,e,0,1)?(u.x=Nt[0],u.y=Nt[1],u.z=Nt[2],u):null}function Rn(n,t,r){return zn(n,t,0,Nt,r.spatialReference,0,1)?(r.x=Nt[0],r.y=Nt[1],r.z=Nt[2],r):null}function Wn(n,t,r,e=0){Nt[0]=n.x,Nt[1]=n.y;const u=n.z;return Nt[2]=void 0!==u?u:e,zn(Nt,n.spatialReference,0,t,r,0,1)}function _n(n,t,r,e,u,o){return Rt[0]=n,Rt[1]=t,Rt[2]=r,zn(Rt,e,0,u,o,0,1)}function Nn(n,t,e,u){return!(r(t)||r(u)||n.length<2)&&(2===n.length&&(Rt[0]=n[0],Rt[1]=n[1],Rt[2]=0,n=Rt),zn(n,t,0,e,u,0,1))}function Un(n,t){Nt[0]=n.x,Nt[1]=n.y;const r=n.z;return Nt[2]=void 0!==r?r:0,Zn(Nt,n.spatialReference,t)}function Zn(n,t,e){return function(n,t,e){if(r(t))return!1;const u=Jn(t,Gt),o=Ct[u][6];return!r(o)&&(o(n,0,Rt,0),e!==Rt&&(e[0]=Rt[0],e[1]=Rt[1],e.length>2&&(e[2]=Rt[2])),!0)}(n,t,e)}function zn(n,t,e,u,o,l,s=1){const i=Ft(t,o,St);if(r(i))return!1;if(i===Qn){if(n===u&&e===l)return!0;const t=e+3*s;for(let r=e,o=l;r<t;r++,o++)u[o]=n[r];return!0}const c=e+3*s;for(let t=e,r=l;t<c;t+=3,r+=3)i(n,t,u,r);return!0}function Dn(n,t,r,e,u){P(Nt,n),T(Ut,n,t),Nn(Nt,r,Nt,u),Nn(Ut,r,Ut,u),C(e,Ut,Nt),F(e,e)}function Kn(n,t,r,e,u,o,l=0){const s=new Array;for(const r of n)for(const n of r)s.push(n[0],n[1],t?n[2]:l);if(!zn(s,e,0,s,o,0,s.length/3))return!1;let i=0;u.length=0;for(const e of n){const n=new Array;for(const u of e)t&&r?n.push([s[i++],s[i++],s[i++],u[3]]):t?n.push([s[i++],s[i++],s[i++]]):r?(n.push([s[i++],s[i++],u[2]]),i++):(n.push([s[i++],s[i++]]),i++);u.push(n)}return!0}function Ln(n,t,e,u){if(r(t)||r(u))return!1;const o=vt(t,u,kt);if(o.projector===Qn)return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],!0;if(r(o.projector))return!1;const{source:l,dest:s}=o;if(3===s.spatialReferenceId){const t=Ct[l.spatialReferenceId][2];return!r(t)&&(t(n,0,Wt,0),rt(Wt,0,e,0),e[3]=Vn(Wt[1],n[2],n[3],m.radius),!0)}if(2!==l.spatialReferenceId&&5!==l.spatialReferenceId||12!==s.spatialReferenceId)o.projector(n,0,e,0),e[3]=n[3]*l.metersPerUnit/s.metersPerUnit;else{const t=Ct[1][12];let r=n[3];M(Ct[l.spatialReferenceId][1])&&M(t)&&(r=Vn(n[1],n[2],n[3],m.radius)),o.projector(n,0,e,0),e[3]=r}return!0}function Vn(n,t,r,e){const u=Math.abs(xt*n)+Math.asin(r/(e+t));return u>=Math.PI/2?Number.MAX_VALUE:r/Math.cos(u)}function $n(n,t,r,e){return!(null==n||(u(t,e)?(z(r,n),0):(Rt[0]=n[0],Rt[1]=n[1],Rt[2]=0,!zn(Rt,t,0,Rt,e,0,1)||(r[0]=Rt[0],r[1]=Rt[1],Rt[0]=n[2],Rt[1]=n[3],Rt[2]=0,!zn(Rt,t,0,Rt,e,0,1)||(r[2]=Rt[0],r[3]=Rt[1],0)))))}function Bn(n,t,e,o){if(r(t)||r(o))return!1;const l=Jn(t,Gt),s=Jn(o,jt);if(l===s&&0!==l||u(t,o))return e[0]=1,e[1]=1,e[2]=1,!0;if(1===l){const t=v(n),r=t/Math.sqrt(n[0]*n[0]+n[1]*n[1]),u=t/m.radius;if(3===s)return e[0]=r*u,e[1]=r*u,e[2]=1,!0;if(2===s||5===s){const n=180/(m.radius*Math.PI);return e[0]=n*r*u,e[1]=n*u,e[2]=1,!0}}else if(12===l&&(2===s||5===s))return e[0]=ut,e[1]=ut,e[2]=1,!0;return!1}function Hn(n,t,e,o){if(r(n)||r(o))return!1;const l=Jn(n,Gt),s=Jn(o,jt);if(l===s&&!On(s)&&(0!==l||u(n,o)))return I(e),R(e,e,t),!0;if(On(s)){const n=Ct[l][11],u=Ct[11][s];return!r(n)&&!r(u)&&(n(t,0,Wt,0),u(Wt,0,_t,0),qn(xt*Wt[0],xt*Wt[1],e),e[12]=_t[0],e[13]=_t[1],e[14]=_t[2],!0)}if(!(3!==s&&12!==s||2!==l&&1!==l&&3!==l)){const n=Ct[l][11],u=Ct[11][s];return!r(n)&&!r(u)&&(n(t,0,Wt,0),u(Wt,0,_t,0),1===l?function(n,t,r){qn(xt*Wt[0],xt*Wt[1],r),W(r,r)}(0,0,e):I(e),e[12]=_t[0],e[13]=_t[1],e[14]=_t[2],!0)}return!1}function On(n){return 1===n||7===n||9===n}function qn(n,t,r){const e=Math.sin(n),u=Math.cos(n),o=Math.sin(t),l=Math.cos(t),s=r;return s[0]=-e,s[4]=-o*u,s[8]=l*u,s[12]=0,s[1]=u,s[5]=-o*e,s[9]=l*e,s[13]=0,s[2]=0,s[6]=l,s[10]=o,s[14]=0,s[3]=0,s[7]=0,s[11]=0,s[15]=1,s}function Jn(n,t){return t.spatialReference===n?t.spatialReferenceId:(t.spatialReference=n,"metersPerUnit"in t&&(t.metersPerUnit=G(n,1)),t.spatialReferenceId=n.wkt===j.wkt?1:a(n)?2:f(n)?3:h(n)?12:n.wkt===S.wkt?4:4490===n.wkid?5:n.wkt===k.wkt?7:n.wkt===x.wkt?9:d(n)?8:p(n)?10:0)}function Qn(n,t,r,e){n!==r&&(r[e++]=n[t++],r[e++]=n[t++],r[e]=n[t])}function Xn(n,t,r,e){r[e++]=It*(n[t++]/m.radius),r[e++]=It*(Math.PI/2-2*Math.atan(Math.exp(-n[t++]/m.radius))),r[e]=n[t]}function Yn(n,t,r,e){Xn(n,t,r,e),dt(r,e,r,e)}function nt(n,t,r,e){Xn(n,t,r,e),Et(r,e,r,e)}function tt(n,t,r,e,u){const o=.4999999*Math.PI,l=A(xt*n[t+1],-o,o),s=Math.sin(l);r[e++]=xt*n[t]*u.radius,r[e++]=u.halfSemiMajorAxis*Math.log((1+s)/(1-s)),r[e]=n[t+2]}function rt(n,t,r,e){tt(n,t,r,e,m)}const et=m.radius*Math.PI/180,ut=180/(m.radius*Math.PI);function ot(n,t,r,e){r[e]=n[t]*et,r[e+1]=n[t+1]*et,r[e+2]=n[t+2]}function lt(n,t,r,e){r[e]=n[t]*ut,r[e+1]=n[t+1]*ut,r[e+2]=n[t+2]}function st(n,t,r,e){Xn(n,t,r,e),ot(r,e,r,e)}function it(n){if(r(n))return!1;const t=Jn(n,Gt);return!!Ct[t][6]}function ct(n,t,r,e,u=0){const o=e+u,l=Math.cos(r);n[0]=Math.cos(t)*l*o,n[1]=Math.sin(t)*l*o,n[2]=Math.sin(r)*o}function at(n,t,r,e,u){const o=u+n[t+2],l=xt*n[t+1],s=xt*n[t],i=Math.cos(l);r[e++]=Math.cos(s)*i*o,r[e++]=Math.sin(s)*i*o,r[e]=Math.sin(l)*o}function ft(n,t,r,e){at(n,t,r,e,w.radius)}function ht(n,t,r,e){at(n,t,r,e,g.radius)}function dt(n,t,r,e){at(n,t,r,e,m.radius)}function pt(n,t,r,e,u){const o=n[t],l=n[t+1],s=n[t+2],i=Math.sqrt(o*o+l*l+s*s),c=E(s/(0===i?1:i)),a=Math.atan2(l,o);r[e++]=It*a,r[e++]=It*c,r[e]=i-u}function Mt(n,t,r,e){pt(n,t,r,e,w.radius)}function mt(n,t,r,e){pt(n,t,r,e,g.radius)}function wt(n,t,r,e){pt(n,t,r,e,m.radius)}function gt(n,t,r,e){wt(n,t,r,e),rt(r,e,r,e)}function yt(n,t,r,e){wt(n,t,r,e),Et(r,e,r,e)}function Et(n,t,r,e){!function(n,t,r,e,u){const o=xt*n[t],l=xt*n[t+1],s=n[t+2],i=Math.sin(l),c=Math.cos(l),a=u.radius/Math.sqrt(1-u.eccentricitySquared*i*i);r[e++]=(a+s)*c*Math.cos(o),r[e++]=(a+s)*c*Math.sin(o),r[e++]=(a*(1-u.eccentricitySquared)+s)*i}(n,t,r,e,m)}function bt(n,t,r,e){const u=D,o=n[t],l=n[t+1],s=n[t+2];let i,c,a,f,h,d,p,M,w,g,y,E,b,P,T,C,F,v,A,G,j;i=Math.abs(s),c=o*o+l*l,a=Math.sqrt(c),f=c+s*s,h=Math.sqrt(f),G=Math.atan2(l,o),d=s*s/f,p=c/f,P=u.a2/h,T=u.a3-u.a4/h,p>.3?(M=i/h*(1+p*(u.a1+P+d*T)/h),A=Math.asin(M),g=M*M,w=Math.sqrt(1-g)):(w=a/h*(1-d*(u.a5-P-p*T)/h),A=Math.acos(w),g=1-w*w,M=Math.sqrt(g)),y=1-m.eccentricitySquared*g,E=m.radius/Math.sqrt(y),b=u.a6*E,P=a-E*w,T=i-b*M,F=w*P+M*T,C=w*T-M*P,v=C/(b/y+F),A+=v,j=F+C*v/2,s<0&&(A=-A),r[e++]=It*G,r[e++]=It*A,r[e]=j}function Pt(n,t,r,e){bt(n,t,r,e),dt(r,e,r,e)}function Tt(n,t,r,e){bt(n,t,r,e),rt(r,e,r,e)}const Ct={2:{5:null,8:null,10:null,11:Qn,6:Qn,1:dt,7:null,9:null,0:null,3:rt,12:ot,2:Qn,4:Et},5:{5:Qn,8:null,10:null,11:Qn,6:Qn,1:dt,7:null,9:null,0:null,3:null,12:ot,2:null,4:Et},8:{5:null,8:Qn,10:null,11:Qn,6:null,1:null,7:ht,9:null,0:null,3:null,12:null,2:null,4:null},10:{5:null,8:null,10:Qn,11:Qn,6:null,1:null,7:null,9:ft,0:null,3:null,12:null,2:null,4:null},3:{5:null,8:null,10:null,11:Xn,6:Xn,1:Yn,7:null,9:null,0:null,3:Qn,12:st,2:Xn,4:nt},4:{5:bt,8:null,10:null,11:bt,6:bt,1:Pt,7:null,9:null,0:null,3:Tt,12:function(n,t,r,e){bt(n,t,r,e),ot(r,e,r,e)},2:bt,4:Qn},1:{5:wt,8:null,10:null,11:wt,6:wt,1:Qn,7:null,9:null,0:null,3:gt,12:function(n,t,r,e){wt(n,t,r,e),ot(r,e,r,e)},2:wt,4:yt},7:{5:null,8:mt,10:null,11:mt,6:null,1:null,7:Qn,9:null,0:null,3:null,12:null,2:null,4:null},9:{5:null,8:null,10:Mt,11:Mt,6:null,1:null,7:null,9:Qn,0:null,3:null,12:null,2:null,4:null},0:{5:null,8:null,10:null,11:null,6:null,1:null,7:null,9:null,0:Qn,3:null,12:null,2:null,4:null},11:{5:Qn,8:Qn,10:Qn,11:Qn,6:Qn,1:dt,7:ht,9:ft,0:null,3:rt,12:ot,2:Qn,4:Et},6:{5:null,8:null,10:null,11:Qn,6:Qn,1:dt,7:null,9:null,0:null,3:null,12:ot,2:Qn,4:Et},12:{5:lt,8:null,10:null,11:lt,6:lt,1:function(n,t,r,e){lt(n,t,r,e),dt(r,e,r,e)},7:null,9:null,0:null,3:function(n,t,r,e){lt(n,t,r,e),rt(r,e,r,e)},12:Qn,2:lt,4:function(n,t,r,e){lt(n,t,r,e),Et(r,e,r,e)}}};function Ft(n,t,e=At()){return r(n)||r(t)?null:vt(n,t,e).projector}function vt(n,t,e){if(r(n)||r(t)||e.source.spatialReference===n&&e.dest.spatialReference===t)return e;const o=Jn(n,e.source),l=Jn(t,e.dest);return e.projector=0===o&&0===l?u(n,t)?Qn:null:Ct[o][l],e}function At(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Qn}}const Gt={spatialReference:null,spatialReferenceId:0},jt={spatialReference:null,spatialReferenceId:0},St=At(),kt=At(),xt=b(1),It=y(1),Rt=_(),Wt=_(),_t=_(),Nt=_(),Ut=_();export{it as $,tt as B,H as E,Ln as F,yn as H,Zn as I,En as J,bn as O,Pn as Q,In as R,nn as T,Tn as Y,rn as a,Nn as b,Un as c,$n as d,pt as e,tn as f,Y as g,kn as h,O as i,Rn as j,Bn as k,An as l,Dn as m,ct as n,jn as o,vn as r,pn as s,Fn as t,Gn as u,Hn as v,Wn as w,zn as x,_n as y,qn as z}