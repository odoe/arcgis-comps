import{a as t,e as n}from"./p-8f986f60.js";import{a,n as r,r as o,t as e}from"./p-d3105731.js";import{B as s,h as u,A as c,n as h,a1 as M,N as i,a2 as f,a3 as l,a4 as p,E as m,a5 as d,_ as g,Y as q,a as A,z as j}from"./p-2f398ed1.js";function x(t,n,a){a*=.5;const r=Math.sin(a);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(a),t}function _(t,n){const r=2*Math.acos(n[3]),o=Math.sin(r/2);return o>a?(t[0]=n[0]/o,t[1]=n[1]/o,t[2]=n[2]/o):(t[0]=1,t[1]=0,t[2]=0),r}function y(t,n,a){const r=n[0],o=n[1],e=n[2],s=n[3],u=a[0],c=a[1],h=a[2],M=a[3];return t[0]=r*M+s*u+o*h-e*c,t[1]=o*M+s*c+e*u-r*h,t[2]=e*M+s*h+r*c-o*u,t[3]=s*M-r*u-o*c-e*h,t}function E(t,n,r,o){const e=n[0],s=n[1],u=n[2],c=n[3];let h,M,i,f,l,p=r[0],m=r[1],d=r[2],g=r[3];return M=e*p+s*m+u*d+c*g,M<0&&(M=-M,p=-p,m=-m,d=-d,g=-g),1-M>a?(h=Math.acos(M),i=Math.sin(h),f=Math.sin((1-o)*h)/i,l=Math.sin(o*h)/i):(f=1-o,l=o),t[0]=f*e+l*p,t[1]=f*s+l*m,t[2]=f*u+l*d,t[3]=f*c+l*g,t}function z(t,n){const a=n[0],r=n[1],o=n[2],e=n[3],s=a*a+r*r+o*o+e*e,u=s?1/s:0;return t[0]=-a*u,t[1]=-r*u,t[2]=-o*u,t[3]=e*u,t}function L(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t}function Y(t,n){const a=n[0]+n[4]+n[8];let r;if(a>0)r=Math.sqrt(a+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{let a=0;n[4]>n[0]&&(a=1),n[8]>n[3*a+a]&&(a=2);const o=(a+1)%3,e=(a+2)%3;r=Math.sqrt(n[3*a+a]-n[3*o+o]-n[3*e+e]+1),t[a]=.5*r,r=.5/r,t[3]=(n[3*o+e]-n[3*e+o])*r,t[o]=(n[3*o+a]+n[3*a+o])*r,t[e]=(n[3*e+a]+n[3*a+e])*r}return t}function b(t,n,a,r){const o=.5*Math.PI/180;n*=o,a*=o,r*=o;const e=Math.sin(n),s=Math.cos(n),u=Math.sin(a),c=Math.cos(a),h=Math.sin(r),M=Math.cos(r);return t[0]=e*c*M-s*u*h,t[1]=s*u*M+e*c*h,t[2]=s*c*h-e*u*M,t[3]=s*c*M+e*u*h,t}const v=s,B=u,N=c,O=y,T=h,W=M,X=i,Z=f,k=Z,w=l,C=w,D=p,F=m,G=d;function H(t,n,a){const r=j(n,a);return r<-.999999?(g(I,J,n),q(I)<1e-6&&g(I,K,n),A(I,I),x(t,I,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(g(I,n,a),t[0]=I[0],t[1]=I[1],t[2]=I[2],t[3]=1+r,D(t,t))}const I=r(),J=o(1,0,0),K=o(0,1,0),P=t(),Q=t(),R=n();Object.freeze({__proto__:null,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},setAxisAngle:x,getAxisAngle:_,multiply:y,rotateX:function(t,n,a){a*=.5;const r=n[0],o=n[1],e=n[2],s=n[3],u=Math.sin(a),c=Math.cos(a);return t[0]=r*c+s*u,t[1]=o*c+e*u,t[2]=e*c-o*u,t[3]=s*c-r*u,t},rotateY:function(t,n,a){a*=.5;const r=n[0],o=n[1],e=n[2],s=n[3],u=Math.sin(a),c=Math.cos(a);return t[0]=r*c-e*u,t[1]=o*c+s*u,t[2]=e*c+r*u,t[3]=s*c-o*u,t},rotateZ:function(t,n,a){a*=.5;const r=n[0],o=n[1],e=n[2],s=n[3],u=Math.sin(a),c=Math.cos(a);return t[0]=r*c+o*u,t[1]=o*c-r*u,t[2]=e*c+s*u,t[3]=s*c-e*u,t},calculateW:function(t,n){const a=n[0],r=n[1],o=n[2];return t[0]=a,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-a*a-r*r-o*o)),t},slerp:E,random:function(t){const n=e(),a=e(),r=e(),o=Math.sqrt(1-n),s=Math.sqrt(n);return t[0]=o*Math.sin(2*Math.PI*a),t[1]=o*Math.cos(2*Math.PI*a),t[2]=s*Math.sin(2*Math.PI*r),t[3]=s*Math.cos(2*Math.PI*r),t},invert:z,conjugate:L,fromMat3:Y,fromEuler:b,str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},copy:v,set:B,add:N,mul:O,scale:T,dot:W,lerp:X,length:Z,len:k,squaredLength:w,sqrLen:C,normalize:D,exactEquals:F,equals:G,rotationTo:H,sqlerp:function(t,n,a,r,o,e){return E(P,n,o,e),E(Q,a,r,e),E(t,P,Q,2*e*(1-e)),t},setAxes:function(t,n,a,r){const o=R;return o[0]=a[0],o[3]=a[1],o[6]=a[2],o[1]=r[0],o[4]=r[1],o[7]=r[2],o[2]=-n[0],o[5]=-n[1],o[8]=-n[2],D(t,Y(t,o))}});export{b as C,v as F,x as I,F as N,_ as P,H as S,z as k,y as v,L as w}