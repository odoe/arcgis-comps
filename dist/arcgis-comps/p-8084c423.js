import{A as p,af as i,e as s,d as t,i as r}from"./p-e58503d5.js";import{h as o}from"./p-54330161.js";import{r as m,n as j}from"./p-4d38e149.js";import{y as e,s as a,l as d}from"./p-ea916a39.js";import{$ as c}from"./p-712b0be6.js";import{p as b}from"./p-cbbdb7db.js";import{t as f}from"./p-7de54cd0.js";import{u as h}from"./p-a63f7978.js";import"./p-53bb6ab4.js";import"./p-b79fcce3.js";import"./p-93765525.js";import"./p-765e6c28.js";import"./p-a9a30646.js";import"./p-8747982c.js";import"./p-8bc9b36a.js";import"./p-7a658388.js";import"./p-e273719b.js";import"./p-74de0937.js";import"./p-2f398ed1.js";import"./p-d3105731.js";import"./p-fb38a9d0.js";import"./p-f94762ac.js";import"./p-8a919d07.js";import"./p-efbca0ca.js";import"./p-c048b814.js";import"./p-01e5a461.js";import"./p-b9aa4901.js";import"./p-6484267b.js";import"./p-400ca3dc.js";import"./p-9b7a2176.js";import"./p-e654504b.js";import"./p-0eb619a6.js";import"./p-4d17d2cd.js";import"./p-b5b00e38.js";import"./p-e94b450b.js";import"./p-7731c620.js";import"./p-5d962998.js";import"./p-1189fa83.js";import"./p-37058f88.js";import"./p-3e39c093.js";import"./p-7a5bfd29.js";import"./p-7d081d01.js";import"./p-afac6fb2.js";import"./p-ca295674.js";import"./p-41f2b2dd.js";import"./p-612a2c14.js";import"./p-d443df87.js";import"./p-7ca40eac.js";import"./p-9087b4d3.js";import"./p-c1cd5521.js";import"./p-ca4492df.js";import"./p-9d34911e.js";import"./p-182bb5be.js";import"./p-db87794e.js";import"./p-2db4840f.js";import"./p-bba8b671.js";import"./p-5e833dfc.js";import"./p-a131049b.js";import"./p-a2324023.js";import"./p-dc852195.js";import"./p-ff2962f5.js";import"./p-da9e7ba9.js";import"./p-a8f0aa27.js";import"./p-4a96de15.js";import"./p-5032dfbd.js";import"./p-a87cccba.js";import"./p-dae095dd.js";import"./p-0e784e4d.js";import"./p-dbdf15fc.js";import"./p-e0d9ff4c.js";import"./p-08e5f531.js";import"./p-dfc6337f.js";import"./p-9f1c2d50.js";import"./p-6b2eb7a7.js";import"./p-889f7a78.js";import"./p-1f81b35d.js";import"./p-81b9df84.js";import"./p-5ce39624.js";import"./p-e9bae5e9.js";import"./p-b0565d49.js";import"./p-51a17e75.js";import"./p-d208934e.js";import"./p-480e5606.js";import"./p-22c9f19c.js";import"./p-c096b5df.js";import"./p-da33e926.js";import"./p-a24f7752.js";import"./p-ccdb8e80.js";import"./p-4a6dc5e4.js";import"./p-6a92ecb9.js";import"./p-1ab449fc.js";import"./p-a6c8fb32.js";import"./p-0edb3309.js";import"./p-e8160b60.js";import"./p-2e8ad983.js";import"./p-e3270d48.js";import"./p-e44bd0a6.js";import"./p-fe68aab5.js";import"./p-c6970847.js";import"./p-de86b3c9.js";import"./p-37d3434c.js";import"./p-120b7410.js";import"./p-b1eff69d.js";import"./p-612de336.js";import"./p-91fe06d4.js";import"./p-ab0e9273.js";import"./p-15a9486c.js";import"./p-2ae44317.js";import"./p-9f58a277.js";import"./p-9e860e7b.js";import"./p-f3659a34.js";import"./p-ca657fcf.js";import"./p-b312c1fd.js";import"./p-b8beb0d3.js";import"./p-2a99994a.js";import"./p-76f37e40.js";import"./p-eee9ef50.js";import"./p-6ded4c02.js";import"./p-1e473dab.js";import"./p-d1d9dbe4.js";import"./p-d57f9971.js";import"./p-e6fe5d89.js";import"./p-56ed1c7a.js";import"./p-746a9d8f.js";import"./p-db4d63dc.js";import"./p-2c84c65f.js";import"./p-c93d2280.js";import"./p-fea9512d.js";import"./p-b709baea.js";import"./p-3bcc4805.js";import"./p-3721667d.js";import"./p-4019eec3.js";import"./p-85e8677e.js";import"./p-8f986f60.js";import"./p-a3955219.js";import"./p-f6a340f9.js";import"./p-c45aa9e8.js";import"./p-d87e82bf.js";import"./p-b05e75b2.js";import"./p-f06611ed.js";import"./p-2f5c7e83.js";import"./p-58c16730.js";import"./p-a8d1cf30.js";import"./p-a4587ab0.js";import"./p-37f005a2.js";import"./p-3c70d22f.js";import"./p-1c99992b.js";import"./p-bdf9e611.js";import"./p-eb48bb01.js";import"./p-c2152437.js";import"./p-95909347.js";import"./p-0bb84768.js";import"./p-19bc1e3d.js";import"./p-7f47b970.js";import"./p-0d1e969a.js";import"./p-5763113b.js";import"./p-a72732f2.js";import"./p-340cd100.js";import"./p-728dcbb0.js";import"./p-ea0c022e.js";import"./p-dcdb33cf.js";import"./p-025c0c8e.js";import"./p-e72a43d7.js";import"./p-97ec6ae5.js";import"./p-382f7028.js";import"./p-04a0cfca.js";import"./p-d2d87566.js";import"./p-db63fa0e.js";import"./p-b03021c3.js";import"./p-1907e0bc.js";import"./p-5f8e8f6c.js";import"./p-e31c89bd.js";import"./p-cc2794db.js";import"./p-f8414adc.js";import"./p-8925cd73.js";import"./p-58386239.js";import"./p-285c6a34.js";import"./p-e9596294.js";import"./p-92108618.js";import"./p-8fa44ebc.js";import"./p-0923eebd.js";import"./p-568eb6e8.js";import"./p-de5b11d6.js";import"./p-c7a58085.js";import"./p-389c5380.js";import"./p-21bd46cc.js";import"./p-4f86c37f.js";import"./p-fd584619.js";import"./p-31225789.js";import"./p-954786fa.js";import"./p-70787875.js";import"./p-1f1360f9.js";import"./p-1a2ab148.js";import"./p-09dd2137.js";import"./p-42bb6c1e.js";import"./p-2e37d910.js";import"./p-24d8fcee.js";import"./p-fbb06b4d.js";import"./p-4414d64f.js";import"./p-1ccb0bf6.js";import"./p-1c2ff3a7.js";import"./p-77b9a0fc.js";import"./p-6fe4db61.js";import"./p-9fe35ea1.js";import"./p-f70b836b.js";let l=class extends(c(b(h))){constructor(){super(...arguments),this.type="integrated-mesh-3d",this.lodFactor=1,this._elevationContext="im",this._isIntegratedMesh=!0,this._supportsLabeling=!1,this.drapeTargetType=1,this._overlayTexOffset=m(-1,-1,-1,-1),this._overlayTexScale=j(),this._overlayColor=null,this._overlayHighlight=null,this._overlayNormal=null}get progressiveLoadFactor(){return this.lodFactor>=1?.2:1}setDrapingTextures(i){this._clearDrapingTexture(0),this._clearDrapingTexture(1);for(const s of i){const i=s.index,t=s.extent,r=s.needsColorWithoutRasterImage?s.getValidTarget(1):s.hasDrapedFeatureSource?s.getValidTarget(0):null;if(p(r)&&e(t)>0){this._overlayTexOffset[2*i]=-t[0]/a(t),this._overlayTexOffset[2*i+1]=-t[1]/d(t),this._overlayTexScale[2*i]=1/a(t),this._overlayTexScale[2*i+1]=1/d(t);const p=s.getValidTarget(2),o=s.getValidTarget(3);this._overlayColor=r.getTexture(),this._overlayHighlight=p?p.getTexture():null,this._overlayNormal=o?o.getTexture():null}}this._forAllNodes((i=>p(i)&&this._collection.updateMaterial(i.objectHandle,(p=>this._updateMaterialOverlay(p)))))}_clearDrapingTexture(p){this._overlayTexOffset[2*p]=-1,this._overlayTexOffset[2*p+1]=-1,this._overlayTexScale[2*p]=0,this._overlayTexScale[2*p+1]=0,this._overlayColor=null,this._overlayHighlight=null,this._overlayNormal=null}_updateMaterialOverlay(p){p.overlayColor=this._overlayColor,p.overlayHighlight=this._overlayHighlight,p.overlayNormal=this._overlayNormal,p.overlayTexOffset=this._overlayTexOffset,p.overlayTexScale=this._overlayTexScale}initialize(){this.updatingHandles.add(this.layer,"modifications",(()=>this._loadModifications()),2)}_createLayerGraphic(){const p=new o;return p.layer=this.layer,p.sourceLayer=this.layer,p}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}_loadModifications(){if(this.handles.remove("modifications"),i(this.layer.modifications))return void(this._modifications=[]);const p=this.layer.modifications;this.handles.add(this.updatingHandles.addOnCollectionChange(p,(()=>this._modifications=p.toArray()),2),"modifications")}};s([t()],l.prototype,"layer",void 0),s([t({aliasOf:"layer"})],l.prototype,"i3slayer",void 0),s([t()],l.prototype,"suspended",void 0),s([t(f)],l.prototype,"updatingProgress",void 0),s([t({readOnly:!0,aliasOf:"_controller.updatingProgress"})],l.prototype,"updatingProgressValue",void 0),s([t({readOnly:!0,aliasOf:"view.qualitySettings.sceneService.integratedMesh.lodFactor"})],l.prototype,"lodFactor",void 0),s([t({readOnly:!0})],l.prototype,"progressiveLoadFactor",null),l=s([r("esri.views.3d.layers.SceneLayerView3D")],l);const n=l;export default n;