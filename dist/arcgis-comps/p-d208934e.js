import{b2 as t,D as s,b3 as r,e as i,i as e,b4 as n,b5 as o,b6 as h,p as c,b7 as u,b8 as l}from"./p-e58503d5.js";class a{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(t),this._values=new Map}clone(r){const i=new a,e=this._originStores[0];e&&e.forEach(((t,r)=>{i.set(r,s(t),0)}));for(let e=2;e<t;e++){const t=this._originStores[e];t&&t.forEach(((t,n)=>{r&&r.has(n)||i.set(n,s(t),e)}))}return i}get(t,s){const r=void 0===s?this._values:this._originStores[s];return r?r.get(t):void 0}keys(t){const s=null==t?this._values:this._originStores[t];return s?[...s.keys()]:[]}set(t,s,i=6){let e=this._originStores[i];if(e||(e=new Map,this._originStores[i]=e),e.set(t,s),!this._values.has(t)||r(this._propertyOriginMap.get(t))<=i){const r=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,i),r!==s}return!1}delete(t,s=6){const r=this._originStores[s];if(!r)return;const i=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===s){this._values.delete(t);for(let r=s-1;r>=0;r--){const s=this._originStores[r];if(s&&s.has(t)){this._values.set(t,s.get(t)),this._propertyOriginMap.set(t,r);break}}}return i}has(t,s){const r=void 0===s?this._values:this._originStores[s];return!!r&&r.has(t)}revert(t,s){for(;s>0&&!this.has(t,s);)--s;const r=this._originStores[s],i=r&&r.get(t),e=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,s),e!==i}originOf(t){return this._propertyOriginMap.get(t)||0}forEach(t){this._values.forEach(t)}}const p=t=>{let s=class extends t{constructor(...t){super(...t);const s=r(h(this)),i=s.metadatas,e=s.store,n=new a;s.store=n,e.keys().forEach((t=>{n.set(t,e.get(t),0)})),Object.keys(i).forEach((t=>{s.internalGet(t)&&n.set(t,s.internalGet(t),0)}))}read(t,s){n(this,t,s)}getAtOrigin(t,s){const r=O(this),i=u(s);if("string"==typeof t)return r.get(t,i);const e={};return t.forEach((t=>{e[t]=r.get(t,i)})),e}originOf(t){return o(this.originIdOf(t))}originIdOf(t){return O(this).originOf(t)}revert(t,s){const r=O(this),i=u(s),e=h(this);let n;n="string"==typeof t?"*"===t?r.keys(i):[t]:t,n.forEach((t=>{e.invalidate(t),r.revert(t,i),e.commit(t)}))}};return s=i([e("esri.core.ReadOnlyMultiOriginJSONSupport")],s),s};function O(t){return h(t).store}let f=class extends(p(c)){};f=i([e("esri.core.ReadOnlyMultiOriginJSONSupport")],f);const g=s=>{let r=class extends s{constructor(...t){super(...t)}clear(t,s="user"){return d(this).delete(t,u(s))}write(t={},s){return l(this,t=t||{},s),t}setAtOrigin(t,s,r){h(this).setAtOrigin(t,s,u(r))}removeOrigin(t){const s=d(this),r=u(t),i=s.keys(r);for(const t of i)s.originOf(t)===r&&s.set(t,s.get(t,r),6)}updateOrigin(s,r){const i=d(this),e=u(r),n=this.get(s);for(let r=e+1;r<t;++r)i.delete(s,r);i.set(s,n,e)}toJSON(t){return this.write({},t)}};return r=i([e("esri.core.WriteableMultiOriginJSONSupport")],r),r.prototype.toJSON.isDefaultToJSON=!0,r};function d(t){return h(t).store}const S=t=>{let s=class extends(g(p(t))){constructor(...t){super(...t)}};return s=i([e("esri.core.MultiOriginJSONSupport")],s),s};let b=class extends(S(c)){};b=i([e("esri.core.MultiOriginJSONSupport")],b);export{b as O,S as l}