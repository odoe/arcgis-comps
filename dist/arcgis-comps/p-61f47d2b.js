import{aH as r,K as t}from"./p-e58503d5.js";import"./p-53bb6ab4.js";const n={min:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.min.apply(Math,r[0])},max:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.max.apply(Math,r[0])},avg:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:e(r[0])},sum:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:function(r){let t=0;for(let n=0;n<r.length;n++)t+=r[n];return t}(r[0])},stddev:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.sqrt(a(r[0]))},count:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].length},var:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:a(r[0])}};function e(r){let t=0;for(let n=0;n<r.length;n++)t+=r[n];return t/r.length}function a(r){const t=e(r),n=r.length;let a=0;for(const n of r)a+=(n-t)**2;return n>1?a/(n-1):0}class u{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0}static fixDefaults(r){if(null!==r.precision||null!==r.secondary)throw new Error("Primary and Secondary SqlInterval qualifiers not supported")}static createFromMilliseconds(r){const t=new u;return t.second=r/1e3,t}static createFromValueAndQualifer(r,t,n){let e=null;const a=new u;if(a.op="-"===n?"-":"+","interval-period"===t.type){u.fixDefaults(t);const n=new RegExp("^[0-9]{1,}$");if("year"===t.period||"month"===t.period)throw new Error("Year-Month Intervals not supported");if(!n.test(r))throw new Error("Illegal Interval");a[t.period]=parseFloat(r)}else{if(u.fixDefaults(t.start),u.fixDefaults(t.end),"year"===t.start.period||"month"===t.start.period)throw new Error("Year-Month Intervals not supported");if("year"===t.end.period||"month"===t.end.period)throw new Error("Year-Month Intervals not supported");switch(t.start.period){case"day":switch(t.end.period){case"hour":if(e=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!e.test(r))throw new Error("Illegal Interval");a[t.start.period]=parseFloat(r.split(" ")[0]),a[t.end.period]=parseFloat(r.split(" ")[1]);break;case"minute":if(e=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!e.test(r))throw new Error("Illegal Interval");{a[t.start.period]=parseFloat(r.split(" ")[0]);const n=r.split(" ")[1].split(":");a.hour=parseFloat(n[0]),a.minute=parseFloat(n[1])}break;case"second":if(e=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!e.test(r))throw new Error("Illegal Interval");{a[t.start.period]=parseFloat(r.split(" ")[0]);const n=r.split(" ")[1].split(":");a.hour=parseFloat(n[0]),a.minute=parseFloat(n[1]),a.second=parseFloat(n[2])}break;default:throw"Invalid Interval."}break;case"hour":switch(t.end.period){case"minute":if(e=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!e.test(r))throw new Error("Illegal Interval");a.hour=parseFloat(r.split(":")[0]),a.minute=parseFloat(r.split(":")[1]);break;case"second":if(e=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!e.test(r))throw new Error("Illegal Interval");{const t=r.split(":");a.hour=parseFloat(t[0]),a.minute=parseFloat(t[1]),a.second=parseFloat(t[2])}break;default:throw"Invalid Interval."}break;case"minute":if("second"!==t.end.period)throw"Invalid Interval.";if(e=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!e.test(r))throw new Error("Illegal Interval");{const t=r.split(":");a.minute=parseFloat(t[0]),a.second=parseFloat(t[1])}break;default:throw"Invalid Interval."}}return a}valueInMilliseconds(){return("-"===this.op?-1:1)*(1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}function i(r,t){const n=s[r.toLowerCase()];if(null==n)throw new Error("Function Not Recognised");if(t.length<n.minParams||t.length>n.maxParams)throw new Error(`Invalid Parameter count for call to ${r.toUpperCase()}`);return n.evaluate(t)}const s={extract:{minParams:2,maxParams:2,evaluate:([r,t])=>{if(null==t)return null;if(t instanceof Date)switch(r.toUpperCase()){case"SECOND":return t.getSeconds();case"MINUTE":return t.getMinutes();case"HOUR":return t.getHours();case"DAY":return t.getDate();case"MONTH":return t.getMonth()+1;case"YEAR":return t.getFullYear()}throw new Error("Invalid Parameter for call to EXTRACT")}},substring:{minParams:2,maxParams:3,evaluate:r=>{if(2===r.length){const[t,n]=r;return null==t||null==n?null:t.toString().substring(n-1)}if(3===r.length){const[t,n,e]=r;return null==t||null==n||null==e?null:e<=0?"":t.toString().substring(n-1,n+e-1)}}},position:{minParams:2,maxParams:2,evaluate:([r,t])=>null==r||null==t?null:t.indexOf(r)+1},trim:{minParams:2,maxParams:3,evaluate:t=>{const n=3===t.length,e=n?t[1]:" ",a=n?t[2]:t[1];if(null==e||null==a)return null;const u=`(${r(e)})`;switch(t[0]){case"BOTH":return a.replace(new RegExp(`^${u}*|${u}*$`,"g"),"");case"LEADING":return a.replace(new RegExp(`^${u}*`,"g"),"");case"TRAILING":return a.replace(new RegExp(`${u}*$`,"g"),"")}throw new Error("Invalid Parameter for call to TRIM")}},abs:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.abs(r[0])},ceiling:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.ceil(r[0])},floor:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.floor(r[0])},log:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.log(r[0])},log10:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.log(r[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.sin(r[0])},cos:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.cos(r[0])},tan:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.tan(r[0])},asin:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.asin(r[0])},acos:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.acos(r[0])},atan:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.atan(r[0])},sign:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0]>0?1:r[1]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:r=>null==r[0]||null==r[1]?null:r[0]**r[1]},mod:{minParams:2,maxParams:2,evaluate:r=>null==r[0]||null==r[1]?null:r[0]%r[1]},round:{minParams:1,maxParams:2,evaluate:r=>{const t=r[0],n=2===r.length?10**r[1]:1;return null==t?null:Math.round(t*n)/n}},truncate:{minParams:1,maxParams:2,evaluate:r=>null==r[0]?null:1===r.length?parseInt(r[0].toFixed(0),10):parseFloat(r[0].toFixed(r[1]))},char_length:{minParams:1,maxParams:1,evaluate:r=>"string"==typeof r[0]||r[0]instanceof String?r[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:r=>{let t="";for(let n=0;n<r.length;n++){if(null==r[n])return null;t+=r[n].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].toString().toUpperCase()}};var o,l,c={exports:{}};l=function(){function r(t,n,e,a){var u=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(u,r.prototype),u.expected=n,u.found=e,u.location=a,u.name="SyntaxError",u}function t(r,t,n){return n=n||" ",r.length>t?r:r+(n+=n.repeat(t-=r.length)).slice(0,t)}return function(r,t){function n(){this.constructor=r}n.prototype=t.prototype,r.prototype=new n}(r,Error),r.prototype.format=function(r){var n="Error: "+this.message;if(this.location){var e,a=null;for(e=0;e<r.length;e++)if(r[e].source===this.location.source){a=r[e].text.split(/\r\n|\n|\r/g);break}var u=this.location.start,i=this.location.source+":"+u.line+":"+u.column;if(a){var s=this.location.end,o=t("",u.line.toString().length),l=a[u.line-1],c=u.line===s.line?s.column:l.length+1;n+="\n --\x3e "+i+"\n"+o+" |\n"+u.line+" | "+l+"\n"+o+" | "+t("",u.column-1)+t("",c-u.column,"^")}else n+="\n at "+i}return n},r.buildMessage=function(r,t){var n={literal:function(r){return'"'+a(r.text)+'"'},class:function(r){var t=r.parts.map((function(r){return Array.isArray(r)?u(r[0])+"-"+u(r[1]):u(r)}));return"["+(r.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(r){return r.description}};function e(r){return r.charCodeAt(0).toString(16).toUpperCase()}function a(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+e(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+e(r)}))}function u(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+e(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+e(r)}))}function i(r){return n[r.type](r)}return"Expected "+function(r){var t,n,e=r.map(i);if(e.sort(),e.length>0){for(t=1,n=1;t<e.length;t++)e[t-1]!==e[t]&&(e[n]=e[t],n++);e.length=n}switch(e.length){case 1:return e[0];case 2:return e[0]+" or "+e[1];default:return e.slice(0,-1).join(", ")+", or "+e[e.length-1]}}(r)+" but "+function(r){return r?'"'+a(r)+'"':"end of input"}(t)+" found."},{SyntaxError:r,parse:function(t,n){var e,a={},u=(n=void 0!==n?n:{}).grammarSource,i={start:Yr},s=Yr,o="''",l=/^[A-Za-z_\x80-\uFFFF]/,c=/^[A-Za-z0-9_]/,f=/^[A-Za-z0-9_.\x80-\uFFFF]/,h=/^[^']/,p=/^[0-9]/,v=/^[eE]/,m=/^[+\-]/,d=/^[ \t\n\r]/,w=/^[^`]/,y=Br("!",!1),E=Br("=",!1),x=Br(">=",!1),I=Br(">",!1),g=Br("<=",!1),N=Br("<>",!1),P=Br("<",!1),T=Br("!=",!1),F=Br("+",!1),S=Br("-",!1),b=Br("*",!1),A=Br("/",!1),O=qr([["A","Z"],["a","z"],"_",["","￿"]],!1,!1),_=qr([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),D=qr([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1),R=Br("@",!1),M=Br("'",!1),$=Br("N'",!1),k=Br("''",!1),L=qr(["'"],!0,!1),C=Br(".",!1),H=qr([["0","9"]],!1,!1),U=qr(["e","E"],!1,!1),B=qr(["+","-"],!1,!1),q=Br("NULL",!0),J=Br("TRUE",!0),W=Br("FALSE",!0),Y=Br("IN",!0),z=Br("IS",!0),G=Br("LIKE",!0),V=Br("ESCAPE",!0),K=Br("NOT",!0),Z=Br("AND",!0),j=Br("OR",!0),Q=Br("BETWEEN",!0),X=Br("FROM",!0),rr=Br("FOR",!0),tr=Br("SUBSTRING",!0),nr=Br("EXTRACT",!0),er=Br("TRIM",!0),ar=Br("POSITION",!0),ur=Br("TIMESTAMP",!0),ir=Br("DATE",!0),sr=Br("LEADING",!0),or=Br("TRAILING",!0),lr=Br("BOTH",!0),cr=Br("TO",!0),fr=Br("INTERVAL",!0),hr=Br("YEAR",!0),pr=Br("MONTH",!0),vr=Br("DAY",!0),mr=Br("HOUR",!0),dr=Br("MINUTE",!0),wr=Br("SECOND",!0),yr=Br("CASE",!0),Er=Br("END",!0),xr=Br("WHEN",!0),Ir=Br("THEN",!0),gr=Br("ELSE",!0),Nr=Br(",",!1),Pr=Br("(",!1),Tr=Br(")",!1),Fr=qr([" ","\t","\n","\r"],!1,!1),Sr=Br("`",!1),br=qr(["`"],!0,!1),Ar=function(r,t){return mn(r,t)},Or=function(r){return r[0]+" "+r[2]},_r=function(r,t){return r+t.join("")},Dr=function(r){return{type:"interval-period",period:r.value,precision:null,secondary:null}},Rr=function(r,t){return{type:"interval-period",period:"second",precision:r,secondary:t}},Mr=function(r){return parseFloat(r)},$r=function(r,t){return{type:"when_clause",operand:r,value:t}},kr=0,Lr=[{line:1,column:1}],Cr=0,Hr=[],Ur=0;if("startRule"in n){if(!(n.startRule in i))throw new Error("Can't start parsing from rule \""+n.startRule+'".');s=i[n.startRule]}function Br(r,t){return{type:"literal",text:r,ignoreCase:t}}function qr(r,t,n){return{type:"class",parts:r,inverted:t,ignoreCase:n}}function Jr(r){var n,e=Lr[r];if(e)return e;for(n=r-1;!Lr[n];)n--;for(e={line:(e=Lr[n]).line,column:e.column};n<r;)10===t.charCodeAt(n)?(e.line++,e.column=1):e.column++,n++;return Lr[r]=e,e}function Wr(r){kr<Cr||(kr>Cr&&(Cr=kr,Hr=[]),Hr.push(r))}function Yr(){var r,t;return r=kr,fn(),(t=Gr())!==a?(fn(),r=t):(kr=r,r=a),r}function zr(){var r,t,n,e,u,i,s,o;if(r=kr,(t=Gr())!==a){for(n=[],e=kr,u=fn(),(i=on())!==a?(s=fn(),(o=Gr())!==a?e=u=[u,i,s,o]:(kr=e,e=a)):(kr=e,e=a);e!==a;)n.push(e),e=kr,u=fn(),(i=on())!==a?(s=fn(),(o=Gr())!==a?e=u=[u,i,s,o]:(kr=e,e=a)):(kr=e,e=a);r=function(r,t){var n={type:"expr_list"},e=function(r,t){return function(r,t){for(var n=[r],e=0;e<t.length;e++)n.push(t[e][3]);return n}(r,t)}(r,t);return n.value=e,n}(t,n)}else kr=r,r=a;return r}function Gr(){var r,t,n,e,u,i,s,o;if(r=kr,(t=Vr())!==a){for(n=[],e=kr,u=fn(),(i=$t())!==a?(s=fn(),(o=Vr())!==a?e=u=[u,i,s,o]:(kr=e,e=a)):(kr=e,e=a);e!==a;)n.push(e),e=kr,u=fn(),(i=$t())!==a?(s=fn(),(o=Vr())!==a?e=u=[u,i,s,o]:(kr=e,e=a)):(kr=e,e=a);r=Ar(t,n)}else kr=r,r=a;return r}function Vr(){var r,t,n,e,u,i,s,o;if(r=kr,(t=Kr())!==a){for(n=[],e=kr,u=fn(),(i=Mt())!==a?(s=fn(),(o=Kr())!==a?e=u=[u,i,s,o]:(kr=e,e=a)):(kr=e,e=a);e!==a;)n.push(e),e=kr,u=fn(),(i=Mt())!==a?(s=fn(),(o=Kr())!==a?e=u=[u,i,s,o]:(kr=e,e=a)):(kr=e,e=a);r=Ar(t,n)}else kr=r,r=a;return r}function Kr(){var r,n,e,u,i;return r=kr,(n=Rt())===a&&(n=kr,33===t.charCodeAt(kr)?(e="!",kr++):(e=a,0===Ur&&Wr(y)),e!==a?(u=kr,Ur++,61===t.charCodeAt(kr)?(i="=",kr++):(i=a,0===Ur&&Wr(E)),Ur--,i===a?u=void 0:(kr=u,u=a),u!==a?n=e=[e,u]:(kr=n,n=a)):(kr=n,n=a)),n!==a?(e=fn(),(u=Kr())!==a?r=function(r){return function(r,t){return{type:"unary_expr",operator:"NOT",expr:t}}(0,r)}(u):(kr=r,r=a)):(kr=r,r=a),r===a&&(r=function(){var r,t,n;return r=kr,(t=Xr())!==a?(fn(),(n=function(){var r;return(r=function(){var r,t,n,e,u,i;if(r=[],t=kr,n=fn(),(e=Zr())!==a?(u=fn(),(i=Xr())!==a?t=n=[n,e,u,i]:(kr=t,t=a)):(kr=t,t=a),t!==a)for(;t!==a;)r.push(t),t=kr,n=fn(),(e=Zr())!==a?(u=fn(),(i=Xr())!==a?t=n=[n,e,u,i]:(kr=t,t=a)):(kr=t,t=a);else r=a;return r!==a&&(r=function(r){return{type:"arithmetic",tail:r}}(r)),r}())===a&&(r=function(){var r,t,n,e;return r=kr,(t=Qr())!==a?(fn(),(n=ln())!==a?(fn(),(e=zr())!==a?(fn(),cn()!==a?r=function(r,t){return{op:r,right:t}}(t,e):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r===a&&(r=kr,(t=Qr())!==a?(fn(),(n=ln())!==a?(fn(),(e=cn())!==a?r=function(r){return{op:r,right:{type:"expr_list",value:[]}}}(t):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r===a&&(r=kr,(t=Qr())!==a?(fn(),(n=ot())!==a?r=function(r,t){return{op:r,right:t}}(t,n):(kr=r,r=a)):(kr=r,r=a))),r}())===a&&(r=function(){var r,t,n,e,u,i;return r=kr,(t=Rt())!==a?(fn(),(n=kt())!==a?(fn(),(e=Xr())!==a?(fn(),(u=Mt())!==a?(fn(),(i=Xr())!==a?r=function(r,t,n){return{op:"NOT"+r,right:{type:"expr_list",value:[t,n]}}}(n,e,i):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r===a&&(r=kr,(t=kt())!==a?(fn(),(n=Xr())!==a?(fn(),(e=Mt())!==a?(fn(),(u=Xr())!==a?r=function(r,t,n){return{op:r,right:{type:"expr_list",value:[t,n]}}}(t,n,u):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)),r}())===a&&(r=function(){var r,t,n,e;return r=kr,(t=Ot())!==a?(fn(),(n=Rt())!==a?(fn(),(e=Xr())!==a?r=function(r,t){return{op:r+"NOT",right:t}}(t,e):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r===a&&(r=kr,(t=Ot())!==a?(fn(),(n=Xr())!==a?r=function(r,t){return{op:r,right:t}}(t,n):(kr=r,r=a)):(kr=r,r=a)),r}())===a&&(r=function(){var r,t,n,e;return r=kr,(t=jr())!==a?(fn(),(n=mt())!==a?(fn(),Dt()!==a?(fn(),(e=dt())!==a?r=function(r,t,n){return{op:r,right:t,escape:n.value}}(t,n,e):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r===a&&(r=kr,(t=jr())!==a?(fn(),(n=mt())!==a?r=function(r,t){return{op:r,right:t,escape:""}}(t,n):(kr=r,r=a)):(kr=r,r=a)),r}()),r}())===a&&(n=null),r=function(r,t){return""==t||null==t||null==t?r:"arithmetic"==t.type?mn(r,t.tail):vn(t.op,r,t.right,t.escape)}(t,n)):(kr=r,r=a),r}()),r}function Zr(){var r;return">="===t.substr(kr,2)?(r=">=",kr+=2):(r=a,0===Ur&&Wr(x)),r===a&&(62===t.charCodeAt(kr)?(r=">",kr++):(r=a,0===Ur&&Wr(I)),r===a&&("<="===t.substr(kr,2)?(r="<=",kr+=2):(r=a,0===Ur&&Wr(g)),r===a&&("<>"===t.substr(kr,2)?(r="<>",kr+=2):(r=a,0===Ur&&Wr(N)),r===a&&(60===t.charCodeAt(kr)?(r="<",kr++):(r=a,0===Ur&&Wr(P)),r===a&&(61===t.charCodeAt(kr)?(r="=",kr++):(r=a,0===Ur&&Wr(E)),r===a&&("!="===t.substr(kr,2)?(r="!=",kr+=2):(r=a,0===Ur&&Wr(T)))))))),r}function jr(){var r,t,n,e,u;return r=kr,t=kr,(n=Rt())!==a?(e=fn(),(u=_t())!==a?t=n=[n,e,u]:(kr=t,t=a)):(kr=t,t=a),t!==a&&(t=Or(t)),(r=t)===a&&(r=_t()),r}function Qr(){var r,t,n,e,u;return r=kr,t=kr,(n=Rt())!==a?(e=fn(),(u=At())!==a?t=n=[n,e,u]:(kr=t,t=a)):(kr=t,t=a),t!==a&&(t=Or(t)),(r=t)===a&&(r=At()),r}function Xr(){var r,t,n,e,u,i,s,o;if(r=kr,(t=tt())!==a){for(n=[],e=kr,u=fn(),(i=rt())!==a?(s=fn(),(o=tt())!==a?e=u=[u,i,s,o]:(kr=e,e=a)):(kr=e,e=a);e!==a;)n.push(e),e=kr,u=fn(),(i=rt())!==a?(s=fn(),(o=tt())!==a?e=u=[u,i,s,o]:(kr=e,e=a)):(kr=e,e=a);r=Ar(t,n)}else kr=r,r=a;return r}function rt(){var r;return 43===t.charCodeAt(kr)?(r="+",kr++):(r=a,0===Ur&&Wr(F)),r===a&&(45===t.charCodeAt(kr)?(r="-",kr++):(r=a,0===Ur&&Wr(S))),r}function tt(){var r,t,n,e,u,i,s,o;if(r=kr,(t=et())!==a){for(n=[],e=kr,u=fn(),(i=nt())!==a?(s=fn(),(o=et())!==a?e=u=[u,i,s,o]:(kr=e,e=a)):(kr=e,e=a);e!==a;)n.push(e),e=kr,u=fn(),(i=nt())!==a?(s=fn(),(o=et())!==a?e=u=[u,i,s,o]:(kr=e,e=a)):(kr=e,e=a);r=function(r,t){return mn(r,t)}(t,n)}else kr=r,r=a;return r}function nt(){var r;return 42===t.charCodeAt(kr)?(r="*",kr++):(r=a,0===Ur&&Wr(b)),r===a&&(47===t.charCodeAt(kr)?(r="/",kr++):(r=a,0===Ur&&Wr(A))),r}function et(){var r,t;return(r=function(){var r;return(r=dt())===a&&(r=function(){var r,t,n,e;return r=kr,(t=function(){var r,t,n,e;return r=kr,(t=xt())!==a&&(n=It())!==a&&(e=gt())!==a?r=function(r,t,n){return parseFloat(r+t+n)}(t,n,e):(kr=r,r=a),r===a&&(r=kr,(t=xt())!==a&&(n=It())!==a?r=function(r,t){return parseFloat(r+t)}(t,n):(kr=r,r=a),r===a&&(r=kr,(t=xt())!==a&&(n=gt())!==a?r=function(r,t){return parseFloat(r+t)}(t,n):(kr=r,r=a),r===a&&(r=kr,(t=xt())!==a&&(t=function(r){return parseFloat(r)}(t)),r=t))),r}())!==a?(n=kr,Ur++,e=ut(),Ur--,e===a?n=void 0:(kr=n,n=a),n!==a?r=function(r){return{type:"number",value:r}}(t):(kr=r,r=a)):(kr=r,r=a),r}())===a&&(r=function(){var r,t;return r=kr,(t=St())!==a&&(t={type:"bool",value:!0}),(r=t)===a&&(r=kr,(t=bt())!==a&&(t={type:"bool",value:!1}),r=t),r}())===a&&(r=function(){var r;return(r=Ft())!==a&&(r={type:"null",value:null}),r}())===a&&(r=function(){var r,t;return r=kr,Wt()!==a?(fn(),(t=mt())!==a?r=function(r){return{type:"date",value:r.value}}(t):(kr=r,r=a)):(kr=r,r=a),r}())===a&&(r=function(){var r,t;return r=kr,Jt()!==a?(fn(),(t=mt())!==a?r=function(r){return{type:"timestamp",value:r.value}}(t):(kr=r,r=a)):(kr=r,r=a),r}())===a&&(r=ct()),r}())===a&&(r=function(){var r,t,n;return r=kr,Ut()!==a?(fn(),ln()!==a?(fn(),(t=function(){var r;return(r=Zt())===a&&(r=jt())===a&&(r=Qt())===a&&(r=Xt())===a&&(r=rn())===a&&(r=tn()),r}())!==a?(fn(),Lt()!==a?(fn(),(n=Gr())!==a?(fn(),cn()!==a?r=function(r,t){return{type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:r},t]}}}(t,n):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r}())===a&&(r=function(){var r,t,n,e,u,i,s;return r=kr,Ht()!==a?(fn(),ln()!==a?(fn(),(t=Gr())!==a?(fn(),Lt()!==a?(fn(),(n=Gr())!==a?(fn(),e=kr,(u=Ct())!==a?(i=fn(),(s=Gr())!==a?e=u=[u,i,s,fn()]:(kr=e,e=a)):(kr=e,e=a),e===a&&(e=null),(u=cn())!==a?r=function(r,t,n){return{type:"function",name:"substring",args:{type:"expr_list",value:n?[r,t,n[2]]:[r,t]}}}(t,n,e):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r}())===a&&(r=function(){var r,t,n,e;return r=kr,Bt()!==a?(fn(),ln()!==a?(fn(),(t=lt())===a&&(t=null),fn(),(n=Gr())!==a?(fn(),Lt()!==a?(fn(),(e=Gr())!==a?(fn(),cn()!==a?r=function(r,t,n){return{type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==r?"BOTH":r},t,n]}}}(t,n,e):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r===a&&(r=kr,Bt()!==a?(fn(),ln()!==a?(fn(),(t=lt())===a&&(t=null),fn(),(n=Gr())!==a?(fn(),cn()!==a?r=function(r,t){return{type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==r?"BOTH":r},t]}}}(t,n):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)),r}())===a&&(r=function(){var r,t,n;return r=kr,qt()!==a?(fn(),ln()!==a?(fn(),(t=Gr())!==a?(fn(),At()!==a?(fn(),(n=Gr())!==a?(fn(),cn()!==a?r=function(r,t){return{type:"function",name:"position",args:{type:"expr_list",value:[r,t]}}}(t,n):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r}())===a&&(r=function(){var r,t,n;return r=kr,(t=pn())!==a?(fn(),ln()!==a?(fn(),(n=zr())===a&&(n=null),fn(),cn()!==a?r=function(r,t){return{type:"function",name:r,args:t||{type:"expr_list",value:[]}}}(t,n):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r}())===a&&(r=function(){var r;return(r=function(){var r,t,n,e,u;if(r=kr,nn()!==a)if(fn(),(t=Gr())!==a){for(fn(),n=[],e=yt();e!==a;)n.push(e),e=yt();e=fn(),(u=en())!==a?r=function(r,t){return{type:"case_expression",format:"simple",operand:r,clauses:t,else:null}}(t,n):(kr=r,r=a)}else kr=r,r=a;else kr=r,r=a;if(r===a)if(r=kr,nn()!==a)if(fn(),(t=Gr())!==a){for(fn(),n=[],e=yt();e!==a;)n.push(e),e=yt();e=fn(),(u=Et())!==a?(fn(),en()!==a?r=function(r,t,n){return{type:"case_expression",format:"simple",operand:r,clauses:t,else:n.value}}(t,n,u):(kr=r,r=a)):(kr=r,r=a)}else kr=r,r=a;else kr=r,r=a;return r}())===a&&(r=function(){var r,t,n,e;if(r=kr,nn()!==a){for(fn(),t=[],n=wt();n!==a;)t.push(n),n=wt();n=fn(),(e=en())!==a?r=function(r){return{type:"case_expression",format:"searched",clauses:r,else:null}}(t):(kr=r,r=a)}else kr=r,r=a;if(r===a)if(r=kr,nn()!==a){for(fn(),t=[],n=wt();n!==a;)t.push(n),n=wt();n=fn(),(e=Et())!==a?(fn(),en()!==a?r=function(r,t){return{type:"case_expression",format:"searched",clauses:r,else:t.value}}(t,e):(kr=r,r=a)):(kr=r,r=a)}else kr=r,r=a;return r}()),r}())===a&&(r=function(){var r;return(r=function(){var r;return(r=function(){var r,t,n,e;if(r=kr,(t=ut())!==a){for(n=[],e=st();e!==a;)n.push(e),e=st();r=_r(t,n)}else kr=r,r=a;return r}())!==a&&(r=r),r}())!==a&&(r=function(r){return/^CURRENT_DATE$/i.test(r)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(r)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:r}}(r)),r}())===a&&(r=ot())===a&&(r=kr,ln()!==a?(fn(),(t=Gr())!==a?(fn(),cn()!==a?r=function(r){return r.paren=!0,r}(t):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)),r}function at(){var r,t,n,e;if(r=kr,(t=ut())!==a){for(n=[],e=it();e!==a;)n.push(e),e=it();r=_r(t,n)}else kr=r,r=a;return r}function ut(){var r;return l.test(t.charAt(kr))?(r=t.charAt(kr),kr++):(r=a,0===Ur&&Wr(O)),r}function it(){var r;return c.test(t.charAt(kr))?(r=t.charAt(kr),kr++):(r=a,0===Ur&&Wr(_)),r}function st(){var r;return f.test(t.charAt(kr))?(r=t.charAt(kr),kr++):(r=a,0===Ur&&Wr(D)),r}function ot(){var r,n,e;return r=kr,64===t.charCodeAt(kr)?(n="@",kr++):(n=a,0===Ur&&Wr(R)),n!==a&&(e=at())!==a?r=n=[n,e]:(kr=r,r=a),r!==a&&(r=function(r){return{type:"param",value:r[1]}}(r)),r}function lt(){var r;return(r=Yt())===a&&(r=zt())===a&&(r=Gt()),r}function ct(){var r,n,e,u;return r=kr,Kt()!==a?(fn(),45===t.charCodeAt(kr)?(n="-",kr++):(n=a,0===Ur&&Wr(S)),n===a&&(43===t.charCodeAt(kr)?(n="+",kr++):(n=a,0===Ur&&Wr(F))),n!==a?(fn(),(e=mt())!==a?(fn(),(u=ft())!==a?r=function(r,t,n){return{type:"interval",value:t,qualifier:n,op:r}}(n,e,u):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r===a&&(r=kr,Kt()!==a?(fn(),(n=mt())!==a?(fn(),(e=ft())!==a?r=function(r,t){return{type:"interval",value:r,qualifier:t,op:""}}(n,e):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)),r}function ft(){var r,t,n;return r=kr,(t=function(){var r,t,n;return r=kr,(t=ht())!==a?(fn(),ln()!==a?(fn(),(n=vt())!==a?(fn(),cn()!==a?r=function(r,t){return{type:"interval-period",period:r.value,precision:t,secondary:null}}(t,n):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r===a&&(r=kr,(t=ht())!==a&&(t=Dr(t)),r=t),r}())!==a?(fn(),Vt()!==a?(fn(),(n=function(){var r,t,n,e;return r=kr,(t=ht())!==a&&(t=function(r){return{type:"interval-period",period:r.value,precision:null,secondary:null}}(t)),(r=t)===a&&(r=kr,(t=tn())!==a?(fn(),ln()!==a?(fn(),(n=vt())!==a?(fn(),on()!==a?(fn(),(e=pt())!==a?(fn(),cn()!==a?r=Rr(n,e):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r===a&&(r=kr,(t=tn())!==a?(fn(),ln()!==a?(fn(),(n=vt())!==a?(fn(),cn()!==a?r=function(r){return{type:"interval-period",period:"second",precision:r,secondary:null}}(n):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r===a&&(r=kr,(t=tn())!==a&&(t={type:"interval-period",period:"second",precision:null,secondary:null}),r=t))),r}())!==a?r=function(r,t){return{type:"interval-qualifier",start:r,end:t}}(t,n):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r===a&&(r=function(){var r,t,n,e;return r=kr,(t=ht())!==a?(fn(),ln()!==a?(fn(),(n=pt())!==a?(fn(),cn()!==a?r=function(r,t){return{type:"interval-period",period:r.value,precision:t,secondary:null}}(t,n):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r===a&&(r=kr,(t=ht())!==a&&(t=Dr(t)),(r=t)===a&&(r=kr,(t=tn())!==a?(fn(),ln()!==a?(fn(),(n=vt())!==a?(fn(),on()!==a?(fn(),(e=pt())!==a?(fn(),cn()!==a?r=Rr(n,e):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r===a&&(r=kr,(t=tn())!==a?(fn(),ln()!==a?(fn(),(n=pt())!==a?(fn(),cn()!==a?r=function(r){return{type:"interval-period",period:"second",precision:r,secondary:null}}(n):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r===a&&(r=kr,(t=tn())!==a&&(t={type:"interval-period",period:"second",precision:null,secondary:null}),r=t)))),r}()),r}function ht(){var r,t;return r=kr,(t=Qt())!==a&&(t={type:"string",value:"day"}),(r=t)===a&&(r=kr,(t=Xt())!==a&&(t={type:"string",value:"hour"}),(r=t)===a&&(r=kr,(t=rn())!==a&&(t={type:"string",value:"minute"}),(r=t)===a&&(r=kr,(t=jt())!==a&&(t={type:"string",value:"month"}),(r=t)===a&&(r=kr,(t=Zt())!==a&&(t={type:"string",value:"year"}),r=t)))),r}function pt(){var r;return(r=Nt())!==a&&(r=Mr(r)),r}function vt(){var r;return(r=Nt())!==a&&(r=Mr(r)),r}function mt(){var r;return(r=dt())===a&&(r=ot()),r}function dt(){var r,n,e,u,i;if(r=kr,39===t.charCodeAt(kr)?(n="'",kr++):(n=a,0===Ur&&Wr(M)),n===a&&("N'"===t.substr(kr,2)?(n="N'",kr+=2):(n=a,0===Ur&&Wr($))),n!==a){for(e=[],u=kr,t.substr(kr,2)===o?(i=o,kr+=2):(i=a,0===Ur&&Wr(k)),i!==a&&(i="'"),(u=i)===a&&(h.test(t.charAt(kr))?(u=t.charAt(kr),kr++):(u=a,0===Ur&&Wr(L)));u!==a;)e.push(u),u=kr,t.substr(kr,2)===o?(i=o,kr+=2):(i=a,0===Ur&&Wr(k)),i!==a&&(i="'"),(u=i)===a&&(h.test(t.charAt(kr))?(u=t.charAt(kr),kr++):(u=a,0===Ur&&Wr(L)));39===t.charCodeAt(kr)?(u="'",kr++):(u=a,0===Ur&&Wr(M)),u!==a?r=function(r){return{type:"string",value:r.join("")}}(e):(kr=r,r=a)}else kr=r,r=a;return r}function wt(){var r,t,n;return r=kr,an()!==a?(fn(),(t=Gr())!==a?(fn(),un()!==a?(fn(),(n=Gr())!==a?r=$r(t,n):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r}function yt(){var r,t,n;return r=kr,an()!==a?(fn(),(t=Gr())!==a?(fn(),un()!==a?(fn(),(n=Gr())!==a?r=$r(t,n):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a)):(kr=r,r=a),r}function Et(){var r,t;return r=kr,sn()!==a?(fn(),(t=Gr())!==a?r=function(r){return{type:"else_clause",value:r}}(t):(kr=r,r=a)):(kr=r,r=a),r}function xt(){var r,n,e;return(r=Nt())===a&&(r=kr,45===t.charCodeAt(kr)?(n="-",kr++):(n=a,0===Ur&&Wr(S)),n===a&&(43===t.charCodeAt(kr)?(n="+",kr++):(n=a,0===Ur&&Wr(F))),n!==a&&(e=Nt())!==a?r=function(r,t){return r[0]+t}(n,e):(kr=r,r=a)),r}function It(){var r,n,e;return r=kr,46===t.charCodeAt(kr)?(n=".",kr++):(n=a,0===Ur&&Wr(C)),n!==a?((e=Nt())===a&&(e=null),r=function(r){return"."+(null!=r?r:"")}(e)):(kr=r,r=a),r}function gt(){var r,t,n;return r=kr,(t=Tt())!==a&&(n=Nt())!==a?r=function(r,t){return r+t}(t,n):(kr=r,r=a),r}function Nt(){var r,t;if(r=[],(t=Pt())!==a)for(;t!==a;)r.push(t),t=Pt();else r=a;return r!==a&&(r=function(r){return r.join("")}(r)),r}function Pt(){var r;return p.test(t.charAt(kr))?(r=t.charAt(kr),kr++):(r=a,0===Ur&&Wr(H)),r}function Tt(){var r,n,e;return r=kr,v.test(t.charAt(kr))?(n=t.charAt(kr),kr++):(n=a,0===Ur&&Wr(U)),n!==a?(m.test(t.charAt(kr))?(e=t.charAt(kr),kr++):(e=a,0===Ur&&Wr(B)),e===a&&(e=null),r=function(r,t){return"e"+(null===t?"":t)}(0,e)):(kr=r,r=a),r}function Ft(){var r,n,e,u;return r=kr,"null"===t.substr(kr,4).toLowerCase()?(n=t.substr(kr,4),kr+=4):(n=a,0===Ur&&Wr(q)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r=n=[n,e]:(kr=r,r=a)):(kr=r,r=a),r}function St(){var r,n,e,u;return r=kr,"true"===t.substr(kr,4).toLowerCase()?(n=t.substr(kr,4),kr+=4):(n=a,0===Ur&&Wr(J)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r=n=[n,e]:(kr=r,r=a)):(kr=r,r=a),r}function bt(){var r,n,e,u;return r=kr,"false"===t.substr(kr,5).toLowerCase()?(n=t.substr(kr,5),kr+=5):(n=a,0===Ur&&Wr(W)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r=n=[n,e]:(kr=r,r=a)):(kr=r,r=a),r}function At(){var r,n,e,u;return r=kr,"in"===t.substr(kr,2).toLowerCase()?(n=t.substr(kr,2),kr+=2):(n=a,0===Ur&&Wr(Y)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="IN":(kr=r,r=a)):(kr=r,r=a),r}function Ot(){var r,n,e,u;return r=kr,"is"===t.substr(kr,2).toLowerCase()?(n=t.substr(kr,2),kr+=2):(n=a,0===Ur&&Wr(z)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="IS":(kr=r,r=a)):(kr=r,r=a),r}function _t(){var r,n,e,u;return r=kr,"like"===t.substr(kr,4).toLowerCase()?(n=t.substr(kr,4),kr+=4):(n=a,0===Ur&&Wr(G)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="LIKE":(kr=r,r=a)):(kr=r,r=a),r}function Dt(){var r,n,e,u;return r=kr,"escape"===t.substr(kr,6).toLowerCase()?(n=t.substr(kr,6),kr+=6):(n=a,0===Ur&&Wr(V)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="ESCAPE":(kr=r,r=a)):(kr=r,r=a),r}function Rt(){var r,n,e,u;return r=kr,"not"===t.substr(kr,3).toLowerCase()?(n=t.substr(kr,3),kr+=3):(n=a,0===Ur&&Wr(K)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="NOT":(kr=r,r=a)):(kr=r,r=a),r}function Mt(){var r,n,e,u;return r=kr,"and"===t.substr(kr,3).toLowerCase()?(n=t.substr(kr,3),kr+=3):(n=a,0===Ur&&Wr(Z)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="AND":(kr=r,r=a)):(kr=r,r=a),r}function $t(){var r,n,e,u;return r=kr,"or"===t.substr(kr,2).toLowerCase()?(n=t.substr(kr,2),kr+=2):(n=a,0===Ur&&Wr(j)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="OR":(kr=r,r=a)):(kr=r,r=a),r}function kt(){var r,n,e,u;return r=kr,"between"===t.substr(kr,7).toLowerCase()?(n=t.substr(kr,7),kr+=7):(n=a,0===Ur&&Wr(Q)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="BETWEEN":(kr=r,r=a)):(kr=r,r=a),r}function Lt(){var r,n,e,u;return r=kr,"from"===t.substr(kr,4).toLowerCase()?(n=t.substr(kr,4),kr+=4):(n=a,0===Ur&&Wr(X)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="FROM":(kr=r,r=a)):(kr=r,r=a),r}function Ct(){var r,n,e,u;return r=kr,"for"===t.substr(kr,3).toLowerCase()?(n=t.substr(kr,3),kr+=3):(n=a,0===Ur&&Wr(rr)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="FOR":(kr=r,r=a)):(kr=r,r=a),r}function Ht(){var r,n,e,u;return r=kr,"substring"===t.substr(kr,9).toLowerCase()?(n=t.substr(kr,9),kr+=9):(n=a,0===Ur&&Wr(tr)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="SUBSTRING":(kr=r,r=a)):(kr=r,r=a),r}function Ut(){var r,n,e,u;return r=kr,"extract"===t.substr(kr,7).toLowerCase()?(n=t.substr(kr,7),kr+=7):(n=a,0===Ur&&Wr(nr)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="EXTRACT":(kr=r,r=a)):(kr=r,r=a),r}function Bt(){var r,n,e,u;return r=kr,"trim"===t.substr(kr,4).toLowerCase()?(n=t.substr(kr,4),kr+=4):(n=a,0===Ur&&Wr(er)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="TRIM":(kr=r,r=a)):(kr=r,r=a),r}function qt(){var r,n,e,u;return r=kr,"position"===t.substr(kr,8).toLowerCase()?(n=t.substr(kr,8),kr+=8):(n=a,0===Ur&&Wr(ar)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="POSITION":(kr=r,r=a)):(kr=r,r=a),r}function Jt(){var r,n,e,u;return r=kr,"timestamp"===t.substr(kr,9).toLowerCase()?(n=t.substr(kr,9),kr+=9):(n=a,0===Ur&&Wr(ur)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="TIMESTAMP":(kr=r,r=a)):(kr=r,r=a),r}function Wt(){var r,n,e,u;return r=kr,"date"===t.substr(kr,4).toLowerCase()?(n=t.substr(kr,4),kr+=4):(n=a,0===Ur&&Wr(ir)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="DATE":(kr=r,r=a)):(kr=r,r=a),r}function Yt(){var r,n,e,u;return r=kr,"leading"===t.substr(kr,7).toLowerCase()?(n=t.substr(kr,7),kr+=7):(n=a,0===Ur&&Wr(sr)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="LEADING":(kr=r,r=a)):(kr=r,r=a),r}function zt(){var r,n,e,u;return r=kr,"trailing"===t.substr(kr,8).toLowerCase()?(n=t.substr(kr,8),kr+=8):(n=a,0===Ur&&Wr(or)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="TRAILING":(kr=r,r=a)):(kr=r,r=a),r}function Gt(){var r,n,e,u;return r=kr,"both"===t.substr(kr,4).toLowerCase()?(n=t.substr(kr,4),kr+=4):(n=a,0===Ur&&Wr(lr)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="BOTH":(kr=r,r=a)):(kr=r,r=a),r}function Vt(){var r,n,e,u;return r=kr,"to"===t.substr(kr,2).toLowerCase()?(n=t.substr(kr,2),kr+=2):(n=a,0===Ur&&Wr(cr)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="TO":(kr=r,r=a)):(kr=r,r=a),r}function Kt(){var r,n,e,u;return r=kr,"interval"===t.substr(kr,8).toLowerCase()?(n=t.substr(kr,8),kr+=8):(n=a,0===Ur&&Wr(fr)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="INTERVAL":(kr=r,r=a)):(kr=r,r=a),r}function Zt(){var r,n,e,u;return r=kr,"year"===t.substr(kr,4).toLowerCase()?(n=t.substr(kr,4),kr+=4):(n=a,0===Ur&&Wr(hr)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="YEAR":(kr=r,r=a)):(kr=r,r=a),r}function jt(){var r,n,e,u;return r=kr,"month"===t.substr(kr,5).toLowerCase()?(n=t.substr(kr,5),kr+=5):(n=a,0===Ur&&Wr(pr)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="MONTH":(kr=r,r=a)):(kr=r,r=a),r}function Qt(){var r,n,e,u;return r=kr,"day"===t.substr(kr,3).toLowerCase()?(n=t.substr(kr,3),kr+=3):(n=a,0===Ur&&Wr(vr)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="DAY":(kr=r,r=a)):(kr=r,r=a),r}function Xt(){var r,n,e,u;return r=kr,"hour"===t.substr(kr,4).toLowerCase()?(n=t.substr(kr,4),kr+=4):(n=a,0===Ur&&Wr(mr)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="HOUR":(kr=r,r=a)):(kr=r,r=a),r}function rn(){var r,n,e,u;return r=kr,"minute"===t.substr(kr,6).toLowerCase()?(n=t.substr(kr,6),kr+=6):(n=a,0===Ur&&Wr(dr)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="MINUTE":(kr=r,r=a)):(kr=r,r=a),r}function tn(){var r,n,e,u;return r=kr,"second"===t.substr(kr,6).toLowerCase()?(n=t.substr(kr,6),kr+=6):(n=a,0===Ur&&Wr(wr)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="SECOND":(kr=r,r=a)):(kr=r,r=a),r}function nn(){var r,n,e,u;return r=kr,"case"===t.substr(kr,4).toLowerCase()?(n=t.substr(kr,4),kr+=4):(n=a,0===Ur&&Wr(yr)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="CASE":(kr=r,r=a)):(kr=r,r=a),r}function en(){var r,n,e,u;return r=kr,"end"===t.substr(kr,3).toLowerCase()?(n=t.substr(kr,3),kr+=3):(n=a,0===Ur&&Wr(Er)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="END":(kr=r,r=a)):(kr=r,r=a),r}function an(){var r,n,e,u;return r=kr,"when"===t.substr(kr,4).toLowerCase()?(n=t.substr(kr,4),kr+=4):(n=a,0===Ur&&Wr(xr)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="WHEN":(kr=r,r=a)):(kr=r,r=a),r}function un(){var r,n,e,u;return r=kr,"then"===t.substr(kr,4).toLowerCase()?(n=t.substr(kr,4),kr+=4):(n=a,0===Ur&&Wr(Ir)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="THEN":(kr=r,r=a)):(kr=r,r=a),r}function sn(){var r,n,e,u;return r=kr,"else"===t.substr(kr,4).toLowerCase()?(n=t.substr(kr,4),kr+=4):(n=a,0===Ur&&Wr(gr)),n!==a?(e=kr,Ur++,u=it(),Ur--,u===a?e=void 0:(kr=e,e=a),e!==a?r="ELSE":(kr=r,r=a)):(kr=r,r=a),r}function on(){var r;return 44===t.charCodeAt(kr)?(r=",",kr++):(r=a,0===Ur&&Wr(Nr)),r}function ln(){var r;return 40===t.charCodeAt(kr)?(r="(",kr++):(r=a,0===Ur&&Wr(Pr)),r}function cn(){var r;return 41===t.charCodeAt(kr)?(r=")",kr++):(r=a,0===Ur&&Wr(Tr)),r}function fn(){var r,t;for(r=[],t=hn();t!==a;)r.push(t),t=hn();return r}function hn(){var r;return d.test(t.charAt(kr))?(r=t.charAt(kr),kr++):(r=a,0===Ur&&Wr(Fr)),r}function pn(){var r,n,e,u;if(r=kr,(n=at())!==a&&(n=n),(r=n)===a)if(r=kr,96===t.charCodeAt(kr)?(n="`",kr++):(n=a,0===Ur&&Wr(Sr)),n!==a){if(e=[],w.test(t.charAt(kr))?(u=t.charAt(kr),kr++):(u=a,0===Ur&&Wr(br)),u!==a)for(;u!==a;)e.push(u),w.test(t.charAt(kr))?(u=t.charAt(kr),kr++):(u=a,0===Ur&&Wr(br));else e=a;e!==a?(96===t.charCodeAt(kr)?(u="`",kr++):(u=a,0===Ur&&Wr(Sr)),u!==a?r=function(r){return r.join("")}(e):(kr=r,r=a)):(kr=r,r=a)}else kr=r,r=a;return r}function vn(r,t,n,e){var a={type:"binary_expr",operator:r,left:t,right:n};return void 0!==e&&(a.escape=e),a}function mn(r,t){for(var n=r,e=0;e<t.length;e++)n=vn(t[e][1],n,t[e][3]);return n}if((e=s())!==a&&kr===t.length)return e;throw e!==a&&kr<t.length&&Wr({type:"end"}),function(t,n,e){return new r(r.buildMessage(t,n),t,n,e)}(Hr,Cr<t.length?t.charAt(Cr):null,function(r,t){var n=Jr(r),e=Jr(t);return{source:u,start:{offset:r,line:n.line,column:n.column},end:{offset:t,line:e.line,column:e.column}}}(Cr,Cr<t.length?Cr+1:Cr))}}},(o=c).exports&&(o.exports=l());class f{static parse(r){return c.exports.parse(r)}}const h=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,p=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,v=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,m=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,d=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,w=new Set(["current_timestamp","current_date","current_time"]);function y(r,t){return(r+="").length>=t?r:new Array(t-r.length+1).join("0")+r}function E(r,t,n="0",e="0",a="0",u="0",i="",s="0",o="0"){if("+"===i||"-"===i){const l=`${y(parseInt(r,10),4)}-${y(parseInt(t,10),2)}-${y(parseInt(n,10),2)}`;let c="";parseFloat(u)<10&&(c="0");const f=`${y(parseInt(e,10),2)}:${y(parseInt(a,10),2)}:${c+parseFloat(u).toString()}`,h=`${i}${y(parseInt(s,10),2)}:${y(parseInt(o,10),2)}`;return new Date(l+"T"+f+h)}return new Date(parseInt(r,10),parseInt(t,10)-1,parseInt(n,10),parseInt(e,10),parseInt(a,10),parseFloat(u))}class x{static makeBool(r){return P(r)}static featureValue(r,t,n,e){return M(r,t,n,e)}static equalsNull(r){return null===r}static applyLike(r,t,n){return O(r,t,n)}static ensureArray(r){return T(r)}static applyIn(r,t){return A(r,t)}static currentDate(){const r=new Date;return r.setHours(0,0,0,0),r}static makeSqlInterval(r,t,n){return u.createFromValueAndQualifer(r,t,n)}static convertInterval(r){return r instanceof u?r.valueInMilliseconds():r}static currentTimestamp(){return new Date}static compare(r,t,n){return D(r,t,n)}static calculate(r,t,n){return R(r,t,n)}static makeComparable(r){return _(r)}static evaluateFunction(r,t){return i(r,t)}static lookup(r,t){const n=t[r];return void 0===n?null:n}static between(r,t){return null==r||null==t[0]||null==t[1]?null:r>=t[0]&&r<=t[1]}static notbetween(r,t){return null==r||null==t[0]||null==t[1]?null:r<t[0]||r>t[1]}static ternaryNot(r){return F(r)}static ternaryAnd(r,t){return S(r,t)}static ternaryOr(r,t){return b(r,t)}}class I{constructor(r,t){this.fieldsIndex=t,this.datefields={},this.parameters={},this._hasDateFunctions=void 0,this.parseTree=f.parse(r);const{isStandardized:n,isAggregate:e,referencedFieldNames:a}=this.extractExpressionInfo(t);this.referencedFieldNames=a,this.isStandardized=n,this.isAggregate=e}static create(r,t){return new I(r,t)}get fieldNames(){return this.referencedFieldNames}testSet(r,t=$){const n={};for(const e of this.fieldNames)n[e]=r.map((r=>t.getAttribute(r,e)));return!!this.evaluateNode(this.parseTree,{attributes:n},$)}calculateValue(r,t=$){const n=this.evaluateNode(this.parseTree,r,t);return n instanceof u?n.valueInMilliseconds()/864e5:n}calculateValueCompiled(r,n=$){return null!=this.parseTree._compiledVersion?this.parseTree._compiledVersion(r,this.parameters,n,this.datefields):t("esri-csp-restrictions")?this.calculateValue(r,n):(this.compileMe(),this.parseTree._compiledVersion(r,this.parameters,n,this.datefields))}testFeature(r,t=$){return!!this.evaluateNode(this.parseTree,r,t)}testFeatureCompiled(r,n=$){return null!=this.parseTree._compiledVersion?!!this.parseTree._compiledVersion(r,this.parameters,n,this.datefields):t("esri-csp-restrictions")?this.testFeature(r,n):(this.compileMe(),!!this.parseTree._compiledVersion(r,this.parameters,n,this.datefields))}get hasDateFunctions(){return null!=this._hasDateFunctions||(this._hasDateFunctions=!1,this.visitAll(this.parseTree,(r=>{"current_time"===r.type?this._hasDateFunctions=!0:"function"===r.type&&(this._hasDateFunctions=this._hasDateFunctions||w.has(r.name.toLowerCase()))}))),this._hasDateFunctions}getFunctions(){const r=new Set;return this.visitAll(this.parseTree,(t=>{"function"===t.type&&r.add(t.name.toLowerCase())})),Array.from(r)}getExpressions(){const r=new Map;return this.visitAll(this.parseTree,(t=>{if("function"===t.type){const n=t.name.toLowerCase(),e=t.args.value[0];if("column_ref"===e.type){const t=e.column,a=`${n}-${t}`;r.has(a)||r.set(a,{aggregateType:n,field:t})}}})),[...r.values()]}getVariables(){const r=new Set;return this.visitAll(this.parseTree,(t=>{"param"===t.type&&r.add(t.value.toLowerCase())})),Array.from(r)}compileMe(){const r="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","datefields",r).bind(x)}extractExpressionInfo(r){const t=[],e=new Set;let a=!0,u=!0;return this.visitAll(this.parseTree,(i=>{switch(i.type){case"column_ref":{const n=r.get(i.column);let a,u;n?a=u=n.name:(u=i.column,a=u.toLowerCase()),!n||"date"!==n.type&&"esriFieldTypeDate"!==n.type||(this.datefields[n.name]=1),e.has(a)||(e.add(a),t.push(u)),i.column=u;break}case"function":{const{name:r,args:t}=i,e=t.value.length;a&&(a=function(r,t){const n=s[r.toLowerCase()];return null!=n&&t>=n.minParams&&t<=n.maxParams}(r,e)),u&&(u=function(r,t){const e=n[r.toLowerCase()];return null!=e&&t>=e.minParams&&t<=e.maxParams}(r,e));break}}})),{referencedFieldNames:Array.from(t),isStandardized:a,isAggregate:u}}visitAll(r,t){if(null!=r)switch(t(r),r.type){case"when_clause":this.visitAll(r.operand,t),this.visitAll(r.value,t);break;case"case_expression":for(const n of r.clauses)this.visitAll(n,t);"simple"===r.format&&this.visitAll(r.operand,t),null!==r.else&&this.visitAll(r.else,t);break;case"expr_list":for(const n of r.value)this.visitAll(n,t);break;case"unary_expr":this.visitAll(r.expr,t);break;case"binary_expr":this.visitAll(r.left,t),this.visitAll(r.right,t);break;case"function":this.visitAll(r.args,t)}}evaluateNodeToJavaScript(r){switch(r.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(r.value)+", "+JSON.stringify(r.qualifier)+","+JSON.stringify(r.op)+")";case"case_expression":{let t="";if("simple"===r.format){const n="this.makeComparable("+this.evaluateNodeToJavaScript(r.operand)+")";t="( ";for(let e=0;e<r.clauses.length;e++)t+=" ("+n+" === this.makeComparable("+this.evaluateNodeToJavaScript(r.clauses[e].operand)+")) ? ("+this.evaluateNodeToJavaScript(r.clauses[e].value)+") : ";t+=null!==r.else?this.evaluateNodeToJavaScript(r.else):"null",t+=" )"}else{t="( ";for(let n=0;n<r.clauses.length;n++)t+=" this.makeBool("+this.evaluateNodeToJavaScript(r.clauses[n].operand)+")===true ? ("+this.evaluateNodeToJavaScript(r.clauses[n].value)+") : ";t+=null!==r.else?this.evaluateNodeToJavaScript(r.else):"null",t+=" )"}return t}case"param":return"this.lookup("+JSON.stringify(r.value.toLowerCase())+",lookups)";case"expr_list":{let t="[";for(const n of r.value)"["!==t&&(t+=","),t+=this.evaluateNodeToJavaScript(n);return t+="]",t}case"unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(r.expr)+")";case"binary_expr":switch(r.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case"IS":if("null"!==r.right.type)throw new Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")";case"ISNOT":if("null"!==r.right.type)throw new Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+","+JSON.stringify(r.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+","+JSON.stringify(r.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(r.operator)+","+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")";case"*":case"-":case"+":case"/":return"this.calculate("+JSON.stringify(r.operator)+","+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")"}throw new Error("Not Supported Operator "+r.operator);case"null":case"bool":case"string":case"number":return JSON.stringify(r.value);case"date":return"(new Date("+N(r.value).getTime().toString()+"))";case"timestamp":return"(new Date("+g(r.value).getTime().toString()+"))";case"current_time":return"date"===r.mode?"this.currentDate()":"this.currentTimestamp()";case"column_ref":return"this.featureValue(feature,"+JSON.stringify(r.column)+",datefields,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(r.name)+","+this.evaluateNodeToJavaScript(r.args)+")"}throw new Error("Unsupported sql syntax "+r.type)}evaluateNode(r,t,e){switch(r.type){case"interval":{const n=this.evaluateNode(r.value,t,e);return u.createFromValueAndQualifer(n,r.qualifier,r.op)}case"case_expression":if("simple"===r.format){const n=_(this.evaluateNode(r.operand,t,e));for(let a=0;a<r.clauses.length;a++)if(n===_(this.evaluateNode(r.clauses[a].operand,t,e)))return this.evaluateNode(r.clauses[a].value,t,e);if(null!==r.else)return this.evaluateNode(r.else,t,e)}else{for(let n=0;n<r.clauses.length;n++)if(P(this.evaluateNode(r.clauses[n].operand,t,e)))return this.evaluateNode(r.clauses[n].value,t,e);if(null!==r.else)return this.evaluateNode(r.else,t,e)}return null;case"param":return this.parameters[r.value.toLowerCase()];case"expr_list":{const n=[];for(const a of r.value)n.push(this.evaluateNode(a,t,e));return n}case"unary_expr":return F(this.evaluateNode(r.expr,t,e));case"binary_expr":switch(r.operator){case"AND":return S(this.evaluateNode(r.left,t,e),this.evaluateNode(r.right,t,e));case"OR":return b(this.evaluateNode(r.left,t,e),this.evaluateNode(r.right,t,e));case"IS":if("null"!==r.right.type)throw new Error("Unsupported RHS for IS");return null===this.evaluateNode(r.left,t,e);case"ISNOT":if("null"!==r.right.type)throw new Error("Unsupported RHS for IS");return null!==this.evaluateNode(r.left,t,e);case"IN":{const n=T(this.evaluateNode(r.right,t,e));return A(this.evaluateNode(r.left,t,e),n)}case"NOT IN":{const n=T(this.evaluateNode(r.right,t,e));return F(A(this.evaluateNode(r.left,t,e),n))}case"BETWEEN":{const n=this.evaluateNode(r.left,t,e),a=this.evaluateNode(r.right,t,e);return null==n||null==a[0]||null==a[1]?null:n>=_(a[0])&&n<=_(a[1])}case"NOTBETWEEN":{const n=this.evaluateNode(r.left,t,e),a=this.evaluateNode(r.right,t,e);return null==n||null==a[0]||null==a[1]?null:n<_(a[0])||n>_(a[1])}case"LIKE":return O(this.evaluateNode(r.left,t,e),this.evaluateNode(r.right,t,e),r.escape);case"NOT LIKE":return F(O(this.evaluateNode(r.left,t,e),this.evaluateNode(r.right,t,e),r.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return D(r.operator,this.evaluateNode(r.left,t,e),this.evaluateNode(r.right,t,e));case"-":case"+":case"*":case"/":return R(r.operator,this.evaluateNode(r.left,t,e),this.evaluateNode(r.right,t,e))}case"null":case"bool":case"string":case"number":return r.value;case"date":return N(r.value);case"timestamp":return g(r.value);case"current_time":{const t=new Date;return"date"===r.mode&&t.setHours(0,0,0,0),t}case"column_ref":return M(t,r.column,this.datefields,e);case"function":{const a=this.evaluateNode(r.args,t,e);return this.isAggregate?function(r,t){const e=n[r.toLowerCase()];if(null==e)throw new Error("Function Not Recognised");if(t.length<e.minParams||t.length>e.maxParams)throw new Error(`Invalid Parameter count for call to ${r.toUpperCase()}`);return e.evaluate(t)}(r.name,a):i(r.name,a)}}throw new Error("Unsupported sql syntax "+r.type)}}function g(r){let t=p.exec(r);if(null!==t){const[,r,n,e,a,u,i]=t;return E(r,n,e,a,u,i)}if(t=v.exec(r),null!==t){const[,r,n,e,a,u,i,s,o,l]=t;return E(r,n,e,a,u,i,s,o,l)}if(t=m.exec(r),null!==t){const[,r,n,e,a,u,i,s,o]=t;return E(r,n,e,a,u,"0",i,s,o)}if(t=d.exec(r),null!==t){const[,r,n,e,a,u]=t;return E(r,n,e,a,u)}if(t=h.exec(r),null!==t){const[,r,n,e]=t;return E(r,n,e)}throw new Error("SQL Invalid Timestamp")}function N(r){const t=h.exec(r);if(null===t)throw new Error("SQL Invalid Date");const[,n,e,a]=t;return new Date(parseInt(n,10),parseInt(e,10)-1,parseInt(a,10))}function P(r){return!0===r}function T(r){return Array.isArray(r)?r:[r]}function F(r){return null!==r?!0!==r:null}function S(r,t){return null!=r&&null!=t?!0===r&&!0===t:!1!==r&&!1!==t&&null}function b(r,t){return null!=r&&null!=t?!0===r||!0===t:!0===r||!0===t||null}function A(r,t){if(null==r)return null;let n=!1;for(const e of t)if(null==e)n=null;else if(r===e){n=!0;break}return n}function O(r,t,n){if(null==r)return null;const e=t,a=n;let u="";const i="-[]/{}()*+?.\\^$|";let s=0;for(let r=0;r<e.length;r++){const t=e.charAt(r);switch(s){case 0:t===a?s=1:i.indexOf(t)>=0?u+="\\"+t:u+="%"===t?".*":"_"===t?".":t;break;case 1:i.indexOf(t)>=0?u+="\\"+t:u+=t,s=0}}return new RegExp("^"+u+"$").test(r)}function _(r){return r instanceof Date?r.valueOf():r}function D(r,t,n){if(null==t||null==n)return null;const e=_(t),a=_(n);switch(r){case"<>":return e!==a;case"=":return e===a;case">":return e>a;case"<":return e<a;case">=":return e>=a;case"<=":return e<=a}}function R(r,t,n){if(t instanceof u)if(n instanceof Date)switch(r){case"+":return new Date(t.valueInMilliseconds()+n.getTime());case"-":return t.valueInMilliseconds()-n.getTime();case"*":return t.valueInMilliseconds()*n.getTime();case"/":return t.valueInMilliseconds()/n.getTime()}else if(n instanceof u)switch(r){case"+":return u.createFromMilliseconds(t.valueInMilliseconds()+n.valueInMilliseconds());case"-":return u.createFromMilliseconds(t.valueInMilliseconds()-n.valueInMilliseconds());case"*":return t.valueInMilliseconds()*n.valueInMilliseconds();case"/":return t.valueInMilliseconds()/n.valueInMilliseconds()}else t=t.valueInMilliseconds();else if(n instanceof u)if(t instanceof Date)switch(r){case"+":return new Date(n.valueInMilliseconds()+t.getTime());case"-":return new Date(t.getTime()-n.valueInMilliseconds());case"*":return t.getTime()*n.valueInMilliseconds();case"/":return t.getTime()/n.valueInMilliseconds()}else n=n.valueInMilliseconds();else if(t instanceof Date&&"number"==typeof n)switch(n=24*n*60*60*1e3,t=t.getTime(),r){case"+":return new Date(t+n);case"-":return new Date(t-n);case"*":return new Date(t*n);case"/":return new Date(t/n)}else if(n instanceof Date&&"number"==typeof t)switch(t=24*t*60*60*1e3,n=n.getTime(),r){case"+":return new Date(t+n);case"-":return new Date(t-n);case"*":return new Date(t*n);case"/":return new Date(t/n)}switch(r){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n}}function M(r,t,n,e){const a=e.getAttribute(r,t);return null!=a&&1===n[t]?new Date(a):a}const $={getAttribute:(r,t)=>(function(r){return r&&"object"==typeof r.attributes}(r)?r.attributes:r)[t]};export{I as WhereClause,$ as defaultAttributeAdapter}