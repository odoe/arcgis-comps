import{v as t,t as n,ba as r,r as o}from"./p-9ae46e68.js";import{bW as e,ad as s,bZ as c,b_ as u,c1 as i,bX as a,c8 as f,bd as l,bY as p,bx as h,b$ as d,cf as m,c5 as b,c2 as M,cR as g,bw as j,cM as y}from"./p-566b0715.js";import{r as A,f as w}from"./p-138c2b2c.js";import{s as R,c as x,n as S,a as _,f as E}from"./p-7571af29.js";import"./p-d925341f.js";import"./p-c3efb223.js";import"./p-01158f1c.js";function C(t){return t?{origin:f(t.origin),direction:f(t.direction)}:{origin:l(),direction:l()}}function P(t,n=C()){return function(t,n,r=C()){return p(r.origin,t),p(r.direction,n),r}(t.origin,t.direction,n)}function v(t,n){const r=u(x.get(),a(x.get(),t.direction),i(x.get(),n,t.origin));return c(r,r)}function O(t,n){return c(t,n)/h(t)}new R((function(){return{origin:null,direction:null}}));const T=t.getLogger("esri.geometry.support.sphere");function $(){return S()}function V(t,n=$()){return m(n,t)}function W(t){t[0]=t[1]=t[2]=t[3]=0}function X(t){return Array.isArray(t)?t[3]:t}function Y(t){return Array.isArray(t)?t:H}function Z(t,r,o){if(n(r))return!1;const{origin:e,direction:s}=r,c=k;c[0]=e[0]-t[0],c[1]=e[1]-t[1],c[2]=e[2]-t[2];const u=s[0]*s[0]+s[1]*s[1]+s[2]*s[2],i=2*(s[0]*c[0]+s[1]*c[1]+s[2]*c[2]),a=i*i-4*u*(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]-t[3]*t[3]);if(a<0)return!1;const f=Math.sqrt(a);let l=(-i-f)/(2*u);const p=(-i+f)/(2*u);return(l<0||p<l&&p>0)&&(l=p),!(l<0||(o&&(o[0]=e[0]+s[0]*l,o[1]=e[1]+s[1]*l,o[2]=e[2]+s[2]*l),0))}const k=l();function q(t,n,r){const o=x.get(),e=E.get();u(o,n.origin,n.direction);const i=X(t);u(r,o,n.origin),s(r,r,1/h(r)*i);const a=B(t,n.origin),f=function(t,n){const r=c(t,n)/(h(t)*h(n));return-d(r)}(n.origin,r);return A(e),w(e,e,f+a,o),b(r,r,e),r}function z(t,n,r){const o=i(x.get(),n,Y(t)),c=s(x.get(),o,t[3]/h(o));return e(r,c,Y(t))}function B(t,n){const r=i(x.get(),n,Y(t)),o=h(r),e=X(t),s=e+Math.abs(e-o);return d(e/s)}const D=l();function F(t,n,r,o){const e=i(D,n,Y(t));switch(r){case 0:{const t=g(e,D)[2];return j(o,-Math.sin(t),Math.cos(t),0)}case 1:{const t=g(e,D),n=t[1],r=t[2],s=Math.sin(n);return j(o,-s*Math.cos(r),-s*Math.sin(r),Math.cos(n))}case 2:return a(o,e);default:return}}function G(t,n){const r=i(I,n,Y(t));return h(r)-t[3]}const H=l(),I=l();Object.freeze({__proto__:null,create:$,copy:V,fromCenterAndRadius:function(t,n){return _(t[0],t[1],t[2],n)},wrap:function(t){return t},clear:W,fromRadius:function(t){return t},getRadius:X,getCenter:Y,fromValues:function(t,n,r,o){return _(t,n,r,o)},elevate:function(t,n,r){return t!==r&&p(r,t),r[3]=t[3]+n,r},setExtent:function(t,n,r){return T.error("sphere.setExtent is not yet supported"),t===r?r:V(t,r)},intersectRay:Z,intersectsRay:function(t,n){return Z(t,n,null)},intersectRayClosestSilhouette:function(t,n,r){if(Z(t,n,r))return r;const o=q(t,n,x.get());return e(r,n.origin,s(x.get(),n.direction,M(n.origin,o)/h(n.direction))),r},closestPointOnSilhouette:q,closestPoint:function(t,n,r){return Z(t,n,r)?r:(function(t,n,r){const o=c(t.direction,i(r,n,t.origin));e(r,t.origin,s(r,t.direction,o))}(n,Y(t),r),z(t,r,r))},projectPoint:z,distanceToSilhouette:function(t,n){const r=i(x.get(),n,Y(t)),o=y(r);return Math.sqrt(Math.abs(o-t[3]*t[3]))},angleToSilhouette:B,axisAt:F,altitudeAt:G,setAltitudeAt:function(t,n,r,o){const c=G(t,n),u=F(t,n,2,I),i=s(I,u,r-c);return e(o,n,i)}});class J{constructor(){this.id=r()}unload(){}}class K{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function L(t,n){if(!t){n=n||"assert";const t=new Error(n);throw t.stack&&console.log(t.stack),new K(n)}}function N(t,r){return n(t)&&(t=[]),t.push(r),t}function Q(t,r){if(n(t))return null;const o=t.filter((t=>t!==r));return 0===o.length?null:o}function U(t){return!!o(t)&&!t.visible}export{W as C,$ as P,U as c,C as d,O as e,N as f,v as h,L as i,P as l,J as r,Q as u}