import { O as e$1, g as s, a as s$1 } from './cast-e5ea2533.js';
import { J as o$1 } from './mathUtils-cc1689ad.js';
import { u as u$2 } from './screenUtils-9ed89fa7.js';
import { w as w$1 } from './number-888f4898.js';
import { o as o$2 } from './Texture-2535b531.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n=[255,255,255,1],t=[0,0,0,0];function u$1(r,n){return Array.isArray(n)?(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3]):(r[0]=n.r,r[1]=n.g,r[2]=n.b,r[3]=n.a),r}function o(r,n=0,t=!1){const u=r[n+3];return r[n+0]*=u,r[n+1]*=u,r[n+2]*=u,t||(r[n+3]*=255),r}function c(r){return o(u$1([],r))}function e(n){return o(u$1(t,n)),w$1(t[0],t[1],t[2],t[3])}function i(n){if(!n)return 0;const{r:t,g:u,b:o,a:c}=n;return w$1(t*c,u*c,o*c,255*c)}function f$1(n){if(!n)return 0;const[t,u,o,c]=n;return w$1(t*(c/255),u*(c/255),o*(c/255),c)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var E$1,T$1,I$1,L$1,A$1,_$1,O$1;!function(E){E[E.FILL=0]="FILL",E[E.LINE=1]="LINE",E[E.MARKER=2]="MARKER",E[E.TEXT=3]="TEXT",E[E.LABEL=4]="LABEL";}(E$1||(E$1={})),function(E){E[E.SUCCEEDED=0]="SUCCEEDED",E[E.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY";}(T$1||(T$1={})),function(E){E[E.NONE=0]="NONE",E[E.MAP=1]="MAP",E[E.LABEL=2]="LABEL",E[E.LABEL_ALPHA=4]="LABEL_ALPHA",E[E.HITTEST=8]="HITTEST",E[E.HIGHLIGHT=16]="HIGHLIGHT",E[E.CLIP=32]="CLIP",E[E.DEBUG=64]="DEBUG",E[E.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES";}(I$1||(I$1={})),function(E){E[E.SIZE=0]="SIZE",E[E.COLOR=1]="COLOR",E[E.OPACITY=2]="OPACITY",E[E.ROTATION=3]="ROTATION";}(L$1||(L$1={})),function(E){E[E.NONE=0]="NONE",E[E.OPACITY=1]="OPACITY",E[E.COLOR=2]="COLOR",E[E.ROTATION=4]="ROTATION",E[E.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",E[E.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",E[E.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",E[E.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE";}(A$1||(A$1={})),function(E){E[E.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",E[E.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",E[E.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",E[E.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE";}(_$1||(_$1={})),function(E){E[E.SPRITE=0]="SPRITE",E[E.GLYPH=1]="GLYPH";}(O$1||(O$1={}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class h$1{constructor(){this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0;}acquire(o,h,s,t,i,l,r,e,c){this.color=o,this.haloColor=h,this.haloSize=s,this.size=t,this.angle=i,this.offsetX=l,this.offsetY=r,this.hAnchor=e,this.vAnchor=c;}release(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0;}}h$1.pool=new e$1(h$1);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u=s.getLogger("esri.views.2d.engine.webgl.Utils"),l="geometry",f="per_instance",m="per_instance_vv",d=[{name:l,strideInBytes:36,divisor:0}],p=[{name:l,strideInBytes:36,divisor:0}],g=[{name:l,strideInBytes:12,divisor:0}],y=[{name:l,strideInBytes:40,divisor:0}],h=[{name:l,strideInBytes:36,divisor:0}],w=[{name:l,strideInBytes:36,divisor:0}];function v(e){const t={};for(const r of e)t[r.name]=r.strideInBytes;return t}const S=v(d),L=v(p),M=v(g),A=v(y),I=v(h),T=v(w);function C(e,t){switch(e){case E$1.MARKER:return S;case E$1.FILL:return t?M:L;case E$1.LINE:return A;case E$1.TEXT:return I;case E$1.LABEL:return T}}const b=[l],z=[l],x=[l],E=[l],F=[l];function D(e){switch(e){case E$1.MARKER:return b;case E$1.FILL:return z;case E$1.LINE:return x;case E$1.TEXT:return E;case E$1.LABEL:return F}}function U(e){switch(e%4){case 0:case 2:return 4;case 1:case 3:return 1}}function B(e,t){switch(t%4){case 0:case 2:return new Uint32Array(Math.floor(e*t/4));case 1:case 3:return new Uint8Array(e*t)}}function j(e,t){switch(t%4){case 0:case 2:return new Uint32Array(e);case 1:case 3:return new Uint8Array(e)}}function R(e){return h$1.pool.acquire(e.color?c(e.color):[255,255,255,255],e.haloColor?c(e.haloColor):[255,255,255,255],u$2(e.haloSize),u$2(e.font.size),e.angle*Math.PI/180,e.xoffset/e.font.size,e.yoffset/e.font.size,"left"===e.horizontalAlignment?0:"right"===e.horizontalAlignment?1:.5,"top"===e.verticalAlignment?0:"bottom"===e.verticalAlignment?1:.5)}function $(e){return null!=e}function N(e){return "number"==typeof e}function O(t){switch(t){case"butt":return 0;case"round":return 1;case"square":return 2;default:return u.error(new s$1("mapview-invalid-type",`Cap type ${t} is not a valid option. Defaulting to round`)),1}}function P(t){switch(t){case"miter":return 2;case"bevel":return 0;case"round":return 1;default:return u.error(new s$1("mapview-invalid-type",`Join type ${t} is not a valid option. Defaulting to round`)),1}}function V(e){switch(e){case"opacity":return L$1.OPACITY;case"color":return L$1.COLOR;case"rotation":return L$1.ROTATION;case"size":return L$1.SIZE;default:return u.error(`Cannot interpret unknown vv: ${e}`),null}}function Z(e){const{transform:t,hasZ:r,hasM:n}=e;return {transform:t,hasZ:r,hasM:n}}function k(e,t,r,n,i,o,a){for(const c in o){const t=o[c].stride,n=U(t),a=o[c].data,s=r[c].data,u=t*i.vertexCount/n,l=t*e/n,f=t*i.vertexFrom/n;for(let e=0;e<u;++e)s[e+l]=a[e+f];}const s=i.indexCount;for(let c=0;c<s;++c)n[c+t]=a[c+i.indexFrom]-i.vertexFrom+e;}const q={[l]:35044};function K(e,t){const r=[];for(let n=0;n<5;++n){const i=D(n),o={};for(const e of i)o[e]={data:t(n,e)};r.push({data:e(n),buffers:o});}return r}function X(e,t){let n,i;return o$1(t.width)&&o$1(t.height)?(n=!0,i=9987):(n=!1,i=9729),new o$2(e,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,hasMipmap:n,samplingMode:i,wrapMode:33071,flipped:!0},t)}function _(e){return {vertexFrom:void 0,vertexTo:void 0,geometry:e}}function H(e){switch(e){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}function J(t){switch(t){case 5121:return 1;case 32819:return 2;case 5126:return 4;default:return void u.error(new s$1("webgl-utils",`Unable to handle type ${t}`))}}function Q(t){switch(t){case 5121:return Uint8Array;case 32819:return Uint16Array;case 5126:return Float32Array;default:return void u.error(new s$1("webgl-utils",`Unable to handle type ${t}`))}}function Y(e){const t={};for(const r in e){const n=e[r];let i=0;t[r]=n.map((e=>{const t={...e,normalized:e.normalized||!1,divisor:e.divisor||0,offset:i,stride:0};return i+=e.count*H(e.type),t})),t[r].forEach((e=>e.stride=i));}return t}const G=e=>{const t=new Map;for(const r in e)for(const n of e[r])t.set(n.name,n.location);return t},W=e=>{const t={};for(const r in e){const n=e[r];t[r]=n.length?n[0].stride:0;}return t},ee=new Map,te=(e,t)=>{if(!ee.has(e)){const r=Y(t),n={strides:W(r),bufferLayouts:r,attributes:G(t)};ee.set(e,n);}return ee.get(e)};function re(e){e(E$1.FILL),e(E$1.LINE),e(E$1.MARKER),e(E$1.TEXT),e(E$1.LABEL);}const ne=e=>"path"in e&&pe(e.path),ie=e=>"url"in e&&e.url||"imageData"in e&&e.imageData,oe=e=>"imageData"in e&&e.imageData&&"contentType"in e&&e.contentType?`data:${e.contentType};base64,${e.imageData}`:"url"in e?e.url:null,ae=e=>"url"in e&&e.url&&e.url.includes(".gif")||"contentType"in e&&"image/gif"===e.contentType||"imageData"in e&&e.imageData.includes("data:image/gif"),se=e=>"url"in e&&e.url&&e.url.includes(".png")||"contentType"in e&&"image/png"===e.contentType||"imageData"in e&&e.imageData.includes("data:image/png"),ce=e=>e.type&&-1!==e.type.toLowerCase().indexOf("3d");function ue(e){switch(e.type){case"line":{const t=e;return "CIMSolidStroke"===t.cim.type&&!t.dashTemplate}case"fill":return "CIMSolidFill"===e.cim.type;case"esriSFS":return "esriSFSSolid"===e.style||"esriSFSNull"===e.style;case"esriSLS":return "esriSLSSolid"===e.style||"esriSLSNull"===e.style;default:return !1}}const le=e=>e.includes("data:image/svg+xml");function fe(e){switch("cim"in e?e.cim.type:e.type){case"esriSMS":case"esriPMS":case"CIMPointSymbol":case"CIMVectorMarker":case"CIMPictureMarker":case"CIMCharacterMarker":return !1;default:return !0}}function me(e){const t="maxVVSize"in e&&e.maxVVSize,r="width"in e&&e.width||"size"in e&&e.size||0;return t||r}function de(e){const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return t}const pe=e=>{if(!e)return !1;const t=/[MmZzLlHhVvCcSsQqTtAa0-9-,.\s]/g,r=!e.replace(t,"").length,n=!/[a-zA-Z][a-zA-Z]/.test(e),i=!/^[0-9-,.]/.test(e),o=!/.*[-,.]$/.test(e.trim());return r&&n&&i&&o};

export { $, A$1 as A, B, C, E$1 as E, I$1 as I, J, K, N, O$1 as O, P, Q, U, V, _$1 as _, oe as a, ae as b, ce as c, de as d, f$1 as e, fe as f, i as g, O as h, ie as i, j, k, le as l, me as m, ne as n, o, q, re as r, se as s, te as t, ue as u };
