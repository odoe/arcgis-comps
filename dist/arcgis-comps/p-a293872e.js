import{P as e,e as t,d as s,r as i,i as r,H as n}from"./p-9ae46e68.js";import{a as l}from"./p-fe01b82b.js";import{n as o,a}from"./p-3a5fe179.js";import{G as p,aq as u,x as c,at as d}from"./p-566b0715.js";import{y as h}from"./p-79553c8d.js";import{b as w}from"./p-f42060e0.js";import{p as y,m as f}from"./p-f271906a.js";import{E as m}from"./p-cf2267f9.js";var b;const v=new e({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),j=new e({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let S=b=class extends l{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:s,spatialRelationship:i,timeExtent:r,objectIds:l,units:o,distance:a}=this;return new w({geometry:n(s),objectIds:n(l),spatialRelationship:i,timeExtent:n(r),where:t,units:o,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:s,timeExtent:i,objectIds:r,units:l,distance:o}=this;return new b({geometry:n(t),objectIds:n(r),spatialRelationship:s,timeExtent:n(i),where:e,units:l,distance:o})}};t([s({type:String,json:{write:!0}})],S.prototype,"where",void 0),t([s({types:p,json:{write:!0}})],S.prototype,"geometry",void 0),t([s({type:v.apiValues,json:{name:"spatialRel",read:{reader:v.read},write:{allowNull:!1,writer:v.write,overridePolicy(){return{enabled:i(this.geometry)}}}}})],S.prototype,"spatialRelationship",void 0),t([s({type:Number,json:{write:{overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],S.prototype,"distance",void 0),t([s({type:[Number],json:{write:!0}})],S.prototype,"objectIds",void 0),t([s({type:j.apiValues,json:{read:j.read,write:{writer:j.write,overridePolicy(e){return{enabled:null!=e&&null!=this.geometry}}}}})],S.prototype,"units",void 0),t([s({type:h,json:{write:!0}})],S.prototype,"timeExtent",void 0),S=b=t([r("esri.layers.support.FeatureFilter")],S);const x=S;var R;let g=R=class extends l{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}clone(){return new R({filter:i(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};t([s({type:x,json:{write:!0,origins:{"web-map":{write:{allowNull:!0,writer(e,t,s,i){if(!e)return void(t[s]=e);const r=e.write({},i),n=Object.keys(r);t[s]=1===n.length&&"where"===n[0]?r:null}}}}}})],g.prototype,"filter",void 0),t([s({json:{write:!0,origins:{"web-map":{read:{reader:o},write:{allowNull:!0,writer:a}}}}})],g.prototype,"includedEffect",void 0),t([s({json:{write:!0,origins:{"web-map":{read:{reader:o},write:{allowNull:!0,writer:a}}}}})],g.prototype,"excludedEffect",void 0),t([s({type:Boolean,json:{write:!0,name:"showExcludedLabels",default:!1}})],g.prototype,"excludedLabelsVisible",void 0),g=R=t([r("esri.layers.support.FeatureEffect")],g);const E=g,I=e=>{let i=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return t([s({type:E,json:{origins:{"web-map":{write:{allowNull:!0}}}}})],i.prototype,"featureEffect",void 0),i=t([r("esri.layers.mixins.FeatureEffectLayer")],i),i};let N=class extends l{constructor(){super(...arguments),this.type=null}};t([s({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],N.prototype,"type",void 0),N=t([r("esri.layers.support.FeatureReduction")],N);const F=N;var M;let U=M=class extends l{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new M({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};t([s({type:String,json:{write:!0}})],U.prototype,"statisticType",void 0),t([s({type:String,json:{write:!0}})],U.prototype,"onStatisticField",void 0),t([s({type:String,json:{write:!0}})],U.prototype,"onStatisticValueExpression",void 0),U=M=t([r("esri.layers.support.OutStatistic")],U);const V=U;var _;let O=_=class extends l{constructor(){super(...arguments),this.name=null}clone(){return new _({name:this.name,outStatistic:this.outStatistic.clone()})}};t([s({type:String,json:{write:!0}})],O.prototype,"name",void 0),t([s({type:V,json:{write:!0}})],O.prototype,"outStatistic",void 0),O=_=t([r("esri.layers.support.AggregateField")],O);const T=O;var k;let z=k=class extends l{constructor(e){super(e),this.type="cluster",this.clusterRadius=u("80px"),this.clusterMinSize=u("12px"),this.clusterMaxSize=u("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new k({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:n(this.labelingInfo),labelsVisible:this.labelsVisible,fields:n(this.fields),popupEnabled:this.popupEnabled,popupTemplate:n(this.popupTemplate)})}};t([s({type:["cluster"],readOnly:!0,json:{write:!0}})],z.prototype,"type",void 0),t([s({type:Number,cast:e=>"auto"===e?e:u(e),json:{write:!0}})],z.prototype,"clusterRadius",void 0),t([s({type:Number,cast:u,json:{write:!0}})],z.prototype,"clusterMinSize",void 0),t([s({type:Number,cast:u,json:{write:!0}})],z.prototype,"clusterMaxSize",void 0),t([s(y)],z.prototype,"popupEnabled",void 0),t([s({type:c,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],z.prototype,"popupTemplate",void 0),t([s({types:d})],z.prototype,"symbol",void 0),t([s({type:[m],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],z.prototype,"labelingInfo",void 0),t([s(f)],z.prototype,"labelsVisible",void 0),t([s({type:[T],json:{write:!0}})],z.prototype,"fields",void 0),z=k=t([r("esri.layers.support.FeatureReductionCluster")],z);const L=z;var P;let C=P=class extends F{constructor(e){super(e),this.type="selection"}clone(){return new P}};t([s({type:["selection"]})],C.prototype,"type",void 0),C=P=t([r("esri.layers.support.FeatureReductionSelection")],C);const D=C,q={types:{key:"type",base:F,typeMap:{selection:D,cluster:L}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:{key:"type",base:F,typeMap:{selection:L}}},"web-scene":{types:{key:"type",base:F,typeMap:{selection:D}}}}}},A=/\[([^\[\]]+)\]/gi;function B(e,t,s){return e?e.map((e=>{const i=new m;if(i.read(e,s),i.labelExpression){const e=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;i.labelExpression=i.labelExpression.replace(A,((t,s)=>`[${function(e,t){if(!t)return e;const s=e.toLowerCase();for(let e=0;e<t.length;e++){const i=t[e].name;if(i.toLowerCase()===s)return i}return e}(s,e)}]`))}return i})):null}export{E as a,D as b,F as p,B as r,q as s,I as t,x as y}