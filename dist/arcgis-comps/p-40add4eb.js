import{e as t,a as n}from"./p-2794293b.js";import{g0 as a,g1 as r,fz as o,g2 as s,g3 as e,g4 as u,g5 as c,g6 as h,g7 as M,g8 as f,g9 as i,ga as l,fs as g,gb as p,fn as m,cf as d,b$ as q,gc as b,fr as x}from"./p-7b6f6c18.js";function A(t,n,a){a*=.5;const r=Math.sin(a);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(a),t}function j(t,n){const r=2*Math.acos(n[3]),o=Math.sin(r/2);return o>a?(t[0]=n[0]/o,t[1]=n[1]/o,t[2]=n[2]/o):(t[0]=1,t[1]=0,t[2]=0),r}function _(t,n,a){const r=n[0],o=n[1],s=n[2],e=n[3],u=a[0],c=a[1],h=a[2],M=a[3];return t[0]=r*M+e*u+o*h-s*c,t[1]=o*M+e*c+s*u-r*h,t[2]=s*M+e*h+r*c-o*u,t[3]=e*M-r*u-o*c-s*h,t}function y(t,n,r,o){const s=n[0],e=n[1],u=n[2],c=n[3];let h,M,f,i,l,g=r[0],p=r[1],m=r[2],d=r[3];return M=s*g+e*p+u*m+c*d,M<0&&(M=-M,g=-g,p=-p,m=-m,d=-d),1-M>a?(h=Math.acos(M),f=Math.sin(h),i=Math.sin((1-o)*h)/f,l=Math.sin(o*h)/f):(i=1-o,l=o),t[0]=i*s+l*g,t[1]=i*e+l*p,t[2]=i*u+l*m,t[3]=i*c+l*d,t}function z(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t}function E(t,n){const a=n[0]+n[4]+n[8];let r;if(a>0)r=Math.sqrt(a+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{let a=0;n[4]>n[0]&&(a=1),n[8]>n[3*a+a]&&(a=2);const o=(a+1)%3,s=(a+2)%3;r=Math.sqrt(n[3*a+a]-n[3*o+o]-n[3*s+s]+1),t[a]=.5*r,r=.5/r,t[3]=(n[3*o+s]-n[3*s+o])*r,t[o]=(n[3*o+a]+n[3*a+o])*r,t[s]=(n[3*s+a]+n[3*a+s])*r}return t}function L(t,n,a,r){const o=.5*Math.PI/180;n*=o,a*=o,r*=o;const s=Math.sin(n),e=Math.cos(n),u=Math.sin(a),c=Math.cos(a),h=Math.sin(r),M=Math.cos(r);return t[0]=s*c*M-e*u*h,t[1]=e*u*M+s*c*h,t[2]=e*c*h-s*u*M,t[3]=e*c*M+s*u*h,t}const v=r,O=o,T=s,W=_,X=e,Y=u,Z=c,$=h,k=$,w=M,B=w,C=f,D=i,F=l,G=d(),H=q(1,0,0),I=q(0,1,0),J=t(),K=t(),N=n();Object.freeze({__proto__:null,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},setAxisAngle:A,getAxisAngle:j,multiply:_,rotateX:function(t,n,a){a*=.5;const r=n[0],o=n[1],s=n[2],e=n[3],u=Math.sin(a),c=Math.cos(a);return t[0]=r*c+e*u,t[1]=o*c+s*u,t[2]=s*c-o*u,t[3]=e*c-r*u,t},rotateY:function(t,n,a){a*=.5;const r=n[0],o=n[1],s=n[2],e=n[3],u=Math.sin(a),c=Math.cos(a);return t[0]=r*c-s*u,t[1]=o*c+e*u,t[2]=s*c+r*u,t[3]=e*c-o*u,t},rotateZ:function(t,n,a){a*=.5;const r=n[0],o=n[1],s=n[2],e=n[3],u=Math.sin(a),c=Math.cos(a);return t[0]=r*c+o*u,t[1]=o*c-r*u,t[2]=s*c+e*u,t[3]=e*c-s*u,t},calculateW:function(t,n){const a=n[0],r=n[1],o=n[2];return t[0]=a,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-a*a-r*r-o*o)),t},slerp:y,random:function(t){const n=b(),a=b(),r=b(),o=Math.sqrt(1-n),s=Math.sqrt(n);return t[0]=o*Math.sin(2*Math.PI*a),t[1]=o*Math.cos(2*Math.PI*a),t[2]=s*Math.sin(2*Math.PI*r),t[3]=s*Math.cos(2*Math.PI*r),t},invert:function(t,n){const a=n[0],r=n[1],o=n[2],s=n[3],e=a*a+r*r+o*o+s*s,u=e?1/e:0;return t[0]=-a*u,t[1]=-r*u,t[2]=-o*u,t[3]=s*u,t},conjugate:z,fromMat3:E,fromEuler:L,str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},copy:v,set:O,add:T,mul:W,scale:X,dot:Y,lerp:Z,length:$,len:k,squaredLength:w,sqrLen:B,normalize:C,exactEquals:D,equals:F,rotationTo:function(t,n,a){const r=x(n,a);return r<-.999999?(g(G,H,n),p(G)<1e-6&&g(G,I,n),m(G,G),A(t,G,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(g(G,n,a),t[0]=G[0],t[1]=G[1],t[2]=G[2],t[3]=1+r,C(t,t))},sqlerp:function(t,n,a,r,o,s){return y(J,n,o,s),y(K,a,r,s),y(t,J,K,2*s*(1-s)),t},setAxes:function(t,n,a,r){const o=N;return o[0]=a[0],o[3]=a[1],o[6]=a[2],o[1]=r[0],o[4]=r[1],o[7]=r[2],o[2]=-n[0],o[5]=-n[1],o[8]=-n[2],C(t,E(t,o))}});export{L as C,A as I,D as N,j as P,_ as v,z as w}