import{fH as a,k as i}from"./p-5420851c.js";import{h as e,s as n,u as t,v as l,b as o,g as s,y as r,D as u,o as m}from"./p-c3449e4f.js";import"./p-53bb6ab4.js";import"./p-0a5ba773.js";let p=null;async function c(n,t){if(!t)return[];const l=n.field,o=n.valueExpression,s=n.normalizationType,r=n.normalizationField,u=n.normalizationTotal,m=[],c=n.viewInfoParams;let f=null,d=null;if(o){if(!p){const{arcadeUtils:i}=await a();p=i}f=p.createFunction(o),d=c&&p.getViewInfo({viewingMode:c.viewingMode,scale:c.scale,spatialReference:new i(c.spatialReference)})}return t.forEach((a=>{const i=a.attributes;let n;if(o){const i=p.createExecContext(a,d);n=p.executeFunction(f,i)}else i&&(n=i[l]);if(s&&isFinite(n)){const a=i&&parseFloat(i[r]);n=e(n,s,a,u)}m.push(n)})),m}async function f(a){const{attribute:i,featuresJSON:e}=a,{normalizationType:o,normalizationField:s,minValue:r,maxValue:u,fieldType:p}=i,f=await c({field:i.field,valueExpression:i.valueExpression,normalizationType:o,normalizationField:s,normalizationTotal:i.normalizationTotal,viewInfoParams:i.viewInfoParams},e),d=m({normalizationType:o,normalizationField:s,minValue:r,maxValue:u}),z={value:.5,fieldType:p},y="esriFieldTypeString"===p?n({values:f,supportsNullCount:d,percentileParams:z}):t({values:f,minValue:r,maxValue:u,useSampleStdDev:!o,supportsNullCount:d,percentileParams:z});return l(y,"esriFieldTypeDate"===p)}async function d(a){const{attribute:i,featuresJSON:e}=a,n=await c({field:i.field,valueExpression:i.valueExpression,viewInfoParams:i.viewInfoParams},e),t=o(n);return s(t,i.domain,i.returnAllCodedValues)}async function z(a){const{attribute:i,featuresJSON:e}=a,{field:n,normalizationType:t,normalizationField:l,normalizationTotal:o,classificationMethod:s}=i,m=await c({field:n,valueExpression:i.valueExpression,normalizationType:t,normalizationField:l,normalizationTotal:o,viewInfoParams:i.viewInfoParams},e),p=r(m,{field:n,normalizationType:t,normalizationField:l,normalizationTotal:o,classificationMethod:s,standardDeviationInterval:i.standardDeviationInterval,numClasses:i.numClasses,minValue:i.minValue,maxValue:i.maxValue});return u(p,s)}export{z as classBreaks,f as summaryStatistics,d as uniqueValues}