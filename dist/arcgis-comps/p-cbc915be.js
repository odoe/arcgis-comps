import{A as e,Q as o,s as n}from"./p-e58503d5.js";async function r(r,t,s,a,i,d){let l=null;if(e(s)){const n=`${r}/nodepages/`,t=n+Math.floor(s.rootIndex/s.nodesPerPage);try{return{type:"page",rootPage:(await o(t,{query:{f:"json",token:a},responseType:"json",signal:d})).data,rootIndex:s.rootIndex,pageSize:s.nodesPerPage,lodMetric:s.lodSelectionMetricType,urlPrefix:n}}catch(o){e(i)&&i.warn("#fetchIndexInfo()","Failed to load root node page. Falling back to node documents.",t,o),l=o}}if(!t)return null;const c=`${r}/nodes/`,p=c+(t&&t.split("/").pop());try{return{type:"node",rootNode:(await o(p,{query:{f:"json",token:a},responseType:"json",signal:d})).data,urlPrefix:c}}catch(e){throw new n("sceneservice:root-node-missing","Root node missing.",{pageError:l,nodeError:e,url:p})}}export{r as n}