import{r as t,c as e,g as i,h as s}from"./p-53bb6ab4.js";import{e as r,d as n,i as o,p as l,f as a,s as h,B as u,r as c,j as d,v as p,m,h as f,a as g,b as v,l as y,E as w,c as b,k as _,$ as A,G as x,C as S,g as C,n as k,M as I,o as M,q as T,t as E,x as j,H as O,u as L,w as F,y as z,z as P,A as R,D as N,F as B,I as D,J as G,K as V,L as $,N as q,O as H,P as U,Q as W,S as J,R as Y,T as K,U as Q,V as Z,W as X,X as tt,Y as et,Z as it,_ as st,a0 as rt,a1 as nt,a2 as ot,a3 as lt,a4 as at,a5 as ht,a6 as ut,a7 as ct,a8 as dt,a9 as pt,aa as mt,ab as ft,ac as gt,ad as vt,ae as yt,af as wt,ag as bt,ah as _t,ai as At,aj as xt,ak as St,al as Ct,am as kt,an as It,ao as Mt,ap as Tt,aq as Et,ar as jt,as as Ot,at as Lt,au as Ft,av as zt,aw as Pt,ax as Rt,ay as Nt,az as Bt,aA as Dt,aB as Gt,aC as Vt,aD as $t,aE as qt,aF as Ht,aG as Ut,aH as Wt,aI as Jt,aJ as Yt,aK as Kt,aL as Qt,aM as Zt,aN as Xt,aO as te,aP as ee,aQ as ie,aR as se,aS as re,aT as ne,aU as oe,aV as le,aW as ae,aX as he,aY as ue,aZ as ce,a_ as de,a$ as pe,b0 as me,b1 as fe,b2 as ge,b3 as ve,b4 as ye,b5 as we,b6 as be,b7 as _e,b8 as Ae,b9 as xe,ba as Se,bb as Ce,bc as ke,bd as Ie,be as Me,bf as Te,bg as Ee,bh as je,bi as Oe,bj as Le,bk as Fe,bl as ze,bm as Pe,bn as Re,bo as Ne,bp as Be,bq as De,br as Ge,bs as Ve,bt as $e,bu as qe,bv as He,bw as Ue,bx as We,by as Je,bz as Ye,bA as Ke,bB as Qe,bC as Ze,bD as Xe,bE as ti,bF as ei,bG as ii,bH as si,bI as ri,bJ as ni,bK as oi,bL as li,bM as ai,bN as hi,bO as ui,bP as ci,bQ as di,bR as pi,bS as mi,bT as fi,bU as gi,bV as vi,bW as yi,bX as wi,bY as bi,bZ as _i,b_ as Ai,b$ as xi,c0 as Si,c1 as Ci,c2 as ki,c3 as Ii,c4 as Mi}from"./p-5420851c.js";import{i as Ti}from"./p-0a69a268.js";import{r as Ei}from"./p-4c6040da.js";import{c as ji}from"./p-e5d37620.js";import{getSymbolLayerFill as Oi}from"./p-c3398c92.js";import{v as Li,A as Fi,I as zi,b as Pi,T as Ri,U as Ni,L as Bi,C as Di}from"./p-f44446be.js";import{c as Gi}from"./p-aef2f66b.js";import"./p-c1f9963f.js";import{a as Vi,n as $i}from"./p-e32e360a.js";import{r as qi}from"./p-207b5a2e.js";import{n as Hi,e as Ui,t as Wi}from"./p-e0707b10.js";import{r as Ji}from"./p-9d3cbf73.js";import"./p-078c732e.js";import"./p-2f9d204e.js";import"./p-03d6250d.js";import"./p-e4802f24.js";import"./p-94382dd8.js";import"./p-4d0ba4c4.js";class Yi{constructor(t){this.typeWorkerQuota=t,this.tasks=new Array,this.numWorkers=0,this.statistics=new Ki}}class Ki{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}}class Qi{constructor(t,e,i,s){this._workerFunc=t,this._callbackFunc=e,this._maxTotalNumWorkers=i,this._totalNumWorkers=0,this._clients=s.map((t=>new Yi(t)))}hasQuota(t){const e=this._clients[t];return!!e&&(this._totalNumWorkers<this._maxTotalNumWorkers||e.numWorkers+e.tasks.length<e.typeWorkerQuota)}push(t){const e=this._clients[t.client];e&&(this._totalNumWorkers<this._maxTotalNumWorkers?(e.numWorkers++,this._totalNumWorkers++,this._workerFunc(t,((t,e)=>this._taskCallback(t,e)))):e.tasks.push(t))}cancel(t){this._taskFinished(t),t._cancelled=!0}destroy(){this._clients.length=0}_taskFinished(t){const e=this._clients[t.client];this._totalNumWorkers--,e.numWorkers--,e.statistics.requests++,e.statistics.size+=t.size||0,e.statistics.duration+=t.duration||0,e.statistics.speed=e.statistics.duration>0?e.statistics.size/e.statistics.duration:0,Ti(e.numWorkers>=0),this._next()}_next(){for(const t of this._clients)if(t&&t.numWorkers<t.typeWorkerQuota&&this._processQueue(t))return;for(const t of this._clients)if(t&&this._processQueue(t))return}_processQueue(t){for(;t.tasks.length>0;)if(this._workerFunc(t.tasks.shift(),((t,e)=>this._taskCallback(t,e))))return t.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(t,e){t._cancelled||(this._callbackFunc(t,e),this._taskFinished(t))}getStatsForType(t){const e=this._clients[t];return e?{quota:e.typeWorkerQuota,workers:e.numWorkers,queueSize:e.tasks.length,requestStats:e.statistics}:null}get test(){const t=this;return{set workerFunc(e){t._workerFunc=e}}}}class Zi extends class{constructor(t){this.client=t,this._cancelled=!1,this.size=0,this.duration=0}}{constructor(t,e,i,s,r){super(s),this.url=t,this.options=e,this.docType=i,this.key=r,this.result=null,this.status=1,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0}}let Xi=class extends l{constructor(){super(...arguments),this.tasks=new Map,this.onLoadQueue=new Array,this.doneQueue=new Array,this.updating=!1}setup(t,e,i){this.loadQueue=new Qi(((t,e)=>this.startLoading(t,e)),((t,e)=>this.doneLoadingCallback(t,e)),t,e),i&&(this.taskHandle=i.registerTask(a.STREAM_DATA_LOADER,this))}destroy(){this.taskHandle=h(this.taskHandle),this.tasks.forEach((t=>{t.abortController&&t.abortController.abort()})),this.loadQueue.destroy(),this.loadQueue=null,this.onLoadQueue=null,this.doneQueue=null,this.tasks=null}hasDownloadSlots(t){return this.loadQueue.hasQuota(t)}request(t,e,i,s={}){const r=u();r.__signal=c(s)?s.signal:null;const n=this.createOrUpdateTask(t,e,i,s,r);return d(s,(()=>this.cancelRequest(n,r))),r.promise}createTask(t,e,i,s,r,n){const o=new Zi(t,e,i,s,r);return this.updateTask(o,n),this.tasks.set(r,o),1===this.tasks.size&&this._set("updating",!0),this.loadQueue.push(o),o}cancelRequest(t,e){p(t.resolvers,e),e.reject(m()),0===t.resolvers.length&&(2===t.status&&(t.status=4,this.loadQueue.cancel(t),t.abortController.abort(),t.request=null,t.abortController=null),t.status=4,this.tasks.delete(t.key),0===this.tasks.size&&this._set("updating",!1))}taskKey(t,e,i){return`${t}:${e}:${i}`}updateTask(t,e){t.resolvers.push(e)}createOrUpdateTask(t,e,i,s,r){const n=c(s)&&s.uid||t,o=this.taskKey(n,e,i),l=this.tasks.get(o);return l?(this.updateTask(l,r),l):this.createTask(t,s,e,i,o,r)}doneLoadingCallback(t,e){this.loadQueue&&(Ti(2===t.status),t.status=3,this.taskHandle?this.doneQueue.push({task:t,err:e}):this.doneLoading(t,e))}get running(){return this.doneQueue.length>0||this.onLoadQueue.length>0}runTask(t){for(;!t.done&&this.onLoadQueue.length>0;){const e=this.onLoadQueue.shift();f(e.task.abortController),e.task.abortController=null,e.callback(e.task),t.madeProgress()}for(;!t.done&&this.doneQueue.length>0;){const e=this.doneQueue.shift();3!==e.task.status&&(e.err=e.err||m()),this.doneLoading(e.task,e.err),t.madeProgress()}}doneLoading(t,e){let i=t.result instanceof HTMLImageElement?0:t.resolvers.length;for(const s of t.resolvers)if(e)g(e)?s.reject(e):s.reject(new v("stream-data-loader:request-error",`Failed to request resource at '${t.url}'. ${e}`,{url:t.url,error:e}));else{--i;const e=i<=0?t.result:y(t.result);s.resolve(e)}this.tasks.delete(t.key),0===this.tasks.size&&this._set("updating",!1)}startLoading(t,e){if(4===t.status)return!1;let i,s;switch(t.startTime=performance.now(),t.status=2,t.docType){case"binary":s="array-buffer",i=0;break;case"image":s="image";break;case"image+type":s="array-buffer";break;default:s="json"}t.abortController=new AbortController;const r=t.abortController.signal;t.request=w(t.url,{...t.options,responseType:s,timeout:i,signal:r});let n=()=>{};const o=i=>{t.duration=performance.now()-t.startTime,t.size=i instanceof ArrayBuffer?i.byteLength:t.size||0,t.result=i,this.taskHandle?this.onLoadQueue.push({callback:e,task:t}):(t.abortController=null,e(t))},l=i=>{2===t.status&&e(t,i),n()};return"image+type"!==t.docType?(t.request.then((t=>o(t.data)),l),!0):(t.request.then((e=>{const a=e.data,h=function(t){if(t.byteLength<2)return"unknown";const e=new Uint8Array(t,0,t.byteLength);return 137===e[0]&&80===e[1]?"image/png":71===e[0]&&73===e[1]?"image/gif":66===e[0]&&77===e[1]?"image/bmp":255===e[0]&&216===e[1]?"image/jpeg":"unknown"}(a);if(s="image",t.size=a.byteLength,"unknown"===h)return t.request=w(t.url,{responseType:s,timeout:i,signal:r}),void t.request.then((t=>o(t.data)),l);const u=new Blob([a],{type:h}),c=window.URL.createObjectURL(u);n=()=>window.URL.revokeObjectURL(c),t.request=w(c,{responseType:s,timeout:i,signal:r}),t.request.then((t=>o(new ts(t.data,h,n))),l)}),l),!0)}get test(){return{loadQueue:this.loadQueue}}};r([n({readOnly:!0})],Xi.prototype,"updating",void 0),Xi=r([o("esri.views.3d.support.StreamDataLoader")],Xi);class ts{constructor(t,e,i){this.image=t,this.type=e,this.release=i}get isOpaque(){return"image/jpeg"===this.type}}class es{constructor(t){const e=es.checkUnsupported(t);if(c(e))throw e;const i=F(t);this.spatialReference=i.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=A(this.spatialReference)||x(this.spatialReference)||S(this.spatialReference),this.origin=[i.origin.x,i.origin.y],this.pixelSize=i.size[0],this.dpi=i.dpi;const s=i.lods.reduce((function(t,e,i){return e.level<t.min&&(t.min=e.level,t.minIndex=i),t.max=Math.max(t.max,e.level),t}),{min:1/0,minIndex:0,max:-1/0}),r=i.lods[s.minIndex],n=2**r.level;let o=r.resolution*n,l=r.scale*n;this.levels=new Array(s.max+1);for(let t=0;t<this.levels.length;t++)this.levels[t]={resolution:o,scale:l,tileSize:[o*i.size[0],o*i.size[1]]},o/=2,l/=2}clone(){return new es(this.toTileInfo())}toTileInfo(){return new b({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map(((t,e)=>({level:e,scale:t.scale,resolution:t.resolution})))})}getExtent(t,e,i,s){const r=this.levels[t],n=r.tileSize[0],o=r.tileSize[1];s[0]=this.origin[0]+i*n,s[2]=s[0]+n,s[3]=this.origin[1]-e*o,s[1]=s[3]-o}convertExtentToRadians(t,e){this._isWebMercator?(e[0]=C(t[0]),e[1]=k(t[1]),e[2]=C(t[2]),e[3]=k(t[3])):this._isGCS&&(e[0]=I(t[0]),e[1]=I(t[1]),e[2]=I(t[2]),e[3]=I(t[3]))}getExtentGeometry(t,e,i,s=new M){return this.getExtent(t,e,i,is),s.spatialReference=this.spatialReference,s.xmin=is[0],s.ymin=is[1],s.xmax=is[2],s.ymax=is[3],s.zmin=void 0,s.zmax=void 0,s}ensureMaxLod(t){if(null==t)return!1;let e=!1;for(;this.levels.length<=t;){const t=this.levels[this.levels.length-1],i=t.resolution/2;this.levels.push({resolution:i,scale:t.scale/2,tileSize:[i*this.pixelSize,i*this.pixelSize]}),e=!0}return e}capMaxLod(t){this.levels.length>t+1&&(this.levels.length=t+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(t){return this.levels[0].scale/2**t}levelAtScale(t){const e=this.levels[0].scale;return t>=e?0:Math.log(e/t)*Math.LOG2E}resolutionAtLevel(t){return this.levels[0].resolution/2**t}compatibleWith(t){if(!(t instanceof es)){if(es.checkUnsupported(t))return!1;t=new es(t)}if(!t.spatialReference.equals(this.spatialReference))return!1;if(t.pixelSize!==this.pixelSize)return!1;const e=Math.min(this.levels.length,t.levels.length)-1,i=this.levels[e].resolution;let s=.5*i;return!(!T(t.origin[0],this.origin[0],s)||!T(t.origin[1],this.origin[1],s))&&(s=.5*i/2**e/this.pixelSize*12,T(i,t.levels[e].resolution,s))}rootTilesInExtent(t,e=null,i=1/0){const s=new Array,r=this.levels[0].tileSize;if(E(t)||0===r[0]||0===r[1])return s;es.computeRowColExtent(t,r,this.origin,is);let n=is[1],o=is[3],l=is[0],a=is[2];const h=a-l,u=o-n;if(h*u>i){const t=Math.floor(Math.sqrt(i));u>t&&(n=n+Math.floor(.5*u)-Math.floor(.5*t),o=n+t),h>t&&(l=l+Math.floor(.5*h)-Math.floor(.5*t),a=l+t)}for(let t=n;t<o;t++)for(let e=l;e<a;e++)s.push([0,t,e]);return c(e)&&(e[0]=this.origin[0]+l*r[0],e[1]=this.origin[1]-o*r[1],e[2]=this.origin[0]+a*r[0],e[3]=this.origin[1]-n*r[1]),s}static computeRowColExtent(t,e,i,s){const r=.001*(t[2]-t[0]+(t[3]-t[1]));s[0]=Math.max(0,Math.floor((t[0]+r-i[0])/e[0])),s[2]=Math.max(0,Math.ceil((t[2]-r-i[0])/e[0])),s[1]=Math.max(0,Math.floor((i[1]-t[3]+r)/e[1])),s[3]=Math.max(0,Math.ceil((i[1]-t[1]-r)/e[1]))}static isPowerOfTwo(t){const e=t.lods,i=e[0].resolution*2**e[0].level;return!e.some((function(t){return!j(t.resolution,i/2**t.level)}))}static hasGapInLevels(t){const e=t.lods.map((function(t){return t.level}));e.sort((function(t,e){return t-e}));for(let t=1;t<e.length;t++)if(e[t]!==e[0]+t)return!0;return!1}static tileSizeSupported(t){const e=t.size[1];return e===t.size[0]&&0==(e&e-1)&&e>=128&&e<=512}static checkUnsupported(t){return E(t)?new v("tilingscheme:tile-info-missing","Tiling scheme must have tiling information"):t.lods.length<1?new v("tilingscheme:generic","Tiling scheme must have at least one level"):es.isPowerOfTwo(t)?es.hasGapInLevels(t)?new v("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):es.tileSizeSupported(t)?null:new v("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new v("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(t,e){const i=t[2]-t[0],s=t[3]-t[1],r=O(e),n=1.2*Math.max(i,s),o=256,l=new es(new b({size:[o,o],origin:{x:t[0]-.5*(n-i),y:t[3]+.5*(n-s)},lods:[{level:0,resolution:n/o,scale:1/(o/96*.0254/(n*r))}],spatialReference:e}));return l.ensureMaxLod(20),l}static makeWebMercatorAuxiliarySphere(t){const e=new es(es.WebMercatorAuxiliarySphereTileInfo);return e.ensureMaxLod(t),e}static makeGCSWithTileSize(t,e=256,i=16){const s=256/e,r=new es(new b({size:[e,e],origin:{x:-180,y:90,spatialReference:t},spatialReference:t,lods:[{level:0,resolution:.703125*s,scale:295497598.570834*s}]}));return r.ensureMaxLod(i),r}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}}es.WebMercatorAuxiliarySphereTileInfo=new b({size:[256,256],origin:{x:-20037508.342787,y:20037508.342787,spatialReference:_.WebMercator},spatialReference:_.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:591657527.591555}]}),es.WebMercatorAuxiliarySphere=es.makeWebMercatorAuxiliarySphere(19);const is=L();z(P/10);const ss=L();es.WebMercatorAuxiliarySphere.getExtent(0,0,0,ss);const rs=D(),ns=D(),os=D(),ls=D();function as(t,e,i,s){G(rs,i),rs[s]=e[s];const r=V(rs,rs,e),n=V(ns,t,e),o=H(n,r),l=H(r,r);let a;a=o<=0?e:l<=o?i:$(rs,e,q(r,r,o/l));const h=V(rs,t,a);return Math.PI/2-Math.atan(h[2]/Math.sqrt(h[0]*h[0]+h[1]*h[1]))}const hs=Object.freeze({__proto__:null,isInsideExtent:function(t,e,i=0){const s=t.extent;if(E(s))return!1;if(0===i)return R(s,e);const r=Math.min(s[2]-s[0],s[3]-s[1]);return N(s,e,i*r)},tiltToExtentEdge:function(t,e,i){const s=t.extent;if(E(s))return 0;os[0]=s[0],os[1]=s[1],os[2]=i,ls[0]=s[2],ls[1]=s[3],ls[2]=i;let r=1/0,n=1/0;return e[0]<os[0]?r=as(e,os,ls,0):e[0]>ls[0]&&(r=as(e,ls,os,0)),e[1]<os[1]?n=as(e,os,ls,1):e[1]>ls[1]&&(n=as(e,ls,os,1)),Math.min(r,n)},checkIfTileInfoSupportedForViewSR:function(t,e,i){if(t.spatialReference.isGeographic&&!A(t.spatialReference))return new v("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const s=es.checkUnsupported(t);return c(s)?s:function(t,e){const i=t.lods,s=i[0].resolution*2**i[0].level,r=[s*t.size[0],s*t.size[1]],n=[t.origin.x,t.origin.y],o=B(e),l=L();es.computeRowColExtent(o,r,n,l);const a=(l[2]-l[0])*(l[3]-l[1]);if(a>64){const e=i[0].scale*2**i[0].level;let r=Math.max((o[3]-o[1])/t.size[1],(o[2]-o[0])/t.size[0])*e/s;const n=Math.floor(Math.log(r)/Math.log(10));return r=Math.ceil(r/10**n)*10**n,new v("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(e).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+r.toLocaleString()+".",{level0Scale:e,suggestedLevel0Scale:r,requiredNumRootTiles:a,allowedNumRootTiles:64})}return null}(t,i)||(e&&!t.spatialReference.equals(e)?new v("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null)}}),us={1:Object.freeze({__proto__:null,isInsideExtent:function(){return!0},tiltToExtentEdge:function(){return 0},checkIfTileInfoSupportedForViewSR:function(t,e){const i=t.lods.length-1,s=t.spatialReference,r=A(s)||x(s)||S(s);if(s.isWebMercator){if(!es.makeWebMercatorAuxiliarySphere(i).compatibleWith(t))return new v("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!r)return new v("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!es.makeGCSWithTileSize(t.spatialReference,t.size[0],i).compatibleWith(t))return t.spatialReference.isWGS84?new v("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new v("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}if(e&&!t.spatialReference.equals(e))return new v("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}}),2:hs};function cs(t,e,i,s){return us[s].checkIfTileInfoSupportedForViewSR(t,i,e)}async function ds(t,e={}){await async function(t,e){const{basemap:i,view:s}=t;if(await i.load(e),0===i.baseLayers.length)return;const r=function(t){const e=["ArcGISTiledImageServiceLayer","ArcGISTiledMapServiceLayer","OpenStreetMap","VectorTileLayer","WebTiledLayer"];return t.toArray().filter((t=>-1===e.indexOf(t.operationalLayerType))).map((t=>new v("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:t,operationalLayerType:t.operationalLayerType||"unknown"})))}(i.baseLayers.concat(i.referenceLayers));if(r.length)throw r[0];const n=i.baseLayers.getItemAt(0);try{await n.load(e)}catch(t){const e="basemap-compatibility:unknown-error",i="Unknown basemap compatibility error",{name:s=e,message:r=i,details:n}=t;throw new v(s,r,n)}!function(t,e){const i=t.tileInfo;if(!i)return;const s=e.viewingMode;if(!s)return;if(!function(t,e){return null!=t&&("2d"===e||("local"===e?!t.isGeographic||t.isWGS84||4490===t.wkid:t.isWebMercator||t.isWGS84||4490===t.wkid||104971===t.wkid||104905===t.wkid||104903===t.wkid))}(i.spatialReference,s))throw new v(`basemapgalleryitem:spatial-reference-unsupported-${s}`,`Basemap spatial reference is unsupported in ${s} mode`);if("global"===s){let e=cs(i,t.fullExtent,null,1);if(e&&t.compatibleTileInfo256&&!cs(t.compatibleTileInfo256,t.fullExtent,null,1)&&(e=null),e)throw new v(`basemapgalleryitem:tiling-scheme-unsupported-${i.spatialReference.isWebMercator?"web-mercator":"wgs84"}-global`,"Basemap tiling scheme is unsupported in global mode",{error:e})}else if(es.checkUnsupported(i))throw new v("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const r=e.get("basemapTerrain.tilingScheme");if(r&&!r.compatibleWith(i)&&(!t.compatibleTileInfo256||!r.compatibleWith(t.compatibleTileInfo256)))throw new v("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}(n,s)}(t,e),f(e)}async function ps(t,e={}){const{basemap:i,view:s}=t;if(await i.load(e),f(e),0===i.baseLayers.length)return;const r=i.baseLayers.getItemAt(0);if(!function(t){return t&&"base-tile"===t.type||"tile"===t.type||"elevation"===t.type||"imagery-tile"===t.type||"base-elevation"===t.type||"open-street-map"===t.type||"wcs"===t.type||"web-tile"===t.type||"wmts"===t.type||"vector-tile"===t.type}(r))return;if(i.spatialReference){if(s.spatialReference.equals(i.spatialReference))return;ms()}await r.load(e),f(e);const n=(r.get("supportedSpatialReferences")||[r.get("tileInfo.spatialReference")]).filter(Boolean);0!==n.length&&n.every((t=>!s.spatialReference.equals(t)))&&ms()}function ms(){throw new v("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}let fs=class extends l{constructor(t){super(t),this._handles=new U,this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){this._handles.add(W(this,["basemap.loadStatus","compatibilityFunction","view.basemapTerrain?.tilingScheme","view.ready","view.spatialReference"],(()=>this.refresh())))}destroy(){this._cancelCompatibilityCheck(),this._handles.destroy(),this._handles=null,this.basemap=null,this.compatibilityFunction=null,this.view=null}set basemap(t){const e=this._get("basemap");e&&e.cancelLoad(),t&&t.load().catch((()=>{})),this._set("basemap",t)}refresh(){this._cancelCompatibilityCheck(),this._set("state","loading");const t=this.get("basemap.loadStatus");if("loaded"!==t&&"failed"!==t)return;if(!this.compatibilityFunction)return void("loaded"===t?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const e=new AbortController,{signal:i}=e;this.compatibilityFunction(this,{signal:i}).then((()=>{this._set("state","ready"),this._set("error",null)})).catch((t=>{g(t)||(this._set("state","error"),this._set("error",t))})),this._lastCompatibilityCheckController=e}_cancelCompatibilityCheck(){this._lastCompatibilityCheckController&&(this._lastCompatibilityCheckController.abort(),this._lastCompatibilityCheckController=null)}};r([n()],fs.prototype,"basemap",null),r([n()],fs.prototype,"compatibilityFunction",void 0),r([n({readOnly:!0})],fs.prototype,"error",void 0),r([n({readOnly:!0})],fs.prototype,"state",void 0),r([n()],fs.prototype,"view",void 0),fs=r([o("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],fs);const gs=fs,vs=J.ofType(Y);let ys=class extends l{constructor(t){super(t),this.basemaps=new vs}get state(){return"ready"}refresh(){}};r([n({type:vs})],ys.prototype,"basemaps",void 0),r([n({readOnly:!0})],ys.prototype,"state",null),ys=r([o("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],ys);const ws=ys,bs=J.ofType(Y),_s="esri.widgets.BasemapGallery.support.PortalBasemapsSource",As=K.getLogger(_s);let xs=class extends(Q.LoadableMixin(Z(ws))){constructor(t){super(t),this._handles=new U,this.basemaps=new bs,this.filterFunction=null,this.portal=X.getDefault(),this.query=null,this.updateBasemapsCallback=null}initialize(){this._handles.add([W(this,["filterFunction","loadStatus","portal.basemapGalleryGroupQuery","portal.user","query","updateBasemapsCallback"],(()=>this.refresh()))])}destroy(){this._handles.destroy(),this._handles=null,this.filterFunction=null,this.portal=null}get state(){return"not-loaded"===this.loadStatus?"not-loaded":"loading"===this.loadStatus||this._lastPortalBasemapFetchController?"loading":"ready"}load(t){return this.addResolvingPromise(this.portal.load(t)),this.notifyChange("state"),Promise.resolve(this)}async refresh(){if("ready"!==this.state)return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const t=this.portal,e=new AbortController;this._lastPortalBasemapFetchController=e,this.notifyChange("state");try{const i=await t.fetchBasemaps(this._toQueryString(this.query),e);this._updateBasemaps(i)}catch(t){if(g(t))throw t;As.warn(new v("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:t})),this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(t){return t&&"string"!=typeof t?Object.keys(t).map((e=>`${e}:${t[e]}`)).join(" AND "):t}_updateBasemaps(t=[]){let e=this.filterFunction?t.filter(this.filterFunction):t;e=this.updateBasemapsCallback?this.updateBasemapsCallback(e):e,this.basemaps.removeAll(),this.basemaps.addMany(e)}};r([n({readOnly:!0,type:bs})],xs.prototype,"basemaps",void 0),r([n()],xs.prototype,"filterFunction",void 0),r([n({type:X})],xs.prototype,"portal",void 0),r([n()],xs.prototype,"query",void 0),r([n({readOnly:!0})],xs.prototype,"state",null),r([n()],xs.prototype,"updateBasemapsCallback",void 0),xs=r([o(_s)],xs);const Ss=xs,Cs=J.ofType(gs);let ks=class extends Q{constructor(t){super(t),this._handles=new U,this.activeBasemap=null,this.items=new Cs,this.source=new Ss,this.view=null}initialize(){const t=()=>this._recreateItems();this._handles.add([et(this,["compatibilityFunction","state"],(()=>this._updateItems())),it(this,"source.basemaps","change",t,t)])}destroy(){this._handles.destroy(),this._handles=null}get compatibilityFunction(){return void 0===this._get("compatibilityFunction")?"3d"===this.get("view.type")?ds:ps:this._get("compatibilityFunction")}set compatibilityFunction(t){this._set("compatibilityFunction",t)}castSource(t){return Array.isArray(t)||J.isCollection(t)?new ws({basemaps:t}):function(t){return t&&"esri.portal.Portal"===t.declaredClass}(t)?new Ss({portal:t}):function(t){return t&&!(t instanceof Ss)&&(!!t.portal||!!t.query)}(t)?new Ss(t):function(t){return t&&"basemaps"in t&&"state"in t&&"refresh"in t}(t)?t:null}get state(){return this.get("view.ready")&&this.source?"ready":"disabled"}basemapEquals(t,e){return st(t,e)}refresh(){this._recreateItems()}load(t){return this.addResolvingPromise(Q.isLoadable(this.source)?this.source.load(t):Promise.resolve()),Promise.resolve(this)}_recreateItems(){const t=this.get("source.basemaps"),{view:e,compatibilityFunction:i}=this;this.items.removeAll().forEach((t=>t.destroy())),this.items.addMany(t.map((t=>new gs({basemap:t,compatibilityFunction:i,view:e}))))}_updateItems(){this.items.forEach((t=>{t.compatibilityFunction=this.compatibilityFunction,t.view=this.view}))}};r([n({aliasOf:"view.map.basemap"})],ks.prototype,"activeBasemap",void 0),r([n()],ks.prototype,"compatibilityFunction",null),r([n({readOnly:!0,type:Cs})],ks.prototype,"items",void 0),r([n()],ks.prototype,"source",void 0),r([tt("source")],ks.prototype,"castSource",null),r([n({readOnly:!0})],ks.prototype,"state",null),r([n()],ks.prototype,"view",void 0),ks=r([o("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],ks);const Is=ks;let Ms=class extends lt{constructor(t,e){super(t,e),this._handles=new U,this.activeBasemap=null,this.disabled=!1,this.headingLevel=2,this.iconClass="esri-icon-basemap",this.label=void 0,this.messages=null,this.source=null,this.view=null,this.viewModel=new Is}initialize(){const t=this._handles;this.own([it(this,"viewModel.items","change",(e=>{const i="basemap-gallery-item-changes",{added:s,moved:r}=e;t.remove(i),t.add([...s,...r].map((t=>t.watch("state",(()=>this.scheduleRender())))),i),this.scheduleRender()})),t,at(this,"source",(()=>this.viewModel.load()))])}render(){const t="loading"===this.get("source.state"),e=this.disabled||"disabled"===this.get("viewModel.state"),i=this.get("viewModel.items").toArray().map(this._renderBasemapGalleryItem,this),s={"esri-basemap-gallery--source-loading":t,"esri-disabled":e},r=t?ht("div",{class:"esri-basemap-gallery__loader",key:"esri-basemap-gallery__loader"}):null,n=t?null:i.length>0?ht("ul",{class:"esri-basemap-gallery__item-container",key:"esri-basemap-gallery__item-container",role:"menu"},i):ht("div",{class:"esri-widget__content--empty",key:"esri-basemap-gallery__empty-message"},ht(ut,{level:this.headingLevel},this.messages.noBasemaps));return ht("div",{class:this.classes("esri-basemap-gallery esri-widget esri-widget--panel-height-only",s)},r,n)}_handleClick(t){const e=t.currentTarget["data-item"];"ready"===e.state&&(this.activeBasemap=e.basemap)}_renderBasemapGalleryItem(t){const e=t.get("basemap.thumbnailUrl")||ct("esri/themes/base/images/basemap-toggle-64.svg"),i=t.get("basemap.title"),s=t.get("basemap.portalItem.snippet"),r=t.get("error.message")||s||i,{viewModel:n}=this,o=this.disabled||"ready"!==n.state||"ready"!==t.state?-1:0,l=n.basemapEquals(t.basemap,this.activeBasemap),a={"esri-basemap-gallery__item--selected":l,"esri-basemap-gallery__item--loading":"loading"===t.state,"esri-basemap-gallery__item--error":"error"===t.state};return ht("li",{"aria-selected":l.toString(),bind:this,class:this.classes("esri-basemap-gallery__item",a),"data-item":t,onkeydown:this._handleClick,onclick:this._handleClick,role:"menuitem",tabIndex:o,title:r},ht("img",{alt:"",class:"esri-basemap-gallery__item-thumbnail",src:e}),ht("div",{class:"esri-basemap-gallery__item-title"},i))}};r([rt("viewModel.activeBasemap")],Ms.prototype,"activeBasemap",void 0),r([n()],Ms.prototype,"disabled",void 0),r([n()],Ms.prototype,"headingLevel",void 0),r([n()],Ms.prototype,"iconClass",void 0),r([n({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ms.prototype,"label",void 0),r([n(),nt("esri/widgets/BasemapGallery/t9n/BasemapGallery")],Ms.prototype,"messages",void 0),r([rt("viewModel.source")],Ms.prototype,"source",void 0),r([rt("viewModel.view")],Ms.prototype,"view",void 0),r([n()],Ms.prototype,"viewModel",void 0),r([ot()],Ms.prototype,"_handleClick",null),Ms=r([o("esri.widgets.BasemapGallery")],Ms);const Ts=Ms;let Es=class{constructor(i){t(this,i),this.loaded=e(this,"loaded",7),this.position="bottom-left"}validateView(t){t&&(this.widget.view=t,"arcgis-expand"!==this.el.parentElement.tagName.toLowerCase()&&this.widget.view.ui.add(this.widget,this.position))}componentWillLoad(){const t=new Ts({container:this.el});this.widget=t,this.view&&(t.view=this.view),this.loaded.emit(!0)}get el(){return i(this)}static get watchers(){return{view:["validateView"]}}};Es.style="@import url('https://js.arcgis.com/next/esri/themes/light/main.css');arcgis-basemap-gallery{min-width:300px;min-height:240px}";let js=class extends l{constructor(t){super(t),this._viewpointHandle=null,this._handles=new U,this.group=null}initialize(){this._handles.add(it(this,"view.ui","expand",(t=>{const{target:e}=t;e&&e!==this&&e.expanded&&e.group&&e.group===this.group&&this._collapse()})))}destroy(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null}set autoCollapse(t){this._set("autoCollapse",t),this._watchViewpoint()}set expanded(t){const e=!!t;this._set("expanded",e);const i=this.get("view.ui");i&&i.emit("expand",{target:this}),this._viewpointHandleChange(e)}get state(){return this.get("view.ready")?"ready":"disabled"}set view(t){this._get("view")!==t&&(this._set("view",t),t&&dt(t,"ready",(()=>{this.view===t&&this._watchViewpoint()})))}_viewpointHandleChange(t){this._viewpointHandle&&(t?dt(this.view,"stationary",(()=>this._viewpointHandle.resume())):this._viewpointHandle.pause())}_watchViewpoint(){const t="viewpoint";this._handles.remove(t),this._viewpointHandle=null;const{autoCollapse:e,view:i}=this;if(i&&e){const e=pt(i,"3d"===i.type?"camera":"viewpoint",(()=>this._collapse()));this._handles.add(e,t),this._viewpointHandle=e}}_collapse(){this.expanded=!1}};r([n({value:!1})],js.prototype,"autoCollapse",null),r([n({value:!1})],js.prototype,"expanded",null),r([n()],js.prototype,"group",void 0),r([n({readOnly:!0})],js.prototype,"state",null),r([n({value:null})],js.prototype,"view",null),js=r([o("esri.widgets.Expand.ExpandViewModel")],js);const Os=js;let Ls=class extends lt{constructor(t,e){super(t,e),this.autoCollapse=null,this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expanded=null,this.expandTooltip="",this.group=null,this.iconNumber=0,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.view=null,this.viewModel=new Os,this._handleKeyDown=t=>{const{closeOnEsc:e,_toggleButtonEl:i,expanded:s}=this;s&&e&&t.target!==i&&"Escape"===t.key&&("function"==typeof e?e(t):e)&&(this.expanded=!1,null==i||i.focus())}}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:t,messagesCommon:e,collapseTooltip:i,expandTooltip:s}=this;return t?i||e.collapse:s||e.expand}get collapseIconClass(){return"esri-icon-collapse"}set collapseIconClass(t){t?this._override("collapseIconClass",t):this._clearOverride("collapseIconClass")}get expandIconClass(){return mt(this.content)?this.content.iconClass:"esri-icon-expand"}set expandIconClass(t){t?this._override("expandIconClass",t):this._clearOverride("expandIconClass")}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){const{mode:t}=this;return ht("div",{class:this.classes("esri-expand esri-widget",{"esri-expand--auto":"auto"===t,"esri-expand--drawer":"drawer"===t,"esri-expand--floating":"floating"===t}),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())}renderContainer(){const{expanded:t}=this;return ht("div",{class:this.classes("esri-expand__container",{"esri-expand__container--expanded":t})},this.renderPanel(),this.renderContent())}renderMask(){const{expanded:t}=this;return ht("div",{bind:this,onclick:this._toggle,class:this.classes("esri-expand__mask",{"esri-expand__mask--expanded":t})})}renderBadgeNumber(){const{expanded:t,iconNumber:e}=this;return e&&!t?ht("span",{key:"expand__icon-number",class:"esri-expand__icon-number"},e):null}renderPanelNumber(){const{iconNumber:t,expanded:e}=this;return t&&e?ht("span",{key:"expand__expand-icon-number",class:this.classes("esri-expand__icon-number","esri-expand__icon-number--expanded")},t):null}renderIcon(){const{collapseIconClass:t,expandIconClass:e,expanded:i}=this,s={"esri-expand__icon--expanded":i,[t]:i,[e]:!i};return t===e&&(s[t]=!0),ht("span",{"aria-hidden":"true",class:this.classes("esri-collapse__icon",s)})}renderTitle(){return ht("span",{class:"esri-icon-font-fallback-text"},this.expandTitle)}renderExpandButton(){const{expanded:t,expandTitle:e,contentId:i}=this;return ht("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":i,"aria-expanded":t?"true":"false",bind:this,class:"esri-widget--button",onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:e},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}renderPanel(){return ht("div",{class:"esri-expand__panel"},this.renderExpandButton(),this.renderPanelNumber())}renderContent(){const{expanded:t,contentId:e}=this;return ht("div",{id:e,role:"region",class:this.classes("esri-expand__content",{"esri-expand__content--expanded":t})},this.renderContentContainer())}renderContentContainer(){const t=this.content;return"string"==typeof t?ht("div",{innerHTML:t}):mt(t)?t.render():t instanceof HTMLElement?ht("div",{bind:t,afterCreate:this._attachToNode}):ft(t)?ht("div",{bind:t.domNode,afterCreate:this._attachToNode}):null}_toggle(){this.toggle()}_attachToNode(t){t.appendChild(this)}_storeToggleButtonEl(t){this._toggleButtonEl=t}};r([n({readOnly:!0})],Ls.prototype,"contentId",null),r([n({readOnly:!0})],Ls.prototype,"expandTitle",null),r([rt("viewModel.autoCollapse")],Ls.prototype,"autoCollapse",void 0),r([n()],Ls.prototype,"closeOnEsc",void 0),r([n()],Ls.prototype,"collapseIconClass",null),r([n()],Ls.prototype,"collapseTooltip",void 0),r([n()],Ls.prototype,"content",void 0),r([rt("viewModel.expanded")],Ls.prototype,"expanded",void 0),r([n()],Ls.prototype,"expandIconClass",null),r([n()],Ls.prototype,"expandTooltip",void 0),r([rt("viewModel.group")],Ls.prototype,"group",void 0),r([n()],Ls.prototype,"iconNumber",void 0),r([n({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ls.prototype,"label",void 0),r([n(),nt("esri/widgets/Expand/t9n/Expand")],Ls.prototype,"messages",void 0),r([n(),nt("esri/t9n/common")],Ls.prototype,"messagesCommon",void 0),r([n()],Ls.prototype,"mode",void 0),r([rt("viewModel.view")],Ls.prototype,"view",void 0),r([n({type:Os})],Ls.prototype,"viewModel",void 0),r([ot()],Ls.prototype,"_toggle",null),Ls=r([o("esri.widgets.Expand")],Ls);const Fs=Ls;let zs=class{constructor(i){t(this,i),this.loaded=e(this,"loaded",7)}validateView(t){t&&(this.widget.view=t,this.widget.view.ui.add(this.el,this.position))}componentWillLoad(){const t=new Fs({container:this.el});this.widget=t,this.loaded.emit(!0)}componentDidRender(){const t=Array.from(this.el.children);for(let e of t)e.tagName.toLowerCase().includes("arcgis-")&&(e.view=this.view,this.widget.content=e,this.widget.expandIconClass=e.widget.iconClass)}get el(){return i(this)}static get watchers(){return{view:["validateView"]}}};var Ps;zs.style="@import url('https://js.arcgis.com/next/esri/themes/light/main.css');.esri-expand__content--expanded{max-height:240px!important;min-height:32px!important;min-width:240px!important;overflow-y:auto!important;background-color:#fff}";let Rs=Ps=class extends l{constructor(t){super(t),this.autoCloseMenu=!1,this.iconClass=null,this.items=null,this.label=null,this.open=!1,this.selected=!1,this.selectionEnabled=!1,this.clickFunction=null}castItems(t){return t?t.map((t=>t instanceof Ps?t:new Ps(t))):null}};r([n()],Rs.prototype,"autoCloseMenu",void 0),r([n()],Rs.prototype,"iconClass",void 0),r([n()],Rs.prototype,"items",void 0),r([tt("items")],Rs.prototype,"castItems",null),r([n()],Rs.prototype,"label",void 0),r([n()],Rs.prototype,"open",void 0),r([n()],Rs.prototype,"selected",void 0),r([n()],Rs.prototype,"selectionEnabled",void 0),r([n()],Rs.prototype,"clickFunction",void 0),Rs=Ps=r([o("esri.widgets.FeatureTable.Grid.support.ButtonMenuItem")],Rs);const Ns=Rs;let Bs=class extends l{constructor(t){super(t),this.items=null,this.open=!1}castItems(t){return t?t.map((t=>t instanceof Ns?t:new Ns(t))):null}};r([n()],Bs.prototype,"items",void 0),r([tt("items")],Bs.prototype,"castItems",null),r([n()],Bs.prototype,"open",void 0),Bs=r([o("esri.widgets.FeatureTable.Grid.support.ButtonMenuViewModel")],Bs);const Ds=Bs;function Gs(t){var e=t.getBoundingClientRect();return{width:e.width/1,height:e.height/1,top:e.top/1,right:e.right/1,bottom:e.bottom/1,left:e.left/1,x:e.left/1,y:e.top/1}}function Vs(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function $s(t){var e=Vs(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function qs(t){return t instanceof Vs(t).Element||t instanceof Element}function Hs(t){return t instanceof Vs(t).HTMLElement||t instanceof HTMLElement}function Us(t){return"undefined"!=typeof ShadowRoot&&(t instanceof Vs(t).ShadowRoot||t instanceof ShadowRoot)}function Ws(t){return t?(t.nodeName||"").toLowerCase():null}function Js(t){return((qs(t)?t.ownerDocument:t.document)||window.document).documentElement}function Ys(t){return Gs(Js(t)).left+$s(t).scrollLeft}function Ks(t){return Vs(t).getComputedStyle(t)}function Qs(t){var e=Ks(t);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function Zs(t,e,i){void 0===i&&(i=!1);var s=Hs(e);Hs(e)&&function(t){t.getBoundingClientRect()}(e);var r,n,o=Js(e),l=Gs(t),a={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(s||!s&&!i)&&(("body"!==Ws(e)||Qs(o))&&(a=(r=e)!==Vs(r)&&Hs(r)?{scrollLeft:(n=r).scrollLeft,scrollTop:n.scrollTop}:$s(r)),Hs(e)?((h=Gs(e)).x+=e.clientLeft,h.y+=e.clientTop):o&&(h.x=Ys(o))),{x:l.left+a.scrollLeft-h.x,y:l.top+a.scrollTop-h.y,width:l.width,height:l.height}}function Xs(t){var e=Gs(t),i=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:s}}function tr(t){return"html"===Ws(t)?t:t.assignedSlot||t.parentNode||(Us(t)?t.host:null)||Js(t)}function er(t){return["html","body","#document"].indexOf(Ws(t))>=0?t.ownerDocument.body:Hs(t)&&Qs(t)?t:er(tr(t))}function ir(t,e){var i;void 0===e&&(e=[]);var s=er(t),r=s===(null==(i=t.ownerDocument)?void 0:i.body),n=Vs(s),o=r?[n].concat(n.visualViewport||[],Qs(s)?s:[]):s,l=e.concat(o);return r?l:l.concat(ir(tr(o)))}function sr(t){return["table","td","th"].indexOf(Ws(t))>=0}function rr(t){return Hs(t)&&"fixed"!==Ks(t).position?t.offsetParent:null}function nr(t){for(var e=Vs(t),i=rr(t);i&&sr(i)&&"static"===Ks(i).position;)i=rr(i);return i&&("html"===Ws(i)||"body"===Ws(i)&&"static"===Ks(i).position)?e:i||function(t){var e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&Hs(t)&&"fixed"===Ks(t).position)return null;for(var i=tr(t);Hs(i)&&["html","body"].indexOf(Ws(i))<0;){var s=Ks(i);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||e&&"filter"===s.willChange||e&&s.filter&&"none"!==s.filter)return i;i=i.parentNode}return null}(t)||e}var or="top",lr="bottom",ar="right",hr="left",ur=[or,lr,ar,hr],cr=ur.reduce((function(t,e){return t.concat([e+"-start",e+"-end"])}),[]),dr=[].concat(ur,["auto"]).reduce((function(t,e){return t.concat([e,e+"-start",e+"-end"])}),[]),pr=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function mr(t){var e=new Map,i=new Set,s=[];function r(t){i.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!i.has(t)){var s=e.get(t);s&&r(s)}})),s.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){i.has(t.name)||r(t)})),s}function fr(t){var e;return function(){return e||(e=new Promise((function(i){Promise.resolve().then((function(){e=void 0,i(t())}))}))),e}}function gr(t){return t.split("-")[0]}var vr=Math.max,yr=Math.min,wr=Math.round;function br(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&Us(i)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function _r(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Ar(t,e){return"viewport"===e?_r(function(t){var e=Vs(t),i=Js(t),s=e.visualViewport,r=i.clientWidth,n=i.clientHeight,o=0,l=0;return s&&(r=s.width,n=s.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=s.offsetLeft,l=s.offsetTop)),{width:r,height:n,x:o+Ys(t),y:l}}(t)):Hs(e)?function(t){var e=Gs(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}(e):_r(function(t){var e,i=Js(t),s=$s(t),r=null==(e=t.ownerDocument)?void 0:e.body,n=vr(i.scrollWidth,i.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=vr(i.scrollHeight,i.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),l=-s.scrollLeft+Ys(t),a=-s.scrollTop;return"rtl"===Ks(r||i).direction&&(l+=vr(i.clientWidth,r?r.clientWidth:0)-n),{width:n,height:o,x:l,y:a}}(Js(t)))}function xr(t){return t.split("-")[1]}function Sr(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Cr(t){var e,i=t.reference,s=t.element,r=t.placement,n=r?gr(r):null,o=r?xr(r):null,l=i.x+i.width/2-s.width/2,a=i.y+i.height/2-s.height/2;switch(n){case or:e={x:l,y:i.y-s.height};break;case lr:e={x:l,y:i.y+i.height};break;case ar:e={x:i.x+i.width,y:a};break;case hr:e={x:i.x-s.width,y:a};break;default:e={x:i.x,y:i.y}}var h=n?Sr(n):null;if(null!=h){var u="y"===h?"height":"width";switch(o){case"start":e[h]=e[h]-(i[u]/2-s[u]/2);break;case"end":e[h]=e[h]+(i[u]/2-s[u]/2)}}return e}function kr(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function Ir(t,e){return e.reduce((function(e,i){return e[i]=t,e}),{})}function Mr(t,e){void 0===e&&(e={});var i=e.placement,s=void 0===i?t.placement:i,r=e.boundary,n=void 0===r?"clippingParents":r,o=e.rootBoundary,l=void 0===o?"viewport":o,a=e.elementContext,h=void 0===a?"popper":a,u=e.altBoundary,c=void 0!==u&&u,d=e.padding,p=void 0===d?0:d,m=kr("number"!=typeof p?p:Ir(p,ur)),f=t.rects.popper,g=t.elements[c?"popper"===h?"reference":"popper":h],v=function(t,e,i){var s="clippingParents"===e?function(t){var e=ir(tr(t)),i=["absolute","fixed"].indexOf(Ks(t).position)>=0&&Hs(t)?nr(t):t;return qs(i)?e.filter((function(t){return qs(t)&&br(t,i)&&"body"!==Ws(t)})):[]}(t):[].concat(e),r=[].concat(s,[i]),n=r.reduce((function(e,i){var s=Ar(t,i);return e.top=vr(s.top,e.top),e.right=yr(s.right,e.right),e.bottom=yr(s.bottom,e.bottom),e.left=vr(s.left,e.left),e}),Ar(t,r[0]));return n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}(qs(g)?g:g.contextElement||Js(t.elements.popper),n,l),y=Gs(t.elements.reference),w=Cr({reference:y,element:f,strategy:"absolute",placement:s}),b=_r(Object.assign({},f,w)),_="popper"===h?b:y,A={top:v.top-_.top+m.top,bottom:_.bottom-v.bottom+m.bottom,left:v.left-_.left+m.left,right:_.right-v.right+m.right},x=t.modifiersData.offset;if("popper"===h&&x){var S=x[s];Object.keys(A).forEach((function(t){var e=[ar,lr].indexOf(t)>=0?1:-1,i=[or,lr].indexOf(t)>=0?"y":"x";A[t]+=S[i]*e}))}return A}var Tr={placement:"bottom",modifiers:[],strategy:"absolute"};function Er(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function jr(t){void 0===t&&(t={});var e=t.defaultModifiers,i=void 0===e?[]:e,s=t.defaultOptions,r=void 0===s?Tr:s;return function(t,e,s){void 0===s&&(s=r);var n={placement:"bottom",orderedModifiers:[],options:Object.assign({},Tr,r),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},o=[],l=!1,a={state:n,setOptions:function(s){var l="function"==typeof s?s(n.options):s;h(),n.options=Object.assign({},r,n.options,l),n.scrollParents={reference:qs(t)?ir(t):t.contextElement?ir(t.contextElement):[],popper:ir(e)};var u,c,d=function(t){var e=mr(t);return pr.reduce((function(t,i){return t.concat(e.filter((function(t){return t.phase===i})))}),[])}((u=[].concat(i,n.options.modifiers),c=u.reduce((function(t,e){var i=t[e.name];return t[e.name]=i?Object.assign({},i,e,{options:Object.assign({},i.options,e.options),data:Object.assign({},i.data,e.data)}):e,t}),{}),Object.keys(c).map((function(t){return c[t]}))));return n.orderedModifiers=d.filter((function(t){return t.enabled})),n.orderedModifiers.forEach((function(t){var e=t.options,i=t.effect;if("function"==typeof i){var s=i({state:n,name:t.name,instance:a,options:void 0===e?{}:e});o.push(s||function(){})}})),a.update()},forceUpdate:function(){if(!l){var t=n.elements,e=t.reference,i=t.popper;if(Er(e,i)){n.rects={reference:Zs(e,nr(i),"fixed"===n.options.strategy),popper:Xs(i)},n.reset=!1,n.placement=n.options.placement,n.orderedModifiers.forEach((function(t){return n.modifiersData[t.name]=Object.assign({},t.data)}));for(var s=0;s<n.orderedModifiers.length;s++)if(!0!==n.reset){var r=n.orderedModifiers[s],o=r.fn,h=r.options;"function"==typeof o&&(n=o({state:n,options:void 0===h?{}:h,name:r.name,instance:a})||n)}else n.reset=!1,s=-1}}},update:fr((function(){return new Promise((function(t){a.forceUpdate(),t(n)}))})),destroy:function(){h(),l=!0}};if(!Er(t,e))return a;function h(){o.forEach((function(t){return t()})),o=[]}return a.setOptions(s).then((function(t){!l&&s.onFirstUpdate&&s.onFirstUpdate(t)})),a}}var Or={passive:!0},Lr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Fr(t){var e,i=t.popper,s=t.popperRect,r=t.placement,n=t.variation,o=t.offsets,l=t.position,a=t.gpuAcceleration,h=t.adaptive,u=t.roundOffsets,c=!0===u?function(t){var e=t.y,i=window.devicePixelRatio||1;return{x:wr(wr(t.x*i)/i)||0,y:wr(wr(e*i)/i)||0}}(o):"function"==typeof u?u(o):o,d=c.x,p=void 0===d?0:d,m=c.y,f=void 0===m?0:m,g=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),y=hr,w=or,b=window;if(h){var _=nr(i),A="clientHeight",x="clientWidth";_===Vs(i)&&"static"!==Ks(_=Js(i)).position&&"absolute"===l&&(A="scrollHeight",x="scrollWidth"),_=_,r!==or&&(r!==hr&&r!==ar||"end"!==n)||(w=lr,f-=_[A]-s.height,f*=a?1:-1),r!==hr&&(r!==or&&r!==lr||"end"!==n)||(y=ar,p-=_[x]-s.width,p*=a?1:-1)}var S,C=Object.assign({position:l},h&&Lr);return Object.assign({},C,a?((S={})[w]=v?"0":"",S[y]=g?"0":"",S.transform=(b.devicePixelRatio||1)<=1?"translate("+p+"px, "+f+"px)":"translate3d("+p+"px, "+f+"px, 0)",S):((e={})[w]=v?f+"px":"",e[y]=g?p+"px":"",e.transform="",e))}var zr={left:"right",right:"left",bottom:"top",top:"bottom"};function Pr(t){return t.replace(/left|right|bottom|top/g,(function(t){return zr[t]}))}var Rr={start:"end",end:"start"};function Nr(t){return t.replace(/start|end/g,(function(t){return Rr[t]}))}function Br(t,e){void 0===e&&(e={});var i=e.boundary,s=e.rootBoundary,r=e.padding,n=e.flipVariations,o=e.allowedAutoPlacements,l=void 0===o?dr:o,a=xr(e.placement),h=a?n?cr:cr.filter((function(t){return xr(t)===a})):ur,u=h.filter((function(t){return l.indexOf(t)>=0}));0===u.length&&(u=h);var c=u.reduce((function(e,n){return e[n]=Mr(t,{placement:n,boundary:i,rootBoundary:s,padding:r})[gr(n)],e}),{});return Object.keys(c).sort((function(t,e){return c[t]-c[e]}))}function Dr(t,e,i){return vr(t,yr(e,i))}function Gr(t,e,i){return void 0===i&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function Vr(t){return[or,ar,lr,hr].some((function(e){return t[e]>=0}))}var $r=jr({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,i=t.instance,s=t.options,r=s.scroll,n=void 0===r||r,o=s.resize,l=void 0===o||o,a=Vs(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return n&&h.forEach((function(t){t.addEventListener("scroll",i.update,Or)})),l&&a.addEventListener("resize",i.update,Or),function(){n&&h.forEach((function(t){t.removeEventListener("scroll",i.update,Or)})),l&&a.removeEventListener("resize",i.update,Or)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state;e.modifiersData[t.name]=Cr({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,i=t.options,s=i.gpuAcceleration,r=void 0===s||s,n=i.adaptive,o=void 0===n||n,l=i.roundOffsets,a=void 0===l||l,h={placement:gr(e.placement),variation:xr(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Fr(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:a})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Fr(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var i=e.styles[t]||{},s=e.attributes[t]||{},r=e.elements[t];Hs(r)&&Ws(r)&&(Object.assign(r.style,i),Object.keys(s).forEach((function(t){var e=s[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach((function(t){var s=e.elements[t],r=e.attributes[t]||{},n=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:i[t]).reduce((function(t,e){return t[e]="",t}),{});Hs(s)&&Ws(s)&&(Object.assign(s.style,n),Object.keys(r).forEach((function(t){s.removeAttribute(t)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,i=t.name,s=t.options.offset,r=void 0===s?[0,0]:s,n=dr.reduce((function(t,i){return t[i]=function(t,e,i){var s=gr(t),r=[hr,or].indexOf(s)>=0?-1:1,n="function"==typeof i?i(Object.assign({},e,{placement:t})):i,o=n[0],l=n[1];return o=o||0,l=(l||0)*r,[hr,ar].indexOf(s)>=0?{x:l,y:o}:{x:o,y:l}}(i,e.rects,r),t}),{}),o=n[e.placement],l=o.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=o.x,e.modifiersData.popperOffsets.y+=l),e.modifiersData[i]=n}},{name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var r=i.mainAxis,n=void 0===r||r,o=i.altAxis,l=void 0===o||o,a=i.fallbackPlacements,h=i.padding,u=i.boundary,c=i.rootBoundary,d=i.altBoundary,p=i.flipVariations,m=void 0===p||p,f=i.allowedAutoPlacements,g=e.options.placement,v=gr(g),y=a||(v!==g&&m?function(t){if("auto"===gr(t))return[];var e=Pr(t);return[Nr(t),e,Nr(e)]}(g):[Pr(g)]),w=[g].concat(y).reduce((function(t,i){return t.concat("auto"===gr(i)?Br(e,{placement:i,boundary:u,rootBoundary:c,padding:h,flipVariations:m,allowedAutoPlacements:f}):i)}),[]),b=e.rects.reference,_=e.rects.popper,A=new Map,x=!0,S=w[0],C=0;C<w.length;C++){var k=w[C],I=gr(k),M="start"===xr(k),T=[or,lr].indexOf(I)>=0,E=T?"width":"height",j=Mr(e,{placement:k,boundary:u,rootBoundary:c,altBoundary:d,padding:h}),O=T?M?ar:hr:M?lr:or;b[E]>_[E]&&(O=Pr(O));var L=Pr(O),F=[];if(n&&F.push(j[I]<=0),l&&F.push(j[O]<=0,j[L]<=0),F.every((function(t){return t}))){S=k,x=!1;break}A.set(k,F)}if(x)for(var z=function(t){var e=w.find((function(e){var i=A.get(e);if(i)return i.slice(0,t).every((function(t){return t}))}));if(e)return S=e,"break"},P=m?3:1;P>0&&"break"!==z(P);P--);e.placement!==S&&(e.modifiersData[s]._skip=!0,e.placement=S,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,s=t.name,r=i.mainAxis,n=void 0===r||r,o=i.altAxis,l=void 0!==o&&o,a=i.tether,h=void 0===a||a,u=i.tetherOffset,c=void 0===u?0:u,d=Mr(e,{boundary:i.boundary,rootBoundary:i.rootBoundary,padding:i.padding,altBoundary:i.altBoundary}),p=gr(e.placement),m=xr(e.placement),f=!m,g=Sr(p),v="x"===g?"y":"x",y=e.modifiersData.popperOffsets,w=e.rects.reference,b=e.rects.popper,_="function"==typeof c?c(Object.assign({},e.rects,{placement:e.placement})):c,A={x:0,y:0};if(y){if(n||l){var x="y"===g?or:hr,S="y"===g?lr:ar,C="y"===g?"height":"width",k=y[g],I=y[g]+d[x],M=y[g]-d[S],T=h?-b[C]/2:0,E="start"===m?w[C]:b[C],j="start"===m?-b[C]:-w[C],O=e.elements.arrow,L=h&&O?Xs(O):{width:0,height:0},F=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},z=F[x],P=F[S],R=Dr(0,w[C],L[C]),N=f?w[C]/2-T-R-z-_:E-R-z-_,B=f?-w[C]/2+T+R+P+_:j+R+P+_,D=e.elements.arrow&&nr(e.elements.arrow),G=e.modifiersData.offset?e.modifiersData.offset[e.placement][g]:0,V=y[g]+N-G-(D?"y"===g?D.clientTop||0:D.clientLeft||0:0),$=y[g]+B-G;if(n){var q=Dr(h?yr(I,V):I,k,h?vr(M,$):M);y[g]=q,A[g]=q-k}if(l){var H=y[v],U=H+d["x"===g?or:hr],W=H-d["x"===g?lr:ar],J=Dr(h?yr(U,V):U,H,h?vr(W,$):W);y[v]=J,A[v]=J-H}}e.modifiersData[s]=A}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,i=t.state,s=t.name,r=t.options,n=i.elements.arrow,o=i.modifiersData.popperOffsets,l=gr(i.placement),a=Sr(l),h=[hr,ar].indexOf(l)>=0?"height":"width";if(n&&o){var u=function(t,e){return kr("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:Ir(t,ur))}(r.padding,i),c=Xs(n),d="y"===a?or:hr,p="y"===a?lr:ar,m=i.rects.reference[h]+i.rects.reference[a]-o[a]-i.rects.popper[h],f=o[a]-i.rects.reference[a],g=nr(n),v=g?"y"===a?g.clientHeight||0:g.clientWidth||0:0,y=v/2-c[h]/2+(m/2-f/2),w=Dr(u[d],y,v-c[h]-u[p]);i.modifiersData[s]=((e={})[a]=w,e.centerOffset=w-y,e)}},effect:function(t){var e=t.state,i=t.options.element,s=void 0===i?"[data-popper-arrow]":i;null!=s&&("string"!=typeof s||(s=e.elements.popper.querySelector(s)))&&br(e.elements.popper,s)&&(e.elements.arrow=s)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,i=t.name,s=e.rects.reference,r=e.rects.popper,n=e.modifiersData.preventOverflow,o=Mr(e,{elementContext:"reference"}),l=Mr(e,{altBoundary:!0}),a=Gr(o,s),h=Gr(l,r,n),u=Vr(a),c=Vr(h);e.modifiersData[i]={referenceClippingOffsets:a,popperEscapeOffsets:h,isReferenceHidden:u,hasPopperEscaped:c},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":c})}}]});const qr=["bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","top","top-start","top-end"],Hr={position:"fixed","z-index":"1000"};let Ur=class extends lt{constructor(t,e){super(t,e),this._popper=null,this._contentNode=null,this._renderAttached=!1,this._rootNode=null,this.anchorElement=null,this.offset=[0,0],this.open=!1,this.renderContentFunction=null,this._afterRootCreate=t=>{this._rootNode=t},this._afterContentCreate=t=>{this._contentNode=t},this._updatePosition=()=>{c(this._popper)&&this._popper.update()}}initialize(){this.when((()=>{this._projector.append(document.body,this.render),this._renderAttached=!0})),this.own(W(this,["open","anchorElement"],(()=>this._buildPopper())),W(this,["placement","offset"],(()=>this._setPopperOptions())))}destroy(){this.owner=null,this.anchorElement=null,this.renderContentFunction=null,this._renderAttached&&(this._projector.detach(this.render),this._renderAttached=!1),c(this._rootNode)&&(gt(this._rootNode),this._rootNode=null),this._contentNode=null,c(this._popper)&&(this._popper.destroy(),this._popper=null)}set container(t){}set owner(t){this._set("owner",t)}get placement(){return"top"}set placement(t){-1!==qr.indexOf(t)?this._override("placement",t):this._clearOverride("placement")}render(){var t;const{open:e,owner:i,renderContentFunction:s}=this;return ht("div",{afterCreate:this._afterRootCreate,class:this.classes("esri-popover",e?"esri-popover--open":null),styles:Hr},ht("div",{dir:vt(null==(t=this.owner)?void 0:t.container),afterCreate:this._afterContentCreate,afterUpdate:this._updatePosition},e&&(null==s?void 0:s.call(i))))}_buildPopper(){c(this._popper)&&(this._popper.destroy(),this._popper=null);const t=this._contentNode;if(E(t))return;if(!this.open||!this.renderContentFunction)return;const e=this._getAnchor();e&&(this._popper=$r(e,t),this._setPopperOptions())}_setPopperOptions(){const{placement:t,offset:e,_popper:i}=this;E(i)||(i.setOptions({placement:t,modifiers:[{name:"offset",options:{offset:e}}]}),i.forceUpdate())}_getAnchor(){const{anchorElement:t}=this;return yt("function"==typeof t?t():t)}};r([n()],Ur.prototype,"anchorElement",void 0),r([n()],Ur.prototype,"container",null),r([n()],Ur.prototype,"offset",void 0),r([n()],Ur.prototype,"open",void 0),r([n()],Ur.prototype,"owner",null),r([n()],Ur.prototype,"placement",null),r([n()],Ur.prototype,"renderContentFunction",void 0),Ur=r([o("esri.widgets.support.Popover")],Ur);const Wr=Ur;let Jr=class extends(wt(lt)){constructor(t,e){super(t,e),this._menuContentNode=null,this._popover=null,this._rootNode=null,this.iconClass=null,this.items=null,this.label=null,this.open=!1,this.viewModel=new Ds,this._handleOutsideClick=this._handleOutsideClick.bind(this)}postInitialize(){this._popover=new Wr({owner:this,open:!!this.open,placement:bt(this.container)?"bottom-start":"bottom-end",renderContentFunction:this.renderMenuContent,anchorElement:this._rootNode}),this.handles.add([et(this,"open",(t=>this._popover.set("open",t)))]),document.addEventListener("click",this._handleOutsideClick)}destroy(){var t;null==(t=this._popover)||t.destroy(),this._popover=null,document.removeEventListener("click",this._handleOutsideClick)}_handleOutsideClick(t){var e,i;if(!this.open||!this._rootNode||!this._menuContentNode)return;const s=t.target;null!=(e=this._menuContentNode)&&e.contains(s)||null!=(i=this._rootNode)&&i.contains(s)||(this.open=!1)}render(){return ht("div",{afterCreate:this._afterRootNodeCreate,bind:this,"data-node-ref":"_rootNode",class:this.classes("esri-button-menu","esri-widget"),key:"menu"},this.renderMenuButton())}renderMenuButton(){const{iconClass:t,id:e,label:i,open:s}=this,r=this.classes(["esri-button-menu__button",t||"esri-icon-menu",s?"esri-button-menu__button--selected":null]);return ht("button",{"aria-pressed":s.toString(),"aria-controls":`${e}-menu`,"aria-expanded":s.toString(),"aria-haspopup":"true","aria-label":i,bind:this,class:r,id:`${e}-button`,title:i,selected:s,onclick:this._toggleOpen,tabindex:"0",type:"button"})}renderMenuContent(){var t;const{id:e,open:i}=this;return ht("div",{afterCreate:this._afterMenuContentNodeCreate,bind:this,class:"esri-button-menu__content","data-node-ref":"_menuContentNode",key:"esri-button-menu-content",hidden:!i},ht("ul",{"aria-labelledby":`${e}-button`,bind:this,class:"esri-button-menu__item-wrapper",id:`${e}-menu`,role:"menu"},(null==(t=this.items)?void 0:t.length)&&this.renderItems()))}renderItems(){var t;return null==(t=this.items)?void 0:t.map(((t,e)=>this.renderItem(t,e)))}renderItem(t,e,i){var s;const r=c(i)?`${this.id}-menu-item-${e}-${i}`:`${this.id}-menu-item-${e}`,n=`${r}-label`,o=this.classes("esri-button-menu__item",t.selectionEnabled?"esri-button-menu__item--selectable":null,t.selectionEnabled&&t.selected?"esri-button-menu__item--selected":null);return ht("li",{afterCreate:this._afterMenuItemCreate,bind:this,class:o,"data-item-index":e,"data-item-subIndex":i,for:r,key:r,onkeydown:e=>this._handleMenuItemKeydown(e,t),onclick:e=>this._handleMenuItemInteraction(e,t),role:"menuitem",tabindex:"0"},ht("input",{disabled:!0,checked:t.selected,class:"esri-button-menu__checkbox",id:r,name:r,tabindex:"-1",type:"checkbox"}),ht("label",{bind:this,class:this.classes("esri-button-menu__button","esri-button-menu__item-label"),for:r,id:n},ht("span",{class:this.classes("esri-button-menu__icon",t.iconClass),"aria-hidden":"true"}),ht("span",{class:"esri-button-menu__item-label-content"},t.label)),ht("ul",{"aria-labelledby":n,class:"esri-button-menu__embedded-content-wrapper",id:`${this.id}-submenu`,role:"menu"},null==t||null==(s=t.items)?void 0:s.map(((t,i)=>this.renderItem(t,e,i)))))}_afterRootNodeCreate(t){var e;this._rootNode=t,null==(e=this._popover)||e.set("anchorElement",(()=>t))}_handleMenuItemInteraction(t,e){e.selected=!e.selected,e.open=!(!e.selected||!e.items),e.autoCloseMenu&&this.set("open",!1),e.clickFunction&&e.clickFunction({event:t,item:e}),t.stopPropagation()}_handleMenuItemKeydown(t,e){const i=At(t);_t(i)&&this._handleMenuItemInteraction(t,e),"Escape"===i&&(this.open=!1,t.preventDefault(),t.stopPropagation())}_afterMenuContentNodeCreate(t){this._menuContentNode=t,t.focus()}_toggleOpen(){this.open=!this.open}_afterMenuItemCreate(t){0===t["data-item-index"]&&t.focus()}};r([n()],Jr.prototype,"iconClass",void 0),r([rt("viewModel.items")],Jr.prototype,"items",void 0),r([n()],Jr.prototype,"label",void 0),r([rt("viewModel.open")],Jr.prototype,"open",void 0),r([n()],Jr.prototype,"viewModel",void 0),Jr=r([o("esri.widgets.FeatureTable.Grid.support.ButtonMenu")],Jr);const Yr=Jr;let Kr=class extends(wt(St.EventedAccessor)){constructor(t){super(t),this._menuContainer=null,this.activeRowIndex=null,this.autoWidth=!1,this.cellValueFormatFunction=({value:t})=>xt.sanitize(t),this.flexGrow=1,this.footerRenderFunction=null,this.frozen=!1,this.grid=null,this.header=null,this.headerRenderFunction=t=>{const{root:e}=t,{header:i,headerMenuEnabled:s,path:r,sortable:n}=this;if(this.removeCellContent(e),n)return this.headerSorterRenderFunction(t),void(s&&this.headerMenuRenderFunction(t));s&&this.headerMenuRenderFunction(t);const o=i||r;e.innerHTML!==o&&(e.innerHTML=o)},this.headerMenuRenderFunction=({root:t})=>{var e,i;(null==(e=this.menu)||null==(i=e.items)?void 0:i.length)&&t.appendChild(this._menuContainer)},this.headerSorterRenderFunction=({root:t})=>{var e;const{header:i,path:s,sortElement:r}=this,n=i||s;if(!r)return void(t.innerHTML=n);r.innerHTML!==n&&r.setAttribute("innerHTML",n),t.appendChild(r);const o=null==(e=this.grid)?void 0:e.getSlotElementByName(t.slot),l=null==o?void 0:o.parentElement;l&&!l.onkeydown&&(l.onkeydown=({key:t})=>{"Enter"!==t&&"Spacebar"!==t||r.click()})},this.hidden=!1,this.headerMenuEnabled=!0,this.menu=null,this.menuConfig=null,this.messages=null,this.messagesCommon=null,this.renderFunction=({root:t,column:e,rowData:i})=>{const s=this.getCellValue(e,i),r=this.cellValueFormatFunction({column:e,rowData:i,value:s});t.innerHTML!==r&&(t.innerHTML=r)},this.resizable=!0,this.sortable=!0,this.sortElement=null,this.textAlign="start",this.width=200}initialize(){const{messages:t,path:e}=this;this._set("sortElement",this.createSortElement()),this.sortElement.setAttribute("path",e),this._menuContainer=document.createElement("div"),this._menuContainer.classList.add("esri-column__menu-container"),this.menu=new Yr({label:null==t?void 0:t.options,iconClass:"esri-icon-handle-horizontal",...this.menuConfig}),this.menu.container=this._menuContainer,this.menu.set("items",this.getMenuItems()),this.handles.add([et(this,"hidden",(()=>{var t;return null==(t=this.menu)?void 0:t.set("open",!1)}))])}destroy(){var t;null==(t=this.menu)||t.destroy()}set direction(t){this.sortable&&(this.sortElement&&(t?this.sortElement.direction!==t&&this.sortElement.setAttribute("direction",t):this.sortElement.removeAttribute("direction")),this._set("direction",t))}get direction(){return this._get("direction")||null}set path(t){this.sortElement&&this.sortElement.path!==t&&this.sortElement.setAttribute("path",t),this._set("path",t)}getMenuItems(){const{menuConfig:t,sortable:e}=this,i=null==t?void 0:t.items,s=this.getSortMenuItems(),r=[];return e&&r.push(...s),(null==i?void 0:i.length)&&r.push(...i),r.length?r:null}getSortMenuItems(){const{messages:t}=this;return[{selected:"asc"===this.direction,iconClass:"esri-icon-arrow-up",label:null==t?void 0:t.sortAsc,autoCloseMenu:!0,clickFunction:()=>this.set("direction","asc"!==this.direction?"asc":null)},{selected:"desc"===this.direction,iconClass:"esri-icon-arrow-down",label:null==t?void 0:t.sortDesc,autoCloseMenu:!0,clickFunction:()=>this.set("direction","desc"!==this.direction?"desc":null)}]}getCellValue(t,e){var i;return null!=(i=null==e?void 0:e.item[null==t?void 0:t.path])?i:""}createSortElement(){const{direction:t,header:e,path:i}=this,s=e||i,r=document.createElement("vaadin-grid-sorter");return r.classList.add("esri-column__sorter"),r.setAttribute("path",i),r.setAttribute("title",s),r.innerHTML=s,t&&r.setAttribute("direction",t),r.addEventListener("direction-changed",(()=>{this.direction!==r.direction&&this._set("direction",r.direction)})),r}removeCellContent(t){if(t)for(;t.firstChild;)try{t.removeChild(t.firstChild)}catch(t){}}};r([n()],Kr.prototype,"activeRowIndex",void 0),r([n()],Kr.prototype,"autoWidth",void 0),r([n()],Kr.prototype,"cellValueFormatFunction",void 0),r([n()],Kr.prototype,"direction",null),r([n()],Kr.prototype,"flexGrow",void 0),r([n()],Kr.prototype,"footerRenderFunction",void 0),r([n()],Kr.prototype,"frozen",void 0),r([n()],Kr.prototype,"grid",void 0),r([n()],Kr.prototype,"header",void 0),r([n()],Kr.prototype,"headerRenderFunction",void 0),r([n()],Kr.prototype,"headerMenuRenderFunction",void 0),r([n()],Kr.prototype,"headerSorterRenderFunction",void 0),r([n()],Kr.prototype,"hidden",void 0),r([n()],Kr.prototype,"headerMenuEnabled",void 0),r([n()],Kr.prototype,"menu",void 0),r([n()],Kr.prototype,"menuConfig",void 0),r([n()],Kr.prototype,"messages",void 0),r([n()],Kr.prototype,"messagesCommon",void 0),r([n()],Kr.prototype,"path",null),r([n()],Kr.prototype,"renderFunction",void 0),r([n()],Kr.prototype,"resizable",void 0),r([n()],Kr.prototype,"sortable",void 0),r([n({readOnly:!0})],Kr.prototype,"sortElement",void 0),r([n()],Kr.prototype,"textAlign",void 0),r([n()],Kr.prototype,"width",void 0),Kr=r([o("esri.widgets.FeatureTable.Grid.Column")],Kr);const Qr=Kr;let Zr=class extends Qr{constructor(t){super(t),this.header="",this.path="EsriFeatureTableAttachmentsColumn",this.renderFunction=({root:t,rowData:e})=>{const i=this._countFromItem(e.item).toString();t.innerHTML=`<div class="esri-feature-table__column--attachments">${i}</div>`},this.sortable=!1,this.textAlign="center"}_countFromItem(t){return t.attachments&&t.attachments.length||0}};r([n({constructOnly:!0})],Zr.prototype,"header",void 0),r([n({readOnly:!0})],Zr.prototype,"path",void 0),r([n()],Zr.prototype,"renderFunction",void 0),r([n({readOnly:!0})],Zr.prototype,"sortable",void 0),r([n({readOnly:!0})],Zr.prototype,"textAlign",void 0),Zr=r([o("esri.widgets.FeatureTable.AttachmentsColumn")],Zr);const Xr=Zr,tn={type:"number"},en={type:"number",intlOptions:{notation:"scientific"}},sn={type:"date",intlOptions:{day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}};let rn=class extends l{constructor(t){super(t),this.arcade=null,this.config=null,this.feature=null,this.field=null,this.initialFeature=null,this.layer=null,this.description=null,this.editorType=null,this.error=null,this.format=null,this.group=null,this.hint=null,this.messages=null,this.name=null}get compiledFunc(){var t;const{arcade:e}=this;return e&&e.arcadeUtils.createFunction(null==(t=this.config)?void 0:t.visibilityExpression)}get compiledRequiredFunc(){var t;const{arcade:e}=this;return e&&e.arcadeUtils.createFunction(null==(t=this.config)?void 0:t.requiredExpression)}get evaluatedRequirement(){const t=this.compiledRequiredFunc;if(!t)return null;const{arcade:e}=this;return e.arcadeUtils.executeFunction(t,e.arcadeUtils.createExecContext(this.feature))}get evaluatedVisibility(){const t=this.compiledFunc;if(!t)return null;const{arcade:e}=this;return e.arcadeUtils.executeFunction(t,e.arcadeUtils.createExecContext(this.feature))}get domain(){var t,e;const{typeIdField:i}=this.layer,s=null==(t=this.field)?void 0:t.domain;if(i===this.name&&!s)return new Ct({name:"__internal-type-based-coded-value-domain__",codedValues:this.layer.types.map((({id:t,name:e})=>({code:t,name:e})))});const{feature:r}=this,n=i&&this.layer.getFieldDomain(this.name,{feature:r})||s,o=null==(e=this.config)?void 0:e.domain;return this._isDomainCompatible(o)?o:n}get editable(){var t;return this.layer.capabilities.operations.supportsEditing&&this.field.editable&&!1!==(null==(t=this.config)?void 0:t.editable)}get errorMessage(){return this._toErrorMessage()}get includeTime(){var t;const e=null==(t=this.config)?void 0:t.includeTime;return void 0===e||e}get label(){var t;return(null==(t=this.config)?void 0:t.label)||this.field.alias||this.field.name}get maxLength(){var t,e;if("date"===this.type)return-1;const i=null==(t=this.field)?void 0:t.length,s=null==(e=this.config)?void 0:e.maxLength;return!isNaN(s)&&s>=-1&&(-1===i||s<=i)?s:i}get minLength(){var t,e;if("date"===this.type)return-1;const i=null==(t=this.field)?void 0:t.length,s=null==(e=this.config)?void 0:e.minLength;return!isNaN(s)&&s>=-1&&(-1===i||s<=i)?s:-1}get required(){var t,e;return!!this.editable&&(!(null==(t=this.field)?void 0:t.nullable)||("boolean"==typeof this.evaluatedRequirement?this.evaluatedRequirement:!0===(null==(e=this.config)?void 0:e.required)))}get type(){const{field:t}=this;return kt(t)?"number":It(t)?"text":Mt(t)?"date":"unsupported"}get valid(){const t=this.editable?this._validate():null;return this._set("error",t),null===t}get value(){return this._get("value")}set value(t){this.notifyChange("evaluatedVisibility"),this._set("value",t)}get visible(){return!this._isEditorField()&&("boolean"==typeof this.evaluatedVisibility?this.evaluatedVisibility:!!this.config||this._shownByDefault())}_isDomainCompatible(t){const{field:e}=this;if("coded-value"===(null==t?void 0:t.type)){const i=typeof t.codedValues[0].code;if("string"===i&&It(e)||"number"===i&&kt(e))return!0}return!!("range"===(null==t?void 0:t.type)&&kt(e)||Mt(e))}_validate(){const{domain:t,field:e,initialFeature:i,minLength:s,required:r,type:n,valid:o,value:l}=this,a=r&&null===l,h=void 0!==o;return!a&&i.getAttribute(e.name)===l&&h?null:"text"===n&&s>-1&&"string"==typeof l&&l.length<s?"length-validation-error::too-short":t?null!==l||r?Tt(t,l):null:a?Et.INVALID_TYPE:jt(e,l)}_shownByDefault(){var t;const e=null==(t=this.field)?void 0:t.type;return"oid"!==e&&"global-id"!==e&&!this._isGeometryField()}_isEditorField(){return Ot(this.layer).indexOf(this.name)>-1}_isGeometryField(){return Lt(this.layer).indexOf(this.name)>-1}_toErrorMessage(){const{domain:t,field:e,messages:i,minLength:s,value:r,required:n,type:o}=this,l=this.error;if(n&&null===r)return i.validationErrors.cannotBeNull;if(l===Ft.VALUE_OUT_OF_RANGE||l===zt.OUT_OF_RANGE){const s=Pt(t)||Rt(e);return Nt(i.validationErrors.outsideRange,s,{format:{max:"date"===o?sn:s.isInteger?tn:en,min:"date"===o?sn:s.isInteger?tn:en}})}return l===Ft.INVALID_CODED_VALUE?i.validationErrors.invalidCodedValue:l===Et.INVALID_TYPE?i.validationErrors.invalidType:"length-validation-error::too-short"===l?Nt(i.validationErrors.tooShort,{min:s}):null}};r([n()],rn.prototype,"arcade",void 0),r([n()],rn.prototype,"compiledFunc",null),r([n()],rn.prototype,"compiledRequiredFunc",null),r([n()],rn.prototype,"config",void 0),r([n()],rn.prototype,"evaluatedRequirement",null),r([n()],rn.prototype,"evaluatedVisibility",null),r([n()],rn.prototype,"feature",void 0),r([n()],rn.prototype,"field",void 0),r([n()],rn.prototype,"initialFeature",void 0),r([n()],rn.prototype,"layer",void 0),r([n({aliasOf:"config.description"})],rn.prototype,"description",void 0),r([n()],rn.prototype,"domain",null),r([n()],rn.prototype,"editable",null),r([n({aliasOf:"config.editorType"})],rn.prototype,"editorType",void 0),r([n({readOnly:!0})],rn.prototype,"error",void 0),r([n({dependsOn:["error","messages","value"]})],rn.prototype,"errorMessage",null),r([n({aliasOf:"config.format"})],rn.prototype,"format",void 0),r([n()],rn.prototype,"group",void 0),r([n({aliasOf:"config.hint"})],rn.prototype,"hint",void 0),r([n()],rn.prototype,"includeTime",null),r([n()],rn.prototype,"label",null),r([n()],rn.prototype,"maxLength",null),r([n()],rn.prototype,"minLength",null),r([n()],rn.prototype,"messages",void 0),r([n({aliasOf:"field.name"})],rn.prototype,"name",void 0),r([n()],rn.prototype,"required",null),r([n()],rn.prototype,"type",null),r([n()],rn.prototype,"valid",null),r([n({value:null})],rn.prototype,"value",null),r([n()],rn.prototype,"visible",null),rn=r([o("esri.widgets.FeatureForm.InputField")],rn);const nn=rn;let on=class extends Qr{constructor(t){super(t),this.activeEditInfo=null,this.cellValueValidatorFunction=({oldValue:t,value:e})=>t!==e,this.editable=!1,this.inputRenderFunction=({root:t,column:e,rowData:i})=>{var s,r;if(null!=(s=this.activeEditInfo)&&s.updating)return;if(!this.editable)return;const n=this.getCellValue(e,i),o=this.createInputElement({root:t,column:e,rowData:i,value:n});this._set("activeEditInfo",{column:e,input:o,root:t,rowData:i,updating:!0,oldValue:n});const l=this.createInputContainer();l.appendChild(o),this.removeCellContent(t),t.appendChild(l),o.focus(),o instanceof HTMLInputElement&&o.select(),null==(r=this.grid)||r.notifyResize()},this.loadingMessage="",this.inputType="text",this.maxLength=null,this.parseInputValueFunction=({input:t})=>t.value,this.renderFunction=t=>{var e;const{root:i,column:s,rowData:r}=t,{activeEditInfo:n}=this;if(n&&n.updating)return;const o=this.getCellValue(s,r),l=this.cellValueFormatFunction({column:s,rowData:r,value:o});i.onclick=()=>i.focus(),i.ondblclick=()=>this.inputRenderFunction(t),i.ontouchend=()=>this.inputRenderFunction(t);const a=null==(e=this.grid)?void 0:e.getSlotElementByName(i.slot),h=null==a?void 0:a.parentElement;h&&!h.onkeydown&&(h.onkeydown=e=>{"Enter"!==e.key||this.activeEditInfo||this.inputRenderFunction(t),"Escape"===e.key&&this.activeEditInfo&&this.cancel()}),(null==l?void 0:l.toString())!==i.innerHTML&&(i.innerHTML=l)},this.required=!1,this.store=null,this.updateRowItemFunction=({rowData:t,column:e,value:i})=>{t.item[e.path]=i},this.updateStoreItemFunction=({rowData:t,column:e,value:i})=>{var s;return null==(s=this.store)?void 0:s.updateItem({index:t.index,name:e.path,value:i})}}cancel(){var t;const{activeEditInfo:e}=this;if(!e)return;const{column:i,root:s,rowData:r,oldValue:n}=e;this._set("activeEditInfo",null);const o=this.cellValueFormatFunction({column:i,rowData:r,value:n});s.innerHTML=o,null==(t=this.grid)||t.notifyResize()}createInputContainer(){const t=document.createElement("div");return t.classList.add("esri-editor-column__cell-input--container"),t}createInputElement({value:t}){const e=document.createElement("input");return e.classList.add("esri-editor-column__cell-input"),e.maxLength=this.maxLength,e.type=this.inputType,e.value=t,e.onblur=()=>{e.onblur=null,this.submit()},e}async submit(){var t;const{activeEditInfo:e}=this;if(!e)return;const{column:i,input:s,root:r,rowData:n,oldValue:o}=e,l=this.parseInputValueFunction({input:s,column:i,rowData:n});if(this.cellValueValidatorFunction({value:l,oldValue:o,column:i,rowData:n})){r.innerHTML=this.loadingMessage,null==(t=this.grid)||t.notifyResize();try{var a;await this.updateStoreItemFunction({rowData:n,column:i,value:l}),this.updateRowItemFunction({rowData:n,column:i,value:l});const t=this.getCellValue(i,n),e=this.cellValueFormatFunction({column:i,rowData:n,value:t});r.innerHTML=e,this.emit("value-change",{column:i,rowData:n,value:t}),this._set("activeEditInfo",null),null==(a=this.grid)||a.notifyResize()}catch(t){this.cancel()}}else this.cancel()}};r([n({readOnly:!0})],on.prototype,"activeEditInfo",void 0),r([n()],on.prototype,"cellValueValidatorFunction",void 0),r([n()],on.prototype,"editable",void 0),r([n()],on.prototype,"inputRenderFunction",void 0),r([n({constructOnly:!0})],on.prototype,"loadingMessage",void 0),r([n()],on.prototype,"inputType",void 0),r([n()],on.prototype,"maxLength",void 0),r([n()],on.prototype,"parseInputValueFunction",void 0),r([n()],on.prototype,"renderFunction",void 0),r([n()],on.prototype,"required",void 0),r([n()],on.prototype,"store",void 0),r([n()],on.prototype,"updateRowItemFunction",void 0),r([n()],on.prototype,"updateStoreItemFunction",void 0),on=r([o("esri.widgets.FeatureTable.EditorColumn")],on);const ln=on,an=new Map([["ar",()=>import("./p-16ad0dfc.js").then((function(t){return t.a}))],["ar-dz",()=>import("./p-fddcd709.js").then((function(t){return t.a}))],["ar-kw",()=>import("./p-f2eb256f.js").then((function(t){return t.a}))],["ar-ly",()=>import("./p-ef9c1745.js").then((function(t){return t.a}))],["ar-ma",()=>import("./p-70d5b5e7.js").then((function(t){return t.a}))],["ar-sa",()=>import("./p-b08bfdee.js").then((function(t){return t.a}))],["ar-tn",()=>import("./p-1f936ce5.js").then((function(t){return t.a}))],["bg",()=>import("./p-60e2f38d.js").then((function(t){return t.b}))],["bs",()=>import("./p-7533b6f6.js").then((function(t){return t.b}))],["ca",()=>import("./p-aa59352a.js").then((function(t){return t.c}))],["cs",()=>import("./p-e772d6a7.js").then((function(t){return t.c}))],["da",()=>import("./p-05d9f8a8.js").then((function(t){return t.d}))],["de",()=>import("./p-1d1b4db5.js").then((function(t){return t.d}))],["de-at",()=>import("./p-f145baa0.js").then((function(t){return t.d}))],["de-ch",()=>import("./p-c7f14494.js").then((function(t){return t.d}))],["el",()=>import("./p-3164b877.js").then((function(t){return t.e}))],["en-au",()=>import("./p-1b7d1fa0.js").then((function(t){return t.e}))],["en-ca",()=>import("./p-883cd024.js").then((function(t){return t.e}))],["en-gb",()=>import("./p-5695c7c3.js").then((function(t){return t.e}))],["en-ie",()=>import("./p-74ccf621.js").then((function(t){return t.e}))],["en-il",()=>import("./p-a7894fbd.js").then((function(t){return t.e}))],["en-in",()=>import("./p-b57f6b3f.js").then((function(t){return t.e}))],["en-nz",()=>import("./p-8998d11f.js").then((function(t){return t.e}))],["en-sg",()=>import("./p-0b53bd5a.js").then((function(t){return t.e}))],["es",()=>import("./p-0dfad8bb.js").then((function(t){return t.e}))],["es-do",()=>import("./p-165fded9.js").then((function(t){return t.e}))],["es-mx",()=>import("./p-f47bb649.js").then((function(t){return t.e}))],["es-us",()=>import("./p-80b45d34.js").then((function(t){return t.e}))],["et",()=>import("./p-58ffe049.js").then((function(t){return t.e}))],["fi",()=>import("./p-d8d5f619.js").then((function(t){return t.f}))],["fr",()=>import("./p-436cddcc.js").then((function(t){return t.f}))],["fr-ca",()=>import("./p-3e14b775.js").then((function(t){return t.f}))],["fr-ch",()=>import("./p-2a5453c8.js").then((function(t){return t.f}))],["he",()=>import("./p-d9e2d38c.js").then((function(t){return t.h}))],["hr",()=>import("./p-c3f81f1a.js").then((function(t){return t.h}))],["hu",()=>import("./p-3c5ac128.js").then((function(t){return t.h}))],["id",()=>import("./p-aa380459.js").then((function(t){return t.i}))],["it",()=>import("./p-c65ead0f.js").then((function(t){return t.i}))],["it-ch",()=>import("./p-bf225600.js").then((function(t){return t.i}))],["ja",()=>import("./p-d855464d.js").then((function(t){return t.j}))],["ko",()=>import("./p-f8aa4459.js").then((function(t){return t.k}))],["lt",()=>import("./p-818ade0e.js").then((function(t){return t.l}))],["lv",()=>import("./p-dd2baee3.js").then((function(t){return t.l}))],["nb",()=>import("./p-ddd76888.js").then((function(t){return t.n}))],["nl",()=>import("./p-94aa0e97.js").then((function(t){return t.n}))],["nl-be",()=>import("./p-16504064.js").then((function(t){return t.n}))],["pl",()=>import("./p-b713a179.js").then((function(t){return t.p}))],["pt",()=>import("./p-d445ea0e.js").then((function(t){return t.p}))],["pt-br",()=>import("./p-597bb6cb.js").then((function(t){return t.p}))],["ro",()=>import("./p-583ecb0d.js").then((function(t){return t.r}))],["ru",()=>import("./p-7080e406.js").then((function(t){return t.r}))],["sk",()=>import("./p-0ac329e3.js").then((function(t){return t.s}))],["sl",()=>import("./p-4b99f69e.js").then((function(t){return t.s}))],["sr",()=>import("./p-c92569dc.js").then((function(t){return t.s}))],["sr-cyrl",()=>import("./p-aa9f2c13.js").then((function(t){return t.s}))],["sv",()=>import("./p-f56cf98c.js").then((function(t){return t.s}))],["th",()=>import("./p-fa14e344.js").then((function(t){return t.t}))],["tr",()=>import("./p-56edeb19.js").then((function(t){return t.t}))],["uk",()=>import("./p-9a1fd51c.js").then((function(t){return t.u}))],["vi",()=>import("./p-297751d0.js").then((function(t){return t.v}))],["zh-cn",()=>import("./p-be50ac5d.js").then((function(t){return t.z}))],["zh-hk",()=>import("./p-7a679e40.js").then((function(t){return t.z}))],["zh-mo",()=>import("./p-ef5f474a.js").then((function(t){return t.z}))],["zh-tw",()=>import("./p-5d95a118.js").then((function(t){return t.z}))]]);async function hn(t=Bt()){const e=(await import("./p-608e235f.js").then((function(t){return t.m}))).default;t=t.toLowerCase();let i=an.has(t);if(!i){const e=t.split("-");e.length>1&&an.has(e[0])&&(t=e[0],i=!0)}return i?await an.get(t)():t="en",t!==e.locale()&&e.locale(t),e}function un(t){const e=[//g,//g,//g,//g,//g,//g,//g,//g,//g,//g];for(let i=0;i<10;i++)t=t.replace(e[i],i.toString());return Number(t)}function cn(t){return new v(`could not parse date input, expecting the following format: ${Gt(Date.now(),t)}`)}let dn=class extends l{constructor(){super(...arguments),this.state="ready",this.value=new Date}};r([n()],dn.prototype,"state",void 0),r([n()],dn.prototype,"value",void 0),dn=r([o("esri.widgets.support.MomentElementViewModel")],dn);const pn=dn;let mn=class extends pn{constructor(t){super(t)}};mn=r([o("esri.widgets.support.DatePickerViewModel")],mn);const fn=mn,gn="esri-date-picker__week-item",vn="esri-date-picker__day-item",yn="esri-date-picker__year-picker-item",wn={year:"numeric",month:"2-digit",day:"2-digit"},bn=[" ","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Home","PageDown","PageUp"],_n="esri.widgets.support.DatePicker",An=K.getLogger(_n);let xn=class extends lt{constructor(t,e){super(t,e),this._activeDate=null,this._calendarNode=null,this._calendarPopover=new Wr({owner:this,placement:"bottom-start",anchorElement:()=>this._rootNode,renderContentFunction:this._renderCalendar}),this._inputOrButtonNode=null,this._isOpen=!1,this._requestDayPickerFocusOnCreate=!1,this._rootNode=null,this.dateInputEnabled=!1,this.label=void 0,this.messages=null,this.value=null,this.commitOnMonthChange=!1,this.viewModel=new fn,this._toggle=this._toggle.bind(this)}initialize(){this.own(Vt((()=>{var t;return{viewModel:this.viewModel,value:null==(t=this.viewModel)?void 0:t.value}}),(({viewModel:t,value:e})=>{this.destroyed||!t||E(this.onChange)||this.onChange(e)}),Ht))}async loadLocale(){this._moment=await hn(),this._isOpen&&(this._activeDate=this._moment(this._activeDate.toDate()))}destroy(){this._calendarPopover.destroy()}render(){return ht("div",{afterCreate:$t,bind:this,class:this.classes("esri-date-picker","esri-widget"),"data-node-ref":"_rootNode"},this.dateInputEnabled?this.renderInputAndButtonMode():this.renderButtonOnlyMode())}renderButtonOnlyMode(){const t=Gt(this.viewModel.value,wn),{_isOpen:e,messages:i}=this;return ht("div",{afterCreate:$t,"aria-controls":e?this._getCalendarId():null,"aria-expanded":e.toString(),"aria-haspopup":"true","aria-label":i.setDate,"aria-pressed":e.toString(),bind:this,class:this.classes("esri-widget--button","esri-select","esri-date-picker__calendar-toggle"),"data-node-ref":"_inputOrButtonNode",onclick:this._toggle,onkeydown:this._handleDateButtonKeyDown,role:"button",tabIndex:0},ht("span",{class:"esri-date-picker__date"},t))}renderInputAndButtonMode(){const t=Gt(this.viewModel.value,wn),{_isOpen:e,messages:i}=this;return ht("div",{class:this.classes("esri-date-picker__input")},ht("input",{afterCreate:$t,"data-node-ref":"_inputOrButtonNode","aria-controls":e?this._getCalendarId():null,"aria-haspopup":"true","aria-label":i.setDate,bind:this,class:this.classes("esri-date-picker__text-input","esri-input"),key:"date-input",onblur:this._handleDateInputBlur,onclick:this._handleDateInputClick,onkeydown:this._handleDateInputKeyDown,type:"text",value:t}),ht("span",{"aria-hidden":"true",class:this.classes("esri-date-picker__icon--leading","esri-icon-calendar")}))}_handleDateInputClick(){this._open(this.viewModel.value,!1)}_handleDateInputKeyDown(t){const{key:e}=t;this._isOpen?"Enter"===e?this._handleDateText(t):"Escape"===e&&this._close():"ArrowDown"===e&&(this._open(this.viewModel.value),t.preventDefault())}_handleDateButtonKeyDown(t){const{key:e,shiftKey:i}=t;this._isOpen&&"Tab"===e&&i?this._close():_t(e)&&this._toggle()}_handleDateInputBlur(t){this._isOpen||this._handleDateText(t)}_handleDateText(t){const e=t.currentTarget;let i;try{i=function(t,e){const i=Dt(e),s=Date.now(),r=i.formatToParts(s),n=new Set;r.filter((({type:t})=>"literal"===t)).forEach((({value:t})=>n.add(t)));let o=0;const l={};for(;r.length>0;){const{type:e,value:i}=r.shift();for(let s=0;s<i.length;s++,o++){const i=t.charAt(o);if(n.has(i)){o++;break}if("literal"===e)break;l[e]||(l[e]=[]),l[e].push(i)}}const a={};try{a.day=un(l.day.join("")),a.month=un(l.month.join(""))-1,a.year=un((l.year||l.relatedYear).join(""))}catch(t){throw cn(e)}if(isNaN(a.day)||isNaN(a.month)||isNaN(a.year))throw cn(e);return a}(e.value,wn)}catch(t){return An.warn(t),void(e.value=Gt(this.viewModel.value,wn))}const s=this._moment(i);s.isValid()?(this.viewModel.value=s.toDate(),this._activeDate=s):e.value=Gt(this.viewModel.value,wn)}_handleDatePickerKeydown(t){"Escape"===At(t)&&(this._close(),t.preventDefault(),t.stopPropagation())}_renderCalendar(){const t=this._activeDate,e=this._moment(this.viewModel.value);return ht("div",{afterCreate:$t,bind:this,class:this.classes("esri-date-picker__calendar","esri-widget"),"data-node-ref":"_calendarNode",id:this._getCalendarId(),key:"esri-date-picker__calendar",onkeydown:this._handleDatePickerKeydown},this._renderMonthPicker(t),this._renderDayPicker(t,e),this._renderYearPicker(t))}_getCalendarId(){return`date-picker__calendar--${this.id}`}_renderMonthPicker(t){const e=bt(this.container),i=e?"esri-icon-right":"esri-icon-left",s=e?"esri-icon-left":"esri-icon-right",r=this._moment.months().map(((e,i)=>{const s=t.month()===i;return ht("option",{selected:s},e)})),{messages:n}=this;return ht("div",{class:"esri-date-picker__month-picker"},ht("div",{"aria-label":n.goToPreviousMonth,bind:this,class:"esri-widget--button",onclick:this._setPreviousMonth,onkeydown:this._handlePreviousMonthKeyDown,role:"button",tabIndex:0,title:n.goToPreviousMonth},ht("span",{"aria-hidden":"true",class:i})),ht("select",{"aria-live":"assertive","aria-label":n.selectMonth,bind:this,class:this.classes("esri-date-picker__month-dropdown","esri-select"),id:`${this.id}__month-picker`,onchange:this._setMonth,onkeydown:this._setMonth,title:n.selectMonth},r),ht("div",{"aria-label":n.goToNextMonth,bind:this,class:"esri-widget--button",onclick:this._setNextMonth,onkeydown:this._setNextMonth,role:"button",tabIndex:0,title:n.goToNextMonth},ht("span",{"aria-hidden":"true",class:s})))}_renderDayPicker(t,e){const i=t.clone().day(this._moment.localeData().firstDayOfWeek()),s=this._getWeekLabels(i),r=this._getDayId(t),n=this._renderMonth(t,e);return ht("div",{afterCreate:this._handleDayPickerCreate,"aria-activedescendant":r,"aria-labelledby":`${this.id}__month-picker ${this.id}__selected-year`,bind:this,class:"esri-date-picker__day-picker",id:`${this.id}__day-picker`,onkeydown:this._handleDayPickerKeydown,role:"grid",tabIndex:0},ht("div",{class:gn,role:"row"},s.map((t=>ht("div",{"aria-label":t.name,class:this.classes(vn,"esri-date-picker__day-item--header"),role:"columnheader",title:t.name},t.abbr)))),n)}_getDayId(t){return`${this.id}__${Gt(t.valueOf(),wn)}`}_handleDayPickerCreate(t){this._requestDayPickerFocusOnCreate&&(this._requestDayPickerFocusOnCreate=!1,t.focus())}_getWeekLabels(t){const e=[],i={weekday:"long"},s={weekday:"narrow"};for(let r=0;r<7;r++)e.push({name:Gt(t.valueOf(),i),abbr:Gt(t.valueOf(),s)}),t.add(1,"day");return e}_handleDayPickerKeydown(t){const{ctrlKey:e,shiftKey:i}=t,s=At(t),r=this._activeDate;-1!==bn.indexOf(s)&&("ArrowLeft"===s?r.subtract(1,"day"):"ArrowRight"===s?r.add(1,"day"):"ArrowUp"===s?r.subtract(1,"week"):"ArrowDown"===s?r.add(1,"week"):"PageUp"===s?r.subtract(1,i?"year":"month"):"PageDown"===s?r.add(1,i?"year":"month"):"Home"===s?r.startOf(e?"year":"month"):"End"===s?r.endOf(e?"year":"month"):_t(s)&&(this.viewModel.value=r.toDate(),this._close()),t.preventDefault(),t.stopPropagation())}_renderMonth(t,e){const i=this._moment(),s=t.clone().startOf("month"),r=t.clone().endOf("month"),n=s.clone().subtract(s.weekday(),"day"),o=[];for(let l=0;l<6;l++){const l=[];for(let o=0;o<7;o++){const o=n.date(),a=n.isSame(t,"day"),h=n.isSame(e,"day"),u=this._getDayId(n),c={"esri-date-picker__day-item--nearby-month":!n.isBetween(s,r,null,"[]"),"esri-date-picker__day-item--today":n.isSame(i,"day"),"esri-date-picker__day-item--active":a,"esri-date-picker__day-item--selected":h};l.push(ht("div",{"aria-label":o.toString(),"aria-selected":a.toString(),bind:this,class:this.classes(vn,c),"data-iso-date":n.toISOString(),id:u,onclick:this._handleSelectedDate,onkeydown:this._handleSelectedDate,role:"gridcell"},o)),n.add(1,"day")}o.push(ht("div",{class:gn,role:"row"},l))}return o}_renderYearPicker(t){const e={year:"numeric"},i=t.clone(),s=Gt(i.valueOf(),e),r=Gt(i.add(1,"year").valueOf(),e),n=Gt(i.subtract(2,"year").valueOf(),e),{messages:o}=this;return ht("div",{class:"esri-date-picker__year-picker"},ht("div",{"aria-label":o.goToPreviousYear,bind:this,class:yn,onclick:this._setPreviousYear,onkeydown:this._setPreviousYear,tabIndex:0,title:o.goToPreviousYear},n),ht("div",{class:this.classes(yn,"esri-date-picker__year-picker-item--selected"),id:`${this.id}__selected-year`},s),ht("div",{"aria-label":o.goToNextYear,bind:this,class:yn,onclick:this._setNextYear,onkeydown:this._handleNextYearKeyDown,tabIndex:0,title:o.goToNextYear},r))}_toggle(){this._isOpen?this._close():this._open(this.viewModel.value)}_setMonth(t){this._activeDate.month(t.target.value),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toDate())}_close(t=!0){this._activeDate=null,this._isOpen=!1,this._calendarPopover.open=!1,this.pageClickHandler.pause(),t&&this._inputOrButtonNode.focus()}_open(t,e=!0){this._activeDate=this._moment(t),this._isOpen=!0,this._calendarPopover.open=!0,this._requestDayPickerFocusOnCreate=e,this.pageClickHandler||(this.pageClickHandler=qt(document,"click",(({target:t})=>{var e,i;(null==(e=this._calendarNode)?void 0:e.contains(t))||(null==(i=this._rootNode)?void 0:i.contains(t))||this._close()})),this.own(this.pageClickHandler)),this.pageClickHandler.resume()}_setPreviousMonth(){this._activeDate.subtract(1,"month"),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toDate())}_handlePreviousMonthKeyDown(t){if("Tab"===t.key&&t.shiftKey)return t.preventDefault(),void this._close();_t(t.key)&&this._setPreviousMonth()}_setNextMonth(){this._activeDate.add(1,"month"),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toDate())}_setPreviousYear(){this._activeDate.subtract(1,"year")}_setNextYear(){this._activeDate.add(1,"year")}_handleNextYearKeyDown(t){if("Tab"===t.key&&!t.shiftKey)return t.preventDefault(),void this._close();_t(t.key)&&this._setNextYear()}_handleSelectedDate(t){this.viewModel.value=this._moment(t.target.getAttribute("data-iso-date")).toDate(),this._close()}};r([n()],xn.prototype,"dateInputEnabled",void 0),r([n({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],xn.prototype,"label",void 0),r([n(),nt("esri/widgets/support/t9n/DatePicker")],xn.prototype,"messages",void 0),r([rt("viewModel.value")],xn.prototype,"value",void 0),r([n()],xn.prototype,"commitOnMonthChange",void 0),r([n({type:fn})],xn.prototype,"viewModel",void 0),r([n()],xn.prototype,"onChange",void 0),r([ot()],xn.prototype,"_setNextMonth",null),r([ot()],xn.prototype,"_setPreviousYear",null),r([ot()],xn.prototype,"_handleSelectedDate",null),xn=r([o(_n)],xn);const Sn=xn;let Cn=class extends pn{constructor(t){super(t)}};Cn=r([o("esri.widgets.support.TimePickerViewModel")],Cn);const kn=Cn,In={hour:"numeric",minute:"numeric"},Mn=["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","Tab"];function Tn(t){return Gt(t.valueOf(),In).indexOf(" ")>-1}let En=class extends lt{constructor(t,e){super(t,e),this._activeTime=null,this.label=void 0,this.messages=null,this.value=null,this.viewModel=new kn}async loadLocale(){this._moment=await hn()}render(){const t=this._activeTime||this.viewModel.value;return ht("div",{class:"esri-time-picker esri-widget"},ht("input",{afterUpdate:this._handleInputUpdate,"aria-label":this.messages.inputTitle,bind:this,class:this.classes("esri-time-picker__input","esri-input"),onblur:this._handleInputBlur,onfocus:this._handleInputFocus,onkeydown:this._handleInputKeydown,oninput:this._handleInputKeydown,onclick:this._handleInputClick,onpaste:this._handleInputPaste,onwheel:this._handleInputWheel,value:Gt(t.valueOf(),In)}))}_handleInputBlur(){this._activeTime.isValid()&&(this.viewModel.value=this._activeTime.toDate()),this._activeTime=null,this._activePart=null}_handleInputUpdate(t){this._selectPart(t,this._activePart)}_selectPart(t,e){const i=this._activeTime;if(!i)return;const s=Gt(i.valueOf(),In),r=s.indexOf(":");if("hours"===e)return void t.setSelectionRange(0,r);const n=r+1,o=n+2;"minutes"!==e?"meridiem"!==e||t.setSelectionRange(o+1,s.length):t.setSelectionRange(n,o)}_handleInputFocus(t){this._activePart="hours",this._activeTime=this._moment(this.viewModel.value).startOf("minute"),this._selectPart(t.target,"hours")}_caretIndexToPartName(t){const e=this._activeTime.format("LT"),i=e.indexOf(":"),s=e.indexOf(" ");return t<=i?"hours":t>i&&t<=s?"minutes":"meridiem"}_handleInputKeydown(t){const{ctrlKey:e,metaKey:i,shiftKey:s}=t,r=At(t),n=this._activeTime,o=this._activePart,l=/\d/.test(r),a=/^a|p$/i.test(r),h=i||e;if(Mn.indexOf(r)>-1||l||"meridiem"===o&&a&&!h){if("ArrowLeft"===r)this._activePart=this._prevPart();else if("ArrowRight"===r)this._activePart=this._nextPart();else if("Tab"===r){const t=s?this._prevPart():this._nextPart();if(t===this._activePart)return;this._activePart=t}else if("ArrowUp"===r)this._shift("up",n,o);else if("ArrowDown"===r)this._shift("down",n,o);else if(l)this._setTime(n,o,Number(r));else if(a){const t=r.toLowerCase(),e=n.hour();("a"===t&&e>=12||"p"===t&&e<12)&&this._shift("up",n,o)}t.preventDefault(),t.stopImmediatePropagation()}else h||(t.preventDefault(),t.stopImmediatePropagation())}_handleInputClick(t){const e=t.target;this._activePart=null,this.renderNow(),this._activePart=this._caretIndexToPartName(e.selectionStart)}_getOrderedParts(){return Tn(this._activeTime)?["hours","minutes","meridiem"]:["hours","minutes"]}_prevPart(){const t=this._getOrderedParts(),e=t.indexOf(this._activePart)-1;return t[Math.max(e,0)]}_nextPart(){const t=this._getOrderedParts(),e=t.indexOf(this._activePart)+1;return t[Math.min(e,t.length-1)]}_setTime(t,e,i){if("hours"===e){const e=Tn(t)?12:24,s=""+t.hour()%e,r=i,n=Number(`${s}${i}`);2===s.length||n>e?t.hour(r):n<=e&&t.hour(n)}else if("minutes"===e){const e=59,s=`${t.minute()}`,r=i,n=Number(`${s}${i}`);2===s.length||n>e?t.minute(r):n<e&&t.minute(n)}}_handleInputPaste(t){const e=t.clipboardData.getData("text/plain"),i=this._moment(e);i.isValid()&&(this._activeTime=i),t.preventDefault(),t.stopImmediatePropagation()}_handleInputWheel(t){this._shift(t.deltaY<0?"up":"down",this._activeTime,this._activePart)}_shift(t,e,i){t&&e&&i&&e["up"===t?"add":"subtract"]("meridiem"===i?12:1,"hours"===i?"hour":"minutes"===i?"minute":"hours")}};r([n({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],En.prototype,"label",void 0),r([n(),nt("esri/widgets/support/t9n/TimePicker")],En.prototype,"messages",void 0),r([rt("viewModel.value")],En.prototype,"value",void 0),r([n({type:kn})],En.prototype,"viewModel",void 0),En=r([o("esri.widgets.support.TimePicker")],En);const jn=En,On=Jt("short-date-short-time"),Ln=Jt("short-date"),Fn=Wt({digitSeparator:!0,places:null});let zn=class extends ln{constructor(t){super(t),this._inputField=null,this.alias=null,this.cellValueFormatFunction=({rowData:t,value:e})=>{if(this.formatFunction){const{config:t,field:i}=this;return this.formatFunction({config:t,field:i,value:xt.sanitize(e)})}if(null===e)return"&nbsp;";const{config:i,field:s,type:r}=this,{item:{feature:n}}=t,o=this._getDomainForFeature(n);if(o)return this._getComputedDomain(e,o);if("date"===r){var l;const t=null!=i&&null!=(l=i.format)&&l.dateFormat?Jt(i.format.dateFormat):!1===(null==i?void 0:i.includeTime)?Ln:On,s=function(t){return"feature"===(null==t?void 0:t.type)}(this.layer)&&this.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null;return e?Gt(e,{...t,...s}):null}if(kt(s)){const t=null!=i&&i.format?Wt(i.format):Fn;return Ut(parseFloat(e),t)}return xt.sanitize(e)},this.cellValueValidatorFunction=({oldValue:t,value:e})=>t!==e,this.config=null,this.defaultValue=null,this.description=null,this.editingEnabled=!1,this.field=null,this.formatFunction=null,this.headerRenderFunction=t=>{const{root:e}=t,{editable:i,editingEnabled:s,headerMenuEnabled:r,sortable:n}=this;if(this.removeCellContent(e),e.classList.add("esri-field-column__header-content"),s&&!i&&e.appendChild(this.createLockedElement()),n)this.headerSorterRenderFunction(t);else{const{header:t,path:i}=this,s=document.createElement("div");s.innerHTML=t||i,e.appendChild(s)}r&&this.headerMenuRenderFunction(t)},this.inputRenderFunction=({root:t,column:e,rowData:i})=>{var s,r;if(null!=(s=this.activeEditInfo)&&s.updating)return;if(!this.editable)return;const n=this.getCellValue(e,i),o=this.createInputElement({root:t,column:e,rowData:i,value:n});if(this._set("activeEditInfo",{column:e,input:o,root:t,rowData:i,updating:!0,oldValue:n}),"date"===this.type)return void this._renderDateEditors(n,t,o);const l=this.createInputContainer();l.appendChild(o),this.removeCellContent(t),t.appendChild(l),o.focus(),o instanceof HTMLInputElement&&o.select(),null==(r=this.grid)||r.notifyResize()},this.layer=null,this.menuConfig=null,this.name=null,this.nullable=!0,this.parseInputValueFunction=({input:t})=>{const e=this._inputField,i=t.value,{required:s,type:r}=e;return s||""!==i?"number"===r||"date"===r?parseFloat(i):i:null},this.type=null,this.updateRowItemFunction=({rowData:t,column:e,value:i})=>{t.item.feature.attributes[e.path]=i}}get editable(){var t,e,i;return this.editingEnabled?this.config?!1!==this.config.editable&&(null==(e=this.field)?void 0:e.editable):null==(i=this.field)?void 0:i.editable:!!this.config&&!0===this.config.editable&&(null==(t=this.field)?void 0:t.editable)}get header(){var t;return(null==(t=this.config)?void 0:t.label)||this.alias||this.path||null}get hidden(){const{config:t}=this;return!1===(null==t?void 0:t.visible)||this._get("hidden")||!1}set hidden(t){this._set("hidden",t)}get loadingMessage(){var t;return(null==(t=this.messages)?void 0:t.loading)||"..."}get maxLength(){var t,e;const i=null==(t=this.field)?void 0:t.length,s=null==(e=this.config)?void 0:e.maxLength;return!isNaN(s)&&s>=-1&&(-1===i||s<=i)?s:i}get path(){var t;return(null==(t=this.field)?void 0:t.name)||null}get required(){const t=this.get("field.nullable"),e=this.get("config.required");return this.editable&&(!t||!0===e)}get sortable(){var t;return!1!==(null==(t=this.config)?void 0:t.sortable)}createInputElement({rowData:t,value:e}){const{item:i}=t;if(!i||!i.feature)return null;this._inputField=this._setUpInputField(i.feature,e);const{field:s,maxLength:r,required:n}=this,{domain:o}=this._inputField;let l=null;"coded-value"===(null==o?void 0:o.type)?(l=this._createSelectElement(e,o.codedValues.map((({code:t,name:e})=>({value:t,name:e}))),this._inputField),l.onchange=()=>{l.onblur=null,h()}):(l=document.createElement("input"),l.type=kt(s)?"number":"text",r>-1&&(l.maxLength=r)),l.classList.add("esri-field-column__cell-input"),l.value=e,l.required=n;let a=!1;l.onkeydown=t=>{a="Escape"===t.key},l.onblur=()=>{l.onblur=null,h()};const h=()=>{a?this.cancel():this.submit(),this._inputField=null};return l}createInputContainer(){const t=document.createElement("div");return t.classList.add("esri-field-column__cell__input-container"),t}createLockedElement(){const t=document.createElement("div");return t.classList.add("esri-icon-locked"),t}getCellValue({path:t},{item:e}){var i,s,r;return null!=(i=null==e||null==(s=e.feature)||null==(r=s.attributes)?void 0:r[t])?i:null}_renderDateEditors(t,e,i){var s;const{config:r,messagesCommon:n}=this,o=t?new Date(t):new Date(Date.now()),l=new Sn({dateInputEnabled:!0,value:o}),a=new jn({value:o});i.value=o.getTime().toString();let h=!t;const u=()=>{h=!0;const t=this._getCombinedDateTime(l.value,a.value);i.value=t.getTime().toString()},c=()=>{h?this.submit():this.cancel()},d=()=>{i.value=null,this.submit()};l.watch("value",(()=>u())),a.watch("value",(()=>u()));const p=document.createElement("div"),m=document.createElement("div");l.container=p,a.container=m;const f=document.createElement("button");f.classList.add("esri-field-column__button","esri-icon-save"),f.onclick=()=>c(),f.title=null==n?void 0:n.save;const g=document.createElement("button");g.classList.add("esri-field-column__button","esri-icon-trash"),g.onclick=()=>d(),g.title=null==n?void 0:n.clear;const v=document.createElement("div");v.classList.add("esri-field-column__cell__date-input-wrapper"),v.appendChild(p),!1!==r.includeTime&&v.appendChild(m);const y=document.createElement("div");y.classList.add("esri-field-column__cell__date-input-container"),y.appendChild(v),y.appendChild(f),y.appendChild(g),l.when((()=>{var t;return null==(t=this.grid)?void 0:t.notifyResize()})),a.when((()=>{var t;return null==(t=this.grid)?void 0:t.notifyResize()})),this.removeCellContent(e),e.appendChild(y),null==(s=this.grid)||s.notifyResize()}_createSelectElement(t,e,i){let s=!1;const r=e.map((e=>{e.value===t&&(s=!0);const i=document.createElement("option");return i.text=e.name,i.value=e.value,i}));if(null!=t&&""!==t&&!s){const e=document.createElement("option");e.text=t,e.value=t,r.unshift(e)}if(!i.required&&null==i.value){const t=document.createElement("option");t.value="",r.unshift(t)}const n=document.createElement("select");return r.forEach((t=>n.add(t))),n.value=t,n}_setUpInputField(t,e){const{config:i,field:s,layer:r}=this,n=new nn({config:i,feature:t,field:s,layer:r,group:null,messages:null});return n.set("value",e),n}_isDomainCompatible(t){const{field:e}=this;if(t&&"coded-value"===t.type){const i=typeof t.codedValues[0].code;if("string"===i&&It(e)||"number"===i&&kt(e))return!0}return!(!t||"range"!==t.type||!kt(e))}_getDomainForFeature(t){const{layer:e,name:i}=this;if("wfs"===e.type||"geojson"===e.type)return null;const{typeIdField:s}=e,r=s===i,n=this.get("field.domain");if(r&&!n)return new Ct({name:"__internal-type-based-coded-value-domain__",codedValues:e.types.map((({id:t,name:e})=>({code:t,name:e})))});const o=s&&e.getFieldDomain(i,{feature:t})||n,l=this.get("config.domain");return this._isDomainCompatible(l)?l:o}_getComputedDomain(t,e){if(!e)return null;if("range"===e.type)return t;if("coded-value"===e.type){const i=e.codedValues.filter((e=>e.hasOwnProperty("code")&&e.code===t));return i&&i.length?i[0].name:t}return null}_getCombinedDateTime(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())}};r([n({readOnly:!0,aliasOf:"field.alias"})],zn.prototype,"alias",void 0),r([n()],zn.prototype,"cellValueFormatFunction",void 0),r([n()],zn.prototype,"cellValueValidatorFunction",void 0),r([n()],zn.prototype,"config",void 0),r([n({readOnly:!0,aliasOf:"field.defaultValue"})],zn.prototype,"defaultValue",void 0),r([n({readOnly:!0,aliasOf:"field.description"})],zn.prototype,"description",void 0),r([n({readOnly:!0})],zn.prototype,"editable",null),r([n()],zn.prototype,"editingEnabled",void 0),r([n()],zn.prototype,"field",void 0),r([n()],zn.prototype,"formatFunction",void 0),r([n({readOnly:!0})],zn.prototype,"header",null),r([n()],zn.prototype,"hidden",null),r([n()],zn.prototype,"headerRenderFunction",void 0),r([n()],zn.prototype,"inputRenderFunction",void 0),r([n()],zn.prototype,"layer",void 0),r([n({readOnly:!0})],zn.prototype,"loadingMessage",null),r([n()],zn.prototype,"maxLength",null),r([n({readOnly:!0,aliasOf:"config.menuConfig"})],zn.prototype,"menuConfig",void 0),r([n({readOnly:!0,aliasOf:"field.name"})],zn.prototype,"name",void 0),r([n({readOnly:!0,aliasOf:"field.nullable"})],zn.prototype,"nullable",void 0),r([n()],zn.prototype,"parseInputValueFunction",void 0),r([n({readOnly:!0})],zn.prototype,"path",null),r([n({readOnly:!0})],zn.prototype,"required",null),r([n()],zn.prototype,"sortable",null),r([n({readOnly:!0,aliasOf:"field.type"})],zn.prototype,"type",void 0),r([n()],zn.prototype,"updateRowItemFunction",void 0),zn=r([o("esri.widgets.FeatureTable.FieldColumn")],zn);const Pn=zn;let Rn=class extends l{constructor(t){super(t),this.cellClassNameGenerator=null,this.columnReorderingEnabled=!0,this.columns=new J,this.dataProvider=async({page:t,pageSize:e},i)=>{const{store:s}=this;i&&(s?i(await s.fetchItems({page:t,pageSize:e})):i&&i([]))},this.pageSize=50,this.rowDetailsRenderer=null,this.store=null}get size(){return this.store&&this.store.count||0}get state(){const{store:t}=this;return t&&"disabled"!==t.state?"loading"===t.state?"loading":"ready":"disabled"}closeColumnMenus(){var t;null==(t=this.columns)||t.forEach((t=>{t.menu&&t.menu.open&&t.menu.set("open",!1)}))}sortColumn(t,e){const i=this.findColumn(t);i&&(i.direction=e)}hideColumn(t){const e=this.findColumn(t);e&&!1===e.hidden&&(e.hidden=!0)}showColumn(t){const e=this.findColumn(t);e&&e.hidden&&(e.hidden=!1)}showAllColumns(){var t;null==(t=this.columns)||t.forEach((t=>{t.hidden&&(t.hidden=!1)}))}findColumn(t){return this.columns.find((e=>e.path===t))}getRowItemAt(t){return this.store&&this.store.getLocalItemAt(t)}refresh(){this.store&&(this.store.reset(),this.store.load())}};r([n()],Rn.prototype,"cellClassNameGenerator",void 0),r([n()],Rn.prototype,"columnReorderingEnabled",void 0),r([n()],Rn.prototype,"columns",void 0),r([n()],Rn.prototype,"dataProvider",void 0),r([n()],Rn.prototype,"pageSize",void 0),r([n()],Rn.prototype,"rowDetailsRenderer",void 0),r([n({readOnly:!0})],Rn.prototype,"size",null),r([n()],Rn.prototype,"store",void 0),r([n({readOnly:!0})],Rn.prototype,"state",null),Rn=r([o("esri.widgets.FeatureTable.Grid.GridViewModel")],Rn);const Nn=Rn;class Bn extends HTMLElement{static get version(){return"1.6.1"}}customElements.define("vaadin-lumo-styles",Bn);let Dn,Gn=null,Vn=window.HTMLImports&&window.HTMLImports.whenReady||null;function $n(t){requestAnimationFrame((function(){Vn?Vn(t):(Gn||(Gn=new Promise((t=>{Dn=t})),"complete"===document.readyState?Dn():document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&Dn()}))),Gn.then((function(){t&&t()})))}))}const qn="__seenByShadyCSS",Hn="__shadyCSSCachedStyle";let Un=null,Wn=null;class Jn{constructor(){this.customStyles=[],this.enqueued=!1,$n((()=>{window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()}))}enqueueDocumentValidation(){!this.enqueued&&Wn&&(this.enqueued=!0,$n(Wn))}addCustomStyle(t){t[qn]||(t[qn]=!0,this.customStyles.push(t),this.enqueueDocumentValidation())}getStyleForCustomStyle(t){if(t[Hn])return t[Hn];let e;return e=t.getStyle?t.getStyle():t,e}processStyles(){const t=this.customStyles;for(let e=0;e<t.length;e++){const i=t[e];if(i[Hn])continue;const s=this.getStyleForCustomStyle(i);if(s){const t=s.__appliedElement||s;Un&&Un(t),i[Hn]=t}}return t}}Jn.prototype.addCustomStyle=Jn.prototype.addCustomStyle,Jn.prototype.getStyleForCustomStyle=Jn.prototype.getStyleForCustomStyle,Jn.prototype.processStyles=Jn.prototype.processStyles,Object.defineProperties(Jn.prototype,{transformCallback:{get:()=>Un,set(t){Un=t}},validateCallback:{get:()=>Wn,set(t){let e=!1;Wn||(e=!0),Wn=t,e&&this.enqueueDocumentValidation()}}});const Yn=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,Kn=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,Qn=/@media\s(.*)/;function Zn(t,e){for(let i in e)null===i?t.style.removeProperty(i):t.style.setProperty(i,e[i])}function Xn(t,e){const i=window.getComputedStyle(t).getPropertyValue(e);return i?i.trim():""}const to=!(window.ShadyDOM&&window.ShadyDOM.inUse);let eo,io;function so(t){eo=(!t||!t.shimcssproperties)&&(to||Boolean(!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&void 0!==window.ShadyCSS.cssBuild&&(io=window.ShadyCSS.cssBuild);const ro=Boolean(window.ShadyCSS&&window.ShadyCSS.disableRuntime);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?eo=window.ShadyCSS.nativeCss:window.ShadyCSS?(so(window.ShadyCSS),window.ShadyCSS=void 0):so(window.WebComponents&&window.WebComponents.flags);const no=eo,oo=new Jn;window.ShadyCSS||(window.ShadyCSS={prepareTemplate(t,e,i){},prepareTemplateDom(t,e){},prepareTemplateStyles(t,e,i){},styleSubtree(t,e){oo.processStyles(),Zn(t,e)},styleElement(t){oo.processStyles()},styleDocument(t){oo.processStyles(),Zn(document.body,t)},getComputedStyleValue:(t,e)=>Xn(t,e),flushCustomStyles(){},nativeCss:no,nativeShadow:to,cssBuild:io,disableRuntime:ro}),window.ShadyCSS.CustomStyleInterface=oo,window.JSCompiler_renameProperty=function(t){return t};let lo,ao,ho=/(url\()([^)]*)(\))/g,uo=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/;function co(t,e){if(t&&uo.test(t))return t;if("//"===t)return t;if(void 0===lo){lo=!1;try{const t=new URL("b","http://a");t.pathname="c%20d",lo="http://a/c%20d"===t.href}catch(t){}}if(e||(e=document.baseURI||window.location.href),lo)try{return new URL(t,e).href}catch(e){return t}return ao||(ao=document.implementation.createHTMLDocument("temp"),ao.base=ao.createElement("base"),ao.head.appendChild(ao.base),ao.anchor=ao.createElement("a"),ao.body.appendChild(ao.anchor)),ao.base.href=e,ao.anchor.href=t,ao.anchor.href||t}function po(t,e){return t.replace(ho,(function(t,i,s,r){return i+"'"+co(s.replace(/["']/g,""),e)+"'"+r}))}function mo(t){return t.substring(0,t.lastIndexOf("/")+1)}const fo=!window.ShadyDOM||!window.ShadyDOM.inUse,go=fo&&"adoptedStyleSheets"in Document.prototype&&"replaceSync"in CSSStyleSheet.prototype&&(()=>{try{const t=new CSSStyleSheet;t.replaceSync("");const e=document.createElement("div");return e.attachShadow({mode:"open"}),e.shadowRoot.adoptedStyleSheets=[t],e.shadowRoot.adoptedStyleSheets[0]===t}catch(t){return!1}})();let vo=window.Polymer&&window.Polymer.rootPath||mo(document.baseURI||window.location.href),yo=window.Polymer&&window.Polymer.sanitizeDOMValue||void 0,wo=window.Polymer&&window.Polymer.setPassiveTouchGestures||!1,bo=window.Polymer&&window.Polymer.strictTemplatePolicy||!1,_o=window.Polymer&&window.Polymer.allowTemplateFromDomModule||!1,Ao=window.Polymer&&window.Polymer.legacyOptimizations||!1,xo=window.Polymer&&window.Polymer.legacyWarnings||!1,So=window.Polymer&&window.Polymer.syncInitialRender||!1,Co=window.Polymer&&window.Polymer.legacyUndefined||!1,ko=window.Polymer&&window.Polymer.orderedComputed||!1,Io=window.Polymer&&window.Polymer.removeNestedTemplates||!1,Mo=window.Polymer&&window.Polymer.fastDomIf||!1,To=window.Polymer&&window.Polymer.suppressTemplateNotifications||!1,Eo=window.Polymer&&window.Polymer.legacyNoObservedAttributes||!1,jo=window.Polymer&&window.Polymer.useAdoptedStyleSheetsWithBuiltCSS||!1,Oo={},Lo={};function Fo(t,e){Oo[t]=Lo[t.toLowerCase()]=e}function zo(t){return Oo[t]||Lo[t.toLowerCase()]}class Po extends HTMLElement{static get observedAttributes(){return["id"]}static import(t,e){if(t){let i=zo(t);return i&&e?i.querySelector(e):i}return null}attributeChangedCallback(t,e,i,s){e!==i&&this.register()}get assetpath(){if(!this.__assetpath){const t=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,e=co(this.getAttribute("assetpath")||"",t.baseURI);this.__assetpath=mo(e)}return this.__assetpath}register(t){if(t=t||this.id){if(bo&&void 0!==zo(t))throw Fo(t,null),new Error(`strictTemplatePolicy: dom-module ${t} re-registered`);this.id=t,Fo(t,this),function(t){t.querySelector("style")&&console.warn("dom-module %s has style outside template",t.id)}(this)}}}Po.prototype.modules=Oo,customElements.define("dom-module",Po);const Ro="shady-unscoped";function No(t){return Po.import(t)}function Bo(t){const e=po((t.body?t.body:t).textContent,t.baseURI),i=document.createElement("style");return i.textContent=e,i}function Do(t){const e=t.trim().split(/\s+/),i=[];for(let t=0;t<e.length;t++)i.push(...Go(e[t]));return i}function Go(t){const e=No(t);if(!e)return console.warn("Could not find style data in module named",t),[];if(void 0===e._styles){const t=[];t.push(...$o(e));const i=e.querySelector("template");i&&t.push(...Vo(i,e.assetpath)),e._styles=t}return e._styles}function Vo(t,e){if(!t._styles){const i=[],s=t.content.querySelectorAll("style");for(let t=0;t<s.length;t++){let r=s[t],n=r.getAttribute("include");n&&i.push(...Do(n).filter((function(t,e,i){return i.indexOf(t)===e}))),e&&(r.textContent=po(r.textContent,e)),i.push(r)}t._styles=i}return t._styles}function $o(t){const e=[],i=t.querySelectorAll("link[rel=import][type~=css]");for(let t=0;t<i.length;t++){let s=i[t];if(s.import){const t=s.import,i=s.hasAttribute(Ro);if(i&&!t._unscopedStyle){const e=Bo(t);e.setAttribute(Ro,""),t._unscopedStyle=e}else t._style||(t._style=Bo(t));e.push(i?t._unscopedStyle:t._style)}}return e}function qo(t){let e=No(t);if(e&&void 0===e._cssText){let t=function(t){let e="",i=$o(t);for(let t=0;t<i.length;t++)e+=i[t].textContent;return e}(e),i=e.querySelector("template");i&&(t+=function(t,e){let i="";const s=Vo(t,e);for(let t=0;t<s.length;t++){let e=s[t];e.parentNode&&e.parentNode.removeChild(e),i+=e.textContent}return i}(i,e.assetpath)),e._cssText=t||null}return e||console.warn("Could not find style data in module named",t),e&&e._cssText||""}const Ho=window.ShadyCSS.CustomStyleInterface;class Uo extends HTMLElement{constructor(){super(),this._style=null,Ho.addCustomStyle(this)}getStyle(){if(this._style)return this._style;const t=this.querySelector("style");if(!t)return null;this._style=t;const e=t.getAttribute("include");return e&&(t.removeAttribute("include"),t.textContent=function(t){let e=t.trim().split(/\s+/),i="";for(let t=0;t<e.length;t++)i+=qo(e[t]);return i}(e)+t.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}window.customElements.define("custom-style",Uo);const Wo=document.createElement("template");Wo.innerHTML='<custom-style>\n  <style>\n    html {\n      /* Base (background) */\n      --lumo-base-color: #FFF;\n\n      /* Tint */\n      --lumo-tint-5pct: hsla(0, 0%, 100%, 0.3);\n      --lumo-tint-10pct: hsla(0, 0%, 100%, 0.37);\n      --lumo-tint-20pct: hsla(0, 0%, 100%, 0.44);\n      --lumo-tint-30pct: hsla(0, 0%, 100%, 0.5);\n      --lumo-tint-40pct: hsla(0, 0%, 100%, 0.57);\n      --lumo-tint-50pct: hsla(0, 0%, 100%, 0.64);\n      --lumo-tint-60pct: hsla(0, 0%, 100%, 0.7);\n      --lumo-tint-70pct: hsla(0, 0%, 100%, 0.77);\n      --lumo-tint-80pct: hsla(0, 0%, 100%, 0.84);\n      --lumo-tint-90pct: hsla(0, 0%, 100%, 0.9);\n      --lumo-tint: #FFF;\n\n      /* Shade */\n      --lumo-shade-5pct: hsla(214, 61%, 25%, 0.05);\n      --lumo-shade-10pct: hsla(214, 57%, 24%, 0.1);\n      --lumo-shade-20pct: hsla(214, 53%, 23%, 0.16);\n      --lumo-shade-30pct: hsla(214, 50%, 22%, 0.26);\n      --lumo-shade-40pct: hsla(214, 47%, 21%, 0.38);\n      --lumo-shade-50pct: hsla(214, 45%, 20%, 0.5);\n      --lumo-shade-60pct: hsla(214, 43%, 19%, 0.61);\n      --lumo-shade-70pct: hsla(214, 42%, 18%, 0.72);\n      --lumo-shade-80pct: hsla(214, 41%, 17%, 0.83);\n      --lumo-shade-90pct: hsla(214, 40%, 16%, 0.94);\n      --lumo-shade: hsl(214, 35%, 15%);\n\n      /* Contrast */\n      --lumo-contrast-5pct: var(--lumo-shade-5pct);\n      --lumo-contrast-10pct: var(--lumo-shade-10pct);\n      --lumo-contrast-20pct: var(--lumo-shade-20pct);\n      --lumo-contrast-30pct: var(--lumo-shade-30pct);\n      --lumo-contrast-40pct: var(--lumo-shade-40pct);\n      --lumo-contrast-50pct: var(--lumo-shade-50pct);\n      --lumo-contrast-60pct: var(--lumo-shade-60pct);\n      --lumo-contrast-70pct: var(--lumo-shade-70pct);\n      --lumo-contrast-80pct: var(--lumo-shade-80pct);\n      --lumo-contrast-90pct: var(--lumo-shade-90pct);\n      --lumo-contrast: var(--lumo-shade);\n\n      /* Text */\n      --lumo-header-text-color: var(--lumo-contrast);\n      --lumo-body-text-color: var(--lumo-contrast-90pct);\n      --lumo-secondary-text-color: var(--lumo-contrast-70pct);\n      --lumo-tertiary-text-color: var(--lumo-contrast-50pct);\n      --lumo-disabled-text-color: var(--lumo-contrast-30pct);\n\n      /* Primary */\n      --lumo-primary-color: hsl(214, 90%, 52%);\n      --lumo-primary-color-50pct: hsla(214, 90%, 52%, 0.5);\n      --lumo-primary-color-10pct: hsla(214, 90%, 52%, 0.1);\n      --lumo-primary-text-color: var(--lumo-primary-color);\n      --lumo-primary-contrast-color: #FFF;\n\n      /* Error */\n      --lumo-error-color: hsl(3, 100%, 61%);\n      --lumo-error-color-50pct: hsla(3, 100%, 60%, 0.5);\n      --lumo-error-color-10pct: hsla(3, 100%, 60%, 0.1);\n      --lumo-error-text-color: hsl(3, 92%, 53%);\n      --lumo-error-contrast-color: #FFF;\n\n      /* Success */\n      --lumo-success-color: hsl(145, 80%, 42%); /* hsl(144,82%,37%); */\n      --lumo-success-color-50pct: hsla(145, 76%, 44%, 0.55);\n      --lumo-success-color-10pct: hsla(145, 76%, 44%, 0.12);\n      --lumo-success-text-color: hsl(145, 100%, 32%);\n      --lumo-success-contrast-color: #FFF;\n    }\n  </style>\n</custom-style><dom-module id="lumo-color">\n  <template>\n    <style>\n      [theme~="dark"] {\n        /* Base (background) */\n        --lumo-base-color: hsl(214, 35%, 21%);\n\n        /* Tint */\n        --lumo-tint-5pct: hsla(214, 65%, 85%, 0.06);\n        --lumo-tint-10pct: hsla(214, 60%, 80%, 0.14);\n        --lumo-tint-20pct: hsla(214, 64%, 82%, 0.23);\n        --lumo-tint-30pct: hsla(214, 69%, 84%, 0.32);\n        --lumo-tint-40pct: hsla(214, 73%, 86%, 0.41);\n        --lumo-tint-50pct: hsla(214, 78%, 88%, 0.5);\n        --lumo-tint-60pct: hsla(214, 82%, 90%, 0.6);\n        --lumo-tint-70pct: hsla(214, 87%, 92%, 0.7);\n        --lumo-tint-80pct: hsla(214, 91%, 94%, 0.8);\n        --lumo-tint-90pct: hsla(214, 96%, 96%, 0.9);\n        --lumo-tint: hsl(214, 100%, 98%);\n\n        /* Shade */\n        --lumo-shade-5pct: hsla(214, 0%, 0%, 0.07);\n        --lumo-shade-10pct: hsla(214, 4%, 2%, 0.15);\n        --lumo-shade-20pct: hsla(214, 8%, 4%, 0.23);\n        --lumo-shade-30pct: hsla(214, 12%, 6%, 0.32);\n        --lumo-shade-40pct: hsla(214, 16%, 8%, 0.41);\n        --lumo-shade-50pct: hsla(214, 20%, 10%, 0.5);\n        --lumo-shade-60pct: hsla(214, 24%, 12%, 0.6);\n        --lumo-shade-70pct: hsla(214, 28%, 13%, 0.7);\n        --lumo-shade-80pct: hsla(214, 32%, 13%, 0.8);\n        --lumo-shade-90pct: hsla(214, 33%, 13%, 0.9);\n        --lumo-shade: hsl(214, 33%, 13%);\n\n        /* Contrast */\n        --lumo-contrast-5pct: var(--lumo-tint-5pct);\n        --lumo-contrast-10pct: var(--lumo-tint-10pct);\n        --lumo-contrast-20pct: var(--lumo-tint-20pct);\n        --lumo-contrast-30pct: var(--lumo-tint-30pct);\n        --lumo-contrast-40pct: var(--lumo-tint-40pct);\n        --lumo-contrast-50pct: var(--lumo-tint-50pct);\n        --lumo-contrast-60pct: var(--lumo-tint-60pct);\n        --lumo-contrast-70pct: var(--lumo-tint-70pct);\n        --lumo-contrast-80pct: var(--lumo-tint-80pct);\n        --lumo-contrast-90pct: var(--lumo-tint-90pct);\n        --lumo-contrast: var(--lumo-tint);\n\n        /* Text */\n        --lumo-header-text-color: var(--lumo-contrast);\n        --lumo-body-text-color: var(--lumo-contrast-90pct);\n        --lumo-secondary-text-color: var(--lumo-contrast-70pct);\n        --lumo-tertiary-text-color: var(--lumo-contrast-50pct);\n        --lumo-disabled-text-color: var(--lumo-contrast-30pct);\n\n        /* Primary */\n        --lumo-primary-color: hsl(214, 86%, 55%);\n        --lumo-primary-color-50pct: hsla(214, 86%, 55%, 0.5);\n        --lumo-primary-color-10pct: hsla(214, 90%, 63%, 0.1);\n        --lumo-primary-text-color: hsl(214, 100%, 70%);\n        --lumo-primary-contrast-color: #FFF;\n\n        /* Error */\n        --lumo-error-color: hsl(3, 90%, 63%);\n        --lumo-error-color-50pct: hsla(3, 90%, 63%, 0.5);\n        --lumo-error-color-10pct: hsla(3, 90%, 63%, 0.1);\n        --lumo-error-text-color: hsl(3, 100%, 67%);\n\n        /* Success */\n        --lumo-success-color: hsl(145, 65%, 42%);\n        --lumo-success-color-50pct: hsla(145, 65%, 42%, 0.5);\n        --lumo-success-color-10pct: hsla(145, 65%, 42%, 0.1);\n        --lumo-success-text-color: hsl(145, 85%, 47%);\n      }\n\n      html {\n        color: var(--lumo-body-text-color);\n        background-color: var(--lumo-base-color);\n      }\n\n      [theme~="dark"] {\n        color: var(--lumo-body-text-color);\n        background-color: var(--lumo-base-color);\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        color: var(--lumo-header-text-color);\n      }\n\n      a {\n        color: var(--lumo-primary-text-color);\n      }\n\n      blockquote {\n        color: var(--lumo-secondary-text-color);\n      }\n\n      code,\n      pre {\n        background-color: var(--lumo-contrast-10pct);\n        border-radius: var(--lumo-border-radius-m);\n      }\n    </style>\n  </template>\n</dom-module><dom-module id="lumo-color-legacy">\n  <template>\n    <style include="lumo-color">\n      :host {\n        color: var(--lumo-body-text-color) !important;\n        background-color: var(--lumo-base-color) !important;\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(Wo.content);const Jo=document.createElement("template");Jo.innerHTML='<custom-style>\n  <style>\n    @font-face {\n      font-family: \'lumo-icons\';\n      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABEcAAsAAAAAIiwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAQwAAAFZAIUuKY21hcAAAAYgAAAD4AAADrsCU8d5nbHlmAAACgAAAC2MAABd4h9To2WhlYWQAAA3kAAAAMAAAADZa/6SsaGhlYQAADhQAAAAdAAAAJAbpA35obXR4AAAONAAAABAAAACspBAAAGxvY2EAAA5EAAAAWAAAAFh55IAsbWF4cAAADpwAAAAfAAAAIAFKAXBuYW1lAAAOvAAAATEAAAIuUUJZCHBvc3QAAA/wAAABKwAAAelm8SzVeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS+yDiBgZWBgamKaQ8DA0MPhGZ8wGDIyAQUZWBlZsAKAtJcUxgcXjG+0mIO+p/FEMUcxDANKMwIkgMABn8MLQB4nO3SWW6DMABF0UtwCEnIPM/zhLK8LqhfXRybSP14XUYtHV9hGYQwQBNIo3cUIPkhQeM7rib1ekqnXg981XuC1qvy84lzojleh3puxL0hPjGjRU473teloEefAUNGjJkwZcacBUtWrNmwZceeA0dOnLlw5cadB09elPGhGf+j0NTI/65KfXerT6JhqKnpRKtgOpuqaTrtKjPUlqHmhto21I7pL6i6hlqY3q7qGWrfUAeGOjTUkaGODXViqFNDnRnq3FAXhro01JWhrg11Y6hbQ90Z6t5QD4Z6NNSToZ4N9WKoV0O9GerdUB+G+jTUl6GWRvkL24BkEXictVh9bFvVFb/nxvbz+7Rf/N6zHcd2bCfP+Wgc1Z9N0jpNnEL6kbRVS6HA2hQYGh9TGR1CbCqa2rXrWOkQE/sHNJgmtZvoVNZqE1B1DNHxzTQxCehUTYiJTQyENui0qSLezr3PduyQfgmRWOfde8+9551z7rnn/O4jLoJ/bRP0UaKQMLFJjpBAvphLZC3Dk0ok7WBzR2/upJs7Ryw/nfFbln/uuN/apCvwrKLrSvUqRufbm5pn0fs0w4gYxnGVP6qHnO4bWiDQGQgwtS6lm3lB3QoX1M2vwEmuzirF39y+Es2+DJ8d1pkyqBIqoze3D1+Zz4DrFoazxI8dWwMrDlZ2DMqQAR9AROsJU+2cmlTPazTco52F1xTa2a2+K8vvq92dVHmtLoPeQX/AZPRYGthDYOeZjBjKoFsVGulR3lWU95WeCK44qHU7MhWUGUKZDT3oKUcG2GWuh+EDDfUYA/jhAhl0TOsJNYSEu7mQmi3UzfXwZKA4BsVsHLXQYGgRW95uEtpJ1Vfn9XiLriRBlFEqxsDjA09yCNUoQxxwd7KWSTt2y3GTKiflqHRSoWZc3m11Wa/fJdFgXD4sSYfleJBKd8GMz7J8dZn/cGRCcKGDnA2Ge3fKzcvlnTDNthGWLXzX/WaXtUAmRgeLlHSr30r0G9UTXMb0AtmwzOoy73fkSlHZkduw/TYuU9cAD4YutPoxTTsA3797wVr4Z/1NC5zARHr4vtxJjxIfiZMhMkbWk+14BnJZKwqGZwDfswLyxWDSg11rFLJF7Nopxjd1h1/QOT+oezgfu3Yq+Hk+duf5x+40o1GTkaIgikK/IEnC6aYxCUBaZJSN4XTYFjU/YMNIKqJwhDGOCCI8FDXnXmXjtGhGJyShqjAOnBOkW2JG9S7GgYeMWAU5JzhnWmBOaOM+CKEPoqSfFDC2Unq+DLlUgUVUFFLZGJg6jtlojsdsa8kPObPuJdi5dnBdBsLJMGTWDa4t2JvtwuPo9s+Y86suv/W33QG1rAaOAUV+vx4K6f2D04PVKlC7WLSrZzAi45ZV6lIC7WoXqmRyvUqoVwrzUoVsIjeTXWQv+RH5GTlBXiB/In8ln0IbBCAFOajAJrgZYyOHWqOfUe/aHjI12R6OQo1jCgt215l+4f6XPb+0MNou0V+43n2F77tSfRb24d7zitgnKmvYHs69zugaPvBwv6ioXkb2LdL65Atw51uLkXlu1bhMMRcXSPcYoqKIRlh34lQP8/5JbuUFye4vxD6/6MxFF11C0uVLr9Ulgw44tS3pMViNLUExbycFgLIct+QDMibRimx1ydUz8FXZiuOIDBOMVX2nUZc+huNE5XUJ81uiJoiabwqaVF0uacKbau/pl4R2VW0XXlJra6boVrYG646TF5NYzwy4vjENVrDlcNpZPl8DH6XX8XWCx0mvWVZY6KFLrvsY66/zPict5FnxaNUR/juvZCM3TvD60E2W1tZizbXTPDuabcm0nbbzpWKpmA1ayBQ8giedLUM+A0kNjBjQjmuYz7YrgIXYvmF63ZLBwSXrpn9Tb9wwdd/U1H0PMQK3XcO8ul3WT7PyPPdpy0TemKxNRcJNauiXJnnUDpUppQWs4SnUIy0EESGYqJYQLGHxzaGWwVIaS6Y7mQFM8ZjYDQ3axjf61SWjU33JwOZA1pwaG1L9mzf71aHRdX1JHw6Fp0aXhNwbqyeGNg4NbdzGCBxoz4ZXjy4Nu69Zr6sDY6vMrLU5nA1P8JkbdWXJ6ERfMryvNh1JfQ9+T4dIhGvK9w3dxjBBzatsQ/MlOHVIDnYpDz6odAXlQ01t2Pa5Iafd8MMpxAeDKP0C6CjgVLT5osB6icUx01lWjXxzT/GyRF2welEM5Z/7jG3VjQ1SrNn5IbyzOG5dobB3/QHxyZvsXcoz8IoEwS7plCg+zxHQk424q9BfEpkESJbFHQusDBSWFkuBkoPO0kLKwRVYjxGXlHTcTDQMJ/H6TX9afkO7mnraTO1feTnZAXLu4cp7HAXMmNG1yeFk9TgS/NHhZR/4QoBTr/ZB+6hCgyl15Nq1UbN6nE1/ZnP1U2cizCBpvs8cJQZJ4LkYx5N/yZPAUZNQQ0V4f3BQllWrK3YRzl30dOT6RVn2upNur6woSa8CqpdT/aKnBM4o3jNur9d9xqtUT6veBEt9Ca9at+ERzEEhUkR8sa5mQ4aVvJoVeEA8zI4ei5mULXFGyU7z/6TAeYLVcpzSWZY8PYYF5yrTV60sT0+XV141vX++Wf16V2bFeGVPZXxFpkvyeKTWLlzfW0mnKxsY6Y3294/0998SCfX1blm5pbcvFGlq/r07MRAMhYIDiW5JFKWW3vdrEpCsZSJG+om7Zu/PSScZJhNkLbmW5Wsr12pWqW5zKtlwRS4bFOxUw17mCzy6lskCDl1WYOGWDYrADrMA7BDDweWWNd5koiJnR1dz+ytLP2q0SqPB1lnK2ccB7RYe4FSoPks3iB3t4txTSHctb2sy1ivk0pvHuCNm6w1f6wxv3+OCgN78LqdQnUVh7R0oTAp0zOf2rbW770Vu5C2dIyGdTnHo8zSji7dppj0USoVCz+lhRMTh53Teq9VbGfbjuSbAooSdXayY4PYHg374C6f7gl1B/DXuJ4/QXxOBdJFJspFsI3egpoWUUCjlTIFnNYNl+ZyZKmBeYKGHkD1QyDlhaKbKwKcIJqJ4TLJ2OmdY/JWXae4DdGBw8HZ7eXcgFF2zr2SoalDry5iKqoa0Puhe3hPQ2s3elTYM+MI+n3rK0KgL7/La3GeMLt6m7u912vGnvtORiIa0qBmhqVi+XW9XNBmqb8eVgKzIHfGI5bNoG7X0UCzeISmqIcO/nY8FH7U8avX9fx/ST+hx0sezPw9Qy8Mum3GWf2N4Uy/yIYGVBXbJHWIZp7dfTcptdMTr9Qmq7DaiK/ukqCL4kt4RUfS5XPnMtmT22/mQFqF7emSqtrlu8SVElxDRJrZODkpuwe0VfTfjdEp1f7A7v+fozNBXUJ/6WTuK2TtFlpFVZAZ3LcFvUi1Z2p2YT+EMAkGJVStOzLTAPg4IqWIAlzRSjOBkl2zxj3TKycpzT/MnvX3uaSMWM+gU0rkXjohhefVRMaps3/kLMSKv23lT23uxQrkQjyOJleMDsdhAnD6ZGElWZ5MjCXzCE/hkWX+WF4knzGhVOyK2eQZekV3eyo0zL8kuYWCnDCvjjhAkcTPOBDXVdoav3HVcFnQjLvtV9S2p0zA6JegPwMQxt+yFb3ll9zGlq/5dRKb3cEyQYoaNYpharJ7xCB7AWxsLY3jjZXY0XsZj0Wjwc9I6PP/dKABnCZaqHpaZEACxk4ZeLZSKNgZABl+lYQX1sJQOSX3n6r410evcoud5JeAGUXVP9H1tZOKejTq4Ono0z0erro1FrnOpohva1d/hTdtVsQdKN5W9RlT3NjD0nznyKNTgKAMfWNWcyodV0IGLPIHOF0o4JyqufaK4z6WIIzuGh3d8c8cwQg8ER+OVxyrjdm8vNuhts4LoOihGxIMuUdgzwiYN7xhh1+oZnJNuTG7gQZvu4XWZ9GAZZjGEubwePqYhtKDTH+9VQkl17/iGybsnJ+8+sKtyPrcll9ty65Zsdst/9iqpEKh7M5VdBxh3csOdNc6tW3I1uyM1PzOXegSOrLFsFNI2O27M+TF2ApnN9MUv5ud6LjxIvEQnHRzxIu4IsA9MLFkJn2tcZoZ7ON7dXe7ujrc8HrusPKamlqXwd77lQUuLpilau4PUMapueBb7irU4RoUXEYXuVuIGlRGmOp+2lNkaRPVziOqmlaZvaqG4dFgSj0jxEJWrv12IUWntmw+rfQarRE0Aph4ocI6nlUlGqs+u3/+T/ethW62PpHp2eHbZstnh/wOO95yDAHicY2BkYGAA4pmJ6QHx/DZfGbiZXwBFGGpUNzQi6P+vmacy3QJyORiYQKIANoULVXicY2BkYGAO+p8FJF8wAAHzVAZGBlSgDQBW9gNvAAAAeJxjYGBgYH4xNDAAzwQmjwAAAAAATgCaAOgBCgEsAU4BcAGaAcQB7gIaApwC6ASaBLwE1gTyBQ4FKgV6BdAF/gZEBmYGtgcYB5AIGAhSCGoI/glGCb4J2goECjwKggq4CvALUAuWC7x4nGNgZGBg0GZMYRBlAAEmIOYCQgaG/2A+AwAYlAG8AHicbZE9TsMwGIbf9A/RSggEYmHxAgtq+jN2ZGj3Dt3T1GlTOXHkuBW9AyfgEByCgTNwCA7BW/NJlVBtyd/jx+8XKwmAa3whwnFE6Ib1OBq44O6Pm6Qb4Rb5QbiNHh6FO/RD4S6eMRHu4RaaT4halzR3eBVu4Apvwk36d+EW+UO4jXt8Cnfov4W7WOBHuIen6MXsCtvPU1vWc73emcSdxIkW2tW5LdUoHp7kTJfaJV6v1PKg6v167H2mMmcLNbWl18ZYVTm71amPN95Xk8EgEx+ntoDBDgUs+siRspaoMef7rukNEriziXNuwS7Hmoe9wggxv+e55IzJMqQTeNYV00scuNbY8+YxrUfGfcaMZb/CNPQe04bT0lThbEuT0sfYhK6K/23Amf3Lx+H24hcj4GScAAAAeJxtjtlugzAQRbkJUEJIuu/7vqR8lGNPAcWx0YAb5e/LklR96EgenSufGY038PqKvf9rhgGG8BEgxA4ijBBjjAQTTLGLPezjAIc4wjFOcIoznOMCl7jCNW5wizvc4wGPeMIzXvCKN7zjAzN8eonQRWZSSaYmjvug6ase98hFltexMJmmVNmV2WBvdNgZUc+ujAWzXW3UDnu1w43asStHc8GpzAXX/py0jqTQZJTgkcxJLpaCF0lD32xNt+43tAsn29Dft02uDKS2cjGUNgsk26qK2lFthYoU27INPqmiDqg5goe0pqR5qSoqMdek/CUZFywL46rEsiImleqiqoMyt4baXlu/1GLdNFf5zbcNmdr1YUWCZe47o+zUmb/DoStbw3cVsef9ALjjiPQA) format(\'woff\');\n      font-weight: normal;\n      font-style: normal;\n    }\n\n    html {\n      --lumo-icons-align-center: "\\ea01";\n      --lumo-icons-align-left: "\\ea02";\n      --lumo-icons-align-right: "\\ea03";\n      --lumo-icons-angle-down: "\\ea04";\n      --lumo-icons-angle-left: "\\ea05";\n      --lumo-icons-angle-right: "\\ea06";\n      --lumo-icons-angle-up: "\\ea07";\n      --lumo-icons-arrow-down: "\\ea08";\n      --lumo-icons-arrow-left: "\\ea09";\n      --lumo-icons-arrow-right: "\\ea0a";\n      --lumo-icons-arrow-up: "\\ea0b";\n      --lumo-icons-bar-chart: "\\ea0c";\n      --lumo-icons-bell: "\\ea0d";\n      --lumo-icons-calendar: "\\ea0e";\n      --lumo-icons-checkmark: "\\ea0f";\n      --lumo-icons-chevron-down: "\\ea10";\n      --lumo-icons-chevron-left: "\\ea11";\n      --lumo-icons-chevron-right: "\\ea12";\n      --lumo-icons-chevron-up: "\\ea13";\n      --lumo-icons-clock: "\\ea14";\n      --lumo-icons-cog: "\\ea15";\n      --lumo-icons-cross: "\\ea16";\n      --lumo-icons-download: "\\ea17";\n      --lumo-icons-dropdown: "\\ea18";\n      --lumo-icons-edit: "\\ea19";\n      --lumo-icons-error: "\\ea1a";\n      --lumo-icons-eye: "\\ea1b";\n      --lumo-icons-eye-disabled: "\\ea1c";\n      --lumo-icons-menu: "\\ea1d";\n      --lumo-icons-minus: "\\ea1e";\n      --lumo-icons-ordered-list: "\\ea1f";\n      --lumo-icons-phone: "\\ea20";\n      --lumo-icons-photo: "\\ea21";\n      --lumo-icons-play: "\\ea22";\n      --lumo-icons-plus: "\\ea23";\n      --lumo-icons-redo: "\\ea24";\n      --lumo-icons-reload: "\\ea25";\n      --lumo-icons-search: "\\ea26";\n      --lumo-icons-undo: "\\ea27";\n      --lumo-icons-unordered-list: "\\ea28";\n      --lumo-icons-upload: "\\ea29";\n      --lumo-icons-user: "\\ea2a";\n    }\n  </style>\n</custom-style>',document.head.appendChild(Jo.content);const Yo=document.createElement("template");Yo.innerHTML="<custom-style>\n  <style>\n    html {\n      --lumo-size-xs: 1.625rem;\n      --lumo-size-s: 1.875rem;\n      --lumo-size-m: 2.25rem;\n      --lumo-size-l: 2.75rem;\n      --lumo-size-xl: 3.5rem;\n\n      /* Icons */\n      --lumo-icon-size-s: 1.25em;\n      --lumo-icon-size-m: 1.5em;\n      --lumo-icon-size-l: 2.25em;\n      /* For backwards compatibility */\n      --lumo-icon-size: var(--lumo-icon-size-m);\n    }\n  </style>\n</custom-style>",document.head.appendChild(Yo.content);const Ko=document.createElement("template");Ko.innerHTML="<custom-style>\n  <style>\n    html {\n      /* Square */\n      --lumo-space-xs: 0.25rem;\n      --lumo-space-s: 0.5rem;\n      --lumo-space-m: 1rem;\n      --lumo-space-l: 1.5rem;\n      --lumo-space-xl: 2.5rem;\n\n      /* Wide */\n      --lumo-space-wide-xs: calc(var(--lumo-space-xs) / 2) var(--lumo-space-xs);\n      --lumo-space-wide-s: calc(var(--lumo-space-s) / 2) var(--lumo-space-s);\n      --lumo-space-wide-m: calc(var(--lumo-space-m) / 2) var(--lumo-space-m);\n      --lumo-space-wide-l: calc(var(--lumo-space-l) / 2) var(--lumo-space-l);\n      --lumo-space-wide-xl: calc(var(--lumo-space-xl) / 2) var(--lumo-space-xl);\n\n      /* Tall */\n      --lumo-space-tall-xs: var(--lumo-space-xs) calc(var(--lumo-space-xs) / 2);\n      --lumo-space-tall-s: var(--lumo-space-s) calc(var(--lumo-space-s) / 2);\n      --lumo-space-tall-m: var(--lumo-space-m) calc(var(--lumo-space-m) / 2);\n      --lumo-space-tall-l: var(--lumo-space-l) calc(var(--lumo-space-l) / 2);\n      --lumo-space-tall-xl: var(--lumo-space-xl) calc(var(--lumo-space-xl) / 2);\n    }\n  </style>\n</custom-style>",document.head.appendChild(Ko.content);const Qo=document.createElement("template");Qo.innerHTML="<custom-style>\n  <style>\n    html {\n      /* Border radius */\n      --lumo-border-radius-s: 0.25em; /* Checkbox, badge, date-picker year indicator, etc */\n      --lumo-border-radius-m: var(--lumo-border-radius, 0.25em); /* Button, text field, menu overlay, etc */\n      --lumo-border-radius-l: 0.5em; /* Dialog, notification, etc */\n      --lumo-border-radius: 0.25em; /* Deprecated */\n\n      /* Shadow */\n      --lumo-box-shadow-xs: 0 1px 4px -1px var(--lumo-shade-50pct);\n      --lumo-box-shadow-s: 0 2px 4px -1px var(--lumo-shade-20pct), 0 3px 12px -1px var(--lumo-shade-30pct);\n      --lumo-box-shadow-m: 0 2px 6px -1px var(--lumo-shade-20pct), 0 8px 24px -4px var(--lumo-shade-40pct);\n      --lumo-box-shadow-l: 0 3px 18px -2px var(--lumo-shade-20pct), 0 12px 48px -6px var(--lumo-shade-40pct);\n      --lumo-box-shadow-xl: 0 4px 24px -3px var(--lumo-shade-20pct), 0 18px 64px -8px var(--lumo-shade-40pct);\n\n      /* Clickable element cursor */\n      --lumo-clickable-cursor: default;\n    }\n  </style>\n</custom-style>",document.head.appendChild(Qo.content);const Zo=document.createElement("template");Zo.innerHTML='<custom-style>\n  <style>\n    html {\n      /* Font families */\n      --lumo-font-family: -apple-system, BlinkMacSystemFont, "Roboto", "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n\n      /* Font sizes */\n      --lumo-font-size-xxs: .75rem;\n      --lumo-font-size-xs: .8125rem;\n      --lumo-font-size-s: .875rem;\n      --lumo-font-size-m: 1rem;\n      --lumo-font-size-l: 1.125rem;\n      --lumo-font-size-xl: 1.375rem;\n      --lumo-font-size-xxl: 1.75rem;\n      --lumo-font-size-xxxl: 2.5rem;\n\n      /* Line heights */\n      --lumo-line-height-xs: 1.25;\n      --lumo-line-height-s: 1.375;\n      --lumo-line-height-m: 1.625;\n    }\n\n  </style>\n</custom-style><dom-module id="lumo-typography">\n  <template>\n    <style>\n      html {\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size, var(--lumo-font-size-m));\n        line-height: var(--lumo-line-height-m);\n        -webkit-text-size-adjust: 100%;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      /* Cant combine with the above selector because that doesnt work in browsers without native shadow dom */\n      :host {\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size, var(--lumo-font-size-m));\n        line-height: var(--lumo-line-height-m);\n        -webkit-text-size-adjust: 100%;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      small,\n      [theme~="font-size-s"] {\n        font-size: var(--lumo-font-size-s);\n        line-height: var(--lumo-line-height-s);\n      }\n\n      [theme~="font-size-xs"] {\n        font-size: var(--lumo-font-size-xs);\n        line-height: var(--lumo-line-height-xs);\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        font-weight: 600;\n        line-height: var(--lumo-line-height-xs);\n        margin-top: 1.25em;\n      }\n\n      h1 {\n        font-size: var(--lumo-font-size-xxxl);\n        margin-bottom: 0.75em;\n      }\n\n      h2 {\n        font-size: var(--lumo-font-size-xxl);\n        margin-bottom: 0.5em;\n      }\n\n      h3 {\n        font-size: var(--lumo-font-size-xl);\n        margin-bottom: 0.5em;\n      }\n\n      h4 {\n        font-size: var(--lumo-font-size-l);\n        margin-bottom: 0.5em;\n      }\n\n      h5 {\n        font-size: var(--lumo-font-size-m);\n        margin-bottom: 0.25em;\n      }\n\n      h6 {\n        font-size: var(--lumo-font-size-xs);\n        margin-bottom: 0;\n        text-transform: uppercase;\n        letter-spacing: 0.03em;\n      }\n\n      p,\n      blockquote {\n        margin-top: 0.5em;\n        margin-bottom: 0.75em;\n      }\n\n      a {\n        text-decoration: none;\n      }\n\n      a:hover {\n        text-decoration: underline;\n      }\n\n      hr {\n        display: block;\n        align-self: stretch;\n        height: 1px;\n        border: 0;\n        padding: 0;\n        margin: var(--lumo-space-s) calc(var(--lumo-border-radius-m) / 2);\n        background-color: var(--lumo-contrast-10pct);\n      }\n\n      blockquote {\n        border-left: 2px solid var(--lumo-contrast-30pct);\n      }\n\n      b,\n      strong {\n        font-weight: 600;\n      }\n\n      /* RTL specific styles */\n\n      blockquote[dir="rtl"] {\n        border-left: none;\n        border-right: 2px solid var(--lumo-contrast-30pct);\n      }\n\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(Zo.content),String(Math.random()).slice(2),window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:t=>t}),(()=>{try{const t={get capture(){return!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})(),"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.0"),void 0===window.ShadyCSS||void 0===window.ShadyCSS.prepareTemplateDom&&console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),window.JSCompiler_renameProperty=t=>t;const Xo=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,tl=Symbol();class el{constructor(t,e){if(e!==tl)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return void 0===this._styleSheet&&(Xo?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const il=(t,...e)=>{const i=e.reduce(((e,i,s)=>e+(t=>{if(t instanceof el)return t.cssText;if("number"==typeof t)return t;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${t}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(i)+t[s+1]),t[0]);return new el(i,tl)};(window.litElementVersions||(window.litElementVersions=[])).push("2.5.0");let sl=0;const rl={},nl=(t,e,i)=>{const s=i&&i.moduleId||"custom-style-module-"+sl++;Array.isArray(e)||(e=e?[e]:[]),e.forEach((t=>{if(!(t instanceof el))throw new Error("An item in styles is not of type CSSResult. Use `unsafeCSS` or `css`.");if(!rl[t]){const e=document.createElement("dom-module");e.innerHTML=`\n        <template>\n          <style>${t.toString()}</style>\n        </template>\n      `;const i="custom-style-module-"+sl++;e.register(i),rl[t]=i}}));const r=document.createElement("dom-module");if(t){const e=window.customElements&&window.customElements.get(t);e&&e.hasOwnProperty("__finalized")&&console.warn(`The custom element definition for "${t}"\n      was finalized before a style module was registered.\n      Make sure to add component specific style modules before\n      importing the corresponding custom element.`),r.setAttribute("theme-for",t)}r.innerHTML=`\n    <template>\n      ${(i&&i.include||[]).map((t=>`<style include=${t}></style>`))}\n      ${e.map((t=>`<style include=${rl[t]}></style>`))}\n    </template>\n  `,r.register(s)};nl("vaadin-checkbox",il`
    :host {
      -webkit-tap-highlight-color: transparent;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
      cursor: default;
      outline: none;
    }

    [part='label']:not([empty]) {
      margin: 0.1875em 0.875em 0.1875em 0.375em;
    }

    [part='checkbox'] {
      width: calc(1em + 2px);
      height: calc(1em + 2px);
      margin: 0.1875em;
      position: relative;
      border-radius: var(--lumo-border-radius-s);
      background-color: var(--lumo-contrast-20pct);
      transition: transform 0.2s cubic-bezier(0.12, 0.32, 0.54, 2), background-color 0.15s;
      pointer-events: none;
      line-height: 1.2;
    }

    :host([indeterminate]) [part='checkbox'],
    :host([checked]) [part='checkbox'] {
      background-color: var(--lumo-primary-color);
    }

    /* Needed to align the checkbox nicely on the baseline */
    [part='checkbox']::before {
      content: '\\2003';
    }

    /* Checkmark */
    [part='checkbox']::after {
      content: '';
      display: inline-block;
      width: 0;
      height: 0;
      border: 0 solid var(--lumo-primary-contrast-color);
      border-width: 0.1875em 0 0 0.1875em;
      box-sizing: border-box;
      transform-origin: 0 0;
      position: absolute;
      top: 0.8125em;
      left: 0.5em;
      transform: scale(0.55) rotate(-135deg);
      opacity: 0;
    }

    :host([checked]) [part='checkbox']::after {
      opacity: 1;
      width: 0.625em;
      height: 1.0625em;
    }

    /* Indeterminate checkmark */
    :host([indeterminate]) [part='checkbox']::after {
      transform: none;
      opacity: 1;
      top: 45%;
      height: 10%;
      left: 22%;
      right: 22%;
      width: auto;
      border: 0;
      background-color: var(--lumo-primary-contrast-color);
      transition: opacity 0.25s;
    }

    /* Focus ring */
    :host([focus-ring]) [part='checkbox'] {
      box-shadow: 0 0 0 3px var(--lumo-primary-color-50pct);
    }

    /* Disabled */
    :host([disabled]) {
      pointer-events: none;
      color: var(--lumo-disabled-text-color);
    }

    :host([disabled]) [part='label'] ::slotted(*) {
      color: inherit;
    }

    :host([disabled]) [part='checkbox'] {
      background-color: var(--lumo-contrast-10pct);
    }

    :host([disabled]) [part='checkbox']::after {
      border-color: var(--lumo-contrast-30pct);
    }

    :host([indeterminate][disabled]) [part='checkbox']::after {
      background-color: var(--lumo-contrast-30pct);
    }

    /* RTL specific styles */
    :host([dir='rtl']) [part='label']:not([empty]) {
      margin: 0.1875em 0.375em 0.1875em 0.875em;
    }

    /* Transition the checkmark if activated with the mouse (disabled for grid select-all this way) */
    :host(:hover) [part='checkbox']::after {
      transition: width 0.1s, height 0.25s;
    }

    /* Used for activation "halo" */
    [part='checkbox']::before {
      color: transparent;
      display: inline-block;
      width: 100%;
      height: 100%;
      border-radius: inherit;
      background-color: inherit;
      transform: scale(1.4);
      opacity: 0;
      transition: transform 0.1s, opacity 0.8s;
    }

    /* Hover */
    :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part='checkbox'] {
      background-color: var(--lumo-contrast-30pct);
    }

    /* Disable hover for touch devices */
    @media (pointer: coarse) {
      :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part='checkbox'] {
        background-color: var(--lumo-contrast-20pct);
      }
    }

    /* Active */
    :host([active]) [part='checkbox'] {
      transform: scale(0.9);
      transition-duration: 0.05s;
    }

    :host([active][checked]) [part='checkbox'] {
      transform: scale(1.1);
    }

    :host([active]:not([checked])) [part='checkbox']::before {
      transition-duration: 0.01s, 0.01s;
      transform: scale(0);
      opacity: 0.4;
    }
  `,{moduleId:"lumo-checkbox"});let ol=0;const ll=function(t){let e=t.__mixinApplications;e||(e=new WeakMap,t.__mixinApplications=e);let i=ol++;return function(s){let r=s.__mixinSet;if(r&&r[i])return s;let n=e,o=n.get(s);if(!o){o=t(s),n.set(s,o);let e=Object.create(o.__mixinSet||r||null);e[i]=!0,o.__mixinSet=e}return o}},al=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?t=>ShadyDOM.patch(t):t=>t;function hl(t){return t.indexOf(".")>=0}function ul(t){let e=t.indexOf(".");return-1===e?t:t.slice(0,e)}function cl(t,e){return 0===t.indexOf(e+".")}function dl(t,e){return 0===e.indexOf(t+".")}function pl(t,e,i){return e+i.slice(t.length)}function ml(t){if(Array.isArray(t)){let e=[];for(let i=0;i<t.length;i++){let s=t[i].toString().split(".");for(let t=0;t<s.length;t++)e.push(s[t])}return e.join(".")}return t}function fl(t){return Array.isArray(t)?ml(t).split("."):t.toString().split(".")}function gl(t,e,i){let s=t,r=fl(e);for(let t=0;t<r.length;t++){if(!s)return;s=s[r[t]]}return i&&(i.path=r.join(".")),s}function vl(t,e,i){let s=t,r=fl(e),n=r[r.length-1];if(r.length>1){for(let t=0;t<r.length-1;t++)if(s=s[r[t]],!s)return;s[n]=i}else s[e]=i;return r.join(".")}const yl={},wl=/-[a-z]/g,bl=/([A-Z])/g;function _l(t){return yl[t]||(yl[t]=t.indexOf("-")<0?t:t.replace(wl,(t=>t[1].toUpperCase())))}function Al(t){return yl[t]||(yl[t]=t.replace(bl,"-$1").toLowerCase())}let xl=0,Sl=0,Cl=[],kl=0,Il=!1,Ml=document.createTextNode("");new window.MutationObserver((function(){Il=!1;const t=Cl.length;for(let e=0;e<t;e++){let t=Cl[e];if(t)try{t()}catch(t){setTimeout((()=>{throw t}))}}Cl.splice(0,t),Sl+=t})).observe(Ml,{characterData:!0});const Tl={after:t=>({run:e=>window.setTimeout(e,t),cancel(t){window.clearTimeout(t)}}),run:(t,e)=>window.setTimeout(t,e),cancel(t){window.clearTimeout(t)}},El={run:t=>window.requestAnimationFrame(t),cancel(t){window.cancelAnimationFrame(t)}},jl={run:t=>window.requestIdleCallback?window.requestIdleCallback(t):window.setTimeout(t,16),cancel(t){window.cancelIdleCallback?window.cancelIdleCallback(t):window.clearTimeout(t)}},Ol={run:t=>(Il||(Il=!0,Ml.textContent=kl++),Cl.push(t),xl++),cancel(t){const e=t-Sl;if(e>=0){if(!Cl[e])throw new Error("invalid async handle: "+t);Cl[e]=null}}},Ll=Ol,Fl=ll((t=>class extends t{static createProperties(t){const e=this.prototype;for(let i in t)i in e||e._createPropertyAccessor(i)}static attributeNameForProperty(t){return t.toLowerCase()}static typeForProperty(t){}_createPropertyAccessor(t,e){this._addPropertyToAttributeMap(t),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[t]||(this.__dataHasAccessor[t]=!0,this._definePropertyAccessor(t,e))}_addPropertyToAttributeMap(t){this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes));let e=this.__dataAttributes[t];return e||(e=this.constructor.attributeNameForProperty(t),this.__dataAttributes[e]=t),e}_definePropertyAccessor(t,e){Object.defineProperty(this,t,{get(){return this.__data[t]},set:e?function(){}:function(e){this._setPendingProperty(t,e,!0)&&this._invalidateProperties()}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__dataCounter=0,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let t in this.__dataHasAccessor)this.hasOwnProperty(t)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[t]=this[t],delete this[t])}_initializeInstanceProperties(t){Object.assign(this,t)}_setProperty(t,e){this._setPendingProperty(t,e)&&this._invalidateProperties()}_getProperty(t){return this.__data[t]}_setPendingProperty(t,e,i){let s=this.__data[t],r=this._shouldPropertyChange(t,e,s);return r&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(t in this.__dataOld)&&(this.__dataOld[t]=s),this.__data[t]=e,this.__dataPending[t]=e),r}_isPropertyPending(t){return!(!this.__dataPending||!this.__dataPending.hasOwnProperty(t))}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,Ll.run((()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())})))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){this.__dataCounter++;const t=this.__data,e=this.__dataPending,i=this.__dataOld;this._shouldPropertiesChange(t,e,i)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(t,e,i)),this.__dataCounter--}_shouldPropertiesChange(t,e,i){return Boolean(e)}_propertiesChanged(t,e,i){}_shouldPropertyChange(t,e,i){return i!==e&&(i==i||e==e)}attributeChangedCallback(t,e,i,s){e!==i&&this._attributeToProperty(t,i),super.attributeChangedCallback&&super.attributeChangedCallback(t,e,i,s)}_attributeToProperty(t,e,i){if(!this.__serializing){const s=this.__dataAttributes,r=s&&s[t]||t;this[r]=this._deserializeValue(e,i||this.constructor.typeForProperty(r))}}_propertyToAttribute(t,e,i){this.__serializing=!0,this._valueToNodeAttribute(this,i=arguments.length<3?this[t]:i,e||this.constructor.attributeNameForProperty(t)),this.__serializing=!1}_valueToNodeAttribute(t,e,i){const s=this._serializeValue(e);"class"!==i&&"name"!==i&&"slot"!==i||(t=al(t)),void 0===s?t.removeAttribute(i):t.setAttribute(i,s)}_serializeValue(t){return"boolean"==typeof t?t?"":void 0:null!=t?t.toString():void 0}_deserializeValue(t,e){switch(e){case Boolean:return null!==t;case Number:return Number(t);default:return t}}})),zl={};let Pl=HTMLElement.prototype;for(;Pl;){let t=Object.getOwnPropertyNames(Pl);for(let e=0;e<t.length;e++)zl[t[e]]=!0;Pl=Object.getPrototypeOf(Pl)}const Rl=ll((t=>{const e=Fl(t);return class extends e{static createPropertiesForAttributes(){let t=this.observedAttributes;for(let e=0;e<t.length;e++)this.prototype._createPropertyAccessor(_l(t[e]))}static attributeNameForProperty(t){return Al(t)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(t){for(let e in t)this._setProperty(e,t[e])}_ensureAttribute(t,e){this.hasAttribute(t)||this._valueToNodeAttribute(this,e,t)}_serializeValue(t){if("object"==typeof t){if(t instanceof Date)return t.toString();if(t)try{return JSON.stringify(t)}catch(t){return""}}return super._serializeValue(t)}_deserializeValue(t,e){let i;switch(e){case Object:try{i=JSON.parse(t)}catch(e){i=t}break;case Array:try{i=JSON.parse(t)}catch(e){i=null,console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${t}`)}break;case Date:i=isNaN(t)?String(t):Number(t),i=new Date(i);break;default:i=super._deserializeValue(t,e)}return i}_definePropertyAccessor(t,e){(function(t,e){if(!zl[e]){let i=t[e];void 0!==i&&(t.__data?t._setPendingProperty(e,i):(t.__dataProto?t.hasOwnProperty(JSCompiler_renameProperty("__dataProto",t))||(t.__dataProto=Object.create(t.__dataProto)):t.__dataProto={},t.__dataProto[e]=i))}})(this,t),super._definePropertyAccessor(t,e)}_hasAccessor(t){return this.__dataHasAccessor&&this.__dataHasAccessor[t]}_isPropertyPending(t){return Boolean(this.__dataPending&&t in this.__dataPending)}}})),Nl={"dom-if":!0,"dom-repeat":!0};let Bl=!1,Dl=!1;function Gl(t){let e=t.getAttribute("is");if(e&&Nl[e]){let i=t;for(i.removeAttribute("is"),t=i.ownerDocument.createElement(e),i.parentNode.replaceChild(t,i),t.appendChild(i);i.attributes.length;)t.setAttribute(i.attributes[0].name,i.attributes[0].value),i.removeAttribute(i.attributes[0].name)}return t}function Vl(t,e){let i=e.parentInfo&&Vl(t,e.parentInfo);if(!i)return t;for(let t=i.firstChild,s=0;t;t=t.nextSibling)if(e.parentIndex===s++)return t}function $l(t,e,i,s){s.id&&(e[s.id]=i)}function ql(t,e,i){if(i.events&&i.events.length)for(let s,r=0,n=i.events;r<n.length&&(s=n[r]);r++)t._addMethodEventListenerToNode(e,s.name,s.value,t)}function Hl(t,e,i,s){i.templateInfo&&(e._templateInfo=i.templateInfo,e._parentTemplateInfo=s)}const Ul=ll((t=>class extends t{static _parseTemplate(t,e){if(!t._templateInfo){let i=t._templateInfo={};i.nodeInfoList=[],i.nestedTemplate=Boolean(e),i.stripWhiteSpace=e&&e.stripWhiteSpace||t.hasAttribute("strip-whitespace"),this._parseTemplateContent(t,i,{parent:null})}return t._templateInfo}static _parseTemplateContent(t,e,i){return this._parseTemplateNode(t.content,e,i)}static _parseTemplateNode(t,e,i){let s=!1,r=t;return"template"!=r.localName||r.hasAttribute("preserve-content")?"slot"===r.localName&&(e.hasInsertionPoint=!0):s=this._parseTemplateNestedTemplate(r,e,i)||s,function(t){(function(){if(!Bl){Bl=!0;const t=document.createElement("textarea");t.placeholder="a",Dl=t.placeholder===t.textContent}return Dl})()&&"textarea"===t.localName&&t.placeholder&&t.placeholder===t.textContent&&(t.textContent=null)}(r),r.firstChild&&this._parseTemplateChildNodes(r,e,i),r.hasAttributes&&r.hasAttributes()&&(s=this._parseTemplateNodeAttributes(r,e,i)||s),s||i.noted}static _parseTemplateChildNodes(t,e,i){if("script"!==t.localName&&"style"!==t.localName)for(let s,r=t.firstChild,n=0;r;r=s){if("template"==r.localName&&(r=Gl(r)),s=r.nextSibling,r.nodeType===Node.TEXT_NODE){let i=s;for(;i&&i.nodeType===Node.TEXT_NODE;)r.textContent+=i.textContent,s=i.nextSibling,t.removeChild(i),i=s;if(e.stripWhiteSpace&&!r.textContent.trim()){t.removeChild(r);continue}}let o={parentIndex:n,parentInfo:i};this._parseTemplateNode(r,e,o)&&(o.infoIndex=e.nodeInfoList.push(o)-1),r.parentNode&&n++}}static _parseTemplateNestedTemplate(t,e,i){let s=t,r=this._parseTemplate(s,e);return(r.content=s.content.ownerDocument.createDocumentFragment()).appendChild(s.content),i.templateInfo=r,!0}static _parseTemplateNodeAttributes(t,e,i){let s=!1,r=Array.from(t.attributes);for(let n,o=r.length-1;n=r[o];o--)s=this._parseTemplateNodeAttribute(t,e,i,n.name,n.value)||s;return s}static _parseTemplateNodeAttribute(t,e,i,s,r){return"on-"===s.slice(0,3)?(t.removeAttribute(s),i.events=i.events||[],i.events.push({name:s.slice(3),value:r}),!0):"id"===s&&(i.id=r,!0)}static _contentForTemplate(t){let e=t._templateInfo;return e&&e.content||t.content}_stampTemplate(t,e){t&&!t.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t);let i=(e=e||this.constructor._parseTemplate(t)).nodeInfoList,s=document.importNode(e.content||t.content,!0);s.__noInsertionPoint=!e.hasInsertionPoint;let r=s.nodeList=new Array(i.length);s.$={};for(let t,n=0,o=i.length;n<o&&(t=i[n]);n++){let i=r[n]=Vl(s,t);$l(0,s.$,i,t),Hl(0,i,t,e),ql(this,i,t)}return s=s,s}_addMethodEventListenerToNode(t,e,i,s){let r=function(t,e,i){return t=t._methodHost||t,function(e){t[i]?t[i](e,e.detail):console.warn("listener method `"+i+"` not defined")}}(s=s||t,0,i);return this._addEventListenerToNode(t,e,r),r}_addEventListenerToNode(t,e,i){t.addEventListener(e,i)}_removeEventListenerFromNode(t,e,i){t.removeEventListener(e,i)}}));let Wl=0;const Jl=[],Yl={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},Kl="__computeInfo",Ql=/[A-Z]/;function Zl(t,e,i){let s=t[e];if(s){if(!t.hasOwnProperty(e)&&(s=t[e]=Object.create(t[e]),i))for(let t in s){let e=s[t],i=s[t]=Array(e.length);for(let t=0;t<e.length;t++)i[t]=e[t]}}else s=t[e]={};return s}function Xl(t,e,i,s,r,n){if(e){let o=!1;const l=Wl++;for(let a in i){let h=e[r?ul(a):a];if(h)for(let e,u=0,c=h.length;u<c&&(e=h[u]);u++)e.info&&e.info.lastRun===l||r&&!ea(a,e.trigger)||(e.info&&(e.info.lastRun=l),e.fn(t,a,i,s,e.info,r,n),o=!0)}return o}return!1}function ta(t,e,i,s,r,n,o,l){let a=!1,h=e[o?ul(s):s];if(h)for(let e,u=0,c=h.length;u<c&&(e=h[u]);u++)e.info&&e.info.lastRun===i||o&&!ea(s,e.trigger)||(e.info&&(e.info.lastRun=i),e.fn(t,s,r,n,e.info,o,l),a=!0);return a}function ea(t,e){if(e){let i=e.name;return i==t||!(!e.structured||!cl(i,t))||!(!e.wildcard||!dl(i,t))}return!0}function ia(t,e,i,s,r){let n="string"==typeof r.method?t[r.method]:r.method,o=r.property;n?n.call(t,t.__data[o],s[o]):r.dynamicFn||console.warn("observer method `"+r.method+"` not defined")}function sa(t,e,i){let s=ul(e);return s!==e&&(ra(t,Al(s)+"-changed",i[e],e),!0)}function ra(t,e,i,s){let r={value:i,queueProperty:!0};s&&(r.path=s),al(t).dispatchEvent(new CustomEvent(e,{detail:r}))}function na(t,e,i,s,r,n){let o=(n?ul(e):e)!=e?e:null,l=o?gl(t,o):t.__data[e];o&&void 0===l&&(l=i[e]),ra(t,r.eventName,l,o)}function oa(t,e,i,s,r){let n=t.__data[e];yo&&(n=yo(n,r.attrName,"attribute",t)),t._propertyToAttribute(e,r.attrName,n)}const la=(t,e,i)=>{let s=0,r=e.length-1,n=-1;for(;s<=r;){const o=s+r>>1,l=i.get(e[o].methodInfo)-i.get(t.methodInfo);if(l<0)s=o+1;else{if(!(l>0)){n=o;break}r=o-1}}n<0&&(n=r+1),e.splice(n,0,t)},aa=(t,e,i,s,r)=>{const n=e[r?ul(t):t];if(n)for(let e=0;e<n.length;e++){const o=n[e];o.info.lastRun===Wl||r&&!ea(t,o.trigger)||(o.info.lastRun=Wl,la(o.info,i,s))}};function ha(t,e,i,s,r){let n=ga(t,e,i,0,r);if(n===Jl)return!1;let o=r.methodInfo;return t.__dataHasAccessor&&t.__dataHasAccessor[o]?t._setPendingProperty(o,n,!0):(t[o]=n,!1)}function ua(t,e,i,s,r,n,o){i.bindings=i.bindings||[];let l={kind:s,target:r,parts:n,literal:o,isCompound:1!==n.length};if(i.bindings.push(l),function(t){return Boolean(t.target)&&"attribute"!=t.kind&&"text"!=t.kind&&!t.isCompound&&"{"===t.parts[0].mode}(l)){let{event:t,negate:e}=l.parts[0];l.listenerEvent=t||Al(r)+"-changed",l.listenerNegate=e}let a=e.nodeInfoList.length;for(let i=0;i<l.parts.length;i++){let s=l.parts[i];s.compoundIndex=i,ca(t,e,l,s,a)}}function ca(t,e,i,s,r){if(!s.literal)if("attribute"===i.kind&&"-"===i.target[0])console.warn("Cannot set attribute "+i.target+' because "-" is not a valid attribute starting character');else{let n=s.dependencies,o={index:r,binding:i,part:s,evaluator:t};for(let i=0;i<n.length;i++){let s=n[i];"string"==typeof s&&(s=xa(s),s.wildcard=!0),t._addTemplatePropertyEffect(e,s.rootProperty,{fn:da,info:o,trigger:s})}}}function da(t,e,i,s,r,n,o){let l=o[r.index],a=r.binding,h=r.part;if(n&&h.source&&e.length>h.source.length&&"property"==a.kind&&!a.isCompound&&l.__isPropertyEffectsClient&&l.__dataHasAccessor&&l.__dataHasAccessor[a.target]){let s=i[e];e=pl(h.source,a.target,e),l._setPendingPropertyOrPath(e,s,!1,!0)&&t._enqueueClient(l)}else{let o=r.evaluator._evaluateBinding(t,h,e,i,s,n);o!==Jl&&function(t,e,i,s,r){if(r=function(t,e,i,s){if(i.isCompound){let r=t.__dataCompoundStorage[i.target];r[s.compoundIndex]=e,e=r.join("")}return"attribute"!==i.kind&&("textContent"!==i.target&&("value"!==i.target||"input"!==t.localName&&"textarea"!==t.localName)||(e=null==e?"":e)),e}(e,r,i,s),yo&&(r=yo(r,i.target,i.kind,e)),"attribute"==i.kind)t._valueToNodeAttribute(e,r,i.target);else{let s=i.target;e.__isPropertyEffectsClient&&e.__dataHasAccessor&&e.__dataHasAccessor[s]?e[Yl.READ_ONLY]&&e[Yl.READ_ONLY][s]||e._setPendingProperty(s,r)&&t._enqueueClient(e):t._setUnmanagedPropertyToNode(e,s,r)}}(t,l,a,h,o)}}function pa(t,e){if(e.isCompound){let i=t.__dataCompoundStorage||(t.__dataCompoundStorage={}),s=e.parts,r=new Array(s.length);for(let t=0;t<s.length;t++)r[t]=s[t].literal;let n=e.target;i[n]=r,e.literal&&"property"==e.kind&&("className"===n&&(t=al(t)),t[n]=e.literal)}}function ma(t,e,i){if(i.listenerEvent){let s=i.parts[0];t.addEventListener(i.listenerEvent,(function(t){!function(t,e,i,s,r){let n,o=t.detail,l=o&&o.path;l?(s=pl(i,s,l),n=o&&o.value):n=t.currentTarget[i],n=r?!n:n,e[Yl.READ_ONLY]&&e[Yl.READ_ONLY][s]||!e._setPendingPropertyOrPath(s,n,!0,Boolean(l))||o&&o.queueProperty||e._invalidateProperties()}(t,e,i.target,s.source,s.negate)}))}}function fa(t,e,i,s,r,n){let o={methodName:e.methodName,args:e.args,methodInfo:r,dynamicFn:n=e.static||n&&("object"!=typeof n||n[e.methodName])};for(let r,n=0;n<e.args.length&&(r=e.args[n]);n++)r.literal||t._addPropertyEffect(r.rootProperty,i,{fn:s,info:o,trigger:r});return n&&t._addPropertyEffect(e.methodName,i,{fn:s,info:o}),o}function ga(t,e,i,s,r){let n=t._methodHost||t,o=n[r.methodName];if(o){let s=t._marshalArgs(r.args,e,i);return s===Jl?Jl:o.apply(n,s)}r.dynamicFn||console.warn("method `"+r.methodName+"` not defined")}const va=[],ya="(?:[a-zA-Z_$][\\w.:$\\-*]*)",wa="(?:("+ya+"|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*)",ba=new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?("+ya+"\\s*(?:\\(\\s*(?:(?:"+wa+"(?:,\\s*"+wa+")*)?)\\)\\s*)?)(?:]]|}})","g");function _a(t){let e="";for(let i=0;i<t.length;i++)e+=t[i].literal||"";return e}function Aa(t){let e=t.match(/([^\s]+?)\(([\s\S]*)\)/);if(e){let t={methodName:e[1],static:!0,args:va};return e[2].trim()?function(t,e){return e.args=t.map((function(t){let i=xa(t);return i.literal||(e.static=!1),i}),this),e}(e[2].replace(/\\,/g,"&comma;").split(","),t):t}return null}function xa(t){let e=t.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),i={name:e,value:"",literal:!1},s=e[0];switch("-"===s&&(s=e[1]),s>="0"&&s<="9"&&(s="#"),s){case"'":case'"':i.value=e.slice(1,-1),i.literal=!0;break;case"#":i.value=Number(e),i.literal=!0}return i.literal||(i.rootProperty=ul(e),i.structured=hl(e),i.structured&&(i.wildcard=".*"==e.slice(-2),i.wildcard&&(i.name=e.slice(0,-2)))),i}function Sa(t,e,i){let s=gl(t,i);return void 0===s&&(s=e[i]),s}function Ca(t,e,i,s){const r={indexSplices:s};Co&&!t._overrideLegacyUndefined&&(e.splices=r),t.notifyPath(i+".splices",r),t.notifyPath(i+".length",e.length),Co&&!t._overrideLegacyUndefined&&(r.indexSplices=[])}function ka(t,e,i,s,r,n){Ca(t,e,i,[{index:s,addedCount:r,removed:n,object:e,type:"splice"}])}const Ia=ll((t=>{const e=Ul(Rl(t));return class extends e{constructor(){super(),this.__isPropertyEffectsClient=!0}get PROPERTY_EFFECT_TYPES(){return Yl}_initializeProperties(){super._initializeProperties(),this._registerHost(),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_registerHost(){if(Ma.length){let t=Ma[Ma.length-1];t._enqueueClient(this),this.__dataHost=t}}_initializeProtoProperties(t){this.__data=Object.create(t),this.__dataPending=Object.create(t),this.__dataOld={}}_initializeInstanceProperties(t){let e=this[Yl.READ_ONLY];for(let i in t)e&&e[i]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[i]=this.__dataPending[i]=t[i])}_addPropertyEffect(t,e,i){this._createPropertyAccessor(t,e==Yl.READ_ONLY);let s=Zl(this,e,!0)[t];s||(s=this[e][t]=[]),s.push(i)}_removePropertyEffect(t,e,i){let s=Zl(this,e,!0)[t],r=s.indexOf(i);r>=0&&s.splice(r,1)}_hasPropertyEffect(t,e){let i=this[e];return Boolean(i&&i[t])}_hasReadOnlyEffect(t){return this._hasPropertyEffect(t,Yl.READ_ONLY)}_hasNotifyEffect(t){return this._hasPropertyEffect(t,Yl.NOTIFY)}_hasReflectEffect(t){return this._hasPropertyEffect(t,Yl.REFLECT)}_hasComputedEffect(t){return this._hasPropertyEffect(t,Yl.COMPUTE)}_setPendingPropertyOrPath(t,e,i,s){if(s||ul(Array.isArray(t)?t[0]:t)!==t){if(!s){let i=gl(this,t);if(!(t=vl(this,t,e))||!super._shouldPropertyChange(t,e,i))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(t,e,i))return function(t,e,i){let s=t.__dataLinkedPaths;if(s){let r;for(let n in s){let o=s[n];dl(n,e)?(r=pl(n,o,e),t._setPendingPropertyOrPath(r,i,!0,!0)):dl(o,e)&&(r=pl(o,n,e),t._setPendingPropertyOrPath(r,i,!0,!0))}}}(this,t,e),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[t])return this._setPendingProperty(t,e,i);this[t]=e}return!1}_setUnmanagedPropertyToNode(t,e,i){i===t[e]&&"object"!=typeof i||("className"===e&&(t=al(t)),t[e]=i)}_setPendingProperty(t,e,i){let s=this.__dataHasPaths&&hl(t);return!!this._shouldPropertyChange(t,e,(s?this.__dataTemp:this.__data)[t])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),t in this.__dataOld||(this.__dataOld[t]=this.__data[t]),s?this.__dataTemp[t]=e:this.__data[t]=e,this.__dataPending[t]=e,(s||this[Yl.NOTIFY]&&this[Yl.NOTIFY][t])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[t]=i),!0)}_setProperty(t,e){this._setPendingProperty(t,e,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(t){this.__dataPendingClients=this.__dataPendingClients||[],t!==this&&this.__dataPendingClients.push(t)}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let t=this.__dataPendingClients;if(t){this.__dataPendingClients=null;for(let e=0;e<t.length;e++){let i=t[e];i.__dataEnabled?i.__dataPending&&i._flushProperties():i._enableProperties()}}}_readyClients(){this.__enableOrFlushClients()}setProperties(t,e){for(let i in t)!e&&this[Yl.READ_ONLY]&&this[Yl.READ_ONLY][i]||this._setPendingPropertyOrPath(i,t[i],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(t,e,i){let s,r=this.__dataHasPaths;this.__dataHasPaths=!1,function(t,e,i,s){let r=t[Yl.COMPUTE];if(r)if(ko){Wl++;const n=function(t){let e=t.constructor.__orderedComputedDeps;if(!e){e=new Map;const i=t[Yl.COMPUTE];let s,{counts:r,ready:n,total:o}=function(t){const e=t[Kl],i={},s=t[Yl.COMPUTE],r=[];let n=0;for(let t in e){const s=e[t];n+=i[t]=s.args.filter((t=>!t.literal)).length+(s.dynamicFn?1:0)}for(let t in s)e[t]||r.push(t);return{counts:i,ready:r,total:n}}(t);for(;s=n.shift();){e.set(s,e.size);const t=i[s];t&&t.forEach((t=>{const e=t.info.methodInfo;--o,0==--r[e]&&n.push(e)}))}0!==o&&console.warn(`Computed graph for ${t.localName} incomplete; circular?`),t.constructor.__orderedComputedDeps=e}return e}(t),o=[];for(let t in e)aa(t,r,o,n,s);let l;for(;l=o.shift();)ha(t,"",e,0,l)&&aa(l.methodInfo,r,o,n,s);Object.assign(i,t.__dataOld),Object.assign(e,t.__dataPending),t.__dataPending=null}else{let n=e;for(;Xl(t,r,n,i,s);)Object.assign(i,t.__dataOld),Object.assign(e,t.__dataPending),n=t.__dataPending,t.__dataPending=null}}(this,e,i,r),s=this.__dataToNotify,this.__dataToNotify=null,this._propagatePropertyChanges(e,i,r),this._flushClients(),Xl(this,this[Yl.REFLECT],e,i,r),Xl(this,this[Yl.OBSERVE],e,i,r),s&&function(t,e,i,s,r){let n,o,l=t[Yl.NOTIFY],a=Wl++;for(let o in e)e[o]&&(l&&ta(t,l,a,o,i,s,r)||r&&sa(t,o,i))&&(n=!0);n&&(o=t.__dataHost)&&o._invalidateProperties&&o._invalidateProperties()}(this,s,e,i,r),1==this.__dataCounter&&(this.__dataTemp={})}_propagatePropertyChanges(t,e,i){this[Yl.PROPAGATE]&&Xl(this,this[Yl.PROPAGATE],t,e,i),this.__templateInfo&&this._runEffectsForTemplate(this.__templateInfo,t,e,i)}_runEffectsForTemplate(t,e,i,s){const r=(e,s)=>{Xl(this,t.propertyEffects,e,i,s,t.nodeList);for(let r=t.firstChild;r;r=r.nextSibling)this._runEffectsForTemplate(r,e,i,s)};t.runEffects?t.runEffects(r,e,s):r(e,s)}linkPaths(t,e){t=ml(t),e=ml(e),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[t]=e}unlinkPaths(t){t=ml(t),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[t]}notifySplices(t,e){let i={path:""};Ca(this,gl(this,t,i),i.path,e)}get(t,e){return gl(e||this,t)}set(t,e,i){i?vl(i,t,e):this[Yl.READ_ONLY]&&this[Yl.READ_ONLY][t]||this._setPendingPropertyOrPath(t,e,!0)&&this._invalidateProperties()}push(t,...e){let i={path:""},s=gl(this,t,i),r=s.length,n=s.push(...e);return e.length&&ka(this,s,i.path,r,e.length,[]),n}pop(t){let e={path:""},i=gl(this,t,e),s=Boolean(i.length),r=i.pop();return s&&ka(this,i,e.path,i.length,0,[r]),r}splice(t,e,i,...s){let r,n={path:""},o=gl(this,t,n);return e<0?e=o.length-Math.floor(-e):e&&(e=Math.floor(e)),r=2===arguments.length?o.splice(e):o.splice(e,i,...s),(s.length||r.length)&&ka(this,o,n.path,e,s.length,r),r}shift(t){let e={path:""},i=gl(this,t,e),s=Boolean(i.length),r=i.shift();return s&&ka(this,i,e.path,0,0,[r]),r}unshift(t,...e){let i={path:""},s=gl(this,t,i),r=s.unshift(...e);return e.length&&ka(this,s,i.path,0,e.length,[]),r}notifyPath(t,e){let i;if(1==arguments.length){let s={path:""};e=gl(this,t,s),i=s.path}else i=Array.isArray(t)?ml(t):t;this._setPendingPropertyOrPath(i,e,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(t,e){this._addPropertyEffect(t,Yl.READ_ONLY),e&&(this["_set"+function(t){return t[0].toUpperCase()+t.substring(1)}(t)]=function(e){this._setProperty(t,e)})}_createPropertyObserver(t,e,i){let s={property:t,method:e,dynamicFn:Boolean(i)};this._addPropertyEffect(t,Yl.OBSERVE,{fn:ia,info:s,trigger:{name:t}}),i&&this._addPropertyEffect(e,Yl.OBSERVE,{fn:ia,info:s,trigger:{name:e}})}_createMethodObserver(t,e){let i=Aa(t);if(!i)throw new Error("Malformed observer expression '"+t+"'");fa(this,i,Yl.OBSERVE,ga,null,e)}_createNotifyingProperty(t){this._addPropertyEffect(t,Yl.NOTIFY,{fn:na,info:{eventName:Al(t)+"-changed",property:t}})}_createReflectedProperty(t){let e=this.constructor.attributeNameForProperty(t);"-"===e[0]?console.warn("Property "+t+" cannot be reflected to attribute "+e+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(t,Yl.REFLECT,{fn:oa,info:{attrName:e}})}_createComputedProperty(t,e,i){let s=Aa(e);if(!s)throw new Error("Malformed computed expression '"+e+"'");const r=fa(this,s,Yl.COMPUTE,ha,t,i);Zl(this,Kl)[t]=r}_marshalArgs(t,e,i){const s=this.__data,r=[];for(let n=0,o=t.length;n<o;n++){let{name:o,structured:l,wildcard:a,value:h,literal:u}=t[n];if(!u)if(a){const t=dl(o,e),r=Sa(s,i,t?e:o);h={path:t?e:o,value:r,base:t?gl(s,o):r}}else h=l?Sa(s,i,o):s[o];if(Co&&!this._overrideLegacyUndefined&&void 0===h&&t.length>1)return Jl;r[n]=h}return r}static addPropertyEffect(t,e,i){this.prototype._addPropertyEffect(t,e,i)}static createPropertyObserver(t,e,i){this.prototype._createPropertyObserver(t,e,i)}static createMethodObserver(t,e){this.prototype._createMethodObserver(t,e)}static createNotifyingProperty(t){this.prototype._createNotifyingProperty(t)}static createReadOnlyProperty(t,e){this.prototype._createReadOnlyProperty(t,e)}static createReflectedProperty(t){this.prototype._createReflectedProperty(t)}static createComputedProperty(t,e,i){this.prototype._createComputedProperty(t,e,i)}static bindTemplate(t){return this.prototype._bindTemplate(t)}_bindTemplate(t,e){let i=this.constructor._parseTemplate(t),s=this.__preBoundTemplateInfo==i;if(!s)for(let t in i.propertyEffects)this._createPropertyAccessor(t);if(e)if(i=Object.create(i),i.wasPreBound=s,this.__templateInfo){const e=t._parentTemplateInfo||this.__templateInfo,s=e.lastChild;i.parent=e,e.lastChild=i,i.previousSibling=s,s?s.nextSibling=i:e.firstChild=i}else this.__templateInfo=i;else this.__preBoundTemplateInfo=i;return i}static _addTemplatePropertyEffect(t,e,i){(t.hostProps=t.hostProps||{})[e]=!0;let s=t.propertyEffects=t.propertyEffects||{};(s[e]=s[e]||[]).push(i)}_stampTemplate(t,e){e=e||this._bindTemplate(t,!0),Ma.push(this);let i=super._stampTemplate(t,e);if(Ma.pop(),e.nodeList=i.nodeList,!e.wasPreBound){let t=e.childNodes=[];for(let e=i.firstChild;e;e=e.nextSibling)t.push(e)}return i.templateInfo=e,function(t,e){let{nodeList:i,nodeInfoList:s}=e;if(s.length)for(let e=0;e<s.length;e++){let r=i[e],n=s[e].bindings;if(n)for(let e=0;e<n.length;e++){let i=n[e];pa(r,i),ma(r,t,i)}r.__dataHost=t}}(this,e),this.__dataClientsReady&&(this._runEffectsForTemplate(e,this.__data,null,!1),this._flushClients()),i}_removeBoundDom(t){const e=t.templateInfo,{previousSibling:i,nextSibling:s,parent:r}=e;i?i.nextSibling=s:r&&(r.firstChild=s),s?s.previousSibling=i:r&&(r.lastChild=i),e.nextSibling=e.previousSibling=null;let n=e.childNodes;for(let t=0;t<n.length;t++){let e=n[t];al(al(e).parentNode).removeChild(e)}}static _parseTemplateNode(t,i,s){let r=e._parseTemplateNode.call(this,t,i,s);if(t.nodeType===Node.TEXT_NODE){let e=this._parseBindings(t.textContent,i);e&&(t.textContent=_a(e)||" ",ua(this,i,s,"text","textContent",e),r=!0)}return r}static _parseTemplateNodeAttribute(t,i,s,r,n){let o=this._parseBindings(n,i);if(o){let e=r,n="property";Ql.test(r)?n="attribute":"$"==r[r.length-1]&&(r=r.slice(0,-1),n="attribute");let l=_a(o);return l&&"attribute"==n&&("class"==r&&t.hasAttribute("class")&&(l+=" "+t.getAttribute(r)),t.setAttribute(r,l)),"attribute"==n&&"disable-upgrade$"==e&&t.setAttribute(r,""),"input"===t.localName&&"value"===e&&t.setAttribute(e,""),t.removeAttribute(e),"property"===n&&(r=_l(r)),ua(this,i,s,n,r,o,l),!0}return e._parseTemplateNodeAttribute.call(this,t,i,s,r,n)}static _parseTemplateNestedTemplate(t,i,s){let r=e._parseTemplateNestedTemplate.call(this,t,i,s);const n=t.parentNode,o=s.templateInfo,l="dom-if"===n.localName;Io&&(l||"dom-repeat"===n.localName)&&(n.removeChild(t),(s=s.parentInfo).templateInfo=o,s.noted=!0,r=!1);let a=o.hostProps;if(Mo&&l)a&&(i.hostProps=Object.assign(i.hostProps||{},a),Io||(s.parentInfo.noted=!0));else{let t="{";for(let e in a)ua(this,i,s,"property","_host_"+e,[{mode:t,source:e,dependencies:[e],hostProp:!0}])}return r}static _parseBindings(t,e){let i,s=[],r=0;for(;null!==(i=ba.exec(t));){i.index>r&&s.push({literal:t.slice(r,i.index)});let n=i[1][0],o=Boolean(i[2]),l=i[3].trim(),a=!1,h="",u=-1;"{"==n&&(u=l.indexOf("::"))>0&&(h=l.substring(u+2),l=l.substring(0,u),a=!0);let c=Aa(l),d=[];if(c){let{args:t,methodName:i}=c;for(let e=0;e<t.length;e++){let i=t[e];i.literal||d.push(i)}let s=e.dynamicFns;(s&&s[i]||c.static)&&(d.push(i),c.dynamicFn=!0)}else d.push(l);s.push({source:l,mode:n,negate:o,customEvent:a,signature:c,dependencies:d,event:h}),r=ba.lastIndex}if(r&&r<t.length){let e=t.substring(r);e&&s.push({literal:e})}return s.length?s:null}static _evaluateBinding(t,e,i,s,r,n){let o;return o=e.signature?ga(t,i,s,0,e.signature):i!=e.source?gl(t,e.source):n&&hl(i)?gl(t,i):t.__data[i],e.negate&&(o=!o),o}}})),Ma=[],Ta=ll((t=>{const e=Fl(t);function i(t){const e=Object.getPrototypeOf(t);return e.prototype instanceof r?e:null}function s(t){if(!t.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",t))){let e=null;if(t.hasOwnProperty(JSCompiler_renameProperty("properties",t))){const i=t.properties;i&&(e=function(t){const e={};for(let i in t){const s=t[i];e[i]="function"==typeof s?{type:s}:s}return e}(i))}t.__ownProperties=e}return t.__ownProperties}class r extends e{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){const t=this._properties;this.__observedAttributes=t?Object.keys(t).map((t=>this.prototype._addPropertyToAttributeMap(t))):[]}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const t=i(this);t&&t.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const t=s(this);t&&this.createProperties(t)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const t=i(this);this.__properties=Object.assign({},t&&t._properties,s(this))}return this.__properties}static typeForProperty(t){const e=this._properties[t];return e&&e.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return r})),Ea=window.ShadyCSS&&window.ShadyCSS.cssBuild,ja=ll((t=>{const e=Ta(Ia(t));function i(t,e,i,s){i.computed&&(i.readOnly=!0),i.computed&&(t._hasReadOnlyEffect(e)?console.warn(`Cannot redefine computed property '${e}'.`):t._createComputedProperty(e,i.computed,s)),i.readOnly&&!t._hasReadOnlyEffect(e)?t._createReadOnlyProperty(e,!i.computed):!1===i.readOnly&&t._hasReadOnlyEffect(e)&&console.warn(`Cannot make readOnly property '${e}' non-readOnly.`),i.reflectToAttribute&&!t._hasReflectEffect(e)?t._createReflectedProperty(e):!1===i.reflectToAttribute&&t._hasReflectEffect(e)&&console.warn(`Cannot make reflected property '${e}' non-reflected.`),i.notify&&!t._hasNotifyEffect(e)?t._createNotifyingProperty(e):!1===i.notify&&t._hasNotifyEffect(e)&&console.warn(`Cannot make notify property '${e}' non-notify.`),i.observer&&t._createPropertyObserver(e,i.observer,s[i.observer]),t._addPropertyToAttributeMap(e)}return class extends e{static get polymerElementVersion(){return"3.4.1"}static _finalizeClass(){e._finalizeClass.call(this);const t=function(t){return t.hasOwnProperty(JSCompiler_renameProperty("__ownObservers",t))||(t.__ownObservers=t.hasOwnProperty(JSCompiler_renameProperty("observers",t))?t.observers:null),t.__ownObservers}(this);t&&this.createObservers(t,this._properties),this._prepareTemplate()}static _prepareTemplate(){let t=this.template;t&&("string"==typeof t?(console.error("template getter must return HTMLTemplateElement"),t=null):Ao||(t=t.cloneNode(!0))),this.prototype._template=t}static createProperties(t){for(let e in t)i(this.prototype,e,t[e],t)}static createObservers(t,e){const i=this.prototype;for(let s=0;s<t.length;s++)i._createMethodObserver(t[s],e)}static get template(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_template",this))){const t=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:void 0;this._template=void 0!==t?t:this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&function(t){let e=null;if(t&&(!bo||_o)&&(e=Po.import(t,"template"),bo&&!e))throw new Error(`strictTemplatePolicy: expecting dom-module or null template for ${t}`);return e}(this.is)||Object.getPrototypeOf(this.prototype).constructor.template}return this._template}static set template(t){this._template=t}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const t=this.importMeta;if(t)this._importPath=mo(t.url);else{const t=Po.import(this.is);this._importPath=t&&t.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}constructor(){super()}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=vo,this.importPath=this.constructor.importPath;let t=function(t){if(!t.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",t))){t.__propertyDefaults=null;let e=t._properties;for(let i in e){let s=e[i];"value"in s&&(t.__propertyDefaults=t.__propertyDefaults||{},t.__propertyDefaults[i]=s)}}return t.__propertyDefaults}(this.constructor);if(t)for(let e in t){let i=t[e];if(this._canApplyPropertyDefault(e)){let t="function"==typeof i.value?i.value.call(this):i.value;this._hasAccessor(e)?this._setPendingProperty(e,t,!0):this[e]=t}}}_canApplyPropertyDefault(t){return!this.hasOwnProperty(t)}static _processStyleText(t,e){return po(t,e)}static _finalizeTemplate(t){const e=this.prototype._template;if(e&&!e.__polymerFinalized){e.__polymerFinalized=!0;const i=this.importPath;(function(t,e,i,s){if(!Ea){const r=e.content.querySelectorAll("style"),n=Vo(e),o=function(t){let e=No(t);return e?$o(e):[]}(i),l=e.content.firstElementChild;for(let i=0;i<o.length;i++){let r=o[i];r.textContent=t._processStyleText(r.textContent,s),e.content.insertBefore(r,l)}let a=0;for(let e=0;e<n.length;e++){let i=n[e],o=r[a];o!==i?(i=i.cloneNode(!0),o.parentNode.insertBefore(i,o)):a++,i.textContent=t._processStyleText(i.textContent,s)}}if(window.ShadyCSS&&window.ShadyCSS.prepareTemplate(e,i),jo&&Ea&&go){const i=e.content.querySelectorAll("style");if(i){let e="";Array.from(i).forEach((t=>{e+=t.textContent,t.parentNode.removeChild(t)})),t._styleSheet=new CSSStyleSheet,t._styleSheet.replaceSync(e)}}})(this,e,t,i?co(i):""),this.prototype._bindTemplate(e)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(t){const e=al(this);if(e.attachShadow)return t?(e.shadowRoot||(e.attachShadow({mode:"open",shadyUpgradeFragment:t}),e.shadowRoot.appendChild(t),this.constructor._styleSheet&&(e.shadowRoot.adoptedStyleSheets=[this.constructor._styleSheet])),So&&window.ShadyDOM&&window.ShadyDOM.flushInitial(e.shadowRoot),e.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(t){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,t)}resolveUrl(t,e){return!e&&this.importPath&&(e=co(this.importPath)),co(t,e)}static _parseTemplateContent(t,i,s){return i.dynamicFns=i.dynamicFns||this._properties,e._parseTemplateContent.call(this,t,i,s)}static _addTemplatePropertyEffect(t,i,s){return!xo||i in this._properties||s.info.part.signature&&s.info.part.signature.static||s.info.part.hostProp||t.nestedTemplate||console.warn(`Property '${i}' used in template but not declared in 'properties'; attribute will not be observed.`),e._addTemplatePropertyEffect.call(this,t,i,s)}}}));class Oa{constructor(t){this.value=t.toString()}toString(){return this.value}}const La=function(t,...e){const i=document.createElement("template");return i.innerHTML=e.reduce(((e,i,s)=>e+function(t){if(t instanceof HTMLTemplateElement)return t.innerHTML;if(t instanceof Oa)return function(t){if(t instanceof Oa)return t.value;throw new Error(`non-literal value passed to Polymer's htmlLiteral function: ${t}`)}(t);throw new Error(`non-template value passed to Polymer's html function: ${t}`)}(i)+t[s+1]),t[0]),i},Fa=ja(HTMLElement);class za{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(t,e){this._asyncModule=t,this._callback=e,this._timer=this._asyncModule.run((()=>{this._timer=null,Pa.delete(this),this._callback()}))}cancel(){this.isActive()&&(this._cancelAsync(),Pa.delete(this))}_cancelAsync(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return null!=this._timer}static debounce(t,e,i){return t instanceof za?t._cancelAsync():t=new za,t.setConfig(e,i),t}}let Pa=new Set;const Ra=function(t){Pa.add(t)},Na=function(){const t=Boolean(Pa.size);return Pa.forEach((t=>{try{t.flush()}catch(t){setTimeout((()=>{throw t}))}})),t};let Ba="string"==typeof document.head.style.touchAction,Da="__polymerGestures",Ga="__polymerGesturesHandled",Va="__polymerGesturesTouchAction",$a=["mousedown","mousemove","mouseup","click"],qa=[0,1,4,2],Ha=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(t){return!1}}();function Ua(t){return $a.indexOf(t)>-1}let Wa=!1;function Ja(t){if(!Ua(t)&&"touchend"!==t)return Ba&&Wa&&wo?{passive:!0}:void 0}!function(){try{let t=Object.defineProperty({},"passive",{get(){Wa=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){}}();let Ya=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);const Ka=[],Qa={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0},Za={button:!0,command:!0,fieldset:!0,input:!0,keygen:!0,optgroup:!0,option:!0,select:!0,textarea:!0};function Xa(t){return Qa[t.localName]||!1}function th(t){let e=Array.prototype.slice.call(t.labels||[]);if(!e.length){e=[];let i=t.getRootNode();if(t.id){let s=i.querySelectorAll(`label[for = ${t.id}]`);for(let t=0;t<s.length;t++)e.push(s[t])}}return e}let eh=function(t){let e=t.sourceCapabilities;if((!e||e.firesTouchEvents)&&(t[Ga]={skip:!0},"click"===t.type)){let e=!1,i=lh(t);for(let t=0;t<i.length;t++){if(i[t].nodeType===Node.ELEMENT_NODE)if("label"===i[t].localName)Ka.push(i[t]);else if(Xa(i[t])){let s=th(i[t]);for(let t=0;t<s.length;t++)e=e||Ka.indexOf(s[t])>-1}if(i[t]===rh.mouse.target)return}if(e)return;t.preventDefault(),t.stopPropagation()}};function ih(t){let e=Ya?["click"]:$a;for(let i,s=0;s<e.length;s++)i=e[s],t?(Ka.length=0,document.addEventListener(i,eh,!0)):document.removeEventListener(i,eh,!0)}function sh(t){let e=t.type;if(!Ua(e))return!1;if("mousemove"===e){let e=void 0===t.buttons?1:t.buttons;return t instanceof window.MouseEvent&&!Ha&&(e=qa[t.which]||0),Boolean(1&e)}return 0===(void 0===t.button?0:t.button)}let rh={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function nh(t,e,i){t.movefn=e,t.upfn=i,document.addEventListener("mousemove",e),document.addEventListener("mouseup",i)}function oh(t){document.removeEventListener("mousemove",t.movefn),document.removeEventListener("mouseup",t.upfn),t.movefn=null,t.upfn=null}document.addEventListener("touchend",(function(t){rh.mouse.mouseIgnoreJob||ih(!0),rh.mouse.target=lh(t)[0],rh.mouse.mouseIgnoreJob=za.debounce(rh.mouse.mouseIgnoreJob,Tl.after(2500),(function(){ih(),rh.mouse.target=null,rh.mouse.mouseIgnoreJob=null}))}),!!Wa&&{passive:!0});const lh=window.ShadyDOM&&window.ShadyDOM.noPatch?window.ShadyDOM.composedPath:t=>t.composedPath&&t.composedPath()||[],ah={},hh=[];function uh(t){const e=lh(t);return e.length>0?e[0]:t.target}function ch(t){let e,i=t.type,s=t.currentTarget[Da];if(!s)return;let r=s[i];if(r){if(!t[Ga]&&(t[Ga]={},"touch"===i.slice(0,5))){let e=(t=t).changedTouches[0];if("touchstart"===i&&1===t.touches.length&&(rh.touch.id=e.identifier),rh.touch.id!==e.identifier)return;Ba||"touchstart"!==i&&"touchmove"!==i||function(t){let e=t.changedTouches[0],i=t.type;if("touchstart"===i)rh.touch.x=e.clientX,rh.touch.y=e.clientY,rh.touch.scrollDecided=!1;else if("touchmove"===i){if(rh.touch.scrollDecided)return;rh.touch.scrollDecided=!0;let i=function(t){let e="auto",i=lh(t);for(let t,s=0;s<i.length;s++)if(t=i[s],t[Va]){e=t[Va];break}return e}(t),s=!1,r=Math.abs(rh.touch.x-e.clientX),n=Math.abs(rh.touch.y-e.clientY);t.cancelable&&("none"===i?s=!0:"pan-x"===i?s=n>r:"pan-y"===i&&(s=r>n)),s?t.preventDefault():gh("track")}}(t)}if(e=t[Ga],!e.skip){for(let i,s=0;s<hh.length;s++)i=hh[s],r[i.name]&&!e[i.name]&&i.flow&&i.flow.start.indexOf(t.type)>-1&&i.reset&&i.reset();for(let s,n=0;n<hh.length;n++)s=hh[n],r[s.name]&&!e[s.name]&&(e[s.name]=!0,s[i](t))}}}function dh(t,e,i){return!!ah[e]&&(function(t,e,i){let s=ah[e],r=s.deps,n=s.name,o=t[Da];o||(t[Da]=o={});for(let e,i,s=0;s<r.length;s++)e=r[s],Ya&&Ua(e)&&"click"!==e||(i=o[e],i||(o[e]=i={_count:0}),0===i._count&&t.addEventListener(e,ch,Ja(e)),i[n]=(i[n]||0)+1,i._count=(i._count||0)+1);t.addEventListener(e,i),s.touchAction&&mh(t,s.touchAction)}(t,e,i),!0)}function ph(t){hh.push(t);for(let e=0;e<t.emits.length;e++)ah[t.emits[e]]=t}function mh(t,e){Ba&&t instanceof HTMLElement&&Ol.run((()=>{t.style.touchAction=e})),t[Va]=e}function fh(t,e,i){let s=new Event(e,{bubbles:!0,cancelable:!0,composed:!0});if(s.detail=i,al(t).dispatchEvent(s),s.defaultPrevented){let t=i.preventer||i.sourceEvent;t&&t.preventDefault&&t.preventDefault()}}function gh(t){let e=function(t){for(let e,i=0;i<hh.length;i++){e=hh[i];for(let i,s=0;s<e.emits.length;s++)if(i=e.emits[s],i===t)return e}return null}(t);e.info&&(e.info.prevent=!0)}function vh(t,e,i,s){e&&fh(e,t,{x:i.clientX,y:i.clientY,sourceEvent:i,preventer:s,prevent:function(t){return gh(t)}})}function yh(t,e,i){if(t.prevent)return!1;if(t.started)return!0;let s=Math.abs(t.x-e),r=Math.abs(t.y-i);return s>=5||r>=5}function wh(t,e,i){if(!e)return;let s,r=t.moves[t.moves.length-2],n=t.moves[t.moves.length-1],o=0;r&&(s=n.x-r.x,o=n.y-r.y),fh(e,"track",{state:t.state,x:i.clientX,y:i.clientY,dx:n.x-t.x,dy:n.y-t.y,ddx:s,ddy:o,sourceEvent:i,hover:function(){return function(t,e){let i=document.elementFromPoint(t,e),s=i;for(;s&&s.shadowRoot&&!window.ShadyDOM;){let r=s;if(s=s.shadowRoot.elementFromPoint(t,e),r===s)break;s&&(i=s)}return i}(i.clientX,i.clientY)}})}function bh(t,e,i){let s=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y),n=uh(i||e);!n||Za[n.localName]&&n.hasAttribute("disabled")||(isNaN(s)||isNaN(r)||s<=25&&r<=25||function(t){if("click"===t.type){if(0===t.detail)return!0;let e=uh(t);if(!e.nodeType||e.nodeType!==Node.ELEMENT_NODE)return!0;let i=e.getBoundingClientRect(),s=t.pageX,r=t.pageY;return!(s>=i.left&&s<=i.right&&r>=i.top&&r<=i.bottom)}return!1}(e))&&(t.prevent||fh(n,"tap",{x:e.clientX,y:e.clientY,sourceEvent:e,preventer:i}))}ph({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){oh(this.info)},mousedown:function(t){if(!sh(t))return;let e=uh(t),i=this;nh(this.info,(function(t){sh(t)||(vh("up",e,t),oh(i.info))}),(function(t){sh(t)&&vh("up",e,t),oh(i.info)})),vh("down",e,t)},touchstart:function(t){vh("down",uh(t),t.changedTouches[0],t)},touchend:function(t){vh("up",uh(t),t.changedTouches[0],t)}}),ph({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(t){this.moves.length>2&&this.moves.shift(),this.moves.push(t)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,oh(this.info)},mousedown:function(t){if(!sh(t))return;let e=uh(t),i=this,s=function(t){let s=t.clientX,r=t.clientY;yh(i.info,s,r)&&(i.info.state=i.info.started?"mouseup"===t.type?"end":"track":"start","start"===i.info.state&&gh("tap"),i.info.addMove({x:s,y:r}),sh(t)||(i.info.state="end",oh(i.info)),e&&wh(i.info,e,t),i.info.started=!0)};nh(this.info,s,(function(t){i.info.started&&s(t),oh(i.info)})),this.info.x=t.clientX,this.info.y=t.clientY},touchstart:function(t){let e=t.changedTouches[0];this.info.x=e.clientX,this.info.y=e.clientY},touchmove:function(t){let e=uh(t),i=t.changedTouches[0],s=i.clientX,r=i.clientY;yh(this.info,s,r)&&("start"===this.info.state&&gh("tap"),this.info.addMove({x:s,y:r}),wh(this.info,e,i),this.info.state="track",this.info.started=!0)},touchend:function(t){let e=uh(t),i=t.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:i.clientX,y:i.clientY}),wh(this.info,e,i))}}),ph({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},mousedown:function(t){sh(t)&&(this.info.x=t.clientX,this.info.y=t.clientY)},click:function(t){sh(t)&&bh(this.info,t)},touchstart:function(t){const e=t.changedTouches[0];this.info.x=e.clientX,this.info.y=e.clientY},touchend:function(t){bh(this.info,t.changedTouches[0],t)}});const _h=ll((t=>class extends t{_addEventListenerToNode(t,e,i){dh(t,e,i)||super._addEventListenerToNode(t,e,i)}_removeEventListenerFromNode(t,e,i){(function(t,e,i){return!!ah[e]&&(function(t,e,i){let s=ah[e],r=s.deps,n=s.name,o=t[Da];if(o)for(let e,i,s=0;s<r.length;s++)e=r[s],i=o[e],i&&i[n]&&(i[n]=(i[n]||1)-1,i._count=(i._count||1)-1,0===i._count&&t.removeEventListener(e,ch,Ja(e)));t.removeEventListener(e,i)}(t,e,i),!0)})(t,e,i)||super._removeEventListenerFromNode(t,e,i)}})),Ah=t=>class extends t{static get properties(){return{theme:{type:String,readOnly:!0}}}attributeChangedCallback(t,e,i){super.attributeChangedCallback(t,e,i),"theme"===t&&this._setTheme(i)}},xh=t=>class extends(Ah(t)){static finalize(){super.finalize();const t=this.prototype._template,e=this.template&&this.template.parentElement&&this.template.parentElement.id===this.is,i=Object.getPrototypeOf(this.prototype)._template;i&&!e&&Array.from(i.content.querySelectorAll("style[include]")).forEach((e=>{this._includeStyle(e.getAttribute("include"),t)})),this._includeMatchingThemes(t)}static _includeMatchingThemes(t){const e=Po.prototype.modules;let i=!1;const s=this.is+"-default-theme";Object.keys(e).sort(((t,e)=>{const i=0===t.indexOf("vaadin-"),s=0===e.indexOf("vaadin-"),r=["lumo-","material-"],n=r.filter((e=>0===t.indexOf(e))).length>0,o=r.filter((t=>0===e.indexOf(t))).length>0;return i!==s?i?-1:1:n!==o?n?-1:1:0})).forEach((r=>{if(r!==s){const s=e[r].getAttribute("theme-for");s&&s.split(" ").forEach((e=>{new RegExp("^"+e.split("*").join(".*")+"$").test(this.is)&&(i=!0,this._includeStyle(r,t))}))}})),!i&&e[s]&&this._includeStyle(s,t)}static _includeStyle(t,e){if(e&&!e.content.querySelector(`style[include="${t}"]`)){const i=document.createElement("style");i.setAttribute("include",t),e.content.appendChild(i)}}};let Sh=!1;window.addEventListener("keydown",(()=>{Sh=!0}),{capture:!0}),window.addEventListener("mousedown",(()=>{Sh=!1}),{capture:!0});const Ch=t=>class extends((t=>class extends t{static get properties(){var t={tabindex:{type:Number,value:0,reflectToAttribute:!0,observer:"_tabindexChanged"}};return window.ShadyDOM&&(t.tabIndex=t.tabindex),t}})(t)){static get properties(){return{autofocus:{type:Boolean},_previousTabIndex:{type:Number},disabled:{type:Boolean,observer:"_disabledChanged",reflectToAttribute:!0},_isShiftTabbing:{type:Boolean}}}ready(){this.addEventListener("focusin",(t=>{t.composedPath()[0]===this?this.contains(t.relatedTarget)||this._focus():-1===t.composedPath().indexOf(this.focusElement)||this.disabled||this._setFocused(!0)})),this.addEventListener("focusout",(()=>this._setFocused(!1))),super.ready();const t=t=>{t.composed||t.target.dispatchEvent(new CustomEvent(t.type,{bubbles:!0,composed:!0,cancelable:!1}))};this.shadowRoot.addEventListener("focusin",t),this.shadowRoot.addEventListener("focusout",t),this.addEventListener("keydown",(t=>{if(!t.defaultPrevented&&9===t.keyCode)if(t.shiftKey)this._isShiftTabbing=!0,HTMLElement.prototype.focus.apply(this),this._setFocused(!1),setTimeout((()=>this._isShiftTabbing=!1),0);else{const t=window.navigator.userAgent.match(/Firefox\/(\d\d\.\d)/);if(t&&parseFloat(t[1])>=63&&parseFloat(t[1])<66&&this.parentNode&&this.nextSibling){const t=document.createElement("input");t.style.position="absolute",t.style.opacity="0",t.tabIndex=this.tabIndex,this.parentNode.insertBefore(t,this.nextSibling),t.focus(),t.addEventListener("focusout",(()=>this.parentNode.removeChild(t)))}}})),this.autofocus&&!this.disabled&&window.requestAnimationFrame((()=>{this._focus(),this._setFocused(!0),this.setAttribute("focus-ring","")}))}disconnectedCallback(){super.disconnectedCallback(),this.hasAttribute("focused")&&this._setFocused(!1)}_setFocused(t){t?this.setAttribute("focused",""):this.removeAttribute("focused"),t&&Sh?this.setAttribute("focus-ring",""):this.removeAttribute("focus-ring")}get focusElement(){return window.console.warn(`Please implement the 'focusElement' property in <${this.localName}>`),this}_focus(){this.focusElement&&!this._isShiftTabbing&&(this.focusElement.focus(),this._setFocused(!0))}focus(){this.focusElement&&!this.disabled&&(this.focusElement.focus(),this._setFocused(!0))}blur(){this.focusElement&&(this.focusElement.blur(),this._setFocused(!1))}_disabledChanged(t){this.focusElement.disabled=t,t?(this.blur(),this._previousTabIndex=this.tabindex,this.tabindex=-1,this.setAttribute("aria-disabled","true")):(void 0!==this._previousTabIndex&&(this.tabindex=this._previousTabIndex),this.removeAttribute("aria-disabled"))}_tabindexChanged(t){void 0!==t&&(this.focusElement.tabIndex=t),this.disabled&&this.tabindex&&(-1!==this.tabindex&&(this._previousTabIndex=this.tabindex),this.tabindex=t=void 0),window.ShadyDOM&&this.setProperties({tabIndex:t,tabindex:t})}click(){this.disabled||super.click()}},kh=function(){let t,e;do{t=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),e=Na()}while(t||e)};class Ih{static detectScrollType(){const t=document.createElement("div");t.textContent="ABCD",t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t);let e="reverse";return t.scrollLeft>0?e="default":(t.scrollLeft=2,t.scrollLeft<2&&(e="negative")),document.body.removeChild(t),e}static getNormalizedScrollLeft(t,e,i){const{scrollLeft:s}=i;if("rtl"!==e||!t)return s;switch(t){case"negative":return i.scrollWidth-i.clientWidth+s;case"reverse":return i.scrollWidth-i.clientWidth-s}return s}static setNormalizedScrollLeft(t,e,i,s){if("rtl"===e&&t)switch(t){case"negative":i.scrollLeft=i.clientWidth-i.scrollWidth+s;break;case"reverse":i.scrollLeft=i.scrollWidth-i.clientWidth-s;break;default:i.scrollLeft=s}else i.scrollLeft=s}}const Mh=[];let Th;new MutationObserver((function(){const t=jh();Mh.forEach((e=>{Eh(e,t)}))})).observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]});const Eh=function(t,e){e?t.setAttribute("dir",e):t.removeAttribute("dir")},jh=function(){return document.documentElement.getAttribute("dir")},Oh=t=>class extends t{static get properties(){return{dir:{type:String,readOnly:!0}}}static finalize(){super.finalize(),Th||(Th=Ih.detectScrollType())}connectedCallback(){super.connectedCallback(),this.hasAttribute("dir")||(this.__subscribe(),Eh(this,jh()))}attributeChangedCallback(t,e,i){if(super.attributeChangedCallback(t,e,i),"dir"!==t)return;const s=i===jh()&&-1===Mh.indexOf(this),r=!i&&e&&-1===Mh.indexOf(this),n=i!==jh()&&e===jh();s||r?(this.__subscribe(),Eh(this,jh())):n&&this.__subscribe(!1)}disconnectedCallback(){super.disconnectedCallback(),this.__subscribe(!1),this.removeAttribute("dir")}__subscribe(t=!0){t?-1===Mh.indexOf(this)&&Mh.push(this):Mh.indexOf(this)>-1&&Mh.splice(Mh.indexOf(this),1)}__getNormalizedScrollLeft(t){return Ih.getNormalizedScrollLeft(Th,this.getAttribute("dir")||"ltr",t)}__setNormalizedScrollLeft(t,e){return Ih.setNormalizedScrollLeft(Th,this.getAttribute("dir")||"ltr",t,e)}},Lh=/\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,Fh=window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients;function zh(t,e){if("function"!=typeof t)return;const i=Lh.exec(t.toString());if(i)try{t=new Function(i[1])}catch(t){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",t)}return t(e)}window.Vaadin=window.Vaadin||{};function Ph(){}void 0===window.Vaadin.developmentMode&&(window.Vaadin.developmentMode=function(){try{return!(!localStorage.getItem("vaadin.developmentmode.force")&&(!(["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0)||(Fh?Fh&&Object.keys(Fh).map((t=>Fh[t])).filter((t=>t.productionMode)).length>0:zh((function(){return!0})))))}catch(t){return!1}}());const Rh=function(){return function(t,e){if(window.Vaadin.developmentMode)return zh(t,e)}(Ph)};let Nh;window.Vaadin||(window.Vaadin={}),window.Vaadin.registrations=window.Vaadin.registrations||[],window.Vaadin.developmentModeCallback=window.Vaadin.developmentModeCallback||{},window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]=function(){Rh&&Rh()};const Bh=new Set,Dh=t=>class extends(Oh(t)){static finalize(){super.finalize();const{is:t}=this;t&&!Bh.has(t)&&(window.Vaadin.registrations.push(this),Bh.add(t),window.Vaadin.developmentModeCallback&&(Nh=za.debounce(Nh,jl,(()=>{window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]()})),Ra(Nh)))}constructor(){super(),null===document.doctype&&console.warn('Vaadin components require the "standards mode" declaration. Please add <!DOCTYPE html> to the HTML document.')}};class Gh extends(Dh(Ch(xh(_h(Fa))))){static get template(){return La`
      <style>
        :host {
          display: inline-block;
        }

        :host([hidden]) {
          display: none !important;
        }

        label {
          display: inline-flex;
          align-items: baseline;
          outline: none;
        }

        [part='checkbox'] {
          position: relative;
          display: inline-block;
          flex: none;
        }

        input[type='checkbox'] {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          width: 100%;
          height: 100%;
          opacity: 0;
          cursor: inherit;
          margin: 0;
        }

        :host([disabled]) {
          -webkit-tap-highlight-color: transparent;
        }
      </style>

      <label>
        <span part="checkbox">
          <input
            type="checkbox"
            checked="{{checked::change}}"
            disabled$="[[disabled]]"
            indeterminate="{{indeterminate::change}}"
            role="presentation"
            tabindex="-1"
          />
        </span>

        <span part="label">
          <slot></slot>
        </span>
      </label>
    `}static get is(){return"vaadin-checkbox"}static get version(){return"3.0.0"}static get properties(){return{checked:{type:Boolean,value:!1,notify:!0,observer:"_checkedChanged",reflectToAttribute:!0},indeterminate:{type:Boolean,notify:!0,observer:"_indeterminateChanged",reflectToAttribute:!0,value:!1},value:{type:String,value:"on"},_nativeCheckbox:{type:Object}}}constructor(){super()}get name(){return this.checked?this._storedName:""}set name(t){this._storedName=t}ready(){super.ready(),this.setAttribute("role","checkbox"),this._nativeCheckbox=this.shadowRoot.querySelector('input[type="checkbox"]'),this.addEventListener("click",this._handleClick.bind(this)),this._addActiveListeners();const t=this.getAttribute("name");t&&(this.name=t),this.shadowRoot.querySelector('[part~="label"]').querySelector("slot").addEventListener("slotchange",this._updateLabelAttribute.bind(this)),this._updateLabelAttribute()}_updateLabelAttribute(){const t=this.shadowRoot.querySelector('[part~="label"]'),e=t.firstElementChild.assignedNodes();this._isAssignedNodesEmpty(e)?t.setAttribute("empty",""):t.removeAttribute("empty")}_isAssignedNodesEmpty(t){return 0===t.length||1==t.length&&t[0].nodeType==Node.TEXT_NODE&&""===t[0].textContent.trim()}_checkedChanged(t){this.setAttribute("aria-checked",this.indeterminate?"mixed":Boolean(t))}_indeterminateChanged(t){this.setAttribute("aria-checked",t?"mixed":this.checked)}_addActiveListeners(){this._addEventListenerToNode(this,"down",(t=>{this.__interactionsAllowed(t)&&this.setAttribute("active","")})),this._addEventListenerToNode(this,"up",(()=>this.removeAttribute("active"))),this.addEventListener("keydown",(t=>{this.__interactionsAllowed(t)&&32===t.keyCode&&(t.preventDefault(),this.setAttribute("active",""))})),this.addEventListener("keyup",(t=>{this.__interactionsAllowed(t)&&32===t.keyCode&&(t.preventDefault(),this._toggleChecked(),this.removeAttribute("active"),this.indeterminate&&(this.indeterminate=!1))}))}get focusElement(){return this.shadowRoot.querySelector("input")}__interactionsAllowed(t){return!this.disabled&&"a"!==t.target.localName}_handleClick(t){this.__interactionsAllowed(t)&&(this.indeterminate?(this.indeterminate=!1,t.preventDefault(),this._toggleChecked()):t.composedPath()[0]!==this._nativeCheckbox&&(t.preventDefault(),this._toggleChecked()))}_toggleChecked(){this.checked=!this.checked,this.dispatchEvent(new CustomEvent("change",{composed:!1,bubbles:!0}))}}customElements.define(Gh.is,Gh),nl("vaadin-grid",il`
    :host {
      font-family: var(--lumo-font-family);
      font-size: var(--lumo-font-size-m);
      line-height: var(--lumo-line-height-s);
      color: var(--lumo-body-text-color);
      background-color: var(--lumo-base-color);
      box-sizing: border-box;
      -webkit-text-size-adjust: 100%;
      -webkit-tap-highlight-color: transparent;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;

      /* For internal use only */
      --_lumo-grid-border-color: var(--lumo-contrast-20pct);
      --_lumo-grid-secondary-border-color: var(--lumo-contrast-10pct);
      --_lumo-grid-border-width: 1px;
      --_lumo-grid-selected-row-color: var(--lumo-primary-color-10pct);
    }

    /* No (outer) border */

    :host(:not([theme~='no-border'])) {
      border: var(--_lumo-grid-border-width) solid var(--_lumo-grid-border-color);
    }

    /* Cell styles */

    [part~='cell'] {
      min-height: var(--lumo-size-m);
      background-color: var(--lumo-base-color);
    }

    [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      cursor: default;
      padding: var(--lumo-space-xs) var(--lumo-space-m);
    }

    /* Apply row borders by default and introduce the "no-row-borders" variant */
    :host(:not([theme~='no-row-borders'])) [part~='cell']:not([part~='details-cell']) {
      border-top: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    /* Hide first body row top border */
    :host(:not([theme~='no-row-borders'])) [part='row'][first] [part~='cell']:not([part~='details-cell']) {
      border-top: 0;
      min-height: calc(var(--lumo-size-m) - var(--_lumo-grid-border-width));
    }

    /* Focus-ring */

    [part~='cell']:focus {
      outline: none;
    }

    :host([navigating]) [part~='cell']:focus::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);
    }

    /* Drag and Drop styles */
    :host([dragover])::after {
      content: '';
      position: absolute;
      z-index: 100;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);
    }

    [part~='row'][dragover] {
      z-index: 100 !important;
    }

    [part~='row'][dragover] [part~='cell'] {
      overflow: visible;
    }

    [part~='row'][dragover] [part~='cell']::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      height: calc(var(--_lumo-grid-border-width) + 2px);
      pointer-events: none;
      background: var(--lumo-primary-color-50pct);
    }

    :host([theme~='no-row-borders']) [dragover] [part~='cell']::after {
      height: 2px;
    }

    [part~='row'][dragover='below'] [part~='cell']::after {
      top: 100%;
      bottom: auto;
      margin-top: -1px;
    }

    [part~='row'][dragover='above'] [part~='cell']::after {
      top: auto;
      bottom: 100%;
      margin-bottom: -1px;
    }

    [part~='row'][details-opened][dragover='below'] [part~='cell']:not([part~='details-cell'])::after,
    [part~='row'][details-opened][dragover='above'] [part~='details-cell']::after {
      display: none;
    }

    [part~='row'][dragover][dragover='on-top'] [part~='cell']::after {
      height: 100%;
    }

    [part~='row'][dragstart] {
      /* Add bottom-space to the row so the drag number doesn't get clipped. Needed for IE/Edge */
      border-bottom: 100px solid transparent;
      z-index: 100 !important;
      opacity: 0.9;
    }

    [part~='row'][dragstart] [part~='cell'] {
      border: none !important;
      box-shadow: none !important;
    }

    [part~='row'][dragstart] [part~='cell'][last-column] {
      border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;
    }

    [part~='row'][dragstart] [part~='cell'][first-column] {
      border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);
    }

    [ios] [part~='row'][dragstart] [part~='cell'] {
      background: var(--lumo-primary-color-50pct);
    }

    #scroller:not([ios]) [part~='row'][dragstart]:not([dragstart=''])::after {
      display: block;
      position: absolute;
      left: var(--_grid-drag-start-x);
      top: var(--_grid-drag-start-y);
      z-index: 100;
      content: attr(dragstart);
      align-items: center;
      justify-content: center;
      box-sizing: border-box;
      padding: calc(var(--lumo-space-xs) * 0.8);
      color: var(--lumo-error-contrast-color);
      background-color: var(--lumo-error-color);
      border-radius: var(--lumo-border-radius-m);
      font-family: var(--lumo-font-family);
      font-size: var(--lumo-font-size-xxs);
      line-height: 1;
      font-weight: 500;
      text-transform: initial;
      letter-spacing: initial;
      min-width: calc(var(--lumo-size-s) * 0.7);
      text-align: center;
    }

    /* Headers and footers */

    [part~='header-cell'] ::slotted(vaadin-grid-cell-content),
    [part~='footer-cell'] ::slotted(vaadin-grid-cell-content),
    [part~='reorder-ghost'] {
      font-size: var(--lumo-font-size-s);
      font-weight: 500;
    }

    [part~='footer-cell'] ::slotted(vaadin-grid-cell-content) {
      font-weight: 400;
    }

    [part='row']:only-child [part~='header-cell'] {
      min-height: var(--lumo-size-xl);
    }

    /* Header borders */

    /* Hide first header row top border */
    :host(:not([theme~='no-row-borders'])) [part='row']:first-child [part~='header-cell'] {
      border-top: 0;
    }

    [part='row']:last-child [part~='header-cell'] {
      border-bottom: var(--_lumo-grid-border-width) solid transparent;
    }

    :host(:not([theme~='no-row-borders'])) [part='row']:last-child [part~='header-cell'] {
      border-bottom-color: var(--_lumo-grid-secondary-border-color);
    }

    /* Overflow uses a stronger border color */
    :host([overflow~='top']) [part='row']:last-child [part~='header-cell'] {
      border-bottom-color: var(--_lumo-grid-border-color);
    }

    /* Footer borders */

    [part='row']:first-child [part~='footer-cell'] {
      border-top: var(--_lumo-grid-border-width) solid transparent;
    }

    :host(:not([theme~='no-row-borders'])) [part='row']:first-child [part~='footer-cell'] {
      border-top-color: var(--_lumo-grid-secondary-border-color);
    }

    /* Overflow uses a stronger border color */
    :host([overflow~='bottom']) [part='row']:first-child [part~='footer-cell'] {
      border-top-color: var(--_lumo-grid-border-color);
    }

    /* Column reordering */

    :host([reordering]) [part~='cell'] {
      background: linear-gradient(var(--lumo-shade-20pct), var(--lumo-shade-20pct)) var(--lumo-base-color);
    }

    :host([reordering]) [part~='cell'][reorder-status='allowed'] {
      background: var(--lumo-base-color);
    }

    :host([reordering]) [part~='cell'][reorder-status='dragging'] {
      background: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct)) var(--lumo-base-color);
    }

    [part~='reorder-ghost'] {
      opacity: 0.85;
      box-shadow: var(--lumo-box-shadow-s);
      /* TODO Use the same styles as for the cell element (reorder-ghost copies styles from the cell element) */
      padding: var(--lumo-space-s) var(--lumo-space-m) !important;
    }

    /* Column resizing */

    [part='resize-handle'] {
      width: 3px;
      background-color: var(--lumo-primary-color-50pct);
      opacity: 0;
      transition: opacity 0.2s;
    }

    :host(:not([reordering])) *:not([column-resizing]) [part~='cell']:hover [part='resize-handle'],
    [part='resize-handle']:active {
      opacity: 1;
      transition-delay: 0.15s;
    }

    /* Column borders */

    :host([theme~='column-borders']) [part~='cell']:not([last-column]):not([part~='details-cell']) {
      border-right: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    /* Frozen columns */

    [last-frozen] {
      border-right: var(--_lumo-grid-border-width) solid transparent;
      overflow: hidden;
    }

    :host([overflow~='left']) [part~='cell'][last-frozen]:not([part~='details-cell']) {
      border-right-color: var(--_lumo-grid-border-color);
    }

    /* Row stripes */

    :host([theme~='row-stripes']) [part~='row']:not([odd]) [part~='body-cell'],
    :host([theme~='row-stripes']) [part~='row']:not([odd]) [part~='details-cell'] {
      background-image: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct));
      background-repeat: repeat-x;
    }

    /* Selected row */

    /* Raise the selected rows above unselected rows (so that box-shadow can cover unselected rows) */
    :host(:not([reordering])) [part~='row'][selected] {
      z-index: 1;
    }

    :host(:not([reordering])) [part~='row'][selected] [part~='body-cell']:not([part~='details-cell']) {
      background-image: linear-gradient(var(--_lumo-grid-selected-row-color), var(--_lumo-grid-selected-row-color));
      background-repeat: repeat;
    }

    /* Cover the border of an unselected row */
    :host(:not([theme~='no-row-borders'])) [part~='row'][selected] [part~='cell']:not([part~='details-cell']) {
      box-shadow: 0 var(--_lumo-grid-border-width) 0 0 var(--_lumo-grid-selected-row-color);
    }

    /* Compact */

    :host([theme~='compact']) [part='row']:only-child [part~='header-cell'] {
      min-height: var(--lumo-size-m);
    }

    :host([theme~='compact']) [part~='cell'] {
      min-height: var(--lumo-size-s);
    }

    :host([theme~='compact']) [part='row'][first] [part~='cell']:not([part~='details-cell']) {
      min-height: calc(var(--lumo-size-s) - var(--_lumo-grid-border-width));
    }

    :host([theme~='compact']) [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      padding: var(--lumo-space-xs) var(--lumo-space-s);
    }

    /* Wrap cell contents */

    :host([theme~='wrap-cell-content']) [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      white-space: normal;
    }

    /* RTL specific styles */

    :host([dir='rtl']) [part~='row'][dragstart] [part~='cell'][last-column] {
      border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);
    }

    :host([dir='rtl']) [part~='row'][dragstart] [part~='cell'][first-column] {
      border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;
    }

    :host([dir='rtl'][theme~='column-borders']) [part~='cell']:not([last-column]):not([part~='details-cell']) {
      border-right: none;
      border-left: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    :host([dir='rtl']) [last-frozen] {
      border-right: none;
      border-left: var(--_lumo-grid-border-width) solid transparent;
    }

    :host([dir='rtl'][overflow~='right']) [part~='cell'][last-frozen]:not([part~='details-cell']) {
      border-left-color: var(--_lumo-grid-border-color);
    }
  `,{moduleId:"lumo-grid"}),nl("vaadin-checkbox",il`
    :host(.vaadin-grid-select-all-checkbox) {
      font-size: var(--lumo-font-size-m);
    }
  `,{moduleId:"vaadin-grid-select-all-checkbox-lumo"});let Vh=!1,$h=[],qh=[];function Hh(){Vh=!0,requestAnimationFrame((function(){Vh=!1,function(t){for(;t.length;)Uh(t.shift())}($h),setTimeout((function(){!function(t){for(let e=0,i=t.length;e<i;e++)Uh(t.shift())}(qh)}))}))}function Uh(t){const e=t[0],i=t[1],s=t[2];try{i.apply(e,s)}catch(t){setTimeout((()=>{throw t}))}}class Wh{constructor(){this.start=0,this.end=0,this.previous=null,this.parent=null,this.rules=null,this.parsedCssText="",this.cssText="",this.atRule=!1,this.type=0,this.keyframesName="",this.selector="",this.parsedSelector=""}}function Jh(t){return Yh(function(t){let e=new Wh;e.start=0,e.end=t.length;let i=e;for(let s=0,r=t.length;s<r;s++)if(t[s]===Zh){i.rules||(i.rules=[]);let t=i,e=t.rules[t.rules.length-1]||null;i=new Wh,i.start=s+1,i.parent=t,i.previous=e,t.rules.push(i)}else t[s]===Xh&&(i.end=s+1,i=i.parent||e);return e}(t=function(t){return t.replace(tu.comments,"").replace(tu.port,"")}(t)),t)}function Yh(t,e){let i=e.substring(t.start,t.end-1);if(t.parsedCssText=t.cssText=i.trim(),t.parent){i=e.substring(t.previous?t.previous.end:t.parent.start,t.start-1),i=function(t){return t.replace(/\\([0-9a-f]{1,6})\s/gi,(function(){let t=arguments[1],e=6-t.length;for(;e--;)t="0"+t;return"\\"+t}))}(i),i=i.replace(tu.multipleSpaces," "),i=i.substring(i.lastIndexOf(";")+1);let s=t.parsedSelector=t.selector=i.trim();t.atRule=0===s.indexOf(su),t.atRule?0===s.indexOf(iu)?t.type=Qh.MEDIA_RULE:s.match(tu.keyframesRule)&&(t.type=Qh.KEYFRAMES_RULE,t.keyframesName=t.selector.split(tu.multipleSpaces).pop()):t.type=0===s.indexOf(eu)?Qh.MIXIN_RULE:Qh.STYLE_RULE}let s=t.rules;if(s)for(let t,i=0,r=s.length;i<r&&(t=s[i]);i++)Yh(t,e);return t}function Kh(t,e,i=""){let s="";if(t.cssText||t.rules){let i=t.rules;if(i&&!function(t){let e=t[0];return Boolean(e)&&Boolean(e.selector)&&0===e.selector.indexOf(eu)}(i))for(let t,r=0,n=i.length;r<n&&(t=i[r]);r++)s=Kh(t,e,s);else s=e?t.cssText:function(t){return function(t){return t.replace(tu.mixinApply,"").replace(tu.varApply,"")}(t=function(t){return t.replace(tu.customProp,"").replace(tu.mixinProp,"")}(t))}(t.cssText),s=s.trim(),s&&(s="  "+s+"\n")}return s&&(t.selector&&(i+=t.selector+" "+Zh+"\n"),i+=s,t.selector&&(i+=Xh+"\n\n")),i}const Qh={STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1e3},Zh="{",Xh="}",tu={comments:/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},eu="--",iu="@media",su="@",ru=new Set;function nu(t){const e=t.textContent;if(!ru.has(e)){ru.add(e);const t=document.createElement("style");t.setAttribute("shady-unscoped",""),t.textContent=e,document.head.appendChild(t)}}function ou(t){return t.hasAttribute("shady-unscoped")}function lu(t,e){return t?("string"==typeof t&&(t=Jh(t)),e&&hu(t,e),Kh(t,no)):""}function au(t){return!t.__cssRules&&t.textContent&&(t.__cssRules=Jh(t.textContent)),t.__cssRules||null}function hu(t,e,i,s){if(!t)return;let r=!1,n=t.type;if(s&&n===Qh.MEDIA_RULE){let e=t.selector.match(Qn);e&&(window.matchMedia(e[1]).matches||(r=!0))}n===Qh.STYLE_RULE?e(t):i&&n===Qh.KEYFRAMES_RULE?i(t):n===Qh.MIXIN_RULE&&(r=!0);let o=t.rules;if(o&&!r)for(let t,r=0,n=o.length;r<n&&(t=o[r]);r++)hu(t,e,i,s)}function uu(t,e){let i=t.indexOf("var(");if(-1===i)return e(t,"","","");let s=function(t,e){let i=0;for(let s=e,r=t.length;s<r;s++)if("("===t[s])i++;else if(")"===t[s]&&0==--i)return s;return-1}(t,i+3),r=t.substring(i+4,s),n=t.substring(0,i),o=uu(t.substring(s+1),e),l=r.indexOf(",");return-1===l?e(n,r.trim(),"",o):e(n,r.substring(0,l).trim(),r.substring(l+1).trim(),o)}const cu="css-build";function du(t){return""!==function(t){if(void 0!==io)return io;if(void 0===t.__cssBuild){const e=t.getAttribute(cu);if(e)t.__cssBuild=e;else{const e=function(t){const e="template"===t.localName?t.content.firstChild:t.firstChild;if(e instanceof Comment){const t=e.textContent.trim().split(":");if(t[0]===cu)return t[1]}return""}(t);""!==e&&function(t){const e="template"===t.localName?t.content.firstChild:t.firstChild;e.parentNode.removeChild(e)}(t),t.__cssBuild=e}}return t.__cssBuild||""}(t)}const pu=/;\s*/m,mu=/^\s*(initial)|(inherit)\s*$/,fu=/\s*!important/;class gu{constructor(){this._map={}}set(t,e){t=t.trim(),this._map[t]={properties:e,dependants:{}}}get(t){return t=t.trim(),this._map[t]||null}}let vu=null;class yu{constructor(){this._currentElement=null,this._measureElement=null,this._map=new gu}detectMixin(t){return function(t){const e=Kn.test(t)||Yn.test(t);return Kn.lastIndex=0,Yn.lastIndex=0,e}(t)}gatherStyles(t){const e=function(t){const e=[],i=t.querySelectorAll("style");for(let t=0;t<i.length;t++){const s=i[t];ou(s)?to||(nu(s),s.parentNode.removeChild(s)):(e.push(s.textContent),s.parentNode.removeChild(s))}return e.join("").trim()}(t.content);if(e){const i=document.createElement("style");return i.textContent=e,t.content.insertBefore(i,t.content.firstChild),i}return null}transformTemplate(t,e){void 0===t._gatheredStyle&&(t._gatheredStyle=this.gatherStyles(t));const i=t._gatheredStyle;return i?this.transformStyle(i,e):null}transformStyle(t,e=""){let i=au(t);return this.transformRules(i,e),t.textContent=lu(i),i}transformCustomStyle(t){let e=au(t);return hu(e,(t=>{":root"===t.selector&&(t.selector="html"),this.transformRule(t)})),t.textContent=lu(e),e}transformRules(t,e){this._currentElement=e,hu(t,(t=>{this.transformRule(t)})),this._currentElement=null}transformRule(t){t.cssText=this.transformCssText(t.parsedCssText,t),":root"===t.selector&&(t.selector=":host > *")}transformCssText(t,e){return t=t.replace(Yn,((t,i,s,r)=>this._produceCssProperties(t,i,s,r,e))),this._consumeCssProperties(t,e)}_getInitialValueForProperty(t){return this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.setAttribute("apply-shim-measure",""),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement)),window.getComputedStyle(this._measureElement).getPropertyValue(t)}_fallbacksFromPreviousRules(t){let e=t;for(;e.parent;)e=e.parent;const i={};let s=!1;return hu(e,(e=>{s=s||e===t,s||e.selector===t.selector&&Object.assign(i,this._cssTextToMap(e.parsedCssText))})),i}_consumeCssProperties(t,e){let i=null;for(;i=Kn.exec(t);){let s=i[0],r=i[1],n=i.index,o=n+s.indexOf("@apply"),l=n+s.length,a=t.slice(0,o),h=t.slice(l),u=e?this._fallbacksFromPreviousRules(e):{};Object.assign(u,this._cssTextToMap(a));let c=this._atApplyToCssProperties(r,u);t=`${a}${c}${h}`,Kn.lastIndex=n+c.length}return t}_atApplyToCssProperties(t,e){t=t.replace(pu,"");let i=[],s=this._map.get(t);if(s||(this._map.set(t,{}),s=this._map.get(t)),s){let r,n,o;this._currentElement&&(s.dependants[this._currentElement]=!0);const l=s.properties;for(r in l)o=e&&e[r],n=[r,": var(",t,"_-_",r],o&&n.push(",",o.replace(fu,"")),n.push(")"),fu.test(l[r])&&n.push(" !important"),i.push(n.join(""))}return i.join("; ")}_replaceInitialOrInherit(t,e){let i=mu.exec(e);return i&&(e=i[1]?this._getInitialValueForProperty(t):"apply-shim-inherit"),e}_cssTextToMap(t,e=!1){let i,s,r=t.split(";"),n={};for(let t,o,l=0;l<r.length;l++)t=r[l],t&&(o=t.split(":"),o.length>1&&(i=o[0].trim(),s=o.slice(1).join(":"),e&&(s=this._replaceInitialOrInherit(i,s)),n[i]=s));return n}_invalidateMixinEntry(t){if(vu)for(let e in t.dependants)e!==this._currentElement&&vu(e)}_produceCssProperties(t,e,i,s,r){if(i&&uu(i,((t,e)=>{e&&this._map.get(e)&&(s=`@apply ${e};`)})),!s)return t;let n=this._consumeCssProperties(""+s,r),o=t.slice(0,t.indexOf("--")),l=this._cssTextToMap(n,!0),a=l,h=this._map.get(e),u=h&&h.properties;u?a=Object.assign(Object.create(u),l):this._map.set(e,a);let c,d,p=[],m=!1;for(c in a)d=l[c],void 0===d&&(d="initial"),u&&!(c in u)&&(m=!0),p.push(`${e}_-_${c}: ${d}`);return m&&this._invalidateMixinEntry(h),h&&(h.properties=a),i&&(o=`${t};${o}`),`${o}${p.join("; ")};`}}yu.prototype.detectMixin=yu.prototype.detectMixin,yu.prototype.transformStyle=yu.prototype.transformStyle,yu.prototype.transformCustomStyle=yu.prototype.transformCustomStyle,yu.prototype.transformRules=yu.prototype.transformRules,yu.prototype.transformRule=yu.prototype.transformRule,yu.prototype.transformTemplate=yu.prototype.transformTemplate,yu.prototype._separator="_-_",Object.defineProperty(yu.prototype,"invalidCallback",{get:()=>vu,set(t){vu=t}});const wu={},bu="_applyShimCurrentVersion",_u="_applyShimNextVersion",Au="_applyShimValidatingVersion",xu=Promise.resolve();function Su(t){let e=wu[t];e&&function(t){t[bu]=t[bu]||0,t[Au]=t[Au]||0,t[_u]=(t[_u]||0)+1}(e)}function Cu(t){return t[bu]===t[_u]}const ku=new yu;class Iu{constructor(){this.customStyleInterface=null,ku.invalidCallback=Su}ensure(){this.customStyleInterface||window.ShadyCSS.CustomStyleInterface&&(this.customStyleInterface=window.ShadyCSS.CustomStyleInterface,this.customStyleInterface.transformCallback=t=>{ku.transformCustomStyle(t)},this.customStyleInterface.validateCallback=()=>{requestAnimationFrame((()=>{this.customStyleInterface.enqueued&&this.flushCustomStyles()}))})}prepareTemplate(t,e){if(this.ensure(),du(t))return;wu[e]=t;let i=ku.transformTemplate(t,e);t._styleAst=i}flushCustomStyles(){if(this.ensure(),!this.customStyleInterface)return;let t=this.customStyleInterface.processStyles();if(this.customStyleInterface.enqueued){for(let e=0;e<t.length;e++){let i=this.customStyleInterface.getStyleForCustomStyle(t[e]);i&&ku.transformCustomStyle(i)}this.customStyleInterface.enqueued=!1}}styleSubtree(t,e){if(this.ensure(),e&&Zn(t,e),t.shadowRoot){this.styleElement(t);let e=t.shadowRoot.children||t.shadowRoot.childNodes;for(let t=0;t<e.length;t++)this.styleSubtree(e[t])}else{let e=t.children||t.childNodes;for(let t=0;t<e.length;t++)this.styleSubtree(e[t])}}styleElement(t){this.ensure();let{is:e}=function(t){let e=t.localName,i="",s="";return e?e.indexOf("-")>-1?i=e:(s=e,i=t.getAttribute&&t.getAttribute("is")||""):(i=t.is,s=t.extends),{is:i,typeExtension:s}}(t),i=wu[e];if((!i||!du(i))&&i&&!Cu(i)){(function(t){return!Cu(t)&&t[Au]===t[_u]})(i)||(this.prepareTemplate(i,e),function(t){t[Au]=t[_u],t._validating||(t._validating=!0,xu.then((function(){t[bu]=t[_u],t._validating=!1})))}(i));let s=t.shadowRoot;if(s){let t=s.querySelector("style");t&&(t.__cssRules=i._styleAst,t.textContent=lu(i._styleAst))}}}styleDocument(t){this.ensure(),this.styleSubtree(document.body,t)}}if(!window.ShadyCSS||!window.ShadyCSS.ScopingShim){const t=new Iu;let e=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate(e,i,s){t.flushCustomStyles(),t.prepareTemplate(e,i)},prepareTemplateStyles(t,e,i){window.ShadyCSS.prepareTemplate(t,e,i)},prepareTemplateDom(t,e){},styleSubtree(e,i){t.flushCustomStyles(),t.styleSubtree(e,i)},styleElement(e){t.flushCustomStyles(),t.styleElement(e)},styleDocument(e){t.flushCustomStyles(),t.styleDocument(e)},getComputedStyleValue:(t,e)=>Xn(t,e),flushCustomStyles(){t.flushCustomStyles()},nativeCss:no,nativeShadow:to,cssBuild:io,disableRuntime:ro},e&&(window.ShadyCSS.CustomStyleInterface=e)}window.ShadyCSS.ApplyShim=ku;const Mu=/:host\(:dir\((ltr|rtl)\)\)/g,Tu=/([\s\w-#\.\[\]\*]*):dir\((ltr|rtl)\)/g,Eu=/:dir\((?:ltr|rtl)\)/,ju=Boolean(window.ShadyDOM&&window.ShadyDOM.inUse),Ou=[];let Lu=null,Fu="";function zu(){Fu=document.documentElement.getAttribute("dir")}function Pu(t){t.__autoDirOptOut||t.setAttribute("dir",Fu)}function Ru(){zu(),Fu=document.documentElement.getAttribute("dir");for(let t=0;t<Ou.length;t++)Pu(Ou[t])}const Nu=ll((t=>{ju||Lu||(zu(),Lu=new MutationObserver(Ru),Lu.observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]}));const e=Rl(t);class i extends e{static _processStyleText(t,i){return t=e._processStyleText.call(this,t,i),!ju&&Eu.test(t)&&(t=this._replaceDirInCssText(t),this.__activateDir=!0),t}static _replaceDirInCssText(t){let e=t;return e=e.replace(Mu,':host([dir="$1"])'),e=e.replace(Tu,':host([dir="$2"]) $1'),e}constructor(){super(),this.__autoDirOptOut=!1}ready(){super.ready(),this.__autoDirOptOut=this.hasAttribute("dir")}connectedCallback(){e.prototype.connectedCallback&&super.connectedCallback(),this.constructor.__activateDir&&(Lu&&Lu.takeRecords().length&&Ru(),Ou.push(this),Pu(this))}disconnectedCallback(){if(e.prototype.disconnectedCallback&&super.disconnectedCallback(),this.constructor.__activateDir){const t=Ou.indexOf(this);t>-1&&Ou.splice(t,1)}}}return i.__activateDir=!1,i}));function Bu(){document.body.removeAttribute("unresolved")}function Du(t,e,i){return{index:t,removed:e,addedCount:i}}function Gu(t,e){return function(t,e,i,s,r,n){let o,l=0,a=0,h=Math.min(i-e,n-r);if(0==e&&0==r&&(l=function(t,e,i){for(let s=0;s<i;s++)if(!Vu(t[s],e[s]))return s;return i}(t,s,h)),i==t.length&&n==s.length&&(a=function(t,e,i){let s=t.length,r=e.length,n=0;for(;n<i&&Vu(t[--s],e[--r]);)n++;return n}(t,s,h-l)),r+=l,n-=a,(i-=a)-(e+=l)==0&&n-r==0)return[];if(e==i){for(o=Du(e,[],0);r<n;)o.removed.push(s[r++]);return[o]}if(r==n)return[Du(e,[],i-e)];let u=function(t){let e=t.length-1,i=t[0].length-1,s=t[e][i],r=[];for(;e>0||i>0;){if(0==e){r.push(2),i--;continue}if(0==i){r.push(3),e--;continue}let n,o=t[e-1][i-1],l=t[e-1][i],a=t[e][i-1];n=l<a?l<o?l:o:a<o?a:o,n==o?(o==s?r.push(0):(r.push(1),s=o),e--,i--):n==l?(r.push(3),e--,s=l):(r.push(2),i--,s=a)}return r.reverse(),r}(function(t,e,i,s,r,n){let o=n-r+1,l=i-e+1,a=new Array(o);for(let t=0;t<o;t++)a[t]=new Array(l),a[t][0]=t;for(let t=0;t<l;t++)a[0][t]=t;for(let i=1;i<o;i++)for(let n=1;n<l;n++)if(Vu(t[e+n-1],s[r+i-1]))a[i][n]=a[i-1][n-1];else{let t=a[i-1][n]+1,e=a[i][n-1]+1;a[i][n]=t<e?t:e}return a}(t,e,i,s,r,n));o=void 0;let c=[],d=e,p=r;for(let t=0;t<u.length;t++)switch(u[t]){case 0:o&&(c.push(o),o=void 0),d++,p++;break;case 1:o||(o=Du(d,[],0)),o.addedCount++,d++,o.removed.push(s[p]),p++;break;case 2:o||(o=Du(d,[],0)),o.addedCount++,d++;break;case 3:o||(o=Du(d,[],0)),o.removed.push(s[p]),p++}return o&&c.push(o),c}(t,0,t.length,e,0,e.length)}function Vu(t,e){return t===e}function $u(t){return"slot"===t.localName}"interactive"===document.readyState||"complete"===document.readyState?Bu():window.addEventListener("DOMContentLoaded",Bu);let qu=class{static getFlattenedNodes(t){const e=al(t);return $u(t)?(t=t,e.assignedNodes({flatten:!0})):Array.from(e.childNodes).map((t=>$u(t)?al(t=t).assignedNodes({flatten:!0}):[t])).reduce(((t,e)=>t.concat(e)),[])}constructor(t,e){this._shadyChildrenObserver=null,this._nativeChildrenObserver=null,this._connected=!1,this._target=t,this.callback=e,this._effectiveNodes=[],this._observer=null,this._scheduled=!1,this._boundSchedule=()=>{this._schedule()},this.connect(),this._schedule()}connect(){$u(this._target)?this._listenSlots([this._target]):al(this._target).children&&(this._listenSlots(al(this._target).children),window.ShadyDOM?this._shadyChildrenObserver=window.ShadyDOM.observeChildren(this._target,(t=>{this._processMutations(t)})):(this._nativeChildrenObserver=new MutationObserver((t=>{this._processMutations(t)})),this._nativeChildrenObserver.observe(this._target,{childList:!0}))),this._connected=!0}disconnect(){$u(this._target)?this._unlistenSlots([this._target]):al(this._target).children&&(this._unlistenSlots(al(this._target).children),window.ShadyDOM&&this._shadyChildrenObserver?(window.ShadyDOM.unobserveChildren(this._shadyChildrenObserver),this._shadyChildrenObserver=null):this._nativeChildrenObserver&&(this._nativeChildrenObserver.disconnect(),this._nativeChildrenObserver=null)),this._connected=!1}_schedule(){this._scheduled||(this._scheduled=!0,Ol.run((()=>this.flush())))}_processMutations(t){this._processSlotMutations(t),this.flush()}_processSlotMutations(t){if(t)for(let e=0;e<t.length;e++){let i=t[e];i.addedNodes&&this._listenSlots(i.addedNodes),i.removedNodes&&this._unlistenSlots(i.removedNodes)}}flush(){if(!this._connected)return!1;window.ShadyDOM&&ShadyDOM.flush(),this._nativeChildrenObserver?this._processSlotMutations(this._nativeChildrenObserver.takeRecords()):this._shadyChildrenObserver&&this._processSlotMutations(this._shadyChildrenObserver.takeRecords()),this._scheduled=!1;let t={target:this._target,addedNodes:[],removedNodes:[]},e=this.constructor.getFlattenedNodes(this._target),i=Gu(e,this._effectiveNodes);for(let e,s=0;s<i.length&&(e=i[s]);s++)for(let i,s=0;s<e.removed.length&&(i=e.removed[s]);s++)t.removedNodes.push(i);for(let s,r=0;r<i.length&&(s=i[r]);r++)for(let i=s.index;i<s.index+s.addedCount;i++)t.addedNodes.push(e[i]);this._effectiveNodes=e;let s=!1;return(t.addedNodes.length||t.removedNodes.length)&&(s=!0,this.callback.call(this._target,t)),s}_listenSlots(t){for(let e=0;e<t.length;e++){let i=t[e];$u(i)&&i.addEventListener("slotchange",this._boundSchedule)}}_unlistenSlots(t){for(let e=0;e<t.length;e++){let i=t[e];$u(i)&&i.removeEventListener("slotchange",this._boundSchedule)}}};const Hu=Element.prototype,Uu=Hu.matches||Hu.matchesSelector||Hu.mozMatchesSelector||Hu.msMatchesSelector||Hu.oMatchesSelector||Hu.webkitMatchesSelector,Wu=function(t,e){return Uu.call(t,e)};class Ju{constructor(t){window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.patch(t),this.node=t}observeNodes(t){return new qu(this.node,t)}unobserveNodes(t){t.disconnect()}notifyObserver(){}deepContains(t){if(al(this.node).contains(t))return!0;let e=t,i=t.ownerDocument;for(;e&&e!==i&&e!==this.node;)e=al(e).parentNode||al(e).host;return e===this.node}getOwnerRoot(){return al(this.node).getRootNode()}getDistributedNodes(){return"slot"===this.node.localName?al(this.node).assignedNodes({flatten:!0}):[]}getDestinationInsertionPoints(){let t=[],e=al(this.node).assignedSlot;for(;e;)t.push(e),e=al(e).assignedSlot;return t}importNode(t,e){let i=this.node instanceof Document?this.node:this.node.ownerDocument;return al(i).importNode(t,e)}getEffectiveChildNodes(){return qu.getFlattenedNodes(this.node)}queryDistributedElements(t){let e=this.getEffectiveChildNodes(),i=[];for(let s,r=0,n=e.length;r<n&&(s=e[r]);r++)s.nodeType===Node.ELEMENT_NODE&&Wu(s,t)&&i.push(s);return i}get activeElement(){let t=this.node;return void 0!==t._activeElement?t._activeElement:t.activeElement}}function Yu(t,e){for(let i=0;i<e.length;i++){let s=e[i];Object.defineProperty(t,s,{get:function(){return this.node[s]},configurable:!0})}}class Ku{constructor(t){this.event=t}get rootTarget(){return this.path[0]}get localTarget(){return this.event.target}get path(){return this.event.composedPath()}}let Qu=Ju;if(window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.noPatch&&window.ShadyDOM.Wrapper){class t extends window.ShadyDOM.Wrapper{}Object.getOwnPropertyNames(Ju.prototype).forEach((e=>{"activeElement"!=e&&(t.prototype[e]=Ju.prototype[e])})),Yu(t.prototype,["classList"]),Qu=t,Object.defineProperties(Ku.prototype,{localTarget:{get(){const t=this.event.currentTarget,e=t&&Zu(t).getOwnerRoot(),i=this.path;for(let t=0;t<i.length;t++){const s=i[t];if(Zu(s).getOwnerRoot()===e)return s}},configurable:!0},path:{get(){return window.ShadyDOM.composedPath(this.event)},configurable:!0}})}else(function(t,e){for(let i=0;i<e.length;i++){let s=e[i];t[s]=function(){return this.node[s].apply(this.node,arguments)}}})(Ju.prototype,["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector","querySelectorAll"]),Yu(Ju.prototype,["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling","childNodes","children","classList"]),function(t,e){for(let i=0;i<e.length;i++){let s=e[i];Object.defineProperty(t,s,{get:function(){return this.node[s]},set:function(t){this.node[s]=t},configurable:!0})}}(Ju.prototype,["textContent","innerHTML","className"]);const Zu=function(t){if((t=t||document)instanceof Qu)return t;if(t instanceof Ku)return t;let e=t.__domApi;return e||(e=t instanceof Event?new Ku(t):new Qu(t),t.__domApi=e),e},Xu=window.ShadyDOM,tc=window.ShadyCSS;function ec(t,e){return al(t).getRootNode()===e}const ic="disable-upgrade",sc=t=>{for(;t;){const e=Object.getOwnPropertyDescriptor(t,"observedAttributes");if(e)return e.get;t=Object.getPrototypeOf(t.prototype).constructor}return()=>[]};ll((t=>{const e=ja(t);let i=sc(e);return class extends e{constructor(){super()}static get observedAttributes(){return i.call(this).concat(ic)}_initializeProperties(){this.hasAttribute(ic)?this.__isUpgradeDisabled=!0:super._initializeProperties()}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(t){return super._canApplyPropertyDefault(t)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(t))}attributeChangedCallback(t,e,i,s){t==ic?this.__isUpgradeDisabled&&null==i&&(super._initializeProperties(),this.__isUpgradeDisabled=!1,al(this).isConnected&&super.connectedCallback()):super.attributeChangedCallback(t,e,i,s)}connectedCallback(){this.__isUpgradeDisabled||super.connectedCallback()}disconnectedCallback(){this.__isUpgradeDisabled||super.disconnectedCallback()}}}));const rc="disable-upgrade";let nc=window.ShadyCSS;const oc=ll((t=>{const e=_h(ja(t)),i=Ea?e:Nu(e),s=sc(i),r={x:"pan-x",y:"pan-y",none:"none",all:"auto"};class n extends i{constructor(){super()}static get importMeta(){return this.prototype.importMeta}created(){}__attributeReaction(t,e,i){(this.__dataAttributes&&this.__dataAttributes[t]||t===rc)&&this.attributeChangedCallback(t,e,i,null)}setAttribute(t,e){if(Eo&&!this._legacyForceObservedAttributes){const i=this.getAttribute(t);super.setAttribute(t,e),this.__attributeReaction(t,i,String(e))}else super.setAttribute(t,e)}removeAttribute(t){if(Eo&&!this._legacyForceObservedAttributes){const e=this.getAttribute(t);super.removeAttribute(t),this.__attributeReaction(t,e,null)}else super.removeAttribute(t)}static get observedAttributes(){return Eo&&!this.prototype._legacyForceObservedAttributes?(this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))||(this.__observedAttributes=[]),this.__observedAttributes):s.call(this).concat(rc)}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(t){return super._canApplyPropertyDefault(t)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(t))}connectedCallback(){this.__needsAttributesAtConnected&&this._takeAttributes(),this.__isUpgradeDisabled||(super.connectedCallback(),this.isAttached=!0,this.attached())}attached(){}disconnectedCallback(){this.__isUpgradeDisabled||(super.disconnectedCallback(),this.isAttached=!1,this.detached())}detached(){}attributeChangedCallback(t,e,i,s){e!==i&&(t==rc?this.__isUpgradeDisabled&&null==i&&(this._initializeProperties(),this.__isUpgradeDisabled=!1,al(this).isConnected&&this.connectedCallback()):(super.attributeChangedCallback(t,e,i,s),this.attributeChanged(t,e,i)))}attributeChanged(t,e,i){}_initializeProperties(){if(Ao&&this.hasAttribute(rc))this.__isUpgradeDisabled=!0;else{let t=Object.getPrototypeOf(this);t.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",t))||(this._registered(),t.__hasRegisterFinished=!0),super._initializeProperties(),this.root=this,this.created(),Eo&&!this._legacyForceObservedAttributes&&(this.hasAttributes()?this._takeAttributes():this.parentNode||(this.__needsAttributesAtConnected=!0)),this._applyListeners()}}_takeAttributes(){const t=this.attributes;for(let e=0,i=t.length;e<i;e++){const i=t[e];this.__attributeReaction(i.name,null,i.value)}}_registered(){}ready(){this._ensureAttributes(),super.ready()}_ensureAttributes(){}_applyListeners(){}serialize(t){return this._serializeValue(t)}deserialize(t,e){return this._deserializeValue(t,e)}reflectPropertyToAttribute(t,e,i){this._propertyToAttribute(t,e,i)}serializeValueToAttribute(t,e,i){this._valueToNodeAttribute(i||this,t,e)}extend(t,e){if(!t||!e)return t||e;let i=Object.getOwnPropertyNames(e);for(let s,r=0;r<i.length&&(s=i[r]);r++){let i=Object.getOwnPropertyDescriptor(e,s);i&&Object.defineProperty(t,s,i)}return t}mixin(t,e){for(let i in e)t[i]=e[i];return t}chainObject(t,e){return t&&e&&t!==e&&(t.__proto__=e),t}instanceTemplate(t){let e=this.constructor._contentForTemplate(t);return document.importNode(e,!0)}fire(t,e,i){i=i||{},e=null==e?{}:e;let s=new Event(t,{bubbles:void 0===i.bubbles||i.bubbles,cancelable:Boolean(i.cancelable),composed:void 0===i.composed||i.composed});return s.detail=e,al(i.node||this).dispatchEvent(s),s}listen(t,e,i){t=t||this;let s=this.__boundListeners||(this.__boundListeners=new WeakMap),r=s.get(t);r||(r={},s.set(t,r));let n=e+i;r[n]||(r[n]=this._addMethodEventListenerToNode(t,e,i,this))}unlisten(t,e,i){t=t||this;let s=this.__boundListeners&&this.__boundListeners.get(t),r=e+i,n=s&&s[r];n&&(this._removeEventListenerFromNode(t,e,n),s[r]=null)}setScrollDirection(t,e){mh(e||this,r[t]||"auto")}$$(t){return this.root.querySelector(t)}get domHost(){let t=al(this).getRootNode();return t instanceof DocumentFragment?t.host:t}distributeContent(){const t=Zu(this);window.ShadyDOM&&t.shadowRoot&&ShadyDOM.flush()}getEffectiveChildNodes(){return Zu(this).getEffectiveChildNodes()}queryDistributedElements(t){return Zu(this).queryDistributedElements(t)}getEffectiveChildren(){return this.getEffectiveChildNodes().filter((function(t){return t.nodeType===Node.ELEMENT_NODE}))}getEffectiveTextContent(){let t=this.getEffectiveChildNodes(),e=[];for(let i,s=0;i=t[s];s++)i.nodeType!==Node.COMMENT_NODE&&e.push(i.textContent);return e.join("")}queryEffectiveChildren(t){let e=this.queryDistributedElements(t);return e&&e[0]}queryAllEffectiveChildren(t){return this.queryDistributedElements(t)}getContentChildNodes(t){let e=this.root.querySelector(t||"slot");return e?Zu(e).getDistributedNodes():[]}getContentChildren(t){return this.getContentChildNodes(t).filter((function(t){return t.nodeType===Node.ELEMENT_NODE}))}isLightDescendant(t){const e=this;return e!==t&&al(e).contains(t)&&al(e).getRootNode()===al(t).getRootNode()}isLocalDescendant(t){return this.root===al(t).getRootNode()}scopeSubtree(t,e=!1){return function(t,e=!1){if(!Xu||!tc)return null;if(!Xu.handlesDynamicScoping)return null;const i=tc.ScopingShim;if(!i)return null;const s=i.scopeForNode(t),r=al(t).getRootNode(),n=t=>{if(!ec(t,r))return;const e=Array.from(Xu.nativeMethods.querySelectorAll.call(t,"*"));e.push(t);for(let t=0;t<e.length;t++){const n=e[t];if(!ec(n,r))continue;const o=i.currentScopeForNode(n);o!==s&&(""!==o&&i.unscopeNode(n,o),i.scopeNode(n,s))}};if(n(t),e){const e=new MutationObserver((t=>{for(let e=0;e<t.length;e++){const i=t[e];for(let t=0;t<i.addedNodes.length;t++){const e=i.addedNodes[t];e.nodeType===Node.ELEMENT_NODE&&n(e)}}}));return e.observe(t,{childList:!0,subtree:!0}),e}return null}(t,e)}getComputedStyleValue(t){return nc.getComputedStyleValue(this,t)}debounce(t,e,i){return this._debouncers=this._debouncers||{},this._debouncers[t]=za.debounce(this._debouncers[t],i>0?Tl.after(i):Ol,e.bind(this))}isDebouncerActive(t){this._debouncers=this._debouncers||{};let e=this._debouncers[t];return!(!e||!e.isActive())}flushDebouncer(t){this._debouncers=this._debouncers||{};let e=this._debouncers[t];e&&e.flush()}cancelDebouncer(t){this._debouncers=this._debouncers||{};let e=this._debouncers[t];e&&e.cancel()}async(t,e){return e>0?Tl.run(t.bind(this),e):~Ol.run(t.bind(this))}cancelAsync(t){t<0?Ol.cancel(~t):Tl.cancel(t)}create(t,e){let i=document.createElement(t);if(e)if(i.setProperties)i.setProperties(e);else for(let t in e)i[t]=e[t];return i}elementMatches(t,e){return Wu(e||this,t)}toggleAttribute(t,e){let i=this;return 3===arguments.length&&(i=arguments[2]),1==arguments.length&&(e=!i.hasAttribute(t)),e?(al(i).setAttribute(t,""),!0):(al(i).removeAttribute(t),!1)}toggleClass(t,e,i){i=i||this,1==arguments.length&&(e=!i.classList.contains(t)),e?i.classList.add(t):i.classList.remove(t)}transform(t,e){(e=e||this).style.webkitTransform=t,e.style.transform=t}translate3d(t,e,i,s){this.transform("translate3d("+t+","+e+","+i+")",s=s||this)}arrayDelete(t,e){let i;if(Array.isArray(t)){if(i=t.indexOf(e),i>=0)return t.splice(i,1)}else if(i=gl(this,t).indexOf(e),i>=0)return this.splice(t,i,1);return null}_logger(t,e){switch(Array.isArray(e)&&1===e.length&&Array.isArray(e[0])&&(e=e[0]),t){case"log":case"warn":case"error":console[t](...e)}}_log(...t){this._logger("log",t)}_warn(...t){this._logger("warn",t)}_error(...t){this._logger("error",t)}_logf(t,...e){return["[%s::%s]",this.is,t,...e]}}return n.prototype.is="",n})),lc={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,listeners:!0,hostAttributes:!0},ac={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,behaviors:!0,_noAccessors:!0},hc=Object.assign({listeners:!0,hostAttributes:!0,properties:!0,observers:!0},ac);function uc(t,e,i,s){!function(t,e,i){const s=t._noAccessors,r=Object.getOwnPropertyNames(t);for(let n=0;n<r.length;n++){let o=r[n];if(!(o in i))if(s)e[o]=t[o];else{let i=Object.getOwnPropertyDescriptor(t,o);i&&(i.configurable=!0,Object.defineProperty(e,o,i))}}}(e,t,s);for(let t in lc)e[t]&&(i[t]=i[t]||[],i[t].push(e[t]))}function cc(t,e,i){e=e||[];for(let s=t.length-1;s>=0;s--){let r=t[s];r?Array.isArray(r)?cc(r,e):e.indexOf(r)<0&&(!i||i.indexOf(r)<0)&&e.unshift(r):console.warn("behavior is null, check for missing or 404 import")}return e}function dc(t,e){for(const i in e){const s=t[i],r=e[i];t[i]=!("value"in r)&&s&&"value"in s?Object.assign({value:s.value},r):r}}const pc=oc(HTMLElement);function mc(t,e,i){let s;const r={};class n extends e{static _finalizeClass(){if(this.hasOwnProperty(JSCompiler_renameProperty("generatedFrom",this))){if(s)for(let t,e=0;e<s.length;e++)t=s[e],t.properties&&this.createProperties(t.properties),t.observers&&this.createObservers(t.observers,t.properties);t.properties&&this.createProperties(t.properties),t.observers&&this.createObservers(t.observers,t.properties),this._prepareTemplate()}else e._finalizeClass.call(this)}static get properties(){const e={};if(s)for(let t=0;t<s.length;t++)dc(e,s[t].properties);return dc(e,t.properties),e}static get observers(){let e=[];if(s)for(let t,i=0;i<s.length;i++)t=s[i],t.observers&&(e=e.concat(t.observers));return t.observers&&(e=e.concat(t.observers)),e}created(){super.created();const t=r.created;if(t)for(let e=0;e<t.length;e++)t[e].call(this)}_registered(){const t=n.prototype;if(!t.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",t))){t.__hasRegisterFinished=!0,super._registered(),Ao&&o(t);const e=Object.getPrototypeOf(this);let i=r.beforeRegister;if(i)for(let t=0;t<i.length;t++)i[t].call(e);if(i=r.registered,i)for(let t=0;t<i.length;t++)i[t].call(e)}}_applyListeners(){super._applyListeners();const t=r.listeners;if(t)for(let e=0;e<t.length;e++){const i=t[e];if(i)for(let t in i)this._addMethodEventListenerToNode(this,t,i[t])}}_ensureAttributes(){const t=r.hostAttributes;if(t)for(let e=t.length-1;e>=0;e--){const i=t[e];for(let t in i)this._ensureAttribute(t,i[t])}super._ensureAttributes()}ready(){super.ready();let t=r.ready;if(t)for(let e=0;e<t.length;e++)t[e].call(this)}attached(){super.attached();let t=r.attached;if(t)for(let e=0;e<t.length;e++)t[e].call(this)}detached(){super.detached();let t=r.detached;if(t)for(let e=0;e<t.length;e++)t[e].call(this)}attributeChanged(t,e,i){super.attributeChanged();let s=r.attributeChanged;if(s)for(let r=0;r<s.length;r++)s[r].call(this,t,e,i)}}if(i){Array.isArray(i)||(i=[i]);let t=e.prototype.behaviors;s=cc(i,null,t),n.prototype.behaviors=t?t.concat(i):s}const o=e=>{s&&function(t,e,i){for(let s=0;s<e.length;s++)uc(t,e[s],i,hc)}(e,s,r),uc(e,t,r,ac)};return Ao||o(n.prototype),n.generatedFrom=t,n}function fc(t,e,i,s,r){let n;r&&(n="object"==typeof i&&null!==i,n&&(s=t.__dataTemp[e]));let o=s!==i&&(s==s||i==i);return n&&o&&(t.__dataTemp[e]=i),o}const gc=ll((t=>class extends t{_shouldPropertyChange(t,e,i){return fc(this,t,e,i,!0)}})),vc=ll((t=>class extends t{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(t,e,i){return fc(this,t,e,i,this.mutableData)}}));gc._mutablePropertyChange=fc;let yc=null;function wc(){return yc}wc.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:wc,writable:!0}});const bc=Ia(wc),_c=gc(bc),Ac=Ia(class{});function xc(t,e){for(let i=0;i<e.length;i++){let s=e[i];if(Boolean(t)!=Boolean(s.__hideTemplateChildren__))if(s.nodeType===Node.TEXT_NODE)t?(s.__polymerTextContent__=s.textContent,s.textContent=""):s.textContent=s.__polymerTextContent__;else if("slot"===s.localName)if(t)s.__polymerReplaced__=document.createComment("hidden-slot"),al(al(s).parentNode).replaceChild(s.__polymerReplaced__,s);else{const t=s.__polymerReplaced__;t&&al(al(t).parentNode).replaceChild(s,t)}else s.style&&(t?(s.__polymerDisplay__=s.style.display,s.style.display="none"):s.style.display=s.__polymerDisplay__);s.__hideTemplateChildren__=t,s._showHideChildren&&s._showHideChildren(t)}}class Sc extends Ac{constructor(t){super(),this._configureProperties(t),this.root=this._stampTemplate(this.__dataHost);let e=[];this.children=e;for(let t=this.root.firstChild;t;t=t.nextSibling)e.push(t),t.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let i=this.__templatizeOptions;(t&&i.instanceProps||!i.instanceProps)&&this._enableProperties()}_configureProperties(t){if(this.__templatizeOptions.forwardHostProp)for(let t in this.__hostProps)this._setPendingProperty(t,this.__dataHost["_host_"+t]);for(let e in t)this._setPendingProperty(e,t[e])}forwardHostProp(t,e){this._setPendingPropertyOrPath(t,e,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(t,e,i){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(t,e,(t=>{t.model=this,i(t)}));else{let s=this.__dataHost.__dataHost;s&&s._addEventListenerToNode(t,e,i)}}_showHideChildren(t){xc(t,this.children)}_setUnmanagedPropertyToNode(t,e,i){t.__hideTemplateChildren__&&t.nodeType==Node.TEXT_NODE&&"textContent"==e?t.__polymerTextContent__=i:super._setUnmanagedPropertyToNode(t,e,i)}get parentModel(){let t=this.__parentModel;if(!t){let e;t=this;do{t=t.__dataHost.__dataHost}while((e=t.__templatizeOptions)&&!e.parentModel);this.__parentModel=t}return t}dispatchEvent(t){return!0}}const Cc=gc(Sc);function kc(t){let e=t.__dataHost;return e&&e._methodHost||e}function Ic(t,e){return function(t,i,s){e.call(t.__templatizeOwner,i.substring("_host_".length),s[i])}}function Mc(t,e){return function(t,i,s){e.call(t.__templatizeOwner,t,i,s[i])}}function Tc(t,e,i){if(bo&&!kc(t))throw new Error("strictTemplatePolicy: template owner not trusted");if(i=i||{},t.__templatizeOwner)throw new Error("A <template> can only be templatized once");t.__templatizeOwner=e;let s=(e?e.constructor:Sc)._parseTemplate(t),r=s.templatizeInstanceClass;r||(r=function(t,e,i){let s=i.mutableData?Cc:Sc;Tc.mixin&&(s=Tc.mixin(s));let r=class extends s{};return r.prototype.__templatizeOptions=i,r.prototype._bindTemplate(t),function(t,e,i,s){let r=i.hostProps||{};for(let e in s.instanceProps){delete r[e];let i=s.notifyInstanceProp;i&&t.prototype._addPropertyEffect(e,t.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:Mc(0,i)})}if(s.forwardHostProp&&e.__dataHost)for(let e in r)i.hasHostProps||(i.hasHostProps=!0),t.prototype._addPropertyEffect(e,t.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:function(t,e,i){t.__dataHost._setPendingPropertyOrPath("_host_"+e,i[e],!0,!0)}})}(r,t,e,i),r}(t,s,i),s.templatizeInstanceClass=r);const n=kc(t);!function(t,e,i,s){let r=i.forwardHostProp;if(r&&e.hasHostProps){const n="template"==t.localName;let o=e.templatizeTemplateClass;if(!o){if(n){let t=i.mutableData?_c:bc;class s extends t{}o=e.templatizeTemplateClass=s}else{const i=t.constructor;class s extends i{}o=e.templatizeTemplateClass=s}let l=e.hostProps;for(let t in l)o.prototype._addPropertyEffect("_host_"+t,o.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:Ic(0,r)}),o.prototype._createNotifyingProperty("_host_"+t);xo&&s&&function(t,e,i){const s=i.constructor._properties,{propertyEffects:r}=t,{instanceProps:n}=e;for(let t in r)if(!(s[t]||n&&n[t])){const e=r[t];for(let i=0;i<e.length;i++){const{part:s}=e[i].info;if(!s.signature||!s.signature.static){console.warn(`Property '${t}' used in template but not declared in 'properties'; attribute will not be observed.`);break}}}}(e,i,s)}if(t.__dataProto&&Object.assign(t.__data,t.__dataProto),n)(function(t,e){yc=t,Object.setPrototypeOf(t,e.prototype),new e,yc=null})(t,o),t.__dataTemp={},t.__dataPending=null,t.__dataOld=null,t._enableProperties();else{Object.setPrototypeOf(t,o.prototype);const i=e.hostProps;for(let e in i)if(e="_host_"+e,e in t){const i=t[e];delete t[e],t.__data[e]=i}}}}(t,s,i,n);let o=class extends r{};return o.prototype._methodHost=n,o.prototype.__dataHost=t,o.prototype.__templatizeOwner=e,o.prototype.__hostProps=s.hostProps,o=o,o}let Ec=!1;function jc(){if(Ao&&!fo){if(!Ec){Ec=!0;const t=document.createElement("style");t.textContent="dom-bind,dom-if,dom-repeat{display:none;}",document.head.appendChild(t)}return!0}return!1}const Oc=_h(vc(Ia(HTMLElement)));customElements.define("dom-bind",class extends Oc{static get observedAttributes(){return["mutable-data"]}constructor(){if(super(),bo)throw new Error("strictTemplatePolicy: dom-bind not allowed");this.root=null,this.$=null,this.__children=null}attributeChangedCallback(t,e,i,s){this.mutableData=!0}connectedCallback(){jc()||(this.style.display="none"),this.render()}disconnectedCallback(){this.__removeChildren()}__insertChildren(){al(al(this).parentNode).insertBefore(this.root,this)}__removeChildren(){if(this.__children)for(let t=0;t<this.__children.length;t++)this.root.appendChild(this.__children[t])}render(){let t;if(!this.__children){if(t=t||this.querySelector("template"),!t){let e=new MutationObserver((()=>{if(t=this.querySelector("template"),!t)throw new Error("dom-bind requires a <template> child");e.disconnect(),this.render()}));return void e.observe(this,{childList:!0})}this.root=this._stampTemplate(t),this.$=this.root.$,this.__children=[];for(let t=this.root.firstChild;t;t=t.nextSibling)this.__children[this.__children.length]=t;this._enableProperties()}this.__insertChildren(),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}});const Lc=vc(Fa);class Fc extends Lc{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!To,readOnly:!0},initialCount:{type:Number},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"},notifyDomChange:{type:Boolean},reuseChunkedInstances:{type:Boolean}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__renderStartTime=null,this.__itemsArrayChanged=!1,this.__shouldMeasureChunk=!1,this.__shouldContinueChunking=!1,this.__chunkingId=0,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let t=0;t<this.__instances.length;t++)this.__detachInstance(t)}connectedCallback(){if(super.connectedCallback(),jc()||(this.style.display="none"),this.__isDetached){this.__isDetached=!1;let t=al(al(this).parentNode);for(let e=0;e<this.__instances.length;e++)this.__attachInstance(e,t)}}__ensureTemplatized(){if(!this.__ctor){const t=this;let e=this.template=t._templateInfo?t:this.querySelector("template");if(!e){let t=new MutationObserver((()=>{if(!this.querySelector("template"))throw new Error("dom-repeat requires a <template> child");t.disconnect(),this.__render()}));return t.observe(this,{childList:!0}),!1}let i={};i[this.as]=!0,i[this.indexAs]=!0,i[this.itemsIndexAs]=!0,this.__ctor=Tc(e,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:i,forwardHostProp:function(t,e){let i=this.__instances;for(let s,r=0;r<i.length&&(s=i[r]);r++)s.forwardHostProp(t,e)},notifyInstanceProp:function(t,e,i){if(function(t,e){return t===e||cl(t,e)||dl(t,e)}(this.as,e)){let s=t[this.itemsIndexAs];e==this.as&&(this.items[s]=i);let r=pl(this.as,`${JSCompiler_renameProperty("items",this)}.${s}`,e);this.notifyPath(r,i)}}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(t){if("string"==typeof t){let e=t,i=this.__getMethodHost();return function(){return i[e].apply(i,arguments)}}return t}__sortChanged(t){this.__sortFn=this.__functionFromPropertyValue(t),this.items&&this.__debounceRender(this.__render)}__filterChanged(t){this.__filterFn=this.__functionFromPropertyValue(t),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(t){return Math.ceil(1e3/t)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}__handleObservedPaths(t){if(this.__sortFn||this.__filterFn)if(t){if(this.__observePaths){let e=this.__observePaths;for(let i=0;i<e.length;i++)0===t.indexOf(e[i])&&this.__debounceRender(this.__render,this.delay)}}else this.__debounceRender(this.__render,this.delay)}__itemsChanged(t){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(t.path,t.value)||("items"===t.path&&(this.__itemsArrayChanged=!0),this.__debounceRender(this.__render))}__debounceRender(t,e=0){this.__renderDebouncer=za.debounce(this.__renderDebouncer,e>0?Tl.after(e):Ol,t.bind(this)),Ra(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),kh()}__render(){if(!this.__ensureTemplatized())return;let t=this.items||[];const e=this.__sortAndFilterItems(t),i=this.__calculateLimit(e.length);this.__updateInstances(t,i,e),this.initialCount&&(this.__shouldMeasureChunk||this.__shouldContinueChunking)&&(cancelAnimationFrame(this.__chunkingId),this.__chunkingId=requestAnimationFrame((()=>this.__continueChunking()))),this._setRenderedItemCount(this.__instances.length),To&&!this.notifyDomChange||this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}__sortAndFilterItems(t){let e=new Array(t.length);for(let i=0;i<t.length;i++)e[i]=i;return this.__filterFn&&(e=e.filter(((e,i,s)=>this.__filterFn(t[e],i,s)))),this.__sortFn&&e.sort(((e,i)=>this.__sortFn(t[e],t[i]))),e}__calculateLimit(t){let e=t;const i=this.__instances.length;if(this.initialCount){let s;!this.__chunkCount||this.__itemsArrayChanged&&!this.reuseChunkedInstances?(e=Math.min(t,this.initialCount),s=Math.max(e-i,0),this.__chunkCount=s||1):(s=Math.min(Math.max(t-i,0),this.__chunkCount),e=Math.min(i+s,t)),this.__shouldMeasureChunk=s===this.__chunkCount,this.__shouldContinueChunking=e<t,this.__renderStartTime=performance.now()}return this.__itemsArrayChanged=!1,e}__continueChunking(){if(this.__shouldMeasureChunk){const t=performance.now()-this.__renderStartTime;this.__chunkCount=Math.round(this.__chunkCount*(this._targetFrameTime/t))||1}this.__shouldContinueChunking&&this.__debounceRender(this.__render)}__updateInstances(t,e,i){const s=this.__itemsIdxToInstIdx={};let r;for(r=0;r<e;r++){let e=this.__instances[r],n=i[r],o=t[n];s[n]=r,e?(e._setPendingProperty(this.as,o),e._setPendingProperty(this.indexAs,r),e._setPendingProperty(this.itemsIndexAs,n),e._flushProperties()):this.__insertInstance(o,r,n)}for(let t=this.__instances.length-1;t>=r;t--)this.__detachAndRemoveInstance(t)}__detachInstance(t){let e=this.__instances[t];const i=al(e.root);for(let t=0;t<e.children.length;t++)i.appendChild(e.children[t]);return e}__attachInstance(t,e){e.insertBefore(this.__instances[t].root,this)}__detachAndRemoveInstance(t){this.__detachInstance(t),this.__instances.splice(t,1)}__stampInstance(t,e,i){let s={};return s[this.as]=t,s[this.indexAs]=e,s[this.itemsIndexAs]=i,new this.__ctor(s)}__insertInstance(t,e,i){const s=this.__stampInstance(t,e,i);let r=this.__instances[e+1],n=r?r.children[0]:this;return al(al(this).parentNode).insertBefore(s.root,n),this.__instances[e]=s,s}_showHideChildren(t){for(let e=0;e<this.__instances.length;e++)this.__instances[e]._showHideChildren(t)}__handleItemPath(t,e){let i=t.slice(6),s=i.indexOf("."),r=s<0?i:i.substring(0,s);if(r==parseInt(r,10)){let t=s<0?"":i.substring(s+1);this.__handleObservedPaths(t);let n=this.__instances[this.__itemsIdxToInstIdx[r]];return n&&(n._setPendingPropertyOrPath(this.as+(t?"."+t:""),e,!1,!0),n._flushProperties()),!0}}itemForElement(t){let e=this.modelForElement(t);return e&&e[this.as]}indexForElement(t){let e=this.modelForElement(t);return e&&e[this.indexAs]}modelForElement(t){return function(t,e){let i;for(;e;)if(i=e.__dataHost?e:e.__templatizeInstance){if(i.__dataHost==t)return i;e=i.__dataHost}else e=al(e).parentNode;return null}(this.template,t)}}customElements.define(Fc.is,Fc);class zc extends Fa{static get is(){return"dom-if"}static get template(){return null}static get properties(){return{if:{type:Boolean,observer:"__debounceRender"},restamp:{type:Boolean,observer:"__debounceRender"},notifyDomChange:{type:Boolean}}}constructor(){super(),this.__renderDebouncer=null,this._lastIf=!1,this.__hideTemplateChildren__=!1}__debounceRender(){this.__renderDebouncer=za.debounce(this.__renderDebouncer,Ol,(()=>this.__render())),Ra(this.__renderDebouncer)}disconnectedCallback(){super.disconnectedCallback();const t=al(this).parentNode;t&&(t.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||al(t).host)||this.__teardownInstance()}connectedCallback(){super.connectedCallback(),jc()||(this.style.display="none"),this.if&&this.__debounceRender()}__ensureTemplate(){if(!this.__template){const t=this;let e=t._templateInfo?t:al(t).querySelector("template");if(!e){let t=new MutationObserver((()=>{if(!al(this).querySelector("template"))throw new Error("dom-if requires a <template> child");t.disconnect(),this.__render()}));return t.observe(this,{childList:!0}),!1}this.__template=e}return!0}__ensureInstance(){let t=al(this).parentNode;if(this.__hasInstance()){let e=this.__getInstanceNodes();if(e&&e.length&&al(this).previousSibling!==e[e.length-1])for(let i,s=0;s<e.length&&(i=e[s]);s++)al(t).insertBefore(i,this)}else{if(!t)return!1;if(!this.__ensureTemplate())return!1;this.__createAndInsertInstance(t)}return!0}render(){kh()}__render(){if(this.if){if(!this.__ensureInstance())return}else this.restamp&&this.__teardownInstance();this._showHideChildren(),To&&!this.notifyDomChange||this.if==this._lastIf||(this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this._lastIf=this.if)}__hasInstance(){}__getInstanceNodes(){}__createAndInsertInstance(t){}__teardownInstance(){}_showHideChildren(){}}const Pc=Mo?class extends zc{constructor(){super(),this.__instance=null,this.__syncInfo=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.templateInfo.childNodes}__createAndInsertInstance(t){const e=this.__dataHost||this;if(bo&&!this.__dataHost)throw new Error("strictTemplatePolicy: template owner not trusted");const i=e._bindTemplate(this.__template,!0);i.runEffects=(t,e,i)=>{let s=this.__syncInfo;if(this.if)s&&(this.__syncInfo=null,this._showHideChildren(),e=Object.assign(s.changedProps,e)),t(e,i);else if(this.__instance)if(s||(s=this.__syncInfo={runEffects:t,changedProps:{}}),i)for(const t in e){const e=ul(t);s.changedProps[e]=this.__dataHost[e]}else Object.assign(s.changedProps,e)},this.__instance=e._stampTemplate(this.__template,i),al(t).insertBefore(this.__instance,this)}__syncHostProperties(){const t=this.__syncInfo;t&&(this.__syncInfo=null,t.runEffects(t.changedProps,!1))}__teardownInstance(){this.__instance&&((this.__dataHost||this)._removeBoundDom(this.__instance),this.__instance=null,this.__syncInfo=null)}_showHideChildren(){const t=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==t&&(this.__instance.__hidden=t,xc(t,this.__instance.templateInfo.childNodes)),t||this.__syncHostProperties()}}:class extends zc{constructor(){super(),this.__ctor=null,this.__instance=null,this.__invalidProps=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.children}__createAndInsertInstance(t){this.__ctor||(this.__ctor=Tc(this.__template,this,{mutableData:!0,forwardHostProp:function(t,e){this.__instance&&(this.if?this.__instance.forwardHostProp(t,e):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[ul(t)]=!0))}})),this.__instance=new this.__ctor,al(t).insertBefore(this.__instance.root,this)}__teardownInstance(){if(this.__instance){let t=this.__instance.children;if(t&&t.length){let e=al(t[0]).parentNode;if(e){e=al(e);for(let i,s=0;s<t.length&&(i=t[s]);s++)e.removeChild(i)}}this.__invalidProps=null,this.__instance=null}}__syncHostProperties(){let t=this.__invalidProps;if(t){this.__invalidProps=null;for(let e in t)this.__instance._setPendingProperty(e,this.__dataHost[e]);this.__instance._flushProperties()}}_showHideChildren(){const t=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==t&&(this.__instance.__hidden=t,this.__instance._showHideChildren(t)),t||this.__syncHostProperties()}};customElements.define(Pc.is,Pc);let Rc=ll((t=>{let e=ja(t);return class extends e{static get properties(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}static get observers(){return["__updateSelection(multi, items.*)"]}constructor(){super(),this.__lastItems=null,this.__lastMulti=null,this.__selectedMap=null}__updateSelection(t,e){let i=e.path;if(i==JSCompiler_renameProperty("items",this)){let i=e.base||[],s=this.__lastItems;if(t!==this.__lastMulti&&this.clearSelection(),s){let t=Gu(i,s);this.__applySplices(t)}this.__lastItems=i,this.__lastMulti=t}else if(e.path==`${JSCompiler_renameProperty("items",this)}.splices`)this.__applySplices(e.value.indexSplices);else{let t=i.slice(`${JSCompiler_renameProperty("items",this)}.`.length),e=parseInt(t,10);t.indexOf(".")<0&&t==e&&this.__deselectChangedIdx(e)}}__applySplices(t){let e=this.__selectedMap;for(let i=0;i<t.length;i++){let s=t[i];e.forEach(((t,i)=>{t<s.index||e.set(i,t>=s.index+s.removed.length?t+s.addedCount-s.removed.length:-1)}));for(let t=0;t<s.addedCount;t++){let i=s.index+t;e.has(this.items[i])&&e.set(this.items[i],i)}}this.__updateLinks();let i=0;e.forEach(((t,s)=>{t<0?(this.multi?this.splice(JSCompiler_renameProperty("selected",this),i,1):this.selected=this.selectedItem=null,e.delete(s)):i++}))}__updateLinks(){if(this.__dataLinkedPaths={},this.multi){let t=0;this.__selectedMap.forEach((e=>{e>=0&&this.linkPaths(`${JSCompiler_renameProperty("items",this)}.${e}`,`${JSCompiler_renameProperty("selected",this)}.${t++}`)}))}else this.__selectedMap.forEach((t=>{this.linkPaths(JSCompiler_renameProperty("selected",this),`${JSCompiler_renameProperty("items",this)}.${t}`),this.linkPaths(JSCompiler_renameProperty("selectedItem",this),`${JSCompiler_renameProperty("items",this)}.${t}`)}))}clearSelection(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null}isSelected(t){return this.__selectedMap.has(t)}isIndexSelected(t){return this.isSelected(this.items[t])}__deselectChangedIdx(t){let e=this.__selectedIndexForItemIndex(t);if(e>=0){let t=0;this.__selectedMap.forEach(((i,s)=>{e==t++&&this.deselect(s)}))}}__selectedIndexForItemIndex(t){let e=this.__dataLinkedPaths[`${JSCompiler_renameProperty("items",this)}.${t}`];if(e)return parseInt(e.slice(`${JSCompiler_renameProperty("selected",this)}.`.length),10)}deselect(t){let e=this.__selectedMap.get(t);if(e>=0){let i;this.__selectedMap.delete(t),this.multi&&(i=this.__selectedIndexForItemIndex(e)),this.__updateLinks(),this.multi?this.splice(JSCompiler_renameProperty("selected",this),i,1):this.selected=this.selectedItem=null}}deselectIndex(t){this.deselect(this.items[t])}select(t){this.selectIndex(this.items.indexOf(t))}selectIndex(t){let e=this.items[t];this.isSelected(e)?this.toggle&&this.deselectIndex(t):(this.multi||this.__selectedMap.clear(),this.__selectedMap.set(e,t),this.__updateLinks(),this.multi?this.push(JSCompiler_renameProperty("selected",this),e):this.selected=this.selectedItem=e)}}}))(Fa);class Nc extends Rc{static get is(){return"array-selector"}static get template(){return null}}customElements.define(Nc.is,Nc);const Bc=oc(HTMLElement).prototype;var Dc=new Set;const Gc={properties:{_parentResizable:{type:Object,observer:"_parentResizableChanged"},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":"_onIronRequestResizeNotifications"},created:function(){this._interestedResizables=[],this._boundNotifyResize=this.notifyResize.bind(this),this._boundOnDescendantIronResize=this._onDescendantIronResize.bind(this)},attached:function(){this._requestResizeNotifications()},detached:function(){this._parentResizable?this._parentResizable.stopResizeNotificationsFor(this):(Dc.delete(this),window.removeEventListener("resize",this._boundNotifyResize)),this._parentResizable=null},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach((function(t){this.resizerShouldNotify(t)&&this._notifyDescendant(t)}),this),this._fireResize())},assignParentResizable:function(t){this._parentResizable&&this._parentResizable.stopResizeNotificationsFor(this),this._parentResizable=t,t&&-1===t._interestedResizables.indexOf(this)&&(t._interestedResizables.push(this),t._subscribeIronResize(this))},stopResizeNotificationsFor:function(t){var e=this._interestedResizables.indexOf(t);e>-1&&(this._interestedResizables.splice(e,1),this._unsubscribeIronResize(t))},_subscribeIronResize:function(t){t.addEventListener("iron-resize",this._boundOnDescendantIronResize)},_unsubscribeIronResize:function(t){t.removeEventListener("iron-resize",this._boundOnDescendantIronResize)},resizerShouldNotify:function(){return!0},_onDescendantIronResize:function(t){this._notifyingDescendant?t.stopPropagation():fo||this._fireResize()},_fireResize:function(){this.fire("iron-resize",null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function(t){var e=Zu(t).rootTarget;e!==this&&(e.assignParentResizable(this),this._notifyDescendant(e),t.stopPropagation())},_parentResizableChanged:function(t){t&&window.removeEventListener("resize",this._boundNotifyResize)},_notifyDescendant:function(t){this.isAttached&&(this._notifyingDescendant=!0,t.notifyResize(),this._notifyingDescendant=!1)},_requestResizeNotifications:function(){if(this.isAttached)if("loading"===document.readyState){var t=this._requestResizeNotifications.bind(this);document.addEventListener("readystatechange",(function e(){document.removeEventListener("readystatechange",e),t()}))}else this._findParent(),this._parentResizable?this._parentResizable._interestedResizables.forEach((function(t){t!==this&&t._findParent()}),this):(Dc.forEach((function(t){t!==this&&t._findParent()}),this),window.addEventListener("resize",this._boundNotifyResize),this.notifyResize())},_findParent:function(){this.assignParentResizable(null),this.fire("iron-request-resize-notifications",null,{node:this,bubbles:!0,cancelable:!0}),this._parentResizable?Dc.delete(this):Dc.add(this)}},Vc={properties:{scrollTarget:{type:HTMLElement,value:function(){return this._defaultScrollTarget}}},observers:["_scrollTargetChanged(scrollTarget, isAttached)"],_shouldHaveListener:!0,_scrollTargetChanged:function(t,e){if(this._oldScrollTarget&&(this._toggleScrollListener(!1,this._oldScrollTarget),this._oldScrollTarget=null),e)if("document"===t)this.scrollTarget=this._doc;else if("string"==typeof t){var i=this.domHost;this.scrollTarget=i&&i.$?i.$[t]:Zu(this.ownerDocument).querySelector("#"+t)}else this._isValidScrollTarget()&&(this._oldScrollTarget=t,this._toggleScrollListener(this._shouldHaveListener,t))},_scrollHandler:function(){},get _defaultScrollTarget(){return this._doc},get _doc(){return this.ownerDocument.documentElement},get _scrollTop(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageYOffset:this.scrollTarget.scrollTop:0},get _scrollLeft(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageXOffset:this.scrollTarget.scrollLeft:0},set _scrollTop(t){this.scrollTarget===this._doc?window.scrollTo(window.pageXOffset,t):this._isValidScrollTarget()&&(this.scrollTarget.scrollTop=t)},set _scrollLeft(t){this.scrollTarget===this._doc?window.scrollTo(t,window.pageYOffset):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=t)},scroll:function(t,e){var i;"object"==typeof t?(i=t.left,e=t.top):i=t,i=i||0,e=e||0,this.scrollTarget===this._doc?window.scrollTo(i,e):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=i,this.scrollTarget.scrollTop=e)},get _scrollTargetWidth(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerWidth:this.scrollTarget.offsetWidth:0},get _scrollTargetHeight(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerHeight:this.scrollTarget.offsetHeight:0},_isValidScrollTarget:function(){return this.scrollTarget instanceof HTMLElement},_toggleScrollListener:function(t,e){var i=e===this._doc?window:e;t?this._boundScrollHandler||(this._boundScrollHandler=this._scrollHandler.bind(this),i.addEventListener("scroll",this._boundScrollHandler)):this._boundScrollHandler&&(i.removeEventListener("scroll",this._boundScrollHandler),this._boundScrollHandler=null)},toggleScrollListener:function(t){this._shouldHaveListener=t,this._toggleScrollListener(t,this.scrollTarget)}},$c=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),qc=$c&&$c[1]>=8,Hc=function(t){t||console.warn("Polymer.Class requires `info` argument");let e=pc;return e=mc(t,e,t.behaviors),e.is=e.prototype.is=t.is,e}({behaviors:[Gc,Vc],_ratio:.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_lastVisibleIndexVal:null,_maxPages:2,_focusedVirtualIndex:-1,_templateCost:0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){return this._physicalSize-this._viewportHeight},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollOffset},get _maxVirtualStart(){return Math.max(0,this._virtualCount-this._physicalCount)},set _virtualStart(t){t=this._clamp(t,0,this._maxVirtualStart),this._virtualStartVal=t},get _virtualStart(){return this._virtualStartVal||0},set _physicalStart(t){(t%=this._physicalCount)<0&&(t=this._physicalCount+t),this._physicalStartVal=t},get _physicalStart(){return this._physicalStartVal||0},get _physicalEnd(){return(this._physicalStart+this._physicalCount-1)%this._physicalCount},set _physicalCount(t){this._physicalCountVal=t},get _physicalCount(){return this._physicalCountVal||0},get _optPhysicalSize(){return 0===this._viewportHeight?1/0:this._viewportHeight*this._maxPages},get _isVisible(){return Boolean(this.offsetWidth||this.offsetHeight)},get firstVisibleIndex(){let t=this._firstVisibleIndexVal;if(null==t){let e=this._physicalTop+this._scrollOffset;t=this._iterateItems((function(t,i){if(e+=this._physicalSizes[t],e>this._scrollPosition)return i}))||0,this._firstVisibleIndexVal=t}return t},get lastVisibleIndex(){let t=this._lastVisibleIndexVal;if(null==t){let e=this._physicalTop+this._scrollOffset;this._iterateItems((function(i,s){e<this._scrollBottom&&(t=s),e+=this._physicalSizes[i]})),this._lastVisibleIndexVal=t}return t},get _scrollOffset(){return this._scrollerPaddingTop},attached:function(){this._debounce("_render",this._render,El),this.listen(this,"iron-resize","_resizeHandler")},detached:function(){this.unlisten(this,"iron-resize","_resizeHandler")},updateViewportBoundaries:function(){const t=window.getComputedStyle(this);this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(t["padding-top"],10),this._isRTL=Boolean("rtl"===t.direction),this._viewportWidth=this.$.items.offsetWidth,this._viewportHeight=this._scrollTargetHeight},_scrollHandler:function(){const t=Math.max(0,Math.min(this._maxScrollTop,this._scrollTop));let e=t-this._scrollPosition;const i=e>=0;if(this._scrollPosition=t,this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,Math.abs(e)>this._physicalSize&&this._physicalSize>0){e-=this._scrollOffset;const t=Math.round(e/this._physicalAverage);this._virtualStart=this._virtualStart+t,this._physicalStart=this._physicalStart+t,this._physicalTop=Math.floor(this._virtualStart)*this._physicalAverage,this._update()}else if(this._physicalCount>0){const{physicalTop:t,indexes:e}=this._getReusables(i);i?(this._physicalTop=t,this._virtualStart=this._virtualStart+e.length,this._physicalStart=this._physicalStart+e.length):(this._virtualStart=this._virtualStart-e.length,this._physicalStart=this._physicalStart-e.length),this._update(e,i?null:e),this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,0),Ol)}},_getReusables:function(t){let e,i,s;const r=[],n=this._hiddenContentSize*this._ratio,o=this._virtualStart,l=this._virtualEnd,a=this._physicalCount;let h=this._physicalTop+this._scrollOffset;const u=this._scrollTop,c=this._scrollBottom;for(t?(e=this._physicalStart,i=u-h):(e=this._physicalEnd,i=this._physicalBottom+this._scrollOffset-c);s=this._physicalSizes[e],i-=s,!(r.length>=a||i<=n);)if(t){if(l+r.length+1>=this._virtualCount)break;if(h+s>=u-this._scrollOffset)break;r.push(e),h+=s,e=(e+1)%a}else{if(o-r.length<=0)break;if(h+this._physicalSize-s<=c)break;r.push(e),h-=s,e=0===e?a-1:e-1}return{indexes:r,physicalTop:h-this._scrollOffset}},_update:function(t,e){if(!(t&&0===t.length||0===this._physicalCount)){if(this._assignModels(t),this._updateMetrics(t),e)for(;e.length;){const t=e.pop();this._physicalTop-=this._physicalSizes[t]}this._positionItems(),this._updateScrollerSize()}},_isClientFull:function(){return 0!=this._scrollBottom&&this._physicalBottom-1>=this._scrollBottom&&this._physicalTop<=this._scrollPosition},_increasePoolIfNeeded:function(t){const e=this._clamp(this._physicalCount+t,3,this._virtualCount-this._virtualStart)-this._physicalCount;let i=Math.round(.5*this._physicalCount);if(!(e<0)){if(e>0){const t=window.performance.now();[].push.apply(this._physicalItems,this._createPool(e));for(let t=0;t<e;t++)this._physicalSizes.push(0);this._physicalCount=this._physicalCount+e,this._physicalStart>this._physicalEnd&&this._isIndexRendered(this._focusedVirtualIndex)&&this._getPhysicalIndex(this._focusedVirtualIndex)<this._physicalEnd&&(this._physicalStart=this._physicalStart+e),this._update(),this._templateCost=(window.performance.now()-t)/e,i=Math.round(.5*this._physicalCount)}this._virtualEnd>=this._virtualCount-1||0===i||(this._isClientFull()?this._physicalSize<this._optPhysicalSize&&this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,this._clamp(Math.round(50/this._templateCost),1,i)),jl):this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,i),Ol))}},_render:function(){if(this.isAttached&&this._isVisible)if(0!==this._physicalCount){const{physicalTop:t,indexes:e}=this._getReusables(!0);this._physicalTop=t,this._virtualStart=this._virtualStart+e.length,this._physicalStart=this._physicalStart+e.length,this._update(e),this._update(),this._increasePoolIfNeeded(0)}else this._virtualCount>0&&(this.updateViewportBoundaries(),this._increasePoolIfNeeded(3))},_itemsChanged:function(t){"items"===t.path&&(this._virtualStart=0,this._physicalTop=0,this._virtualCount=this.items?this.items.length:0,this._physicalIndexForKey={},this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this._physicalCount=this._physicalCount||0,this._physicalItems=this._physicalItems||[],this._physicalSizes=this._physicalSizes||[],this._physicalStart=0,this._scrollTop>this._scrollOffset&&this._resetScrollPosition(0),this._debounce("_render",this._render,El))},_iterateItems:function(t,e){let i,s,r,n;if(2===arguments.length&&e){for(n=0;n<e.length;n++)if(i=e[n],s=this._computeVidx(i),null!=(r=t.call(this,i,s)))return r}else{for(i=this._physicalStart,s=this._virtualStart;i<this._physicalCount;i++,s++)if(null!=(r=t.call(this,i,s)))return r;for(i=0;i<this._physicalStart;i++,s++)if(null!=(r=t.call(this,i,s)))return r}},_computeVidx:function(t){return t>=this._physicalStart?this._virtualStart+(t-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+t},_updateMetrics:function(t){kh();let e=0,i=0;const s=this._physicalAverageCount,r=this._physicalAverage;this._iterateItems((function(t){i+=this._physicalSizes[t],this._physicalSizes[t]=this._physicalItems[t].offsetHeight,e+=this._physicalSizes[t],this._physicalAverageCount+=this._physicalSizes[t]?1:0}),t),this._physicalSize=this._physicalSize+e-i,this._physicalAverageCount!==s&&(this._physicalAverage=Math.round((r*s+e)/this._physicalAverageCount))},_positionItems:function(){this._adjustScrollPosition();let t=this._physicalTop;this._iterateItems((function(e){this.translate3d(0,t+"px",0,this._physicalItems[e]),t+=this._physicalSizes[e]}))},_adjustScrollPosition:function(){const t=0===this._virtualStart?this._physicalTop:Math.min(this._scrollPosition+this._physicalTop,0);if(0!==t){this._physicalTop=this._physicalTop-t;const e=this._scrollTop;!qc&&e>0&&this._resetScrollPosition(e-t)}},_resetScrollPosition:function(t){this.scrollTarget&&t>=0&&(this._scrollTop=t,this._scrollPosition=this._scrollTop)},_updateScrollerSize:function(t){this._estScrollHeight=this._physicalBottom+Math.max(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage,((t=(t=t||0===this._scrollHeight)||this._scrollPosition>=this._estScrollHeight-this._physicalSize)||Math.abs(this._estScrollHeight-this._scrollHeight)>=this._viewportHeight)&&(this.$.items.style.height=this._estScrollHeight+"px",this._scrollHeight=this._estScrollHeight)},scrollToIndex:function(t){if("number"!=typeof t||t<0||t>this.items.length-1)return;if(kh(),0===this._physicalCount)return;t=this._clamp(t,0,this._virtualCount-1),(!this._isIndexRendered(t)||t>=this._maxVirtualStart)&&(this._virtualStart=t-1),this._assignModels(),this._updateMetrics(),this._physicalTop=Math.floor(this._virtualStart)*this._physicalAverage;let e=this._physicalStart,i=this._virtualStart,s=0;const r=this._hiddenContentSize;for(;i<t&&s<=r;)s+=this._physicalSizes[e],e=(e+1)%this._physicalCount,i++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+this._scrollOffset+s),this._increasePoolIfNeeded(0),this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null},_resetAverage:function(){this._physicalAverage=0,this._physicalAverageCount=0},_resizeHandler:function(){this._debounce("_render",(function(){this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this.updateViewportBoundaries(),this._isVisible?(this.toggleScrollListener(!0),this._resetAverage(),this._render()):this.toggleScrollListener(!1)}),El)},_isIndexRendered:function(t){return t>=this._virtualStart&&t<=this._virtualEnd},_getPhysicalIndex:function(t){return(this._physicalStart+(t-this._virtualStart))%this._physicalCount},_clamp:function(t,e,i){return Math.min(i,Math.max(e,t))},_debounce:function(t,e,i){this._debouncers=this._debouncers||{},this._debouncers[t]=za.debounce(this._debouncers[t],i,e.bind(this)),Ra(this._debouncers[t])}});class Uc extends Hc{static get properties(){return{size:{type:Number,notify:!0},_vidxOffset:{type:Number,value:0}}}static get observers(){return["_effectiveSizeChanged(_effectiveSize)"]}connectedCallback(){super.connectedCallback(),this._scrollHandler()}_updateScrollerItem(){}_afterScroll(){}_getRowTarget(){}_createScrollerRows(){}_canPopulate(){}scrollToIndex(t){this._warnPrivateAPIAccess("scrollToIndex"),this._scrollingToIndex=!0,t=Math.min(Math.max(t,0),this._effectiveSize-1),this.$.table.scrollTop=t/this._effectiveSize*(this.$.table.scrollHeight-this.$.table.offsetHeight),this._scrollHandler(),this._accessIronListAPI((()=>this._maxScrollTop))&&this._virtualCount<this._effectiveSize&&this._adjustVirtualIndexOffset(1e6),this._accessIronListAPI((()=>super.scrollToIndex(t-this._vidxOffset))),this._scrollHandler();const e=Array.from(this.$.items.children).filter((e=>e.index===t))[0];if(e){const t=e.getBoundingClientRect().top-this.$.header.getBoundingClientRect().bottom;Math.abs(t)>1&&(this.$.table.scrollTop+=t,this._scrollHandler())}this._scrollingToIndex=!1}_effectiveSizeChanged(t){let e,i=0;this._iterateItems(((t,s)=>{if(s===this._firstVisibleIndex){const s=this._physicalItems[t];e=s.index,i=s.getBoundingClientRect().top}})),this.items&&t<this.items.length&&(this._scrollTop=0),Array.isArray(this.items)||(this.items={length:Math.min(t,1e5)}),this._accessIronListAPI((()=>super._itemsChanged({path:"items"}))),this._virtualCount=Math.min(this.items.length,t)||0,0===this._scrollTop&&(this._accessIronListAPI((()=>this._scrollToIndex(Math.min(t-1,e)))),this._iterateItems((t=>{const s=this._physicalItems[t];if(s.index===e&&(this.$.table.scrollTop+=Math.round(s.getBoundingClientRect().top-i)),s.index===this._focusedItemIndex&&this._itemsFocusable&&this.$.items.contains(this.shadowRoot.activeElement)){const t=Array.from(this._itemsFocusable.parentElement.children).indexOf(this._itemsFocusable);s.children[t].focus()}}))),this._assignModels(),requestAnimationFrame((()=>this._update())),this.__updateFooterPositioning()}_positionItems(){let t;this._adjustScrollPosition(),isNaN(this._physicalTop)&&(t=!0,this._physicalTop=0);let e=this._physicalTop;this._iterateItems((t=>{this._physicalItems[t].style.transform=`translateY(${e}px)`,e+=this._physicalSizes[t]})),t&&this._scrollToIndex(0)}_increasePoolIfNeeded(t){0===t&&this._scrollingToIndex||!this._canPopulate()||!this._effectiveSize||(this._initialPoolCreated?this._optPhysicalSize!==1/0&&(this._debounceIncreasePool=za.debounce(this._debounceIncreasePool,El,(()=>{this._updateMetrics();let t=Math.ceil((this._optPhysicalSize-this._physicalSize)/this._physicalAverage);this._physicalCount+t>this._effectiveSize&&(t=Math.max(0,this._effectiveSize-this._physicalCount)),this._physicalSize&&t>0&&this._optPhysicalSize!==1/0&&(super._increasePoolIfNeeded(t),this.__reorderChildNodes())}))):(this._initialPoolCreated=!0,super._increasePoolIfNeeded(25)))}__reorderChildNodes(){const t=Array.from(this.$.items.childNodes);t.reduce(((t,e,i,s)=>{if(0===i||s[i-1].index===e.index-1)return t}),!0)||t.sort(((t,e)=>t.index-e.index)).forEach((t=>this.$.items.appendChild(t)))}_createPool(t){const e=document.createDocumentFragment(),i=this._createScrollerRows(t);i.forEach((t=>e.appendChild(t))),this._getRowTarget().appendChild(e);const s=this.querySelector("[slot]");if(s){const t=s.getAttribute("slot");s.setAttribute("slot","foo-bar"),s.setAttribute("slot",t)}return function(t,e){Vh||Hh(),qh.push([t,e,void 0])}(this,(()=>this.notifyResize())),i}_assignModels(t){this._iterateItems(((t,e)=>{const i=this._physicalItems[t];this._toggleAttribute("hidden",e>=this._effectiveSize,i),this._updateScrollerItem(i,e+(this._vidxOffset||0))}),t)}_scrollHandler(){const t=this.$.table.scrollTop-this._scrollPosition;this._accessIronListAPI(super._scrollHandler);const e=this._vidxOffset;this._accessIronListAPI((()=>this._maxScrollTop))&&this._virtualCount<this._effectiveSize?this._adjustVirtualIndexOffset(t):this._vidxOffset=0,this._vidxOffset!==e&&this._update(),this._afterScroll()}_adjustVirtualIndexOffset(t){if(Math.abs(t)>1e4){if(this._noScale)return void(this._noScale=!1);const t=this.$.table.scrollTop/(this.$.table.scrollHeight-this.$.table.offsetHeight);this._vidxOffset=Math.round(t*this._effectiveSize-t*this._virtualCount)}else{const t=this._vidxOffset||0,e=1e3,i=100;0===this._scrollTop?(this._vidxOffset=0,t!==this._vidxOffset&&super.scrollToIndex(0)):this.firstVisibleIndex<e&&this._vidxOffset>0&&(this._vidxOffset-=Math.min(this._vidxOffset,i),t!==this._vidxOffset&&super.scrollToIndex(this.firstVisibleIndex+(t-this._vidxOffset)),this._noScale=!0);const s=this._effectiveSize-this._virtualCount;this._scrollTop>=this._maxScrollTop&&this._maxScrollTop>0?(this._vidxOffset=s,t!==this._vidxOffset&&super.scrollToIndex(this._virtualCount)):this.firstVisibleIndex>this._virtualCount-e&&this._vidxOffset<s&&(this._vidxOffset+=Math.min(s-this._vidxOffset,i),t!==this._vidxOffset&&super.scrollToIndex(this.firstVisibleIndex-(this._vidxOffset-t)),this._noScale=!0)}}_accessIronListAPI(t){this._warnPrivateAPIAccessAsyncEnabled=!1;const e=t.apply(this);return this._debouncerWarnPrivateAPIAccess=za.debounce(this._debouncerWarnPrivateAPIAccess,El,(()=>this._warnPrivateAPIAccessAsyncEnabled=!0)),e}_debounceRender(t,e){super._debounceRender((()=>this._accessIronListAPI(t)),e)}_warnPrivateAPIAccess(t){this._warnPrivateAPIAccessAsyncEnabled&&console.warn(`Accessing private API (${t})!`)}_render(){this._accessIronListAPI(super._render)}_itemsChanged(){}get _firstVisibleIndex(){return this._accessIronListAPI((()=>super.firstVisibleIndex))}get _lastVisibleIndex(){return this._accessIronListAPI((()=>super.lastVisibleIndex))}_scrollToIndex(t){this._accessIronListAPI((()=>this.scrollToIndex(t)))}get firstVisibleIndex(){return this._warnPrivateAPIAccess("firstVisibleIndex"),super.firstVisibleIndex}set firstVisibleIndex(t){this._warnPrivateAPIAccess("firstVisibleIndex"),super.firstVisibleIndex=t}get lastVisibleIndex(){return this._warnPrivateAPIAccess("lastVisibleIndex"),super.lastVisibleIndex}set lastVisibleIndex(t){this._warnPrivateAPIAccess("lastVisibleIndex"),super.lastVisibleIndex=t}updateViewportBoundaries(){this._warnPrivateAPIAccess("updateViewportBoundaries"),super.updateViewportBoundaries.apply(this,arguments)}_resizeHandler(){super._resizeHandler(),kh()}}const Wc=t=>class extends t{static get observers(){return["_a11yUpdateGridSize(size, _columnTree, _columnTree.*)"]}_a11yGetHeaderRowCount(t){return t.filter((t=>t.some((t=>t._headerTemplate||t.headerRenderer||t.path||t.header)))).length}_a11yGetFooterRowCount(t){return t.filter((t=>t.some((t=>t._headerTemplate||t.headerRenderer)))).length}_a11yUpdateGridSize(t,e){if(void 0===t||void 0===e)return;const i=e[e.length-1];this.$.table.setAttribute("aria-rowcount",t+this._a11yGetHeaderRowCount(e)+this._a11yGetFooterRowCount(e)),this.$.table.setAttribute("aria-colcount",i&&i.length||0),this._a11yUpdateHeaderRows(),this._a11yUpdateFooterRows()}_a11yUpdateHeaderRows(){Array.from(this.$.header.children).forEach(((t,e)=>t.setAttribute("aria-rowindex",e+1)))}_a11yUpdateFooterRows(){Array.from(this.$.footer.children).forEach(((t,e)=>t.setAttribute("aria-rowindex",this._a11yGetHeaderRowCount(this._columnTree)+this.size+e+1)))}_a11yUpdateRowRowindex(t,e){t.setAttribute("aria-rowindex",e+this._a11yGetHeaderRowCount(this._columnTree)+1)}_a11yUpdateRowSelected(t,e){t.setAttribute("aria-selected",Boolean(e)),Array.from(t.children).forEach((t=>t.setAttribute("aria-selected",Boolean(e))))}_a11yUpdateRowLevel(t,e){t.setAttribute("aria-level",e+1)}_a11yUpdateRowDetailsOpened(t,e){Array.from(t.children).forEach((t=>{"boolean"==typeof e?t.setAttribute("aria-expanded",e):t.hasAttribute("aria-expanded")&&t.removeAttribute("aria-expanded")}))}_a11ySetRowDetailsCell(t,e){Array.from(t.children).forEach((t=>{t!==e&&t.setAttribute("aria-controls",e.id)}))}_a11yUpdateCellColspan(t,e){t.setAttribute("aria-colspan",Number(e))}_a11yUpdateSorters(){Array.from(this.querySelectorAll("vaadin-grid-sorter")).forEach((t=>{let e=t.parentNode;for(;e&&"vaadin-grid-cell-content"!==e.localName;)e=e.parentNode;e&&e.assignedSlot&&e.assignedSlot.parentNode.setAttribute("aria-sort",{asc:"ascending",desc:"descending"}[String(t.direction)]||"none")}))}},Jc=t=>class extends t{static get properties(){return{activeItem:{type:Object,notify:!0,value:null}}}ready(){super.ready(),this.$.scroller.addEventListener("click",this._onClick.bind(this)),this.addEventListener("cell-activate",this._activateItem.bind(this))}_activateItem(t){const e=t.detail.model,i=e?e.item:null;i&&(this.activeItem=this._itemsEqual(this.activeItem,i)?null:i)}_onClick(t){if(t.defaultPrevented)return;const e=t.composedPath(),i=e[e.indexOf(this.$.table)-3];if(!i||i.getAttribute("part").indexOf("details-cell")>-1)return;const s=i._content,r=this.getRootNode().activeElement;s.contains(r)||this._isFocusable(t.target)||this.dispatchEvent(new CustomEvent("cell-activate",{detail:{model:this.__getRowModel(i.parentElement)}}))}_isFocusable(t){return Yc(t)}},Yc=t=>{if(!t.parentNode)return!1;const e=-1!==Array.from(t.parentNode.querySelectorAll("[tabindex], button, input, select, textarea, object, iframe, label, a[href], area[href]")).filter((t=>"cell body-cell"!==t.getAttribute("part"))).indexOf(t);return!t.disabled&&e},Kc=t=>class extends t{static get properties(){return{items:Array}}static get observers(){return["_itemsChanged(items, items.*, isAttached)"]}_itemsChanged(t,e,i){if(i){if(!Array.isArray(t))return null==t&&(this.size=0),void(this.dataProvider===this._arrayDataProvider&&(this.dataProvider=void 0));this.size=t.length,this.dataProvider=this.dataProvider||this._arrayDataProvider,this.clearCache(),this._ensureFirstPageLoaded()}}_arrayDataProvider(t,e){let i=(Array.isArray(this.items)?this.items:[]).slice(0);this._filters&&this._checkPaths(this._filters,"filtering",i)&&(i=this._filter(i)),this.size=i.length,t.sortOrders.length&&this._checkPaths(this._sorters,"sorting",i)&&(i=i.sort(this._multiSort.bind(this)));const s=t.page*t.pageSize;e(i.slice(s,s+t.pageSize),i.length)}_checkPaths(t,e,i){if(!i.length)return!1;let s=!0;for(let r in t){const n=t[r].path;if(!n||-1===n.indexOf("."))continue;const o=n.replace(/\.[^.]*$/,"");void 0===Bc.get(o,i[0])&&(console.warn(`Path "${n}" used for ${e} does not exist in all of the items, ${e} is disabled.`),s=!1)}return s}_multiSort(t,e){return this._sorters.map((i=>"asc"===i.direction?this._compare(Bc.get(i.path,t),Bc.get(i.path,e)):"desc"===i.direction?this._compare(Bc.get(i.path,e),Bc.get(i.path,t)):0)).reduce(((t,e)=>t||e),0)}_normalizeEmptyValue(t){return[void 0,null].indexOf(t)>=0?"":isNaN(t)?t.toString():t}_compare(t,e){return(t=this._normalizeEmptyValue(t))<(e=this._normalizeEmptyValue(e))?-1:t>e?1:0}_filter(t){return t.filter((t=>0===this._filters.filter((e=>{const i=this._normalizeEmptyValue(Bc.get(e.path,t)),s=this._normalizeEmptyValue(e.value).toString().toLowerCase();return-1===i.toString().toLowerCase().indexOf(s)})).length))}},Qc=t=>class extends(_h(t)){ready(){super.ready();const t=this.$.scroller;dh(t,"track",this._onHeaderTrack.bind(this)),t.addEventListener("touchmove",(e=>t.hasAttribute("column-resizing")&&e.preventDefault())),t.addEventListener("contextmenu",(t=>"resize-handle"==t.target.getAttribute("part")&&t.preventDefault())),t.addEventListener("mousedown",(t=>"resize-handle"===t.target.getAttribute("part")&&t.preventDefault()))}_onHeaderTrack(t){const e=t.target;if("resize-handle"===e.getAttribute("part")){let i=e.parentElement._column;for(this._toggleAttribute("column-resizing",!0,this.$.scroller);"vaadin-grid-column-group"===i.localName;)i=Array.prototype.slice.call(i._childColumns,0).sort((function(t,e){return t._order-e._order})).filter((function(t){return!t.hidden})).pop();const s=Array.from(this.$.header.querySelectorAll('[part~="row"]:last-child [part~="cell"]')),r=s.filter((t=>t._column===i))[0];if(r.offsetWidth){const e=window.getComputedStyle(r),s=10+parseInt(e.paddingLeft)+parseInt(e.paddingRight)+parseInt(e.borderLeftWidth)+parseInt(e.borderRightWidth)+parseInt(e.marginLeft)+parseInt(e.marginRight),n=r.offsetWidth+(this.__isRTL?r.getBoundingClientRect().left-t.detail.x:t.detail.x-r.getBoundingClientRect().right);i.width=Math.max(s,n)+"px",i.flexGrow=0}s.sort((function(t,e){return t._column._order-e._column._order})).forEach((function(t,e,i){e<i.indexOf(r)&&(t._column.width=t.offsetWidth+"px",t._column.flexGrow=0)})),"end"===t.detail.state&&(this._toggleAttribute("column-resizing",!1,this.$.scroller),this.dispatchEvent(new CustomEvent("column-resize",{detail:{resizedColumn:i}}))),this._resizeHandler()}}},Zc=class t{constructor(t,e,i){this.grid=t,this.parentCache=e,this.parentItem=i,this.itemCaches={},this.items={},this.effectiveSize=0,this.size=0,this.pendingRequests={}}isLoading(){return Boolean(Object.keys(this.pendingRequests).length||Object.keys(this.itemCaches).filter((t=>this.itemCaches[t].isLoading()))[0])}getItemForIndex(t){const{cache:e,scaledIndex:i}=this.getCacheAndIndex(t);return e.items[i]}updateSize(){this.effectiveSize=!this.parentItem||this.grid._isExpanded(this.parentItem)?this.size+Object.keys(this.itemCaches).reduce(((t,e)=>{const i=this.itemCaches[e];return i.updateSize(),t+i.effectiveSize}),0):0}ensureSubCacheForScaledIndex(e){if(!this.itemCaches[e]){const i=new t(this.grid,this,this.items[e]);this.itemCaches[e]=i,this.grid._loadPage(0,i)}}getCacheAndIndex(t){let e=t;const i=Object.keys(this.itemCaches);for(let t=0;t<i.length;t++){const s=Number(i[t]),r=this.itemCaches[s];if(e<=s)return{cache:this,scaledIndex:e};if(e<=s+r.effectiveSize)return r.getCacheAndIndex(e-s-1);e-=r.effectiveSize}return{cache:this,scaledIndex:e}}},Xc=t=>class extends t{static get properties(){return{pageSize:{type:Number,value:50,observer:"_pageSizeChanged"},dataProvider:{type:Object,notify:!0,observer:"_dataProviderChanged"},loading:{type:Boolean,notify:!0,readOnly:!0,reflectToAttribute:!0},_cache:{type:Object,value:function(){return new Zc(this)}},itemIdPath:{type:String,value:null},expandedItems:{type:Object,notify:!0,value:()=>[]}}}static get observers(){return["_sizeChanged(size)","_itemIdPathChanged(itemIdPath)","_expandedItemsChanged(expandedItems.*)"]}_sizeChanged(t){const e=t-this._cache.size;this._cache.size+=e,this._cache.effectiveSize+=e,this._effectiveSize=this._cache.effectiveSize,this._increasePoolIfNeeded(0),this._debounceIncreasePool&&this._debounceIncreasePool.flush()}_getItem(t,e){if(t>=this._effectiveSize)return;e.index=t;const{cache:i,scaledIndex:s}=this._cache.getCacheAndIndex(t),r=i.items[s];r?(this._toggleAttribute("loading",!1,e),this._updateItem(e,r),this._isExpanded(r)&&i.ensureSubCacheForScaledIndex(s)):(this._toggleAttribute("loading",!0,e),this._loadPage(this._getPageForIndex(s),i))}_expandedInstanceChangedCallback(t,e){void 0!==t.item&&(e?this.expandItem(t.item):this.collapseItem(t.item))}getItemId(t){return this.itemIdPath?this.get(this.itemIdPath,t):t}_isExpanded(t){return this.__expandedKeys.has(this.getItemId(t))}_expandedItemsChanged(){this.__cacheExpandedKeys(),this._cache.updateSize(),this._effectiveSize=this._cache.effectiveSize,this._assignModels()}_itemIdPathChanged(){this.__cacheExpandedKeys()}__cacheExpandedKeys(){this.expandedItems&&(this.__expandedKeys=new Set,this.expandedItems.forEach((t=>{this.__expandedKeys.add(this.getItemId(t))})))}expandItem(t){this._isExpanded(t)||this.push("expandedItems",t)}collapseItem(t){this._isExpanded(t)&&this.splice("expandedItems",this._getItemIndexInArray(t,this.expandedItems),1)}_getIndexLevel(t){let{cache:e}=this._cache.getCacheAndIndex(t),i=0;for(;e.parentCache;)e=e.parentCache,i++;return i}_canPopulate(){return Boolean(this._hasData&&this._columnTree)}_loadPage(t,e){if(!e.pendingRequests[t]&&this.dataProvider){this._setLoading(!0),e.pendingRequests[t]=!0;const i={page:t,pageSize:this.pageSize,sortOrders:this._mapSorters(),filters:this._mapFilters(),parentItem:e.parentItem};this._debounceIncreasePool&&this._debounceIncreasePool.flush(),this.dataProvider(i,((s,r)=>{void 0!==r?e.size=r:i.parentItem&&(e.size=s.length);const n=Array.from(this.$.items.children).map((t=>t._item));s.forEach(((i,s)=>{const r=t*this.pageSize+s;e.items[r]=i,this._isExpanded(i)&&n.indexOf(i)>-1&&e.ensureSubCacheForScaledIndex(r)})),this._hasData=!0,delete e.pendingRequests[t],this._debouncerApplyCachedData=za.debounce(this._debouncerApplyCachedData,Tl.after(0),(()=>{this._setLoading(!1),this._cache.updateSize(),this._effectiveSize=this._cache.effectiveSize,Array.from(this.$.items.children).filter((t=>!t.hidden)).forEach((t=>{this._cache.getItemForIndex(t.index)&&this._getItem(t.index,t)})),this._increasePoolIfNeeded(0),this.__scrollToPendingIndex()})),this._cache.isLoading()||this._debouncerApplyCachedData.flush(),this.__itemsReceived()}))}}_getPageForIndex(t){return Math.floor(t/this.pageSize)}clearCache(){this._cache=new Zc(this),Array.from(this.$.items.children).forEach((t=>{Array.from(t.children).forEach((t=>{t._instance&&t._instance._setPendingProperty("item",{},!1)}))})),this._cache.size=this.size||0,this._cache.updateSize(),this._hasData=!1,this._assignModels(),this._effectiveSize&&this._initialPoolCreated||this._loadPage(0,this._cache)}_pageSizeChanged(t,e){void 0!==e&&t!==e&&this.clearCache()}_checkSize(){void 0===this.size&&0===this._effectiveSize&&console.warn("The <vaadin-grid> needs the total number of items in order to display rows. Set the total number of items to the `size` property, or provide the total number of items in the second argument of the `dataProvider`s `callback` call.")}_dataProviderChanged(t,e){void 0!==e&&this.clearCache(),t&&this.items&&this.items.length&&this._scrollToIndex(this._firstVisibleIndex),this._ensureFirstPageLoaded(),this._debouncerCheckSize=za.debounce(this._debouncerCheckSize,Tl.after(2e3),this._checkSize.bind(this)),this._scrollHandler()}_ensureFirstPageLoaded(){this._hasData||this._loadPage(0,this._cache)}_itemsEqual(t,e){return this.getItemId(t)===this.getItemId(e)}_getItemIndexInArray(t,e){let i=-1;return e.forEach(((e,s)=>{this._itemsEqual(e,t)&&(i=s)})),i}scrollToIndex(t){super.scrollToIndex(t),isNaN(t)||!this._cache.isLoading()&&this.clientHeight||(this.__pendingScrollToIndex=t)}__scrollToPendingIndex(){if(this.__pendingScrollToIndex&&this.$.items.children.length){const t=this.__pendingScrollToIndex;delete this.__pendingScrollToIndex,this._debounceIncreasePool&&this._debounceIncreasePool.flush(),this.scrollToIndex(t)}}},td=t=>class extends t{ready(){super.ready(),this._addNodeObserver()}_hasColumnGroups(t){for(let e=0;e<t.length;e++)if("vaadin-grid-column-group"===t[e].localName)return!0;return!1}_getChildColumns(t){return qu.getFlattenedNodes(t).filter(this._isColumnElement)}_flattenColumnGroups(t){return t.map((t=>"vaadin-grid-column-group"===t.localName?this._getChildColumns(t):[t])).reduce(((t,e)=>t.concat(e)),[])}_getColumnTree(){const t=[];for(let e=qu.getFlattenedNodes(this).filter(this._isColumnElement);t.push(e),this._hasColumnGroups(e);)e=this._flattenColumnGroups(e);return t}_updateColumnTree(){const t=this._getColumnTree();this._arrayEquals(t,this._columnTree)||(this._columnTree=t)}_addNodeObserver(){this._observer=new qu(this,(t=>{const e=t.addedNodes.filter((t=>"template"===t.localName&&t.classList.contains("row-details")))[0];e&&this._rowDetailsTemplate!==e&&(this._rowDetailsTemplate=e);const i=t=>t.filter(this._isColumnElement).length>0;if(i(t.addedNodes)||i(t.removedNodes)){const e=t.removedNodes.flatMap((t=>t._allCells)),i=t=>e.filter((e=>e._content.contains(t))).length;this.__removeSorters(this._sorters.filter(i)),this.__removeFilters(this._filters.filter(i)),this._updateColumnTree()}this._debouncerCheckImports=za.debounce(this._debouncerCheckImports,Tl.after(2e3),this._checkImports.bind(this)),this._ensureFirstPageLoaded()}))}_arrayEquals(t,e){if(!t||!e||t.length!=e.length)return!1;for(let i=0,s=t.length;i<s;i++)if(t[i]instanceof Array&&e[i]instanceof Array){if(!this._arrayEquals(t[i],e[i]))return!1}else if(t[i]!=e[i])return!1;return!0}_checkImports(){["vaadin-grid-column-group","vaadin-grid-filter","vaadin-grid-filter-column","vaadin-grid-tree-toggle","vaadin-grid-selection-column","vaadin-grid-sort-column","vaadin-grid-sorter"].forEach((t=>{const e=this.querySelector(t);!e||e instanceof Fa||console.warn(`Make sure you have imported the required module for <${t}> element.`)}))}_updateFirstAndLastColumn(){Array.from(this.shadowRoot.querySelectorAll("tr")).forEach((t=>this._updateFirstAndLastColumnForRow(t)))}_updateFirstAndLastColumnForRow(t){Array.from(t.querySelectorAll('[part~="cell"]:not([part~="details-cell"])')).sort(((t,e)=>t._column._order-e._column._order)).forEach(((t,e,i)=>{this._toggleAttribute("first-column",0===e,t),this._toggleAttribute("last-column",e===i.length-1,t)}))}_isColumnElement(t){return t.nodeType===Node.ELEMENT_NODE&&/\bcolumn\b/.test(t.localName)}},ed=t=>class extends t{getEventContext(t){const e={},i=t.composedPath(),s=i[i.indexOf(this.$.table)-3];return s?(e.section=["body","header","footer","details"].filter((t=>s.getAttribute("part").indexOf(t)>-1))[0],s._column&&(e.column=s._column),"body"!==e.section&&"details"!==e.section||Object.assign(e,this.__getRowModel(s.parentElement)),e):e}},id=t=>class extends t{static get properties(){return{_filters:{type:Array,value:function(){return[]}}}}ready(){super.ready(),this.addEventListener("filter-changed",this._filterChanged.bind(this))}_filterChanged(t){t.stopPropagation(),this.__addFilter(t.target),this.__applyFilters()}__removeFilters(t){0!=t.length&&(this._filters=this._filters.filter((e=>t.indexOf(e)<0)),this.__applyFilters())}__addFilter(t){-1===this._filters.indexOf(t)&&this._filters.push(t)}__applyFilters(){this.dataProvider&&this.isAttached&&this.clearCache()}_mapFilters(){return this._filters.map((t=>({path:t.path,value:t.value})))}};class sd extends Fa{static get is(){return"vaadin-grid-templatizer"}static get properties(){return{dataHost:Object,template:Object,_templateInstances:{type:Array,value:function(){return[]}},_parentPathValues:{value:function(){return{}}},_grid:Object}}static get observers(){return["_templateInstancesChanged(_templateInstances.*, _parentPathValues.*)"]}constructor(){super(),this._instanceProps={detailsOpened:!0,index:!0,item:!0,selected:!0,expanded:!0,level:!0}}createInstance(){this._ensureTemplatized();const t=new this._TemplateClass({});return this.addInstance(t),t}addInstance(t){-1===this._templateInstances.indexOf(t)&&(this._templateInstances.push(t),requestAnimationFrame((()=>this.notifyPath("_templateInstances.*",this._templateInstances))))}removeInstance(t){const e=this._templateInstances.indexOf(t);this.splice("_templateInstances",e,1)}_ensureTemplatized(){this._TemplateClass||(this._TemplateClass=Tc(this.template,this,{instanceProps:this._instanceProps,parentModel:!0,forwardHostProp:function(t,e){this._forwardParentProp(t,e),this._templateInstances&&this._templateInstances.forEach((i=>i.notifyPath(t,e)))},notifyInstanceProp:function(t,e,i){if("index"===e||"item"===e)return;const s=`__${e}__`;if(t[s]===i)return;t[s]=i;const r=Array.from(this._grid.$.items.children).filter((e=>this._grid._itemsEqual(e._item,t.item)))[0];r&&Array.from(r.children).forEach((t=>{t._instance&&(t._instance[s]=i,t._instance.notifyPath(e,i))}));const n="item.";if(Array.isArray(this._grid.items)&&0===e.indexOf(n)){const s=this._grid.items.indexOf(t.item),r=e.slice(n.length);this._grid.notifyPath(`items.${s}.${r}`,i)}const o=`_${e}InstanceChangedCallback`;this._grid&&this._grid[o]&&this._grid[o](t,i)}}))}_forwardParentProp(t,e){this._parentPathValues[t]=e,this._templateInstances.forEach((i=>i.notifyPath(t,e)))}_templateInstancesChanged(t){let e,i;if("_templateInstances"===t.path)e=0,i=this._templateInstances.length;else{if("_templateInstances.splices"!==t.path)return;e=t.value.index,i=t.value.addedCount}Object.keys(this._parentPathValues||{}).forEach((t=>{for(let s=e;s<e+i;s++)this._templateInstances[s].set(t,this._parentPathValues[t])}))}}customElements.define(sd.is,sd);const rd=t=>class extends t{static get properties(){return{detailsOpenedItems:{type:Array,value:function(){return[]}},_rowDetailsTemplate:Object,rowDetailsRenderer:Function,_detailsCells:{type:Array}}}static get observers(){return["_detailsOpenedItemsChanged(detailsOpenedItems.*, _rowDetailsTemplate, rowDetailsRenderer)","_rowDetailsTemplateOrRendererChanged(_rowDetailsTemplate, rowDetailsRenderer)"]}_rowDetailsTemplateOrRendererChanged(t,e){if(t&&e)throw new Error("You should only use either a renderer or a template for row details");if(t||e){if(t&&!t.templatizer){const e=new sd;e._grid=this,e.dataHost=this.dataHost,e.template=t,t.templatizer=e}this._columnTree&&Array.from(this.$.items.children).forEach((t=>{t.querySelector("[part~=details-cell]")||(this._updateRow(t,this._columnTree[this._columnTree.length-1]),this._a11yUpdateRowDetailsOpened(t,!1)),delete t.querySelector("[part~=details-cell]")._instance})),this.detailsOpenedItems.length&&(Array.from(this.$.items.children).forEach(this._toggleDetailsCell,this),this._update())}}_detailsOpenedItemsChanged(t){"detailsOpenedItems.length"!==t.path&&t.value&&Array.from(this.$.items.children).forEach((t=>{this._toggleDetailsCell(t,t._item),this._a11yUpdateRowDetailsOpened(t,this._isDetailsOpened(t._item)),this._toggleAttribute("details-opened",this._isDetailsOpened(t._item),t)}))}_configureDetailsCell(t){t.setAttribute("part","cell details-cell"),this._toggleAttribute("frozen",!0,t)}_toggleDetailsCell(t,e){const i=t.querySelector('[part~="details-cell"]');if(!i)return;const s=!this._isDetailsOpened(e),r=!!i.hidden!==s;(i._instance||i._renderer)&&i.hidden===s||(i.hidden=s,s?t.style.removeProperty("padding-bottom"):(this.rowDetailsRenderer?(i._renderer=this.rowDetailsRenderer,i._renderer.call(this,i._content,this,{index:t.index,item:e})):this._rowDetailsTemplate&&!i._instance&&(i._instance=this._rowDetailsTemplate.templatizer.createInstance(),i._content.innerHTML="",i._content.appendChild(i._instance.root),this._updateItem(t,e)),kh(),t.style.setProperty("padding-bottom",`${i.offsetHeight}px`),requestAnimationFrame((()=>this.notifyResize())))),r&&(this._updateMetrics(),this._positionItems())}_updateDetailsCellHeights(){Array.from(this.$.items.querySelectorAll('[part~="details-cell"]:not([hidden])')).forEach((t=>{t.parentElement.style.setProperty("padding-bottom",`${t.offsetHeight}px`)}))}_isDetailsOpened(t){return this.detailsOpenedItems&&-1!==this._getItemIndexInArray(t,this.detailsOpenedItems)}openItemDetails(t){this._isDetailsOpened(t)||this.push("detailsOpenedItems",t)}closeItemDetails(t){this._isDetailsOpened(t)&&this.splice("detailsOpenedItems",this._getItemIndexInArray(t,this.detailsOpenedItems),1)}_detailsOpenedInstanceChangedCallback(t,e){e?this.openItemDetails(t.item):this.closeItemDetails(t.item)}},nd=t=>class extends t{static get properties(){return{_frozenCells:{type:Array,value:()=>[]},_rowWithFocusedElement:Element,_deltaYAcc:{type:Number,value:0},_useSticky:{type:Boolean,value:window.CSS&&window.CSS.supports&&(window.CSS.supports("position","sticky")||window.CSS.supports("position","-webkit-sticky"))}}}static get observers(){return["_scrollViewportHeightUpdated(_viewportHeight)"]}set _scrollTop(t){this.$.table.scrollTop=t}get _scrollTop(){return this.$.table.scrollTop}constructor(){super(),this._scrollLineHeight=this._getScrollLineHeight()}_getScrollLineHeight(){const t=document.createElement("div");t.style.fontSize="initial",t.style.display="none",document.body.appendChild(t);const e=window.getComputedStyle(t).fontSize;return document.body.removeChild(t),e?window.parseInt(e):void 0}_scrollViewportHeightUpdated(t){this._scrollPageHeight=t-this.$.header.clientHeight-this.$.footer.clientHeight-this._scrollLineHeight}ready(){super.ready(),this.$.outerscroller=document.createElement("div"),this.scrollTarget=this.$.table,this.addEventListener("wheel",this._onWheel),this.$.items.addEventListener("focusin",(t=>{const e=t.composedPath().indexOf(this.$.items);this._rowWithFocusedElement=t.composedPath()[e-1]})),this.$.items.addEventListener("focusout",(()=>this._rowWithFocusedElement=void 0)),this.scrollTarget.addEventListener("mousedown",(()=>this.__mouseDown=!0)),this.scrollTarget.addEventListener("mouseup",(()=>{this.__mouseDown=!1,this.__pendingReorder&&(this.__pendingReorder=!1,setTimeout((()=>this._reorderRows()),500))}))}scrollToIndex(t){this._accessIronListAPI((()=>super.scrollToIndex(t)))}_onWheel(t){if(t.ctrlKey||this._hasScrolledAncestor(t.target,t.deltaX,t.deltaY))return;const e=this.$.table;let i=t.deltaY;if(t.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this._scrollLineHeight:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._scrollPageHeight),this._wheelAnimationFrame)return this._deltaYAcc+=i,void t.preventDefault();i+=this._deltaYAcc,this._deltaYAcc=0,this._wheelAnimationFrame=!0,this._debouncerWheelAnimationFrame=za.debounce(this._debouncerWheelAnimationFrame,El,(()=>this._wheelAnimationFrame=!1));const s=Math.abs(t.deltaX)+Math.abs(i);this._canScroll(e,t.deltaX,i)?(t.preventDefault(),e.scrollTop+=i,e.scrollLeft+=t.deltaX,this._scrollHandler(),this._hasResidualMomentum=!0,this._ignoreNewWheel=!0,this._debouncerIgnoreNewWheel=za.debounce(this._debouncerIgnoreNewWheel,Tl.after(500),(()=>this._ignoreNewWheel=!1))):this._hasResidualMomentum&&s<=this._previousMomentum||this._ignoreNewWheel?t.preventDefault():s>this._previousMomentum&&(this._hasResidualMomentum=!1),this._previousMomentum=s}_hasScrolledAncestor(t,e,i){return"vaadin-grid-cell-content"!==t.localName&&(!(!this._canScroll(t,e,i)||-1===["auto","scroll"].indexOf(getComputedStyle(t).overflow))||(t!==this&&t.parentElement?this._hasScrolledAncestor(t.parentElement,e,i):void 0))}_canScroll(t,e,i){return i>0&&t.scrollTop<t.scrollHeight-t.offsetHeight||i<0&&t.scrollTop>0||e>0&&t.scrollLeft<t.scrollWidth-t.offsetWidth||e<0&&t.scrollLeft>0}_scheduleScrolling(){this._scrollingFrame||(this._scrollingFrame=requestAnimationFrame((()=>this._toggleAttribute("scrolling",!0,this.$.scroller)))),this._debounceScrolling=za.debounce(this._debounceScrolling,Tl.after(500),(()=>{cancelAnimationFrame(this._scrollingFrame),delete this._scrollingFrame,this._toggleAttribute("scrolling",!1,this.$.scroller),this._reorderRows()}))}_afterScroll(){this._translateStationaryElements(),this.hasAttribute("reordering")||this._scheduleScrolling(),this._updateOverflow()}_updateOverflow(){let t="";const e=this.$.table;e.scrollTop<e.scrollHeight-e.clientHeight&&(t+=" bottom"),e.scrollTop>0&&(t+=" top"),e.scrollLeft<e.scrollWidth-e.clientWidth&&(t+=" right"),e.scrollLeft>0&&(t+=" left"),this._debounceOverflow=za.debounce(this._debounceOverflow,El,(()=>{const e=t.trim();e.length>0&&this.getAttribute("overflow")!==e?this.setAttribute("overflow",e):0==e.length&&this.hasAttribute("overflow")&&this.removeAttribute("overflow")}))}_reorderRows(){if(this.__mouseDown)return void(this.__pendingReorder=!0);const t=this.$.items,e=t.querySelectorAll("tr");if(!e.length)return;const i=this._virtualStart+this._vidxOffset,s=this._rowWithFocusedElement||Array.from(e).filter((t=>!t.hidden))[0];if(!s)return;const r=s.index-i,n=Array.from(e).indexOf(s)-r;if(n>0)for(let i=0;i<n;i++)t.appendChild(e[i]);else if(n<0)for(let i=e.length+n;i<e.length;i++)t.insertBefore(e[i],e[0]);if(this._safari){const{transform:t}=this.$.header.style;this.$.header.style.transform="",setTimeout((()=>this.$.header.style.transform=t))}}_frozenCellsChanged(){this._debouncerCacheElements=za.debounce(this._debouncerCacheElements,Ol,(()=>{Array.from(this.shadowRoot.querySelectorAll('[part~="cell"]')).forEach((function(t){t.style.transform=""})),this._frozenCells=Array.prototype.slice.call(this.$.table.querySelectorAll("[frozen]")),this._updateScrollerMeasurements(),this._translateStationaryElements()})),this._updateLastFrozen()}_updateScrollerMeasurements(){this._frozenCells.length>0&&this.__isRTL&&(this.__scrollerMetrics={scrollWidth:this.$.table.scrollWidth,clientWidth:this.$.table.clientWidth})}_updateLastFrozen(){if(!this._columnTree)return;const t=this._columnTree[this._columnTree.length-1].slice(0);t.sort(((t,e)=>t._order-e._order));const e=t.reduce(((t,e,i)=>(e._lastFrozen=!1,e.frozen&&!e.hidden?i:t)),void 0);void 0!==e&&(t[e]._lastFrozen=!0)}_translateStationaryElements(){const t=Math.max(0,this._scrollLeft),e=Math.max(0,this._scrollTop);let i=0,s=0,r=0;if(this._useSticky||(i=t,s=e,r=this.$.table.clientHeight-this.$.footer.offsetHeight-this.$.footer.offsetTop),this.$.header.style.transform=this._getTranslate(-t+i,s),this.$.footer.style.transform=this._getTranslate(-t+i,s+r),this.$.items.style.transform=this._getTranslate(-t+i,0),this._frozenCells.length>0){const t=this.__isRTL?this.__getNormalizedScrollLeft(this.$.table)+this.__scrollerMetrics.clientWidth-this.__scrollerMetrics.scrollWidth:this._scrollLeft,e=this._getTranslate(t,0);for(let t=0;t<this._frozenCells.length;t++)this._frozenCells[t].style.transform=e}}_getTranslate(t,e){return`translate(${t}px, ${e}px)`}},od=t=>class extends t{static get properties(){return{selectedItems:{type:Object,notify:!0,value:()=>[]}}}static get observers(){return["_selectedItemsChanged(selectedItems.*)"]}_isSelected(t){return this.selectedItems&&this._getItemIndexInArray(t,this.selectedItems)>-1}selectItem(t){this._isSelected(t)||this.push("selectedItems",t)}deselectItem(t){const e=this._getItemIndexInArray(t,this.selectedItems);e>-1&&this.splice("selectedItems",e,1)}_toggleItem(t){-1===this._getItemIndexInArray(t,this.selectedItems)?this.selectItem(t):this.deselectItem(t)}_selectedItemsChanged(t){!this.$.items.children.length||"selectedItems"!==t.path&&"selectedItems.splices"!==t.path||Array.from(this.$.items.children).forEach((t=>{this._updateItem(t,t._item)}))}_selectedInstanceChangedCallback(t,e){e?this.selectItem(t.item):this.deselectItem(t.item)}},ld=t=>class extends t{static get properties(){return{multiSort:{type:Boolean,value:!1},_sorters:{type:Array,value:function(){return[]}},_previousSorters:{type:Array,value:function(){return[]}}}}ready(){super.ready(),this.addEventListener("sorter-changed",this._onSorterChanged)}_onSorterChanged(t){const e=t.target;t.stopPropagation(),this.__updateSorter(e),this.__applySorters()}__removeSorters(t){0!=t.length&&(this._sorters=this._sorters.filter((e=>t.indexOf(e)<0)),this.multiSort&&this.__updateSortOrders(),this.__applySorters())}__updateSortOrders(){this._sorters.forEach(((t,e)=>t._order=this._sorters.length>1?e:null),this)}__updateSorter(t){if(t.direction||-1!==this._sorters.indexOf(t))if(t._order=null,this.multiSort)this._removeArrayItem(this._sorters,t),t.direction&&this._sorters.unshift(t),this.__updateSortOrders();else if(t.direction){const e=this._sorters.filter((e=>e!=t));this._sorters=[t],e.forEach((t=>{t._order=null,t.direction=null}))}}__applySorters(){this.dataProvider&&this.isAttached&&JSON.stringify(this._previousSorters)!==JSON.stringify(this._mapSorters())&&this.clearCache(),this._a11yUpdateSorters(),this._previousSorters=this._mapSorters()}_mapSorters(){return this._sorters.map((t=>({path:t.path,direction:t.direction})))}_removeArrayItem(t,e){const i=t.indexOf(e);i>-1&&t.splice(i,1)}},ad=t=>class extends t{static get properties(){return{cellClassNameGenerator:Function}}static get observers(){return["__cellClassNameGeneratorChanged(cellClassNameGenerator)"]}__cellClassNameGeneratorChanged(){this.generateCellClassNames()}generateCellClassNames(){Array.from(this.$.items.children).filter((t=>!t.hidden)).forEach((t=>this._generateCellClassNames(t,this.__getRowModel(t))))}_generateCellClassNames(t,e){Array.from(t.children).forEach((t=>{if(t.__generatedClasses&&t.__generatedClasses.forEach((e=>t.classList.remove(e))),this.cellClassNameGenerator){const i=this.cellClassNameGenerator(t._column,e);t.__generatedClasses=i&&i.split(" ").filter((t=>t.length>0)),t.__generatedClasses&&t.__generatedClasses.forEach((e=>t.classList.add(e)))}}))}},hd=t=>class extends t{static get properties(){return{dropMode:String,rowsDraggable:Boolean,dragFilter:Function,dropFilter:Function,__dndAutoScrollThreshold:{value:50}}}static get observers(){return["_dragDropAccessChanged(rowsDraggable, dropMode, dragFilter, dropFilter)"]}ready(){super.ready(),this.$.table.addEventListener("dragstart",this._onDragStart.bind(this)),this.$.table.addEventListener("dragend",this._onDragEnd.bind(this)),this.$.table.addEventListener("dragover",this._onDragOver.bind(this)),this.$.table.addEventListener("dragleave",this._onDragLeave.bind(this)),this.$.table.addEventListener("drop",this._onDrop.bind(this)),this.$.table.addEventListener("dragenter",(t=>{this.dropMode&&(t.preventDefault(),t.stopPropagation())}))}_onDragStart(t){if(this.rowsDraggable){let e=t.target;if("vaadin-grid-cell-content"===e.localName&&(e=e.assignedSlot.parentNode.parentNode),e.parentNode!==this.$.items)return;if(t.stopPropagation(),this._toggleAttribute("dragging-rows",!0,this),this._safari){const t=e.style.transform;e.style.top=/translateY\((.*)\)/.exec(t)[1],e.style.transform="none",requestAnimationFrame((()=>{e.style.top="",e.style.transform=t}))}const i=e.getBoundingClientRect();this._ios?t.dataTransfer.setDragImage(e):t.dataTransfer.setDragImage(e,t.clientX-i.left,t.clientY-i.top);let s=[e];this._isSelected(e._item)&&(s=this.__getViewportRows().filter((t=>this._isSelected(t._item))).filter((t=>!this.dragFilter||this.dragFilter(this.__getRowModel(t))))),t.dataTransfer.setData("text",this.__formatDefaultTransferData(s)),e.setAttribute("dragstart",s.length>1?s.length:""),this.updateStyles({"--_grid-drag-start-x":t.clientX-i.left+20+"px","--_grid-drag-start-y":t.clientY-i.top+10+"px"}),requestAnimationFrame((()=>{e.removeAttribute("dragstart"),this.updateStyles({"--_grid-drag-start-x":"","--_grid-drag-start-y":""})}));const r=new CustomEvent("grid-dragstart",{detail:{draggedItems:s.map((t=>t._item)),setDragData:(e,i)=>t.dataTransfer.setData(e,i),setDraggedItemsCount:t=>e.setAttribute("dragstart",t)}});r.originalEvent=t,this.dispatchEvent(r)}}_onDragEnd(t){this._toggleAttribute("dragging-rows",!1,this),t.stopPropagation();const e=new CustomEvent("grid-dragend");e.originalEvent=t,this.dispatchEvent(e)}_onDragLeave(t){t.stopPropagation(),this._clearDragStyles()}_onDragOver(t){if(this.dropMode){if(this._dropLocation=void 0,this._dragOverItem=void 0,this.__dndAutoScroll(t.clientY))return void this._clearDragStyles();let e=t.composedPath().filter((t=>"tr"===t.localName))[0];if(this._effectiveSize&&"on-grid"!==this.dropMode)if(e&&e.parentNode===this.$.items){const i=e.getBoundingClientRect();this._dropLocation="on-top","between"===this.dropMode?this._dropLocation=t.clientY-i.top<i.bottom-t.clientY?"above":"below":"on-top-or-between"===this.dropMode&&(t.clientY-i.top<i.height/3?this._dropLocation="above":t.clientY-i.top>i.height/3*2&&(this._dropLocation="below"))}else{if(e)return;if("between"!==this.dropMode&&"on-top-or-between"!==this.dropMode)return;e=Array.from(this.$.items.children).filter((t=>!t.hidden)).pop(),this._dropLocation="below"}else this._dropLocation="empty";if(e&&e.hasAttribute("drop-disabled"))return void(this._dropLocation=void 0);t.stopPropagation(),t.preventDefault(),"empty"===this._dropLocation?this._toggleAttribute("dragover",!0,this):e?(this._dragOverItem=e._item,e.getAttribute("dragover")!==this._dropLocation&&e.setAttribute("dragover",this._dropLocation)):this._clearDragStyles()}}__dndAutoScroll(t){if(this.__dndAutoScrolling)return!0;const e=this.$.header.getBoundingClientRect().bottom,i=this.$.footer.getBoundingClientRect().top,s=e-t+this.__dndAutoScrollThreshold,r=t-i+this.__dndAutoScrollThreshold;let n=0;if(r>0?n=2*r:s>0&&(n=2*-s),n){const t=this.$.table.scrollTop;if(this.$.table.scrollTop+=n,t!==this.$.table.scrollTop)return this.__dndAutoScrolling=!0,setTimeout((()=>this.__dndAutoScrolling=!1),20),this._scrollHandler(),!0}}__getViewportRows(){const t=this.$.header.getBoundingClientRect().bottom,e=this.$.footer.getBoundingClientRect().top;return Array.from(this.$.items.children).filter((i=>{const s=i.getBoundingClientRect();return s.bottom>t&&s.top<e}))}_clearDragStyles(){this.removeAttribute("dragover"),Array.from(this.$.items.children).forEach((t=>t.removeAttribute("dragover")))}_onDrop(t){if(this.dropMode){t.stopPropagation(),t.preventDefault();const e=t.dataTransfer.types&&Array.from(t.dataTransfer.types).map((e=>({type:e,data:t.dataTransfer.getData(e)})));this._clearDragStyles();const i=new CustomEvent("grid-drop",{bubbles:t.bubbles,cancelable:t.cancelable,detail:{dropTargetItem:this._dragOverItem,dropLocation:this._dropLocation,dragData:e}});i.originalEvent=t,this.dispatchEvent(i)}}__formatDefaultTransferData(t){return t.map((t=>Array.from(t.children).filter((t=>!t.hidden&&-1===t.getAttribute("part").indexOf("details-cell"))).sort(((t,e)=>t._column._order>e._column._order?1:-1)).map((t=>t._content.textContent.trim())).filter((t=>t)).join("\t"))).join("\n")}_dragDropAccessChanged(){this.filterDragAndDrop()}filterDragAndDrop(){Array.from(this.$.items.children).filter((t=>!t.hidden)).forEach((t=>{this._filterDragAndDrop(t,this.__getRowModel(t))}))}_filterDragAndDrop(t,e){const i=!this.rowsDraggable||this.dragFilter&&!this.dragFilter(e),s=!this.dropMode||this.dropFilter&&!this.dropFilter(e);Array.from(t.children).map((t=>t._content)).forEach((t=>{i?t.removeAttribute("draggable"):t.setAttribute("draggable",!0)})),this._toggleAttribute("drag-disabled",i,t),this._toggleAttribute("drop-disabled",s,t)}},ud=t=>class extends t{static get properties(){return{_headerFocusable:{type:Object,observer:"_focusableChanged"},_itemsFocusable:{type:Object,observer:"_focusableChanged"},_footerFocusable:{type:Object,observer:"_focusableChanged"},_navigatingIsHidden:Boolean,_focusedItemIndex:{type:Number,value:0},_focusedColumnOrder:Number}}ready(){super.ready(),this._ios||this._android||(this.addEventListener("keydown",this._onKeyDown),this.addEventListener("keyup",this._onKeyUp),this.addEventListener("focusin",this._onFocusIn),this.addEventListener("focusout",this._onFocusOut),this.$.table.addEventListener("focusin",this._onCellFocusIn.bind(this)),this.$.table.addEventListener("focusout",this._onCellFocusOut.bind(this)),this.addEventListener("mousedown",(()=>{this._toggleAttribute("navigating",!1,this),this._isMousedown=!0})),this.addEventListener("mouseup",(()=>this._isMousedown=!1)))}_focusableChanged(t,e){e&&e.setAttribute("tabindex","-1"),t&&t.setAttribute("tabindex","0")}_onKeyDown(t){const e=t.key;let i;switch(e){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"PageUp":case"PageDown":case"Home":case"End":i="Navigation";break;case"Enter":case"Escape":case"F2":i="Interaction";break;case"Tab":i="Tab";break;case" ":i="Space"}this._detectInteracting(t),this.hasAttribute("interacting")&&"Interaction"!==i&&(i=void 0),i&&this[`_on${i}KeyDown`](t,e)}_ensureScrolledToIndex(t){Array.from(this.$.items.children).filter((e=>e.index===t))[0]||this._scrollToIndex(t)}_onNavigationKeyDown(t,e){function i(t){return Array.prototype.indexOf.call(t.parentNode.children,t)}this._scrollHandler(),t.preventDefault();const s=this._lastVisibleIndex-this._firstVisibleIndex-1;let r=0,n=0;switch(e){case"ArrowRight":r=this.__isRTL?-1:1;break;case"ArrowLeft":r=this.__isRTL?1:-1;break;case"Home":r=-1/0,t.ctrlKey&&(n=-1/0);break;case"End":r=1/0,t.ctrlKey&&(n=1/0);break;case"ArrowDown":n=1;break;case"ArrowUp":n=-1;break;case"PageDown":n=s;break;case"PageUp":n=-s}const o=t.composedPath()[0],l=i(o),a=this._elementMatches(o,'[part~="details-cell"]'),h=o.parentNode,u=h.parentNode,c=(u===this.$.items?this._effectiveSize:u.children.length)-1,d=u===this.$.items?void 0!==this._focusedItemIndex?this._focusedItemIndex:h.index:i(h);let p=Math.max(0,Math.min(d+n,c)),m=!1;if(u===this.$.items){const t=h._item,e=this._cache.getItemForIndex(p);m=a?0===n:1===n&&this._isDetailsOpened(t)||-1===n&&p!==d&&this._isDetailsOpened(e),m!==a&&(1===n&&m||-1===n&&!m)&&(p=d)}if(u!==this.$.items)if(p>d)for(;p<c&&u.children[p].hidden;)p++;else if(p<d)for(;p>0&&u.children[p].hidden;)p--;void 0===this._focusedColumnOrder&&(this._focusedColumnOrder=a?0:this._getColumns(u,d).filter((t=>!t.hidden))[l]._order);const f=this._getColumns(u,p).filter((t=>!t.hidden)),g=f.map((t=>t._order)).sort(((t,e)=>t-e)),v=g.length-1,y=g.indexOf(g.slice(0).sort(((t,e)=>Math.abs(t-this._focusedColumnOrder)-Math.abs(e-this._focusedColumnOrder)))[0]),w=0===n&&a?y:Math.max(0,Math.min(y+r,v));w!==y&&(this._focusedColumnOrder=void 0),u===this.$.items&&this._ensureScrolledToIndex(p),this._toggleAttribute("navigating",!0,this);const b=f.reduce(((t,e,i)=>(t[e._order]=i,t)),{})[g[w]],_=u===this.$.items?Array.from(u.children).filter((t=>t.index===p))[0]:u.children[p];if(!_)return;const A=m?Array.from(_.children).filter((t=>this._elementMatches(t,'[part~="details-cell"]')))[0]:_.children[b];if(this._scrollHorizontallyToCell(A),u===this.$.items&&(this._focusedItemIndex=p),u===this.$.items){const t=A.getBoundingClientRect(),e=this.$.footer.getBoundingClientRect().top,i=this.$.header.getBoundingClientRect().bottom;t.bottom>e?(this.$.table.scrollTop+=t.bottom-e,this._scrollHandler()):t.top<i&&(this.$.table.scrollTop-=i-t.top,this._scrollHandler())}A.focus()}_parseEventPath(t){const e=t.indexOf(this.$.table);return{rowGroup:t[e-1],row:t[e-2],cell:t[e-3]}}_onInteractionKeyDown(t,e){const i=t.composedPath()[0],s="input"===i.localName&&!/^(button|checkbox|color|file|image|radio|range|reset|submit)$/i.test(i.type);let r;switch(e){case"Enter":r=!this.hasAttribute("interacting")||!s;break;case"Escape":r=!1;break;case"F2":r=!this.hasAttribute("interacting")}const{cell:n}=this._parseEventPath(t.composedPath());if(this.hasAttribute("interacting")!==r)if(r){const e=n._content.querySelector("[focus-target]")||n._content.firstElementChild;e&&(t.preventDefault(),e.focus(),this._toggleAttribute("interacting",!0,this),this._toggleAttribute("navigating",!1,this))}else t.preventDefault(),this._focusedColumnOrder=void 0,n.focus(),this._toggleAttribute("interacting",!1,this),this._toggleAttribute("navigating",!0,this)}_predictFocusStepTarget(t,e){const i=[this.$.table,this._headerFocusable,this._itemsFocusable,this._footerFocusable,this.$.focusexit];let s=i.indexOf(t);for(s+=e;s>=0&&s<=i.length-1&&(!i[s]||i[s].parentNode.hidden);)s+=e;return i[s]}_onTabKeyDown(t){const e=this._predictFocusStepTarget(t.composedPath()[0],t.shiftKey?-1:1);if(e===this.$.table)this.$.table.focus();else if(e===this.$.focusexit)this.$.focusexit.focus();else if(e===this._itemsFocusable){let i=e;const s=this._itemsFocusable.parentNode;if(this._ensureScrolledToIndex(this._focusedItemIndex),s.index!==this._focusedItemIndex){const t=Array.from(s.children).indexOf(this._itemsFocusable),e=Array.from(this.$.items.children).filter((t=>t.index===this._focusedItemIndex))[0];e&&(i=e.children[t])}t.preventDefault(),i.focus()}else t.preventDefault(),e.focus();this._toggleAttribute("navigating",!0,this)}_onSpaceKeyDown(t){t.preventDefault();const e=t.composedPath()[0];e._content&&e._content.firstElementChild||this.dispatchEvent(new CustomEvent("cell-activate",{detail:{model:this.__getRowModel(e.parentElement)}}))}_onKeyUp(t){if(!/^( |SpaceBar)$/.test(t.key))return;t.preventDefault();const e=t.composedPath()[0];if(e._content&&e._content.firstElementChild){const t=this.hasAttribute("navigating");e._content.firstElementChild.click(),this._toggleAttribute("navigating",t,this)}}_onFocusIn(t){this._isMousedown||this._toggleAttribute("navigating",!0,this);const e=t.composedPath()[0];e===this.$.table||e===this.$.focusexit?(this._predictFocusStepTarget(e,e===this.$.table?1:-1).focus(),this._toggleAttribute("interacting",!1,this)):this._detectInteracting(t)}_onFocusOut(t){this._toggleAttribute("navigating",!1,this),this._detectInteracting(t)}_onCellFocusIn(t){if(this._detectInteracting(t),3===t.composedPath().indexOf(this.$.table)){const e=t.composedPath()[0];this._activeRowGroup=e.parentNode.parentNode,this._activeRowGroup===this.$.header?this._headerFocusable=e:this._activeRowGroup===this.$.items?this._itemsFocusable=e:this._activeRowGroup===this.$.footer&&(this._footerFocusable=e),e._content.dispatchEvent(new CustomEvent("cell-focusin",{bubbles:!1}))}this._detectFocusedItemIndex(t)}_onCellFocusOut(t){3===t.composedPath().indexOf(this.$.table)&&t.composedPath()[0]._content.dispatchEvent(new CustomEvent("cell-focusout",{bubbles:!1}))}_detectInteracting(t){this._toggleAttribute("interacting",t.composedPath().some((t=>"vaadin-grid-cell-content"===t.localName)),this)}_detectFocusedItemIndex(t){const{rowGroup:e,row:i}=this._parseEventPath(t.composedPath());e===this.$.items&&(this._focusedItemIndex=i.index)}_preventScrollerRotatingCellFocus(t,e){t.index===this._focusedItemIndex&&this.hasAttribute("navigating")&&this._activeRowGroup===this.$.items&&(this._navigatingIsHidden=!0,this._toggleAttribute("navigating",!1,this)),e===this._focusedItemIndex&&this._navigatingIsHidden&&(this._navigatingIsHidden=!1,this._toggleAttribute("navigating",!0,this))}_getColumns(t,e){let i=this._columnTree.length-1;return t===this.$.header?i=e:t===this.$.footer&&(i=this._columnTree.length-1-e),this._columnTree[i]}_resetKeyboardNavigation(){if(this.$.header.firstElementChild&&(this._headerFocusable=Array.from(this.$.header.firstElementChild.children).filter((t=>!t.hidden))[0]),this.$.items.firstElementChild){const t=this._iterateItems(((t,e)=>{if(this._firstVisibleIndex===e)return this.$.items.children[t]}));t&&(this._itemsFocusable=Array.from(t.children).filter((t=>!t.hidden))[0])}this.$.footer.firstElementChild&&(this._footerFocusable=Array.from(this.$.footer.firstElementChild.children).filter((t=>!t.hidden))[0])}_scrollHorizontallyToCell(t){if(t.hasAttribute("frozen")||this._elementMatches(t,'[part~="details-cell"]'))return;const e=t.getBoundingClientRect(),i=t.parentNode,s=Array.from(i.children).indexOf(t),r=this.$.table.getBoundingClientRect();let n=r.left,o=r.right;for(let t=s-1;t>=0;t--){const e=i.children[t];if(!e.hasAttribute("hidden")&&!this._elementMatches(e,'[part~="details-cell"]')&&e.hasAttribute("frozen")){n=e.getBoundingClientRect().right;break}}for(let t=s+1;t<i.children.length;t++){const e=i.children[t];if(!e.hasAttribute("hidden")&&!this._elementMatches(e,'[part~="details-cell"]')&&e.hasAttribute("frozen")){o=e.getBoundingClientRect().left;break}}e.left<n&&(this.$.table.scrollLeft+=Math.round(e.left-n)),e.right>o&&(this.$.table.scrollLeft+=Math.round(e.right-o))}_elementMatches(t,e){return t.matches?t.matches(e):-1!==Array.from(t.parentNode.querySelectorAll(e)).indexOf(t)}},cd=t=>class extends(_h(t)){static get properties(){return{columnReorderingAllowed:{type:Boolean,value:!1},_orderBaseScope:{type:Number,value:1e7}}}static get observers(){return["_updateOrders(_columnTree, _columnTree.*)"]}ready(){super.ready(),dh(this,"track",this._onTrackEvent),this._reorderGhost=this.shadowRoot.querySelector('[part="reorder-ghost"]'),this.addEventListener("touchstart",this._onTouchStart.bind(this)),this.addEventListener("touchmove",this._onTouchMove.bind(this)),this.addEventListener("touchend",this._onTouchEnd.bind(this)),this.addEventListener("contextmenu",this._onContextMenu.bind(this))}_onContextMenu(t){this.hasAttribute("reordering")&&t.preventDefault()}_onTouchStart(t){this._startTouchReorderTimeout=setTimeout((()=>{this._onTrackStart({detail:{x:t.touches[0].clientX,y:t.touches[0].clientY}})}),100)}_onTouchMove(t){this._draggedColumn&&t.preventDefault(),clearTimeout(this._startTouchReorderTimeout)}_onTouchEnd(){clearTimeout(this._startTouchReorderTimeout),this._onTrackEnd()}_onTrackEvent(t){if("start"===t.detail.state){const e=t.composedPath(),i=e[e.indexOf(this.$.header)-2];if(!i||!i._content)return;if(i._content.contains(this.getRootNode().activeElement))return;if(this.$.scroller.hasAttribute("column-resizing"))return;this._touchDevice||this._onTrackStart(t)}else"track"===t.detail.state?this._onTrack(t):"end"===t.detail.state&&this._onTrackEnd(t)}_onTrackStart(t){if(!this.columnReorderingAllowed)return;const e=t.composedPath&&t.composedPath();if(e&&e.filter((t=>t.hasAttribute&&t.hasAttribute("draggable")))[0])return;const i=this._cellFromPoint(t.detail.x,t.detail.y);if(i&&-1!==i.getAttribute("part").indexOf("header-cell")){for(this._toggleAttribute("reordering",!0,this),this._draggedColumn=i._column;1===this._draggedColumn.parentElement.childElementCount;)this._draggedColumn=this._draggedColumn.parentElement;this._setSiblingsReorderStatus(this._draggedColumn,"allowed"),this._draggedColumn._reorderStatus="dragging",this._updateGhost(i),this._reorderGhost.style.visibility="visible",this._updateGhostPosition(t.detail.x,this._touchDevice?t.detail.y-50:t.detail.y),this._autoScroller()}}_onTrack(t){if(!this._draggedColumn)return;const e=this._cellFromPoint(t.detail.x,t.detail.y);if(!e)return;const i=this._getTargetColumn(e,this._draggedColumn);this._isSwapAllowed(this._draggedColumn,i)&&this._isSwappableByPosition(i,t.detail.x)&&this._swapColumnOrders(this._draggedColumn,i),this._updateGhostPosition(t.detail.x,this._touchDevice?t.detail.y-50:t.detail.y),this._lastDragClientX=t.detail.x}_onTrackEnd(){this._draggedColumn&&(this._toggleAttribute("reordering",!1,this),this._draggedColumn._reorderStatus="",this._setSiblingsReorderStatus(this._draggedColumn,""),this._draggedColumn=null,this._lastDragClientX=null,this._reorderGhost.style.visibility="hidden",this.dispatchEvent(new CustomEvent("column-reorder",{detail:{columns:this._getColumnsInOrder()}})))}_getColumnsInOrder(){return this._columnTree.slice(0).pop().filter((t=>!t.hidden)).sort(((t,e)=>t._order-e._order))}_cellFromPoint(t,e){t=t||0,e=e||0,this._draggedColumn||this._toggleAttribute("no-content-pointer-events",!0,this.$.scroller);const i=this.shadowRoot.elementFromPoint(t,e);if(this._toggleAttribute("no-content-pointer-events",!1,this.$.scroller),i&&i._column)return i}_updateGhostPosition(t,e){const i=this._reorderGhost.getBoundingClientRect(),s=t-i.width/2,r=e-i.height/2,n=parseInt(this._reorderGhost._left||0),o=parseInt(this._reorderGhost._top||0);this._reorderGhost._left=n-(i.left-s),this._reorderGhost._top=o-(i.top-r),this._reorderGhost.style.transform=`translate(${this._reorderGhost._left}px, ${this._reorderGhost._top}px)`}_updateGhost(t){const e=this._reorderGhost;e.textContent=t._content.innerText;const i=window.getComputedStyle(t);return["boxSizing","display","width","height","background","alignItems","padding","border","flex-direction","overflow"].forEach((t=>e.style[t]=i[t])),e}_updateOrders(t,e){void 0!==t&&void 0!==e&&(t[0].forEach((t=>t._order=0)),t[0].forEach(((t,e)=>t._order=(e+1)*this._orderBaseScope)))}_setSiblingsReorderStatus(t,e){Array.from(t.parentNode.children).filter((e=>/column/.test(e.localName)&&this._isSwapAllowed(e,t))).forEach((t=>t._reorderStatus=e))}_autoScroller(){if(this._lastDragClientX){const t=this._lastDragClientX-this.getBoundingClientRect().right+50,e=this.getBoundingClientRect().left-this._lastDragClientX+50;t>0?this.$.table.scrollLeft+=t/10:e>0&&(this.$.table.scrollLeft-=e/10),this._scrollHandler()}this._draggedColumn&&this.async(this._autoScroller,10)}_isSwapAllowed(t,e){if(t&&e){const i=t.parentElement===e.parentElement,s=t.frozen===e.frozen;return t!==e&&i&&s}}_isSwappableByPosition(t,e){const i=Array.from(this.$.header.querySelectorAll('tr:not([hidden]) [part~="cell"]')).filter((e=>t.contains(e._column)))[0],s=this.$.header.querySelector("tr:not([hidden]) [reorder-status=dragging]").getBoundingClientRect(),r=i.getBoundingClientRect();return r.left>s.left?e>r.right-s.width:e<r.left+s.width}_swapColumnOrders(t,e){const i=t._order;t._order=e._order,e._order=i,this._updateLastFrozen(),this._updateFirstAndLastColumn()}_getTargetColumn(t,e){if(t&&e){let i=t._column;for(;i.parentElement!==e.parentElement&&i!==this;)i=i.parentElement;return i.parentElement===e.parentElement?i:t._column}}},dd=t=>class extends t{static get properties(){return{resizable:{type:Boolean,value:function(){if("vaadin-grid-column-group"===this.localName)return;const t=this.parentNode;return t&&"vaadin-grid-column-group"===t.localName&&t.resizable||!1}},_headerTemplate:{type:Object},_footerTemplate:{type:Object},frozen:{type:Boolean,value:!1},hidden:{type:Boolean},header:{type:String},textAlign:{type:String},_lastFrozen:{type:Boolean,value:!1},_order:Number,_reorderStatus:Boolean,_emptyCells:Array,_headerCell:Object,_footerCell:Object,_grid:Object,headerRenderer:Function,footerRenderer:Function}}static get observers(){return["_widthChanged(width, _headerCell, _footerCell, _cells.*)","_frozenChanged(frozen, _headerCell, _footerCell, _cells.*)","_flexGrowChanged(flexGrow, _headerCell, _footerCell, _cells.*)","_pathOrHeaderChanged(path, header, _headerCell, _footerCell, _cells.*, renderer, headerRenderer, _bodyTemplate, _headerTemplate)","_textAlignChanged(textAlign, _cells.*, _headerCell, _footerCell)","_orderChanged(_order, _headerCell, _footerCell, _cells.*)","_lastFrozenChanged(_lastFrozen)","_setBodyTemplateOrRenderer(_bodyTemplate, renderer, _cells, _cells.*)","_setHeaderTemplateOrRenderer(_headerTemplate, headerRenderer, _headerCell)","_setFooterTemplateOrRenderer(_footerTemplate, footerRenderer, _footerCell)","_resizableChanged(resizable, _headerCell)","_reorderStatusChanged(_reorderStatus, _headerCell, _footerCell, _cells.*)","_hiddenChanged(hidden, _headerCell, _footerCell, _cells.*)"]}connectedCallback(){super.connectedCallback(),this._bodyTemplate&&(this._bodyTemplate.templatizer._grid=this._grid),this._headerTemplate&&(this._headerTemplate.templatizer._grid=this._grid),this._footerTemplate&&(this._footerTemplate.templatizer._grid=this._grid),this._templateObserver.flush(),this._bodyTemplate||this._templateObserver.callback(),requestAnimationFrame((()=>{this._allCells.forEach((t=>{t._content.parentNode||this._grid&&this._grid.appendChild(t._content)}))}))}disconnectedCallback(){super.disconnectedCallback(),requestAnimationFrame((()=>{this._findHostGrid()||this._allCells.forEach((t=>{t._content.parentNode&&t._content.parentNode.removeChild(t._content)}))})),this._gridValue=void 0}_findHostGrid(){let t=this;for(;t&&!/^vaadin.*grid(-pro)?$/.test(t.localName);)t=t.assignedSlot?t.assignedSlot.parentNode:t.parentNode;return t||void 0}get _grid(){return this._gridValue||(this._gridValue=this._findHostGrid()),this._gridValue}get _allCells(){return[].concat(this._cells||[]).concat(this._emptyCells||[]).concat(this._headerCell).concat(this._footerCell).filter((t=>t))}constructor(){super(),this._templateObserver=new qu(this,(()=>{this._headerTemplate=this._prepareHeaderTemplate(),this._footerTemplate=this._prepareFooterTemplate(),this._bodyTemplate=this._prepareBodyTemplate()}))}_prepareHeaderTemplate(){return this._prepareTemplatizer(this._findTemplate(!0)||null,{})}_prepareFooterTemplate(){return this._prepareTemplatizer(this._findTemplate(!1,!0)||null,{})}_prepareBodyTemplate(){return this._prepareTemplatizer(this._findTemplate()||null)}_prepareTemplatizer(t,e){if(t&&!t.templatizer){const i=new sd;i._grid=this._grid,i.dataHost=this.dataHost,i._instanceProps=e||i._instanceProps,i.template=t,t.templatizer=i}return t}_renderHeaderAndFooter(){this.headerRenderer&&this._headerCell&&this.__runRenderer(this.headerRenderer,this._headerCell),this.footerRenderer&&this._footerCell&&this.__runRenderer(this.footerRenderer,this._footerCell)}__runRenderer(t,e,i){const s=[e._content,this];i&&i.item&&s.push(i),t.apply(this,s)}__setColumnTemplateOrRenderer(t,e,i){if(!this.hidden){if(t&&e)throw new Error("You should only use either a renderer or a template");i.forEach((i=>{const s=this._grid.__getRowModel(i.parentElement);if(e)i._renderer=e,(s.item||e===this.headerRenderer||e===this.footerRenderer)&&this.__runRenderer(e,i,s);else if(i._template!==t){i._template=t,i._content.innerHTML="",t.templatizer._grid=t.templatizer._grid||this._grid;const e=t.templatizer.createInstance();i._content.appendChild(e.root),i._instance=e,s.item&&i._instance.setProperties(s)}}))}}_setBodyTemplateOrRenderer(t,e,i){(t||e)&&i&&this.__setColumnTemplateOrRenderer(t,e,i)}_setHeaderTemplateOrRenderer(t,e,i){(t||e)&&i&&this.__setColumnTemplateOrRenderer(t,e,[i])}_setFooterTemplateOrRenderer(t,e,i){(t||e)&&i&&(this.__setColumnTemplateOrRenderer(t,e,[i]),this._grid.__updateHeaderFooterRowVisibility(i.parentElement))}_selectFirstTemplate(t=!1,e=!1){return qu.getFlattenedNodes(this).filter((i=>"template"===i.localName&&i.classList.contains("header")===t&&i.classList.contains("footer")===e))[0]}_findTemplate(t,e){const i=this._selectFirstTemplate(t,e);return i&&this.dataHost&&(i._rootDataHost=this.dataHost._rootDataHost||this.dataHost),i}_flexGrowChanged(t){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("flexGrow"),this._allCells.forEach((e=>e.style.flexGrow=t))}_orderChanged(t){this._allCells.forEach((e=>e.style.order=t))}_widthChanged(t){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("width"),this._allCells.forEach((e=>e.style.width=t)),this._grid&&this._grid.__forceReflow&&this._grid.__forceReflow()}_frozenChanged(t){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("frozen",t),this._allCells.forEach((e=>this._toggleAttribute("frozen",t,e))),this._grid&&this._grid._frozenCellsChanged&&this._grid._frozenCellsChanged()}_lastFrozenChanged(t){this._allCells.forEach((e=>this._toggleAttribute("last-frozen",t,e))),this.parentElement&&this.parentElement._columnPropChanged&&(this.parentElement._lastFrozen=t)}_pathOrHeaderChanged(t,e,i,s,r,n,o,l,a){const h=void 0!==e;!o&&!a&&h&&i&&this.__setTextContent(i._content,e),t&&r.value&&(n||l||this.__setColumnTemplateOrRenderer(void 0,((e,i,{item:s})=>this.__setTextContent(e,this.get(t,s))),r.value),o||a||h||!i||null===e||this.__setTextContent(i._content,this._generateHeader(t))),i&&this._grid.__updateHeaderFooterRowVisibility(i.parentElement)}__setTextContent(t,e){t.textContent!==e&&(t.textContent=e)}_generateHeader(t){return t.substr(t.lastIndexOf(".")+1).replace(/([A-Z])/g,"-$1").toLowerCase().replace(/-/g," ").replace(/^./,(t=>t.toUpperCase()))}_toggleAttribute(t,e,i){i.hasAttribute(t)===!e&&(e?i.setAttribute(t,""):i.removeAttribute(t))}_reorderStatusChanged(t){this._allCells.forEach((e=>e.setAttribute("reorder-status",t)))}_resizableChanged(t,e){void 0!==t&&void 0!==e&&e&&[e].concat(this._emptyCells).forEach((e=>{if(e){const i=e.querySelector('[part~="resize-handle"]');if(i&&e.removeChild(i),t){const t=document.createElement("div");t.setAttribute("part","resize-handle"),e.appendChild(t)}}}))}_textAlignChanged(t){if(void 0===t)return;if(-1===["start","end","center"].indexOf(t))return void console.warn('textAlign can only be set as "start", "end" or "center"');let e;"ltr"===getComputedStyle(this._grid).direction?"start"===t?e="left":"end"===t&&(e="right"):"start"===t?e="right":"end"===t&&(e="left"),this._allCells.forEach((i=>{i._content.style.textAlign=t,getComputedStyle(i._content).textAlign!==t&&(i._content.style.textAlign=e)}))}_hiddenChanged(t){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("hidden",t),!!t!=!!this._previousHidden&&this._grid&&(!0===t&&this._allCells.forEach((t=>{t._content.parentNode&&t._content.parentNode.removeChild(t._content)})),this._grid._debouncerHiddenChanged=za.debounce(this._grid._debouncerHiddenChanged,El,(()=>{this._grid&&this._grid._renderColumnTree&&this._grid._renderColumnTree(this._grid._columnTree)})),this._grid._updateLastFrozen&&this._grid._updateLastFrozen(),this._grid.notifyResize&&this._grid.notifyResize(),this._grid._resetKeyboardNavigation&&this._grid._resetKeyboardNavigation()),this._previousHidden=t}};class pd extends(dd(Oh(Fa))){static get is(){return"vaadin-grid-column"}static get properties(){return{width:{type:String,value:"100px"},flexGrow:{type:Number,value:1},renderer:Function,path:{type:String},autoWidth:{type:Boolean,value:!1},_bodyTemplate:{type:Object},_cells:Array}}}customElements.define(pd.is,pd),nl("vaadin-grid",il`
    @keyframes vaadin-grid-appear {
      to {
        opacity: 1;
      }
    }

    :host {
      display: block;
      animation: 1ms vaadin-grid-appear;
      height: 400px;
      flex: 1 1 auto;
      align-self: stretch;
      position: relative;
    }

    :host([hidden]) {
      display: none !important;
    }

    #scroller {
      display: block;
      transform: translateY(0);
      width: auto;
      height: auto;
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }

    :host([height-by-rows]) {
      height: auto;
      align-self: flex-start;
      flex-grow: 0;
      width: 100%;
    }

    :host([height-by-rows]) #scroller {
      width: 100%;
      height: 100%;
      position: relative;
    }

    #table {
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
      overflow: auto;
      position: relative;
      outline: none;
      /* Workaround for a Desktop Safari bug: new stacking context here prevents the scrollbar from getting hidden */
      z-index: 0;
    }

    #header,
    #footer {
      display: block;
      position: -webkit-sticky;
      position: sticky;
      left: 0;
      overflow: visible;
      width: 100%;
      z-index: 1;
    }

    #header {
      top: 0;
    }

    th {
      text-align: inherit;
    }

    /* Safari doesn't work with "inherit" */
    [safari] th {
      text-align: initial;
    }

    #footer {
      bottom: 0;
    }

    #items {
      flex-grow: 1;
      flex-shrink: 0;
      display: block;
      position: -webkit-sticky;
      position: sticky;
      width: 100%;
      left: 0;
      overflow: visible;
    }

    [part~='row'] {
      display: flex;
      width: 100%;
      box-sizing: border-box;
      margin: 0;
    }

    [part~='row'][loading] [part~='body-cell'] ::slotted(vaadin-grid-cell-content) {
      opacity: 0;
    }

    #items [part~='row'] {
      position: absolute;
    }

    #items [part~='row']:empty {
      height: 1em;
    }

    [part~='cell']:not([part~='details-cell']) {
      flex-shrink: 0;
      flex-grow: 1;
      box-sizing: border-box;
      display: flex;
      width: 100%;
      position: relative;
      align-items: center;
      padding: 0;
      white-space: nowrap;
    }

    [part~='details-cell'] {
      position: absolute;
      bottom: 0;
      width: 100%;
      box-sizing: border-box;
      padding: 0;
    }

    [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      display: block;
      width: 100%;
      box-sizing: border-box;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    [hidden] {
      display: none !important;
    }

    [frozen] {
      z-index: 2;
      will-change: transform;
    }

    [no-scrollbars][safari] #table,
    [no-scrollbars][firefox] #table {
      overflow: hidden;
    }

    /* Reordering styles */
    :host([reordering]) [part~='cell'] ::slotted(vaadin-grid-cell-content),
    :host([reordering]) [part~='resize-handle'],
    #scroller[no-content-pointer-events] [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      pointer-events: none;
    }

    [part~='reorder-ghost'] {
      visibility: hidden;
      position: fixed;
      pointer-events: none;
      opacity: 0.5;

      /* Prevent overflowing the grid in Firefox */
      top: 0;
      left: 0;
    }

    :host([reordering]) {
      -moz-user-select: none;
      -webkit-user-select: none;
      user-select: none;
    }

    /* Resizing styles */
    [part~='resize-handle'] {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
      cursor: col-resize;
      z-index: 1;
    }

    [part~='resize-handle']::before {
      position: absolute;
      content: '';
      height: 100%;
      width: 35px;
      transform: translateX(-50%);
    }

    [last-column] [part~='resize-handle']::before,
    [last-frozen] [part~='resize-handle']::before {
      width: 18px;
      transform: none;
      right: 0;
    }

    #scroller[column-resizing] {
      -ms-user-select: none;
      -moz-user-select: none;
      -webkit-user-select: none;
      user-select: none;
    }

    /* Sizer styles */
    #sizer {
      display: flex;
      position: absolute;
      visibility: hidden;
    }

    #sizer [part~='details-cell'] {
      display: none !important;
    }

    #sizer [part~='cell'][hidden] {
      display: none !important;
    }

    #sizer [part~='cell'] {
      display: block;
      flex-shrink: 0;
      line-height: 0;
      height: 0 !important;
      min-height: 0 !important;
      max-height: 0 !important;
      padding: 0 !important;
      border: none !important;
    }

    #sizer [part~='cell']::before {
      content: '-';
    }

    #sizer [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      display: none !important;
    }

    /* RTL specific styles */

    :host([dir='rtl']) #items,
    :host([dir='rtl']) #header,
    :host([dir='rtl']) #footer {
      left: auto;
    }

    :host([dir='rtl']) [part~='reorder-ghost'] {
      left: auto;
      right: 0;
    }

    :host([dir='rtl']) [part~='resize-handle'] {
      left: 0;
      right: auto;
    }

    :host([dir='rtl']) [part~='resize-handle']::before {
      transform: translateX(50%);
    }

    :host([dir='rtl']) [last-column] [part~='resize-handle']::before,
    :host([dir='rtl']) [last-frozen] [part~='resize-handle']::before {
      left: 0;
      right: auto;
    }
  `,{moduleId:"vaadin-grid-styles"});const md=(()=>{try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}})();class fd extends(Dh(xh(Xc(Kc(td(Jc(nd(od(ld(rd(ud(Wc(id(cd(Qc(ed(hd(ad(Uc))))))))))))))))))){static get template(){return La`
      <div
        id="scroller"
        safari$="[[_safari]]"
        ios$="[[_ios]]"
        loading$="[[loading]]"
        column-reordering-allowed$="[[columnReorderingAllowed]]"
      >
        <table id="table" role="grid" aria-multiselectable="true" tabindex="0">
          <caption id="sizer" part="row"></caption>
          <thead id="header" role="rowgroup"></thead>
          <tbody id="items" role="rowgroup"></tbody>
          <tfoot id="footer" role="rowgroup"></tfoot>
        </table>

        <div part="reorder-ghost"></div>
      </div>

      <div id="focusexit" tabindex="0"></div>
    `}static get is(){return"vaadin-grid"}static get version(){return"6.0.2"}static get observers(){return["_columnTreeChanged(_columnTree, _columnTree.*)"]}static get properties(){return{_safari:{type:Boolean,value:/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},_ios:{type:Boolean,value:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1},_firefox:{type:Boolean,value:navigator.userAgent.toLowerCase().indexOf("firefox")>-1},_android:{type:Boolean,value:/android/i.test(navigator.userAgent)},_touchDevice:{type:Boolean,value:md},heightByRows:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_heightByRowsChanged"},_recalculateColumnWidthOnceLoadingFinished:{type:Boolean,value:!0}}}constructor(){super(),this.addEventListener("animationend",this._onAnimationEnd)}connectedCallback(){super.connectedCallback(),this.recalculateColumnWidths()}attributeChangedCallback(t,e,i){super.attributeChangedCallback(t,e,i),"dir"===t&&(this.__isRTL="rtl"===i,this._updateScrollerMeasurements())}__hasRowsWithClientHeight(){return!!Array.from(this.$.items.children).filter((t=>t.clientHeight)).length}__itemsReceived(){this._recalculateColumnWidthOnceLoadingFinished&&!this._cache.isLoading()&&this.__hasRowsWithClientHeight()&&(this._recalculateColumnWidthOnceLoadingFinished=!1,this.recalculateColumnWidths())}_recalculateColumnWidths(t){t.forEach((t=>{t.width="auto",t._origFlexGrow=t.flexGrow,t.flexGrow=0})),t.forEach((t=>{t._currentWidth=0,t._allCells.forEach((e=>{t._currentWidth=Math.max(t._currentWidth,e.offsetWidth+1)}))})),t.forEach((t=>{t.width=`${t._currentWidth}px`,t.flexGrow=t._origFlexGrow,t._currentWidth=void 0,t._origFlexGrow=void 0}))}recalculateColumnWidths(){if(this._columnTree)if(this._cache.isLoading())this._recalculateColumnWidthOnceLoadingFinished=!0;else{const t=this._getColumns().filter((t=>!t.hidden&&t.autoWidth));this._recalculateColumnWidths(t)}}_createScrollerRows(t){const e=[];for(let i=0;i<t;i++){const t=document.createElement("tr");t.setAttribute("part","row"),t.setAttribute("role","row"),this._columnTree&&this._updateRow(t,this._columnTree[this._columnTree.length-1],"body",!1,!0),e.push(t)}return this._columnTree&&this._columnTree[this._columnTree.length-1].forEach((t=>t.isConnected&&t.notifyPath&&t.notifyPath("_cells.*",t._cells))),function(t,e){Vh||Hh(),$h.push([t,e,void 0])}(this,(()=>{this._updateFirstAndLastColumn(),this._resetKeyboardNavigation()})),e}_getRowTarget(){return this.$.items}_createCell(t){const e="vaadin-grid-cell-content-"+(this._contentIndex=this._contentIndex+1||0),i=document.createElement("vaadin-grid-cell-content");i.setAttribute("slot",e);const s=document.createElement(t);s.id=e.replace("-content-","-"),s.setAttribute("tabindex","-1"),s.setAttribute("role","td"===t?"gridcell":"columnheader");const r=document.createElement("slot");return r.setAttribute("name",e),s.appendChild(r),s._content=i,i.addEventListener("mousedown",(()=>{if(window.chrome){const t=()=>{i.contains(this.getRootNode().activeElement)||s.focus(),document.removeEventListener("mouseup",t,!0)};document.addEventListener("mouseup",t,!0)}else setTimeout((()=>{i.contains(this.getRootNode().activeElement)||s.focus()}))})),s}_updateRow(t,e,i,s,r){i=i||"body";const n=document.createDocumentFragment();Array.from(t.children).forEach((t=>t._vacant=!0)),t.innerHTML="","sizer"!==t.id&&(t.hidden=!0),e.filter((t=>!t.hidden)).forEach(((e,o,l)=>{let a;if("body"===i){if(e._cells=e._cells||[],a=e._cells.filter((t=>t._vacant))[0],a||(a=this._createCell("td"),e._cells.push(a)),a.setAttribute("part","cell body-cell"),t.appendChild(a),o===l.length-1&&(this._rowDetailsTemplate||this.rowDetailsRenderer)){this._detailsCells=this._detailsCells||[];const e=this._detailsCells.filter((t=>t._vacant))[0]||this._createCell("td");-1===this._detailsCells.indexOf(e)&&this._detailsCells.push(e),e._content.parentElement||n.appendChild(e._content),this._configureDetailsCell(e),t.appendChild(e),this._a11ySetRowDetailsCell(t,e),e._vacant=!1}e.notifyPath&&!r&&e.notifyPath("_cells.*",e._cells)}else{const r="header"===i?"th":"td";s||"vaadin-grid-column-group"===e.localName?(a=e[`_${i}Cell`]||this._createCell(r),a._column=e,t.appendChild(a),e[`_${i}Cell`]=a):(e._emptyCells=e._emptyCells||[],a=e._emptyCells.filter((t=>t._vacant))[0]||this._createCell(r),a._column=e,t.appendChild(a),-1===e._emptyCells.indexOf(a)&&e._emptyCells.push(a)),a.setAttribute("part",`cell ${i}-cell`),this.__updateHeaderFooterRowVisibility(t)}a._content.parentElement||n.appendChild(a._content),a._vacant=!1,a._column=e})),this.appendChild(n),this._frozenCellsChanged(),this._updateFirstAndLastColumnForRow(t)}__updateHeaderFooterRowVisibility(t){if(!t)return;const e=Array.from(t.children).filter((e=>{const i=e._column;if(i._emptyCells&&i._emptyCells.indexOf(e)>-1)return!1;if(t.parentElement===this.$.header){if(i.headerRenderer||i._headerTemplate)return!0;if(null===i.header)return!1;if(i.path||void 0!==i.header)return!0}else if(i.footerRenderer||i._footerTemplate)return!0}));t.hidden!==!e.length&&(t.hidden=!e.length,this.notifyResize())}_updateScrollerItem(t,e){this._preventScrollerRotatingCellFocus(t,e),this._columnTree&&(this._toggleAttribute("first",0===e,t),this._toggleAttribute("odd",e%2,t),this._a11yUpdateRowRowindex(t,e),this._getItem(e,t))}_columnTreeChanged(t){this._renderColumnTree(t),this.recalculateColumnWidths()}_renderColumnTree(t){for(Array.from(this.$.items.children).forEach((e=>this._updateRow(e,t[t.length-1],null,!1,!0)));this.$.header.children.length<t.length;){const t=document.createElement("tr");t.setAttribute("part","row"),t.setAttribute("role","row"),this.$.header.appendChild(t);const e=document.createElement("tr");e.setAttribute("part","row"),e.setAttribute("role","row"),this.$.footer.appendChild(e)}for(;this.$.header.children.length>t.length;)this.$.header.removeChild(this.$.header.firstElementChild),this.$.footer.removeChild(this.$.footer.firstElementChild);Array.from(this.$.header.children).forEach(((e,i)=>this._updateRow(e,t[i],"header",i===t.length-1))),Array.from(this.$.footer.children).forEach(((e,i)=>this._updateRow(e,t[t.length-1-i],"footer",0===i))),this._updateRow(this.$.sizer,t[t.length-1]),this._resizeHandler(),this._frozenCellsChanged(),this._updateFirstAndLastColumn(),this._resetKeyboardNavigation(),this._a11yUpdateHeaderRows(),this._a11yUpdateFooterRows(),this.__updateFooterPositioning()}__updateFooterPositioning(){this._firefox&&(this.$.items.style.paddingBottom=0,this.heightByRows||(this.$.items.style.paddingBottom=`${this.$.footer.offsetHeight}px`)),this._ios&&!window.CSS.supports("position","sticky")&&(this.$.table.style.height="",this.$.table.style.minHeight="100%",this.$.table.style.maxHeight="100%",setTimeout((()=>this.$.table.style.height=`${this.$.scroller.offsetHeight}px`)))}_updateItem(t,e){t._item=e;const i=this.__getRowModel(t);this._toggleAttribute("selected",i.selected,t),this._a11yUpdateRowSelected(t,i.selected),this._a11yUpdateRowLevel(t,i.level),this._toggleAttribute("expanded",i.expanded,t),this._toggleAttribute("details-opened",this._isDetailsOpened(e),t),(this._rowDetailsTemplate||this.rowDetailsRenderer)&&this._toggleDetailsCell(t,e),this._generateCellClassNames(t,i),this._filterDragAndDrop(t,i),Array.from(t.children).forEach((t=>{if(t._renderer){const e=t._column||this;t._renderer.call(e,t._content,e,i)}else t._instance&&(t._instance.__detailsOpened__=i.detailsOpened,t._instance.__selected__=i.selected,t._instance.__level__=i.level,t._instance.__expanded__=i.expanded,t._instance.setProperties(i))})),this._debouncerUpdateHeights=za.debounce(this._debouncerUpdateHeights,Tl.after(1),(()=>{this._updateMetrics(),this._positionItems(),this._updateScrollerSize()}))}_resizeHandler(){this._updateDetailsCellHeights(),this._accessIronListAPI(super._resizeHandler,!0),this._updateScrollerMeasurements(),this.__updateFooterPositioning()}_onAnimationEnd(t){0===t.animationName.indexOf("vaadin-grid-appear")&&(this._render(),t.stopPropagation(),this.notifyResize(),this.__itemsReceived(),requestAnimationFrame((()=>{this.__scrollToPendingIndex(),this.$.table.style.webkitOverflowScrolling="touch"})))}_toggleAttribute(t,e,i){i.hasAttribute(t)===!e&&(e?i.setAttribute(t,""):i.removeAttribute(t))}__getRowModel(t){return{index:t.index,item:t._item,level:this._getIndexLevel(t.index),expanded:this._isExpanded(t._item),selected:this._isSelected(t._item),detailsOpened:!(!this._rowDetailsTemplate&&!this.rowDetailsRenderer)&&this._isDetailsOpened(t._item)}}render(){this._columnTree&&(this._columnTree.forEach((t=>{t.forEach((t=>t._renderHeaderAndFooter()))})),this._update())}notifyResize(){super.notifyResize()}_heightByRowsChanged(t,e){(t||e)&&this.notifyResize()}__forceReflow(){this._debouncerForceReflow=za.debounce(this._debouncerForceReflow,El,(()=>{this.$.scroller.style.overflow="hidden",setTimeout((()=>this.$.scroller.style.overflow=""))}))}}customElements.define(fd.is,fd);class gd extends pd{static get template(){return La`
      <template class="header" id="defaultHeaderTemplate">
        <vaadin-checkbox
          class="vaadin-grid-select-all-checkbox"
          aria-label="Select All"
          hidden$="[[_selectAllHidden]]"
          on-checked-changed="_onSelectAllCheckedChanged"
          checked="[[_isChecked(selectAll, _indeterminate)]]"
          indeterminate="[[_indeterminate]]"
        ></vaadin-checkbox>
      </template>
      <template id="defaultBodyTemplate">
        <vaadin-checkbox aria-label="Select Row" checked="{{selected}}"></vaadin-checkbox>
      </template>
    `}static get is(){return"vaadin-grid-selection-column"}static get properties(){return{width:{type:String,value:"58px"},flexGrow:{type:Number,value:0},selectAll:{type:Boolean,value:!1,notify:!0},autoSelect:{type:Boolean,value:!1},_indeterminate:Boolean,_previousActiveItem:Object,_selectAllHidden:Boolean}}static get observers(){return["_onSelectAllChanged(selectAll)"]}_pathOrHeaderChanged(t,e,i,s,r,n,o,l,a){!r.value||void 0===t&&void 0===n||(this._bodyTemplate=l=void 0,this.__cleanCellsOfTemplateProperties(r.value)),!i||void 0===e&&void 0===o||(this._headerTemplate=a=void 0,this.__cleanCellsOfTemplateProperties([i])),super._pathOrHeaderChanged(t,e,i,s,r,n,o,l,a)}__cleanCellsOfTemplateProperties(t){t.forEach((t=>{t._content.innerHTML="",delete t._instance,delete t._template}))}_prepareHeaderTemplate(){const t=this._prepareTemplatizer(this._findTemplate(!0)||this.$.defaultHeaderTemplate);return t.templatizer.dataHost=t===this.$.defaultHeaderTemplate?this:this.dataHost,t}_prepareBodyTemplate(){const t=this._prepareTemplatizer(this._findTemplate()||this.$.defaultBodyTemplate);return t.templatizer.dataHost=t===this.$.defaultBodyTemplate?this:this.dataHost,t}constructor(){super(),this._boundOnActiveItemChanged=this._onActiveItemChanged.bind(this),this._boundOnDataProviderChanged=this._onDataProviderChanged.bind(this),this._boundOnSelectedItemsChanged=this._onSelectedItemsChanged.bind(this)}disconnectedCallback(){this._grid.removeEventListener("active-item-changed",this._boundOnActiveItemChanged),this._grid.removeEventListener("data-provider-changed",this._boundOnDataProviderChanged),this._grid.removeEventListener("filter-changed",this._boundOnSelectedItemsChanged),this._grid.removeEventListener("selected-items-changed",this._boundOnSelectedItemsChanged),super.disconnectedCallback()}connectedCallback(){super.connectedCallback(),this._grid&&(this._grid.addEventListener("active-item-changed",this._boundOnActiveItemChanged),this._grid.addEventListener("data-provider-changed",this._boundOnDataProviderChanged),this._grid.addEventListener("filter-changed",this._boundOnSelectedItemsChanged),this._grid.addEventListener("selected-items-changed",this._boundOnSelectedItemsChanged))}_onSelectAllChanged(t){void 0!==t&&this._grid&&(this._selectAllChangeLock||(this._grid.selectedItems=t&&Array.isArray(this._grid.items)?this._grid._filter(this._grid.items):[]))}_arrayContains(t,e){for(var i=0;t&&e&&e[i]&&t.indexOf(e[i])>=0;i++);return i==e.length}_onSelectAllCheckedChanged(t){this.selectAll=this._indeterminate||t.target.checked}_isChecked(t,e){return e||t}_onActiveItemChanged(t){const e=t.detail.value;if(this.autoSelect){const t=e||this._previousActiveItem;t&&this._grid._toggleItem(t)}this._previousActiveItem=e}_onSelectedItemsChanged(){this._selectAllChangeLock=!0,Array.isArray(this._grid.items)&&(this._grid.selectedItems.length?this._arrayContains(this._grid.selectedItems,this._grid._filter(this._grid.items))?(this.selectAll=!0,this._indeterminate=!1):(this.selectAll=!1,this._indeterminate=!0):(this.selectAll=!1,this._indeterminate=!1)),this._selectAllChangeLock=!1}_onDataProviderChanged(){this._selectAllHidden=!Array.isArray(this._grid.items)}}customElements.define(gd.is,gd),nl("vaadin-grid-sorter",il`
    :host {
      justify-content: flex-start;
      align-items: baseline;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    [part='content'] {
      display: inline-block;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    [part='indicators'] {
      margin-left: var(--lumo-space-s);
    }

    :host(:not([direction])) [part='indicators']::before {
      opacity: 0.2;
    }

    :host([direction]) {
      color: var(--lumo-primary-text-color);
    }

    [part='order'] {
      font-size: var(--lumo-font-size-xxs);
      line-height: 1;
    }

    /* RTL specific styles */

    :host([dir='rtl']) [part='indicators'] {
      margin-right: var(--lumo-space-s);
      margin-left: 0;
    }
  `,{moduleId:"lumo-grid-sorter"});const vd=document.createElement("template");vd.innerHTML="\n  <style>\n    @font-face {\n      font-family: 'vaadin-grid-sorter-icons';\n      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAQwAA0AAAAABuwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAEFAAAABkAAAAcfep+mUdERUYAAAP4AAAAHAAAAB4AJwAOT1MvMgAAAZgAAAA/AAAAYA8TBPpjbWFwAAAB7AAAAFUAAAFeF1fZ4mdhc3AAAAPwAAAACAAAAAgAAAAQZ2x5ZgAAAlgAAABcAAAAnMvguMloZWFkAAABMAAAAC8AAAA2C5Ap72hoZWEAAAFgAAAAHQAAACQGbQPHaG10eAAAAdgAAAAUAAAAHAoAAABsb2NhAAACRAAAABIAAAASAIwAYG1heHAAAAGAAAAAFgAAACAACwAKbmFtZQAAArQAAAECAAACZxWCgKhwb3N0AAADuAAAADUAAABZCrApUXicY2BkYGAA4rDECVrx/DZfGbhZGEDgyqNPOxH0/wNMq5kPALkcDEwgUQBWRA0dAHicY2BkYGA+8P8AAwMLAwgwrWZgZEAFbABY4QM8AAAAeJxjYGRgYOAAQiYGEICQSAAAAi8AFgAAeJxjYGY6yziBgZWBgWkm0xkGBoZ+CM34msGYkZMBFTAKoAkwODAwvmRiPvD/AIMDMxCD1CDJKjAwAgBktQsXAHicY2GAAMZQCM0EwqshbAALxAEKeJxjYGBgZoBgGQZGBhCIAPIYwXwWBhsgzcXAwcAEhIwMCi+Z/v/9/x+sSuElA4T9/4k4K1gHFwMMMILMY2QDYmaoABOQYGJABUA7WBiGNwAAJd4NIQAAAAAAAAAACAAIABAAGAAmAEAATgAAeJyNjLENgDAMBP9tIURJwQCMQccSZgk2i5fIYBDAidJjycXr7x5EPwE2wY8si7jmyBNXGo/bNBerxJNrpxhbO3/fEFpx8ZICpV+ghxJ74fAMe+h7Ox14AbrsHB14nK2QQWrDMBRER4mTkhQK3ZRQKOgCNk7oGQqhhEIX2WSlWEI1BAlkJ5CDdNsj5Ey9Rncdi38ES+jzNJo/HwTgATcoDEthhY3wBHc4CE+pfwsX5F/hGe7Vo/AcK/UhvMSz+mGXKhZU6pww8ISz3oWn1BvhgnwTnuEJf8Jz1OpFeIlX9YULDLdFi4ASHolkSR0iuYdjLak1vAequBhj21D61Nqyi6l3qWybGPjySbPHGScGJl6dP58MYcQRI0bts7mjebBqrFENH7t3qWtj0OuqHnXcW7b0HOTZFnKryRGW2hFX1m0O2vEM3opNMfTau+CS6Z3Vx6veNnEXY6jwDxhsc2gAAHicY2BiwA84GBgYmRiYGJkZmBlZGFkZ2djScyoLMgzZS/MyDQwMwLSrpYEBlIbxjQDrzgsuAAAAAAEAAf//AA94nGNgZGBg4AFiMSBmYmAEQnYgZgHzGAAD6wA2eJxjYGBgZACCKyoz1cD0o087YTQATOcIewAAAA==) format('woff');\n      font-weight: normal;\n      font-style: normal;\n    }\n  </style>\n",document.head.appendChild(vd.content);class yd extends(xh(Oh(Fa))){static get template(){return La`
      <style>
        :host {
          display: inline-flex;
          cursor: pointer;
          max-width: 100%;
        }

        [part='content'] {
          flex: 1 1 auto;
        }

        [part='indicators'] {
          position: relative;
          align-self: center;
          flex: none;
        }

        [part='order'] {
          display: inline;
          vertical-align: super;
        }

        [part='indicators']::before {
          font-family: 'vaadin-grid-sorter-icons';
          display: inline-block;
        }

        :host(:not([direction])) [part='indicators']::before {
          content: '\\e901';
        }

        :host([direction='asc']) [part='indicators']::before {
          content: '\\e900';
        }

        :host([direction='desc']) [part='indicators']::before {
          content: '\\e902';
        }
      </style>

      <div part="content">
        <slot></slot>
      </div>
      <div part="indicators">
        <span part="order">[[_getDisplayOrder(_order)]]</span>
      </div>
    `}static get is(){return"vaadin-grid-sorter"}static get properties(){return{path:String,direction:{type:String,reflectToAttribute:!0,notify:!0,value:null},_order:{type:Number,value:null},_isConnected:{type:Boolean,observer:"__isConnectedChanged"}}}static get observers(){return["_pathOrDirectionChanged(path, direction)"]}ready(){super.ready(),this.addEventListener("click",this._onClick.bind(this))}connectedCallback(){super.connectedCallback(),this._isConnected=!0}disconnectedCallback(){super.disconnectedCallback(),this._isConnected=!1}_pathOrDirectionChanged(){this.__dispatchSorterChangedEvenIfPossible()}__isConnectedChanged(t,e){!1!==e&&this.__dispatchSorterChangedEvenIfPossible()}__dispatchSorterChangedEvenIfPossible(){void 0!==this.path&&void 0!==this.direction&&this._isConnected&&this.dispatchEvent(new CustomEvent("sorter-changed",{bubbles:!0,composed:!0}))}_getDisplayOrder(t){return null===t?"":t+1}_onClick(t){const e=this.getRootNode().activeElement;this!==e&&this.contains(e)||(t.preventDefault(),this.direction="asc"===this.direction?"desc":"desc"===this.direction?null:"asc")}}customElements.define(yd.is,yd);class wd extends pd{static get template(){return La`
      <template class="header" id="headerTemplate">
        <vaadin-grid-sorter path="[[path]]" direction="{{direction}}">[[_getHeader(header, path)]]</vaadin-grid-sorter>
      </template>
    `}static get is(){return"vaadin-grid-sort-column"}static get properties(){return{path:String,direction:{type:String,notify:!0}}}_prepareHeaderTemplate(){const t=this._prepareTemplatizer(this.$.headerTemplate);return t.templatizer.dataHost=this,t}_getHeader(t,e){return t||this._generateHeader(e)}}customElements.define(wd.is,wd);const bd={selectionColumn:!0};let _d=class extends(wt(lt)){constructor(t,e){super(t,e),this._grid=null,this._headerStyles="display: flex; font-weight: 400;",this._hostStyles='font-family: "Avenir Next", "Helvetica Neue", Helvetica, Arial, sans-serif; font-size: 1em; background-color: inherit; color: inherit;',this._rowHoverStyles="background-color: var(--lumo-row-background-hover);",this._columnElements=[],this.cellClassNameGenerator=null,this.columnReorderingEnabled=!0,this.dataProvider=null,this.itemIdPath=null,this.label=void 0,this.messages=null,this.pageSize=50,this.selectedItems=new J,this.size=null,this.rowDetailsRenderer=null,this.store=null,this.viewModel=new Nn,this.visibleElements={...bd}}initialize(){this.handles.add([this.columns.on("change",(()=>this._syncColumnRenderers())),et(this,"viewModel.size",(()=>this._updateGridSize())),et(this,"store.state",((t,e)=>{"ready"!==t||"loaded"!==e&&"error"!==e||this.refreshCache()})),it(this,"_grid.$.table","scroll",(()=>{var t;null==(t=this.viewModel)||t.closeColumnMenus()}))])}destroy(){var t;this.handles.removeAll(),this.resetColumns(),null==(t=this.columns)||t.destroy()}resetColumns(){this.columns.items.forEach((t=>t.destroy())),this.columns.removeAll()}castVisibleElements(t){return{...bd,...t}}render(){return ht("div",{bind:this,class:this.classes("esri-grid","esri-widget")},ht("div",{bind:this,class:"esri-grid__content"},this.renderGrid()))}renderGrid(){return ht("vaadin-grid",{...this.getGridProps()},this.renderAllColumns())}renderAllColumns(){if("disabled"!==this.viewModel.state&&this.columns&&this.columns.length)return[this.renderSelectionColumn(),this.renderColumns()]}renderSelectionColumn(){return ht("vaadin-grid-selection-column",{_selectAllHidden:!0,selectAll:!1,bind:this,hidden:!this.visibleElements.selectionColumn,sortable:!1,frozen:!bt(this.container)})}renderColumns(){return this.columns.items.map(((t,e)=>ht("vaadin-grid-column",{...this.getColumnProps(t,e)})))}getGridProps(){const{columnReorderingEnabled:t,id:e,pageSize:i,size:s}=this;return{_safari:!1,class:"esri-grid__grid",id:`${e}_grid`,theme:"compact column-borders",ref:"grid",bind:this,afterCreate:this._afterGridCreate,afterUpdate:this._afterGridUpdate,columnReorderingAllowed:t,pageSize:i,size:s}}getColumnProps(t,e){const{id:i}=this,{autoWidth:s,direction:r,flexGrow:n,frozen:o,header:l,hidden:a,path:h,resizable:u,textAlign:d,width:p}=t;return{autoWidth:s,direction:r,flexGrow:n,frozen:o,header:l,hidden:a,key:`${i}_${l}_${c(e)?e:h}`,path:h,resizable:u,"text-align":d,width:"number"==typeof p?`${p}px`:p,bind:this,afterCreate:this._afterColumnCreate,afterRemoved:this._afterColumnRemoved}}clearSelection(){this._clearSelection(),this.scheduleRender()}clearSort(){let t=!1;this._grid&&this._grid._sorters&&this._grid._sorters.length&&(this._grid._sorters=[],t=!0),this.columns&&this.columns.length&&this.columns.find((t=>!!t.direction))&&(this.columns.forEach((t=>t.direction=null)),t=!0),t&&this.scheduleRender()}deselectItem(t){this._deselectRowByItem(t)}deselectRow(t){const e=this.viewModel.getRowItemAt(t);e&&this._deselectRowByItem(e)}findColumn(){}generateCellClassNames(){var t;null==(t=this._grid)||t.generateCellClassNames()}getSlotElementByName(t){var e,i;return null==(e=this._grid)||null==(i=e.shadowRoot)?void 0:i.querySelector(`slot[name='${t}']`)}hideColumn(t){var e;null==(e=this.viewModel)||e.hideColumn(t),this.scheduleRender()}notifyResize(){var t;null==(t=this._grid)||t.notifyResize()}recalculateColumnWidths(){var t;null==(t=this._grid)||t.recalculateColumnWidths()}async refresh(){var t;this._clearSelection(),await(null==(t=this.store)?void 0:t.reset()),this.scrollToTop()}refreshCache(){var t;null==(t=this._grid)||t.clearCache()}selectRows(t){const e=this._grid.selectedItems.slice();t.forEach((t=>{e.findIndex((e=>e.objectId===t.objectId))<0&&this._grid.selectedItems.push(t)})),this._updateSelectionProps(),this._grid.render()}deselectRows(t){const e=this._grid.selectedItems.slice();t.forEach((t=>{const i=e.findIndex((e=>e.objectId===t.objectId));i>-1&&e.splice(i,1)})),this._grid.selectedItems=e,this._updateSelectionProps(),this._grid.render()}selectItem(t){this._selectRowByItem(t)}selectRow(t){const e=this.viewModel.getRowItemAt(t);e&&this._selectRowByItem(e)}showColumn(t){var e;null==(e=this.viewModel)||e.showColumn(t),this.scheduleRender()}sort({path:t,direction:e}){var i;null==(i=this.viewModel)||i.sortColumn(t,e)}scrollToIndex(t){var e;null==(e=this._grid)||e.scrollToIndex(t)}scrollToTop(){var t;null==(t=this._grid)||t.scrollToIndex(0)}_afterGridCreate(t){const{cellClassNameGenerator:e,dataProvider:i,itemIdPath:s,rowDetailsRenderer:r}=this;t.cellClassNameGenerator=e,t.dataProvider=i,t.rowDetailsRenderer=r,t.itemIdPath=s,this._grid=t,customElements.whenDefined("vaadin-grid").then((()=>{this._appendStyles(),this._addGridEventListeners()}))}_afterGridUpdate(t){this._grid||(this._grid=t)}_afterColumnCreate(t){this._applyRenderersToColumnElement(t),this._columnElements.push(t)}_afterColumnRemoved(t){const e=this._columnElements.indexOf(t,0);e>-1&&this._columnElements.splice(e,1)}_syncColumnRenderers(){this._columnElements.forEach((t=>this._applyRenderersToColumnElement(t)))}_appendStyles(){var t;const e=null==(t=this._grid)?void 0:t.shadowRoot,i=document.createElement("style");i.textContent=`\n      :host { ${this._hostStyles} }\n      [part~="header-cell"] ::slotted(vaadin-grid-cell-content) { ${this._headerStyles} }\n      [part~="row"]:hover [part~="body-cell"] { ${this._rowHoverStyles} }\n    `,null==e||e.appendChild(i)}_updateGridSize(){this._grid&&(this._grid.size=this.size||0,this.scheduleRender())}_addGridEventListeners(){const{_grid:t}=this;this.handles.add([Yt(t,"click",(t=>this._onRowClick(t))),Yt(t,"selected-items-changed",(t=>this._onSelectionChange(t)))])}_onRowClick(t){const{_grid:e}=this,i=e.getEventContext(t),{item:s,section:r}=i;s&&r&&"details"!==r&&"header"!==r&&this.emit("row-click",{context:i,native:t})}_selectRowByItem(t){var e;null==(e=this._grid)||e.selectItem(t)}_deselectRowByItem(t){var e;null==(e=this._grid)||e.deselectItem(t)}_clearSelection(){var t,e;null!=(t=this._grid)&&null!=(e=t.selectedItems)&&e.length&&(this._grid.selectedItems=[],this._updateSelectionProps(),this._grid.render())}_onSelectionChange(t){const e=t;if("selectedItems.splices"===e.detail.path){const{removed:t,index:i,object:s}=e.detail.value.indexSplices[0];this._updateSelectionProps(),this.emit("selection-change",{index:i,added:s,removed:t})}}_updateSelectionProps(){this.selectedItems.length&&this.selectedItems.removeAll(),this._grid&&this.selectedItems.addMany(this._grid.selectedItems)}_applyRenderersToColumnElement(t){const e=t.getAttribute("path"),i=this.viewModel.findColumn(e);if(i)try{i.renderFunction&&(t.renderer=(t,e,s)=>i.renderFunction({root:t,column:e,rowData:s})),i.footerRenderFunction&&(t.footerRenderer=(t,e)=>i.footerRenderFunction({root:t,column:e})),i.headerRenderFunction&&(t.headerRenderer=(t,e)=>i.headerRenderFunction({root:t,column:e}))}catch(t){}}};r([n()],_d.prototype,"_grid",void 0),r([rt("viewModel.cellClassNameGenerator")],_d.prototype,"cellClassNameGenerator",void 0),r([rt("viewModel.columns")],_d.prototype,"columns",void 0),r([rt("viewModel.columnReorderingEnabled")],_d.prototype,"columnReorderingEnabled",void 0),r([rt("viewModel.dataProvider")],_d.prototype,"dataProvider",void 0),r([n()],_d.prototype,"itemIdPath",void 0),r([n({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],_d.prototype,"label",void 0),r([n(),nt("esri/widgets/FeatureTable/t9n/FeatureTable")],_d.prototype,"messages",void 0),r([rt("viewModel.pageSize")],_d.prototype,"pageSize",void 0),r([n({readOnly:!0})],_d.prototype,"selectedItems",void 0),r([rt("viewModel.size")],_d.prototype,"size",void 0),r([rt("viewModel.rowDetailsRenderer")],_d.prototype,"rowDetailsRenderer",void 0),r([rt("viewModel.store")],_d.prototype,"store",void 0),r([n()],_d.prototype,"viewModel",void 0),r([n()],_d.prototype,"visibleElements",void 0),r([tt("visibleElements")],_d.prototype,"castVisibleElements",null),r([rt("viewModel.findColumn")],_d.prototype,"findColumn",null),_d=r([o("esri.widgets.FeatureTable.Grid.Grid")],_d);const Ad=_d,xd="esri.widgets.FeatureTable.support.FeatureStore",Sd=K.getLogger(xd);function Cd(t,e,i){Sd.error(new v(t,e,i))}let kd=class extends l{constructor(t){super(t),this._loaded=!1,this._loadError=!1,this._loading=!1,this._editOperationQueue=[],this._queryOperationQueue=[],this._objectIds=new J,this._hasStaleCache=!1,this.count=0,this.failures=new J,this.itemCache=new J,this.relatedRecordsEnabled=!1}destroy(){this.layer=null,this.itemCache&&this.itemCache.destroy(),this.failures&&this.failures.destroy(),this._set("itemCache",null)}set attachmentsEnabled(t){this._reset(),this._set("attachmentsEnabled",t),this.notifyChange("state")}set filterGeometry(t){this._reset(),this._set("filterGeometry",t),this.notifyChange("state")}set layer(t){this._reset(),this._set("layer",t),this.notifyChange("state")}get orderByFields(){return this._get("orderByFields")||[]}set orderByFields(t){Kt(t,this.orderByFields)||(this.itemCache.removeAll(),this._hasStaleCache=!0,this._set("orderByFields",t))}get querying(){return this._queryOperationQueue.length>0}set returnGeometry(t){this._reset(),this._set("returnGeometry",t),this.notifyChange("state")}get state(){const{layer:t,_loaded:e,_loadError:i,_loading:s}=this;return i?"error":!t||this.get("layer.loadError")?"disabled":s?"loading":"loaded"===this.get("layer.loadStatus")&&e?"loaded":"ready"}get syncing(){return this._editOperationQueue.length>0}get where(){return this._get("where")||null}set where(t){this._reset(),this._set("where",t),this.notifyChange("state")}async load(){this._reset();const{layer:t}=this;if(!t)return Promise.resolve();this._loading=!0,this.notifyChange("state");try{await t.when(),await this._syncLayerInfo(),this._loading=!1,this._loaded=!0,this.notifyChange("state")}catch(t){throw this._reset(),this._loadError=!0,this.notifyChange("state"),Cd("store:load-error","An error ocurred.",{error:t}),t}}async addItems(t){}async fetchItems(t){const{page:e,pageSize:i}=t,s=e*i,r=s+i,{layer:n,state:o}=this;if(!n||"loaded"!==o)return Promise.resolve([]);this.notifyChange("querying");const l=await this._query({start:s,num:r,page:e,pageSize:i});return this.notifyChange("state"),l}async query(t){const{layer:e,state:i}=this;if(!e||"loaded"!==i)return[];this.notifyChange("querying");const s=await this._query(t);return this.notifyChange("state"),s}async removeItemAt(t){}async reset(){this._reset()}async updateItem(t){return this._update(t)}getItemByObjectId(t){const{itemCache:e,layer:{objectIdField:i}}=this;return e.find((e=>e.feature.attributes[i]===t))}getLocalItemAt(t){return this.itemCache.getItemAt(t)}getItemAt(t){return Promise.resolve(this.itemCache.getItemAt(t))}getObjectIdIndex(t){const{itemCache:e,layer:{objectIdField:i}}=this;return e.findIndex((e=>e.feature.attributes[i]===t))}_reset(){this.itemCache.removeAll(),this.failures.removeAll(),this._editOperationQueue=[],this._queryOperationQueue=[],this._hasStaleCache=!1,this._loading=!1,this._loaded=!1,this._loadError=!1,this._set("count",0),this._objectIds.removeAll(),this.notifyChange("querying"),this.notifyChange("syncing"),this.notifyChange("state")}_getIdsFromFeatures(t){return t.map((t=>t.attributes[this.layer.objectIdField]))}_toFeatureData(t,e){const{layer:{objectIdField:i}}=this;return t.map((t=>{const{attributes:s}=t,r=s[i];return{objectId:r,feature:t,attachments:e?e[r]:null,relatedRecords:null}}))}async _update(t){const{layer:e}=this,{operations:i}=e.capabilities;if(!i.supportsUpdate||"wfs"===e.type||"imagery"===e.type)throw new v("store:update-error","Update is not supported.");const{index:s,name:r,value:n}=t,o=await this.getItemAt(s);if(!o||!o.feature)throw new v("store:update-error","Feature with provided 'objectId' not found.");const{feature:l}=o,a=y(l.attributes);a[r]=n;const h=new Qt({attributes:a}),u=e.applyEdits({updateFeatures:[h]}).then((t=>{const{updateFeatureResults:e}=t,i=e.find((t=>!!t.error));if(i)throw i.error;return this._editOperationQueue.indexOf((()=>u))>-1&&e&&e.length&&(l.attributes=a),t}));return this._queueEditOperation((()=>u))}async _query(t){const{refresh:e}=t;return!0===e?(this.itemCache.removeAll(),this._syncLayerInfo().then((()=>this._queryFeatureData(t)))):(this._hasStaleCache&&(await this._updateIds(),this._hasStaleCache=!1),this._queryFeatureData(t))}async _queryFeatureData(t){return this._queueQueryOperation((async()=>{const{features:e}=await this._queryFeatures(t),i=this._getIdsFromFeatures(e),s=await this._queryAttachments(i);return this._toFeatureData(e,s)||[]}))}async _syncLayerInfo(){await this._updateCount(),await this._updateIds()}async _updateCount(){await this._queryCount().then((t=>this._set("count",t)))}async _updateIds(){var t,e,i;null!=(t=this.layer)&&null!=(e=t.capabilities)&&null!=(i=e.query)&&i.supportsPagination||(this._objectIds.removeAll(),await this._queryObjectIds().then((t=>this._objectIds.addMany(t))))}_queryCount(){const{filterGeometry:t,layer:e,returnGeometry:i}=this,s=e.createQuery();return s.geometry=t,s.returnGeometry=i,s.where=this._getWhere(),e.queryFeatureCount(s)}_queryObjectIds(){const{filterGeometry:t,layer:e,orderByFields:i,returnGeometry:s}=this,{capabilities:{query:{supportsCacheHint:r,supportsOrderBy:n}}}=e;if("geojson"===e.type||"wfs"===e.type||"imagery"===e.type)return Promise.resolve([]);const o=e.createQuery();return o.geometry=t,o.outFields=[e.objectIdField],o.returnGeometry=s,o.where=this._getWhere(),n&&(o.orderByFields=i),r&&(o.cacheHint=!0),e.queryObjectIds(o)}async _queryFeatures(t){const{layer:e}=this;if(!e.capabilities.operations.supportsQuery)return Promise.reject(new v("store:query-error","Layer does not support query operation."));const{filterGeometry:i,layer:{capabilities:{query:{supportsCacheHint:s,supportsOrderBy:r,supportsPagination:n}}},orderByFields:o,returnGeometry:l}=this,{start:a,pageSize:h}=t,u=e.createQuery();return u.returnGeometry=l,n?(u.start=a,u.num=h,u.where=this._getWhere()):u.objectIds=this._getObjectIdsForPage(a,h),r&&(u.orderByFields=o),i&&(u.geometry=i),s&&(u.cacheHint=!0),e.queryFeatures(u)}_getObjectIdsForPage(t,e){const i=this._objectIds.toArray();return i.length>=t+e?i.slice(t,t+e):i.slice(t)}_queryAttachments(t){const{attachmentsEnabled:e,layer:i}=this,{capabilities:{data:{supportsAttachment:s},operations:{supportsQueryAttachments:r}}}=i;return e&&s&&r&&"geojson"!==i.type&&"wfs"!==i.type&&"imagery"!==i.type?i.queryAttachments(new Zt({objectIds:t,where:this._getWhere()})):Promise.resolve(null)}_queueQueryOperation(t){return this._queryOperationQueue.push(t),this.notifyChange("querying"),t().then((e=>this._queryOperationQueue.indexOf(t)>-1?(this.itemCache.addMany(e),e):[])).catch((e=>{Cd("store:query-error","An error ocurred.",{error:e});const i={error:e,retry:()=>{this.failures.remove(i),this._queueQueryOperation(t)},cancel:()=>this.failures.remove(i)};return this.failures.add(i),[]})).then((e=>(Xt(this._queryOperationQueue,t),this.notifyChange("querying"),e)))}_queueEditOperation(t){return this._editOperationQueue.push(t),this.notifyChange("syncing"),t().then((()=>{Xt(this._editOperationQueue,t),this.notifyChange("syncing")})).catch((e=>{Cd("store:edit-error","An error ocurred.",{error:e});const i={error:e,retry:()=>{this.failures.remove(i),this._queueEditOperation(t)},cancel:()=>this.failures.remove(i)};throw this.failures.add(i),Xt(this._editOperationQueue,t),this.notifyChange("syncing"),e}))}_getWhere(){return this.where||this.layer.definitionExpression||"1=1"}};r([n()],kd.prototype,"attachmentsEnabled",null),r([n({readOnly:!0})],kd.prototype,"count",void 0),r([n({readOnly:!0})],kd.prototype,"failures",void 0),r([n()],kd.prototype,"filterGeometry",null),r([n({readOnly:!0})],kd.prototype,"itemCache",void 0),r([n({value:null})],kd.prototype,"layer",null),r([n()],kd.prototype,"orderByFields",null),r([n({readOnly:!0})],kd.prototype,"querying",null),r([n()],kd.prototype,"relatedRecordsEnabled",void 0),r([n({value:!1})],kd.prototype,"returnGeometry",null),r([n({readOnly:!0})],kd.prototype,"state",null),r([n({readOnly:!0})],kd.prototype,"syncing",null),r([n()],kd.prototype,"where",null),kd=r([o(xd)],kd);const Id=kd;let Md=class extends(wt(Nn)){constructor(t){super(t),this._defaultHiddenFields=["CreationDate","Creator","EditDate","Editor","GlobalID"],this._highlights=new U,this.cellClassNameGenerator=t=>t.path||null,this.dataProvider=async(t,e)=>{const{store:i}=this,{page:s,pageSize:r,sortOrders:n}=t,o=this._sortOrdersToLayerOrderByFields(n);e&&(i?(await i.set({orderByFields:o}),"loaded"!==i.state&&"loading"!==i.state&&await i.load(),e&&e(await i.fetchItems({page:s,pageSize:r}))):e&&e([]))},this.editingEnabled=!1,this.grid=null,this.hiddenFields=new J,this.highlightOnRowSelectEnabled=!0,this.itemIdPath="objectId",this.messagesCommon=null,this.relatedRecordsEnabled=!1,this.store=null,this.view=null;const{hiddenFields:e,itemIdPath:i}=this;e.addMany(this._defaultHiddenFields),this._set("store",new Id),this._set("grid",new Ad({itemIdPath:i,viewModel:this}))}initialize(){const t=async()=>{this.messages=await ie("esri/widgets/FeatureTable/t9n/FeatureTable"),this.messagesCommon=await ie("esri/t9n/common")};t(),this.handles.add([te(t),it(this,"grid.selectedItems","change",(t=>this._onSelectionChange(t))),et(this,"relatedRecordsEnabled",(t=>this.store.relatedRecordsEnabled=t)),et(this,["layer.loaded"],(()=>{var t;null!=(t=this.layer)&&t.loaded&&this._onLayerLoad()})),et(this.store,"state",(t=>{var e;"loaded"===t&&(null==(e=this.grid)||e.scrollToTop())})),et(this,["editingEnabled","messages"],(()=>{var t;return(null==(t=this.layer)?void 0:t.loaded)&&this._generateColumns()})),et(this,"layer.definitionExpression",((t,e)=>(t||e)&&"loaded"===this.store.state&&this.refresh()))])}destroy(){var t,e;this._resetColumns(),this.handles.removeAll(),this._highlights.removeAll(),this._highlights.destroy(),null==(t=this.grid)||t.destroy(),null==(e=this.columns)||e.destroy(),this.layer=null,this.view=null}set attachmentsEnabled(t){this.attachmentsEnabled!==t&&(this._set("attachmentsEnabled",t),this._generateColumns(),this.store.attachmentsEnabled=t)}set fieldConfigs(t){var e;this._set("fieldConfigs",t),(null==(e=this.layer)?void 0:e.loaded)&&this._generateColumns()}set filterGeometry(t){(this.filterGeometry||t)&&(this.clearSelection(),this._set("filterGeometry",t),this.store.filterGeometry=t)}set layer(t){var e;this._set("layer",t),null==(e=this.grid)||e.clearSort(),this._resetColumns(),this.store.layer=t,t&&(t.loaded?this._onLayerLoad():t.load()),this.notifyChange("state")}set messages(t){var e;null==(e=this.grid)||e.set("messages",t),this._set("messages",t)}clearHighlights(){this._highlights.removeAll()}clearSelection(){var t;null==(t=this.grid)||t.clearSelection()}deselectRows(t){const e=this._getStoreItemsFromSelectionParams(t);this.grid.deselectRows(e)}getObjectIdIndex(t){var e;return null==(e=this.store)?void 0:e.getObjectIdIndex(t)}getValue(t,e){var i;const s=this.store.getItemByObjectId(t);return null==s||null==(i=s.feature)?void 0:i.attributes[e]}refresh(){var t;null==(t=this.grid)||t.refresh()}selectRows(t){const e=this._getStoreItemsFromSelectionParams(t);this.grid.selectRows(e)}scrollToIndex(t){var e;null==(e=this.grid)||e.scrollToIndex(t)}_onLayerLoad(){const t=this.layer.capabilities.query.maxRecordCount;t&&t<this.pageSize&&this.grid&&(this.grid.pageSize=t),this._generateColumns()}_generateColumns(){this._resetColumns(),this.columns.addMany([...this._createFieldColumns()]),this.attachmentsEnabled&&this.columns.push(this._createAttachmentsColumn())}_createFieldColumns(){return this.fieldConfigs&&this.fieldConfigs.length?this._createColumnsFromConfigs():this._createColumnsFromFields()}_createColumnsFromConfigs(){var t,e;const{editingEnabled:i,fieldConfigs:s,grid:r,hiddenFields:n,layer:o,messages:l,messagesCommon:a,store:h}=this,u=null!=(t=null==(e=this.layer)?void 0:e.fields)?t:[];return s.filter((t=>(u||[]).find((e=>t.name===e.name)))).map((t=>{const e=t.direction||null,s=t.formatFunction||null,c=(u||[]).find((e=>t.name===e.name)),d=!1===t.visible||!0!==t.visible&&n.indexOf(c.name)>-1;return new Pn({config:t,direction:e,editingEnabled:i,field:c,formatFunction:s,grid:r,hidden:d,layer:o,store:h,messages:l,messagesCommon:a})}))}_createColumnsFromFields(){var t,e;const{editingEnabled:i,grid:s,hiddenFields:r,layer:n,messages:o,messagesCommon:l,store:a}=this;return(null!=(t=null==(e=this.layer)?void 0:e.fields)?t:[]).map((t=>{const e=r.indexOf(t.name)>-1;return new Pn({editingEnabled:i,field:t,grid:s,hidden:e,layer:n,store:a,messages:o,messagesCommon:l})}))}_createAttachmentsColumn(){var t;return new Xr({header:null==(t=this.messages)?void 0:t.attachments})}_sortOrdersToLayerOrderByFields(t){return t&&t.length?t.filter(((t,e,i)=>i.map((t=>t.path)).indexOf(t.path)===e)).map((({direction:t,path:e})=>t?e+" "+t.toUpperCase():"")):[]}_highlight(t){const{view:e}=this,i=e&&t&&e.allLayerViews.items.find((({layer:e})=>e===t.layer));ee(i)&&this._highlights.add(i.highlight(t),`feature-${t.getObjectId()}`)}_unhighlight(t){t&&this._highlights.remove(`feature-${t.getObjectId()}`)}_getStoreItemsFromSelectionParams(t){const e=[];return(t=t instanceof Array?t:[t]).forEach((t=>{let i=t instanceof Qt?t:null;const s=i?i.getObjectId():t;if("number"==typeof s||"string"==typeof s){if(!i){const t=this.store.getItemByObjectId(s);t&&(i=t.feature)}e.push({objectId:s,feature:i})}})),e}_onSelectionChange(t){const{highlightOnRowSelectEnabled:e}=this,{added:i,removed:s}=t;e&&i.forEach((t=>this._highlight(t.feature))),e&&s.forEach((t=>this._unhighlight(t.feature)))}_resetColumns(){this.columns.items.forEach((t=>t.destroy())),this.columns.removeAll()}};r([n()],Md.prototype,"attachmentsEnabled",null),r([n()],Md.prototype,"cellClassNameGenerator",void 0),r([n()],Md.prototype,"dataProvider",void 0),r([n()],Md.prototype,"editingEnabled",void 0),r([n()],Md.prototype,"fieldConfigs",null),r([n()],Md.prototype,"filterGeometry",null),r([n({readOnly:!0})],Md.prototype,"grid",void 0),r([n()],Md.prototype,"hiddenFields",void 0),r([n()],Md.prototype,"highlightOnRowSelectEnabled",void 0),r([n({readOnly:!0})],Md.prototype,"itemIdPath",void 0),r([n()],Md.prototype,"layer",null),r([n()],Md.prototype,"messages",null),r([n()],Md.prototype,"messagesCommon",void 0),r([n()],Md.prototype,"relatedRecordsEnabled",void 0),r([n({readOnly:!0,type:Id})],Md.prototype,"store",void 0),r([n()],Md.prototype,"view",void 0),Md=r([o("esri.widgets.FeatureTable.FeatureTableViewModel")],Md);const Td=Md,Ed={header:!0,menu:!0,menuItems:{clearSelection:!0,refreshData:!0,toggleColumns:!0},selectionColumn:!0};let jd=class extends(wt(lt)){constructor(t,e){super(t,e),this.attachmentsEnabled=null,this.columns=new J,this.editingEnabled=null,this.fieldConfigs=null,this.filterGeometry=null,this.grid=null,this.highlightOnRowSelectEnabled=!0,this.label=void 0,this.layer=null,this.messages=null,this.menu=null,this.menuConfig=null,this.pageSize=50,this.view=null,this.viewModel=new Td,this.visibleElements={...Ed}}initialize(){var t,e,i;const s=async()=>this.messages=await ie("esri/widgets/FeatureTable/t9n/FeatureTable");s(),this.handles.add([te(s),it(this,"grid.selectedItems","change",(t=>this._onSelectionChange(t))),et(this,["viewModel.store.querying","viewModel.store.syncing","grid.size"],(()=>this.scheduleRender())),it(this,"viewModel.columns","change",(()=>this._updateMenuItems())),et(this,"menuConfig",(()=>this._syncMenuConfig())),et(this,"messages",(()=>{var t;this.menu.label=null==(t=this.messages)?void 0:t.options,this._updateMenuItems()}))]),this._set("menu",new Yr({label:null==(t=this.messages)?void 0:t.options,iconClass:"esri-icon-handle-horizontal",...this.menuConfig}));const{attachmentsEnabled:r,relatedRecordsEnabled:n}=this;null==(e=this.viewModel)||null==(i=e.store)||i.set({attachmentsEnabled:r,relatedRecordsEnabled:n})}destroy(){var t;this.clearSelection(),this.handles.removeAll(),null==(t=this.menu)||t.destroy()}castVisibleElements(t){var e;const i={...Ed,...t};return null==(e=this.grid)||e.set("visibleElements",{...this.grid.visibleElements,selectionColumn:i.selectionColumn}),i}clearHighlights(){}clearSelection(){}deselectRows(){}hideColumn(t){var e;null==(e=this.grid)||e.hideColumn(t),this._updateMenuItems()}refresh(){}showColumn(t){var e;null==(e=this.grid)||e.showColumn(t),this._updateMenuItems()}sortColumn(){}selectRows(){}scrollToIndex(){}render(){var t;return ht("div",{bind:this,class:this.classes("esri-feature-table","esri-widget")},this.visibleElements.header?this._renderHeader():null,ht("div",{class:"esri-feature-table__content"},"disabled"!==this.state&&(null==(t=this.grid)?void 0:t.render())))}_renderHeader(){return ht("div",{key:"header",class:"esri-feature-table__header"},this._renderLoader(),this._renderTitle(),this.visibleElements.menu?this._renderMenu():null)}_renderTitle(){return ht("div",{class:"esri-feature-table__title",key:"title"},this._getTitle())}_getTitle(){const{grid:t,layer:{title:e},messages:i,viewModel:{size:s}}=this;return t?Nt(i.header,{title:e,count:s,selected:t.selectedItems.length||0}):""}_renderLoader(){const{state:t,store:e}=this.viewModel;return ht("div",{class:"esri-feature-table__loader-container"},"loading"===t||e.syncing||e.querying?ht("div",{class:"esri-feature-table__loader",key:"loader"}):null)}_renderMenu(){return ht("div",{class:"esri-feature-table__menu"},this.menu.render())}_onSelectionChange(t){const{added:e,removed:i}=t;this.emit("selection-change",{added:[...e],removed:[...i]})}_syncMenuConfig(){var t;null==(t=this.menu)||t.set({...this.menuConfig,items:this._getMenuItems()})}_updateMenuItems(){var t;null==(t=this.menu)||t.set("items",this._getMenuItems())}_getMenuItems(){var t;const e=null==(t=this.menuConfig)?void 0:t.items,i=this._getDefaultMenuItems(),s=[];return(null==i?void 0:i.length)&&s.push(...i),(null==e?void 0:e.length)&&s.push(...e),s}_getDefaultMenuItems(){var t;const{messages:e,viewModel:i,visibleElements:s}=this,{menuItems:r}=s,n=[];return(null==r?void 0:r.clearSelection)&&n.push(new Ns({selectionEnabled:!1,label:null==e?void 0:e.clearSelection,clickFunction:()=>this.clearSelection()})),(null==r?void 0:r.refreshData)&&n.push(new Ns({selectionEnabled:!1,label:null==e?void 0:e.refreshData,clickFunction:()=>this.refresh()})),(null==r?void 0:r.toggleColumns)&&n.push(new Ns({iconClass:"esri-icon-right",label:null==e?void 0:e.toggleColumns,clickFunction:this._toggleMenuItemSelectedIcon,items:null==i||null==(t=i.columns)?void 0:t.items.map((({header:t,hidden:e,path:i})=>new Ns({label:t||i,selected:!e,selectionEnabled:!0,iconClass:"esri-icon-check-mark",clickFunction:()=>this._toggleColumnFromMenuItem(i)})))})),n.length?n:null}_toggleMenuItemSelectedIcon({item:t}){null==t||t.set("iconClass",null!=t&&t.selected?"esri-icon-down":"esri-icon-right")}_toggleColumnFromMenuItem(t){const{grid:e,viewModel:i}=this,s=i.findColumn(t);null!=s&&s.hidden?e.showColumn(t):e.hideColumn(t)}};r([rt("viewModel.attachmentsEnabled")],jd.prototype,"attachmentsEnabled",void 0),r([rt("viewModel.columns")],jd.prototype,"columns",void 0),r([rt("viewModel.editingEnabled")],jd.prototype,"editingEnabled",void 0),r([rt("viewModel.fieldConfigs")],jd.prototype,"fieldConfigs",void 0),r([rt("viewModel.filterGeometry")],jd.prototype,"filterGeometry",void 0),r([rt("viewModel.grid")],jd.prototype,"grid",void 0),r([rt("viewModel.highlightOnRowSelectEnabled")],jd.prototype,"highlightOnRowSelectEnabled",void 0),r([n({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],jd.prototype,"label",void 0),r([rt("viewModel.layer")],jd.prototype,"layer",void 0),r([n(),nt("esri/widgets/FeatureTable/t9n/FeatureTable")],jd.prototype,"messages",void 0),r([n({readOnly:!0})],jd.prototype,"menu",void 0),r([n()],jd.prototype,"menuConfig",void 0),r([rt("viewModel.pageSize")],jd.prototype,"pageSize",void 0),r([rt("viewModel.relatedRecordsEnabled")],jd.prototype,"relatedRecordsEnabled",void 0),r([rt("viewModel.state")],jd.prototype,"state",void 0),r([rt("viewModel.view")],jd.prototype,"view",void 0),r([n()],jd.prototype,"viewModel",void 0),r([n()],jd.prototype,"visibleElements",void 0),r([tt("visibleElements")],jd.prototype,"castVisibleElements",null),r([rt("viewModel.clearHighlights")],jd.prototype,"clearHighlights",null),r([rt("viewModel.clearSelection")],jd.prototype,"clearSelection",null),r([rt("viewModel.deselectRows")],jd.prototype,"deselectRows",null),r([rt("viewModel.refresh")],jd.prototype,"refresh",null),r([rt("viewModel.sortColumn")],jd.prototype,"sortColumn",null),r([rt("viewModel.selectRows")],jd.prototype,"selectRows",null),r([rt("viewModel.scrollToIndex")],jd.prototype,"scrollToIndex",null),jd=r([o("esri.widgets.FeatureTable")],jd);const Od=jd;let Ld=class{constructor(i){t(this,i),this.loaded=e(this,"loaded",7),this.rowSelectionChange=e(this,"rowSelectionChange",7),this.layer=null,this.position="bottom-left"}fieldConfigsWatcher(t){this._fieldConfigs="string"==typeof t?JSON.parse(t):t,this.widget&&(this.widget.fieldConfigs=this._fieldConfigs)}validateItemId(t,e){if(t&&t!==e){const e=new se({portalItem:{id:t}});this.layer=e}}validateLayer(t){t&&this.widget&&(this.widget.layer=t)}validateUrl(t,e){if(t&&t!==e){const e=new se({url:t});this.layer=e}}validateView(t){t&&(this.widget.view=t,"arcgis-expand"!==this.el.parentElement.tagName.toLowerCase()&&this.widget.view.ui.add(this.widget,this.position))}componentWillLoad(){this.fieldConfigs&&this.fieldConfigsWatcher(this.fieldConfigs);const t=new Od({container:this.el});if(this.widget=t,t.on("selection-change",(t=>this.rowSelectionChange.emit(t))),this.view&&(t.view=this.view),this.layer)t.layer=this.layer;else if(this.itemId){const t=new se({portalItem:{id:this.itemId}});this.layer=t}else if(this.url){const t=new se({url:this.url});this.layer=t}this.loaded.emit(!0)}get el(){return i(this)}static get watchers(){return{fieldConfigs:["fieldConfigsWatcher"],itemId:["validateItemId"],layer:["validateLayer"],url:["validateUrl"],view:["validateView"]}}};Ld.style="@import url('https://js.arcgis.com/next/esri/themes/light/main.css');";const Fd=/^-?(\d+)(\.(\d+))?$/i;function zd(t,e){return t-e}function Pd(t,e){let i,s;return i=Number(t.toFixed(e)),i<t?s=i+1/10**e:(s=i,i-=1/10**e),i=Number(i.toFixed(e)),s=Number(s.toFixed(e)),[i,s]}function Rd(t,e,i,s,r){const n=Bd(t,e,i,s);return(null==n.previous||n.previous<=r)&&(null==n.next||n.next<=r)||n.previous+n.next<=2*r}function Nd(t){const e=String(t),i=e.match(Fd);if(i&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(e.toLowerCase().indexOf("e")>-1){const t=e.split("e"),i=t[0],s=t[1];if(i&&s){const t=Number(i);let e=Number(s);const r=e>0;r||(e=Math.abs(e));const n=Nd(t);return r?(n.integer+=e,e>n.fractional?n.fractional=0:n.fractional-=e):(n.fractional+=e,e>n.integer?n.integer=1:n.integer-=e),n}}return{integer:0,fractional:0}}function Bd(t,e,i,s){const r={previous:null,next:null};if(null!=i){const s=t-i;r.previous=Math.floor(Math.abs(100*(e-i-s)/s))}if(null!=s){const i=s-t;r.next=Math.floor(Math.abs(100*(s-e-i)/i))}return r}function Dd(t,e={}){const i=t.slice(0),{tolerance:s=2,strictBounds:r=!1,indexes:n=i.map(((t,e)=>e))}=e;n.sort(zd);for(let t=0;t<n.length;t++){const e=n[t],o=i[e],l=0===e?null:i[e-1],a=e===i.length-1?null:i[e+1],h=Nd(o).fractional;if(h){let n,u=0,c=!1;for(;u<=h&&!c;){const e=Pd(o,u);n=r&&0===t?e[1]:e[0],c=Rd(o,n,l,a,s),u++}c&&(i[e]=n)}}return i}const Gd={maximumFractionDigits:20},Vd=Jt("short-date");function $d(t,e,i,s){let r="";0===e?r="< ":e===i&&(r="> ");let n=null;return n=s?Gt(t,Vd):function(t){return Ut(t,Gd)}(t),r+n}const qd=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="],Hd=new ne([64,64,64]);function Ud(t,e){const i=[],s=t.length-1;return 5===t.length?i.push(0,2,4):i.push(0,s),t.map(((t,r)=>i.indexOf(r)>-1?$d(t,r,s,e):null))}async function Wd(t,e,i){let s=!1,r=[],n=[];if(t.stops){const e=t.stops;r=e.map((t=>t.value)),s=e.some((t=>!!t.label)),s&&(n=e.map((t=>t.label)))}if(null==r[0]&&null==r[r.length-1])return null;const o=s?null:Ud(r,i);return(await Promise.all(r.map((async(i,r)=>({value:i,color:"opacity"===t.type?await Jd(i,t,e):(await import("./p-5420851c.js").then((function(t){return t.kG}))).getColor(t,i),label:s?n[r]:o[r]}))))).reverse()}async function Jd(t,e,i=Hd){const s=new ne(i),r=(await import("./p-5420851c.js").then((function(t){return t.kG}))).getOpacity(e,t);return null!=r&&(s.a=r),s}function Yd(t,e){const{startIndex:i,endIndex:s,weight:r}=function(t,e){let i=0,s=e.length-1;return e.some(((e,r)=>t<e.value?(s=r,!0):(i=r,!1))),{startIndex:i,endIndex:s,weight:(t-e[i].value)/(e[s].value-e[i].value)}}(t,e);if(i===s)return e[i].color;const n=ne.blendColors(e[i].color,e[s].color,r);return new ne(n)}const Kd={HH:315,HL:45,LL:135,LH:225},Qd={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function Zd(t){if(!t)return;const{type:e}=t;if(e.indexOf("3d")>-1)return Oi(t.symbolLayers.getItemAt(0));if("simple-line"===e){const e=le(t);return e&&e.color}if("simple-marker"===t.type&&("x"===t.style||"cross"===t.style)){const e=le(t);return e&&e.color}return ae(t)}function Xd(t,e){const i=e.HH.label,s=e.LL.label,r=e.HL.label,n=e.LH.label;switch(t){default:return{top:i,bottom:s,left:r,right:n};case"HL":return{top:r,bottom:n,left:s,right:i};case"LL":return{top:s,bottom:i,left:n,right:r};case"LH":return{top:n,bottom:r,left:i,right:s}}}function tp(t){let e=Kd[t];return t&&null==e&&(e=Kd.HH),e||0}const ep=[255,255,255],ip=[200,200,200],sp=[128,128,128];async function rp(t,e,i,s,r,n){var o,l;const a=e.legendOptions,h=a&&a.customValues,u=function(t,e){let i=null,s=null;if("simple"===t.type)i=t.symbol;else if("class-breaks"===t.type){const e=t.classBreakInfos;i=e&&e[0]&&e[0].symbol,s=e.length>1}else if("unique-value"===t.type){const e=t.uniqueValueInfos;i=e&&e[0]&&e[0].symbol,s=e.length>1}return!i||function(t){return!!t&&(ce(t)?!!t.symbolLayers&&t.symbolLayers.some((t=>t&&"fill"===t.type)):-1!==t.type.indexOf("fill"))}(i)?null:(i=i.clone(),(e||s)&&(i.type.indexOf("3d")>-1?op(i):lp(i)),i)}(t,i),c=e.stops&&e.stops.length>1;if(!u||!h&&!(null!=e.minSize&&null!=e.maxSize||c&&!e.target))return;const d=he(u);let p=null,m=null,f=null;m=d&&!c?Dd([e.minDataValue,e.maxDataValue]):h||await async function(t,e,i,s){const r=(await import("./p-5420851c.js").then((function(t){return t.kG}))).getSizeRangeAtScale(t,i,s),n=r&&ap(r);if(!r&&!n)return;let o=n.map((e=>function(t,e,i){const s=i.minSize,r=i.maxSize,n=e.minDataValue,o=e.maxDataValue;let l=null;return l=t<=s?n:t>=r?o:(t-s)/(r-s)*(o-n)+n,l}(e,t,r)));o=Dd(o);for(let r=1;r<o.length-1;r++){const l=await hp(t,e,o[r],o[r-1],i,s);l&&(o[r]=l[0],n[r]=l[1])}return o}(e,u,s,r);const g=null==t?void 0:t.authoringInfo,v="univariate-color-size"===(null==g?void 0:g.type),y=v&&"above-and-below"===(null==g?void 0:g.univariateTheme);if(!m&&c&&(m=e.stops.map((t=>t.value)),p=e.stops.some((t=>!!t.label)),p&&(f=e.stops.map((t=>t.label)))),d&&(null==(o=m)?void 0:o.length)>2&&!y&&(m=[m[0],m[m.length-1]]),!m)return null;v&&5!==(null==(l=m)?void 0:l.length)&&(m=ap({minSize:m[0],maxSize:m[m.length-1]}));const w=d?function(t,e){const i=null==t?void 0:t.authoringInfo,s="univariate-color-size"===(null==i?void 0:i.type);let r=[12,30];if(s){const t=e[0],i=e[e.length-1],s=12,n=30;r=e.map((e=>s+(e-t)/(i-t)*(n-s)))}return s&&"below"===(null==i?void 0:i.univariateTheme)&&r.reverse(),r}(t,m):null,b=ue(u),_=p?null:function(t,e){const i=t.length-1;return t.map(((t,s)=>$d(t,s,i,e)))}(m,n);return(await Promise.all(m.map((async(i,n)=>{const o=d?w[n]:await up(e,u,i,s,r);return{value:i,symbol:cp(y&&"class-breaks"===t.type?np(t,n):u,o),label:p?f[n]:_[n],size:o,outlineSize:b}})))).reverse()}function np(t,e){const i=t.classBreakInfos,s=i.length,r=s<2||!(e>=2)?i[0].symbol.clone():i[s-1].symbol.clone();return t.visualVariables.some((t=>"color"===t.type))&&(r.type.indexOf("3d")>-1?op(r):lp(r)),r}function op(t){t.symbolLayers.forEach("line-3d"===t.type?t=>{t.material={color:sp}}:t=>{"icon"!==t.type||t.resource&&t.resource.href?t.material={color:ip}:(t.material={color:ep},t.outline={color:sp,size:1.5})})}function lp(t){"cim"===t.type?de(t,new ne(ip)):-1!==t.type.indexOf("line")?t.color=sp:(t.color=ep,"simple-marker"===t.type&&(t.outline={color:sp,width:1.5}))}function ap(t){const e=t.minSize,i=(t.maxSize-e)/4,s=[];for(let t=0;t<5;t++)s.push(e+i*t);return s}async function hp(t,e,i,s,r,n){const o=await up(t,e,i,r,n),l=await up(t,e,s,r,n),a=Nd(i);let h=a.integer,u=null,c=null;i>0&&i<1&&(u=10**a.fractional,h=Nd(i*=u).integer);for(let s=h-1;s>=0;s--){const a=10**s;let h=Math.floor(i/a)*a,d=Math.ceil(i/a)*a;null!=u&&(h/=u,d/=u);let p=(h+d)/2;[,p]=Dd([h,p,d],{indexes:[1]});const m=await up(t,e,h,r,n),f=await up(t,e,d,r,n),g=await up(t,e,p,r,n),v=Bd(o,m,l,null),y=Bd(o,f,l,null),w=Bd(o,g,l,null);let b=v.previous<=20,_=y.previous<=20;if(b&&_&&(v.previous<=y.previous?(b=!0,_=!1):(_=!0,b=!1)),b?c=[h,m]:_?c=[d,f]:w.previous<=20&&(c=[p,g]),c)break}return c}async function up(t,e,i,s,r){const{getSize:n}=await import("./p-5420851c.js").then((function(t){return t.kG}));return n(t,i,{scale:s,view:r,shape:"simple-marker"===e.type?e.style:null})}function cp(t,e){const i=t.clone();if(ce(i))he(i)||i.symbolLayers.forEach((t=>{"fill"!==t.type&&(t.size=e)}));else if(function(t){return"esri.symbols.SimpleMarkerSymbol"===t.declaredClass}(i))i.size=e;else if(function(t){return"esri.symbols.PictureMarkerSymbol"===t.declaredClass}(i)){const t=i.width,s=i.height;i.height=e,i.width=e*(t/s)}else!function(t){return"esri.symbols.SimpleLineSymbol"===t.declaredClass}(i)?function(t){return"esri.symbols.TextSymbol"===t.declaredClass}(i)&&i.font&&(i.font.size=e):i.width=e;return i}const dp=K.getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),pp=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,mp=new pe({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),fp={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},gp=new me({size:6,outline:{color:[128,128,128,.5],width:.5}}),vp=new fe({style:"solid"});function yp(t){return"vector-field"===t.type}function wp(t){return"raster-colormap"===t.type}function bp(t){return"raster-stretch"===t.type}function _p(t){return"raster-shaded-relief"===t.type}function Ap(t){return"esri.renderers.SimpleRenderer"===t.declaredClass}function xp(t){return"esri.renderers.ClassBreaksRenderer"===t.declaredClass}function Sp(t){return"esri.renderers.UniqueValueRenderer"===t.declaredClass}function Cp(t){return"esri.renderers.HeatmapRenderer"===t.declaredClass}function kp(t){return"esri.renderers.PointCloudClassBreaksRenderer"===t.declaredClass}function Ip(t){return"esri.renderers.PointCloudStretchRenderer"===t.declaredClass}function Mp(t){return"esri.renderers.PointCloudUniqueValueRenderer"===t.declaredClass}function Tp(t){return"esri.renderers.DotDensityRenderer"===t.declaredClass}function Ep(t){return"esri.layers.BuildingSceneLayer"===t.declaredClass}function jp(t){return"esri.layers.MapImageLayer"===t.declaredClass}function Op(t){return"esri.layers.ImageryLayer"===t.declaredClass}function Lp(t){return"esri.layers.ImageryTileLayer"===t.declaredClass}const Fp=new me({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let zp={},Pp=class extends l{constructor(t){super(t),this._handles=new U,this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this.children=new J,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const t=()=>this.notifyChange("ready");this._handles.add([it(this,"children","change",(e=>{const{added:i,removed:s}=e,r=this._handles;i.forEach((e=>{const i=`activeLayerInfo-ready-watcher-${e.layer.uid}`;r.add(W(e,"ready",t),i)})),s.forEach((t=>r.remove(t.layer.uid))),t()}))]),this.keepCacheOnDestroy||(zp={})}destroy(){this._handles.destroy(),this._handles=null,this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(zp=null)}get effect(){const t=this.layer;let e=null;if("effect"in t&&t.effect){const i=new Ei(0);i.effect=t.effect,i.transitionStep(0,this.scale);const s=i.effects.filter((t=>"bloom"!==t.type)).map((t=>t.toJSON()));e=ge(s)}return e}get opacity(){var t;const e=this.layer.opacity,i=null==(t=this.parent)?void 0:t.opacity,s=this.layer.parent,r=s&&"uid"in s?this._getParentLayerOpacity(s):null;return null!=i?i*e:null!=r?r*e:e}get ready(){return null===this.layer||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view&&this.view.scale}get isScaleDriven(){const t=this.layer;if(null===t)return!1;if("effect"in t&&t.effect&&Array.isArray(t.effect))return!0;if("featureReduction"in t&&t.featureReduction&&"cluster"===t.featureReduction.type)return!0;if("renderer"in t&&t.renderer){if("dot-density"===t.renderer.type)return!0;const e=t.get("renderer.valueExpression");if(pp.test(e))return!0;const i=t.get("renderer.visualVariables");if(i)return i.some((t=>this._isScaleDrivenSizeVariable(t)))}return this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(t){if(this.hideLayersNotInCurrentView&&!await this._isLayerInCurrentView())return this.legendElements=[],void this.notifyChange("ready");const e=Array.from(t,(t=>{if(function(t){return"esri.layers.FeatureLayer"===t.declaredClass}(t))return this._getRendererLegendElements(t.renderer,{title:t.title});if(t.featureSet&&t.featureSet.features.length){const e=t.layerDefinition,i=e&&e.drawingInfo,s=i&&ve(i.renderer),r=mp.read(e.geometryType);return s?this._getRendererLegendElements(s,{title:t.name,geometryType:r}):(dp.warn("drawingInfo not available!"),null)}return null}));try{const t=[];await ye(e).then((e=>{e.forEach((({value:e})=>e&&t.push(...e)))})),this.legendElements=t,this.notifyChange("ready")}catch(t){dp.warn("error while building legend for layer!",t)}}async buildLegendElementsForRenderer(t){try{const e=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=e?await this._getRendererLegendElements(t):[],this.notifyChange("ready")}catch(t){dp.warn("error while building legend for layer!",t)}}async buildLegendElementsForTools(){const t=this.layer;if(function(t){return"esri.layers.WMTSLayer"===t.declaredClass}(t))this._constructLegendElementsForWMTSlayer();else if(function(t){return"esri.layers.WMSLayer"===t.declaredClass}(t))await this._constructLegendElementsForWMSSublayers();else if(Ep(t))await this._constructLegendElementsForBuildingSceneLayer();else if(jp(t)||function(t){return"esri.layers.TileLayer"===t.declaredClass}(t)||Ep(t))await this._constructLegendElementsForSublayers();else{this._handles.remove("imageryLayers-watcher");let s="default";if(Op(t)){var e,i;const r=t;s=((null==r||null==(e=r.renderingRule)?void 0:e.functionName)||"default")+"_"+(null!=(i=t.bandIds)&&i.length?t.bandIds.join(""):"###")}await this._getLegendLayers(`${t.uid}-${s}`).then((async e=>{this.legendElements=[],this.notifyChange("ready");const i=e.map((async e=>{if(Op(t)||Lp(t)){const e=t.watch(["renderingRule","bandIds"],(()=>we((async()=>{zp.default=null,t.renderer?await this.buildLegendElementsForRenderer(t.renderer):await this.buildLegendElementsForTools()}))()));this._handles.add(e,"imageryLayers-watcher")}const i=this._generateSymbolTableElementForLegendLayer(e);i&&i.infos.length&&(Op(t)&&(i.title=t.title),this.legendElements.push(i)),this.notifyChange("ready")}));await ye(i)})).catch((t=>{dp.warn("Request to server for legend has failed!",t)}))}}async _isLayerInCurrentView(){const t=this.layer,e=this.layerView,i=e&&"createQuery"in e&&"queryFeatureCount"in e;if(!(i||e&&"createQuery"in t&&"queryFeatureCount"in t))return!0;await be(e,"updating");const s=i?"createQuery"in e&&e.createQuery():"createQuery"in t&&t.createQuery();return s.geometry=this.view.extent,0!==(i?"queryFeatureCount"in e&&await e.queryFeatureCount(s):"queryFeatureCount"in t&&await t.queryFeatureCount(s))}_getParentLayerOpacity(t){let e=1;const i=t.parent;return i&&"uid"in i&&(e=this._getParentLayerOpacity(i)),t.opacity*e}_isGroupActive(){const t=this.children;return!!t.length&&t.some((t=>t.ready))}_isScaleDrivenSizeVariable(t){if(t&&"size"!==t.type)return!1;const e=t,i=e.minSize,s=e.maxSize;return"object"==typeof i&&i?this._isScaleDrivenSizeVariable(i):"object"==typeof s&&s?this._isScaleDrivenSizeVariable(s):!!e.expression||pp.test(e.valueExpression)}_isLayerScaleDriven(t){if("minScale"in t&&t.minScale>0||"maxScale"in t&&t.maxScale>0)return!0;if("sublayers"in t&&t.sublayers)return t.sublayers.some((t=>this._isLayerScaleDriven(t)));const e=t.parent;if(!1===t.loaded&&e&&jp(e)&&"source"in t&&t.source&&"map-layer"===t.source.type)for(const i of e.sourceJSON.layers)if(i.id===t.source.mapLayerId&&(i.minScale>0||i.maxScale>0))return!0;return!1}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this._handles.remove("wmts-activeLayer-watcher");const t=this.layer.activeLayer;if(this._handles.add(et(this.layer,"activeLayer",(()=>this._constructLegendElementsForWMTSlayer())),"wmts-activeLayer-watcher"),t.styleId&&t.styles){let e=null;t.styles.some((i=>t.styleId===i.id&&(e=i.legendUrl,!0))),e&&(this.legendElements=[{type:"symbol-table",title:t.title,infos:[{src:e,opacity:this.opacity}]}])}this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this._handles.remove("wms-sublayers-watcher");const t=this.layer;let e=null;(t.customParameters||t.customLayerParameters)&&(e={...t.customParameters,...t.customLayerParameters}),this._handles.add(et(this.layer,"sublayers",(()=>this._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(t.sublayers,e),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(t,e){const i=[];this._handles.add(t.on("change",(()=>this._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher");const s=t.toArray();for(const t of s){const s=t.watch(["title","visible","legendEnabled"],(()=>this._constructLegendElementsForWMSSublayers()));if(this._handles.add(s,"wms-sublayers-watcher"),!this.respectLayerVisibility||t.visible&&t.legendEnabled){const s=await this._generateSymbolTableElementForWMSSublayer(t,e);s&&s.infos.length&&i.unshift(s)}}return i}async _generateSymbolTableElementForWMSSublayer(t,e){if(!t.legendUrl&&t.sublayers){const i=(await this._generateLegendElementsForWMSSublayers(t.sublayers,e)).filter((t=>t));return{type:"symbol-table",title:t.title,infos:i}}return this._generateSymbolTableElementForLegendUrl(t,e)}async _generateSymbolTableElementForLegendUrl(t,e){var i;let s=t.legendUrl;if(!s)return;const r={type:"symbol-table",title:t.title||t.name||t.id&&t.id+"",infos:[]};e&&(s=_e(s,e));let n=null;const o=null==(i=t.layer)?void 0:i.opacity;try{n=(await w(s,{responseType:"image"})).data,n&&(n.style.opacity=o)}catch{}return r.infos.push({src:s,preview:n,opacity:o}),r}_getLegendLayers(t,e){const i=zp&&zp[t];return i?Promise.resolve(i):this._legendRequest(e).then((e=>{const i=e.layers;return zp[t]=i,i}))}_legendRequest(t){const e=this.layer;let i={f:"json",dynamicLayers:t};if(Op(e)){const t=e.exportImageServiceParameters.renderingRule;if(t&&(i.renderingRule=JSON.stringify(t.toJSON())),e.bandIds&&(i.bandIds=e.bandIds.join()),e.raster||e.viewId||e.customParameters){const{raster:t,viewId:s,customParameters:r}=e;i={raster:t,viewId:s,...i,...r}}}let s=e.url.replace(/(\/)+$/,"");if("version"in e&&e.version>=10.01){const t=s.indexOf("?");t>-1?s=s.substring(0,t)+"/legend"+s.substring(t):s+="/legend"}else{const t=s.toLowerCase().indexOf("/rest/"),e=s.substring(0,t)+s.substring(t+5,s.length);s="https://utility.arcgis.com/sharing/tools/legend?soapUrl="+encodeURI(e)+"&returnbytes=true"}return w(s,{query:i}).then((t=>t.data))}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this._handles.remove("sublayers-watcher");const t=this.layer;this._handles.add(et(t,"sublayers",(()=>this._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(t){dp.warn("Request to server for legend has failed!",t)}}async _generateLegendElementsForBuildingSublayers(t,e){let i=[];this._handles.add(t.on("change",(()=>this._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");const s=t.toArray();for(const t of s){const s=t.watch(["renderer","opacity","title","visible"],(()=>this._constructLegendElementsForBuildingSceneLayer()));if(this._handles.add(s,"sublayers-watcher"),!this.respectLayerVisibility||t.visible){const s=t&&null!=t.opacity?t.opacity:null,r=null!=s?s*e:e;if("building-group"===t.type){const e={type:"symbol-table",title:t.title,infos:[]},s=await this._generateLegendElementsForBuildingSublayers(t.sublayers,r);e.infos.push(...s),i=[e,...i]}else t.renderer&&(i=[...await this._getRendererLegendElements(t.renderer,{title:t.title,opacity:r,sublayer:t}),...i])}}return i.filter((t=>!!t&&(!("infos"in t)||t.infos.length>0)))}async _constructLegendElementsForSublayers(){this.legendElements=[],this._handles.remove("sublayers-watcher");const t=this.layer;this._handles.add(et(t,"sublayers",(()=>this._constructLegendElementsForSublayers)),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(t){dp.warn("Request to server for legend has failed!",t)}}async _generateLegendElementsForSublayers(t,e,i){const s=this.layer;let r=[];this._handles.add(t.on("change",(()=>this._constructLegendElementsForSublayers())),"sublayers-watcher");let n=t.toArray();!i&&this.sublayerIds&&this.sublayerIds.length&&(n=this.sublayerIds.map((t=>s.findSublayerById(t))).filter(Boolean));for(const t of n){const s=t.watch("renderer, opacity, title, visible, legendEnabled",(()=>this._constructLegendElementsForSublayers()));if(this._handles.add(s,"sublayers-watcher"),!this.respectLayerVisibility||t.visible&&t.legendEnabled&&this._isSublayerInScale(t)){const s=t&&null!=t.opacity?t.opacity:null,n=null!=s?s*e:e;if(t.renderer&&!t.sublayers&&t.originIdOf("renderer")>2)await t.load(),r=[...await this._getRendererLegendElements(t.renderer,{title:t.title,opacity:n,sublayer:t}),...r];else{const e=await this._generateSymbolTableElementForSublayer(t,n,i);e&&r.unshift(e)}}}return r.filter((t=>!!t&&(!("infos"in t)||t.infos.length>0)))}async _generateSymbolTableElementForSublayer(t,e,i){if(!i){i=new Map;const e=this.layer,s=t.source;let r=null;if(s&&("map-layer"!==s.type||s.mapLayerId!==t.id||s.gdbVersion&&s.gdbVersion!==("gdbVersion"in e&&e.gdbVersion))||t.originIdOf("renderer")>2||t.originIdOf("labelingInfo")>2||t.originIdOf("labelsVisible")>2){const t=new ji({layer:this.layer});r=t.hasDynamicLayers?t.dynamicLayers:null,t.destroy()}const n=r||`${e.uid}-default`;(await this._getLegendLayers(n,r)).forEach((t=>i.set(t.layerId,t)))}const s=i.get(t.id);if(!s&&t.sublayers){const s=await this._generateLegendElementsForSublayers(t.sublayers,e,i);return{type:"symbol-table",title:t.title,infos:s}}return this._generateSymbolTableElementForLegendLayer(s,t,e)}_generateSymbolTableElementForLegendLayer(t,e,i){var s;if(!t||!t.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(t,e))return null;const r=null==e?void 0:e.renderer;let n=(null==e?void 0:e.title)||t.layerName;if(r&&(!e||(null==e?void 0:e.originIdOf("renderer"))>2)){const t=(null==e?void 0:e.title)||this._getRendererTitle(r,e);t&&(n&&"string"!=typeof t&&"title"in t&&(t.title=n),n=t)}const o={type:"symbol-table",title:n,legendType:t.legendType?t.legendType:null,infos:[]},l=e?this._sanitizeLegendForSublayer(t.legend.slice(),e):t.legend;return(null==(s=t.legendGroups)?void 0:s.length)>0?t.legendGroups.forEach((e=>{var s;const r={type:"symbol-table",title:e.heading,legendType:t.legendType?t.legendType:null,infos:this._generateSymbolTableElementInfosForLegendLayer(l.filter((t=>t.groupId===e.id)),t.layerId,i)};(null==(s=r.infos)?void 0:s.length)>0&&o.infos.push(r)})):o.infos=this._generateSymbolTableElementInfosForLegendLayer(l,t.layerId,i),o.infos.length>0?o:null}_generateSymbolTableElementInfosForLegendLayer(t,e,i){return t.map((t=>{let s=t.url;if(t.imageData&&t.imageData.length>0)s=`data:image/png;base64,${t.imageData}`;else{if(0===s.indexOf("http"))return null;s=Ae(`${this.layer.url}/${e}/images/${s}`)}return{label:t.label,src:s,opacity:null==i?this.opacity:i,width:t.width,height:t.height}})).filter((t=>!!t))}_isSublayerInScale(t){const e=t.minScale||0;return!(e>0&&e<this.scale||(t.maxScale||0)>this.scale)}_isLegendLayerInScale(t,e){const i=e||this.layer;let s=null,r=null,n=!0;return!i.minScale&&0!==i.minScale||!i.maxScale&&0!==i.maxScale?(0===t.minScale&&i.tileInfo&&(s=i.tileInfo.lods[0].scale),0===t.maxScale&&i.tileInfo&&(r=i.tileInfo.lods[i.tileInfo.lods.length-1].scale)):(s=Math.min(i.minScale,t.minScale)||i.minScale||t.minScale,r=Math.max(i.maxScale,t.maxScale)),(s>0&&s<this.scale||r>this.scale)&&(n=!1),n}_sanitizeLegendForSublayer(t,e){if("version"in this.layer&&this.layer.version<10.1||0===t.length)return t;const i=e.renderer,s=t.some((t=>t.values));let r=null,n=null;return s&&t.some(((t,e)=>(t.values||(r=e,n=t,n.label||(n.label="others")),null!=n))),i?"unique-value"===i.type?n&&(t.splice(r,1),t.push(n)):"class-breaks"===i.type&&(n&&t.splice(r,1),t.reverse(),n&&t.push(n)):n&&(t.splice(r,1),t.push(n)),t}async _getRendererLegendElements(t,e={}){return function(t,e){return Ap(t)||xp(t)||Sp(t)||Cp(t)||Tp(t)?"2d"===e.type||function(t){return E(t)||"simple"===t.type||"unique-value"===t.type||"class-breaks"===t.type||"dictionary"===t.type}(t):bp(t)||wp(t)||_p(t)||kp(t)||Ip(t)||Mp(t)||yp(t)}(t,this.view)?function(t){return kp(t)||Ip(t)||Mp(t)||function(t){return"esri.renderers.PointCloudRGBRenderer"===t.declaredClass}(t)}(t)?this._constructPointCloudRendererLegendElements(t,e):Tp(t)?this._constructDotDensityRendererLegendElements(t):this._constructRendererLegendElements(t,e):(dp.warn(`Renderer of type '${t.type}' not supported!`),[])}_getPointCloudRendererTitle(t){return t.legendOptions&&t.legendOptions.title||t.field}_constructPointCloudRendererLegendElements(t,e={}){const i=e.title,s=[];let r=null,n=null;if(kp(t))r={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},t.colorClassBreakInfos.forEach((t=>{r.infos.unshift({label:t.label||t.minValue+" - "+t.maxValue,value:[t.minValue,t.maxValue],symbol:this._getAppliedCloneSymbol(gp,t.color)})}));else if(Ip(t)){const e=t.stops;let s=null;if(e.length&&(1===e.length&&(s=e[0].color),!s)){const t=e[0].value,i=e[e.length-1].value;null!=t&&null!=i&&(s=Yd(t+(i-t)/2,e))}r={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(gp,s||gp.color)}]};const o=function(t){let e=!1,i=[],s=[];if(i=t.map((t=>t.value)),e=t.some((t=>!!t.label)),e&&(s=t.map((t=>t.label))),null==i[0]&&null==i[i.length-1])return null;const r=e?null:Ud(i,!1);return i.map(((i,n)=>({value:i,color:Yd(i,t),label:e?s[n]:r[n]}))).reverse()}(t.stops);n={type:"color-ramp",title:i||this._getPointCloudRendererTitle(t),infos:o,preview:xe(o.map((t=>t.color)))}}else Mp(t)&&(r={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},t.colorUniqueValueInfos.forEach((t=>{r.infos.push({label:t.label||t.values.join(", "),value:t.values.join(", "),symbol:this._getAppliedCloneSymbol(gp,t.color)})})));r&&r.infos.length&&s.push(r),n&&n.infos.length&&s.push(n);const o=s.reduce(((t,e)=>t.concat(e.infos)),[]).filter((t=>!!t.symbol)).map((e=>this._getSymbolPreview(e,this.opacity,{symbolConfig:{applyColorModulation:!!t.colorModulation}})));return ye(o).then((()=>s))}_getElementInfoForDotDensity(t,e){const{backgroundColor:i,outline:s,dotSize:r}=t,n=this.effect,o=r+"-"+e+"-"+i+"-"+(s&&JSON.stringify(s.toJSON()))+"-"+n,l=this._dotDensityUrlCache,a=l.has(o)?l.get(o):Se(t,e,{effect:n});return l.set(o,a),{opacity:1,src:a.src,preview:a,width:a.width,height:a.height}}_constructDotDensityRendererLegendElements(t){const e=t.calculateDotValue(this.view.scale),i=t.legendOptions&&t.legendOptions.unit,s={type:"symbol-table",title:{value:e&&Math.round(e),unit:i||""},infos:[]};return t.attributes.forEach((e=>{const i=this._getElementInfoForDotDensity(t,e.color);i.label=e.label||e.valueExpressionTitle||e.field,s.infos.push(i)})),Promise.resolve([s])}async _constructRendererLegendElements(t,e={}){const{title:i,sublayer:s}=e,r=s||this.layer;let n=await this._loadRenderer(t);this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const o=await this._getVisualVariableLegendElements(n,r)||[],l={type:"symbol-table",title:i||this._getRendererTitle(n,r),infos:[]};let a=null,h=!1;const u=new Set;if(function(t){const e="authoringInfo"in t&&(null==t?void 0:t.authoringInfo);return"univariate-color-size"===(null==e?void 0:e.type)}(n)){let t=i;const e=function(t){const e="authoringInfo"in t&&(null==t?void 0:t.authoringInfo);return"univariate-color-size"===(null==e?void 0:e.type)&&"above-and-below"===(null==e?void 0:e.univariateTheme)}(n)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",s=o.findIndex((t=>"color-ramp"===t.type)),r=-1!==s?o.splice(s,1)[0]:null,l=o.findIndex((t=>"size-ramp"===t.type)),a=-1!==l?o.splice(l,1)[0]:null,h=[];r&&(t=r.title,h.push(r)),a&&(t=a.title,h.push(a)),h.length>0&&o.push({type:e,title:t,infos:h})}else if(Cp(n)){const t=function(t){let e=t.colorStops,i=e.length-1;if(e&&e[0]){const t=e[i];t&&1!==t.ratio&&(e=e.slice(0),e.push(new oe({ratio:1,color:t.color})),i++)}return e.map(((t,e)=>{let s="";return 0===e?s="low":e===i&&(s="high"),{color:t.color,label:s,ratio:t.ratio}})).reverse()}(n);o.push({type:"heatmap-ramp",title:i,infos:t,preview:xe(t.map((t=>t.color)),{effect:this.effect})})}else if(Sp(n)){const t=n&&n.authoringInfo;if(t&&"relationship"===t.type){const{focus:e,numClasses:i,field1:s,field2:a}=t;if(i&&s&&a){const t=[s,a];let h=tp(e)||0;for(const e of t){const{field:t,normalizationField:i,label:s}=e,n=s||{field:this._getFieldAlias(t,r),normField:i&&this._getFieldAlias(i,r)},o=Fp.clone();o.angle=h,l.infos.push({label:n,symbol:o}),u.add(o),h+=90}const c=function(t){const{focus:e,infos:i,numClasses:s}=t,r=Qd[s],n={};i.forEach((t=>{n[t.value]={label:t.label,fill:Zd(t.symbol)}}));const o=[];for(let t=0;t<s;t++){const e=[];for(let i=0;i<s;i++)e.push(n[r[t][i]].fill);o.push(e)}return{type:"relationship-ramp",numClasses:s,focus:e,colors:o,labels:Xd(e,n),rotation:tp(e)}}({focus:e,numClasses:i,infos:n.uniqueValueInfos});o.unshift(c)}}else{const t=n.field;n.uniqueValueInfos.forEach((e=>{e.symbol&&l.infos.push({label:e.label||this._getDomainName(t,e.value,r)||e.value,value:e.value,symbol:e.symbol})}))}n.defaultSymbol&&(l.infos.push({label:n.defaultLabel||"others",symbol:n.defaultSymbol}),h=!0)}else if(xp(n))a=this._isUnclassedRenderer(n),(!a||!this._hasSizeRamp)&&(n.classBreakInfos.forEach((t=>{t.symbol&&l.infos.unshift({label:t.label||(a?null:t.minValue+" - "+t.maxValue),value:[t.minValue,t.maxValue],symbol:t.symbol})})),a&&(l.title=null),this._updateInfosforClassedSizeRenderer(n,l.infos)),n.defaultSymbol&&!a&&(l.infos.push({label:n.defaultLabel||"others",symbol:n.defaultSymbol}),h=!0);else if(bp(n)){var c,d;if(Lp(this.layer)&&"Map"===(null==(c=this.layer)||null==(d=c.raster)?void 0:d.tileType))this._getServerSideLegend();else if(Lp(this.layer)||function(t){return"esri.layers.WCSLayer"===t.declaredClass}(this.layer)){const t=this._constructTileImageryStretchRendererElements(n);!function(t){return"stretch-ramp"===t.type}(t)?l.infos=t:o.push(t)}else{const t=this.layer;let e,i;var p,m;n.statistics&&n.statistics.length?(e=null!=n.statistics[0].min?n.statistics[0].min:n.statistics[0][0],i=null!=n.statistics[0].max?n.statistics[0].max:n.statistics[0][1]):(e=null==(p=n)?void 0:p.outputMin,i=null==(m=n)?void 0:m.outputMax);let s=[];const r=F(t.renderingRule?await t.generateRasterInfo(t.renderingRule):t.serviceRasterInfo),a=r.keyProperties.BandProperties;1===r.bandCount?(e=null!=e?e:r.statistics&&r.statistics[0].min,i=null!=i?i:r.statistics&&r.statistics[0].max,e||i?o.push(this._getStretchLegendElements(n,{min:e,max:i})):this._getServerSideLegend()):t.bandIds&&1===t.bandIds.length?(e=null!=e?e:r.statistics&&r.statistics[t.bandIds[0]].min,i=null!=i?i:r.statistics&&r.statistics[t.bandIds[0]].max,e||i?o.push(this._getStretchLegendElements(n,{min:e,max:i})):this._getServerSideLegend()):r.bandCount>=3?a&&a.length>=r.bandCount?t.bandIds&&3===t.bandIds.length?(s=t.bandIds.map((t=>a[t].BandName)),l.infos=this._createSymbolTableElementMultiBand(s)):"lerc"===t.format?(s=[0,1,2].map((t=>a[t].BandName)),l.infos=this._createSymbolTableElementMultiBand(s)):this._getServerSideLegend():"lerc"===t.format?(s=["band1","band2","band3"],l.infos=this._createSymbolTableElementMultiBand(s)):this._getServerSideLegend():this._getServerSideLegend()}}else if(wp(n))n.colormapInfos.forEach((t=>{l.infos.push({label:t.label,value:t.value,symbol:this._getAppliedCloneSymbol(vp,t.color)})}));else if(Ap(n)){let t=n.symbol;switch(e.geometryType){case"point":t="pointSymbol"in r&&r.pointSymbol;break;case"polyline":t="lineSymbol"in r&&r.lineSymbol;break;case"polygon":t="polygonSymbol"in r&&r.polygonSymbol}n.symbol&&!this._hasSizeRamp&&l.infos.push({label:n.label,symbol:t})}else if(yp(n)){n.outputUnit&&(this.title="("+n.toJSON().outputUnit+")"),l.title=n.attributeField;const t=n.getClassBreakInfos();null!=t&&t.length?t.forEach((t=>{l.infos.push({label:t.minValue+" - "+t.maxValue,symbol:t.symbol})})):l.infos.push({label:n.attributeField,symbol:n.getDefaultSymbol()})}else _p(n)&&o.push(this._getStretchLegendElements(n,{min:0,max:255}));const f=n.defaultSymbol;!f||h||Ap(n)||a&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||o.push({type:"symbol-table",infos:[{label:n.defaultLabel||"others",symbol:f}]}),l.infos.length&&o.unshift(l);const g=null==e.opacity?this.opacity:e.opacity,v=this._isTallSymbol("visualVariables"in n&&n.visualVariables),y=Op(this.layer)||Lp(this.layer),w=o.reduce(((t,e)=>t.concat(this._getAllInfos(e))),[]).filter((t=>!(null==t||!t.symbol))).map((t=>this._getSymbolPreview(t,g,{isDefault:t.symbol===f,applyScaleDrivenSize:!u.has(t.symbol),symbolConfig:{isTall:v,isSquareFill:y},effect:u.has(t.symbol)?null:this.effect})));return n=null,await ye(w),o}_getServerSideLegend(){setTimeout((()=>this.buildLegendElementsForTools()),0)}_getAllInfos(t){const e=null==t?void 0:t.infos;return e?e.reduce(((t,e)=>t.concat(this._getAllInfos(e))),[]):[t]}_constructTileImageryStretchRendererElements(t){var e,i;const s=this.layer,r=s.rasterInfo,n=r.bandCount||t.statistics.length;let o,l,a=[];const h=r.keyProperties&&r.keyProperties.BandProperties,u=null!=t&&null!=(e=t.statistics)&&e.length?t.statistics:null==r?void 0:r.statistics;if(u)o=void 0!==u[0].min?u[0].min:u[0][0],l=u[0].max||u[0][1];else{const t=fp[s.rasterInfo.pixelType.toLowerCase()];o=t[0],l=t[1]}if(s.hasStandardTime()&&(o=s.getStandardTimeValue(o),l=s.getStandardTimeValue(l)),1===r.bandCount||1===(null==(i=s.bandIds)?void 0:i.length))return this._getStretchLegendElements(t,{min:o,max:l});function c(t){var e;const i=(null!=s&&null!=(e=s.bandIds)&&e.length?s.bandIds:Array.from(Array(Math.min(r.bandCount,3)).keys())).map((e=>t&&t[e]&&t[e].BandName||"band"+(e+1)));return i.length<3?i.push(i[1]):i.length>3&&i.splice(3),i}return a=h&&h.length>=n?c(h):c(),this._createSymbolTableElementMultiBand(a)}_getStretchLegendElements(t,e){const i=function(t,e){let i=[];if(t&&"multipart"===t.type)t.colorRamps.reverse().forEach((function(s,r){i.push(0===r?{value:e.max,color:new ne(s.toColor),label:"high"}:{value:null,color:new ne(s.toColor),label:""}),i.push(r===t.colorRamps.length-1?{value:e.min,color:new ne(s.fromColor),label:"low"}:{value:null,color:new ne(s.fromColor),label:""})}));else{let s,r;t&&"algorithmic"===t.type?(s=t.fromColor,r=t.toColor):(s=[0,0,0,1],r=[255,255,255,1]),i=[{value:e.max,color:new ne(r),label:"high"},{value:e.min,color:new ne(s),label:"low"}]}return i}(t.colorRamp,e);return{type:"stretch-ramp",title:"",infos:i,preview:xe(i.map((t=>t.color)))}}_createSymbolTableElementMultiBand(t){const e=[],i=["red","green","blue"];return t.forEach(((t,s)=>{e.push({label:{colorName:i[s],bandName:t},src:qd[s],opacity:1})})),e}_updateInfosforClassedSizeRenderer(t,e){const i=t.authoringInfo&&"class-breaks-size"===t.authoringInfo.type,s=t.classBreakInfos.some((t=>he(t.symbol)));if(i&&s){const i=30,s=t.classBreakInfos.length,r=(i-12)/(s>1?s-1:s);e.forEach(((t,e)=>{t.size=i-r*e}))}}_isTallSymbol(t){let e=!1,i=!1;if(t)for(let s=0;s<t.length&&(!e||!i);s++){const r=t[s];"size"===r.type&&("height"===r.axis&&(e=!0),"width-and-depth"===r.axis&&(i=!0))}return e&&i}async _getSymbolPreview(t,e,i){let s=null!=i&&i.isDefault||null!=t.size||!this._hasSizeRamp?t.size:Ie(22);if(this._scaleDrivenSizeVariable&&null!=i&&i.applyScaleDrivenSize){const{getSize:e}=await import("./p-5420851c.js").then((function(t){return t.kG}));s=e(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:"simple-marker"===t.symbol.type?t.symbol.style:null})}return Ce(t.symbol,{size:s,opacity:e,scale:!1,symbolConfig:null==i?void 0:i.symbolConfig,effect:null==i?void 0:i.effect}).then((e=>(t.preview=e,t))).catch((()=>(t.preview=null,t)))}async _loadRenderer(t){var e,i;const s=[],r=this.layer;t=t.clone(),this._hasClusterSizeVariable=!1;const n="visualVariables"in t&&(null==(e=t.visualVariables)?void 0:e.some((t=>"size"===t.type&&"outline"!==t.target&&!pp.test(t.valueExpression))));if(t&&"visualVariables"in t&&!n&&"featureReduction"in r&&"cluster"===(null==(i=r.featureReduction)?void 0:i.type)){const e=F(function(t,e){if(!t||!("visualVariables"in t)||!t.visualVariables)return null;const i=t.visualVariables.find((t=>"size"===t.type)),s=((t,e)=>{const i=t.featuresTilingScheme.getClosestInfoForScale(t.scale).level;return null!=e&&e.levels?e.levels[i]:null})(e,i);return s?new re({field:i.field,minSize:s[2].size,minDataValue:s[2].value,maxSize:s[3].size,maxDataValue:s[3].value}):null}(this.layerView._effectiveRenderer,this.view));if(e){const i=r.featureReduction;if("clusterMinSize"in i&&"clusterMaxSize"in i){const{clusterMinSize:t,clusterMaxSize:s}=i;e.legendOptions=new ke({showLegend:t!==s})}t.visualVariables=(t.visualVariables||[]).concat([e]),this._hasClusterSizeVariable=!0}}const o=await this._getMedianColor(t);if(xp(t)||Sp(t)){const e=(t.classBreakInfos||t.uniqueValueInfos).map((t=>this._fetchSymbol(t.symbol,o).then((e=>{t.symbol=e})).catch((()=>{t.symbol=null}))));Array.prototype.push.apply(s,e)}return s.push(this._fetchSymbol(t.symbol||t.defaultSymbol,t.defaultSymbol?null:o).then((e=>{this._applySymbolToRenderer(t,e,Ap(t))})).catch((()=>{this._applySymbolToRenderer(t,null,Ap(t))}))),ye(s).then((()=>t))}_applySymbolToRenderer(t,e,i){i?t.symbol=e:t.defaultSymbol=e}async _getMedianColor(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find((t=>"color"===t.type));if(!e)return null;let i=null,s=null;if(e.stops){if(1===e.stops.length)return e.stops[0].color;i=e.stops[0].value,s=e.stops[e.stops.length-1].value}const r=i+(s-i)/2,{getColor:n}=await import("./p-5420851c.js").then((function(t){return t.kG}));return n(e,r)}_fetchSymbol(t,e){if(!t)return Promise.reject();if("web-style"===t.type){const i=t.portal,s=t.name+"-"+t.styleName+"-"+t.styleUrl+"-"+(i&&i.url)+"-"+(i&&i.user&&i.user.username),r=this._webStyleSymbolCache;return r.has(s)||r.set(s,"2d"===this.view.type?t.fetchCIMSymbol():t.fetchSymbol()),r.get(s).then((t=>this._getAppliedCloneSymbol(t,e))).catch((()=>(dp.warn("Fetching web-style failed!"),Promise.reject())))}return Promise.resolve(this._getAppliedCloneSymbol(t,e))}_getAppliedCloneSymbol(t,e){if(!t||!e)return t;const i=t.clone(),s=e&&e.toRgba();return i.type.indexOf("3d")>-1?this._applyColorTo3dSymbol(i,s):"cim"===i.type?de(i,e):i.color&&(i.color=new ne(s||i.color)),i}_applyColorTo3dSymbol(t,e){e&&t.symbolLayers.forEach((t=>{t&&(t.material||(t.material={}),t.material.color=new ne(e))}))}async _getVisualVariableLegendElements(t,e){if(!("visualVariables"in t)||!t.visualVariables||"vector-field"===t.type)return null;const i=t.visualVariables,s=[],r=[],n=[];for(const t of i)"color"===t.type?s.push(t):"size"===t.type?r.push(t):"opacity"===t.type&&n.push(t);const o=[...s,...r,...n];let l,a;if(0===s.length&&xp(t)&&t.classBreakInfos&&1===t.classBreakInfos.length){const e=t.classBreakInfos[0];l=e&&e.symbol}if(0===s.length&&Ap(t)&&(l=t.symbol),l)if(l.type.indexOf("3d")>-1){const t=l.symbolLayers.getItemAt(0);"water"===t.type?c(t.color)&&(a=t.color):c(t.material)&&c(t.material.color)&&(a=t.material.color)}else l.url||(a=l.color);const h=this.effect;return(await Promise.all(o.map((async i=>{if(!i.legendOptions||!1!==i.legendOptions.showLegend){const s=this._getRampTitle(i,e);let r=null;const n="getField"in e&&e.getField&&e.getField(i.field),o=n&&Mt(n);if("color"===i.type){const t=await Wd(i,null,o);r={type:"color-ramp",title:s,infos:t,preview:xe(t.map((t=>t.color)),{effect:h})},this._hasColorRamp||(this._hasColorRamp=!(null==r.infos||!r.infos.length))}else if("size"===i.type&&"outline"!==i.target)pp.test(i.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=i):(r={type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(i):s,infos:await rp(t,i,await this._getMedianColor(t),this.scale,this.view.type,o)},this._hasSizeRamp||(this._hasSizeRamp=!(null==r.infos||!r.infos.length)));else if("opacity"===i.type){const t=await Wd(i,a,o);r={type:"opacity-ramp",title:s,infos:t,preview:xe(t.map((t=>t.color)),{effect:h})},this._hasOpacityRamp||(this._hasOpacityRamp=!(null==r.infos||!r.infos.length))}return r&&r.infos?r:null}})))).filter((t=>!!t))}_getDomainName(t,e,i){if(t&&"function"!=typeof t){const s="getField"in i&&i.getField&&i.getField(t),r=s&&"getFieldDomain"in i&&i.getFieldDomain?i.getFieldDomain(s.name):null;return r&&"coded-value"===r.type?r.getName(e):null}return null}_getClusterTitle(t){const e=this.layer,i=t.field;if("featureReduction"in e&&e.featureReduction&&"cluster"===e.featureReduction.type){const t=e.featureReduction,s="popupTemplate"in t&&t.popupTemplate,r=s&&s.fieldInfos;if(r)for(const t of r)if(t.fieldName===i)return"cluster_count"===i?t.label||{showCount:!0}:t.label}return{showCount:!0}}_getRampTitle(t,e){let i=t.field,s=t.normalizationField,r=!1,n=!1,o=!1,l=null;i="function"==typeof i?null:i,s="function"==typeof s?null:s;const a=t.legendOptions&&t.legendOptions.title;if(null!=a)l=a;else if(t.valueExpressionTitle)l=t.valueExpressionTitle;else{if("renderer"in e&&e.renderer&&"authoringInfo"in e.renderer&&e.renderer.authoringInfo&&e.renderer.authoringInfo.visualVariables){const t=e.renderer.authoringInfo.visualVariables;for(let e=0;e<t.length;e++){const i=t[e];if("color"===i.type){if("ratio"===i.style){r=!0;break}if("percent"===i.style){n=!0;break}if("percent-of-total"===i.style){o=!0;break}}}}l={field:i&&this._getFieldAlias(i,e),normField:s&&this._getFieldAlias(s,e),ratio:r,ratioPercent:n,ratioPercentTotal:o}}return l}_getRendererTitle(t,e){const i=t;if(i.legendOptions&&i.legendOptions.title)return i.legendOptions.title;if(i.valueExpressionTitle)return i.valueExpressionTitle;let s=i.field,r=null,n=null;xp(i)&&(r=i.normalizationField,n="percent-of-total"===i.normalizationType),s="function"==typeof s?null:s,r="function"==typeof r?null:r;let o=null;return(s||r)&&(o={field:s&&this._getFieldAlias(s,e),normField:r&&this._getFieldAlias(r,e),normByPct:n}),o}_getFieldAlias(t,e){const i="popupTemplate"in e&&e.popupTemplate,s=i&&i.fieldInfos;let r=null;s&&s.some((e=>t===e.fieldName&&(r=e,!0)));let n=null;"getField"in e&&e.getField?n=e.getField(t):"fieldsIndex"in e&&e.fieldsIndex&&(n=e.fieldsIndex.get(t));const o=r||n;let l=null;return o&&(l=r&&r.label||n&&n.alias||"name"in o&&o.name||"fieldName"in o&&o.fieldName),l}_isUnclassedRenderer(t){const e=t.visualVariables;let i=!1;return xp(t)&&t.classBreakInfos&&1===t.classBreakInfos.length&&e&&(i=t.field?e.some((e=>!(!e||t.field!==e.field||(t.normalizationField||e.normalizationField)&&t.normalizationField!==e.normalizationField))):!!e.length),i}};r([n()],Pp.prototype,"children",void 0),r([n({readOnly:!0})],Pp.prototype,"effect",null),r([n()],Pp.prototype,"layerView",void 0),r([n()],Pp.prototype,"layer",void 0),r([n()],Pp.prototype,"legendElements",void 0),r([n({readOnly:!0})],Pp.prototype,"opacity",null),r([n()],Pp.prototype,"parent",void 0),r([n({readOnly:!0,dependsOn:[]})],Pp.prototype,"ready",null),r([n()],Pp.prototype,"hideLayersNotInCurrentView",void 0),r([n()],Pp.prototype,"keepCacheOnDestroy",void 0),r([n()],Pp.prototype,"respectLayerVisibility",void 0),r([n({readOnly:!0})],Pp.prototype,"scale",null),r([n()],Pp.prototype,"sublayerIds",void 0),r([n({readOnly:!0})],Pp.prototype,"isScaleDriven",null),r([n()],Pp.prototype,"title",void 0),r([n({readOnly:!0,dependsOn:["ready"],value:0})],Pp.prototype,"version",null),r([n()],Pp.prototype,"view",void 0),Pp=r([o("esri.widgets.Legend.support.ActiveLayerInfo")],Pp);const Rp=Pp,Np=J.ofType(Rp),Bp=["esri.layers.BuildingSceneLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.TileLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer"],Dp="view.basemapView.baseLayerViews",Gp="view.groundView.layerViews",Vp="view.basemapView.referenceLayerViews",$p=[Dp,Gp,"view.layerViews",Vp];let qp=class extends l{constructor(t){super(t),this._handles=new U,this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new J,this.activeLayerInfos=new Np,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this._handles.add(W(this,"view",this._viewHandles),"view"),this._handles.add(te((()=>this._refresh())))}destroy(){this._destroyViewActiveLayerInfos(),this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}_viewHandles(){this._handles.remove("state"),this.view&&this._handles.add(W(this,"state",this._stateHandles),"state")}_stateHandles(){this._resetAll(),"ready"===this.state&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this._handles.remove(["all-layer-views","legend-properties"]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(t){this._handles.remove(t);const e=this._activeLayerInfosByLayerViewId[t];delete this._activeLayerInfosByLayerViewId[t],e&&e.parent&&e.parent.children.remove(e)}_watchPropertiesAndAllLayerViews(){const{allLayerViews:t}=this.view;t.length&&this._refresh(),this._handles.add(t.on("change",this._allLayerViewsChangeHandle.bind(this)),"all-layer-views"),this._handles.add(et(this,"layerInfos, basemapLegendVisible, groundLegendVisible",this._propertiesChangeHandle.bind(this)),"legend-properties")}_allLayerViewsChangeHandle(t){t.removed.forEach((t=>this._destroyViewActiveLayerInfo(t.uid))),this._refresh()}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(t){if(t.length<2)return;const e=[];t.forEach((i=>{if(!i.parent){const s=i.layer.parent,r=s&&"uid"in s&&this._layerViewByLayerId[s.uid],n=r&&this._activeLayerInfosByLayerViewId[r.uid];n&&-1!==t.indexOf(n)&&(e.push(i),i.parent=n,n.children.add(i),this._sortActiveLayerInfos(n.children))}})),t.removeMany(e);const i={};this.view.allLayerViews.forEach(((t,e)=>i[t.layer.uid]=e)),t.sort(((t,e)=>(i[e.layer.uid]||0)-(i[t.layer.uid]||0)))}_generateLayerViews(){const t=[];return $p.filter(this._filterLayerViews,this).map(this.get,this).filter((t=>null!=t)).forEach(this._collectLayerViews("layerViews",t)),t}_filterLayerViews(t){return!(!this.basemapLegendVisible&&(t===Dp||t===Vp)||!this.groundLegendVisible&&t===Gp)}_collectLayerViews(t,e){const i=s=>(s&&s.forEach((s=>{e.push(s),i(s[t])})),e);return i}_filterLayerViewsByLayerInfos(t){const e=this.layerInfos;return!e||!e.length||e.some((e=>this._hasLayerInfo(e,t)))}_hasLayerInfo(t,e){const i=this._isLayerUIDMatching(t.layer,e.layer.uid);return i&&(this._layerInfosByLayerViewId[e.uid]=t),i}_isLayerUIDMatching(t,e){return t&&(t.uid===e||this._hasLayerUID(t.layers,e))}_hasLayerUID(t,e){return t&&t.some((t=>this._isLayerUIDMatching(t,e)))}_isLayerViewSupported(t){return!!Bp.includes(t.layer.declaredClass)&&(this._layerViewByLayerId[t.layer.uid]=t,!0)}_generateActiveLayerInfo(t){this._isLayerActive(t)?this._buildActiveLayerInfo(t):(this._handles.remove(t.uid),this._handles.add(et(t,"legendEnabled, layer.legendEnabled",(()=>this._layerActiveHandle(t))),t.uid))}_layerActiveHandle(t){this._isLayerActive(t)&&(this._handles.remove(t.uid),this._buildActiveLayerInfo(t))}_isLayerActive(t){return!this.respectLayerVisibility||t.legendEnabled&&t.get("layer.legendEnabled")}_buildActiveLayerInfo(t){var e;const i=t.layer,s=t.uid,r=this._layerInfosByLayerViewId[s];let n=this._activeLayerInfosByLayerViewId[s];n||(n=new Rp({layer:i,layerView:t,title:r&&void 0!==r.title&&r.layer.uid===i.uid?r.title:i.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:r&&r.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[s]=n);const o=i.parent&&"uid"in i.parent&&this._layerViewByLayerId[null==(e=i.parent)?void 0:e.uid];if(n.parent=this._activeLayerInfosByLayerViewId[null==o?void 0:o.uid],!this._handles.has(s)){const e=[et(i,"title",(t=>this._titleHandle(t,n))),et(i,"renderer?, opacity, pointSymbol?, lineSymbol?, polygonSymbol?",(()=>this._constructLegendElements(n))),Me(this.view,"stationary",(()=>this._scaleHandle(n))),et(t,"_effectiveRenderer",(()=>this._constructLegendElements(n))),et(i,"effect",(()=>this._constructLegendElements(n)))];if(this.respectLayerVisibility){const s=et(t,"legendEnabled",(t=>this._legendEnabledHandle(t,n))),r=et(i,"legendEnabled",(t=>this._legendEnabledHandle(t,n)));e.push(s,r)}this._handles.add(e,s)}n.isScaleDriven||this._constructLegendElements(n),this._addActiveLayerInfo(n)}_titleHandle(t,e){e.title=t,this._constructLegendElements(e)}_legendEnabledHandle(t,e){t?this._addActiveLayerInfo(e):this._removeActiveLayerInfo(e)}_scaleHandle(t){(t.isScaleDriven||t.hideLayersNotInCurrentView)&&this._constructLegendElements(t)}_addActiveLayerInfo(t){const{layerView:e,layer:i}=t;if(this._isLayerActive(e)&&-1===this.activeLayerInfos.indexOf(t)){const e=t.parent;if(e)-1===e.children.indexOf(t)&&e.children.push(t),this._sortActiveLayerInfos(e.children);else{var s;const e=null==(s=this.layerInfos)?void 0:s.some((t=>t.layer.uid===i.uid));i.parent&&"uid"in i.parent&&!e?this._activeLayerInfosWithNoParent.add(t):(this.activeLayerInfos.add(t),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const t=[];this._activeLayerInfosWithNoParent.forEach((e=>{const i=e.layer.parent,s=i&&"uid"in i&&this._layerViewByLayerId[null==i?void 0:i.uid],r=this._activeLayerInfosByLayerViewId[null==s?void 0:s.uid];r&&(t.push(e),e.parent=r)})),t.length&&(this._activeLayerInfosWithNoParent.removeMany(t),t.forEach((t=>this._addActiveLayerInfo(t))))}}}_removeActiveLayerInfo(t){const e=t.parent;e?e.children.remove(t):this.activeLayerInfos.remove(t)}_constructLegendElements(t){const e=t.layer;"featureCollections"in e&&e.featureCollections?t.buildLegendElementsForFeatureCollections(e.featureCollections):"renderer"in e&&e.renderer?t.buildLegendElementsForRenderer(e.renderer):"url"in e&&e.url?t.buildLegendElementsForTools():t.children.forEach((t=>this._constructLegendElements(t)))}};r([n({type:Np})],qp.prototype,"activeLayerInfos",void 0),r([n()],qp.prototype,"basemapLegendVisible",void 0),r([n()],qp.prototype,"groundLegendVisible",void 0),r([n()],qp.prototype,"hideLayersNotInCurrentView",void 0),r([n()],qp.prototype,"keepCacheOnDestroy",void 0),r([n()],qp.prototype,"respectLayerVisibility",void 0),r([n()],qp.prototype,"layerInfos",void 0),r([n({readOnly:!0})],qp.prototype,"state",null),r([n()],qp.prototype,"view",void 0),qp=r([o("esri.widgets.Legend.LegendViewModel")],qp);const Hp=qp,Up="esri-relationship-ramp--square__table-row",Wp="esri-relationship-ramp--square__table-cell",Jp="esri-relationship-ramp--square__table-label";function Yp(t,e,i,s){const{focus:r,labels:n}=t,o=!!r,l=function(t,e,i,s,r=60){const{focus:n,numClasses:o,colors:l,rotation:a}=t,h=!!n,u=Math.sqrt(r**2+r**2)+(h?0:5),c=[],d=[],p=[],m=(r||75)/o;for(let t=0;t<o;t++){const e=t*m;for(let i=0;i<o;i++){const s=i*m,r=Li(l[t][i]),n=Fi(null),o={type:"rect",x:s,y:e,width:m,height:m};c.push(zi(r)),d.push(Pi(o,r.fill,n,null)),p.push(Ri(o))}}let f=null;h||(f="margin: -15px -15px -18px -15px");const g=Kp("left",n,e),v=Kp("right",n,e),y=Ni(p),w=Bi(y,u,u,0,!1,a,!1),b=Bi(y,u,u,0,!1,h?-45:null,!1);return ht("div",{styles:{filter:s,opacity:null==i?null:`${i}`},class:h?"esri-relationship-ramp--diamond__middle-column--ramp":Wp},ht("svg",{xmlns:"http://www.w3.org/2000/svg",width:u,height:u,style:f},ht("defs",null,ht("marker",{id:`${e}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},ht("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),ht("marker",{id:`${e}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},ht("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),c),ht("g",{transform:w},d),ht("g",{transform:b},ht("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":g.markerStart,"marker-end":g.markerEnd,x1:-10,y1:r-15,x2:-10,y2:15}),ht("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":v.markerStart,"marker-end":v.markerEnd,x1:15,y1:r+10,x2:r-15,y2:r+10}))))}(t,e,i,s);return o?ht("div",{class:"esri-relationship-ramp--diamond__container"},ht("div",{class:"esri-relationship-ramp--diamond__left-column"},n.left),ht("div",{class:"esri-relationship-ramp--diamond__middle-column"},ht("div",{class:"esri-relationship-ramp--diamond__middle-column--label"},n.top),l,ht("div",{class:"esri-relationship-ramp--diamond__middle-column--label"},n.bottom)),ht("div",{class:"esri-relationship-ramp--diamond__right-column"},n.right)):ht("div",{class:"esri-relationship-ramp--square__table"},ht("div",{class:Up},ht("div",{class:Te(Wp,Jp,"esri-relationship-ramp--square__table-label--right-bottom")},n.left),ht("div",{class:Wp}),ht("div",{class:Te(Wp,Jp,"esri-relationship-ramp--square__table-label--left-bottom")},n.top)),ht("div",{class:Up},ht("div",{class:Wp}),l,ht("div",{class:Wp})),ht("div",{class:Up},ht("div",{class:Te(Wp,Jp,"esri-relationship-ramp--square__table-label--right-top")},n.bottom),ht("div",{class:Wp}),ht("div",{class:Te(Wp,Jp,"esri-relationship-ramp--square__table-label--left-top")},n.right)))}function Kp(t,e,i){const s=`${i}_arrowStart`,r=`${i}_arrowEnd`,n="left"===t,o={markerStart:null,markerEnd:null};switch(e){case"HL":n?o.markerStart=`url(#${r})`:o.markerEnd=`url(#${s})`;break;case"LL":o.markerStart=`url(#${r})`;break;case"LH":n?o.markerEnd=`url(#${s})`:o.markerStart=`url(#${r})`;break;default:o.markerEnd=`url(#${s})`}return o}const Qp=Ee();function Zp(t="vertical"){const e="stroke:rgb(200, 200, 200);stroke-width:1";return"vertical"===t?ht("svg",{height:"4",width:"10"},ht("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:e})):ht("svg",{height:"10",width:"10"},ht("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:e}))}function Xp(t,e="vertical"){const i=document.createElement("div");return i.style.height="20px",i.className="esri-univariate-above-and-below-ramp__symbol",null!=t&&(i.style.opacity=t.toString()),Qp.append(i,Zp.bind(null,e)),i}function tm(t,e,i="vertical",s){t.infos.forEach(((t,r)=>{if(s&&2===r)t.preview=Xp(e,i);else{const e=je(t.size)+("horizontal"===i?20:10),s="div"===t.preview.tagName.toLowerCase(),r=s?t.preview:document.createElement("div");r.className="esri-univariate-above-and-below-ramp__symbol","horizontal"===i?r.style.width=`${e}px`:r.style.height=`${e}px`,s||r.appendChild(t.preview),t.preview=r}}))}function em(t,e="classic"){const i=t.infos;return"classic"===e?(je(i[0].size)+10)/2:(je(i[0].size)-je(i[i.length-1].size))/2}function im(t,e){if(!t)return null;const i=t.infos.map((t=>t.color)),s=xe("full"===e.type?i:"above"===e.type?i.slice(0,3):i.slice(2,5),{width:e.width,height:e.height,align:e.rampAlignment,effect:e.effect});return s.className="esri-legend__color-ramp",null!=e.opacity&&(s.style.opacity=e.opacity.toString()),s}function sm(t,e,i,s="vertical"){let r=0;const n=t.infos,o=Math.floor(n.length/2),l="full"===e||"below"===e?n.length-1:o;for(let t="full"===e||"above"===e?0:o;t<=l;t++)r+=i&&t===o?"horizontal"===s?10:20:je(n[t].size)+("horizontal"===s?20:10);return Math.round(r)}function rm(t,e,i,s="vertical"){const r=sm(t,e,i,s),n=t.infos,o=Math.floor(n.length/2),l="full"===e||"above"===e?0:o,a="full"===e||"below"===e?n.length-1:o,h=i?"vertical"===s?20:10:0,u="vertical"===s?10*("full"===e?2:1):20*("full"===e?2:1);return Math.round(r-(je("full"===e?n[l].size+n[a].size:"above"===e?n[l].size:n[a].size)/2+h/2+u/2))}function nm(t,e,i="vertical"){const s=t.infos;let r=s.filter((({type:t})=>"size-ramp"===t))[0],n=s.filter((({type:t})=>"color-ramp"===t))[0];var o;return r&&(r={...r},r.infos=[...r.infos]),n&&(n={...n},n.infos=[...n.infos]),tm(r,e,i,!0),"horizontal"===i&&(r.infos.reverse(),null==(o=n)||o.infos.reverse()),{sizeRampElement:r,colorRampElement:n}}function om(t,e="vertical"){const i=t.infos;let s=i.filter((({type:t})=>"size-ramp"===t))[0],r=i.filter((({type:t})=>"color-ramp"===t))[0];var n;return s&&(s={...s},s.infos=[...s.infos]),r&&(r={...r},r.infos=[...r.infos]),tm(s,null,e,!1),"horizontal"===e&&(s.infos.reverse(),null==(n=r)||n.infos.reverse()),{sizeRampElement:s,colorRampElement:r}}function lm(t){t.appendChild(this)}function am(t,e,i){if(!e)return;if("string"==typeof e||"number"==typeof e)return e;if("value"in e||"unit"in e)return Nt(t.dotValue,e);if("colorName"in e||"bandName"in e)return t[e.colorName]+": "+(t[e.bandName]||e.bandName);if("showCount"in e)return e.showCount?t.clusterCountTitle:null;let s=null;return function(t,e){return e}(0,i)?s=e.ratioPercentTotal?"showRatioPercentTotal":e.ratioPercent?"showRatioPercent":e.ratio?"showRatio":e.normField?"showNormField":e.field?"showField":null:hm(0,i)&&(s=e.normField?"showNormField":e.normByPct?"showNormPct":e.field?"showField":null),s?Nt("showField"===s?"{field}":t[s],{field:e.field,normField:e.normField}):null}function hm(t,e){return!e}function um(t,e){return!!(e&&"Stretched"===e&&t.version>=10.3&&"esri.layers.ImageryLayer"===t.declaredClass)}const cm="esri-legend--card__layer-row",dm="esri-legend--card__ramp-label",pm="esri-legend--card__symbol",mm="esri-legend__layer-cell esri-legend__layer-cell--info",fm=window.devicePixelRatio;let gm=class extends lt{constructor(t,e){super(t,e),this._handles=new U,this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}initialize(){this.own([this.watch("activeLayerInfos",(t=>{this._handles.removeAll(),this._watchForSectionChanges(t)}))])}destroy(){this._handles.destroy(),this._handles=null}render(){this._hasIndicators="auto"===this.layout&&this.view.container.clientWidth<=768||"stack"===this.layout;const t=this.activeLayerInfos,e=t&&t.toArray().map((t=>this._renderLegendForLayer(t))).filter((t=>!!t));this._hasIndicators?this._selectedSectionName&&-1!==this._sectionNames.indexOf(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const i=this._sectionNames.length,s=this._sectionNames.map(((t,e)=>{const s=Nt(this.messagesCommon.pagination.pageText,{index:e+1,total:i});return ht("div",{key:t,role:"tab",id:t,"aria-label":s,"aria-controls":`${t}-panel`,"aria-selected":(this._selectedSectionName===t).toString(),tabIndex:this._selectedSectionName===t?0:-1,title:s,onclick:this._selectSection,onkeydown:this._focusSection,bind:this,class:this.classes("esri-legend--card__carousel-indicator",{"esri-legend--card__carousel-indicator--activated":this._selectedSectionName===t}),"data-section-name":t})})),r=this._hasIndicators&&i>1?ht("div",{class:"esri-legend--card__carousel-indicator-container",key:"carousel-navigation",role:"tablist"},s):null,n=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):e&&e.length?e:null;return ht("div",{class:this.classes("esri-legend--card",{"esri-legend--stacked":this._hasIndicators})},n||ht("div",{class:"esri-legend--card__message"},this.messages.noLegend),r)}_selectSection(t){const e=t.target.getAttribute("data-section-name");e&&(this._selectedSectionName=e)}_focusSection(t){switch(t.key){case"ArrowLeft":case"ArrowRight":this._switchSectionOnArrowPress(t);break;case"Enter":case" ":this._selectSection(t)}}_switchSectionOnArrowPress(t){const e=t.key,i="ArrowLeft"===e?-1:1,s=t.target.getAttribute("data-section-name"),r=this._sectionNames.indexOf(s),n=this._sectionNames;let o=null;-1!==r&&(n[r+i]?o=document.getElementById(n[r+i]):"ArrowLeft"===e?o=document.getElementById(n[n.length-1]):"ArrowRight"===e&&(o=document.getElementById(n[0])),o&&o.focus())}_watchForSectionChanges(t){if(this._generateSectionNames(),t){t.forEach((t=>{const e=`activeLayerInfo-${t.layer.uid}-version-change`;this._handles.remove(e),this._watchForSectionChanges(t.children),this._handles.add(t.watch("version",(()=>this._generateSectionNames())),e)}));const e="activeLayerInfos-collection-change";this._handles.remove(e),this._handles.add(t.on("change",(()=>this._watchForSectionChanges(t))),e)}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)}_getSectionName(t,e,i){return`${this.id}${t.uid}-type-${e.type}-${i}`}_generateSectionNamesForActiveLayerInfo(t){t.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),t.legendElements&&t.legendElements.forEach(((e,i)=>{this._sectionNames.push(this._getSectionName(t.layer,e,i))}))}_renderLegendForLayer(t){if(!t.ready)return null;if(t.children.length){const e=t.children.map((t=>this._renderLegendForLayer(t))).toArray();return ht("div",{key:t.layer.uid,class:this.classes("esri-legend--card__service","esri-legend--card__group-layer")},ht("div",{class:"esri-legend--card__service-caption-container"},t.title),e)}{const e=t.legendElements;if(e&&!e.length)return null;const i=e.some((t=>"relationship-ramp"===t.type)),s=e.map(((e,s)=>this._renderLegendForElement(e,t,s,i))).filter((t=>!!t));return s.length?ht("div",{key:t.layer.uid,class:this.classes("esri-legend--card__service",{"esri-legend--card__group-layer-child":!!t.parent})},ht("div",{class:"esri-legend--card__service-caption-container"},ht("div",{class:"esri-legend--card__service-caption-text"},t.title)),ht("div",{class:"esri-legend--card__service-content"},s)):null}}_renderLegendForElement(t,e,i,s=!1){const r="size-ramp"===t.type,n=e.layer;let o=null;if("string"==typeof t.title)o=t.title;else if(t.title){const e=t.title,i=am(this.messages,e,"color-ramp"===t.type||"opacity-ramp"===t.type);o=e.title?`${e.title} (${i})`:i}const l=this._getSectionName(n,t,i),a=this._hasIndicators?ht("div",null,ht(ut,{level:this.headingLevel,class:"esri-legend--card__carousel-title"},e.title),ht(ut,{level:this.headingLevel+1,class:"esri-legend--card__layer-caption"},o)):o?ht(ut,{level:this.headingLevel,class:"esri-legend--card__layer-caption"},o):null,h=e.effect;let u=null;if("symbol-table"===t.type){const i=t.infos.map(((i,s)=>this._renderLegendForElementInfo(i,e,t.legendType,s))).filter((t=>!!t));i.length&&(u=ht("div",{class:this.classes({"esri-legend--card__label-container":!(i[0].properties.classes&&i[0].properties.classes["esri-legend--card__symbol-row"]||s),"esri-legend--card__relationship-label-container":s})},i))}else"color-ramp"===t.type||"opacity-ramp"===t.type||"heatmap-ramp"===t.type?u=this._renderLegendForRamp(t,n.opacity,h):r?u=this._renderSizeRamp(t,n.opacity):"relationship-ramp"===t.type?u=Yp(t,this.id,n.opacity,h):"univariate-above-and-below-ramp"===t.type?u=this._renderUnivariateAboveAndBelowRamp(t,n.opacity,h):"univariate-color-size-ramp"===t.type&&(u=this._renderUnivariateColorSizeRamp(t,n.opacity,h));if(!u)return null;const c=ht("div",{key:l,class:"esri-legend--card__section",id:`${l}-panel`,role:"tabpanel","aria-labelledby":l,tabIndex:0},[a,u]);return this._sectionMap.set(l,c),c}_renderUnivariateAboveAndBelowRamp(t,e,i){const{sizeRampElement:s,colorRampElement:r}=nm(t,e,"horizontal"),n=sm(s,"full",!0,"horizontal"),o=rm(s,"above",!0,"horizontal"),l=rm(s,"below",!0,"horizontal"),a=im(r,{width:o,height:12,rampAlignment:"horizontal",opacity:e,type:"above",effect:i}),h=im(r,{width:l,height:12,rampAlignment:"horizontal",opacity:e,type:"below",effect:i}),u=em(s,"card"),c=s.infos.map((t=>t.label)),d=c.length-1,p=c.map(((t,e)=>0===e||e===d?ht("div",{key:e},t):null)),m={marginTop:"3px",marginLeft:`${u}px`,display:"flex"},f={width:`${n}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return ht("div",{class:cm,key:"size-ramp-preview",styles:{display:"flex",flexDirection:"column"}},ht("div",{class:this.classes("esri-legend--card__symbol-container","esri-legend__size-ramp--horizontal"),styles:{display:"flex",flexDirection:"row"}},s.infos.map(((t,e)=>ht("div",{key:e,class:pm,bind:t.preview,afterCreate:lm})))),a?ht("div",{class:"esri-univariate-above-and-below-ramp__color--card",styles:m,key:"color-ramp-preview"},ht("div",{bind:a,afterCreate:lm}),ht("div",{bind:h,afterCreate:lm})):null,ht("div",{class:mm},ht("div",{class:"esri-legend__ramp-labels",styles:f},p)))}_renderUnivariateColorSizeRamp(t,e,i){const{sizeRampElement:s,colorRampElement:r}=om(t,"horizontal"),n=sm(s,"full",!1,"horizontal"),o=im(r,{width:rm(s,"full",!1,"horizontal"),height:12,rampAlignment:"horizontal",opacity:e,type:"full",effect:i}),l=em(s,"card"),a=s.infos.length-1,h=s.infos.map(((t,e)=>0===e||e===a?ht("div",{key:e},t.label):null)),u={marginTop:"3px",marginLeft:`${l}px`,display:"flex"},c={width:`${n}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return ht("div",{class:cm,key:"size-ramp-preview",styles:{display:"flex",flexDirection:"column"}},ht("div",{class:this.classes("esri-legend--card__symbol-container","esri-legend__size-ramp--horizontal"),styles:{display:"flex",flexDirection:"row"}},s.infos.map(((t,e)=>ht("div",{key:e,class:pm,bind:t.preview,afterCreate:lm})))),ht("div",{class:"esri-univariate-above-and-below-ramp__color--card",styles:u,key:"color-ramp-preview"},ht("div",{bind:o,afterCreate:lm})),ht("div",{class:mm},ht("div",{class:"esri-legend__ramp-labels",styles:c},h)))}_renderLegendForElementInfo(t,e,i,s){const r=e.layer;if(t.type)return this._renderLegendForElement(t,e,s);const n=um(r,i);if(t.preview){var o,l;if(!t.symbol||-1===t.symbol.type.indexOf("simple-fill")){if(!t.label)return ht("div",{key:s,bind:t.preview,afterCreate:lm});const e={"esri-legend--card__symbol-cell":this._hasIndicators};return ht("div",{key:s,class:this.classes(cm,{"esri-legend--card__symbol-row":this._hasIndicators})},ht("div",{class:this.classes(e),bind:t.preview,afterCreate:lm}),ht("div",{class:this.classes("esri-legend--card__image-label",{"esri-legend--card__label-cell":this._hasIndicators})},am(this.messages,t.label,!1)||""))}let i=255,n=255,a=255,h=0,u=255,c=255,d=255,p=0;const m=t.symbol.color&&t.symbol.color.a,f=t.symbol.outline&&t.symbol.outline.color&&t.symbol.outline.color.a;m&&(i=t.symbol.color.r,n=t.symbol.color.g,a=t.symbol.color.b,h=t.symbol.color.a*r.opacity),f&&(u=t.symbol.outline.color.r,c=t.symbol.outline.color.g,d=t.symbol.outline.color.b,p=t.symbol.outline.color.a*r.opacity);const g=null==(o=null==(l=t.symbol.color)?void 0:l.isBright)||o,v=g?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return ht("div",{key:s,class:cm},ht("div",{class:"esri-legend--card__label-element",styles:{background:m?`rgba(${i}, ${n}, ${a}, ${h})`:"none",color:g?"black":"white",textShadow:`-1px -1px 0 ${v},\n                                              1px -1px 0 ${v},\n                                              -1px 1px 0 ${v},\n                                              1px 1px 0 ${v}`,border:f?`1px solid rgba(${u}, ${c}, ${d}, ${p})`:"none",filter:e.effect}}," ",t.label," "))}if(t.src){const e=this._renderImage(t,r,n);return ht("div",{key:s,class:cm},e,ht("div",{class:"esri-legend--card__image-label"},t.label||""))}}_renderImage(t,e,i){const{label:s,src:r,opacity:n}=t,o={"esri-legend--card__imagery-layer-image--stretched":i,[pm]:!i},l={opacity:`${null!=n?n:e.opacity}`};return ht("img",{alt:am(this.messages,s,!1),src:r,border:0,width:t.width,height:t.height,class:this.classes(o),styles:l})}_renderSizeRampLines(t){const e=t.infos,i=e[0],s=e[e.length-1],r=i.symbol,n=this._hasIndicators,o=je(i.size+i.outlineSize)*fm,l=je(s.size+s.outlineSize)*fm,a=n?o:o+50*fm,h=n?o/2+50*fm:o,u=function(t){if(t){if(t.type.indexOf("3d")>-1){const e=t.symbolLayers&&t.symbolLayers.length;if(!e)return;const i=t.symbolLayers.getItemAt(e-1).get("resource.primitive");return"triangle"===i||"cone"===i||"tetrahedron"===i}return"triangle"===t.style}}(r),c=function(t){if(t){if(t.type.indexOf("3d")>-1){const e=t.symbolLayers&&t.symbolLayers.length;if(!e)return;const i=t.symbolLayers.getItemAt(e-1),s=i.resource&&i.resource.primitive;return"circle"===s||"cross"===s||"kite"===s||"sphere"===s||"cube"===s||"diamond"===s}{const e=t.style;return"circle"===e||"diamond"===e||"cross"===e}}}(r),d=document.createElement("canvas");d.width=a,d.height=h,d.style.width=d.width/fm+"px",d.style.height=d.height/fm+"px";const p=d.getContext("2d");if(n){p.beginPath();const t=a/2-l/2,e=h;p.moveTo(0,0),p.lineTo(t,e);const i=a/2+l/2,s=h;p.moveTo(a,0),p.lineTo(i,s)}else{p.beginPath();const t=a,e=0;p.moveTo(0,h/2-l/2),p.lineTo(t,e);const i=a,s=h;p.moveTo(0,h/2+l/2),p.lineTo(i,s)}return p.strokeStyle="#ddd",p.stroke(),ht("div",{bind:d,afterCreate:lm,styles:n?{display:"flex",marginTop:`-${u?0:c?o/2:0}px`,marginBottom:`-${u?l:c?l/2:0}px`}:{display:"flex",marginRight:`-${u?0:c?o/2:0}px`,marginLeft:`-${u?0:c?l/2:0}px`}})}_renderSizeRamp(t,e){const i=t.infos,s=i[0].label,r=i[i.length-1].label;let n=i[0].preview,o=i[i.length-1].preview;const l=this._hasIndicators,a={"flex-direction":l?"column":"row-reverse"};n&&(n=n.cloneNode(!0),n.style.display="flex"),o&&(o=o.cloneNode(!0),o.style.display="flex");const h={opacity:null!=e?`${e}`:""};return ht("div",{class:this.classes(cm,{"esri-legend--card__size-ramp-row":l})},ht("div",{class:dm},l?s:r),ht("div",{class:"esri-legend--card__size-ramp-container",styles:a},ht("div",{bind:n,afterCreate:lm,class:"esri-legend--card__size-ramp-preview",styles:h}),this._renderSizeRampLines(t),ht("div",{bind:o,afterCreate:lm,class:"esri-legend--card__size-ramp-container",styles:h})),ht("div",{class:dm},l?r:s))}_renderLegendForRamp(t,e,i){const s=t.infos,r="heatmap-ramp"===t.type,n=s.length-1,o=n>2&&!r?25*n:100,l=o+20,a=s.slice(0).reverse();a.forEach(((t,e)=>{t.offset=r?t.ratio:e/n}));const h=a.length-1,u=a.length%2!=0&&a[a.length/2|0],c=u&&ht("div",{class:"esri-legend--card__interval-separators-container"},ht("div",{class:"esri-legend--card__interval-separator"},"|"),ht("div",{class:dm},u.label)),d=s[s.length-1].label,p=s[0].label,m=Di([[{shape:{type:"path",path:"M0 12.5 L10 0 L10 25 Z"},fill:a[0].color,stroke:{width:0}},{shape:{type:"rect",x:10,y:0,width:o,height:25},fill:{type:"linear",x1:10,y1:0,x2:o+10,y2:0,colors:a},stroke:{width:0}},{shape:{type:"path",path:`M${o+10} 0 L${l} 12.5 L${o+10} 25 Z`},fill:a[h].color,stroke:{width:0}}]],l,25),{messages:f}=this,g={filter:i,opacity:null==e?null:`${e}`};return ht("div",{class:cm},ht("div",{class:dm},r?f[d]:d),ht("div",{class:"esri-legend--card__symbol-container"},ht("div",{styles:g},m),c),ht("div",{class:dm},r?f[p]:p))}};r([n()],gm.prototype,"activeLayerInfos",void 0),r([n()],gm.prototype,"headingLevel",void 0),r([n()],gm.prototype,"layout",void 0),r([n(),nt("esri/widgets/Legend/t9n/Legend")],gm.prototype,"messages",void 0),r([n(),nt("esri/t9n/common")],gm.prototype,"messagesCommon",void 0),r([n({readOnly:!0})],gm.prototype,"type",void 0),r([n()],gm.prototype,"view",void 0),r([ot()],gm.prototype,"_selectSection",null),gm=r([o("esri.widgets.Legend.styles.Card")],gm);const vm=gm,ym="esri-legend__layer-body",wm="esri-legend__layer-row",bm="esri-legend__layer-cell esri-legend__layer-cell--info",_m="esri-legend__layer-cell esri-legend__layer-cell--symbols",Am="esri-legend__symbol",xm="esri-legend__size-ramp",Sm="esri-legend__ramp-label",Cm={display:"flex",alignItems:"flex-start"},km={marginLeft:"3px"},Im={display:"table-cell",verticalAlign:"middle"};let Mm=class extends lt{constructor(t,e){super(t,e),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const t=this.activeLayerInfos,e=t&&t.toArray().map((t=>this._renderLegendForLayer(t))).filter((t=>!!t));return ht("div",null,e&&e.length?e:ht("div",{class:"esri-legend__message"},this.messages.noLegend))}_renderLegendForLayer(t){if(!t.ready)return null;const e=!!t.children.length,i=`esri-legend__${t.layer.uid}-version-${t.version}`,s=t.title?ut({level:this.headingLevel,class:this.classes("esri-widget__heading","esri-legend__service-label")},t.title):null;if(e){const e=t.children.map((t=>this._renderLegendForLayer(t))).toArray();return ht("div",{key:i,class:this.classes("esri-legend__service","esri-legend__group-layer")},s,e)}{const e=t.legendElements;if(e&&!e.length)return null;const r=e.map((e=>this._renderLegendForElement(e,t.layer,t.effect))).filter((t=>!!t));return r.length?ht("div",{key:i,class:this.classes("esri-legend__service",{"esri-legend__group-layer-child":!!t.parent}),tabIndex:0},s,ht("div",{class:"esri-legend__layer"},r)):null}}_renderLegendForElement(t,e,i,s){const r="color-ramp"===t.type,n="opacity-ramp"===t.type,o="size-ramp"===t.type;let l=null;if("symbol-table"===t.type||o){const s=t.infos.map((s=>this._renderLegendForElementInfo(s,e,i,o,t.legendType))).filter((t=>!!t));s.length&&(l=ht("div",{class:ym},s))}else"color-ramp"===t.type||"opacity-ramp"===t.type||"heatmap-ramp"===t.type||"stretch-ramp"===t.type?l=this._renderLegendForRamp(t,e.opacity):"relationship-ramp"===t.type?l=Yp(t,this.id,e.opacity,i):"univariate-above-and-below-ramp"===t.type?l=this._renderUnivariateAboveAndBelowRamp(t,e.opacity,i):"univariate-color-size-ramp"===t.type&&(l=this._renderUnivariateColorSizeRamp(t,e.opacity,i));if(!l)return null;const a=t.title;let h=null;if("string"==typeof a)h=a;else if(a){const t=am(this.messages,a,r||n);h=hm(0,r||n)&&a.title?`${a.title} (${t})`:t}const u=s?"esri-legend__layer-child-table":"esri-legend__layer-table",c=h?ht("div",{class:"esri-legend__layer-caption"},h):null;return ht("div",{class:this.classes(u,{"esri-legend__layer-table--size-ramp":o||!s})},c,l)}_renderUnivariateAboveAndBelowRamp(t,e,i){const{sizeRampElement:s,colorRampElement:r}=nm(t,e),n=rm(s,"above",!0),o=rm(s,"below",!0),l=im(r,{width:12,height:n,rampAlignment:"vertical",opacity:e,type:"above",effect:i}),a=im(r,{width:12,height:o,rampAlignment:"vertical",opacity:e,type:"below",effect:i}),h=em(s),u=s.infos.map((t=>t.label)),c=u.map(((t,e)=>{const i=2===e;return 0===e?ht("div",{key:e,class:t?l?"esri-univariate-above-and-below-ramp__label":Sm:null},t):i?ht("div",null):null})),d=u.length-1,p=Math.floor(u.length/2),m=u.map(((t,e)=>e===p||e===d?ht("div",{key:e,class:t?l?"esri-univariate-above-and-below-ramp__label":Sm:null},t):null)),f={display:"table-cell",verticalAlign:"middle"},g={marginTop:`${h}px`},v={height:`${n}px`},y={height:`${o}px`};return ht("div",{key:"univariate-above-and-below-ramp-preview",styles:Cm},ht("div",{class:ym},s.infos.map(((t,e)=>ht("div",{class:this.classes(wm,xm)},ht("div",{class:Am,styles:f,bind:t.preview,afterCreate:lm}),l||e%2!=0?null:ht("div",{class:bm},u[e]))))),l?ht("div",{styles:g,key:"color-ramp-preview"},ht("div",{styles:km},ht("div",{styles:Im},ht("div",{class:"esri-legend__ramps",bind:l,afterCreate:lm})),ht("div",{styles:Im},ht("div",{class:"esri-legend__ramp-labels",styles:v},c))),ht("div",{styles:km},ht("div",{styles:Im},ht("div",{class:"esri-legend__ramps",bind:a,afterCreate:lm})),ht("div",{styles:Im},ht("div",{class:"esri-legend__ramp-labels",styles:y},m)))):null)}_renderUnivariateColorSizeRamp(t,e,i){const{sizeRampElement:s,colorRampElement:r}=om(t),n=em(s),o=rm(s,"full",!1),l=im(r,{width:12,height:o,rampAlignment:"vertical",opacity:e,type:"full",effect:i}),a=s.infos.length-1,h=s.infos.map(((t,e)=>0===e||e===a?ht("div",{key:e,class:t.label?r?"esri-univariate-above-and-below-ramp__label":Sm:null},t.label):null)),u={display:"table-cell",verticalAlign:"middle"},c={marginTop:`${n}px`},d={height:`${o}px`};return ht("div",{key:"univariate-above-and-below-ramp-preview",styles:Cm},ht("div",{class:ym},s.infos.map((t=>ht("div",{class:this.classes(wm,xm)},ht("div",{class:Am,styles:u,bind:t.preview,afterCreate:lm}))))),ht("div",{styles:c,key:"color-ramp-preview"},ht("div",{styles:km},ht("div",{styles:Im},ht("div",{class:"esri-legend__ramps",bind:l,afterCreate:lm})),ht("div",{styles:Im},ht("div",{class:"esri-legend__ramp-labels",styles:d},h)))))}_renderLegendForRamp(t,e){const i=t.infos,s="heatmap-ramp"===t.type,r="stretch-ramp"===t.type,n=t.preview;n.className="esri-legend__color-ramp "+("opacity-ramp"===t.type?"esri-legend__opacity-ramp":""),null!=e&&(n.style.opacity=e.toString());const o=i.map((t=>ht("div",{class:t.label?Sm:null},s?this.messages[t.label]:r?this._getStretchStopLabel(t):t.label))),l={height:n.style.height};return ht("div",{class:wm},ht("div",{class:_m,styles:{width:"24px"}},ht("div",{class:"esri-legend__ramps",bind:n,afterCreate:lm})),ht("div",{class:bm},ht("div",{class:"esri-legend__ramp-labels",styles:l},o)))}_getStretchStopLabel(t){return t.label?this.messages[t.label]+": "+("string"==typeof t.value?t.value:Ut(t.value,{style:"decimal",notation:t.value.toString().indexOf("e")>-1?"scientific":"standard"})):""}_renderLegendForElementInfo(t,e,i,s,r){if(t.type)return this._renderLegendForElement(t,e,i,!0);let n=null;const o=um(e,r);if(t.preview?n=ht("div",{class:Am,bind:t.preview,afterCreate:lm}):t.src&&(n=this._renderImage(t,e,o)),!n)return null;const l={"esri-legend__imagery-layer-info--stretched":o};return ht("div",{class:wm},ht("div",{class:this.classes(_m,{"esri-legend__imagery-layer-info--stretched":o,[xm]:!o&&s})},n),ht("div",{class:this.classes(bm,l)},am(this.messages,t.label,!1)||""))}_renderImage(t,e,i){const{label:s,src:r,opacity:n}=t,o={"esri-legend__imagery-layer-image--stretched":i,[Am]:!i},l={opacity:`${null!=n?n:e.opacity}`};return ht("img",{alt:am(this.messages,s,!1),src:r,border:0,width:t.width,height:t.height,class:this.classes(o),styles:l})}};r([n()],Mm.prototype,"activeLayerInfos",void 0),r([n()],Mm.prototype,"headingLevel",void 0),r([n(),nt("esri/widgets/Legend/t9n/Legend")],Mm.prototype,"messages",void 0),r([n({readOnly:!0})],Mm.prototype,"type",void 0),Mm=r([o("esri.widgets.Legend.styles.Classic")],Mm);const Tm=Mm;let Em=class extends lt{constructor(t,e){super(t,e),this._handles=new U,this.activeLayerInfos=null,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.headingLevel=3,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.iconClass="esri-icon-layer-list",this.label=void 0,this.layerInfos=null,this.messages=null,this.style=new Tm,this.view=null,this.viewModel=new Hp}initialize(){this.own(it(this,"view","resize",(()=>this.scheduleRender())),it(this,"activeLayerInfos","change",(()=>this._refreshActiveLayerInfos(this.activeLayerInfos))),et(this,"headingLevel",(t=>{const{style:e}=this;e&&(e.headingLevel=t)})),W(this,"style",((t,e)=>{e&&t!==e&&e.destroy(),t&&(t.activeLayerInfos=this.activeLayerInfos,"card"===t.type&&(t.view=this.view),t.headingLevel=this.headingLevel)})))}destroy(){this._handles.destroy(),this._handles=null}castStyle(t){if(t instanceof vm||t instanceof Tm)return t;if("string"==typeof t)return"card"===t?new vm:new Tm;if(t&&"string"==typeof t.type){const e={...t};return delete e.type,new("card"===t.type?vm:Tm)(e)}return new Tm}render(){return ht("div",{class:this.classes("esri-legend","esri-widget",this.style instanceof Tm?"esri-widget--panel":null)},this.style.render())}_refreshActiveLayerInfos(t){this._handles.removeAll(),t.forEach((t=>this._renderOnActiveLayerInfoChange(t))),this.scheduleRender()}_renderOnActiveLayerInfoChange(t){const e=W(t,"version",(()=>this.scheduleRender()));this._handles.add(e,`version_${t.layer.uid}`);const i=it(t,"children","change",(()=>{t.children.forEach((t=>this._renderOnActiveLayerInfoChange(t)))}));this._handles.add(i,`children_${t.layer.uid}`),t.children.forEach((t=>this._renderOnActiveLayerInfoChange(t)))}};r([rt("viewModel.activeLayerInfos")],Em.prototype,"activeLayerInfos",void 0),r([rt("viewModel.basemapLegendVisible")],Em.prototype,"basemapLegendVisible",void 0),r([rt("viewModel.groundLegendVisible")],Em.prototype,"groundLegendVisible",void 0),r([n()],Em.prototype,"headingLevel",void 0),r([rt("viewModel.hideLayersNotInCurrentView")],Em.prototype,"hideLayersNotInCurrentView",void 0),r([rt("viewModel.keepCacheOnDestroy")],Em.prototype,"keepCacheOnDestroy",void 0),r([rt("viewModel.respectLayerVisibility")],Em.prototype,"respectLayerVisibility",void 0),r([n()],Em.prototype,"iconClass",void 0),r([n({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Em.prototype,"label",void 0),r([rt("viewModel.layerInfos")],Em.prototype,"layerInfos",void 0),r([n(),nt("esri/widgets/Legend/t9n/Legend")],Em.prototype,"messages",void 0),r([n()],Em.prototype,"style",void 0),r([tt("style")],Em.prototype,"castStyle",null),r([rt("viewModel.view")],Em.prototype,"view",void 0),r([n()],Em.prototype,"viewModel",void 0),Em=r([o("esri.widgets.Legend")],Em);const jm=Em;let Om=class{constructor(i){t(this,i),this.loaded=e(this,"loaded",7),this.position="bottom-left"}validateView(t){t&&(this.widget.view=t,"arcgis-expand"!==this.el.parentElement.tagName.toLowerCase()&&this.widget.view.ui.add(this.widget,this.position))}componentWillLoad(){const t=new jm({container:this.el});this.view&&(t.view=this.view),this.widget=t,this.loaded.emit(!0)}get el(){return i(this)}static get watchers(){return{view:["validateView"]}}};Om.style="@import url('https://js.arcgis.com/next/esri/themes/light/main.css');";let Lm=class{constructor(i){t(this,i),this.loaded=e(this,"loaded",7)}async componentWillLoad(){const t=new X({url:this.url});await t.load(),this.portal=t,this.loaded.emit(!0)}};Lm.style="@import url('https://js.arcgis.com/next/esri/themes/light/main.css');";let Fm=class extends(Oe(Le)){constructor(t){super(t),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};r([n()],Fm.prototype,"autoNavigate",void 0),r([n()],Fm.prototype,"filter",void 0),r([n()],Fm.prototype,"getResults",void 0),r([n()],Fm.prototype,"getSuggestions",void 0),r([n()],Fm.prototype,"maxResults",void 0),r([n()],Fm.prototype,"maxSuggestions",void 0),r([n()],Fm.prototype,"minSuggestCharacters",void 0),r([n()],Fm.prototype,"outFields",void 0),r([n()],Fm.prototype,"placeholder",void 0),r([n()],Fm.prototype,"popupEnabled",void 0),r([n()],Fm.prototype,"popupTemplate",void 0),r([n()],Fm.prototype,"prefix",void 0),r([n()],Fm.prototype,"resultGraphicEnabled",void 0),r([n()],Fm.prototype,"resultSymbol",void 0),r([n()],Fm.prototype,"suggestionsEnabled",void 0),r([n()],Fm.prototype,"suffix",void 0),r([n()],Fm.prototype,"withinViewEnabled",void 0),r([n()],Fm.prototype,"zoomScale",void 0),Fm=r([o("esri.widgets.Search.SearchSource")],Fm);const zm=Fm,Pm=K.getLogger("esri.widgets.Search.support.geometryUtils");function Rm(t,e){var i,s;if(!e)return Pm.error("missing-parameter: view is missing."),Promise.reject(new v("searchgeometryutils:missing-parameter","view is missing."));if(!t)return Pm.error("missing-parameter: point is missing."),Promise.reject(new v("searchgeometryutils:missing-parameter","point is missing."));if(t.hasZ||"2d"===e.type)return Promise.resolve(t);const r=null==e||null==(i=e.map)?void 0:i.ground;return r&&r.layers.length?r.queryElevation(t,{cache:null==(s=e.basemapTerrain)?void 0:s.elevationQueryCache}).then((t=>t.geometry)):Promise.resolve(t)}function Nm(t){if(E(t))return null;switch(t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":return t.getPoint(0);case"polyline":return t.getPoint(0,0)}return null}function Bm(t,e,i){return E(t)?null:"extent"===t.type?t:"multipoint"===t.type||"polygon"===t.type||"polyline"===t.type?t.extent:"point"===t.type?Gm(t,e,i):void 0}function Dm(t,e,i){return E(t)||E(e)?null:Gm(t.center,e,i)}function Gm(t,e,i){const s=t.hasZ?t.z:void 0;return e&&e.map?(i?Gi(e,i):e.extent).clone().centerAt(t).set({zmax:s,zmin:s}):new M({xmin:t.x-.25,ymin:t.y-.25,xmax:t.x+.25,ymax:t.y+.25,spatialReference:t.spatialReference,zmin:s,zmax:s})}const Vm=/https?:\/\/services.*\.arcgis\.com/i,$m=/(?:\{([^}]+)\})/g,qm=K.getLogger("esri.widgets.Search.support.layerSearchUtils");function Hm(t,e){const{filter:i,withinViewEnabled:s}=t,r=e&&e.extent;return i&&i.geometry||(s&&r?r:void 0)}function Um(t){return t&&-1!==t.indexOf("*")}async function Wm(t){t&&await t.load()}function Jm(t){var e,i,s;return null!=(e=null==t||null==(i=t.capabilities)||null==(s=i.query)?void 0:s.supportsPagination)&&e}function Ym(t){return t.displayField||t.layer.displayField||function(t){var e,i,s,r;return null!=(e=null==t||null==(i=t.fieldsIndex)||null==(s=i.fields)||null==(r=s.find((t=>"string"===t.type)))?void 0:r.name)?e:""}(t.layer)}function Km(t,e){return!(!t||!e)&&e.every((e=>Qm(t,e)))}function Qm(t,e){return!!t.getField(e)}function Zm(t){return t.replace(/\'/g,"''")}function Xm(t,e){const i=e&&e.where;return i?`(${t}) AND (${i})`:t}function tf({searchTerm:t,layer:e,searchFields:i,filter:s,exactMatch:r,type:n}){const{definitionExpression:o,url:l}=e;let a="";return t&&i&&i.forEach((i=>{const o=e.getField(i),h="function"==typeof e.getFieldDomain&&e.getFieldDomain(i),u=(h&&"coded-value"===h.type?function(t,e,i){let s=null;const{codedValues:r}=t;return r&&r.some((t=>{const r=t.name,n=i?r:r.toLowerCase();return(i?e:e.toLowerCase())===n&&(s=t.code.toString(),!0)})),s}(h,t,r):null)||t||null;if(null!==u){const t=function({currentTerm:t,field:e,filter:i,exactMatch:s,url:r,type:n}){const o=e.type,l=e.name;if("string"===o||"date"===o||"global-id"===o){const e=Vm.test(r),o=e&&function(t){for(let e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return!0;return!1}(t)?"N":"";if(s&&"search"===n)return Xm(`${l} = ${o}'${t}'`,i);const a=e?l:`UPPER(${l})`,h=e?t:t.toUpperCase();return Xm(`${a} LIKE ${o}${s?`'${h}%'`:`'%${h}%'`}`,i)}if("oid"===o||"small-integer"===o||"integer"===o||"single"===o||"double"===o){const e=Number(t);return isNaN(e)?null:Xm(`${l} = ${e}`,i)}return Xm(`${l} = ${t}`,i)}({currentTerm:u,field:o,filter:s,exactMatch:r,url:l,type:n});t&&(a+=function(t,e){return t?` OR (${e})`:`(${e})`}(a,t))}})),o?`(${o}) AND (${a})`:a}function ef(t,e,i){const s=t.sourceLayer,{attributes:r}=t,n="function"==typeof s.getFieldDomain&&s.getFieldDomain(i);if(e)return Nt(e,r);if(i&&r){const t=s.getField(i),e=function(t,e){return t[Object.keys(t).find((t=>t.toLowerCase()===e.toLowerCase()))]}(r,i);return null==e?"":n&&"coded-value"===n.type?function(t,e){let i=null;const{codedValues:s}=t;return s&&s.length&&s.some((t=>t.code===e&&(i=t.name,!0))),i}(n,e):"date"===(null==t?void 0:t.type)?Gt(new Date(e)):"number"==typeof e?e.toString():"string"!=typeof e?"":e.trim()}return""}function sf(t,e,i,s,r,n,o){return t.features.map((t=>function(t,e,i,s,r,n,o){const l=t.clone(),a=t.sourceLayer,h=a&&a.objectIdField,u=h&&t.attributes[h],d=ef(t,i.searchTemplate,r),p=Bm(l.geometry,e,n),m="number"==typeof o?Dm(y(p),e,o):p,f=t.clone();return c(m)&&(f.geometry=Fe.fromExtent(m)),{extent:m,target:f,feature:l,key:u,name:d,sourceIndex:s}}(t,e,i,s,r,n,o)))}var rf;let nf=rf=class extends zm{constructor(t){super(t),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(t,e)=>function(t,e){const{exactMatch:i=!1,location:s,maxResults:r,spatialReference:n,source:o,sourceIndex:l,suggestResult:a,view:h}=t,{layer:u,filter:c,zoomScale:d}=o,p=h&&h.scale,m=Hm(o,h),f=e&&e.signal;return Wm(u).then((()=>{const t=u.popupTemplate;return t?t.getRequiredFields(u.fieldsIndex):null})).then((t=>{var e,g;const{objectIdField:y,returnZ:w}=u,b=Ym(o);if(!Qm(u,b))throw qm.error("invalid-field: displayField is invalid."),new v("getResults():invalid-field","displayField is invalid.");const _=o.outFields||(t&&t.length?t:[b]),A=Um(_);if(-1!==_.indexOf(y)||A||_.push(y),!A&&!Km(u,_))throw qm.error("invalid-field: outField is invalid."),new v("getResults():invalid-field","outField is invalid.");const x=u.createQuery(),{orderByFields:S}=o;if(S&&(x.orderByFields=S),n){x.outSpatialReference=n;const t=1/O(n);t&&(x.maxAllowableOffset=t)}const C="mesh"===u.geometryType||"multipatch"===u.geometryType,k=(null==(e=u.capabilities)||null==(g=e.data)?void 0:g.supportsZ)&&!C;if(x.returnZ=k&&!1!==w,x.returnGeometry=!0,x.multipatchOption=C?"xyFootprint":null,_&&(x.outFields=_),s)x.geometry=s;else if(a.key)x.objectIds=[a.key];else{const t=o.searchFields||[b];if(!Km(u,t))throw qm.error("invalid-field: search field is invalid."),new v("getResults():invalid-field","search field is invalid.");if(Jm(u)&&(x.num=r),m&&(x.geometry=m),!a.text.trim())return[];const{prefix:e="",suffix:s=""}=o,n=tf({searchTerm:Zm(`${e}${a.text}${s}`),layer:u,searchFields:t,filter:c,exactMatch:i,type:"search"});if(!n)return[];x.where=n}return u.queryFeatures(x,{signal:f}).then((t=>sf(t,h,o,l,b,p,d)))}))}({source:this,...t},e),this.getSuggestions=(t,e)=>function(t,e){const{source:i,spatialReference:s,view:r,suggestTerm:n,maxSuggestions:o,sourceIndex:l,exactMatch:a}=t,{layer:h,filter:u}=i,c=e&&e.signal,d=Hm(i,r);return Wm(h).then((()=>{if(!Jm(h))return[];const t=Ym(i),e=i.searchFields||[t],r=[];i.suggestionTemplate?i.suggestionTemplate.replace($m,((t,e)=>(r.push(e),t))):r.push(t);const p=Um(r);-1!==r.indexOf(h.objectIdField)||p||r.push(h.objectIdField);const m=Qm(h,t),f=p||Km(h,r),g=Km(h,e);if(!m)throw qm.error("invalid-field: displayField is invalid."),new v("getSuggestions():invalid-field","displayField is invalid.");if(!f)throw qm.error("invalid-field: outField is invalid."),new v("getSuggestions():invalid-field","outField is invalid.");if(!g)throw qm.error("invalid-field: search field is invalid."),new v("getSuggestions():invalid-field","search field is invalid.");const y=h.createQuery(),{orderByFields:w}=i;if(w&&(y.orderByFields=w),y.outSpatialReference=s,y.returnGeometry=!1,y.num=o,y.outFields=r,d&&(y.geometry=d),!n.trim())return[];const{prefix:b="",suffix:_=""}=i,A=tf({searchTerm:Zm(`${b}${n}${_}`),layer:h,searchFields:e,filter:u,exactMatch:a,type:"suggest"});return A?(y.where=A,h.queryFeatures(y,{signal:c}).then((e=>function(t,e,i,s){return t.features.map((t=>function(t,e,i,s){const r=t.sourceLayer,{attributes:n}=t,{objectIdField:o}=r,l=n[o];return{text:ef(t,e.suggestionTemplate,s),key:l,sourceIndex:i}}(t,e,i,s)))}(e,i,l,t)))):[]}))}({source:this,...t},e)}set layer(t){this._set("layer",t),t&&t.load().catch((()=>{}))}get name(){return this._getLayerTitle()||""}set name(t){void 0!==t?this._override("name",t):this._clearOverride("name")}clone(){return new rf({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?y(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?y(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var t,e;return null!=(t=null==(e=this.layer.fieldsIndex.fields.find((t=>"string"===t.type)))?void 0:e.name)?t:""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:t,searchFields:e}=this;return t.loaded?`: ${(e||[this._getDisplayField()]).map((e=>{const i=t.getField(e);return i&&i.alias||e})).join(", ")}`:""}_getLayerTitle(){const{layer:t}=this;if(!t)return;const{title:e}=t;return e?`${e}${this._getSearchFieldsString()}`:void 0}};r([n({json:{read:{source:"field.name"},write:{target:"field.name"}}})],nf.prototype,"displayField",void 0),r([n({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],nf.prototype,"exactMatch",void 0),r([n({value:null})],nf.prototype,"layer",null),r([n()],nf.prototype,"name",null),r([n({type:[String],json:{write:!0}})],nf.prototype,"orderByFields",void 0),r([n()],nf.prototype,"searchFields",void 0),r([n()],nf.prototype,"searchTemplate",void 0),r([n()],nf.prototype,"suggestionTemplate",void 0),nf=rf=r([o("esri.widgets.Search.LayerSearchSource")],nf);const of=nf;let lf=class extends Le{constructor(t){super(t),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};r([n({type:String,json:{write:!0}})],lf.prototype,"address",void 0),r([n({type:Object,json:{write:!0}})],lf.prototype,"attributes",void 0),r([n({type:M,json:{write:!0}})],lf.prototype,"extent",void 0),r([n({type:ze,json:{write:!0}})],lf.prototype,"location",void 0),r([n({type:Number,json:{write:!0}})],lf.prototype,"score",void 0),lf=r([o("esri.rest.support.AddressCandidate")],lf);const af=lf,hf={type:String,json:{read:{source:"token"},write:{target:"token"}}};let uf=class extends Le{constructor(t){super(t),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};r([n({type:Object,json:{write:!0}})],uf.prototype,"address",void 0),r([n(hf)],uf.prototype,"apiKey",void 0),r([n({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],uf.prototype,"categories",void 0),r([n({type:String,json:{write:!0}})],uf.prototype,"countryCode",void 0),r([n({type:Boolean,json:{write:!0}})],uf.prototype,"forStorage",void 0),r([n({type:ze,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],uf.prototype,"location",void 0),r([n({type:String,json:{write:!0}})],uf.prototype,"locationType",void 0),r([n({type:String,json:{write:!0}})],uf.prototype,"magicKey",void 0),r([n({type:Number,json:{write:!0}})],uf.prototype,"maxLocations",void 0),r([n({type:[String],json:{write:{writer:(t,e)=>{e.outFields=t?t.join(","):null}}}})],uf.prototype,"outFields",void 0),r([n({type:_,json:{read:{source:"outSR"},write:{target:"outSR"}}})],uf.prototype,"outSpatialReference",void 0),r([n({type:M,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=i}}}})],uf.prototype,"searchExtent",void 0),uf=r([o("esri.rest.support.AddressToLocationsParameters")],uf),uf.from=Pe(uf);const cf=uf;async function df(t,e,i){e=cf.from(e);const s=Re(t),{address:r,...n}=e.toJSON(),o={...r,...n,f:"json"},l=Ne({...s.query,...o}),a=Be(l,i);return w(`${s.path}/findAddressCandidates`,a).then(pf)}function pf({data:t}){if(!t)return[];const{candidates:e,spatialReference:i}=t;return e?e.map((t=>{if(!t)return;const{extent:e,location:s}=t,r=!e||function(t){return t&&"number"==typeof t.xmin&&"number"==typeof t.ymin&&"number"==typeof t.xmax&&"number"==typeof t.ymax}(e);return function(t){return t&&"number"==typeof t.x&&"number"==typeof t.y}(s)&&r?(e&&(e.spatialReference=i),s.spatialReference=i,af.fromJSON(t)):void 0})):[]}let mf=class extends Le{constructor(t){super(t),this.addresses=null,this.categories=null,this.countryCode=null,this.locationType=null,this.outSpatialReference=null}};r([n({type:[Object],json:{read:{reader:t=>t&&t.records?t.records.map((t=>t.attributes)):null},write:{writer:(t,e)=>{const i=[];Array.isArray(t)&&t.forEach((t=>{i.push({attributes:t})})),e.addresses={records:i}}}}})],mf.prototype,"addresses",void 0),r([n({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],mf.prototype,"categories",void 0),r([n({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],mf.prototype,"countryCode",void 0),r([n({type:String,json:{write:!0}})],mf.prototype,"locationType",void 0),r([n({type:_,json:{read:{source:"outSR"},write:{target:"outSR"}}})],mf.prototype,"outSpatialReference",void 0),mf=r([o("esri.rest.support.AddressesToLocationsParameters")],mf),mf.from=Pe(mf);const ff=mf;function gf(t){const{data:e}=t;if(!e)return[];const{locations:i,spatialReference:s}=e;return i?i.map((t=>{const{location:e}=t;return e&&(e.spatialReference=s),af.fromJSON(t)})):[]}let vf=class extends Le{constructor(t){super(t),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};r([n(hf)],vf.prototype,"apiKey",void 0),r([n({type:ze,json:{write:{writer:(t,e)=>{const i=t?t.clone().normalize():null;e.location=void 0!==i?i:null}}}})],vf.prototype,"location",void 0),r([n({type:String,json:{write:!0}})],vf.prototype,"locationType",void 0),r([n({type:_,json:{read:{source:"outSR"},write:{target:"outSR"}}})],vf.prototype,"outSpatialReference",void 0),vf=r([o("esri.rest.support.LocationToAddressParameters")],vf),vf.from=Pe(vf);const yf=vf;async function wf(t,e,i){e=yf.from(e);const s=Re(t),r={...e.toJSON(),f:"json"},n=Ne({...s.query,...r}),o=Be(n,i);return w(`${s.path}/reverseGeocode`,o).then(bf)}function bf({data:t}){if(!t)return;const{address:e,location:i}=t;return af.fromJSON({address:e&&e.Match_addr||"",attributes:e||{},location:i,score:100})}let _f=class extends Le{constructor(t){super(t),this.isCollection=null,this.magicKey=null,this.text=null}};r([n({type:Boolean,json:{write:!0}})],_f.prototype,"isCollection",void 0),r([n({type:String,json:{write:!0}})],_f.prototype,"magicKey",void 0),r([n({type:String,json:{write:!0}})],_f.prototype,"text",void 0),_f=r([o("esri.rest.support.SuggestionCandidate")],_f);const Af=_f;let xf=class extends Le{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};r([n(hf)],xf.prototype,"apiKey",void 0),r([n({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],xf.prototype,"categories",void 0),r([n({type:String,json:{write:!0}})],xf.prototype,"countryCode",void 0),r([n({type:ze,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],xf.prototype,"location",void 0),r([n({type:Number,json:{write:!0}})],xf.prototype,"maxSuggestions",void 0),r([n({type:_,json:{read:{source:"outSR"},write:{target:"outSR"}}})],xf.prototype,"outSpatialReference",void 0),r([n({type:M,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=JSON.stringify(i)}}}})],xf.prototype,"searchExtent",void 0),r([n({type:String,json:{write:!0}})],xf.prototype,"text",void 0),xf=r([o("esri.rest.support.SuggestLocationsParameters")],xf),xf.from=Pe(xf);const Sf=xf;async function Cf(t,e,i){const s=Re(t),r={...(e=Sf.from(e)).toJSON(),f:"json"},n=Ne({...s.query,...r}),o=Be(n,i);return w(`${s.path}/suggest`,o).then(kf)}function kf(t){const{data:e}=t;if(!e)return[];const{suggestions:i}=e;return i?i.map((t=>new Af(t))):[]}let If=class extends De{constructor(t){super(t),this.outSpatialReference=null,this.url=null}addressToLocations(t,e){!t.outSpatialReference&&this.outSpatialReference&&(t.outSpatialReference=this.outSpatialReference);const i={...this.requestOptions,...e};return df(this.url,t,i)}suggestLocations(t,e){const i={...this.requestOptions,...e};return Cf(this.url,t,i)}addressesToLocations(t,e){!t.outSpatialReference&&this.outSpatialReference&&(t.outSpatialReference=this.outSpatialReference);const i={...this.requestOptions,...e};return async function(t,e,i){e=ff.from(e);const s=Re(t),r={...e.toJSON(),f:"json"},n=Ne({...s.query,...r}),o=Be(n,i);return w(`${s.path}/geocodeAddresses`,o).then(gf)}(this.url,t,i)}locationToAddress(t,e){!t.outSpatialReference&&this.outSpatialReference&&(t.outSpatialReference=this.outSpatialReference);const i={...this.requestOptions,...e};return wf(this.url,t,i)}};r([n({type:_})],If.prototype,"outSpatialReference",void 0),r([n()],If.prototype,"url",void 0),If=r([o("esri.tasks.Locator")],If);const Mf=If;function Tf(t){const e=null==t?void 0:t.scale;return"number"==typeof e&&e<=3e5?t.get("extent.center"):null}function Ef(t){return!!t&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(t)}function jf(t,e){const{filter:i,withinViewEnabled:s}=t,r=e&&e.extent;return Bm(i&&i.geometry,e,e&&e.scale)||(s&&r?r:void 0)}function Of(t,e){return t.filter(Boolean).map((t=>function(t,e){const{key:i,scale:s,sourceIndex:r,view:n,zoomScale:o,defaultZoomScale:l}=e,{attributes:a,extent:h,location:u,address:d}=t,p=new Qt({geometry:u,attributes:a}),m=h||u,f=Bm(m,n,s),g="number"==typeof o?Dm(f,n,o):"number"==typeof l&&"point"===m.type?Dm(f,n,l):f,v=d||(u?`${u.x},${u.y}`:""),y=p.clone();return c(g)&&(y.geometry=Fe.fromExtent(g)),{extent:g,feature:p,target:y,key:i,name:v,sourceIndex:r}}(t,e)))}var Lf;const Ff="esri.widgets.Search.LocatorSearchSource",zf=K.getLogger(Ff);let Pf=Lf=class extends zm{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(t,e)=>function(t,e){return t.location?function(t,e){const{source:i,spatialReference:s,location:r,sourceIndex:n,view:o}=t,{apiKey:l,url:a,zoomScale:h,defaultZoomScale:u}=i,c=o&&o.scale,d=e&&e.signal,p=new yf;return p.location=r,l&&(p.apiKey=l),s&&(p.outSpatialReference=s),wf(a,p,{signal:d}).then((t=>Of([t],{sourceIndex:n,scale:c,view:o,zoomScale:h,defaultZoomScale:u})))}(t,e):function(t,e){const{source:i,suggestResult:s,spatialReference:r,view:n,maxResults:o,sourceIndex:l}=t,a=i&&i.zoomScale,h=i&&i.defaultZoomScale;if(!s.text.trim())return Promise.resolve(null);const u=`${!s.key&&i.prefix?i.prefix:""}${s.text}${!s.key&&i.suffix?i.suffix:""}`,c=new cf,{apiKey:d,url:p}=i,m=n&&n.scale,f=jf(i,n),g=e&&e.signal;if(d&&(c.apiKey=d),!p)return Promise.resolve(null);i.categories&&(c.categories=i.categories),i.locationType&&(c.locationType=i.locationType),r&&(c.outSpatialReference=r);const v=Tf(n);v&&(c.location=v),c.maxLocations=o,f&&(c.searchExtent=F(f)),i.countryCode&&(c.countryCode=i.countryCode);const{key:y}=s,w=`${y}`;return y&&(c.magicKey=w),c.address={},c.address[i.singleLineFieldName||"Single Line Input"]=u,i.outFields&&(c.outFields=i.outFields),df(p,c,{signal:g}).then((t=>Of(t,{key:w,scale:m,sourceIndex:l,view:n,zoomScale:a,defaultZoomScale:h})))}(t,e)}({source:this,...t},e),this.getSuggestions=(t,e)=>function(t,e){const{source:i,spatialReference:s,view:r,suggestTerm:n,maxSuggestions:o,sourceIndex:l}=t,a=new Sf,{apiKey:h,url:u}=i,c=jf(i,r),d=e&&e.signal;if(!u)return Promise.resolve(null);h&&(a.apiKey=h),i.categories&&(a.categories=i.categories),s&&(a.outSpatialReference=s);const p=Tf(r);if(p&&(a.location=p),!n.trim())return Promise.resolve(null);const{prefix:m="",suffix:f=""}=i;return a.text=`${m}${n}${f}`,c&&(a.searchExtent=F(c)),a.maxSuggestions=o,i.countryCode&&(a.countryCode=i.countryCode),Cf(u,a,{signal:d}).then((t=>function(t,e){return t.map((t=>function(t,e){return{text:t.text,key:t.magicKey,sourceIndex:e}}(t,e)))}(t,l)))}({source:this,...t},e)}set locator(t){Ge(zf,"locator",{replacement:"url",version:"4.22"}),this._set("url",t.url),this._set("locator",t)}get locator(){return Ge(zf,"locator",{replacement:"url",version:"4.22"}),this._get("locator")}clone(){return new Lf({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?y(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?y(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};r([n()],Pf.prototype,"apiKey",void 0),r([n()],Pf.prototype,"categories",void 0),r([n()],Pf.prototype,"countryCode",void 0),r([n({json:{write:!0}})],Pf.prototype,"defaultZoomScale",void 0),r([n({type:Mf,json:{read:!1,write:!1}})],Pf.prototype,"locator",null),r([n()],Pf.prototype,"locationType",void 0),r([n({json:{write:!0}})],Pf.prototype,"name",void 0),r([n({json:{write:!0}})],Pf.prototype,"placeholder",void 0),r([n()],Pf.prototype,"searchTemplate",void 0),r([n({json:{write:!0}})],Pf.prototype,"singleLineFieldName",void 0),r([n({json:{read:{source:"suggest"},write:{target:"suggest"}}})],Pf.prototype,"suggestionsEnabled",void 0),r([n({json:{write:!0}})],Pf.prototype,"url",void 0),r([n({json:{write:!0}})],Pf.prototype,"zoomScale",void 0),Pf=Lf=r([o(Ff)],Pf);const Rf=Pf,Nf=K.getLogger("esri.widgets.support.geolocationUtils"),Bf={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function Df(){return function(){const t=Ve("esri-geolocation");return t||Nf.warn("geolocation-unsupported","Geolocation unsupported."),t}()&&function(){const t=window.isSecureContext;return t||Nf.warn("insecure-context","Geolocation requires a secure origin."),t}()}function Gf(t,e){return t.hasOwnProperty(e)&&null!=t[e]&&""!==t[e]}const Vf="esri.widgets.Search.SearchViewModel",$f=K.getLogger(Vf),qf="highlight",Hf=J.ofType({key:t=>t.layer?"layer":"locator",base:zm,typeMap:{layer:of,locator:Rf}}),Uf=_.WGS84,Wf=/<(?:.|\s)*?>/g;let Jf=class extends(He(St.EventedMixin(l))){constructor(t){super(t),this._handles=new U,this._gotoController=null,this._searching=null,this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new Hf,this.defaultSymbols={point:new Ue({url:ct(Ve("trident")?"esri/images/search/search-symbol-32.png":"esri/images/search/search-symbol-32.svg"),size:24,width:24,height:24}),polyline:new We({color:[130,130,130,1],width:2}),polygon:new fe({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=X.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new Hf,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const t=async()=>{const t=await ie("esri/widgets/Search/t9n/Search");this.messages=t,this.defaultPopupTemplate=new Ke({title:t.searchResult,content:"{Match_addr}"})};t(),this._handles.add([it(this,["defaultSources","sources"],"change",(()=>this.notifyChange("allSources"))),W(this,["includeDefaultSources","view","portal"],(()=>this._update())),te(t)])}destroy(){this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}get activeSource(){return this.allSources.getItemAt(this.activeSourceIndex)||null}get activeSourceIndex(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0}set activeSourceIndex(t){void 0!==t?this._override("activeSourceIndex",t):this._clearOverride("activeSourceIndex")}get allPlaceholder(){var t;return null==(t=this.messages)?void 0:t.allPlaceholder}set allPlaceholder(t){t?this._override("allPlaceholder",t):this._clearOverride("allPlaceholder")}get allSources(){const{sources:t,defaultSources:e,includeDefaultSources:i}=this,s="function"==typeof i?i.call(null,{sources:t,defaultSources:e}):i?e.concat(t):t,r=this._get("allSources")||new Hf;return r.removeAll(),r.addMany(s.filter(Boolean)),r}get defaultSymbol(){return Ge($f,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._get("defaultSymbol")}set defaultSymbol(t){Ge($f,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._set("defaultSymbol",t)}get locationEnabled(){return this._get("locationEnabled")||Df()}set locationEnabled(t){if(void 0===t)return void this._clearOverride("locationEnabled");const e=Df();if(t&&!e){const t=new v("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});$f.error(t)}this._override("locationEnabled",t&&e)}get placeholder(){const{allSources:t,activeSourceIndex:e,allPlaceholder:i}=this;if(-1===e)return i;const s=t.getItemAt(e);return s?s.placeholder:""}set searchTerm(t){this._set("searchTerm",t||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==t&&this._set("selectedSuggestion",null),""===t&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}get updating(){return null!=this._updatingPromise}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}search(t,e){this.emit("search-start"),this.clearGraphics();const i=this._createSuggestionForSearch(t),s=this.when().then((()=>this._getResultsFromSources(i,e).then((t=>{var s;if(null!=(s=F(null==e?void 0:e.signal))&&s.aborted)return null;const r={activeSourceIndex:this.activeSourceIndex,searchTerm:i.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(r,t,i);const n=this._getFirstResult(r.results),o=(i.location&&n?n.name:i.text).replace(Wf,"");return this._set("searchTerm",o),(i.key&&"number"==typeof i.sourceIndex||i.location)&&this._set("selectedSuggestion",i),this._set("results",r.results),this._set("resultCount",r.results.reduce(((t,e)=>t+e.results.length),0)),this.emit("search-complete",r),this._selectFirstResult(n).then((()=>r))})))).then((t=>(this._clearSearching(),t)),(t=>{throw this._clearSearching(),t}));return this._searching=s,this.notifyChange("state"),s}searchNearby(t){if(!this.locationEnabled){const t=new v("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return $f.error(t),Promise.reject(t)}const e=function(t){return t||(t=Bf),new Promise(((e,i)=>{setTimeout((()=>i(new v("geolocation:timeout","getting the current geolocation position timed out"))),15e3),navigator.geolocation.getCurrentPosition(e,i,t)}))}().then((e=>function(t,e){const{position:i,view:s}=t;return function(t,e,i){if(!e)return Promise.resolve(t);const s=e.spatialReference;return s.isWGS84?Promise.resolve(t):s.isWebMercator?Promise.resolve($e(t)):function(t){if(qe.geometryServiceUrl)return Promise.resolve(qe.geometryServiceUrl);const e=X.getDefault();return e.load(t).catch((()=>{})).then((()=>e.get("helperServices.geometry.url")))}(i).then((e=>{if(!e)throw new v("geometry-service:missing-url","Geometry service URL is missing");const r=new Vi({geometries:[t],outSpatialReference:s});return $i(e,r,i).then((t=>t[0]))}))}(function(t){const e=t&&t.coords;return e?new ze({longitude:e.longitude,latitude:e.latitude,z:e.altitude||null,spatialReference:{wkid:4326}}):null}(function(t){const e=t&&t.coords||{};return t?{coords:{accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed},timestamp:t.timestamp}:t}(i)),s,e)}({position:e,view:this.view},t))).then((e=>this.search(e,t)));return this._searching=e,this.notifyChange("state"),e.catch((()=>{})).then((()=>this._clearSearching())),e}select(t){if(this.clearGraphics(),!t){const e=new v("select:missing-parameter","Cannot select without a searchResult.",{searchResult:t});return $f.error(e),Promise.reject(e)}const{view:e}=this,i=Gf(t,"sourceIndex")?t.sourceIndex:this._getSourceIndexOfResult(t),s=this.allSources.getItemAt(i);if(!s){const t=new v("select:missing-source","Cannot select without a source.",{source:s});return $f.error(t),Promise.reject(t)}const r=s instanceof of?this._getLayerSourcePopupTemplate(s):s.popupTemplate,n=s.resultSymbol||this._getDefaultSymbol(t),o=Gf(s,"resultGraphicEnabled")?s.resultGraphicEnabled:this.resultGraphicEnabled,l=Gf(s,"autoNavigate")?s.autoNavigate:this.autoNavigate,a=Gf(s,"popupEnabled")?s.popupEnabled:this.popupEnabled,h=a?r||this.popupTemplate||this.defaultPopupTemplate:null,{feature:u}=t;if(!u){const t=new v("select:missing-feature","Cannot select without a feature.",{feature:u});return $f.error(t),Promise.reject(t)}const{attributes:d,geometry:p,layer:m,sourceLayer:f}=u,g=Nm(p),y={layerViewQuery:this._getLayerView(u),elevationQuery:e&&c(g)?Rm(g,e).catch((()=>g)):Promise.resolve(g)};return ye(y).then((r=>{const g=r.layerViewQuery.value,v=r.elevationQuery.value;n instanceof Je&&(n.text=t.name);const y=e&&l?t.target||t.extent:null;return(c(y)?this._goToSearchResult(y):Promise.resolve()).then((()=>{var r;const l=g?u:new Qt({geometry:p,symbol:n,attributes:d,layer:m,sourceLayer:f,popupTemplate:h}),c=a&&(null==(r=this.view)?void 0:r.popup),y=c&&l.getEffectivePopupTemplate(c.defaultPopupTemplateEnabled);return y&&e.popup.open({features:[l],location:v}),g&&ee(g)&&!y&&this._highlightFeature({graphic:l,layerView:g}),!g&&o&&e&&e.graphics.push(l),this._set("selectedResult",t),this._set("resultGraphic",l),this.emit("select-result",{result:t,source:s,sourceIndex:i}),t}))}))}suggest(t,e,i){const s=t||this.searchTerm;return this.emit("suggest-start",{searchTerm:s}),this._suggestTimer(e,i).then((()=>this._suggestImmediate(s,i).then((t=>(this._set("suggestions",t.results),this._set("suggestionCount",t.results.reduce(((t,e)=>t+e.results.length),0)),this.emit("suggest-complete",t),t)))))}async when(){await be(this,"updating")}async _update(){const{portal:t,view:e}=this;if(this.includeDefaultSources){const i=this._updatingPromise=ye([null==t?void 0:t.load(),null==e?void 0:e.when()]);if(this.destroyed)return;if(this.notifyChange("updating"),await i,i!==this._updatingPromise)return}this._updatingPromise=null,this.notifyChange("updating");const i=at(this,"messages");this.destroyed||(this._handles.add(i),await i,this._updateDefaultSources())}_clearSearching(){this._searching=null,this.notifyChange("state")}_convertHelperServices(){var t,e;const i=null==(t=this.portal)||null==(e=t.helperServices)?void 0:e.geocode;return i?i.map((t=>{if(!1===t.placefinding)return;const e=qe.apiKey&&Ef(t.url)?{url:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer"}:null,i=Rf.fromJSON({...t,...e}),s=i.url;return(Ef(s)||function(t){return!!t&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(t)}(s)||function(t){return!!t&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(t)}(s))&&i.set({singleLineFieldName:"SingleLine",outFields:i.outFields||["Addr_type","Match_addr","StAddr","City"],placeholder:i.placeholder||this.messages.placeholder,defaultZoomScale:"number"==typeof i.defaultZoomScale?i.defaultZoomScale:2500}),i.singleLineFieldName?i:void 0})).filter(Boolean):[]}_getLayerSources(t,e){var i;const s=null==(i=this.view)?void 0:i.map;return t.map((t=>{const i=s.findLayerById(t.id);if(!i)return;const r=this._getLayerJSON(t),n=of.fromJSON(r);return n.placeholder=e,this._getLayer(i,r).then((t=>{n.layer=t})),n})).filter(Boolean).toArray()}_getTableSources(t,e){var i;const s=null==(i=this.view)?void 0:i.map;return t.map((t=>{const i=s.findTableById(t.id);if(!i)return;const r=this._getLayerJSON(t),n=of.fromJSON(r);return n.placeholder=e,this._getLayer(i,r).then((t=>{n.layer=t})),n})).filter(Boolean).toArray()}_convertApplicationProperties(){var t,e,i;const s=null==(t=this.view)?void 0:t.map,r=null==s||null==(e=s.applicationProperties)||null==(i=e.viewing)?void 0:i.search;if(!r)return[];const{enabled:n,hintText:o,layers:l,tables:a}=r;return n?[...this._getLayerSources(l,o),...this._getTableSources(a,o)]:[]}_getSubLayer(t,e){return t.load().then((()=>{if(!t.allSublayers)return Promise.reject();const i=t.allSublayers.find((t=>t.id===e.subLayer));return i?i.createFeatureLayer():Promise.reject()}))}async _getBuildingSubLayer(t,e){await t.load();const i=t.allSublayers.find((t=>t.id===e.subLayer));return"building-component"!==(null==i?void 0:i.type)?Promise.reject():(await i.load(),null==i.associatedLayer?Promise.reject():(await i.associatedLayer.load(),i))}_getLayer(t,e){return"feature"===t.type||"scene"===t.type||"csv"===t.type||"geojson"===t.type||"ogc-feature"===t.type?Promise.resolve(t):"map-image"===t.type?this._getSubLayer(t,e).catch((()=>{const e=new v("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:t});return $f.error(e),null})):"building-scene"===t.type?this._getBuildingSubLayer(t,e):Promise.resolve(null)}_getLayerJSON(t){return"function"==typeof t.toJSON?t.toJSON():t}_updateDefaultSources(){const{defaultSources:t,includeDefaultSources:e}=this;t.removeAll(),e&&t.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()]),this.notifyChange("allSources")}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var t;const e=null==(t=this.view)?void 0:t.popup,{resultGraphic:i}=this;if(!e||!i)return;const{selectedFeature:s}=e;s&&s===i&&e.close()}_suggestTimer(t,e){return Ye(null!=t?t:this.suggestionDelay,null,e&&e.signal)}_createLocationForSearch(t){return t instanceof Qt?Nm(t.geometry):t instanceof ze?t:Array.isArray(t)&&2===t.length?new ze({longitude:t[0],latitude:t[1]}):null}_createSuggestionForSearch(t){if(t&&Gf(t,"key")&&Gf(t,"text")&&Gf(t,"sourceIndex"))return t;const e=this._createLocationForSearch(t),i="string"==typeof t?t:this.searchTerm,{selectedSuggestion:s,selectedResult:r}=this,n=!t&&s&&r;return n&&s.key===r.key&&s.sourceIndex===r.sourceIndex||n&&s.location?s:{location:F(e),text:e?"":i,sourceIndex:null,key:null}}_getFirstResult(t){let e=null;return t&&t.some((t=>{const{results:i}=t,s=i[0],r=!!s;return r&&(e=s),r})),e}_selectFirstResult(t){return this.autoSelect&&t?this.select(t):Promise.resolve(null)}_suggestImmediate(t,e){return this.when().then((()=>this._getSuggestionsFromSources(t,e))).then((i=>{var s;if(null!=(s=F(null==e?void 0:e.signal))&&s.aborted)return null;const r={activeSourceIndex:this.activeSourceIndex,searchTerm:t,numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(r,i),r}))}_formatSourceResponse(t,e,i){const s=e&&e.value||[],r=e&&e.error,n=this.allSources.getItemAt(i);r?(t.errors.push({sourceIndex:i,source:n,error:r}),$f.error(r),t.numErrors++):(t.results.push({sourceIndex:i,source:n,results:s}),t.numResults+=s.length)}_formatResponse(t,e,i){if(e)if(-1===t.activeSourceIndex){const s=i&&Gf(i,"sourceIndex")&&-1!==i.sourceIndex?i.sourceIndex:void 0;e.forEach(((e,i)=>{this._formatSourceResponse(t,e,void 0!==s?s:i)}))}else this._formatSourceResponse(t,e[0],t.activeSourceIndex)}_getResultsFromSources(t,e){const{allSources:i}=this,s=!t.location&&Gf(t,"sourceIndex")?t.sourceIndex:this.activeSourceIndex,r=[];if(!i.length){const t=new v("search:no-sources-defined","At least one source is required.",{allSources:i});return $f.error(t),Promise.reject(t)}return-1===s?i.forEach(((i,s)=>{r.push(this._getResultsFromSource(t,s,e))})):r.push(this._getResultsFromSource(t,s,e)),ye(r)}_getSuggestionsFromSources(t,e){const{allSources:i,activeSourceIndex:s}=this,r=[];if(!i.length){const t=new v("suggest:no-sources-defined","At least one source is required.",{allSources:i});return $f.error(t),Promise.reject(t)}return-1===s?i.forEach(((i,s)=>{r.push(this._getSuggestionsFromSource(t,s,e))})):r.push(this._getSuggestionsFromSource(t,s,e)),ye(r)}_getResultsFromSource(t,e,i){var s;const r=this.allSources.getItemAt(e),{location:n=null}=t,o=(null==(s=this.view)?void 0:s.spatialReference)||Uf,l=Gf(r,"maxResults")?r.maxResults:this.maxResults,a=!!(r instanceof of&&Gf(r,"exactMatch"))&&r.exactMatch,{view:h}=this;return r.getResults({view:h,sourceIndex:e,location:n,suggestResult:t,spatialReference:o,exactMatch:a,maxResults:l},i)}_getSuggestionsFromSource(t,e,i){const s=this.allSources.getItemAt(e),r=Gf(s,"suggestionsEnabled")?s.suggestionsEnabled:this.suggestionsEnabled,n=t.length,o=Gf(s,"minSuggestCharacters")?s.minSuggestCharacters:this.minSuggestCharacters;if(r&&t.trim()&&n>=o){var l;const r=(null==(l=this.view)?void 0:l.spatialReference)||Uf,n=Gf(s,"maxSuggestions")?s.maxSuggestions:this.maxSuggestions,{view:o}=this,a=!!(s instanceof of&&Gf(s,"exactMatch"))&&s.exactMatch;return s.getSuggestions({view:o,sourceIndex:e,suggestTerm:t,spatialReference:r,maxSuggestions:n,exactMatch:a},i)}return Promise.resolve(null)}_getLayerSourcePopupTemplate(t){const{layer:e}=t;if(e)return Gf(t,"popupTemplate")?t.popupTemplate:e.popupTemplate}_getSourceIndexOfResult(t){let e=null;return this.results.some((i=>i.results.some((s=>s===t&&(e=i.sourceIndex,!0))))),e}async _goToSearchResult(t){const e=!!t;this._abortGoTo();const i=new AbortController;this._gotoController=i;const s={target:{target:t},options:{animate:e,signal:i.signal}};await this.callGoTo(s),this._gotoController=null}_getDefaultSymbol(t){var e;const{defaultSymbols:i}=this,s=null==(e=t.feature)?void 0:e.geometry;if(!c(s))return null;const r=this._get("defaultSymbol");if(r&&("point"===s.type||"multipoint"===s.type))return r;switch(s.type){case"point":case"multipoint":return i.point;case"polyline":return i.polyline;case"extent":case"polygon":return i.polygon;default:return null}}_removeHighlight(){this._handles.remove(qf)}async _getLayerView(t){const{view:e}=this;if(!t||!e||"building-component"===t.layer.type||"subtype-sublayer"===t.layer.type)return Promise.resolve(null);const{layer:i}=t;return await e.when(),e.whenLayerView(i)}_highlightFeature(t){const{graphic:e,layerView:i}=t,{attributes:s,layer:r}=e,{objectIdField:n}=r,o=i.highlight(s&&s[n]||e);this._handles.add(o,qf)}};Jf.ALL_INDEX=-1,r([n({readOnly:!0,value:null})],Jf.prototype,"activeSource",null),r([n()],Jf.prototype,"activeSourceIndex",null),r([n()],Jf.prototype,"allPlaceholder",null),r([n({readOnly:!0,dependsOn:["defaultSources.length","sources.length","includeDefaultSources"]})],Jf.prototype,"allSources",null),r([n()],Jf.prototype,"autoNavigate",void 0),r([n()],Jf.prototype,"autoSelect",void 0),r([n()],Jf.prototype,"defaultPopupTemplate",void 0),r([n({readOnly:!0})],Jf.prototype,"defaultSources",void 0),r([n()],Jf.prototype,"defaultSymbol",null),r([n()],Jf.prototype,"defaultSymbols",void 0),r([n()],Jf.prototype,"includeDefaultSources",void 0),r([n()],Jf.prototype,"locationEnabled",null),r([n()],Jf.prototype,"maxInputLength",void 0),r([n()],Jf.prototype,"maxResults",void 0),r([n()],Jf.prototype,"maxSuggestions",void 0),r([n()],Jf.prototype,"messages",void 0),r([n()],Jf.prototype,"minSuggestCharacters",void 0),r([n({readOnly:!0})],Jf.prototype,"placeholder",null),r([n()],Jf.prototype,"popupEnabled",void 0),r([n({type:Ke})],Jf.prototype,"popupTemplate",void 0),r([n({type:X})],Jf.prototype,"portal",void 0),r([n()],Jf.prototype,"resultCount",void 0),r([n()],Jf.prototype,"resultGraphicEnabled",void 0),r([n({readOnly:!0})],Jf.prototype,"resultGraphic",void 0),r([n({readOnly:!0})],Jf.prototype,"results",void 0),r([n({readOnly:!0})],Jf.prototype,"selectedSuggestion",void 0),r([n()],Jf.prototype,"searchAllEnabled",void 0),r([n({readOnly:!0})],Jf.prototype,"selectedResult",void 0),r([n()],Jf.prototype,"searchTerm",null),r([n({type:Hf})],Jf.prototype,"sources",void 0),r([n({readOnly:!0,dependsOn:["allSources.length","updating"]})],Jf.prototype,"state",null),r([n()],Jf.prototype,"suggestionDelay",void 0),r([n()],Jf.prototype,"suggestionCount",void 0),r([n({readOnly:!0})],Jf.prototype,"suggestions",void 0),r([n()],Jf.prototype,"suggestionsEnabled",void 0),r([n({readOnly:!0})],Jf.prototype,"updating",null),r([n()],Jf.prototype,"view",void 0),r([n()],Jf.prototype,"clear",null),Jf=r([o(Vf)],Jf);const Yf=Jf;let Kf=class extends lt{constructor(t,e){super(t,e),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}render(){return ht("div",{class:"esri-search-result-renderer esri-widget"},ht("div",{key:"esri-search-renderer__container",class:this.classes("esri-search-result-renderer__more-results",{"esri-search-result-renderer__more-results--show-more-results":this.showMoreResultsOpen})},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return ht("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var t;const e=null==(t=this.viewModel)?void 0:t.selectedResult;return ht("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},e&&e.name||"")}renderMoreResultsLists(){var t;const e=null==(t=this.viewModel)?void 0:t.results,{resultCount:i}=this.viewModel;if(i<2)return null;const s=e.map((t=>this.renderMoreResultsList(t)));return ht("div",{key:"esri-search-renderer__more-results-container",class:"esri-search-result-renderer__more-results-list"},s)}renderMoreResultsButton(){const{messages:t}=this,{resultCount:e}=this.viewModel;return e<2?null:ht("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},ht("a",{class:"esri-widget__anchor",href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?t.hideMoreResults:t.showMoreResults))}renderMoreResultsHeader(t,e){return ht("div",{key:`esri-search-result-renderer__header-${e}`,class:"esri-search-result-renderer__more-results-list-header"},t)}renderMoreResultsList(t){var e,i;const{results:s}=t,r=s.length,n=!!r,o=null==(e=this.viewModel)?void 0:e.selectedResult,l=1===r&&s[0]===o,a=this._getSourceName(t.source,t.sourceIndex),h=(null==(i=this.viewModel)?void 0:i.results.length)>1&&!l?this.renderMoreResultsHeader(a,t.sourceIndex):null,u=n&&s.map(((t,e)=>this.renderMoreResultsListItem(t,e))),c=n&&!l?ht("ul",{key:`esri-search-result-renderer__list-${t.sourceIndex}`},u):null;return n?ht("div",{key:`esri-search-result-renderer__results-${t.sourceIndex}`},h,c):null}renderMoreResultsListItem(t,e){return t!==this.get("viewModel.selectedResult")?ht("li",{key:`esri-search-result-renderer__list-item-${e}`},ht("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",bind:this,"data-result":t,onclick:this._selectResultClick,onkeydown:this._selectResultClick},t.name)):null}_showMoreResultsClick(t){t.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const e=this.get("viewModel.view.popup");e&&e.reposition()}_selectResultClick(t){t.preventDefault(),this.viewModel&&this.viewModel.select(t.currentTarget["data-result"])}_getSourceName(t,e){return e===Yf.ALL_INDEX?this.messages.all:t.name}};r([n(),nt("esri/widgets/Search/t9n/Search")],Kf.prototype,"messages",void 0),r([n()],Kf.prototype,"showMoreResultsOpen",void 0),r([n()],Kf.prototype,"viewModel",void 0),r([ot()],Kf.prototype,"_showMoreResultsClick",null),r([ot()],Kf.prototype,"_selectResultClick",null),Kf=r([o("esri.widgets.Search.SearchResultRenderer")],Kf);const Qf=Kf,Zf="esri-widget--button",Xf="esri-menu__list-item",tg=/<[a-z/][\s\S]*>/i;let eg=class extends lt{constructor(t,e){super(t,e),this._activeMenuItemIndex=-1,this._handles=new U,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new Qf,this._locateFailed=null,this._container=null,this.activeMenu="none",this.activeSource=null,this.activeSourceIndex=null,this.allPlaceholder=null,this.allSources=null,this.autoNavigate=null,this.autoSelect=null,this.defaultSources=null,this.disabled=!1,this.goToOverride=null,this.iconClass="esri-icon-search",this.includeDefaultSources=null,this.label=void 0,this.locationEnabled=null,this.maxResults=null,this.maxSuggestions=null,this.messages=null,this.messagesCommon=null,this.minSuggestCharacters=null,this.popupEnabled=null,this.popupTemplate=null,this.portal=null,this.resultGraphic=null,this.resultGraphicEnabled=null,this.results=null,this.searchAllEnabled=null,this.searchTerm=null,this.selectedResult=null,this.sources=null,this.suggestions=null,this.suggestionsEnabled=null,this.view=null,this.viewModel=new Yf,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=t=>{var e;const i=t.relatedTarget;i&&null!=(e=this._container)&&e.contains(i)||this._clearActiveMenu()},this.own(et(this,"searchTerm",(t=>{(t&&"warning"===this.activeMenu||!t&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu()})),it(this,"viewModel.allSources","change",(()=>this._watchSourceChanges())),W(this,"activeMenu",(()=>this._resetActiveMenuItemIndex())),W(this,"viewModel.defaultPopupTemplate",(t=>{t&&(t.content=this._renderSearchResultsContent.bind(this))})))}destroy(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}clear(){}focus(){var t;null==(t=this._inputNode)||t.focus(),this.emit("search-focus")}blur(){var t;null==(t=this._inputNode)||t.blur(),this.emit("search-blur")}search(t){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:i}=e;return this._searchController=e,this.viewModel.search(t,{signal:i}).catch((t=>{if(this._searchController===e)return this._clearActiveMenu(),this._searchController=null,t})).then((t=>{if(this._searchController===e)return this.activeMenu=t.numResults?"none":"warning",this._searchController=null,t}))}suggest(t){this._cancelSuggest();const e=new AbortController,{signal:i}=e;return this._suggestController=e,this.viewModel.suggest(t,null,{signal:i}).then((t=>{if(this._suggestController===e)return this._suggestController=null,t.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),t})).catch((()=>{if(this._suggestController===e)return this._suggestController=null,null}))}render(){const{state:t}=this.viewModel;return ht("div",{class:this.classes("esri-search esri-widget",{"esri-disabled":"disabled"===t,"esri-widget--disabled":this.disabled})},"loading"===t?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:t}=this;return ht("button",{"aria-label":t.searchButtonTitle,bind:this,class:this.classes("esri-search__submit-button",Zf),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:t.searchButtonTitle},ht("span",{"aria-hidden":"true",class:"esri-icon-search"}))}renderWarningMenu(){return ht("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},ht("div",{class:"esri-search__warning-body"},this.renderWarning()))}renderSourceMenuButton(){const{messages:t,activeMenu:e,sourceMenuId:i,sourceMenuButtonId:s}=this,{activeSourceIndex:r,allSources:n}=this.viewModel;return n.length>1?ht("button",{id:s,key:"esri-search__source-menu-button",bind:this,"aria-label":t.searchIn,title:t.searchIn,"aria-haspopup":"true","aria-expanded":("source"===e).toString(),"aria-controls":i,class:this.classes("esri-search__sources-button",Zf),onclick:this._handleSourcesMenuToggleClick,onfocus:this._clearActiveMenu,afterCreate:$t,"data-node-ref":"_sourceMenuButtonNode"},ht("span",{"aria-hidden":"true",class:"esri-icon-down-arrow esri-search__sources-button--down"}),ht("span",{"aria-hidden":"true",class:"esri-icon-up-arrow esri-search__sources-button--up"}),ht("span",{class:"esri-search__source-name"},this._getSourceName(r))):null}renderSourcesList(){const{allSources:t,searchAllEnabled:e}=this.viewModel,{_activeMenuItemIndex:i,activeMenu:s,sourceMenuId:r,sourceMenuButtonId:n}=this,o="source"===s&&i>-1?this._buildId("source-item",i):null;return t.length>1?ht("ul",{"aria-activedescendant":o,"aria-labelledby":n,id:r,role:"menu",bind:this,afterCreate:$t,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:"esri-menu__list",tabIndex:-1},e?this.renderSource(Yf.ALL_INDEX):null,t.map(((t,e)=>this.renderSource(e))).toArray()):null}renderSourcesMenu(){const{allSources:t}=this.viewModel;return t.length>1?ht("div",{key:"esri-search__source-menu",class:this.classes("esri-menu","esri-search__sources-menu")},this.renderSourcesList()):null}renderLoader(){const{messages:t,messagesCommon:e}=this;return ht("div",{class:"esri-widget__loader",key:"base-loader"},ht("span",{"aria-hidden":"true",class:"esri-widget__loader-animation"}),ht("span",{class:"esri-icon-font-fallback-text"},t.searchButtonTitle),ht("span",{class:"esri-widget__loader-text"},e.loading))}renderContainer(){const{allSources:t,state:e}=this.viewModel,{activeMenu:i}=this;return ht("div",{tabIndex:-1,afterCreate:t=>{this._container=t,t.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:t=>{t.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes({"esri-search--multiple-sources":t.length>1,"esri-search--loading":"loading"===e,"esri-search--searching":"searching"===e,"esri-search--warning":"warning"===i,"esri-search--sources":"source"===i,"esri-search--show-suggestions":"suggestion"===i},"esri-search__container"),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?ht("button",{bind:this,class:this.classes("esri-search__clear-button",Zf),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle},ht("span",{"aria-hidden":"true",class:"esri-icon-close"})):null}renderLocationGroup(){const{messages:t,locationEnabled:e,displayedSearchTerm:i}=this,s="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return e&&!i?ht("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes("esri-menu__list","esri-search__suggestions-list","esri-search__suggestions-list--current-location")},ht("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes(Xf,s?"esri-menu__list-item--focus":null)},ht("span",{"aria-hidden":"true",class:"esri-icon-locate-circled"})," ",t.useCurrentLocation)):null}renderInput(){const{activeMenu:t,locationEnabled:e,displayedSearchTerm:i,messages:s,suggestionsMenuId:r,inputId:n,_activeMenuItemIndex:o}=this,{maxInputLength:l,placeholder:a,searchTerm:h,suggestionCount:u}=this.viewModel,c=!((!e||i)&&!u),d="suggestion"===t&&o>-1?this._buildId("suggestion-item",o):null;return ht("input",{"aria-activedescendant":d,"aria-autocomplete":"list","aria-expanded":(c&&"suggestion"===t).toString(),"aria-controls":c?r:null,"aria-haspopup":"listbox","aria-label":s.searchButtonTitle,bind:this,placeholder:a,maxlength:l,autocomplete:"off",type:"text",class:this.classes("esri-input","esri-search__input"),value:h,id:n,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:$t,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:h?"":a})}renderForm(){return ht("form",{key:"esri-search__form",bind:this,class:"esri-search__form",onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(t){const{sourceIndex:e}=t,i=t.results;return t.results.length?ht("ul",{role:"group",key:`esri-search__suggestion-list-${e}`,class:this.classes("esri-menu__list","esri-search__suggestions-list")},i.map((t=>this.renderSuggestion(t,this._menuItemCount++)))):null}renderSuggestionsGroup(){const{suggestions:t}=this.viewModel;return t?t.map((t=>[this.renderSuggestionHeader(t),this.renderSuggestList(t)])):null}renderSuggestionsMenu(){const{displayedSearchTerm:t,locationEnabled:e,suggestionsMenuId:i,inputId:s}=this,{suggestionCount:r}=this.viewModel,n=e&&!t||r;return this._menuItemCount=0,n?ht("div",{id:i,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),role:"listbox","aria-labelledby":s,bind:this,afterCreate:$t,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return ht("div",{key:"esri-search__input-container",class:"esri-search__input-container"},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(t){const{allSources:e,activeSourceIndex:i}=this.viewModel,{sourceIndex:s}=t;return t.results.length&&e.length>1&&i===Yf.ALL_INDEX?ht("div",{key:`esri-search__suggestion-header-${s}`,class:"esri-menu__header"},this._getSourceName(s)):null}renderSuggestion(t,e){const{_activeMenuItemIndex:i,messages:s}=this,{searchTerm:r}=this.viewModel;if(r){const{text:n}=t,o=n||s.untitledResult,l=tg.test(o),a=[];if(l)a.push(ht("div",{innerHTML:o}));else{const t=this._splitResult(o,r),e=r.toLowerCase();t.forEach(((t,i)=>{t&&t.length&&(t.toLowerCase()===e?a.push(ht("strong",{key:i},t)):a.push(t))}))}const h="suggestion"===this.activeMenu&&i===e;return ht("li",{bind:this,id:this._buildId("suggestion-item",e),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===e).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${e}`,"data-suggestion":t,role:"option",class:this.classes(Xf,h?"esri-menu__list-item--focus":null)},a)}}renderSource(t){const{activeSourceIndex:e,searchAllEnabled:i}=this.viewModel,s={"esri-menu__list-item--active":t===e,"esri-menu__list-item--focus":"source"===this.activeMenu&&t===(i?this._activeMenuItemIndex-1:this._activeMenuItemIndex)};return ht("li",{bind:this,key:`esri-search__source-${t}`,id:this._buildId("source-item",i?t+1:t),"aria-checked":(t===e).toString(),onclick:this._handleSourceClick,"data-source-index":t,role:"menuitemradio",class:this.classes("esri-search__source",Xf,s)},this._getSourceName(t))}renderNoResultsWarning(t){const{messages:e}=this,i=t?Nt(e.noResultsFoundForValue,{value:`"${t}"`}):e.noResultsFound;return ht("div",{key:"esri-search__no_results"},ht("div",{class:"esri-search__warning-header"},e.noResults),ht("div",{class:"esri-search__warning-text"},i))}renderEmptySearchWarning(){const{messages:t}=this;return ht("div",{key:"esri-search__empty-search"},ht("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),ht("span",{class:"esri-search__no-value-text"},t.emptyValue))}renderLocateWarning(){const{messages:t}=this;return ht("div",{key:"esri-search__locate-error"},ht("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),ht("span",{class:"esri-search__no-value-text"},t.locateError))}renderWarning(){var t;const{displayedSearchTerm:e,_locateFailed:i}=this,{viewModel:s}=this;return i?this.renderLocateWarning():null!=(t=s.selectedSuggestion)&&t.location||e?this.renderNoResultsWarning(e):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(t,e){return`${this.id}-${t}${void 0===e?"":`-${e}`}`}_watchSourceChanges(){const{_handles:t,viewModel:{allSources:e}}=this,i="sources";t.remove(i),e.forEach((e=>t.add(et(e,"name",(()=>this.scheduleRender())),i)))}_handleSourcesMenuToggleClick(){var t;this.activeMenu="source"===this.activeMenu?"none":"source",this.renderNow(),"source"===this.activeMenu&&(null==(t=this._sourceListNode)||t.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(t){const e=t.currentTarget["data-suggestion"];e&&(this._focus(),this.search(e))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const t=new AbortController,{signal:e}=t;this._searchController=t,this.viewModel.searchNearby({signal:e}).catch((()=>{this._locateFailed=!0,this.activeMenu="warning"})).then((()=>{this._searchController=null}))}_handleSourceClick(t){this._setSourceFromMenuItem(t.currentTarget)}_setSourceFromMenuItem(t){var e;t&&(this.viewModel.activeSourceIndex=t["data-source-index"],this._clearActiveMenu(),null==(e=this._sourceMenuButtonNode)||e.focus())}_cancelSuggest(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)}_cancelSearch(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1}_handleInputKeyup(t){var e;const i=At(t);if(t.ctrlKey||t.metaKey||"Copy"===i||"ArrowLeft"===i||"ArrowRight"===i||"Shift"===i)return;if("Tab"===i||"Escape"===i||t.shiftKey&&"Tab"===i)return this._cancelSuggest(),void("Escape"===i&&this._clearActiveMenu());const s="Home"===i||"End"===i||"ArrowUp"===i||"ArrowDown"===i;if("Enter"===i&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const r=null==(e=this._suggestionListNode)?void 0:e.getElementsByTagName("li");if(null!=r&&r.length){if("suggestion"!==this.activeMenu&&this._openSuggestionMenu(),s)return t.preventDefault(),this._cancelSuggest(),void this.handleItemNavigation(i,r,this._suggestionListNode);const e=r[this._activeMenuItemIndex];if("Enter"===i&&e){const t=e["data-suggestion"];return void(t?(this._focus(),this.search(t)):e["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}handleItemNavigation(t,e,i){const s=this._activeMenuItemIndex;"Home"===t&&(this._activeMenuItemIndex=0),"End"===t&&(this._activeMenuItemIndex=e.length-1),"ArrowUp"===t&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?e.length-1:this._activeMenuItemIndex-1),"ArrowDown"===t&&(this._activeMenuItemIndex=this._activeMenuItemIndex===e.length-1?0:this._activeMenuItemIndex+1),s!==this._activeMenuItemIndex&&Ze(e[this._activeMenuItemIndex],i)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(t){const e=t.target;this.viewModel.searchTerm!==e.value&&(this.viewModel.searchTerm=e.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(t){const e=At(t);if(_t(e)){t.preventDefault();const e=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(e)}else"ArrowUp"!==e&&"ArrowDown"!==e&&"End"!==e&&"Home"!==e||t.preventDefault()}_handleSourceMenuKeyup(t){var e;const i=At(t),s="ArrowUp"===i||"ArrowDown"===i||"End"===i||"Home"===i;var r;if(s&&t.preventDefault(),"Escape"===i)return this._clearActiveMenu(),void(null==(r=this._sourceMenuButtonNode)||r.focus());const n=null==(e=this._sourceListNode)?void 0:e.getElementsByTagName("li");return n&&0!==n.length&&s?("source"!==this.activeMenu&&(this.activeMenu="source"),void this.handleItemNavigation(i,n,this._sourceListNode.parentElement)):void 0}_focus(t){this.focus(),t&&(this.activeMenu=t)}_formSubmit(t){t.preventDefault(),-1===this._activeMenuItemIndex&&this.search()}_getSourceName(t){const{messages:e}=this,i=this.viewModel,{allSources:s}=i,r=s.getItemAt(t);return t===Yf.ALL_INDEX?e.all:r&&r.name||e.untitledSource}_splitResult(t,e){const i=Xe(e);return t.replace(new RegExp(`(^|)(${i})(|$)`,"ig"),"$1|$2|$3").split("|")}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};r([n()],eg.prototype,"_activeMenuItemIndex",void 0),r([n()],eg.prototype,"displayedSearchTerm",null),r([n({readOnly:!0})],eg.prototype,"inputId",null),r([n({readOnly:!0})],eg.prototype,"suggestionsMenuId",null),r([n({readOnly:!0})],eg.prototype,"sourceMenuId",null),r([n({readOnly:!0})],eg.prototype,"sourceMenuButtonId",null),r([n()],eg.prototype,"activeMenu",void 0),r([rt("viewModel.activeSource")],eg.prototype,"activeSource",void 0),r([rt("viewModel.activeSourceIndex")],eg.prototype,"activeSourceIndex",void 0),r([rt("viewModel.allPlaceholder")],eg.prototype,"allPlaceholder",void 0),r([rt("viewModel.allSources")],eg.prototype,"allSources",void 0),r([rt("viewModel.autoNavigate")],eg.prototype,"autoNavigate",void 0),r([rt("viewModel.autoSelect")],eg.prototype,"autoSelect",void 0),r([rt("viewModel.defaultSources")],eg.prototype,"defaultSources",void 0),r([n()],eg.prototype,"disabled",void 0),r([rt("viewModel.goToOverride")],eg.prototype,"goToOverride",void 0),r([n()],eg.prototype,"iconClass",void 0),r([rt("viewModel.includeDefaultSources")],eg.prototype,"includeDefaultSources",void 0),r([n({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],eg.prototype,"label",void 0),r([rt("viewModel.locationEnabled")],eg.prototype,"locationEnabled",void 0),r([rt("viewModel.maxResults")],eg.prototype,"maxResults",void 0),r([rt("viewModel.maxSuggestions")],eg.prototype,"maxSuggestions",void 0),r([n(),nt("esri/widgets/Search/t9n/Search")],eg.prototype,"messages",void 0),r([n(),nt("esri/t9n/common")],eg.prototype,"messagesCommon",void 0),r([rt("viewModel.minSuggestCharacters")],eg.prototype,"minSuggestCharacters",void 0),r([rt("viewModel.popupEnabled")],eg.prototype,"popupEnabled",void 0),r([rt("viewModel.popupTemplate")],eg.prototype,"popupTemplate",void 0),r([rt("viewModel.portal")],eg.prototype,"portal",void 0),r([rt("viewModel.resultGraphic")],eg.prototype,"resultGraphic",void 0),r([rt("viewModel.resultGraphicEnabled")],eg.prototype,"resultGraphicEnabled",void 0),r([rt("viewModel.results")],eg.prototype,"results",void 0),r([rt("viewModel.searchAllEnabled")],eg.prototype,"searchAllEnabled",void 0),r([rt("viewModel.searchTerm")],eg.prototype,"searchTerm",void 0),r([rt("viewModel.selectedResult")],eg.prototype,"selectedResult",void 0),r([rt("viewModel.sources")],eg.prototype,"sources",void 0),r([rt("viewModel.suggestions")],eg.prototype,"suggestions",void 0),r([rt("viewModel.suggestionsEnabled")],eg.prototype,"suggestionsEnabled",void 0),r([rt("viewModel.view")],eg.prototype,"view",void 0),r([Qe(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),n({type:Yf})],eg.prototype,"viewModel",void 0),r([rt("viewModel.clear")],eg.prototype,"clear",null),eg=r([o("esri.widgets.Search")],eg);const ig=eg;let sg=class{constructor(i){t(this,i),this.searchBlur=e(this,"searchBlur",7),this.searchClear=e(this,"searchClear",7),this.searchComplete=e(this,"searchComplete",7),this.searchFocus=e(this,"searchFocus",7),this.searchStart=e(this,"searchStart",7),this.selectResult=e(this,"selectResult",7),this.suggestComplete=e(this,"suggestComplete",7),this.suggestStart=e(this,"suggestStart",7)}validateView(t){t&&(this.widget.view=t,"arcgis-expand"!==this.el.parentElement.tagName.toLowerCase()&&this.widget.view.ui.add(this.widget,this.position))}componentWillLoad(){const t=new ig({container:this.el});t.on("search-blur",(t=>this.searchBlur.emit(t))),t.on("search-clear",(t=>this.searchClear.emit(t))),t.on("search-complete",(t=>this.searchComplete.emit(t))),t.on("search-focus",(t=>this.searchFocus.emit(t))),t.on("search-start",(t=>this.searchStart.emit(t))),t.on("select-result",(t=>this.selectResult.emit(t))),t.on("suggest-complete",(t=>this.suggestComplete.emit(t))),t.on("suggest-start",(t=>this.suggestStart.emit(t))),this.widget=t}get el(){return i(this)}static get watchers(){return{view:["validateView"]}}};sg.style="@import url('https://js.arcgis.com/next/esri/themes/light/main.css');";const rg=K.getLogger("esri.networks.Network");let ng=class extends(ti(Q)){constructor(t){super(t),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null}initialize(){this.when().catch((t=>{var e,i;g(t)||rg.error("#load()",`Failed to load layer (title: '${null!=(e=this.title)?e:"no title"}', id: '${null!=(i=this.id)?i:"no id"}')`,{error:t})}))}get datasetName(){var t;return null==(t=this.dataElement)?void 0:t.name}get owner(){var t;return null==(t=this.dataElement)?void 0:t.userIdentity}get schemaGeneration(){var t;return null==(t=this.dataElement)?void 0:t.schemaGeneration}get parsedUrl(){const t=this.layerUrl;return t?ei(t):null}get featureServiceUrl(){const t=this.parsedUrl&&ii(this.parsedUrl.path);return c(t)?t.url.path:null}get networkServiceUrl(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}get layerId(){const t=this.parsedUrl&&ii(this.parsedUrl.path);return c(t)?t.sublayer:null}async load(t){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),t)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,t)),this}getLayerIdBySourceId(t){if(this.dataElement){const e=this.dataElement.domainNetworks;for(const i of e){for(const e of i.edgeSources?i.edgeSources:[])if(e.sourceId===t)return e.layerId;for(const e of i.junctionSources?i.junctionSources:[])if(e.sourceId===t)return e.layerId}return null}return null}async _fetchLayerMetaData(t,e){const i=await w(t,{responseType:"json",query:{f:"json"},...e});this.read(i.data,{origin:"service"})}async _fetchDataElement(t,e,i){if(this.dataElement)return;const s=await w(`${t}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([e]),f:"json"},...i}).then((t=>{var e;return null==(e=t.data.layerDataElements)?void 0:e[0]}));s&&this.read(s,{origin:"service"})}};r([n({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],ng.prototype,"id",void 0),r([n({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],ng.prototype,"title",void 0),r([n({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],ng.prototype,"layerUrl",void 0),r([n({type:Object,json:{origins:{service:{read:!0}},read:!1}})],ng.prototype,"dataElement",void 0),r([n({type:M,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],ng.prototype,"fullExtent",void 0),r([n({type:_,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],ng.prototype,"spatialReference",void 0),r([n({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],ng.prototype,"type",void 0),r([n({readOnly:!0})],ng.prototype,"datasetName",null),r([n({readOnly:!0})],ng.prototype,"owner",null),r([n({readOnly:!0})],ng.prototype,"schemaGeneration",null),r([n({readOnly:!0})],ng.prototype,"parsedUrl",null),r([n({readOnly:!0})],ng.prototype,"featureServiceUrl",null),r([n({readOnly:!0})],ng.prototype,"networkServiceUrl",null),r([n({readOnly:!0})],ng.prototype,"layerId",null),ng=r([o("esri.networks.Network")],ng);const og=ng;let lg=class extends Le{constructor(t){super(t),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};r([n({type:[Object],json:{write:!0}})],lg.prototype,"conditionBarriers",void 0),r([n({type:[Object],json:{write:!0}})],lg.prototype,"outputConditions",void 0),r([n({type:[Object],json:{write:!0}})],lg.prototype,"functions",void 0),r([n({type:[Object],json:{write:!0}})],lg.prototype,"functionBarriers",void 0),r([n({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],lg.prototype,"traversabilityScope",void 0),r([n({type:String,json:{write:!0}})],lg.prototype,"shortestPathNetworkAttributeName",void 0),r([n({type:Boolean,json:{write:!0}})],lg.prototype,"includeBarriers",void 0),r([n({type:Boolean,json:{write:!0}})],lg.prototype,"validateConsistency",void 0),r([n({type:Boolean,json:{write:!0}})],lg.prototype,"ignoreBarriersAtStartingPoints",void 0),lg=r([o("esri.networks.support.TraceConfiguration")],lg);const ag=lg,hg=new pe({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork","subnetwork controllers":"subnetwork-controllers",loops:"loops",isolation:"isolation"});let ug=class extends ag{constructor(t){super(t),this.filterBarriers=[],this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.tierName=null,this.validateLocatability=null}};r([n({type:[Object],json:{write:!0}})],ug.prototype,"filterBarriers",void 0),r([n({type:String,json:{write:!0}})],ug.prototype,"domainNetworkName",void 0),r([n({type:String,json:{write:!0}})],ug.prototype,"filterBitsetNetworkAttributeName",void 0),r([n({type:[Object],json:{write:!0}})],ug.prototype,"filterFunctionBarriers",void 0),r([n({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],ug.prototype,"filterScope",void 0),r([n({type:Boolean,json:{write:!0}})],ug.prototype,"includeContainers",void 0),r([n({type:Boolean,json:{write:!0}})],ug.prototype,"includeContent",void 0),r([n({type:Boolean,json:{write:!0}})],ug.prototype,"includeIsolated",void 0),r([n({type:Boolean,json:{write:!0}})],ug.prototype,"includeStructures",void 0),r([n({type:Boolean,json:{write:!0}})],ug.prototype,"includeUpToFirstSpatialContainer",void 0),r([n({type:Object,json:{write:!0}})],ug.prototype,"nearestNeighbor",void 0),r([n({type:[Object],json:{write:!0}})],ug.prototype,"outputFilterCategories",void 0),r([n({type:[Object],json:{write:!0}})],ug.prototype,"outputFilters",void 0),r([n({type:[Object],json:{write:!0}})],ug.prototype,"propagators",void 0),r([n({type:String,json:{write:!0}})],ug.prototype,"subnetworkName",void 0),r([n({type:String,json:{write:!0}})],ug.prototype,"targetTierName",void 0),r([n({type:String,json:{write:!0}})],ug.prototype,"tierName",void 0),r([n({type:Boolean,json:{write:!0}})],ug.prototype,"validateLocatability",void 0),ug=r([o("esri.networks.support.UNTraceConfiguration")],ug);const cg=ug;let dg=class extends ri{constructor(t){super(t),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(t,e){return void 0!==t.tierName?cg.fromJSON(t):ag.fromJSON(t)}};r([n({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"}}},read:!1}})],dg.prototype,"globalId",void 0),r([n({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],dg.prototype,"title",void 0),r([n({type:ag,json:{origins:{service:{read:!0}},read:!1}})],dg.prototype,"traceConfiguration",void 0),r([si("service","traceConfiguration")],dg.prototype,"readTraceConfiguration",null),r([n({type:Date,json:{origins:{service:{read:!0}},read:!1}})],dg.prototype,"creationDate",void 0),r([n({type:String,json:{origins:{service:{read:!0}},read:!1}})],dg.prototype,"creator",void 0),r([n({type:String,json:{origins:{service:{read:!0}},read:!1}})],dg.prototype,"description",void 0),r([n({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"}}},read:!1}})],dg.prototype,"minStartingPoints",void 0),r([n({type:[Object],json:{origins:{service:{read:!0}},read:!1}})],dg.prototype,"resultTypes",void 0),r([n({type:[String],json:{origins:{service:{read:!0}},read:!1}})],dg.prototype,"tags",void 0),r([n({type:hg.apiValues,json:{type:hg.jsonValues,origins:{service:{read:hg.read}},read:!1}})],dg.prototype,"traceType",void 0),dg=r([o("esri.networks.support.NamedTraceConfiguration")],dg);const pg=dg;let mg=class extends Le{constructor(t){super(t),this.id=null,this.name=null}};r([n({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],mg.prototype,"id",void 0),r([n({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],mg.prototype,"name",void 0),r([n({type:Boolean,json:{write:!0}})],mg.prototype,"isUpstreamTerminal",void 0),mg=r([o("esri.networks.support.Terminal")],mg);const fg=mg,gg=new pe({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let vg=class extends Le{constructor(t){super(t),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};r([n({type:String,json:{write:!0}})],vg.prototype,"defaultConfiguration",void 0),r([n({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],vg.prototype,"id",void 0),r([n({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],vg.prototype,"name",void 0),r([n({type:[fg],json:{write:!0}})],vg.prototype,"terminals",void 0),r([n({type:gg.apiValues,json:{type:gg.jsonValues,read:gg.read,write:gg.write}})],vg.prototype,"traversabilityModel",void 0),vg=r([o("esri.networks.support.TerminalConfiguration")],vg);const yg=vg;let wg=class extends og{constructor(t){super(t),this.sharedNamedTraceConfigurations=[],this.type="utility"}get serviceTerritoryFeatureLayerId(){var t;return null==(t=this.dataElement)?void 0:t.serviceTerritoryFeatureLayerId}get terminalConfigurations(){var t;return(null==(t=this.dataElement)?void 0:t.terminalConfigurations.map((t=>yg.fromJSON(t))))||[]}get domainNetworkNames(){var t;return(null==(t=this.dataElement)?void 0:t.domainNetworks.map((t=>t.domainNetworkName)))||[]}async load(t){return this.addResolvingPromise(super.load(t)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(t)),this}getTerminalConfiguration(t){let e=null,i=null;const s=t.layer;let r=null;if("feature"!==(null==s?void 0:s.type))return null;if(r=s.layerId,null===r)return null;const n=t.attributes;if(null==n)return null;for(const s of Object.keys(n))"ASSETGROUP"===s.toUpperCase()&&(e=t.getAttribute(s)),"ASSETTYPE"===s.toUpperCase()&&(i=t.getAttribute(s));if(!this.dataElement)return null;let o=null;const l=this.dataElement.domainNetworks;for(const t of l){var a;const s=null==(a=t.junctionSources)?void 0:a.find((t=>t.layerId===r));if(s){var h;const t=null==(h=s.assetGroups)?void 0:h.find((t=>t.assetGroupCode===e));if(t){var u;const e=null==(u=t.assetTypes)?void 0:u.find((t=>t.assetTypeCode===i));if(e){o=e.terminalConfigurationId;break}}}}if(null!=o){const t=this.dataElement.terminalConfigurations,e=null==t?void 0:t.find((t=>t.terminalConfigurationId===o));return e?yg.fromJSON(e):null}return null}getTierNames(t){var e;const i=null==(e=this.dataElement)?void 0:e.domainNetworks.find((e=>e.domainNetworkName===t));return(null==i?void 0:i.tiers.map((t=>t.name)))||[]}async _loadNamedTraceConfigurationsFromNetwork(t){var e;if(0===(null==(e=this.sharedNamedTraceConfigurations)?void 0:e.length))return;const i=this.sharedNamedTraceConfigurations.map((t=>t.globalId)),s=await this._fetchTraceConfigData(this.networkServiceUrl,i,t);for(const t of this.sharedNamedTraceConfigurations){const e=null==s?void 0:s.find((e=>e.globalId===t.globalId));e&&t.read(e,{origin:"service"})}}_fetchTraceConfigData(t,e,i){return w(`${t}/traceConfigurations/query`,{responseType:"json",query:{globalIds:JSON.stringify(e),f:"json"},...i}).then((t=>t.data.traceConfigurations))}};r([n({type:[pg],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],wg.prototype,"sharedNamedTraceConfigurations",void 0),r([n({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],wg.prototype,"type",void 0),r([n({readOnly:!0})],wg.prototype,"serviceTerritoryFeatureLayerId",null),r([n({readOnly:!0})],wg.prototype,"terminalConfigurations",null),r([n({readOnly:!0})],wg.prototype,"domainNetworkNames",null),wg=r([o("esri.networks.UtilityNetwork")],wg);const bg=wg;let _g=class extends Le{constructor(t){super(t),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};r([n({type:String,json:{write:!0}})],_g.prototype,"facilityIdField",void 0),r([n({type:String,json:{write:!0}})],_g.prototype,"layerId",void 0),r([n({type:String,json:{write:!0}})],_g.prototype,"nameField",void 0),r([n({type:String,json:{write:!0}})],_g.prototype,"siteIdField",void 0),r([n({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],_g.prototype,"sublayerId",void 0),_g=r([o("esri.layers.support.FacilityLayerInfo")],_g);const Ag=_g;let xg=class extends Le{constructor(t){super(t),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};r([n({type:String,json:{write:!0}})],xg.prototype,"facilityIdField",void 0),r([n({type:String,json:{write:!0}})],xg.prototype,"layerId",void 0),r([n({type:String,json:{write:!0}})],xg.prototype,"levelIdField",void 0),r([n({type:String,json:{write:!0}})],xg.prototype,"levelNumberField",void 0),r([n({type:String,json:{write:!0}})],xg.prototype,"longNameField",void 0),r([n({type:String,json:{write:!0}})],xg.prototype,"shortNameField",void 0),r([n({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],xg.prototype,"sublayerId",void 0),r([n({type:String,json:{write:!0}})],xg.prototype,"verticalOrderField",void 0),xg=r([o("esri.layers.support.LevelLayerInfo")],xg);const Sg=xg;let Cg=class extends Le{constructor(t){super(t),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};r([n({type:String,json:{write:!0}})],Cg.prototype,"layerId",void 0),r([n({type:String,json:{write:!0}})],Cg.prototype,"nameField",void 0),r([n({type:String,json:{write:!0}})],Cg.prototype,"siteIdField",void 0),r([n({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Cg.prototype,"sublayerId",void 0),Cg=r([o("esri.layers.support.SiteLayerInfo")],Cg);const kg=Cg;let Ig=class extends Le{constructor(t){super(t),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};r([n({type:Sg,json:{write:!0}})],Ig.prototype,"levelLayer",void 0),r([n({type:Ag,json:{write:!0}})],Ig.prototype,"facilityLayer",void 0),r([n({type:kg,json:{write:!0}})],Ig.prototype,"siteLayer",void 0),Ig=r([o("esri.support.MapFloorInfo")],Ig);const Mg=Ig;var Tg;let Eg=Tg=class extends Le{constructor(t){super(t),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new Tg(y({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};r([n({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],Eg.prototype,"activeRange",void 0),r([n({type:[Number],json:{write:!0}})],Eg.prototype,"currentRangeExtent",void 0),r([n({type:[Number],json:{write:!0}})],Eg.prototype,"fullRangeExtent",void 0),Eg=Tg=r([o("esri.webdoc.RangeInfo")],Eg);const jg=Eg;var Og;let Lg=Og=class extends Le{constructor(t){super(t),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new Og(y({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};r([n({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],Lg.prototype,"enabled",void 0),r([n({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],Lg.prototype,"longNames",void 0),r([n({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],Lg.prototype,"minimized",void 0),r([n({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],Lg.prototype,"pinnedLevels",void 0),r([n({type:String,json:{read:{source:"site"},write:{target:"site"}}})],Lg.prototype,"site",void 0),r([n({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],Lg.prototype,"facility",void 0),r([n({type:String,json:{read:{source:"level"},write:{target:"level"}}})],Lg.prototype,"level",void 0),Lg=Og=r([o("esri.webdoc.widgets.FloorFilter")],Lg);const Fg=Lg;var zg;const Pg=new pe({slider:"slider",picker:"picker"});let Rg=zg=class extends Le{constructor(t){super(t),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new zg({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};r([n({type:Pg.apiValues,nonNullable:!0,json:{type:Pg.jsonValues,default:null,read:{reader:Pg.read},write:{isRequired:!0,writer:Pg.write}}})],Rg.prototype,"interactionMode",void 0),r([n({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const t=null!=this.stopInterval;return{enabled:!t,isRequired:!t}}}}})],Rg.prototype,"numStops",void 0),r([n({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],Rg.prototype,"stopInterval",void 0),Rg=zg=r([o("esri.webdoc.widgets.Range")],Rg);const Ng=Rg;var Bg;let Dg=Bg=class extends Le{constructor(t){super(t),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(t){if(!t)return;const e=null!=t[0]?new Date(t[0]):null,i=null!=t[1]?new Date(t[1]):null;return new ni({start:e,end:i})}writeCurrentTimeExtent(t,e,i){t&&ai(i,[c(t.start)?t.start.getTime():null,c(t.end)?t.end.getTime():null],e)}readFullTimeExtent(t,e){const i=e.properties;if(!i)return;const s=null!=i.endTime?new Date(i.endTime):null,r=null!=i.startTime?new Date(i.startTime):null;return new ni({start:r,end:s})}writeFullTimeExtent(t,e){if(!t)return;const i=e.properties=e.properties||{},s=t.end,r=t.start;s&&(i.endTime=c(s)?s.getTime():null),r&&(i.startTime=c(r)?r.getTime():null)}readStopInterval(t,e,i){return t?li.fromJSON({value:t.interval,unit:t.units},i):null}writeStopInterval(t,e,i,s){if(!t)return;const r=t.toJSON(s);ai(i,{interval:r.value,units:r.unit},e)}readStops(t){return t&&t.length?t.map((t=>new Date(t))):null}writeStops(t,e,i){t&&t.length&&ai(i,t.map((t=>t.getTime())),e)}clone(){return new Bg(y({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};r([n({type:ni,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],Dg.prototype,"currentTimeExtent",void 0),r([si("currentTimeExtent")],Dg.prototype,"readCurrentTimeExtent",null),r([oi("currentTimeExtent")],Dg.prototype,"writeCurrentTimeExtent",null),r([n({type:ni,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],Dg.prototype,"fullTimeExtent",void 0),r([si("fullTimeExtent")],Dg.prototype,"readFullTimeExtent",null),r([oi("fullTimeExtent")],Dg.prototype,"writeFullTimeExtent",null),r([n({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],Dg.prototype,"loop",void 0),r([n({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var t;const e=!(null==(t=this.stops)||!t.length),i=!(this.stopInterval||e);return{enabled:i,isRequired:i}}}}})],Dg.prototype,"numStops",void 0),r([n({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],Dg.prototype,"numThumbs",void 0),r([n({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],Dg.prototype,"stopDelay",void 0),r([n({type:li,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){var t;const e=!(null==(t=this.stops)||!t.length);return{enabled:!e,isRequired:!(null!=this.numStops||e)}}}}})],Dg.prototype,"stopInterval",void 0),r([si("stopInterval")],Dg.prototype,"readStopInterval",null),r([oi("stopInterval")],Dg.prototype,"writeStopInterval",null),r([n({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],Dg.prototype,"stops",void 0),r([si("stops")],Dg.prototype,"readStops",null),r([oi("stops")],Dg.prototype,"writeStops",null),Dg=Bg=r([o("esri.webdoc.widgets.TimeSlider")],Dg);const Gg=Dg;var Vg;let $g=Vg=class extends Le{constructor(t){super(t),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new Vg(y({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};r([n({type:Ng,json:{write:!0}})],$g.prototype,"range",void 0),r([n({type:Gg,json:{write:!0}})],$g.prototype,"timeSlider",void 0),r([n({type:Fg,json:{write:!0}})],$g.prototype,"floorFilter",void 0),$g=Vg=r([o("esri.webdoc.Widgets")],$g);const qg=$g,Hg={width:600,height:400},Ug=1.5;function Wg(t,e){e=e||Hg;let{width:i,height:s}=e;const r=i/s;return r<Ug?s=i/Ug:r>Ug&&(i=s*Ug),i>t.width&&(s*=t.width/i,i=t.width),s>t.height&&(i*=t.height/s,s=t.height),{width:Math.round(i),height:Math.round(s)}}function Jg(t){return{enabled:!(null==t||!t.length)}}var Yg;let Kg=Yg=class extends Le{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Yg({exactMatch:this.exactMatch,type:this.type,name:this.name})}};r([n({type:Boolean,json:{write:!0}})],Kg.prototype,"exactMatch",void 0),r([n({type:String,json:{write:!0}})],Kg.prototype,"name",void 0),r([hi(ui)],Kg.prototype,"type",void 0),Kg=Yg=r([o("esri.webdoc.applicationProperties.SearchLayerField")],Kg);const Qg=Kg;var Zg;let Xg=Zg=class extends Le{constructor(t){super(t),this.field=null,this.id=null,this.subLayer=null}clone(){return new Zg(y({field:this.field,id:this.id,subLayer:this.subLayer}))}};r([n({type:Qg,json:{write:{isRequired:!0}}})],Xg.prototype,"field",void 0),r([n({type:String,json:{write:{isRequired:!0}}})],Xg.prototype,"id",void 0),r([n({type:ci,json:{write:!0}})],Xg.prototype,"subLayer",void 0),Xg=Zg=r([o("esri.webdoc.applicationProperties.SearchLayer")],Xg);const tv=Xg;var ev;let iv=ev=class extends Le{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new ev({exactMatch:this.exactMatch,type:this.type,name:this.name})}};r([n({type:Boolean,json:{write:!0}})],iv.prototype,"exactMatch",void 0),r([n({type:String,json:{write:!0}})],iv.prototype,"name",void 0),r([hi(ui)],iv.prototype,"type",void 0),iv=ev=r([o("esri.webdoc.applicationProperties.SearchTableField")],iv);const sv=iv;var rv;let nv=rv=class extends Le{constructor(t){super(t),this.field=null,this.id=null}clone(){return new rv(y({field:this.field,id:this.id}))}};r([n({type:sv,json:{write:{isRequired:!0}}})],nv.prototype,"field",void 0),r([n({type:String,json:{write:{isRequired:!0}}})],nv.prototype,"id",void 0),nv=rv=r([o("esri.webdoc.applicationProperties.SearchTable")],nv);const ov=nv;var lv;const av=J.ofType(tv),hv=J.ofType(ov);let uv=lv=class extends Le{constructor(t){super(t),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new av,this.tables=new hv}readAddressSearchEnabled(t){return!t}writeAddressSearchEnabled(t,e,i){e[i]=!t}clone(){return new lv(y({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};r([n({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],uv.prototype,"addressSearchEnabled",void 0),r([si("addressSearchEnabled")],uv.prototype,"readAddressSearchEnabled",null),r([oi("addressSearchEnabled")],uv.prototype,"writeAddressSearchEnabled",null),r([n({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],uv.prototype,"enabled",void 0),r([n({type:String,json:{write:!0}})],uv.prototype,"hintText",void 0),r([n({type:av,json:{write:{overridePolicy:Jg},origins:{"web-scene":{write:{isRequired:!0}}}}})],uv.prototype,"layers",void 0),r([n({type:hv,json:{read:!0,write:{overridePolicy:Jg}}})],uv.prototype,"tables",void 0),uv=lv=r([o("esri.webdoc.applicationProperties.Search")],uv);const cv=uv;var dv;let pv=dv=class extends Le{constructor(t){super(t),this.search=null}clone(){return new dv(y({search:this.search}))}};r([n({type:cv,json:{write:!0}})],pv.prototype,"search",void 0),pv=dv=r([o("esri.webdoc.applicationProperties.Viewing")],pv);const mv=pv;var fv;let gv=fv=class extends Le{constructor(t){super(t),this.editing=null,this.offline=null,this.viewing=null}clone(){return new fv(y({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};r([n({json:{write:!0}})],gv.prototype,"editing",void 0),r([n({json:{write:!0}})],gv.prototype,"offline",void 0),r([n({type:mv,json:{write:!0}})],gv.prototype,"viewing",void 0),gv=fv=r([o("esri.webmap.ApplicationProperties")],gv);const vv=gv;var yv;let wv=yv=class extends Le{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}clone(){return new yv({url:this.url})}};r([n({type:String,json:{write:{isRequired:!0}}})],wv.prototype,"url",void 0),wv=yv=r([o("esri.webdoc.support.Thumbnail")],wv);const bv=wv;var _v;const Av="esri.webmap.Bookmark",xv=K.getLogger(Av);let Sv=_v=class extends(Oe(Le)){constructor(t){super(t),this.name=null,this.thumbnail=new bv}set extent(t){Ge(xv,"extent",{replacement:"viewpoint",version:"4.17"}),this._set("viewpoint",new di({targetGeometry:t.clone()})),this._set("extent",t)}castThumbnail(t){return"string"==typeof t?new bv({url:t}):Pe(bv,t)}set viewpoint(t){const{targetGeometry:e,scale:i}=t;c(e)&&("extent"===e.type?this._set("extent",e.clone()):"point"===e.type&&E(i)&&xv.warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",t)),this._set("viewpoint",t)}readViewpoint(t,e){const{extent:i,viewpoint:s}=e;return di.fromJSON(s||{targetGeometry:i})}writeViewpoint(t,e,i,s){if(!t)return;const{targetGeometry:r}=t;if(c(r)&&"extent"!==r.type){const t="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";null!=s&&s.messages?s.messages.push(new v("property:unsupported",t)):xv.error(t)}else e[i]=t.toJSON()}clone(){return new _v(y({name:this.name,thumbnail:this.thumbnail,viewpoint:this.viewpoint}))}};r([n({type:M,nonNullable:!0,json:{read:!1,write:{isRequired:!0}}})],Sv.prototype,"extent",null),r([n({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Sv.prototype,"name",void 0),r([n({type:bv,json:{write:{overridePolicy:t=>({enabled:!(!t||!t.url)})}}})],Sv.prototype,"thumbnail",void 0),r([tt("thumbnail")],Sv.prototype,"castThumbnail",null),r([n({type:di,nonNullable:!0,json:{write:!0}})],Sv.prototype,"viewpoint",null),r([si("viewpoint",["extent","viewpoint"])],Sv.prototype,"readViewpoint",null),r([oi("viewpoint")],Sv.prototype,"writeViewpoint",null),Sv=_v=r([o(Av)],Sv);const Cv=Sv;var kv;let Iv=kv=class extends l{constructor(t){super(t),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.viewpoint=null}clone(){return new kv(y({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))}};r([n({type:pi})],Iv.prototype,"background",void 0),r([n({type:jg})],Iv.prototype,"rangeInfo",void 0),r([n({type:_})],Iv.prototype,"spatialReference",void 0),r([n({type:di})],Iv.prototype,"viewpoint",void 0),Iv=kv=r([o("esri.webmap.InitialViewProperties")],Iv);const Mv=Iv;class Tv extends Ji{constructor(t,e){super(t,e,"webmap")}}const Ev=new Tv(2,23),jv="Web Map",Ov=J.ofType(Cv),Lv=J.ofType(bg),Fv=K.getLogger("esri.WebMap"),zv=new Map;zv.set("image/jpeg","jpeg"),zv.set("image/jpg","jpg"),zv.set("image/png","png"),zv.set("image/gif","gif");const Pv="ArcGIS API for JavaScript",Rv="CollectorDisabled",Nv="Collector",Bv="Data Editing",Dv="OfflineDisabled",Gv="Offline",Vv="Workforce Project",$v="Workforce Worker",qv="Workforce Dispatcher",Hv="DeveloperBasemap",Uv=["NatGeo_World_Map","Ocean_Basemap","USA_Topo_Maps","World_Imagery","World_Street_Map","World_Terrain_Base","World_Topo_Map","World_Hillshade","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Reference/World_Boundaries_and_Places","Reference/World_Reference_Overlay","Reference/World_Transportation"].map((t=>t.toLowerCase()));let Wv=class extends(ti(Q.LoadableMixin(Z(Ii)))){constructor(t){super(t),this.applicationProperties=null,this.bookmarks=new Ov,this.floorInfo=null,this.initialViewProperties=new Mv,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.utilityNetworks=null,this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){const t=this.portalItem;this.portalItem=null,null==t||t.destroy()}initialize(){if(this.when().catch((t=>{Fv.error("#load()","Failed to load web map",t)})),this.resourceInfo){let t;try{t=this._validateJSON(this.resourceInfo)}catch(t){return void this.addResolvingPromise(Promise.reject(t))}this.read(t)}}set authoringApp(t){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",t)}writeAuthoringApp(t,e){e.authoringApp=t&&this._isAuthoringAppSetByUser?t:Pv}set authoringAppVersion(t){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",t)}writeAuthoringAppVersion(t,e){e.authoringAppVersion=t&&this._isAuthoringAppVersionSetByUser?t:mi}readInitialViewProperties(t,e){var i;const s=new Mv;e.background&&(s.background=pi.fromJSON(e.background));const r=null==(i=e.initialState)?void 0:i.viewpoint;return r&&(r.rotation&&Tv.parse(e.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===e.authoringApp&&(r.rotation*=-1),s.viewpoint=di.fromJSON(r)),e.mapRangeInfo&&(s.rangeInfo=jg.fromJSON(e.mapRangeInfo)),e.spatialReference&&(s.spatialReference=_.fromJSON(e.spatialReference)),s}writeInitialViewProperties(t,e,i,s){if(!t)return;const r=t.background;r&&r.color&&(e.background=r.write({},s)),t.viewpoint&&(e.initialState={viewpoint:t.viewpoint.write({},s)}),t.rangeInfo&&(e.mapRangeInfo=t.rangeInfo.toJSON(s)),t.spatialReference&&(e.spatialReference=t.spatialReference.write({},s))}writeLayers(t,e,i,s){e[i]=this._writeLayers(t,s,"operational-layers")}readSourceVersion(t,e){const[i,s]=e.version.split(".");return new Tv(parseInt(i,10),parseInt(s,10))}writeSourceVersion(t,e,i){e[i]=`${Ev.major}.${Ev.minor}`}writeTables(t,e,i,s){const r=this._writeLayers(t,s,"tables");r.length&&(e[i]=r)}get thumbnailUrl(){return this.portalItem&&this.portalItem.thumbnailUrl||null}set thumbnailUrl(t){t?(this._override("thumbnailUrl",t),this._thumbnailFilename=this._generateCustomThumbnailFilename(t)):this._clearThumbnailOverride()}load(t){return this.addResolvingPromise(this._loadFromSource()),Promise.resolve(this)}loadAll(){return fi(this,(t=>{t(this.ground,this.basemap,this.layers,this.tables)}))}read(t,e){e={...e,origin:"web-map"};const i=this._getAuthoringPropsState();gi(this,t,(e=>super.read(t,e)),e),this._restoreAuthoringPropsFromState(i)}write(t,e){if("loaded"!==this.loadStatus){const t=new v("webmap:not-loaded","Web map must be loaded before it can be serialized");throw Fv.error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),t}return this._removeDanglingLayerRefs(),e={...e,origin:"web-map",restrictedWebMapWriting:!0,webmap:this},super.write(t,e)}async save(t){t=t||{},this._validateItem(),await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),this._validateMap();const e=this.portalItem,i={origin:"web-map",messages:[],writtenProperties:[],url:e.itemUrl&&ei(e.itemUrl),portal:e.portal||X.getDefault()},s=this.write({},i);return this._validateJSONForWriting(i,t),await this._updateItemProperties(e),await this._updateItem(e,s,i),await this._updateItemThumbnail(),e}async saveAs(t,e){e=e||{};const i=this._getPortalItem(t);await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),this._validateMap();const s={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:i.portal},r=this.write({},s);this._validateJSONForWriting(s,e),await this._updateItemPropertiesForSaveAs(i);const n=this._getThumbnailState();return await this._createItem(i,r,s,e),this._restoreThumbnailFromState(n),await this._updateItemThumbnail(),i}async updateFrom(t,e){const i=this._updateFromInternal(t,e);this._updateFromPromise=i,await i,i===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(t){var e,i,s,r;const n=this.resourceInfo;return this._collectAllLayersJSON(vi([null==n||null==(e=n.baseMap)?void 0:e.baseMapLayers,null==n?void 0:n.operationalLayers,null==(i=this.basemap)||null==(s=i.resourceInfo)||null==(r=s.data)?void 0:r.baseMapLayers])).find((e=>e.id===t.id))}_collectAllLayersJSON(t){return t.reduce(((t,e)=>(t.push(e),"GroupLayer"===e.layerType&&(t=t.concat(this._collectAllLayersJSON(e.layers||[]))),t)),[])}_writeLayers(t,e,i){return e={...e,layerContainerType:i},t.map((t=>F(yi(t,"tables"===i?null:this.getLayerJSONFromResourceInfo(t),e)))).filter(Boolean).toArray()}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve(null)}_loadFromItem(t){return t.load().catch((t=>{throw new v("webmap:load-portal-item","Failed to load portal item",{error:t})})).then((()=>{if("Web Map"!==t.type)throw new v("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:t.type})})).then((()=>t.fetchData())).then((e=>(this.resourceInfo=e,this._readAndLoadFromJSON(e,{origin:"web-map",portal:t.portal||X.getDefault()})))).then((()=>this._computeInitialViewpoint()))}_readAndLoadFromJSON(t,e){const i=this._validateJSON(t);return this.read(i,e),this._loadFromJSON(i,e)}_validateJSON(t){const e=Tv.parse(t.version||"","webmap");return Ev.validate(e),t.version=`${e.major}.${e.minor}`,t}_loadFromJSON(t,e){const i={context:{...e,layerContainerType:"operational-layers"}};return this.portalItem&&(i.context.portal=this.portalItem.portal||X.getDefault()),import("./p-6e889b5e.js").then((({populateOperationalLayers:e})=>{const s=[],r=t.operationalLayers;r&&r.length&&s.push(e(this.layers,r,i));const n={...i,context:{...i.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},o=t.tables;return o&&o.length&&s.push(e(this.tables,o,n)),ye(s).then((()=>{}))}))}async _computeInitialViewpoint(){var t,e;let i=this.initialViewProperties;if(null==(t=i)||null==(e=t.viewpoint)?void 0:e.targetGeometry)return;const s=await this._getExtentFromItem();s&&(i=i?i.clone():new Mv,i.viewpoint=new di,i.viewpoint.targetGeometry=s,this.initialViewProperties=i)}async _getExtentFromItem(){var t,e;const i=null==(t=this.initialViewProperties)?void 0:t.spatialReference,s=null==(e=this.portalItem)?void 0:e.extent;return i&&s?i.isWGS84?s.clone():i.isWebMercator?$e(s):(await import("./p-38a59446.js")).getGeometryServiceURL(this.portalItem).then((t=>{const e=new Vi;return e.geometries=[s],e.outSpatialReference=i,$i(t,e)})).then((t=>t[0])).catch((t=>(Fv.error("Error projecting item's extent:",t),null))):null}_removeDanglingLayerRefs(){const t=this.applicationProperties,e=t&&t.viewing&&t.viewing.search,i=t=>!!this.allLayers.find((e=>e.id===t));e&&e.layers&&(e.layers=e.layers.filter((t=>i(t.id)))),e&&e.tables&&(e.tables=e.tables.filter((t=>!!this.tables.find((e=>e.id===t.id)))));const s=t&&t.editing&&t.editing.locationTracking;s&&s.info&&!i(s.info.layerId)&&(t.editing=null);const r=this.presentation&&this.presentation.slides;r&&r.forEach((t=>{t.visibleLayers&&(t.visibleLayers=t.visibleLayers.filter((t=>i(t.id))))}))}_validateMap(){if(!this.basemap||!this.basemap.baseLayers.length)throw new v("webmap:save","Map does not have a valid basemap with a base layer.")}_validateItem(){if(!this.portalItem)throw Fv.error("save: requires the portalItem property to be set"),new v("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)}_validateItemType(t){if(t.type!==jv)throw new v("webmap:portal-item-wrong-type",`Portal item needs to have type "${jv}"`)}_loadLayerContainers(){const t=[];return this.basemap&&t.push(this.basemap.load()),this.ground&&t.push(this.ground.load()),ye(t).then((()=>{}))}async _beforeSave(){const t=[];for(const e of this.allLayers)if("beforeSave"in e&&"function"==typeof e.beforeSave){const i=e.beforeSave();i&&t.push(i)}await ye(t)}_loadAllLayers(){const t=this._getAllLayersAndTables().map((t=>t.load()));return ye(t).then((()=>{}))}_getAllLayersAndTables(){return this.allLayers.concat(this.allTables)}_validateJSONForWriting(t,e){let i=t.messages.filter((t=>"error"===t.type)).map((t=>new v(t.name,t.message,t.details)));if(e.ignoreUnsupported&&(i=i.filter((t=>"layer:unsupported"!==t.name&&"symbol:unsupported"!==t.name&&"symbol-layer:unsupported"!==t.name&&"property:unsupported"!==t.name&&"url:unsupported"!==t.name))),i.length>0)throw new v("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:i})}async _updateItemProperties(t){t.extent=await this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry),await this._updateTypeKeywords(t)}async _updateItemPropertiesForSaveAs(t){Hi(t,Rv),Hi(t,Dv),Hi(t,Vv),Hi(t,$v),Hi(t,qv),Hi(t,"Offline Map Areas"),Hi(t,"FieldMapsDisabled"),await this._updateItemProperties(t)}async _getWGS84Extent(t){const e=t.clone().normalize();let i;if(e.length>1)for(const t of e)i?t.width>i.width&&(i=t):i=t;else i=e[0];return this._projectToWGS84(i)}async _projectToWGS84(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return wi(t);const i=await import("./p-38a59446.js"),s=await i.getGeometryServiceURL(this.portalItem),r=new Vi;return r.geometries=[t],r.outSpatialReference=_.WGS84,(await $i(s,r))[0]}async _updateTypeKeywords(t){Ui(t,Pv),await this._loadAllLayers(),this._evalCollectorKeyword(t),this._evalDataEditingKeyword(t),this._evalOfflineKeyword(t),this._evalDeveloperBasemapKeyword(t),t.typeKeywords&&(t.typeKeywords=t.typeKeywords.filter(((t,e,i)=>i.indexOf(t)===e)))}_evalCollectorKeyword(t){Wi(t,Rv)||Wi(t,Vv)||Wi(t,$v)||Wi(t,qv)||!this._hasEditableFeatureLayer()?Hi(t,Nv):Ui(t,Nv)}_evalDataEditingKeyword(t){this._hasEditableFeatureLayer()?Ui(t,Bv):Hi(t,Bv)}_evalOfflineKeyword(t){!Wi(t,Dv)&&this._isOfflineCapableMap()?Ui(t,Gv):Hi(t,Gv)}_evalDeveloperBasemapKeyword(t){bi(this.basemap)?Ui(t,Hv):Hi(t,Hv)}_hasEditableFeatureLayer(){return this._getAllLayersAndTables().some((t=>t.loaded&&this._isFeatureServiceLayer(t)&&t.capabilities.operations.supportsEditing&&t.editingEnabled))}_isFeatureServiceLayer(t){return!("feature"!==t.type||!t.source||"feature-layer"!==t.source.type)}_isOfflineCapableMap(){return this._getAllLayersAndTables().filter((t=>"group"!==t.type)).every((t=>t.loaded&&this._isOfflineCapableLayer(t)))}_isOfflineCapableLayer(t){return this._isFeatureServiceLayer(t)&&t.capabilities.operations.supportsSync||("tile"===t.type||"vector-tile"===t.type)&&(t.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(t)||_i(t))&&t.spatialReference.equals(this.initialViewProperties.spatialReference)}_isExportableAGOLTileLayer(t){return"tile"===t.type&&Ai(t.url)&&Uv.some((e=>t.url.toLowerCase().indexOf("/"+e+"/")>-1))}async _updateItem(t,e,i){await t.update({data:e}),this._syncUpInstanceWithItem(t,e,i)}async _createItem(t,e,i,s){const r=this.portalItem,n=!!(r&&r.id&&r.portal.user),o=t.portal;if(await o._signIn(),!await this._canCopyItem(r,n,o))throw new v("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");await o.user.addItem({item:t,folder:s.folder,data:e}),this.portalItem=t,this._syncUpInstanceWithItem(t,e,i)}async _canCopyItem(t,e,i){return!(c(t)&&t.id&&t.typeKeywords&&t.typeKeywords.indexOf("useOnly")>-1)||t.portal.portalHostname===i.portalHostname&&(e||await t.reload(),"admin"===t.itemControl||"update"===t.itemControl)}_syncUpInstanceWithItem(t,e,i){ri.prototype.read.call(this,{version:e.version,authoringApp:e.authoringApp,authoringAppVersion:e.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:t.itemUrl&&ei(t.itemUrl)}),qi(i),this.resourceInfo=e}async _updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())}_getPortalItem(t){let e=xi.from(t);return e.id&&(e=e.clone(),e.id=null),e.type||(e.type=jv),e.portal||(e.portal=X.getDefault()),this._validateItemType(e),e}async _updateFromInternal(t,e){if(e=e||{},await dt(t,"ready"),this._updateInitialViewProperties(t,e),t.map===this)for(const e of t.allLayerViews)for(const t of["visible","featureEffect"])t in e&&t in e.layer&&e._isOverridden(t)&&(e.layer[t]=e[t]);await this._updateThumbnailUrl(t,e)}_updateInitialViewProperties(t,e){var i;if(e.backgroundExcluded||(this.initialViewProperties.background=null==(i=t.background)?void 0:i.clone()),this.initialViewProperties.spatialReference=t.spatialReference.clone(),e.viewpointExcluded||(this.initialViewProperties.viewpoint=new di({rotation:t.rotation,scale:e.scalePreserved?t.scale:null,targetGeometry:this._getViewExtent(t)})),!e.widgetsExcluded)for(const e of t.persistableViewModels)e.updateWebDocument(this)}_getViewExtent(t){const e=t.center.clone().normalize(),i=t.extent.clone(),s=i.width/2;return i.xmin=e.x-s,i.xmax=e.x+s,i}async _updateThumbnailUrl(t,e){if(e.thumbnailExcluded)return;const i=Wg(t,e.thumbnailSize),s=await t.takeScreenshot({format:"png",width:i.width,height:i.height});this._setAutoGeneratedThumbnail(s.dataUrl)}_setAutoGeneratedThumbnail(t){this.thumbnailUrl=t,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(t){if(Si(t)){const e=Ci(t),i=e&&e.mediaType,s=i&&zv.get(i.toLowerCase())||null,r=`thumbnail${Date.now()}`;return s?`${r}.${s}`:r}return null}_getThumbnailState(){let t=this.thumbnailUrl;return t&&(t=this._isOverridden("thumbnailUrl")?t:ki(t,"w","8192")),{thumbnailUrl:t,filename:this._thumbnailFilename}}_restoreThumbnailFromState(t){this.thumbnailUrl=t.thumbnailUrl,this._thumbnailFilename=t.filename}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(t){t.isAuthoringAppSetByUser?this.authoringApp=t.authoringApp:this._isAuthoringAppSetByUser=!1,t.isAuthoringAppVersionSetByUser?this.authoringAppVersion=t.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}static fromJSON(t){const e=t;if(!e)throw new v("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:e})}};Wv.VERSION=Ev,r([n({type:vv,json:{write:!0}})],Wv.prototype,"applicationProperties",void 0),r([n({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Wv.prototype,"authoringApp",null),r([oi("authoringApp")],Wv.prototype,"writeAuthoringApp",null),r([n({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Wv.prototype,"authoringAppVersion",null),r([oi("authoringAppVersion")],Wv.prototype,"writeAuthoringAppVersion",null),r([n({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Wv.prototype,"basemap",void 0),r([n({type:Ov,json:{write:{overridePolicy:t=>({enabled:!!(t&&t.length>0),ignoreOrigin:!0})}}})],Wv.prototype,"bookmarks",void 0),r([n({type:Mg,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],Wv.prototype,"floorInfo",void 0),r([n({type:Mv,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:pi},"initialState.viewpoint":{type:di},mapRangeInfo:{type:jg},spatialReference:{type:_}}}}})],Wv.prototype,"initialViewProperties",void 0),r([si("initialViewProperties")],Wv.prototype,"readInitialViewProperties",null),r([oi("initialViewProperties")],Wv.prototype,"writeInitialViewProperties",null),r([n({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],Wv.prototype,"layers",void 0),r([oi("layers")],Wv.prototype,"writeLayers",null),r([n({type:xi})],Wv.prototype,"portalItem",void 0),r([n({json:{write:!0}})],Wv.prototype,"presentation",void 0),r([n()],Wv.prototype,"resourceInfo",void 0),r([n({readOnly:!0,type:Tv,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],Wv.prototype,"sourceVersion",void 0),r([si("sourceVersion")],Wv.prototype,"readSourceVersion",null),r([oi("sourceVersion")],Wv.prototype,"writeSourceVersion",null),r([n({json:{read:!1,write:{ignoreOrigin:!0}}})],Wv.prototype,"tables",void 0),r([oi("tables")],Wv.prototype,"writeTables",null),r([n()],Wv.prototype,"thumbnailUrl",null),r([n({type:qg,json:{write:!0}})],Wv.prototype,"widgets",void 0),r([n({type:Lv,json:{read:!0,write:!0}})],Wv.prototype,"utilityNetworks",void 0),Wv=r([o("esri.WebMap")],Wv);const Jv=Wv;let Yv=class{constructor(i){t(this,i),this.loaded=e(this,"loaded",7)}validateApiKey(t){qe.apiKey=t}validateItemId(t,e){t&&t!==e&&this.loadMap()}componentWillLoad(){this.apiKey&&(qe.apiKey=this.apiKey),this.itemId&&this.loadMap()}componentDidRender(){const t=this.el.querySelector(".esri-view-user-storage");if(t){const e=Array.from(t.children);for(let t of e)t.tagName.toLowerCase().includes("arcgis-")&&(t.view=this.view)}}loadMap(){const t=new Jv({portalItem:{id:this.itemId}}),e={};this.zoom&&(e.zoom=this.zoom),this.center&&(e.center="string"==typeof this.center?this.center.split(",").map((t=>Number(t))):this.center);const i=new Mi(Object.assign({container:this.el,map:t},e));this.view=i,i.when((()=>this.loaded.emit(!0)))}render(){return s("div",{class:"map-view"})}get el(){return i(this)}static get watchers(){return{apiKey:["validateApiKey"],itemId:["validateItemId"]}}};Yv.style="@import url('https://js.arcgis.com/next/esri/themes/light/main.css');.map-view{padding:0;margin:0}";export{Es as arcgis_basemap_gallery,zs as arcgis_expand,Ld as arcgis_feature_table,Om as arcgis_legend,Lm as arcgis_portal,sg as arcgis_search,Yv as arcgis_webmap}