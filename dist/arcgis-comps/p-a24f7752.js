import{s as t,a4 as n,e,d as r,i}from"./p-e58503d5.js";import{l as o,a as u,i as s,r as c,o as a}from"./p-74de0937.js";import{e as f}from"./p-fb38a9d0.js";import{o as l,s as h}from"./p-ccdb8e80.js";function p(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}const d=p();Object.freeze({__proto__:null,create:p,clone:function(t){const n=new Float32Array(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},fromValues:function(t,n,e,r,i,o,u,s,c,a,f,l,h,p,d,w){const g=new Float32Array(16);return g[0]=t,g[1]=n,g[2]=e,g[3]=r,g[4]=i,g[5]=o,g[6]=u,g[7]=s,g[8]=c,g[9]=a,g[10]=f,g[11]=l,g[12]=h,g[13]=p,g[14]=d,g[15]=w,g},createView:function(t,n){return new Float32Array(t,n,16)},IDENTITY:d});class w{constructor(t,n,e){this.strength=t,this.radius=n,this.threshold=e,this.type="bloom"}interpolate(t,n,e){this.strength=x(t.strength,n.strength,e),this.radius=x(t.radius,n.radius,e),this.threshold=x(t.threshold,n.threshold,e)}clone(){return new w(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:$(this.radius),strength:this.strength,threshold:this.threshold}}}class g{constructor(t){this.radius=t,this.type="blur"}interpolate(t,n,e){this.radius=Math.round(x(t.radius,n.radius,e))}clone(){return new g(this.radius)}toJSON(){return{type:"blur",radius:$(this.radius)}}}class v{constructor(t,n){this.type=t,this.amount=n,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,n,e){this.amount=x(t.amount,n.amount,e),this._updateMatrix()}clone(){return new v(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||p();switch(this.type){case"brightness":this._colorMatrix=((t,n)=>{const e=h(t,n,0,0,0,0,n,0,0,0,0,n,0,0,0,0,1);return l(e,e)})(t,this.amount);break;case"contrast":this._colorMatrix=((t,n)=>{const e=h(t,n,0,0,.5-.5*n,0,n,0,.5-.5*n,0,0,n,.5-.5*n,0,0,0,1);return l(e,e)})(t,this.amount);break;case"grayscale":this._colorMatrix=(t=>{const n=1-this.amount,e=h(t,.2126+.7874*n,.7152-.7152*n,.0722-.0722*n,0,.2126-.2126*n,.7152+.2848*n,.0722-.0722*n,0,.2126-.2126*n,.7152-.7152*n,.0722+.9278*n,0,0,0,0,1);return l(e,e)})(t);break;case"invert":this._colorMatrix=((t,n)=>{const e=1-2*n,r=h(t,e,0,0,n,0,e,0,n,0,0,e,n,0,0,0,1);return l(r,r)})(t,this.amount);break;case"saturate":this._colorMatrix=((t,n)=>{const e=h(t,.213+.787*n,.715-.715*n,.072-.072*n,0,.213-.213*n,.715+.285*n,.072-.072*n,0,.213-.213*n,.715-.715*n,.072+.928*n,0,0,0,0,1);return l(e,e)})(t,this.amount);break;case"sepia":this._colorMatrix=(t=>{const n=1-this.amount,e=h(t,.393+.607*n,.769-.769*n,.189-.189*n,0,.349-.349*n,.686+.314*n,.168-.168*n,0,.272-.272*n,.534-.534*n,.131+.869*n,0,0,0,0,1);return l(e,e)})(t)}}}class m{constructor(t,n,e,r){this.offsetX=t,this.offsetY=n,this.blurRadius=e,this.color=r,this.type="drop-shadow"}interpolate(t,n,e){this.offsetX=x(t.offsetX,n.offsetX,e),this.offsetY=x(t.offsetY,n.offsetY,e),this.blurRadius=x(t.blurRadius,n.blurRadius,e),this.color[0]=Math.round(x(t.color[0],n.color[0],e)),this.color[1]=Math.round(x(t.color[1],n.color[1],e)),this.color[2]=Math.round(x(t.color[2],n.color[2],e)),this.color[3]=x(t.color[3],n.color[3],e)}clone(){return new m(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:$(this.offsetX),yoffset:$(this.offsetY),blurRadius:$(this.blurRadius),color:t}}}class y{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,n,e){this.angle=x(t.angle,n.angle,e),this._updateMatrix()}clone(){return new y(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||p();this._colorMatrix=((t,n)=>{const e=Math.sin(n*Math.PI/180),r=Math.cos(n*Math.PI/180),i=h(t,.213+.787*r-.213*e,.715-.715*r-.715*e,.072-.072*r+.928*e,0,.213-.213*r+.143*e,.715+.285*r+.14*e,.072-.072*r-.283*e,0,.213-.213*r-.787*e,.715-.715*r+.715*e,.072+.928*r+.072*e,0,0,0,0,1);return l(i,i)})(t,this.angle)}}class b{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,n,e){this.amount=x(t.amount,n.amount,e)}clone(){return new b(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function x(t,n,e){return t+(n-t)*e}function $(t){return Math.round(1e3*f(t))/1e3}function M(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new v(t.type,0);case"saturate":case"brightness":case"contrast":return new v(t.type,1);case"opacity":return new b(1);case"hue-rotate":return new y(0);case"blur":return new g(0);case"drop-shadow":return new m(0,0,0,[...o("transparent")]);case"bloom":return new w(0,0,0)}}function F(t,n){const e=t.length>n.length?t:n;return(t.length>n.length?n:t).every(((t,n)=>t.type===e[n].type))}function A(t,n){const e=t.length>n.length?t:n,r=t.length>n.length?n:t;for(let t=r.length;t<e.length;t++)r.push(M(e[t]))}var k,E={exports:{}};function j(n){if(!n||0===n.length)return null;if("string"==typeof n){const t=N(n);return t&&0!==t.length?t:null}const e=n.map((n=>{if(!Number.isFinite(n.scale)||n.scale<=0)throw new t("effect:invalid-scale","scale must be finite and greater than 0",{stop:n});return{scale:n.scale,effects:N(n.value)}}));e.sort(((t,n)=>n.effects.length-t.effects.length));for(let n=0;n<e.length-1;n++){if(!F(e[n].effects,e[n+1].effects))throw new t("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[n].effects,b:e[n+1].effects});A(e[n].effects,e[n+1].effects)}return e.sort(((t,n)=>n.scale-t.scale)),e}function N(n){let e;if(!n)return[];try{e=E.exports.parse(n)}catch(e){throw new t("effect:invalid-syntax","Invalid effect syntax",{value:n,error:e})}return e.map((n=>function(n){try{switch(n.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return function(t){let n=1;return O(t.parameters,1),1===t.parameters.length&&(n=C(t.parameters[0])),new v(t.name,n)}(n);case"opacity":return function(t){let n=1;return O(t.parameters,1),1===t.parameters.length&&(n=C(t.parameters[0])),new b(n)}(n);case"hue-rotate":return function(n){let e=0;return O(n.parameters,1),1===n.parameters.length&&(e=function(n){return function(n){if("quantity"!==n.type||!(0===n.value&&null===n.unit||n.unit&&null!=_[n.unit]))throw new t("effect:type-error",`Expected <angle>, Actual: ${S(n)}`,{term:n})}(n),n.value*_[n.unit]||0}(n.parameters[0])),new y(e)}(n);case"blur":return function(t){let n=0;return O(t.parameters,1),1===t.parameters.length&&(n=I(t.parameters[0]),J(n,t.parameters[0])),new g(n)}(n);case"drop-shadow":return function(n){const e=[];let r=null;for(const i of n.parameters)if("color"===i.type){if(e.length&&Object.freeze(e),r)throw new t("effect:type-error","Accepts only one color",{});r=R(i)}else{const n=I(i);if(Object.isFrozen(e))throw new t("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(n),3===e.length&&J(n,i)}if(e.length<2||e.length>3)throw new t("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new m(e[0],e[1],e[2]||0,r||T("black"))}(n);case"bloom":return function(t){let n=1,e=0,r=0;return O(t.parameters,3),t.parameters[0]&&(n=C(t.parameters[0])),t.parameters[1]&&(e=I(t.parameters[1]),J(e,t.parameters[1])),t.parameters[2]&&(r=C(t.parameters[2])),new w(n,e,r)}(n)}}catch(t){throw t.details.filter=n,t}throw new t("effect:unknown-effect",`Effect '${n.name}' is not supported`,{effect:n})}(n)))}function O(n,e){if(n.length>e)throw new t("effect:type-error",`Function supports up to ${e} parameters, Actual: ${n.length}`,{parameters:n})}function S(t){if("color"===t.type)return"<color>";if(t.unit){if(q[t.unit])return"<length>";if(_[t.unit])return"<angle>";if("%"===t.unit)return"<percentage>"}return"<double>"}function J(n,e){if(n<0)throw new t("effect:type-error",`Negative values are not allowed, Actual: ${n}`,{term:e})}(k=E).exports&&(k.exports=function(){function t(n,e,r,i){var o=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(o,t.prototype),o.expected=e,o.found=r,o.location=i,o.name="SyntaxError",o}function n(t,n,e){return e=e||" ",t.length>n?t:t+(e+=e.repeat(n-=t.length)).slice(0,n)}return function(t,n){function e(){this.constructor=t}e.prototype=n.prototype,t.prototype=new e}(t,Error),t.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var r,i=null;for(r=0;r<t.length;r++)if(t[r].source===this.location.source){i=t[r].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,u=this.location.source+":"+o.line+":"+o.column;if(i){var s=this.location.end,c=n("",o.line.toString().length),a=i[o.line-1],f=o.line===s.line?s.column:a.length+1;e+="\n --\x3e "+u+"\n"+c+" |\n"+o.line+" | "+a+"\n"+c+" | "+n("",o.column-1)+n("",f-o.column,"^")}else e+="\n at "+u}return e},t.buildMessage=function(t,n){var e={literal:function(t){return'"'+i(t.text)+'"'},class:function(t){var n=t.parts.map((function(t){return Array.isArray(t)?o(t[0])+"-"+o(t[1]):o(t)}));return"["+(t.inverted?"^":"")+n+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function i(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function u(t){return e[t.type](t)}return"Expected "+function(t){var n,e,r=t.map(u);if(r.sort(),r.length>0){for(n=1,e=1;n<r.length;n++)r[n-1]!==r[n]&&(r[e]=r[n],e++);r.length=e}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(t)+" but "+function(t){return t?'"'+i(t)+'"':"end of input"}(n)+" found."},{SyntaxError:t,parse:function(n,e){var r,i={},o=(e=void 0!==e?e:{}).grammarSource,u={start:ut},s=ut,c="none",a="grad",f="turn",l=/^[ \t\n\r]/,h=/^[a-z\-]/,p=/^[0-9a-fA-F]/,d=/^[+\-]/,w=/^[0-9]/,g=rt("none"),v=nt("none",!1),m=nt(")",!1),y=nt(",",!1),b=rt("whitespace"),x=et([" ","\t","\n","\r"],!1,!1),$=rt("function"),M=nt("(",!1),F=rt("identifier"),A=et([["a","z"],"-"],!1,!1),k=rt("percentage"),E=nt("%",!1),j=rt("length"),N=nt("px",!1),O=nt("cm",!1),S=nt("mm",!1),J=nt("in",!1),_=nt("pt",!1),q=nt("pc",!1),C=rt("angle"),I=nt("deg",!1),R=nt("rad",!1),T=nt("grad",!1),z=nt("turn",!1),B=rt("number"),V=rt("color"),D=nt("#",!1),L=et([["0","9"],["a","f"],["A","F"]],!1,!1),Y=et(["+","-"],!1,!1),G=et([["0","9"]],!1,!1),H=nt(".",!1),K=nt("e",!1),P=0,Q=0,U=[{line:1,column:1}],W=0,X=[],Z=0;if("startRule"in e){if(!(e.startRule in u))throw new Error("Can't start parsing from rule \""+e.startRule+'".');s=u[e.startRule]}function tt(){return n.substring(Q,P)}function nt(t,n){return{type:"literal",text:t,ignoreCase:n}}function et(t,n,e){return{type:"class",parts:t,inverted:n,ignoreCase:e}}function rt(t){return{type:"other",description:t}}function it(t){var e,r=U[t];if(r)return r;for(e=t-1;!U[e];)e--;for(r={line:(r=U[e]).line,column:r.column};e<t;)10===n.charCodeAt(e)?(r.line++,r.column=1):r.column++,e++;return U[t]=r,r}function ot(t){P<W||(P>W&&(W=P,X=[]),X.push(t))}function ut(){var t;return(t=st())===i&&(t=function(){var t,n;if(t=[],(n=ct())!==i)for(;n!==i;)t.push(n),n=ct();else t=i;return t}()),t}function st(){var t,e;return Z++,t=P,ft(),n.substr(P,4)===c?(e=c,P+=4):(e=i,0===Z&&ot(v)),e!==i?(ft(),Q=t,t=[]):(P=t,t=i),Z--,t===i&&0===Z&&ot(g),t}function ct(){var t,e,r,o;return t=P,ft(),(e=function(){var t,e,r;return Z++,t=P,(e=lt())!==i?(40===n.charCodeAt(P)?(r="(",P++):(r=i,0===Z&&ot(M)),r!==i?(Q=t,t=e):(P=t,t=i)):(P=t,t=i),Z--,t===i&&(e=i,0===Z&&ot($)),t}())!==i?(ft(),(r=function(){var t,e,r,o,u,s,c,a;if(t=P,(e=at())!==i){for(r=[],o=P,u=ft(),44===n.charCodeAt(P)?(s=",",P++):(s=i,0===Z&&ot(y)),s===i&&(s=null),c=ft(),(a=at())!==i?o=u=[u,s,c,a]:(P=o,o=i);o!==i;)r.push(o),o=P,u=ft(),44===n.charCodeAt(P)?(s=",",P++):(s=i,0===Z&&ot(y)),s===i&&(s=null),c=ft(),(a=at())!==i?o=u=[u,s,c,a]:(P=o,o=i);Q=t,t=function(t,n){return n.length>0?function(t,n){return[t].concat(function(t){return t.map((function(t){return t[3]}))}(n))}(t,n):[t]}(e,r)}else P=t,t=i;return t}())===i&&(r=null),ft(),41===n.charCodeAt(P)?(o=")",P++):(o=i,0===Z&&ot(m)),o!==i?(ft(),Q=t,t=function(t,n){return{type:"function",name:t,parameters:n||[]}}(e,r)):(P=t,t=i)):(P=t,t=i),t}function at(){var t,n;return t=P,(n=ht())===i&&(n=pt())===i&&(n=dt())===i&&(n=function(){var t,n;return Z++,t=P,ft(),(n=gt())!==i?(Q=t,t=function(t){return{value:t,unit:null}}(n)):(P=t,t=i),Z--,t===i&&0===Z&&ot(B),t}()),n!==i&&(Q=t,n=function(t){return{type:"quantity",value:t.value,unit:t.unit}}(n)),(t=n)===i&&(t=P,(n=wt())!==i&&(Q=t,n=function(t){return{type:"color",colorType:t.type,value:t.value}}(n)),t=n),t}function ft(){var t,e;for(Z++,t=[],l.test(n.charAt(P))?(e=n.charAt(P),P++):(e=i,0===Z&&ot(x));e!==i;)t.push(e),l.test(n.charAt(P))?(e=n.charAt(P),P++):(e=i,0===Z&&ot(x));return Z--,e=i,0===Z&&ot(b),t}function lt(){var t,e,r;if(Z++,t=P,e=[],h.test(n.charAt(P))?(r=n.charAt(P),P++):(r=i,0===Z&&ot(A)),r!==i)for(;r!==i;)e.push(r),h.test(n.charAt(P))?(r=n.charAt(P),P++):(r=i,0===Z&&ot(A));else e=i;return e!==i&&(Q=t,e=tt()),Z--,(t=e)===i&&(e=i,0===Z&&ot(F)),t}function ht(){var t,e,r;return Z++,t=P,ft(),(e=gt())!==i?(37===n.charCodeAt(P)?(r="%",P++):(r=i,0===Z&&ot(E)),r!==i?(Q=t,t=function(t){return{value:t,unit:"%"}}(e)):(P=t,t=i)):(P=t,t=i),Z--,t===i&&0===Z&&ot(k),t}function pt(){var t,e,r;return Z++,t=P,ft(),(e=gt())!==i?("px"===n.substr(P,2)?(r="px",P+=2):(r=i,0===Z&&ot(N)),r!==i?(Q=t,t=function(t){return{value:t,unit:"px"}}(e)):(P=t,t=i)):(P=t,t=i),t===i&&(t=P,ft(),(e=gt())!==i?("cm"===n.substr(P,2)?(r="cm",P+=2):(r=i,0===Z&&ot(O)),r!==i?(Q=t,t=function(t){return{value:t,unit:"cm"}}(e)):(P=t,t=i)):(P=t,t=i),t===i&&(t=P,ft(),(e=gt())!==i?("mm"===n.substr(P,2)?(r="mm",P+=2):(r=i,0===Z&&ot(S)),r!==i?(Q=t,t=function(t){return{value:t,unit:"mm"}}(e)):(P=t,t=i)):(P=t,t=i),t===i&&(t=P,ft(),(e=gt())!==i?("in"===n.substr(P,2)?(r="in",P+=2):(r=i,0===Z&&ot(J)),r!==i?(Q=t,t=function(t){return{value:t,unit:"in"}}(e)):(P=t,t=i)):(P=t,t=i),t===i&&(t=P,ft(),(e=gt())!==i?("pt"===n.substr(P,2)?(r="pt",P+=2):(r=i,0===Z&&ot(_)),r!==i?(Q=t,t=function(t){return{value:t,unit:"pt"}}(e)):(P=t,t=i)):(P=t,t=i),t===i&&(t=P,ft(),(e=gt())!==i?("pc"===n.substr(P,2)?(r="pc",P+=2):(r=i,0===Z&&ot(q)),r!==i?(Q=t,t=function(t){return{value:t,unit:"pc"}}(e)):(P=t,t=i)):(P=t,t=i)))))),Z--,t===i&&0===Z&&ot(j),t}function dt(){var t,e,r;return Z++,t=P,(e=gt())!==i?("deg"===n.substr(P,3)?(r="deg",P+=3):(r=i,0===Z&&ot(I)),r!==i?(Q=t,t=function(t){return{value:t,unit:"deg"}}(e)):(P=t,t=i)):(P=t,t=i),t===i&&(t=P,(e=gt())!==i?("rad"===n.substr(P,3)?(r="rad",P+=3):(r=i,0===Z&&ot(R)),r!==i?(Q=t,t=function(t){return{value:t,unit:"rad"}}(e)):(P=t,t=i)):(P=t,t=i),t===i&&(t=P,(e=gt())!==i?(n.substr(P,4)===a?(r=a,P+=4):(r=i,0===Z&&ot(T)),r!==i?(Q=t,t=function(t){return{value:t,unit:"grad"}}(e)):(P=t,t=i)):(P=t,t=i),t===i&&(t=P,(e=gt())!==i?(n.substr(P,4)===f?(r=f,P+=4):(r=i,0===Z&&ot(z)),r!==i?(Q=t,t=function(t){return{value:t,unit:"turn"}}(e)):(P=t,t=i)):(P=t,t=i)))),Z--,t===i&&(e=i,0===Z&&ot(C)),t}function wt(){var t,e,r,o;if(Z++,t=P,35===n.charCodeAt(P)?(e="#",P++):(e=i,0===Z&&ot(D)),e!==i){if(r=[],p.test(n.charAt(P))?(o=n.charAt(P),P++):(o=i,0===Z&&ot(L)),o!==i)for(;o!==i;)r.push(o),p.test(n.charAt(P))?(o=n.charAt(P),P++):(o=i,0===Z&&ot(L));else r=i;r!==i?(Q=t,t={type:"hex",value:tt()}):(P=t,t=i)}else P=t,t=i;return t===i&&(t=P,(e=ct())!==i&&(Q=t,e=function(t){return{type:"function",value:t}}(e)),(t=e)===i&&(t=P,(e=lt())!==i&&(Q=t,e={type:"named",value:tt()}),t=e)),Z--,t===i&&(e=i,0===Z&&ot(V)),t}function gt(){var t,e,r,o,u,s,c;for(t=P,d.test(n.charAt(P))?(n.charAt(P),P++):0===Z&&ot(Y),e=P,r=[],w.test(n.charAt(P))?(o=n.charAt(P),P++):(o=i,0===Z&&ot(G));o!==i;)r.push(o),w.test(n.charAt(P))?(o=n.charAt(P),P++):(o=i,0===Z&&ot(G));if(46===n.charCodeAt(P)?(o=".",P++):(o=i,0===Z&&ot(H)),o!==i){if(u=[],w.test(n.charAt(P))?(s=n.charAt(P),P++):(s=i,0===Z&&ot(G)),s!==i)for(;s!==i;)u.push(s),w.test(n.charAt(P))?(s=n.charAt(P),P++):(s=i,0===Z&&ot(G));else u=i;u!==i?e=r=[r,o,u]:(P=e,e=i)}else P=e,e=i;if(e===i)if(e=[],w.test(n.charAt(P))?(r=n.charAt(P),P++):(r=i,0===Z&&ot(G)),r!==i)for(;r!==i;)e.push(r),w.test(n.charAt(P))?(r=n.charAt(P),P++):(r=i,0===Z&&ot(G));else e=i;if(e!==i){if(r=P,101===n.charCodeAt(P)?(o="e",P++):(o=i,0===Z&&ot(K)),o!==i){if(d.test(n.charAt(P))?(u=n.charAt(P),P++):(u=i,0===Z&&ot(Y)),u===i&&(u=null),s=[],w.test(n.charAt(P))?(c=n.charAt(P),P++):(c=i,0===Z&&ot(G)),c!==i)for(;c!==i;)s.push(c),w.test(n.charAt(P))?(c=n.charAt(P),P++):(c=i,0===Z&&ot(G));else s=i;s!==i?r=o=[o,u,s]:(P=r,r=i)}else P=r,r=i;r===i&&(r=null),Q=t,t=parseFloat(tt())}else P=t,t=i;return t}if((r=s())!==i&&P===n.length)return r;throw r!==i&&P<n.length&&ot({type:"end"}),function(n,e,r){return new t(t.buildMessage(n,e),n,e,r)}(X,W<n.length?n.charAt(W):null,function(t,n){var e=it(t),r=it(n);return{source:o,start:{offset:t,line:e.line,column:e.column},end:{offset:n,line:r.line,column:r.column}}}(W,W<n.length?W+1:W))}}}());const _={deg:1,grad:.9,rad:180/Math.PI,turn:360},q={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function C(n){!function(n){if("quantity"!==n.type||null!==n.unit&&"%"!==n.unit)throw new t("effect:type-error",`Expected <double> or <percentage>, Actual: ${S(n)}`,{term:n})}(n);const e=n.value;return J(e,n),"%"===n.unit?.01*e:e}function I(n){return function(n){if("quantity"!==n.type||!(0===n.value&&null===n.unit||n.unit&&null!=q[n.unit]))throw new t("effect:type-error",`Expected <length>, Actual: ${S(n)}`,{term:n})}(n),n.value*q[n.unit]||0}function R(n){switch(n.colorType){case"hex":return s(n.value);case"named":return T(n.value);case"function":return function(n){if(O(n.parameters,4),z.test(n.name))return[C(n.parameters[0]),C(n.parameters[1]),C(n.parameters[2]),n.parameters[3]?C(n.parameters[3]):1];if(B.test(n.name))return a(function(n){return function(n){if("quantity"!==n.type||null!==n.unit)throw new t("effect:type-error",`Expected <double>, Actual: ${S(n)}`,{term:n})}(n),J(n.value,n),n.value}(n.parameters[0]),C(n.parameters[1]),C(n.parameters[2]),n.parameters[3]?C(n.parameters[3]):1);throw new t("effect:syntax-error",`Invalid color function '${n.name}'`,{colorFunction:n})}(n.value)}}function T(n){if(!c(n))throw new t("effect:unknown-color",`color '${n}' isn't valid`,{namedColor:n});return u(n)}const z=/^rgba?/i,B=/^hsla?/i;function V(t,n,e){try{return function(t){if(!t||0===t.length)return null;if(function(t){const n=t[0];return!!n&&"scale"in n}(t)){const n=[];for(const e of t)n.push({scale:e.scale,value:L(e.value)});return n}return L(t)}(t)}catch(t){var r;null==e||null==(r=e.messages)||r.push(t)}return null}function D(t,e,r,i){try{const i=function(t){const n=j(t);return n?function(t){const n=t[0];return!!n&&"type"in n}(n)?n.map((t=>t.toJSON())):n.map((({scale:t,effects:n})=>({scale:t,value:n.map((t=>t.toJSON()))}))):null}(t);n(r,i,e)}catch(t){i.messages&&i.messages.push(t)}}function L(t){if(!t||!t.length)return"";const n=[];for(const e of t){let t=[];switch(e.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":t=[Y(e,"amount")];break;case"blur":t=[Y(e,"radius","pt")];break;case"hue-rotate":t=[Y(e,"angle","deg")];break;case"drop-shadow":t=[Y(e,"xoffset","pt"),Y(e,"yoffset","pt"),Y(e,"blurRadius","pt"),G(e,"color")];break;case"bloom":t=[Y(e,"strength"),Y(e,"radius","pt"),Y(e,"threshold")]}const r=`${e.type}(${t.filter(Boolean).join(" ")})`;j(r),n.push(r)}return n.join(" ")}function Y(n,e,r){if(null==n[e])throw new t("effect:missing-parameter",`Missing parameter '${e}' in ${n.type} effect`,{effect:n});return r?n[e]+r:""+n[e]}function G(n,e){if(null==n[e])throw new t("effect:missing-parameter",`Missing parameter '${e}' in ${n.type} effect`,{effect:n});const r=n[e];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const H=t=>{let n=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return e([r({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0}}}})],n.prototype,"blendMode",void 0),e([r({json:{read:!1,write:!1,origins:{"web-map":{read:{reader:V},write:{allowNull:!0,writer:D}}}}})],n.prototype,"effect",void 0),n=e([i("esri.layers.mixins.BlendLayer")],n),n};export{D as a,F as b,p as c,j as d,A as e,L as f,H as i,V as n}