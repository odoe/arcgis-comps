import{K as e,s as t,Q as r,a$ as n,c0 as s,aj as o}from"./p-e58503d5.js";import{d as a,B as l}from"./p-efbca0ca.js";const u=()=>!!e("enable-feature:disable-context-navigation"),c=()=>!!e("enable-feature:direct-3d-object-feature-layer-display"),f=()=>!!e("enable-feature:enable-weather"),i=()=>!!e("enable-feature:new-atmosphere"),y={};function m(e,r,n){return e.styleUrl?async function(e,t){try{return{data:(await p(e,t)).data,baseUrl:s(e),styleUrl:e}}catch(e){return o(e),null}}(e.styleUrl,n):e.styleName?function(e,r,n){const s=r&&r.portal||l.getDefault();let o;const u=`${s.url} - ${s.user&&s.user.username} - ${e}`;return y[u]||(y[u]=function(e,r,n){return r.load(n).then((()=>{const t=new a({disableExtraQuery:!0,query:`owner:${w} AND type:${h} AND typekeywords:"${e}"`});return r.queryItems(t,n)})).then((({results:r})=>{let s=null;const o=e.toLowerCase();if(r&&Array.isArray(r))for(const e of r)if(e.typeKeywords.some((e=>e.toLowerCase()===o))&&e.type===h&&e.owner===w){s=e;break}if(!s)throw new t("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(n)}))}(e,s,n).then((e=>(o=e,e.fetchData()))).then((t=>({data:t,baseUrl:o.itemUrl,styleName:e})))),y[u]}(e.styleName,r,n):Promise.reject(new t("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function b(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function d(t,r){if("cimRef"===r)return t.cimRef;if(t.formatInfos&&!e("enable-feature:force-wosr"))for(const e of t.formatInfos)if("gltf"===e.type)return e.href;return t.webRef}function p(e,t){const s={responseType:"json",query:{f:"json"},...t};return r(n(e),s)}const w="esri_en",h="Style",j="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";export{p as b,b as c,j,m,f as n,i as o,d as p,u as r,c as t}