import{C as t,c as n,af as r}from"./p-e58503d5.js";import{u as o,d as e,z as u,r as s,c,_ as i,a,s as f,l,B as p,I as d,q as h,$ as m,o as M,i as g}from"./p-2f398ed1.js";import{r as j,f as y}from"./p-ccdb8e80.js";import{b as A,n as R}from"./p-d3105731.js";import{n as _,r as b}from"./p-4d38e149.js";import{s as x,c as C,f as S}from"./p-3c70d22f.js";function w(t){return t?{origin:A(t.origin),direction:A(t.direction)}:{origin:R(),direction:R()}}function P(n,r){return t(n.origin,r.origin)&&t(n.direction,r.direction)}function E(t,n){const r=z.get();return r.origin=t,r.direction=n,r}function O(t,n=w()){return q(t.origin,t.direction,n)}function T(t,n,r=w()){return s(r.origin,t),c(r.direction,n,t),r}function q(t,n,r=w()){return s(r.origin,t),s(r.direction,n),r}function v(t,n){const r=i(C.get(),a(C.get(),t.direction),c(C.get(),n,t.origin));return u(r,r)}const z=new x((function(){return{origin:null,direction:null}}));function B(t,n,r){const o=u(t,n)/u(t,t);return e(r,t,o)}function I(t,n){return u(t,n)/f(t)}function V(t,n){const r=u(t,n)/(f(t)*f(n));return-l(r)}function $(t,n,r){a(k,t),a(D,n);const o=u(k,D),e=l(o),s=i(k,k,D);return u(s,r)<0?2*Math.PI-e:e}const k=R(),D=R(),F=n.getLogger("esri.geometry.support.sphere");function G(){return _()}function H(t,n=G()){return p(n,t)}function J(t,n){return b(t[0],t[1],t[2],n)}function K(t){return t}function L(t){t[0]=t[1]=t[2]=t[3]=0}function N(t){return t}function Q(t){return Array.isArray(t)?t[3]:t}function U(t){return Array.isArray(t)?t:ct}function W(t,n,r,o){return b(t,n,r,o)}function X(t,n,o){if(r(n))return!1;const{origin:e,direction:u}=n,s=Y;s[0]=e[0]-t[0],s[1]=e[1]-t[1],s[2]=e[2]-t[2];const c=u[0]*u[0]+u[1]*u[1]+u[2]*u[2],i=2*(u[0]*s[0]+u[1]*s[1]+u[2]*s[2]),a=i*i-4*c*(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]-t[3]*t[3]);if(a<0)return!1;const f=Math.sqrt(a);let l=(-i-f)/(2*c);const p=(-i+f)/(2*c);return(l<0||p<l&&p>0)&&(l=p),!(l<0||(o&&(o[0]=e[0]+u[0]*l,o[1]=e[1]+u[1]*l,o[2]=e[2]+u[2]*l),0))}const Y=R();function Z(t,n){return X(t,n,null)}function tt(t,n,r){const o=C.get(),u=S.get();i(o,n.origin,n.direction);const s=Q(t);i(r,o,n.origin),e(r,r,1/f(r)*s);const c=ot(t,n.origin),a=V(n.origin,r);return j(u),y(u,u,a+c,o),d(r,r,u),r}function nt(t,n,r){const u=c(C.get(),n,U(t)),s=e(C.get(),u,t[3]/f(u));return o(r,s,U(t))}function rt(t,n){const r=c(C.get(),n,U(t)),o=g(r);return Math.sqrt(Math.abs(o-t[3]*t[3]))}function ot(t,n){const r=c(C.get(),n,U(t)),o=f(r),e=Q(t),u=e+Math.abs(e-o);return l(e/u)}const et=R();function ut(t,n,r,o){const e=c(et,n,U(t));switch(r){case 0:{const t=m(e,et)[2];return M(o,-Math.sin(t),Math.cos(t),0)}case 1:{const t=m(e,et),n=t[1],r=t[2],u=Math.sin(n);return M(o,-u*Math.cos(r),-u*Math.sin(r),Math.cos(n))}case 2:return a(o,e);default:return}}function st(t,n){const r=c(it,n,U(t));return f(r)-t[3]}const ct=R(),it=R(),at=Object.freeze({__proto__:null,create:G,copy:H,fromCenterAndRadius:J,wrap:K,clear:L,fromRadius:N,getRadius:Q,getCenter:U,fromValues:W,elevate:function(t,n,r){return t!==r&&s(r,t),r[3]=t[3]+n,r},setExtent:function(t,n,r){return F.error("sphere.setExtent is not yet supported"),t===r?r:H(t,r)},intersectRay:X,intersectsRay:Z,intersectRayClosestSilhouette:function(t,n,r){if(X(t,n,r))return r;const u=tt(t,n,C.get());return o(r,n.origin,e(C.get(),n.direction,h(n.origin,u)/f(n.direction))),r},closestPointOnSilhouette:tt,closestPoint:function(t,n,r){return X(t,n,r)?r:(function(t,n,r){const s=u(t.direction,c(r,n,t.origin));o(r,t.origin,e(r,t.direction,s))}(n,U(t),r),nt(t,r,r))},projectPoint:nt,distanceToSilhouette:rt,angleToSilhouette:ot,axisAt:ut,altitudeAt:st,setAltitudeAt:function(t,n,r,u){const s=st(t,n),c=ut(t,n,2,it),i=e(it,c,r-s);return o(u,n,i)}});export{Z as B,L as C,Q as E,tt as F,rt as I,U as L,W as O,G as P,X as U,at as Z,H as _,q as a,B as b,w as d,I as e,V as f,v as h,$ as i,E as j,N as k,O as l,P as m,T as p,J as q,K as w}