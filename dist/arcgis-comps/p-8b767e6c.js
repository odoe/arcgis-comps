import{v as e,t as s,E as t,e as r,d as o,i,a8 as n,W as a}from"./p-9ae46e68.js";import{aZ as h,z as l,h as p}from"./p-566b0715.js";import{a as c}from"./p-6ebb24ba.js";e.getLogger("esri.core.support.OwningCollection");let w=class extends(c(t)){constructor(e){super(e),this.handles.add([this.on("before-add",(e=>{s(e.item)&&e.preventDefault()})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(e=>this._release(e.item)))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(t.ofType(this.itemType.Type))(e):new t(e)}};function u(e,s){return{type:e,cast:h,set(t){const r=l(t,this._get(s),e);r.owner=this,this._set(s,r)}}}r([o()],w.prototype,"owner",null),w=r([i("esri.core.support.OwningCollection")],w);let f=class extends w{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};r([n({Type:p,ensureType:a(p)})],f.prototype,"itemType",void 0),f=r([i("esri.support.GraphicsCollection")],f);export{u as a,f as c}