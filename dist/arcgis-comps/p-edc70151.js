import{W as t,ho as n,he as e}from"./p-c8bc3433.js";async function i(i,o=i.popupTemplate){if(!t(o))return[];const a=await o.getRequiredFields(i.fieldsIndex),{lastEditInfoEnabled:r}=o,{objectIdField:l,typeIdField:s,globalIdField:c,relationships:d}=i;if(a.includes("*"))return["*"];const u=r?await n(i):[],f=e(i.fieldsIndex,[...a,...u]);return s&&f.push(s),f&&l&&i.fieldsIndex.has(l)&&-1===f.indexOf(l)&&f.push(l),f&&c&&i.fieldsIndex.has(c)&&-1===f.indexOf(c)&&f.push(c),d&&d.forEach((t=>{const{keyField:n}=t;f&&n&&i.fieldsIndex.has(n)&&-1===f.indexOf(n)&&f.push(n)})),f}function o(n,e){return n.popupTemplate?n.popupTemplate:t(e)&&e.defaultPopupTemplateEnabled&&t(n.defaultPopupTemplate)?n.defaultPopupTemplate:null}export{o as d,i as t}