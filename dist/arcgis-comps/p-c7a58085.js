import{c as r,d3 as t,bF as n,bG as o,bI as e,af as f}from"./p-e58503d5.js";import{a,o as s,j as i,B as c}from"./p-b9aa4901.js";import{e as u}from"./p-8f986f60.js";import{e as p}from"./p-2c84c65f.js";import{L as m,a as l}from"./p-2f398ed1.js";import{n as j}from"./p-d3105731.js";import{x as F,v as P}from"./p-c93d2280.js";import{d as C}from"./p-01e5a461.js";import{i as d,T as v}from"./p-f06611ed.js";import{a as y,f as b,o as A}from"./p-2f5c7e83.js";const h=r.getLogger("esri.geometry.support.meshUtils.normalProjection");function x(r,t,n,o,e){return w(o)?(q(0,d.fromTypedArray(r),v.fromTypedArray(t),v.fromTypedArray(n),o,d.fromTypedArray(e)),e):(h.error("Cannot convert spatial reference to PCPF"),e)}function g(r,t,n,o,e){return w(o)?(q(1,d.fromTypedArray(r),v.fromTypedArray(t),v.fromTypedArray(n),o,d.fromTypedArray(e)),e):(h.error("Cannot convert to spatial reference from PCPF"),e)}function B(r,t,n){return F(r,t,0,n,C(t),0,r.length/3),n}function G(r,t,n){return F(r,C(n),0,t,n,0,r.length/3),t}function I(r,t,n){if(f(r))return t;const o=v.fromTypedArray(r),e=v.fromTypedArray(t);return y(e,o,n),t}function L(r,t,n){if(f(r))return t;i(J,n);const o=d.fromTypedArray(r),e=d.fromTypedArray(t);return b(e,o,J),c(J)||A(e,e),t}function M(r,t,n){if(f(r))return t;i(J,n);const o=d.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),e=d.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT);if(b(e,o,J),c(J)||A(e,e),r!==t)for(let n=3;n<r.length;n+=4)t[n]=r[n];return t}function U(r,t,n,o,e){if(!w(o))return h.error("Cannot convert spatial reference to PCPF"),e;q(0,d.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),v.fromTypedArray(t),v.fromTypedArray(n),o,d.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT));for(let t=3;t<r.length;t+=4)e[t]=r[t];return e}function k(r,t,n,o,e){if(!w(o))return h.error("Cannot convert to spatial reference from PCPF"),e;q(1,d.fromTypedArray(r,16),v.fromTypedArray(t),v.fromTypedArray(n),o,d.fromTypedArray(e,16));for(let t=3;t<r.length;t+=4)e[t]=r[t];return e}function q(r,t,n,o,f,i){if(!t)return;const c=n.count,u=C(f);if(z(f))for(let n=0;n<c;n++)o.getVec(n,D),t.getVec(n,E),P(u,D,H,u),a(J,H),1===r&&s(J,J),m(E,E,J),i.setVec(n,E);else for(let f=0;f<c;f++){o.getVec(f,D),t.getVec(f,E),P(u,D,H,u),a(J,H);const c=e(n.get(f,1));let p=Math.cos(c);0===r&&(p=1/p),J[0]*=p,J[1]*=p,J[2]*=p,J[3]*=p,J[4]*=p,J[5]*=p,1===r&&s(J,J),m(E,E,J),l(E,E),i.setVec(f,E)}return i}function w(r){return z(r)||function(r){return r.isWebMercator}(r)}function z(r){return r.isWGS84||t(r)||n(r)||o(r)}const D=j(),E=j(),H=p(),J=u();export{U as B,x as F,M as L,G as M,k as R,I as V,g as _,L as k,B as v}