import{z as r,A as n,a as t,Z as e,J as i,ak as o,V as u}from"./p-1ce5adcc.js";import{c8 as f,bT as c,dj as p}from"./p-e58503d5.js";import{WhereClause as s}from"./p-61f47d2b.js";import"./p-b79fcce3.js";import"./p-6f4b0bc8.js";import"./p-a184d75f.js";import"./p-5a4bf917.js";import"./p-c048b814.js";import"./p-a131049b.js";import"./p-a9a30646.js";import"./p-a2324023.js";import"./p-5032dfbd.js";import"./p-182bb5be.js";import"./p-db87794e.js";import"./p-01e5a461.js";import"./p-c0f84cd3.js";import"./p-8925cd73.js";import"./p-dfc6337f.js";import"./p-53bb6ab4.js";function a(r,e,c,p,a,j){if(1===p.length){if(t(p[0]))return f(o(r,p[0],u(p[1],-1)));if(i(p[0]))return f(o(r,p[0].toArray(),u(p[1],-1)))}else if(2===p.length){if(t(p[0]))return f(o(r,p[0],u(p[1],-1)));if(i(p[0]))return f(o(r,p[0].toArray(),u(p[1],-1)));if(n(p[0]))return p[0].load().then((n=>m(s.create(p[1],n.getFieldsIndex()),j,a).then((n=>p[0].calculateStatistic(r,n,u(p[2],1e3),e.abortSignal)))))}else if(3===p.length&&n(p[0]))return p[0].load().then((n=>m(s.create(p[1],n.getFieldsIndex()),j,a).then((n=>p[0].calculateStatistic(r,n,u(p[2],1e3),e.abortSignal)))));return f(o(r,p,-1))}function m(r,n,t){try{const e=r.getVariables();if(e.length>0){const i=[];for(let r=0;r<e.length;r++)i.push(n.evaluateIdentifier(t,{name:e[r]}));return c(i).then((n=>{const t={};for(let r=0;r<e.length;r++)t[e[r]]=n[r];return r.parameters=t,r}))}return f(r)}catch(r){return p(r)}}function j(o){"async"===o.mode&&(o.functions.stdev=function(r,n){return o.standardFunctionAsync(r,n,(function(n,t,e){return a("stdev",n,0,e,r,o)}))},o.functions.variance=function(r,n){return o.standardFunctionAsync(r,n,(function(n,t,e){return a("variance",n,0,e,r,o)}))},o.functions.average=function(r,n){return o.standardFunctionAsync(r,n,(function(n,t,e){return a("mean",n,0,e,r,o)}))},o.functions.mean=function(r,n){return o.standardFunctionAsync(r,n,(function(n,t,e){return a("mean",n,0,e,r,o)}))},o.functions.sum=function(r,n){return o.standardFunctionAsync(r,n,(function(n,t,e){return a("sum",n,0,e,r,o)}))},o.functions.min=function(r,n){return o.standardFunctionAsync(r,n,(function(n,t,e){return a("min",n,0,e,r,o)}))},o.functions.max=function(r,n){return o.standardFunctionAsync(r,n,(function(n,t,e){return a("max",n,0,e,r,o)}))},o.functions.count=function(u,f){return o.standardFunctionAsync(u,f,(function(o,u,f){if(r(f,1,1),n(f[0]))return f[0].count(o.abortSignal);if(t(f[0])||e(f[0]))return f[0].length;if(i(f[0]))return f[0].length();throw new Error("Invalid Parameters for Count")}))})}export{j as registerFunctions}