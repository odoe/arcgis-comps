import { M as r, e as e$1, i as i$1, p as p$1, N as s, O as e$2, P as i$2, l, q, Q as v$1, y as t, R as b$1, S as N, b as d$1 } from './cast-e5ea2533.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class i{constructor(){this._emitter=new i.EventEmitter(this);}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}}!function(n){class o{constructor(t=null){this.target=t,this._listenersMap=null;}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null;}emit(t,e){const s=this._listenersMap&&this._listenersMap.get(t);if(!s)return !1;const r=this.target||this;return [...s].forEach((t=>{t.call(r,e);})),s.length>0}on(t,e){if(Array.isArray(t)){const r$1=t.map((t=>this.on(t,e)));return r(r$1)}if(t.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const r$1=this._listenersMap.get(t)||[];return r$1.push(e),this._listenersMap.set(t,r$1),{remove:()=>{const s=this._listenersMap&&this._listenersMap.get(t)||[],r=s.indexOf(e);r>=0&&s.splice(r,1);}}}once(t,e){const s=this.on(t,(t=>{s.remove(),e.call(null,t);}));return s}hasEventListener(t){const e=this._listenersMap&&this._listenersMap.get(t);return null!=e&&e.length>0}}n.EventEmitter=o,n.EventedMixin=e=>{let s=class extends e{constructor(){super(...arguments),this._emitter=new o;}destroy(){this._emitter.clear();}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}};return s=e$1([i$1("esri.core.Evented")],s),s};let h=class extends p$1{constructor(){super(...arguments),this._emitter=new i.EventEmitter(this);}destroy(){this._emitter.clear();}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}};h=e$1([i$1("esri.core.Evented")],h),n.EventedAccessor=h;}(i||(i={}));const n$1=i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n(n){return (r,t)=>{r[t]=n;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
class e{constructor(){this._observers=[];}observe(e){return this._observers.includes(e)||this._observers.push(e),new s(this._observers,e)}notify(){const s=this._observers.slice();for(let e=0;e<s.length;++e){const r=s[e];r.onInvalidated(),r.onCommitted();}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
var u;class g{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0;}preventDefault(){this.cancellable&&(this.defaultPrevented=!0);}reset(e){this.defaultPrevented=!1,this.item=e;}}const p=new e$2(g,void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1;})),d=()=>{};function b(e){return e?e instanceof L?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function v(e){if(e&&e.length)return e[0]}function y(e,t,s,i){const r=Math.min(e.length-s,t.length-i);let n=0;for(;n<r&&e[s+n]===t[i+n];)n++;return n}function C(e,t,s,i){t&&t.forEach(((t,r,n)=>{e.push(t),C(e,s.call(i,t,r,n),s,i);}));}const A=new Set,x=new Set,E=new Set,j=new Map;let B=0,L=u=class extends n$1.EventedAccessor{constructor(e$1){super(e$1),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new e,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:B++});}static isCollection(e){return null!=e&&e instanceof u}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof u?{items:e}:e:{}}destroy(){this.removeAll();}*[Symbol.iterator](){yield*this.items;}get items(){return i$2(this._observable),this._items}set items(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,...b(e)),this._emitAfterChanges(1));}hasEventListener(e){return "change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if("change"===e){const e=this._chgListeners,s={removed:!1,callback:t};return e.push(s),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=d,s.removed=!0,e.splice(e.indexOf(s),1);}}}return this._emitter.on(e,t)}once(e,t){const s=this.on(e,t);return {remove(){s.remove();}}}add(e,t){if(i$2(this._observable),this._emitBeforeChanges(1))return this;const s=this.getNextIndex(null!=t?t:null);return this._splice(s,0,e),this._emitAfterChanges(1),this}addMany(e,t=this._items.length){if(i$2(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(1))return this;const s=this.getNextIndex(t);return this._splice(s,0,...b(e)),this._emitAfterChanges(1),this}removeAll(){if(i$2(this._observable),!this.length||this._emitBeforeChanges(2))return [];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(2),e}clone(){return i$2(this._observable),this._createNewInstance({items:this._items.map(l)})}concat(...e){i$2(this._observable);const t=e.map(b);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(i$2(this._observable),!this.length||this._emitBeforeChanges(2))return;const s=q(this._splice(0,this.length)),i=s.length;for(let r=0;r<i;r++)e.call(t,s[r],r,s);this._emitAfterChanges(2);}every(e,t){return i$2(this._observable),this._items.every(e,t)}filter(e,t){let s;return i$2(this._observable),s=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:s})}find(e,t){return i$2(this._observable),this._items.find(e,t)}findIndex(e,t){return i$2(this._observable),this._items.findIndex(e,t)}flatten(e,t){i$2(this._observable);const s=[];return C(s,this,e,t),new u(s)}forEach(e,t){return i$2(this._observable),this._items.forEach(e,t)}getItemAt(e){return i$2(this._observable),this._items[e]}getNextIndex(e){i$2(this._observable);const t=this.length;return (e=null==e?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return i$2(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return i$2(this._observable),this._items.indexOf(e,t)}join(e=","){return i$2(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return i$2(this._observable),this._items.lastIndexOf(e,t)}map(e,t){i$2(this._observable);const s=this._items.map(e,t);return new u({items:s})}reorder(e,t=this.length-1){i$2(this._observable);const s=this.indexOf(e);if(-1!==s){if(t<0?t=0:t>=this.length&&(t=this.length-1),s!==t){if(this._emitBeforeChanges(4))return e;this._splice(s,1),this._splice(t,0,e),this._emitAfterChanges(4);}return e}}pop(){if(i$2(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=v(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}push(...e){return i$2(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,...e),this._emitAfterChanges(1)),this.length}reduce(e,t){i$2(this._observable);const s=this._items;return 2===arguments.length?s.reduce(e,t):s.reduce(e)}reduceRight(e,t){i$2(this._observable);const s=this._items;return 2===arguments.length?s.reduceRight(e,t):s.reduceRight(e)}remove(e){return i$2(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(i$2(this._observable),e<0||e>=this.length||this._emitBeforeChanges(2))return;const t=v(this._splice(e,1));return this._emitAfterChanges(2),t}removeMany(e){if(i$2(this._observable),!e||!e.length||this._emitBeforeChanges(2))return [];const t=e instanceof u?e.toArray():e,s=this._items,i=[],r=t.length;for(let n=0;n<r;n++){const e=t[n],r=s.indexOf(e);if(r>-1){const e=1+y(t,s,n+1,r+1),h=this._splice(r,e);h&&h.length>0&&i.push.apply(i,h),n+=e-1;}}return this._emitAfterChanges(2),i}reverse(){if(i$2(this._observable),this._emitBeforeChanges(4))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,...e)),this._emitAfterChanges(4),this}shift(){if(i$2(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=v(this._splice(0,1));return this._emitAfterChanges(2),e}slice(e=0,t=this.length){return i$2(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return i$2(this._observable),this._items.some(e,t)}sort(e){if(i$2(this._observable),!this.length||this._emitBeforeChanges(4))return this;const t=q(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice(0,0,...t),this._emitAfterChanges(4),this}splice(e,t,...s){i$2(this._observable);const i=(t?2:0)|(s.length?1:0);if(this._emitBeforeChanges(i))return [];const r=this._splice(e,t,...s)||[];return this._emitAfterChanges(i),r}toArray(){return i$2(this._observable),this._items.slice()}toJSON(){return i$2(this._observable),this.toArray()}toLocaleString(){return i$2(this._observable),this._items.toLocaleString()}toString(){return i$2(this._observable),this._items.toString()}unshift(...e){return i$2(this._observable),!e.length||this._emitBeforeChanges(1)||(this._splice(0,0,...e),this._emitAfterChanges(1)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,...s){const i=this._items,r=this.itemType;let n,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=v$1((()=>this._dispatchChange()))),t){if(o=i.splice(e,t),this.hasEventListener("before-remove")){const t=p.acquire();t.target=this,t.cancellable=!0;for(let s=0,r=o.length;s<r;s++)n=o[s],t.reset(n),this.emit("before-remove",t),t.defaultPrevented&&(o.splice(s,1),i.splice(e,0,n),e+=1,s-=1,r-=1);p.release(t);}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=p.acquire();e.target=this,e.cancellable=!1;const t=o.length;for(let s=0;s<t;s++)e.reset(o[s]),this.emit("after-remove",e);p.release(e);}}if(s&&s.length){if(r){const e=[];for(const t of s){const s=r.ensureType(t);null==s&&null!=t||e.push(s);}s=e;}const t=this.hasEventListener("before-add"),n=this.hasEventListener("after-add"),h=e===this.length;if(t||n){const r=p.acquire();r.target=this,r.cancellable=!0;const o=p.acquire();o.target=this,o.cancellable=!1;for(const l of s)t?(r.reset(l),this.emit("before-add",r),r.defaultPrevented||(h?i.push(l):i.splice(e++,0,l),this._set("length",i.length),n&&(o.reset(l),this.emit("after-add",o)))):(h?i.push(l):i.splice(e++,0,l),this._set("length",i.length),o.reset(l),this.emit("after-add",o));p.release(o),p.release(r);}else {if(h)for(const e of s)i.push(e);else i.splice(e,0,...s);this._set("length",i.length);}}return (s&&s.length||o&&o.length)&&this._notifyChangeEvent(s,o),o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const s=p.acquire();s.target=this,s.cancellable=!0,s.type=e,this.emit("before-changes",s),t=s.defaultPrevented,p.release(s);}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=p.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),p.release(t);}this._observable.notify();}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t});}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const s of e){const e=s.changes;A.clear(),x.clear(),E.clear();for(const{added:t,removed:s}of e){if(t)if(0===E.size&&0===x.size)for(const e of t)A.add(e);else for(const e of t)x.has(e)?(E.add(e),x.delete(e)):E.has(e)||A.add(e);if(s)if(0===E.size&&0===A.size)for(const e of s)x.add(e);else for(const e of s)A.has(e)?A.delete(e):(E.delete(e),x.add(e));}const i=t.acquire();A.forEach((e=>{i.push(e);}));const r=t.acquire();x.forEach((e=>{r.push(e);}));const n=this._items,h=s.items,o=t.acquire();if(E.forEach((e=>{h.indexOf(e)!==n.indexOf(e)&&o.push(e);})),s.listeners&&(i.length||r.length||o.length)){const e={target:this,added:i,removed:r,moved:o},t=s.listeners.length;for(let i=0;i<t;i++){const t=s.listeners[i];t.removed||t.callback.call(this,e);}}t.release(i),t.release(r),t.release(o);}A.clear(),x.clear(),E.clear();}};L.ofType=t=>{if(!t)return u;if(j.has(t))return j.get(t);let s=null;if("function"==typeof t)s=t.prototype.declaredClass;else if(t.base)s=t.base.prototype.declaredClass;else for(const e in t.typeMap){const i=t.typeMap[e].prototype.declaredClass;s?s+=` | ${i}`:s=i;}let i=class extends u{};return e$1([n({Type:t,ensureType:"function"==typeof t?b$1(t):N(t)})],i.prototype,"itemType",void 0),i=e$1([i$1(`esri.core.Collection<${s}>`)],i),j.set(t,i),i},e$1([d$1()],L.prototype,"length",void 0),e$1([d$1()],L.prototype,"items",null),L=u=e$1([i$1("esri.core.Collection")],L);const S=L;

export { S, n as a, n$1 as n };
