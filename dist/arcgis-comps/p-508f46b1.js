import"./p-9ae46e68.js";import{P as a,k as i}from"./p-566b0715.js";import{h as e,s as t,u as n,v as l,b as o,g as s,y as r,D as u,o as m}from"./p-007111db.js";import"./p-84bf99cb.js";import"./p-fe01b82b.js";import"./p-0659cf81.js";import"./p-8ac97b63.js";let p=null;async function c(t,n){if(!n)return[];const l=t.field,o=t.valueExpression,s=t.normalizationType,r=t.normalizationField,u=t.normalizationTotal,m=[],c=t.viewInfoParams;let f=null,d=null;if(o){if(!p){const{arcadeUtils:i}=await a();p=i}f=p.createFunction(o),d=c&&p.getViewInfo({viewingMode:c.viewingMode,scale:c.scale,spatialReference:new i(c.spatialReference)})}return n.forEach((a=>{const i=a.attributes;let t;if(o){const i=p.createExecContext(a,d);t=p.executeFunction(f,i)}else i&&(t=i[l]);if(s&&isFinite(t)){const a=i&&parseFloat(i[r]);t=e(t,s,a,u)}m.push(t)})),m}async function f(a){const{attribute:i,featuresJSON:e}=a,{normalizationType:o,normalizationField:s,minValue:r,maxValue:u,fieldType:p}=i,f=await c({field:i.field,valueExpression:i.valueExpression,normalizationType:o,normalizationField:s,normalizationTotal:i.normalizationTotal,viewInfoParams:i.viewInfoParams},e),d=m({normalizationType:o,normalizationField:s,minValue:r,maxValue:u}),z={value:.5,fieldType:p},y="esriFieldTypeString"===p?t({values:f,supportsNullCount:d,percentileParams:z}):n({values:f,minValue:r,maxValue:u,useSampleStdDev:!o,supportsNullCount:d,percentileParams:z});return l(y,"esriFieldTypeDate"===p)}async function d(a){const{attribute:i,featuresJSON:e}=a,t=await c({field:i.field,valueExpression:i.valueExpression,viewInfoParams:i.viewInfoParams},e),n=o(t);return s(n,i.domain,i.returnAllCodedValues)}async function z(a){const{attribute:i,featuresJSON:e}=a,{field:t,normalizationType:n,normalizationField:l,normalizationTotal:o,classificationMethod:s}=i,m=await c({field:t,valueExpression:i.valueExpression,normalizationType:n,normalizationField:l,normalizationTotal:o,viewInfoParams:i.viewInfoParams},e),p=r(m,{field:t,normalizationType:n,normalizationField:l,normalizationTotal:o,classificationMethod:s,standardDeviationInterval:i.standardDeviationInterval,numClasses:i.numClasses,minValue:i.minValue,maxValue:i.maxValue});return u(p,s)}export{z as classBreaks,f as summaryStatistics,d as uniqueValues}