import{j as e,ak as o,aR as r,br as s,bs as t}from"./p-566b0715.js";import{a as n,t as m}from"./p-d30fd87a.js";import{U as l,bD as a,m as i}from"./p-9ae46e68.js";import{l as b}from"./p-74fc1b7f.js";import{b as p,m as f,p as y,j as c,c as u}from"./p-b3024dec.js";import"./p-fe01b82b.js";import"./p-84bf99cb.js";function j(e,o,r,s){return e.name?e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?d(e,o,s):f(e,o,s).then((t=>g(t,e.name,o,r,s))):Promise.reject(new i("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function g(f,c,j,g,d){const S=f.data,w={portal:j&&j.portal||e.getDefault(),url:l(f.baseUrl),origin:"portal-item"},N=S.items.find((e=>e.name===c));if(!N)return Promise.reject(new i("symbolstyleutils:symbol-name-not-found",`The symbol name '${c}' could not be found`,{symbolName:c}));let P=o(y(N,g),w),h=N.thumbnail&&N.thumbnail.href;const D=N.thumbnail&&N.thumbnail.imageData;n()&&(P=m(P),h=m(h));const R={portal:j.portal,url:l(a(P)),origin:"portal-item"};return p(P,d).then((e=>{const n="cimRef"===g?u(e.data):e.data,m=b(n,R);if(m&&r(m)){if(h){const e=o(h,w);m.thumbnail=new s({url:e})}else D&&(m.thumbnail=new s({url:`data:image/png;base64,${D}`}));f.styleUrl?m.styleOrigin=new t({portal:j.portal,styleUrl:f.styleUrl,name:c}):f.styleName&&(m.styleOrigin=new t({portal:j.portal,styleName:f.styleName,name:c}))}return m}))}function d(e,o,r){const s=c.replace(/\{SymbolName\}/gi,e.name);return p(s,r).then((e=>{const r=u(e.data);return b(r,{portal:o.portal,url:l(a(s)),origin:"portal-item"})}))}export{g as fetchSymbolFromStyle,j as resolveWebStyleSymbol}