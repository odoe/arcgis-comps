import{A as e,V as t}from"./p-e58503d5.js";import{n as r}from"./p-e9596294.js";class s extends r{constructor(e=null){super("LercWorker","_decode",e,{strategy:"dedicated"}),this.schedule=e,this.ref=0}decode(e,t,r){return e&&0!==e.byteLength?this.invoke({buffer:e,options:t},r):Promise.resolve(null)}getTransferList(e){return[e.buffer]}release(){--this.ref<=0&&(n.forEach(((e,t)=>{e===this&&n.delete(t)})),this.destroy())}}const n=new Map;function o(r=null){let o=n.get(t(r));return o||(e(r)?(o=new s((e=>r.schedule(e))),n.set(r,o)):(o=new s,n.set(null,o))),++o.ref,o}export{o as n}