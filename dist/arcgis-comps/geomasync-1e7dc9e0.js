import { b3 as a, ax as k } from './cast-e5ea2533.js';
import { z, w as s, x as e, F as O, G as me, E, $, I, J, m as ae, H as c, A as A$1, K as r, Q as de, U as a$1, V as he, X as pe, e as ee, _ as ie, a0 as l$1, a1 as u } from './arcadeUtils-c6c756c3.js';
import { p, M, d as b } from './Portal-f1457cb4.js';
import { F, S, g, A, w, x, p as p$1, O as O$1, d, h, j, k as k$1, R, E as E$1, l, y, W, K, M as M$1, m as m$1, P, U, G, V, b as b$1, I as I$1, q, J as J$1, v as v$1 } from './geometryEngineAsync-1d54af4a.js';
import { v, m, a as m$2 } from './Polyline-56152656.js';
import { d as d$1 } from './geometry-160ffbb5.js';
import { H } from './unitUtils-5dcccb3c.js';
import './_commonjsHelpers-3cea27e3.js';
import './number-399be3ea.js';
import './Field-67832b5b.js';
import './JSONSupport-8dda8bae.js';
import './enumeration-da141e85.js';
import './fieldType-7f6b02ef.js';
import './featureConversionUtils-dd47b9b4.js';
import './OptimizedFeature-53745eb6.js';
import './OptimizedFeatureSet-27736f1f.js';
import './FeatureSetReader-732e84ff.js';
import './centroid-5b845b7c.js';
import './sizeVariableUtils-4d3662df.js';
import './workers-a7d3d5f6.js';
import './assets-1ab0ccbe.js';
import './intl-0d87e9f4.js';
import './number-2da43364.js';
import './messages-1d31e380.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function un(t){return 0===a.indexOf("4.")?v.fromExtent(t):new v({spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]})}function sn(n){if(z(n,2,2),n[0]instanceof p&&n[1]instanceof p);else if(n[0]instanceof p&&null===n[1]);else if(n[1]instanceof p&&null===n[0]);else if(null!==n[0]||null!==n[1])throw new Error("Illegal Argument")}function an(n,t){if("polygon"!==n.type&&"polyline"!==n.type&&"extent"!==n.type)return k(0);let r=1;if(n.spatialReference.vcsWkid||n.spatialReference.latestVcsWkid){r=s(n.spatialReference)/H(n.spatialReference);}let e$1=0;if("polyline"===n.type)for(const i of n.paths)for(let n=1;n<i.length;n++)e$1+=e(i[n],i[n-1],r);else if("polygon"===n.type)for(const i of n.rings){for(let n=1;n<i.length;n++)e$1+=e(i[n],i[n-1],r);(i[0][0]!==i[i.length-1][0]||i[0][1]!==i[i.length-1][1]||void 0!==i[0][2]&&i[0][2]!==i[i.length-1][2])&&(e$1+=e(i[0],i[i.length-1],r));}else "extent"===n.type&&(e$1+=2*e([n.xmin,n.ymin,0],[n.xmax,n.ymin,0],r),e$1+=2*e([n.xmin,n.ymin,0],[n.xmin,n.ymax,0],r),e$1*=2,e$1+=4*Math.abs(O(n.zmax,0)*r-O(n.zmin,0)*r));const o=new m({hasZ:!1,hasM:!1,spatialReference:n.spatialReference,paths:[[0,0],[0,e$1]]});return F(o,t)}function fn(n){"async"===n.mode&&(n.functions.disjoint=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){return sn(r=me(r)),null===r[0]||null===r[1]||S(r[0],r[1])}))},n.functions.intersects=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){return sn(r=me(r)),null!==r[0]&&null!==r[1]&&g(r[0],r[1])}))},n.functions.touches=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){return sn(r=me(r)),null!==r[0]&&null!==r[1]&&A(r[0],r[1])}))},n.functions.crosses=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){return sn(r=me(r)),null!==r[0]&&null!==r[1]&&w(r[0],r[1])}))},n.functions.within=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){return sn(r=me(r)),null!==r[0]&&null!==r[1]&&x(r[0],r[1])}))},n.functions.contains=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){return sn(r=me(r)),null!==r[0]&&null!==r[1]&&p$1(r[0],r[1])}))},n.functions.overlaps=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){return sn(r=me(r)),null!==r[0]&&null!==r[1]&&O$1(r[0],r[1])}))},n.functions.equals=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){return z(r,2,2),r[0]===r[1]||(r[0]instanceof p&&r[1]instanceof p?d(r[0],r[1]):!(!E(r[0])||!E(r[1]))&&r[0].getTime()===r[1].getTime())}))},n.functions.relate=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){if(r=me(r),z(r,3,3),r[0]instanceof p&&r[1]instanceof p)return h(r[0],r[1],$(r[2]));if(r[0]instanceof p&&null===r[1])return !1;if(r[1]instanceof p&&null===r[0])return !1;if(null===r[0]&&null===r[1])return !1;throw new Error("Illegal Argument")}))},n.functions.intersection=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){return sn(r=me(r)),null===r[0]||null===r[1]?null:j(r[0],r[1])}))},n.functions.union=function(r,e){return n.standardFunctionAsync(r,e,(function(n,e,i){const l=[];if(0===(i=me(i)).length)throw new Error("Function called with wrong number of Parameters");if(1===i.length)if(I(i[0])){const n=me(i[0]);for(let t=0;t<n.length;t++)if(null!==n[t]){if(!(n[t]instanceof p))throw new Error("Illegal Argument");l.push(n[t]);}}else {if(!J(i[0])){if(i[0]instanceof p)return ae(c(i[0]),r.spatialReference);if(null===i[0])return null;throw new Error("Illegal Argument")}{const n=me(i[0].toArray());for(let t=0;t<n.length;t++)if(null!==n[t]){if(!(n[t]instanceof p))throw new Error("Illegal Argument");l.push(n[t]);}}}else for(let t=0;t<i.length;t++)if(null!==i[t]){if(!(i[t]instanceof p))throw new Error("Illegal Argument");l.push(i[t]);}return 0===l.length?null:k$1(l)}))},n.functions.difference=function(r,e){return n.standardFunctionAsync(r,e,(function(n,r,e){return sn(e=me(e)),null!==e[0]&&null===e[1]?c(e[0]):null===e[0]?null:R(e[0],e[1])}))},n.functions.symmetricdifference=function(r,e){return n.standardFunctionAsync(r,e,(function(n,r,e){return sn(e=me(e)),null===e[0]&&null===e[1]?null:null===e[0]?c(e[1]):null===e[1]?c(e[0]):E$1(e[0],e[1])}))},n.functions.clip=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){if(r=me(r),z(r,2,2),!(r[1]instanceof M)&&null!==r[1])throw new Error("Illegal Argument");if(null===r[0])return null;if(!(r[0]instanceof p))throw new Error("Illegal Argument");return null===r[1]?null:l(r[0],r[1])}))},n.functions.cut=function(r,e){return n.standardFunctionAsync(r,e,(function(n,r,e){if(e=me(e),z(e,2,2),!(e[1]instanceof m)&&null!==e[1])throw new Error("Illegal Argument");if(null===e[0])return [];if(!(e[0]instanceof p))throw new Error("Illegal Argument");return null===e[1]?[c(e[0])]:y(e[0],e[1])}))},n.functions.area=function(t,e){return n.standardFunctionAsync(t,e,(function(n,e,l){if(z(l,1,2),null===(l=me(l))[0])return 0;if(A$1(l[0]))return l[0].sumArea(r(O(l[1],-1)),!1,t.abortSignal).then((n=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(I(l[0])||J(l[0])){const n=de(l[0],t.spatialReference);return null===n?0:W(n,r(O(l[1],-1)))}if(!(l[0]instanceof p))throw new Error("Illegal Argument");return W(l[0],r(O(l[1],-1)))}))},n.functions.areageodetic=function(t,e){return n.standardFunctionAsync(t,e,(function(n,e,l){if(z(l,1,2),null===(l=me(l))[0])return 0;if(A$1(l[0]))return l[0].sumArea(r(O(l[1],-1)),!0,t.abortSignal).then((n=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(I(l[0])||J(l[0])){const n=de(l[0],t.spatialReference);return null===n?0:K(n,r(O(l[1],-1)))}if(!(l[0]instanceof p))throw new Error("Illegal Argument");return K(l[0],r(O(l[1],-1)))}))},n.functions.length=function(t,r){return n.standardFunctionAsync(t,r,(function(n,r,l){if(z(l,1,2),null===(l=me(l))[0])return 0;if(A$1(l[0]))return l[0].sumLength(a$1(O(l[1],-1)),!1,t.abortSignal).then((n=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(I(l[0])||J(l[0])){const n=he(l[0],t.spatialReference);return null===n?0:F(n,a$1(O(l[1],-1)))}if(!(l[0]instanceof p))throw new Error("Illegal Argument");return F(l[0],a$1(O(l[1],-1)))}))},n.functions.length3d=function(t,r){return n.standardFunctionAsync(t,r,(function(n,r,l){if(z(l,1,2),null===(l=me(l))[0])return 0;if(I(l[0])||J(l[0])){const n=he(l[0],t.spatialReference);return null===n?0:!0===n.hasZ?an(n,a$1(O(l[1],-1))):F(n,a$1(O(l[1],-1)))}if(!(l[0]instanceof p))throw new Error("Illegal Argument");return !0===l[0].hasZ?an(l[0],a$1(O(l[1],-1))):F(l[0],a$1(O(l[1],-1)))}))},n.functions.lengthgeodetic=function(t,r){return n.standardFunctionAsync(t,r,(function(n,r,l){if(z(l,1,2),null===(l=me(l))[0])return 0;if(A$1(l[0]))return l[0].sumLength(a$1(O(l[1],-1)),!0,t.abortSignal).then((n=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(I(l[0])||J(l[0])){const n=he(l[0],t.spatialReference);return null===n?0:M$1(n,a$1(O(l[1],-1)))}if(!(l[0]instanceof p))throw new Error("Illegal Argument");return M$1(l[0],a$1(O(l[1],-1)))}))},n.functions.distance=function(t,r){return n.standardFunctionAsync(t,r,(function(n,r,l){l=me(l),z(l,2,3);let u=l[0];(I(l[0])||J(l[0]))&&(u=pe(l[0],t.spatialReference));let f=l[1];if((I(l[1])||J(l[1]))&&(f=pe(l[1],t.spatialReference)),!(u instanceof p))throw new Error("Illegal Argument");if(!(f instanceof p))throw new Error("Illegal Argument");return m$1(u,f,a$1(O(l[2],-1)))}))},n.functions.distancegeodetic=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){r=me(r),z(r,2,3);const l=r[0],u=r[1];if(!(l instanceof b))throw new Error("Illegal Argument");if(!(u instanceof b))throw new Error("Illegal Argument");const s=new m({paths:[],spatialReference:l.spatialReference});return s.addPath([l,u]),M$1(s,a$1(O(r[2],-1)))}))},n.functions.densify=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){if(r=me(r),z(r,2,3),null===r[0])return null;if(!(r[0]instanceof p))throw new Error("Illegal Argument");const l=ee(r[1]);if(isNaN(l))throw new Error("Illegal Argument");if(l<=0)throw new Error("Illegal Argument");return r[0]instanceof v||r[0]instanceof m?P(r[0],l,a$1(O(r[2],-1))):r[0]instanceof M?P(un(r[0]),l,a$1(O(r[2],-1))):r[0]}))},n.functions.densifygeodetic=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){if(r=me(r),z(r,2,3),null===r[0])return null;if(!(r[0]instanceof p))throw new Error("Illegal Argument");const l=ee(r[1]);if(isNaN(l))throw new Error("Illegal Argument");if(l<=0)throw new Error("Illegal Argument");return r[0]instanceof v||r[0]instanceof m?U(r[0],l,a$1(O(r[2],-1))):r[0]instanceof M?U(un(r[0]),l,a$1(O(r[2],-1))):r[0]}))},n.functions.generalize=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){if(r=me(r),z(r,2,4),null===r[0])return null;if(!(r[0]instanceof p))throw new Error("Illegal Argument");const l=ee(r[1]);if(isNaN(l))throw new Error("Illegal Argument");return G(r[0],l,ie(O(r[2],!0)),a$1(O(r[3],-1)))}))},n.functions.buffer=function(r,l){return n.standardFunctionAsync(r,l,(function(n,r,l){if(l=me(l),z(l,2,3),null===l[0])return null;if(!(l[0]instanceof p))throw new Error("Illegal Argument");const u=ee(l[1]);if(isNaN(u))throw new Error("Illegal Argument");return 0===u?c(l[0]):V(l[0],u,a$1(O(l[2],-1)))}))},n.functions.buffergeodetic=function(r,l){return n.standardFunctionAsync(r,l,(function(n,r,l){if(l=me(l),z(l,2,3),null===l[0])return null;if(!(l[0]instanceof p))throw new Error("Illegal Argument");const u=ee(l[1]);if(isNaN(u))throw new Error("Illegal Argument");return 0===u?c(l[0]):b$1(l[0],u,a$1(O(l[2],-1)))}))},n.functions.offset=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){if(r=me(r),z(r,2,6),null===r[0])return null;if(!(r[0]instanceof v||r[0]instanceof m))throw new Error("Illegal Argument");const l=ee(r[1]);if(isNaN(l))throw new Error("Illegal Argument");const s=ee(O(r[4],10));if(isNaN(s))throw new Error("Illegal Argument");const a=ee(O(r[5],0));if(isNaN(a))throw new Error("Illegal Argument");return I$1(r[0],l,a$1(O(r[2],-1)),$(O(r[3],"round")).toLowerCase(),s,a)}))},n.functions.rotate=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){r=me(r),z(r,2,3);let e=r[0];if(null===e)return null;if(!(e instanceof p))throw new Error("Illegal Argument");e instanceof M&&(e=v.fromExtent(e));const l=ee(r[1]);if(isNaN(l))throw new Error("Illegal Argument");const u=O(r[2],null);if(null===u)return q(e,l);if(u instanceof b)return q(e,l,u);throw new Error("Illegal Argument")}))},n.functions.centroid=function(r,e){return n.standardFunctionAsync(r,e,(function(n,e,l){if(l=me(l),z(l,1,1),null===l[0])return null;let u$1=l[0];if((I(l[0])||J(l[0]))&&(u$1=pe(l[0],r.spatialReference)),null===u$1)return null;if(!(u$1 instanceof p))throw new Error("Illegal Argument");return u$1 instanceof b?ae(c(l[0]),r.spatialReference):u$1 instanceof v?u$1.centroid:u$1 instanceof m?l$1(u$1):u$1 instanceof m$2?u(u$1):u$1 instanceof M?u$1.center:null}))},n.functions.multiparttosinglepart=function(r,e){return n.standardFunctionAsync(r,e,(function(n,e,l){l=me(l),z(l,1,1);const u=[];if(null===l[0])return null;if(!(l[0]instanceof p))throw new Error("Illegal Argument");if(l[0]instanceof b)return [ae(c(l[0]),r.spatialReference)];if(l[0]instanceof M)return [ae(c(l[0]),r.spatialReference)];return J$1(l[0]).then((n=>{if(n instanceof v){const t=[],r=[];for(let e=0;e<n.rings.length;e++)if(n.isClockwise(n.rings[e])){const r=d$1({rings:[n.rings[e]],hasZ:!0===n.hasZ,hazM:!0===n.hasM,spatialReference:n.spatialReference.toJSON()});t.push(r);}else r.push({ring:n.rings[e],pt:n.getPoint(e,0)});for(let n=0;n<r.length;n++)for(let e=0;e<t.length;e++)if(t[e].contains(r[n].pt)){t[e].addRing(r[n].ring);break}return t}if(n instanceof m){const t=[];for(let r=0;r<n.paths.length;r++){const e=d$1({paths:[n.paths[r]],hasZ:!0===n.hasZ,hazM:!0===n.hasM,spatialReference:n.spatialReference.toJSON()});t.push(e);}return t}if(l[0]instanceof m$2){const n=ae(c(l[0]),r.spatialReference);for(let t=0;t<n.points.length;t++)u.push(n.getPoint(t));return u}return null}))}))},n.functions.issimple=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){if(r=me(r),z(r,1,1),null===r[0])return !0;if(!(r[0]instanceof p))throw new Error("Illegal Argument");return v$1(r[0])}))},n.functions.simplify=function(t,r){return n.standardFunctionAsync(t,r,(function(n,t,r){if(r=me(r),z(r,1,1),null===r[0])return null;if(!(r[0]instanceof p))throw new Error("Illegal Argument");return J$1(r[0])}))});}

export { fn as registerFunctions };
