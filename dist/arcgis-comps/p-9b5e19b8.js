import{a0 as a}from"./p-e58503d5.js";import{a as i}from"./p-765e6c28.js";import{h as e,s as t,u as n,v as o,b as s,g as l,y as r,D as m,o as p}from"./p-292d2320.js";import"./p-53bb6ab4.js";import"./p-b79fcce3.js";import"./p-8bcb4bb3.js";import"./p-e0d9ff4c.js";import"./p-e273719b.js";import"./p-74de0937.js";import"./p-2f398ed1.js";import"./p-d3105731.js";import"./p-a9a30646.js";import"./p-7a658388.js";let u=null;async function c(t,n){if(!n)return[];const o=t.field,s=t.valueExpression,l=t.normalizationType,r=t.normalizationField,m=t.normalizationTotal,p=[],c=t.viewInfoParams;let f=null,d=null;if(s){if(!u){const{arcadeUtils:a}=await i();u=a}f=u.createFunction(s),d=c&&u.getViewInfo({viewingMode:c.viewingMode,scale:c.scale,spatialReference:new a(c.spatialReference)})}return n.forEach((a=>{const i=a.attributes;let t;if(s){const i=u.createExecContext(a,d);t=u.executeFunction(f,i)}else i&&(t=i[o]);if(l&&isFinite(t)){const a=i&&parseFloat(i[r]);t=e(t,l,a,m)}p.push(t)})),p}async function f(a){const{attribute:i,featuresJSON:e}=a,{normalizationType:s,normalizationField:l,minValue:r,maxValue:m,fieldType:u}=i,f=await c({field:i.field,valueExpression:i.valueExpression,normalizationType:s,normalizationField:l,normalizationTotal:i.normalizationTotal,viewInfoParams:i.viewInfoParams},e),d=p({normalizationType:s,normalizationField:l,minValue:r,maxValue:m}),z={value:.5,fieldType:u},y="esriFieldTypeString"===u?t({values:f,supportsNullCount:d,percentileParams:z}):n({values:f,minValue:r,maxValue:m,useSampleStdDev:!s,supportsNullCount:d,percentileParams:z});return o(y,"esriFieldTypeDate"===u)}async function d(a){const{attribute:i,featuresJSON:e}=a,t=await c({field:i.field,valueExpression:i.valueExpression,viewInfoParams:i.viewInfoParams},e),n=s(t);return l(n,i.domain,i.returnAllCodedValues)}async function z(a){const{attribute:i,featuresJSON:e}=a,{field:t,normalizationType:n,normalizationField:o,normalizationTotal:s,classificationMethod:l}=i,p=await c({field:t,valueExpression:i.valueExpression,normalizationType:n,normalizationField:o,normalizationTotal:s,viewInfoParams:i.viewInfoParams},e),u=r(p,{field:t,normalizationType:n,normalizationField:o,normalizationTotal:s,classificationMethod:l,standardDeviationInterval:i.standardDeviationInterval,numClasses:i.numClasses,minValue:i.minValue,maxValue:i.maxValue});return m(u,l)}export{z as classBreaks,f as summaryStatistics,d as uniqueValues}