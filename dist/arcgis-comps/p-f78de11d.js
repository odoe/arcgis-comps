import{g as n}from"./p-7b6f6c18.js";function t(n,t){return n?t?4:3:t?3:2}function r(r,o,c,f,l){if(n(o)||!o.lengths.length)return null;const s="upperLeft"===(null==l?void 0:l.originPosition)?-1:1;r.lengths.length&&(r.lengths.length=0),r.coords.length&&(r.coords.length=0);const i=r.coords,m=[],b=c?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:N,coords:p}=o,a=t(c,f);let h=0;for(const n of N){const t=u(b,p,h,n,c,f,s);t&&m.push(t),h+=n*a}if(m.sort(((n,t)=>{let r=s*n[2]-s*t[2];return 0===r&&c&&(r=n[4]-t[4]),r})),m.length){let n=6*m[0][2];i[0]=m[0][0]/n,i[1]=m[0][1]/n,c&&(n=6*m[0][4],i[2]=0!==n?m[0][3]/n:0),(i[0]<b[0]||i[0]>b[1]||i[1]<b[2]||i[1]>b[3]||c&&(i[2]<b[4]||i[2]>b[5]))&&(i.length=0)}if(!i.length){const n=o.lengths[0]?e(p,0,N[0],c,f):null;if(!n)return null;i[0]=n[0],i[1]=n[1],c&&n.length>2&&(i[2]=n[2])}return r}function u(n,r,u,e,o,c,f=1){const l=t(o,c);let s=u,i=u+l,m=0,b=0,N=0,p=0,a=0;for(let t=0,u=e-1;t<u;t++,s+=l,i+=l){const t=r[s],u=r[s+1],e=r[s+2],c=r[i],f=r[i+1],l=r[i+2];let h=t*f-c*u;p+=h,m+=(t+c)*h,b+=(u+f)*h,o&&(h=t*l-c*e,N+=(e+l)*h,a+=h),t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t),u<n[2]&&(n[2]=u),u>n[3]&&(n[3]=u),o&&(e<n[4]&&(n[4]=e),e>n[5]&&(n[5]=e))}if(p*f>0&&(p*=-1),a*f>0&&(a*=-1),!p)return null;const h=[m,b,.5*p];return o&&(h[3]=N,h[4]=.5*a),h}function e(n,r,u,e,s){const i=t(e,s);let m=r,b=r+i,N=0,p=0,a=0,h=0;for(let t=0,r=u-1;t<r;t++,m+=i,b+=i){const t=n[m],r=n[m+1],u=n[m+2],s=n[b],i=n[b+1],d=n[b+2],g=e?c(t,r,u,s,i,d):o(t,r,s,i);if(g)if(N+=g,e){const n=l(t,r,u,s,i,d);p+=g*n[0],a+=g*n[1],h+=g*n[2]}else{const n=f(t,r,s,i);p+=g*n[0],a+=g*n[1]}}return N>0?e?[p/N,a/N,h/N]:[p/N,a/N]:u>0?e?[n[r],n[r+1],n[r+2]]:[n[r],n[r+1]]:null}function o(n,t,r,u){const e=r-n,o=u-t;return Math.sqrt(e*e+o*o)}function c(n,t,r,u,e,o){const c=u-n,f=e-t,l=o-r;return Math.sqrt(c*c+f*f+l*l)}function f(n,t,r,u){return[n+.5*(r-n),t+.5*(u-t)]}function l(n,t,r,u,e,o){return[n+.5*(u-n),t+.5*(e-t),r+.5*(o-r)]}export{r as e}