import{eJ as a,ad as i}from"./p-7b6f6c18.js";import{h as e,s as n,u as t,v as l,b as o,g as s,y as r,D as u,o as m}from"./p-06787bff.js";import"./p-227a5838.js";import"./p-2c47064f.js";let f=null;async function p(n,t){if(!t)return[];const l=n.field,o=n.valueExpression,s=n.normalizationType,r=n.normalizationField,u=n.normalizationTotal,m=[],p=n.viewInfoParams;let c=null,d=null;if(o){if(!f){const{arcadeUtils:i}=await a();f=i}c=f.createFunction(o),d=p&&f.getViewInfo({viewingMode:p.viewingMode,scale:p.scale,spatialReference:new i(p.spatialReference)})}return t.forEach((a=>{const i=a.attributes;let n;if(o){const i=f.createExecContext(a,d);n=f.executeFunction(c,i)}else i&&(n=i[l]);if(s&&isFinite(n)){const a=i&&parseFloat(i[r]);n=e(n,s,a,u)}m.push(n)})),m}async function c(a){const{attribute:i,featuresJSON:e}=a,{normalizationType:o,normalizationField:s,minValue:r,maxValue:u,fieldType:f}=i,c=await p({field:i.field,valueExpression:i.valueExpression,normalizationType:o,normalizationField:s,normalizationTotal:i.normalizationTotal,viewInfoParams:i.viewInfoParams},e),d=m({normalizationType:o,normalizationField:s,minValue:r,maxValue:u}),z={value:.5,fieldType:f},y="esriFieldTypeString"===f?n({values:c,supportsNullCount:d,percentileParams:z}):t({values:c,minValue:r,maxValue:u,useSampleStdDev:!o,supportsNullCount:d,percentileParams:z});return l(y,"esriFieldTypeDate"===f)}async function d(a){const{attribute:i,featuresJSON:e}=a,n=await p({field:i.field,valueExpression:i.valueExpression,viewInfoParams:i.viewInfoParams},e),t=o(n);return s(t,i.domain,i.returnAllCodedValues)}async function z(a){const{attribute:i,featuresJSON:e}=a,{field:n,normalizationType:t,normalizationField:l,normalizationTotal:o,classificationMethod:s}=i,m=await p({field:n,valueExpression:i.valueExpression,normalizationType:t,normalizationField:l,normalizationTotal:o,viewInfoParams:i.viewInfoParams},e),f=r(m,{field:n,normalizationType:t,normalizationField:l,normalizationTotal:o,classificationMethod:s,standardDeviationInterval:i.standardDeviationInterval,numClasses:i.numClasses,minValue:i.minValue,maxValue:i.maxValue});return u(f,s)}export{z as classBreaks,c as summaryStatistics,d as uniqueValues}