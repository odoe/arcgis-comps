import{e as r,d as e,ac as s,aL as a,bq as t,aa as i,aj as n,i as l,a6 as o,ep as u,W as c,bp as p,ad as d,N as y,af as f,d_ as v,H as B,ai as m}from"./p-c8bc3433.js";import{a as P,u as b,d as g,b as A,p as h,o as S}from"./p-ace7ce6b.js";import"./p-84bf99cb.js";import"./p-26cd027c.js";function j(r){return r.features.map((e=>{const s=d.fromJSON(r.spatialReference),a=n.fromJSON(e);return y(a.geometry).spatialReference=s,a}))}function k(r){return u(r.features.map((e=>(c(e.geometry)&&(e.geometry.spatialReference=r.spatialReference),p(e.geometry)))))}let w=class extends o{constructor(r){super(r),this.facilities=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.serviceAreaPolylines=null,this.serviceAreaPolygons=null}readFacilities(r){return k(r)}readPointBarriers(r,e){return k(e.barriers)}readPolylineBarriers(r){return k(r)}readPolygonBarriers(r){return k(r)}readIncidents(r,e){return j(e.saPolylines)}readServiceAreaPolygons(r,e){return j(e.saPolygons)}};r([e({type:[s]})],w.prototype,"facilities",void 0),r([a("facilities")],w.prototype,"readFacilities",null),r([e({type:[P]})],w.prototype,"messages",void 0),r([e({type:[s]})],w.prototype,"pointBarriers",void 0),r([a("pointBarriers",["barriers"])],w.prototype,"readPointBarriers",null),r([e({type:[t]})],w.prototype,"polylineBarriers",void 0),r([a("polylineBarriers")],w.prototype,"readPolylineBarriers",null),r([e({type:[i]})],w.prototype,"polygonBarriers",void 0),r([a("polygonBarriers")],w.prototype,"readPolygonBarriers",null),r([e({type:[n]})],w.prototype,"serviceAreaPolylines",void 0),r([a("serviceAreaPolylines",["saPolylines"])],w.prototype,"readIncidents",null),r([e({type:[n]})],w.prototype,"serviceAreaPolygons",void 0),r([a("serviceAreaPolygons",["saPolygons"])],w.prototype,"readServiceAreaPolygons",null),w=r([l("esri.rest.support.ServiceAreaSolveResult")],w);const x=w,N=S({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:"outSR",getter:r=>r.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},travelMode:!0});let R=class extends m{constructor(r){super(r),this.url=null}solve(r,e){return async function(r,e,s){const a=[],t=[],i={},n={},l=f(r),{path:o}=l;e.facilities&&e.facilities.features&&b(e.facilities.features,t,"facilities.features",i),e.pointBarriers&&e.pointBarriers.features&&b(e.pointBarriers.features,t,"pointBarriers.features",i),e.polylineBarriers&&e.polylineBarriers.features&&b(e.polylineBarriers.features,t,"polylineBarriers.features",i),e.polygonBarriers&&e.polygonBarriers.features&&b(e.polygonBarriers.features,t,"polygonBarriers.features",i);const u=await v(t);for(const r in i){const e=i[r];a.push(r),n[r]=u.slice(e[0],e[1])}if(g(n,a)){let r=null;try{r=await A(o,e.apiKey,s)}catch{}r&&!r.hasZ&&h(n,a)}for(const r in n)n[r].forEach(((s,a)=>{e.get(r)[a].geometry=s}));const c={...s,query:{...l.query,...N.toQueryParams(e),f:"json"}},{data:p}=await B(`${o}/solveServiceArea`,c);return x.fromJSON(p)}(this.url,r,e)}};r([e()],R.prototype,"url",void 0),R=r([l("esri.tasks.ServiceAreaTask")],R);const q=R;export default q;