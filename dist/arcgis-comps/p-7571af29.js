import{cQ as t,c8 as s,bd as r,ad as i,F as n,bW as e,bZ as o,c1 as c,cM as h}from"./p-566b0715.js";import{cF as a}from"./p-9ae46e68.js";import{t as u,b as f}from"./p-2794293b.js";import{t as l}from"./p-01158f1c.js";import{u as w}from"./p-c3efb223.js";function m(){return[0,0,0,0]}function p(t,s,r,i){return[t,s,r,i]}function M(t,s){return new Float64Array(t,s,4)}function b(){return p(1,1,1,1)}function g(){return p(1,0,0,0)}function _(){return p(0,1,0,0)}function j(){return p(0,0,1,0)}function y(){return p(0,0,0,1)}const A=b(),N=g(),V=_(),v=j(),I=y();Object.freeze({__proto__:null,create:m,clone:function(t){return[t[0],t[1],t[2],t[3]]},fromValues:p,fromArray:function(t){const s=[0,0,0,0],r=Math.min(4,t.length);for(let i=0;i<r;++i)s[i]=t[i];return s},createView:M,zeros:function(){return[0,0,0,0]},ones:b,unitX:g,unitY:_,unitZ:j,unitW:y,ZEROS:[0,0,0,0],ONES:A,UNIT_X:N,UNIT_Y:V,UNIT_Z:v,UNIT_W:I});class T{constructor(t){this.allocator=t,this._items=[],this._itemsPtr=0,this.grow()}get(){return 0===this._itemsPtr&&a((()=>this.reset())),this._itemsPtr===this._items.length&&this.grow(),this._items[this._itemsPtr++]}reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*U);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,U));t++)this._items.push(this.allocator())}}const U=1024;class Z{constructor(t,s,r){this.itemByteSize=t,this.itemCreate=s,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(r/this.itemByteSize)}get(){0===this._itemsPtr&&a((()=>this.reset()));const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const t=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let s=0;s<this._itemsPerBuffer;++s)this._items.push(this.itemCreate(t,s*this.itemByteSize));this._buffers.push(t)}return this._items[this._itemsPtr++]}reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=F){return new Z(16,w,t)}static createVec3f64(s=F){return new Z(24,t,s)}static createVec4f64(t=F){return new Z(32,M,t)}static createMat3f64(t=F){return new Z(72,u,t)}static createMat4f64(t=F){return new Z(128,l,t)}static createQuatf64(t=F){return new Z(32,f,t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}const F=4096;Z.createVec2f64();const O=Z.createVec3f64(),W=Z.createVec4f64();Z.createMat3f64();const d=Z.createMat4f64();function z(t){return t?{origin:s(t.origin),vector:s(t.vector)}:{origin:r(),vector:r()}}function E(t,s){const r=c(O.get(),s,t.origin),e=o(t.vector,r),h=o(t.vector,t.vector),a=n(e/h,0,1),u=c(O.get(),i(O.get(),t.vector,a),r);return o(u,u)}function Q(t,s,r,a,u){const{vector:f,origin:l}=t,w=c(O.get(),s,l),m=o(f,w)/h(f);return i(u,f,n(m,r,a)),e(u,u,t.origin)}Z.createQuatf64(),new T((()=>({origin:null,vector:null})));export{Q as A,p as a,E as b,O as c,d as f,m as n,W as r,T as s,z as v}