import{af as o}from"./p-e58503d5.js";import{p as r}from"./p-fb38a9d0.js";import{a as t}from"./p-e6fe5d89.js";import{c as n,r as e,o as f}from"./p-2f398ed1.js";import{c}from"./p-3c70d22f.js";import{t as p}from"./p-eb48bb01.js";function s(e,f,p){return function(e,f,p){const s=r(t(c.get(),f));if(s[2]=0,!e.unprojectFromRenderScreen(s,p.origin))return null;const u=r(t(c.get(),f));u[2]=1;const i=e.unprojectFromRenderScreen(u,c.get());return o(i)?null:(n(p.direction,i,p.origin),p)}(e,e.screenToRender(f,r(c.get())),p)}function u(o,t,n){return i(o,o.screenToRender(t,r(c.get())),n)}function i(r,t,p){e(p.origin,r.eye);const s=f(c.get(),t[0],t[1],1),u=r.unprojectFromRenderScreen(s,c.get());return o(u)?null:(n(p.direction,u,p.origin),p)}function a(o){o.fragment.uniforms.add("projInfo","vec4"),o.fragment.uniforms.add("zScale","vec2"),o.fragment.code.add(p`vec3 reconstructPosition(vec2 fragCoord, float depth) {
return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);
}`)}export{i as g,u as m,a as o,s}