import"./p-9ae46e68.js";import{F as t}from"./p-566b0715.js";function n(t,n,o,e){e.premultipliedAlpha&&function(t){const n=t.data,o=n.length;for(let t=0;t<o;t+=4){const o=n[t+3];if(o>0){const e=o/255;n[t+0]=n[t+0]/e,n[t+1]=n[t+1]/e,n[t+2]=n[t+2]/e}}}(t),o.width=t.width,o.height=t.height;const r=o.getContext("2d");r.putImageData(t,0,0),e.flipY&&function(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}(r);const a=r.getImageData(0,0,t.width,t.height),c=function(t,n){return t.toDataURL(f[n.format],n.quality/100)}(o,n);return o.width=0,o.height=0,{dataUrl:c,data:a}}function o(n,o){const e=function(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return g}}(n);return{format:e,quality:t(null!=o?o:p[e],0,100)}}function e(t,n){return n/Math.max(t[0],t[1])}function r(t,n,o){if(!t||!n)throw new Error("Cannot construct image data without dimensions");if(s)try{return new ImageData(t,n)}catch(t){s=!1}return i(t,n,o)}function a(t,n,o,e){if(!n||!o)throw new Error("Cannot construct image data without dimensions");if(s)try{return new ImageData(t,n,o)}catch(t){s=!1}const r=i(n,o,e);return r.data.set(t,0),r}function c(t,n,o,e=0,r=0,a=t.width-e,c=t.height-r,i=!1){const{data:u}=t,{width:s,height:f,data:g}=n,p=a/s,h=c/f,l=Math.ceil(p/2),m=Math.ceil(h/2),d=t.width;for(let t=0;t<f;t++)for(let n=0;n<s;n++){const a=4*(n+(i?f-t-1:t)*s);let c=0,j=0,w=0,M=0,y=0,C=0;const D=(t+.5)*h;for(let a=Math.floor(t*h);a<(t+1)*h;a++){const t=Math.abs(D-(a+.5))/m,i=(n+.5)*p,s=t*t;for(let t=Math.floor(n*p);t<(n+1)*p;t++){const n=Math.abs(i-(t+.5))/l,f=Math.sqrt(s+n*n);if(f>=1)continue;let g=2*f*f*f-3*f*f+1;const p=4*(e+t+(r+a)*d);C+=g*u[p+3],j+=g,!o&&u[p+3]<255&&(g=g*u[p+3]/255),w+=g*u[p],M+=g*u[p+1],y+=g*u[p+2],c+=g}}g[a]=w/c,g[a+1]=M/c,g[a+2]=y/c,g[a+3]=C/j}return n}function i(t,n,o){return o||(u||(u=document.createElement("canvas"),u.width=1,u.height=1),o=u),o.getContext("2d").createImageData(t,n)}let u=null,s=!0;const f={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},g="png",p={png:100,jpg:98,jpeg:98};export{n as a,c as d,r as f,e as g,o as l,a as u}