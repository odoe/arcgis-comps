import{gz as t,W as n,g as r,fm as o,ch as e,fr as s,fs as u,fv as c,fn as i,fN as a,cf as f,fq as l,ci as h,ft as p,s as d,g1 as g,h$ as m,fC as M,fF as y,fw as A,jL as j,cg as w,jB as R}from"./p-7b6f6c18.js";import{s as x,c as S,n as C,a as E,f as _}from"./p-54add8b0.js";import"./p-01158f1c.js";class b{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function P(t,n){if(!t){n=n||"assert";const t=new Error(n);throw t.stack&&console.log(t.stack),new b(n)}}class v{constructor(){this.id=t()}unload(){}}function O(t,n){return r(t)&&(t=[]),t.push(n),t}function T(t,n){if(r(t))return null;const o=t.filter((t=>t!==n));return 0===o.length?null:o}function $(t){return!!n(t)&&!t.visible}function q(t){return t?{origin:a(t.origin),direction:a(t.direction)}:{origin:f(),direction:f()}}function z(t,n=q()){return function(t,n,r=q()){return l(r.origin,t),l(r.direction,n),r}(t.origin,t.direction,n)}function B(t,n){const r=u(S.get(),i(S.get(),t.direction),c(S.get(),n,t.origin));return s(r,r)}function F(t,n){return s(t,n)/h(t)}new x((function(){return{origin:null,direction:null}}));const L=d.getLogger("esri.geometry.support.sphere");function N(){return C()}function V(t,n=N()){return g(n,t)}function W(t){t[0]=t[1]=t[2]=t[3]=0}function k(t){return Array.isArray(t)?t[3]:t}function D(t){return Array.isArray(t)?t:Y}function G(t,n,o){if(r(n))return!1;const{origin:e,direction:s}=n,u=H;u[0]=e[0]-t[0],u[1]=e[1]-t[1],u[2]=e[2]-t[2];const c=s[0]*s[0]+s[1]*s[1]+s[2]*s[2],i=2*(s[0]*u[0]+s[1]*u[1]+s[2]*u[2]),a=i*i-4*c*(u[0]*u[0]+u[1]*u[1]+u[2]*u[2]-t[3]*t[3]);if(a<0)return!1;const f=Math.sqrt(a);let l=(-i-f)/(2*c);const h=(-i+f)/(2*c);return(l<0||h<l&&h>0)&&(l=h),!(l<0||(o&&(o[0]=e[0]+s[0]*l,o[1]=e[1]+s[1]*l,o[2]=e[2]+s[2]*l),0))}const H=f();function I(t,n,r){const o=S.get(),c=_.get();u(o,n.origin,n.direction);const i=k(t);u(r,o,n.origin),e(r,r,1/h(r)*i);const a=K(t,n.origin),f=function(t,n){const r=s(t,n)/(h(t)*h(n));return-p(r)}(n.origin,r);return m(c),M(c,c,f+a,o),y(r,r,c),r}function J(t,n,r){const s=c(S.get(),n,D(t)),u=e(S.get(),s,t[3]/h(s));return o(r,u,D(t))}function K(t,n){const r=c(S.get(),n,D(t)),o=h(r),e=k(t),s=e+Math.abs(e-o);return p(e/s)}const Q=f();function U(t,n,r,o){const e=c(Q,n,D(t));switch(r){case 0:{const t=j(e,Q)[2];return w(o,-Math.sin(t),Math.cos(t),0)}case 1:{const t=j(e,Q),n=t[1],r=t[2],s=Math.sin(n);return w(o,-s*Math.cos(r),-s*Math.sin(r),Math.cos(n))}case 2:return i(o,e);default:return}}function X(t,n){const r=c(Z,n,D(t));return h(r)-t[3]}const Y=f(),Z=f();Object.freeze({__proto__:null,create:N,copy:V,fromCenterAndRadius:function(t,n){return E(t[0],t[1],t[2],n)},wrap:function(t){return t},clear:W,fromRadius:function(t){return t},getRadius:k,getCenter:D,fromValues:function(t,n,r,o){return E(t,n,r,o)},elevate:function(t,n,r){return t!==r&&l(r,t),r[3]=t[3]+n,r},setExtent:function(t,n,r){return L.error("sphere.setExtent is not yet supported"),t===r?r:V(t,r)},intersectRay:G,intersectsRay:function(t,n){return G(t,n,null)},intersectRayClosestSilhouette:function(t,n,r){if(G(t,n,r))return r;const s=I(t,n,S.get());return o(r,n.origin,e(S.get(),n.direction,A(n.origin,s)/h(n.direction))),r},closestPointOnSilhouette:I,closestPoint:function(t,n,r){return G(t,n,r)?r:(function(t,n,r){const u=s(t.direction,c(r,n,t.origin));o(r,t.origin,e(r,t.direction,u))}(n,D(t),r),J(t,r,r))},projectPoint:J,distanceToSilhouette:function(t,n){const r=c(S.get(),n,D(t)),o=R(r);return Math.sqrt(Math.abs(o-t[3]*t[3]))},angleToSilhouette:K,axisAt:U,altitudeAt:X,setAltitudeAt:function(t,n,r,s){const u=X(t,n),c=U(t,n,2,Z),i=e(Z,c,r-u);return o(s,n,i)}});export{W as C,N as P,$ as c,q as d,F as e,O as f,B as h,P as i,z as l,v as r,T as u}