import{e,d as r,i,m as a,bk as t}from"./p-9ae46e68.js";import{d as n}from"./p-566b0715.js";import{g as l,d as o}from"./p-fe01b82b.js";import{u as s}from"./p-f271906a.js";const y={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}},c=c=>{let p=class extends c{constructor(){super(...arguments),this.title=null}writeListMode(e,r,i,a){(a&&"ground"===a.layerContainerType||e&&l(this,i,{},a))&&(r[i]=e)}writeOperationalLayerType(e,r,i,a){!e||a&&"tables"===a.layerContainerType||(r.layerType=e)}writeTitle(e,r){r.title=e||"Layer"}read(e,r){r&&(r.layer=this),o(this,e,(r=>super.read(e,r)),r)}write(e,r){if(null!=r&&r.origin){const e=`${r.origin}/${r.layerContainerType||"operational-layers"}`,t=y[e];let n=t&&t[this.operationalLayerType];var i;if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(n=!1),!n)return null==(i=r.messages)||i.push(new a("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const n=super.write(e,{...r,layer:this}),l=!!r&&!!r.messages&&!!r.messages.filter((e=>e instanceof a&&"web-document-write:property-required"===e.name)).length;var o;return t(null==n?void 0:n.url)?(null==r||null==(o=r.messages)||o.push(new a("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&l?null:n}beforeSave(){}};return e([r({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],p.prototype,"id",void 0),e([r({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],p.prototype,"listMode",void 0),e([n("listMode")],p.prototype,"writeListMode",null),e([r({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],p.prototype,"operationalLayerType",void 0),e([n("operationalLayerType")],p.prototype,"writeOperationalLayerType",null),e([r(s)],p.prototype,"opacity",void 0),e([r({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],p.prototype,"title",void 0),e([n("title")],p.prototype,"writeTitle",null),e([r({type:Boolean,json:{name:"visibility",origins:{"web-document":{name:"visibility",default:!0},"portal-item":{name:"visibility",read:{source:["visible","visibility"]}}}}})],p.prototype,"visible",void 0),p=e([i("esri.layers.mixins.OperationalLayer")],p),p};export{c as y}