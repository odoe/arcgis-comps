import{A as t}from"./p-e58503d5.js";import{O as e,y as n}from"./p-765e6c28.js";async function i(i,o=i.popupTemplate){if(!t(o))return[];const r=await o.getRequiredFields(i.fieldsIndex),{lastEditInfoEnabled:l}=o,{objectIdField:a,typeIdField:d,globalIdField:s,relationships:c}=i;if(r.includes("*"))return["*"];const f=l?await e(i):[],p=n(i.fieldsIndex,[...r,...f]);return d&&p.push(d),p&&a&&i.fieldsIndex.has(a)&&-1===p.indexOf(a)&&p.push(a),p&&s&&i.fieldsIndex.has(s)&&-1===p.indexOf(s)&&p.push(s),c&&c.forEach((t=>{const{keyField:e}=t;p&&e&&i.fieldsIndex.has(e)&&-1===p.indexOf(e)&&p.push(e)})),p}function o(e,n){return e.popupTemplate?e.popupTemplate:t(n)&&n.defaultPopupTemplateEnabled&&t(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}export{o as d,i as t}