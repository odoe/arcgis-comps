import{cX as t}from"./p-e58503d5.js";import{t as s,b as i}from"./p-8f986f60.js";import{t as h}from"./p-2c84c65f.js";import{u as r}from"./p-746a9d8f.js";import{u as e}from"./p-d3105731.js";import{u as a}from"./p-4d38e149.js";class c{constructor(t){this.allocator=t,this._items=[],this._itemsPtr=0,this.grow()}get(){return 0===this._itemsPtr&&t((()=>this.reset())),this._itemsPtr===this._items.length&&this.grow(),this._items[this._itemsPtr++]}reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*o);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,o));t++)this._items.push(this.allocator())}}const o=1024;class n{constructor(t,s,i){this.itemByteSize=t,this.itemCreate=s,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(i/this.itemByteSize)}get(){0===this._itemsPtr&&t((()=>this.reset()));const s=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=s;){const t=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let s=0;s<this._itemsPerBuffer;++s)this._items.push(this.itemCreate(t,s*this.itemByteSize));this._buffers.push(t)}return this._items[this._itemsPtr++]}reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=f){return new n(16,r,t)}static createVec3f64(t=f){return new n(24,e,t)}static createVec4f64(t=f){return new n(32,a,t)}static createMat3f64(t=f){return new n(72,s,t)}static createMat4f64(t=f){return new n(128,h,t)}static createQuatf64(t=f){return new n(32,i,t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}const f=4096,u=n.createVec2f64(),p=n.createVec3f64(),m=n.createVec4f64();n.createMat3f64();const w=n.createMat4f64(),M=n.createQuatf64();export{p as c,w as f,M as o,m as r,c as s,u as t}