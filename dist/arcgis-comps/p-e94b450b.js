import{bc as t,A as s,af as i,S as o,e,d as r,i as n}from"./p-e58503d5.js";import{a as c}from"./p-7731c620.js";let h=class extends(c(o)){constructor(t){super(t),this.getCollections=null}initialize(){this.handles.add(t((()=>this.refresh())))}destroy(){this.getCollections=null}refresh(){const t=s(this.getCollections)?this.getCollections():null;if(i(t))return void this.removeAll();let o=0;for(const i of t)s(i)&&(o=this._processCollection(o,i));this.splice(o,this.length)}_createNewInstance(t){return new o(t)}_processCollection(t,s){if(!s)return t;const i=this.itemFilterFunction?this.itemFilterFunction:t=>!!t;for(const o of s)if(o){if(i(o)){const s=this.indexOf(o,t);s>=0?s!==t&&this.reorder(o,t):this.add(o,t),++t}if(this.getChildrenFunction){const s=this.getChildrenFunction(o);if(Array.isArray(s))for(const i of s)t=this._processCollection(t,i);else t=this._processCollection(t,s)}}return t}};e([r()],h.prototype,"getCollections",void 0),e([r()],h.prototype,"getChildrenFunction",void 0),e([r()],h.prototype,"itemFilterFunction",void 0),h=e([n("esri.core.CollectionFlattener")],h);const l=h;export{l as p}