import{e,f as i,p as t,M as n,u as l}from"./p-93765525.js";import{h as o}from"./p-765e6c28.js";const d=["oid","global-id"],r=["oid","global-id","guid"];function s({displayField:l,editFieldsInfo:d,fields:r,objectIdField:s,title:a},f){if(!r)return null;const p=function({editFieldsInfo:i,fields:t,objectIdField:n},l){return function(e,i){const t=e;return i&&(e=e.filter((e=>-1===i.indexOf(e.type)))),e===t&&(e=e.slice()),e.sort(u),e}(t,(null==l?void 0:l.ignoreFieldTypes)||m).map((t=>new e({fieldName:t.name,isEditable:F(t,i),label:t.alias,format:b(t),visible:c(t,{editFieldsInfo:i,objectIdField:n,visibleFieldNames:null==l?void 0:l.visibleFieldNames})})))}({editFieldsInfo:d,fields:r,objectIdField:s},f);if(!p.length)return null;const g=function(e){const i=o(e),{titleBase:t}=e;return i?`${t}: {${i.trim()}}`:t}({titleBase:a,fields:r,displayField:l}),$=[new i,new t];return new n({title:g,content:$,fieldInfos:p})}const a=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],c=(e,{editFieldsInfo:i,objectIdField:t,visibleFieldNames:n})=>n?n.has(e.name):!(f(e.name,i)||t&&e.name===t||d.indexOf(e.type)>-1||a.some((i=>i.test(e.name))));function u(e,i){return"oid"===e.type?-1:"oid"===i.type?1:p(e)?-1:p(i)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((i.alias||i.name).toLocaleLowerCase())}function f(e,i){if(!e||!i)return!1;const{creationDateField:t,creatorField:n,editDateField:l,editorField:o}=i;return-1!==[t&&t.toLowerCase(),n&&n.toLowerCase(),l&&l.toLowerCase(),o&&o.toLowerCase()].indexOf(e.toLowerCase())}function F(e,i){return e.editable&&-1===r.indexOf(e.type)&&!f(e.name,i)}function b(e){switch(e.type){case"small-integer":case"integer":case"single":return new l({digitSeparator:!0,places:0});case"double":return new l({digitSeparator:!0,places:2});case"date":return new l({dateFormat:"long-month-day-year"});default:return null}}function p(e){return"name"===(e.name&&e.name.toLowerCase())||"name"===(e.alias&&e.alias.toLowerCase())||void 0}const m=["geometry","blob","raster","guid","xml"];export{s as a}