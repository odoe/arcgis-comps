import{_ as n,z as t,u as r,r as u,d as o,c as e,e as f,F as c,a as i}from"./p-2f398ed1.js";import{A as s}from"./p-e58503d5.js";import{n as a}from"./p-d3105731.js";import"./p-95909347.js";import{r as p,c as m}from"./p-3c70d22f.js";function h(n=R){return[n[0],n[1],n[2],n[3]]}function M(n,t,r,u){return d(n,t,r,u,p.get())}function j(n,t=h()){return d(n[0],n[1],n[2],n[3],t)}function d(n,t,r,u,o=h()){return o[0]=n,o[1]=t,o[2]=r,o[3]=u,o}function l(n,t,r){return u(r,n),r[3]=t,r}function x(n,t,r){const u=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],o=Math.abs(u-1)>1e-5&&u>1e-12?1/Math.sqrt(u):1;return r[0]=t[0]*o,r[1]=t[1]*o,r[2]=t[2]*o,r[3]=-(r[0]*n[0]+r[1]*n[1]+r[2]*n[2]),r}function z(n,t,r,u=h()){const o=r[0]-t[0],e=r[1]-t[1],f=r[2]-t[2],c=n[0]-t[0],i=n[1]-t[1],s=n[2]-t[2],a=e*s-f*i,p=f*c-o*s,m=o*i-e*c,M=a*a+p*p+m*m,j=Math.abs(M-1)>1e-5&&M>1e-12?1/Math.sqrt(M):1;u[0]=a*j,u[1]=p*j,u[2]=m*j,u[3]=-(u[0]*n[0]+u[1]*n[1]+u[2]*n[2])}function A(n,r,u,o,f){if(n.count<3)return!1;n.getVec(u,b);let s=o,a=!1;for(;s<n.count-1&&!a;)n.getVec(s,g),s++,a=!c(b,g);if(!a)return!1;for(s=Math.max(s,f),a=!1;s<n.count&&!a;)n.getVec(s,k),s++,e(q,b,g),i(q,q),e(v,g,k),i(v,v),a=!c(b,k)&&!c(g,k)&&Math.abs(t(q,v))<F;return a?(z(b,g,k,r),!0):(0!==u||1!==o||2!==f)&&A(n,r,0,1,2)}const F=.99619469809,b=a(),g=a(),k=a(),q=a(),v=a();function w(n,r,u){return n!==u&&j(n,u),u[3]=-t(u,r),u}function y(n,t){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t}function B(t,r,u,o){return n(k,r,t),x(u,k,o)}function C(n,t,r,u){return P(n,t,e(m.get(),r,t),S,u)}function D(n,t,r){return!!s(t)&&P(n,t.origin,t.direction,T,r)}function E(n,t,r){return P(n,t.origin,t.vector,0,r)}function G(n,t,r){return P(n,t.origin,t.vector,1,r)}function H(n,t){return O(n,t)>=0}function I(n,t){return n[0]*(n[0]>0?t[0]:t[3])+n[1]*(n[1]>0?t[1]:t[4])+n[2]*(n[2]>0?t[2]:t[5])+n[3]>=0}function J(n,r){const u=t(n,r.ray.direction),o=-O(n,r.ray.origin);if(o<0&&u>=0)return!1;if(u>-1e-6&&u<1e-6)return o>0;if((o<0||u<0)&&!(o<0&&u<0))return!0;const e=o/u;return u>0?e<r.c1&&(r.c1=e):e>r.c0&&(r.c0=e),r.c0<=r.c1}function K(n,r){const u=t(n,r.ray.direction),o=-O(n,r.ray.origin);if(u>-1e-6&&u<1e-6)return o>0;const e=o/u;return u>0?e<r.c1&&(r.c1=e):e>r.c0&&(r.c0=e),r.c0<=r.c1}function L(n,t,u){const f=o(m.get(),n,-n[3]),c=N(n,e(m.get(),t,f),m.get());return r(u,c,f),u}function N(n,r,u){const f=o(m.get(),n,t(n,r));return e(u,r,f),u}function O(n,r){return t(n,r)+n[3]}function P(n,u,e,c,i){const s=t(n,e);if(0===s)return!1;let a=-(t(n,u)+n[3])/s;return 1&c&&(a=f(a,0,1)),!(!(4&c)&&a<0||!(8&c)&&a>1||(r(i,u,o(i,e,a)),0))}function Q(n){return n}const R=[0,0,1,0],S=12,T=8;export{y as A,B,C,D,E,G as F,H as I,I as K,J as L,M,K as N,L as O,N as P,O as R,Q as W,j as b,d as j,l as k,A as l,h as p,x as v,z as y,w as z}