const t=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],r=["آ","أ","إ","ا"],n=["ﻵ","ﻷ","ﻹ","ﻻ"],i=["ﻶ","ﻸ","ﻺ","ﻼ"],e=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],o=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],f=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],u=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],s=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],c=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],T=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],L=["ء","ف"],l=["غ","ي"],h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],R=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],A=11,B=12,_=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],U=[100,0,0,0,0,101,102,103,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,104,4,4,4,0,4,0,4,0,4,4,4,0,0,4,4,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,0,0,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,105,7,7,106,107],a=[[18,18,18,18,18,18,18,18,18,6,5,6,8,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,5,5,5,6,8,4,4,A,A,A,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,18,18,18,18,18,18,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,4,A,A,A,A,4,4,4,4,0,4,4,18,4,4,A,A,2,2,4,0,4,4,4,2,0,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,4,4,4,4,4,4,4,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,1,B,1,B,B,1,B,B,1,B,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4],[3,3,3,3,4,4,4,4,7,A,A,7,9,7,4,4,B,B,B,B,B,B,B,B,B,B,B,7,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,3,3,3,3,3,3,3,3,3,3,A,3,3,7,7,7,B,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,B,B,B,B,B,B,B,3,4,B,B,B,B,B,B,7,7,B,B,4,B,B,B,B,7,7,2,2,2,2,2,2,2,2,2,2,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,7,7,B,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,B,B,B,B,B,B,B,B,B,B,B,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,B,B,B,B,B,B,B,B,B,1,1,4,4,4,4,1,4,4,4,4,4],[8,8,8,8,8,8,8,8,8,8,8,18,18,18,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,A,A,A,A,A,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,18,18,18,18,18,4,4,4,4,4,18,18,18,18,18,18,2,0,4,4,2,2,2,2,2,2,10,10,4,4,4,0,2,2,2,2,2,2,2,2,2,2,10,10,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,4,4,4,4,4,1,B,1,1,1,1,1,1,1,1,1,1,10,1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,1,1,1,4,1,4,1,1,4,1,1,4,1,1,1,1,1,1,1,1,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,B,B,B,B,B,B,B,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,9,4,4,9,4,4,4,4,4,4,4,4,4,A,4,4,10,10,4,4,4,4,4,A,A,4,4,4,4,4,7,7,7,7,7,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,18],[4,4,4,A,A,A,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,4,4,4,A,A,4,4,4,A,A,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]];class d{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(t,e,u){if(this.sourceToTarget=[],this.targetToSource=[],!t)return"";if(function(t,r,n){j=[],W=[];for(let i=0;i<n;i++)t[i]=i,r[i]=i,j[i]=i}(this.sourceToTarget,this.targetToSource,t.length),!this.checkParameters(e,u))return t;u=this.outputFormat;let c=t;const L=Z,l=x((e=this.inputFormat).charAt(1)),h=x(u.charAt(1)),R=("I"===e.charAt(0)?"L":e.charAt(0))+l,A=("I"===u.charAt(0)?"L":u.charAt(0))+h,B=e.charAt(2)+u.charAt(2);L.defInFormat=R,L.defOutFormat=A,L.defSwap=B;const _=N(t,R,A,B,L);let U=!1;return"R"===u.charAt(1)?U=!0:"C"!==u.charAt(1)&&"D"!==u.charAt(1)||(U="rtl"===this.checkContextual(_)),this.sourceToTarget=j,this.targetToSource=function(t){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[t[n]]=n;return r}(this.sourceToTarget),z=this.targetToSource,c=e.charAt(3)===u.charAt(3)?_:"S"===u.charAt(3)?function(t,r,e){if(0===r.length)return"";void 0===t&&(t=!0),void 0===e&&(e=!0);const u=(r=String(r)).split("");let c=0,T=1,L=u.length;t||(c=u.length-1,T=-1,L=1);const l=function(t,r,e,u,c){let T=0;const L=[];let l=0;for(let h=r;h*e<u;h+=e)if(F(t[h])||I(t[h])){if("ل"===t[h]&&p(t,h+e,e,u)){t[h]=k(t[h+e],0===T?n:i),h+=e,Y(t,h,e,u),c&&(L[l]=h,l++),T=0;continue}const r=t[h];t[h]=1===T?w(t,h+e,e,u)?y(t[h]):D(t[h],f):!0===w(t,h+e,e,u)?D(t[h],s):D(t[h],o),I(r)||(T=1),!0===O(r)&&(T=0)}else T=0;return L}(u,c,T,L,e);let h="";for(let r=0;r<u.length;r++)e&&C(l,l.length,r)>-1?(P(z,r,!t,-1),j.splice(r,1)):h+=u[r];return h}(U,_,!0):function(t,n,i){if(0===t.length)return"";void 0===i&&(i=!0),void 0===n&&(n=!0);let e="";const o=(t=String(t)).split("");for(let f=0;f<t.length;f++){let u=!1;if(o[f]>="ﹰ"&&o[f]<"\ufeff"){const s=t.charCodeAt(f);o[f]>="ﻵ"&&o[f]<="ﻼ"?(n?(f>0&&i&&" "===o[f-1]?e=e.substring(0,e.length-1)+"ل":(e+="ل",u=!0),e+=r[(s-65269)/2]):(e+=r[(s-65269)/2],e+="ل",f+1<t.length&&i&&" "===o[f+1]?f++:u=!0),u&&(P(z,f,!0,1),j.splice(f,0,j[f]))):e+=T[s-65136]}else e+=o[f]}return e}(_,U,!0),this.sourceToTarget=j,this.targetToSource=z,this.levels=W,c}_inputFormatSetter(t){if(!J.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=t}_outputFormatSetter(t){if(!J.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=t}checkParameters(t,r){return t?this._inputFormatSetter(t):t=this.inputFormat,r?this._outputFormatSetter(r):r=this.outputFormat,t!==r}checkContextual(t){let r=S(t);if("ltr"!==r&&"rtl"!==r){try{r=document.dir.toLowerCase()}catch(t){}"ltr"!==r&&"rtl"!==r&&(r="ltr")}return r}hasBidiChar(t){return K.test(t)}}function N(t,r,n,i,e){const o=function(t,r,n){if(void 0===r.inFormat&&(r.inFormat=n.defInFormat),void 0===r.outFormat&&(r.outFormat=n.defOutFormat),void 0===r.swap&&(r.swap=n.defSwap),r.inFormat===r.outFormat)return r;const i=r.inFormat.substring(0,1),e=r.outFormat.substring(0,1);let o,f=r.inFormat.substring(1,4),u=r.outFormat.substring(1,4);return"C"===f.charAt(0)&&(o=S(t),f="ltr"===o||"rtl"===o?o.toUpperCase():"L"===r.inFormat.charAt(2)?"LTR":"RTL",r.inFormat=i+f),"C"===u.charAt(0)&&(o=S(t),"rtl"===o?u="RTL":"ltr"===o?(o=function(t){const r=t.split("");return r.reverse(),S(r.join(""))}(t),u=o.toUpperCase()):u="L"===r.outFormat.charAt(2)?"LTR":"RTL",r.outFormat=e+u),r}(t,{inFormat:r,outFormat:n,swap:i},e);if(o.inFormat===o.outFormat)return t;n=o.outFormat,i=o.swap;const f=(r=o.inFormat).substring(0,1),u=r.substring(1,4),s=n.substring(0,1),c=n.substring(1,4);if(e.inFormat=r,e.outFormat=n,e.swap=i,"L"===f&&"VLTR"===n){if("LTR"===u)return e.dir=G,V(t,e);if("RTL"===u)return e.dir=H,V(t,e)}if("V"===f&&"V"===s)return e.dir="RTL"===u?H:G,g(t,e);if("L"===f&&"VRTL"===n)return"LTR"===u?(e.dir=G,t=V(t,e)):(e.dir=H,t=V(t,e)),g(t);if("VLTR"===r&&"LLTR"===n)return e.dir=G,V(t,e);if("V"===f&&"L"===s&&u!==c)return t=g(t),"RTL"===u?N(t,"LLTR","VLTR",i,e):N(t,"LRTL","VRTL",i,e);if("VRTL"===r&&"LRTL"===n)return N(t,"LRTL","VRTL",i,e);if("L"===f&&"L"===s){const r=e.swap;return e.swap=r.substr(0,1)+"N","RTL"===u?(e.dir=H,t=V(t,e),e.swap="N"+r.substr(1,2),e.dir=G,t=V(t,e)):(e.dir=G,t=V(t,e),e.swap="N"+r.substr(1,2),t=N(t,"VLTR","LRTL",e.swap,e)),t}return t}function S(t){const r=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return r?r[0]<="z"?"ltr":"rtl":""}function V(t,r){const n=t.split(""),i=[];return E(n,i,r),function(t,r,n){if(0!==n.hiLevel&&n.swap.substr(0,1)!==n.swap.substr(1,2))for(let n=0;n<t.length;n++)1===r[n]&&(t[n]=M(t[n]))}(n,i,r),v(2,n,i,r),v(1,n,i,r),W=i,n.join("")}function E(t,r,n){const i=t.length,e=n.dir?R:h;let o=0,f=-1;const u=[],s=[];n.hiLevel=n.dir,n.lastArabic=!1,n.hasUbatAl=!1,n.hasUbatB=!1,n.hasUbatS=!1;for(let r=0;r<i;r++)u[r]=m(t[r]);for(let c=0;c<i;c++){const i=o,T=b(t,u,s,c,n);s[c]=T,o=e[i][T];const L=240&o;o&=15;const l=e[o][$];if(r[c]=l,L>0)if(16===L){for(let t=f;t<c;t++)r[t]=1;f=-1}else f=-1;if(e[o][q])-1===f&&(f=c);else if(f>-1){for(let t=f;t<c;t++)r[t]=l;f=-1}5===u[c]&&(r[c]=0),n.hiLevel|=l}n.hasUbatS&&function(t,r,n,i){for(let e=0;e<n;e++)if(6===t[e]){r[e]=i.dir;for(let n=e-1;n>=0&&8===t[n];n--)r[n]=i.dir}}(u,r,i,n)}function m(t){const r=t.charCodeAt(0),n=U[r>>8];return n<100?n:a[n-100][255&r]}function g(t,r){const n=t.split("");if(r){const t=[];E(n,t,r),W=t}return n.reverse(),j.reverse(),n.join("")}function C(t,r,n){for(let i=0;i<r;i++)if(t[i]===n)return i;return-1}function F(t){for(let r=0;r<L.length;r++)if(t>=L[r]&&t<=l[r])return!0;return!1}function w(t,r,n,i){for(;r*n<i&&I(t[r]);)r+=n;return!!(r*n<i&&F(t[r]))}function p(t,n,i,e){for(;n*i<e&&I(t[n]);)n+=i;let o=" ";if(!(n*i<e))return!1;o=t[n];for(let t=0;t<r.length;t++)if(r[t]===o)return!0;return!1}function v(t,r,n,i){if(i.hiLevel<t)return;if(1===t&&i.dir===H&&!i.hasUbatB)return r.reverse(),void j.reverse();const e=r.length;let o,f,u,s,c,T=0;for(;T<e;){if(n[T]>=t){for(o=T+1;o<e&&n[o]>=t;)o++;for(f=T,u=o-1;f<u;f++,u--)s=r[f],r[f]=r[u],r[u]=s,c=j[f],j[f]=j[u],j[u]=c;T=o}T++}}function b(t,r,n,i,e){return{UBAT_L:()=>(e.lastArabic=!1,0),UBAT_R:()=>(e.lastArabic=!1,1),UBAT_ON:()=>4,UBAT_AN:()=>3,UBAT_EN:()=>e.lastArabic?3:2,UBAT_AL:()=>(e.lastArabic=!0,e.hasUbatAl=!0,1),UBAT_WS:()=>4,UBAT_CS:()=>{let t,o;return i<1||i+1>=r.length||2!==(t=n[i-1])&&3!==t||2!==(o=r[i+1])&&3!==o?4:(e.lastArabic&&(o=3),o===t?o:4)},UBAT_ES:()=>2===(i>0?n[i-1]:5)&&i+1<r.length&&2===r[i+1]?2:4,UBAT_ET:()=>{if(i>0&&2===n[i-1])return 2;if(e.lastArabic)return 4;let t=i+1;const o=r.length;for(;t<o&&r[t]===A;)t++;return t<o&&2===r[t]?2:4},UBAT_NSM:()=>{if("VLTR"===e.inFormat){const n=r.length;let e=i+1;for(;e<n&&r[e]===B;)e++;if(e<n){const n=t[i].charCodeAt[0],o=r[e];if((n>=1425&&n<=2303||64286===n)&&(1===o||7===o))return 1}}return i<1||5===r[i-1]?4:n[i-1]},UBAT_B:()=>(e.lastArabic=!0,e.hasUbatB=!0,e.dir),UBAT_S:()=>(e.hasUbatS=!0,4),UBAT_LRE:()=>(e.lastArabic=!1,4),UBAT_RLE:()=>(e.lastArabic=!1,4),UBAT_LRO:()=>(e.lastArabic=!1,4),UBAT_RLO:()=>(e.lastArabic=!1,4),UBAT_PDF:()=>(e.lastArabic=!1,4),UBAT_BN:()=>4}[_[r[i]]]()}function M(r){let n,i=0,e=t.length-1;for(;i<=e;)if(n=Math.floor((i+e)/2),r<t[n][0])e=n-1;else{if(!(r>t[n][0]))return t[n][1];i=n+1}return r}function O(t){for(let r=0;r<c.length;r++)if(c[r]===t)return!0;return!1}function y(t){for(let r=0;r<e.length;r++)if(t===e[r])return u[r];return t}function D(t,r){for(let n=0;n<e.length;n++)if(t===e[n])return r[n];return t}function I(t){return t>="ً"&&t<="ٕ"}function x(t){return"L"===t?"LTR":"R"===t?"RTL":"C"===t?"CLR":"D"===t?"CRL":""}function Y(t,r,n,i){for(;r*n<i&&I(t[r]);)r+=n;return r*n<i&&(t[r]=" ",!0)}function k(t,n){for(let i=0;i<r.length;i++)if(t===r[i])return n[i];return t}function P(t,r,n,i){for(let e=0;e<t.length;e++)(t[e]>r||!n&&t[e]===r)&&(t[e]+=i)}let j=[],z=[],W=[];const Z={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},$=5,q=6,G=0,H=1,J=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,K=/[\u0591-\u06ff\ufb1d-\ufefc]/;class Q{constructor(t=0,r=0,n=0,i=0){this.x=t,this.y=r,this.width=n,this.height=i}get isEmpty(){return this.width<=0||this.height<=0}union(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}export{d as C,Q as t}