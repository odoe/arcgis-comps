var r,n,t,u={exports:{}};r=u,n=function(){function r(r,t,i){i=i||2;var f,e,o,v,l,c,h,s=t&&t.length,d=s?t[0]*i:r.length,w=n(r,0,d,i,!0),M=[];if(!w||w.next===w.prev)return M;if(s&&(w=a(r,t,w,i)),r.length>80*i){f=o=r[0],e=v=r[1];for(var b=i;b<d;b+=i)(l=r[b])<f&&(f=l),(c=r[b+1])<e&&(e=c),l>o&&(o=l),c>v&&(v=c);h=0!==(h=Math.max(o-f,v-e))?1/h:0}return u(w,M,i,f,e,h),M}function n(r,n,t,u,i){var f,e;if(i===B(r,n,t,u)>0)for(f=n;f<t;f+=u)e=y(f,r[f],r[f+1],e);else for(f=t-u;f>=n;f-=u)e=y(f,r[f],r[f+1],e);if(e&&p(e,e.next)){var o=e.next;z(e),e=o}return e}function t(r,n){if(!r)return r;n||(n=r);var t,u=r;do{if(t=!1,u.steiner||!p(u,u.next)&&0!==k(u.prev,u,u.next))u=u.next;else{var i=u.prev;if(z(u),(u=n=i)===u.next)break;t=!0}}while(t||u!==n);return n}function u(r,n,a,v,l,c,h){if(r){!h&&c&&s(r,v,l,c);for(var d,w,M=r;r.prev!==r.next;)if(d=r.prev,w=r.next,c?f(r,v,l,c):i(r))n.push(d.i/a),n.push(r.i/a),n.push(w.i/a),z(r),r=w.next,M=w.next;else if((r=w)===M){h?1===h?u(r=e(t(r),n,a),n,a,v,l,c,2):2===h&&o(r,n,a,v,l,c):u(t(r),n,a,v,l,c,1);break}}}function i(r){var n=r.prev,t=r,u=r.next;if(k(n,t,u)>=0)return!1;for(var i=r.next.next;i!==r.prev;){if(M(n.x,n.y,t.x,t.y,u.x,u.y,i.x,i.y)&&k(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function f(r,n,t,u){var i=r.prev,f=r,e=r.next;if(k(i,f,e)>=0)return!1;for(var o=i.x>f.x?i.x>e.x?i.x:e.x:f.x>e.x?f.x:e.x,a=i.y>f.y?i.y>e.y?i.y:e.y:f.y>e.y?f.y:e.y,v=d(i.x<f.x?i.x<e.x?i.x:e.x:f.x<e.x?f.x:e.x,i.y<f.y?i.y<e.y?i.y:e.y:f.y<e.y?f.y:e.y,n,t,u),l=d(o,a,n,t,u),c=r.prevZ,h=r.nextZ;c&&c.z>=v&&h&&h.z<=l;){if(c!==r.prev&&c!==r.next&&M(i.x,i.y,f.x,f.y,e.x,e.y,c.x,c.y)&&k(c.prev,c,c.next)>=0)return!1;if(c=c.prevZ,h!==r.prev&&h!==r.next&&M(i.x,i.y,f.x,f.y,e.x,e.y,h.x,h.y)&&k(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;c&&c.z>=v;){if(c!==r.prev&&c!==r.next&&M(i.x,i.y,f.x,f.y,e.x,e.y,c.x,c.y)&&k(c.prev,c,c.next)>=0)return!1;c=c.prevZ}for(;h&&h.z<=l;){if(h!==r.prev&&h!==r.next&&M(i.x,i.y,f.x,f.y,e.x,e.y,h.x,h.y)&&k(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function e(r,n,u){var i=r;do{var f=i.prev,e=i.next.next;!p(f,e)&&x(f,i,i.next,e)&&j(f,e)&&j(e,f)&&(n.push(f.i/u),n.push(i.i/u),n.push(e.i/u),z(i),z(i.next),i=r=e),i=i.next}while(i!==r);return t(i)}function o(r,n,i,f,e,o){var a=r;do{for(var v=a.next.next;v!==a.prev;){if(a.i!==v.i&&b(a,v)){var l=q(a,v);return a=t(a,a.next),l=t(l,l.next),u(a,n,i,f,e,o),void u(l,n,i,f,e,o)}v=v.next}a=a.next}while(a!==r)}function a(r,u,i,f){var e,o,a,l=[];for(e=0,o=u.length;e<o;e++)(a=n(r,u[e]*f,e<o-1?u[e+1]*f:r.length,f,!1))===a.next&&(a.steiner=!0),l.push(w(a));for(l.sort(v),e=0;e<l.length;e++)i=t(i=c(l[e],i),i.next);return i}function v(r,n){return r.x-n.x}function l(r){if(r.next.prev===r)return r;let n=r;for(;;){const t=n.next;if(t.prev===n||t===n||t===r)break;n=t}return n}function c(r,n){var u=function(r,n){var t,u=n,i=r.x,f=r.y,e=-1/0;do{if(f<=u.y&&f>=u.next.y&&u.next.y!==u.y){var o=u.x+(f-u.y)*(u.next.x-u.x)/(u.next.y-u.y);if(o<=i&&o>e){if(e=o,o===i){if(f===u.y)return u;if(f===u.next.y)return u.next}t=u.x<u.next.x?u:u.next}}u=u.next}while(u!==n);if(!t)return null;if(i===e)return t;var a,v=t,l=t.x,c=t.y,s=1/0;u=t;do{i>=u.x&&u.x>=l&&i!==u.x&&M(f<c?i:e,f,l,c,f<c?e:i,f,u.x,u.y)&&(a=Math.abs(f-u.y)/(i-u.x),j(u,r)&&(a<s||a===s&&(u.x>t.x||u.x===t.x&&h(t,u)))&&(t=u,s=a)),u=u.next}while(u!==v);return t}(r,n);if(!u)return n;var i=q(u,r),f=t(u,u.next);let e=l(i);return t(e,e.next),f=l(f),l(n===u?f:n)}function h(r,n){return k(r.prev,r,n.prev)<0&&k(n.next,r,r.next)<0}function s(r,n,t,u){var i=r;do{if(null===i.z&&(i.z=d(i.x,i.y,n,t,u)),i.prev.next!==i||i.next.prev!==i)return i.prev.next=i,i.next.prev=i,s(r,n,t,u);i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,function(r){var n,t,u,i,f,e,o,a,v=1;do{for(t=r,r=null,f=null,e=0;t;){for(e++,u=t,o=0,n=0;n<v&&(o++,u=u.nextZ);n++);for(a=v;o>0||a>0&&u;)0!==o&&(0===a||!u||t.z<=u.z)?(i=t,t=t.nextZ,o--):(i=u,u=u.nextZ,a--),f?f.nextZ=i:r=i,i.prevZ=f,f=i;t=u}f.nextZ=null,v*=2}while(e>1)}(i)}function d(r,n,t,u,i){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-t)*i)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-u)*i)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function w(r){var n=r,t=r;do{(n.x<t.x||n.x===t.x&&n.y<t.y)&&(t=n),n=n.next}while(n!==r);return t}function M(r,n,t,u,i,f,e,o){return(i-e)*(n-o)-(r-e)*(f-o)>=0&&(r-e)*(u-o)-(t-e)*(n-o)>=0&&(t-e)*(f-o)-(i-e)*(u-o)>=0}function b(r,n){return r.next.i!==n.i&&r.prev.i!==n.i&&!function(r,n){var t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==n.i&&t.next.i!==n.i&&x(t,t.next,r,n))return!0;t=t.next}while(t!==r);return!1}(r,n)&&(j(r,n)&&j(n,r)&&function(r,n){var t=r,u=!1,i=(r.x+n.x)/2,f=(r.y+n.y)/2;do{t.y>f!=t.next.y>f&&t.next.y!==t.y&&i<(t.next.x-t.x)*(f-t.y)/(t.next.y-t.y)+t.x&&(u=!u),t=t.next}while(t!==r);return u}(r,n)&&(k(r.prev,r,n.prev)||k(r,n.prev,n))||p(r,n)&&k(r.prev,r,r.next)>0&&k(n.prev,n,n.next)>0)}function k(r,n,t){return(n.y-r.y)*(t.x-n.x)-(n.x-r.x)*(t.y-n.y)}function p(r,n){return r.x===n.x&&r.y===n.y}function x(r,n,t,u){var i=g(k(r,n,t)),f=g(k(r,n,u)),e=g(k(t,u,r)),o=g(k(t,u,n));return i!==f&&e!==o||!(0!==i||!m(r,t,n))||!(0!==f||!m(r,u,n))||!(0!==e||!m(t,r,u))||!(0!==o||!m(t,n,u))}function m(r,n,t){return n.x<=Math.max(r.x,t.x)&&n.x>=Math.min(r.x,t.x)&&n.y<=Math.max(r.y,t.y)&&n.y>=Math.min(r.y,t.y)}function g(r){return r>0?1:r<0?-1:0}function j(r,n){return k(r.prev,r,r.next)<0?k(r,n,r.next)>=0&&k(r,r.prev,n)>=0:k(r,n,r.prev)<0||k(r,r.next,n)<0}function q(r,n){var t=new A(r.i,r.x,r.y),u=new A(n.i,n.x,n.y),i=r.next,f=n.prev;return r.next=n,n.prev=r,t.next=i,i.prev=t,u.next=t,t.prev=u,f.next=u,u.prev=f,u}function y(r,n,t,u){var i=new A(r,n,t);return u?(i.next=u.next,i.prev=u,u.next.prev=i,u.next=i):(i.prev=i,i.next=i),i}function z(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function A(r,n,t){this.i=r,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function B(r,n,t,u){for(var i=0,f=n,e=t-u;f<t;f+=u)i+=(r[e]-r[f])*(r[f+1]+r[e+1]),e=f;return i}return r.deviation=function(r,n,t,u){var i=n&&n.length,f=Math.abs(B(r,0,i?n[0]*t:r.length,t));if(i)for(var e=0,o=n.length;e<o;e++)f-=Math.abs(B(r,n[e]*t,e<o-1?n[e+1]*t:r.length,t));var a=0;for(e=0;e<u.length;e+=3){var v=u[e]*t,l=u[e+1]*t,c=u[e+2]*t;a+=Math.abs((r[v]-r[c])*(r[l+1]-r[v+1])-(r[v]-r[l])*(r[c+1]-r[v+1]))}return 0===f&&0===a?0:Math.abs((a-f)/f)},r.flatten=function(r){for(var n=r[0][0].length,t={vertices:[],holes:[],dimensions:n},u=0,i=0;i<r.length;i++){for(var f=0;f<r[i].length;f++)for(var e=0;e<n;e++)t.vertices.push(r[i][f][e]);i>0&&t.holes.push(u+=r[i-1].length)}return t},r},void 0!==(t=n())&&(r.exports=t);const i=u.exports;export{i as x}