import{bx as e,by as s,aI as o,bz as t,bA as n,a7 as r,ao as l,bB as a,bC as m,x as i,bD as b,bE as y,bF as c,bG as u}from"./p-c8bc3433.js";import{a as p,t as f}from"./p-b7c042b3.js";import"./p-84bf99cb.js";function g(e,s,o,t){return e.name?e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?w(e,s,t):n(e,s,t).then((n=>S(n,e.name,s,o,t))):Promise.reject(new r("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function S(n,c,g,S,w){const d=n.data,j={portal:g&&g.portal||l.getDefault(),url:o(n.baseUrl),origin:"portal-item"},N=d.items.find((e=>e.name===c));if(!N)return Promise.reject(new r("symbolstyleutils:symbol-name-not-found",`The symbol name '${c}' could not be found`,{symbolName:c}));let P=a(m(N,S),j),h=N.thumbnail&&N.thumbnail.href;const x=N.thumbnail&&N.thumbnail.imageData;p()&&(P=f(P),h=f(h));const D={portal:g.portal,url:o(t(P)),origin:"portal-item"};return e(P,w).then((e=>{const o="cimRef"===S?u(e.data):e.data,t=s(o,D);if(t&&i(t)){if(h){const e=a(h,j);t.thumbnail=new b({url:e})}else x&&(t.thumbnail=new b({url:`data:image/png;base64,${x}`}));n.styleUrl?t.styleOrigin=new y({portal:g.portal,styleUrl:n.styleUrl,name:c}):n.styleName&&(t.styleOrigin=new y({portal:g.portal,styleName:n.styleName,name:c}))}return t}))}function w(n,r,l){const a=c.replace(/\{SymbolName\}/gi,n.name);return e(a,l).then((e=>{const n=u(e.data);return s(n,{portal:r.portal,url:o(t(a)),origin:"portal-item"})}))}export{S as fetchSymbolFromStyle,g as resolveWebStyleSymbol}