import{r as t,as as n,hU as e}from"./p-5420851c.js";async function i(i,a=i.popupTemplate){if(!t(a))return[];const o=await a.getRequiredFields(i.fieldsIndex),{lastEditInfoEnabled:r}=a,{objectIdField:l,typeIdField:s,globalIdField:d,relationships:c}=i;if(o.includes("*"))return["*"];const u=r?await n(i):[],f=e(i.fieldsIndex,[...o,...u]);return s&&f.push(s),f&&l&&i.fieldsIndex.has(l)&&-1===f.indexOf(l)&&f.push(l),f&&d&&i.fieldsIndex.has(d)&&-1===f.indexOf(d)&&f.push(d),c&&c.forEach((t=>{const{keyField:n}=t;f&&n&&i.fieldsIndex.has(n)&&-1===f.indexOf(n)&&f.push(n)})),f}function a(n,e){return n.popupTemplate?n.popupTemplate:t(e)&&e.defaultPopupTemplateEnabled&&t(n.defaultPopupTemplate)?n.defaultPopupTemplate:null}export{a as d,i as t}