import{r as t}from"./p-9ae46e68.js";import{O as e,aw as n}from"./p-566b0715.js";async function i(i,o=i.popupTemplate){if(!t(o))return[];const r=await o.getRequiredFields(i.fieldsIndex),{lastEditInfoEnabled:a}=o,{objectIdField:l,typeIdField:s,globalIdField:d,relationships:c}=i;if(r.includes("*"))return["*"];const f=a?await e(i):[],p=n(i.fieldsIndex,[...r,...f]);return s&&p.push(s),p&&l&&i.fieldsIndex.has(l)&&-1===p.indexOf(l)&&p.push(l),p&&d&&i.fieldsIndex.has(d)&&-1===p.indexOf(d)&&p.push(d),c&&c.forEach((t=>{const{keyField:e}=t;p&&e&&i.fieldsIndex.has(e)&&-1===p.indexOf(e)&&p.push(e)})),p}function o(e,n){return e.popupTemplate?e.popupTemplate:t(n)&&n.defaultPopupTemplateEnabled&&t(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}export{o as d,i as t}