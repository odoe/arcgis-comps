import{c as s,af as t,S as e,e as r,d as o,i,ag as n,ah as h}from"./p-e58503d5.js";import{h as a}from"./p-54330161.js";import{t as c,n as p}from"./p-efbca0ca.js";import{a as l}from"./p-7731c620.js";s.getLogger("esri.core.support.OwningCollection");let f=class extends(l(e)){constructor(s){super(s),this.handles.add([this.on("before-add",(s=>{t(s.item)&&s.preventDefault()})),this.on("after-add",(s=>this._own(s.item))),this.on("after-remove",(s=>this._release(s.item)))])}get owner(){return this._get("owner")}set owner(s){s!==this._get("owner")&&(this._releaseAll(),this._set("owner",s),this._ownAll())}_ownAll(){for(const s of this.items)this._own(s)}_releaseAll(){for(const s of this.items)this._release(s)}_createNewInstance(s){return this.itemType?new(e.ofType(this.itemType.Type))(s):new e(s)}};function w(s,t){return{type:s,cast:c,set(e){const r=p(e,this._get(t),s);r.owner=this,this._set(t,r)}}}r([o()],f.prototype,"owner",null),f=r([i("esri.core.support.OwningCollection")],f);let u=class extends f{_own(s){s.layer&&"remove"in s.layer&&s.layer!==this.owner&&s.layer.remove(s),s.layer=this.owner}_release(s){s.layer===this.owner&&(s.layer=null)}};r([n({Type:a,ensureType:h(a)})],u.prototype,"itemType",void 0),u=r([i("esri.support.GraphicsCollection")],u);export{w as a,u as c}