import{bl as t,r as i,t as s,E as e,e as o,d as r,i as n}from"./p-9ae46e68.js";import{a as h}from"./p-6ebb24ba.js";let l=class extends(h(e)){constructor(t){super(t),this.getCollections=null}initialize(){this.handles.add(t((()=>this.refresh())))}destroy(){this.getCollections=null}refresh(){const t=i(this.getCollections)?this.getCollections():null;if(s(t))return void this.removeAll();let e=0;for(const s of t)i(s)&&(e=this._processCollection(e,s));this.splice(e,this.length)}_createNewInstance(t){return new e(t)}_processCollection(t,i){if(!i)return t;const s=this.itemFilterFunction?this.itemFilterFunction:t=>!!t;for(const e of i)if(e){if(s(e)){const i=this.indexOf(e,t);i>=0?i!==t&&this.reorder(e,t):this.add(e,t),++t}if(this.getChildrenFunction){const i=this.getChildrenFunction(e);if(Array.isArray(i))for(const s of i)t=this._processCollection(t,s);else t=this._processCollection(t,i)}}return t}};o([r()],l.prototype,"getCollections",void 0),o([r()],l.prototype,"getChildrenFunction",void 0),o([r()],l.prototype,"itemFilterFunction",void 0),l=o([n("esri.core.CollectionFlattener")],l);const c=l;export{c as p}