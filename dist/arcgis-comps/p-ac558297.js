import{gz as t,W as n,g as r,fm as e,ch as o,fr as s,fs as u,fv as c,fn as i,fN as a,cf as f,fq as l,ci as h,ft as p,s as d,g1 as g,h$ as m,fC as M,fF as y,fw as A,jL as j,cg as w,jB as R}from"./p-c8bc3433.js";import{s as x,c as S,n as C,a as E,f as _}from"./p-353228be.js";import"./p-01158f1c.js";class b{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function P(t,n){if(!t){n=n||"assert";const t=new Error(n);throw t.stack&&console.log(t.stack),new b(n)}}class v{constructor(){this.id=t()}unload(){}}function O(t,n){return r(t)&&(t=[]),t.push(n),t}function T(t,n){if(r(t))return null;const e=t.filter((t=>t!==n));return 0===e.length?null:e}function $(t){return!!n(t)&&!t.visible}function q(t){return t?{origin:a(t.origin),direction:a(t.direction)}:{origin:f(),direction:f()}}function z(t,n=q()){return function(t,n,r=q()){return l(r.origin,t),l(r.direction,n),r}(t.origin,t.direction,n)}function B(t,n){const r=u(S.get(),i(S.get(),t.direction),c(S.get(),n,t.origin));return s(r,r)}function F(t,n){return s(t,n)/h(t)}new x((function(){return{origin:null,direction:null}}));const L=d.getLogger("esri.geometry.support.sphere");function N(){return C()}function V(t,n=N()){return g(n,t)}function W(t){t[0]=t[1]=t[2]=t[3]=0}function k(t){return Array.isArray(t)?t[3]:t}function D(t){return Array.isArray(t)?t:Y}function G(t,n,e){if(r(n))return!1;const{origin:o,direction:s}=n,u=H;u[0]=o[0]-t[0],u[1]=o[1]-t[1],u[2]=o[2]-t[2];const c=s[0]*s[0]+s[1]*s[1]+s[2]*s[2],i=2*(s[0]*u[0]+s[1]*u[1]+s[2]*u[2]),a=i*i-4*c*(u[0]*u[0]+u[1]*u[1]+u[2]*u[2]-t[3]*t[3]);if(a<0)return!1;const f=Math.sqrt(a);let l=(-i-f)/(2*c);const h=(-i+f)/(2*c);return(l<0||h<l&&h>0)&&(l=h),!(l<0||(e&&(e[0]=o[0]+s[0]*l,e[1]=o[1]+s[1]*l,e[2]=o[2]+s[2]*l),0))}const H=f();function I(t,n,r){const e=S.get(),c=_.get();u(e,n.origin,n.direction);const i=k(t);u(r,e,n.origin),o(r,r,1/h(r)*i);const a=K(t,n.origin),f=function(t,n){const r=s(t,n)/(h(t)*h(n));return-p(r)}(n.origin,r);return m(c),M(c,c,f+a,e),y(r,r,c),r}function J(t,n,r){const s=c(S.get(),n,D(t)),u=o(S.get(),s,t[3]/h(s));return e(r,u,D(t))}function K(t,n){const r=c(S.get(),n,D(t)),e=h(r),o=k(t),s=o+Math.abs(o-e);return p(o/s)}const Q=f();function U(t,n,r,e){const o=c(Q,n,D(t));switch(r){case 0:{const t=j(o,Q)[2];return w(e,-Math.sin(t),Math.cos(t),0)}case 1:{const t=j(o,Q),n=t[1],r=t[2],s=Math.sin(n);return w(e,-s*Math.cos(r),-s*Math.sin(r),Math.cos(n))}case 2:return i(e,o);default:return}}function X(t,n){const r=c(Z,n,D(t));return h(r)-t[3]}const Y=f(),Z=f();Object.freeze({__proto__:null,create:N,copy:V,fromCenterAndRadius:function(t,n){return E(t[0],t[1],t[2],n)},wrap:function(t){return t},clear:W,fromRadius:function(t){return t},getRadius:k,getCenter:D,fromValues:function(t,n,r,e){return E(t,n,r,e)},elevate:function(t,n,r){return t!==r&&l(r,t),r[3]=t[3]+n,r},setExtent:function(t,n,r){return L.error("sphere.setExtent is not yet supported"),t===r?r:V(t,r)},intersectRay:G,intersectsRay:function(t,n){return G(t,n,null)},intersectRayClosestSilhouette:function(t,n,r){if(G(t,n,r))return r;const s=I(t,n,S.get());return e(r,n.origin,o(S.get(),n.direction,A(n.origin,s)/h(n.direction))),r},closestPointOnSilhouette:I,closestPoint:function(t,n,r){return G(t,n,r)?r:(function(t,n,r){const u=s(t.direction,c(r,n,t.origin));e(r,t.origin,o(r,t.direction,u))}(n,D(t),r),J(t,r,r))},projectPoint:J,distanceToSilhouette:function(t,n){const r=c(S.get(),n,D(t)),e=R(r);return Math.sqrt(Math.abs(e-t[3]*t[3]))},angleToSilhouette:K,axisAt:U,altitudeAt:X,setAltitudeAt:function(t,n,r,s){const u=X(t,n),c=U(t,n,2,Z),i=o(Z,c,r-u);return e(s,n,i)}});export{W as C,N as P,$ as c,q as d,F as e,O as f,B as h,P as i,z as l,v as r,T as u}