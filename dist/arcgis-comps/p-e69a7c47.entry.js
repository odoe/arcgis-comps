import{r as e,h as s,g as t}from"./p-84bf99cb.js";import{e as n,d as i,i as a,p as o,J as l,$ as d,a1 as r,ap as h,o as c,w as p,x as u,z as x,n as v}from"./p-9ae46e68.js";import{e as g,t as w}from"./p-ada83011.js";let _=class extends o{constructor(e){super(e),this._viewpointHandle=null,this._handles=new l,this.group=null}initialize(){this._handles.add(d(this,"view.ui","expand",(e=>{const{target:s}=e;s&&s!==this&&s.expanded&&s.group&&s.group===this.group&&this._collapse()})))}destroy(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){const s=!!e;this._set("expanded",s);const t=this.get("view.ui");t&&t.emit("expand",{target:this}),this._viewpointHandleChange(s)}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&r(e,"ready",(()=>{this.view===e&&this._watchViewpoint()})))}_viewpointHandleChange(e){this._viewpointHandle&&(e?r(this.view,"stationary",(()=>this._viewpointHandle.resume())):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this._handles.remove(e),this._viewpointHandle=null;const{autoCollapse:s,view:t}=this;if(t&&s){const s=h(t,"3d"===t.type?"camera":"viewpoint",(()=>this._collapse()));this._handles.add(s,e),this._viewpointHandle=s}}_collapse(){this.expanded=!1}};n([i({value:!1})],_.prototype,"autoCollapse",null),n([i({value:!1})],_.prototype,"expanded",null),n([i()],_.prototype,"group",void 0),n([i({readOnly:!0})],_.prototype,"state",null),n([i({value:null})],_.prototype,"view",null),_=n([a("esri.widgets.Expand.ExpandViewModel")],_);const m=_;let C=class extends x{constructor(e,s){super(e,s),this.autoCollapse=null,this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expanded=null,this.expandTooltip="",this.group=null,this.iconNumber=0,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.view=null,this.viewModel=new m,this._handleKeyDown=e=>{const{closeOnEsc:s,_toggleButtonEl:t,expanded:n}=this;n&&s&&e.target!==t&&"Escape"===e.key&&("function"==typeof s?s(e):s)&&(this.expanded=!1,null==t||t.focus())}}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:e,messagesCommon:s,collapseTooltip:t,expandTooltip:n}=this;return e?t||s.collapse:n||s.expand}get collapseIconClass(){return"esri-icon-collapse"}set collapseIconClass(e){e?this._override("collapseIconClass",e):this._clearOverride("collapseIconClass")}get expandIconClass(){return g(this.content)?this.content.iconClass:"esri-icon-expand"}set expandIconClass(e){e?this._override("expandIconClass",e):this._clearOverride("expandIconClass")}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){const{mode:e}=this;return v("div",{class:this.classes("esri-expand esri-widget",{"esri-expand--auto":"auto"===e,"esri-expand--drawer":"drawer"===e,"esri-expand--floating":"floating"===e}),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())}renderContainer(){const{expanded:e}=this;return v("div",{class:this.classes("esri-expand__container",{"esri-expand__container--expanded":e})},this.renderPanel(),this.renderContent())}renderMask(){const{expanded:e}=this;return v("div",{bind:this,onclick:this._toggle,class:this.classes("esri-expand__mask",{"esri-expand__mask--expanded":e})})}renderBadgeNumber(){const{expanded:e,iconNumber:s}=this;return s&&!e?v("span",{key:"expand__icon-number",class:"esri-expand__icon-number"},s):null}renderPanelNumber(){const{iconNumber:e,expanded:s}=this;return e&&s?v("span",{key:"expand__expand-icon-number",class:this.classes("esri-expand__icon-number","esri-expand__icon-number--expanded")},e):null}renderIcon(){const{collapseIconClass:e,expandIconClass:s,expanded:t}=this,n={"esri-expand__icon--expanded":t,[e]:t,[s]:!t};return e===s&&(n[e]=!0),v("span",{"aria-hidden":"true",class:this.classes("esri-collapse__icon",n)})}renderTitle(){return v("span",{class:"esri-icon-font-fallback-text"},this.expandTitle)}renderExpandButton(){const{expanded:e,expandTitle:s,contentId:t}=this;return v("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":t,"aria-expanded":e?"true":"false",bind:this,class:"esri-widget--button",onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:s},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}renderPanel(){return v("div",{class:"esri-expand__panel"},this.renderExpandButton(),this.renderPanelNumber())}renderContent(){const{expanded:e,contentId:s}=this;return v("div",{id:s,role:"region",class:this.classes("esri-expand__content",{"esri-expand__content--expanded":e})},this.renderContentContainer())}renderContentContainer(){const e=this.content;return"string"==typeof e?v("div",{innerHTML:e}):g(e)?e.render():e instanceof HTMLElement?v("div",{bind:e,afterCreate:this._attachToNode}):w(e)?v("div",{bind:e.domNode,afterCreate:this._attachToNode}):null}_toggle(){this.toggle()}_attachToNode(e){e.appendChild(this)}_storeToggleButtonEl(e){this._toggleButtonEl=e}};n([i({readOnly:!0})],C.prototype,"contentId",null),n([i({readOnly:!0})],C.prototype,"expandTitle",null),n([c("viewModel.autoCollapse")],C.prototype,"autoCollapse",void 0),n([i()],C.prototype,"closeOnEsc",void 0),n([i()],C.prototype,"collapseIconClass",null),n([i()],C.prototype,"collapseTooltip",void 0),n([i()],C.prototype,"content",void 0),n([c("viewModel.expanded")],C.prototype,"expanded",void 0),n([i()],C.prototype,"expandIconClass",null),n([i()],C.prototype,"expandTooltip",void 0),n([c("viewModel.group")],C.prototype,"group",void 0),n([i()],C.prototype,"iconNumber",void 0),n([i({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],C.prototype,"label",void 0),n([i(),p("esri/widgets/Expand/t9n/Expand")],C.prototype,"messages",void 0),n([i(),p("esri/t9n/common")],C.prototype,"messagesCommon",void 0),n([i()],C.prototype,"mode",void 0),n([c("viewModel.view")],C.prototype,"view",void 0),n([i({type:m})],C.prototype,"viewModel",void 0),n([u()],C.prototype,"_toggle",null),C=n([a("esri.widgets.Expand")],C);const b=C;let f=class{constructor(s){e(this,s)}validateView(e){e&&(this.widget.view=e,this.widget.view.ui.add(this.widget,this.position))}componentWillLoad(){const e=new b({container:this.el});this.widget=e}componentDidRender(){const e=Array.from(this.el.children);for(let s of e)s.tagName.toLowerCase().includes("arcgis-")&&(s.view=this.view,this.widget.content=s,this.widget.expandIconClass=s.widget.iconClass)}render(){return s("div",{class:"expand-container"})}get el(){return t(this)}static get watchers(){return{view:["validateView"]}}};f.style="@import url('https://js.arcgis.com/next/esri/themes/light/main.css');";export{f as arcgis_expand}