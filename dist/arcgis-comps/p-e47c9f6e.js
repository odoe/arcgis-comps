import{x as o,q as r,r as e}from"./p-8bc9b36a.js";import{a as t,t as s}from"./p-b05e75b2.js";import{Z as m,c0 as i,s as p}from"./p-e58503d5.js";import{B as n}from"./p-efbca0ca.js";import{c as a}from"./p-8a919d07.js";import{l}from"./p-1f81b35d.js";import{b,m as f,p as c,j,c as y}from"./p-81b9df84.js";import"./p-a9a30646.js";import"./p-765e6c28.js";import"./p-b79fcce3.js";import"./p-7a658388.js";import"./p-e273719b.js";import"./p-74de0937.js";import"./p-2f398ed1.js";import"./p-d3105731.js";import"./p-fb38a9d0.js";import"./p-f94762ac.js";import"./p-ea916a39.js";import"./p-53bb6ab4.js";function u(o,r,e,t){return o.name?o.styleName&&"Esri2DPointSymbolsStyle"===o.styleName?g(o,r,t):f(o,r,t).then((s=>d(s,o.name,r,e,t))):Promise.reject(new p("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function d(f,j,u,d,g){const S=f.data,w={portal:u&&u.portal||n.getDefault(),url:m(f.baseUrl),origin:"portal-item"},N=S.items.find((o=>o.name===j));if(!N)return Promise.reject(new p("symbolstyleutils:symbol-name-not-found",`The symbol name '${j}' could not be found`,{symbolName:j}));let P=a(c(N,d),w),h=N.thumbnail&&N.thumbnail.href;const $=N.thumbnail&&N.thumbnail.imageData;t()&&(P=s(P),h=s(h));const q={portal:u.portal,url:m(i(P)),origin:"portal-item"};return b(P,g).then((t=>{const s="cimRef"===d?y(t.data):t.data,m=l(s,q);if(m&&o(m)){if(h){const o=a(h,w);m.thumbnail=new r({url:o})}else $&&(m.thumbnail=new r({url:`data:image/png;base64,${$}`}));f.styleUrl?m.styleOrigin=new e({portal:u.portal,styleUrl:f.styleUrl,name:j}):f.styleName&&(m.styleOrigin=new e({portal:u.portal,styleName:f.styleName,name:j}))}return m}))}function g(o,r,e){const t=j.replace(/\{SymbolName\}/gi,o.name);return b(t,e).then((o=>{const e=y(o.data);return l(e,{portal:r.portal,url:m(i(t)),origin:"portal-item"})}))}export{d as fetchSymbolFromStyle,u as resolveWebStyleSymbol}