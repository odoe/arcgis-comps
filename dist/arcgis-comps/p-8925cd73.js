import{af as n}from"./p-e58503d5.js";function t(n,t){return n?t?4:3:t?3:2}function r(r,o,c,f,l){if(n(o)||!o.lengths.length)return null;const s="upperLeft"===(null==l?void 0:l.originPosition)?-1:1;r.lengths.length&&(r.lengths.length=0),r.coords.length&&(r.coords.length=0);const i=r.coords,m=[],b=c?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:N,coords:p}=o,a=t(c,f);let d=0;for(const n of N){const t=e(b,p,d,n,c,f,s);t&&m.push(t),d+=n*a}if(m.sort(((n,t)=>{let r=s*n[2]-s*t[2];return 0===r&&c&&(r=n[4]-t[4]),r})),m.length){let n=6*m[0][2];i[0]=m[0][0]/n,i[1]=m[0][1]/n,c&&(n=6*m[0][4],i[2]=0!==n?m[0][3]/n:0),(i[0]<b[0]||i[0]>b[1]||i[1]<b[2]||i[1]>b[3]||c&&(i[2]<b[4]||i[2]>b[5]))&&(i.length=0)}if(!i.length){const n=o.lengths[0]?u(p,0,N[0],c,f):null;if(!n)return null;i[0]=n[0],i[1]=n[1],c&&n.length>2&&(i[2]=n[2])}return r}function e(n,r,e,u,o,c,f=1){const l=t(o,c);let s=e,i=e+l,m=0,b=0,N=0,p=0,a=0;for(let t=0,e=u-1;t<e;t++,s+=l,i+=l){const t=r[s],e=r[s+1],u=r[s+2],c=r[i],f=r[i+1],l=r[i+2];let d=t*f-c*e;p+=d,m+=(t+c)*d,b+=(e+f)*d,o&&(d=t*l-c*u,N+=(u+l)*d,a+=d),t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t),e<n[2]&&(n[2]=e),e>n[3]&&(n[3]=e),o&&(u<n[4]&&(n[4]=u),u>n[5]&&(n[5]=u))}if(p*f>0&&(p*=-1),a*f>0&&(a*=-1),!p)return null;const d=[m,b,.5*p];return o&&(d[3]=N,d[4]=.5*a),d}function u(n,r,e,u,s){const i=t(u,s);let m=r,b=r+i,N=0,p=0,a=0,d=0;for(let t=0,r=e-1;t<r;t++,m+=i,b+=i){const t=n[m],r=n[m+1],e=n[m+2],s=n[b],i=n[b+1],h=n[b+2],M=u?c(t,r,e,s,i,h):o(t,r,s,i);if(M)if(N+=M,u){const n=l(t,r,e,s,i,h);p+=M*n[0],a+=M*n[1],d+=M*n[2]}else{const n=f(t,r,s,i);p+=M*n[0],a+=M*n[1]}}return N>0?u?[p/N,a/N,d/N]:[p/N,a/N]:e>0?u?[n[r],n[r+1],n[r+2]]:[n[r],n[r+1]]:null}function o(n,t,r,e){const u=r-n,o=e-t;return Math.sqrt(u*u+o*o)}function c(n,t,r,e,u,o){const c=e-n,f=u-t,l=o-r;return Math.sqrt(c*c+f*f+l*l)}function f(n,t,r,e){return[n+.5*(r-n),t+.5*(e-t)]}function l(n,t,r,e,u,o){return[n+.5*(e-n),t+.5*(u-t),r+.5*(o-r)]}export{r as e}