import{da as t,s as n,a7 as e}from"./p-7b6f6c18.js";import"./p-1dd7027e.js";var r,s,i,a,c,o,u;!function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT",t[t.LABEL=4]="LABEL"}(r||(r={})),function(t){t[t.SUCCEEDED=0]="SUCCEEDED",t[t.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"}(s||(s={})),function(t){t[t.NONE=0]="NONE",t[t.MAP=1]="MAP",t[t.LABEL=2]="LABEL",t[t.LABEL_ALPHA=4]="LABEL_ALPHA",t[t.HITTEST=8]="HITTEST",t[t.HIGHLIGHT=16]="HIGHLIGHT",t[t.CLIP=32]="CLIP",t[t.DEBUG=64]="DEBUG",t[t.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(i||(i={})),function(t){t[t.SIZE=0]="SIZE",t[t.COLOR=1]="COLOR",t[t.OPACITY=2]="OPACITY",t[t.ROTATION=3]="ROTATION"}(a||(a={})),function(t){t[t.NONE=0]="NONE",t[t.OPACITY=1]="OPACITY",t[t.COLOR=2]="COLOR",t[t.ROTATION=4]="ROTATION",t[t.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",t[t.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",t[t.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",t[t.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(c||(c={})),function(t){t[t.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",t[t.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",t[t.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",t[t.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(o||(o={})),function(t){t[t.SPRITE=0]="SPRITE",t[t.GLYPH=1]="GLYPH"}(u||(u={}));class f{constructor(){this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}acquire(t,n,e,r,s,i,a,c,o){this.color=t,this.haloColor=n,this.haloSize=e,this.size=r,this.angle=s,this.offsetX=i,this.offsetY=a,this.hAnchor=c,this.vAnchor=o}release(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}}f.pool=new t(f);const l=n.getLogger("esri.views.2d.engine.webgl.Utils"),h="geometry",d=[{name:h,strideInBytes:36,divisor:0}],S=[{name:h,strideInBytes:12,divisor:0}],I=[{name:h,strideInBytes:40,divisor:0}],E=[{name:h,strideInBytes:36,divisor:0}],A=[{name:h,strideInBytes:36,divisor:0}];function T(t){const n={};for(const e of t)n[e.name]=e.strideInBytes;return n}const w=T([{name:h,strideInBytes:36,divisor:0}]),L=T(d),m=T(S),p=T(I),y=T(E),g=T(A);function M(t,n){switch(t){case r.MARKER:return w;case r.FILL:return n?m:L;case r.LINE:return p;case r.TEXT:return y;case r.LABEL:return g}}const v=[h],O=[h],_=[h],U=[h],C=[h];function N(t){switch(t){case r.MARKER:return v;case r.FILL:return O;case r.LINE:return _;case r.TEXT:return U;case r.LABEL:return C}}function b(t){switch(t%4){case 0:case 2:return 4;case 1:case 3:return 1}}function D(t,n){switch(n%4){case 0:case 2:return new Uint32Array(Math.floor(t*n/4));case 1:case 3:return new Uint8Array(t*n)}}function P(t,n){switch(n%4){case 0:case 2:return new Uint32Array(t);case 1:case 3:return new Uint8Array(t)}}function R(t){return null!=t}function B(t){return"number"==typeof t}function F(t){switch(t){case"butt":return 0;case"round":return 1;case"square":return 2;default:return l.error(new e("mapview-invalid-type",`Cap type ${t} is not a valid option. Defaulting to round`)),1}}function G(t){switch(t){case"miter":return 2;case"bevel":return 0;case"round":return 1;default:return l.error(new e("mapview-invalid-type",`Join type ${t} is not a valid option. Defaulting to round`)),1}}function H(t){switch(t){case"opacity":return a.OPACITY;case"color":return a.COLOR;case"rotation":return a.ROTATION;case"size":return a.SIZE;default:return l.error(`Cannot interpret unknown vv: ${t}`),null}}function Z(t,n,e,r,s,i,a){for(const n in i){const r=i[n].stride,a=b(r),c=i[n].data,o=e[n].data,u=r*s.vertexCount/a,f=r*t/a,l=r*s.vertexFrom/a;for(let t=0;t<u;++t)o[t+f]=c[t+l]}const c=s.indexCount;for(let e=0;e<c;++e)r[e+n]=a[e+s.indexFrom]-s.vertexFrom+t}const $={[h]:35044};function z(t,n){const e=[];for(let r=0;r<5;++r){const s=N(r),i={};for(const t of s)i[t]={data:n(r,t)};e.push({data:t(r),buffers:i})}return e}function V(t){switch(t){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}function k(t){switch(t){case 5121:return 1;case 32819:return 2;case 5126:return 4;default:return void l.error(new e("webgl-utils",`Unable to handle type ${t}`))}}function Y(t){switch(t){case 5121:return Uint8Array;case 32819:return Uint16Array;case 5126:return Float32Array;default:return void l.error(new e("webgl-utils",`Unable to handle type ${t}`))}}const q=t=>{const n=new Map;for(const e in t)for(const r of t[e])n.set(r.name,r.location);return n},x=t=>{const n={};for(const e in t){const r=t[e];n[e]=r.length?r[0].stride:0}return n},X=new Map,j=(t,n)=>{if(!X.has(t)){const e=function(t){const n={};for(const e in t){let r=0;n[e]=t[e].map((t=>{const n={...t,normalized:t.normalized||!1,divisor:t.divisor||0,offset:r,stride:0};return r+=t.count*V(t.type),n})),n[e].forEach((t=>t.stride=r))}return n}(n),r={strides:x(e),bufferLayouts:e,attributes:q(n)};X.set(t,r)}return X.get(t)};function J(t){t(r.FILL),t(r.LINE),t(r.MARKER),t(r.TEXT),t(r.LABEL)}const K=t=>"path"in t&&ot(t.path),Q=t=>"url"in t&&t.url||"imageData"in t&&t.imageData,W=t=>"imageData"in t&&t.imageData&&"contentType"in t&&t.contentType?`data:${t.contentType};base64,${t.imageData}`:"url"in t?t.url:null,tt=t=>"url"in t&&t.url&&t.url.includes(".gif")||"contentType"in t&&"image/gif"===t.contentType||"imageData"in t&&t.imageData.includes("data:image/gif"),nt=t=>"url"in t&&t.url&&t.url.includes(".png")||"contentType"in t&&"image/png"===t.contentType||"imageData"in t&&t.imageData.includes("data:image/png"),et=t=>t.type&&-1!==t.type.toLowerCase().indexOf("3d");function rt(t){switch(t.type){case"line":{const n=t;return"CIMSolidStroke"===n.cim.type&&!n.dashTemplate}case"fill":return"CIMSolidFill"===t.cim.type;case"esriSFS":return"esriSFSSolid"===t.style||"esriSFSNull"===t.style;case"esriSLS":return"esriSLSSolid"===t.style||"esriSLSNull"===t.style;default:return!1}}const st=t=>t.includes("data:image/svg+xml");function it(t){switch("cim"in t?t.cim.type:t.type){case"esriSMS":case"esriPMS":case"CIMPointSymbol":case"CIMVectorMarker":case"CIMPictureMarker":case"CIMCharacterMarker":return!1;default:return!0}}function at(t){return"maxVVSize"in t&&t.maxVVSize||"width"in t&&t.width||"size"in t&&t.size||0}function ct(t){const n=[];for(let e=0;e<t.length;e++)n.push(t.charCodeAt(e));return n}const ot=t=>{if(!t)return!1;const n=!t.replace(/[MmZzLlHhVvCcSsQqTtAa0-9-,.\s]/g,"").length,e=!/[a-zA-Z][a-zA-Z]/.test(t),r=!/^[0-9-,.]/.test(t),s=!/.*[-,.]$/.test(t.trim());return n&&e&&r&&s};export{R as $,c as A,D as B,M as C,r as E,i as I,k as J,z as K,B as N,u as O,G as P,Y as Q,b as U,H as V,o as _,tt as a,F as b,et as c,ct as d,it as f,Q as i,P as j,Z as k,st as l,at as m,K as n,W as o,$ as q,J as r,nt as s,j as t,rt as u}