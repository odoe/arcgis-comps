import{cr as e,cs as s,bF as t,ct as o,cu as n,b as r,W as a,cv as l,cw as m,aZ as i,cx as c,cy as y,cz as b,cA as u}from"./p-5420851c.js";import{a as p,t as f}from"./p-4d0ba4c4.js";import"./p-53bb6ab4.js";function g(e,s,t,o){return e.name?e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?S(e,s,o):n(e,s,o).then((n=>w(n,e.name,s,t,o))):Promise.reject(new r("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function w(n,b,g,w,S){const d=n.data,j={portal:g&&g.portal||a.getDefault(),url:t(n.baseUrl),origin:"portal-item"},N=d.items.find((e=>e.name===b));if(!N)return Promise.reject(new r("symbolstyleutils:symbol-name-not-found",`The symbol name '${b}' could not be found`,{symbolName:b}));let P=l(m(N,w),j),h=N.thumbnail&&N.thumbnail.href;const v=N.thumbnail&&N.thumbnail.imageData;p()&&(P=f(P),h=f(h));const x={portal:g.portal,url:t(o(P)),origin:"portal-item"};return e(P,S).then((e=>{const t="cimRef"===w?u(e.data):e.data,o=s(t,x);if(o&&i(o)){if(h){const e=l(h,j);o.thumbnail=new c({url:e})}else v&&(o.thumbnail=new c({url:`data:image/png;base64,${v}`}));n.styleUrl?o.styleOrigin=new y({portal:g.portal,styleUrl:n.styleUrl,name:b}):n.styleName&&(o.styleOrigin=new y({portal:g.portal,styleName:n.styleName,name:b}))}return o}))}function S(n,r,a){const l=b.replace(/\{SymbolName\}/gi,n.name);return e(l,a).then((e=>{const n=u(e.data);return s(n,{portal:r.portal,url:t(o(l)),origin:"portal-item"})}))}export{w as fetchSymbolFromStyle,g as resolveWebStyleSymbol}