import{Y as n,bE as r}from"./p-9ae46e68.js";import{w as t,z as e,E as l,$ as u,a as o,J as i,k as f,x as a,A as c,F as s,G as w,H as g,K as m,Q as h,e as p,U as E,V as I,X as A,_ as b,a0 as N,a1 as j}from"./p-4ddfade5.js";import{a8 as d,M as y,b2 as M,E as R,v as x,b3 as O,I as F,a7 as Z}from"./p-566b0715.js";import{S as k,g as v,A as z,w as G,x as H,p as J,O as K,d as P,h as Q,j as U,k as V,R as X,E as Y,l as _,y as q,W as B,K as C,F as D,M as L,m as S,P as T,U as W,G as $,V as nn,b as rn,I as tn,q as en,J as ln,v as un}from"./p-0cc8e004.js";import"./p-84bf99cb.js";import"./p-a184d75f.js";import"./p-023ccb69.js";import"./p-8e03c038.js";import"./p-fe01b82b.js";import"./p-32462343.js";import"./p-4003c7ae.js";import"./p-b2d0e2de.js";import"./p-db87794e.js";import"./p-9dcf03f7.js";import"./p-2a252a78.js";import"./p-dfc6337f.js";import"./p-4681e856.js";function on(r){return 0===n.indexOf("4.")?x.fromExtent(r):new x({spatialReference:r.spatialReference,rings:[[[r.xmin,r.ymin],[r.xmin,r.ymax],[r.xmax,r.ymax],[r.xmax,r.ymin],[r.xmin,r.ymin]]]})}function fn(n){if(e(n,2,2),n[0]instanceof d&&n[1]instanceof d);else if(n[0]instanceof d&&null===n[1]);else if(n[1]instanceof d&&null===n[0]);else if(null!==n[0]||null!==n[1])throw new Error("Illegal Argument")}function an(n,t){if("polygon"!==n.type&&"polyline"!==n.type&&"extent"!==n.type)return r(0);let e=1;(n.spatialReference.vcsWkid||n.spatialReference.latestVcsWkid)&&(e=N(n.spatialReference)/Z(n.spatialReference));let l=0;if("polyline"===n.type)for(const r of n.paths)for(let n=1;n<r.length;n++)l+=j(r[n],r[n-1],e);else if("polygon"===n.type)for(const r of n.rings){for(let n=1;n<r.length;n++)l+=j(r[n],r[n-1],e);(r[0][0]!==r[r.length-1][0]||r[0][1]!==r[r.length-1][1]||void 0!==r[0][2]&&r[0][2]!==r[r.length-1][2])&&(l+=j(r[0],r[r.length-1],e))}else"extent"===n.type&&(l+=2*j([n.xmin,n.ymin,0],[n.xmax,n.ymin,0],e),l+=2*j([n.xmin,n.ymin,0],[n.xmin,n.ymax,0],e),l*=2,l+=4*Math.abs(I(n.zmax,0)*e-I(n.zmin,0)*e));const u=new M({hasZ:!1,hasM:!1,spatialReference:n.spatialReference,paths:[[0,0],[0,l]]});return D(u,t)}function cn(n){"async"===n.mode&&(n.functions.disjoint=function(r,e){return n.standardFunctionAsync(r,e,(function(n,r,e){return fn(e=t(e)),null===e[0]||null===e[1]||k(e[0],e[1])}))},n.functions.intersects=function(r,e){return n.standardFunctionAsync(r,e,(function(n,r,e){return fn(e=t(e)),null!==e[0]&&null!==e[1]&&v(e[0],e[1])}))},n.functions.touches=function(r,e){return n.standardFunctionAsync(r,e,(function(n,r,e){return fn(e=t(e)),null!==e[0]&&null!==e[1]&&z(e[0],e[1])}))},n.functions.crosses=function(r,e){return n.standardFunctionAsync(r,e,(function(n,r,e){return fn(e=t(e)),null!==e[0]&&null!==e[1]&&G(e[0],e[1])}))},n.functions.within=function(r,e){return n.standardFunctionAsync(r,e,(function(n,r,e){return fn(e=t(e)),null!==e[0]&&null!==e[1]&&H(e[0],e[1])}))},n.functions.contains=function(r,e){return n.standardFunctionAsync(r,e,(function(n,r,e){return fn(e=t(e)),null!==e[0]&&null!==e[1]&&J(e[0],e[1])}))},n.functions.overlaps=function(r,e){return n.standardFunctionAsync(r,e,(function(n,r,e){return fn(e=t(e)),null!==e[0]&&null!==e[1]&&K(e[0],e[1])}))},n.functions.equals=function(r,t){return n.standardFunctionAsync(r,t,(function(n,r,t){return e(t,2,2),t[0]===t[1]||(t[0]instanceof d&&t[1]instanceof d?P(t[0],t[1]):!(!l(t[0])||!l(t[1]))&&t[0].getTime()===t[1].getTime())}))},n.functions.relate=function(r,l){return n.standardFunctionAsync(r,l,(function(n,r,l){if(l=t(l),e(l,3,3),l[0]instanceof d&&l[1]instanceof d)return Q(l[0],l[1],u(l[2]));if(l[0]instanceof d&&null===l[1])return!1;if(l[1]instanceof d&&null===l[0])return!1;if(null===l[0]&&null===l[1])return!1;throw new Error("Illegal Argument")}))},n.functions.intersection=function(r,e){return n.standardFunctionAsync(r,e,(function(n,r,e){return fn(e=t(e)),null===e[0]||null===e[1]?null:U(e[0],e[1])}))},n.functions.union=function(r,e){return n.standardFunctionAsync(r,e,(function(n,e,l){const u=[];if(0===(l=t(l)).length)throw new Error("Function called with wrong number of Parameters");if(1===l.length)if(o(l[0])){const n=t(l[0]);for(let r=0;r<n.length;r++)if(null!==n[r]){if(!(n[r]instanceof d))throw new Error("Illegal Argument");u.push(n[r])}}else{if(!i(l[0])){if(l[0]instanceof d)return f(a(l[0]),r.spatialReference);if(null===l[0])return null;throw new Error("Illegal Argument")}{const n=t(l[0].toArray());for(let r=0;r<n.length;r++)if(null!==n[r]){if(!(n[r]instanceof d))throw new Error("Illegal Argument");u.push(n[r])}}}else for(let n=0;n<l.length;n++)if(null!==l[n]){if(!(l[n]instanceof d))throw new Error("Illegal Argument");u.push(l[n])}return 0===u.length?null:V(u)}))},n.functions.difference=function(r,e){return n.standardFunctionAsync(r,e,(function(n,r,e){return fn(e=t(e)),null!==e[0]&&null===e[1]?a(e[0]):null===e[0]?null:X(e[0],e[1])}))},n.functions.symmetricdifference=function(r,e){return n.standardFunctionAsync(r,e,(function(n,r,e){return fn(e=t(e)),null===e[0]&&null===e[1]?null:null===e[0]?a(e[1]):null===e[1]?a(e[0]):Y(e[0],e[1])}))},n.functions.clip=function(r,l){return n.standardFunctionAsync(r,l,(function(n,r,l){if(l=t(l),e(l,2,2),!(l[1]instanceof y)&&null!==l[1])throw new Error("Illegal Argument");if(null===l[0])return null;if(!(l[0]instanceof d))throw new Error("Illegal Argument");return null===l[1]?null:_(l[0],l[1])}))},n.functions.cut=function(r,l){return n.standardFunctionAsync(r,l,(function(n,r,l){if(l=t(l),e(l,2,2),!(l[1]instanceof M)&&null!==l[1])throw new Error("Illegal Argument");if(null===l[0])return[];if(!(l[0]instanceof d))throw new Error("Illegal Argument");return null===l[1]?[a(l[0])]:q(l[0],l[1])}))},n.functions.area=function(r,l){return n.standardFunctionAsync(r,l,(function(n,l,u){if(e(u,1,2),null===(u=t(u))[0])return 0;if(c(u[0]))return u[0].sumArea(s(I(u[1],-1)),!1,r.abortSignal).then((n=>{if(r.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(o(u[0])||i(u[0])){const n=w(u[0],r.spatialReference);return null===n?0:B(n,s(I(u[1],-1)))}if(!(u[0]instanceof d))throw new Error("Illegal Argument");return B(u[0],s(I(u[1],-1)))}))},n.functions.areageodetic=function(r,l){return n.standardFunctionAsync(r,l,(function(n,l,u){if(e(u,1,2),null===(u=t(u))[0])return 0;if(c(u[0]))return u[0].sumArea(s(I(u[1],-1)),!0,r.abortSignal).then((n=>{if(r.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(o(u[0])||i(u[0])){const n=w(u[0],r.spatialReference);return null===n?0:C(n,s(I(u[1],-1)))}if(!(u[0]instanceof d))throw new Error("Illegal Argument");return C(u[0],s(I(u[1],-1)))}))},n.functions.length=function(r,l){return n.standardFunctionAsync(r,l,(function(n,l,u){if(e(u,1,2),null===(u=t(u))[0])return 0;if(c(u[0]))return u[0].sumLength(g(I(u[1],-1)),!1,r.abortSignal).then((n=>{if(r.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(o(u[0])||i(u[0])){const n=m(u[0],r.spatialReference);return null===n?0:D(n,g(I(u[1],-1)))}if(!(u[0]instanceof d))throw new Error("Illegal Argument");return D(u[0],g(I(u[1],-1)))}))},n.functions.length3d=function(r,l){return n.standardFunctionAsync(r,l,(function(n,l,u){if(e(u,1,2),null===(u=t(u))[0])return 0;if(o(u[0])||i(u[0])){const n=m(u[0],r.spatialReference);return null===n?0:!0===n.hasZ?an(n,g(I(u[1],-1))):D(n,g(I(u[1],-1)))}if(!(u[0]instanceof d))throw new Error("Illegal Argument");return!0===u[0].hasZ?an(u[0],g(I(u[1],-1))):D(u[0],g(I(u[1],-1)))}))},n.functions.lengthgeodetic=function(r,l){return n.standardFunctionAsync(r,l,(function(n,l,u){if(e(u,1,2),null===(u=t(u))[0])return 0;if(c(u[0]))return u[0].sumLength(g(I(u[1],-1)),!0,r.abortSignal).then((n=>{if(r.abortSignal.aborted)throw new Error("Operation has been cancelled.");return n}));if(o(u[0])||i(u[0])){const n=m(u[0],r.spatialReference);return null===n?0:L(n,g(I(u[1],-1)))}if(!(u[0]instanceof d))throw new Error("Illegal Argument");return L(u[0],g(I(u[1],-1)))}))},n.functions.distance=function(r,l){return n.standardFunctionAsync(r,l,(function(n,l,u){u=t(u),e(u,2,3);let f=u[0];(o(u[0])||i(u[0]))&&(f=h(u[0],r.spatialReference));let a=u[1];if((o(u[1])||i(u[1]))&&(a=h(u[1],r.spatialReference)),!(f instanceof d))throw new Error("Illegal Argument");if(!(a instanceof d))throw new Error("Illegal Argument");return S(f,a,g(I(u[2],-1)))}))},n.functions.distancegeodetic=function(r,l){return n.standardFunctionAsync(r,l,(function(n,r,l){l=t(l),e(l,2,3);const u=l[0],o=l[1];if(!(u instanceof R))throw new Error("Illegal Argument");if(!(o instanceof R))throw new Error("Illegal Argument");const i=new M({paths:[],spatialReference:u.spatialReference});return i.addPath([u,o]),L(i,g(I(l[2],-1)))}))},n.functions.densify=function(r,l){return n.standardFunctionAsync(r,l,(function(n,r,l){if(l=t(l),e(l,2,3),null===l[0])return null;if(!(l[0]instanceof d))throw new Error("Illegal Argument");const u=p(l[1]);if(isNaN(u))throw new Error("Illegal Argument");if(u<=0)throw new Error("Illegal Argument");return l[0]instanceof x||l[0]instanceof M?T(l[0],u,g(I(l[2],-1))):l[0]instanceof y?T(on(l[0]),u,g(I(l[2],-1))):l[0]}))},n.functions.densifygeodetic=function(r,l){return n.standardFunctionAsync(r,l,(function(n,r,l){if(l=t(l),e(l,2,3),null===l[0])return null;if(!(l[0]instanceof d))throw new Error("Illegal Argument");const u=p(l[1]);if(isNaN(u))throw new Error("Illegal Argument");if(u<=0)throw new Error("Illegal Argument");return l[0]instanceof x||l[0]instanceof M?W(l[0],u,g(I(l[2],-1))):l[0]instanceof y?W(on(l[0]),u,g(I(l[2],-1))):l[0]}))},n.functions.generalize=function(r,l){return n.standardFunctionAsync(r,l,(function(n,r,l){if(l=t(l),e(l,2,4),null===l[0])return null;if(!(l[0]instanceof d))throw new Error("Illegal Argument");const u=p(l[1]);if(isNaN(u))throw new Error("Illegal Argument");return $(l[0],u,E(I(l[2],!0)),g(I(l[3],-1)))}))},n.functions.buffer=function(r,l){return n.standardFunctionAsync(r,l,(function(n,r,l){if(l=t(l),e(l,2,3),null===l[0])return null;if(!(l[0]instanceof d))throw new Error("Illegal Argument");const u=p(l[1]);if(isNaN(u))throw new Error("Illegal Argument");return 0===u?a(l[0]):nn(l[0],u,g(I(l[2],-1)))}))},n.functions.buffergeodetic=function(r,l){return n.standardFunctionAsync(r,l,(function(n,r,l){if(l=t(l),e(l,2,3),null===l[0])return null;if(!(l[0]instanceof d))throw new Error("Illegal Argument");const u=p(l[1]);if(isNaN(u))throw new Error("Illegal Argument");return 0===u?a(l[0]):rn(l[0],u,g(I(l[2],-1)))}))},n.functions.offset=function(r,l){return n.standardFunctionAsync(r,l,(function(n,r,l){if(l=t(l),e(l,2,6),null===l[0])return null;if(!(l[0]instanceof x||l[0]instanceof M))throw new Error("Illegal Argument");const o=p(l[1]);if(isNaN(o))throw new Error("Illegal Argument");const i=p(I(l[4],10));if(isNaN(i))throw new Error("Illegal Argument");const f=p(I(l[5],0));if(isNaN(f))throw new Error("Illegal Argument");return tn(l[0],o,g(I(l[2],-1)),u(I(l[3],"round")).toLowerCase(),i,f)}))},n.functions.rotate=function(r,l){return n.standardFunctionAsync(r,l,(function(n,r,l){l=t(l),e(l,2,3);let u=l[0];if(null===u)return null;if(!(u instanceof d))throw new Error("Illegal Argument");u instanceof y&&(u=x.fromExtent(u));const o=p(l[1]);if(isNaN(o))throw new Error("Illegal Argument");const i=I(l[2],null);if(null===i)return en(u,o);if(i instanceof R)return en(u,o,i);throw new Error("Illegal Argument")}))},n.functions.centroid=function(r,l){return n.standardFunctionAsync(r,l,(function(n,l,u){if(u=t(u),e(u,1,1),null===u[0])return null;let c=u[0];if((o(u[0])||i(u[0]))&&(c=h(u[0],r.spatialReference)),null===c)return null;if(!(c instanceof d))throw new Error("Illegal Argument");return c instanceof R?f(a(u[0]),r.spatialReference):c instanceof x?c.centroid:c instanceof M?A(c):c instanceof O?b(c):c instanceof y?c.center:null}))},n.functions.multiparttosinglepart=function(r,l){return n.standardFunctionAsync(r,l,(function(n,l,u){u=t(u),e(u,1,1);const o=[];if(null===u[0])return null;if(!(u[0]instanceof d))throw new Error("Illegal Argument");return u[0]instanceof R||u[0]instanceof y?[f(a(u[0]),r.spatialReference)]:ln(u[0]).then((n=>{if(n instanceof x){const r=[],t=[];for(let e=0;e<n.rings.length;e++)if(n.isClockwise(n.rings[e])){const t=F({rings:[n.rings[e]],hasZ:!0===n.hasZ,hazM:!0===n.hasM,spatialReference:n.spatialReference.toJSON()});r.push(t)}else t.push({ring:n.rings[e],pt:n.getPoint(e,0)});for(let n=0;n<t.length;n++)for(let e=0;e<r.length;e++)if(r[e].contains(t[n].pt)){r[e].addRing(t[n].ring);break}return r}if(n instanceof M){const r=[];for(let t=0;t<n.paths.length;t++){const e=F({paths:[n.paths[t]],hasZ:!0===n.hasZ,hazM:!0===n.hasM,spatialReference:n.spatialReference.toJSON()});r.push(e)}return r}if(u[0]instanceof O){const n=f(a(u[0]),r.spatialReference);for(let r=0;r<n.points.length;r++)o.push(n.getPoint(r));return o}return null}))}))},n.functions.issimple=function(r,l){return n.standardFunctionAsync(r,l,(function(n,r,l){if(l=t(l),e(l,1,1),null===l[0])return!0;if(!(l[0]instanceof d))throw new Error("Illegal Argument");return un(l[0])}))},n.functions.simplify=function(r,l){return n.standardFunctionAsync(r,l,(function(n,r,l){if(l=t(l),e(l,1,1),null===l[0])return null;if(!(l[0]instanceof d))throw new Error("Illegal Argument");return ln(l[0])}))})}export{cn as registerFunctions}