import{e as t,a as n}from"./p-2794293b.js";import{a_ as a,cf as r,c4 as o,cg as c,ch as s,ci as e,cj as u,ck as h,cl as M,cm as i,cn as f,co as l,b_ as p,cp as m,bX as b,bd as d,bv as g,a$ as q,bZ as _}from"./p-566b0715.js";function j(t,n,a){a*=.5;const r=Math.sin(a);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(a),t}function x(t,n){const r=2*Math.acos(n[3]),o=Math.sin(r/2);return o>a?(t[0]=n[0]/o,t[1]=n[1]/o,t[2]=n[2]/o):(t[0]=1,t[1]=0,t[2]=0),r}function A(t,n,a){const r=n[0],o=n[1],c=n[2],s=n[3],e=a[0],u=a[1],h=a[2],M=a[3];return t[0]=r*M+s*e+o*h-c*u,t[1]=o*M+s*u+c*e-r*h,t[2]=c*M+s*h+r*u-o*e,t[3]=s*M-r*e-o*u-c*h,t}function y(t,n,r,o){const c=n[0],s=n[1],e=n[2],u=n[3];let h,M,i,f,l,p=r[0],m=r[1],b=r[2],d=r[3];return M=c*p+s*m+e*b+u*d,M<0&&(M=-M,p=-p,m=-m,b=-b,d=-d),1-M>a?(h=Math.acos(M),i=Math.sin(h),f=Math.sin((1-o)*h)/i,l=Math.sin(o*h)/i):(f=1-o,l=o),t[0]=f*c+l*p,t[1]=f*s+l*m,t[2]=f*e+l*b,t[3]=f*u+l*d,t}function v(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t}function E(t,n){const a=n[0]+n[4]+n[8];let r;if(a>0)r=Math.sqrt(a+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{let a=0;n[4]>n[0]&&(a=1),n[8]>n[3*a+a]&&(a=2);const o=(a+1)%3,c=(a+2)%3;r=Math.sqrt(n[3*a+a]-n[3*o+o]-n[3*c+c]+1),t[a]=.5*r,r=.5/r,t[3]=(n[3*o+c]-n[3*c+o])*r,t[o]=(n[3*o+a]+n[3*a+o])*r,t[c]=(n[3*c+a]+n[3*a+c])*r}return t}function L(t,n,a,r){const o=.5*Math.PI/180;n*=o,a*=o,r*=o;const c=Math.sin(n),s=Math.cos(n),e=Math.sin(a),u=Math.cos(a),h=Math.sin(r),M=Math.cos(r);return t[0]=c*u*M-s*e*h,t[1]=s*e*M+c*u*h,t[2]=s*u*h-c*e*M,t[3]=s*u*M+c*e*h,t}const X=r,Z=o,k=c,z=A,O=s,T=e,W=u,Y=h,$=Y,w=M,B=w,C=i,D=f,F=l,G=d(),H=g(1,0,0),I=g(0,1,0),J=t(),K=t(),N=n();Object.freeze({__proto__:null,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},setAxisAngle:j,getAxisAngle:x,multiply:A,rotateX:function(t,n,a){a*=.5;const r=n[0],o=n[1],c=n[2],s=n[3],e=Math.sin(a),u=Math.cos(a);return t[0]=r*u+s*e,t[1]=o*u+c*e,t[2]=c*u-o*e,t[3]=s*u-r*e,t},rotateY:function(t,n,a){a*=.5;const r=n[0],o=n[1],c=n[2],s=n[3],e=Math.sin(a),u=Math.cos(a);return t[0]=r*u-c*e,t[1]=o*u+s*e,t[2]=c*u+r*e,t[3]=s*u-o*e,t},rotateZ:function(t,n,a){a*=.5;const r=n[0],o=n[1],c=n[2],s=n[3],e=Math.sin(a),u=Math.cos(a);return t[0]=r*u+o*e,t[1]=o*u-r*e,t[2]=c*u+s*e,t[3]=s*u-c*e,t},calculateW:function(t,n){const a=n[0],r=n[1],o=n[2];return t[0]=a,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-a*a-r*r-o*o)),t},slerp:y,random:function(t){const n=q(),a=q(),r=q(),o=Math.sqrt(1-n),c=Math.sqrt(n);return t[0]=o*Math.sin(2*Math.PI*a),t[1]=o*Math.cos(2*Math.PI*a),t[2]=c*Math.sin(2*Math.PI*r),t[3]=c*Math.cos(2*Math.PI*r),t},invert:function(t,n){const a=n[0],r=n[1],o=n[2],c=n[3],s=a*a+r*r+o*o+c*c,e=s?1/s:0;return t[0]=-a*e,t[1]=-r*e,t[2]=-o*e,t[3]=c*e,t},conjugate:v,fromMat3:E,fromEuler:L,str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},copy:X,set:Z,add:k,mul:z,scale:O,dot:T,lerp:W,length:Y,len:$,squaredLength:w,sqrLen:B,normalize:C,exactEquals:D,equals:F,rotationTo:function(t,n,a){const r=_(n,a);return r<-.999999?(p(G,H,n),m(G)<1e-6&&p(G,I,n),b(G,G),j(t,G,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(p(G,n,a),t[0]=G[0],t[1]=G[1],t[2]=G[2],t[3]=1+r,C(t,t))},sqlerp:function(t,n,a,r,o,c){return y(J,n,o,c),y(K,a,r,c),y(t,J,K,2*c*(1-c)),t},setAxes:function(t,n,a,r){const o=N;return o[0]=a[0],o[3]=a[1],o[6]=a[2],o[1]=r[0],o[4]=r[1],o[7]=r[2],o[2]=-n[0],o[5]=-n[1],o[8]=-n[2],C(t,E(t,o))}});export{L as C,j as I,D as N,x as P,A as v,v as w}