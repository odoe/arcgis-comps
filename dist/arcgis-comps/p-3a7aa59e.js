import{m as e,O as r,r as o}from"./p-9ae46e68.js";import{e as n}from"./p-27ef204b.js";import{cE as t,cF as s,bQ as i,cG as a}from"./p-566b0715.js";import"./p-84bf99cb.js";import"./p-3a2e88bf.js";import"./p-fe01b82b.js";let c=u();function u(){return new n(50)}function m(){c=u()}function f(r,o){if("icon"===r.type)return l(r,o);if("object"===r.type)return p(r,o);throw new e("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function y(r,o){if("icon"===r.type)return function(e,r){return l(e,r).then((r=>{if(null==e.size)return r;const o=r[0]/r[1];return o>1?[e.size,e.size/o]:[e.size*o,e.size]}))}(r,o);if("object"===r.type)return async function(e,r){const o=await p(e,r);return s(o,e)}(r,o);throw new e("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function l(n,t){if(n.resource.href)return function(e){return r(e,{responseType:"image"}).then((e=>e.data))}(n.resource.href).then((e=>[e.width,e.height]));if(n.resource.primitive)return o(t)?[t,t]:[256,256];throw new e("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")}function p(e,r){return b(e,r).then((e=>t(e)))}async function b(r,n){if(!r.isPrimitive){const e=r.resource.href,o=c.get(e);if(void 0!==o)return Promise.resolve(o);const n=await import("./p-5d0ad4c1.js").then((function(e){return e.o})),t=await n.fetch(e,{disableTextures:!0});return c.put(e,t.referenceBoundingBox),t.referenceBoundingBox}let t=null;if(r.resource&&r.resource.primitive&&(t=i(a(r.resource.primitive)),o(n)))for(let e=0;e<t.length;e++)t[e]*=n;return t?Promise.resolve(t):Promise.reject(new e("symbol:invalid-resource","The symbol does not have a valid resource"))}export{m as clearBoundingBoxCache,l as computeIconLayerResourceSize,f as computeLayerResourceSize,y as computeLayerSize,p as computeObjectLayerResourceSize}