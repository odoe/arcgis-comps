import{bx as e,by as s,aI as o,bz as t,bA as n,a7 as r,ao as a,bB as l,bC as m,x as i,bD as b,bE as y,bF as u,bG as c}from"./p-7b6f6c18.js";import{a as p,t as f}from"./p-dede18bd.js";import"./p-227a5838.js";function g(e,s,o,t){return e.name?e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?S(e,s,t):n(e,s,t).then((n=>d(n,e.name,s,o,t))):Promise.reject(new r("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function d(n,u,g,d,S){const w=n.data,j={portal:g&&g.portal||a.getDefault(),url:o(n.baseUrl),origin:"portal-item"},N=w.items.find((e=>e.name===u));if(!N)return Promise.reject(new r("symbolstyleutils:symbol-name-not-found",`The symbol name '${u}' could not be found`,{symbolName:u}));let P=l(m(N,d),j),h=N.thumbnail&&N.thumbnail.href;const x=N.thumbnail&&N.thumbnail.imageData;p()&&(P=f(P),h=f(h));const D={portal:g.portal,url:o(t(P)),origin:"portal-item"};return e(P,S).then((e=>{const o="cimRef"===d?c(e.data):e.data,t=s(o,D);if(t&&i(t)){if(h){const e=l(h,j);t.thumbnail=new b({url:e})}else x&&(t.thumbnail=new b({url:`data:image/png;base64,${x}`}));n.styleUrl?t.styleOrigin=new y({portal:g.portal,styleUrl:n.styleUrl,name:u}):n.styleName&&(t.styleOrigin=new y({portal:g.portal,styleName:n.styleName,name:u}))}return t}))}function S(n,r,a){const l=u.replace(/\{SymbolName\}/gi,n.name);return e(l,a).then((e=>{const n=c(e.data);return s(n,{portal:r.portal,url:o(t(l)),origin:"portal-item"})}))}export{d as fetchSymbolFromStyle,g as resolveWebStyleSymbol}