import{c as e,s as r}from"./p-e58503d5.js";import{q as t,C as n,B as a,v as o}from"./p-4019eec3.js";function s(r,t,n,a,o){const s=r.referencesGeometry()&&o?i(t,a,o):t,c=r.repurposeFeature(s);try{return r.evaluate({...n,$feature:c})}catch(r){return e.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",r),null}}const c=new Map;function i(s,i,u){const{transform:m,hasZ:p,hasM:d}=u;c.has(i)||c.set(i,function(s){const c={};switch(s){case"esriGeometryPoint":return(e,r,t,n)=>o(r,c,e,t,n);case"esriGeometryPolygon":return(e,r,t,n)=>a(r,c,e,t,n);case"esriGeometryPolyline":return(e,r,t,a)=>n(r,c,e,t,a);case"esriGeometryMultipoint":return(e,r,n,a)=>t(r,c,e,n,a);default:return e.getLogger("esri.views.2d.support.arcadeOnDemand").error(new r("mapview-arcade",`Unable to handle geometryType: ${s}`)),e=>e}}(i));const l=c.get(i)(s.geometry,m,p,d);return{...s,geometry:l}}export{s}