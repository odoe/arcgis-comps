import"./p-b79fcce3.js";import{_ as t,A as n,af as e}from"./p-e58503d5.js";import{H as r}from"./p-01e5a461.js";function o(t,n){return n?"xoffset"in n&&n.xoffset?Math.max(t,Math.abs(n.xoffset)):"yoffset"in n&&n.yoffset?Math.max(t,Math.abs(n.yoffset||0)):t:t}function i(t,n){return"number"==typeof t?t:t&&t.stops&&t.stops.length?function(t){let n=0,e=0;for(let r=0;r<t.length;r++){const o=t[r].size;"number"==typeof o&&(n+=o,e++)}return n/e}(t.stops):n}function s(t,n){if(!n)return t;const e=n.filter((t=>"size"===t.type)).map((n=>{const{maxSize:e,minSize:r}=n;return(i(e,t)+i(r,t))/2}));let r=0;const o=e.length;if(0===o)return t;for(let t=0;t<o;t++)r+=e[t];const s=Math.floor(r/o);return Math.max(s,t)}function f(t){const n=t&&t.renderer,e="touch"===(t&&t.event&&t.event.pointerType)?9:6;if(!n)return e;const r="visualVariables"in n?s(e,n.visualVariables):e;if("simple"===n.type)return o(r,n.symbol);if("unique-value"===n.type){let t=r;return n.uniqueValueInfos.forEach((n=>{t=o(t,n.symbol)})),t}if("class-breaks"===n.type){let t=r;return n.classBreakInfos.forEach((n=>{t=o(t,n.symbol)})),t}return r}function u(e,o,i,s=new t){let f;if("2d"===i.type)f=o*i.resolution;else if("3d"===i.type){const t=i.overlayPixelSizeInMapUnits(e),s=i.basemapSpatialReference;f=n(s)&&!s.equals(i.spatialReference)?r(s)/r(i.spatialReference):o*t}const u=e.x-f,a=e.y-f,c=e.x+f,l=e.y+f,{spatialReference:h}=i;return s.xmin=Math.min(u,c),s.ymin=Math.min(a,l),s.xmax=Math.max(u,c),s.ymax=Math.max(a,l),s.spatialReference=h,s}function a(t,n,r){const o=r.toMap(t);return!e(o)&&u(o,f(),r,c).intersects(n)}const c=new t;export{u as a,a as o,f as s}