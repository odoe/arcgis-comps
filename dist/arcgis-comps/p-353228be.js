import{jI as t,jJ as s,jK as r,fN as n,cf as i,ch as e,ca as c,fm as h,fr as o,fv as a,jB as u}from"./p-c8bc3433.js";import{t as f,b as l}from"./p-2794293b.js";import{t as w}from"./p-01158f1c.js";class M{constructor(t){this.allocator=t,this._items=[],this._itemsPtr=0,this.grow()}get(){return 0===this._itemsPtr&&t((()=>this.reset())),this._itemsPtr===this._items.length&&this.grow(),this._items[this._itemsPtr++]}reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*m);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,m));t++)this._items.push(this.allocator())}}const m=1024;function g(){return[0,0,0,0]}function j(t,s,r,n){return[t,s,r,n]}function p(t,s){return new Float64Array(t,s,4)}function _(){return j(1,1,1,1)}function N(){return j(1,0,0,0)}function v(){return j(0,1,0,0)}function y(){return j(0,0,1,0)}function A(){return j(0,0,0,1)}const I=_(),V=N(),b=v(),T=y(),U=A();Object.freeze({__proto__:null,create:g,clone:function(t){return[t[0],t[1],t[2],t[3]]},fromValues:j,fromArray:function(t){const s=[0,0,0,0],r=Math.min(4,t.length);for(let n=0;n<r;++n)s[n]=t[n];return s},createView:p,zeros:function(){return[0,0,0,0]},ones:_,unitX:N,unitY:v,unitZ:y,unitW:A,ZEROS:[0,0,0,0],ONES:I,UNIT_X:V,UNIT_Y:b,UNIT_Z:T,UNIT_W:U});class O{constructor(t,s,r){this.itemByteSize=t,this.itemCreate=s,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(r/this.itemByteSize)}get(){0===this._itemsPtr&&t((()=>this.reset()));const s=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=s;){const t=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let s=0;s<this._itemsPerBuffer;++s)this._items.push(this.itemCreate(t,s*this.itemByteSize));this._buffers.push(t)}return this._items[this._itemsPtr++]}reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=Z){return new O(16,s,t)}static createVec3f64(t=Z){return new O(24,r,t)}static createVec4f64(t=Z){return new O(32,p,t)}static createMat3f64(t=Z){return new O(72,f,t)}static createMat4f64(t=Z){return new O(128,w,t)}static createQuatf64(t=Z){return new O(32,l,t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}const Z=4096;O.createVec2f64();const z=O.createVec3f64(),B=O.createVec4f64();O.createMat3f64();const E=O.createMat4f64();function S(t){return t?{origin:n(t.origin),vector:n(t.vector)}:{origin:i(),vector:i()}}function W(t,s){const r=a(z.get(),s,t.origin),n=o(t.vector,r),i=o(t.vector,t.vector),h=c(n/i,0,1),u=a(z.get(),e(z.get(),t.vector,h),r);return o(u,u)}function X(t,s,r,n,i){const{vector:f,origin:l}=t,w=a(z.get(),s,l),M=o(f,w)/u(f);return e(i,f,c(M,r,n)),h(i,i,t.origin)}O.createQuatf64(),new M((()=>({origin:null,vector:null})));export{X as A,j as a,W as b,z as c,E as f,g as n,B as r,M as s,S as v}