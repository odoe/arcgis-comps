import{L as t,N as n,O as r,gg as e,K as o,gd as u,gz as s,I as c,J as i,dG as a,gh as f,T as l,gM as h,t as p,iv as d,go as g,gr as m,gj as M,k8 as y,dF as j,k2 as A,he as R,r as x}from"./p-5420851c.js";import{n as S,r as _}from"./p-078c732e.js";import{s as w,c as C,f as O}from"./p-74752c79.js";import"./p-01158f1c.js";function P(t){return t?{origin:s(t.origin),direction:s(t.direction)}:{origin:c(),direction:c()}}function T(t,n=P()){return function(t,n,r=P()){return i(r.origin,t),i(r.direction,n),r}(t.origin,t.direction,n)}function k(t,n){const s=e(C.get(),u(C.get(),t.direction),o(C.get(),n,t.origin));return r(s,s)}function v(t,n){return r(t,n)/a(t)}new w((function(){return{origin:null,direction:null}}));const E=l.getLogger("esri.geometry.support.sphere");function b(){return S()}function z(t,n=b()){return h(n,t)}function F(t){t[0]=t[1]=t[2]=t[3]=0}function G(t){return Array.isArray(t)?t[3]:t}function I(t){return Array.isArray(t)?t:H}function J(t,n,r){if(p(n))return!1;const{origin:e,direction:o}=n,u=K;u[0]=e[0]-t[0],u[1]=e[1]-t[1],u[2]=e[2]-t[2];const s=o[0]*o[0]+o[1]*o[1]+o[2]*o[2],c=2*(o[0]*u[0]+o[1]*u[1]+o[2]*u[2]),i=c*c-4*s*(u[0]*u[0]+u[1]*u[1]+u[2]*u[2]-t[3]*t[3]);if(i<0)return!1;const a=Math.sqrt(i);let f=(-c-a)/(2*s);const l=(-c+a)/(2*s);return(f<0||l<f&&l>0)&&(f=l),!(f<0||(r&&(r[0]=e[0]+o[0]*f,r[1]=e[1]+o[1]*f,r[2]=e[2]+o[2]*f),0))}const K=c();function L(t,o,u){const s=C.get(),c=O.get();e(s,o.origin,o.direction);const i=G(t);e(u,s,o.origin),n(u,u,1/a(u)*i);const l=V(t,o.origin),h=function(t,n){const e=r(t,n)/(a(t)*a(n));return-f(e)}(o.origin,u);return d(c),g(c,c,h+l,s),m(u,u,c),u}function N(r,e,u){const s=o(C.get(),e,I(r)),c=n(C.get(),s,r[3]/a(s));return t(u,c,I(r))}function V(t,n){const r=o(C.get(),n,I(t)),e=a(r),u=G(t),s=u+Math.abs(u-e);return f(u/s)}const q=c();function B(t,n,r,e){const s=o(q,n,I(t));switch(r){case 0:{const t=y(s,q)[2];return j(e,-Math.sin(t),Math.cos(t),0)}case 1:{const t=y(s,q),n=t[1],r=t[2],o=Math.sin(n);return j(e,-o*Math.cos(r),-o*Math.sin(r),Math.cos(n))}case 2:return u(e,s);default:return}}function D(t,n){const r=o(Q,n,I(t));return a(r)-t[3]}const H=c(),Q=c();Object.freeze({__proto__:null,create:b,copy:z,fromCenterAndRadius:function(t,n){return _(t[0],t[1],t[2],n)},wrap:function(t){return t},clear:F,fromRadius:function(t){return t},getRadius:G,getCenter:I,fromValues:function(t,n,r,e){return _(t,n,r,e)},elevate:function(t,n,r){return t!==r&&i(r,t),r[3]=t[3]+n,r},setExtent:function(t,n,r){return E.error("sphere.setExtent is not yet supported"),t===r?r:z(t,r)},intersectRay:J,intersectsRay:function(t,n){return J(t,n,null)},intersectRayClosestSilhouette:function(r,e,o){if(J(r,e,o))return o;const u=L(r,e,C.get());return t(o,e.origin,n(C.get(),e.direction,M(e.origin,u)/a(e.direction))),o},closestPointOnSilhouette:L,closestPoint:function(e,u,s){return J(e,u,s)?s:(function(e,u,s){const c=r(e.direction,o(s,u,e.origin));t(s,e.origin,n(s,e.direction,c))}(u,I(e),s),N(e,s,s))},projectPoint:N,distanceToSilhouette:function(t,n){const r=o(C.get(),n,I(t)),e=A(r);return Math.sqrt(Math.abs(e-t[3]*t[3]))},angleToSilhouette:V,axisAt:B,altitudeAt:D,setAltitudeAt:function(r,e,o,u){const s=D(r,e),c=B(r,e,2,Q),i=n(Q,c,o-s);return t(u,e,i)}});class U{constructor(){this.id=R()}unload(){}}function W(t,n){return p(t)&&(t=[]),t.push(n),t}function X(t,n){if(p(t))return null;const r=t.filter((t=>t!==n));return 0===r.length?null:r}function Y(t){return!!x(t)&&!t.visible}export{F as C,b as P,Y as c,P as d,v as e,W as f,k as h,T as l,U as r,X as u}