import { _, z as z$1, u, r as r$2, d, c as c$1, e, F as F$1, a as j$1 } from './mathUtils-e16f9389.js';
import { A as r$1 } from './messageBundle-f75b4090.js';
import { n } from './common-d5b993de.js';
import './sphere-c3d60863.js';
import { r, c } from './vectorStacks-9205ea46.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function p(n=X){return [n[0],n[1],n[2],n[3]]}function M(n,t,r$1,c){return j(n,t,r$1,c,r.get())}function b(n,t=p()){return j(n[0],n[1],n[2],n[3],t)}function j(n,t,r,c,o=p()){return o[0]=n,o[1]=t,o[2]=r,o[3]=c,o}function k(n,t,c){return r$2(c,n),c[3]=t,c}function v(n,t,r){const c=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],o=Math.abs(c-1)>1e-5&&c>1e-12?1/Math.sqrt(c):1;return r[0]=t[0]*o,r[1]=t[1]*o,r[2]=t[2]*o,r[3]=-(r[0]*n[0]+r[1]*n[1]+r[2]*n[2]),r}function y(n,t,r,c=p()){const o=r[0]-t[0],e=r[1]-t[1],u=r[2]-t[2],i=n[0]-t[0],f=n[1]-t[1],s=n[2]-t[2],a=e*s-u*f,g=u*i-o*s,m=o*f-e*i,h=a*a+g*g+m*m,M=Math.abs(h-1)>1e-5&&h>1e-12?1/Math.sqrt(h):1;c[0]=a*M,c[1]=g*M,c[2]=m*M,c[3]=-(c[0]*n[0]+c[1]*n[1]+c[2]*n[2]);}function l(n,t,r,i,f){if(n.count<3)return !1;n.getVec(r,q);let s=i,a=!1;for(;s<n.count-1&&!a;)n.getVec(s,x),s++,a=!F$1(q,x);if(!a)return !1;for(s=Math.max(s,f),a=!1;s<n.count&&!a;)n.getVec(s,S),s++,c$1(U,q,x),j$1(U,U),c$1(w,x,S),j$1(w,w),a=!F$1(q,S)&&!F$1(x,S)&&Math.abs(z$1(U,w))<V;return a?(y(q,x,S,t),!0):(0!==r||1!==i||2!==f)&&l(n,t,0,1,2)}const V=.99619469809,q=n(),x=n(),S=n(),U=n(),w=n();function z(n,t,r){return n!==r&&b(n,r),r[3]=-z$1(W(r),t),r}function A(n,t){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t}function B(n,t,r,c){return _(S,t,n),v(r,S,c)}function C(n,t,r,c$2){return T(n,t,c$1(c.get(),r,t),Y,c$2)}function D(n,r,c){return !!r$1(r)&&T(n,r.origin,r.direction,Z,c)}function E(n,t,r){return T(n,t.origin,t.vector,0,r)}function F(n,t,r){return T(n,t.origin,t.vector,1,r)}function I(n,t){return R(n,t)>=0}function K(n,t){const r=t[0],c=t[1],o=t[2],e=t[3],u=t[4],i=t[5];return n[0]*(n[0]>0?r:e)+n[1]*(n[1]>0?c:u)+n[2]*(n[2]>0?o:i)+n[3]>=0}function L(n,t){const r=z$1(W(n),t.ray.direction),c=-R(n,t.ray.origin);if(c<0&&r>=0)return !1;if(r>-1e-6&&r<1e-6)return c>0;if((c<0||r<0)&&!(c<0&&r<0))return !0;const o=c/r;return r>0?o<t.c1&&(t.c1=o):o>t.c0&&(t.c0=o),t.c0<=t.c1}function N(n,t){const r=z$1(W(n),t.ray.direction),c=-R(n,t.ray.origin);if(r>-1e-6&&r<1e-6)return c>0;const o=c/r;return r>0?o<t.c1&&(t.c1=o):o>t.c0&&(t.c0=o),t.c0<=t.c1}function O(n,t,r){const c$2=d(c.get(),W(n),-n[3]),e=P(n,c$1(c.get(),t,c$2),c.get());return u(r,e,c$2),r}function P(n,t,r){const c$2=d(c.get(),W(n),z$1(W(n),t));return c$1(r,t,c$2),r}function R(n,t){return z$1(W(n),t)+n[3]}function T(t,r,c,o,e$1){const i=z$1(W(t),c);if(0===i)return !1;let a=-(z$1(W(t),r)+t[3])/i;return 1&o&&(a=e(a,0,1)),!(!(4&o)&&a<0||!(8&o)&&a>1)&&(u(e$1,r,d(e$1,c,a)),!0)}function W(n){return n}const X=[0,0,1,0],Y=12,Z=8;

export { A, B, C, D, E, F, I, K, L, M, N, O, P, R, W, b, j, k, l, p, v, y, z };
